{"info": {"author": "Arni Inaba Kjartansson", "author_email": "arni@inaba.is", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7"], "description": "asgi-request-id\n===============\n\n[![PyPI Downloads](https://img.shields.io/pypi/dm/asgi-request-id.svg)](https://pypi.org/project/asgi-request-id/)\n[![PyPI Version](https://img.shields.io/pypi/v/asgi-request-id.svg)](https://pypi.org/project/asgi-request-id/)\n[![License](https://img.shields.io/badge/license-mit-blue.svg)](https://pypi.org/project/asgi-request-id)\n\nThis was developed at [GRID](https://github.com/GRID-is) for use with our\npython backend services and intended to make it easier to log/generate \nrequest IDs.\n\ninstallation\n------------\n```\npip install asgi-request-id\n```\n\nusage\n-----\n```python\nimport logging\nimport uvicorn\n\nfrom starlette.applications import Starlette\nfrom starlette.responses import PlainTextResponse\n\nfrom asgi_request_id import RequestIDMiddleware, get_request_id\n\nlogger = logging.getLogger(__name__)\napp = Starlette()\n\n\n@app.route(\"/\")\ndef homepage(request):\n    logger.info(f\"Request ID: {get_request_id()}\")\n    return PlainTextResponse(\"hello world\")\n\n\napp.add_middleware(\n    RequestIDMiddleware,\n    incoming_request_id_header=\"x-amzn-trace-id\",\n    prefix=\"myapp-\",\n)\n\nif __name__ == \"__main__\":\n    uvicorn.run(app)\n```\nThe package will do the following:\n\nSearch for an incoming request identifier and use it as the request id if found.\nIf it is not found, an unique request id with an optional prefix is generated.\n\nThe request id is stored in a context variable and made available via \n`get_request_id`\n\nFinally, it is set as the `request_id` response header.", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/arni-inaba/asgi-request-id", "keywords": "", "license": "MIT", "maintainer": "Arni Inaba Kjartansson", "maintainer_email": "arni@inaba.is", "name": "asgi-request-id", "package_url": "https://pypi.org/project/asgi-request-id/", "platform": "", "project_url": "https://pypi.org/project/asgi-request-id/", "project_urls": {"Homepage": "https://github.com/arni-inaba/asgi-request-id", "Repository": "https://github.com/arni-inaba/asgi-request-id"}, "release_url": "https://pypi.org/project/asgi-request-id/0.1.2/", "requires_dist": null, "requires_python": ">=3.6,<4.0", "summary": "ASGI request id middleware", "version": "0.1.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>asgi-request-id</h1>\n<p><a href=\"https://pypi.org/project/asgi-request-id/\" rel=\"nofollow\"><img alt=\"PyPI Downloads\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/bb0aa1e98a5c08389d1ad7e0780f81061716b124/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f617367692d726571756573742d69642e737667\"></a>\n<a href=\"https://pypi.org/project/asgi-request-id/\" rel=\"nofollow\"><img alt=\"PyPI Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3d3e10884d2589f2bbafbe7e68da8efba0aba1bd/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f617367692d726571756573742d69642e737667\"></a>\n<a href=\"https://pypi.org/project/asgi-request-id\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e9658f321e7cf32253c97c200157f7191ccce1b9/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d6d69742d626c75652e737667\"></a></p>\n<p>This was developed at <a href=\"https://github.com/GRID-is\" rel=\"nofollow\">GRID</a> for use with our\npython backend services and intended to make it easier to log/generate\nrequest IDs.</p>\n<h2>installation</h2>\n<pre><code>pip install asgi-request-id\n</code></pre>\n<h2>usage</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"kn\">import</span> <span class=\"nn\">uvicorn</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.applications</span> <span class=\"kn\">import</span> <span class=\"n\">Starlette</span>\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.responses</span> <span class=\"kn\">import</span> <span class=\"n\">PlainTextResponse</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">asgi_request_id</span> <span class=\"kn\">import</span> <span class=\"n\">RequestIDMiddleware</span><span class=\"p\">,</span> <span class=\"n\">get_request_id</span>\n\n<span class=\"n\">logger</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Starlette</span><span class=\"p\">()</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">homepage</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"Request ID: </span><span class=\"si\">{</span><span class=\"n\">get_request_id</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">PlainTextResponse</span><span class=\"p\">(</span><span class=\"s2\">\"hello world\"</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">add_middleware</span><span class=\"p\">(</span>\n    <span class=\"n\">RequestIDMiddleware</span><span class=\"p\">,</span>\n    <span class=\"n\">incoming_request_id_header</span><span class=\"o\">=</span><span class=\"s2\">\"x-amzn-trace-id\"</span><span class=\"p\">,</span>\n    <span class=\"n\">prefix</span><span class=\"o\">=</span><span class=\"s2\">\"myapp-\"</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">uvicorn</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n</pre>\n<p>The package will do the following:</p>\n<p>Search for an incoming request identifier and use it as the request id if found.\nIf it is not found, an unique request id with an optional prefix is generated.</p>\n<p>The request id is stored in a context variable and made available via\n<code>get_request_id</code></p>\n<p>Finally, it is set as the <code>request_id</code> response header.</p>\n\n          </div>"}, "last_serial": 6799766, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "8f5164c237b1b74f3da12701ce801b34", "sha256": "d6ae35d074e008a27b8a44a1686848756f8d5cc710d2098ea3ff89a7de939c56"}, "downloads": -1, "filename": "asgi_request_id-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8f5164c237b1b74f3da12701ce801b34", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7,<4.0", "size": 3072, "upload_time": "2019-10-26T23:30:06", "upload_time_iso_8601": "2019-10-26T23:30:06.331334Z", "url": "https://files.pythonhosted.org/packages/fd/2a/ee103d0ce84f33d43f9e80cb86871b52d13e8c960233593b8e3c37f60a54/asgi_request_id-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "a44ec76138085d72cb53664168f52986", "sha256": "90ee57163b816fcc5976c0b3a2be300ee9cbd7f88acbf9f6a82f8eb0bcf588f3"}, "downloads": -1, "filename": "asgi-request-id-0.1.0.tar.gz", "has_sig": false, "md5_digest": "a44ec76138085d72cb53664168f52986", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7,<4.0", "size": 2450, "upload_time": "2019-10-26T23:30:03", "upload_time_iso_8601": "2019-10-26T23:30:03.893453Z", "url": "https://files.pythonhosted.org/packages/30/4c/f235c148f8f315a679cde59e47c09e4e8def6125d34071f47f1412f546ed/asgi-request-id-0.1.0.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "25f2b5d84939e9c897cf6078944272b9", "sha256": "fabbd60e7928ec7a5ad386c2a384cd724cd70ad8ccbd6782242fa2a3658db7b1"}, "downloads": -1, "filename": "asgi_request_id-0.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "25f2b5d84939e9c897cf6078944272b9", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 2741, "upload_time": "2020-03-12T14:42:58", "upload_time_iso_8601": "2020-03-12T14:42:58.581996Z", "url": "https://files.pythonhosted.org/packages/7c/04/10fcb71bae08628f679e7431766ce8609f1b059375a091eb62ce78060ee0/asgi_request_id-0.1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "91042e116d970a5f5f3d0e65f9c60992", "sha256": "707acde3e695898575e61d8c1caac89f7525d6df259e1b0977ab6ce950323b84"}, "downloads": -1, "filename": "asgi-request-id-0.1.2.tar.gz", "has_sig": false, "md5_digest": "91042e116d970a5f5f3d0e65f9c60992", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 2508, "upload_time": "2020-03-12T14:42:57", "upload_time_iso_8601": "2020-03-12T14:42:57.221167Z", "url": "https://files.pythonhosted.org/packages/ba/d2/c45131257a9272cb709fe99b3de6c416647b39123866b79f25a5a7948415/asgi-request-id-0.1.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "25f2b5d84939e9c897cf6078944272b9", "sha256": "fabbd60e7928ec7a5ad386c2a384cd724cd70ad8ccbd6782242fa2a3658db7b1"}, "downloads": -1, "filename": "asgi_request_id-0.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "25f2b5d84939e9c897cf6078944272b9", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 2741, "upload_time": "2020-03-12T14:42:58", "upload_time_iso_8601": "2020-03-12T14:42:58.581996Z", "url": "https://files.pythonhosted.org/packages/7c/04/10fcb71bae08628f679e7431766ce8609f1b059375a091eb62ce78060ee0/asgi_request_id-0.1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "91042e116d970a5f5f3d0e65f9c60992", "sha256": "707acde3e695898575e61d8c1caac89f7525d6df259e1b0977ab6ce950323b84"}, "downloads": -1, "filename": "asgi-request-id-0.1.2.tar.gz", "has_sig": false, "md5_digest": "91042e116d970a5f5f3d0e65f9c60992", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 2508, "upload_time": "2020-03-12T14:42:57", "upload_time_iso_8601": "2020-03-12T14:42:57.221167Z", "url": "https://files.pythonhosted.org/packages/ba/d2/c45131257a9272cb709fe99b3de6c416647b39123866b79f25a5a7948415/asgi-request-id-0.1.2.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:17:00 2020"}