{"info": {"author": "Huan Di", "author_email": "hd@iamhd.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: Implementation :: CPython", "Programming Language :: Python :: Implementation :: PyPy"], "description": "# restful-client-lite [![Build Status](https://travis-ci.com/huandzh/restful-client-lite.svg?branch=master)](https://travis-ci.com/huandzh/restful-client-lite)\n\nA lite client for RESTFul APIs with limited features.\n\nIt provides:\n\n* `restful_client_lite.APIClient`: client for [eve](https://docs.python-eve.org) token-auth apps\n* `restful_client_lite.contrib.AliyunApiGatewayClient`: client for apis generated by [aliyun DataService](https://help.aliyun.com/document_detail/73295.html?spm=a2c4g.11186623.6.838.74b233b40qZs2W) (only `GET` is supported)\n\nWIP.(not stable before v0.1.0)\n\n## Installation\n\n### Lastest release ![PyPI](https://img.shields.io/pypi/v/restful_client_lite) \n\npipenv:\n\n```shell\npipenv install restful_client_lite\n```\n\npip:\n\n```shell\npip install restful_client_lite\n```\n### Dev\n\npipenv:\n\n```shell\npipenv install -e git+https://github.com/huandzh/restful-client-lite#egg=restful-client-lite\n```\n\npip:\n\n```shell\npip install -e git+https://github.com/huandzh/restful-client-lite#egg=restful-client-lite\n```\n\n## Usage\n\nAssume that we have a restful api requiring `Authorization:<token>` in the header and using etag to control writes.\n\nCreate an API client:\n\n```python\nfrom restful_client_lite import APIClient\napi = APIClient(\"<api_root>\", {\"token\": \"<token>\"})\n```\n\nGet from url:\n\n```python\nres_get = api.get(\"<url>\")\n```\n\nPost to url:\n\n```python\nres_post = api.post(\"<url>\", data={\"<key>\": \"<value>\"})\n```\n\nPatch url:\n\n```python\nres_patch = api.patch(\"<url>\", \"<etag>\", data={\"<key>\": \"<value>\"})\n```\n\nPatch url (fetch etag automatically in advance):\n\n```python\nres_patch = api.patch_auto_etag(\"<url>\", data={\"<key>\": \"<value>\"})\n```\n\nDelete url:\n\n```python\nres_delete = api.delete(\"<url>\", \"<etag>\")\n```\n\nDelete url (fetch etag automatically in advance):\n\n```python\nres_delete = api.delete_auto_etag(\"<url>\")\n```\n\nSubclass `APIClient` to create custom api client:\n\n```python\ndef sign(url):\n    \"\"\"some function return signature\"\"\"\n    ...\n    return <signed url>\n\nclass CustomAPIClient(APIClient):\n    \"\"\"custom api client\"\"\"\n\n    def auth_headers(self, f: Callable) -> Callable:\n        \"\"\"custom auth headers\"\"\"\n        @wraps(f)\n        def wrapper(*args, **kwargs):\n            headers = kwargs.get(\"headers\", {}).copy()\n            url = args[0]\n            headers.update({\"Signature\": sign(url)})\n            kwargs[\"headers\"] = headers\n            return f(*args, **kwargs)\n```\n\n## 3rd-party APIs\n\n### aliyun api gateway\n\n`AliyunApiGatewayClient` :\n\n* support `GET` from aliyun-api-gateway apis (apis may generated by DataService)\n* handle authorization headers\n* **doesn't** sort url params\n\n```python\nfrom restful_client_lite.contrib.aliyun import AliyunApiGatewayClient\napi = AliyunApiGatewayClient(\n    '<api_root>',\n    {\"app_id\": '<app_id>',\n    \"app_secret\": '<app_secret>'})\n# make sure params in <url> are sorted\nres = api.get('<url>')\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/huandzh/restful-client-lite", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "restful-client-lite", "package_url": "https://pypi.org/project/restful-client-lite/", "platform": "", "project_url": "https://pypi.org/project/restful-client-lite/", "project_urls": {"Homepage": "https://github.com/huandzh/restful-client-lite"}, "release_url": "https://pypi.org/project/restful-client-lite/0.0.2/", "requires_dist": null, "requires_python": ">=3.5.0", "summary": "A lite client for restful APIs.", "version": "0.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>restful-client-lite <a href=\"https://travis-ci.com/huandzh/restful-client-lite\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4c884c97187b2e2e4fad6c97e2a15916d8f7e909/68747470733a2f2f7472617669732d63692e636f6d2f6875616e647a682f7265737466756c2d636c69656e742d6c6974652e7376673f6272616e63683d6d6173746572\"></a></h1>\n<p>A lite client for RESTFul APIs with limited features.</p>\n<p>It provides:</p>\n<ul>\n<li><code>restful_client_lite.APIClient</code>: client for <a href=\"https://docs.python-eve.org\" rel=\"nofollow\">eve</a> token-auth apps</li>\n<li><code>restful_client_lite.contrib.AliyunApiGatewayClient</code>: client for apis generated by <a href=\"https://help.aliyun.com/document_detail/73295.html?spm=a2c4g.11186623.6.838.74b233b40qZs2W\" rel=\"nofollow\">aliyun DataService</a> (only <code>GET</code> is supported)</li>\n</ul>\n<p>WIP.(not stable before v0.1.0)</p>\n<h2>Installation</h2>\n<h3>Lastest release <img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/cf99e05b666d0c05166a31a00f6a2f6f92e7bcda/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7265737466756c5f636c69656e745f6c697465\"></h3>\n<p>pipenv:</p>\n<pre>pipenv install restful_client_lite\n</pre>\n<p>pip:</p>\n<pre>pip install restful_client_lite\n</pre>\n<h3>Dev</h3>\n<p>pipenv:</p>\n<pre>pipenv install -e git+https://github.com/huandzh/restful-client-lite#egg<span class=\"o\">=</span>restful-client-lite\n</pre>\n<p>pip:</p>\n<pre>pip install -e git+https://github.com/huandzh/restful-client-lite#egg<span class=\"o\">=</span>restful-client-lite\n</pre>\n<h2>Usage</h2>\n<p>Assume that we have a restful api requiring <code>Authorization:&lt;token&gt;</code> in the header and using etag to control writes.</p>\n<p>Create an API client:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">restful_client_lite</span> <span class=\"kn\">import</span> <span class=\"n\">APIClient</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">APIClient</span><span class=\"p\">(</span><span class=\"s2\">\"&lt;api_root&gt;\"</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">\"token\"</span><span class=\"p\">:</span> <span class=\"s2\">\"&lt;token&gt;\"</span><span class=\"p\">})</span>\n</pre>\n<p>Get from url:</p>\n<pre><span class=\"n\">res_get</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"&lt;url&gt;\"</span><span class=\"p\">)</span>\n</pre>\n<p>Post to url:</p>\n<pre><span class=\"n\">res_post</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">post</span><span class=\"p\">(</span><span class=\"s2\">\"&lt;url&gt;\"</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"&lt;key&gt;\"</span><span class=\"p\">:</span> <span class=\"s2\">\"&lt;value&gt;\"</span><span class=\"p\">})</span>\n</pre>\n<p>Patch url:</p>\n<pre><span class=\"n\">res_patch</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s2\">\"&lt;url&gt;\"</span><span class=\"p\">,</span> <span class=\"s2\">\"&lt;etag&gt;\"</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"&lt;key&gt;\"</span><span class=\"p\">:</span> <span class=\"s2\">\"&lt;value&gt;\"</span><span class=\"p\">})</span>\n</pre>\n<p>Patch url (fetch etag automatically in advance):</p>\n<pre><span class=\"n\">res_patch</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">patch_auto_etag</span><span class=\"p\">(</span><span class=\"s2\">\"&lt;url&gt;\"</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"&lt;key&gt;\"</span><span class=\"p\">:</span> <span class=\"s2\">\"&lt;value&gt;\"</span><span class=\"p\">})</span>\n</pre>\n<p>Delete url:</p>\n<pre><span class=\"n\">res_delete</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"s2\">\"&lt;url&gt;\"</span><span class=\"p\">,</span> <span class=\"s2\">\"&lt;etag&gt;\"</span><span class=\"p\">)</span>\n</pre>\n<p>Delete url (fetch etag automatically in advance):</p>\n<pre><span class=\"n\">res_delete</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">delete_auto_etag</span><span class=\"p\">(</span><span class=\"s2\">\"&lt;url&gt;\"</span><span class=\"p\">)</span>\n</pre>\n<p>Subclass <code>APIClient</code> to create custom api client:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">sign</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"some function return signature\"\"\"</span>\n    <span class=\"o\">...</span>\n    <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">signed</span> <span class=\"n\">url</span><span class=\"o\">&gt;</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">CustomAPIClient</span><span class=\"p\">(</span><span class=\"n\">APIClient</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"custom api client\"\"\"</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">auth_headers</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">f</span><span class=\"p\">:</span> <span class=\"n\">Callable</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">Callable</span><span class=\"p\">:</span>\n        <span class=\"sd\">\"\"\"custom auth headers\"\"\"</span>\n        <span class=\"nd\">@wraps</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">)</span>\n        <span class=\"k\">def</span> <span class=\"nf\">wrapper</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n            <span class=\"n\">headers</span> <span class=\"o\">=</span> <span class=\"n\">kwargs</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"headers\"</span><span class=\"p\">,</span> <span class=\"p\">{})</span><span class=\"o\">.</span><span class=\"n\">copy</span><span class=\"p\">()</span>\n            <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">args</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n            <span class=\"n\">headers</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">({</span><span class=\"s2\">\"Signature\"</span><span class=\"p\">:</span> <span class=\"n\">sign</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">)})</span>\n            <span class=\"n\">kwargs</span><span class=\"p\">[</span><span class=\"s2\">\"headers\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">headers</span>\n            <span class=\"k\">return</span> <span class=\"n\">f</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n</pre>\n<h2>3rd-party APIs</h2>\n<h3>aliyun api gateway</h3>\n<p><code>AliyunApiGatewayClient</code> :</p>\n<ul>\n<li>support <code>GET</code> from aliyun-api-gateway apis (apis may generated by DataService)</li>\n<li>handle authorization headers</li>\n<li><strong>doesn't</strong> sort url params</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">restful_client_lite.contrib.aliyun</span> <span class=\"kn\">import</span> <span class=\"n\">AliyunApiGatewayClient</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">AliyunApiGatewayClient</span><span class=\"p\">(</span>\n    <span class=\"s1\">'&lt;api_root&gt;'</span><span class=\"p\">,</span>\n    <span class=\"p\">{</span><span class=\"s2\">\"app_id\"</span><span class=\"p\">:</span> <span class=\"s1\">'&lt;app_id&gt;'</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"app_secret\"</span><span class=\"p\">:</span> <span class=\"s1\">'&lt;app_secret&gt;'</span><span class=\"p\">})</span>\n<span class=\"c1\"># make sure params in &lt;url&gt; are sorted</span>\n<span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'&lt;url&gt;'</span><span class=\"p\">)</span>\n</pre>\n\n          </div>"}, "last_serial": 5696349, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "99a1cda63e73af5868975f1f9157a31f", "sha256": "a9debdbb5a909e4faecd9fa3dee12a246e40f4a32cff77ff4175ad14aa2a8e1b"}, "downloads": -1, "filename": "restful-client-lite-0.0.1.tar.gz", "has_sig": false, "md5_digest": "99a1cda63e73af5868975f1f9157a31f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5.0", "size": 3941, "upload_time": "2019-08-13T08:16:35", "upload_time_iso_8601": "2019-08-13T08:16:35.179178Z", "url": "https://files.pythonhosted.org/packages/b3/f6/3143c0bdb8b10737171f28426a3f80d0e26e5b3ca592c07246684e923af3/restful-client-lite-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "a492e1ae7026b3c33716ed81391c1581", "sha256": "ee232be0b9004eabaa798d4e8cc9c420a056b1ed43e29283adf15539ca9e96aa"}, "downloads": -1, "filename": "restful-client-lite-0.0.2.tar.gz", "has_sig": false, "md5_digest": "a492e1ae7026b3c33716ed81391c1581", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5.0", "size": 5965, "upload_time": "2019-08-19T01:57:27", "upload_time_iso_8601": "2019-08-19T01:57:27.570142Z", "url": "https://files.pythonhosted.org/packages/db/51/871203d662d97d2e0f381a5b5fd675ecb33c457508b07647823484a339b1/restful-client-lite-0.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "a492e1ae7026b3c33716ed81391c1581", "sha256": "ee232be0b9004eabaa798d4e8cc9c420a056b1ed43e29283adf15539ca9e96aa"}, "downloads": -1, "filename": "restful-client-lite-0.0.2.tar.gz", "has_sig": false, "md5_digest": "a492e1ae7026b3c33716ed81391c1581", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5.0", "size": 5965, "upload_time": "2019-08-19T01:57:27", "upload_time_iso_8601": "2019-08-19T01:57:27.570142Z", "url": "https://files.pythonhosted.org/packages/db/51/871203d662d97d2e0f381a5b5fd675ecb33c457508b07647823484a339b1/restful-client-lite-0.0.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:03:39 2020"}