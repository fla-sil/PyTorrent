{"info": {"author": "Michal Kuffa", "author_email": "michal.kuffa@gmail.com", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Operating System :: OS Independent", "Programming Language :: Python :: 2.6", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.2", "Topic :: Software Development"], "description": "trustpaylib\n===========\n\n.. image:: https://travis-ci.org/beezz/trustpaylib.svg?branch=master\n    :target: https://travis-ci.org/beezz/trustpaylib\n\n.. image:: https://coveralls.io/repos/beezz/trustpaylib/badge.png\n   :target: https://coveralls.io/r/beezz/trustpaylib \n\n\nTrustPay payment solution integration helpers.\n\n\nInstall\n-------\n\n.. code:: bash\n\n   $ pip install trustpaylib\n\n\n\nUsage\n-----\n\n\nLink approach\n.............\n\nCreate environment, payment request and generate signed link. \n\n.. code:: pycon\n\n    >>> import trustpaylib\n    >>> \n    >>> env = trustpaylib.build_environment(\n    ...     aid=\"1234567890\",\n    ...     secret_key=\"abcd1234\",\n    ...     # api_url=trustpaylib.TRUSTCARD_API_URL,\n    ... )\n    >>> pay_request = trustpaylib.build_pay_request(\n    ...     AMT=\"123.45\",\n    ...     CUR=\"EUR\",\n    ...     REF=\"1234567890\",\n    ... )\n    >>> trustpay_client = trustpaylib.TrustPay(env)\n    >>> trustpay_client.build_link(pay_request)\n    'https://ib.trustpay.eu/mapi/paymentservice.aspx?AID=9876543210&REF=1234567890&AMT=123.45&SIG=DF174E635DABBFF7897A82822521DD739AE8CC2F83D65F6448DD2FF991481EA3&CUR=EUR'\n\n\n\nForm approach\n.............\n\nFirst merge payment request with environment variables, validate it and sign.\n`trustpaylib.TrustPay.finalize_request` returns prepared payment\nrequest. As form action use `trustpay_client.environment.api_url`.\n\n\n.. code:: pycon\n\n    >>> pay_request = trustpay_client.finalize_request(pay_request)\n    >>> trustpay_client.initial_data(pay_request)\n    {'AID': '9876543210', 'REF': u'1234567890', 'AMT': u'123.45', 'SIG': 'DF174E635DABBFF7897A82822521DD739AE8CC2F83D65F6448DD2FF991481EA3', 'CUR': u'EUR'}\n    >>> trustpay_client.environment.api_url\n    'https://ib.trustpay.eu/mapi/paymentservice.aspx'\n\n\nRedirects handling\n..................\n\nThere's not much you can (or should) do with redirect.\n\n.. note::\n\n     Official TrustPay documentation: DO NOT PERFORM ANY ACTION ON THIS REDIRECT.\n     Data is not signed and therefore cannot beconsidered as a verified payment result, such\n     as the signed results sent to Notification URL or NotificationEmail.\n\n\nBut at least you can check the result code.\n\n\n.. code:: pycon\n\n    >>> # data received as get params to redirect\n    ... redirect_data = {\"REF\": \"1234567890\", \"RES\": 3, \"PID\": \"1212321\"}\n    >>> redirect = trustpaylib.build_redirect(**redirect_data)\n    >>> \n    >>> trustpay_client.get_result_desc_from_redirect(redirect).short\n    'Authorized'\n    >>> trustpay_client.get_result_desc_from_redirect(redirect).long\n    'Payment was successfully authorized. Another notification (with result code 0 - success) will be sent when TrustPay receives and processes payment from 3rd party.'\n\n\n\nNotifications handling\n......................\n\n\nFor received notification, first check signature.\n\n.. code:: pycon\n\n    >>> notification_data = {\n    ...     \"AID\": \"1234567890\",\n    ...     \"TYP\": \"CRDT\",\n    ...     \"AMT\": \"123.45\",\n    ...     \"CUR\": \"EUR\",\n    ...     \"REF\": \"9876543210\",\n    ...     \"RES\": \"0\",\n    ...     \"TID\": \"11111\",\n    ...     \"OID\": \"1122334455\",\n    ...     \"TSS\": \"Y\",\n    ...     \"SIG\": (\n    ...         \"97C92D7A0C0AD99CE5DE55C3597D5ADA\"\n    ...         \"0D423991E2D01938BC0F684244814A37\"\n    ...     ),\n    ... }\n    >>> notification = trustpaylib.build_notification(**notification_data)\n    >>> assert trustpay_client.check_notification_signature(notification)\n\n\nThen check result code.\n\n\n.. code:: pycon\n\n    >>> trustpay_client.get_result_desc_from_notification(notification).short\n    'Success'\n    >>> trustpay_client.get_result_desc_from_notification(notification).long\n    'Payment was successfully processed.'", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/beezz/trustpaylib", "keywords": null, "license": "BSD", "maintainer": null, "maintainer_email": null, "name": "trustpaylib", "package_url": "https://pypi.org/project/trustpaylib/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/trustpaylib/", "project_urls": {"Download": "UNKNOWN", "Homepage": "https://github.com/beezz/trustpaylib"}, "release_url": "https://pypi.org/project/trustpaylib/0.0.1/", "requires_dist": null, "requires_python": null, "summary": "TrustPay payments integration library.", "version": "0.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://travis-ci.org/beezz/trustpaylib\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/beezz/trustpaylib.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4c1677ac9587011b708a64306374ca255d723c91/68747470733a2f2f7472617669732d63692e6f72672f6265657a7a2f74727573747061796c69622e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://coveralls.io/r/beezz/trustpaylib\" rel=\"nofollow\"><img alt=\"https://coveralls.io/repos/beezz/trustpaylib/badge.png\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/98a33e493b61c35297e07fa6f39b6a62c31a66ae/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6265657a7a2f74727573747061796c69622f62616467652e706e67\"></a>\n<p>TrustPay payment solution integration helpers.</p>\n<div id=\"install\">\n<h2>Install</h2>\n<pre>$ pip install trustpaylib\n</pre>\n</div>\n<div id=\"usage\">\n<h2>Usage</h2>\n<div id=\"link-approach\">\n<h3>Link approach</h3>\n<p>Create environment, payment request and generate signed link.</p>\n<pre><span class=\"kn\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">trustpaylib</span>\n<span class=\"go\">&gt;&gt;&gt;\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">env</span> <span class=\"o\">=</span> <span class=\"n\">trustpaylib</span><span class=\"o\">.</span><span class=\"n\">build_environment</span><span class=\"p\">(</span>\n<span class=\"gp\">... </span>    <span class=\"n\">aid</span><span class=\"o\">=</span><span class=\"s2\">\"1234567890\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"n\">secret_key</span><span class=\"o\">=</span><span class=\"s2\">\"abcd1234\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"c1\"># api_url=trustpaylib.TRUSTCARD_API_URL,</span>\n<span class=\"gp\">... </span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">pay_request</span> <span class=\"o\">=</span> <span class=\"n\">trustpaylib</span><span class=\"o\">.</span><span class=\"n\">build_pay_request</span><span class=\"p\">(</span>\n<span class=\"gp\">... </span>    <span class=\"n\">AMT</span><span class=\"o\">=</span><span class=\"s2\">\"123.45\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"n\">CUR</span><span class=\"o\">=</span><span class=\"s2\">\"EUR\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"n\">REF</span><span class=\"o\">=</span><span class=\"s2\">\"1234567890\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">trustpay_client</span> <span class=\"o\">=</span> <span class=\"n\">trustpaylib</span><span class=\"o\">.</span><span class=\"n\">TrustPay</span><span class=\"p\">(</span><span class=\"n\">env</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">trustpay_client</span><span class=\"o\">.</span><span class=\"n\">build_link</span><span class=\"p\">(</span><span class=\"n\">pay_request</span><span class=\"p\">)</span>\n<span class=\"go\">'https://ib.trustpay.eu/mapi/paymentservice.aspx?AID=9876543210&amp;REF=1234567890&amp;AMT=123.45&amp;SIG=DF174E635DABBFF7897A82822521DD739AE8CC2F83D65F6448DD2FF991481EA3&amp;CUR=EUR'</span>\n</pre>\n</div>\n<div id=\"form-approach\">\n<h3>Form approach</h3>\n<p>First merge payment request with environment variables, validate it and sign.\n<cite>trustpaylib.TrustPay.finalize_request</cite> returns prepared payment\nrequest. As form action use <cite>trustpay_client.environment.api_url</cite>.</p>\n<pre><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">pay_request</span> <span class=\"o\">=</span> <span class=\"n\">trustpay_client</span><span class=\"o\">.</span><span class=\"n\">finalize_request</span><span class=\"p\">(</span><span class=\"n\">pay_request</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">trustpay_client</span><span class=\"o\">.</span><span class=\"n\">initial_data</span><span class=\"p\">(</span><span class=\"n\">pay_request</span><span class=\"p\">)</span>\n<span class=\"go\">{'AID': '9876543210', 'REF': u'1234567890', 'AMT': u'123.45', 'SIG': 'DF174E635DABBFF7897A82822521DD739AE8CC2F83D65F6448DD2FF991481EA3', 'CUR': u'EUR'}\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">trustpay_client</span><span class=\"o\">.</span><span class=\"n\">environment</span><span class=\"o\">.</span><span class=\"n\">api_url</span>\n<span class=\"go\">'https://ib.trustpay.eu/mapi/paymentservice.aspx'</span>\n</pre>\n</div>\n<div id=\"redirects-handling\">\n<h3>Redirects handling</h3>\n<p>There\u2019s not much you can (or should) do with redirect.</p>\n<div>\n<p>Note</p>\n<p>Official TrustPay documentation: DO NOT PERFORM ANY ACTION ON THIS REDIRECT.\nData is not signed and therefore cannot beconsidered as a verified payment result, such\nas the signed results sent to Notification URL or NotificationEmail.</p>\n</div>\n<p>But at least you can check the result code.</p>\n<pre><span class=\"c1\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># data received as get params to redirect</span>\n<span class=\"gp\">... </span><span class=\"n\">redirect_data</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"REF\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1234567890\"</span><span class=\"p\">,</span> <span class=\"s2\">\"RES\"</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s2\">\"PID\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1212321\"</span><span class=\"p\">}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">redirect</span> <span class=\"o\">=</span> <span class=\"n\">trustpaylib</span><span class=\"o\">.</span><span class=\"n\">build_redirect</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">redirect_data</span><span class=\"p\">)</span>\n<span class=\"go\">&gt;&gt;&gt;\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">trustpay_client</span><span class=\"o\">.</span><span class=\"n\">get_result_desc_from_redirect</span><span class=\"p\">(</span><span class=\"n\">redirect</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">short</span>\n<span class=\"go\">'Authorized'\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">trustpay_client</span><span class=\"o\">.</span><span class=\"n\">get_result_desc_from_redirect</span><span class=\"p\">(</span><span class=\"n\">redirect</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">long</span>\n<span class=\"go\">'Payment was successfully authorized. Another notification (with result code 0 - success) will be sent when TrustPay receives and processes payment from 3rd party.'</span>\n</pre>\n</div>\n<div id=\"notifications-handling\">\n<h3>Notifications handling</h3>\n<p>For received notification, first check signature.</p>\n<pre><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">notification_data</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"AID\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1234567890\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"TYP\"</span><span class=\"p\">:</span> <span class=\"s2\">\"CRDT\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"AMT\"</span><span class=\"p\">:</span> <span class=\"s2\">\"123.45\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"CUR\"</span><span class=\"p\">:</span> <span class=\"s2\">\"EUR\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"REF\"</span><span class=\"p\">:</span> <span class=\"s2\">\"9876543210\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"RES\"</span><span class=\"p\">:</span> <span class=\"s2\">\"0\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"TID\"</span><span class=\"p\">:</span> <span class=\"s2\">\"11111\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"OID\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1122334455\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"TSS\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Y\"</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">\"SIG\"</span><span class=\"p\">:</span> <span class=\"p\">(</span>\n<span class=\"gp\">... </span>        <span class=\"s2\">\"97C92D7A0C0AD99CE5DE55C3597D5ADA\"</span>\n<span class=\"gp\">... </span>        <span class=\"s2\">\"0D423991E2D01938BC0F684244814A37\"</span>\n<span class=\"gp\">... </span>    <span class=\"p\">),</span>\n<span class=\"gp\">... </span><span class=\"p\">}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">notification</span> <span class=\"o\">=</span> <span class=\"n\">trustpaylib</span><span class=\"o\">.</span><span class=\"n\">build_notification</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">notification_data</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">trustpay_client</span><span class=\"o\">.</span><span class=\"n\">check_notification_signature</span><span class=\"p\">(</span><span class=\"n\">notification</span><span class=\"p\">)</span>\n</pre>\n<p>Then check result code.</p>\n<pre><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">trustpay_client</span><span class=\"o\">.</span><span class=\"n\">get_result_desc_from_notification</span><span class=\"p\">(</span><span class=\"n\">notification</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">short</span>\n<span class=\"go\">'Success'\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">trustpay_client</span><span class=\"o\">.</span><span class=\"n\">get_result_desc_from_notification</span><span class=\"p\">(</span><span class=\"n\">notification</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">long</span>\n<span class=\"go\">'Payment was successfully processed.'</span>\n</pre>\n</div>\n</div>\n\n          </div>"}, "last_serial": 1168424, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "cb82f58126179dd5f2bcba064cf5cbd8", "sha256": "ce690af3851a837a196b85c527877fa26d4c5a7539a39da8ace486dfa71a514c"}, "downloads": -1, "filename": "trustpaylib-0.0.1.tar.gz", "has_sig": false, "md5_digest": "cb82f58126179dd5f2bcba064cf5cbd8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8690, "upload_time": "2014-07-24T21:14:11", "upload_time_iso_8601": "2014-07-24T21:14:11.064407Z", "url": "https://files.pythonhosted.org/packages/3f/36/42bfea7349e0edb1fb11f71f32162e57badcf5bd16a65f2ad8b868913d55/trustpaylib-0.0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "cb82f58126179dd5f2bcba064cf5cbd8", "sha256": "ce690af3851a837a196b85c527877fa26d4c5a7539a39da8ace486dfa71a514c"}, "downloads": -1, "filename": "trustpaylib-0.0.1.tar.gz", "has_sig": false, "md5_digest": "cb82f58126179dd5f2bcba064cf5cbd8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8690, "upload_time": "2014-07-24T21:14:11", "upload_time_iso_8601": "2014-07-24T21:14:11.064407Z", "url": "https://files.pythonhosted.org/packages/3f/36/42bfea7349e0edb1fb11f71f32162e57badcf5bd16a65f2ad8b868913d55/trustpaylib-0.0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:46:32 2020"}