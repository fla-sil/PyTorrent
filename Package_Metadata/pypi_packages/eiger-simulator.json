{"info": {"author": "ALBA controls team", "author_email": "controls@cells.es", "bugtrack_url": null, "classifiers": ["Development Status :: 2 - Pre-Alpha", "Intended Audience :: Developers", "Natural Language :: English", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# Eiger simulator\n\n![Pypi python versions][pypi-python-versions]\n![Pypi version][pypi-version]\n![Pypi status][pypi-status]\n![License][license]\n\nDectris Eiger detector simulator.\n\nFor now simulates Eiger 9M at full ROI in internal trigger single mode (ints).\n\nComplete HTTP REST API + ZMQ data stream.\n\n## Installation\n\nFrom within your favorite python environment:\n\n```bash\n$ pip install -e eiger-simulator\n```\n\nIf you need the client library, you need in addition:\n\n```bash\n$ pip install -e eiger-simulator[client]\n```\n\n## Usage\n\nRun simulator with:\n\n```bash\n$ eiger-simulator --dataset=<path to the HDF5 master file> --max-memory=1_000_000_000\n```\n\nThis will start a simulator listening to the HTTP interface on port 8000 and the\nZMQ streaming socket on TCP port 9999\n\nRun with `--help` to see the complete list of options\n\n```bash\n$ eiger-simulator --help\nUsage: eiger-simulator [OPTIONS]\n\nOptions:\n  --host TEXT                     Bind web socket to this host.  [default: 0]\n  --port INTEGER                  Bind web socket to this port.  [default: 8000]\n  --zmq TEXT                      Bind ZMQ socket  [default: tcp://*:9999]\n  --dataset PATH                  dataset path or file\n  --max-memory INTEGER            max memory (bytes)  [default: 1000000000]\n  --log-level [critical|error|warning|info|debug|trace]\n                                  Show only logs with priority LEVEL or above\n                                  [default: info]\n  --help                          Show this message and exit.\n```\n\n## Client\n\nThe client is accessible as a python library:\n\n```python\n>>> from import eigersim.client import Eiger\n>>> eiger = Eiger('127.0.0.1:8000')\n>>> eiger.nimages\n100\n>>> eiger.count_time\n0.1\n>>> eiger.trigger_mode\n'ints'\n>>> eiger.arm()\n[response 200]\n>>> eiger.trigger()\n[response 200]\n```\n\nNote that you should be able to use the client to connect to a real Eiger detector, not just\nthe simulated one.\n\n\nFor reference, here is a simple client that listens to the ZMQ stream:\n\n```python\n>>> import zmq\n>>> ctx = zmq.Context()\n>>> sock = ctx.socket(zmq.PULL)\n>>> sock.connect('tcp://127.0.0.1:9999')\n>>> while True:\n      data = sock.recv_multipart()\n      size = sum(len(i) for i in data)\n      print(f'packet #parts={len(data)} size={size/1000} KB')\n```\n\n[pypi-python-versions]: https://img.shields.io/pypi/pyversions/eiger-simulator.svg\n[pypi-version]: https://img.shields.io/pypi/v/eiger-simulator.svg\n[pypi-status]: https://img.shields.io/pypi/status/eiger-simulator.svg\n[license]: https://img.shields.io/pypi/l/eiger-simulator.svg", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://git.cells.es/controls/eiger-simulator", "keywords": "alba,dectris,eiger,simulator", "license": "GPL", "maintainer": "", "maintainer_email": "", "name": "eiger-simulator", "package_url": "https://pypi.org/project/eiger-simulator/", "platform": "", "project_url": "https://pypi.org/project/eiger-simulator/", "project_urls": {"Homepage": "https://git.cells.es/controls/eiger-simulator"}, "release_url": "https://pypi.org/project/eiger-simulator/0.3.0/", "requires_dist": null, "requires_python": ">=3.7", "summary": "ALBA Eiger simulator", "version": "0.3.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Eiger simulator</h1>\n<p><img alt=\"Pypi python versions\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/45f17bb65523e0009eadc8ce55872a3454ca3b1d/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f65696765722d73696d756c61746f722e737667\">\n<img alt=\"Pypi version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3566f6604d82924c16f7d9096beb6a390a931b09/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f65696765722d73696d756c61746f722e737667\">\n<img alt=\"Pypi status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ca10b80f783d623fbc672c22a15d6e1f44e693c8/68747470733a2f2f696d672e736869656c64732e696f2f707970692f7374617475732f65696765722d73696d756c61746f722e737667\">\n<img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/9a6a75081e1fceebff5b03bcbf1c9d5e8444cb21/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f65696765722d73696d756c61746f722e737667\"></p>\n<p>Dectris Eiger detector simulator.</p>\n<p>For now simulates Eiger 9M at full ROI in internal trigger single mode (ints).</p>\n<p>Complete HTTP REST API + ZMQ data stream.</p>\n<h2>Installation</h2>\n<p>From within your favorite python environment:</p>\n<pre>$ pip install -e eiger-simulator\n</pre>\n<p>If you need the client library, you need in addition:</p>\n<pre>$ pip install -e eiger-simulator<span class=\"o\">[</span>client<span class=\"o\">]</span>\n</pre>\n<h2>Usage</h2>\n<p>Run simulator with:</p>\n<pre>$ eiger-simulator --dataset<span class=\"o\">=</span>&lt;path to the HDF5 master file&gt; --max-memory<span class=\"o\">=</span>1_000_000_000\n</pre>\n<p>This will start a simulator listening to the HTTP interface on port 8000 and the\nZMQ streaming socket on TCP port 9999</p>\n<p>Run with <code>--help</code> to see the complete list of options</p>\n<pre>$ eiger-simulator --help\nUsage: eiger-simulator <span class=\"o\">[</span>OPTIONS<span class=\"o\">]</span>\n\nOptions:\n  --host TEXT                     Bind web socket to this host.  <span class=\"o\">[</span>default: <span class=\"m\">0</span><span class=\"o\">]</span>\n  --port INTEGER                  Bind web socket to this port.  <span class=\"o\">[</span>default: <span class=\"m\">8000</span><span class=\"o\">]</span>\n  --zmq TEXT                      Bind ZMQ socket  <span class=\"o\">[</span>default: tcp://*:9999<span class=\"o\">]</span>\n  --dataset PATH                  dataset path or file\n  --max-memory INTEGER            max memory <span class=\"o\">(</span>bytes<span class=\"o\">)</span>  <span class=\"o\">[</span>default: <span class=\"m\">1000000000</span><span class=\"o\">]</span>\n  --log-level <span class=\"o\">[</span>critical<span class=\"p\">|</span>error<span class=\"p\">|</span>warning<span class=\"p\">|</span>info<span class=\"p\">|</span>debug<span class=\"p\">|</span>trace<span class=\"o\">]</span>\n                                  Show only logs with priority LEVEL or above\n                                  <span class=\"o\">[</span>default: info<span class=\"o\">]</span>\n  --help                          Show this message and exit.\n</pre>\n<h2>Client</h2>\n<p>The client is accessible as a python library:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">import</span> <span class=\"n\">eigersim</span><span class=\"o\">.</span><span class=\"n\">client</span> <span class=\"kn\">import</span> <span class=\"nn\">Eiger</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">eiger</span> <span class=\"o\">=</span> <span class=\"n\">Eiger</span><span class=\"p\">(</span><span class=\"s1\">'127.0.0.1:8000'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">eiger</span><span class=\"o\">.</span><span class=\"n\">nimages</span>\n<span class=\"mi\">100</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">eiger</span><span class=\"o\">.</span><span class=\"n\">count_time</span>\n<span class=\"mf\">0.1</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">eiger</span><span class=\"o\">.</span><span class=\"n\">trigger_mode</span>\n<span class=\"s1\">'ints'</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">eiger</span><span class=\"o\">.</span><span class=\"n\">arm</span><span class=\"p\">()</span>\n<span class=\"p\">[</span><span class=\"n\">response</span> <span class=\"mi\">200</span><span class=\"p\">]</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">eiger</span><span class=\"o\">.</span><span class=\"n\">trigger</span><span class=\"p\">()</span>\n<span class=\"p\">[</span><span class=\"n\">response</span> <span class=\"mi\">200</span><span class=\"p\">]</span>\n</pre>\n<p>Note that you should be able to use the client to connect to a real Eiger detector, not just\nthe simulated one.</p>\n<p>For reference, here is a simple client that listens to the ZMQ stream:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">import</span> <span class=\"nn\">zmq</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">ctx</span> <span class=\"o\">=</span> <span class=\"n\">zmq</span><span class=\"o\">.</span><span class=\"n\">Context</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">sock</span> <span class=\"o\">=</span> <span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"n\">socket</span><span class=\"p\">(</span><span class=\"n\">zmq</span><span class=\"o\">.</span><span class=\"n\">PULL</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">sock</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"p\">(</span><span class=\"s1\">'tcp://127.0.0.1:9999'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n      <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">sock</span><span class=\"o\">.</span><span class=\"n\">recv_multipart</span><span class=\"p\">()</span>\n      <span class=\"n\">size</span> <span class=\"o\">=</span> <span class=\"nb\">sum</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"n\">data</span><span class=\"p\">)</span>\n      <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">'packet #parts=</span><span class=\"si\">{</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span><span class=\"si\">}</span><span class=\"s1\"> size=</span><span class=\"si\">{</span><span class=\"n\">size</span><span class=\"o\">/</span><span class=\"mi\">1000</span><span class=\"si\">}</span><span class=\"s1\"> KB'</span><span class=\"p\">)</span>\n</pre>\n\n          </div>"}, "last_serial": 6669214, "releases": {"0.1.1": [{"comment_text": "", "digests": {"md5": "d4badde61cceef3173d6686125007bcc", "sha256": "0e37b7d5f431b2289453b6b129f09bc8e8fa880caebfd851bf9cae0243772998"}, "downloads": -1, "filename": "eiger-simulator-0.1.1.tar.gz", "has_sig": false, "md5_digest": "d4badde61cceef3173d6686125007bcc", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 10731, "upload_time": "2020-02-07T18:27:54", "upload_time_iso_8601": "2020-02-07T18:27:54.773889Z", "url": "https://files.pythonhosted.org/packages/e3/98/7681dbe44d5a04c3ec5f290a0272243e334f7969e94e0a3c618497370168/eiger-simulator-0.1.1.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "b3985f60a36f359a3451acfded139ffc", "sha256": "6ef1abf6c0df3e157f8fb8e9f0b4375b51d4d381150056107ffe0b118a20ff5f"}, "downloads": -1, "filename": "eiger-simulator-0.2.0.tar.gz", "has_sig": false, "md5_digest": "b3985f60a36f359a3451acfded139ffc", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 11083, "upload_time": "2020-02-12T18:14:44", "upload_time_iso_8601": "2020-02-12T18:14:44.010705Z", "url": "https://files.pythonhosted.org/packages/cc/d5/5ef8743025515d75fdaaefa62538cd7c7c6b7bb72a6671c8d1e8cd625227/eiger-simulator-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "0fd1319bd469833bcd30714c67894507", "sha256": "9d2ae406443180ba506a3cf52ee09066d207023e2593d41a9c051be8b8e370e3"}, "downloads": -1, "filename": "eiger-simulator-0.3.0.tar.gz", "has_sig": false, "md5_digest": "0fd1319bd469833bcd30714c67894507", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 11402, "upload_time": "2020-02-20T16:42:53", "upload_time_iso_8601": "2020-02-20T16:42:53.253475Z", "url": "https://files.pythonhosted.org/packages/25/16/cc1dfeea40056581a6d977f5889842f875366dc8d4bbdfa14fe10eaa5364/eiger-simulator-0.3.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "0fd1319bd469833bcd30714c67894507", "sha256": "9d2ae406443180ba506a3cf52ee09066d207023e2593d41a9c051be8b8e370e3"}, "downloads": -1, "filename": "eiger-simulator-0.3.0.tar.gz", "has_sig": false, "md5_digest": "0fd1319bd469833bcd30714c67894507", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 11402, "upload_time": "2020-02-20T16:42:53", "upload_time_iso_8601": "2020-02-20T16:42:53.253475Z", "url": "https://files.pythonhosted.org/packages/25/16/cc1dfeea40056581a6d977f5889842f875366dc8d4bbdfa14fe10eaa5364/eiger-simulator-0.3.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:47:14 2020"}