{"info": {"author": "frostming", "author_email": "mianghong@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Programming Language :: Python", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: Implementation :: CPython", "Programming Language :: Python :: Implementation :: PyPy"], "description": "# flask-crontab\n\n> Simple Flask scheduled tasks without extra daemons\n\n[![PyPI](https://img.shields.io/pypi/v/flask-crontab)](https://pypi.org/project/flask-crontab) [![PyPI - Python Version](https://img.shields.io/pypi/pyversions/flask-crontab)](https://pypi.org/project/flask-crontab) [![Github Action](https://github.com/frostming/flask-crontab/workflows/Continuous%20Integration/badge.svg)](https://github.com/frostming/flask-crontab/actions?query=workflow%3A%22Continuous+Integration%22) ![Supported Platforms](https://img.shields.io/badge/platform-Linux%20%7C%20macOS-lightgrey)\n\nThis project is strongly inspired by [django-crontab](https://github.com/kraiz/django-crontab), and only works on Python 3.5+.\nDue to the coming EOL of Python 2 on 2020/01/01, there is no plan for Python 2 support.\n\n## Quick Start\n\nInstall via `pip`:\n\n```bash\n$ pip install flask-crontab\n```\n\nInstantiate the extension in your `app.py` after the creation of Flask app:\n\n```python\nfrom flask import Flask\nfrom flask_crontab import Crontab\n\napp = Flask(__name__)\ncrontab = Crontab(app)\n```\n\nIf you are using App Factory pattern, you can also register the extension later:\n\n```python\ncrontab = Crontab()\n\ndef create_app():\n    ...\n    crontab.init_app(app)\n```\n\nNow create a scheduled job:\n\n```python\n@crontab.job(minute=\"0\", hour=\"6\")\ndef my_scheduled_job():\n    do_something()\n```\n\nAn app context is automatically activated for every job run, so that you can access objects that are attached to app context.\nThen add the job to crontab:\n\n```bash\n$ flask crontab add\n```\n\nThat's it! If you type in `crontab -l` in your shell, you can see some new lines created by `flask-crontab`.\n\nShow jobs managed by current app:\n\n```bash\n$ flask crontab show\n```\n\nPurge all jobs managed by current app:\n\n```bash\n$ flask crontab remove\n```\n\nRun a specific job given by hash:\n\n```bash\n$ flask crontab run <job_hash>\n```\n\nSee supported options via `--help` for every commands.\n\n## Decorator API\n\n```python\ndef job(\n    minute: str = \"*\",\n    hour: str = \"*\",\n    day: str = \"*\",\n    month: str = \"*\",\n    day_of_week: str = \"*\",\n    args: Tuple[Any, ...] = (),\n    kwargs: Optional[Dict[str, Any]] = None,\n) -> Callable:\n```\n\nThe decorator accepts five arguments `minute`, `hour`, `day`, `month`, `day_of_month`, which are the same as crontab 5-parts time format. Any part that is not given defaults to `*`.\nBesides, `job` decorator accepts `args` and `kwargs` which will be passed to the decorated function as positional arguments and keywords arguments, respectively.\n\n## Configuration\n\n| Config item        | Description                    | Default value      |\n| ------------------ | ------------------------------ | ------------------ |\n| CRONTAB_EXECUTABLE | The absolute path of `crontab` | `/usr/bin/crontab` |\n| CRONTAB_LOCK_JOBS  | Whether lock jobs when running | `False`            |\n\n## License\n\nThis project is publised under [MIT](LICENSE) license.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/frostming/flask-crontab", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "flask-crontab", "package_url": "https://pypi.org/project/flask-crontab/", "platform": "", "project_url": "https://pypi.org/project/flask-crontab/", "project_urls": {"Homepage": "https://github.com/frostming/flask-crontab"}, "release_url": "https://pypi.org/project/flask-crontab/0.1.2/", "requires_dist": ["flask"], "requires_python": ">=3.5", "summary": "Simple Flask scheduled tasks without extra daemons", "version": "0.1.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>flask-crontab</h1>\n<blockquote>\n<p>Simple Flask scheduled tasks without extra daemons</p>\n</blockquote>\n<p><a href=\"https://pypi.org/project/flask-crontab\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/25a5032f139b7be4b4933e635aaebad252eaeff1/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f666c61736b2d63726f6e746162\"></a> <a href=\"https://pypi.org/project/flask-crontab\" rel=\"nofollow\"><img alt=\"PyPI - Python Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a67ac5f3e29346152942f95da98e33df478165e2/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f666c61736b2d63726f6e746162\"></a> <a href=\"https://github.com/frostming/flask-crontab/actions?query=workflow%3A%22Continuous+Integration%22\" rel=\"nofollow\"><img alt=\"Github Action\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6dd78cb6fa68b95dac0932081ed595595790a82d/68747470733a2f2f6769746875622e636f6d2f66726f73746d696e672f666c61736b2d63726f6e7461622f776f726b666c6f77732f436f6e74696e756f7573253230496e746567726174696f6e2f62616467652e737667\"></a> <img alt=\"Supported Platforms\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c6b7b5c64129f9a1ebf3b71fb6bed0b227794e8b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f706c6174666f726d2d4c696e75782532302537432532306d61634f532d6c6967687467726579\"></p>\n<p>This project is strongly inspired by <a href=\"https://github.com/kraiz/django-crontab\" rel=\"nofollow\">django-crontab</a>, and only works on Python 3.5+.\nDue to the coming EOL of Python 2 on 2020/01/01, there is no plan for Python 2 support.</p>\n<h2>Quick Start</h2>\n<p>Install via <code>pip</code>:</p>\n<pre>$ pip install flask-crontab\n</pre>\n<p>Instantiate the extension in your <code>app.py</code> after the creation of Flask app:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">Flask</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask_crontab</span> <span class=\"kn\">import</span> <span class=\"n\">Crontab</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n<span class=\"n\">crontab</span> <span class=\"o\">=</span> <span class=\"n\">Crontab</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n</pre>\n<p>If you are using App Factory pattern, you can also register the extension later:</p>\n<pre><span class=\"n\">crontab</span> <span class=\"o\">=</span> <span class=\"n\">Crontab</span><span class=\"p\">()</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">create_app</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n    <span class=\"n\">crontab</span><span class=\"o\">.</span><span class=\"n\">init_app</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n</pre>\n<p>Now create a scheduled job:</p>\n<pre><span class=\"nd\">@crontab</span><span class=\"o\">.</span><span class=\"n\">job</span><span class=\"p\">(</span><span class=\"n\">minute</span><span class=\"o\">=</span><span class=\"s2\">\"0\"</span><span class=\"p\">,</span> <span class=\"n\">hour</span><span class=\"o\">=</span><span class=\"s2\">\"6\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">my_scheduled_job</span><span class=\"p\">():</span>\n    <span class=\"n\">do_something</span><span class=\"p\">()</span>\n</pre>\n<p>An app context is automatically activated for every job run, so that you can access objects that are attached to app context.\nThen add the job to crontab:</p>\n<pre>$ flask crontab add\n</pre>\n<p>That's it! If you type in <code>crontab -l</code> in your shell, you can see some new lines created by <code>flask-crontab</code>.</p>\n<p>Show jobs managed by current app:</p>\n<pre>$ flask crontab show\n</pre>\n<p>Purge all jobs managed by current app:</p>\n<pre>$ flask crontab remove\n</pre>\n<p>Run a specific job given by hash:</p>\n<pre>$ flask crontab run &lt;job_hash&gt;\n</pre>\n<p>See supported options via <code>--help</code> for every commands.</p>\n<h2>Decorator API</h2>\n<pre><span class=\"k\">def</span> <span class=\"nf\">job</span><span class=\"p\">(</span>\n    <span class=\"n\">minute</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s2\">\"*\"</span><span class=\"p\">,</span>\n    <span class=\"n\">hour</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s2\">\"*\"</span><span class=\"p\">,</span>\n    <span class=\"n\">day</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s2\">\"*\"</span><span class=\"p\">,</span>\n    <span class=\"n\">month</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s2\">\"*\"</span><span class=\"p\">,</span>\n    <span class=\"n\">day_of_week</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s2\">\"*\"</span><span class=\"p\">,</span>\n    <span class=\"n\">args</span><span class=\"p\">:</span> <span class=\"n\">Tuple</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">(),</span>\n    <span class=\"n\">kwargs</span><span class=\"p\">:</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">,</span>\n<span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">Callable</span><span class=\"p\">:</span>\n</pre>\n<p>The decorator accepts five arguments <code>minute</code>, <code>hour</code>, <code>day</code>, <code>month</code>, <code>day_of_month</code>, which are the same as crontab 5-parts time format. Any part that is not given defaults to <code>*</code>.\nBesides, <code>job</code> decorator accepts <code>args</code> and <code>kwargs</code> which will be passed to the decorated function as positional arguments and keywords arguments, respectively.</p>\n<h2>Configuration</h2>\n<table>\n<thead>\n<tr>\n<th>Config item</th>\n<th>Description</th>\n<th>Default value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>CRONTAB_EXECUTABLE</td>\n<td>The absolute path of <code>crontab</code></td>\n<td><code>/usr/bin/crontab</code></td>\n</tr>\n<tr>\n<td>CRONTAB_LOCK_JOBS</td>\n<td>Whether lock jobs when running</td>\n<td><code>False</code></td>\n</tr></tbody></table>\n<h2>License</h2>\n<p>This project is publised under <a href=\"LICENSE\" rel=\"nofollow\">MIT</a> license.</p>\n\n          </div>"}, "last_serial": 6480661, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "baf294727ce2eb9eb696ec9ff8386c8b", "sha256": "4d14fce7062541b7084bb4cb7cd3e1c9a9bfcdf959109e283f7f4b3666a2fa36"}, "downloads": -1, "filename": "flask_crontab-0.1.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "baf294727ce2eb9eb696ec9ff8386c8b", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": ">=3.5", "size": 6878, "upload_time": "2019-12-08T13:53:17", "upload_time_iso_8601": "2019-12-08T13:53:17.753853Z", "url": "https://files.pythonhosted.org/packages/7d/05/8de454fe2ec1849a77880410c0b39f4d0637cf5c5514a3503b0f6c8386c9/flask_crontab-0.1.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5d5736551fcf3c9b2c709a3112461871", "sha256": "ca39fdc8afee314194d534e5a1bcc2458eefe5ea5fdeae8d232196fc549df752"}, "downloads": -1, "filename": "flask-crontab-0.1.0.tar.gz", "has_sig": false, "md5_digest": "5d5736551fcf3c9b2c709a3112461871", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 7058, "upload_time": "2019-12-08T13:53:20", "upload_time_iso_8601": "2019-12-08T13:53:20.094450Z", "url": "https://files.pythonhosted.org/packages/4f/f9/3fae0a9a225d90ef1f9e5c339220aa3b31552d32212497f5d2b45fbc81a6/flask-crontab-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "ec09f0bc3a4311799771b41c0b8c0c23", "sha256": "496d0c8625ce4721fae8a7b09b22f1127b291a6de48b4f70b0a97fd92d5e6b15"}, "downloads": -1, "filename": "flask_crontab-0.1.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "ec09f0bc3a4311799771b41c0b8c0c23", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": ">=3.5", "size": 6883, "upload_time": "2019-12-09T01:22:52", "upload_time_iso_8601": "2019-12-09T01:22:52.279542Z", "url": "https://files.pythonhosted.org/packages/f0/03/6d494c293c23236e17612a66465034b1917a2f048e94e9d9957fffb7fa50/flask_crontab-0.1.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "e20aa521d9d6a4dcba496424928094cc", "sha256": "33813dbcc1446382952c9b9becfaff39e44239da17244aa6e664790bb55a3f33"}, "downloads": -1, "filename": "flask-crontab-0.1.1.tar.gz", "has_sig": false, "md5_digest": "e20aa521d9d6a4dcba496424928094cc", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 6769, "upload_time": "2019-12-09T01:22:54", "upload_time_iso_8601": "2019-12-09T01:22:54.647898Z", "url": "https://files.pythonhosted.org/packages/46/f1/710893343c749a7503ac73e7ef1bc8da7b36c92c2695c66b897f090e692e/flask-crontab-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "5ba0d16628143ed1c80f92d4a3cc3088", "sha256": "8dbb325417d9c04d13c94f1f933c97267e0ef7a4358e08057dbb9910f0145188"}, "downloads": -1, "filename": "flask_crontab-0.1.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "5ba0d16628143ed1c80f92d4a3cc3088", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": ">=3.5", "size": 6883, "upload_time": "2020-01-19T03:58:17", "upload_time_iso_8601": "2020-01-19T03:58:17.668397Z", "url": "https://files.pythonhosted.org/packages/7a/b5/3d691df17797770ab531f8fd43b8ac99c40b8163baae1aa7bc7701bcc6d6/flask_crontab-0.1.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "bf106443c3908edd1aa9cd132a4b3052", "sha256": "ec38074d7b5237df31b406576e9ccc79c924d8363dcba4e857830c4ec63a1185"}, "downloads": -1, "filename": "flask-crontab-0.1.2.tar.gz", "has_sig": false, "md5_digest": "bf106443c3908edd1aa9cd132a4b3052", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 6774, "upload_time": "2020-01-19T03:58:19", "upload_time_iso_8601": "2020-01-19T03:58:19.242966Z", "url": "https://files.pythonhosted.org/packages/a3/8d/bb417566d4890769fc5c1dd6d7ffd2e2d6cfa65b9005060661714e76ccc1/flask-crontab-0.1.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "5ba0d16628143ed1c80f92d4a3cc3088", "sha256": "8dbb325417d9c04d13c94f1f933c97267e0ef7a4358e08057dbb9910f0145188"}, "downloads": -1, "filename": "flask_crontab-0.1.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "5ba0d16628143ed1c80f92d4a3cc3088", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": ">=3.5", "size": 6883, "upload_time": "2020-01-19T03:58:17", "upload_time_iso_8601": "2020-01-19T03:58:17.668397Z", "url": "https://files.pythonhosted.org/packages/7a/b5/3d691df17797770ab531f8fd43b8ac99c40b8163baae1aa7bc7701bcc6d6/flask_crontab-0.1.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "bf106443c3908edd1aa9cd132a4b3052", "sha256": "ec38074d7b5237df31b406576e9ccc79c924d8363dcba4e857830c4ec63a1185"}, "downloads": -1, "filename": "flask-crontab-0.1.2.tar.gz", "has_sig": false, "md5_digest": "bf106443c3908edd1aa9cd132a4b3052", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 6774, "upload_time": "2020-01-19T03:58:19", "upload_time_iso_8601": "2020-01-19T03:58:19.242966Z", "url": "https://files.pythonhosted.org/packages/a3/8d/bb417566d4890769fc5c1dd6d7ffd2e2d6cfa65b9005060661714e76ccc1/flask-crontab-0.1.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 01:02:59 2020"}