{"info": {"author": "Storyscript", "author_email": "noreply@storyscript.io", "bugtrack_url": null, "classifiers": ["Environment :: Console", "Intended Audience :: Developers", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# Storyscript HTTP Gateway\n\nAPI gateway server for executing Stories via HTTP.\n\n```coffee\nhttp server as server\n  when server listen method:'get' path:'/' as r\n    log info msg:r.body\n    log info msg:r.headers\n    log info msg:r.headers['Host']\n    r write data:'Hello World'\n    r status code:200\n    r finish\n```\n\n```sh\n$ curl https://foobar.storyscriptapp.com/\nHello World\n```\n\n\n## Development\n\nSetup virtual environment and install dependencies\n```\nvirtualenv -p python3.6 venv\nsource venv/bin/activate\npip install -r requirements.txt\n```\n\nYou may need to tell pycurl the path to your openssl installation\n```\npip install --install-option=\"--with-openssl\" --install-option=\"--openssl-dir=/usr/local/opt/openssl\" pycurl\n```\nSee https://github.com/nahamsec/JSParser/issues/22\n\n\nRun locally by calling\n\n```\npython -m app.main --logging=debug --debug\n```\n\n### Register an endpoint\n\n```shell\ncurl --data '{\"endpoint\": \"http://localhost:9000/story/foo\", \"data\":{\"path\":\"/ping\", \"method\": \"post\", \"host\": \"a\"}}' \\\n     -H \"Content-Type: application/json\" \\\n     localhost:8889/register\n```\n\nNow access that endpoint\n\n```shell\ncurl -X POST -d 'foobar' -H \"Host: a.storyscriptapp.com\" http://localhost:8888/ping\n```\n\n\n### Unregister an endpoint\n\n```shell\ncurl --data '{\"endpoint\": \"http://localhost:9000/story/foo\", \"data\":{\"path\":\"/ping\", \"method\": \"post\", \"host\": \"a\"}}' \\\n     -H \"Content-Type: application/json\" \\\n     localhost:8889/unregister\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "story-http", "package_url": "https://pypi.org/project/story-http/", "platform": "", "project_url": "https://pypi.org/project/story-http/", "project_urls": null, "release_url": "https://pypi.org/project/story-http/0.2.0/", "requires_dist": ["tornado (==5.0.2)", "raven (==6.9.0)", "ujson (==1.35)", "pycurl (==7.43)"], "requires_python": ">=3.7", "summary": "The HTTP Gateway of the Storyscript platform", "version": "0.2.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Storyscript HTTP Gateway</h1>\n<p>API gateway server for executing Stories via HTTP.</p>\n<pre><span class=\"nx\">http</span> <span class=\"nx\">server</span> <span class=\"nx\">as</span> <span class=\"nx\">server</span>\n  <span class=\"k\">when</span> <span class=\"nx\">server</span> <span class=\"nx\">listen</span> <span class=\"nx\">method</span><span class=\"o\">:</span><span class=\"s\">'get'</span> <span class=\"nx\">path</span><span class=\"o\">:</span><span class=\"s\">'/'</span> <span class=\"nx\">as</span> <span class=\"nx\">r</span>\n    <span class=\"nx\">log</span> <span class=\"nx\">info</span> <span class=\"nx\">msg</span><span class=\"o\">:</span><span class=\"nx\">r</span><span class=\"p\">.</span><span class=\"nx\">body</span>\n    <span class=\"nx\">log</span> <span class=\"nx\">info</span> <span class=\"nx\">msg</span><span class=\"o\">:</span><span class=\"nx\">r</span><span class=\"p\">.</span><span class=\"nx\">headers</span>\n    <span class=\"nx\">log</span> <span class=\"nx\">info</span> <span class=\"nx\">msg</span><span class=\"o\">:</span><span class=\"nx\">r</span><span class=\"p\">.</span><span class=\"nx\">headers</span><span class=\"p\">[</span><span class=\"s\">'Host'</span><span class=\"p\">]</span>\n    <span class=\"nx\">r</span> <span class=\"nx\">write</span> <span class=\"nx\">data</span><span class=\"o\">:</span><span class=\"s\">'Hello World'</span>\n    <span class=\"nx\">r</span> <span class=\"nx\">status</span> <span class=\"nx\">code</span><span class=\"o\">:</span><span class=\"mi\">200</span>\n    <span class=\"nx\">r</span> <span class=\"nx\">finish</span>\n</pre>\n<pre>$ curl https://foobar.storyscriptapp.com/\nHello World\n</pre>\n<h2>Development</h2>\n<p>Setup virtual environment and install dependencies</p>\n<pre><code>virtualenv -p python3.6 venv\nsource venv/bin/activate\npip install -r requirements.txt\n</code></pre>\n<p>You may need to tell pycurl the path to your openssl installation</p>\n<pre><code>pip install --install-option=\"--with-openssl\" --install-option=\"--openssl-dir=/usr/local/opt/openssl\" pycurl\n</code></pre>\n<p>See <a href=\"https://github.com/nahamsec/JSParser/issues/22\" rel=\"nofollow\">https://github.com/nahamsec/JSParser/issues/22</a></p>\n<p>Run locally by calling</p>\n<pre><code>python -m app.main --logging=debug --debug\n</code></pre>\n<h3>Register an endpoint</h3>\n<pre>curl --data <span class=\"s1\">'{\"endpoint\": \"http://localhost:9000/story/foo\", \"data\":{\"path\":\"/ping\", \"method\": \"post\", \"host\": \"a\"}}'</span> <span class=\"se\">\\</span>\n     -H <span class=\"s2\">\"Content-Type: application/json\"</span> <span class=\"se\">\\</span>\n     localhost:8889/register\n</pre>\n<p>Now access that endpoint</p>\n<pre>curl -X POST -d <span class=\"s1\">'foobar'</span> -H <span class=\"s2\">\"Host: a.storyscriptapp.com\"</span> http://localhost:8888/ping\n</pre>\n<h3>Unregister an endpoint</h3>\n<pre>curl --data <span class=\"s1\">'{\"endpoint\": \"http://localhost:9000/story/foo\", \"data\":{\"path\":\"/ping\", \"method\": \"post\", \"host\": \"a\"}}'</span> <span class=\"se\">\\</span>\n     -H <span class=\"s2\">\"Content-Type: application/json\"</span> <span class=\"se\">\\</span>\n     localhost:8889/unregister\n</pre>\n\n          </div>"}, "last_serial": 6076243, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "65696558c3ee93bec48d0d29cb75042c", "sha256": "20d07d5799dde50a6404df9be1edf0b3b826842565aea0890c6934e322b5f8cf"}, "downloads": -1, "filename": "story_http-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "65696558c3ee93bec48d0d29cb75042c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7", "size": 16798, "upload_time": "2019-11-04T15:23:12", "upload_time_iso_8601": "2019-11-04T15:23:12.557141Z", "url": "https://files.pythonhosted.org/packages/f9/e8/7f9afe92e9de3d7ea880f33f69f753656efa06f99baa063f7a5fb6edfcfd/story_http-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "08692c36f090d5a72d73a749247fb061", "sha256": "f0cfd2753b83b251e52624558be346511f6ae891b1f97e457394c516eec22675"}, "downloads": -1, "filename": "story-http-0.2.0.tar.gz", "has_sig": false, "md5_digest": "08692c36f090d5a72d73a749247fb061", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 10912, "upload_time": "2019-11-04T15:23:14", "upload_time_iso_8601": "2019-11-04T15:23:14.892987Z", "url": "https://files.pythonhosted.org/packages/c4/0c/9571a11b0af55d0ee1446ec96471e5cb11c7d8c9b1def92bad293816246c/story-http-0.2.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "65696558c3ee93bec48d0d29cb75042c", "sha256": "20d07d5799dde50a6404df9be1edf0b3b826842565aea0890c6934e322b5f8cf"}, "downloads": -1, "filename": "story_http-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "65696558c3ee93bec48d0d29cb75042c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7", "size": 16798, "upload_time": "2019-11-04T15:23:12", "upload_time_iso_8601": "2019-11-04T15:23:12.557141Z", "url": "https://files.pythonhosted.org/packages/f9/e8/7f9afe92e9de3d7ea880f33f69f753656efa06f99baa063f7a5fb6edfcfd/story_http-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "08692c36f090d5a72d73a749247fb061", "sha256": "f0cfd2753b83b251e52624558be346511f6ae891b1f97e457394c516eec22675"}, "downloads": -1, "filename": "story-http-0.2.0.tar.gz", "has_sig": false, "md5_digest": "08692c36f090d5a72d73a749247fb061", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 10912, "upload_time": "2019-11-04T15:23:14", "upload_time_iso_8601": "2019-11-04T15:23:14.892987Z", "url": "https://files.pythonhosted.org/packages/c4/0c/9571a11b0af55d0ee1446ec96471e5cb11c7d8c9b1def92bad293816246c/story-http-0.2.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:01:33 2020"}