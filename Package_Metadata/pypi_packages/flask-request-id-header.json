{"info": {"author": "British Antarctic Survey", "author_email": "webapps@bas.ac.uk", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Framework :: Flask", "Intended Audience :: Developers", "License :: Other/Proprietary License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# Flask Request ID Middleware\n\nPython Flask middleware to ensure all requests have a request ID header.\n\n## Purpose\n\nThis middleware ensures all request made to a Flask application includes a Request ID header (`X-Request-ID`), \ncontaining at least one unique value.\n\n[Request IDs](https://theburningmonk.com/2015/05/a-consistent-approach-to-track-correlation-ids-through-microservices/)\nor *Correlation IDs* can be used when logging errors and allows users to trace requests through multiple layers such as\nload balancers and reverse proxies. The request ID header value may consist of multiple IDs encoded according to \n[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2).\n\n## Installation\n\nThis package can be installed using Pip from [PyPi](https://pypi.org/project/flask-request-id-header):\n\n```\n$ pip install flask-request-id-header\n```\n\n## Usage\n\nThis middleware has no required parameters and by default will add a request header to requests where one does not \nalready exist, or append a unique value where existing request IDs do not contain at least one UUID (version 4) value.\n\nA minimal application would look like this:\n\n```python\nfrom flask import Flask\nfrom flask_request_id_header.middleware import RequestID\n\napp = Flask(__name__)\n\nRequestID(app)\n\n@app.route('/')\ndef hello_world():\n    return 'hello world'\n```\n\nOptionally a Flask config option, `REQUEST_ID_UNIQUE_VALUE_PREFIX`, can be set whereby any request ID beginning with \nthis prefix be treated as unique, preventing an additional value being appended.\n\nA minimal application would look like this:\n\n```python\nfrom flask import Flask\nfrom flask_request_id_header.middleware import RequestID\n\napp = Flask(__name__)\n\napp.config['REQUEST_ID_UNIQUE_VALUE_PREFIX'] = 'FOO-'\nRequestID(app)\n\n@app.route('/')\ndef hello_world():\n    return 'hello world'\n```\n\n### Accessing the request ID\n\nThe current request ID can be accessed wherever a request context exists:\n\n```python\nfrom flask import request, has_request_context\n\nif has_request_context():\n    print(request.environ.get(\"HTTP_X_REQUEST_ID\"))\n```\n\nTo access the request ID outside of the current application, it is included in the response (as `X-Request-ID`).\n\n**Note:** Components between the application and the client, such as reverse proxies, may alter or remove this header\nvalue before reaching the client.\n\n### Logging the request ID\n\nOptionally, the current request ID can be included in application logs, where a request context exists.\n\nA minimal application would look like this:\n\n```python\nimport logging\n\nfrom flask import Flask, request, has_request_context\nfrom flask.logging import default_handler\nfrom flask_request_id_header.middleware import RequestID\n\napp = Flask(__name__)\n\napp.config['REQUEST_ID_UNIQUE_VALUE_PREFIX'] = 'FOO-'\nRequestID(app)\n\nclass RequestFormatter(logging.Formatter):\n    def format(self, record):\n        record.request_id = 'NA'\n\n        if has_request_context():\n            record.request_id = request.environ.get(\"HTTP_X_REQUEST_ID\")\n\n        return super().format(record)\n\nformatter = RequestFormatter(\n    '[%(asctime)s] [%(levelname)s] [%(request_id)s] %(module)s: %(message)s'\n)\ndefault_handler.setFormatter(formatter)\n\n@app.route('/')\ndef hello_world():\n    return 'hello world'\n```\n\n## Developing\n\nA docker container ran through Docker Compose is used as a development environment for this project defined . It \nincludes development only dependencies listed in `requirements.txt`, a local Flask application in `app.py` and \n[Integration tests](#integration-tests).\n\nEnsure classes and methods are defined within the `flask_request_id_header` package.\n\nEnsure [Integration tests](#integration-tests) are written for any new feature, or changes to existing features.\n\nIf you have access to the BAS GitLab instance, pull the Docker image from the BAS Docker Registry:\n\n```shell\n$ docker login docker-registry.data.bas.ac.uk\n$ docker-compose pull\n\n# To run the local Flask application using the Flask development server\n$ docker-compose up\n\n# To start a shell\n$ docker-compose run app ash\n```\n\n### Code Style\n\nPEP-8 style and formatting guidelines must be used for this project, with the exception of the 80 character line limit.\n\n[Flake8](http://flake8.pycqa.org/) is used to ensure compliance, and is ran on each commit through \n[Continuous Integration](#continuous-integration).\n\nTo check compliance locally:\n\n```shell\n$ docker-compose run app flake8 . --ignore=E501\n```\n\n### Dependencies\n\nDevelopment Python dependencies should be declared in `requirements.txt` to be included in the development environment.\n\nRuntime Python dependencies should be declared in `requirements.txt` and `setup.py` to also be installed as dependencies\nof this package in other applications.\n\nAll dependencies should be periodically reviewed and update as new versions are released.\n\n```shell\n$ docker-compose run app ash\n$ pip install [dependency]==\n# this will display a list of available versions, add the latest to `requirements.txt` and or `setup.py`\n$ exit\n$ docker-compose down\n$ docker-compose build\n```\n\nIf you have access to the BAS GitLab instance, push the Docker image to the BAS Docker Registry:\n\n```shell\n$ docker login docker-registry.data.bas.ac.uk\n$ docker-compose push\n```\n\n### Dependency vulnerability scanning\n\nTo ensure the security of this API, all dependencies are checked against \n[Snyk](https://app.snyk.io/org/antarctica/project/ef12439f-4d28-45af-81c2-fad464a05184) for vulnerabilities. \n\n**Warning:** Snyk relies on known vulnerabilities and can't check for issues that are not in it's database. As with all \nsecurity tools, Snyk is an aid for spotting common mistakes, not a guarantee of secure code.\n\nSome vulnerabilities have been ignored in this project, see `.snyk` for definitions and the \n[Dependency exceptions](#dependency-vulnerability-exceptions) section for more information.\n\nThrough [Continuous Integration](#continuous-integration), on each commit current dependencies are tested and a snapshot\nuploaded to Snyk. This snapshot is then monitored for vulnerabilities.\n\n#### Dependency vulnerability exceptions\n\nThis project contains known vulnerabilities that have been ignored for a specific reason.\n\n* [Py-Yaml `yaml.load()` function allows Arbitrary Code Execution](https://snyk.io/vuln/SNYK-PYTHON-PYYAML-42159)\n    * currently no known or planned resolution\n    * indirect dependency, required through the `bandit` package\n    * severity is rated *high*\n    * risk judged to be *low* as we don't use the Yaml module in this application\n    * ignored for 1 year for re-review\n\n### Static security scanning\n\nTo ensure the security of this API, source code is checked against [Bandit](https://github.com/PyCQA/bandit) for issues \nsuch as not sanitising user inputs or using weak cryptography. \n\n**Warning:** Bandit is a static analysis tool and can't check for issues that are only be detectable when running the \napplication. As with all security tools, Bandit is an aid for spotting common mistakes, not a guarantee of secure code.\n\nThrough [Continuous Integration](#continuous-integration), each commit is tested.\n\nTo check locally:\n\n```shell\n$ docker-compose run app bandit -r .\n```\n\n## Testing\n\n### Integration tests\n\nThis project uses integration tests to ensure features work as expected and to guard against regressions and \nvulnerabilities.\n\nThe Python [UnitTest](https://docs.python.org/3/library/unittest.html) library is used for running tests using Flask's \ntest framework. Test cases are defined in files within `tests/` and are automatically loaded when using the \n`test` Flask CLI command included in the local Flask application in the development environment.\n\nTests are automatically ran on each commit through [Continuous Integration](#continuous-integration).\n\nTo run tests manually:\n\n```shell\n$ docker-compose run -e FLASK_ENV=testing app flask test\n```\n\nTo run tests using PyCharm:\n\n* *Run* -> *Edit Configurations*\n* *Add New Configuration* -> *Python Tests* -> *Unittests*\n\nIn *Configuration* tab:\n\n* Script path: `[absolute path to project]/tests`\n* Python interpreter: *Project interpreter* (*app* service in project Docker Compose)\n* Working directory: `[absolute path to project]`\n* Path mappings: `[absolute path to project]=/usr/src/app`\n\n**Note:** This configuration can be also be used to debug tests (by choosing *debug* instead of *run*).\n\n### Continuous Integration\n\nAll commits will trigger a Continuous Integration process using GitLab's CI/CD platform, configured in `.gitlab-ci.yml`.\n\nThis process will run the application [Integration tests](#integration-tests).\n\nPip dependencies are also [checked and monitored for vulnerabilities](#dependency-vulnerability-scanning).\n\n## Distribution\n\nBoth source and binary versions of the package are build using [SetupTools](https://setuptools.readthedocs.io), which \ncan then be published to the [Python package index](https://pypi.org/project/flask-request-id-header/) for use in other \napplications. Package settings are defined in `setup.py`.\n\nThis project is built and published to PyPi automatically through [Continuous Deployment](#continuous-deployment).\n\nTo build the source and binary artefacts for this project manually:\n\n```shell\n$ docker-compose run app ash\n# build package to /build, /dist and /flask_reverse_proxy_fix.egg-info\n$ python setup.py sdist bdist_wheel\n$ exit\n$ docker-compose down\n```\n\nTo publish built artefacts for this project manually to [PyPi testing](https://test.pypi.org):\n\n```shell\n$ docker-compose run app ash\n$ python -m twine upload --repository-url https://test.pypi.org/legacy/ dist/*\n# project then available at: https://test.pypi.org/project/flask-request-id-header/\n$ exit\n$ docker-compose down\n```\n\nTo publish manually to [PyPi](https://pypi.org):\n\n```shell\n$ docker-compose run app ash\n$ python -m twine upload --repository-url https://pypi.org/legacy/ dist/*\n# project then available at: https://pypi.org/project/flask-request-id-header/\n$ exit\n$ docker-compose down\n```\n\n### Continuous Deployment\n\nA Continuous Deployment process using GitLab's CI/CD platform is configured in `.gitlab-ci.yml`. This will:\n\n* build the source and binary artefacts for this project\n* publish built artefacts for this project to the relevant PyPi repository\n\nThis process will deploy changes to [PyPi testing](https://test.pypi.org) on all commits to the *master* branch.\n\nThis process will deploy changes to [PyPi](https://pypi.org) on all tagged commits.\n\n## Release procedure\n\n### At release\n\n1. create a `release` branch\n2. remove `.dev{ os.getenv('CI_PIPELINE_ID') or None }` from the version parameter in `setup.py` and ensure version \n   is bumped as per semver\n3. close release in `CHANGELOG.md`\n4. push changes, merge the `release` branch into `master` and tag with version\n\nThe project will be built and published to PyPi automatically through [Continuous Deployment](#continuous-deployment).\n\n### After release\n\n1. create a `next-release` branch\n2. bump the version parameter in `setup.py` and append `.dev{ os.getenv('CI_PIPELINE_ID') or None }` to signify a     \n  pre-release\n3. push changes and merge the `next-release` branch into `master`\n\n## Feedback\n\nThe maintainer of this project is the BAS Web & Applications Team, they can be contacted at: \n[servicedesk@bas.ac.uk](mailto:servicedesk@bas.ac.uk).\n\n## Issue tracking\n\nThis project uses issue tracking, see the \n[Issue tracker](https://gitlab.data.bas.ac.uk/web-apps/flask-middleware/flask-request-id/issues) for more information.\n\n**Note:** Read & write access to this issue tracker is restricted. Contact the project maintainer to request access.\n\n## License\n\n\u00a9 UK Research and Innovation (UKRI), 2019, British Antarctic Survey.\n\nYou may use and re-use this software and associated documentation files free of charge in any format or medium, under \nthe terms of the Open Government Licence v3.0.\n\nYou may obtain a copy of the Open Government Licence at http://www.nationalarchives.gov.uk/doc/open-government-licence/\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/antarctica/flask-request-id-header", "keywords": "", "license": "Open Government Licence v3.0", "maintainer": "", "maintainer_email": "", "name": "flask-request-id-header", "package_url": "https://pypi.org/project/flask-request-id-header/", "platform": "", "project_url": "https://pypi.org/project/flask-request-id-header/", "project_urls": {"Homepage": "https://github.com/antarctica/flask-request-id-header"}, "release_url": "https://pypi.org/project/flask-request-id-header/0.1.1/", "requires_dist": ["flask"], "requires_python": "", "summary": "Python Flask middleware to ensure all requests have a request ID header", "version": "0.1.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Flask Request ID Middleware</h1>\n<p>Python Flask middleware to ensure all requests have a request ID header.</p>\n<h2>Purpose</h2>\n<p>This middleware ensures all request made to a Flask application includes a Request ID header (<code>X-Request-ID</code>),\ncontaining at least one unique value.</p>\n<p><a href=\"https://theburningmonk.com/2015/05/a-consistent-approach-to-track-correlation-ids-through-microservices/\" rel=\"nofollow\">Request IDs</a>\nor <em>Correlation IDs</em> can be used when logging errors and allows users to trace requests through multiple layers such as\nload balancers and reverse proxies. The request ID header value may consist of multiple IDs encoded according to\n<a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2\" rel=\"nofollow\">RFC 2616</a>.</p>\n<h2>Installation</h2>\n<p>This package can be installed using Pip from <a href=\"https://pypi.org/project/flask-request-id-header\" rel=\"nofollow\">PyPi</a>:</p>\n<pre><code>$ pip install flask-request-id-header\n</code></pre>\n<h2>Usage</h2>\n<p>This middleware has no required parameters and by default will add a request header to requests where one does not\nalready exist, or append a unique value where existing request IDs do not contain at least one UUID (version 4) value.</p>\n<p>A minimal application would look like this:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">Flask</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask_request_id_header.middleware</span> <span class=\"kn\">import</span> <span class=\"n\">RequestID</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n<span class=\"n\">RequestID</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">hello_world</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'hello world'</span>\n</pre>\n<p>Optionally a Flask config option, <code>REQUEST_ID_UNIQUE_VALUE_PREFIX</code>, can be set whereby any request ID beginning with\nthis prefix be treated as unique, preventing an additional value being appended.</p>\n<p>A minimal application would look like this:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">Flask</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask_request_id_header.middleware</span> <span class=\"kn\">import</span> <span class=\"n\">RequestID</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"p\">[</span><span class=\"s1\">'REQUEST_ID_UNIQUE_VALUE_PREFIX'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">'FOO-'</span>\n<span class=\"n\">RequestID</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">hello_world</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'hello world'</span>\n</pre>\n<h3>Accessing the request ID</h3>\n<p>The current request ID can be accessed wherever a request context exists:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">has_request_context</span>\n\n<span class=\"k\">if</span> <span class=\"n\">has_request_context</span><span class=\"p\">():</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"HTTP_X_REQUEST_ID\"</span><span class=\"p\">))</span>\n</pre>\n<p>To access the request ID outside of the current application, it is included in the response (as <code>X-Request-ID</code>).</p>\n<p><strong>Note:</strong> Components between the application and the client, such as reverse proxies, may alter or remove this header\nvalue before reaching the client.</p>\n<h3>Logging the request ID</h3>\n<p>Optionally, the current request ID can be included in application logs, where a request context exists.</p>\n<p>A minimal application would look like this:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">Flask</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">has_request_context</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask.logging</span> <span class=\"kn\">import</span> <span class=\"n\">default_handler</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask_request_id_header.middleware</span> <span class=\"kn\">import</span> <span class=\"n\">RequestID</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"p\">[</span><span class=\"s1\">'REQUEST_ID_UNIQUE_VALUE_PREFIX'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">'FOO-'</span>\n<span class=\"n\">RequestID</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">RequestFormatter</span><span class=\"p\">(</span><span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">Formatter</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">format</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">record</span><span class=\"p\">):</span>\n        <span class=\"n\">record</span><span class=\"o\">.</span><span class=\"n\">request_id</span> <span class=\"o\">=</span> <span class=\"s1\">'NA'</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">has_request_context</span><span class=\"p\">():</span>\n            <span class=\"n\">record</span><span class=\"o\">.</span><span class=\"n\">request_id</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"HTTP_X_REQUEST_ID\"</span><span class=\"p\">)</span>\n\n        <span class=\"k\">return</span> <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">record</span><span class=\"p\">)</span>\n\n<span class=\"n\">formatter</span> <span class=\"o\">=</span> <span class=\"n\">RequestFormatter</span><span class=\"p\">(</span>\n    <span class=\"s1\">'[</span><span class=\"si\">%(asctime)s</span><span class=\"s1\">] [</span><span class=\"si\">%(levelname)s</span><span class=\"s1\">] [</span><span class=\"si\">%(request_id)s</span><span class=\"s1\">] </span><span class=\"si\">%(module)s</span><span class=\"s1\">: </span><span class=\"si\">%(message)s</span><span class=\"s1\">'</span>\n<span class=\"p\">)</span>\n<span class=\"n\">default_handler</span><span class=\"o\">.</span><span class=\"n\">setFormatter</span><span class=\"p\">(</span><span class=\"n\">formatter</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">hello_world</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'hello world'</span>\n</pre>\n<h2>Developing</h2>\n<p>A docker container ran through Docker Compose is used as a development environment for this project defined . It\nincludes development only dependencies listed in <code>requirements.txt</code>, a local Flask application in <code>app.py</code> and\n<a href=\"#integration-tests\" rel=\"nofollow\">Integration tests</a>.</p>\n<p>Ensure classes and methods are defined within the <code>flask_request_id_header</code> package.</p>\n<p>Ensure <a href=\"#integration-tests\" rel=\"nofollow\">Integration tests</a> are written for any new feature, or changes to existing features.</p>\n<p>If you have access to the BAS GitLab instance, pull the Docker image from the BAS Docker Registry:</p>\n<pre>$ docker login docker-registry.data.bas.ac.uk\n$ docker-compose pull\n\n<span class=\"c1\"># To run the local Flask application using the Flask development server</span>\n$ docker-compose up\n\n<span class=\"c1\"># To start a shell</span>\n$ docker-compose run app ash\n</pre>\n<h3>Code Style</h3>\n<p>PEP-8 style and formatting guidelines must be used for this project, with the exception of the 80 character line limit.</p>\n<p><a href=\"http://flake8.pycqa.org/\" rel=\"nofollow\">Flake8</a> is used to ensure compliance, and is ran on each commit through\n<a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>.</p>\n<p>To check compliance locally:</p>\n<pre>$ docker-compose run app flake8 . --ignore<span class=\"o\">=</span>E501\n</pre>\n<h3>Dependencies</h3>\n<p>Development Python dependencies should be declared in <code>requirements.txt</code> to be included in the development environment.</p>\n<p>Runtime Python dependencies should be declared in <code>requirements.txt</code> and <code>setup.py</code> to also be installed as dependencies\nof this package in other applications.</p>\n<p>All dependencies should be periodically reviewed and update as new versions are released.</p>\n<pre>$ docker-compose run app ash\n$ pip install <span class=\"o\">[</span>dependency<span class=\"o\">]==</span>\n<span class=\"c1\"># this will display a list of available versions, add the latest to `requirements.txt` and or `setup.py`</span>\n$ <span class=\"nb\">exit</span>\n$ docker-compose down\n$ docker-compose build\n</pre>\n<p>If you have access to the BAS GitLab instance, push the Docker image to the BAS Docker Registry:</p>\n<pre>$ docker login docker-registry.data.bas.ac.uk\n$ docker-compose push\n</pre>\n<h3>Dependency vulnerability scanning</h3>\n<p>To ensure the security of this API, all dependencies are checked against\n<a href=\"https://app.snyk.io/org/antarctica/project/ef12439f-4d28-45af-81c2-fad464a05184\" rel=\"nofollow\">Snyk</a> for vulnerabilities.</p>\n<p><strong>Warning:</strong> Snyk relies on known vulnerabilities and can't check for issues that are not in it's database. As with all\nsecurity tools, Snyk is an aid for spotting common mistakes, not a guarantee of secure code.</p>\n<p>Some vulnerabilities have been ignored in this project, see <code>.snyk</code> for definitions and the\n<a href=\"#dependency-vulnerability-exceptions\" rel=\"nofollow\">Dependency exceptions</a> section for more information.</p>\n<p>Through <a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>, on each commit current dependencies are tested and a snapshot\nuploaded to Snyk. This snapshot is then monitored for vulnerabilities.</p>\n<h4>Dependency vulnerability exceptions</h4>\n<p>This project contains known vulnerabilities that have been ignored for a specific reason.</p>\n<ul>\n<li><a href=\"https://snyk.io/vuln/SNYK-PYTHON-PYYAML-42159\" rel=\"nofollow\">Py-Yaml <code>yaml.load()</code> function allows Arbitrary Code Execution</a>\n<ul>\n<li>currently no known or planned resolution</li>\n<li>indirect dependency, required through the <code>bandit</code> package</li>\n<li>severity is rated <em>high</em></li>\n<li>risk judged to be <em>low</em> as we don't use the Yaml module in this application</li>\n<li>ignored for 1 year for re-review</li>\n</ul>\n</li>\n</ul>\n<h3>Static security scanning</h3>\n<p>To ensure the security of this API, source code is checked against <a href=\"https://github.com/PyCQA/bandit\" rel=\"nofollow\">Bandit</a> for issues\nsuch as not sanitising user inputs or using weak cryptography.</p>\n<p><strong>Warning:</strong> Bandit is a static analysis tool and can't check for issues that are only be detectable when running the\napplication. As with all security tools, Bandit is an aid for spotting common mistakes, not a guarantee of secure code.</p>\n<p>Through <a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>, each commit is tested.</p>\n<p>To check locally:</p>\n<pre>$ docker-compose run app bandit -r .\n</pre>\n<h2>Testing</h2>\n<h3>Integration tests</h3>\n<p>This project uses integration tests to ensure features work as expected and to guard against regressions and\nvulnerabilities.</p>\n<p>The Python <a href=\"https://docs.python.org/3/library/unittest.html\" rel=\"nofollow\">UnitTest</a> library is used for running tests using Flask's\ntest framework. Test cases are defined in files within <code>tests/</code> and are automatically loaded when using the\n<code>test</code> Flask CLI command included in the local Flask application in the development environment.</p>\n<p>Tests are automatically ran on each commit through <a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>.</p>\n<p>To run tests manually:</p>\n<pre>$ docker-compose run -e <span class=\"nv\">FLASK_ENV</span><span class=\"o\">=</span>testing app flask <span class=\"nb\">test</span>\n</pre>\n<p>To run tests using PyCharm:</p>\n<ul>\n<li><em>Run</em> -&gt; <em>Edit Configurations</em></li>\n<li><em>Add New Configuration</em> -&gt; <em>Python Tests</em> -&gt; <em>Unittests</em></li>\n</ul>\n<p>In <em>Configuration</em> tab:</p>\n<ul>\n<li>Script path: <code>[absolute path to project]/tests</code></li>\n<li>Python interpreter: <em>Project interpreter</em> (<em>app</em> service in project Docker Compose)</li>\n<li>Working directory: <code>[absolute path to project]</code></li>\n<li>Path mappings: <code>[absolute path to project]=/usr/src/app</code></li>\n</ul>\n<p><strong>Note:</strong> This configuration can be also be used to debug tests (by choosing <em>debug</em> instead of <em>run</em>).</p>\n<h3>Continuous Integration</h3>\n<p>All commits will trigger a Continuous Integration process using GitLab's CI/CD platform, configured in <code>.gitlab-ci.yml</code>.</p>\n<p>This process will run the application <a href=\"#integration-tests\" rel=\"nofollow\">Integration tests</a>.</p>\n<p>Pip dependencies are also <a href=\"#dependency-vulnerability-scanning\" rel=\"nofollow\">checked and monitored for vulnerabilities</a>.</p>\n<h2>Distribution</h2>\n<p>Both source and binary versions of the package are build using <a href=\"https://setuptools.readthedocs.io\" rel=\"nofollow\">SetupTools</a>, which\ncan then be published to the <a href=\"https://pypi.org/project/flask-request-id-header/\" rel=\"nofollow\">Python package index</a> for use in other\napplications. Package settings are defined in <code>setup.py</code>.</p>\n<p>This project is built and published to PyPi automatically through <a href=\"#continuous-deployment\" rel=\"nofollow\">Continuous Deployment</a>.</p>\n<p>To build the source and binary artefacts for this project manually:</p>\n<pre>$ docker-compose run app ash\n<span class=\"c1\"># build package to /build, /dist and /flask_reverse_proxy_fix.egg-info</span>\n$ python setup.py sdist bdist_wheel\n$ <span class=\"nb\">exit</span>\n$ docker-compose down\n</pre>\n<p>To publish built artefacts for this project manually to <a href=\"https://test.pypi.org\" rel=\"nofollow\">PyPi testing</a>:</p>\n<pre>$ docker-compose run app ash\n$ python -m twine upload --repository-url https://test.pypi.org/legacy/ dist/*\n<span class=\"c1\"># project then available at: https://test.pypi.org/project/flask-request-id-header/</span>\n$ <span class=\"nb\">exit</span>\n$ docker-compose down\n</pre>\n<p>To publish manually to <a href=\"https://pypi.org\" rel=\"nofollow\">PyPi</a>:</p>\n<pre>$ docker-compose run app ash\n$ python -m twine upload --repository-url https://pypi.org/legacy/ dist/*\n<span class=\"c1\"># project then available at: https://pypi.org/project/flask-request-id-header/</span>\n$ <span class=\"nb\">exit</span>\n$ docker-compose down\n</pre>\n<h3>Continuous Deployment</h3>\n<p>A Continuous Deployment process using GitLab's CI/CD platform is configured in <code>.gitlab-ci.yml</code>. This will:</p>\n<ul>\n<li>build the source and binary artefacts for this project</li>\n<li>publish built artefacts for this project to the relevant PyPi repository</li>\n</ul>\n<p>This process will deploy changes to <a href=\"https://test.pypi.org\" rel=\"nofollow\">PyPi testing</a> on all commits to the <em>master</em> branch.</p>\n<p>This process will deploy changes to <a href=\"https://pypi.org\" rel=\"nofollow\">PyPi</a> on all tagged commits.</p>\n<h2>Release procedure</h2>\n<h3>At release</h3>\n<ol>\n<li>create a <code>release</code> branch</li>\n<li>remove <code>.dev{ os.getenv('CI_PIPELINE_ID') or None }</code> from the version parameter in <code>setup.py</code> and ensure version\nis bumped as per semver</li>\n<li>close release in <code>CHANGELOG.md</code></li>\n<li>push changes, merge the <code>release</code> branch into <code>master</code> and tag with version</li>\n</ol>\n<p>The project will be built and published to PyPi automatically through <a href=\"#continuous-deployment\" rel=\"nofollow\">Continuous Deployment</a>.</p>\n<h3>After release</h3>\n<ol>\n<li>create a <code>next-release</code> branch</li>\n<li>bump the version parameter in <code>setup.py</code> and append <code>.dev{ os.getenv('CI_PIPELINE_ID') or None }</code> to signify a<br>\npre-release</li>\n<li>push changes and merge the <code>next-release</code> branch into <code>master</code></li>\n</ol>\n<h2>Feedback</h2>\n<p>The maintainer of this project is the BAS Web &amp; Applications Team, they can be contacted at:\n<a href=\"mailto:servicedesk@bas.ac.uk\">servicedesk@bas.ac.uk</a>.</p>\n<h2>Issue tracking</h2>\n<p>This project uses issue tracking, see the\n<a href=\"https://gitlab.data.bas.ac.uk/web-apps/flask-middleware/flask-request-id/issues\" rel=\"nofollow\">Issue tracker</a> for more information.</p>\n<p><strong>Note:</strong> Read &amp; write access to this issue tracker is restricted. Contact the project maintainer to request access.</p>\n<h2>License</h2>\n<p>\u00a9 UK Research and Innovation (UKRI), 2019, British Antarctic Survey.</p>\n<p>You may use and re-use this software and associated documentation files free of charge in any format or medium, under\nthe terms of the Open Government Licence v3.0.</p>\n<p>You may obtain a copy of the Open Government Licence at <a href=\"http://www.nationalarchives.gov.uk/doc/open-government-licence/\" rel=\"nofollow\">http://www.nationalarchives.gov.uk/doc/open-government-licence/</a></p>\n\n          </div>"}, "last_serial": 4888641, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "8c203ddae5371ce8a710b6e85b9f0566", "sha256": "557e0b7f0617771d29cd11988792a3e561de16b9f57fd52ad1229dec49cf26ce"}, "downloads": -1, "filename": "flask_request_id_header-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8c203ddae5371ce8a710b6e85b9f0566", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7818, "upload_time": "2019-03-02T15:57:01", "upload_time_iso_8601": "2019-03-02T15:57:01.900047Z", "url": "https://files.pythonhosted.org/packages/b8/bf/88d43b5a4c4ca82304c3ef60d076fa4fb47565a69c39dca81dc3105e8cdf/flask_request_id_header-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "51824ca790ba6d686cf652e3af42a0c0", "sha256": "59cea9d7a730a1bfda515412e29e5c804cbf36a1e4a98c1bae74a105acf1cbbc"}, "downloads": -1, "filename": "flask-request-id-header-0.1.0.tar.gz", "has_sig": false, "md5_digest": "51824ca790ba6d686cf652e3af42a0c0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8465, "upload_time": "2019-03-02T15:57:04", "upload_time_iso_8601": "2019-03-02T15:57:04.211073Z", "url": "https://files.pythonhosted.org/packages/12/17/a8450224d2dc63d41a03d41612f6691c4e5a13c010cfb7bc57d06aae28bb/flask-request-id-header-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "4acb340fe4f9c30d8b0d8cab5dea6222", "sha256": "b8f433f51c3accc2b5c0f928f3decd2b22e6b143401058ef7b5f85d38fbbcee4"}, "downloads": -1, "filename": "flask_request_id_header-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "4acb340fe4f9c30d8b0d8cab5dea6222", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7816, "upload_time": "2019-03-02T16:43:58", "upload_time_iso_8601": "2019-03-02T16:43:58.286593Z", "url": "https://files.pythonhosted.org/packages/70/ea/c483978c2342b2a92065d4020d1640ff3dbae9cde22e9a6ce821496e6835/flask_request_id_header-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d3394c33f7b088aefb22acce0a8738f7", "sha256": "a6245ee731bb32e566f10ada18a7ce521125519ab0fcd648d23208c8d1928fee"}, "downloads": -1, "filename": "flask-request-id-header-0.1.1.tar.gz", "has_sig": false, "md5_digest": "d3394c33f7b088aefb22acce0a8738f7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8461, "upload_time": "2019-03-02T16:43:59", "upload_time_iso_8601": "2019-03-02T16:43:59.631718Z", "url": "https://files.pythonhosted.org/packages/06/ea/637ce01f81c4d0b0b2ee11c45a1899849832af8392d59e25d86f6f7709c5/flask-request-id-header-0.1.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4acb340fe4f9c30d8b0d8cab5dea6222", "sha256": "b8f433f51c3accc2b5c0f928f3decd2b22e6b143401058ef7b5f85d38fbbcee4"}, "downloads": -1, "filename": "flask_request_id_header-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "4acb340fe4f9c30d8b0d8cab5dea6222", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7816, "upload_time": "2019-03-02T16:43:58", "upload_time_iso_8601": "2019-03-02T16:43:58.286593Z", "url": "https://files.pythonhosted.org/packages/70/ea/c483978c2342b2a92065d4020d1640ff3dbae9cde22e9a6ce821496e6835/flask_request_id_header-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d3394c33f7b088aefb22acce0a8738f7", "sha256": "a6245ee731bb32e566f10ada18a7ce521125519ab0fcd648d23208c8d1928fee"}, "downloads": -1, "filename": "flask-request-id-header-0.1.1.tar.gz", "has_sig": false, "md5_digest": "d3394c33f7b088aefb22acce0a8738f7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8461, "upload_time": "2019-03-02T16:43:59", "upload_time_iso_8601": "2019-03-02T16:43:59.631718Z", "url": "https://files.pythonhosted.org/packages/06/ea/637ce01f81c4d0b0b2ee11c45a1899849832af8392d59e25d86f6f7709c5/flask-request-id-header-0.1.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 01:02:27 2020"}