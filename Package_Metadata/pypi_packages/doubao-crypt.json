{"info": {"author": "biao.xu", "author_email": "biao.xu@baodanyun-inc.com", "bugtrack_url": null, "classifiers": ["Operating System :: OS Independent", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7"], "description": "# privacy-policy\n\n## \u4f7f\u7528\u8bf4\u660e\n\n### \u4f7f\u7528`doubao_crypt`\n\n#### \u5b89\u88c5\n\n\u6e90\u7801\u5b89\u88c5\n\n```shell\n# python setup install\npython3 setup install\n```\n\npip\u5b89\u88c5\n\n```shell\npip3 install doubao-crypt\n```\n\n#### \u901a\u8fc7cid(gid,uid)\u7b49\u76f4\u63a5\u52a0\u5bc6(\u4e0d\u9700\u8981\u5bc6\u94a5)\n\n\u8c03\u7528\u524d\u5148\u521d\u59cb\u5316cache\n\n```python\nfrom doubao_crypt import init_cache\n\n# \u4f7f\u7528\u672c\u5730\u7f13\u5b58\uff08\u5b57\u5178cache\uff09\ninit_cache('http://test.api2.17doubao.com', cache_type='LocalCache')\n# \u4f7f\u7528 redis\u6765\u7f13\u5b58\n# init_cache('http://test.api2.17doubao.com', cache_type='RedisCache', cache_uri='redis://localhost/0')\n```\n\n\u65b9\u6cd5init_cache\u4f7f\u7528redis\u6765\u7f13\u5b58\u65f6\u7684\u53ef\u9009\u53c2\u6570\uff1a\n\n* cache_prefix: \u524d\u7f00\uff0c\u9ed8\u8ba4\u503c'doubao-keys-'\u3002\n* cache_instance: \u7f13\u5b58\u5b9e\u4f8b\uff08redis.Redis\uff09\u3002cache_instance\u548ccache_uri\u4f20\u5165\u4efb\u610f\u4e00\u4e2a\u5373\u53ef\n* cache_uri: \u7f13\u5b58uri\uff0c\u9ed8\u8ba4`redis://localhost/0`\u3002cache_instance\u548ccache_uri\u4f20\u5165\u4efb\u610f\u4e00\u4e2a\u5373\u53ef\n* pre_cache: \u662f\u5426\u9884\u8f7d\u6570\u636e\uff0c\u9ed8\u8ba4False\uff0c\u4e3aTrue\u65f6\u4f1a\u9884\u5148\u52a0\u8f7d\u6570\u636e\u5230\u7f13\u5b58\n* clean: \u662f\u5426\u6e05\u7a7a\u4e4b\u524d\u7684\u7f13\u5b58\u6570\u636e\uff0c\u9ed8\u8ba4True\n\n> \u4f7f\u7528`init_cache`\u65b9\u6cd5\u521d\u59cb\u5316\u4e00\u6b21\u5373\u53ef\n\n\u4f7f\u7528\u5b8c\u6574\u793a\u4f8b\u5982\u4e0b\uff1a\n\n```python\nfrom doubao_crypt import init_cache, doubao_ecies_encrypt, doubao_privacy_policy, safe_doubao_ecies_encrypt\nimport redis\n\n\npool = redis.ConnectionPool(host='localhost', port=6379, db=0)\nr = redis.Redis(connection_pool=pool)\ninit_cache('http://test.api2.17doubao.com', cache_type='RedisCache', cache_instance=r)\n\ndata = [\n    {\n        \"birthday\": \"1973-03-02\",\n        \"idCardType\": 111,\n        \"idCardNo\": \"110101********5330\",\n        \"sex\": 1,\n        \"mobile\": \"13123456789\",\n        \"name\": \"\u5f20\u4e09\",\n        \"age\": 29\n    },\n    {\n        \"mobile\": \"13123456788\",\n        \"name\": \"\u674e\u56db\",\n        \"idCardType\": 111,\n        \"idCardNo\": \"513436201801012266\"\n    }\n]\n\n# \u76f4\u63a5\u8c03\u7528\u65b9\u6cd5\ncrypted_data = doubao_ecies_encrypt(data, fields=['mobile', 'idCardNo'], cid=583, gid=583, agent_id=3692)\n\n# \u5b89\u5168\u8c03\u7528\u52a0\u5bc6\u65b9\u6cd5\uff08\u4e0d\u629b\u51fa\u5f02\u5e38\uff0c\u9519\u8bef\u5728\u8fd4\u56de\u503c\u4e2d\uff09\nflag, msg, crypted_data = safe_doubao_ecies_encrypt(data, fields=['mobile', 'idCardNo'], cid=583, gid=583, agent_id=3692)\n\n\n# \u4f7f\u7528\u88c5\u9970\u5668\n@doubao_privacy_policy(fields=['mobile', 'idCardNo'], cid=583, gid=583, agent_id=3692)\ndef test_doubao_privacy_policy(users):\n    pass\n\ntest_doubao_privacy_policy(data)\n```\n\n> \u5173\u4e8e\u591a\u5c42\u7ed3\u6784\u7684\u5185\u6570\u636e\u7684\u52a0\u5bc6\uff0c`fields`\u4e2d\u5b57\u6bb5\u4f7f\u7528`.`\u6765\u533a\u5206\u5c42\u7ea7\uff0c\u5982'data.info.mobile'\n\n#### \u901a\u8fc7\u5bc6\u94a5\u52a0\u89e3\u5bc6\n\ndemo\n\n```python\necurity_service = SecurityService(\n    private_key='4ddc101e5fc4e2820c7c5275050fc3dc7f8ca344afb41a3bb804afd3b5b1b8d6',\n    public_key='5a66be441a4dc16b12effed07d6e6e3ee2e8753e0dcaac07be71190f19f43b277e10c174bccbb50286d6a65e11b25d957ef8bed80c192e8a8178a3715c56cf7a')\n\ntext_list = [\n    '123456789987654321',\n    '1234567****7654321',\n    '1234567XXXX7654321',\n    '1234567xxxx7654321',\n    '123',\n]\nfor text in text_list:\n    cipher_text = security_service.ecies_encrypt(text)  # \u52a0\u5bc6\n    plain_text = security_service.ecies_decrypt(cipher_text)  #  \u89e3\u5bc6\n    print(f'======[ {text} ]=======')\n    print('cipher_text', cipher_text)\n    print('plain_text', plain_text)\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "doubao-crypt", "package_url": "https://pypi.org/project/doubao-crypt/", "platform": "", "project_url": "https://pypi.org/project/doubao-crypt/", "project_urls": null, "release_url": "https://pypi.org/project/doubao-crypt/1.1.1/", "requires_dist": null, "requires_python": ">=3.5.3", "summary": "doubao crypt python library", "version": "1.1.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>privacy-policy</h1>\n<h2>\u4f7f\u7528\u8bf4\u660e</h2>\n<h3>\u4f7f\u7528<code>doubao_crypt</code></h3>\n<h4>\u5b89\u88c5</h4>\n<p>\u6e90\u7801\u5b89\u88c5</p>\n<pre><span class=\"c1\"># python setup install</span>\npython3 setup install\n</pre>\n<p>pip\u5b89\u88c5</p>\n<pre>pip3 install doubao-crypt\n</pre>\n<h4>\u901a\u8fc7cid(gid,uid)\u7b49\u76f4\u63a5\u52a0\u5bc6(\u4e0d\u9700\u8981\u5bc6\u94a5)</h4>\n<p>\u8c03\u7528\u524d\u5148\u521d\u59cb\u5316cache</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">doubao_crypt</span> <span class=\"kn\">import</span> <span class=\"n\">init_cache</span>\n\n<span class=\"c1\"># \u4f7f\u7528\u672c\u5730\u7f13\u5b58\uff08\u5b57\u5178cache\uff09</span>\n<span class=\"n\">init_cache</span><span class=\"p\">(</span><span class=\"s1\">'http://test.api2.17doubao.com'</span><span class=\"p\">,</span> <span class=\"n\">cache_type</span><span class=\"o\">=</span><span class=\"s1\">'LocalCache'</span><span class=\"p\">)</span>\n<span class=\"c1\"># \u4f7f\u7528 redis\u6765\u7f13\u5b58</span>\n<span class=\"c1\"># init_cache('http://test.api2.17doubao.com', cache_type='RedisCache', cache_uri='redis://localhost/0')</span>\n</pre>\n<p>\u65b9\u6cd5init_cache\u4f7f\u7528redis\u6765\u7f13\u5b58\u65f6\u7684\u53ef\u9009\u53c2\u6570\uff1a</p>\n<ul>\n<li>cache_prefix: \u524d\u7f00\uff0c\u9ed8\u8ba4\u503c'doubao-keys-'\u3002</li>\n<li>cache_instance: \u7f13\u5b58\u5b9e\u4f8b\uff08redis.Redis\uff09\u3002cache_instance\u548ccache_uri\u4f20\u5165\u4efb\u610f\u4e00\u4e2a\u5373\u53ef</li>\n<li>cache_uri: \u7f13\u5b58uri\uff0c\u9ed8\u8ba4<code>redis://localhost/0</code>\u3002cache_instance\u548ccache_uri\u4f20\u5165\u4efb\u610f\u4e00\u4e2a\u5373\u53ef</li>\n<li>pre_cache: \u662f\u5426\u9884\u8f7d\u6570\u636e\uff0c\u9ed8\u8ba4False\uff0c\u4e3aTrue\u65f6\u4f1a\u9884\u5148\u52a0\u8f7d\u6570\u636e\u5230\u7f13\u5b58</li>\n<li>clean: \u662f\u5426\u6e05\u7a7a\u4e4b\u524d\u7684\u7f13\u5b58\u6570\u636e\uff0c\u9ed8\u8ba4True</li>\n</ul>\n<blockquote>\n<p>\u4f7f\u7528<code>init_cache</code>\u65b9\u6cd5\u521d\u59cb\u5316\u4e00\u6b21\u5373\u53ef</p>\n</blockquote>\n<p>\u4f7f\u7528\u5b8c\u6574\u793a\u4f8b\u5982\u4e0b\uff1a</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">doubao_crypt</span> <span class=\"kn\">import</span> <span class=\"n\">init_cache</span><span class=\"p\">,</span> <span class=\"n\">doubao_ecies_encrypt</span><span class=\"p\">,</span> <span class=\"n\">doubao_privacy_policy</span><span class=\"p\">,</span> <span class=\"n\">safe_doubao_ecies_encrypt</span>\n<span class=\"kn\">import</span> <span class=\"nn\">redis</span>\n\n\n<span class=\"n\">pool</span> <span class=\"o\">=</span> <span class=\"n\">redis</span><span class=\"o\">.</span><span class=\"n\">ConnectionPool</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"o\">=</span><span class=\"s1\">'localhost'</span><span class=\"p\">,</span> <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"mi\">6379</span><span class=\"p\">,</span> <span class=\"n\">db</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"n\">r</span> <span class=\"o\">=</span> <span class=\"n\">redis</span><span class=\"o\">.</span><span class=\"n\">Redis</span><span class=\"p\">(</span><span class=\"n\">connection_pool</span><span class=\"o\">=</span><span class=\"n\">pool</span><span class=\"p\">)</span>\n<span class=\"n\">init_cache</span><span class=\"p\">(</span><span class=\"s1\">'http://test.api2.17doubao.com'</span><span class=\"p\">,</span> <span class=\"n\">cache_type</span><span class=\"o\">=</span><span class=\"s1\">'RedisCache'</span><span class=\"p\">,</span> <span class=\"n\">cache_instance</span><span class=\"o\">=</span><span class=\"n\">r</span><span class=\"p\">)</span>\n\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n        <span class=\"s2\">\"birthday\"</span><span class=\"p\">:</span> <span class=\"s2\">\"1973-03-02\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"idCardType\"</span><span class=\"p\">:</span> <span class=\"mi\">111</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"idCardNo\"</span><span class=\"p\">:</span> <span class=\"s2\">\"110101********5330\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"sex\"</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"mobile\"</span><span class=\"p\">:</span> <span class=\"s2\">\"13123456789\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u5f20\u4e09\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"age\"</span><span class=\"p\">:</span> <span class=\"mi\">29</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n        <span class=\"s2\">\"mobile\"</span><span class=\"p\">:</span> <span class=\"s2\">\"13123456788\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u674e\u56db\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"idCardType\"</span><span class=\"p\">:</span> <span class=\"mi\">111</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"idCardNo\"</span><span class=\"p\">:</span> <span class=\"s2\">\"513436201801012266\"</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">]</span>\n\n<span class=\"c1\"># \u76f4\u63a5\u8c03\u7528\u65b9\u6cd5</span>\n<span class=\"n\">crypted_data</span> <span class=\"o\">=</span> <span class=\"n\">doubao_ecies_encrypt</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">fields</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'mobile'</span><span class=\"p\">,</span> <span class=\"s1\">'idCardNo'</span><span class=\"p\">],</span> <span class=\"n\">cid</span><span class=\"o\">=</span><span class=\"mi\">583</span><span class=\"p\">,</span> <span class=\"n\">gid</span><span class=\"o\">=</span><span class=\"mi\">583</span><span class=\"p\">,</span> <span class=\"n\">agent_id</span><span class=\"o\">=</span><span class=\"mi\">3692</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># \u5b89\u5168\u8c03\u7528\u52a0\u5bc6\u65b9\u6cd5\uff08\u4e0d\u629b\u51fa\u5f02\u5e38\uff0c\u9519\u8bef\u5728\u8fd4\u56de\u503c\u4e2d\uff09</span>\n<span class=\"n\">flag</span><span class=\"p\">,</span> <span class=\"n\">msg</span><span class=\"p\">,</span> <span class=\"n\">crypted_data</span> <span class=\"o\">=</span> <span class=\"n\">safe_doubao_ecies_encrypt</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">fields</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'mobile'</span><span class=\"p\">,</span> <span class=\"s1\">'idCardNo'</span><span class=\"p\">],</span> <span class=\"n\">cid</span><span class=\"o\">=</span><span class=\"mi\">583</span><span class=\"p\">,</span> <span class=\"n\">gid</span><span class=\"o\">=</span><span class=\"mi\">583</span><span class=\"p\">,</span> <span class=\"n\">agent_id</span><span class=\"o\">=</span><span class=\"mi\">3692</span><span class=\"p\">)</span>\n\n\n<span class=\"c1\"># \u4f7f\u7528\u88c5\u9970\u5668</span>\n<span class=\"nd\">@doubao_privacy_policy</span><span class=\"p\">(</span><span class=\"n\">fields</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'mobile'</span><span class=\"p\">,</span> <span class=\"s1\">'idCardNo'</span><span class=\"p\">],</span> <span class=\"n\">cid</span><span class=\"o\">=</span><span class=\"mi\">583</span><span class=\"p\">,</span> <span class=\"n\">gid</span><span class=\"o\">=</span><span class=\"mi\">583</span><span class=\"p\">,</span> <span class=\"n\">agent_id</span><span class=\"o\">=</span><span class=\"mi\">3692</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">test_doubao_privacy_policy</span><span class=\"p\">(</span><span class=\"n\">users</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"n\">test_doubao_privacy_policy</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span>\n</pre>\n<blockquote>\n<p>\u5173\u4e8e\u591a\u5c42\u7ed3\u6784\u7684\u5185\u6570\u636e\u7684\u52a0\u5bc6\uff0c<code>fields</code>\u4e2d\u5b57\u6bb5\u4f7f\u7528<code>.</code>\u6765\u533a\u5206\u5c42\u7ea7\uff0c\u5982'data.info.mobile'</p>\n</blockquote>\n<h4>\u901a\u8fc7\u5bc6\u94a5\u52a0\u89e3\u5bc6</h4>\n<p>demo</p>\n<pre><span class=\"n\">ecurity_service</span> <span class=\"o\">=</span> <span class=\"n\">SecurityService</span><span class=\"p\">(</span>\n    <span class=\"n\">private_key</span><span class=\"o\">=</span><span class=\"s1\">'4ddc101e5fc4e2820c7c5275050fc3dc7f8ca344afb41a3bb804afd3b5b1b8d6'</span><span class=\"p\">,</span>\n    <span class=\"n\">public_key</span><span class=\"o\">=</span><span class=\"s1\">'5a66be441a4dc16b12effed07d6e6e3ee2e8753e0dcaac07be71190f19f43b277e10c174bccbb50286d6a65e11b25d957ef8bed80c192e8a8178a3715c56cf7a'</span><span class=\"p\">)</span>\n\n<span class=\"n\">text_list</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"s1\">'123456789987654321'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'1234567****7654321'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'1234567XXXX7654321'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'1234567xxxx7654321'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'123'</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n<span class=\"k\">for</span> <span class=\"n\">text</span> <span class=\"ow\">in</span> <span class=\"n\">text_list</span><span class=\"p\">:</span>\n    <span class=\"n\">cipher_text</span> <span class=\"o\">=</span> <span class=\"n\">security_service</span><span class=\"o\">.</span><span class=\"n\">ecies_encrypt</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">)</span>  <span class=\"c1\"># \u52a0\u5bc6</span>\n    <span class=\"n\">plain_text</span> <span class=\"o\">=</span> <span class=\"n\">security_service</span><span class=\"o\">.</span><span class=\"n\">ecies_decrypt</span><span class=\"p\">(</span><span class=\"n\">cipher_text</span><span class=\"p\">)</span>  <span class=\"c1\">#  \u89e3\u5bc6</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">'======[ </span><span class=\"si\">{</span><span class=\"n\">text</span><span class=\"si\">}</span><span class=\"s1\"> ]======='</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'cipher_text'</span><span class=\"p\">,</span> <span class=\"n\">cipher_text</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'plain_text'</span><span class=\"p\">,</span> <span class=\"n\">plain_text</span><span class=\"p\">)</span>\n</pre>\n\n          </div>"}, "last_serial": 6826800, "releases": {"1.0": [{"comment_text": "", "digests": {"md5": "c2055a90216601ea49042b07ffa11578", "sha256": "f0c688b72b534b93a351e95c7caaef90735e68ab5d1fed5151d0c05ef61b554a"}, "downloads": -1, "filename": "doubao_crypt-1.0.tar.gz", "has_sig": false, "md5_digest": "c2055a90216601ea49042b07ffa11578", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4328, "upload_time": "2020-03-16T14:06:13", "upload_time_iso_8601": "2020-03-16T14:06:13.284570Z", "url": "https://files.pythonhosted.org/packages/d2/f6/f69e39f4e23574adf8e69664a9fb9e8c6d4f400c8f50ab71f0b25a41f3ac/doubao_crypt-1.0.tar.gz", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "5ed30202ba3e6a76e00e3ef61144000b", "sha256": "756ef1418096ce328b5854270d34e0d75f865e2506c4ab1106d78792ea759466"}, "downloads": -1, "filename": "doubao_crypt-1.1.0.tar.gz", "has_sig": false, "md5_digest": "5ed30202ba3e6a76e00e3ef61144000b", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5.3", "size": 4655, "upload_time": "2020-03-17T07:35:09", "upload_time_iso_8601": "2020-03-17T07:35:09.466334Z", "url": "https://files.pythonhosted.org/packages/a1/1d/cce3372af3892fab8af3a9d304bb2fb52415932a18cceb0c9b16ad87e6dd/doubao_crypt-1.1.0.tar.gz", "yanked": false}], "1.1.1": [{"comment_text": "", "digests": {"md5": "55bdb7b19516f522239af3c6ea787447", "sha256": "383ef05b0b0bf0ce4dc670e8615dee470b28fadad58f6258ce22ccbc464d88c1"}, "downloads": -1, "filename": "doubao_crypt-1.1.1.tar.gz", "has_sig": false, "md5_digest": "55bdb7b19516f522239af3c6ea787447", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5.3", "size": 5461, "upload_time": "2020-03-17T07:51:57", "upload_time_iso_8601": "2020-03-17T07:51:57.466609Z", "url": "https://files.pythonhosted.org/packages/48/77/136ce6639ca00ba843c58e36eca5cb7c5ea7a23b8347cfb4b29029802b55/doubao_crypt-1.1.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "55bdb7b19516f522239af3c6ea787447", "sha256": "383ef05b0b0bf0ce4dc670e8615dee470b28fadad58f6258ce22ccbc464d88c1"}, "downloads": -1, "filename": "doubao_crypt-1.1.1.tar.gz", "has_sig": false, "md5_digest": "55bdb7b19516f522239af3c6ea787447", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5.3", "size": 5461, "upload_time": "2020-03-17T07:51:57", "upload_time_iso_8601": "2020-03-17T07:51:57.466609Z", "url": "https://files.pythonhosted.org/packages/48/77/136ce6639ca00ba843c58e36eca5cb7c5ea7a23b8347cfb4b29029802b55/doubao_crypt-1.1.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:50:09 2020"}