{"info": {"author": "Rich FitzJohn", "author_email": "r.fitzjohn@imperial.ac.uk", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "## OrderlyWeb (Deploy)\n\n[![Build Status](https://travis-ci.org/vimc/orderly-web-deploy.svg?branch=master)](https://travis-ci.org/vimc/orderly-web-deploy)\n[![codecov.io](https://codecov.io/github/vimc/orderly-web-deploy/coverage.svg?branch=master)](https://codecov.io/github/vimc/orderly-web-deploy?branch=master)\n\nThis is the deploy scripts for OrderlyWeb.  They are the only part of the system that runs directly on metal.\nI am not good at python packaging so some documentation for help me.  These might not be the best ways to do things but they seem to work:\n\n## Installation\n\nFrom local sources\n\n```\npython3 setup.py install --user\n```\n\n(you may need `--upgrade` to upgrade older versions of python packages).\n\nThis installs the package `orderly_web` for programmatic use, and a cli tool `orderly-web` for interacting with the package:\n\n## Usage\n\n```\n$ orderly-web --help\nUsage:\n  orderly-web start <path> [--extra=PATH] [--option=OPTION]... [--pull]\n  orderly-web status <path>\n  orderly-web stop <path> [--volumes] [--network] [--kill] [--force] [--extra=PATH] [--option=OPTION]...\n  orderly-web admin <path> add-users <email>...\n  orderly-web admin <path> add-groups <name>...\n  orderly-web admin <path> add-members <group> <email>...\n  orderly-web admin <path> grant <group> <permission>...\n\nOptions:\n  --extra=PATH     Path, relative to <path>, of yml file of additional\n                   configuration\n  --option=OPTION  Additional configuration options, in the form key=value\n                   Use dots in key for hierarchical structure, e.g., a.b=value\n                   This argument may be repeated to provide multiple arguments\n  --pull           Pull images before starting\n  --volumes        Remove volumes (WARNING: irreversible data loss)\n  --network        Remove network\n  --kill           Kill the containers (faster, but possible db corruption)\n  --force          Force stop even if containers are corrupted and cannot signal their running configuration.\n                   Use with extra and/or option to force stop with configuration options.\n```\n\nHere `<path>` is the path to a directory that contains a configuration file `orderly-web.yml` (more options will follow in future versions).\n\n### Examples\n\nTo deploy with 2 users:\n```\norderly-web start ./config/basic\norderly-web admin ./config/basic add-users test.user@example.com admin.user@example.com\n```\n\nTo grant the users permissions on an individual basis:\n```\norderly-web admin ./config/basic grant test.user@example.com */reports.read\norderly-web admin ./config/basic grant admin.user@example.com */reports.read */reports.review */reports.run\n```\n\nOr to add 2 user groups, \"funders\" and \"admin\", and grant users permissions via group membership: \n```\norderly-web admin ./config/basic add-groups funders admin\norderly-web admin ./config/basic grant funders */reports.read\norderly-web admin ./config/basic grant admin */reports.read */reports.review */reports.run\norderly-web admin ./config/basic add-members funders test.user@example.com\norderly-web admin ./config/basic add-members admin admin.user@example.com\n```\n\n## Testing\n\nRun\n\n```\npython3 setup.py test\n```\n\nThis will take a while.  There will be lots of warnings like:\n\n```\nResourceWarning: unclosed <socket.socket fd=8,\n```\n\nwhich are out of our control (see the helper `docker_client` in `docker_helpers.py` for details).\n\n## Configuration\n\nConfiguration is a work in progress and will change as the tool progresses.  See [`config/complete/orderly-web.yml`] for an annotated configuration that covers all the options.\n\n### Modified versions of configurations\n\nIt is possible to create sub-configurations that adapt a configuration.  To do this, create a base configuration with shared options and save that as `orderly-web.yml`.  Then, within the same directory, create secondary yml files (named however you want) that override options.  For example if you have an `orderly-web.yml` that contains\n\n```yaml\nweb:\n  port: 443\n  name: OrderlyWeb\n  dev_mode: false\n```\n\n(among other options), you could create a yaml file called `testing.yml` (in the same directory) that contains\n\n```yaml\nweb:\n  port: 8000\n  dev_mode: true\n```\n\nWhen run with\n\n```\norderly-web path --extra testing.yml\n```\n\nthe options in `testing.yml` will override the base configuration.  The options that are not mentioned in the `testing.yml` are left unmodified (i.e, in this case we end up with\n\n```yaml\nweb:\n  port: 8000\n  name: OrderlyWeb\n  dev_mode: true\n```\n\nIt is also possible to change options by passing individual changes through with the `--option` flag, for example:\n\n```\norderly-web path --option web.port=8000 --option web.dev_mode=true\n```\n\nUse `.` to indicate a level of nesting and do not use spaces around the `=`; the right-hand-side is parsed as if it was yaml.", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/vimc/orderly-web-deploy", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "orderly-web", "package_url": "https://pypi.org/project/orderly-web/", "platform": "", "project_url": "https://pypi.org/project/orderly-web/", "project_urls": {"Homepage": "https://github.com/vimc/orderly-web-deploy"}, "release_url": "https://pypi.org/project/orderly-web/0.0.6/", "requires_dist": null, "requires_python": "", "summary": "Deploy scripts for OrderlyWeb", "version": "0.0.6", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h2>OrderlyWeb (Deploy)</h2>\n<p><a href=\"https://travis-ci.org/vimc/orderly-web-deploy\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/cfa112276ce3cec246a421b7bccc5d8bcbf79f74/68747470733a2f2f7472617669732d63692e6f72672f76696d632f6f726465726c792d7765622d6465706c6f792e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/github/vimc/orderly-web-deploy?branch=master\" rel=\"nofollow\"><img alt=\"codecov.io\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/cc072022b2f4f14fb36681d48a504cca8175a5af/68747470733a2f2f636f6465636f762e696f2f6769746875622f76696d632f6f726465726c792d7765622d6465706c6f792f636f7665726167652e7376673f6272616e63683d6d6173746572\"></a></p>\n<p>This is the deploy scripts for OrderlyWeb.  They are the only part of the system that runs directly on metal.\nI am not good at python packaging so some documentation for help me.  These might not be the best ways to do things but they seem to work:</p>\n<h2>Installation</h2>\n<p>From local sources</p>\n<pre><code>python3 setup.py install --user\n</code></pre>\n<p>(you may need <code>--upgrade</code> to upgrade older versions of python packages).</p>\n<p>This installs the package <code>orderly_web</code> for programmatic use, and a cli tool <code>orderly-web</code> for interacting with the package:</p>\n<h2>Usage</h2>\n<pre><code>$ orderly-web --help\nUsage:\n  orderly-web start &lt;path&gt; [--extra=PATH] [--option=OPTION]... [--pull]\n  orderly-web status &lt;path&gt;\n  orderly-web stop &lt;path&gt; [--volumes] [--network] [--kill] [--force] [--extra=PATH] [--option=OPTION]...\n  orderly-web admin &lt;path&gt; add-users &lt;email&gt;...\n  orderly-web admin &lt;path&gt; add-groups &lt;name&gt;...\n  orderly-web admin &lt;path&gt; add-members &lt;group&gt; &lt;email&gt;...\n  orderly-web admin &lt;path&gt; grant &lt;group&gt; &lt;permission&gt;...\n\nOptions:\n  --extra=PATH     Path, relative to &lt;path&gt;, of yml file of additional\n                   configuration\n  --option=OPTION  Additional configuration options, in the form key=value\n                   Use dots in key for hierarchical structure, e.g., a.b=value\n                   This argument may be repeated to provide multiple arguments\n  --pull           Pull images before starting\n  --volumes        Remove volumes (WARNING: irreversible data loss)\n  --network        Remove network\n  --kill           Kill the containers (faster, but possible db corruption)\n  --force          Force stop even if containers are corrupted and cannot signal their running configuration.\n                   Use with extra and/or option to force stop with configuration options.\n</code></pre>\n<p>Here <code>&lt;path&gt;</code> is the path to a directory that contains a configuration file <code>orderly-web.yml</code> (more options will follow in future versions).</p>\n<h3>Examples</h3>\n<p>To deploy with 2 users:</p>\n<pre><code>orderly-web start ./config/basic\norderly-web admin ./config/basic add-users test.user@example.com admin.user@example.com\n</code></pre>\n<p>To grant the users permissions on an individual basis:</p>\n<pre><code>orderly-web admin ./config/basic grant test.user@example.com */reports.read\norderly-web admin ./config/basic grant admin.user@example.com */reports.read */reports.review */reports.run\n</code></pre>\n<p>Or to add 2 user groups, \"funders\" and \"admin\", and grant users permissions via group membership:</p>\n<pre><code>orderly-web admin ./config/basic add-groups funders admin\norderly-web admin ./config/basic grant funders */reports.read\norderly-web admin ./config/basic grant admin */reports.read */reports.review */reports.run\norderly-web admin ./config/basic add-members funders test.user@example.com\norderly-web admin ./config/basic add-members admin admin.user@example.com\n</code></pre>\n<h2>Testing</h2>\n<p>Run</p>\n<pre><code>python3 setup.py test\n</code></pre>\n<p>This will take a while.  There will be lots of warnings like:</p>\n<pre><code>ResourceWarning: unclosed &lt;socket.socket fd=8,\n</code></pre>\n<p>which are out of our control (see the helper <code>docker_client</code> in <code>docker_helpers.py</code> for details).</p>\n<h2>Configuration</h2>\n<p>Configuration is a work in progress and will change as the tool progresses.  See [<code>config/complete/orderly-web.yml</code>] for an annotated configuration that covers all the options.</p>\n<h3>Modified versions of configurations</h3>\n<p>It is possible to create sub-configurations that adapt a configuration.  To do this, create a base configuration with shared options and save that as <code>orderly-web.yml</code>.  Then, within the same directory, create secondary yml files (named however you want) that override options.  For example if you have an <code>orderly-web.yml</code> that contains</p>\n<pre><span class=\"nt\">web</span><span class=\"p\">:</span>\n  <span class=\"nt\">port</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">443</span>\n  <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">OrderlyWeb</span>\n  <span class=\"nt\">dev_mode</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">false</span>\n</pre>\n<p>(among other options), you could create a yaml file called <code>testing.yml</code> (in the same directory) that contains</p>\n<pre><span class=\"nt\">web</span><span class=\"p\">:</span>\n  <span class=\"nt\">port</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">8000</span>\n  <span class=\"nt\">dev_mode</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">true</span>\n</pre>\n<p>When run with</p>\n<pre><code>orderly-web path --extra testing.yml\n</code></pre>\n<p>the options in <code>testing.yml</code> will override the base configuration.  The options that are not mentioned in the <code>testing.yml</code> are left unmodified (i.e, in this case we end up with</p>\n<pre><span class=\"nt\">web</span><span class=\"p\">:</span>\n  <span class=\"nt\">port</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">8000</span>\n  <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">OrderlyWeb</span>\n  <span class=\"nt\">dev_mode</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">true</span>\n</pre>\n<p>It is also possible to change options by passing individual changes through with the <code>--option</code> flag, for example:</p>\n<pre><code>orderly-web path --option web.port=8000 --option web.dev_mode=true\n</code></pre>\n<p>Use <code>.</code> to indicate a level of nesting and do not use spaces around the <code>=</code>; the right-hand-side is parsed as if it was yaml.</p>\n\n          </div>"}, "last_serial": 6576492, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "3095658ba93171c8a2bf9b1598d7a9f0", "sha256": "fc5c42c23b19f546615141f24beeabf956a4b6965630d3938c6e6f3969ed5740"}, "downloads": -1, "filename": "orderly_web-0.0.1.tar.gz", "has_sig": false, "md5_digest": "3095658ba93171c8a2bf9b1598d7a9f0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24513, "upload_time": "2019-08-02T15:32:23", "upload_time_iso_8601": "2019-08-02T15:32:23.865301Z", "url": "https://files.pythonhosted.org/packages/30/a5/9dcff669931d27617dd736fa7a97dc90c1ad13f5df7cf1a5128ca323bc34/orderly_web-0.0.1.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "6891688cafd6c8bfb9a3b9cca740636f", "sha256": "7dd44d49ad34371e0b74eea778f391d1cf7b138c4d0b7d8dff5d8fc8fd56f62f"}, "downloads": -1, "filename": "orderly_web-0.0.3.tar.gz", "has_sig": false, "md5_digest": "6891688cafd6c8bfb9a3b9cca740636f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24524, "upload_time": "2019-08-02T15:50:28", "upload_time_iso_8601": "2019-08-02T15:50:28.862629Z", "url": "https://files.pythonhosted.org/packages/60/ec/bed8b1e1cb773f3d7fa91673d580d5b39a95324d92800ab0c16025870c42/orderly_web-0.0.3.tar.gz", "yanked": false}], "0.0.4": [{"comment_text": "", "digests": {"md5": "30e1334db86f8512f3ddb0a84ce8b030", "sha256": "26b9b3ce8dc521113089c395a0d0d231c2ab29ad403e7fdaa7b5f9524c0234bb"}, "downloads": -1, "filename": "orderly_web-0.0.4.tar.gz", "has_sig": false, "md5_digest": "30e1334db86f8512f3ddb0a84ce8b030", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23926, "upload_time": "2019-12-16T13:54:01", "upload_time_iso_8601": "2019-12-16T13:54:01.507790Z", "url": "https://files.pythonhosted.org/packages/d5/02/7166095e8500d625bd9f277e2dc83c820b54232283b7452ecf4cb3bdb1e5/orderly_web-0.0.4.tar.gz", "yanked": false}], "0.0.5": [{"comment_text": "", "digests": {"md5": "1cf809b7352db3d8e42a91da0a10d234", "sha256": "9be1df9b2d66e123e0c4ab213ed05666567b28bd2b604f7e33539cc4df029a65"}, "downloads": -1, "filename": "orderly_web-0.0.5.tar.gz", "has_sig": false, "md5_digest": "1cf809b7352db3d8e42a91da0a10d234", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23908, "upload_time": "2019-12-18T15:11:12", "upload_time_iso_8601": "2019-12-18T15:11:12.241870Z", "url": "https://files.pythonhosted.org/packages/60/6c/55be312b81460d69a02e348a1e713211d66d9c79f9bb8cbd71166526c001/orderly_web-0.0.5.tar.gz", "yanked": false}], "0.0.6": [{"comment_text": "", "digests": {"md5": "b17218d566f10606e36e9993b03d95a2", "sha256": "40e967656202b7cd954911aac340d284521edb762ca6de0f5e7ce7aabdd04224"}, "downloads": -1, "filename": "orderly_web-0.0.6.tar.gz", "has_sig": false, "md5_digest": "b17218d566f10606e36e9993b03d95a2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23049, "upload_time": "2020-02-05T15:24:53", "upload_time_iso_8601": "2020-02-05T15:24:53.946811Z", "url": "https://files.pythonhosted.org/packages/3f/61/849f9fa841fb15798b2835efd1b04f7f8eb2e844f51d7df87cbf2f138532/orderly_web-0.0.6.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "b17218d566f10606e36e9993b03d95a2", "sha256": "40e967656202b7cd954911aac340d284521edb762ca6de0f5e7ce7aabdd04224"}, "downloads": -1, "filename": "orderly_web-0.0.6.tar.gz", "has_sig": false, "md5_digest": "b17218d566f10606e36e9993b03d95a2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23049, "upload_time": "2020-02-05T15:24:53", "upload_time_iso_8601": "2020-02-05T15:24:53.946811Z", "url": "https://files.pythonhosted.org/packages/3f/61/849f9fa841fb15798b2835efd1b04f7f8eb2e844f51d7df87cbf2f138532/orderly_web-0.0.6.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:01:41 2020"}