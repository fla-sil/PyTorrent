{"info": {"author": "Dan Trickey", "author_email": "dan@trickey.io", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Software Development :: Libraries :: Python Modules", "Typing :: Typed"], "description": "# pepper2\n\n[![CircleCI](https://circleci.com/gh/trickeydan/pepper2.svg?style=svg)](https://circleci.com/gh/trickeydan/pepper2)\n[![Test Coverage](https://api.codeclimate.com/v1/badges/c99dfbefd260764d8875/test_coverage)](https://codeclimate.com/github/trickeydan/pepper2/test_coverage)\n[![Maintainability](https://api.codeclimate.com/v1/badges/c99dfbefd260764d8875/maintainability)](https://codeclimate.com/github/trickeydan/pepper2/maintainability)\n[![MIT license](https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat)](https://opensource.org/licenses/MIT)\n![Bees](https://img.shields.io/badge/bees-110%25-yellow.svg)\n\nRobot Management Daemon\n\n## Dependencies\n\nSome of the dependencies for pepper2 are not available on PyPI.\n\n- D-Bus\n  - Tested on 1.12.16+\n- [GLib](https://developer.gnome.org/glib/) 2.46+\n- [girepository](https://wiki.gnome.org/Projects/GObjectIntrospection) 1.46+\n- Python 3.6+\n- UDisks2\n  - Tested on 2.8.1+\n- udiskie or similar automounting daemon that uses udisks2.\n  - Tested on 1.7.7\n\nThese packages can usually be found on systems with a desktop interface anyway.\n\n[Instructions for setting up a Debian 10 system](docs/DEBIAN.md) are included in this repo.\n\n## Running\n\nThere are two programs in this repo, with shared code between them.\n\n- `pepperctl`\n    - CLI tool that talks to pepperd over D-Bus.\n- `pepperd`\n    - Daemon that sits on the System Bus\n    - Listens for mount and cleanup events from UDisks\n    - Registers the USBs.\n    - Triggers run and stop events for USBs, based on a set of conditions.\n    \nIn order to run `pepperd`, we need to tell D-Bus that we have permission to create a service on the System Bus.\nThis can be done by placing a config file in `/etc/dbus-1/uk.org.j5.pepper2.conf`.\nAn example config file is included in this repository: [uk.org.j5.pepper2.conf](uk.org.j5.pepper2.conf).\n\n## Usage\n\n`pepperd` should be run in the background as a daemon using systemd.\n\nUSB drives should be automounted, and pepper2 will detect the new drive via Udisks.\n\nUsercode `main.py` on the drive will begin execution, `stdout` and `stderr` will be logged to `log.txt`.\n\n- View daemon status: `pepperctl status`\n- View usercode status: `pepperctl usercode status`\n- Kill usercode: `pepperctl usercode kill`\n- Start usercode on already inserted drive: `pepperctl usercode start`\n- View live log of usercode: `journalctl -ft pepper2-usercode`\n\n## Future Development\n\n![pepper2 Entity Diagram](docs/pepper2.svg)\n\nThe above diagram shows how a typical system using `pepper2` would work.\n\n### Core Components\n\nCore Components are essential to use `pepper2`. They are all included in this repo.\n\n- `pepper2`\n    - Python library to interact with `pepper2-daemon`\n    - Abstracts D-Bus from the user.\n- `pepper2-daemon`\n    - Daemon that listens for events from UDisks2.\n    - Performs actions based on conditions defined in a config.\n        - Manages a usercode process\n    - Provides \"metadata\" that can be accessed.\n        - e.g `USERCODE_DIR`, `ARENA`, `START_TRIGGER_STATE`\n- `pepper2-cli`\n    - Simple wrapper around `pepper2`\n    - Allows control of daemon from CLI for debugging and bash scripts.\n\n## Additional Components\n\n- `pepper2-usercode`\n    - Common components that may be useful for usercode processes to interact with `pepper2`\n    - For example, wait for start.\n- `pepper2-leds`\n    - Listens to signal events from `pepper2-daemon` and manipulates GPIO pins according to a config.\n- `pepper2-servohack`\n    - Listens to signal events from `pepper2-daemon` and resets the USB bus. Workaround for [bug in SR SBv4](https://github.com/srobo/servo-v4-fw/issues/7)\n\n## Development Resources\n\nThis program makes heavy use of D-Bus, which is not the simplest thing in the world to understand.\n\n- [DBus Overview](https://pythonhosted.org/txdbus/dbus_overview.html)\n- [D-Feet](https://github.com/GNOME/d-feet)\n\n## Contributions\n\nThis project is released under the MIT Licence. For more information, please see LICENSE.\n\nThe CONTRIBUTORS file can be generated by executing CONTRIBUTORS.gen. This generated file contains a list of people who have contributed to Pepper2.\n\n## Etymology\n\nNo, it's not version 2.\n\nSpelling is `pepper2`, much like `j5`. No capitals necessary.\n\n![Wouldn't you like to be a pepper too?](https://i.imgur.com/B2BBwz1.gif)\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "pepper2", "package_url": "https://pypi.org/project/pepper2/", "platform": "", "project_url": "https://pypi.org/project/pepper2/", "project_urls": {"Documentation": "https://readthedocs.io", "Homepage": "https://github.com/", "Repository": "https://github.com/"}, "release_url": "https://pypi.org/project/pepper2/0.1.0a2/", "requires_dist": ["click (>=7.0,<8.0)", "systemd-python (>=234.0,<235.0)", "pydbus (>=0.6.0,<0.7.0)", "pygobject (>=3.32,<4.0)"], "requires_python": ">=3.6,<4.0", "summary": "Robot Management Daemon", "version": "0.1.0a2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>pepper2</h1>\n<p><a href=\"https://circleci.com/gh/trickeydan/pepper2\" rel=\"nofollow\"><img alt=\"CircleCI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/02003af9d81f690450bd72653d84ef56479eed83/68747470733a2f2f636972636c6563692e636f6d2f67682f747269636b657964616e2f706570706572322e7376673f7374796c653d737667\"></a>\n<a href=\"https://codeclimate.com/github/trickeydan/pepper2/test_coverage\" rel=\"nofollow\"><img alt=\"Test Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f400d540b1e9a3b724b912a46c02fb515fa7cfaa/68747470733a2f2f6170692e636f6465636c696d6174652e636f6d2f76312f6261646765732f63393964666265666432363037363464383837352f746573745f636f766572616765\"></a>\n<a href=\"https://codeclimate.com/github/trickeydan/pepper2/maintainability\" rel=\"nofollow\"><img alt=\"Maintainability\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5ca0935449e31150ca3b7cc7a37a1727440550b1/68747470733a2f2f6170692e636f6465636c696d6174652e636f6d2f76312f6261646765732f63393964666265666432363037363464383837352f6d61696e7461696e6162696c697479\"></a>\n<a href=\"https://opensource.org/licenses/MIT\" rel=\"nofollow\"><img alt=\"MIT license\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/26595147bc342e703bae2b2d2d9b2fc5e1c35f95/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d627269676874677265656e2e7376673f7374796c653d666c6174\"></a>\n<img alt=\"Bees\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e6fef46254a7416464ad828692c753d0f5a3a974/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f626565732d3131302532352d79656c6c6f772e737667\"></p>\n<p>Robot Management Daemon</p>\n<h2>Dependencies</h2>\n<p>Some of the dependencies for pepper2 are not available on PyPI.</p>\n<ul>\n<li>D-Bus\n<ul>\n<li>Tested on 1.12.16+</li>\n</ul>\n</li>\n<li><a href=\"https://developer.gnome.org/glib/\" rel=\"nofollow\">GLib</a> 2.46+</li>\n<li><a href=\"https://wiki.gnome.org/Projects/GObjectIntrospection\" rel=\"nofollow\">girepository</a> 1.46+</li>\n<li>Python 3.6+</li>\n<li>UDisks2\n<ul>\n<li>Tested on 2.8.1+</li>\n</ul>\n</li>\n<li>udiskie or similar automounting daemon that uses udisks2.\n<ul>\n<li>Tested on 1.7.7</li>\n</ul>\n</li>\n</ul>\n<p>These packages can usually be found on systems with a desktop interface anyway.</p>\n<p><a href=\"docs/DEBIAN.md\" rel=\"nofollow\">Instructions for setting up a Debian 10 system</a> are included in this repo.</p>\n<h2>Running</h2>\n<p>There are two programs in this repo, with shared code between them.</p>\n<ul>\n<li><code>pepperctl</code>\n<ul>\n<li>CLI tool that talks to pepperd over D-Bus.</li>\n</ul>\n</li>\n<li><code>pepperd</code>\n<ul>\n<li>Daemon that sits on the System Bus</li>\n<li>Listens for mount and cleanup events from UDisks</li>\n<li>Registers the USBs.</li>\n<li>Triggers run and stop events for USBs, based on a set of conditions.</li>\n</ul>\n</li>\n</ul>\n<p>In order to run <code>pepperd</code>, we need to tell D-Bus that we have permission to create a service on the System Bus.\nThis can be done by placing a config file in <code>/etc/dbus-1/uk.org.j5.pepper2.conf</code>.\nAn example config file is included in this repository: <a href=\"uk.org.j5.pepper2.conf\" rel=\"nofollow\">uk.org.j5.pepper2.conf</a>.</p>\n<h2>Usage</h2>\n<p><code>pepperd</code> should be run in the background as a daemon using systemd.</p>\n<p>USB drives should be automounted, and pepper2 will detect the new drive via Udisks.</p>\n<p>Usercode <code>main.py</code> on the drive will begin execution, <code>stdout</code> and <code>stderr</code> will be logged to <code>log.txt</code>.</p>\n<ul>\n<li>View daemon status: <code>pepperctl status</code></li>\n<li>View usercode status: <code>pepperctl usercode status</code></li>\n<li>Kill usercode: <code>pepperctl usercode kill</code></li>\n<li>Start usercode on already inserted drive: <code>pepperctl usercode start</code></li>\n<li>View live log of usercode: <code>journalctl -ft pepper2-usercode</code></li>\n</ul>\n<h2>Future Development</h2>\n<p><img alt=\"pepper2 Entity Diagram\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7b837777a8d49ed8dc52e6c267744cdfb2b6bc28/646f63732f706570706572322e737667\"></p>\n<p>The above diagram shows how a typical system using <code>pepper2</code> would work.</p>\n<h3>Core Components</h3>\n<p>Core Components are essential to use <code>pepper2</code>. They are all included in this repo.</p>\n<ul>\n<li><code>pepper2</code>\n<ul>\n<li>Python library to interact with <code>pepper2-daemon</code></li>\n<li>Abstracts D-Bus from the user.</li>\n</ul>\n</li>\n<li><code>pepper2-daemon</code>\n<ul>\n<li>Daemon that listens for events from UDisks2.</li>\n<li>Performs actions based on conditions defined in a config.\n<ul>\n<li>Manages a usercode process</li>\n</ul>\n</li>\n<li>Provides \"metadata\" that can be accessed.\n<ul>\n<li>e.g <code>USERCODE_DIR</code>, <code>ARENA</code>, <code>START_TRIGGER_STATE</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>pepper2-cli</code>\n<ul>\n<li>Simple wrapper around <code>pepper2</code></li>\n<li>Allows control of daemon from CLI for debugging and bash scripts.</li>\n</ul>\n</li>\n</ul>\n<h2>Additional Components</h2>\n<ul>\n<li><code>pepper2-usercode</code>\n<ul>\n<li>Common components that may be useful for usercode processes to interact with <code>pepper2</code></li>\n<li>For example, wait for start.</li>\n</ul>\n</li>\n<li><code>pepper2-leds</code>\n<ul>\n<li>Listens to signal events from <code>pepper2-daemon</code> and manipulates GPIO pins according to a config.</li>\n</ul>\n</li>\n<li><code>pepper2-servohack</code>\n<ul>\n<li>Listens to signal events from <code>pepper2-daemon</code> and resets the USB bus. Workaround for <a href=\"https://github.com/srobo/servo-v4-fw/issues/7\" rel=\"nofollow\">bug in SR SBv4</a></li>\n</ul>\n</li>\n</ul>\n<h2>Development Resources</h2>\n<p>This program makes heavy use of D-Bus, which is not the simplest thing in the world to understand.</p>\n<ul>\n<li><a href=\"https://pythonhosted.org/txdbus/dbus_overview.html\" rel=\"nofollow\">DBus Overview</a></li>\n<li><a href=\"https://github.com/GNOME/d-feet\" rel=\"nofollow\">D-Feet</a></li>\n</ul>\n<h2>Contributions</h2>\n<p>This project is released under the MIT Licence. For more information, please see LICENSE.</p>\n<p>The CONTRIBUTORS file can be generated by executing CONTRIBUTORS.gen. This generated file contains a list of people who have contributed to Pepper2.</p>\n<h2>Etymology</h2>\n<p>No, it's not version 2.</p>\n<p>Spelling is <code>pepper2</code>, much like <code>j5</code>. No capitals necessary.</p>\n<p><img alt=\"Wouldn't you like to be a pepper too?\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/34eca4a9234bbcd0428234d2b085c7dfa072abfe/68747470733a2f2f692e696d6775722e636f6d2f42324242777a312e676966\"></p>\n\n          </div>"}, "last_serial": 6479195, "releases": {"0.1.0a1": [{"comment_text": "", "digests": {"md5": "0620eddf207bf8520944f4229227e956", "sha256": "94a5f86af48e0e8bf7bb7c0b89c7130690c200b09091241dd15a1e75d0dcd908"}, "downloads": -1, "filename": "pepper2-0.1.0a1-py3-none-any.whl", "has_sig": false, "md5_digest": "0620eddf207bf8520944f4229227e956", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 19833, "upload_time": "2020-01-07T18:24:07", "upload_time_iso_8601": "2020-01-07T18:24:07.112975Z", "url": "https://files.pythonhosted.org/packages/5f/f6/7f38220b434b6b5250c4812d63346a070d5f852514ac535ac068e5343e70/pepper2-0.1.0a1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "227cc287e8b5c0c5318471adcc0b6e71", "sha256": "b7255ac9b4f5554665bc7aa87e12984aee18b02c7a282850dd10d3a16d72fbda"}, "downloads": -1, "filename": "pepper2-0.1.0a1.tar.gz", "has_sig": false, "md5_digest": "227cc287e8b5c0c5318471adcc0b6e71", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 15292, "upload_time": "2020-01-07T18:24:09", "upload_time_iso_8601": "2020-01-07T18:24:09.062185Z", "url": "https://files.pythonhosted.org/packages/67/30/8a50db257e7fba353182fa2a79fb77093c7833d80896bc193c062949e387/pepper2-0.1.0a1.tar.gz", "yanked": false}], "0.1.0a2": [{"comment_text": "", "digests": {"md5": "d175508b288144e061e39024f0b66bda", "sha256": "a2d7b7b585ee00097e1e867f6e1038fb43afeacdbd24d6b8101fe72f9b111fa7"}, "downloads": -1, "filename": "pepper2-0.1.0a2-py3-none-any.whl", "has_sig": false, "md5_digest": "d175508b288144e061e39024f0b66bda", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 25909, "upload_time": "2020-01-18T19:04:28", "upload_time_iso_8601": "2020-01-18T19:04:28.299513Z", "url": "https://files.pythonhosted.org/packages/37/75/acd4058d96710ab033694068c399556c521703c0c20eeb95de4fc1b4422b/pepper2-0.1.0a2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "66f243f8de8d9b4a1486d166aa6fa1a6", "sha256": "94ebe14ccfb578a99b2210aeee7f3ad0645149a2737823cb6cdd853cad4b8bf8"}, "downloads": -1, "filename": "pepper2-0.1.0a2.tar.gz", "has_sig": false, "md5_digest": "66f243f8de8d9b4a1486d166aa6fa1a6", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 18647, "upload_time": "2020-01-18T19:04:30", "upload_time_iso_8601": "2020-01-18T19:04:30.162426Z", "url": "https://files.pythonhosted.org/packages/5f/0c/3570e228b041fc5b69e67053a29a8922d8da033fd648c417c9f23e9ccc26/pepper2-0.1.0a2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d175508b288144e061e39024f0b66bda", "sha256": "a2d7b7b585ee00097e1e867f6e1038fb43afeacdbd24d6b8101fe72f9b111fa7"}, "downloads": -1, "filename": "pepper2-0.1.0a2-py3-none-any.whl", "has_sig": false, "md5_digest": "d175508b288144e061e39024f0b66bda", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 25909, "upload_time": "2020-01-18T19:04:28", "upload_time_iso_8601": "2020-01-18T19:04:28.299513Z", "url": "https://files.pythonhosted.org/packages/37/75/acd4058d96710ab033694068c399556c521703c0c20eeb95de4fc1b4422b/pepper2-0.1.0a2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "66f243f8de8d9b4a1486d166aa6fa1a6", "sha256": "94ebe14ccfb578a99b2210aeee7f3ad0645149a2737823cb6cdd853cad4b8bf8"}, "downloads": -1, "filename": "pepper2-0.1.0a2.tar.gz", "has_sig": false, "md5_digest": "66f243f8de8d9b4a1486d166aa6fa1a6", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 18647, "upload_time": "2020-01-18T19:04:30", "upload_time_iso_8601": "2020-01-18T19:04:30.162426Z", "url": "https://files.pythonhosted.org/packages/5f/0c/3570e228b041fc5b69e67053a29a8922d8da033fd648c417c9f23e9ccc26/pepper2-0.1.0a2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:56:24 2020"}