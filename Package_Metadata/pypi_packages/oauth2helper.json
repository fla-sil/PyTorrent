{"info": {"author": "Colin Bounouar", "author_email": "colin.bounouar.dev@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Software Development :: Build Tools"], "description": "<h2 align=\"center\">Validate and extract information from OAuth2 token</h2>\n\n<p align=\"center\">\n<a href=\"https://pypi.org/project/oauth2helper/\"><img alt=\"pypi version\" src=\"https://img.shields.io/pypi/v/oauth2helper\"></a>\n<a href=\"https://travis-ci.com/Colin-b/oauth2helper\"><img alt=\"Build status\" src=\"https://api.travis-ci.com/Colin-b/oauth2helper.svg?branch=develop\"></a>\n<a href=\"https://travis-ci.com/Colin-b/oauth2helper\"><img alt=\"Coverage\" src=\"https://img.shields.io/badge/coverage-100%25-brightgreen\"></a>\n<a href=\"https://github.com/psf/black\"><img alt=\"Code style: black\" src=\"https://img.shields.io/badge/code%20style-black-000000.svg\"></a>\n<a href=\"https://travis-ci.com/Colin-b/oauth2helper\"><img alt=\"Number of tests\" src=\"https://img.shields.io/badge/tests-21 passed-blue\"></a>\n<a href=\"https://pypi.org/project/oauth2helper/\"><img alt=\"Number of downloads\" src=\"https://img.shields.io/pypi/dm/oauth2helper\"></a>\n</p>\n\n * [Validate OAuth2 token](#validating-an-oauth2-token)\n * [Extract token information](#extracting-user-from-a-oauth2-token)\n * [Starlette](#starlette)\n\n## Validating an OAuth2 token\n\n```python\nimport oauth2helper\n\nheaders = {\"Authorization\": \"Bearer YOUR_OAUTH2_TOKEN\"}\nmy_token = headers.get('Authorization')[7:]\n\n# Will raise InvalidTokenError or InvalidKeyError in case validation failed\noauth2helper.validate(my_token, \"https://provider_url/common/discovery/keys\")\n```\n\n## Extracting user from a OAuth2 token\n\n```python\nimport oauth2helper\n\nheaders = {\"Authorization\": \"Bearer YOUR_OAUTH2_TOKEN\"}\nmy_token = headers.get('Authorization')[7:]\n\njson_header, json_body = oauth2helper.validate(my_token, \"https://provider_url/common/discovery/keys\")\nusername = oauth2helper.user_name(json_body)\n```\n\n## Starlette\n\nA [Starlette](https://www.starlette.io) [`AuthenticationMiddleware`](https://www.starlette.io/authentication/) backend is available.\n\n```python\nfrom starlette.applications import Starlette\nfrom starlette.authentication import requires\nfrom starlette.middleware import Middleware\nfrom starlette.middleware.authentication import AuthenticationMiddleware\nfrom oauth2helper.starlette import OAuth2IdTokenBackend, unauthorized\n\n\nbackend = OAuth2IdTokenBackend(\n    identity_provider_url=\"https://identity_provider_url\",\n    # You can extract scopes per user and validate them on @requires decorator\n    scopes_retrieval=lambda json_body: [\"authenticated\"],\n)\napp = Starlette(middleware=[Middleware(AuthenticationMiddleware, backend=backend, on_error=unauthorized)])\n\n@app.route(\"/authenticated_endpoint\")\n@requires(scopes=[\"authenticated\"])\ndef endpoint(request):\n    pass  # Implement your own logic\n```\n\n## How to install\n1. [python 3.6+](https://www.python.org/downloads/) must be installed\n2. Use pip to install module:\n```sh\npython -m pip install oauth2helper\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "https://pypi.org/project/oauth2helper/", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://colin-b.github.io/oauth2helper/", "keywords": "security,oauth2,jwt", "license": "MIT", "maintainer": "Colin Bounouar", "maintainer_email": "colin.bounouar.dev@gmail.com", "name": "oauth2helper", "package_url": "https://pypi.org/project/oauth2helper/", "platform": "Windows", "project_url": "https://pypi.org/project/oauth2helper/", "project_urls": {"Changelog": "https://github.com/Colin-b/oauth2helper/blob/master/CHANGELOG.md", "Download": "https://pypi.org/project/oauth2helper/", "GitHub": "https://github.com/Colin-b/oauth2helper", "Homepage": "https://colin-b.github.io/oauth2helper/", "Issues": "https://github.com/Colin-b/oauth2helper/issues"}, "release_url": "https://pypi.org/project/oauth2helper/3.4.0/", "requires_dist": ["requests (==2.*)", "pyjwt (==1.*)", "cryptography (==2.*)", "pytest-responses (==0.4.*) ; extra == 'testing'", "pytest-cov (==2.*) ; extra == 'testing'", "starlette (==0.13.*) ; extra == 'testing'", "requests (==2.*) ; extra == 'testing'"], "requires_python": ">=3.6", "summary": "Validate and extract information from OAuth2 token.", "version": "3.4.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h2>Validate and extract information from OAuth2 token</h2>\n<p align=\"center\">\n<a href=\"https://pypi.org/project/oauth2helper/\" rel=\"nofollow\"><img alt=\"pypi version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/464bd5ee01540a24aa293af41e14edb679437aff/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6f617574683268656c706572\"></a>\n<a href=\"https://travis-ci.com/Colin-b/oauth2helper\" rel=\"nofollow\"><img alt=\"Build status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8b7d3cfa70f6412ebd2dec3a11abeaafc6526b39/68747470733a2f2f6170692e7472617669732d63692e636f6d2f436f6c696e2d622f6f617574683268656c7065722e7376673f6272616e63683d646576656c6f70\"></a>\n<a href=\"https://travis-ci.com/Colin-b/oauth2helper\" rel=\"nofollow\"><img alt=\"Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0280f255d36847e3743058a68bedfb93626e993f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f7665726167652d3130302532352d627269676874677265656e\"></a>\n<a href=\"https://github.com/psf/black\" rel=\"nofollow\"><img alt=\"Code style: black\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fbfdc7754183ecf079bc71ddeabaf88f6cbc5c00/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667\"></a>\n<a href=\"https://travis-ci.com/Colin-b/oauth2helper\" rel=\"nofollow\"><img alt=\"Number of tests\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/66a3c279fe7fb7204f4852ccb89530ca36fdb877/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f74657374732d3231207061737365642d626c7565\"></a>\n<a href=\"https://pypi.org/project/oauth2helper/\" rel=\"nofollow\"><img alt=\"Number of downloads\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3837aaf2b0af990e2cae8bf939c1af3381e583e6/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f6f617574683268656c706572\"></a>\n</p>\n<ul>\n<li><a href=\"#validating-an-oauth2-token\" rel=\"nofollow\">Validate OAuth2 token</a></li>\n<li><a href=\"#extracting-user-from-a-oauth2-token\" rel=\"nofollow\">Extract token information</a></li>\n<li><a href=\"#starlette\" rel=\"nofollow\">Starlette</a></li>\n</ul>\n<h2>Validating an OAuth2 token</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">oauth2helper</span>\n\n<span class=\"n\">headers</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"Authorization\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Bearer YOUR_OAUTH2_TOKEN\"</span><span class=\"p\">}</span>\n<span class=\"n\">my_token</span> <span class=\"o\">=</span> <span class=\"n\">headers</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'Authorization'</span><span class=\"p\">)[</span><span class=\"mi\">7</span><span class=\"p\">:]</span>\n\n<span class=\"c1\"># Will raise InvalidTokenError or InvalidKeyError in case validation failed</span>\n<span class=\"n\">oauth2helper</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">my_token</span><span class=\"p\">,</span> <span class=\"s2\">\"https://provider_url/common/discovery/keys\"</span><span class=\"p\">)</span>\n</pre>\n<h2>Extracting user from a OAuth2 token</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">oauth2helper</span>\n\n<span class=\"n\">headers</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"Authorization\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Bearer YOUR_OAUTH2_TOKEN\"</span><span class=\"p\">}</span>\n<span class=\"n\">my_token</span> <span class=\"o\">=</span> <span class=\"n\">headers</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'Authorization'</span><span class=\"p\">)[</span><span class=\"mi\">7</span><span class=\"p\">:]</span>\n\n<span class=\"n\">json_header</span><span class=\"p\">,</span> <span class=\"n\">json_body</span> <span class=\"o\">=</span> <span class=\"n\">oauth2helper</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">my_token</span><span class=\"p\">,</span> <span class=\"s2\">\"https://provider_url/common/discovery/keys\"</span><span class=\"p\">)</span>\n<span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"n\">oauth2helper</span><span class=\"o\">.</span><span class=\"n\">user_name</span><span class=\"p\">(</span><span class=\"n\">json_body</span><span class=\"p\">)</span>\n</pre>\n<h2>Starlette</h2>\n<p>A <a href=\"https://www.starlette.io\" rel=\"nofollow\">Starlette</a> <a href=\"https://www.starlette.io/authentication/\" rel=\"nofollow\"><code>AuthenticationMiddleware</code></a> backend is available.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">starlette.applications</span> <span class=\"kn\">import</span> <span class=\"n\">Starlette</span>\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.authentication</span> <span class=\"kn\">import</span> <span class=\"n\">requires</span>\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.middleware</span> <span class=\"kn\">import</span> <span class=\"n\">Middleware</span>\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.middleware.authentication</span> <span class=\"kn\">import</span> <span class=\"n\">AuthenticationMiddleware</span>\n<span class=\"kn\">from</span> <span class=\"nn\">oauth2helper.starlette</span> <span class=\"kn\">import</span> <span class=\"n\">OAuth2IdTokenBackend</span><span class=\"p\">,</span> <span class=\"n\">unauthorized</span>\n\n\n<span class=\"n\">backend</span> <span class=\"o\">=</span> <span class=\"n\">OAuth2IdTokenBackend</span><span class=\"p\">(</span>\n    <span class=\"n\">identity_provider_url</span><span class=\"o\">=</span><span class=\"s2\">\"https://identity_provider_url\"</span><span class=\"p\">,</span>\n    <span class=\"c1\"># You can extract scopes per user and validate them on @requires decorator</span>\n    <span class=\"n\">scopes_retrieval</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">json_body</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"authenticated\"</span><span class=\"p\">],</span>\n<span class=\"p\">)</span>\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Starlette</span><span class=\"p\">(</span><span class=\"n\">middleware</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">Middleware</span><span class=\"p\">(</span><span class=\"n\">AuthenticationMiddleware</span><span class=\"p\">,</span> <span class=\"n\">backend</span><span class=\"o\">=</span><span class=\"n\">backend</span><span class=\"p\">,</span> <span class=\"n\">on_error</span><span class=\"o\">=</span><span class=\"n\">unauthorized</span><span class=\"p\">)])</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/authenticated_endpoint\"</span><span class=\"p\">)</span>\n<span class=\"nd\">@requires</span><span class=\"p\">(</span><span class=\"n\">scopes</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">\"authenticated\"</span><span class=\"p\">])</span>\n<span class=\"k\">def</span> <span class=\"nf\">endpoint</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>  <span class=\"c1\"># Implement your own logic</span>\n</pre>\n<h2>How to install</h2>\n<ol>\n<li><a href=\"https://www.python.org/downloads/\" rel=\"nofollow\">python 3.6+</a> must be installed</li>\n<li>Use pip to install module:</li>\n</ol>\n<pre>python -m pip install oauth2helper\n</pre>\n\n          </div>"}, "last_serial": 6669306, "releases": {"3.3.0": [{"comment_text": "", "digests": {"md5": "59876ef107d213e101c6d7a7d67173bb", "sha256": "fd9f975ecc5c7b85b1cefc524f71165fb67d6854d8d3661a799347bb58be0544"}, "downloads": -1, "filename": "oauth2helper-3.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "59876ef107d213e101c6d7a7d67173bb", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 5618, "upload_time": "2019-12-02T23:04:04", "upload_time_iso_8601": "2019-12-02T23:04:04.266073Z", "url": "https://files.pythonhosted.org/packages/4c/05/6e6c01ef125908c50ff0f3e6ee680457bb025fa40a9cc9cfd846a30eb817/oauth2helper-3.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2aa652cf3d0b3002f633e7bc9b92c4b7", "sha256": "aac22864c903b87f9d63384418890a3884849474c670d25fe98f663b11cb93c9"}, "downloads": -1, "filename": "oauth2helper-3.3.0.tar.gz", "has_sig": false, "md5_digest": "2aa652cf3d0b3002f633e7bc9b92c4b7", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 4188, "upload_time": "2019-12-02T23:04:06", "upload_time_iso_8601": "2019-12-02T23:04:06.188040Z", "url": "https://files.pythonhosted.org/packages/df/23/4c16a71d45168809eac357a058e9038f879a571d53146e107d83b4781b3d/oauth2helper-3.3.0.tar.gz", "yanked": false}], "3.4.0": [{"comment_text": "", "digests": {"md5": "8f74bce3b377635a8b4949bfe45b0039", "sha256": "d2377d787048ef9cda96d8c8d21f6d811e1a125d38ad34e043250bb742a16991"}, "downloads": -1, "filename": "oauth2helper-3.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8f74bce3b377635a8b4949bfe45b0039", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 7091, "upload_time": "2020-02-20T17:00:31", "upload_time_iso_8601": "2020-02-20T17:00:31.388944Z", "url": "https://files.pythonhosted.org/packages/13/0f/0e7de0f8ba1df844cec353693f5389c7a536007b0bf3d2ff76be9a1bb2ff/oauth2helper-3.4.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d3f414778a177e047a94b591b3baf6d7", "sha256": "f5141fbe61a91abe0b5269bd9c0596be1a8a0983051fe91bb909f34540c6df63"}, "downloads": -1, "filename": "oauth2helper-3.4.0.tar.gz", "has_sig": false, "md5_digest": "d3f414778a177e047a94b591b3baf6d7", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5351, "upload_time": "2020-02-20T17:00:32", "upload_time_iso_8601": "2020-02-20T17:00:32.581572Z", "url": "https://files.pythonhosted.org/packages/5e/26/fae8395ec1e2e6a2f11b3fcb62b1c256dab7e4105cc39b9f5c89b5b375ec/oauth2helper-3.4.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "8f74bce3b377635a8b4949bfe45b0039", "sha256": "d2377d787048ef9cda96d8c8d21f6d811e1a125d38ad34e043250bb742a16991"}, "downloads": -1, "filename": "oauth2helper-3.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8f74bce3b377635a8b4949bfe45b0039", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 7091, "upload_time": "2020-02-20T17:00:31", "upload_time_iso_8601": "2020-02-20T17:00:31.388944Z", "url": "https://files.pythonhosted.org/packages/13/0f/0e7de0f8ba1df844cec353693f5389c7a536007b0bf3d2ff76be9a1bb2ff/oauth2helper-3.4.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d3f414778a177e047a94b591b3baf6d7", "sha256": "f5141fbe61a91abe0b5269bd9c0596be1a8a0983051fe91bb909f34540c6df63"}, "downloads": -1, "filename": "oauth2helper-3.4.0.tar.gz", "has_sig": false, "md5_digest": "d3f414778a177e047a94b591b3baf6d7", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5351, "upload_time": "2020-02-20T17:00:32", "upload_time_iso_8601": "2020-02-20T17:00:32.581572Z", "url": "https://files.pythonhosted.org/packages/5e/26/fae8395ec1e2e6a2f11b3fcb62b1c256dab7e4105cc39b9f5c89b5b375ec/oauth2helper-3.4.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:43:53 2020"}