{"info": {"author": "Mikhail Korobov", "author_email": "kmike84@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Natural Language :: English", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "====\nandi\n====\n\n.. image:: https://img.shields.io/pypi/v/andi.svg\n   :target: https://pypi.python.org/pypi/andi\n   :alt: PyPI Version\n\n.. image:: https://img.shields.io/pypi/pyversions/andi.svg\n   :target: https://pypi.python.org/pypi/andi\n   :alt: Supported Python Versions\n\n.. image:: https://travis-ci.com/scrapinghub/andi.svg?branch=master\n   :target: https://travis-ci.com/scrapinghub/andi\n   :alt: Build Status\n\n.. image:: https://codecov.io/github/scrapinghub/andi/coverage.svg?branch=master\n   :target: https://codecov.io/gh/scrapinghub/andi\n   :alt: Coverage report\n\n.. warning::\n    Current status is \"experimental\".\n\n``andi`` makes easy implementing custom dependency injection mechanisms\nwhere dependencies are expressed using type annotations.\n\n``andi`` is useful as a building block for frameworks, or as a library\nwhich helps to implement dependency injection (thus the name -\nANnotation-based Dependency Injection).\n\nLicense is BSD 3-clause.\n\nInstallation\n============\n\n::\n\n    pip install andi\n\nandi requires Python >= 3.5.3.\n\nGoal\n====\n\nSee the following classes that represents parts of a car\n(and the car itself):\n\n.. code-block:: python\n\n    class Valves:\n        pass\n\n    class Engine:\n        def __init__(self, valves):\n            self.valves = valves\n\n    class Wheels:\n        pass\n\n    class Car:\n        def __init__(self, engine, wheels):\n            self.engine = engine\n            self.wheels = wheels\n\nThe following would be the usual way of build a ``Car`` instance:\n\n.. code-block:: python\n\n    valves = Valves()\n    engine = Engine(valves)\n    wheels = Wheels()\n    car = Car(engine, wheels)\n\nThere are some dependencies between the classes: A car requires\nand engine and wheels to be built, as well as the engine requires\nvalves. These are the car dependencies and sub-dependencies.\n\nThe question is, could we have an automatic way of building instances?\nFor example, could we have a ``build`` function that\ngiven the ``Car`` class or any other class would return an instance\neven if the class itself has some other dependencies?\n\n.. code-block:: python\n\n    car = build(Car)  # Andi helps creating this generic build function\n\n``andi`` inspect the dependency tree and creates a plan making easy creating\nsuch a ``build`` function.\n\nThis is how this plan for the ``Car`` class would looks like:\n\n1. Invoke ``Valves`` with empty arguments\n2. Invoke ``Engine`` using the instance created in 1 as the argument ``valves``\n3. Invoke ``Wheels`` with empty arguments\n4. Invoke ``Cars`` with the instance created in 2 as the ``engine`` argument and with\n   the instance created in 3 as the ``wheels`` argument\n\nType annotations\n----------------\n\nBut there is a missing piece in the Car example before. How can\n``andi`` know that the class ``Valves`` is required to build the\nargument ``valves``? A first idea would be to use the argument\nname as a hint for the class name\n(as `pinject <https://pypi.org/project/pinject/>`_ does),\nbut ``andi`` opts to rely on arguments' type annotations instead.\n\nThe classes for ``Car`` should then be rewritten as:\n\n.. code-block:: python\n\n    class Valves:\n        pass\n\n    class Engine:\n        def __init__(self, valves: Valves):\n            self.valves = valves\n\n    class Wheels:\n        pass\n\n    class Car:\n        def __init__(self, engine: Engine, wheels: Wheels):\n            self.engine = engine\n            self.wheels = wheels\n\nNote how now there is a explicit annotation stating that the\n``valves`` argument is of type ``Valves``\n(same for ``engine`` and ``wheels``).\n\nThe ``andi.plan`` function can now create a plan to build the\n``Car`` class (ignore the ``is_injectable`` parameter by now):\n\n.. code-block:: python\n\n    plan = andi.plan(Car, is_injectable={Engine, Wheels, Valves})\n\n\nThis is what the ``plan`` variable contains:\n\n.. code-block:: python\n\n    [(Valves, {}),\n     (Engine, {'valves': Valves}),\n     (Wheels, {}),\n     (Car,    {'engine': Engine,\n               'wheels': Wheels})]\n\nNote how this plan correspond exactly to the 4-steps plan described\nin the previous section.\n\nBuilding from the plan\n----------------------\n\nCreating a generic function to build the instances from\na plan generated by ``andi`` is then very easy:\n\n.. code-block:: python\n\n    def build(plan):\n        instances = {}\n        for fn_or_cls, kwargs_spec in plan:\n            instances[fn_or_cls] = fn_or_cls(**kwargs_spec.kwargs(instances))\n        return instances\n\nSo let's see putting all the pieces together. The following code\ncreates an instance of ``Car`` using ``andi``:\n\n.. code-block:: python\n\n    plan = andi.plan(Car, is_injectable={Engine, Wheels, Valves})\n    instances = build(plan)\n    car = instances[Car]\n\nis_injectable\n-------------\n\nIt is not always desired for ``andi`` to manage every single annotation found.\nInstead is usually better to explicitly declare which types\ncan be handled by ``andi``. The argument ``is_injectable``\nallows to customize this feature.\n\n``andi`` will raise an error on the presence of a dependency that cannot be resolved\nbecause it is not injectable.\n\nUsually is desirable to declare injectabilty by\ncreating a base class to inherit from. For example,\nwe could create a base class ``Injectable`` as base\nclass for the car components:\n\n.. code-block:: python\n\n    class Injectable(ABC):\n        pass\n\n    class Valves(Injectable):\n        pass\n\n    class Engine(Injectable):\n        def __init__(self, valves: Valves):\n            self.valves = valves\n\n    class Wheels(Injectable):\n        pass\n\nThe call to ``andi.plan`` would then be:\n\n.. code-block:: python\n\n    is_injectable = lambda cls: issubclass(cls, Injectable)\n    plan = andi.plan(Car, is_injectable=is_injectable)\n\nFunctions and methods\n---------------------\n\nDependency injection is also very useful when applied to functions.\nImagine that you have a function ``drive`` that drives the ``Car``\nthrough the ``Road``:\n\n.. code-block:: python\n\n    class Road(Injectable):\n        ...\n\n    def drive(car: Car, road: Road, speed):\n        ... # Drive the car through the road\n\nThe dependencies has to be resolved before invoking\nthe ``drive`` function:\n\n.. code-block:: python\n\n    plan = andi.plan(drive, is_injectable=is_injectable)\n    instances = build(plan.dependencies)\n\nNow the ``drive`` function can be invoked:\n\n.. code-block:: python\n\n    drive(instances[Car], instances[Road], 100)\n\nNote that ``speed`` argument was not annotated. The resultant plan just won't include it\nbecause the ``andi.plan`` ``full_final_kwargs`` parameter is ``False``\nby default. Otherwise, an exception would have been raised (see ``full_final_kwargs`` argument\ndocumentation for more information).\n\nAn alternative and more generic way to invoke the drive function\nwould be:\n\n.. code-block:: python\n\n    drive(speed=100, **plan.final_kwargs(instances))\n\ndataclasses and attrs\n---------------------\n\n``andi`` supports classes defined using `attrs <https://www.attrs.org/>`_\nand also `dataclasses <https://docs.python.org/3/library/dataclasses.html>`_.\nFor example the ``Car`` class could have been defined as:\n\n.. code-block:: python\n\n    # attrs class example\n    @attr.s(auto_attribs=True)\n    class Car:\n        engine: Engine\n        wheels: Wheels\n\n    # dataclass example\n    @dataclass\n    class Car(Injectable):\n        engine: Engine\n        wheels: Wheels\n\nUsing ``attrs`` or ``dataclass`` is handy because they avoid\nsome boilerplate.\n\nExternally provided dependencies\n--------------------------------\n\nRetaining the control over object instantiation\ncould be desired in some cases. For example creating\na database connection could require accessing some\ncredentials registry or getting the connection from a pool\nso you might want to control building\nsuch instances outside of the regular\ndependency injection mechanism.\n\n``andi.plan`` allows to specify which types would be\nexternally provided. Let's see an example:\n\n.. code-block:: python\n\n    class DBConnection(ABC):\n\n        @abstractmethod\n        def getConn():\n            pass\n\n    @dataclass\n    class UsersDAO:\n        conn: DBConnection\n\n        def getUsers():\n           return self.conn.query(\"SELECT * FROM USERS\")\n\n``UsersDAO`` requires a database connection to run queries.\nBut the connection will be provided externally from a pool, so we\ncall then ``andi.plan`` using also the ``externally_provided``\nparameter:\n\n.. code-block:: python\n\n    plan = andi.plan(UsersDAO, is_injectable=is_injectable,\n                     externally_provided={DBConnection})\n\nThe build method should then be modified slightly to be able\nto inject externally provided instances:\n\n.. code-block:: python\n\n    def build(plan, instances_stock=None):\n        instances_stock = instances_stock or {}\n        instances = {}\n        for fn_or_cls, kwargs_spec in plan:\n            if fn_or_cls in instances_stock:\n                instances[fn_or_cls] = instances_stock[fn_or_cls]\n            else:\n                instances[fn_or_cls] = fn_or_cls(**kwargs_spec.kwargs(instances))\n        return instances\n\nNow we are ready to create ``UserDAO`` instances with ``andi``:\n\n.. code-block:: python\n\n    plan = andi.plan(UsersDAO, is_injectable=is_injectable,\n                     externally_provided={DBConnection})\n    dbconnection = DBPool.get_connection()\n    instances = build(plan.dependencies, {DBConnection: dbconnection})\n    users_dao = instances[UsersDAO]\n    users = user_dao.getUsers()\n\nNote that being injectable is not required for externally provided\ndependencies.\n\nOptional\n--------\n\n``Optional`` type annotations can be used in case of\ndependencies that can be optional. For example:\n\n.. code-block:: python\n\n    @dataclass\n    class Dashboard:\n        conn: Optional[DBConnection]\n\n        def showPage():\n            if self.conn:\n                self.conn.query(\"INSERT INTO VISITS ...\")\n            ...  # renders a HTML page\n\nIn this example, the ``Dashboard`` class generates a HTML page to be served, and\nalso stores the number of visits into a database. Database\ncould be absent in some environments, but you might want\nthe dashboard to work even if it cannot log the visits.\n\nWhen a database connection is possible the plan call would be:\n\n.. code-block:: python\n\n    plan = andi.plan(UsersDAO, is_injectable=is_injectable,\n                     externally_provided={DBConnection})\n\n\nAnd the following when the connection is absent:\n\n.. code-block:: python\n\n    plan = andi.plan(UsersDAO, is_injectable=is_injectable,\n                     externally_provided={})\n\nIt is also required to register the type of ``None``\nas injectable. Otherwise ``andi.plan`` with raise an exception\nsaying that \"NoneType is not injectable\".\n\n.. code-block:: python\n\n    Injectable.register(type(None))\n\nUnion\n-----\n\n``Union`` can also be used to express alternatives. For example:\n\n.. code-block:: python\n\n    @dataclass\n    class UsersDAO:\n        conn: Union[ProductionDBConnection, DevelopmentDBConnection]\n\n``DevelopmentDBConnection`` will be injected in the absence of\n``ProductionDBConnection``.\n\nFull final kwargs mode\n-------------------------\n\nBy default ``andi.plan`` won't fail if it is not able to provide\nsome of the direct dependencies for the given input (see the\n``speed`` argument in one of the examples above).\n\nThis behaviour is desired when inspecting functions\nfor which is already known that some arguments won't be\ninjectable but they will be provided by other means\n(like the ``drive`` function above).\n\nBut in other cases is better to be sure that all dependencies\nare fulfilled and otherwise fail. Such is the case for classes.\nSo it is recommended to set ``full_final_kwargs=True`` when invoking\n``andi.plan`` for classes.\n\nWhy type annotations?\n---------------------\n\n``andi`` uses type annotations to declare dependencies (inputs).\nIt has several advantages, and some limitations as well.\n\nAdvantages:\n\n1. Built-in language feature.\n2. You're not lying when specifying a type - these\n   annotations still work as usual type annotations.\n3. In many projects you'd annotate arguments anyways, so ``andi`` support\n   is \"for free\".\n\nLimitations:\n\n1. Callable can't have two arguments of the same type.\n2. This feature could possibly conflict with regular type annotation usages.\n\nIf your callable has two arguments of the same type, consider making them\ndifferent types. For example, a callable may receive url and html of\na web page:\n\n.. code-block:: python\n\n    def parse(html: str, url: str):\n        # ...\n\nTo make it play well with ``andi``, you may define separate types for url\nand for html:\n\n.. code-block:: python\n\n    class HTML(str):\n        pass\n\n    class URL(str):\n        pass\n\n    def parse(html: HTML, url: URL):\n        # ...\n\nThis is more boilerplate though.\n\nWhy doesn't andi handle creation of objects?\n--------------------------------------------\n\nCurrently ``andi`` just inspects callable and chooses best concrete types\na framework needs to create and pass to a callable, without prescribing how\nto create them. This makes ``andi`` useful in various contexts - e.g.\n\n* creation of some objects may require asynchronous functions, and it\n  may depend on libraries used (asyncio, twisted, etc.)\n* in streaming architectures (e.g. based on Kafka) inspection may happen\n  on one machine, while creation of objects may happen on different nodes\n  in a distributed system, and then actually running a callable may happen on\n  yet another machine.\n\nIt is hard to design API with enough flexibility for all such use cases.\nThat said, ``andi`` may provide more helpers in future,\nonce patterns emerge, even if they're useful only in certain contexts.\n\nExamples: callback based frameworks\n-----------------------------------\n\nSpider example\n**************\n\nNothing better than a example to understand how ``andi`` can be useful.\nLet's imagine you want to implemented a callback based framework\nfor writing spiders to crawl web pages.\n\nThe basic idea is that there is framework in which the user\ncan write spiders. Each spider is a collection of callbacks\nthat can process data from a page, emit extracted data or request new\npages. Then, there is an engine that takes care of downloading\nthe web pages\nand invoking the user defined callbacks, chaining requests\nwith its corresponding callback.\n\nLet's see an example of an spider to download recipes\nfrom a cooking page:\n\n.. code-block:: python\n\n    class MySpider(Spider):\n        start_url = \"htttp://a_page_with_a_list_of_recipes\"\n\n        def parse(self, response):\n            for url in recipes_urls_from_page(response)\n                yield Request(url, callback=parse_recipe)\n\n        def parse_recipe(self, response):\n            yield extract_recipe(response)\n\n\nIt would be handy if the user can define some requirements\njust by annotating parameters in the callbacks. And ``andi`` make it\npossible.\n\nFor example, a particular callback could require access to the cookies:\n\n.. code-block:: python\n\n    def parse(self, response: Response, cookies: CookieJar):\n        # ... Do something with the response and the cookies\n\nIn this case, the engine can use ``andi`` to inspect the ``parse`` method, and\ndetect that ``Response`` and ``CookieJar`` are required.\nThen the framework will build them and will invoke the callback.\n\nThis functionality would serve to inject into the users callbacks\nsome components only when they are required.\n\nIt could also serve to encapsulate better the user code. For\nexample, we could just decouple the recipe extraction into\nit's own class:\n\n.. code-block:: python\n\n    @dataclass\n    class RecipeExtractor:\n        response: Response\n\n        def to_item():\n            return extract_recipe(self.response)\n\nThe callback could then be defined as:\n\n.. code-block:: python\n\n        def parse_recipe(extractor: RecipeExtractor):\n            yield extractor.to_item()\n\nNote how handy is that with ``andi`` the engine can create\nan instance of ``RecipesExtractor`` feeding it with the\ndeclared ``Response`` dependency.\n\nIn definitive, using ``andi`` in such a framework\ncan provide great flexibility to the user\nand reduce boilerplate.\n\nWeb server example\n******************\n\n``andi`` can be useful also for implementing a new\nweb framework.\n\nLet's imagine a framework where you can declare your sever in a\nclass like the following:\n\n.. code-block:: python\n\n    class MyWeb(Server):\n\n        @route(\"/products\")\n        def productspage(self, request: Request):\n            ... # return the composed page\n\n        @route(\"/sales\")\n        def salespage(self, request: Request):\n            ... # return the composed page\n\nThe former case is composed of two endpoints, one for serving\na page with a summary of sales, and a second one to serve\nthe products list.\n\nConnection to the database can be required\nto sever these pages. This logic could be encapsulated\nin some classes:\n\n.. code-block:: python\n\n    @dataclass\n    class Products:\n        conn: DBConnection\n\n        def get_products()\n            return self.conn.query(\"SELECT ...\")\n\n    @dataclass\n    class Sales:\n        conn: DBConnection\n\n        def get_sales()\n            return self.conn.query(\"SELECT ...\")\n\nNow ``productspage`` and ``salespage`` methods can just declare\nthat they require these objects:\n\n.. code-block:: python\n\n    class MyWeb(Server):\n\n        @route(\"/products\")\n        def productspage(self, request: Request, products: Products):\n            ... # return the composed page\n\n        @route(\"/sales\")\n        def salespage(self, request: Request, sales: Sales):\n            ... # return the composed page\n\nAnd the framework can then be responsible to fulfill these\ndependencies. The flexibility offered would be a great advantage.\nAs an example, if would be very easy to create a page that requires\nboth sales and products:\n\n.. code-block:: python\n\n        @route(\"/overview\")\n        def productspage(self, request: Request,\n                         products: Products, sales: Sales):\n            ... # return the composed overview page\n\n\nContributing\n============\n\n* Source code: https://github.com/scrapinghub/andi\n* Issue tracker: https://github.com/scrapinghub/andi/issues\n\nUse tox_ to run tests with different Python versions::\n\n    tox\n\nThe command above also runs type checks; we use mypy.\n\n.. _tox: https://tox.readthedocs.io\n\n\nChanges\n=======\n\n0.4.0 (2020-04-23)\n------------------\n\n* ``andi.inspect`` can handle classes now (their ``__init__`` method\n  is inspected)\n* ``andi.plan`` and ``andi.inspect`` can handle objects which are\n  callable via ``__call__`` method.\n\n0.3.0 (2020-04-03)\n------------------\n\n* ``andi.plan`` function replacing ``andi.to_provide``.\n* Rewrite README explaining the new approach based in ``plan`` method.\n* ``andi.inspect`` return non annotated arguments also.\n\n0.2.0 (2020-02-14)\n------------------\n\n* Better attrs support (workaround issue with string type annotations).\n* Declare Python 3.8 support.\n* More tests; ensure dataclasses support.\n\n0.1 (2019-08-28)\n----------------\n\nInitial release.\n\n", "description_content_type": "text/x-rst", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/scrapinghub/andi", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "andi", "package_url": "https://pypi.org/project/andi/", "platform": "", "project_url": "https://pypi.org/project/andi/", "project_urls": {"Homepage": "https://github.com/scrapinghub/andi"}, "release_url": "https://pypi.org/project/andi/0.4.0/", "requires_dist": null, "requires_python": "", "summary": "Library for annotation-based dependency injection", "version": "0.4.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://pypi.python.org/pypi/andi\" rel=\"nofollow\"><img alt=\"PyPI Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/18a2aa8d8502ae831e739ad34a04da2048f540e7/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f616e64692e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/andi\" rel=\"nofollow\"><img alt=\"Supported Python Versions\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0d51f9aa9e217b18a55dec917aac38430cec23e8/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f616e64692e737667\"></a>\n<a href=\"https://travis-ci.com/scrapinghub/andi\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f996fb82219ba89c7a3abf2229958b3f5115972a/68747470733a2f2f7472617669732d63692e636f6d2f7363726170696e676875622f616e64692e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/gh/scrapinghub/andi\" rel=\"nofollow\"><img alt=\"Coverage report\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c6755ad54c19331ab3733e50d4a4aea96e99d232/68747470733a2f2f636f6465636f762e696f2f6769746875622f7363726170696e676875622f616e64692f636f7665726167652e7376673f6272616e63683d6d6173746572\"></a>\n<div>\n<p>Warning</p>\n<p>Current status is \u201cexperimental\u201d.</p>\n</div>\n<p><tt>andi</tt> makes easy implementing custom dependency injection mechanisms\nwhere dependencies are expressed using type annotations.</p>\n<p><tt>andi</tt> is useful as a building block for frameworks, or as a library\nwhich helps to implement dependency injection (thus the name -\nANnotation-based Dependency Injection).</p>\n<p>License is BSD 3-clause.</p>\n<div id=\"installation\">\n<h2>Installation</h2>\n<pre>pip install andi\n</pre>\n<p>andi requires Python &gt;= 3.5.3.</p>\n</div>\n<div id=\"goal\">\n<h2>Goal</h2>\n<p>See the following classes that represents parts of a car\n(and the car itself):</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Valves</span><span class=\"p\">:</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Engine</span><span class=\"p\">:</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">valves</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">valves</span> <span class=\"o\">=</span> <span class=\"n\">valves</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Wheels</span><span class=\"p\">:</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Car</span><span class=\"p\">:</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">engine</span><span class=\"p\">,</span> <span class=\"n\">wheels</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">engine</span> <span class=\"o\">=</span> <span class=\"n\">engine</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">wheels</span> <span class=\"o\">=</span> <span class=\"n\">wheels</span>\n</pre>\n<p>The following would be the usual way of build a <tt>Car</tt> instance:</p>\n<pre><span class=\"n\">valves</span> <span class=\"o\">=</span> <span class=\"n\">Valves</span><span class=\"p\">()</span>\n<span class=\"n\">engine</span> <span class=\"o\">=</span> <span class=\"n\">Engine</span><span class=\"p\">(</span><span class=\"n\">valves</span><span class=\"p\">)</span>\n<span class=\"n\">wheels</span> <span class=\"o\">=</span> <span class=\"n\">Wheels</span><span class=\"p\">()</span>\n<span class=\"n\">car</span> <span class=\"o\">=</span> <span class=\"n\">Car</span><span class=\"p\">(</span><span class=\"n\">engine</span><span class=\"p\">,</span> <span class=\"n\">wheels</span><span class=\"p\">)</span>\n</pre>\n<p>There are some dependencies between the classes: A car requires\nand engine and wheels to be built, as well as the engine requires\nvalves. These are the car dependencies and sub-dependencies.</p>\n<p>The question is, could we have an automatic way of building instances?\nFor example, could we have a <tt>build</tt> function that\ngiven the <tt>Car</tt> class or any other class would return an instance\neven if the class itself has some other dependencies?</p>\n<pre><span class=\"n\">car</span> <span class=\"o\">=</span> <span class=\"n\">build</span><span class=\"p\">(</span><span class=\"n\">Car</span><span class=\"p\">)</span>  <span class=\"c1\"># Andi helps creating this generic build function</span>\n</pre>\n<p><tt>andi</tt> inspect the dependency tree and creates a plan making easy creating\nsuch a <tt>build</tt> function.</p>\n<p>This is how this plan for the <tt>Car</tt> class would looks like:</p>\n<ol>\n<li>Invoke <tt>Valves</tt> with empty arguments</li>\n<li>Invoke <tt>Engine</tt> using the instance created in 1 as the argument <tt>valves</tt></li>\n<li>Invoke <tt>Wheels</tt> with empty arguments</li>\n<li>Invoke <tt>Cars</tt> with the instance created in 2 as the <tt>engine</tt> argument and with\nthe instance created in 3 as the <tt>wheels</tt> argument</li>\n</ol>\n<div id=\"type-annotations\">\n<h3>Type annotations</h3>\n<p>But there is a missing piece in the Car example before. How can\n<tt>andi</tt> know that the class <tt>Valves</tt> is required to build the\nargument <tt>valves</tt>? A first idea would be to use the argument\nname as a hint for the class name\n(as <a href=\"https://pypi.org/project/pinject/\" rel=\"nofollow\">pinject</a> does),\nbut <tt>andi</tt> opts to rely on arguments\u2019 type annotations instead.</p>\n<p>The classes for <tt>Car</tt> should then be rewritten as:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Valves</span><span class=\"p\">:</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Engine</span><span class=\"p\">:</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">valves</span><span class=\"p\">:</span> <span class=\"n\">Valves</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">valves</span> <span class=\"o\">=</span> <span class=\"n\">valves</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Wheels</span><span class=\"p\">:</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Car</span><span class=\"p\">:</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">engine</span><span class=\"p\">:</span> <span class=\"n\">Engine</span><span class=\"p\">,</span> <span class=\"n\">wheels</span><span class=\"p\">:</span> <span class=\"n\">Wheels</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">engine</span> <span class=\"o\">=</span> <span class=\"n\">engine</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">wheels</span> <span class=\"o\">=</span> <span class=\"n\">wheels</span>\n</pre>\n<p>Note how now there is a explicit annotation stating that the\n<tt>valves</tt> argument is of type <tt>Valves</tt>\n(same for <tt>engine</tt> and <tt>wheels</tt>).</p>\n<p>The <tt>andi.plan</tt> function can now create a plan to build the\n<tt>Car</tt> class (ignore the <tt>is_injectable</tt> parameter by now):</p>\n<pre><span class=\"n\">plan</span> <span class=\"o\">=</span> <span class=\"n\">andi</span><span class=\"o\">.</span><span class=\"n\">plan</span><span class=\"p\">(</span><span class=\"n\">Car</span><span class=\"p\">,</span> <span class=\"n\">is_injectable</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">Engine</span><span class=\"p\">,</span> <span class=\"n\">Wheels</span><span class=\"p\">,</span> <span class=\"n\">Valves</span><span class=\"p\">})</span>\n</pre>\n<p>This is what the <tt>plan</tt> variable contains:</p>\n<pre><span class=\"p\">[(</span><span class=\"n\">Valves</span><span class=\"p\">,</span> <span class=\"p\">{}),</span>\n <span class=\"p\">(</span><span class=\"n\">Engine</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s1\">'valves'</span><span class=\"p\">:</span> <span class=\"n\">Valves</span><span class=\"p\">}),</span>\n <span class=\"p\">(</span><span class=\"n\">Wheels</span><span class=\"p\">,</span> <span class=\"p\">{}),</span>\n <span class=\"p\">(</span><span class=\"n\">Car</span><span class=\"p\">,</span>    <span class=\"p\">{</span><span class=\"s1\">'engine'</span><span class=\"p\">:</span> <span class=\"n\">Engine</span><span class=\"p\">,</span>\n           <span class=\"s1\">'wheels'</span><span class=\"p\">:</span> <span class=\"n\">Wheels</span><span class=\"p\">})]</span>\n</pre>\n<p>Note how this plan correspond exactly to the 4-steps plan described\nin the previous section.</p>\n</div>\n<div id=\"building-from-the-plan\">\n<h3>Building from the plan</h3>\n<p>Creating a generic function to build the instances from\na plan generated by <tt>andi</tt> is then very easy:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">build</span><span class=\"p\">(</span><span class=\"n\">plan</span><span class=\"p\">):</span>\n    <span class=\"n\">instances</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n    <span class=\"k\">for</span> <span class=\"n\">fn_or_cls</span><span class=\"p\">,</span> <span class=\"n\">kwargs_spec</span> <span class=\"ow\">in</span> <span class=\"n\">plan</span><span class=\"p\">:</span>\n        <span class=\"n\">instances</span><span class=\"p\">[</span><span class=\"n\">fn_or_cls</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">fn_or_cls</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">kwargs_spec</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">(</span><span class=\"n\">instances</span><span class=\"p\">))</span>\n    <span class=\"k\">return</span> <span class=\"n\">instances</span>\n</pre>\n<p>So let\u2019s see putting all the pieces together. The following code\ncreates an instance of <tt>Car</tt> using <tt>andi</tt>:</p>\n<pre><span class=\"n\">plan</span> <span class=\"o\">=</span> <span class=\"n\">andi</span><span class=\"o\">.</span><span class=\"n\">plan</span><span class=\"p\">(</span><span class=\"n\">Car</span><span class=\"p\">,</span> <span class=\"n\">is_injectable</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">Engine</span><span class=\"p\">,</span> <span class=\"n\">Wheels</span><span class=\"p\">,</span> <span class=\"n\">Valves</span><span class=\"p\">})</span>\n<span class=\"n\">instances</span> <span class=\"o\">=</span> <span class=\"n\">build</span><span class=\"p\">(</span><span class=\"n\">plan</span><span class=\"p\">)</span>\n<span class=\"n\">car</span> <span class=\"o\">=</span> <span class=\"n\">instances</span><span class=\"p\">[</span><span class=\"n\">Car</span><span class=\"p\">]</span>\n</pre>\n</div>\n<div id=\"is-injectable\">\n<h3>is_injectable</h3>\n<p>It is not always desired for <tt>andi</tt> to manage every single annotation found.\nInstead is usually better to explicitly declare which types\ncan be handled by <tt>andi</tt>. The argument <tt>is_injectable</tt>\nallows to customize this feature.</p>\n<p><tt>andi</tt> will raise an error on the presence of a dependency that cannot be resolved\nbecause it is not injectable.</p>\n<p>Usually is desirable to declare injectabilty by\ncreating a base class to inherit from. For example,\nwe could create a base class <tt>Injectable</tt> as base\nclass for the car components:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Injectable</span><span class=\"p\">(</span><span class=\"n\">ABC</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Valves</span><span class=\"p\">(</span><span class=\"n\">Injectable</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Engine</span><span class=\"p\">(</span><span class=\"n\">Injectable</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">valves</span><span class=\"p\">:</span> <span class=\"n\">Valves</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">valves</span> <span class=\"o\">=</span> <span class=\"n\">valves</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Wheels</span><span class=\"p\">(</span><span class=\"n\">Injectable</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n</pre>\n<p>The call to <tt>andi.plan</tt> would then be:</p>\n<pre><span class=\"n\">is_injectable</span> <span class=\"o\">=</span> <span class=\"k\">lambda</span> <span class=\"bp\">cls</span><span class=\"p\">:</span> <span class=\"nb\">issubclass</span><span class=\"p\">(</span><span class=\"bp\">cls</span><span class=\"p\">,</span> <span class=\"n\">Injectable</span><span class=\"p\">)</span>\n<span class=\"n\">plan</span> <span class=\"o\">=</span> <span class=\"n\">andi</span><span class=\"o\">.</span><span class=\"n\">plan</span><span class=\"p\">(</span><span class=\"n\">Car</span><span class=\"p\">,</span> <span class=\"n\">is_injectable</span><span class=\"o\">=</span><span class=\"n\">is_injectable</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"functions-and-methods\">\n<h3>Functions and methods</h3>\n<p>Dependency injection is also very useful when applied to functions.\nImagine that you have a function <tt>drive</tt> that drives the <tt>Car</tt>\nthrough the <tt>Road</tt>:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Road</span><span class=\"p\">(</span><span class=\"n\">Injectable</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">drive</span><span class=\"p\">(</span><span class=\"n\">car</span><span class=\"p\">:</span> <span class=\"n\">Car</span><span class=\"p\">,</span> <span class=\"n\">road</span><span class=\"p\">:</span> <span class=\"n\">Road</span><span class=\"p\">,</span> <span class=\"n\">speed</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span> <span class=\"c1\"># Drive the car through the road</span>\n</pre>\n<p>The dependencies has to be resolved before invoking\nthe <tt>drive</tt> function:</p>\n<pre><span class=\"n\">plan</span> <span class=\"o\">=</span> <span class=\"n\">andi</span><span class=\"o\">.</span><span class=\"n\">plan</span><span class=\"p\">(</span><span class=\"n\">drive</span><span class=\"p\">,</span> <span class=\"n\">is_injectable</span><span class=\"o\">=</span><span class=\"n\">is_injectable</span><span class=\"p\">)</span>\n<span class=\"n\">instances</span> <span class=\"o\">=</span> <span class=\"n\">build</span><span class=\"p\">(</span><span class=\"n\">plan</span><span class=\"o\">.</span><span class=\"n\">dependencies</span><span class=\"p\">)</span>\n</pre>\n<p>Now the <tt>drive</tt> function can be invoked:</p>\n<pre><span class=\"n\">drive</span><span class=\"p\">(</span><span class=\"n\">instances</span><span class=\"p\">[</span><span class=\"n\">Car</span><span class=\"p\">],</span> <span class=\"n\">instances</span><span class=\"p\">[</span><span class=\"n\">Road</span><span class=\"p\">],</span> <span class=\"mi\">100</span><span class=\"p\">)</span>\n</pre>\n<p>Note that <tt>speed</tt> argument was not annotated. The resultant plan just won\u2019t include it\nbecause the <tt>andi.plan</tt> <tt>full_final_kwargs</tt> parameter is <tt>False</tt>\nby default. Otherwise, an exception would have been raised (see <tt>full_final_kwargs</tt> argument\ndocumentation for more information).</p>\n<p>An alternative and more generic way to invoke the drive function\nwould be:</p>\n<pre><span class=\"n\">drive</span><span class=\"p\">(</span><span class=\"n\">speed</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">plan</span><span class=\"o\">.</span><span class=\"n\">final_kwargs</span><span class=\"p\">(</span><span class=\"n\">instances</span><span class=\"p\">))</span>\n</pre>\n</div>\n<div id=\"dataclasses-and-attrs\">\n<h3>dataclasses and attrs</h3>\n<p><tt>andi</tt> supports classes defined using <a href=\"https://www.attrs.org/\" rel=\"nofollow\">attrs</a>\nand also <a href=\"https://docs.python.org/3/library/dataclasses.html\" rel=\"nofollow\">dataclasses</a>.\nFor example the <tt>Car</tt> class could have been defined as:</p>\n<pre><span class=\"c1\"># attrs class example</span>\n<span class=\"nd\">@attr</span><span class=\"o\">.</span><span class=\"n\">s</span><span class=\"p\">(</span><span class=\"n\">auto_attribs</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">Car</span><span class=\"p\">:</span>\n    <span class=\"n\">engine</span><span class=\"p\">:</span> <span class=\"n\">Engine</span>\n    <span class=\"n\">wheels</span><span class=\"p\">:</span> <span class=\"n\">Wheels</span>\n\n<span class=\"c1\"># dataclass example</span>\n<span class=\"nd\">@dataclass</span>\n<span class=\"k\">class</span> <span class=\"nc\">Car</span><span class=\"p\">(</span><span class=\"n\">Injectable</span><span class=\"p\">):</span>\n    <span class=\"n\">engine</span><span class=\"p\">:</span> <span class=\"n\">Engine</span>\n    <span class=\"n\">wheels</span><span class=\"p\">:</span> <span class=\"n\">Wheels</span>\n</pre>\n<p>Using <tt>attrs</tt> or <tt>dataclass</tt> is handy because they avoid\nsome boilerplate.</p>\n</div>\n<div id=\"externally-provided-dependencies\">\n<h3>Externally provided dependencies</h3>\n<p>Retaining the control over object instantiation\ncould be desired in some cases. For example creating\na database connection could require accessing some\ncredentials registry or getting the connection from a pool\nso you might want to control building\nsuch instances outside of the regular\ndependency injection mechanism.</p>\n<p><tt>andi.plan</tt> allows to specify which types would be\nexternally provided. Let\u2019s see an example:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">DBConnection</span><span class=\"p\">(</span><span class=\"n\">ABC</span><span class=\"p\">):</span>\n\n    <span class=\"nd\">@abstractmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">getConn</span><span class=\"p\">():</span>\n        <span class=\"k\">pass</span>\n\n<span class=\"nd\">@dataclass</span>\n<span class=\"k\">class</span> <span class=\"nc\">UsersDAO</span><span class=\"p\">:</span>\n    <span class=\"n\">conn</span><span class=\"p\">:</span> <span class=\"n\">DBConnection</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">getUsers</span><span class=\"p\">():</span>\n       <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">conn</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"s2\">\"SELECT * FROM USERS\"</span><span class=\"p\">)</span>\n</pre>\n<p><tt>UsersDAO</tt> requires a database connection to run queries.\nBut the connection will be provided externally from a pool, so we\ncall then <tt>andi.plan</tt> using also the <tt>externally_provided</tt>\nparameter:</p>\n<pre><span class=\"n\">plan</span> <span class=\"o\">=</span> <span class=\"n\">andi</span><span class=\"o\">.</span><span class=\"n\">plan</span><span class=\"p\">(</span><span class=\"n\">UsersDAO</span><span class=\"p\">,</span> <span class=\"n\">is_injectable</span><span class=\"o\">=</span><span class=\"n\">is_injectable</span><span class=\"p\">,</span>\n                 <span class=\"n\">externally_provided</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">DBConnection</span><span class=\"p\">})</span>\n</pre>\n<p>The build method should then be modified slightly to be able\nto inject externally provided instances:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">build</span><span class=\"p\">(</span><span class=\"n\">plan</span><span class=\"p\">,</span> <span class=\"n\">instances_stock</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"n\">instances_stock</span> <span class=\"o\">=</span> <span class=\"n\">instances_stock</span> <span class=\"ow\">or</span> <span class=\"p\">{}</span>\n    <span class=\"n\">instances</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n    <span class=\"k\">for</span> <span class=\"n\">fn_or_cls</span><span class=\"p\">,</span> <span class=\"n\">kwargs_spec</span> <span class=\"ow\">in</span> <span class=\"n\">plan</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"n\">fn_or_cls</span> <span class=\"ow\">in</span> <span class=\"n\">instances_stock</span><span class=\"p\">:</span>\n            <span class=\"n\">instances</span><span class=\"p\">[</span><span class=\"n\">fn_or_cls</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">instances_stock</span><span class=\"p\">[</span><span class=\"n\">fn_or_cls</span><span class=\"p\">]</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">instances</span><span class=\"p\">[</span><span class=\"n\">fn_or_cls</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">fn_or_cls</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">kwargs_spec</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">(</span><span class=\"n\">instances</span><span class=\"p\">))</span>\n    <span class=\"k\">return</span> <span class=\"n\">instances</span>\n</pre>\n<p>Now we are ready to create <tt>UserDAO</tt> instances with <tt>andi</tt>:</p>\n<pre><span class=\"n\">plan</span> <span class=\"o\">=</span> <span class=\"n\">andi</span><span class=\"o\">.</span><span class=\"n\">plan</span><span class=\"p\">(</span><span class=\"n\">UsersDAO</span><span class=\"p\">,</span> <span class=\"n\">is_injectable</span><span class=\"o\">=</span><span class=\"n\">is_injectable</span><span class=\"p\">,</span>\n                 <span class=\"n\">externally_provided</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">DBConnection</span><span class=\"p\">})</span>\n<span class=\"n\">dbconnection</span> <span class=\"o\">=</span> <span class=\"n\">DBPool</span><span class=\"o\">.</span><span class=\"n\">get_connection</span><span class=\"p\">()</span>\n<span class=\"n\">instances</span> <span class=\"o\">=</span> <span class=\"n\">build</span><span class=\"p\">(</span><span class=\"n\">plan</span><span class=\"o\">.</span><span class=\"n\">dependencies</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"n\">DBConnection</span><span class=\"p\">:</span> <span class=\"n\">dbconnection</span><span class=\"p\">})</span>\n<span class=\"n\">users_dao</span> <span class=\"o\">=</span> <span class=\"n\">instances</span><span class=\"p\">[</span><span class=\"n\">UsersDAO</span><span class=\"p\">]</span>\n<span class=\"n\">users</span> <span class=\"o\">=</span> <span class=\"n\">user_dao</span><span class=\"o\">.</span><span class=\"n\">getUsers</span><span class=\"p\">()</span>\n</pre>\n<p>Note that being injectable is not required for externally provided\ndependencies.</p>\n</div>\n<div id=\"optional\">\n<h3>Optional</h3>\n<p><tt>Optional</tt> type annotations can be used in case of\ndependencies that can be optional. For example:</p>\n<pre><span class=\"nd\">@dataclass</span>\n<span class=\"k\">class</span> <span class=\"nc\">Dashboard</span><span class=\"p\">:</span>\n    <span class=\"n\">conn</span><span class=\"p\">:</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"n\">DBConnection</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">showPage</span><span class=\"p\">():</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">conn</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">conn</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"s2\">\"INSERT INTO VISITS ...\"</span><span class=\"p\">)</span>\n        <span class=\"o\">...</span>  <span class=\"c1\"># renders a HTML page</span>\n</pre>\n<p>In this example, the <tt>Dashboard</tt> class generates a HTML page to be served, and\nalso stores the number of visits into a database. Database\ncould be absent in some environments, but you might want\nthe dashboard to work even if it cannot log the visits.</p>\n<p>When a database connection is possible the plan call would be:</p>\n<pre><span class=\"n\">plan</span> <span class=\"o\">=</span> <span class=\"n\">andi</span><span class=\"o\">.</span><span class=\"n\">plan</span><span class=\"p\">(</span><span class=\"n\">UsersDAO</span><span class=\"p\">,</span> <span class=\"n\">is_injectable</span><span class=\"o\">=</span><span class=\"n\">is_injectable</span><span class=\"p\">,</span>\n                 <span class=\"n\">externally_provided</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">DBConnection</span><span class=\"p\">})</span>\n</pre>\n<p>And the following when the connection is absent:</p>\n<pre><span class=\"n\">plan</span> <span class=\"o\">=</span> <span class=\"n\">andi</span><span class=\"o\">.</span><span class=\"n\">plan</span><span class=\"p\">(</span><span class=\"n\">UsersDAO</span><span class=\"p\">,</span> <span class=\"n\">is_injectable</span><span class=\"o\">=</span><span class=\"n\">is_injectable</span><span class=\"p\">,</span>\n                 <span class=\"n\">externally_provided</span><span class=\"o\">=</span><span class=\"p\">{})</span>\n</pre>\n<p>It is also required to register the type of <tt>None</tt>\nas injectable. Otherwise <tt>andi.plan</tt> with raise an exception\nsaying that \u201cNoneType is not injectable\u201d.</p>\n<pre><span class=\"n\">Injectable</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">))</span>\n</pre>\n</div>\n<div id=\"union\">\n<h3>Union</h3>\n<p><tt>Union</tt> can also be used to express alternatives. For example:</p>\n<pre><span class=\"nd\">@dataclass</span>\n<span class=\"k\">class</span> <span class=\"nc\">UsersDAO</span><span class=\"p\">:</span>\n    <span class=\"n\">conn</span><span class=\"p\">:</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"n\">ProductionDBConnection</span><span class=\"p\">,</span> <span class=\"n\">DevelopmentDBConnection</span><span class=\"p\">]</span>\n</pre>\n<p><tt>DevelopmentDBConnection</tt> will be injected in the absence of\n<tt>ProductionDBConnection</tt>.</p>\n</div>\n<div id=\"full-final-kwargs-mode\">\n<h3>Full final kwargs mode</h3>\n<p>By default <tt>andi.plan</tt> won\u2019t fail if it is not able to provide\nsome of the direct dependencies for the given input (see the\n<tt>speed</tt> argument in one of the examples above).</p>\n<p>This behaviour is desired when inspecting functions\nfor which is already known that some arguments won\u2019t be\ninjectable but they will be provided by other means\n(like the <tt>drive</tt> function above).</p>\n<p>But in other cases is better to be sure that all dependencies\nare fulfilled and otherwise fail. Such is the case for classes.\nSo it is recommended to set <tt>full_final_kwargs=True</tt> when invoking\n<tt>andi.plan</tt> for classes.</p>\n</div>\n<div id=\"why-type-annotations\">\n<h3>Why type annotations?</h3>\n<p><tt>andi</tt> uses type annotations to declare dependencies (inputs).\nIt has several advantages, and some limitations as well.</p>\n<p>Advantages:</p>\n<ol>\n<li>Built-in language feature.</li>\n<li>You\u2019re not lying when specifying a type - these\nannotations still work as usual type annotations.</li>\n<li>In many projects you\u2019d annotate arguments anyways, so <tt>andi</tt> support\nis \u201cfor free\u201d.</li>\n</ol>\n<p>Limitations:</p>\n<ol>\n<li>Callable can\u2019t have two arguments of the same type.</li>\n<li>This feature could possibly conflict with regular type annotation usages.</li>\n</ol>\n<p>If your callable has two arguments of the same type, consider making them\ndifferent types. For example, a callable may receive url and html of\na web page:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"n\">html</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">url</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n</pre>\n<p>To make it play well with <tt>andi</tt>, you may define separate types for url\nand for html:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">HTML</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">URL</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"n\">html</span><span class=\"p\">:</span> <span class=\"n\">HTML</span><span class=\"p\">,</span> <span class=\"n\">url</span><span class=\"p\">:</span> <span class=\"n\">URL</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n</pre>\n<p>This is more boilerplate though.</p>\n</div>\n<div id=\"why-doesn-t-andi-handle-creation-of-objects\">\n<h3>Why doesn\u2019t andi handle creation of objects?</h3>\n<p>Currently <tt>andi</tt> just inspects callable and chooses best concrete types\na framework needs to create and pass to a callable, without prescribing how\nto create them. This makes <tt>andi</tt> useful in various contexts - e.g.</p>\n<ul>\n<li>creation of some objects may require asynchronous functions, and it\nmay depend on libraries used (asyncio, twisted, etc.)</li>\n<li>in streaming architectures (e.g. based on Kafka) inspection may happen\non one machine, while creation of objects may happen on different nodes\nin a distributed system, and then actually running a callable may happen on\nyet another machine.</li>\n</ul>\n<p>It is hard to design API with enough flexibility for all such use cases.\nThat said, <tt>andi</tt> may provide more helpers in future,\nonce patterns emerge, even if they\u2019re useful only in certain contexts.</p>\n</div>\n<div id=\"examples-callback-based-frameworks\">\n<h3>Examples: callback based frameworks</h3>\n<div id=\"spider-example\">\n<h4>Spider example</h4>\n<p>Nothing better than a example to understand how <tt>andi</tt> can be useful.\nLet\u2019s imagine you want to implemented a callback based framework\nfor writing spiders to crawl web pages.</p>\n<p>The basic idea is that there is framework in which the user\ncan write spiders. Each spider is a collection of callbacks\nthat can process data from a page, emit extracted data or request new\npages. Then, there is an engine that takes care of downloading\nthe web pages\nand invoking the user defined callbacks, chaining requests\nwith its corresponding callback.</p>\n<p>Let\u2019s see an example of an spider to download recipes\nfrom a cooking page:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">MySpider</span><span class=\"p\">(</span><span class=\"n\">Spider</span><span class=\"p\">):</span>\n    <span class=\"n\">start_url</span> <span class=\"o\">=</span> <span class=\"s2\">\"htttp://a_page_with_a_list_of_recipes\"</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"p\">):</span>\n        <span class=\"k\">for</span> <span class=\"n\">url</span> <span class=\"ow\">in</span> <span class=\"n\">recipes_urls_from_page</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"p\">)</span>\n            <span class=\"k\">yield</span> <span class=\"n\">Request</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">parse_recipe</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">parse_recipe</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"p\">):</span>\n        <span class=\"k\">yield</span> <span class=\"n\">extract_recipe</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"p\">)</span>\n</pre>\n<p>It would be handy if the user can define some requirements\njust by annotating parameters in the callbacks. And <tt>andi</tt> make it\npossible.</p>\n<p>For example, a particular callback could require access to the cookies:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"p\">:</span> <span class=\"n\">Response</span><span class=\"p\">,</span> <span class=\"n\">cookies</span><span class=\"p\">:</span> <span class=\"n\">CookieJar</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ... Do something with the response and the cookies</span>\n</pre>\n<p>In this case, the engine can use <tt>andi</tt> to inspect the <tt>parse</tt> method, and\ndetect that <tt>Response</tt> and <tt>CookieJar</tt> are required.\nThen the framework will build them and will invoke the callback.</p>\n<p>This functionality would serve to inject into the users callbacks\nsome components only when they are required.</p>\n<p>It could also serve to encapsulate better the user code. For\nexample, we could just decouple the recipe extraction into\nit\u2019s own class:</p>\n<pre><span class=\"nd\">@dataclass</span>\n<span class=\"k\">class</span> <span class=\"nc\">RecipeExtractor</span><span class=\"p\">:</span>\n    <span class=\"n\">response</span><span class=\"p\">:</span> <span class=\"n\">Response</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">to_item</span><span class=\"p\">():</span>\n        <span class=\"k\">return</span> <span class=\"n\">extract_recipe</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">response</span><span class=\"p\">)</span>\n</pre>\n<p>The callback could then be defined as:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">parse_recipe</span><span class=\"p\">(</span><span class=\"n\">extractor</span><span class=\"p\">:</span> <span class=\"n\">RecipeExtractor</span><span class=\"p\">):</span>\n    <span class=\"k\">yield</span> <span class=\"n\">extractor</span><span class=\"o\">.</span><span class=\"n\">to_item</span><span class=\"p\">()</span>\n</pre>\n<p>Note how handy is that with <tt>andi</tt> the engine can create\nan instance of <tt>RecipesExtractor</tt> feeding it with the\ndeclared <tt>Response</tt> dependency.</p>\n<p>In definitive, using <tt>andi</tt> in such a framework\ncan provide great flexibility to the user\nand reduce boilerplate.</p>\n</div>\n<div id=\"web-server-example\">\n<h4>Web server example</h4>\n<p><tt>andi</tt> can be useful also for implementing a new\nweb framework.</p>\n<p>Let\u2019s imagine a framework where you can declare your sever in a\nclass like the following:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">MyWeb</span><span class=\"p\">(</span><span class=\"n\">Server</span><span class=\"p\">):</span>\n\n    <span class=\"nd\">@route</span><span class=\"p\">(</span><span class=\"s2\">\"/products\"</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">productspage</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">:</span> <span class=\"n\">Request</span><span class=\"p\">):</span>\n        <span class=\"o\">...</span> <span class=\"c1\"># return the composed page</span>\n\n    <span class=\"nd\">@route</span><span class=\"p\">(</span><span class=\"s2\">\"/sales\"</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">salespage</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">:</span> <span class=\"n\">Request</span><span class=\"p\">):</span>\n        <span class=\"o\">...</span> <span class=\"c1\"># return the composed page</span>\n</pre>\n<p>The former case is composed of two endpoints, one for serving\na page with a summary of sales, and a second one to serve\nthe products list.</p>\n<p>Connection to the database can be required\nto sever these pages. This logic could be encapsulated\nin some classes:</p>\n<pre><span class=\"nd\">@dataclass</span>\n<span class=\"k\">class</span> <span class=\"nc\">Products</span><span class=\"p\">:</span>\n    <span class=\"n\">conn</span><span class=\"p\">:</span> <span class=\"n\">DBConnection</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get_products</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">conn</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"s2\">\"SELECT ...\"</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@dataclass</span>\n<span class=\"k\">class</span> <span class=\"nc\">Sales</span><span class=\"p\">:</span>\n    <span class=\"n\">conn</span><span class=\"p\">:</span> <span class=\"n\">DBConnection</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get_sales</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">conn</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"s2\">\"SELECT ...\"</span><span class=\"p\">)</span>\n</pre>\n<p>Now <tt>productspage</tt> and <tt>salespage</tt> methods can just declare\nthat they require these objects:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">MyWeb</span><span class=\"p\">(</span><span class=\"n\">Server</span><span class=\"p\">):</span>\n\n    <span class=\"nd\">@route</span><span class=\"p\">(</span><span class=\"s2\">\"/products\"</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">productspage</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">:</span> <span class=\"n\">Request</span><span class=\"p\">,</span> <span class=\"n\">products</span><span class=\"p\">:</span> <span class=\"n\">Products</span><span class=\"p\">):</span>\n        <span class=\"o\">...</span> <span class=\"c1\"># return the composed page</span>\n\n    <span class=\"nd\">@route</span><span class=\"p\">(</span><span class=\"s2\">\"/sales\"</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">salespage</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">:</span> <span class=\"n\">Request</span><span class=\"p\">,</span> <span class=\"n\">sales</span><span class=\"p\">:</span> <span class=\"n\">Sales</span><span class=\"p\">):</span>\n        <span class=\"o\">...</span> <span class=\"c1\"># return the composed page</span>\n</pre>\n<p>And the framework can then be responsible to fulfill these\ndependencies. The flexibility offered would be a great advantage.\nAs an example, if would be very easy to create a page that requires\nboth sales and products:</p>\n<pre><span class=\"nd\">@route</span><span class=\"p\">(</span><span class=\"s2\">\"/overview\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">productspage</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">:</span> <span class=\"n\">Request</span><span class=\"p\">,</span>\n                 <span class=\"n\">products</span><span class=\"p\">:</span> <span class=\"n\">Products</span><span class=\"p\">,</span> <span class=\"n\">sales</span><span class=\"p\">:</span> <span class=\"n\">Sales</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span> <span class=\"c1\"># return the composed overview page</span>\n</pre>\n</div>\n</div>\n</div>\n<div id=\"contributing\">\n<h2>Contributing</h2>\n<ul>\n<li>Source code: <a href=\"https://github.com/scrapinghub/andi\" rel=\"nofollow\">https://github.com/scrapinghub/andi</a></li>\n<li>Issue tracker: <a href=\"https://github.com/scrapinghub/andi/issues\" rel=\"nofollow\">https://github.com/scrapinghub/andi/issues</a></li>\n</ul>\n<p>Use <a href=\"https://tox.readthedocs.io\" rel=\"nofollow\">tox</a> to run tests with different Python versions:</p>\n<pre>tox\n</pre>\n<p>The command above also runs type checks; we use mypy.</p>\n</div>\n<div id=\"changes\">\n<h2>Changes</h2>\n<div id=\"id1\">\n<h3>0.4.0 (2020-04-23)</h3>\n<ul>\n<li><tt>andi.inspect</tt> can handle classes now (their <tt>__init__</tt> method\nis inspected)</li>\n<li><tt>andi.plan</tt> and <tt>andi.inspect</tt> can handle objects which are\ncallable via <tt>__call__</tt> method.</li>\n</ul>\n</div>\n<div id=\"id2\">\n<h3>0.3.0 (2020-04-03)</h3>\n<ul>\n<li><tt>andi.plan</tt> function replacing <tt>andi.to_provide</tt>.</li>\n<li>Rewrite README explaining the new approach based in <tt>plan</tt> method.</li>\n<li><tt>andi.inspect</tt> return non annotated arguments also.</li>\n</ul>\n</div>\n<div id=\"id3\">\n<h3>0.2.0 (2020-02-14)</h3>\n<ul>\n<li>Better attrs support (workaround issue with string type annotations).</li>\n<li>Declare Python 3.8 support.</li>\n<li>More tests; ensure dataclasses support.</li>\n</ul>\n</div>\n<div id=\"id4\">\n<h3>0.1 (2019-08-28)</h3>\n<p>Initial release.</p>\n</div>\n</div>\n\n          </div>"}, "last_serial": 7085049, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "3cda79495f7401996460781dc0e0d903", "sha256": "6f5435a510ca487b683783934ac1db67ba75d5e682c2eb426946ef19b2de2e8c"}, "downloads": -1, "filename": "andi-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "3cda79495f7401996460781dc0e0d903", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7491, "upload_time": "2019-08-28T18:06:13", "upload_time_iso_8601": "2019-08-28T18:06:13.129042Z", "url": "https://files.pythonhosted.org/packages/c0/12/00abded0948a6245b9e2d549a74800da3fa8fc3250884c3fbc91107f967b/andi-0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "05b527572312f5b863ffbe2415062e9e", "sha256": "b78e51b238c0c99b3ce5ac12f90c3bdb652cc2b6bdc40c8c3dc9c8f296b77f3b"}, "downloads": -1, "filename": "andi-0.1.tar.gz", "has_sig": false, "md5_digest": "05b527572312f5b863ffbe2415062e9e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9688, "upload_time": "2019-08-28T18:06:15", "upload_time_iso_8601": "2019-08-28T18:06:15.586069Z", "url": "https://files.pythonhosted.org/packages/68/c5/b862a8890cb01620cbec939ade48b7c96fa38354854eeb63d16d07a39edb/andi-0.1.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "d67ede9269ca1a16898eb68b984603d2", "sha256": "7846636376d7d1c72a75f022b10fa7f7bb92564ffd33e84a48d183f9a252a3cf"}, "downloads": -1, "filename": "andi-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "d67ede9269ca1a16898eb68b984603d2", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8262, "upload_time": "2020-02-14T13:53:41", "upload_time_iso_8601": "2020-02-14T13:53:41.758890Z", "url": "https://files.pythonhosted.org/packages/b8/d9/ebc55a577824703892d3064b0b8b877b63026e3c9d934389ec592ca10eac/andi-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d917f87b0967fcedfd59a90f4fad81e8", "sha256": "e029dbb4ee5a740bd45cb939ae0523c7e86d51a1e1e6a3c24da039f640a2f2be"}, "downloads": -1, "filename": "andi-0.2.0.tar.gz", "has_sig": false, "md5_digest": "d917f87b0967fcedfd59a90f4fad81e8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11492, "upload_time": "2020-02-14T13:53:43", "upload_time_iso_8601": "2020-02-14T13:53:43.611060Z", "url": "https://files.pythonhosted.org/packages/3c/1b/b1c8e8fab0d296f36f5cc579df8c3c0c8f82e40b31ca32f63fe692f74057/andi-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "e902c5b5567781e64068ae439214e356", "sha256": "7e7c6444710524567f7684a9525de9ef5de5e8f732a2d3f0c4df16d42d75fbde"}, "downloads": -1, "filename": "andi-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "e902c5b5567781e64068ae439214e356", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 15257, "upload_time": "2020-04-03T13:57:18", "upload_time_iso_8601": "2020-04-03T13:57:18.918171Z", "url": "https://files.pythonhosted.org/packages/be/99/d0f45cd9a22a36fa602335c68426aad04ed1542cf98e68a01b79af2ea67d/andi-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "e30ce0a2093dac49bd0d2476727c9282", "sha256": "72869569d88fb7b9b57b3714a82782d2e3e16d183846205c672a2b39e1de601b"}, "downloads": -1, "filename": "andi-0.3.0.tar.gz", "has_sig": false, "md5_digest": "e30ce0a2093dac49bd0d2476727c9282", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 25688, "upload_time": "2020-04-03T13:57:20", "upload_time_iso_8601": "2020-04-03T13:57:20.769111Z", "url": "https://files.pythonhosted.org/packages/1d/35/24f6085aa7e61c1b60cdbcb5aca47cea34865ec1e9d891d29cfdb5038f92/andi-0.3.0.tar.gz", "yanked": false}], "0.4.0": [{"comment_text": "", "digests": {"md5": "c05b3d9f4b767c7b61d7d03dced73a53", "sha256": "4433b56f06dd2677b2ba471f5a5026dd9a56377560a0e2157083a679ea8454c7"}, "downloads": -1, "filename": "andi-0.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "c05b3d9f4b767c7b61d7d03dced73a53", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 15905, "upload_time": "2020-04-23T15:10:16", "upload_time_iso_8601": "2020-04-23T15:10:16.092158Z", "url": "https://files.pythonhosted.org/packages/04/49/8edda5f911da19d06323d1a88ff2f3eaba4ecffc584fe795b53c0c434929/andi-0.4.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "3875c7043a14e313cc8a7df108043940", "sha256": "ccda828841760d0b6f79d5f6cdbb2d9de89016c5190480a734e842dea9e5771b"}, "downloads": -1, "filename": "andi-0.4.0.tar.gz", "has_sig": false, "md5_digest": "3875c7043a14e313cc8a7df108043940", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 26741, "upload_time": "2020-04-23T15:10:17", "upload_time_iso_8601": "2020-04-23T15:10:17.807535Z", "url": "https://files.pythonhosted.org/packages/b7/09/acf37d3bc7db164c755fb7d15ddc077605876c1d89cdcafe9581e56fac01/andi-0.4.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "c05b3d9f4b767c7b61d7d03dced73a53", "sha256": "4433b56f06dd2677b2ba471f5a5026dd9a56377560a0e2157083a679ea8454c7"}, "downloads": -1, "filename": "andi-0.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "c05b3d9f4b767c7b61d7d03dced73a53", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 15905, "upload_time": "2020-04-23T15:10:16", "upload_time_iso_8601": "2020-04-23T15:10:16.092158Z", "url": "https://files.pythonhosted.org/packages/04/49/8edda5f911da19d06323d1a88ff2f3eaba4ecffc584fe795b53c0c434929/andi-0.4.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "3875c7043a14e313cc8a7df108043940", "sha256": "ccda828841760d0b6f79d5f6cdbb2d9de89016c5190480a734e842dea9e5771b"}, "downloads": -1, "filename": "andi-0.4.0.tar.gz", "has_sig": false, "md5_digest": "3875c7043a14e313cc8a7df108043940", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 26741, "upload_time": "2020-04-23T15:10:17", "upload_time_iso_8601": "2020-04-23T15:10:17.807535Z", "url": "https://files.pythonhosted.org/packages/b7/09/acf37d3bc7db164c755fb7d15ddc077605876c1d89cdcafe9581e56fac01/andi-0.4.0.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:18:14 2020"}