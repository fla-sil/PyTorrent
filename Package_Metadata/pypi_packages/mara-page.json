{"info": {"author": "Mara contributors", "author_email": "", "bugtrack_url": null, "classifiers": [], "description": "# Mara page\n\n[![Build Status](https://travis-ci.org/mara/mara-page.svg?branch=master)](https://travis-ci.org/mara/mara-page)\n[![PyPI - License](https://img.shields.io/pypi/l/mara-page.svg)](https://github.com/mara/mara-page/blob/master/LICENSE)\n[![PyPI version](https://badge.fury.io/py/mara-page.svg)](https://badge.fury.io/py/mara-page)\n[![Slack Status](https://img.shields.io/badge/slack-join_chat-white.svg?logo=slack&style=social)](https://communityinviter.com/apps/mara-users/public-invite)\n\nMinimal API for defining pages of Flask-based backends independently from the actual backend infrastructure.\n \nWhen a web app is spread across many independent Flask blueprints, then this library can be used to add\n\n- navigation entries\n- page titles \n- resource-based ACL protection\n- page-specific CSS and JS files\n\nwithout having access to a global layout or the Flask app. \n\n\nThe library provides a drop-in werkzeug ``Response`` class that is enriched with additional information that a \nbackend can use to render the final html page.\n  \n## Example\n\nThis is a simple web ui for displaying the current time:\n \n```python\n\"\"\"Clock UI\"\"\"\n\nimport flask\nfrom awesome_clock import clock\nfrom mara_page import acl, navigation, response, bootstrap, _\n\n# The flask blueprint that handles\nblueprint = flask.Blueprint('awesome_clock', __name__, url_prefix='/clock', static_folder='static')\n\n# Defines an ACL resource (needs to be handled by the application)\nacl_resource = acl.AclResource('Clock')\n\n\ndef navigation_entry():\n    \"\"\"Defines a part of the navigation tree (needs to be handled by the application)\"\"\"\n    return navigation.NavigationEntry(\n        label='Awesome clock', icon='clock-o', description='Something that tells the time',\n        children=[\n            navigation.NavigationEntry(\n                label='What time is it now?',\n                uri_fn=lambda: flask.url_for('awesome_clock.clock_page', when='now'),\n                icon='question-circle', description='Should be able to display the current time'),\n\n            navigation.NavigationEntry(\n                label='And now?', icon='refresh', description='For the impatient',\n                uri_fn=lambda: flask.url_for('awesome_clock.clock_page', when='and-now'))\n        ])\n\n\n@blueprint.route('/<string:when>')\n@acl.require_permission(acl_resource)  # Requires permission to the `'Clock'` resource\ndef clock_page(when: str):\n    \"\"\"Defines the `/clock` page\"\"\"\n    return response.Response(\n        # The actual page content (can be also a call to `flask.render_template`\n        # or anything else that produces a string)\n        html=bootstrap.card(header_left=_.h1['What time is it now?'],\n                            body=[_.p['The current time is ', str(clock.what_time_is_it_now())],\n                                  _.img(src=flask.url_for('awesome_clock.static', filename='cuckoo-clock.jpg'),\n                                        style='max-width:100%')]),\n        # The page title\n        title='Awesome clock',\n\n        # Action buttons\n        action_buttons=[\n            response.ActionButton('javascript:location.reload()', 'Refresh', 'Refresh clock', 'refresh'),\n            response.ActionButton('javascript:location.reload()', 'Update', 'Refresh clock', 'clock-o')\n        ]\n    )\n```\n\nIt is up to the actual Flask app to define how to render such a response and what to do with the ACL resources and navigation entries. \nThe [mara app](https://github.com/mara/mara-app) will render the response like this:\n\n![Example backend](https://github.com/mara/mara-page/raw/master/docs/awesome-clock.png)", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/mara/mara-page", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "mara-page", "package_url": "https://pypi.org/project/mara-page/", "platform": "", "project_url": "https://pypi.org/project/mara-page/", "project_urls": {"Homepage": "https://github.com/mara/mara-page"}, "release_url": "https://pypi.org/project/mara-page/1.5.1/", "requires_dist": null, "requires_python": ">=3.6", "summary": "Minimal API for defining pages of Flask-based backends independently from the actual backend infrastructure", "version": "1.5.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Mara page</h1>\n<p><a href=\"https://travis-ci.org/mara/mara-page\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0929bc2f959fd048e81e9ab7af281b43a900350d/68747470733a2f2f7472617669732d63692e6f72672f6d6172612f6d6172612d706167652e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://github.com/mara/mara-page/blob/master/LICENSE\" rel=\"nofollow\"><img alt=\"PyPI - License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4803f75ab5eb6981948021ce77767d9f46ae80d1/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f6d6172612d706167652e737667\"></a>\n<a href=\"https://badge.fury.io/py/mara-page\" rel=\"nofollow\"><img alt=\"PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5b601a2e932a7349b1dd364fe6158a70fb496bb4/68747470733a2f2f62616467652e667572792e696f2f70792f6d6172612d706167652e737667\"></a>\n<a href=\"https://communityinviter.com/apps/mara-users/public-invite\" rel=\"nofollow\"><img alt=\"Slack Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8c01bf4f74a7c882bcfcd47e4924618eb70cfcd6/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f736c61636b2d6a6f696e5f636861742d77686974652e7376673f6c6f676f3d736c61636b267374796c653d736f6369616c\"></a></p>\n<p>Minimal API for defining pages of Flask-based backends independently from the actual backend infrastructure.</p>\n<p>When a web app is spread across many independent Flask blueprints, then this library can be used to add</p>\n<ul>\n<li>navigation entries</li>\n<li>page titles</li>\n<li>resource-based ACL protection</li>\n<li>page-specific CSS and JS files</li>\n</ul>\n<p>without having access to a global layout or the Flask app.</p>\n<p>The library provides a drop-in werkzeug <code>Response</code> class that is enriched with additional information that a\nbackend can use to render the final html page.</p>\n<h2>Example</h2>\n<p>This is a simple web ui for displaying the current time:</p>\n<pre><span class=\"sd\">\"\"\"Clock UI\"\"\"</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">flask</span>\n<span class=\"kn\">from</span> <span class=\"nn\">awesome_clock</span> <span class=\"kn\">import</span> <span class=\"n\">clock</span>\n<span class=\"kn\">from</span> <span class=\"nn\">mara_page</span> <span class=\"kn\">import</span> <span class=\"n\">acl</span><span class=\"p\">,</span> <span class=\"n\">navigation</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"p\">,</span> <span class=\"n\">bootstrap</span><span class=\"p\">,</span> <span class=\"n\">_</span>\n\n<span class=\"c1\"># The flask blueprint that handles</span>\n<span class=\"n\">blueprint</span> <span class=\"o\">=</span> <span class=\"n\">flask</span><span class=\"o\">.</span><span class=\"n\">Blueprint</span><span class=\"p\">(</span><span class=\"s1\">'awesome_clock'</span><span class=\"p\">,</span> <span class=\"vm\">__name__</span><span class=\"p\">,</span> <span class=\"n\">url_prefix</span><span class=\"o\">=</span><span class=\"s1\">'/clock'</span><span class=\"p\">,</span> <span class=\"n\">static_folder</span><span class=\"o\">=</span><span class=\"s1\">'static'</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Defines an ACL resource (needs to be handled by the application)</span>\n<span class=\"n\">acl_resource</span> <span class=\"o\">=</span> <span class=\"n\">acl</span><span class=\"o\">.</span><span class=\"n\">AclResource</span><span class=\"p\">(</span><span class=\"s1\">'Clock'</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">navigation_entry</span><span class=\"p\">():</span>\n    <span class=\"sd\">\"\"\"Defines a part of the navigation tree (needs to be handled by the application)\"\"\"</span>\n    <span class=\"k\">return</span> <span class=\"n\">navigation</span><span class=\"o\">.</span><span class=\"n\">NavigationEntry</span><span class=\"p\">(</span>\n        <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"s1\">'Awesome clock'</span><span class=\"p\">,</span> <span class=\"n\">icon</span><span class=\"o\">=</span><span class=\"s1\">'clock-o'</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s1\">'Something that tells the time'</span><span class=\"p\">,</span>\n        <span class=\"n\">children</span><span class=\"o\">=</span><span class=\"p\">[</span>\n            <span class=\"n\">navigation</span><span class=\"o\">.</span><span class=\"n\">NavigationEntry</span><span class=\"p\">(</span>\n                <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"s1\">'What time is it now?'</span><span class=\"p\">,</span>\n                <span class=\"n\">uri_fn</span><span class=\"o\">=</span><span class=\"k\">lambda</span><span class=\"p\">:</span> <span class=\"n\">flask</span><span class=\"o\">.</span><span class=\"n\">url_for</span><span class=\"p\">(</span><span class=\"s1\">'awesome_clock.clock_page'</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"o\">=</span><span class=\"s1\">'now'</span><span class=\"p\">),</span>\n                <span class=\"n\">icon</span><span class=\"o\">=</span><span class=\"s1\">'question-circle'</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s1\">'Should be able to display the current time'</span><span class=\"p\">),</span>\n\n            <span class=\"n\">navigation</span><span class=\"o\">.</span><span class=\"n\">NavigationEntry</span><span class=\"p\">(</span>\n                <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"s1\">'And now?'</span><span class=\"p\">,</span> <span class=\"n\">icon</span><span class=\"o\">=</span><span class=\"s1\">'refresh'</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s1\">'For the impatient'</span><span class=\"p\">,</span>\n                <span class=\"n\">uri_fn</span><span class=\"o\">=</span><span class=\"k\">lambda</span><span class=\"p\">:</span> <span class=\"n\">flask</span><span class=\"o\">.</span><span class=\"n\">url_for</span><span class=\"p\">(</span><span class=\"s1\">'awesome_clock.clock_page'</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"o\">=</span><span class=\"s1\">'and-now'</span><span class=\"p\">))</span>\n        <span class=\"p\">])</span>\n\n\n<span class=\"nd\">@blueprint</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/&lt;string:when&gt;'</span><span class=\"p\">)</span>\n<span class=\"nd\">@acl</span><span class=\"o\">.</span><span class=\"n\">require_permission</span><span class=\"p\">(</span><span class=\"n\">acl_resource</span><span class=\"p\">)</span>  <span class=\"c1\"># Requires permission to the `'Clock'` resource</span>\n<span class=\"k\">def</span> <span class=\"nf\">clock_page</span><span class=\"p\">(</span><span class=\"n\">when</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Defines the `/clock` page\"\"\"</span>\n    <span class=\"k\">return</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">Response</span><span class=\"p\">(</span>\n        <span class=\"c1\"># The actual page content (can be also a call to `flask.render_template`</span>\n        <span class=\"c1\"># or anything else that produces a string)</span>\n        <span class=\"n\">html</span><span class=\"o\">=</span><span class=\"n\">bootstrap</span><span class=\"o\">.</span><span class=\"n\">card</span><span class=\"p\">(</span><span class=\"n\">header_left</span><span class=\"o\">=</span><span class=\"n\">_</span><span class=\"o\">.</span><span class=\"n\">h1</span><span class=\"p\">[</span><span class=\"s1\">'What time is it now?'</span><span class=\"p\">],</span>\n                            <span class=\"n\">body</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">_</span><span class=\"o\">.</span><span class=\"n\">p</span><span class=\"p\">[</span><span class=\"s1\">'The current time is '</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">clock</span><span class=\"o\">.</span><span class=\"n\">what_time_is_it_now</span><span class=\"p\">())],</span>\n                                  <span class=\"n\">_</span><span class=\"o\">.</span><span class=\"n\">img</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">=</span><span class=\"n\">flask</span><span class=\"o\">.</span><span class=\"n\">url_for</span><span class=\"p\">(</span><span class=\"s1\">'awesome_clock.static'</span><span class=\"p\">,</span> <span class=\"n\">filename</span><span class=\"o\">=</span><span class=\"s1\">'cuckoo-clock.jpg'</span><span class=\"p\">),</span>\n                                        <span class=\"n\">style</span><span class=\"o\">=</span><span class=\"s1\">'max-width:100%'</span><span class=\"p\">)]),</span>\n        <span class=\"c1\"># The page title</span>\n        <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s1\">'Awesome clock'</span><span class=\"p\">,</span>\n\n        <span class=\"c1\"># Action buttons</span>\n        <span class=\"n\">action_buttons</span><span class=\"o\">=</span><span class=\"p\">[</span>\n            <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">ActionButton</span><span class=\"p\">(</span><span class=\"s1\">'javascript:location.reload()'</span><span class=\"p\">,</span> <span class=\"s1\">'Refresh'</span><span class=\"p\">,</span> <span class=\"s1\">'Refresh clock'</span><span class=\"p\">,</span> <span class=\"s1\">'refresh'</span><span class=\"p\">),</span>\n            <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">ActionButton</span><span class=\"p\">(</span><span class=\"s1\">'javascript:location.reload()'</span><span class=\"p\">,</span> <span class=\"s1\">'Update'</span><span class=\"p\">,</span> <span class=\"s1\">'Refresh clock'</span><span class=\"p\">,</span> <span class=\"s1\">'clock-o'</span><span class=\"p\">)</span>\n        <span class=\"p\">]</span>\n    <span class=\"p\">)</span>\n</pre>\n<p>It is up to the actual Flask app to define how to render such a response and what to do with the ACL resources and navigation entries.\nThe <a href=\"https://github.com/mara/mara-app\" rel=\"nofollow\">mara app</a> will render the response like this:</p>\n<p><img alt=\"Example backend\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/48ab97f2a679a2efcb98d047caca16f1ffc1ad27/68747470733a2f2f6769746875622e636f6d2f6d6172612f6d6172612d706167652f7261772f6d61737465722f646f63732f617765736f6d652d636c6f636b2e706e67\"></p>\n\n          </div>"}, "last_serial": 5490173, "releases": {"1.4.1": [{"comment_text": "", "digests": {"md5": "b5779bec9a158d91e2d0ea3f9bca0665", "sha256": "57c5d62092701c1c41c6437d5fcff19532b230be7a11dcfd887f0a7fc4613b05"}, "downloads": -1, "filename": "mara-page-1.4.1.tar.gz", "has_sig": false, "md5_digest": "b5779bec9a158d91e2d0ea3f9bca0665", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 7598, "upload_time": "2019-07-04T14:28:02", "upload_time_iso_8601": "2019-07-04T14:28:02.319906Z", "url": "https://files.pythonhosted.org/packages/cf/14/60bd7f408fdaf1dcaea2c14f3ef003a1b6755427a6cd1175259a2da7eb5a/mara-page-1.4.1.tar.gz", "yanked": false}], "1.5.0": [{"comment_text": "", "digests": {"md5": "91d702e2df8dc853dd9cc63499d3954c", "sha256": "26209e0923053e465a0714909e50bd2a7f03ac065c1f4009303f85ee8e2c30d5"}, "downloads": -1, "filename": "mara-page-1.5.0.tar.gz", "has_sig": false, "md5_digest": "91d702e2df8dc853dd9cc63499d3954c", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 7849, "upload_time": "2019-07-04T19:57:45", "upload_time_iso_8601": "2019-07-04T19:57:45.297062Z", "url": "https://files.pythonhosted.org/packages/02/c7/f96f3172be25ed4d578de73d6d8561a475a162579052b2e3c574831473b3/mara-page-1.5.0.tar.gz", "yanked": false}], "1.5.1": [{"comment_text": "", "digests": {"md5": "b73c0198b71a91433123877ee3044ec3", "sha256": "6e6c1d20e2652a0e378d27bd7f5382f3a97112f6ed05df8fe06490f33bca71a0"}, "downloads": -1, "filename": "mara-page-1.5.1.tar.gz", "has_sig": false, "md5_digest": "b73c0198b71a91433123877ee3044ec3", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 8290, "upload_time": "2019-07-05T08:14:38", "upload_time_iso_8601": "2019-07-05T08:14:38.152273Z", "url": "https://files.pythonhosted.org/packages/42/c6/1dfed6066d91480617e22fc74a499af09c0702d05b2b46754503a43c88e0/mara-page-1.5.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "b73c0198b71a91433123877ee3044ec3", "sha256": "6e6c1d20e2652a0e378d27bd7f5382f3a97112f6ed05df8fe06490f33bca71a0"}, "downloads": -1, "filename": "mara-page-1.5.1.tar.gz", "has_sig": false, "md5_digest": "b73c0198b71a91433123877ee3044ec3", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 8290, "upload_time": "2019-07-05T08:14:38", "upload_time_iso_8601": "2019-07-05T08:14:38.152273Z", "url": "https://files.pythonhosted.org/packages/42/c6/1dfed6066d91480617e22fc74a499af09c0702d05b2b46754503a43c88e0/mara-page-1.5.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:57:51 2020"}