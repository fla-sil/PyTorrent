{"info": {"author": "gloo", "author_email": "gloo.luo@foxmail.com", "bugtrack_url": null, "classifiers": [], "description": "\u81f4\u529b\u4e8erestful\u98ce\u683capi\u5f00\u53d1\u7684\u8f7b\u91cfweb\u6846\u67b6glooweb\n\n#### \u4e00\u3001\u5f00\u59cb\n\n\u5b89\u88c5\n\n```shell\npip install glooweb\n```\n\n\u7b80\u5355\u4f7f\u7528\n\n```python\nfrom glooweb import Gloo\uff0c Response\n\n\n# \u5b9e\u4f8b\u5316\u4e00\u4e2aapp\u5bf9\u8c61\napp = Gloo()\n\n# \u521b\u5efa\u4e00\u4e2a\u8def\u7531\u5bf9\u8c61,\u9700\u8981\u4f20\u5165\u4e00\u4e2a\u8def\u7531\u524d\u7f00\u53c2\u6570\napi = Gloo.Router(\"/api\")\n# \u5c06\u8def\u7531\u6ce8\u518c\u8fdb\u5e94\u7528\napp.register(api)\n\n\n# \u5b9a\u4e49\u89c6\u56fe\u51fd\u6570\n@api.get(\"/index\")  # \u5f53\u8def\u5f84\u4e3a/api/index, \u5e76\u4e14method\u4e3aget\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\u51fd\u6570\ndef index(request):  # \u89c6\u56fe\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u4e0a\u4e0b\u6587ctx, request\u8bf7\u6c42\u5bf9\u8c61\n    return Response(\"<h1>index page</h1>\")  # \u8fd4\u56de\u4e00\u4e2aResponse\u5bf9\u8c61\uff0c\u4e5f\u53ef\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5f53\u7136\u8fd9\u91cc\u4e0d\u5efa\u8bae\u60a8\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5f53\u4f60\u4f7f\u7528\u54cd\u5e94\u62e6\u622a\u5668\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u5f02\u5e38\u60c5\u51b5\u3002\n\n\nif __name__ == '__main__':\n    app.runserver()  # \u9ed8\u8ba4\u4ee5127.0.0.1:9999\u8fd0\u884c\n```\n\n\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.0.1:9999/api/index\n\n![glooweb01](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191124003939TIM%E5%9B%BE%E7%89%8720191124082009.png)\n\n#### \u4e8c\u3001\u89c6\u56fe\n\n\u57fa\u672c\u89c6\u56fe\n\n```python\napp = Gloo()\napi = app.Router(\"/api\")\napp.register(api)\n\n@api.get(\"/index\")\ndef index(request):  # glooweb\u89c6\u56fe\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u53c2\u6570request\n    return Response(\"<h1>index page</h1>\")\n```\n\n\u8fd4\u56dejson\n\n```python\nfrom glooweb import Gloo, jsonify, Response\n\n\napp = Gloo()\napi = app.Router(\"/api\")\napp.register(api)\n\n\n@api.get(\"/index\")\ndef index(request):\n    return jsonify(errno=0, errmsg=\"SUCCESSFUL\")  # \u4f7f\u7528jsonify\u65b9\u6cd5\u8fd4\u56dejson\u683c\u5f0f\u7684\u6570\u636e\n```\n\n\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.0.1:9999/api/index\n\n![glooweb02](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191124003946TIM%E5%9B%BE%E7%89%8720191124082002.png)\n\n\u8fd4\u56de\u5176\u5b83\u72b6\u6001\u7801\u7684\u89c6\u56fe\n\n```python\nfrom glooweb import Gloo, jsonify, Response\n\n\napp = Gloo()\napi = app.Router(\"/api\")\napp.register(api)\n\n\n@api.get(\"/index\")\ndef index(request):\n    content = \"<h1 style='color: red'>404 Not Fount</h1>\"\n    return Response(content, \"404 NOT FOUND\", content_type=\"text/html\")  # \u53c2\u6570status\u63a7\u5236\u54cd\u5e94\u7684\u72b6\u6001\u7801\u4fe1\u606f\uff0c content_type\u63a7\u5236\u54cd\u5e94\u7684mime\u7c7b\u578b\n```\n\n\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.0.1:9999/api/index\n\n![glooweb03](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191124004000TIM%E5%9B%BE%E7%89%8720191124081957.png)\n\n\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\n\n```python\nfrom glooweb import Gloo, jsonify, Response\n\n\napp = Gloo()\napi = app.Router(\"/api\")\napp.register(api)\n\n\n@api.get(\"/index\")\ndef index(request):\n    id_ = request.GET.get(\"id\", None)\n    name = request.GET.get(\"name\", None)\n    email = request.GET.get(\"email\", None)\n\n    data = dict(id=id_, name=name, email=email)\n\n    return jsonify(errno=0, data=data)\n```\n\n\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.0.1:9999/api/index?id=100&name=gloo&email=***\n\n![glooweb04](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191124004011TIM%E5%9B%BE%E7%89%8720191124081953.png)\n\n\u4e3a\u4e86\u66f4\u597d\u652f\u6301restful\u98ce\u683c\u7684\u63a5\u53e3\u5f00\u53d1\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528post\u7b49\u5176\u5b83method\u8bf7\u6c42\n```python\nfrom glooweb import Gloo, jsonify, Response\n\n\napp = Gloo()\napi = app.Router(\"/api\")\napp.register(api)\n\n\n@api.post(\"/index\")  # post\u8bf7\u6c42\ndef index(request):\n\tid_ = request.POST.get(\"id\", None)\n    name = request.POST.get(\"name\", None)\n    email = request.POST.get(\"email\", None)\n\n    data = dict(id=id_, name=name, email=email)\n    \n    return jsonify(errno=0, data=data)\n```\n\n\u4f7f\u7528postman\u6d4b\u8bd5post\u8bf7\u6c42\n\n![glooweb05](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191124004023TIM%E5%9B%BE%E7%89%8720191124081947.png)\n\nglooweb\u8fd8\u652f\u6301put, delete, head\u8bf7\u6c42\u65b9\u6cd5\uff0c\u4f7f\u7528\u65b9\u6cd5\u7c7b\u4f3c\n\n\u7c7b\u89c6\u56fe\uff0cglooweb 0.1.7\u7248\u672c\u65b0\u589e\u7c7b\u89c6\u56fe\u529f\u80fd\n```python\nfrom glooweb import Gloo, Response, jsonify\nfrom glooweb import View\nimport simplejson\n\n\napp = Gloo()\napi = Gloo.Router('/api')\napp.register(api)\n\n\nclass Index(View):  # \u7c7b\u89c6\u56fe\u9700\u8981\u7ee7\u627f\u81eaView\u7c7b\n    api = api  # \u9700\u4f20\u5165\u4e00\u4e2aapi\u53c2\u6570\uff0c\u4e14api\u4e3aGloo.Router\u5bf9\u8c61\n    route_name = \"\"  # route_name\u8def\u7531\u5730\u5740, \u5f53route_name\u672a\u5b9a\u4e49\u6216\u4e3afalse\u65f6\uff0c\u8def\u7531\u5730\u5740\u4e3a\u5f53\u524d\u7c7b\u540d\u5c0f\u5199\n\n    def get(self, request):  # \u5f53\u8def\u7531\u4e3aroute_name\u4e14method\u4e3aGET\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\n        return Response(\"Index GET\")\n\n    def post(self, request):  # \u5f53\u8def\u7531\u4e3aroute_name\u4e14method\u4e3aPOST\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\n        print(self.route_name)\n        payload = simplejson.loads(request.body)\n        return jsonify(data=payload)\n\n    def put(self, request):  # \u5f53\u8def\u7531\u4e3aroute_name\u4e14method\u4e3aPUT\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\n        return Response(\"Index PUT\")\n\n    def delete(self, request):  # \u5f53\u8def\u7531\u4e3aroute_name\u4e14method\u4e3aDELETE\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\n        return Response(\"Index DELETE\")\n\n\nif __name__ == '__main__':\n    app.runserver()\n```\n\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.01/api/index\n![glooweb00](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191128122119TIM%E5%9B%BE%E7%89%8720191128202037.png)\n\u4f7f\u7528postman\u6d4b\u8bd5post\u8bf7\u6c42\n![glooweb00](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191128122226TIM%E5%9B%BE%E7%89%8720191128202048.png)\n\u4f7f\u7528postman\u6d4b\u8bd5put\u8bf7\u6c42\n![glooweb00](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191128122856TIM%E5%9B%BE%E7%89%8720191128202839.png)\n\u4f7f\u7528postman\u6d4b\u8bd5delete\u8bf7\u6c42\n![glooweb00](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191128122329TIM%E5%9B%BE%E7%89%8720191128202053.png)\n\n#### \u4e09\u3001\u8def\u7531\n\n\u63d0\u53d6URL\u53c2\u6570\n\n\u9700\u6c42 \n\nurl\u4e3a/product9999\u9700\u8981\u5c06\u4ea7\u54c1ID\u63d0\u53d6\u51fa\u6765\n\n```python\n# \u5b9a\u4e49\u89c6\u56fe\u51fd\u6570\n@api.get(\"/product{id:int}\")  # {id:int}\u5339\u914d\u6574\u5f62\u5b57\u7b26\u4e32\ndef product(request):\n    print(request.vars.id)  # \u8bbf\u95eeurl\u4e2d\u7684id\u7684\u5185\u5bb9\n    return f\"<h1>product {request.vars.id}</h1>\"\n```\n\nint\u5339\u914d\u6574\u5f62\n\nword\u5339\u914d\u4e00\u4e2a\u5355\u8bcd\n\nstr\u5339\u914d\u4e00\u4e2a\u5b57\u7b26\u4e32\n\nfloat\u5339\u914d\u6d6e\u70b9\u578b\n\nany\u5339\u914d\u4efb\u610f\u5b57\u7b26\n\n\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.01/api/product9999\n\n![glooweb06](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191124010341TIM%E5%9B%BE%E7%89%8720191124090208.png)\n\n#### \u56db\u3001\u62e6\u622a\u5668\n\n\u8def\u7531\u62e6\u622a\u5668\n\n```python\n# \u5b9a\u4e49\u89c6\u56fe\u51fd\u6570\n@api.get(\"/product/{id:int}\")  # \u5f53\u8def\u5f84\u4e3a/api/index, \u5e76\u4e14method\u4e3aget\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\u51fd\u6570\ndef product(request):  # \u89c6\u56fe\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u4e0a\u4e0b\u6587ctx, request\u8bf7\u6c42\u5bf9\u8c61\n    print(\"\u89c6\u56fe\u51fd\u6570\")\n    return f\"<h1>product {request.vars.id}</h1>\"\n\n\n@api.reg_pre_interceptor\ndef pre_product(request):\n    print(\"\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u524d\")\n    return request\n\n\n@api.reg_post_interceptor\ndef post_product(ctx, request, response):\n    print(\"\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u540e\")\n    return response\n```\n\n\u8fd0\u884c\u7ed3\u679c\n\n```shell\n\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u524d\n\u89c6\u56fe\u51fd\u6570\n\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u540e\n127.0.0.1 - - [15/Oct/2019 18:04:15] \"GET /api/product/123 HTTP/1.1\" 200 20\n```\n\n\u8def\u7531\u62e6\u622a\u5668\u53ea\u5bf9\u5f53\u524d\u8def\u7531\u6709\u6548\n\n\u5168\u5c40\u62e6\u622a\u5668\n\n```python\n# \u5b9a\u4e49\u89c6\u56fe\u51fd\u6570\n@api.get(\"/product/{id:int}\")  # \u5f53\u8def\u5f84\u4e3a/api/index, \u5e76\u4e14method\u4e3aget\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\u51fd\u6570\ndef product(request):  # \u89c6\u56fe\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u4e0a\u4e0b\u6587ctx, request\u8bf7\u6c42\u5bf9\u8c61\n    print(\"\u89c6\u56fe\u51fd\u6570\")\n    return f\"<h1>product {request.vars.id}</h1>\"\n\n\n@api.reg_pre_interceptor\ndef pre_product(request):\n    print(\"\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u524d\")\n    return request\n\n\n@api.reg_post_interceptor\ndef post_product(request, response):\n    print(\"\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u540e\")\n    return response\n\n\n@Gloo.reg_pre_interceptor\ndef pre(request):\n    print(\"\u5168\u5c40\u54cd\u5e94\u524d\u89c6\u56fe\")\n    return request\n\n\n@Gloo.reg_post_interceptor\ndef post(request, response):\n    print(\"\u5168\u5c40\u54cd\u5e94\u540e\u89c6\u56fe\")\n    return response\n```\n\n\u8fd0\u884c\u7ed3\u679c\n\n\u62e6\u622a\u5668\u53ca\u89c6\u56fe\u51fd\u6570\u6267\u884c\u6d41\u7a0b\n\n```shell\n\u5168\u5c40\u54cd\u5e94\u524d\u89c6\u56fe\n\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u524d\n\u89c6\u56fe\u51fd\u6570\n\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u540e\n\u5168\u5c40\u54cd\u5e94\u540e\u89c6\u56fe\n127.0.0.1 - - [15/Oct/2019 18:55:21] \"GET /api/product/123 HTTP/1.1\" 200 20\n```\n\n#### \u4e94\u3001\u4e0a\u4e0b\u6587\n\n\u4f7f\u7528\u4e0a\u4e0b\u4e3a\u7a0b\u5e8f\u6269\u5c55\u7b2c\u4e09\u65b9\u529f\u80fd\n\n```python\nfrom glooweb import Gloo, jsonify, Response\nimport simplejson\n\napp = Gloo()\n\n\n@app.extend(\"load\")  # \u4f7f\u7528app.extend\u88c5\u9970\u5668\u6269\u5c55\u5168\u5c40\u4e0a\u4e0b\u6587\uff0cname\u53c2\u6570\u4e0d\u4f20\u5165\u7684\u8bdd\u9ed8\u8ba4\u4f7f\u7528\u51fd\u6570\u540d\ndef load(bytes_):  # \u4f7f\u7528simplejson\u52a0\u8f7dbytes\u7c7b\u578b\n    return simplejson.loads(bytes_)\n\n\napi = app.Router(\"/api\")\napp.register(api)\n\n\n@api.post(\"/index\")\ndef index(request):\n    data = api.ctx.load(request.body)  # api.ctx\u4f7f\u7528\u8def\u7531\u4e0a\u4e0b\u6587\uff0capi.ctx\u627e\u4e0d\u5230\u65f6\u4f1a\u53bb\u5168\u5c40\u4e0a\u4e0b\u6587\u4e2d\u627e\uff0c\u8def\u7531\u4e0a\u4e0b\u6587\u4f18\u5148\u7ea7\u5927\u4e8e\u5168\u5c40\n    return jsonify(errno=0, data=data)\n\n\nif __name__ == '__main__':\n    app.runserver()\n```\n\n\u4f7f\u7528postman\u6d4b\u8bd5\n\n![glooweb07](https://images.cnblogs.com/cnblogs_com/colden/1598697/o_191124005825TIM%E5%9B%BE%E7%89%8720191124081935.png)\n\n\n\n#### \u516d\u3001\u6a21\u677f\n\nglooweb\u662f\u4e00\u4e2a\u4e13\u6ce8\u4e8eapi\u63a5\u53e3\u5f00\u53d1\u7684\u8f7b\u91cfweb\u6846\u67b6\uff0c\u5df2\u4e0d\u518d\u63d0\u4f9b\u8fc7\u65f6\u7684\u6a21\u677f\u6280\u672f\u3002\u5982\u679c\u60a8\u8981\u4f7f\u7528\u7684\u8bdd\u53ef\u4e3a\u60a8\u7684\u5e94\u7528\u6269\u5c55jijia2\u6a21\u5757\u3002\n\n#### \u4e03\u3001\u6a21\u578b\n\n\u6a21\u578b\u5efa\u8bae\u4f7f\u7528ORM\u6846\u67b6\uff0c[SQLALCHEMY](https://docs.sqlalchemy.org/)\uff0cglooweb\u5bf9\u6b64\u6ca1\u6709\u505a\u66f4\u591a\u5c01\u88c5\u3002\n\n#### \u6700\u540e\n\nGloo\u5728\u4eca\u540e\u7684\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u91cc\u4f1a\u4f7f\u7528\u548c\u7ef4\u62a4\u8fd9\u4e2a\u6846\u67b6\uff0c\u5982\u679c\u60a8\u5728\u4f7f\u7528glooweb\u6846\u67b6\u65f6\u78b0\u5230\u4e86\u95ee\u9898\uff0c\u6216\u8005\u60a8\u6709\u4e00\u4e9b\u597d\u7684\u5efa\u8bae\u3002\u6b22\u8fce\u81f3\u4ef6gloo88@yeah.net", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "api,web", "license": "", "maintainer": "", "maintainer_email": "", "name": "glooweb", "package_url": "https://pypi.org/project/glooweb/", "platform": "", "project_url": "https://pypi.org/project/glooweb/", "project_urls": null, "release_url": "https://pypi.org/project/glooweb/0.1.7/", "requires_dist": null, "requires_python": "", "summary": "Simple web framework based on WSGI protocol", "version": "0.1.7", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>\u81f4\u529b\u4e8erestful\u98ce\u683capi\u5f00\u53d1\u7684\u8f7b\u91cfweb\u6846\u67b6glooweb</p>\n<h4>\u4e00\u3001\u5f00\u59cb</h4>\n<p>\u5b89\u88c5</p>\n<pre>pip install glooweb\n</pre>\n<p>\u7b80\u5355\u4f7f\u7528</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">glooweb</span> <span class=\"kn\">import</span> <span class=\"n\">Gloo</span><span class=\"err\">\uff0c</span> <span class=\"n\">Response</span>\n\n\n<span class=\"c1\"># \u5b9e\u4f8b\u5316\u4e00\u4e2aapp\u5bf9\u8c61</span>\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># \u521b\u5efa\u4e00\u4e2a\u8def\u7531\u5bf9\u8c61,\u9700\u8981\u4f20\u5165\u4e00\u4e2a\u8def\u7531\u524d\u7f00\u53c2\u6570</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"o\">.</span><span class=\"n\">Router</span><span class=\"p\">(</span><span class=\"s2\">\"/api\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># \u5c06\u8def\u7531\u6ce8\u518c\u8fdb\u5e94\u7528</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">api</span><span class=\"p\">)</span>\n\n\n<span class=\"c1\"># \u5b9a\u4e49\u89c6\u56fe\u51fd\u6570</span>\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"/index\"</span><span class=\"p\">)</span>  <span class=\"c1\"># \u5f53\u8def\u5f84\u4e3a/api/index, \u5e76\u4e14method\u4e3aget\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\u51fd\u6570</span>\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>  <span class=\"c1\"># \u89c6\u56fe\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u4e0a\u4e0b\u6587ctx, request\u8bf7\u6c42\u5bf9\u8c61</span>\n    <span class=\"k\">return</span> <span class=\"n\">Response</span><span class=\"p\">(</span><span class=\"s2\">\"&lt;h1&gt;index page&lt;/h1&gt;\"</span><span class=\"p\">)</span>  <span class=\"c1\"># \u8fd4\u56de\u4e00\u4e2aResponse\u5bf9\u8c61\uff0c\u4e5f\u53ef\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5f53\u7136\u8fd9\u91cc\u4e0d\u5efa\u8bae\u60a8\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5f53\u4f60\u4f7f\u7528\u54cd\u5e94\u62e6\u622a\u5668\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u5f02\u5e38\u60c5\u51b5\u3002</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">runserver</span><span class=\"p\">()</span>  <span class=\"c1\"># \u9ed8\u8ba4\u4ee5127.0.0.1:9999\u8fd0\u884c</span>\n</pre>\n<p>\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.0.1:9999/api/index</p>\n<p><img alt=\"glooweb01\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/306e3e8f90ac5c73202f50c8011e4d41caf22751/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323430303339333954494d25453525394225424525453725383925383732303139313132343038323030392e706e67\"></p>\n<h4>\u4e8c\u3001\u89c6\u56fe</h4>\n<p>\u57fa\u672c\u89c6\u56fe</p>\n<pre><span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"p\">()</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">Router</span><span class=\"p\">(</span><span class=\"s2\">\"/api\"</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">api</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"/index\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>  <span class=\"c1\"># glooweb\u89c6\u56fe\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u53c2\u6570request</span>\n    <span class=\"k\">return</span> <span class=\"n\">Response</span><span class=\"p\">(</span><span class=\"s2\">\"&lt;h1&gt;index page&lt;/h1&gt;\"</span><span class=\"p\">)</span>\n</pre>\n<p>\u8fd4\u56dejson</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">glooweb</span> <span class=\"kn\">import</span> <span class=\"n\">Gloo</span><span class=\"p\">,</span> <span class=\"n\">jsonify</span><span class=\"p\">,</span> <span class=\"n\">Response</span>\n\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"p\">()</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">Router</span><span class=\"p\">(</span><span class=\"s2\">\"/api\"</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">api</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"/index\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">jsonify</span><span class=\"p\">(</span><span class=\"n\">errno</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">errmsg</span><span class=\"o\">=</span><span class=\"s2\">\"SUCCESSFUL\"</span><span class=\"p\">)</span>  <span class=\"c1\"># \u4f7f\u7528jsonify\u65b9\u6cd5\u8fd4\u56dejson\u683c\u5f0f\u7684\u6570\u636e</span>\n</pre>\n<p>\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.0.1:9999/api/index</p>\n<p><img alt=\"glooweb02\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a1272818b0493b9f1226350d9005a9118b0d6660/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323430303339343654494d25453525394225424525453725383925383732303139313132343038323030322e706e67\"></p>\n<p>\u8fd4\u56de\u5176\u5b83\u72b6\u6001\u7801\u7684\u89c6\u56fe</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">glooweb</span> <span class=\"kn\">import</span> <span class=\"n\">Gloo</span><span class=\"p\">,</span> <span class=\"n\">jsonify</span><span class=\"p\">,</span> <span class=\"n\">Response</span>\n\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"p\">()</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">Router</span><span class=\"p\">(</span><span class=\"s2\">\"/api\"</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">api</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"/index\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"n\">content</span> <span class=\"o\">=</span> <span class=\"s2\">\"&lt;h1 style='color: red'&gt;404 Not Fount&lt;/h1&gt;\"</span>\n    <span class=\"k\">return</span> <span class=\"n\">Response</span><span class=\"p\">(</span><span class=\"n\">content</span><span class=\"p\">,</span> <span class=\"s2\">\"404 NOT FOUND\"</span><span class=\"p\">,</span> <span class=\"n\">content_type</span><span class=\"o\">=</span><span class=\"s2\">\"text/html\"</span><span class=\"p\">)</span>  <span class=\"c1\"># \u53c2\u6570status\u63a7\u5236\u54cd\u5e94\u7684\u72b6\u6001\u7801\u4fe1\u606f\uff0c content_type\u63a7\u5236\u54cd\u5e94\u7684mime\u7c7b\u578b</span>\n</pre>\n<p>\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.0.1:9999/api/index</p>\n<p><img alt=\"glooweb03\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/de0878a7249843637c8b6266bf7ccfe9b09002cf/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323430303430303054494d25453525394225424525453725383925383732303139313132343038313935372e706e67\"></p>\n<p>\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">glooweb</span> <span class=\"kn\">import</span> <span class=\"n\">Gloo</span><span class=\"p\">,</span> <span class=\"n\">jsonify</span><span class=\"p\">,</span> <span class=\"n\">Response</span>\n\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"p\">()</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">Router</span><span class=\"p\">(</span><span class=\"s2\">\"/api\"</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">api</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"/index\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"n\">id_</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">GET</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"id\"</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">GET</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"name\"</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n    <span class=\"n\">email</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">GET</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"email\"</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"n\">id_</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">email</span><span class=\"o\">=</span><span class=\"n\">email</span><span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">jsonify</span><span class=\"p\">(</span><span class=\"n\">errno</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">data</span><span class=\"p\">)</span>\n</pre>\n<p>\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.0.1:9999/api/index?id=100&amp;name=gloo&amp;email=***</p>\n<p><img alt=\"glooweb04\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7c8d64b09f756d442c483dfea8f04fea31cbb8fa/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323430303430313154494d25453525394225424525453725383925383732303139313132343038313935332e706e67\"></p>\n<p>\u4e3a\u4e86\u66f4\u597d\u652f\u6301restful\u98ce\u683c\u7684\u63a5\u53e3\u5f00\u53d1\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528post\u7b49\u5176\u5b83method\u8bf7\u6c42</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">glooweb</span> <span class=\"kn\">import</span> <span class=\"n\">Gloo</span><span class=\"p\">,</span> <span class=\"n\">jsonify</span><span class=\"p\">,</span> <span class=\"n\">Response</span>\n\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"p\">()</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">Router</span><span class=\"p\">(</span><span class=\"s2\">\"/api\"</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">api</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">post</span><span class=\"p\">(</span><span class=\"s2\">\"/index\"</span><span class=\"p\">)</span>  <span class=\"c1\"># post\u8bf7\u6c42</span>\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n\t<span class=\"n\">id_</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">POST</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"id\"</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">POST</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"name\"</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n    <span class=\"n\">email</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">POST</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"email\"</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"n\">id_</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">email</span><span class=\"o\">=</span><span class=\"n\">email</span><span class=\"p\">)</span>\n    \n    <span class=\"k\">return</span> <span class=\"n\">jsonify</span><span class=\"p\">(</span><span class=\"n\">errno</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">data</span><span class=\"p\">)</span>\n</pre>\n<p>\u4f7f\u7528postman\u6d4b\u8bd5post\u8bf7\u6c42</p>\n<p><img alt=\"glooweb05\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/de3dd60c7bd27cb8c21b9f090781d0130448841e/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323430303430323354494d25453525394225424525453725383925383732303139313132343038313934372e706e67\"></p>\n<p>glooweb\u8fd8\u652f\u6301put, delete, head\u8bf7\u6c42\u65b9\u6cd5\uff0c\u4f7f\u7528\u65b9\u6cd5\u7c7b\u4f3c</p>\n<p>\u7c7b\u89c6\u56fe\uff0cglooweb 0.1.7\u7248\u672c\u65b0\u589e\u7c7b\u89c6\u56fe\u529f\u80fd</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">glooweb</span> <span class=\"kn\">import</span> <span class=\"n\">Gloo</span><span class=\"p\">,</span> <span class=\"n\">Response</span><span class=\"p\">,</span> <span class=\"n\">jsonify</span>\n<span class=\"kn\">from</span> <span class=\"nn\">glooweb</span> <span class=\"kn\">import</span> <span class=\"n\">View</span>\n<span class=\"kn\">import</span> <span class=\"nn\">simplejson</span>\n\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"p\">()</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"o\">.</span><span class=\"n\">Router</span><span class=\"p\">(</span><span class=\"s1\">'/api'</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">api</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Index</span><span class=\"p\">(</span><span class=\"n\">View</span><span class=\"p\">):</span>  <span class=\"c1\"># \u7c7b\u89c6\u56fe\u9700\u8981\u7ee7\u627f\u81eaView\u7c7b</span>\n    <span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">api</span>  <span class=\"c1\"># \u9700\u4f20\u5165\u4e00\u4e2aapi\u53c2\u6570\uff0c\u4e14api\u4e3aGloo.Router\u5bf9\u8c61</span>\n    <span class=\"n\">route_name</span> <span class=\"o\">=</span> <span class=\"s2\">\"\"</span>  <span class=\"c1\"># route_name\u8def\u7531\u5730\u5740, \u5f53route_name\u672a\u5b9a\u4e49\u6216\u4e3afalse\u65f6\uff0c\u8def\u7531\u5730\u5740\u4e3a\u5f53\u524d\u7c7b\u540d\u5c0f\u5199</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>  <span class=\"c1\"># \u5f53\u8def\u7531\u4e3aroute_name\u4e14method\u4e3aGET\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe</span>\n        <span class=\"k\">return</span> <span class=\"n\">Response</span><span class=\"p\">(</span><span class=\"s2\">\"Index GET\"</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">post</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>  <span class=\"c1\"># \u5f53\u8def\u7531\u4e3aroute_name\u4e14method\u4e3aPOST\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">route_name</span><span class=\"p\">)</span>\n        <span class=\"n\">payload</span> <span class=\"o\">=</span> <span class=\"n\">simplejson</span><span class=\"o\">.</span><span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">body</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">jsonify</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">payload</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">put</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>  <span class=\"c1\"># \u5f53\u8def\u7531\u4e3aroute_name\u4e14method\u4e3aPUT\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe</span>\n        <span class=\"k\">return</span> <span class=\"n\">Response</span><span class=\"p\">(</span><span class=\"s2\">\"Index PUT\"</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">delete</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>  <span class=\"c1\"># \u5f53\u8def\u7531\u4e3aroute_name\u4e14method\u4e3aDELETE\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe</span>\n        <span class=\"k\">return</span> <span class=\"n\">Response</span><span class=\"p\">(</span><span class=\"s2\">\"Index DELETE\"</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">runserver</span><span class=\"p\">()</span>\n</pre>\n<p>\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.01/api/index\n<img alt=\"glooweb00\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1115209db8999e7aed9976496ef73a2539974f92/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323831323231313954494d25453525394225424525453725383925383732303139313132383230323033372e706e67\">\n\u4f7f\u7528postman\u6d4b\u8bd5post\u8bf7\u6c42\n<img alt=\"glooweb00\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/907a7743e25d2b051b19269ce7bd82d829ff5ed6/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323831323232323654494d25453525394225424525453725383925383732303139313132383230323034382e706e67\">\n\u4f7f\u7528postman\u6d4b\u8bd5put\u8bf7\u6c42\n<img alt=\"glooweb00\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4327bb9611a46237208bbfafd556591d7f814933/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323831323238353654494d25453525394225424525453725383925383732303139313132383230323833392e706e67\">\n\u4f7f\u7528postman\u6d4b\u8bd5delete\u8bf7\u6c42\n<img alt=\"glooweb00\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0ea2d63b4395cf0c83909d08f90df9d1b6b0491b/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323831323233323954494d25453525394225424525453725383925383732303139313132383230323035332e706e67\"></p>\n<h4>\u4e09\u3001\u8def\u7531</h4>\n<p>\u63d0\u53d6URL\u53c2\u6570</p>\n<p>\u9700\u6c42</p>\n<p>url\u4e3a/product9999\u9700\u8981\u5c06\u4ea7\u54c1ID\u63d0\u53d6\u51fa\u6765</p>\n<pre><span class=\"c1\"># \u5b9a\u4e49\u89c6\u56fe\u51fd\u6570</span>\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"/product{id:int}\"</span><span class=\"p\">)</span>  <span class=\"c1\"># {id:int}\u5339\u914d\u6574\u5f62\u5b57\u7b26\u4e32</span>\n<span class=\"k\">def</span> <span class=\"nf\">product</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">vars</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">)</span>  <span class=\"c1\"># \u8bbf\u95eeurl\u4e2d\u7684id\u7684\u5185\u5bb9</span>\n    <span class=\"k\">return</span> <span class=\"sa\">f</span><span class=\"s2\">\"&lt;h1&gt;product </span><span class=\"si\">{</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">vars</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">&lt;/h1&gt;\"</span>\n</pre>\n<p>int\u5339\u914d\u6574\u5f62</p>\n<p>word\u5339\u914d\u4e00\u4e2a\u5355\u8bcd</p>\n<p>str\u5339\u914d\u4e00\u4e2a\u5b57\u7b26\u4e32</p>\n<p>float\u5339\u914d\u6d6e\u70b9\u578b</p>\n<p>any\u5339\u914d\u4efb\u610f\u5b57\u7b26</p>\n<p>\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.01/api/product9999</p>\n<p><img alt=\"glooweb06\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ea8da4f72d8562165f9616dce802b1bf00708fe4/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323430313033343154494d25453525394225424525453725383925383732303139313132343039303230382e706e67\"></p>\n<h4>\u56db\u3001\u62e6\u622a\u5668</h4>\n<p>\u8def\u7531\u62e6\u622a\u5668</p>\n<pre><span class=\"c1\"># \u5b9a\u4e49\u89c6\u56fe\u51fd\u6570</span>\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"/product/{id:int}\"</span><span class=\"p\">)</span>  <span class=\"c1\"># \u5f53\u8def\u5f84\u4e3a/api/index, \u5e76\u4e14method\u4e3aget\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\u51fd\u6570</span>\n<span class=\"k\">def</span> <span class=\"nf\">product</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>  <span class=\"c1\"># \u89c6\u56fe\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u4e0a\u4e0b\u6587ctx, request\u8bf7\u6c42\u5bf9\u8c61</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"\u89c6\u56fe\u51fd\u6570\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"sa\">f</span><span class=\"s2\">\"&lt;h1&gt;product </span><span class=\"si\">{</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">vars</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">&lt;/h1&gt;\"</span>\n\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">reg_pre_interceptor</span>\n<span class=\"k\">def</span> <span class=\"nf\">pre_product</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u524d\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">request</span>\n\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">reg_post_interceptor</span>\n<span class=\"k\">def</span> <span class=\"nf\">post_product</span><span class=\"p\">(</span><span class=\"n\">ctx</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u540e\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">response</span>\n</pre>\n<p>\u8fd0\u884c\u7ed3\u679c</p>\n<pre>\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u524d\n\u89c6\u56fe\u51fd\u6570\n\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u540e\n<span class=\"m\">127</span>.0.0.1 - - <span class=\"o\">[</span><span class=\"m\">15</span>/Oct/2019 <span class=\"m\">18</span>:04:15<span class=\"o\">]</span> <span class=\"s2\">\"GET /api/product/123 HTTP/1.1\"</span> <span class=\"m\">200</span> <span class=\"m\">20</span>\n</pre>\n<p>\u8def\u7531\u62e6\u622a\u5668\u53ea\u5bf9\u5f53\u524d\u8def\u7531\u6709\u6548</p>\n<p>\u5168\u5c40\u62e6\u622a\u5668</p>\n<pre><span class=\"c1\"># \u5b9a\u4e49\u89c6\u56fe\u51fd\u6570</span>\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"/product/{id:int}\"</span><span class=\"p\">)</span>  <span class=\"c1\"># \u5f53\u8def\u5f84\u4e3a/api/index, \u5e76\u4e14method\u4e3aget\u65f6\u8bbf\u95ee\u8fd9\u4e2a\u89c6\u56fe\u51fd\u6570</span>\n<span class=\"k\">def</span> <span class=\"nf\">product</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>  <span class=\"c1\"># \u89c6\u56fe\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u4e0a\u4e0b\u6587ctx, request\u8bf7\u6c42\u5bf9\u8c61</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"\u89c6\u56fe\u51fd\u6570\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"sa\">f</span><span class=\"s2\">\"&lt;h1&gt;product </span><span class=\"si\">{</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">vars</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">&lt;/h1&gt;\"</span>\n\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">reg_pre_interceptor</span>\n<span class=\"k\">def</span> <span class=\"nf\">pre_product</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u524d\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">request</span>\n\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">reg_post_interceptor</span>\n<span class=\"k\">def</span> <span class=\"nf\">post_product</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u540e\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">response</span>\n\n\n<span class=\"nd\">@Gloo</span><span class=\"o\">.</span><span class=\"n\">reg_pre_interceptor</span>\n<span class=\"k\">def</span> <span class=\"nf\">pre</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"\u5168\u5c40\u54cd\u5e94\u524d\u89c6\u56fe\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">request</span>\n\n\n<span class=\"nd\">@Gloo</span><span class=\"o\">.</span><span class=\"n\">reg_post_interceptor</span>\n<span class=\"k\">def</span> <span class=\"nf\">post</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"\u5168\u5c40\u54cd\u5e94\u540e\u89c6\u56fe\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">response</span>\n</pre>\n<p>\u8fd0\u884c\u7ed3\u679c</p>\n<p>\u62e6\u622a\u5668\u53ca\u89c6\u56fe\u51fd\u6570\u6267\u884c\u6d41\u7a0b</p>\n<pre>\u5168\u5c40\u54cd\u5e94\u524d\u89c6\u56fe\n\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u524d\n\u89c6\u56fe\u51fd\u6570\n\u89c6\u56fe\u51fd\u6570\u54cd\u5e94\u4e4b\u540e\n\u5168\u5c40\u54cd\u5e94\u540e\u89c6\u56fe\n<span class=\"m\">127</span>.0.0.1 - - <span class=\"o\">[</span><span class=\"m\">15</span>/Oct/2019 <span class=\"m\">18</span>:55:21<span class=\"o\">]</span> <span class=\"s2\">\"GET /api/product/123 HTTP/1.1\"</span> <span class=\"m\">200</span> <span class=\"m\">20</span>\n</pre>\n<h4>\u4e94\u3001\u4e0a\u4e0b\u6587</h4>\n<p>\u4f7f\u7528\u4e0a\u4e0b\u4e3a\u7a0b\u5e8f\u6269\u5c55\u7b2c\u4e09\u65b9\u529f\u80fd</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">glooweb</span> <span class=\"kn\">import</span> <span class=\"n\">Gloo</span><span class=\"p\">,</span> <span class=\"n\">jsonify</span><span class=\"p\">,</span> <span class=\"n\">Response</span>\n<span class=\"kn\">import</span> <span class=\"nn\">simplejson</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Gloo</span><span class=\"p\">()</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">extend</span><span class=\"p\">(</span><span class=\"s2\">\"load\"</span><span class=\"p\">)</span>  <span class=\"c1\"># \u4f7f\u7528app.extend\u88c5\u9970\u5668\u6269\u5c55\u5168\u5c40\u4e0a\u4e0b\u6587\uff0cname\u53c2\u6570\u4e0d\u4f20\u5165\u7684\u8bdd\u9ed8\u8ba4\u4f7f\u7528\u51fd\u6570\u540d</span>\n<span class=\"k\">def</span> <span class=\"nf\">load</span><span class=\"p\">(</span><span class=\"n\">bytes_</span><span class=\"p\">):</span>  <span class=\"c1\"># \u4f7f\u7528simplejson\u52a0\u8f7dbytes\u7c7b\u578b</span>\n    <span class=\"k\">return</span> <span class=\"n\">simplejson</span><span class=\"o\">.</span><span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">bytes_</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">Router</span><span class=\"p\">(</span><span class=\"s2\">\"/api\"</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">api</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@api</span><span class=\"o\">.</span><span class=\"n\">post</span><span class=\"p\">(</span><span class=\"s2\">\"/index\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">body</span><span class=\"p\">)</span>  <span class=\"c1\"># api.ctx\u4f7f\u7528\u8def\u7531\u4e0a\u4e0b\u6587\uff0capi.ctx\u627e\u4e0d\u5230\u65f6\u4f1a\u53bb\u5168\u5c40\u4e0a\u4e0b\u6587\u4e2d\u627e\uff0c\u8def\u7531\u4e0a\u4e0b\u6587\u4f18\u5148\u7ea7\u5927\u4e8e\u5168\u5c40</span>\n    <span class=\"k\">return</span> <span class=\"n\">jsonify</span><span class=\"p\">(</span><span class=\"n\">errno</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">data</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">runserver</span><span class=\"p\">()</span>\n</pre>\n<p>\u4f7f\u7528postman\u6d4b\u8bd5</p>\n<p><img alt=\"glooweb07\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/bfe074ef2615a2900edb04b7bd4b43484e8f8715/68747470733a2f2f696d616765732e636e626c6f67732e636f6d2f636e626c6f67735f636f6d2f636f6c64656e2f313539383639372f6f5f31393131323430303538323554494d25453525394225424525453725383925383732303139313132343038313933352e706e67\"></p>\n<h4>\u516d\u3001\u6a21\u677f</h4>\n<p>glooweb\u662f\u4e00\u4e2a\u4e13\u6ce8\u4e8eapi\u63a5\u53e3\u5f00\u53d1\u7684\u8f7b\u91cfweb\u6846\u67b6\uff0c\u5df2\u4e0d\u518d\u63d0\u4f9b\u8fc7\u65f6\u7684\u6a21\u677f\u6280\u672f\u3002\u5982\u679c\u60a8\u8981\u4f7f\u7528\u7684\u8bdd\u53ef\u4e3a\u60a8\u7684\u5e94\u7528\u6269\u5c55jijia2\u6a21\u5757\u3002</p>\n<h4>\u4e03\u3001\u6a21\u578b</h4>\n<p>\u6a21\u578b\u5efa\u8bae\u4f7f\u7528ORM\u6846\u67b6\uff0c<a href=\"https://docs.sqlalchemy.org/\" rel=\"nofollow\">SQLALCHEMY</a>\uff0cglooweb\u5bf9\u6b64\u6ca1\u6709\u505a\u66f4\u591a\u5c01\u88c5\u3002</p>\n<h4>\u6700\u540e</h4>\n<p>Gloo\u5728\u4eca\u540e\u7684\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u91cc\u4f1a\u4f7f\u7528\u548c\u7ef4\u62a4\u8fd9\u4e2a\u6846\u67b6\uff0c\u5982\u679c\u60a8\u5728\u4f7f\u7528glooweb\u6846\u67b6\u65f6\u78b0\u5230\u4e86\u95ee\u9898\uff0c\u6216\u8005\u60a8\u6709\u4e00\u4e9b\u597d\u7684\u5efa\u8bae\u3002\u6b22\u8fce\u81f3\u4ef6<a href=\"mailto:gloo88@yeah.net\">gloo88@yeah.net</a></p>\n\n          </div>"}, "last_serial": 6213983, "releases": {"0.1.1": [{"comment_text": "", "digests": {"md5": "49202224db5268935b161264a3f44027", "sha256": "f4747e6edcc1985696cfa0dba100dbd7ac02cad8a9b681949e3867c6cf30007d"}, "downloads": -1, "filename": "glooweb-0.1.1.tar.gz", "has_sig": false, "md5_digest": "49202224db5268935b161264a3f44027", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3142, "upload_time": "2019-10-12T05:18:38", "upload_time_iso_8601": "2019-10-12T05:18:38.214029Z", "url": "https://files.pythonhosted.org/packages/e8/e4/5bfde94e43487094b35d67a0215d3a245f15814a3a921b3241d02906fb27/glooweb-0.1.1.tar.gz", "yanked": false}], "0.1.3": [{"comment_text": "", "digests": {"md5": "4a3debde47069b6bcc3bf46b6edbd1fb", "sha256": "480479cf0a939852597bf09a86b17f96da573fb4f01dcb253658ce9d8e0d4c5c"}, "downloads": -1, "filename": "glooweb-0.1.3.tar.gz", "has_sig": false, "md5_digest": "4a3debde47069b6bcc3bf46b6edbd1fb", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4272, "upload_time": "2019-10-15T12:23:43", "upload_time_iso_8601": "2019-10-15T12:23:43.148554Z", "url": "https://files.pythonhosted.org/packages/f4/ac/6d5736062d35df4ad4a2f4ee6e1e88b112f0e43d5af7122f4883ad8d7346/glooweb-0.1.3.tar.gz", "yanked": false}], "0.1.5": [{"comment_text": "", "digests": {"md5": "f63aeb549aff6e89df6a4b187aeb64d3", "sha256": "d23d9abbfeacd4a21be83456fb0339126f0a992ce94c48a4319895a8489c06ff"}, "downloads": -1, "filename": "glooweb-0.1.5.tar.gz", "has_sig": false, "md5_digest": "f63aeb549aff6e89df6a4b187aeb64d3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7495, "upload_time": "2019-11-24T02:13:33", "upload_time_iso_8601": "2019-11-24T02:13:33.265526Z", "url": "https://files.pythonhosted.org/packages/14/33/fed4e13e1cd5bf5cf229c7e847c469232b5d6109d9fd567ffab5526bab6c/glooweb-0.1.5.tar.gz", "yanked": false}], "0.1.6": [{"comment_text": "", "digests": {"md5": "adc12bc696c107dc25d5924b0360236f", "sha256": "1761377db026174d7fe4d23c23a2ab3ae387273507734e5580bf5496c0010376"}, "downloads": -1, "filename": "glooweb-0.1.6.tar.gz", "has_sig": false, "md5_digest": "adc12bc696c107dc25d5924b0360236f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7525, "upload_time": "2019-11-25T09:39:25", "upload_time_iso_8601": "2019-11-25T09:39:25.193456Z", "url": "https://files.pythonhosted.org/packages/aa/42/0c5fcbfce838e9f62403ca7a204c60f345044eb7a2e243ee439fa517b900/glooweb-0.1.6.tar.gz", "yanked": false}], "0.1.7": [{"comment_text": "", "digests": {"md5": "c4f0af29ed82aacba952ae11a0bd24f1", "sha256": "782dd158080bd62dc40996d52fb86ea5d50b0e994b9abffe8b81794166b6843e"}, "downloads": -1, "filename": "glooweb-0.1.7.tar.gz", "has_sig": false, "md5_digest": "c4f0af29ed82aacba952ae11a0bd24f1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8357, "upload_time": "2019-11-28T12:33:00", "upload_time_iso_8601": "2019-11-28T12:33:00.190575Z", "url": "https://files.pythonhosted.org/packages/20/88/d450259eb03f3eccd8c780554a3bb6607b61ab666472d25787662c0fcdd9/glooweb-0.1.7.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "c4f0af29ed82aacba952ae11a0bd24f1", "sha256": "782dd158080bd62dc40996d52fb86ea5d50b0e994b9abffe8b81794166b6843e"}, "downloads": -1, "filename": "glooweb-0.1.7.tar.gz", "has_sig": false, "md5_digest": "c4f0af29ed82aacba952ae11a0bd24f1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8357, "upload_time": "2019-11-28T12:33:00", "upload_time_iso_8601": "2019-11-28T12:33:00.190575Z", "url": "https://files.pythonhosted.org/packages/20/88/d450259eb03f3eccd8c780554a3bb6607b61ab666472d25787662c0fcdd9/glooweb-0.1.7.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:56:30 2020"}