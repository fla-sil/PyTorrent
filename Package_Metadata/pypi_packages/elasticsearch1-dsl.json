{"info": {"author": "Honza Kr\u00e1l", "author_email": "honza.kral@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: Apache Software License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.6", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.2", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: Implementation :: CPython", "Programming Language :: Python :: Implementation :: PyPy"], "description": "Elasticsearch DSL\n=================\n\nElasticsearch DSL is a high-level library whose aim is to help with writing and\nrunning queries against Elasticsearch. It is built on top of the official\nlow-level client (``elasticsearch-py``).\n\nIt provides a more convenient and idiomatic way to write and manipulate\nqueries. It stays close to the Elasticsearch JSON DSL, mirroring its\nterminology and structure. It exposes the whole range of the DSL from Python\neither directly using defined classes or a queryset-like expressions.\n\nIt also provides an optional wrapper for working with documents as Python\nobjects: defining mappings, retrieving and saving documents, wrapping the\ndocument data in user-defined classes.\n\nTo use the other Elasticsearch APIs (eg. cluster health) just use the\nunderlying client.\n\nCompatibility\n-------------\n\nThe library is compatible with all Elasticsearch versions since ``1.x`` but you\n**have to use a matching major version**:\n\nFor **Elasticsearch 2.0** and later, use the major version 2 (``2.x.y``) of the\nlibrary.\n\nFor **Elasticsearch 1.0** and later, use the major version 0 (``0.x.y``) of the\nlibrary.\n\n\nThe recommended way to set your requirements in your `setup.py` or\n`requirements.txt` is::\n\n    # Elasticsearch 2.x\n    elasticsearch-dsl>=2.0.0,<3.0.0\n\n    # Elasticsearch 1.x\n    elasticsearch-dsl<2.0.0\n\n\nThe development is happening on ``master`` and ``1.x`` branches, respectively.\n\nSearch Example\n--------------\n\nLet's have a typical search request written directly as a ``dict``:\n\n.. code:: python\n\n    from elasticsearch1 import Elasticsearch\n    client = Elasticsearch()\n\n    response = client.search(\n        index=\"my-index\",\n        body={\n          \"query\": {\n            \"filtered\": {\n              \"query\": {\n                \"bool\": {\n                  \"must\": [{\"match\": {\"title\": \"python\"}}],\n                  \"must_not\": [{\"match\": {\"description\": \"beta\"}}]\n                }\n              },\n              \"filter\": {\"term\": {\"category\": \"search\"}}\n            }\n          },\n          \"aggs\" : {\n            \"per_tag\": {\n              \"terms\": {\"field\": \"tags\"},\n              \"aggs\": {\n                \"max_lines\": {\"max\": {\"field\": \"lines\"}}\n              }\n            }\n          }\n        }\n    )\n\n    for hit in response['hits']['hits']:\n        print(hit['_score'], hit['_source']['title'])\n\n    for tag in response['aggregations']['per_tag']['buckets']:\n        print(tag['key'], tag['max_lines']['value'])\n\n\n\nThe problem with this approach is that it is very verbose, prone to syntax\nmistakes like incorrect nesting, hard to modify (eg. adding another filter) and\ndefinitely not fun to write.\n\nLet's rewrite the example using the Python DSL:\n\n.. code:: python\n\n    from elasticsearch1 import Elasticsearch\n    from elasticsearch1_dsl import Search, Q\n\n    client = Elasticsearch()\n\n    s = Search(using=client, index=\"my-index\") \\\n        .filter(\"term\", category=\"search\") \\\n        .query(\"match\", title=\"python\")   \\\n        .query(~Q(\"match\", description=\"beta\"))\n\n    s.aggs.bucket('per_tag', 'terms', field='tags') \\\n        .metric('max_lines', 'max', field='lines')\n\n    response = s.execute()\n\n    for hit in response:\n        print(hit.meta.score, hit.title)\n\n    for tag in response.aggregations.per_tag.buckets:\n        print(tag.key, tag.max_lines.value)\n\nAs you see, the library took care of:\n\n  * creating appropriate ``Query`` objects by name (eq. \"match\")\n\n  * composing queries into a compound ``bool`` query\n\n  * creating a ``filtered`` query since ``.filter()`` was used\n\n  * providing a convenient access to response data\n\n  * no curly or square brackets everywhere\n\n\nPersistence Example\n-------------------\n\nLet's have a simple Python class representing an article in a blogging system:\n\n.. code:: python\n\n    from datetime import datetime\n    from elasticsearch1_dsl import DocType, String, Date, Integer\n    from elasticsearch1_dsl.connections import connections\n\n    # Define a default Elasticsearch client\n    connections.create_connection(hosts=['localhost'])\n\n    class Article(DocType):\n        title = String(analyzer='snowball', fields={'raw': String(index='not_analyzed')})\n        body = String(analyzer='snowball')\n        tags = String(index='not_analyzed')\n        published_from = Date()\n        lines = Integer()\n\n        class Meta:\n            index = 'blog'\n\n        def save(self, ** kwargs):\n            self.lines = len(self.body.split())\n            return super(Article, self).save(** kwargs)\n\n        def is_published(self):\n            return datetime.now() > self.published_from\n\n    # create the mappings in elasticsearch\n    Article.init()\n\n    # create and save and article\n    article = Article(meta={'id': 42}, title='Hello world!', tags=['test'])\n    article.body = ''' looong text '''\n    article.published_from = datetime.now()\n    article.save()\n\n    article = Article.get(id=42)\n    print(article.is_published())\n\n    # Display cluster health\n    print(connections.get_connection().cluster.health())\n\n\nIn this example you can see:\n\n  * providing a default connection\n\n  * defining fields with mapping configuration\n\n  * setting index name\n\n  * defining custom methods\n\n  * overriding the built-in ``.save()`` method to hook into the persistence\n    life cycle\n\n  * retrieving and saving the object into Elasticsearch\n\n  * accessing the underlying client for other APIs\n\nYou can see more in the persistence chapter of the documentation.\n\nMigration from ``elasticsearch-py``\n-----------------------------------\n\nYou don't have to port your entire application to get the benefits of the\nPython DSL, you can start gradually by creating a ``Search`` object from your\nexisting ``dict``, modifying it using the API and serializing it back to a\n``dict``:\n\n.. code:: python\n\n    body = {...} # insert complicated query here\n\n    # Convert to Search object\n    s = Search.from_dict(body)\n\n    # Add some filters, aggregations, queries, ...\n    s.filter(\"term\", tags=\"python\")\n\n    # Convert back to dict to plug back into existing code\n    body = s.to_dict()\n\nDocumentation\n-------------\n\nDocumentation is available at https://elasticsearch-dsl.readthedocs.org.\n\nLicense\n-------\n\nCopyright 2013 Elasticsearch\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/elasticsearch/elasticsearch-dsl-py", "keywords": null, "license": "Apache License, Version 2.0", "maintainer": null, "maintainer_email": null, "name": "elasticsearch1-dsl", "package_url": "https://pypi.org/project/elasticsearch1-dsl/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/elasticsearch1-dsl/", "project_urls": {"Download": "UNKNOWN", "Homepage": "https://github.com/elasticsearch/elasticsearch-dsl-py"}, "release_url": "https://pypi.org/project/elasticsearch1-dsl/0.0.12/", "requires_dist": null, "requires_python": null, "summary": "Python client for Elasticsearch1", "version": "0.0.12", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>Elasticsearch DSL is a high-level library whose aim is to help with writing and\nrunning queries against Elasticsearch. It is built on top of the official\nlow-level client (<tt><span class=\"pre\">elasticsearch-py</span></tt>).</p>\n<p>It provides a more convenient and idiomatic way to write and manipulate\nqueries. It stays close to the Elasticsearch JSON DSL, mirroring its\nterminology and structure. It exposes the whole range of the DSL from Python\neither directly using defined classes or a queryset-like expressions.</p>\n<p>It also provides an optional wrapper for working with documents as Python\nobjects: defining mappings, retrieving and saving documents, wrapping the\ndocument data in user-defined classes.</p>\n<p>To use the other Elasticsearch APIs (eg. cluster health) just use the\nunderlying client.</p>\n<div id=\"compatibility\">\n<h2>Compatibility</h2>\n<p>The library is compatible with all Elasticsearch versions since <tt>1.x</tt> but you\n<strong>have to use a matching major version</strong>:</p>\n<p>For <strong>Elasticsearch 2.0</strong> and later, use the major version 2 (<tt>2.x.y</tt>) of the\nlibrary.</p>\n<p>For <strong>Elasticsearch 1.0</strong> and later, use the major version 0 (<tt>0.x.y</tt>) of the\nlibrary.</p>\n<p>The recommended way to set your requirements in your <cite>setup.py</cite> or\n<cite>requirements.txt</cite> is:</p>\n<pre># Elasticsearch 2.x\nelasticsearch-dsl&gt;=2.0.0,&lt;3.0.0\n\n# Elasticsearch 1.x\nelasticsearch-dsl&lt;2.0.0\n</pre>\n<p>The development is happening on <tt>master</tt> and <tt>1.x</tt> branches, respectively.</p>\n</div>\n<div id=\"search-example\">\n<h2>Search Example</h2>\n<p>Let\u2019s have a typical search request written directly as a <tt>dict</tt>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">elasticsearch1</span> <span class=\"kn\">import</span> <span class=\"n\">Elasticsearch</span>\n<span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">Elasticsearch</span><span class=\"p\">()</span>\n\n<span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span>\n    <span class=\"n\">index</span><span class=\"o\">=</span><span class=\"s2\">\"my-index\"</span><span class=\"p\">,</span>\n    <span class=\"n\">body</span><span class=\"o\">=</span><span class=\"p\">{</span>\n      <span class=\"s2\">\"query\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"filtered\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"s2\">\"query\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s2\">\"bool\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"s2\">\"must\"</span><span class=\"p\">:</span> <span class=\"p\">[{</span><span class=\"s2\">\"match\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"title\"</span><span class=\"p\">:</span> <span class=\"s2\">\"python\"</span><span class=\"p\">}}],</span>\n              <span class=\"s2\">\"must_not\"</span><span class=\"p\">:</span> <span class=\"p\">[{</span><span class=\"s2\">\"match\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"description\"</span><span class=\"p\">:</span> <span class=\"s2\">\"beta\"</span><span class=\"p\">}}]</span>\n            <span class=\"p\">}</span>\n          <span class=\"p\">},</span>\n          <span class=\"s2\">\"filter\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"term\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"category\"</span><span class=\"p\">:</span> <span class=\"s2\">\"search\"</span><span class=\"p\">}}</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">},</span>\n      <span class=\"s2\">\"aggs\"</span> <span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"per_tag\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"s2\">\"terms\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"field\"</span><span class=\"p\">:</span> <span class=\"s2\">\"tags\"</span><span class=\"p\">},</span>\n          <span class=\"s2\">\"aggs\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s2\">\"max_lines\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"max\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"field\"</span><span class=\"p\">:</span> <span class=\"s2\">\"lines\"</span><span class=\"p\">}}</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">)</span>\n\n<span class=\"k\">for</span> <span class=\"n\">hit</span> <span class=\"ow\">in</span> <span class=\"n\">response</span><span class=\"p\">[</span><span class=\"s1\">'hits'</span><span class=\"p\">][</span><span class=\"s1\">'hits'</span><span class=\"p\">]:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">hit</span><span class=\"p\">[</span><span class=\"s1\">'_score'</span><span class=\"p\">],</span> <span class=\"n\">hit</span><span class=\"p\">[</span><span class=\"s1\">'_source'</span><span class=\"p\">][</span><span class=\"s1\">'title'</span><span class=\"p\">])</span>\n\n<span class=\"k\">for</span> <span class=\"n\">tag</span> <span class=\"ow\">in</span> <span class=\"n\">response</span><span class=\"p\">[</span><span class=\"s1\">'aggregations'</span><span class=\"p\">][</span><span class=\"s1\">'per_tag'</span><span class=\"p\">][</span><span class=\"s1\">'buckets'</span><span class=\"p\">]:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">tag</span><span class=\"p\">[</span><span class=\"s1\">'key'</span><span class=\"p\">],</span> <span class=\"n\">tag</span><span class=\"p\">[</span><span class=\"s1\">'max_lines'</span><span class=\"p\">][</span><span class=\"s1\">'value'</span><span class=\"p\">])</span>\n</pre>\n<p>The problem with this approach is that it is very verbose, prone to syntax\nmistakes like incorrect nesting, hard to modify (eg. adding another filter) and\ndefinitely not fun to write.</p>\n<p>Let\u2019s rewrite the example using the Python DSL:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">elasticsearch1</span> <span class=\"kn\">import</span> <span class=\"n\">Elasticsearch</span>\n<span class=\"kn\">from</span> <span class=\"nn\">elasticsearch1_dsl</span> <span class=\"kn\">import</span> <span class=\"n\">Search</span><span class=\"p\">,</span> <span class=\"n\">Q</span>\n\n<span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">Elasticsearch</span><span class=\"p\">()</span>\n\n<span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">Search</span><span class=\"p\">(</span><span class=\"n\">using</span><span class=\"o\">=</span><span class=\"n\">client</span><span class=\"p\">,</span> <span class=\"n\">index</span><span class=\"o\">=</span><span class=\"s2\">\"my-index\"</span><span class=\"p\">)</span> \\\n    <span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"s2\">\"term\"</span><span class=\"p\">,</span> <span class=\"n\">category</span><span class=\"o\">=</span><span class=\"s2\">\"search\"</span><span class=\"p\">)</span> \\\n    <span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"s2\">\"match\"</span><span class=\"p\">,</span> <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s2\">\"python\"</span><span class=\"p\">)</span>   \\\n    <span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"o\">~</span><span class=\"n\">Q</span><span class=\"p\">(</span><span class=\"s2\">\"match\"</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s2\">\"beta\"</span><span class=\"p\">))</span>\n\n<span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">aggs</span><span class=\"o\">.</span><span class=\"n\">bucket</span><span class=\"p\">(</span><span class=\"s1\">'per_tag'</span><span class=\"p\">,</span> <span class=\"s1\">'terms'</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"o\">=</span><span class=\"s1\">'tags'</span><span class=\"p\">)</span> \\\n    <span class=\"o\">.</span><span class=\"n\">metric</span><span class=\"p\">(</span><span class=\"s1\">'max_lines'</span><span class=\"p\">,</span> <span class=\"s1\">'max'</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"o\">=</span><span class=\"s1\">'lines'</span><span class=\"p\">)</span>\n\n<span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">()</span>\n\n<span class=\"k\">for</span> <span class=\"n\">hit</span> <span class=\"ow\">in</span> <span class=\"n\">response</span><span class=\"p\">:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">hit</span><span class=\"o\">.</span><span class=\"n\">meta</span><span class=\"o\">.</span><span class=\"n\">score</span><span class=\"p\">,</span> <span class=\"n\">hit</span><span class=\"o\">.</span><span class=\"n\">title</span><span class=\"p\">)</span>\n\n<span class=\"k\">for</span> <span class=\"n\">tag</span> <span class=\"ow\">in</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">aggregations</span><span class=\"o\">.</span><span class=\"n\">per_tag</span><span class=\"o\">.</span><span class=\"n\">buckets</span><span class=\"p\">:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">tag</span><span class=\"o\">.</span><span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">tag</span><span class=\"o\">.</span><span class=\"n\">max_lines</span><span class=\"o\">.</span><span class=\"n\">value</span><span class=\"p\">)</span>\n</pre>\n<p>As you see, the library took care of:</p>\n<blockquote>\n<ul>\n<li>creating appropriate <tt>Query</tt> objects by name (eq. \u201cmatch\u201d)</li>\n<li>composing queries into a compound <tt>bool</tt> query</li>\n<li>creating a <tt>filtered</tt> query since <tt>.filter()</tt> was used</li>\n<li>providing a convenient access to response data</li>\n<li>no curly or square brackets everywhere</li>\n</ul>\n</blockquote>\n</div>\n<div id=\"persistence-example\">\n<h2>Persistence Example</h2>\n<p>Let\u2019s have a simple Python class representing an article in a blogging system:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\n<span class=\"kn\">from</span> <span class=\"nn\">elasticsearch1_dsl</span> <span class=\"kn\">import</span> <span class=\"n\">DocType</span><span class=\"p\">,</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">Date</span><span class=\"p\">,</span> <span class=\"n\">Integer</span>\n<span class=\"kn\">from</span> <span class=\"nn\">elasticsearch1_dsl.connections</span> <span class=\"kn\">import</span> <span class=\"n\">connections</span>\n\n<span class=\"c1\"># Define a default Elasticsearch client</span>\n<span class=\"n\">connections</span><span class=\"o\">.</span><span class=\"n\">create_connection</span><span class=\"p\">(</span><span class=\"n\">hosts</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'localhost'</span><span class=\"p\">])</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Article</span><span class=\"p\">(</span><span class=\"n\">DocType</span><span class=\"p\">):</span>\n    <span class=\"n\">title</span> <span class=\"o\">=</span> <span class=\"n\">String</span><span class=\"p\">(</span><span class=\"n\">analyzer</span><span class=\"o\">=</span><span class=\"s1\">'snowball'</span><span class=\"p\">,</span> <span class=\"n\">fields</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'raw'</span><span class=\"p\">:</span> <span class=\"n\">String</span><span class=\"p\">(</span><span class=\"n\">index</span><span class=\"o\">=</span><span class=\"s1\">'not_analyzed'</span><span class=\"p\">)})</span>\n    <span class=\"n\">body</span> <span class=\"o\">=</span> <span class=\"n\">String</span><span class=\"p\">(</span><span class=\"n\">analyzer</span><span class=\"o\">=</span><span class=\"s1\">'snowball'</span><span class=\"p\">)</span>\n    <span class=\"n\">tags</span> <span class=\"o\">=</span> <span class=\"n\">String</span><span class=\"p\">(</span><span class=\"n\">index</span><span class=\"o\">=</span><span class=\"s1\">'not_analyzed'</span><span class=\"p\">)</span>\n    <span class=\"n\">published_from</span> <span class=\"o\">=</span> <span class=\"n\">Date</span><span class=\"p\">()</span>\n    <span class=\"n\">lines</span> <span class=\"o\">=</span> <span class=\"n\">Integer</span><span class=\"p\">()</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">index</span> <span class=\"o\">=</span> <span class=\"s1\">'blog'</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">save</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">**</span> <span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">lines</span> <span class=\"o\">=</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">body</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">())</span>\n        <span class=\"k\">return</span> <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Article</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"o\">**</span> <span class=\"n\">kwargs</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">is_published</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"o\">&gt;</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">published_from</span>\n\n<span class=\"c1\"># create the mappings in elasticsearch</span>\n<span class=\"n\">Article</span><span class=\"o\">.</span><span class=\"n\">init</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># create and save and article</span>\n<span class=\"n\">article</span> <span class=\"o\">=</span> <span class=\"n\">Article</span><span class=\"p\">(</span><span class=\"n\">meta</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'id'</span><span class=\"p\">:</span> <span class=\"mi\">42</span><span class=\"p\">},</span> <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s1\">'Hello world!'</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'test'</span><span class=\"p\">])</span>\n<span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">body</span> <span class=\"o\">=</span> <span class=\"s1\">''' looong text '''</span>\n<span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">published_from</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span>\n<span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n\n<span class=\"n\">article</span> <span class=\"o\">=</span> <span class=\"n\">Article</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"mi\">42</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">is_published</span><span class=\"p\">())</span>\n\n<span class=\"c1\"># Display cluster health</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">connections</span><span class=\"o\">.</span><span class=\"n\">get_connection</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">cluster</span><span class=\"o\">.</span><span class=\"n\">health</span><span class=\"p\">())</span>\n</pre>\n<p>In this example you can see:</p>\n<blockquote>\n<ul>\n<li>providing a default connection</li>\n<li>defining fields with mapping configuration</li>\n<li>setting index name</li>\n<li>defining custom methods</li>\n<li>overriding the built-in <tt>.save()</tt> method to hook into the persistence\nlife cycle</li>\n<li>retrieving and saving the object into Elasticsearch</li>\n<li>accessing the underlying client for other APIs</li>\n</ul>\n</blockquote>\n<p>You can see more in the persistence chapter of the documentation.</p>\n</div>\n<div id=\"migration-from-elasticsearch-py\">\n<h2>Migration from <tt><span class=\"pre\">elasticsearch-py</span></tt></h2>\n<p>You don\u2019t have to port your entire application to get the benefits of the\nPython DSL, you can start gradually by creating a <tt>Search</tt> object from your\nexisting <tt>dict</tt>, modifying it using the API and serializing it back to a\n<tt>dict</tt>:</p>\n<pre><span class=\"n\">body</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"o\">...</span><span class=\"p\">}</span> <span class=\"c1\"># insert complicated query here</span>\n\n<span class=\"c1\"># Convert to Search object</span>\n<span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">Search</span><span class=\"o\">.</span><span class=\"n\">from_dict</span><span class=\"p\">(</span><span class=\"n\">body</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Add some filters, aggregations, queries, ...</span>\n<span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"s2\">\"term\"</span><span class=\"p\">,</span> <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"s2\">\"python\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Convert back to dict to plug back into existing code</span>\n<span class=\"n\">body</span> <span class=\"o\">=</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">to_dict</span><span class=\"p\">()</span>\n</pre>\n</div>\n<div id=\"documentation\">\n<h2>Documentation</h2>\n<p>Documentation is available at <a href=\"https://elasticsearch-dsl.readthedocs.org\" rel=\"nofollow\">https://elasticsearch-dsl.readthedocs.org</a>.</p>\n</div>\n<div id=\"license\">\n<h2>License</h2>\n<p>Copyright 2013 Elasticsearch</p>\n<p>Licensed under the Apache License, Version 2.0 (the \u201cLicense\u201d);\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at</p>\n<blockquote>\n<a href=\"http://www.apache.org/licenses/LICENSE-2.0\" rel=\"nofollow\">http://www.apache.org/licenses/LICENSE-2.0</a></blockquote>\n<p>Unless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \u201cAS IS\u201d BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.</p>\n</div>\n\n          </div>"}, "last_serial": 2254530, "releases": {"0.0.12": [{"comment_text": "", "digests": {"md5": "b7c738ee6465113ab07710da8eabf6a4", "sha256": "58c208c602041baba1c55a123e9d6e7f4b2b9912d417545b433b02e312ba97c1"}, "downloads": -1, "filename": "elasticsearch1_dsl-0.0.12-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "b7c738ee6465113ab07710da8eabf6a4", "packagetype": "bdist_wheel", "python_version": "2.7", "requires_python": null, "size": 39816, "upload_time": "2016-08-01T02:35:35", "upload_time_iso_8601": "2016-08-01T02:35:35.249537Z", "url": "https://files.pythonhosted.org/packages/11/bd/fbf94dc56dc9127f508c1b617351576a9caaff46a460547940c5edaa21e9/elasticsearch1_dsl-0.0.12-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "7c8a2f5342a8eb71386d8d231d877ec3", "sha256": "132e31cebdba58769ec814ebc00d4742f25f17b4bc9cf4815a70a49d86a7e145"}, "downloads": -1, "filename": "elasticsearch1-dsl-0.0.12.tar.gz", "has_sig": false, "md5_digest": "7c8a2f5342a8eb71386d8d231d877ec3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 29408, "upload_time": "2016-08-01T02:35:24", "upload_time_iso_8601": "2016-08-01T02:35:24.960423Z", "url": "https://files.pythonhosted.org/packages/eb/9d/785342775cb10eddc9b8d7457d618a423b4f0b89d8b2b2d1bc27190d71db/elasticsearch1-dsl-0.0.12.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "b7c738ee6465113ab07710da8eabf6a4", "sha256": "58c208c602041baba1c55a123e9d6e7f4b2b9912d417545b433b02e312ba97c1"}, "downloads": -1, "filename": "elasticsearch1_dsl-0.0.12-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "b7c738ee6465113ab07710da8eabf6a4", "packagetype": "bdist_wheel", "python_version": "2.7", "requires_python": null, "size": 39816, "upload_time": "2016-08-01T02:35:35", "upload_time_iso_8601": "2016-08-01T02:35:35.249537Z", "url": "https://files.pythonhosted.org/packages/11/bd/fbf94dc56dc9127f508c1b617351576a9caaff46a460547940c5edaa21e9/elasticsearch1_dsl-0.0.12-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "7c8a2f5342a8eb71386d8d231d877ec3", "sha256": "132e31cebdba58769ec814ebc00d4742f25f17b4bc9cf4815a70a49d86a7e145"}, "downloads": -1, "filename": "elasticsearch1-dsl-0.0.12.tar.gz", "has_sig": false, "md5_digest": "7c8a2f5342a8eb71386d8d231d877ec3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 29408, "upload_time": "2016-08-01T02:35:24", "upload_time_iso_8601": "2016-08-01T02:35:24.960423Z", "url": "https://files.pythonhosted.org/packages/eb/9d/785342775cb10eddc9b8d7457d618a423b4f0b89d8b2b2d1bc27190d71db/elasticsearch1-dsl-0.0.12.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:47:02 2020"}