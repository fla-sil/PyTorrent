{"info": {"author": "Cameron Simpson", "author_email": "cs@cskk.id.au", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2", "Programming Language :: Python :: 3", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "*Latest release 20200318*:\nReplace obsolete O class with a new subclass of SimpleNamespace which issues a warning.\nNew singleton() generic factory function and SingletonMixin mixin class for making singleton classes.\n\nConvenience facilities for objects.\n\nPresents:\n* flavour, for deciding whether an object resembles a mapping or sequence.\n* Some O_* functions for working with objects\n* Proxy, a very simple minded object proxy intended to aid debugging.\n\n## Function `copy(obj, *a, **kw)`\n\nConvenient function to shallow copy an object with simple modifications.\n\nPerforms a shallow copy of `self` using copy.copy.\n\nTreat all positional parameters as attribute names, and\nreplace those attributes with shallow copies of the original\nattribute.\n\nTreat all keyword arguments as (attribute,value) tuples and\nreplace those attributes with the supplied values.\n\n## Function `flavour(obj)`\n\nReturn constants indicating the ``flavour'' of an object:\n* `T_MAP`: DictType, DictionaryType, objects with an __keys__ or keys attribute.\n* `T_SEQ`: TupleType, ListType, objects with an __iter__ attribute.\n* `T_SCALAR`: Anything else.\n\n## Class `O(types.SimpleNamespace)`\n\nThe `O` class is now obsolete, please subclass `types.SimpleNamespace`.\n\n## Function `O_attritems(o)`\n\nGenerator yielding `(attr,value)` for relevant attributes of `o`.\n\n## Function `O_attrs(o)`\n\nYield attribute names from `o` which are pertinent to `O_str`.\n\nNote: this calls `getattr(o,attr)` to inspect it in order to\nprune callables.\n\n## Function `O_merge(o, _conflict=None, _overwrite=False, **kw)`\n\nMerge key:value pairs from a mapping into an object.\n\nIgnore keys that do not start with a letter.\nNew attributes or attributes whose values compare equal are\nmerged in. Unequal values are passed to:\n\n    _conflict(o, attr, old_value, new_value)\n\nto resolve the conflict. If _conflict is omitted or None\nthen the new value overwrites the old if _overwrite is true.\n\n## Function `O_str(o, no_recurse=False, seen=None)`\n\nReturn a `str` representation of the object `o`.\n\nParameters:\n* `o`: the object to describe.\n* `no_recurse`: if true, do not recurse into the object's structure.\n  Default: `False`.\n* `seen`: a set of previously sighted objects\n  to prevent recursion loops.\n\n## Function `obj_as_dict(o, attr_prefix=None, attr_match=None)`\n\nReturn a dictionary with keys mapping to `o` attributes.\n\n## Class `Proxy`\n\nAn extremely simple proxy object\nthat passes all unmatched attribute accesses to the proxied object.\n\nNote that setattr and delattr work directly on the proxy, not the proxied object.\n\n## Function `singleton(registry, key, factory, fargs, fkwargs)`\n\nObtain an object for `key` via `registry` (a mapping of `key`=>`object`.\n\nIf the `key` exists in the registry, return the associated object.\nOtherwise create a new object by calling `factory(*fargs,**fkwargs)`\nand store it as `key` in the `registry`.\n\nThe `registry` may be any mapping of `key`s to objects\nbut might usually be a `weakref.WeakValueMapping`\nto that object references expire as normal.\n\nSee the `SingletonMixin` class for a simple mixin to create\nsingleton classes.\n\n## Class `SingletonMixin`\n\nA mixin turning a subclass into a singleton factory.\n\n*Note*: this should be the *first* superclass of the subclass\nin order to intercept `__new__` and `__init__`.\n\nA subclass should:\n* *not* provide an `__init__` method.\n* provide a `_singleton_init` method in place of the normal `__init__`\n  with the usual signature `(self,*args,**kwargs)`.\n* provide a `_singleton_key(cls,*args,**kwargs)` class method\n  returning a key for the single registry\n  computed from the positional and keyword arguments\n  supplied on instance creation\n  i.e. those which `__init__` would normally receive.\n  This should have the same signature as `_singleton_init`\n  (but using `cls` instead of `self`).\n\nExample:\n\n    class Pool(SingletonMixin):\n\n        def _singleton_init(self, foo, bah=3):\n           ... normal __init__ stuff here ...\n\n        @classmethod\n        def _singleton_key(cls, foo, bah=3):\n            return foo, bah\n\n## Class `TrackedClassMixin`\n\nA mixin to track all instances of a particular class.\n\nThis is aimed at checking the global state of objects of a\nparticular type, particularly states like counters. The\ntracking is attached to the class itself.\n\nThe class to be tracked includes this mixin as a superclass and calls:\n\n    TrackedClassMixin.__init__(class_to_track)\n\nfrom its __init__ method. Note that `class_to_track` is\ntypically the class name itself, not `type(self)` which would\ntrack the specific subclass. At some relevant point one can call:\n\n    self.tcm_dump(class_to_track[, file])\n\n`class_to_track` needs a `tcm_get_state` method to return the\nsalient information, such as this from cs.resources.MultiOpenMixin:\n\n    def tcm_get_state(self):\n        return {'opened': self.opened, 'opens': self._opens}\n\nSee cs.resources.MultiOpenMixin for example use.\n\n\n\n# Release Log\n\n*Release 20200318*:\nReplace obsolete O class with a new subclass of SimpleNamespace which issues a warning.\nNew singleton() generic factory function and SingletonMixin mixin class for making singleton classes.\n\n*Release 20190103*:\nNew mixin class TrackedClassMixin to track all instances of a particular class.\nDocumentation updates.\n\n*Release 20170904*:\nMinor cleanups.\n\n*Release 20160828*:\nUse \"install_requires\" instead of \"requires\" in DISTINFO.\nMinor tweaks.\n\n*Release 20150118*:\nmove long_description into cs/README-obj.rst\n\n*Release 20150110*:\ncleaned out some old junk, readied metadata for PyPI", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://bitbucket.org/cameron_simpson/css/commits/all", "keywords": "python2,python3", "license": "GNU General Public License v3 or later (GPLv3+)", "maintainer": "", "maintainer_email": "", "name": "cs.obj", "package_url": "https://pypi.org/project/cs.obj/", "platform": "", "project_url": "https://pypi.org/project/cs.obj/", "project_urls": {"Homepage": "https://bitbucket.org/cameron_simpson/css/commits/all"}, "release_url": "https://pypi.org/project/cs.obj/20200318/", "requires_dist": null, "requires_python": "", "summary": "Convenience facilities for objects.", "version": "20200318", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><em>Latest release 20200318</em>:\nReplace obsolete O class with a new subclass of SimpleNamespace which issues a warning.\nNew singleton() generic factory function and SingletonMixin mixin class for making singleton classes.</p>\n<p>Convenience facilities for objects.</p>\n<p>Presents:</p>\n<ul>\n<li>flavour, for deciding whether an object resembles a mapping or sequence.</li>\n<li>Some O_* functions for working with objects</li>\n<li>Proxy, a very simple minded object proxy intended to aid debugging.</li>\n</ul>\n<h2>Function <code>copy(obj, *a, **kw)</code></h2>\n<p>Convenient function to shallow copy an object with simple modifications.</p>\n<p>Performs a shallow copy of <code>self</code> using copy.copy.</p>\n<p>Treat all positional parameters as attribute names, and\nreplace those attributes with shallow copies of the original\nattribute.</p>\n<p>Treat all keyword arguments as (attribute,value) tuples and\nreplace those attributes with the supplied values.</p>\n<h2>Function <code>flavour(obj)</code></h2>\n<p>Return constants indicating the ``flavour'' of an object:</p>\n<ul>\n<li><code>T_MAP</code>: DictType, DictionaryType, objects with an <strong>keys</strong> or keys attribute.</li>\n<li><code>T_SEQ</code>: TupleType, ListType, objects with an <strong>iter</strong> attribute.</li>\n<li><code>T_SCALAR</code>: Anything else.</li>\n</ul>\n<h2>Class <code>O(types.SimpleNamespace)</code></h2>\n<p>The <code>O</code> class is now obsolete, please subclass <code>types.SimpleNamespace</code>.</p>\n<h2>Function <code>O_attritems(o)</code></h2>\n<p>Generator yielding <code>(attr,value)</code> for relevant attributes of <code>o</code>.</p>\n<h2>Function <code>O_attrs(o)</code></h2>\n<p>Yield attribute names from <code>o</code> which are pertinent to <code>O_str</code>.</p>\n<p>Note: this calls <code>getattr(o,attr)</code> to inspect it in order to\nprune callables.</p>\n<h2>Function <code>O_merge(o, _conflict=None, _overwrite=False, **kw)</code></h2>\n<p>Merge key:value pairs from a mapping into an object.</p>\n<p>Ignore keys that do not start with a letter.\nNew attributes or attributes whose values compare equal are\nmerged in. Unequal values are passed to:</p>\n<pre><code>_conflict(o, attr, old_value, new_value)\n</code></pre>\n<p>to resolve the conflict. If _conflict is omitted or None\nthen the new value overwrites the old if _overwrite is true.</p>\n<h2>Function <code>O_str(o, no_recurse=False, seen=None)</code></h2>\n<p>Return a <code>str</code> representation of the object <code>o</code>.</p>\n<p>Parameters:</p>\n<ul>\n<li><code>o</code>: the object to describe.</li>\n<li><code>no_recurse</code>: if true, do not recurse into the object's structure.\nDefault: <code>False</code>.</li>\n<li><code>seen</code>: a set of previously sighted objects\nto prevent recursion loops.</li>\n</ul>\n<h2>Function <code>obj_as_dict(o, attr_prefix=None, attr_match=None)</code></h2>\n<p>Return a dictionary with keys mapping to <code>o</code> attributes.</p>\n<h2>Class <code>Proxy</code></h2>\n<p>An extremely simple proxy object\nthat passes all unmatched attribute accesses to the proxied object.</p>\n<p>Note that setattr and delattr work directly on the proxy, not the proxied object.</p>\n<h2>Function <code>singleton(registry, key, factory, fargs, fkwargs)</code></h2>\n<p>Obtain an object for <code>key</code> via <code>registry</code> (a mapping of <code>key</code>=&gt;<code>object</code>.</p>\n<p>If the <code>key</code> exists in the registry, return the associated object.\nOtherwise create a new object by calling <code>factory(*fargs,**fkwargs)</code>\nand store it as <code>key</code> in the <code>registry</code>.</p>\n<p>The <code>registry</code> may be any mapping of <code>key</code>s to objects\nbut might usually be a <code>weakref.WeakValueMapping</code>\nto that object references expire as normal.</p>\n<p>See the <code>SingletonMixin</code> class for a simple mixin to create\nsingleton classes.</p>\n<h2>Class <code>SingletonMixin</code></h2>\n<p>A mixin turning a subclass into a singleton factory.</p>\n<p><em>Note</em>: this should be the <em>first</em> superclass of the subclass\nin order to intercept <code>__new__</code> and <code>__init__</code>.</p>\n<p>A subclass should:</p>\n<ul>\n<li><em>not</em> provide an <code>__init__</code> method.</li>\n<li>provide a <code>_singleton_init</code> method in place of the normal <code>__init__</code>\nwith the usual signature <code>(self,*args,**kwargs)</code>.</li>\n<li>provide a <code>_singleton_key(cls,*args,**kwargs)</code> class method\nreturning a key for the single registry\ncomputed from the positional and keyword arguments\nsupplied on instance creation\ni.e. those which <code>__init__</code> would normally receive.\nThis should have the same signature as <code>_singleton_init</code>\n(but using <code>cls</code> instead of <code>self</code>).</li>\n</ul>\n<p>Example:</p>\n<pre><code>class Pool(SingletonMixin):\n\n    def _singleton_init(self, foo, bah=3):\n       ... normal __init__ stuff here ...\n\n    @classmethod\n    def _singleton_key(cls, foo, bah=3):\n        return foo, bah\n</code></pre>\n<h2>Class <code>TrackedClassMixin</code></h2>\n<p>A mixin to track all instances of a particular class.</p>\n<p>This is aimed at checking the global state of objects of a\nparticular type, particularly states like counters. The\ntracking is attached to the class itself.</p>\n<p>The class to be tracked includes this mixin as a superclass and calls:</p>\n<pre><code>TrackedClassMixin.__init__(class_to_track)\n</code></pre>\n<p>from its <strong>init</strong> method. Note that <code>class_to_track</code> is\ntypically the class name itself, not <code>type(self)</code> which would\ntrack the specific subclass. At some relevant point one can call:</p>\n<pre><code>self.tcm_dump(class_to_track[, file])\n</code></pre>\n<p><code>class_to_track</code> needs a <code>tcm_get_state</code> method to return the\nsalient information, such as this from cs.resources.MultiOpenMixin:</p>\n<pre><code>def tcm_get_state(self):\n    return {'opened': self.opened, 'opens': self._opens}\n</code></pre>\n<p>See cs.resources.MultiOpenMixin for example use.</p>\n<h1>Release Log</h1>\n<p><em>Release 20200318</em>:\nReplace obsolete O class with a new subclass of SimpleNamespace which issues a warning.\nNew singleton() generic factory function and SingletonMixin mixin class for making singleton classes.</p>\n<p><em>Release 20190103</em>:\nNew mixin class TrackedClassMixin to track all instances of a particular class.\nDocumentation updates.</p>\n<p><em>Release 20170904</em>:\nMinor cleanups.</p>\n<p><em>Release 20160828</em>:\nUse \"install_requires\" instead of \"requires\" in DISTINFO.\nMinor tweaks.</p>\n<p><em>Release 20150118</em>:\nmove long_description into cs/README-obj.rst</p>\n<p><em>Release 20150110</em>:\ncleaned out some old junk, readied metadata for PyPI</p>\n\n          </div>"}, "last_serial": 6832140, "releases": {"20150118": [{"comment_text": "", "digests": {"md5": "5fcf6edc654e3186eb25d9cbf484f8de", "sha256": "7eb2b0b73599793e6f5487488f5751d51a803a294a57421b3b75b7fa0b8239af"}, "downloads": -1, "filename": "cs.obj-20150118.tar.gz", "has_sig": false, "md5_digest": "5fcf6edc654e3186eb25d9cbf484f8de", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3525, "upload_time": "2015-01-18T05:54:36", "upload_time_iso_8601": "2015-01-18T05:54:36.344534Z", "url": "https://files.pythonhosted.org/packages/94/6c/effe0ef66e6de15e8856f5ea5b9ec219ef82ef3328c9e38763a821f8f179/cs.obj-20150118.tar.gz", "yanked": false}], "20160828": [{"comment_text": "", "digests": {"md5": "43ff750d4b65de8ed159dc5cf99ed2a2", "sha256": "f06f19f4fbd67e797a3d80415809a75ac67ff46cf22400cbf5d8dbe1feb753d8"}, "downloads": -1, "filename": "cs.obj-20160828.tar.gz", "has_sig": false, "md5_digest": "43ff750d4b65de8ed159dc5cf99ed2a2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3874, "upload_time": "2016-08-28T06:08:33", "upload_time_iso_8601": "2016-08-28T06:08:33.339367Z", "url": "https://files.pythonhosted.org/packages/c8/8f/e038bc99e06f5c1386c858f78fc63e488764800621cf1a5f0bac5a999ed4/cs.obj-20160828.tar.gz", "yanked": false}], "20170904": [{"comment_text": "", "digests": {"md5": "fb9906c4c892556f3addf1f8f92e0764", "sha256": "5b52967030c1f3a1039c9532254575374362bf6027f96ba3c077e2bf08eacb47"}, "downloads": -1, "filename": "cs.obj-20170904.tar.gz", "has_sig": false, "md5_digest": "fb9906c4c892556f3addf1f8f92e0764", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3816, "upload_time": "2017-09-04T00:04:08", "upload_time_iso_8601": "2017-09-04T00:04:08.738710Z", "url": "https://files.pythonhosted.org/packages/3c/af/422bedcb69ed8cc1774d493a01ff688198e550aab144f1421103fd910b80/cs.obj-20170904.tar.gz", "yanked": false}], "20190103": [{"comment_text": "", "digests": {"md5": "cbf05d8b8b124c92515f157a85eceb8f", "sha256": "74949b05412251c73011323827cfe5db966984a64ebca893a7598a35e1ef7717"}, "downloads": -1, "filename": "cs.obj-20190103.tar.gz", "has_sig": false, "md5_digest": "cbf05d8b8b124c92515f157a85eceb8f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5339, "upload_time": "2019-01-02T23:57:23", "upload_time_iso_8601": "2019-01-02T23:57:23.505844Z", "url": "https://files.pythonhosted.org/packages/4a/65/08d04eee0ddea21485868c8551d94ee36b4490f6b3ca658a2dc51ce80628/cs.obj-20190103.tar.gz", "yanked": false}], "20200318": [{"comment_text": "", "digests": {"md5": "d6b0228fdb88d4717e8a3bc26a483dc0", "sha256": "e5adea844df6636ed9567002fb774f7e223f6f0a2c31b835ea9e3bb020e5c9cd"}, "downloads": -1, "filename": "cs.obj-20200318.tar.gz", "has_sig": false, "md5_digest": "d6b0228fdb88d4717e8a3bc26a483dc0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6896, "upload_time": "2020-03-17T23:10:59", "upload_time_iso_8601": "2020-03-17T23:10:59.612767Z", "url": "https://files.pythonhosted.org/packages/89/68/01a042a688e8d0b1fea211422fbcd412a8db18c16b6447a394770f43f733/cs.obj-20200318.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d6b0228fdb88d4717e8a3bc26a483dc0", "sha256": "e5adea844df6636ed9567002fb774f7e223f6f0a2c31b835ea9e3bb020e5c9cd"}, "downloads": -1, "filename": "cs.obj-20200318.tar.gz", "has_sig": false, "md5_digest": "d6b0228fdb88d4717e8a3bc26a483dc0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6896, "upload_time": "2020-03-17T23:10:59", "upload_time_iso_8601": "2020-03-17T23:10:59.612767Z", "url": "https://files.pythonhosted.org/packages/89/68/01a042a688e8d0b1fea211422fbcd412a8db18c16b6447a394770f43f733/cs.obj-20200318.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:41:47 2020"}