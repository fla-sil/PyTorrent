{"info": {"author": "Cloud Custodian Project", "author_email": "", "bugtrack_url": null, "classifiers": [], "description": "# c7n-log-exporter: Cloud watch log exporter automation\n\nA small serverless app to archive cloud logs across accounts to an archive bucket. It utilizes\ncloud log export to s3 feature for historical exports.\n\nIt also supports kinesis streams / firehose to move to realtime exports in the same format\nas the periodic historical exports.\n\n\n## Features\n\n - Log group filtering by regex\n - Incremental support based on previously synced dates\n - Incremental support based on last log group write time\n - Cross account via sts role assume\n - Lambda and CLI support.\n - Day based log segmentation (output keys look\n   like $prefix/$account_id/$group/$year/$month/$day/$export_task_uuid/$stream/$log)\n\n\n## Assumptions\n\n - The archive bucket has already has appropriate bucket policy permissions.\n   For details see:\n   https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/S3ExportTasks.html#S3Permissions\n - Default periodicity for log group archival into s3 is daily.\n - Exporter is run with account credentials that have access to the archive s3 bucket.\n - Catch up archiving is not run in lambda (do a cli run first)\n\n\n## Cli usage\n\n```\nmake install\n```\n\nYou can run on a single account / log group via the export subcommand\n```\nc7n-log-exporter export --help\n```\n\n## Config format\n\nTo ease usage when running across multiple accounts, a config file can be specified, as\nan example.\n\n```\ndestination:\n  bucket: custodian-log-archive\n  prefix: logs2\n\naccounts:\n  - name: custodian-demo\n    role: \"arn:aws:iam::111111111111:role/CloudCustodianRole\"\n    groups:\n      - \"/aws/lambda/*\"\n      - \"vpc-flow-logs\"\n```\n\n## Multiple accounts via cli\n\nTo run on the cli across multiple accounts, edit the config.yml to specify multiple\naccounts and log groups.\n\n```\nc7n-log-exporter run --config config.yml\n```\n\n## Serverless Usage\n\nEdit config.yml to specify the accounts, archive bucket, and log groups you want to\nuse.\n\n```\nmake install\nmake deploy\n```\n\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://cloudcustodian.io", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "c7n-logexporter", "package_url": "https://pypi.org/project/c7n-logexporter/", "platform": "", "project_url": "https://pypi.org/project/c7n-logexporter/", "project_urls": {"Homepage": "https://cloudcustodian.io"}, "release_url": "https://pypi.org/project/c7n-logexporter/0.4.0/", "requires_dist": ["argcomplete (==1.11.1)", "attrs (==19.3.0)", "boto3 (==1.12.47)", "botocore (==1.15.47)", "c7n (==0.9.1)", "click (==7.1.2)", "docutils (==0.15.2)", "importlib-metadata (==1.6.0)", "jmespath (==0.9.5)", "jsonschema (==3.2.0)", "pyrsistent (==0.16.0)", "python-dateutil (==2.8.1)", "pyyaml (==5.3.1)", "s3transfer (==0.3.3)", "six (==1.14.0)", "tabulate (==0.8.7)", "urllib3 (==1.25.9)", "zipp (==3.1.0)"], "requires_python": ">=3.6,<4.0", "summary": "Cloud Custodian - Cloud Watch Log S3 exporter", "version": "0.4.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>c7n-log-exporter: Cloud watch log exporter automation</h1>\n<p>A small serverless app to archive cloud logs across accounts to an archive bucket. It utilizes\ncloud log export to s3 feature for historical exports.</p>\n<p>It also supports kinesis streams / firehose to move to realtime exports in the same format\nas the periodic historical exports.</p>\n<h2>Features</h2>\n<ul>\n<li>Log group filtering by regex</li>\n<li>Incremental support based on previously synced dates</li>\n<li>Incremental support based on last log group write time</li>\n<li>Cross account via sts role assume</li>\n<li>Lambda and CLI support.</li>\n<li>Day based log segmentation (output keys look\nlike $prefix/$account_id/$group/$year/$month/$day/$export_task_uuid/$stream/$log)</li>\n</ul>\n<h2>Assumptions</h2>\n<ul>\n<li>The archive bucket has already has appropriate bucket policy permissions.\nFor details see:\n<a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/S3ExportTasks.html#S3Permissions\" rel=\"nofollow\">https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/S3ExportTasks.html#S3Permissions</a></li>\n<li>Default periodicity for log group archival into s3 is daily.</li>\n<li>Exporter is run with account credentials that have access to the archive s3 bucket.</li>\n<li>Catch up archiving is not run in lambda (do a cli run first)</li>\n</ul>\n<h2>Cli usage</h2>\n<pre><code>make install\n</code></pre>\n<p>You can run on a single account / log group via the export subcommand</p>\n<pre><code>c7n-log-exporter export --help\n</code></pre>\n<h2>Config format</h2>\n<p>To ease usage when running across multiple accounts, a config file can be specified, as\nan example.</p>\n<pre><code>destination:\n  bucket: custodian-log-archive\n  prefix: logs2\n\naccounts:\n  - name: custodian-demo\n    role: \"arn:aws:iam::111111111111:role/CloudCustodianRole\"\n    groups:\n      - \"/aws/lambda/*\"\n      - \"vpc-flow-logs\"\n</code></pre>\n<h2>Multiple accounts via cli</h2>\n<p>To run on the cli across multiple accounts, edit the config.yml to specify multiple\naccounts and log groups.</p>\n<pre><code>c7n-log-exporter run --config config.yml\n</code></pre>\n<h2>Serverless Usage</h2>\n<p>Edit config.yml to specify the accounts, archive bucket, and log groups you want to\nuse.</p>\n<pre><code>make install\nmake deploy\n</code></pre>\n\n          </div>"}, "last_serial": 7121463, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "f80c0ab972d8945a04492ac7d4789483", "sha256": "bc14edefadb6798f4524d5c316736b36dc48894d5bf2234cc68a2fbf9a52c580"}, "downloads": -1, "filename": "c7n_logexporter-0.1.tar.gz", "has_sig": false, "md5_digest": "f80c0ab972d8945a04492ac7d4789483", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 1303, "upload_time": "2017-05-16T07:50:00", "upload_time_iso_8601": "2017-05-16T07:50:00.518030Z", "url": "https://files.pythonhosted.org/packages/ca/91/16fc9ed7d5974143b12dfeeaa461df1c3f7bbf8e9c20a7ffb74bec354d68/c7n_logexporter-0.1.tar.gz", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "e02413e5e2acc402bb531380722f2fbb", "sha256": "fc1793ba15bcbc609cfc38ac8ae86d39f6d4d279b8b8b0fd18cc2ff01a413b81"}, "downloads": -1, "filename": "c7n_logexporter-0.2.tar.gz", "has_sig": false, "md5_digest": "e02413e5e2acc402bb531380722f2fbb", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2202, "upload_time": "2018-02-14T12:55:31", "upload_time_iso_8601": "2018-02-14T12:55:31.676344Z", "url": "https://files.pythonhosted.org/packages/82/2a/ef2588d6b56156b95c4526f29883739c5da6d9757e3249069b7b3904f9c4/c7n_logexporter-0.2.tar.gz", "yanked": false}], "0.3.1": [{"comment_text": "", "digests": {"md5": "144ad6b2e028b0cb55862b5f1c0e8481", "sha256": "5d860d94db586669ff877d2d16f334406eff6c97201165bf6869bcaa5f013c5f"}, "downloads": -1, "filename": "c7n_logexporter-0.3.1.tar.gz", "has_sig": false, "md5_digest": "144ad6b2e028b0cb55862b5f1c0e8481", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2245, "upload_time": "2019-09-23T22:34:38", "upload_time_iso_8601": "2019-09-23T22:34:38.342963Z", "url": "https://files.pythonhosted.org/packages/ce/35/d68de08cc131f58b01c954833dd9ce49ebaf5f715200362b308e04770870/c7n_logexporter-0.3.1.tar.gz", "yanked": false}], "0.3.2": [{"comment_text": "", "digests": {"md5": "8a5c31e9d7ae8b0977ab3449f4252449", "sha256": "75d27eb8d515203f570cda2301382a45a85da0bc51f0c72c42cdc71f478566da"}, "downloads": -1, "filename": "c7n_logexporter-0.3.2.tar.gz", "has_sig": false, "md5_digest": "8a5c31e9d7ae8b0977ab3449f4252449", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2565, "upload_time": "2019-09-23T22:42:13", "upload_time_iso_8601": "2019-09-23T22:42:13.782779Z", "url": "https://files.pythonhosted.org/packages/10/54/87702b80244fab03be65cbb5ce85b72a0db45d2b4324e8c1fd1eefbdcb66/c7n_logexporter-0.3.2.tar.gz", "yanked": false}], "0.4.0": [{"comment_text": "", "digests": {"md5": "e2e577a3ca9f0938a34ff0fd7c796a94", "sha256": "877ba390bb8ca5e54dcb9ea6326832185a7e00aaf80490eae1c31bf8b9270bcb"}, "downloads": -1, "filename": "c7n_logexporter-0.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "e2e577a3ca9f0938a34ff0fd7c796a94", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 15002, "upload_time": "2020-04-28T16:22:12", "upload_time_iso_8601": "2020-04-28T16:22:12.822455Z", "url": "https://files.pythonhosted.org/packages/f6/17/367636f4b3fa428721713622d253dff034ea5afc84aefa13ccf8d7605faf/c7n_logexporter-0.4.0-py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "e2e577a3ca9f0938a34ff0fd7c796a94", "sha256": "877ba390bb8ca5e54dcb9ea6326832185a7e00aaf80490eae1c31bf8b9270bcb"}, "downloads": -1, "filename": "c7n_logexporter-0.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "e2e577a3ca9f0938a34ff0fd7c796a94", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 15002, "upload_time": "2020-04-28T16:22:12", "upload_time_iso_8601": "2020-04-28T16:22:12.822455Z", "url": "https://files.pythonhosted.org/packages/f6/17/367636f4b3fa428721713622d253dff034ea5afc84aefa13ccf8d7605faf/c7n_logexporter-0.4.0-py3-none-any.whl", "yanked": false}], "timestamp": "Thu May  7 22:35:46 2020"}