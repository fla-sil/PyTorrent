{"info": {"author": "thautawarm", "author_email": "twshere@outlook.com", "bugtrack_url": null, "classifiers": ["Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: Implementation :: CPython"], "description": "# \u5f88\u6025\u8bed\u8a00, \u4e00\u4e2a\"\u8fc7\u6e21\"\u8bed\u8a00.\n\n\u5b89\u88c5pip, \u547d\u4ee4ugt\n\n(`pip install urgent`, `ugt --help`)\n\n\u8fd0\u884c3.6, \u7f16\u8bd13.7\n\n(3.7, 3.8\u4e0a, urgent\u7f16\u8bd1\u51fa\u7684\u5b57\u8282\u7801\u53ef\u4ee5\u88ab3.6\u52a0\u8f7d, \u4e5f\u5c31\u662f\u6ca1\u6709\u4f7f\u7528ROT4\u548cLOAD_METHOD\u8fd9\u4e9b\u65b0\u7684\u6307\u4ee4)\n\n\n\u8de8\u7248\u672c\u52a0\u8f7d\u7528`--raw_bytecode` flag.\n\n```shell script\nugt cc <xxx.ugt> <xxx.code> -- raw_bytecode --project bootstrap.toml\n```\n\u540e,\n```\nimport marshal\ncode_object = marshal.load(open(\"xxx.code\", 'rb'))\nexec(code_object, globals())\n```\n\n## \u8bed\u53e5(\u4f2a)\n\n- `let/def`\u548c`rec`.\n\n```\nlet x = 1\ndef x = 1\n```\n\u4e00\u4e2a\u610f\u601d.\n\n- `rec`\n```\nrec f = x -> (f, x)\n```\n\u662f\u9012\u5f52, \u4e5f\u5c31\u662f\u81ea\u5df1\u7684\u5b9a\u4e49\u4e2d\u53ef\u4ee5\u51fa\u73b0\u81ea\u5df1.\n\n\n- `let ..., ... `\n\n```\nlet x = 1, y = 2, z = ...,\n```\n\n\u5b9a\u4e49\u65f6`x, y, z`\u4e92\u4e0d\u5f15\u7528, \u4ed6\u4eec\u5b9a\u4e49\u65f6\u7528\u5230\u7684`x, y, z`\u6765\u81ea\u5916\u90e8.\n\n\n- `rec ..., ...`.\n\n```\nrec x = a -> (a, y), y = a -> (a, x) , z = ...,\n```\n\n\u5b9a\u4e49\u65f6, `x, y, z`\u4e92\u76f8\u5f15\u7528.\n\n\n## If\n\n```\n<expr> ?\n    <expr>\nelse\n    <expr>\n```\n\n\u6211\u89c9\u5f97\u8bed\u6cd5\u8fd8\u884c.\n\n```shell script\nhow?\n  fine\nelse\n  emmm  \n```\n\n\u8fd8\u9614\u4ee5.\n\n## Match\n\n```shell script\nlet x  =\n(1, 2) match\n  (a, b, c) => a,\n  (1, 2) => 0\n```\n\n\u53ef\u4ee5`match`\u7684\u5f88\u591a, \u66f4\u591a\u4f8b\u5b50\u89c1\u540e\u9762\u7684variants.\n\n\u6ce8\u610f, \u4e8c\u5143\u8fd0\u7b97\u7b26\u4f1a\u88ab\u5f53\u4f5c\u89e3\u6784\u5668.\n\n\u6211\u4eec\u8fd8\u652f\u6301view pattern.\n\n```shell script\nlet f = x -> (x, 2 * x)\n\n1 match (f -> (a, b)) => a + b # 1 + 2 * 1 \n5 match (f -> (a, b)) => a + b # 5 + 2 * 5 \n```\n\n## Open, Import\n\n\u9879\u76ee\u6839\u76ee\u5f55\u90a3\u4e2a`hello.ugt`\u53ef\u4ee5\u62ff\u6765\u8bd5, \u6253\u5f00`ugt repl`,\n```shell script\nUrgent> import Hello\nUrgent> print 1\nUndef print\nUrgent> let x = Hello\nUrgent> x.print 1\n1\nUrgent> open x\nUrgent> print 1\n1\n```\n\n`import`\u5bfc\u5165\u6a21\u5757\u4f46\u4e0d\u52a0\u8f7d\u5b83\u7684\u6210\u5458, `open`\u52a0\u8f7d\u6210\u5458.\n\u770b\u8d77\u6765\u4f3c\u4e4e\u662fpython\u7684`import <mod>`\u548c`from <mod> import *`, \u5176\u5b9e\u4e0d\u662f.\n\n\u4e00\u5207\u90fd\u662f\u9759\u6001\u7684, \u53ea\u6709module\u53ef\u4ee5\u88abimport\u548copen. `x`\u4e4b\u6240\u4ee5\u53ef\u4ee5\u88abopen,\n\u662f\u56e0\u4e3a`x`\u88ab\u5206\u6790\u4e3a\u662f\u6a21\u5757`Hello`\u7684alias.\n\nUrgent\u662fpure\u7684, \u53d8\u91cf\u4e0d\u53ef\u4ee5\u591a\u6b21\u8d4b\u503c(\u53ea\u6709\u7ed1\u5b9a), \u6240\u4ee5, \u4e0a\u9762\u4ee3\u7801\u91cc\u4efb\u4f55\u4f7f\u7528`x`\u7684\u5730\u65b9\u90fd\u4f1a\u7d22\u5f15\u5230\u6a21\u5757`Hello`.\n\n\u5982\u679c\u8bf4`python import *`\u662f\u6709\u8fd0\u884c\u65f6\u5f00\u9500\u7684, \u90a3\u4e48, \u5df2\u7ecf\u52a0\u8f7d\u8fc7\u7684\u6a21\u5757\u5728urgent\u91cc,\n\u65e0\u8bba\u5728\u54ea\u513fopen\u90fd\u662f0\u5f00\u9500\u7684.\n\n\u4e00\u79cd\u6765\u81ea\u4e8eML\u8bed\u8a00\u7684\u7528\u6cd5\u662f, \u5728\u5c40\u90e8\u6253\u5f00\u6a21\u5757.\n```shell script\nUrgent> import Hello\nUrgent> let x = 1\nUrgent> print 1\nUndef print\n\nUrgent> let x = let y = 2 open Hello in print 1\n1\nUrgent> print 1\nUndef print\n```   \n\n## \u8bed\u53e5\u5f15\u5bfc\u7684\u8868\u8fbe\u5f0f\n\n`open`, `let`, `rec`, `def`\u8fd9\u4e9b\u8bed\u53e5\u540e\u9762\u53ef\u4ee5\u8ddf\u4e00\u4e2a`in`, \u8868\u793a\u8868\u8fbe\u5f0f.\n```shell script\nUrgent> let x = def x = 1 in open Hello in print <| x + 1\n2\n```\n\n\u8fde\u7eed\u7684`let`, `open`, \u8fd9\u4e9b\u8bed\u53e5, \u53ef\u4ee5\u4e0d\u5199`in`.\n\n```shell script\nUrgent> let x = let x = 1 let y = 2 let c = 3 open Hello in print <| x + y + c\n6\nUrgent> print <| 1 + 2 + 3\nUndef operator.<|\nUrgent> print (1+2)\nUndef operator.+\n```\n\n## \u4e2d\u7f00\u5b9a\u4e49\n\n`+`\u5de6\u7ed3\u5408\uff0c\u4f18\u5148\u7ea710.\n\n```shell script\ninfixl + 10\n```\n\n\n`<|`\u53f3\u7ed3\u5408, \u4f18\u5148\u7ea70.\n\n```shell script\ninfixr <| 0\n```\n\n\u4f18\u5148\u7ea7\u662f\u4e00\u4e2a\u6574\u6570, \u53ef\u4ee5\u4e3a\u8d1f.\n\n\u5982\u679c\u60f3\u8981\u4f7f\u7528\u5176\u4ed6\u6a21\u5757\u5b9a\u4e49\u7684\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u548c\u7ed3\u5408\u6027, \u53ef\u4ee5open\u8be5\u6a21\u5757.\n\u5982\u679c\u4e0d\u60f3\u6c61\u67d3\u4f5c\u7528\u57df, \u53ef\u4ee5\u5c40\u90e8open\u8be5\u6a21\u5757.\n\n\u53ea\u6709`and`\u548c`or`\u4e24\u4e2a\u662f\u56fa\u5b9a\u7684\u4f18\u5148\u7ea7, \u4ed6\u4eec\u7684\u4f18\u5148\u7ea7\u90fd\u6bd4\u5176\u4ed6\u4e8c\u5143\u8fd0\u7b97\u7b26\u4f4e.\n\n`and`\u548c`or`\u4e5f\u7528\u5728pattern matching\u4e2d.\n`and`\u8868\u793a\u5de6\u53f3\u4fe9\u90fd\u8981match, `or`\u8868\u793a\u53eamatch\u4e00\u4e2a.\n\n```shell script\nx match\n  1 or 2 or 3 => 0,\n  x and (y, z) => (y, x, z) \n```\n\n\n## Variants\n\n```shell script\ndata Nil, Cons(_, _) \ninfixr :: 1\nlet :: = Cons\n\nlet l1 = Cons 1 Nil\n\nlet print_lst = lst ->\n  lst match\n    1 :: Cons a b => ...,\n    Cons a b => ...,\n    Nil =>  ...\n```\n\n`[]`\u8bed\u6cd5\u662f`Nil`\u7684\u7b80\u5199, `[a, b]`\u8fd9\u6837\u7684\u8bed\u6cd5\u662f`Cons a (Cons b Nil)`\u7684\u7b80\u5199, \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\n\n```shell script\ndata Nil, Cons(_, _) \ninfixr :: 1\nlet :: = Cons\nlet l1 = [1]\n\nlet print_lst = lst ->\n  lst match\n    1 :: a :: b => ...,\n    a :: b => ...,\n    [] =>  ...\n```\n\n\u5c40\u90e8\u5b9a\u4e49\u7684variants:\n```shell script\nlet x = data A, B, C in\n  (A, B, C)\nA\n\n# Undef: A\n```\n\n\u8fd9\u662f\u7528\u6765\u52a8\u6001create\u6570\u636e\u7c7b\u578b\u7684. \u6ce8\u610f\u8fd9\u5bf9\u4e8e\u8fd0\u884c\u65f6\u6765\u8bf4\u6bd4\u8f83\u7f13\u6162. \u4e00\u822c\u6765\u8bf4, \u8fd8\u662f\u628a\u6570\u636e\u521b\u5efa\u653e\u5230\u6a21\u5757\u9876\u5c42. \n\nVariants\u7684\u6210\u5458\u53ef\u4ee5\u6309\u540d\u5b57\u8bbf\u95ee:\n```shell script\ndata Either(left, right)\nlet x = Either(1, 2)\nx.left |> print\n```\n\n## \u5c3e\u9012\u5f52\n\nurgent\u5b9e\u73b0\u4e86\u5c3e\u9012\u5f52, \u6240\u4ee5, \u4f60\u53ef\u4ee5\u968f\u610f\u5730\u5199\u9012\u5f52\u51fd\u6570\u5b9a\u4e49.\n\n\u6211\u4eec\u4e0d\u80fd\u8bf4\u8fd9\u4e2a\u901f\u5ea6\u975e\u5e38\u5feb, \u5b9e\u9645\u4e0a, \u6bd4\u8d77python\u5faa\u73af, \u76f8\u540c\u60c5\u51b5\u4e0b\u6211\u4eec\u7684\u5c3e\u9012\u5f52\u6027\u80fd\u53ea\u6709\u5176\u4e00\u534a,\n\u66f4\u522b\u8bf4\u6211\u4eec\u8fd8\u6709\u67ef\u91cc\u5316.\n\n\u7136\u800c, \u65e2\u7136\u4f60\u5728\u770b\u4e86, \u90a3\u6211\u53ef\u4ee5\u5f00\u5fc3\u5730\u5411\u4f60\u4fdd\u8bc1, **\u8fd9\u662fPython\u4e16\u754c\u6700\u5feb\u7684, \u4e14\u8d27\u771f\u4ef7\u5b9e\u7684\u5c3e\u9012\u5f52\u5b9e\u73b0**.\n\n\u5176\u57fa\u672c\u539f\u7406\u76f8\u5f53\u7b80\u5355, \u4f60\u53ef\u4ee5\u5728`codegen.py`\u7684`preload`\u65b9\u6cd5\u91cc\u627e\u5230\u4e00\u4e2a\u7528\u5b57\u8282\u7801\u4e66\u5199\u7684,\n\u4f18\u5316\u5230\u6781\u81f4\u7684\u5c3e\u9012\u5f52scheduler. \n\n\u6211\u4f1a\u5728\u975e\u5c3e\u9012\u5f52\u8c03\u7528\u70b9\u5e94\u7528\u8fd9\u4e2ascheduler,\n\u4f60\u80fd\u540c\u901a\u8fc7\u9605\u8bfb`compiler.py`\u7684`v_tco`\u4ee5\u53ca`v_call`\u65b9\u6cd5, \u6765\u8fdb\u4e00\u6b65\u7406\u89e3\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u5b9e\u73b0.\n\n## Python\u51fd\u6570\u8c03\u7528\n\n```shell script\nf.(a, b, c)\n```\n\n\u50cf\u8fd9\u6837, \u8c03\u7528\u65f6\u52a0\u4e2a\u70b9\u7684\u51fd\u6570, \u5c31\u662f\u6309\u7167Python\u7684\u8c03\u7528\u7ea6\u5b9a. \u8fd9\u5e76\u4e0d\u548c\u6211\u4eec\u7684\u5c3e\u9012\u5f52\u4f18\u5316\u51b2\u7a81.\n\n## Imperative Programming\n\n\u4e0b\u9762\u7684\u4ee3\u7801\u9700\u8981\u52a0\u8f7d\u9879\u76ee\u76ee\u5f55\u4e0b\u7684`base/prelude.ugt`.\n\n- `ref`\n```shell script\nUrgent> let x = ref 1\n=> ()\nUrgent> x\n=> ref 1\nUrgent> x := 2\n=> ()\nUrgent> x\n=> ref 2\nUrgent> !x + 2\n=> 4\n```\n\n- `for`\n\n```shell script\nUrgent> for [1, 2, 3] ( x -> \n  print x\n)\n1\n2\n3\n=> ()\n```\n\n- `while`\n\n```shell script\nUrgent> let x = ref 1\n=> ()\nUrgent> while { !x < 10 } {\n  do print !x\n  in x := !x + 1\n}\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n=> ()\n```\n\n\u4e0a\u9762\u7684\u5faa\u73af\u6682\u65f6\u662f\u5c3e\u9012\u5f52\u5199\u7684, \u4e4b\u540e\u4f1a\u7528Python\u5b57\u8282\u7801\u91cd\u5199.\n\n`for`\u548c`while`\u7684\u5b9e\u73b0\u5982\u4e0b:\n```shell script\nrec for = seq -> f ->\n    seq match\n        [] => (),\n        hd :: tl =>\n            do f hd\n            in for tl f\n\nrec while = cond -> f ->\n    cond () ?\n        do f ()\n        in while cond f\n    else ()\n```\n\n\u90fd\u53ef\u4ee5\u826f\u597d\u5730\u5c3e\u9012\u5f52.\n\n## \u9879\u76ee\u6784\u5efa\n\nurgent\u628a\u6240\u6709\u4ee3\u7801\u7f16\u8bd1\u6210\u5355\u4e2a.pyc\u6587\u4ef6.\n\n\n```shell script\n# \u7f16\u8bd1\nsh> ugt cc <\u4e3b\u6a21\u5757.ugt> <a.pyc> --project <\u9879\u76ee\u6587\u4ef6.toml>\n# \u76f4\u63a5\u6267\u884c\nsh> ugt run <\u4e3b\u6a21\u5757.ugt> --project <\u9879\u76ee\u6587\u4ef6.toml>\n# \u542f\u52a8REPL\nsh> ugt repl --project <\u9879\u76ee\u6587\u4ef6.toml>\n```\n\n\u4e00\u4e2a\u793a\u4f8b\u7684\u9879\u76ee\u6587\u4ef6\u89c1`bootstrap.toml`.\n\npackaging\u548cproject building\u8fd9\u4e9b\u65b9\u9762\u5176\u5b9e\u8fd8\u6ca1\u8bbe\u8ba1\u597d, \u4f46\u5148\u7528\u7740\u4e86. \u505a\u4e8b\u7b2c\u4e00.\n\n## WIP: Traits\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/RemuLang/urgent", "keywords": "", "license": "mit", "maintainer": "", "maintainer_email": "", "name": "urgent", "package_url": "https://pypi.org/project/urgent/", "platform": "any", "project_url": "https://pypi.org/project/urgent/", "project_urls": {"Homepage": "https://github.com/RemuLang/urgent"}, "release_url": "https://pypi.org/project/urgent/0.1.2/", "requires_dist": ["rbnf-rts", "toml", "argser", "sijuiacion-lang", "remu-operator"], "requires_python": ">=3.6.0", "summary": "", "version": "0.1.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>\u5f88\u6025\u8bed\u8a00, \u4e00\u4e2a\"\u8fc7\u6e21\"\u8bed\u8a00.</h1>\n<p>\u5b89\u88c5pip, \u547d\u4ee4ugt</p>\n<p>(<code>pip install urgent</code>, <code>ugt --help</code>)</p>\n<p>\u8fd0\u884c3.6, \u7f16\u8bd13.7</p>\n<p>(3.7, 3.8\u4e0a, urgent\u7f16\u8bd1\u51fa\u7684\u5b57\u8282\u7801\u53ef\u4ee5\u88ab3.6\u52a0\u8f7d, \u4e5f\u5c31\u662f\u6ca1\u6709\u4f7f\u7528ROT4\u548cLOAD_METHOD\u8fd9\u4e9b\u65b0\u7684\u6307\u4ee4)</p>\n<p>\u8de8\u7248\u672c\u52a0\u8f7d\u7528<code>--raw_bytecode</code> flag.</p>\n<pre>ugt cc &lt;xxx.ugt&gt; &lt;xxx.code&gt; -- raw_bytecode --project bootstrap.toml\n</pre>\n<p>\u540e,</p>\n<pre><code>import marshal\ncode_object = marshal.load(open(\"xxx.code\", 'rb'))\nexec(code_object, globals())\n</code></pre>\n<h2>\u8bed\u53e5(\u4f2a)</h2>\n<ul>\n<li><code>let/def</code>\u548c<code>rec</code>.</li>\n</ul>\n<pre><code>let x = 1\ndef x = 1\n</code></pre>\n<p>\u4e00\u4e2a\u610f\u601d.</p>\n<ul>\n<li><code>rec</code></li>\n</ul>\n<pre><code>rec f = x -&gt; (f, x)\n</code></pre>\n<p>\u662f\u9012\u5f52, \u4e5f\u5c31\u662f\u81ea\u5df1\u7684\u5b9a\u4e49\u4e2d\u53ef\u4ee5\u51fa\u73b0\u81ea\u5df1.</p>\n<ul>\n<li><code>let ..., ...</code></li>\n</ul>\n<pre><code>let x = 1, y = 2, z = ...,\n</code></pre>\n<p>\u5b9a\u4e49\u65f6<code>x, y, z</code>\u4e92\u4e0d\u5f15\u7528, \u4ed6\u4eec\u5b9a\u4e49\u65f6\u7528\u5230\u7684<code>x, y, z</code>\u6765\u81ea\u5916\u90e8.</p>\n<ul>\n<li><code>rec ..., ...</code>.</li>\n</ul>\n<pre><code>rec x = a -&gt; (a, y), y = a -&gt; (a, x) , z = ...,\n</code></pre>\n<p>\u5b9a\u4e49\u65f6, <code>x, y, z</code>\u4e92\u76f8\u5f15\u7528.</p>\n<h2>If</h2>\n<pre><code>&lt;expr&gt; ?\n    &lt;expr&gt;\nelse\n    &lt;expr&gt;\n</code></pre>\n<p>\u6211\u89c9\u5f97\u8bed\u6cd5\u8fd8\u884c.</p>\n<pre>how?\n  fine\n<span class=\"k\">else</span>\n  emmm  \n</pre>\n<p>\u8fd8\u9614\u4ee5.</p>\n<h2>Match</h2>\n<pre><span class=\"nb\">let</span> <span class=\"nv\">x</span>  <span class=\"o\">=</span>\n<span class=\"o\">(</span><span class=\"m\">1</span>, <span class=\"m\">2</span><span class=\"o\">)</span> match\n  <span class=\"o\">(</span>a, b, c<span class=\"o\">)</span> <span class=\"o\">=</span>&gt; a,\n  <span class=\"o\">(</span><span class=\"m\">1</span>, <span class=\"m\">2</span><span class=\"o\">)</span> <span class=\"o\">=</span>&gt; <span class=\"m\">0</span>\n</pre>\n<p>\u53ef\u4ee5<code>match</code>\u7684\u5f88\u591a, \u66f4\u591a\u4f8b\u5b50\u89c1\u540e\u9762\u7684variants.</p>\n<p>\u6ce8\u610f, \u4e8c\u5143\u8fd0\u7b97\u7b26\u4f1a\u88ab\u5f53\u4f5c\u89e3\u6784\u5668.</p>\n<p>\u6211\u4eec\u8fd8\u652f\u6301view pattern.</p>\n<pre><span class=\"nb\">let</span> <span class=\"nv\">f</span> <span class=\"o\">=</span> x -&gt; <span class=\"o\">(</span>x, <span class=\"m\">2</span> * x<span class=\"o\">)</span>\n\n<span class=\"m\">1</span> match <span class=\"o\">(</span>f -&gt; <span class=\"o\">(</span>a, b<span class=\"o\">))</span> <span class=\"o\">=</span>&gt; a + b <span class=\"c1\"># 1 + 2 * 1 </span>\n<span class=\"m\">5</span> match <span class=\"o\">(</span>f -&gt; <span class=\"o\">(</span>a, b<span class=\"o\">))</span> <span class=\"o\">=</span>&gt; a + b <span class=\"c1\"># 5 + 2 * 5 </span>\n</pre>\n<h2>Open, Import</h2>\n<p>\u9879\u76ee\u6839\u76ee\u5f55\u90a3\u4e2a<code>hello.ugt</code>\u53ef\u4ee5\u62ff\u6765\u8bd5, \u6253\u5f00<code>ugt repl</code>,</p>\n<pre>Urgent&gt; import Hello\nUrgent&gt; print <span class=\"m\">1</span>\nUndef print\nUrgent&gt; <span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> Hello\nUrgent&gt; x.print <span class=\"m\">1</span>\n<span class=\"m\">1</span>\nUrgent&gt; open x\nUrgent&gt; print <span class=\"m\">1</span>\n<span class=\"m\">1</span>\n</pre>\n<p><code>import</code>\u5bfc\u5165\u6a21\u5757\u4f46\u4e0d\u52a0\u8f7d\u5b83\u7684\u6210\u5458, <code>open</code>\u52a0\u8f7d\u6210\u5458.\n\u770b\u8d77\u6765\u4f3c\u4e4e\u662fpython\u7684<code>import &lt;mod&gt;</code>\u548c<code>from &lt;mod&gt; import *</code>, \u5176\u5b9e\u4e0d\u662f.</p>\n<p>\u4e00\u5207\u90fd\u662f\u9759\u6001\u7684, \u53ea\u6709module\u53ef\u4ee5\u88abimport\u548copen. <code>x</code>\u4e4b\u6240\u4ee5\u53ef\u4ee5\u88abopen,\n\u662f\u56e0\u4e3a<code>x</code>\u88ab\u5206\u6790\u4e3a\u662f\u6a21\u5757<code>Hello</code>\u7684alias.</p>\n<p>Urgent\u662fpure\u7684, \u53d8\u91cf\u4e0d\u53ef\u4ee5\u591a\u6b21\u8d4b\u503c(\u53ea\u6709\u7ed1\u5b9a), \u6240\u4ee5, \u4e0a\u9762\u4ee3\u7801\u91cc\u4efb\u4f55\u4f7f\u7528<code>x</code>\u7684\u5730\u65b9\u90fd\u4f1a\u7d22\u5f15\u5230\u6a21\u5757<code>Hello</code>.</p>\n<p>\u5982\u679c\u8bf4<code>python import *</code>\u662f\u6709\u8fd0\u884c\u65f6\u5f00\u9500\u7684, \u90a3\u4e48, \u5df2\u7ecf\u52a0\u8f7d\u8fc7\u7684\u6a21\u5757\u5728urgent\u91cc,\n\u65e0\u8bba\u5728\u54ea\u513fopen\u90fd\u662f0\u5f00\u9500\u7684.</p>\n<p>\u4e00\u79cd\u6765\u81ea\u4e8eML\u8bed\u8a00\u7684\u7528\u6cd5\u662f, \u5728\u5c40\u90e8\u6253\u5f00\u6a21\u5757.</p>\n<pre>Urgent&gt; import Hello\nUrgent&gt; <span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> <span class=\"m\">1</span>\nUrgent&gt; print <span class=\"m\">1</span>\nUndef print\n\nUrgent&gt; <span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> <span class=\"nb\">let</span> <span class=\"nv\">y</span> <span class=\"o\">=</span> <span class=\"m\">2</span> open Hello in print <span class=\"m\">1</span>\n<span class=\"m\">1</span>\nUrgent&gt; print <span class=\"m\">1</span>\nUndef print\n</pre>\n<h2>\u8bed\u53e5\u5f15\u5bfc\u7684\u8868\u8fbe\u5f0f</h2>\n<p><code>open</code>, <code>let</code>, <code>rec</code>, <code>def</code>\u8fd9\u4e9b\u8bed\u53e5\u540e\u9762\u53ef\u4ee5\u8ddf\u4e00\u4e2a<code>in</code>, \u8868\u793a\u8868\u8fbe\u5f0f.</p>\n<pre>Urgent&gt; <span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> def <span class=\"nv\">x</span> <span class=\"o\">=</span> <span class=\"m\">1</span> in open Hello in print &lt;<span class=\"p\">|</span> x + <span class=\"m\">1</span>\n<span class=\"m\">2</span>\n</pre>\n<p>\u8fde\u7eed\u7684<code>let</code>, <code>open</code>, \u8fd9\u4e9b\u8bed\u53e5, \u53ef\u4ee5\u4e0d\u5199<code>in</code>.</p>\n<pre>Urgent&gt; <span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> <span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> <span class=\"m\">1</span> <span class=\"nb\">let</span> <span class=\"nv\">y</span> <span class=\"o\">=</span> <span class=\"m\">2</span> <span class=\"nb\">let</span> <span class=\"nv\">c</span> <span class=\"o\">=</span> <span class=\"m\">3</span> open Hello in print &lt;<span class=\"p\">|</span> x + y + c\n<span class=\"m\">6</span>\nUrgent&gt; print &lt;<span class=\"p\">|</span> <span class=\"m\">1</span> + <span class=\"m\">2</span> + <span class=\"m\">3</span>\nUndef operator.&lt;<span class=\"p\">|</span>\nUrgent&gt; print <span class=\"o\">(</span><span class=\"m\">1</span>+2<span class=\"o\">)</span>\nUndef operator.+\n</pre>\n<h2>\u4e2d\u7f00\u5b9a\u4e49</h2>\n<p><code>+</code>\u5de6\u7ed3\u5408\uff0c\u4f18\u5148\u7ea710.</p>\n<pre>infixl + <span class=\"m\">10</span>\n</pre>\n<p><code>&lt;|</code>\u53f3\u7ed3\u5408, \u4f18\u5148\u7ea70.</p>\n<pre>infixr &lt;<span class=\"p\">|</span> <span class=\"m\">0</span>\n</pre>\n<p>\u4f18\u5148\u7ea7\u662f\u4e00\u4e2a\u6574\u6570, \u53ef\u4ee5\u4e3a\u8d1f.</p>\n<p>\u5982\u679c\u60f3\u8981\u4f7f\u7528\u5176\u4ed6\u6a21\u5757\u5b9a\u4e49\u7684\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u548c\u7ed3\u5408\u6027, \u53ef\u4ee5open\u8be5\u6a21\u5757.\n\u5982\u679c\u4e0d\u60f3\u6c61\u67d3\u4f5c\u7528\u57df, \u53ef\u4ee5\u5c40\u90e8open\u8be5\u6a21\u5757.</p>\n<p>\u53ea\u6709<code>and</code>\u548c<code>or</code>\u4e24\u4e2a\u662f\u56fa\u5b9a\u7684\u4f18\u5148\u7ea7, \u4ed6\u4eec\u7684\u4f18\u5148\u7ea7\u90fd\u6bd4\u5176\u4ed6\u4e8c\u5143\u8fd0\u7b97\u7b26\u4f4e.</p>\n<p><code>and</code>\u548c<code>or</code>\u4e5f\u7528\u5728pattern matching\u4e2d.\n<code>and</code>\u8868\u793a\u5de6\u53f3\u4fe9\u90fd\u8981match, <code>or</code>\u8868\u793a\u53eamatch\u4e00\u4e2a.</p>\n<pre>x match\n  <span class=\"m\">1</span> or <span class=\"m\">2</span> or <span class=\"nv\">3</span> <span class=\"o\">=</span>&gt; <span class=\"m\">0</span>,\n  x and <span class=\"o\">(</span>y, z<span class=\"o\">)</span> <span class=\"o\">=</span>&gt; <span class=\"o\">(</span>y, x, z<span class=\"o\">)</span> \n</pre>\n<h2>Variants</h2>\n<pre>data Nil, Cons<span class=\"o\">(</span>_, _<span class=\"o\">)</span> \ninfixr :: <span class=\"m\">1</span>\n<span class=\"nb\">let</span> :: <span class=\"o\">=</span> Cons\n\n<span class=\"nb\">let</span> <span class=\"nv\">l1</span> <span class=\"o\">=</span> Cons <span class=\"m\">1</span> Nil\n\n<span class=\"nb\">let</span> <span class=\"nv\">print_lst</span> <span class=\"o\">=</span> lst -&gt;\n  lst match\n    <span class=\"m\">1</span> :: Cons a <span class=\"nv\">b</span> <span class=\"o\">=</span>&gt; ...,\n    Cons a <span class=\"nv\">b</span> <span class=\"o\">=</span>&gt; ...,\n    <span class=\"nv\">Nil</span> <span class=\"o\">=</span>&gt;  ...\n</pre>\n<p><code>[]</code>\u8bed\u6cd5\u662f<code>Nil</code>\u7684\u7b80\u5199, <code>[a, b]</code>\u8fd9\u6837\u7684\u8bed\u6cd5\u662f<code>Cons a (Cons b Nil)</code>\u7684\u7b80\u5199, \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5</p>\n<pre>data Nil, Cons<span class=\"o\">(</span>_, _<span class=\"o\">)</span> \ninfixr :: <span class=\"m\">1</span>\n<span class=\"nb\">let</span> :: <span class=\"o\">=</span> Cons\n<span class=\"nb\">let</span> <span class=\"nv\">l1</span> <span class=\"o\">=</span> <span class=\"o\">[</span><span class=\"m\">1</span><span class=\"o\">]</span>\n\n<span class=\"nb\">let</span> <span class=\"nv\">print_lst</span> <span class=\"o\">=</span> lst -&gt;\n  lst match\n    <span class=\"m\">1</span> :: a :: <span class=\"nv\">b</span> <span class=\"o\">=</span>&gt; ...,\n    a :: <span class=\"nv\">b</span> <span class=\"o\">=</span>&gt; ...,\n    <span class=\"o\">[]</span> <span class=\"o\">=</span>&gt;  ...\n</pre>\n<p>\u5c40\u90e8\u5b9a\u4e49\u7684variants:</p>\n<pre><span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> data A, B, C in\n  <span class=\"o\">(</span>A, B, C<span class=\"o\">)</span>\nA\n\n<span class=\"c1\"># Undef: A</span>\n</pre>\n<p>\u8fd9\u662f\u7528\u6765\u52a8\u6001create\u6570\u636e\u7c7b\u578b\u7684. \u6ce8\u610f\u8fd9\u5bf9\u4e8e\u8fd0\u884c\u65f6\u6765\u8bf4\u6bd4\u8f83\u7f13\u6162. \u4e00\u822c\u6765\u8bf4, \u8fd8\u662f\u628a\u6570\u636e\u521b\u5efa\u653e\u5230\u6a21\u5757\u9876\u5c42.</p>\n<p>Variants\u7684\u6210\u5458\u53ef\u4ee5\u6309\u540d\u5b57\u8bbf\u95ee:</p>\n<pre>data Either<span class=\"o\">(</span>left, right<span class=\"o\">)</span>\n<span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> Either<span class=\"o\">(</span><span class=\"m\">1</span>, <span class=\"m\">2</span><span class=\"o\">)</span>\nx.left <span class=\"p\">|</span>&gt; print\n</pre>\n<h2>\u5c3e\u9012\u5f52</h2>\n<p>urgent\u5b9e\u73b0\u4e86\u5c3e\u9012\u5f52, \u6240\u4ee5, \u4f60\u53ef\u4ee5\u968f\u610f\u5730\u5199\u9012\u5f52\u51fd\u6570\u5b9a\u4e49.</p>\n<p>\u6211\u4eec\u4e0d\u80fd\u8bf4\u8fd9\u4e2a\u901f\u5ea6\u975e\u5e38\u5feb, \u5b9e\u9645\u4e0a, \u6bd4\u8d77python\u5faa\u73af, \u76f8\u540c\u60c5\u51b5\u4e0b\u6211\u4eec\u7684\u5c3e\u9012\u5f52\u6027\u80fd\u53ea\u6709\u5176\u4e00\u534a,\n\u66f4\u522b\u8bf4\u6211\u4eec\u8fd8\u6709\u67ef\u91cc\u5316.</p>\n<p>\u7136\u800c, \u65e2\u7136\u4f60\u5728\u770b\u4e86, \u90a3\u6211\u53ef\u4ee5\u5f00\u5fc3\u5730\u5411\u4f60\u4fdd\u8bc1, <strong>\u8fd9\u662fPython\u4e16\u754c\u6700\u5feb\u7684, \u4e14\u8d27\u771f\u4ef7\u5b9e\u7684\u5c3e\u9012\u5f52\u5b9e\u73b0</strong>.</p>\n<p>\u5176\u57fa\u672c\u539f\u7406\u76f8\u5f53\u7b80\u5355, \u4f60\u53ef\u4ee5\u5728<code>codegen.py</code>\u7684<code>preload</code>\u65b9\u6cd5\u91cc\u627e\u5230\u4e00\u4e2a\u7528\u5b57\u8282\u7801\u4e66\u5199\u7684,\n\u4f18\u5316\u5230\u6781\u81f4\u7684\u5c3e\u9012\u5f52scheduler.</p>\n<p>\u6211\u4f1a\u5728\u975e\u5c3e\u9012\u5f52\u8c03\u7528\u70b9\u5e94\u7528\u8fd9\u4e2ascheduler,\n\u4f60\u80fd\u540c\u901a\u8fc7\u9605\u8bfb<code>compiler.py</code>\u7684<code>v_tco</code>\u4ee5\u53ca<code>v_call</code>\u65b9\u6cd5, \u6765\u8fdb\u4e00\u6b65\u7406\u89e3\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u5b9e\u73b0.</p>\n<h2>Python\u51fd\u6570\u8c03\u7528</h2>\n<pre>f.<span class=\"o\">(</span>a, b, c<span class=\"o\">)</span>\n</pre>\n<p>\u50cf\u8fd9\u6837, \u8c03\u7528\u65f6\u52a0\u4e2a\u70b9\u7684\u51fd\u6570, \u5c31\u662f\u6309\u7167Python\u7684\u8c03\u7528\u7ea6\u5b9a. \u8fd9\u5e76\u4e0d\u548c\u6211\u4eec\u7684\u5c3e\u9012\u5f52\u4f18\u5316\u51b2\u7a81.</p>\n<h2>Imperative Programming</h2>\n<p>\u4e0b\u9762\u7684\u4ee3\u7801\u9700\u8981\u52a0\u8f7d\u9879\u76ee\u76ee\u5f55\u4e0b\u7684<code>base/prelude.ugt</code>.</p>\n<ul>\n<li><code>ref</code></li>\n</ul>\n<pre>Urgent&gt; <span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> ref <span class=\"nv\">1</span>\n<span class=\"o\">=</span>&gt; <span class=\"o\">()</span>\nUrgent&gt; <span class=\"nv\">x</span>\n<span class=\"o\">=</span>&gt; ref <span class=\"m\">1</span>\nUrgent&gt; x :<span class=\"o\">=</span> <span class=\"nv\">2</span>\n<span class=\"o\">=</span>&gt; <span class=\"o\">()</span>\nUrgent&gt; <span class=\"nv\">x</span>\n<span class=\"o\">=</span>&gt; ref <span class=\"m\">2</span>\nUrgent&gt; !x + <span class=\"nv\">2</span>\n<span class=\"o\">=</span>&gt; <span class=\"m\">4</span>\n</pre>\n<ul>\n<li><code>for</code></li>\n</ul>\n<pre>Urgent&gt; <span class=\"k\">for</span> <span class=\"o\">[</span><span class=\"m\">1</span>, <span class=\"m\">2</span>, <span class=\"m\">3</span><span class=\"o\">]</span> <span class=\"o\">(</span> x -&gt; \n  print x\n<span class=\"o\">)</span>\n<span class=\"m\">1</span>\n<span class=\"m\">2</span>\n<span class=\"nv\">3</span>\n<span class=\"o\">=</span>&gt; <span class=\"o\">()</span>\n</pre>\n<ul>\n<li><code>while</code></li>\n</ul>\n<pre>Urgent&gt; <span class=\"nb\">let</span> <span class=\"nv\">x</span> <span class=\"o\">=</span> ref <span class=\"nv\">1</span>\n<span class=\"o\">=</span>&gt; <span class=\"o\">()</span>\nUrgent&gt; <span class=\"k\">while</span> <span class=\"o\">{</span> !x &lt; <span class=\"m\">10</span> <span class=\"o\">}</span> <span class=\"o\">{</span>\n  <span class=\"k\">do</span> print !x\n  in x :<span class=\"o\">=</span> !x + <span class=\"m\">1</span>\n<span class=\"o\">}</span>\n\n<span class=\"m\">1</span>\n<span class=\"m\">2</span>\n<span class=\"m\">3</span>\n<span class=\"m\">4</span>\n<span class=\"m\">5</span>\n<span class=\"m\">6</span>\n<span class=\"m\">7</span>\n<span class=\"m\">8</span>\n<span class=\"nv\">9</span>\n<span class=\"o\">=</span>&gt; <span class=\"o\">()</span>\n</pre>\n<p>\u4e0a\u9762\u7684\u5faa\u73af\u6682\u65f6\u662f\u5c3e\u9012\u5f52\u5199\u7684, \u4e4b\u540e\u4f1a\u7528Python\u5b57\u8282\u7801\u91cd\u5199.</p>\n<p><code>for</code>\u548c<code>while</code>\u7684\u5b9e\u73b0\u5982\u4e0b:</p>\n<pre>rec <span class=\"k\">for</span> <span class=\"o\">=</span> seq -&gt; f -&gt;\n    seq match\n        <span class=\"o\">[]</span> <span class=\"o\">=</span>&gt; <span class=\"o\">()</span>,\n        hd :: <span class=\"nv\">tl</span> <span class=\"o\">=</span>&gt;\n            <span class=\"k\">do</span> f hd\n            in <span class=\"k\">for</span> tl f\n\nrec <span class=\"k\">while</span> <span class=\"o\">=</span> cond -&gt; f -&gt;\n    cond <span class=\"o\">()</span> ?\n        <span class=\"k\">do</span> f <span class=\"o\">()</span>\n        in <span class=\"k\">while</span> cond f\n    <span class=\"k\">else</span> <span class=\"o\">()</span>\n</pre>\n<p>\u90fd\u53ef\u4ee5\u826f\u597d\u5730\u5c3e\u9012\u5f52.</p>\n<h2>\u9879\u76ee\u6784\u5efa</h2>\n<p>urgent\u628a\u6240\u6709\u4ee3\u7801\u7f16\u8bd1\u6210\u5355\u4e2a.pyc\u6587\u4ef6.</p>\n<pre><span class=\"c1\"># \u7f16\u8bd1</span>\nsh&gt; ugt cc &lt;\u4e3b\u6a21\u5757.ugt&gt; &lt;a.pyc&gt; --project &lt;\u9879\u76ee\u6587\u4ef6.toml&gt;\n<span class=\"c1\"># \u76f4\u63a5\u6267\u884c</span>\nsh&gt; ugt run &lt;\u4e3b\u6a21\u5757.ugt&gt; --project &lt;\u9879\u76ee\u6587\u4ef6.toml&gt;\n<span class=\"c1\"># \u542f\u52a8REPL</span>\nsh&gt; ugt repl --project &lt;\u9879\u76ee\u6587\u4ef6.toml&gt;\n</pre>\n<p>\u4e00\u4e2a\u793a\u4f8b\u7684\u9879\u76ee\u6587\u4ef6\u89c1<code>bootstrap.toml</code>.</p>\n<p>packaging\u548cproject building\u8fd9\u4e9b\u65b9\u9762\u5176\u5b9e\u8fd8\u6ca1\u8bbe\u8ba1\u597d, \u4f46\u5148\u7528\u7740\u4e86. \u505a\u4e8b\u7b2c\u4e00.</p>\n<h2>WIP: Traits</h2>\n\n          </div>"}, "last_serial": 6554213, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "25b0626517d33bc1ab1458ca59866b1e", "sha256": "1b76d4ef3ebd7bbe3d98017ba99af0678caad01a5450ef8fdfe8bde02a4b6fa5"}, "downloads": -1, "filename": "urgent-0.1-py3.7.egg", "has_sig": false, "md5_digest": "25b0626517d33bc1ab1458ca59866b1e", "packagetype": "bdist_egg", "python_version": "3.7", "requires_python": ">=3.6.0", "size": 111378, "upload_time": "2020-01-23T15:11:32", "upload_time_iso_8601": "2020-01-23T15:11:32.608251Z", "url": "https://files.pythonhosted.org/packages/10/55/d3363a87ad87b67b87109fbd226dd86f4ce45c33703524c3b224f5e9d62a/urgent-0.1-py3.7.egg", "yanked": false}, {"comment_text": "", "digests": {"md5": "f34b4b48b00970dc6f64b57233f3159b", "sha256": "73cdda4f2c41d358a50791a4a9b9257c7881fcecfa4bf0cb0606e04acf84ad3c"}, "downloads": -1, "filename": "urgent-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "f34b4b48b00970dc6f64b57233f3159b", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 51282, "upload_time": "2020-01-23T15:11:29", "upload_time_iso_8601": "2020-01-23T15:11:29.938898Z", "url": "https://files.pythonhosted.org/packages/dc/39/1f185ae15c0ca12e0d100fae7322dea667d42157e4cfc6173e9443dbd6c4/urgent-0.1-py3-none-any.whl", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "516bf418d738f76b30391230f30bc881", "sha256": "e31b7bb1cdb951df71d4fb3a745559f3e554d9782f3766d831d21b07a07d8516"}, "downloads": -1, "filename": "urgent-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "516bf418d738f76b30391230f30bc881", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 51383, "upload_time": "2020-01-25T12:09:35", "upload_time_iso_8601": "2020-01-25T12:09:35.794558Z", "url": "https://files.pythonhosted.org/packages/e0/41/fec896ce5f7a7a918fe0d517ccc7aee5afb35c4bb9f8ff34a082c215fd2e/urgent-0.1.1-py3-none-any.whl", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "4bc766a16f5c5c0f86f20af1dbca7014", "sha256": "b1180a2d146028789210be588e6883c23c3998d0ea9e80c9c8b89208f4cf7e13"}, "downloads": -1, "filename": "urgent-0.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "4bc766a16f5c5c0f86f20af1dbca7014", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 51077, "upload_time": "2020-02-01T12:58:41", "upload_time_iso_8601": "2020-02-01T12:58:41.155293Z", "url": "https://files.pythonhosted.org/packages/28/f1/df42225cdc73496b179011f0317140474a39a63e63f9316264fcd7bc51e5/urgent-0.1.2-py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4bc766a16f5c5c0f86f20af1dbca7014", "sha256": "b1180a2d146028789210be588e6883c23c3998d0ea9e80c9c8b89208f4cf7e13"}, "downloads": -1, "filename": "urgent-0.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "4bc766a16f5c5c0f86f20af1dbca7014", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 51077, "upload_time": "2020-02-01T12:58:41", "upload_time_iso_8601": "2020-02-01T12:58:41.155293Z", "url": "https://files.pythonhosted.org/packages/28/f1/df42225cdc73496b179011f0317140474a39a63e63f9316264fcd7bc51e5/urgent-0.1.2-py3-none-any.whl", "yanked": false}], "timestamp": "Fri May  8 03:39:32 2020"}