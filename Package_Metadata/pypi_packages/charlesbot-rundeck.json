{"info": {"author": "Marvin Pinto", "author_email": "marvin@pinto.im", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3.4"], "description": "=========================\nCharlesbot Rundeck Plugin\n=========================\n\n.. image:: https://img.shields.io/travis/marvinpinto/charlesbot-rundeck/master.svg?style=flat-square\n    :target: https://travis-ci.org/marvinpinto/charlesbot-rundeck\n    :alt: Travis CI\n.. image:: https://img.shields.io/coveralls/marvinpinto/charlesbot-rundeck/master.svg?style=flat-square\n    :target: https://coveralls.io/github/marvinpinto/charlesbot-rundeck?branch=master\n    :alt: Code Coverage\n.. image:: https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square\n    :target: LICENSE.txt\n    :alt: Software License\n\nA Charlesbot__ plugin that integrates with Rundeck!\n\n__ https://github.com/marvinpinto/charlesbot\n\n\nHow does this work\n------------------\n\nThis plugin adds the following ``!help`` targets:\n\n.. code:: text\n\n    !lock status - Prints the status of the Rundeck deployment lock\n    !lock acquire - Acquires the Rundeck deployment lock (only available to Slack admins)\n    !lock release - Releases the Rundeck deployment lock (only available to Slack admins)\n\nThe ``!lock`` commands are designed to give folks the ability to quickly and\nefficiently disable (or enable) individual Rundeck__ jobs. This is very useful\nwhen troubleshooting a production issue where you don't want additional\ndeployments going out and adding fuel to the fire.\n\n__ http://rundeck.org/\n\n.. image:: https://raw.githubusercontent.com/marvinpinto/charlesbot-rundeck/master/images/rundeck-lock.png\n\nInstallation\n------------\n\n.. code:: bash\n\n    pip install charlesbot-rundeck\n\nInstructions for how to run Charlesbot are over at https://www.charlesbot.org/docs/installation.html.\n\nConfiguration\n-------------\n\nIn your Charlesbot ``config.yaml``, enable this plugin by adding the following\nentry to the ``main`` section:\n\n.. code:: yaml\n\n    main:\n      enabled_plugins:\n        - 'charlesbot_rundeck.rundeck.Rundeck'\n\nCreate a ``rundeck`` section that looks something similar to:\n\n.. code:: yaml\n\n    rundeck:\n      token: 'XXXX'  # Rundeck token\n      url: 'http://my.rundeck.test:4440'  # Rundeck base URL\n\n      # If you would like to set this channel's topic to something relevant\n      # whenever Rundeck jobs are locked, set this value. Otherwise you can omit\n      # it completely.\n      deployment_status_channel: 'charlesbot-rundeck-test-channel'\n\n      # project: project name\n      # name: job name\n      # friendly_name: friendly display name\n      lock_jobs:\n        - project: 'test-project'\n          name: 'deploy-website'\n          friendly_name: 'deploy website'\n        - project: 'test-project'\n          name: 'deploy-app'\n          friendly_name: 'deploy app'\n\nRundeck ACL Policy\n~~~~~~~~~~~~~~~~~~\n\nMake sure you have a ``apitoken.aclpolicy`` file that looks something like:\n\n.. code:: yaml\n\n    description: API project level access control\n    context:\n      project: '.*' # all projects\n    for:\n      # ...\n      job:\n        - allow: '*'\n      # ...\n    by:\n      group: api_token_group\n\nYou essentially need to give the ``api_token_group`` the ability to enable and\ndisable executions for all jobs in all projects (more details__)\n\n__ http://rundeck.org/docs/administration/access-control-policy.html#special-api-token-authentication-group\n\n\nNotes\n-----\n\nRundeck 2.6.2 introduces the ability to enable or disable ``passive`` mode\nprogramatically using the ``system/executions`` endpoint__. This endpoint\nunfortunately did not work for this use-case because it disables **all**\nRundeck job executions. This plugin is more geared towards folks who would\nrather disable individual job executions.\n\n__ http://rundeck.org/2.6.2/api/index.html#execution-mode\n\n\nDevelopment\n-----------\n\nAt a very minimum, you'll need Python 3.4.3, a functional Docker__ environment,\nand a `Slack bot token`__ to get going. I highly recommend you read the\nCharlesbot docs__ to get an idea of how this all fits together.\n\n__ https://www.docker.com\n__ https://my.slack.com/services/new/bot\n__ https://www.charlesbot.org/docs/\n\nCreate a local ``development.yaml`` file that looks something like the following.\n\n.. code:: yaml\n\n    main:\n      slackbot_token: 'xoxb-...'\n      enabled_plugins:\n        - 'charlesbot_rundeck.rundeck.Rundeck'\n\n    rundeck:\n      token: 'baiY8aw4Ieng0aQuoo'\n      url: 'http://my.rundeck.test:4440'\n      deployment_status_channel: 'charlesbot-rundeck-test-channel'\n      lock_jobs:\n        - project: 'test-project'\n          name: 'deploy-website'\n          friendly_name: 'deploy website'\n        - project: 'test-project'\n          name: 'deploy-app'\n          friendly_name: 'deploy app'\n\nAdd the following entry to your ``/etc/hosts`` file.\n\n.. code:: text\n\n    172.17.0.1 my.rundeck.test\n\nStart up a local Rundeck Docker instance.\n\n.. code:: bash\n\n    make rundeck-server\n\nAfter your Rundeck instance is up and running, seed it with some sample\nproject/job data.\n\n.. code:: bash\n\n    make rundeck-server-bootstrap\n\nAfter you have all of this in place, you should be ready to spin up your local Charlesbot instance!\n\n.. code:: bash\n\n    make run\n\nLicense\n-------\nSee the LICENSE.txt__ file for license rights and limitations (MIT).\n\n__ ./LICENSE.txt", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/marvinpinto/charlesbot-rundeck", "keywords": "slack robot chatops charlesbot charlesbot-rundeck", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "charlesbot-rundeck", "package_url": "https://pypi.org/project/charlesbot-rundeck/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/charlesbot-rundeck/", "project_urls": {"Homepage": "https://github.com/marvinpinto/charlesbot-rundeck"}, "release_url": "https://pypi.org/project/charlesbot-rundeck/0.2.2/", "requires_dist": null, "requires_python": "", "summary": "A Charlesbot plugin that integrates with Rundeck", "version": "0.2.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://travis-ci.org/marvinpinto/charlesbot-rundeck\" rel=\"nofollow\"><img alt=\"Travis CI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/65586a1c7f95458996f44415d0e8c027adb1c039/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f6d617276696e70696e746f2f636861726c6573626f742d72756e6465636b2f6d61737465722e7376673f7374796c653d666c61742d737175617265\"></a>\n<a href=\"https://coveralls.io/github/marvinpinto/charlesbot-rundeck?branch=master\" rel=\"nofollow\"><img alt=\"Code Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/cb11ddbecc0e7d7b5f009459690a671addaca896/68747470733a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f6d617276696e70696e746f2f636861726c6573626f742d72756e6465636b2f6d61737465722e7376673f7374796c653d666c61742d737175617265\"></a>\n<a href=\"LICENSE.txt\" rel=\"nofollow\"><img alt=\"Software License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3774e3275f579e894cbbfbf88f461a319ba9f84b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d627269676874677265656e2e7376673f7374796c653d666c61742d737175617265\"></a>\n<p>A <a href=\"https://github.com/marvinpinto/charlesbot\" rel=\"nofollow\">Charlesbot</a> plugin that integrates with Rundeck!</p>\n<div id=\"how-does-this-work\">\n<h2>How does this work</h2>\n<p>This plugin adds the following <tt>!help</tt> targets:</p>\n<pre>!lock status - Prints the status of the Rundeck deployment lock\n!lock acquire - Acquires the Rundeck deployment lock (only available to Slack admins)\n!lock release - Releases the Rundeck deployment lock (only available to Slack admins)\n</pre>\n<p>The <tt>!lock</tt> commands are designed to give folks the ability to quickly and\nefficiently disable (or enable) individual <a href=\"http://rundeck.org/\" rel=\"nofollow\">Rundeck</a> jobs. This is very useful\nwhen troubleshooting a production issue where you don\u2019t want additional\ndeployments going out and adding fuel to the fire.</p>\n<img alt=\"https://raw.githubusercontent.com/marvinpinto/charlesbot-rundeck/master/images/rundeck-lock.png\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f4f8b45f47902edddcb1cf836af0f3b846199093/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6d617276696e70696e746f2f636861726c6573626f742d72756e6465636b2f6d61737465722f696d616765732f72756e6465636b2d6c6f636b2e706e67\">\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<pre>pip install charlesbot-rundeck\n</pre>\n<p>Instructions for how to run Charlesbot are over at <a href=\"https://www.charlesbot.org/docs/installation.html\" rel=\"nofollow\">https://www.charlesbot.org/docs/installation.html</a>.</p>\n</div>\n<div id=\"configuration\">\n<h2>Configuration</h2>\n<p>In your Charlesbot <tt>config.yaml</tt>, enable this plugin by adding the following\nentry to the <tt>main</tt> section:</p>\n<pre><span class=\"nt\">main</span><span class=\"p\">:</span>\n  <span class=\"nt\">enabled_plugins</span><span class=\"p\">:</span>\n    <span class=\"p-Indicator\">-</span> <span class=\"s\">'charlesbot_rundeck.rundeck.Rundeck'</span>\n</pre>\n<p>Create a <tt>rundeck</tt> section that looks something similar to:</p>\n<pre><span class=\"nt\">rundeck</span><span class=\"p\">:</span>\n  <span class=\"nt\">token</span><span class=\"p\">:</span> <span class=\"s\">'XXXX'</span>  <span class=\"c1\"># Rundeck token</span>\n  <span class=\"nt\">url</span><span class=\"p\">:</span> <span class=\"s\">'http://my.rundeck.test:4440'</span>  <span class=\"c1\"># Rundeck base URL</span>\n\n  <span class=\"c1\"># If you would like to set this channel's topic to something relevant</span>\n  <span class=\"c1\"># whenever Rundeck jobs are locked, set this value. Otherwise you can omit</span>\n  <span class=\"c1\"># it completely.</span>\n  <span class=\"nt\">deployment_status_channel</span><span class=\"p\">:</span> <span class=\"s\">'charlesbot-rundeck-test-channel'</span>\n\n  <span class=\"c1\"># project: project name</span>\n  <span class=\"c1\"># name: job name</span>\n  <span class=\"c1\"># friendly_name: friendly display name</span>\n  <span class=\"nt\">lock_jobs</span><span class=\"p\">:</span>\n    <span class=\"p-Indicator\">-</span> <span class=\"nt\">project</span><span class=\"p\">:</span> <span class=\"s\">'test-project'</span>\n      <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"s\">'deploy-website'</span>\n      <span class=\"nt\">friendly_name</span><span class=\"p\">:</span> <span class=\"s\">'deploy</span><span class=\"nv\"> </span><span class=\"s\">website'</span>\n    <span class=\"p-Indicator\">-</span> <span class=\"nt\">project</span><span class=\"p\">:</span> <span class=\"s\">'test-project'</span>\n      <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"s\">'deploy-app'</span>\n      <span class=\"nt\">friendly_name</span><span class=\"p\">:</span> <span class=\"s\">'deploy</span><span class=\"nv\"> </span><span class=\"s\">app'</span>\n</pre>\n<div id=\"rundeck-acl-policy\">\n<h3>Rundeck ACL Policy</h3>\n<p>Make sure you have a <tt>apitoken.aclpolicy</tt> file that looks something like:</p>\n<pre><span class=\"nt\">description</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">API project level access control</span>\n<span class=\"nt\">context</span><span class=\"p\">:</span>\n  <span class=\"nt\">project</span><span class=\"p\">:</span> <span class=\"s\">'.*'</span> <span class=\"c1\"># all projects</span>\n<span class=\"nt\">for</span><span class=\"p\">:</span>\n  <span class=\"c1\"># ...</span>\n  <span class=\"nt\">job</span><span class=\"p\">:</span>\n    <span class=\"p-Indicator\">-</span> <span class=\"nt\">allow</span><span class=\"p\">:</span> <span class=\"s\">'*'</span>\n  <span class=\"c1\"># ...</span>\n<span class=\"nt\">by</span><span class=\"p\">:</span>\n  <span class=\"nt\">group</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">api_token_group</span>\n</pre>\n<p>You essentially need to give the <tt>api_token_group</tt> the ability to enable and\ndisable executions for all jobs in all projects (more <a href=\"http://rundeck.org/docs/administration/access-control-policy.html#special-api-token-authentication-group\" rel=\"nofollow\">details</a>)</p>\n</div>\n</div>\n<div id=\"notes\">\n<h2>Notes</h2>\n<p>Rundeck 2.6.2 introduces the ability to enable or disable <tt>passive</tt> mode\nprogramatically using the <tt>system/executions</tt> <a href=\"http://rundeck.org/2.6.2/api/index.html#execution-mode\" rel=\"nofollow\">endpoint</a>. This endpoint\nunfortunately did not work for this use-case because it disables <strong>all</strong>\nRundeck job executions. This plugin is more geared towards folks who would\nrather disable individual job executions.</p>\n</div>\n<div id=\"development\">\n<h2>Development</h2>\n<p>At a very minimum, you\u2019ll need Python 3.4.3, a functional <a href=\"https://www.docker.com\" rel=\"nofollow\">Docker</a> environment,\nand a <a href=\"https://my.slack.com/services/new/bot\" rel=\"nofollow\">Slack bot token</a> to get going. I highly recommend you read the\nCharlesbot <a href=\"https://www.charlesbot.org/docs/\" rel=\"nofollow\">docs</a> to get an idea of how this all fits together.</p>\n<p>Create a local <tt>development.yaml</tt> file that looks something like the following.</p>\n<pre><span class=\"nt\">main</span><span class=\"p\">:</span>\n  <span class=\"nt\">slackbot_token</span><span class=\"p\">:</span> <span class=\"s\">'xoxb-...'</span>\n  <span class=\"nt\">enabled_plugins</span><span class=\"p\">:</span>\n    <span class=\"p-Indicator\">-</span> <span class=\"s\">'charlesbot_rundeck.rundeck.Rundeck'</span>\n\n<span class=\"nt\">rundeck</span><span class=\"p\">:</span>\n  <span class=\"nt\">token</span><span class=\"p\">:</span> <span class=\"s\">'baiY8aw4Ieng0aQuoo'</span>\n  <span class=\"nt\">url</span><span class=\"p\">:</span> <span class=\"s\">'http://my.rundeck.test:4440'</span>\n  <span class=\"nt\">deployment_status_channel</span><span class=\"p\">:</span> <span class=\"s\">'charlesbot-rundeck-test-channel'</span>\n  <span class=\"nt\">lock_jobs</span><span class=\"p\">:</span>\n    <span class=\"p-Indicator\">-</span> <span class=\"nt\">project</span><span class=\"p\">:</span> <span class=\"s\">'test-project'</span>\n      <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"s\">'deploy-website'</span>\n      <span class=\"nt\">friendly_name</span><span class=\"p\">:</span> <span class=\"s\">'deploy</span><span class=\"nv\"> </span><span class=\"s\">website'</span>\n    <span class=\"p-Indicator\">-</span> <span class=\"nt\">project</span><span class=\"p\">:</span> <span class=\"s\">'test-project'</span>\n      <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"s\">'deploy-app'</span>\n      <span class=\"nt\">friendly_name</span><span class=\"p\">:</span> <span class=\"s\">'deploy</span><span class=\"nv\"> </span><span class=\"s\">app'</span>\n</pre>\n<p>Add the following entry to your <tt>/etc/hosts</tt> file.</p>\n<pre>172.17.0.1 my.rundeck.test\n</pre>\n<p>Start up a local Rundeck Docker instance.</p>\n<pre>make rundeck-server\n</pre>\n<p>After your Rundeck instance is up and running, seed it with some sample\nproject/job data.</p>\n<pre>make rundeck-server-bootstrap\n</pre>\n<p>After you have all of this in place, you should be ready to spin up your local Charlesbot instance!</p>\n<pre>make run\n</pre>\n</div>\n<div id=\"license\">\n<h2>License</h2>\n<p>See the <a href=\"./LICENSE.txt\" rel=\"nofollow\">LICENSE.txt</a> file for license rights and limitations (MIT).</p>\n</div>\n\n          </div>"}, "last_serial": 1870399, "releases": {"0.0.1": [], "0.2.0": [{"comment_text": "", "digests": {"md5": "4a2da37c1294696a03912f839dcf845b", "sha256": "6f6490166b3d63b1d6778f9835a2d88ab6928e906d97e0845b244c663461f0d4"}, "downloads": -1, "filename": "charlesbot-rundeck-0.2.0.tar.gz", "has_sig": false, "md5_digest": "4a2da37c1294696a03912f839dcf845b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6376, "upload_time": "2015-12-19T18:48:09", "upload_time_iso_8601": "2015-12-19T18:48:09.707212Z", "url": "https://files.pythonhosted.org/packages/e0/44/a49687c2f987a724b9ccb9202c42fcb3b13d7eda3ab28c689085c406b263/charlesbot-rundeck-0.2.0.tar.gz", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "662d1d9e93b7c88e04098fb24f2800fc", "sha256": "eb8186cb64dd28633f438311b1722358e6bb83488c77208346929c5a43ce5434"}, "downloads": -1, "filename": "charlesbot-rundeck-0.2.1.tar.gz", "has_sig": false, "md5_digest": "662d1d9e93b7c88e04098fb24f2800fc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6383, "upload_time": "2015-12-19T18:55:16", "upload_time_iso_8601": "2015-12-19T18:55:16.484212Z", "url": "https://files.pythonhosted.org/packages/53/fc/cd64f9b719cc68563122938f59ea6b82e359cb1ef74f219b0eb0a5151df3/charlesbot-rundeck-0.2.1.tar.gz", "yanked": false}], "0.2.2": [{"comment_text": "", "digests": {"md5": "5782192ccc0a994b329cfd8114b3c17a", "sha256": "92012df7a4c290338568db9f2d85bfad77a7916f759b3a05244cd0e77ed77d68"}, "downloads": -1, "filename": "charlesbot-rundeck-0.2.2.tar.gz", "has_sig": false, "md5_digest": "5782192ccc0a994b329cfd8114b3c17a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6589, "upload_time": "2015-12-19T20:56:55", "upload_time_iso_8601": "2015-12-19T20:56:55.410789Z", "url": "https://files.pythonhosted.org/packages/c9/6c/660ffd6c94b028c82174050a3080048b1ef6ccf004999d943debf768698f/charlesbot-rundeck-0.2.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "5782192ccc0a994b329cfd8114b3c17a", "sha256": "92012df7a4c290338568db9f2d85bfad77a7916f759b3a05244cd0e77ed77d68"}, "downloads": -1, "filename": "charlesbot-rundeck-0.2.2.tar.gz", "has_sig": false, "md5_digest": "5782192ccc0a994b329cfd8114b3c17a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6589, "upload_time": "2015-12-19T20:56:55", "upload_time_iso_8601": "2015-12-19T20:56:55.410789Z", "url": "https://files.pythonhosted.org/packages/c9/6c/660ffd6c94b028c82174050a3080048b1ef6ccf004999d943debf768698f/charlesbot-rundeck-0.2.2.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:34:25 2020"}