{"info": {"author": "Gilles Lenfant", "author_email": "gilles.lenfant@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2.6", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: Implementation :: CPython", "Topic :: Utilities"], "description": "======\nstopit\n======\n\nRaise asynchronous exceptions in other threads, control the timeout of\nblocks or callables with two context managers and two decorators.\n\n.. attention:: API Changes\n\n   Users of 1.0.0 should upgrade their source code:\n\n   - ``stopit.Timeout`` is renamed ``stopit.ThreadingTimeout``\n   - ``stopit.timeoutable`` is renamed ``stopit.threading_timeoutable``\n\n   Explications follow below...\n\n.. contents::\n\nOverview\n========\n\nThis module provides:\n\n- a function that raises an exception in another thread, including the main\n  thread.\n\n- two context managers that may stop its inner block activity on timeout.\n\n- two decorators that may stop its decorated callables on timeout.\n\nDeveloped and tested with CPython 2.6, 2.7, 3.3 and 3.4 on MacOSX. Should work\non any OS (xBSD, Linux, Windows) except when explicitly mentioned.\n\n.. note::\n\n   Signal based timeout controls, namely ``SignalTimeout`` context manager and\n   ``signal_timeoutable`` decorator won't work in Windows that has no support\n   for ``signal.SIGALRM``. Any help to work around this is welcome.\n\nInstallation\n============\n\nUsing ``stopit`` in your application\n------------------------------------\n\nBoth work identically:\n\n.. code:: bash\n\n  easy_install stopit\n  pip install stopit\n\nDeveloping ``stopit``\n---------------------\n\n.. code:: bash\n\n  # You should prefer forking if you have a Github account\n  git clone https://github.com/glenfant/stopit.git\n  cd stopit\n  python setup.py develop\n\n  # Does it work for you ?\n  python setup.py test\n\nPublic API\n==========\n\nException\n---------\n\n``stopit.TimeoutException``\n...........................\n\nA ``stopit.TimeoutException`` may be raised in a timeout context manager\ncontrolled block.\n\nThis exception may be propagated in your application at the end of execution\nof the context manager controlled block, see the ``swallow_ex`` parameter of\nthe context managers.\n\nNote that the ``stopit.TimeoutException`` is always swallowed after the\nexecution of functions decorated with ``xxx_timeoutable(...)``. Anyway, you\nmay catch this exception **within** the decorated function.\n\nThreading based resources\n-------------------------\n\n.. warning::\n\n   Threading based resources will only work with CPython implementations\n   since we use CPython specific low level API. This excludes Iron Python,\n   Jython, Pypy, ...\n\n   Will not stop the execution of blocking Python atomic instructions that\n   acquire the GIL. In example, if the destination thread is actually\n   executing a ``time.sleep(20)``, the asynchronous exception is effective\n   **after** its execution.\n\n``stopit.async_raise``\n......................\n\nA function that raises an arbitrary exception in another thread\n\n``async_raise(tid, exception)``\n\n- ``tid`` is the thread identifier as provided by the ``ident`` attribute of a\n  thread object. See the documentation of the ``threading`` module for further\n  information.\n\n- ``exception`` is the exception class or object to raise in the thread.\n\n``stopit.ThreadingTimeout``\n...........................\n\nA context manager that \"kills\" its inner block execution that exceeds the\nprovided time.\n\n``ThreadingTimeout(seconds, swallow_exc=True)``\n\n- ``seconds`` is the number of seconds allowed to the execution of the context\n  managed block.\n\n- ``swallow_exc`` : if ``False``, the possible ``stopit.TimeoutException`` will\n  be re-raised when quitting the context managed block. **Attention**: a\n  ``True`` value does not swallow other potential exceptions.\n\n**Methods and attributes**\n\nof a ``stopit.ThreadingTimeout`` context manager.\n\n.. list-table::\n   :header-rows: 1\n\n   * - Method / Attribute\n     - Description\n\n   * - ``.cancel()``\n     - Cancels the timeout control. This method is intended for use within the\n       block that's under timeout control, specifically to cancel the timeout\n       control. Means that all code executed after this call may be executed\n       till the end.\n\n   * - ``.state``\n     - This attribute indicated the actual status of the timeout control. It\n       may take the value of the ``EXECUTED``, ``EXECUTING``, ``TIMED_OUT``,\n       ``INTERRUPTED`` or ``CANCELED`` attributes. See below.\n\n   * - ``.EXECUTING``\n     - The timeout control is under execution. We are typically executing\n       within the code under control of the context manager.\n\n   * - ``.EXECUTED``\n     - Good news: the code under timeout control completed normally within the\n       assigned time frame.\n\n   * - ``.TIMED_OUT``\n     - Bad news: the code under timeout control has been sleeping too long.\n       The objects supposed to be created or changed within the timeout\n       controlled block should be considered as non existing or corrupted.\n       Don't play with them otherwise informed.\n\n   * - ``.INTERRUPTED``\n     - The code under timeout control may itself raise explicit\n       ``stopit.TimeoutException`` for any application logic reason that may\n       occur. This intentional exit can be spotted from outside the timeout\n       controlled block with this state value.\n\n   * - ``.CANCELED``\n     - The timeout control has been intentionally canceled and the code\n       running under timeout control did complete normally. But perhaps after\n       the assigned time frame.\n\n\nA typical usage:\n\n.. code:: python\n\n   import stopit\n   # ...\n   with stopit.ThreadingTimeout(10) as to_ctx_mgr:\n       assert to_ctx_mgr.state == to_ctx_mgr.EXECUTING\n       # Something potentially very long but which\n       # ...\n\n   # OK, let's check what happened\n   if to_ctx_mgr.state == to_ctx_mgr.EXECUTED:\n       # All's fine, everything was executed within 10 seconds\n   elif to_ctx_mgr.state == to_ctx_mgr.EXECUTING:\n       # Hmm, that's not possible outside the block\n   elif to_ctx_mgr.state == to_ctx_mgr.TIMED_OUT:\n       # Eeek the 10 seconds timeout occurred while executing the block\n   elif to_ctx_mgr.state == to_ctx_mgr.INTERRUPTED:\n       # Oh you raised specifically the TimeoutException in the block\n   elif to_ctx_mgr.state == to_ctx_mgr.CANCELED:\n       # Oh you called to_ctx_mgr.cancel() method within the block but it\n       # executed till the end\n   else:\n       # That's not possible\n\nNotice that the context manager object may be considered as a boolean\nindicating (if ``True``) that the block executed normally:\n\n.. code:: python\n\n   if to_ctx_mgr:\n       # Yes, the code under timeout control completed\n       # Objects it created or changed may be considered consistent\n\n``stopit.threading_timeoutable``\n................................\n\nA decorator that kills the function or method it decorates, if it does not\nreturn within a given time frame.\n\n``stopit.threading_timeoutable([default [, timeout_param]])``\n\n- ``default`` is the value to be returned by the decorated function or method of\n  when its execution timed out, to notify the caller code that the function\n  did not complete within the assigned time frame.\n\n  If this parameter is not provided, the decorated function or method will\n  return a ``None`` value when its execution times out.\n\n  .. code:: python\n\n     @stopit.threading_timeoutable(default='not finished')\n     def infinite_loop():\n         # As its name says...\n\n     result = infinite_loop(timeout=5)\n     assert result == 'not finished'\n\n- ``timeout_param``: The function or method you have decorated may require a\n  ``timeout`` named parameter for whatever reason. This empowers you to change\n  the name of the ``timeout`` parameter in the decorated function signature to\n  whatever suits, and prevent a potential naming conflict.\n\n  .. code:: python\n\n     @stopit.threading_timeoutable(timeout_param='my_timeout')\n     def some_slow_function(a, b, timeout='whatever'):\n         # As its name says...\n\n     result = some_slow_function(1, 2, timeout=\"something\", my_timeout=2)\n\n\nAbout the decorated function\n............................\n\nor method...\n\nAs you noticed above, you just need to add the ``timeout`` parameter when\ncalling the function or method. Or whatever other name for this you chose with\nthe ``timeout_param`` of the decorator. When calling the real inner function\nor method, this parameter is removed.\n\n\nSignaling based resources\n-------------------------\n\n.. warning::\n\n   Using signaling based resources will **not** work under Windows or any OS\n   that's not based on Unix.\n\n``stopit.SignalTimeout`` and ``stopit.signal_timeoutable`` have exactly the\nsame API as their respective threading based resources, namely\n`stopit.ThreadingTimeout`_ and `stopit.threading_timeoutable`_.\n\nSee the `comparison chart`_ that warns on the more or less subtle differences\nbetween the `Threading based resources`_ and the `Signaling based resources`_.\n\nLogging\n-------\n\nThe ``stopit`` named logger emits a warning each time a block of code\nexecution exceeds the associated timeout. To turn logging off, just:\n\n.. code:: python\n\n   import logging\n   stopit_logger = logging.getLogger('stopit')\n   stopit_logger.seLevel(logging.ERROR)\n\n.. _comparison chart:\n\nComparing thread based and signal based timeout control\n-------------------------------------------------------\n\n.. list-table::\n   :header-rows: 1\n\n   * - Feature\n     - Threading based resources\n     - Signaling based resources\n\n   * - GIL\n     - Can't interrupt a long Python atomic instruction. e.g. if\n       ``time.sleep(20.0)`` is actually executing, the timeout will take\n       effect at the end of the execution of this line.\n     - Don't care of it\n\n   * - Thread safety\n     - **Yes** : Thread safe as long as each thread uses its own ``ThreadingTimeout``\n       context manager or ``threading_timeoutable`` decorator.\n     - **Not** thread safe. Could yield unpredictable results in a\n       multithreads application.\n\n   * - Nestable context managers\n     - **Yes** : you can nest threading based context managers\n     - **No** : never nest a signaling based context manager in another one.\n       The innermost context manager will automatically cancel the timeout\n       control of outer ones.\n\n   * - Accuracy\n     - Any positive floating value is accepted as timeout value. The accuracy\n       depends on the GIL interval checking of your platform. See the doc on\n       ``sys.getcheckinterval`` and ``sys.setcheckinterval`` for your Python\n       version.\n     - Due to the use of ``signal.SIGALRM``, we need provide an integer number\n       of seconds. So a timeout of ``0.6`` seconds will ve automatically\n       converted into a timeout of zero second!\n\n   * - Supported platforms\n     - Any CPython 2.6, 2.7 or 3.3 on any OS with threading support.\n     - Any Python 2.6, 2.7 or 3.3 with ``signal.SIGALRM`` support. This\n       excludes Windows boxes\n\nKnown issues\n============\n\nTimeout accuracy\n----------------\n\n**Important**: the way CPython supports threading and asynchronous features has\nimpacts on the accuracy of the timeout. In other words, if you assign a 2.0\nseconds timeout to a context managed block or a decorated callable, the\neffective code block / callable execution interruption may occur some\nfractions of seconds after this assigned timeout.\n\nFor more background about this issue - that cannot be fixed - please read\nPython gurus thoughts about Python threading, the GIL and context switching\nlike these ones:\n\n- http://pymotw.com/2/threading/\n- https://wiki.python.org/moin/GlobalInterpreterLock\n\nThis is the reason why I am more \"tolerant\" on timeout accuracy in the tests\nyou can read thereafter than I should be for a critical real-time application\n(that's not in the scope of Python).\n\nIt is anyway possible to improve this accuracy at the expense of the global\nperformances decreasing the check interval which defaults to 100. See:\n\n- https://docs.python.org/2.7/library/sys.html#sys.getcheckinterval\n- https://docs.python.org/2.7/library/sys.html#sys.getcheckinterval\n\nIf this is a real issue for users (want a precise timeout and not an\napproximative one), a future release will add the optional ``check_interval``\nparameter to the context managers and decorators. This parameter will enable\nto lower temporarily the threads switching check interval, having a more\naccurate timeout at the expense of the overall performances while the context\nmanaged block or decorated functions are executing.\n\n``gevent`` support\n------------------\n\nThreading timeout control as mentioned in `Threading based resources`_ does not work as expected\nwhen used in the context of a gevent worker.\n\nSee the discussion in `Issue 13 <https://github.com/glenfant/stopit/issues/13>`_ for more details.\n\nTests and demos\n===============\n\n.. code:: pycon\n\n   >>> import threading\n   >>> from stopit import async_raise, TimeoutException\n\nIn a real application, you should either use threading based timeout resources:\n\n.. code:: pycon\n\n   >>> from stopit import ThreadingTimeout as Timeout, threading_timeoutable as timeoutable  #doctest: +SKIP\n\nOr the POSIX signal based resources:\n\n.. code:: pycon\n\n   >>> from stopit import SignalTimeout as Timeout, signal_timeoutable as timeoutable  #doctest: +SKIP\n\nLet's define some utilities:\n\n.. code:: pycon\n\n   >>> import time\n   >>> def fast_func():\n   ...     return 0\n   >>> def variable_duration_func(duration):\n   ...     t0 = time.time()\n   ...     while True:\n   ...         dummy = 0\n   ...         if time.time() - t0 > duration:\n   ...             break\n   >>> exc_traces = []\n   >>> def variable_duration_func_handling_exc(duration, exc_traces):\n   ...     try:\n   ...         t0 = time.time()\n   ...         while True:\n   ...             dummy = 0\n   ...             if time.time() - t0 > duration:\n   ...                 break\n   ...     except Exception as exc:\n   ...         exc_traces.append(exc)\n   >>> def func_with_exception():\n   ...     raise LookupError()\n\n``async_raise`` function raises an exception in another thread\n--------------------------------------------------------------\n\nTesting ``async_raise()`` with a thread of 5 seconds:\n\n.. code:: pycon\n\n   >>> five_seconds_threads = threading.Thread(\n   ...     target=variable_duration_func_handling_exc, args=(5.0, exc_traces))\n   >>> start_time = time.time()\n   >>> five_seconds_threads.start()\n   >>> thread_ident = five_seconds_threads.ident\n   >>> five_seconds_threads.is_alive()\n   True\n\nWe raise a LookupError in that thread:\n\n.. code:: pycon\n\n   >>> async_raise(thread_ident, LookupError)\n\nOkay but we must wait few milliseconds the thread death since the exception is\nasynchronous:\n\n.. code:: pycon\n\n   >>> while five_seconds_threads.is_alive():\n   ...     pass\n\nAnd we can notice that we stopped the thread before it stopped by itself:\n\n.. code:: pycon\n\n   >>> time.time() - start_time < 0.5\n   True\n   >>> len(exc_traces)\n   1\n   >>> exc_traces[-1].__class__.__name__\n   'LookupError'\n\n``Timeout`` context manager\n---------------------------\n\nThe context manager stops the execution of its inner block after a given time.\nYou may manage the way the timeout occurs using a ``try: ... except: ...``\nconstruct or by inspecting the context manager ``state`` attribute after the\nblock.\n\nSwallowing Timeout exceptions\n.............................\n\nWe check that the fast functions return as outside our context manager:\n\n.. code:: pycon\n\n   >>> with Timeout(5.0) as timeout_ctx:\n   ...     result = fast_func()\n   >>> result\n   0\n   >>> timeout_ctx.state == timeout_ctx.EXECUTED\n   True\n\nAnd the context manager is considered as ``True`` (the block executed its last\nline):\n\n.. code:: pycon\n\n   >>> bool(timeout_ctx)\n   True\n\nWe check that slow functions are interrupted:\n\n.. code:: pycon\n\n   >>> start_time = time.time()\n   >>> with Timeout(2.0) as timeout_ctx:\n   ...     variable_duration_func(5.0)\n   >>> time.time() - start_time < 2.2\n   True\n   >>> timeout_ctx.state == timeout_ctx.TIMED_OUT\n   True\n\nAnd the context manager is considered as ``False`` since the block did timeout.\n\n.. code:: pycon\n\n   >>> bool(timeout_ctx)\n   False\n\nOther exceptions are propagated and must be treated as usual:\n\n.. code:: pycon\n\n   >>> try:\n   ...     with Timeout(5.0) as timeout_ctx:\n   ...         result = func_with_exception()\n   ... except LookupError:\n   ...     result = 'exception_seen'\n   >>> timeout_ctx.state == timeout_ctx.EXECUTING\n   True\n   >>> result\n   'exception_seen'\n\nPropagating ``TimeoutException``\n................................\n\nWe can choose to propagate the ``TimeoutException`` too. Potential exceptions\nhave to be handled:\n\n.. code:: pycon\n\n   >>> result = None\n   >>> start_time = time.time()\n   >>> try:\n   ...     with Timeout(2.0, swallow_exc=False) as timeout_ctx:\n   ...         variable_duration_func(5.0)\n   ... except TimeoutException:\n   ...     result = 'exception_seen'\n   >>> time.time() - start_time < 2.2\n   True\n   >>> result\n   'exception_seen'\n   >>> timeout_ctx.state == timeout_ctx.TIMED_OUT\n   True\n\nOther exceptions must be handled too:\n\n.. code:: pycon\n\n   >>> result = None\n   >>> start_time = time.time()\n   >>> try:\n   ...     with Timeout(2.0, swallow_exc=False) as timeout_ctx:\n   ...         func_with_exception()\n   ... except Exception:\n   ...     result = 'exception_seen'\n   >>> time.time() - start_time < 0.1\n   True\n   >>> result\n   'exception_seen'\n   >>> timeout_ctx.state == timeout_ctx.EXECUTING\n   True\n\n``timeoutable`` callable decorator\n----------------------------------\n\nThis decorator stops the execution of any callable that should not last a\ncertain amount of time.\n\nYou may use a decorated callable without timeout control if you don't provide\nthe ``timeout`` optional argument:\n\n.. code:: pycon\n\n   >>> @timeoutable()\n   ... def fast_double(value):\n   ...     return value * 2\n   >>> fast_double(3)\n   6\n\nYou may specify that timeout with the ``timeout`` optional argument.\nInterrupted callables return None:\n\n.. code:: pycon\n\n   >>> @timeoutable()\n   ... def infinite():\n   ...     while True:\n   ...         pass\n   ...     return 'whatever'\n   >>> infinite(timeout=1) is None\n   True\n\nOr any other value provided to the ``timeoutable`` decorator parameter:\n\n.. code:: pycon\n\n   >>> @timeoutable('unexpected')\n   ... def infinite():\n   ...     while True:\n   ...         pass\n   ...     return 'whatever'\n   >>> infinite(timeout=1)\n   'unexpected'\n\nIf the ``timeout`` parameter name may clash with your callable signature, you\nmay change it using ``timeout_param``:\n\n.. code:: pycon\n\n   >>> @timeoutable('unexpected', timeout_param='my_timeout')\n   ... def infinite():\n   ...     while True:\n   ...         pass\n   ...     return 'whatever'\n   >>> infinite(my_timeout=1)\n   'unexpected'\n\nIt works on instance methods too:\n\n.. code:: pycon\n\n   >>> class Anything(object):\n   ...     @timeoutable('unexpected')\n   ...     def infinite(self, value):\n   ...         assert type(value) is int\n   ...         while True:\n   ...             pass\n   >>> obj = Anything()\n   >>> obj.infinite(2, timeout=1)\n   'unexpected'\n\nLinks\n=====\n\nSource code (clone, fork, ...)\n  https://github.com/glenfant/stopit\n\nIssues tracker\n  https://github.com/glenfant/stopit/issues\n\nPyPI\n  https://pypi.python.org/pypi/stopit\n\nCredits\n=======\n\n- This is a NIH package which is mainly a theft of `Gabriel Ahtune's recipe\n  <http://gahtune.blogspot.fr/2013/08/a-timeout-context-manager.html>`_ with\n  tests, minor improvements and refactorings, documentation and setuptools\n  awareness I made since I'm somehow tired to copy/paste this recipe among\n  projects that need timeout control.\n\n- `Gilles Lenfant <gilles.lenfant@gmail.com>`_: package creator and\n  maintainer.\n\nLicense\n=======\n\nThis software is open source delivered under the terms of the MIT license. See the ``LICENSE`` file of this repository.\n\nChanges log\n===========\n\n1.1.2 - 2018-02-09\n------------------\n\n* Changed license to MIT\n* Tested with Python 3.5 and 3.6\n\n1.1.1 - 2015-03-22\n------------------\n\n* Fixed bug of timeout context manager as bool under Python 2.x\n* Tested with Python 3.4\n\n1.1.0 - 2014-05-02\n------------------\n\n* Added support for TIMER signal based timeout control (Posix OS only)\n* API changes due to new timeout controls\n* An exhaustive documentation.\n\n1.0.0 - 2014-02-09\n------------------\n\nInitial version", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://pypi.python.org/pypi/stopit", "keywords": "threads timeout", "license": "GPLv3", "maintainer": "", "maintainer_email": "", "name": "stopit", "package_url": "https://pypi.org/project/stopit/", "platform": "", "project_url": "https://pypi.org/project/stopit/", "project_urls": {"Homepage": "http://pypi.python.org/pypi/stopit"}, "release_url": "https://pypi.org/project/stopit/1.1.2/", "requires_dist": null, "requires_python": "", "summary": "Timeout control decorator and context managers, raise any exception in another thread", "version": "1.1.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>Raise asynchronous exceptions in other threads, control the timeout of\nblocks or callables with two context managers and two decorators.</p>\n<div>\n<p>Attention!</p>\n<p>API Changes</p>\n<p>Users of 1.0.0 should upgrade their source code:</p>\n<ul>\n<li><tt>stopit.Timeout</tt> is renamed <tt>stopit.ThreadingTimeout</tt></li>\n<li><tt>stopit.timeoutable</tt> is renamed <tt>stopit.threading_timeoutable</tt></li>\n</ul>\n<p>Explications follow below\u2026</p>\n</div>\n<div id=\"contents\">\n<p>Contents</p>\n<ul>\n<li><a href=\"#overview\" id=\"id5\" rel=\"nofollow\">Overview</a></li>\n<li><a href=\"#installation\" id=\"id6\" rel=\"nofollow\">Installation</a><ul>\n<li><a href=\"#using-stopit-in-your-application\" id=\"id7\" rel=\"nofollow\">Using <tt>stopit</tt> in your application</a></li>\n<li><a href=\"#developing-stopit\" id=\"id8\" rel=\"nofollow\">Developing <tt>stopit</tt></a></li>\n</ul>\n</li>\n<li><a href=\"#public-api\" id=\"id9\" rel=\"nofollow\">Public API</a><ul>\n<li><a href=\"#exception\" id=\"id10\" rel=\"nofollow\">Exception</a></li>\n<li><a href=\"#threading-based-resources\" id=\"id11\" rel=\"nofollow\">Threading based resources</a><ul>\n<li><a href=\"#stopit-async-raise\" id=\"id12\" rel=\"nofollow\"><tt>stopit.async_raise</tt></a></li>\n<li><a href=\"#stopit-threadingtimeout\" id=\"id13\" rel=\"nofollow\"><tt>stopit.ThreadingTimeout</tt></a></li>\n<li><a href=\"#stopit-threading-timeoutable\" id=\"id14\" rel=\"nofollow\"><tt>stopit.threading_timeoutable</tt></a></li>\n<li><a href=\"#about-the-decorated-function\" id=\"id15\" rel=\"nofollow\">About the decorated function</a></li>\n</ul>\n</li>\n<li><a href=\"#signaling-based-resources\" id=\"id16\" rel=\"nofollow\">Signaling based resources</a></li>\n<li><a href=\"#logging\" id=\"id17\" rel=\"nofollow\">Logging</a></li>\n<li><a href=\"#comparing-thread-based-and-signal-based-timeout-control\" id=\"id18\" rel=\"nofollow\">Comparing thread based and signal based timeout control</a></li>\n</ul>\n</li>\n<li><a href=\"#known-issues\" id=\"id19\" rel=\"nofollow\">Known issues</a><ul>\n<li><a href=\"#timeout-accuracy\" id=\"id20\" rel=\"nofollow\">Timeout accuracy</a></li>\n<li><a href=\"#gevent-support\" id=\"id21\" rel=\"nofollow\"><tt>gevent</tt> support</a></li>\n</ul>\n</li>\n<li><a href=\"#tests-and-demos\" id=\"id22\" rel=\"nofollow\">Tests and demos</a><ul>\n<li><a href=\"#async-raise-function-raises-an-exception-in-another-thread\" id=\"id23\" rel=\"nofollow\"><tt>async_raise</tt> function raises an exception in another thread</a></li>\n<li><a href=\"#timeout-context-manager\" id=\"id24\" rel=\"nofollow\"><tt>Timeout</tt> context manager</a><ul>\n<li><a href=\"#swallowing-timeout-exceptions\" id=\"id25\" rel=\"nofollow\">Swallowing Timeout exceptions</a></li>\n<li><a href=\"#propagating-timeoutexception\" id=\"id26\" rel=\"nofollow\">Propagating <tt>TimeoutException</tt></a></li>\n</ul>\n</li>\n<li><a href=\"#timeoutable-callable-decorator\" id=\"id27\" rel=\"nofollow\"><tt>timeoutable</tt> callable decorator</a></li>\n</ul>\n</li>\n<li><a href=\"#links\" id=\"id28\" rel=\"nofollow\">Links</a></li>\n<li><a href=\"#credits\" id=\"id29\" rel=\"nofollow\">Credits</a></li>\n<li><a href=\"#license\" id=\"id30\" rel=\"nofollow\">License</a></li>\n<li><a href=\"#changes-log\" id=\"id31\" rel=\"nofollow\">Changes log</a><ul>\n<li><a href=\"#id1\" id=\"id32\" rel=\"nofollow\">1.1.2 - 2018-02-09</a></li>\n<li><a href=\"#id2\" id=\"id33\" rel=\"nofollow\">1.1.1 - 2015-03-22</a></li>\n<li><a href=\"#id3\" id=\"id34\" rel=\"nofollow\">1.1.0 - 2014-05-02</a></li>\n<li><a href=\"#id4\" id=\"id35\" rel=\"nofollow\">1.0.0 - 2014-02-09</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<div id=\"overview\">\n<h2><a href=\"#id5\" rel=\"nofollow\">Overview</a></h2>\n<p>This module provides:</p>\n<ul>\n<li>a function that raises an exception in another thread, including the main\nthread.</li>\n<li>two context managers that may stop its inner block activity on timeout.</li>\n<li>two decorators that may stop its decorated callables on timeout.</li>\n</ul>\n<p>Developed and tested with CPython 2.6, 2.7, 3.3 and 3.4 on MacOSX. Should work\non any OS (xBSD, Linux, Windows) except when explicitly mentioned.</p>\n<div>\n<p>Note</p>\n<p>Signal based timeout controls, namely <tt>SignalTimeout</tt> context manager and\n<tt>signal_timeoutable</tt> decorator won\u2019t work in Windows that has no support\nfor <tt>signal.SIGALRM</tt>. Any help to work around this is welcome.</p>\n</div>\n</div>\n<div id=\"installation\">\n<h2><a href=\"#id6\" rel=\"nofollow\">Installation</a></h2>\n<div id=\"using-stopit-in-your-application\">\n<h3><a href=\"#id7\" rel=\"nofollow\">Using <tt>stopit</tt> in your application</a></h3>\n<p>Both work identically:</p>\n<pre>easy_install stopit\npip install stopit\n</pre>\n</div>\n<div id=\"developing-stopit\">\n<h3><a href=\"#id8\" rel=\"nofollow\">Developing <tt>stopit</tt></a></h3>\n<pre><span class=\"c1\"># You should prefer forking if you have a Github account\n</span>git clone https://github.com/glenfant/stopit.git\n<span class=\"nb\">cd</span> stopit\npython setup.py develop\n\n<span class=\"c1\"># Does it work for you ?\n</span>python setup.py <span class=\"nb\">test</span>\n</pre>\n</div>\n</div>\n<div id=\"public-api\">\n<h2><a href=\"#id9\" rel=\"nofollow\">Public API</a></h2>\n<div id=\"exception\">\n<h3><a href=\"#id10\" rel=\"nofollow\">Exception</a></h3>\n<h3 id=\"stopit-timeoutexception\"><span class=\"section-subtitle\"><tt>stopit.TimeoutException</tt></span></h3>\n<p>A <tt>stopit.TimeoutException</tt> may be raised in a timeout context manager\ncontrolled block.</p>\n<p>This exception may be propagated in your application at the end of execution\nof the context manager controlled block, see the <tt>swallow_ex</tt> parameter of\nthe context managers.</p>\n<p>Note that the <tt>stopit.TimeoutException</tt> is always swallowed after the\nexecution of functions decorated with <tt><span class=\"pre\">xxx_timeoutable(...)</span></tt>. Anyway, you\nmay catch this exception <strong>within</strong> the decorated function.</p>\n</div>\n<div id=\"threading-based-resources\">\n<h3><a href=\"#id11\" rel=\"nofollow\">Threading based resources</a></h3>\n<div>\n<p>Warning</p>\n<p>Threading based resources will only work with CPython implementations\nsince we use CPython specific low level API. This excludes Iron Python,\nJython, Pypy, \u2026</p>\n<p>Will not stop the execution of blocking Python atomic instructions that\nacquire the GIL. In example, if the destination thread is actually\nexecuting a <tt>time.sleep(20)</tt>, the asynchronous exception is effective\n<strong>after</strong> its execution.</p>\n</div>\n<div id=\"stopit-async-raise\">\n<h4><a href=\"#id12\" rel=\"nofollow\"><tt>stopit.async_raise</tt></a></h4>\n<p>A function that raises an arbitrary exception in another thread</p>\n<p><tt>async_raise(tid, exception)</tt></p>\n<ul>\n<li><tt>tid</tt> is the thread identifier as provided by the <tt>ident</tt> attribute of a\nthread object. See the documentation of the <tt>threading</tt> module for further\ninformation.</li>\n<li><tt>exception</tt> is the exception class or object to raise in the thread.</li>\n</ul>\n</div>\n<div id=\"stopit-threadingtimeout\">\n<h4><a href=\"#id13\" rel=\"nofollow\"><tt>stopit.ThreadingTimeout</tt></a></h4>\n<p>A context manager that \u201ckills\u201d its inner block execution that exceeds the\nprovided time.</p>\n<p><tt>ThreadingTimeout(seconds, swallow_exc=True)</tt></p>\n<ul>\n<li><tt>seconds</tt> is the number of seconds allowed to the execution of the context\nmanaged block.</li>\n<li><tt>swallow_exc</tt> : if <tt>False</tt>, the possible <tt>stopit.TimeoutException</tt> will\nbe re-raised when quitting the context managed block. <strong>Attention</strong>: a\n<tt>True</tt> value does not swallow other potential exceptions.</li>\n</ul>\n<p><strong>Methods and attributes</strong></p>\n<p>of a <tt>stopit.ThreadingTimeout</tt> context manager.</p>\n<table>\n<colgroup>\n<col>\n<col>\n</colgroup>\n<thead>\n<tr><th>Method / Attribute</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr><td><tt>.cancel()</tt></td>\n<td>Cancels the timeout control. This method is intended for use within the\nblock that\u2019s under timeout control, specifically to cancel the timeout\ncontrol. Means that all code executed after this call may be executed\ntill the end.</td>\n</tr>\n<tr><td><tt>.state</tt></td>\n<td>This attribute indicated the actual status of the timeout control. It\nmay take the value of the <tt>EXECUTED</tt>, <tt>EXECUTING</tt>, <tt>TIMED_OUT</tt>,\n<tt>INTERRUPTED</tt> or <tt>CANCELED</tt> attributes. See below.</td>\n</tr>\n<tr><td><tt>.EXECUTING</tt></td>\n<td>The timeout control is under execution. We are typically executing\nwithin the code under control of the context manager.</td>\n</tr>\n<tr><td><tt>.EXECUTED</tt></td>\n<td>Good news: the code under timeout control completed normally within the\nassigned time frame.</td>\n</tr>\n<tr><td><tt>.TIMED_OUT</tt></td>\n<td>Bad news: the code under timeout control has been sleeping too long.\nThe objects supposed to be created or changed within the timeout\ncontrolled block should be considered as non existing or corrupted.\nDon\u2019t play with them otherwise informed.</td>\n</tr>\n<tr><td><tt>.INTERRUPTED</tt></td>\n<td>The code under timeout control may itself raise explicit\n<tt>stopit.TimeoutException</tt> for any application logic reason that may\noccur. This intentional exit can be spotted from outside the timeout\ncontrolled block with this state value.</td>\n</tr>\n<tr><td><tt>.CANCELED</tt></td>\n<td>The timeout control has been intentionally canceled and the code\nrunning under timeout control did complete normally. But perhaps after\nthe assigned time frame.</td>\n</tr>\n</tbody>\n</table>\n<p>A typical usage:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">stopit</span>\n<span class=\"c1\"># ...</span>\n<span class=\"k\">with</span> <span class=\"n\">stopit</span><span class=\"o\">.</span><span class=\"n\">ThreadingTimeout</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">to_ctx_mgr</span><span class=\"p\">:</span>\n    <span class=\"k\">assert</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">EXECUTING</span>\n    <span class=\"c1\"># Something potentially very long but which</span>\n    <span class=\"c1\"># ...</span>\n\n<span class=\"c1\"># OK, let's check what happened</span>\n<span class=\"k\">if</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">EXECUTED</span><span class=\"p\">:</span>\n    <span class=\"c1\"># All's fine, everything was executed within 10 seconds</span>\n<span class=\"k\">elif</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">EXECUTING</span><span class=\"p\">:</span>\n    <span class=\"c1\"># Hmm, that's not possible outside the block</span>\n<span class=\"k\">elif</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">TIMED_OUT</span><span class=\"p\">:</span>\n    <span class=\"c1\"># Eeek the 10 seconds timeout occurred while executing the block</span>\n<span class=\"k\">elif</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">INTERRUPTED</span><span class=\"p\">:</span>\n    <span class=\"c1\"># Oh you raised specifically the TimeoutException in the block</span>\n<span class=\"k\">elif</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">to_ctx_mgr</span><span class=\"o\">.</span><span class=\"n\">CANCELED</span><span class=\"p\">:</span>\n    <span class=\"c1\"># Oh you called to_ctx_mgr.cancel() method within the block but it</span>\n    <span class=\"c1\"># executed till the end</span>\n<span class=\"k\">else</span><span class=\"p\">:</span>\n    <span class=\"c1\"># That's not possible</span>\n</pre>\n<p>Notice that the context manager object may be considered as a boolean\nindicating (if <tt>True</tt>) that the block executed normally:</p>\n<pre><span class=\"k\">if</span> <span class=\"n\">to_ctx_mgr</span><span class=\"p\">:</span>\n    <span class=\"c1\"># Yes, the code under timeout control completed</span>\n    <span class=\"c1\"># Objects it created or changed may be considered consistent</span>\n</pre>\n</div>\n<div id=\"stopit-threading-timeoutable\">\n<h4><a href=\"#id14\" rel=\"nofollow\"><tt>stopit.threading_timeoutable</tt></a></h4>\n<p>A decorator that kills the function or method it decorates, if it does not\nreturn within a given time frame.</p>\n<p><tt><span class=\"pre\">stopit.threading_timeoutable([default</span> [, <span class=\"pre\">timeout_param]])</span></tt></p>\n<ul>\n<li><p><tt>default</tt> is the value to be returned by the decorated function or method of\nwhen its execution timed out, to notify the caller code that the function\ndid not complete within the assigned time frame.</p>\n<p>If this parameter is not provided, the decorated function or method will\nreturn a <tt>None</tt> value when its execution times out.</p>\n<pre><span class=\"nd\">@stopit</span><span class=\"o\">.</span><span class=\"n\">threading_timeoutable</span><span class=\"p\">(</span><span class=\"n\">default</span><span class=\"o\">=</span><span class=\"s1\">'not finished'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">infinite_loop</span><span class=\"p\">():</span>\n    <span class=\"c1\"># As its name says...</span>\n\n<span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">infinite_loop</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"n\">result</span> <span class=\"o\">==</span> <span class=\"s1\">'not finished'</span>\n</pre>\n</li>\n<li><p><tt>timeout_param</tt>: The function or method you have decorated may require a\n<tt>timeout</tt> named parameter for whatever reason. This empowers you to change\nthe name of the <tt>timeout</tt> parameter in the decorated function signature to\nwhatever suits, and prevent a potential naming conflict.</p>\n<pre><span class=\"nd\">@stopit</span><span class=\"o\">.</span><span class=\"n\">threading_timeoutable</span><span class=\"p\">(</span><span class=\"n\">timeout_param</span><span class=\"o\">=</span><span class=\"s1\">'my_timeout'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">some_slow_function</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"s1\">'whatever'</span><span class=\"p\">):</span>\n    <span class=\"c1\"># As its name says...</span>\n\n<span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">some_slow_function</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"s2\">\"something\"</span><span class=\"p\">,</span> <span class=\"n\">my_timeout</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n</pre>\n</li>\n</ul>\n</div>\n<div id=\"about-the-decorated-function\">\n<h4><a href=\"#id15\" rel=\"nofollow\">About the decorated function</a></h4>\n<p>or method\u2026</p>\n<p>As you noticed above, you just need to add the <tt>timeout</tt> parameter when\ncalling the function or method. Or whatever other name for this you chose with\nthe <tt>timeout_param</tt> of the decorator. When calling the real inner function\nor method, this parameter is removed.</p>\n</div>\n</div>\n<div id=\"signaling-based-resources\">\n<h3><a href=\"#id16\" rel=\"nofollow\">Signaling based resources</a></h3>\n<div>\n<p>Warning</p>\n<p>Using signaling based resources will <strong>not</strong> work under Windows or any OS\nthat\u2019s not based on Unix.</p>\n</div>\n<p><tt>stopit.SignalTimeout</tt> and <tt>stopit.signal_timeoutable</tt> have exactly the\nsame API as their respective threading based resources, namely\n<a href=\"#stopit-threadingtimeout\" rel=\"nofollow\">stopit.ThreadingTimeout</a> and <a href=\"#stopit-threading-timeoutable\" rel=\"nofollow\">stopit.threading_timeoutable</a>.</p>\n<p>See the <a href=\"#comparison-chart\" rel=\"nofollow\">comparison chart</a> that warns on the more or less subtle differences\nbetween the <a href=\"#threading-based-resources\" rel=\"nofollow\">Threading based resources</a> and the <a href=\"#signaling-based-resources\" rel=\"nofollow\">Signaling based resources</a>.</p>\n</div>\n<div id=\"logging\">\n<h3><a href=\"#id17\" rel=\"nofollow\">Logging</a></h3>\n<p>The <tt>stopit</tt> named logger emits a warning each time a block of code\nexecution exceeds the associated timeout. To turn logging off, just:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"n\">stopit_logger</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"s1\">'stopit'</span><span class=\"p\">)</span>\n<span class=\"n\">stopit_logger</span><span class=\"o\">.</span><span class=\"n\">seLevel</span><span class=\"p\">(</span><span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">ERROR</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"comparing-thread-based-and-signal-based-timeout-control\">\n<span id=\"comparison-chart\"></span><h3><a href=\"#id18\" rel=\"nofollow\">Comparing thread based and signal based timeout control</a></h3>\n<table>\n<colgroup>\n<col>\n<col>\n<col>\n</colgroup>\n<thead>\n<tr><th>Feature</th>\n<th>Threading based resources</th>\n<th>Signaling based resources</th>\n</tr>\n</thead>\n<tbody>\n<tr><td>GIL</td>\n<td>Can\u2019t interrupt a long Python atomic instruction. e.g. if\n<tt>time.sleep(20.0)</tt> is actually executing, the timeout will take\neffect at the end of the execution of this line.</td>\n<td>Don\u2019t care of it</td>\n</tr>\n<tr><td>Thread safety</td>\n<td><strong>Yes</strong> : Thread safe as long as each thread uses its own <tt>ThreadingTimeout</tt>\ncontext manager or <tt>threading_timeoutable</tt> decorator.</td>\n<td><strong>Not</strong> thread safe. Could yield unpredictable results in a\nmultithreads application.</td>\n</tr>\n<tr><td>Nestable context managers</td>\n<td><strong>Yes</strong> : you can nest threading based context managers</td>\n<td><strong>No</strong> : never nest a signaling based context manager in another one.\nThe innermost context manager will automatically cancel the timeout\ncontrol of outer ones.</td>\n</tr>\n<tr><td>Accuracy</td>\n<td>Any positive floating value is accepted as timeout value. The accuracy\ndepends on the GIL interval checking of your platform. See the doc on\n<tt>sys.getcheckinterval</tt> and <tt>sys.setcheckinterval</tt> for your Python\nversion.</td>\n<td>Due to the use of <tt>signal.SIGALRM</tt>, we need provide an integer number\nof seconds. So a timeout of <tt>0.6</tt> seconds will ve automatically\nconverted into a timeout of zero second!</td>\n</tr>\n<tr><td>Supported platforms</td>\n<td>Any CPython 2.6, 2.7 or 3.3 on any OS with threading support.</td>\n<td>Any Python 2.6, 2.7 or 3.3 with <tt>signal.SIGALRM</tt> support. This\nexcludes Windows boxes</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<div id=\"known-issues\">\n<h2><a href=\"#id19\" rel=\"nofollow\">Known issues</a></h2>\n<div id=\"timeout-accuracy\">\n<h3><a href=\"#id20\" rel=\"nofollow\">Timeout accuracy</a></h3>\n<p><strong>Important</strong>: the way CPython supports threading and asynchronous features has\nimpacts on the accuracy of the timeout. In other words, if you assign a 2.0\nseconds timeout to a context managed block or a decorated callable, the\neffective code block / callable execution interruption may occur some\nfractions of seconds after this assigned timeout.</p>\n<p>For more background about this issue - that cannot be fixed - please read\nPython gurus thoughts about Python threading, the GIL and context switching\nlike these ones:</p>\n<ul>\n<li><a href=\"http://pymotw.com/2/threading/\" rel=\"nofollow\">http://pymotw.com/2/threading/</a></li>\n<li><a href=\"https://wiki.python.org/moin/GlobalInterpreterLock\" rel=\"nofollow\">https://wiki.python.org/moin/GlobalInterpreterLock</a></li>\n</ul>\n<p>This is the reason why I am more \u201ctolerant\u201d on timeout accuracy in the tests\nyou can read thereafter than I should be for a critical real-time application\n(that\u2019s not in the scope of Python).</p>\n<p>It is anyway possible to improve this accuracy at the expense of the global\nperformances decreasing the check interval which defaults to 100. See:</p>\n<ul>\n<li><a href=\"https://docs.python.org/2.7/library/sys.html#sys.getcheckinterval\" rel=\"nofollow\">https://docs.python.org/2.7/library/sys.html#sys.getcheckinterval</a></li>\n<li><a href=\"https://docs.python.org/2.7/library/sys.html#sys.getcheckinterval\" rel=\"nofollow\">https://docs.python.org/2.7/library/sys.html#sys.getcheckinterval</a></li>\n</ul>\n<p>If this is a real issue for users (want a precise timeout and not an\napproximative one), a future release will add the optional <tt>check_interval</tt>\nparameter to the context managers and decorators. This parameter will enable\nto lower temporarily the threads switching check interval, having a more\naccurate timeout at the expense of the overall performances while the context\nmanaged block or decorated functions are executing.</p>\n</div>\n<div id=\"gevent-support\">\n<h3><a href=\"#id21\" rel=\"nofollow\"><tt>gevent</tt> support</a></h3>\n<p>Threading timeout control as mentioned in <a href=\"#threading-based-resources\" rel=\"nofollow\">Threading based resources</a> does not work as expected\nwhen used in the context of a gevent worker.</p>\n<p>See the discussion in <a href=\"https://github.com/glenfant/stopit/issues/13\" rel=\"nofollow\">Issue 13</a> for more details.</p>\n</div>\n</div>\n<div id=\"tests-and-demos\">\n<h2><a href=\"#id22\" rel=\"nofollow\">Tests and demos</a></h2>\n<pre><span class=\"kn\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">threading</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">stopit</span> <span class=\"kn\">import</span> <span class=\"n\">async_raise</span><span class=\"p\">,</span> <span class=\"n\">TimeoutException</span>\n</pre>\n<p>In a real application, you should either use threading based timeout resources:</p>\n<pre><span class=\"kn\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">stopit</span> <span class=\"kn\">import</span> <span class=\"n\">ThreadingTimeout</span> <span class=\"k\">as</span> <span class=\"n\">Timeout</span><span class=\"p\">,</span> <span class=\"n\">threading_timeoutable</span> <span class=\"k\">as</span> <span class=\"n\">timeoutable</span>  <span class=\"c1\">#doctest: +SKIP</span>\n</pre>\n<p>Or the POSIX signal based resources:</p>\n<pre><span class=\"kn\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">stopit</span> <span class=\"kn\">import</span> <span class=\"n\">SignalTimeout</span> <span class=\"k\">as</span> <span class=\"n\">Timeout</span><span class=\"p\">,</span> <span class=\"n\">signal_timeoutable</span> <span class=\"k\">as</span> <span class=\"n\">timeoutable</span>  <span class=\"c1\">#doctest: +SKIP</span>\n</pre>\n<p>Let\u2019s define some utilities:</p>\n<pre><span class=\"kn\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">time</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span> <span class=\"nf\">fast_func</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"mi\">0</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span> <span class=\"nf\">variable_duration_func</span><span class=\"p\">(</span><span class=\"n\">duration</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"n\">t0</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>    <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"n\">dummy</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"gp\">... </span>        <span class=\"k\">if</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">t0</span> <span class=\"o\">&gt;</span> <span class=\"n\">duration</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>            <span class=\"k\">break</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">exc_traces</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span> <span class=\"nf\">variable_duration_func_handling_exc</span><span class=\"p\">(</span><span class=\"n\">duration</span><span class=\"p\">,</span> <span class=\"n\">exc_traces</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">try</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"n\">t0</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>        <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>            <span class=\"n\">dummy</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"gp\">... </span>            <span class=\"k\">if</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">t0</span> <span class=\"o\">&gt;</span> <span class=\"n\">duration</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>                <span class=\"k\">break</span>\n<span class=\"gp\">... </span>    <span class=\"k\">except</span> <span class=\"ne\">Exception</span> <span class=\"k\">as</span> <span class=\"n\">exc</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"n\">exc_traces</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">exc</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span> <span class=\"nf\">func_with_exception</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">raise</span> <span class=\"ne\">LookupError</span><span class=\"p\">()</span>\n</pre>\n<div id=\"async-raise-function-raises-an-exception-in-another-thread\">\n<h3><a href=\"#id23\" rel=\"nofollow\"><tt>async_raise</tt> function raises an exception in another thread</a></h3>\n<p>Testing <tt>async_raise()</tt> with a thread of 5 seconds:</p>\n<pre><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">five_seconds_threads</span> <span class=\"o\">=</span> <span class=\"n\">threading</span><span class=\"o\">.</span><span class=\"n\">Thread</span><span class=\"p\">(</span>\n<span class=\"gp\">... </span>    <span class=\"n\">target</span><span class=\"o\">=</span><span class=\"n\">variable_duration_func_handling_exc</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mf\">5.0</span><span class=\"p\">,</span> <span class=\"n\">exc_traces</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">start_time</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">five_seconds_threads</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thread_ident</span> <span class=\"o\">=</span> <span class=\"n\">five_seconds_threads</span><span class=\"o\">.</span><span class=\"n\">ident</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">five_seconds_threads</span><span class=\"o\">.</span><span class=\"n\">is_alive</span><span class=\"p\">()</span>\n<span class=\"go\">True</span>\n</pre>\n<p>We raise a LookupError in that thread:</p>\n<pre><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">async_raise</span><span class=\"p\">(</span><span class=\"n\">thread_ident</span><span class=\"p\">,</span> <span class=\"ne\">LookupError</span><span class=\"p\">)</span>\n</pre>\n<p>Okay but we must wait few milliseconds the thread death since the exception is\nasynchronous:</p>\n<pre><span class=\"k\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">while</span> <span class=\"n\">five_seconds_threads</span><span class=\"o\">.</span><span class=\"n\">is_alive</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">pass</span>\n</pre>\n<p>And we can notice that we stopped the thread before it stopped by itself:</p>\n<pre><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">start_time</span> <span class=\"o\">&lt;</span> <span class=\"mf\">0.5</span>\n<span class=\"go\">True\n</span><span class=\"nb\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">exc_traces</span><span class=\"p\">)</span>\n<span class=\"go\">1\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">exc_traces</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"vm\">__class__</span><span class=\"o\">.</span><span class=\"vm\">__name__</span>\n<span class=\"go\">'LookupError'</span>\n</pre>\n</div>\n<div id=\"timeout-context-manager\">\n<h3><a href=\"#id24\" rel=\"nofollow\"><tt>Timeout</tt> context manager</a></h3>\n<p>The context manager stops the execution of its inner block after a given time.\nYou may manage the way the timeout occurs using a <tt>try: ... except: ...</tt>\nconstruct or by inspecting the context manager <tt>state</tt> attribute after the\nblock.</p>\n<div id=\"swallowing-timeout-exceptions\">\n<h4><a href=\"#id25\" rel=\"nofollow\">Swallowing Timeout exceptions</a></h4>\n<p>We check that the fast functions return as outside our context manager:</p>\n<pre><span class=\"k\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">Timeout</span><span class=\"p\">(</span><span class=\"mf\">5.0</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">timeout_ctx</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">fast_func</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span>\n<span class=\"go\">0\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">EXECUTED</span>\n<span class=\"go\">True</span>\n</pre>\n<p>And the context manager is considered as <tt>True</tt> (the block executed its last\nline):</p>\n<pre><span class=\"nb\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">bool</span><span class=\"p\">(</span><span class=\"n\">timeout_ctx</span><span class=\"p\">)</span>\n<span class=\"go\">True</span>\n</pre>\n<p>We check that slow functions are interrupted:</p>\n<pre><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">start_time</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">Timeout</span><span class=\"p\">(</span><span class=\"mf\">2.0</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">timeout_ctx</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"n\">variable_duration_func</span><span class=\"p\">(</span><span class=\"mf\">5.0</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">start_time</span> <span class=\"o\">&lt;</span> <span class=\"mf\">2.2</span>\n<span class=\"go\">True\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">TIMED_OUT</span>\n<span class=\"go\">True</span>\n</pre>\n<p>And the context manager is considered as <tt>False</tt> since the block did timeout.</p>\n<pre><span class=\"nb\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">bool</span><span class=\"p\">(</span><span class=\"n\">timeout_ctx</span><span class=\"p\">)</span>\n<span class=\"go\">False</span>\n</pre>\n<p>Other exceptions are propagated and must be treated as usual:</p>\n<pre><span class=\"k\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">try</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">with</span> <span class=\"n\">Timeout</span><span class=\"p\">(</span><span class=\"mf\">5.0</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">timeout_ctx</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">func_with_exception</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span><span class=\"k\">except</span> <span class=\"ne\">LookupError</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"s1\">'exception_seen'</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">EXECUTING</span>\n<span class=\"go\">True\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span>\n<span class=\"go\">'exception_seen'</span>\n</pre>\n</div>\n<div id=\"propagating-timeoutexception\">\n<h4><a href=\"#id26\" rel=\"nofollow\">Propagating <tt>TimeoutException</tt></a></h4>\n<p>We can choose to propagate the <tt>TimeoutException</tt> too. Potential exceptions\nhave to be handled:</p>\n<pre><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">start_time</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">try</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">with</span> <span class=\"n\">Timeout</span><span class=\"p\">(</span><span class=\"mf\">2.0</span><span class=\"p\">,</span> <span class=\"n\">swallow_exc</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">timeout_ctx</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"n\">variable_duration_func</span><span class=\"p\">(</span><span class=\"mf\">5.0</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">except</span> <span class=\"n\">TimeoutException</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"s1\">'exception_seen'</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">start_time</span> <span class=\"o\">&lt;</span> <span class=\"mf\">2.2</span>\n<span class=\"go\">True\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span>\n<span class=\"go\">'exception_seen'\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">TIMED_OUT</span>\n<span class=\"go\">True</span>\n</pre>\n<p>Other exceptions must be handled too:</p>\n<pre><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">start_time</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">try</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">with</span> <span class=\"n\">Timeout</span><span class=\"p\">(</span><span class=\"mf\">2.0</span><span class=\"p\">,</span> <span class=\"n\">swallow_exc</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">timeout_ctx</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"n\">func_with_exception</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span><span class=\"k\">except</span> <span class=\"ne\">Exception</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"s1\">'exception_seen'</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">start_time</span> <span class=\"o\">&lt;</span> <span class=\"mf\">0.1</span>\n<span class=\"go\">True\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span>\n<span class=\"go\">'exception_seen'\n</span><span class=\"n\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">state</span> <span class=\"o\">==</span> <span class=\"n\">timeout_ctx</span><span class=\"o\">.</span><span class=\"n\">EXECUTING</span>\n<span class=\"go\">True</span>\n</pre>\n</div>\n</div>\n<div id=\"timeoutable-callable-decorator\">\n<h3><a href=\"#id27\" rel=\"nofollow\"><tt>timeoutable</tt> callable decorator</a></h3>\n<p>This decorator stops the execution of any callable that should not last a\ncertain amount of time.</p>\n<p>You may use a decorated callable without timeout control if you don\u2019t provide\nthe <tt>timeout</tt> optional argument:</p>\n<pre><span class=\"nd\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@timeoutable</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span> <span class=\"nf\">fast_double</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"n\">value</span> <span class=\"o\">*</span> <span class=\"mi\">2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">fast_double</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"go\">6</span>\n</pre>\n<p>You may specify that timeout with the <tt>timeout</tt> optional argument.\nInterrupted callables return None:</p>\n<pre><span class=\"nd\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@timeoutable</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span> <span class=\"nf\">infinite</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"k\">pass</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"s1\">'whatever'</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">infinite</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span>\n<span class=\"go\">True</span>\n</pre>\n<p>Or any other value provided to the <tt>timeoutable</tt> decorator parameter:</p>\n<pre><span class=\"nd\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@timeoutable</span><span class=\"p\">(</span><span class=\"s1\">'unexpected'</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span> <span class=\"nf\">infinite</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"k\">pass</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"s1\">'whatever'</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">infinite</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"go\">'unexpected'</span>\n</pre>\n<p>If the <tt>timeout</tt> parameter name may clash with your callable signature, you\nmay change it using <tt>timeout_param</tt>:</p>\n<pre><span class=\"nd\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@timeoutable</span><span class=\"p\">(</span><span class=\"s1\">'unexpected'</span><span class=\"p\">,</span> <span class=\"n\">timeout_param</span><span class=\"o\">=</span><span class=\"s1\">'my_timeout'</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span> <span class=\"nf\">infinite</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"k\">pass</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"s1\">'whatever'</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">infinite</span><span class=\"p\">(</span><span class=\"n\">my_timeout</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"go\">'unexpected'</span>\n</pre>\n<p>It works on instance methods too:</p>\n<pre><span class=\"k\"></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span> <span class=\"nc\">Anything</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"nd\">@timeoutable</span><span class=\"p\">(</span><span class=\"s1\">'unexpected'</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span> <span class=\"nf\">infinite</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"k\">assert</span> <span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"ow\">is</span> <span class=\"nb\">int</span>\n<span class=\"gp\">... </span>        <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>            <span class=\"k\">pass</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">obj</span> <span class=\"o\">=</span> <span class=\"n\">Anything</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">obj</span><span class=\"o\">.</span><span class=\"n\">infinite</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"go\">'unexpected'</span>\n</pre>\n</div>\n</div>\n<div id=\"links\">\n<h2><a href=\"#id28\" rel=\"nofollow\">Links</a></h2>\n<dl>\n<dt>Source code (clone, fork, \u2026)</dt>\n<dd><a href=\"https://github.com/glenfant/stopit\" rel=\"nofollow\">https://github.com/glenfant/stopit</a></dd>\n<dt>Issues tracker</dt>\n<dd><a href=\"https://github.com/glenfant/stopit/issues\" rel=\"nofollow\">https://github.com/glenfant/stopit/issues</a></dd>\n<dt>PyPI</dt>\n<dd><a href=\"https://pypi.python.org/pypi/stopit\" rel=\"nofollow\">https://pypi.python.org/pypi/stopit</a></dd>\n</dl>\n</div>\n<div id=\"credits\">\n<h2><a href=\"#id29\" rel=\"nofollow\">Credits</a></h2>\n<ul>\n<li>This is a NIH package which is mainly a theft of <a href=\"http://gahtune.blogspot.fr/2013/08/a-timeout-context-manager.html\" rel=\"nofollow\">Gabriel Ahtune\u2019s recipe</a> with\ntests, minor improvements and refactorings, documentation and setuptools\nawareness I made since I\u2019m somehow tired to copy/paste this recipe among\nprojects that need timeout control.</li>\n<li><a href=\"mailto:gilles.lenfant%40gmail.com\">Gilles Lenfant</a>: package creator and\nmaintainer.</li>\n</ul>\n</div>\n<div id=\"license\">\n<h2><a href=\"#id30\" rel=\"nofollow\">License</a></h2>\n<p>This software is open source delivered under the terms of the MIT license. See the <tt>LICENSE</tt> file of this repository.</p>\n</div>\n<div id=\"changes-log\">\n<h2><a href=\"#id31\" rel=\"nofollow\">Changes log</a></h2>\n<div id=\"id1\">\n<h3><a href=\"#id32\" rel=\"nofollow\">1.1.2 - 2018-02-09</a></h3>\n<ul>\n<li>Changed license to MIT</li>\n<li>Tested with Python 3.5 and 3.6</li>\n</ul>\n</div>\n<div id=\"id2\">\n<h3><a href=\"#id33\" rel=\"nofollow\">1.1.1 - 2015-03-22</a></h3>\n<ul>\n<li>Fixed bug of timeout context manager as bool under Python 2.x</li>\n<li>Tested with Python 3.4</li>\n</ul>\n</div>\n<div id=\"id3\">\n<h3><a href=\"#id34\" rel=\"nofollow\">1.1.0 - 2014-05-02</a></h3>\n<ul>\n<li>Added support for TIMER signal based timeout control (Posix OS only)</li>\n<li>API changes due to new timeout controls</li>\n<li>An exhaustive documentation.</li>\n</ul>\n</div>\n<div id=\"id4\">\n<h3><a href=\"#id35\" rel=\"nofollow\">1.0.0 - 2014-02-09</a></h3>\n<p>Initial version</p>\n</div>\n</div>\n\n          </div>"}, "last_serial": 3565736, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "59af991271b3a4db91bb01999a33d3f9", "sha256": "d2fa5ca2b484b6265a5e2609cb37f137f6dea927902bdef64e9332982ce79918"}, "downloads": -1, "filename": "stopit-1.0.0.tar.gz", "has_sig": false, "md5_digest": "59af991271b3a4db91bb01999a33d3f9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6322, "upload_time": "2014-02-09T16:51:38", "upload_time_iso_8601": "2014-02-09T16:51:38.886000Z", "url": "https://files.pythonhosted.org/packages/8d/b4/2f41c1988f658f531bb012714deaec67a07edf968e3b03b0d16b4a07f8b4/stopit-1.0.0.tar.gz", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "77bec39a670abd6f889ad736d21520d3", "sha256": "8e6252c1e10942d45130f1d08d0e41fb758b4b570d680856abda9cf5c5e7ee38"}, "downloads": -1, "filename": "stopit-1.1.0.tar.gz", "has_sig": false, "md5_digest": "77bec39a670abd6f889ad736d21520d3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17712, "upload_time": "2014-05-02T15:01:38", "upload_time_iso_8601": "2014-05-02T15:01:38.550663Z", "url": "https://files.pythonhosted.org/packages/15/cb/63c50d54a9a027ff769dea5211e237b7be093283ed51cf1874fdedd56c25/stopit-1.1.0.tar.gz", "yanked": false}], "1.1.1": [{"comment_text": "", "digests": {"md5": "dec60dae41bec73233e83db003390bdc", "sha256": "d879a892e6c0d524763b8bf20831a78311d86ea59ec199ec551abf3f494b0708"}, "downloads": -1, "filename": "stopit-1.1.1.tar.gz", "has_sig": false, "md5_digest": "dec60dae41bec73233e83db003390bdc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 18009, "upload_time": "2015-03-22T17:45:54", "upload_time_iso_8601": "2015-03-22T17:45:54.562053Z", "url": "https://files.pythonhosted.org/packages/8e/88/888710b87a625789ee152ab6d9de0bd954c282b3a2f1c3ca0a7e4367d1c4/stopit-1.1.1.tar.gz", "yanked": false}], "1.1.2": [{"comment_text": "", "digests": {"md5": "0f6ef75399a9420fad7b7970d7be6d58", "sha256": "f7f39c583fd92027bd9d06127b259aee7a5b7945c1f1fa56263811e1e766996d"}, "downloads": -1, "filename": "stopit-1.1.2.tar.gz", "has_sig": false, "md5_digest": "0f6ef75399a9420fad7b7970d7be6d58", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 18281, "upload_time": "2018-02-09T00:32:14", "upload_time_iso_8601": "2018-02-09T00:32:14.204588Z", "url": "https://files.pythonhosted.org/packages/35/58/e8bb0b0fb05baf07bbac1450c447d753da65f9701f551dca79823ce15d50/stopit-1.1.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "0f6ef75399a9420fad7b7970d7be6d58", "sha256": "f7f39c583fd92027bd9d06127b259aee7a5b7945c1f1fa56263811e1e766996d"}, "downloads": -1, "filename": "stopit-1.1.2.tar.gz", "has_sig": false, "md5_digest": "0f6ef75399a9420fad7b7970d7be6d58", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 18281, "upload_time": "2018-02-09T00:32:14", "upload_time_iso_8601": "2018-02-09T00:32:14.204588Z", "url": "https://files.pythonhosted.org/packages/35/58/e8bb0b0fb05baf07bbac1450c447d753da65f9701f551dca79823ce15d50/stopit-1.1.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:01:41 2020"}