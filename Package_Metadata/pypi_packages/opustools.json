{"info": {"author": "Mikko Aulamo", "author_email": "mikko.aulamo@helsinki.fi", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# OpusTools\n\nTools for accessing and processing OPUS data.\n\n* opus_read: read parallel data sets and convert to different output formats\n* opus_express: Create test/dev/train sets from OPUS data.\n* opus_cat: extract given OPUS document from release data\n* opus_get: download files from OPUS\n* opus_langid: add language ids to sentences in xml files in zip archives\n\n### Installation:\n\n`pip install opustools`\n\n---\n\n## opus_read\n\n### Usage\n\n```\nusage: opus_read [-h] -d corpus_name -s langid -t langid [-r version]\n                 [-p {raw,xml,parsed}] [-m M] [-S S] [-T T] [-a attribute]\n                 [-tr TR] [-ln] [-w file_name [file_name ...]]\n                 [-wm {normal,moses,tmx,links}] [-pn] [-f] [-rd path_to_dir]\n                 [-af path_to_file] [-sz path_to_zip] [-tz path_to_zip]\n                 [-cm delimiter] [-pa] [-sa attribute [attribute ...]]\n                 [-ta attribute [attribute ...]] [-ca delimiter]\n                 [--src_cld2 lang_id score] [--trg_cld2 lang_id score]\n                 [--src_langid lang_id score] [--trg_langid lang_id score]\n                 [-id file_name] [-q] [-dl DOWNLOAD_DIR] [-pi] [-v]\n```\n\narguments:\n\n```\n-h, --help          show this help message and exit\n-d corpus_name, --directory corpus_name\n                    Corpus name\n-s langid, --source langid\n                    Source language\n-t langid, --target langid\n                    Target language\n-r version, --release version\n                    Release (default=latest)\n-p {raw,xml,parsed}, --preprocess {raw,xml,parsed}\n                    Preprocess-type (raw, xml or parsed, default=xml)\n-m MAXIMUM, --maximum MAXIMUM   Maximum number of alignments\n-S SRC_RANGE, --src_range SRC_RANGE\n                    Number of source sentences in alignments (range is\n                    allowed, eg. -S 1-2)\n-T TGT_RANGE, --tgt_range TGT_RANGE\n                    Number of target sentences in alignments (range is\n                    allowed, eg. -T 1-2)\n-a attribute, --attribute attribute\n                    Set attribute for filttering\n-tr THRESHOLD, --threshold THRESHOLD\n                    Set threshold for an attribute\n-ln, --leave_non_alignments_out\n                    Leave non-alignments out\n-w file_name [file_name ...], --write file_name [file_name ...]\n                    Write to file. To print moses format in separate\n                    files, enter two file names. Otherwise enter one file\n                    name.\n-wm {normal,moses,tmx,links}, --write_mode {normal,moses,tmx,links}\n                    Set write mode\n-pn, --print_file_names\n                    Print file names when using moses format\n-f, --fast          Fast parsing. Faster than normal parsing, if you print\n                    a small part of the whole corpus, but requires the\n                    sentence ids in alignment files to be in sequence.\n-rd path_to_dir, --root_directory path_to_dir\n                    Change root directory (default=/proj/nlpl/data/OPUS)\n-af path_to_file, --alignment_file path_to_file\n                    Use given alignment file\n-sz path_to_zip, --source_zip path_to_zip\n                    Use given source zip file\n-tz path_to_zip, --target_zip path_to_zip\n                    Use given target zip file\n-cm delimiter, --change_moses_delimiter delimiter\n                    Change moses delimiter (default=tab)\n-pa, --print_annotations\n                    Print annotations, if they exist\n-sa attribute [attribute ...], --source_annotations attribute [attribute ...]\n                    Set source sentence annotation attributes to be\n                    printed, e.g. -sa pos lem. To print all available\n                    attributes use -sa all_attrs (default=pos lem)\n-ta attribute [attribute ...], --target_annotations attribute [attribute ...]\n                    Set target sentence annotation attributes to be\n                    printed, e.g. -ta pos lem. To print all available\n                    attributes use -ta all_attrs (default=pos lem)\n-ca delimiter, --change_annotation_delimiter delimiter\n                    Change annotation delimiter (default=|)\n--src_cld2 lang_id score\n                    Filter source sentences by their cld2 language id\n                    labels and confidence score, e.g. en 0.9\n--trg_cld2 lang_id score\n                    Filter target sentences by their cld2 language id\n                    labels and confidence score, e.g. en 0.9\n--src_langid lang_id score\n                    Filter source sentences by their langid.py language id\n                    labels and confidence score, e.g. en 0.9\n--trg_langid lang_id score\n                    Filter target sentences by their langid.py language id\n                    labels and confidence score, e.g. en 0.9\n-id file_name, --write_ids file_name\n                    Write sentence ids to a file.\n-q, --suppress_prompts\n                    Download necessary files without prompting \"(y/n)\"\n-dl DOWNLOAD_DIR, --download_dir DOWNLOAD_DIR\n                    Set download directory (default=current directory)\n-pi, --preserve_inline_tags\n                    Preserve inline tags within sentences\n-v, --verbose       Print prorgess messages when writing results to files\n```\n\n### Description\n\n`opus_read` is a script to read sentence alignments stored in XCES align format and print the aligned sentences to STDOUT. It requires monolingual alignments of sentences in linked XML files. Linked XML files are specified in the \"toDoc\" and \"fromDoc\" attributes (see below).\n\n```\n<cesAlign version=\"1.0\">\n <linkGrp targType=\"s\" toDoc=\"source1.xml\" fromDoc=\"target1.xml\">\n   <link certainty=\"0.88\" xtargets=\"s1.1 s1.2;s1.1\" id=\"SL1\" />\n   ....\n <linkGrp targType=\"s\" toDoc=\"source2.xml\" fromDoc=\"target2.xml\">\n   <link certainty=\"0.88\" xtargets=\"s1.1;s1.1\" id=\"SL1\" />\n```\n\nSeveral parameters can be set to filter the alignments and to print only certain types of alignments.\n\n`opus_read` can also be used to filter the XCES alignment files and to print the remaining links in the same\nXCES align format. Set the \"-wm\" flag to \"links\" to enable this mode.\n\n`opus_read` reads the alignments from zip files. Starting up the script might take some time, if the zip files are large (for example OpenSubtitles in OPUS).\n\n`opus_read` uses `ExhaustiveSentenceParser` by default. This means that each time a `<linkGrp>` tag is found, the corresponding source and target documents are read through and each sentence is stored in a hashmap with the sentence id as the key. This allows the reader to read alignment files that have sentence ids in non-sequential order. Each time a `<linkGrp>` tag is found, the script pauses printing for a second to read through the source and target documents. The duration of the pause depends on the size of the source and target documents.\n\nUsing the \"-f\" flag allows the usage of `SentenceParser`, which is faster than ExhaustiveSentenceParser in cases where only a small part of a corpus is read. `SentenceParser` does not store the sentences in a hashmap. Rather, when it finds a `<link>` tag, it iterates through a sentence file until a sentence id is matched with the sentence id found in the `<link>` tag. SentenceParser can't go backwards, which means that if the ids are not in sequential order in the alignment file, the parser will not find alignment pairs after the sentence id sequence breaks. `SentenceParser` is less reliable than `ExhaustiveSentenceParser`, but using the \"-f\" flag is beneficial when the whole corpus does not need to be scanned, in other words, when using the \"-m\" flag.\n\n**Examples:**\n\nRead sentence alignment in XCES align format. Necessary files will be downloaded if they are not found locally:\n\n`opus_read --directory RF --source en --target sv`\n\nRead sentences with specific preprocessing type. (default is xml, which is tokenized text):\n\n`opus_read --directory RF --source en --target sv --preprocess raw`\n\nLeave non-alignments (pairs with no sentences on one side) out\n\n```\nopus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --preprocess raw\\\n    --leave_non_alignments_out\n```\n\nPrint first 10 alignment pairs:\n\n`opus_read --directory RF --source en --target sv -m 10`\n\nPrint XCES align format of all 1:1 sentence alignments:\n\n```\nopus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --src_range 1 \\\n    --tgt_range 1\n```\n\nPrint alignments with alignment certainty greater than 1.1:\n\n```\nopus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --attribute certainty \\\n    --threshold 1.1\n```\n\nWrite results to file:\n\n`opus_read --directory RF --source en --target sv --write result.txt`\n\nWrite with different output format:\n\n```\nopus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --write result.tmx\\\n    --write_mode tmx\n```\n\nWrite moses format to one file:\n\n```\nopus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --write en-sv.txt\\\n    --write_mode moses\n```\n\nor to two files:\n\n```\nopus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --write en-sv.en en-sv.sv \\\n    --write_mode moses\n```\n\nRead sentences using your alignment file. First create an alignment file, for example:\n\n```\nopus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --attribute certainty \\\n    --threshold 1.1 \\\n    --write_mode links \\\n    --write en-sv.links\n```\n\nThen use the created alignment file:\n\n`opus_read --directory RF --source en --target sv --alignment_file en-sv.links`\n\nAnnotations can be printed with `--print_annotations` if they are included in the sentence files. To print all annotation attributes, specify this with `--source_annotations` and `--target_annotations` flags:\n\n```\nopus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --print_annotations \\\n    --source_annotations all_attrs \\\n    --target_annotations all_attrs\n```\n\nSentences can be filtered by their language id labels and confidence score. First, the language ids need to be added to the sentence files with `opus_langid`. If you have run the previous examples, you should have `RF_latest_xml_en.zip` and `RF_latest_xml_sv.zip` in your current working directory. Apply `opus_langid` to these files:\n\n```\nopus_langid --file_path RF_latest_xml_en.zip\nopus_langid --file_path RF_latest_xml_sv.zip\n```\n\nNow you can filter by language ids. This example uses both cld2 and langid.py language detection confidence scores:\n\n```\nopus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --src_cld2 en 0.99 \\\n    --trg_cld2 sv 0.99 \\\n    --src_langid en 1 \\\n    --trg_langid sv 1\n```\n\n**You can also import the module to your python script:**\n\nIn `your_script.py`, first import the package:\n\n`import opustools`\n\nInitialize OpusRead:\n\n```\nopus_reader = opustools.OpusRead(\n    directory='Books',\n    source='en',\n    target='fi')\nopus_reader.printPairs()\n```\n\nand then run:\n\n`python3 your_script.py`\n\n---\n\n## opus_express\n\n### Usage\n\n```\nusage: opus_express [-h] [-f] -s lang_id -t lang_id\n                    [-c [coll_name [coll_name ...]]]\n                    [--root-dir /path/to/OPUS] [--test-override /path/to/file]\n                    [--test-quota num_sents] [--dev-quota num_sents]\n                    [--doc-bounds] [--quality-aware]\n                    [--overlap-threshold min_pct] [--preserve-inline-tags]\n                    [--shuffle] [--test-set filename] [--dev-set filename]\n                    [--train-set filename]\n```\n\narguments:\n\n```\n-h, --help            show this help message and exit\n-f, --force           suppress warnings (default: False)\n-s lang_id, --src-lang lang_id\n                      source language (e.g. `en')\n-t lang_id, --tgt-lang lang_id\n                      target language (e.g. `pt')\n-c [coll_name [coll_name ...]], --collections [coll_name [coll_name ...]]\n                      OPUS collection(s) to fetch (default: `OpenSubtitles')\n                      Collections list: ['ALL', 'ada83', 'Bianet', 'bible-\n                      uedin', 'Books', 'CAPES', 'DGT', 'DOGC', 'ECB',\n                      'EhuHac', 'Elhuyar', 'EMEA', 'EUbookshop', 'EUconst',\n                      'Europarl', 'Finlex', 'fiskmo', 'giga-fren',\n                      'GlobalVoices', 'GNOME', 'hrenWaC', 'JRC-Acquis',\n                      'KDE4', 'KDEdoc', 'MBS', 'memat', 'MontenegrinSubs',\n                      'MPC1', 'MultiUN', 'News-Commentary', 'OfisPublik',\n                      'OpenOffice', 'OpenSubtitles', 'ParaCrawl', 'PHP',\n                      'QED', 'RF', 'sardware', 'SciELO', 'SETIMES', 'SPC',\n                      'Tanzil', 'Tatoeba', 'TED2013', 'TedTalks', 'TEP',\n                      'TildeMODEL', 'Ubuntu', 'UN', 'UNPC', 'wikimedia',\n                      'Wikipedia', 'WikiSource', 'WMT-News', 'XhosaNavy']\n--root-dir /path/to/OPUS\n                      Root directory for OPUS\n                      (default:`/proj/nlpl/data/OPUS')\n--test-override /path/to/file\n                      path to file containing resource IDs to reserve for\n                      the test set (default: None)\n--test-quota num_sents\n                      test set size in sentences (default: 10000)\n--dev-quota num_sents\n                      development set size in sentences (default: 10000)\n--doc-bounds          preserve document blocks (also marks document\n                      boundaries) (default: False)\n--quality-aware       reserve one-to-one aligned samples with high overlap\n                      for test/dev sets (incompatible with `--doc-bounds')\n                      (default: False)\n--overlap-threshold min_pct\n                      threshold for alignment overlap in `--quality-aware'\n                      mode (default: 0.8)\n--preserve-inline-tags\n                      preserve inline timestamp tags in aligned samples\n                      (default: False)\n--shuffle             shuffle samples (incompatible with `--doc-bounds')\n                      (default: False)\n--test-set filename   filename stub for output test set (default: `test')\n--dev-set filename    filename stub for output development set (default:\n                      `dev')\n--train-set filename  filename stub for output training set (default:\n                      `train')\n```\n\n### Description\n\nAll aboard the OPUS Express! Create test/dev/train sets from OPUS data.\n\n---\n\n## opus_cat\n\n### Usage\n\n```\nusage: opus_cat [-h] -d DIRECTORY -l LANGUAGE [-i] [-m MAXIMUM] [-p]\n                [-f FILE_NAME] [-r RELEASE] [-pa]\n                [-sa SET_ATTRIBUTE [SET_ATTRIBUTE ...]]\n                [-ca CHANGE_ANNOTATION_DELIMITER] [-rd path_to_dir]\n                [-dl DOWNLOAD_DIR]\n```\n\narguments:\n\n```\n-h, --help            show this help message and exit\n-d DIRECTORY, --directory DIRECTORY\n                      Corpus name\n-l LANGUAGE, --language LANGUAGE\n                      Language\n-i, --no_ids          Print without ids when using -p\n-m MAXIMUM, --maximum MAXIMUM\n                      Maximum number of sentences\n-p, --plain           Print in plain txt\n-f FILE_NAME, --file_name FILE_NAME\n                      File name (if not given, prints all files)\n-r RELEASE, --release RELEASE\n                      Release (default=latest)\n-pa, --print_annotations\n                      Print annotations, if they exist\n-sa SET_ATTRIBUTE [SET_ATTRIBUTE ...], --set_attribute SET_ATTRIBUTE [SET_ATTRIBUTE ...]\n                      Set sentence annotation attributes to be printed, e.g.\n                      -sa pos lem. To print all available attributes use -sa\n                      all_attrs (default=pos,lem)\n-ca CHANGE_ANNOTATION_DELIMITER, --change_annotation_delimiter CHANGE_ANNOTATION_DELIMITER\n                      Change annotation delimiter (default=|)\n-rd path_to_dir, --root_directory path_to_dir\n                      Change root directory (default=/proj/nlpl/data/OPUS)\n-dl DOWNLOAD_DIR, --download_dir DOWNLOAD_DIR\n                      Set download directory (default=current directory)\n```\n\n### Description\n\nRead a document from OPUS and print to STDOUT\n\n**Examples:**\n\nRead a corpus:\n\n```\nopus_cat --directory RF --language en\n```\n\nRead with output in plain text:\n\n```\nopus_cat --directory RF --language en --plain\n```\n\nRead with output in plain text including annotations:\n\n```\nopus_cat --directory RF --language en --plain --print_annotations\n```\n\nRead a specific file in a corpus:\n\n```\nopus_cat --directory RF --language en --file_name RF/xml/en/1996.xml\n```\n\n---\n\n## opus_get\n\n### Usage\n\n```\nusage: opus_get [-h] [-s SOURCE] [-t TARGET] [-d DIRECTORY] [-r RELEASE]\n                [-p {raw,xml,parsed}] [-l] [-dl DOWNLOAD_DIR] [-q]\n```\n\narguments:\n\n```\n-h, --help            show this help message and exit\n-s SOURCE, --source SOURCE\n                      Source language\n-t TARGET, --target TARGET\n                      Target language\n-d DIRECTORY, --directory DIRECTORY\n                      Corpus name\n-r RELEASE, --release RELEASE\n                      Release\n-p {raw,xml,parsed}, --preprocess {raw,xml,parsed}\n                      Preprocess type\n-l, --list_resources  List resources\n-dl DOWNLOAD_DIR, --download_dir DOWNLOAD_DIR\n                      Set download directory (default=current directory)\n-q, --suppress_prompts\n                      Download necessary files without prompting \"(y/n)\"\n```\n\n### Description\n\nDownload files from OPUS\n\n**Examples:**\n\nList available files in RF corpus for en-sv language pair:\n\n```\nopus_get --directory RF --source en --target sv --list\n```\n\nDownload RF corpus for en-sv:\n\n```\nopus_get --directory RF --source en --target sv\n```\n\nYou can specify the directory to which the files will be downloaded:\n\n```\nopus_get --directory RF --source en --target sv --download_dir RF_files\n```\n\nList all files in RF that include English:\n\n```\nopus_get --directory RF --source en --list\n```\n\nList all files for all language pairs in RF:\n\n```\nopus_get --directory RF --list\n```\n\nList all en-sv files in the whole OPUS:\n\n```\nopus_get --source en --target sv --list\n```\n\n---\n\n## opus_langid\n\n### Usage\n\n```\nusage: opus_langid [-h] -f FILE_PATH [-t TARGET_FILE_PATH] [-v] [-s]\n```\n\narguments:\n\n```\n-h, --help            show this help message and exit\n-f FILE_PATH, --file_path FILE_PATH\n                      File path\n-t TARGET_FILE_PATH, --target_file_path TARGET_FILE_PATH\n                      Target file path. By default, the original file is\n                      edited\n-v, --verbosity       Verbosity. -v: print current xml file\n-s, --suppress_errors\n                      Suppress error messages in language detection\n```\n\n### Description\n\nAdd language ids to sentences in plain xml files or xml files in zip archives using [pycld2](https://pypi.org/project/pycld2/) and [langid.py](https://github.com/saffsd/langid.py). This is required in order to be able to filter sentences by their language ids and confidence scores as described in the examples of opus_read.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/Helsinki-NLP/OpusTools", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "opustools", "package_url": "https://pypi.org/project/opustools/", "platform": "", "project_url": "https://pypi.org/project/opustools/", "project_urls": {"Homepage": "https://github.com/Helsinki-NLP/OpusTools"}, "release_url": "https://pypi.org/project/opustools/0.0.54/", "requires_dist": null, "requires_python": "", "summary": "Tools to read OPUS", "version": "0.0.54", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>OpusTools</h1>\n<p>Tools for accessing and processing OPUS data.</p>\n<ul>\n<li>opus_read: read parallel data sets and convert to different output formats</li>\n<li>opus_express: Create test/dev/train sets from OPUS data.</li>\n<li>opus_cat: extract given OPUS document from release data</li>\n<li>opus_get: download files from OPUS</li>\n<li>opus_langid: add language ids to sentences in xml files in zip archives</li>\n</ul>\n<h3>Installation:</h3>\n<p><code>pip install opustools</code></p>\n<hr>\n<h2>opus_read</h2>\n<h3>Usage</h3>\n<pre><code>usage: opus_read [-h] -d corpus_name -s langid -t langid [-r version]\n                 [-p {raw,xml,parsed}] [-m M] [-S S] [-T T] [-a attribute]\n                 [-tr TR] [-ln] [-w file_name [file_name ...]]\n                 [-wm {normal,moses,tmx,links}] [-pn] [-f] [-rd path_to_dir]\n                 [-af path_to_file] [-sz path_to_zip] [-tz path_to_zip]\n                 [-cm delimiter] [-pa] [-sa attribute [attribute ...]]\n                 [-ta attribute [attribute ...]] [-ca delimiter]\n                 [--src_cld2 lang_id score] [--trg_cld2 lang_id score]\n                 [--src_langid lang_id score] [--trg_langid lang_id score]\n                 [-id file_name] [-q] [-dl DOWNLOAD_DIR] [-pi] [-v]\n</code></pre>\n<p>arguments:</p>\n<pre><code>-h, --help          show this help message and exit\n-d corpus_name, --directory corpus_name\n                    Corpus name\n-s langid, --source langid\n                    Source language\n-t langid, --target langid\n                    Target language\n-r version, --release version\n                    Release (default=latest)\n-p {raw,xml,parsed}, --preprocess {raw,xml,parsed}\n                    Preprocess-type (raw, xml or parsed, default=xml)\n-m MAXIMUM, --maximum MAXIMUM   Maximum number of alignments\n-S SRC_RANGE, --src_range SRC_RANGE\n                    Number of source sentences in alignments (range is\n                    allowed, eg. -S 1-2)\n-T TGT_RANGE, --tgt_range TGT_RANGE\n                    Number of target sentences in alignments (range is\n                    allowed, eg. -T 1-2)\n-a attribute, --attribute attribute\n                    Set attribute for filttering\n-tr THRESHOLD, --threshold THRESHOLD\n                    Set threshold for an attribute\n-ln, --leave_non_alignments_out\n                    Leave non-alignments out\n-w file_name [file_name ...], --write file_name [file_name ...]\n                    Write to file. To print moses format in separate\n                    files, enter two file names. Otherwise enter one file\n                    name.\n-wm {normal,moses,tmx,links}, --write_mode {normal,moses,tmx,links}\n                    Set write mode\n-pn, --print_file_names\n                    Print file names when using moses format\n-f, --fast          Fast parsing. Faster than normal parsing, if you print\n                    a small part of the whole corpus, but requires the\n                    sentence ids in alignment files to be in sequence.\n-rd path_to_dir, --root_directory path_to_dir\n                    Change root directory (default=/proj/nlpl/data/OPUS)\n-af path_to_file, --alignment_file path_to_file\n                    Use given alignment file\n-sz path_to_zip, --source_zip path_to_zip\n                    Use given source zip file\n-tz path_to_zip, --target_zip path_to_zip\n                    Use given target zip file\n-cm delimiter, --change_moses_delimiter delimiter\n                    Change moses delimiter (default=tab)\n-pa, --print_annotations\n                    Print annotations, if they exist\n-sa attribute [attribute ...], --source_annotations attribute [attribute ...]\n                    Set source sentence annotation attributes to be\n                    printed, e.g. -sa pos lem. To print all available\n                    attributes use -sa all_attrs (default=pos lem)\n-ta attribute [attribute ...], --target_annotations attribute [attribute ...]\n                    Set target sentence annotation attributes to be\n                    printed, e.g. -ta pos lem. To print all available\n                    attributes use -ta all_attrs (default=pos lem)\n-ca delimiter, --change_annotation_delimiter delimiter\n                    Change annotation delimiter (default=|)\n--src_cld2 lang_id score\n                    Filter source sentences by their cld2 language id\n                    labels and confidence score, e.g. en 0.9\n--trg_cld2 lang_id score\n                    Filter target sentences by their cld2 language id\n                    labels and confidence score, e.g. en 0.9\n--src_langid lang_id score\n                    Filter source sentences by their langid.py language id\n                    labels and confidence score, e.g. en 0.9\n--trg_langid lang_id score\n                    Filter target sentences by their langid.py language id\n                    labels and confidence score, e.g. en 0.9\n-id file_name, --write_ids file_name\n                    Write sentence ids to a file.\n-q, --suppress_prompts\n                    Download necessary files without prompting \"(y/n)\"\n-dl DOWNLOAD_DIR, --download_dir DOWNLOAD_DIR\n                    Set download directory (default=current directory)\n-pi, --preserve_inline_tags\n                    Preserve inline tags within sentences\n-v, --verbose       Print prorgess messages when writing results to files\n</code></pre>\n<h3>Description</h3>\n<p><code>opus_read</code> is a script to read sentence alignments stored in XCES align format and print the aligned sentences to STDOUT. It requires monolingual alignments of sentences in linked XML files. Linked XML files are specified in the \"toDoc\" and \"fromDoc\" attributes (see below).</p>\n<pre><code>&lt;cesAlign version=\"1.0\"&gt;\n &lt;linkGrp targType=\"s\" toDoc=\"source1.xml\" fromDoc=\"target1.xml\"&gt;\n   &lt;link certainty=\"0.88\" xtargets=\"s1.1 s1.2;s1.1\" id=\"SL1\" /&gt;\n   ....\n &lt;linkGrp targType=\"s\" toDoc=\"source2.xml\" fromDoc=\"target2.xml\"&gt;\n   &lt;link certainty=\"0.88\" xtargets=\"s1.1;s1.1\" id=\"SL1\" /&gt;\n</code></pre>\n<p>Several parameters can be set to filter the alignments and to print only certain types of alignments.</p>\n<p><code>opus_read</code> can also be used to filter the XCES alignment files and to print the remaining links in the same\nXCES align format. Set the \"-wm\" flag to \"links\" to enable this mode.</p>\n<p><code>opus_read</code> reads the alignments from zip files. Starting up the script might take some time, if the zip files are large (for example OpenSubtitles in OPUS).</p>\n<p><code>opus_read</code> uses <code>ExhaustiveSentenceParser</code> by default. This means that each time a <code>&lt;linkGrp&gt;</code> tag is found, the corresponding source and target documents are read through and each sentence is stored in a hashmap with the sentence id as the key. This allows the reader to read alignment files that have sentence ids in non-sequential order. Each time a <code>&lt;linkGrp&gt;</code> tag is found, the script pauses printing for a second to read through the source and target documents. The duration of the pause depends on the size of the source and target documents.</p>\n<p>Using the \"-f\" flag allows the usage of <code>SentenceParser</code>, which is faster than ExhaustiveSentenceParser in cases where only a small part of a corpus is read. <code>SentenceParser</code> does not store the sentences in a hashmap. Rather, when it finds a <code>&lt;link&gt;</code> tag, it iterates through a sentence file until a sentence id is matched with the sentence id found in the <code>&lt;link&gt;</code> tag. SentenceParser can't go backwards, which means that if the ids are not in sequential order in the alignment file, the parser will not find alignment pairs after the sentence id sequence breaks. <code>SentenceParser</code> is less reliable than <code>ExhaustiveSentenceParser</code>, but using the \"-f\" flag is beneficial when the whole corpus does not need to be scanned, in other words, when using the \"-m\" flag.</p>\n<p><strong>Examples:</strong></p>\n<p>Read sentence alignment in XCES align format. Necessary files will be downloaded if they are not found locally:</p>\n<p><code>opus_read --directory RF --source en --target sv</code></p>\n<p>Read sentences with specific preprocessing type. (default is xml, which is tokenized text):</p>\n<p><code>opus_read --directory RF --source en --target sv --preprocess raw</code></p>\n<p>Leave non-alignments (pairs with no sentences on one side) out</p>\n<pre><code>opus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --preprocess raw\\\n    --leave_non_alignments_out\n</code></pre>\n<p>Print first 10 alignment pairs:</p>\n<p><code>opus_read --directory RF --source en --target sv -m 10</code></p>\n<p>Print XCES align format of all 1:1 sentence alignments:</p>\n<pre><code>opus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --src_range 1 \\\n    --tgt_range 1\n</code></pre>\n<p>Print alignments with alignment certainty greater than 1.1:</p>\n<pre><code>opus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --attribute certainty \\\n    --threshold 1.1\n</code></pre>\n<p>Write results to file:</p>\n<p><code>opus_read --directory RF --source en --target sv --write result.txt</code></p>\n<p>Write with different output format:</p>\n<pre><code>opus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --write result.tmx\\\n    --write_mode tmx\n</code></pre>\n<p>Write moses format to one file:</p>\n<pre><code>opus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --write en-sv.txt\\\n    --write_mode moses\n</code></pre>\n<p>or to two files:</p>\n<pre><code>opus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --write en-sv.en en-sv.sv \\\n    --write_mode moses\n</code></pre>\n<p>Read sentences using your alignment file. First create an alignment file, for example:</p>\n<pre><code>opus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --attribute certainty \\\n    --threshold 1.1 \\\n    --write_mode links \\\n    --write en-sv.links\n</code></pre>\n<p>Then use the created alignment file:</p>\n<p><code>opus_read --directory RF --source en --target sv --alignment_file en-sv.links</code></p>\n<p>Annotations can be printed with <code>--print_annotations</code> if they are included in the sentence files. To print all annotation attributes, specify this with <code>--source_annotations</code> and <code>--target_annotations</code> flags:</p>\n<pre><code>opus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --print_annotations \\\n    --source_annotations all_attrs \\\n    --target_annotations all_attrs\n</code></pre>\n<p>Sentences can be filtered by their language id labels and confidence score. First, the language ids need to be added to the sentence files with <code>opus_langid</code>. If you have run the previous examples, you should have <code>RF_latest_xml_en.zip</code> and <code>RF_latest_xml_sv.zip</code> in your current working directory. Apply <code>opus_langid</code> to these files:</p>\n<pre><code>opus_langid --file_path RF_latest_xml_en.zip\nopus_langid --file_path RF_latest_xml_sv.zip\n</code></pre>\n<p>Now you can filter by language ids. This example uses both cld2 and langid.py language detection confidence scores:</p>\n<pre><code>opus_read --directory RF \\\n    --source en \\\n    --target sv \\\n    --src_cld2 en 0.99 \\\n    --trg_cld2 sv 0.99 \\\n    --src_langid en 1 \\\n    --trg_langid sv 1\n</code></pre>\n<p><strong>You can also import the module to your python script:</strong></p>\n<p>In <code>your_script.py</code>, first import the package:</p>\n<p><code>import opustools</code></p>\n<p>Initialize OpusRead:</p>\n<pre><code>opus_reader = opustools.OpusRead(\n    directory='Books',\n    source='en',\n    target='fi')\nopus_reader.printPairs()\n</code></pre>\n<p>and then run:</p>\n<p><code>python3 your_script.py</code></p>\n<hr>\n<h2>opus_express</h2>\n<h3>Usage</h3>\n<pre><code>usage: opus_express [-h] [-f] -s lang_id -t lang_id\n                    [-c [coll_name [coll_name ...]]]\n                    [--root-dir /path/to/OPUS] [--test-override /path/to/file]\n                    [--test-quota num_sents] [--dev-quota num_sents]\n                    [--doc-bounds] [--quality-aware]\n                    [--overlap-threshold min_pct] [--preserve-inline-tags]\n                    [--shuffle] [--test-set filename] [--dev-set filename]\n                    [--train-set filename]\n</code></pre>\n<p>arguments:</p>\n<pre><code>-h, --help            show this help message and exit\n-f, --force           suppress warnings (default: False)\n-s lang_id, --src-lang lang_id\n                      source language (e.g. `en')\n-t lang_id, --tgt-lang lang_id\n                      target language (e.g. `pt')\n-c [coll_name [coll_name ...]], --collections [coll_name [coll_name ...]]\n                      OPUS collection(s) to fetch (default: `OpenSubtitles')\n                      Collections list: ['ALL', 'ada83', 'Bianet', 'bible-\n                      uedin', 'Books', 'CAPES', 'DGT', 'DOGC', 'ECB',\n                      'EhuHac', 'Elhuyar', 'EMEA', 'EUbookshop', 'EUconst',\n                      'Europarl', 'Finlex', 'fiskmo', 'giga-fren',\n                      'GlobalVoices', 'GNOME', 'hrenWaC', 'JRC-Acquis',\n                      'KDE4', 'KDEdoc', 'MBS', 'memat', 'MontenegrinSubs',\n                      'MPC1', 'MultiUN', 'News-Commentary', 'OfisPublik',\n                      'OpenOffice', 'OpenSubtitles', 'ParaCrawl', 'PHP',\n                      'QED', 'RF', 'sardware', 'SciELO', 'SETIMES', 'SPC',\n                      'Tanzil', 'Tatoeba', 'TED2013', 'TedTalks', 'TEP',\n                      'TildeMODEL', 'Ubuntu', 'UN', 'UNPC', 'wikimedia',\n                      'Wikipedia', 'WikiSource', 'WMT-News', 'XhosaNavy']\n--root-dir /path/to/OPUS\n                      Root directory for OPUS\n                      (default:`/proj/nlpl/data/OPUS')\n--test-override /path/to/file\n                      path to file containing resource IDs to reserve for\n                      the test set (default: None)\n--test-quota num_sents\n                      test set size in sentences (default: 10000)\n--dev-quota num_sents\n                      development set size in sentences (default: 10000)\n--doc-bounds          preserve document blocks (also marks document\n                      boundaries) (default: False)\n--quality-aware       reserve one-to-one aligned samples with high overlap\n                      for test/dev sets (incompatible with `--doc-bounds')\n                      (default: False)\n--overlap-threshold min_pct\n                      threshold for alignment overlap in `--quality-aware'\n                      mode (default: 0.8)\n--preserve-inline-tags\n                      preserve inline timestamp tags in aligned samples\n                      (default: False)\n--shuffle             shuffle samples (incompatible with `--doc-bounds')\n                      (default: False)\n--test-set filename   filename stub for output test set (default: `test')\n--dev-set filename    filename stub for output development set (default:\n                      `dev')\n--train-set filename  filename stub for output training set (default:\n                      `train')\n</code></pre>\n<h3>Description</h3>\n<p>All aboard the OPUS Express! Create test/dev/train sets from OPUS data.</p>\n<hr>\n<h2>opus_cat</h2>\n<h3>Usage</h3>\n<pre><code>usage: opus_cat [-h] -d DIRECTORY -l LANGUAGE [-i] [-m MAXIMUM] [-p]\n                [-f FILE_NAME] [-r RELEASE] [-pa]\n                [-sa SET_ATTRIBUTE [SET_ATTRIBUTE ...]]\n                [-ca CHANGE_ANNOTATION_DELIMITER] [-rd path_to_dir]\n                [-dl DOWNLOAD_DIR]\n</code></pre>\n<p>arguments:</p>\n<pre><code>-h, --help            show this help message and exit\n-d DIRECTORY, --directory DIRECTORY\n                      Corpus name\n-l LANGUAGE, --language LANGUAGE\n                      Language\n-i, --no_ids          Print without ids when using -p\n-m MAXIMUM, --maximum MAXIMUM\n                      Maximum number of sentences\n-p, --plain           Print in plain txt\n-f FILE_NAME, --file_name FILE_NAME\n                      File name (if not given, prints all files)\n-r RELEASE, --release RELEASE\n                      Release (default=latest)\n-pa, --print_annotations\n                      Print annotations, if they exist\n-sa SET_ATTRIBUTE [SET_ATTRIBUTE ...], --set_attribute SET_ATTRIBUTE [SET_ATTRIBUTE ...]\n                      Set sentence annotation attributes to be printed, e.g.\n                      -sa pos lem. To print all available attributes use -sa\n                      all_attrs (default=pos,lem)\n-ca CHANGE_ANNOTATION_DELIMITER, --change_annotation_delimiter CHANGE_ANNOTATION_DELIMITER\n                      Change annotation delimiter (default=|)\n-rd path_to_dir, --root_directory path_to_dir\n                      Change root directory (default=/proj/nlpl/data/OPUS)\n-dl DOWNLOAD_DIR, --download_dir DOWNLOAD_DIR\n                      Set download directory (default=current directory)\n</code></pre>\n<h3>Description</h3>\n<p>Read a document from OPUS and print to STDOUT</p>\n<p><strong>Examples:</strong></p>\n<p>Read a corpus:</p>\n<pre><code>opus_cat --directory RF --language en\n</code></pre>\n<p>Read with output in plain text:</p>\n<pre><code>opus_cat --directory RF --language en --plain\n</code></pre>\n<p>Read with output in plain text including annotations:</p>\n<pre><code>opus_cat --directory RF --language en --plain --print_annotations\n</code></pre>\n<p>Read a specific file in a corpus:</p>\n<pre><code>opus_cat --directory RF --language en --file_name RF/xml/en/1996.xml\n</code></pre>\n<hr>\n<h2>opus_get</h2>\n<h3>Usage</h3>\n<pre><code>usage: opus_get [-h] [-s SOURCE] [-t TARGET] [-d DIRECTORY] [-r RELEASE]\n                [-p {raw,xml,parsed}] [-l] [-dl DOWNLOAD_DIR] [-q]\n</code></pre>\n<p>arguments:</p>\n<pre><code>-h, --help            show this help message and exit\n-s SOURCE, --source SOURCE\n                      Source language\n-t TARGET, --target TARGET\n                      Target language\n-d DIRECTORY, --directory DIRECTORY\n                      Corpus name\n-r RELEASE, --release RELEASE\n                      Release\n-p {raw,xml,parsed}, --preprocess {raw,xml,parsed}\n                      Preprocess type\n-l, --list_resources  List resources\n-dl DOWNLOAD_DIR, --download_dir DOWNLOAD_DIR\n                      Set download directory (default=current directory)\n-q, --suppress_prompts\n                      Download necessary files without prompting \"(y/n)\"\n</code></pre>\n<h3>Description</h3>\n<p>Download files from OPUS</p>\n<p><strong>Examples:</strong></p>\n<p>List available files in RF corpus for en-sv language pair:</p>\n<pre><code>opus_get --directory RF --source en --target sv --list\n</code></pre>\n<p>Download RF corpus for en-sv:</p>\n<pre><code>opus_get --directory RF --source en --target sv\n</code></pre>\n<p>You can specify the directory to which the files will be downloaded:</p>\n<pre><code>opus_get --directory RF --source en --target sv --download_dir RF_files\n</code></pre>\n<p>List all files in RF that include English:</p>\n<pre><code>opus_get --directory RF --source en --list\n</code></pre>\n<p>List all files for all language pairs in RF:</p>\n<pre><code>opus_get --directory RF --list\n</code></pre>\n<p>List all en-sv files in the whole OPUS:</p>\n<pre><code>opus_get --source en --target sv --list\n</code></pre>\n<hr>\n<h2>opus_langid</h2>\n<h3>Usage</h3>\n<pre><code>usage: opus_langid [-h] -f FILE_PATH [-t TARGET_FILE_PATH] [-v] [-s]\n</code></pre>\n<p>arguments:</p>\n<pre><code>-h, --help            show this help message and exit\n-f FILE_PATH, --file_path FILE_PATH\n                      File path\n-t TARGET_FILE_PATH, --target_file_path TARGET_FILE_PATH\n                      Target file path. By default, the original file is\n                      edited\n-v, --verbosity       Verbosity. -v: print current xml file\n-s, --suppress_errors\n                      Suppress error messages in language detection\n</code></pre>\n<h3>Description</h3>\n<p>Add language ids to sentences in plain xml files or xml files in zip archives using <a href=\"https://pypi.org/project/pycld2/\" rel=\"nofollow\">pycld2</a> and <a href=\"https://github.com/saffsd/langid.py\" rel=\"nofollow\">langid.py</a>. This is required in order to be able to filter sentences by their language ids and confidence scores as described in the examples of opus_read.</p>\n\n          </div>"}, "last_serial": 6429451, "releases": {"0.0.52": [{"comment_text": "", "digests": {"md5": "0d32e27c9865d4a8cea829136bf4e283", "sha256": "f7ad1745285891f9c8933e873d373bf1783e6683537df6fb22aa1da22598dbef"}, "downloads": -1, "filename": "opustools-0.0.52-py3-none-any.whl", "has_sig": false, "md5_digest": "0d32e27c9865d4a8cea829136bf4e283", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 81115, "upload_time": "2019-11-22T09:28:17", "upload_time_iso_8601": "2019-11-22T09:28:17.650615Z", "url": "https://files.pythonhosted.org/packages/86/4b/30549c9c0d3f125ed8640bf6698e6ce70f10dce45ced38400c76ef68515f/opustools-0.0.52-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "bcc7737eca3714d750c664f59e14521f", "sha256": "6630f5825b12b12e927dda753c3e8d20b00e29c1e8a7ec6e2a20777bb6de15db"}, "downloads": -1, "filename": "opustools-0.0.52.tar.gz", "has_sig": false, "md5_digest": "bcc7737eca3714d750c664f59e14521f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31559, "upload_time": "2019-11-22T09:28:20", "upload_time_iso_8601": "2019-11-22T09:28:20.994778Z", "url": "https://files.pythonhosted.org/packages/7b/4b/3c2c27dc4d441d0ded1078126e3f0474b7698224d08039bd987041f71170/opustools-0.0.52.tar.gz", "yanked": false}], "0.0.53": [{"comment_text": "", "digests": {"md5": "55d7293e86eb2b9d805229a1ddf2511d", "sha256": "3bc35002ed520df1fbd37561f49f0368883828eb39b9b56276264c551177b017"}, "downloads": -1, "filename": "opustools-0.0.53-py3-none-any.whl", "has_sig": false, "md5_digest": "55d7293e86eb2b9d805229a1ddf2511d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 81133, "upload_time": "2019-11-22T09:46:58", "upload_time_iso_8601": "2019-11-22T09:46:58.308065Z", "url": "https://files.pythonhosted.org/packages/b6/3b/7c34d5ec43f3dc3810a12d898fb2a95f5a193b5dc3e0460aeef24739758f/opustools-0.0.53-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "61ea8909ed596eedf8315915a2f76d84", "sha256": "2f4bb3624c70fbb7a78def6fdba83bfeb2ea93167e38d272c8e032d93e375faa"}, "downloads": -1, "filename": "opustools-0.0.53.tar.gz", "has_sig": false, "md5_digest": "61ea8909ed596eedf8315915a2f76d84", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31469, "upload_time": "2019-11-22T09:47:00", "upload_time_iso_8601": "2019-11-22T09:47:00.400060Z", "url": "https://files.pythonhosted.org/packages/5c/5e/050a8eac9806941a38c5e229490cb1d48c9c945292e287b597c8f805f992/opustools-0.0.53.tar.gz", "yanked": false}], "0.0.54": [{"comment_text": "", "digests": {"md5": "062366b506b396a5616daf39f5913945", "sha256": "13005c6f28a6e61cd5b86ddd5b714d3d547ce82a72de47f5dffa43ce6577045e"}, "downloads": -1, "filename": "opustools-0.0.54-py3-none-any.whl", "has_sig": false, "md5_digest": "062366b506b396a5616daf39f5913945", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 86987, "upload_time": "2020-01-10T13:10:21", "upload_time_iso_8601": "2020-01-10T13:10:21.479940Z", "url": "https://files.pythonhosted.org/packages/17/88/6b8d6c4c3ab37d4dfacab066fd3b568f098cba8e9175140cc5f3b32d65ea/opustools-0.0.54-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "4399f7f857aecd5165b36d4bd92426f3", "sha256": "78a8c5db2c5fd5ed863cbb11baf4faf79fc76170eb3b667df27f0b472baab0b5"}, "downloads": -1, "filename": "opustools-0.0.54.tar.gz", "has_sig": false, "md5_digest": "4399f7f857aecd5165b36d4bd92426f3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 32944, "upload_time": "2020-01-10T13:10:23", "upload_time_iso_8601": "2020-01-10T13:10:23.797246Z", "url": "https://files.pythonhosted.org/packages/61/79/5c52a23a976ff03a19a8b9776bf16d7acc2b3a30d103a59e031bdcfba471/opustools-0.0.54.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "062366b506b396a5616daf39f5913945", "sha256": "13005c6f28a6e61cd5b86ddd5b714d3d547ce82a72de47f5dffa43ce6577045e"}, "downloads": -1, "filename": "opustools-0.0.54-py3-none-any.whl", "has_sig": false, "md5_digest": "062366b506b396a5616daf39f5913945", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 86987, "upload_time": "2020-01-10T13:10:21", "upload_time_iso_8601": "2020-01-10T13:10:21.479940Z", "url": "https://files.pythonhosted.org/packages/17/88/6b8d6c4c3ab37d4dfacab066fd3b568f098cba8e9175140cc5f3b32d65ea/opustools-0.0.54-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "4399f7f857aecd5165b36d4bd92426f3", "sha256": "78a8c5db2c5fd5ed863cbb11baf4faf79fc76170eb3b667df27f0b472baab0b5"}, "downloads": -1, "filename": "opustools-0.0.54.tar.gz", "has_sig": false, "md5_digest": "4399f7f857aecd5165b36d4bd92426f3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 32944, "upload_time": "2020-01-10T13:10:23", "upload_time_iso_8601": "2020-01-10T13:10:23.797246Z", "url": "https://files.pythonhosted.org/packages/61/79/5c52a23a976ff03a19a8b9776bf16d7acc2b3a30d103a59e031bdcfba471/opustools-0.0.54.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:01:55 2020"}