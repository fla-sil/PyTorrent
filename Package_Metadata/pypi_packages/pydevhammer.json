{"info": {"author": "Declan Keyes-Bevan", "author_email": "declankeyesbevan@users.noreply.github.com", "bugtrack_url": null, "classifiers": ["Development Status :: 2 - Pre-Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Programming Language :: Python :: 3.6", "Topic :: Software Development :: Build Tools"], "description": "# Py Dev Hammer\n\n:snake: :nerd_face: :hammer:  \nWhen all you have is a hammer, everything looks like a dev.\n\n## About\nPy Dev Hammer is a collection of tools to help in developing Python applications. \n\nThis pre-alpha release contains a single tool. It is a Continuous Integration helper which performs\ndynamic and static code analysis on your project and POSTs the results to GitHub as statuses.\n\nSee [road map](#road-map) for further release plans. The first item is to use AWS CloudFormation to\nmake most of this document redundant. As the project progresses this README will reference other\nREADMEs instead of detailing everything.\n\n## Requires\n\n    python3.6\n\n## Prerequisites\nNote: this guide attempts to keep specific references to third-party tools to a minimum as they are\nvery likely to change. Use your intuition and please get in\n[contact](https://www.declankeyesbevan.com/contact) if there are glaring problems and/or you want to\nbuy me a beer. The latter is recommended.\n\n### GitHub\nTo enable Continuous Integration of your commits, GitHub communicates with AWS CodeBuild via\n[Webhooks](https://help.github.com/articles/about-webhooks/). For ease of use you can set this up in\nthe [GitHub UI](https://developer.github.com/webhooks/creating/#setting-up-a-webhook) rather than\nusing the API. The following options should be used:\n\n- Payload URL: `https://codebuild.{your-aws-region}.amazonaws.com/webhooks`\n- Content type: `application/json`\n- Secret: [Create a secure secret](https://developer.github.com/webhooks/securing/)\n- SSL verification: `Enable`\n- Which events would you like to trigger this webhook?: `Just the push event.`\n- Active: `Ticked`\n\nYou will link CodeBuild to GitHub [next](#codebuild).\n\n### AWS\n#### CodeBuild\nYou must\n[configure your build](https://docs.aws.amazon.com/codebuild/latest/userguide/create-project.html)\nto integrate with GitHub. For the `Source provider` option choose GitHub then `Connect to GitHub`.\nFollow the authentication path then pick the source repository.\n\nThe following options should be used:\n- Report build status: `Ticked`\n- Webhook: `Ticked`\n- Branch filter: `Leave blank` (Build them all!)\n- Build Badge: `Ticked`\n- Build specification: `Use the buildspec.yml in the source code root directory`\n- Buildspec name: `buildspec.yml`\n- Service role: `Create a service role in your account`\n\n#### DynamoDB\nTo maintain the state of multiple builds, a [DynamoDB table](\nhttps://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithTables.html)\nwith a partition and sort key needs to be created. The [example app file](#app) uses the following\nvalues:\n\n    dynamo:\n        table_name: 'build-status'\n        partition_key_name: 'branch_name'\n        sort_key_name: 'build_start_time'\n\nThe primary partition key is a `String` and the primary sort key is a `Number`.\n\n#### Systems Manager (SSM)\nTo POST to GitHub a `github_owner` and `github_token` are [required](#github). These are to\nbe kept in the [AWS Systems Manager Parameter Store](\nhttps://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-paramstore.html)\nas type `SecureString`.\n\n#### IAM\nYou will be creating an IAM service role when configuring [CodeBuild](#codebuild).\n\n### Config\nTwo configuration files are required for the scripts: `app` and `user`. Examples are located at\n[`examples/app_config.example.yml`](examples/app_config.example.yml) and\n[`examples/user_config.example.yml`](examples/user_config.example.yml).\n\n#### App\nThe example app config can be copied and used as is, however you may want to remove some of the test\ntypes under `tests_to_run` and note that your [`buildspec.yml`](#usage) will need to be adjusted to\nmatch. \n\n#### User\nThe example user config should be modified to suit your GitHub and AWS project details.\n\n### Certificates\nTo POST securely to GitHub (as you are sending your GitHub token over the Internet) a certificate\nmust be used. Pass your file path as an environment variable `CERTIFICATE_FILE`. Alternatively you\ncan use the third-party Python module [certifi](https://pypi.org/project/certifi/) to generate this.\nThe script will look for the environment variable first and fall back to using `certifi.where()`.\n\n### Environment variables\nA number of environment variables must be set for the CodeBuild environment via the\n[`buildspec.yml`](#usage) file.\n\nThis variable is set automatically by AWS CodeBuild:\n - CODEBUILD_SRC_DIR\n\nThese variables are used by the scripts of this project:  \n(Note: the back-ticks are important as this is BASH-land)\n- PYTHONPATH=`` `pwd` ``\n- CONFIG_DIR=`/path/to/your/config/dir`\n- CERTIFICATE_FILE=`/path/to/your/cert.file` (Note: [optional](#certificates))\n- CODEBUILD_GIT_BRANCH=`` `git branch -a --contains HEAD | sed -n 2p | awk '{ printf $1 }'` ``  \n(Note: deprecation warning; will be sourced from within Python in future releases)\n\nThis variable is used by CodeBuild:\n- TESTS_DIR=`$CODEBUILD_SRC_DIR/path/to/your/tests/results/dir`  \n(Note: this is the test directory for your project, not this project)\n\n## Installation\n`pip install pydevhammer`\n\n## Usage\nCreate a Python file to run the scripts from the command line via `buildspec.yml`. An example file\ncan be found in [`examples/run_github_status_posting.py`](examples/run_github_status_posting.py).\n\nTo use CodeBuild with the above [AWS config](#codebuild), you will need to create a `buildspec.yml`\nfile. An example file is located in [`examples/buildspec.yml`](examples/buildspec.yml). The `build`\nsection of that file is where you will call the [`tests_to_run`](#app).\n\n## Road Map\n- Set up all AWS resources with CloudFormation (who wants to read this README?)\n- reStructuredText to Markdown converter (mostly already written)\n- Visualisation of the toolkit with dashboards (need more tools in the old toolkit first)\n- Dockerising things (that should be Dockerised)\n- Monitoring (comings and goings of electrons)\n- Other cool things I'm sure (fingers crossed)", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/declankeyesbevan/py-dev-hammer", "keywords": "github aws codebuild continuous-integration dev-tools", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "pydevhammer", "package_url": "https://pypi.org/project/pydevhammer/", "platform": "", "project_url": "https://pypi.org/project/pydevhammer/", "project_urls": {"Documentation": "https://github.com/declankeyesbevan/py-dev-hammer/docs", "Homepage": "https://github.com/declankeyesbevan/py-dev-hammer", "Issues": "https://github.com/declankeyesbevan/py-dev-hammer/issues", "Source": "https://github.com/declankeyesbevan/py-dev-hammer"}, "release_url": "https://pypi.org/project/pydevhammer/0.1.1/", "requires_dist": null, "requires_python": "~=3.6", "summary": "Python development tools using AWS and GitHub", "version": "0.1.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Py Dev Hammer</h1>\n<p>:snake: :nerd_face: :hammer:<br>\nWhen all you have is a hammer, everything looks like a dev.</p>\n<h2>About</h2>\n<p>Py Dev Hammer is a collection of tools to help in developing Python applications.</p>\n<p>This pre-alpha release contains a single tool. It is a Continuous Integration helper which performs\ndynamic and static code analysis on your project and POSTs the results to GitHub as statuses.</p>\n<p>See <a href=\"#road-map\" rel=\"nofollow\">road map</a> for further release plans. The first item is to use AWS CloudFormation to\nmake most of this document redundant. As the project progresses this README will reference other\nREADMEs instead of detailing everything.</p>\n<h2>Requires</h2>\n<pre><code>python3.6\n</code></pre>\n<h2>Prerequisites</h2>\n<p>Note: this guide attempts to keep specific references to third-party tools to a minimum as they are\nvery likely to change. Use your intuition and please get in\n<a href=\"https://www.declankeyesbevan.com/contact\" rel=\"nofollow\">contact</a> if there are glaring problems and/or you want to\nbuy me a beer. The latter is recommended.</p>\n<h3>GitHub</h3>\n<p>To enable Continuous Integration of your commits, GitHub communicates with AWS CodeBuild via\n<a href=\"https://help.github.com/articles/about-webhooks/\" rel=\"nofollow\">Webhooks</a>. For ease of use you can set this up in\nthe <a href=\"https://developer.github.com/webhooks/creating/#setting-up-a-webhook\" rel=\"nofollow\">GitHub UI</a> rather than\nusing the API. The following options should be used:</p>\n<ul>\n<li>Payload URL: <code>https://codebuild.{your-aws-region}.amazonaws.com/webhooks</code></li>\n<li>Content type: <code>application/json</code></li>\n<li>Secret: <a href=\"https://developer.github.com/webhooks/securing/\" rel=\"nofollow\">Create a secure secret</a></li>\n<li>SSL verification: <code>Enable</code></li>\n<li>Which events would you like to trigger this webhook?: <code>Just the push event.</code></li>\n<li>Active: <code>Ticked</code></li>\n</ul>\n<p>You will link CodeBuild to GitHub <a href=\"#codebuild\" rel=\"nofollow\">next</a>.</p>\n<h3>AWS</h3>\n<h4>CodeBuild</h4>\n<p>You must\n<a href=\"https://docs.aws.amazon.com/codebuild/latest/userguide/create-project.html\" rel=\"nofollow\">configure your build</a>\nto integrate with GitHub. For the <code>Source provider</code> option choose GitHub then <code>Connect to GitHub</code>.\nFollow the authentication path then pick the source repository.</p>\n<p>The following options should be used:</p>\n<ul>\n<li>Report build status: <code>Ticked</code></li>\n<li>Webhook: <code>Ticked</code></li>\n<li>Branch filter: <code>Leave blank</code> (Build them all!)</li>\n<li>Build Badge: <code>Ticked</code></li>\n<li>Build specification: <code>Use the buildspec.yml in the source code root directory</code></li>\n<li>Buildspec name: <code>buildspec.yml</code></li>\n<li>Service role: <code>Create a service role in your account</code></li>\n</ul>\n<h4>DynamoDB</h4>\n<p>To maintain the state of multiple builds, a <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithTables.html\" rel=\"nofollow\">DynamoDB table</a>\nwith a partition and sort key needs to be created. The <a href=\"#app\" rel=\"nofollow\">example app file</a> uses the following\nvalues:</p>\n<pre><code>dynamo:\n    table_name: 'build-status'\n    partition_key_name: 'branch_name'\n    sort_key_name: 'build_start_time'\n</code></pre>\n<p>The primary partition key is a <code>String</code> and the primary sort key is a <code>Number</code>.</p>\n<h4>Systems Manager (SSM)</h4>\n<p>To POST to GitHub a <code>github_owner</code> and <code>github_token</code> are <a href=\"#github\" rel=\"nofollow\">required</a>. These are to\nbe kept in the <a href=\"https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-paramstore.html\" rel=\"nofollow\">AWS Systems Manager Parameter Store</a>\nas type <code>SecureString</code>.</p>\n<h4>IAM</h4>\n<p>You will be creating an IAM service role when configuring <a href=\"#codebuild\" rel=\"nofollow\">CodeBuild</a>.</p>\n<h3>Config</h3>\n<p>Two configuration files are required for the scripts: <code>app</code> and <code>user</code>. Examples are located at\n<a href=\"examples/app_config.example.yml\" rel=\"nofollow\"><code>examples/app_config.example.yml</code></a> and\n<a href=\"examples/user_config.example.yml\" rel=\"nofollow\"><code>examples/user_config.example.yml</code></a>.</p>\n<h4>App</h4>\n<p>The example app config can be copied and used as is, however you may want to remove some of the test\ntypes under <code>tests_to_run</code> and note that your <a href=\"#usage\" rel=\"nofollow\"><code>buildspec.yml</code></a> will need to be adjusted to\nmatch.</p>\n<h4>User</h4>\n<p>The example user config should be modified to suit your GitHub and AWS project details.</p>\n<h3>Certificates</h3>\n<p>To POST securely to GitHub (as you are sending your GitHub token over the Internet) a certificate\nmust be used. Pass your file path as an environment variable <code>CERTIFICATE_FILE</code>. Alternatively you\ncan use the third-party Python module <a href=\"https://pypi.org/project/certifi/\" rel=\"nofollow\">certifi</a> to generate this.\nThe script will look for the environment variable first and fall back to using <code>certifi.where()</code>.</p>\n<h3>Environment variables</h3>\n<p>A number of environment variables must be set for the CodeBuild environment via the\n<a href=\"#usage\" rel=\"nofollow\"><code>buildspec.yml</code></a> file.</p>\n<p>This variable is set automatically by AWS CodeBuild:</p>\n<ul>\n<li>CODEBUILD_SRC_DIR</li>\n</ul>\n<p>These variables are used by the scripts of this project:<br>\n(Note: the back-ticks are important as this is BASH-land)</p>\n<ul>\n<li>PYTHONPATH=<code>`pwd`</code></li>\n<li>CONFIG_DIR=<code>/path/to/your/config/dir</code></li>\n<li>CERTIFICATE_FILE=<code>/path/to/your/cert.file</code> (Note: <a href=\"#certificates\" rel=\"nofollow\">optional</a>)</li>\n<li>CODEBUILD_GIT_BRANCH=<code>`git branch -a --contains HEAD | sed -n 2p | awk '{ printf $1 }'`</code><br>\n(Note: deprecation warning; will be sourced from within Python in future releases)</li>\n</ul>\n<p>This variable is used by CodeBuild:</p>\n<ul>\n<li>TESTS_DIR=<code>$CODEBUILD_SRC_DIR/path/to/your/tests/results/dir</code><br>\n(Note: this is the test directory for your project, not this project)</li>\n</ul>\n<h2>Installation</h2>\n<p><code>pip install pydevhammer</code></p>\n<h2>Usage</h2>\n<p>Create a Python file to run the scripts from the command line via <code>buildspec.yml</code>. An example file\ncan be found in <a href=\"examples/run_github_status_posting.py\" rel=\"nofollow\"><code>examples/run_github_status_posting.py</code></a>.</p>\n<p>To use CodeBuild with the above <a href=\"#codebuild\" rel=\"nofollow\">AWS config</a>, you will need to create a <code>buildspec.yml</code>\nfile. An example file is located in <a href=\"examples/buildspec.yml\" rel=\"nofollow\"><code>examples/buildspec.yml</code></a>. The <code>build</code>\nsection of that file is where you will call the <a href=\"#app\" rel=\"nofollow\"><code>tests_to_run</code></a>.</p>\n<h2>Road Map</h2>\n<ul>\n<li>Set up all AWS resources with CloudFormation (who wants to read this README?)</li>\n<li>reStructuredText to Markdown converter (mostly already written)</li>\n<li>Visualisation of the toolkit with dashboards (need more tools in the old toolkit first)</li>\n<li>Dockerising things (that should be Dockerised)</li>\n<li>Monitoring (comings and goings of electrons)</li>\n<li>Other cool things I'm sure (fingers crossed)</li>\n</ul>\n\n          </div>"}, "last_serial": 4430724, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "85438e7ee7d5dd3dd42cd8d3c1c5279e", "sha256": "a0edf70dfd34916e6a11831f56c4d3351a80eace6ff18c68e245763741c0b2cc"}, "downloads": -1, "filename": "pydevhammer-0.1.0.tar.gz", "has_sig": false, "md5_digest": "85438e7ee7d5dd3dd42cd8d3c1c5279e", "packagetype": "sdist", "python_version": "source", "requires_python": "~=3.6", "size": 15368, "upload_time": "2018-08-20T11:44:58", "upload_time_iso_8601": "2018-08-20T11:44:58.049635Z", "url": "https://files.pythonhosted.org/packages/ef/13/438e10eb6b8c4232a861646da8d02ea7c02dae91e390f31b480766255ed0/pydevhammer-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "d7f60c03292c476f1808700f2f061841", "sha256": "672aa327c28c0161a7f62f8a0f7825640021d0374317cee09d8a046d1962ab6a"}, "downloads": -1, "filename": "pydevhammer-0.1.1.tar.gz", "has_sig": false, "md5_digest": "d7f60c03292c476f1808700f2f061841", "packagetype": "sdist", "python_version": "source", "requires_python": "~=3.6", "size": 16647, "upload_time": "2018-10-30T09:09:24", "upload_time_iso_8601": "2018-10-30T09:09:24.732570Z", "url": "https://files.pythonhosted.org/packages/61/16/223f6cce6bca28af0c4a7ef9cbad523a96038f456b10a6fd9ab30268c025/pydevhammer-0.1.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d7f60c03292c476f1808700f2f061841", "sha256": "672aa327c28c0161a7f62f8a0f7825640021d0374317cee09d8a046d1962ab6a"}, "downloads": -1, "filename": "pydevhammer-0.1.1.tar.gz", "has_sig": false, "md5_digest": "d7f60c03292c476f1808700f2f061841", "packagetype": "sdist", "python_version": "source", "requires_python": "~=3.6", "size": 16647, "upload_time": "2018-10-30T09:09:24", "upload_time_iso_8601": "2018-10-30T09:09:24.732570Z", "url": "https://files.pythonhosted.org/packages/61/16/223f6cce6bca28af0c4a7ef9cbad523a96038f456b10a6fd9ab30268c025/pydevhammer-0.1.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:07:06 2020"}