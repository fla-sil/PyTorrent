{"info": {"author": "wangxup", "author_email": "wang_xup@163.com", "bugtrack_url": null, "classifiers": [], "description": "# \u5c06tree.export_graphviz\u6784\u5efa\u51b3\u7b56\u6811\u4ee3\u7801\u8f6c\u6362\u4e3a\u6807\u51c6sql\n## 1. \u5de5\u5177\u7b80\u4ecb\n\u901a\u5e38\u6211\u4eec\u4f1a\u91c7\u7528`sklearn`\u6846\u67b6`tree`\u6a21\u5757\u8fdb\u884c\u51b3\u7b56\u6811\u76f8\u5173\u7684\u6316\u6398\u5206\u6790\uff0c\u5e76\u4f7f\u7528`tree.export_graphviz`\u5c06\u51b3\u7b56\u6811\u8fc7\u7a0b\u5bfc\u51fa\u4e3a`graphviz.dot`\u6587\u4ef6\n\u518d\u914d\u5408\u5916\u90e8\u7a0b\u5e8f`graphviz`\u8fdb\u884c\u753b\u56fe\u3002  \n\u4f46\u5728\u6709\u4e9b\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u6839\u636e\u51b3\u7b56\u6811\u56fe\u5f62\u6765\u62bd\u53d6\u5173\u952e\u8def\u5f84\uff0c\u5c06\u5176\u7ffb\u8bd1\u6210\u6807\u51c6`sql`\uff0c\u90e8\u7f72\u5728\u6570\u636e\u5e93\u5f53\u4e2d\uff0c\u6301\u7eed\u5316\u4ea7\u751f\u4ef7\u503c\u3002  \n\u76ee\u524d`sklearn`\u6682\u672a\u63d0\u4f9b\u6b64\u529f\u80fd\uff0c\u6545\u6211\u4eec\u5f00\u53d1\u6b64\u63d2\u4ef6\u6765\u8fdb\u884c\u5b8c\u5584\u3002\n\n## 2. \u5b89\u88c5\u73af\u5883\u3001\u4f9d\u8d56\n- \u5b89\u88c5\u65b9\u6cd5:\u652f\u6301\u5728\u7ebf\u5b89\u88c5\u6216\u79bb\u7ebf\u5b89\u88c5\n    - [download](https://pypi.org/project/graphviz-sql/)  \n> pip install graphviz_sql\n- \u5185\u90e8\u4f9d\u8d56\n\t- sklearn\n- \u5916\u90e8\u4f9d\u8d56\n\t- [Graphviz](https://graphviz.gitlab.io/download/):\u627e\u5230\u9002\u5408\u81ea\u5df1\u7248\u672c\u4e0b\u8f7d\u5373\u53ef\n\n\n\n## 3. \u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\n#### \u5c06`tree.export_graphviz`\u8f93\u51fa\u7ed3\u679c\u8f6c\u6362\u4e3a\u6807\u51c6`sql` \n\n**`tree.export_graphviz`\u53c2\u6570\u8bf4\u660e**  \n\u4e3a\u4e86\u80fd\u591f\u51c6\u786e\u7684\u8f93\u51fa\u51b3\u7b56\u6811\u89c4\u5219\uff0c\u65b9\u6cd5`tree.export_graphviz`\u5f53\u4e2d\u4e00\u4e0b\u53c2\u6570\u5fc5\u987b\u8bbe\u7f6e\u6210\u4ee5\u4e0b\u5f62\u5f0f\u3002\u5176\u4f59\u53c2\u6570\u4f7f\u7528\u9ed8\u8ba4\u7684\u5373\u53ef\u3002\n- `feature_names`\uff1a\u7279\u5f81\u540d\u79f0\uff0c\u987a\u5e8f\u5fc5\u987b\u548c\u8bad\u7ec3\u6837\u672c\u7684\u6570\u636e\u4e00\u81f4  \n- `class_names`\uff1a\u7c7b\u522b\u540d\u79f0\uff0c\u8f93\u5165\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u8981\u6392\u5e8f\u3002\u5982\u5c06\u539f\u6765\u7684['1', '0']\u8bbe\u7f6e\u4e3a['0', '1']\uff0c\u6ce8\u610f\uff1a\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u4e3a`str`\u578b\u7684\u3002  \n- `filled`\uff1a\u586b\u5145\uff0c\u5fc5\u987b\u4e3a`True`  \n- `node_ids`\uff1a\u8282\u70b9id\uff0c\u5fc5\u987b\u4e3a`True`  \n- `rounded`\uff1a\u753b\u7684\u56fe\u5f62\u8fb9\u7f18\u662f\u5426\u7f8e\u5316\uff0c\u5fc5\u987b\u4e3a`True`  \n- `special_characters`\uff1a\u5fc5\u987b\u4e3a`True`\n\n=========================\n### eg:\n```python\nimport pandas as pd\nimport numpy as np\nfrom sklearn import tree\nfrom sklearn import metrics\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.datasets import load_iris\niris = load_iris()\nclf = tree.DecisionTreeClassifier()\n\nfeature_names = ['sepal_length', 'sepal_width', 'petal_length', 'petal_width']\ndata = pd.DataFrame(iris.data, columns=feature_names)\ndata['target'] = iris.target\nX_train, X_test, y_train, y_test = train_test_split(\n                   data[feature_names], data['target'], test_size=0.33, random_state=42)\nclf = clf.fit(data[feature_names], data['target'])\n# tree_rule_2.txt\u4e3a\u8f93\u51fa\u6587\u4ef6\u7684\u8def\u5f84\ntree.export_graphviz(model,out_file='tree_rule.dot',\n                            feature_names=feture_selected_res,\n                            class_names=['0', '1'],\n                            filled=True,\n                            node_ids=True,\n                            rounded=True,\n                            special_characters=True)\n\n\n# \u8c03\u7528\u63d2\u4ef6  \nfrom graphviz_sql.extract import to_sql \n\n# tree_rule.txt: \u901a\u8fc7\u51b3\u7b56\u6811\u751f\u6210\u7684\u7528\u4e8egraphviz\u753b\u56fe\u7684\u6587\u4ef6\u8def\u5f84\n# tree_rule_2.sql: \u8f6c\u6362\u540e\u7684sql\u6587\u4ef6\u8def\u5f84 \nto_sql('tree_rule.dot', 'tree_rule_2.sql')\n```\n# 4. \u4ee3\u7801\u539f\u7406\n\u901a\u8fc7\u4e00\u79cd\u53cd\u5411\u641c\u7d22\u7684\u65b9\u6cd5\u904d\u5386\u51b3\u7b56\u6811\u7ed3\u679c\uff0c\u5c06\u7ed3\u679c\u8f6c\u6362\u6210\u6807\u51c6sql\n# 5. \u5e38\u89c1\u95ee\u9898\u8bf4\u660e\n- \u4e71\u7801\n\t- \u6b64\u95ee\u9898\u53ef\u767e\u5ea6\u4e00\u4e0b\uff0c\u7f51\u4e0a\u6709\u5177\u4f53\u7684\u5904\u7406\u529e\u6cd5\uff0c\n\t- \u5176\u5b83\u95ee\u9898\u8bf7\u53ca\u65f6\u53cd\u9988\n    \n## 6. \u52a0\u5165\u8fdb\u6765\n\u5f3a\u5927\u7684\u5de5\u5177\u9700\u8981\u4f60\u6211\u5171\u540c\u5b8c\u5584\uff0c\u671f\u5f85\u6280\u672f\u5927\u4f6c\u7684\u52a0\u5165\u3002\n\n- email:\n> wang_xup@163.com  \n> 857956556@qq.com", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/WangxuP/graphviz_sql", "keywords": "None", "license": "", "maintainer": "", "maintainer_email": "", "name": "graphviz-sql", "package_url": "https://pypi.org/project/graphviz-sql/", "platform": "any", "project_url": "https://pypi.org/project/graphviz-sql/", "project_urls": {"Homepage": "https://github.com/WangxuP/graphviz_sql"}, "release_url": "https://pypi.org/project/graphviz-sql/0.1.8/", "requires_dist": null, "requires_python": "", "summary": "\u5c06tree.export_graphviz\u6784\u5efa\u51b3\u7b56\u6811\u4ee3\u7801\u8f6c\u6362\u4e3a\u6807\u51c6sql", "version": "0.1.8", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>\u5c06tree.export_graphviz\u6784\u5efa\u51b3\u7b56\u6811\u4ee3\u7801\u8f6c\u6362\u4e3a\u6807\u51c6sql</h1>\n<h2>1. \u5de5\u5177\u7b80\u4ecb</h2>\n<p>\u901a\u5e38\u6211\u4eec\u4f1a\u91c7\u7528<code>sklearn</code>\u6846\u67b6<code>tree</code>\u6a21\u5757\u8fdb\u884c\u51b3\u7b56\u6811\u76f8\u5173\u7684\u6316\u6398\u5206\u6790\uff0c\u5e76\u4f7f\u7528<code>tree.export_graphviz</code>\u5c06\u51b3\u7b56\u6811\u8fc7\u7a0b\u5bfc\u51fa\u4e3a<code>graphviz.dot</code>\u6587\u4ef6\n\u518d\u914d\u5408\u5916\u90e8\u7a0b\u5e8f<code>graphviz</code>\u8fdb\u884c\u753b\u56fe\u3002<br>\n\u4f46\u5728\u6709\u4e9b\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u6839\u636e\u51b3\u7b56\u6811\u56fe\u5f62\u6765\u62bd\u53d6\u5173\u952e\u8def\u5f84\uff0c\u5c06\u5176\u7ffb\u8bd1\u6210\u6807\u51c6<code>sql</code>\uff0c\u90e8\u7f72\u5728\u6570\u636e\u5e93\u5f53\u4e2d\uff0c\u6301\u7eed\u5316\u4ea7\u751f\u4ef7\u503c\u3002<br>\n\u76ee\u524d<code>sklearn</code>\u6682\u672a\u63d0\u4f9b\u6b64\u529f\u80fd\uff0c\u6545\u6211\u4eec\u5f00\u53d1\u6b64\u63d2\u4ef6\u6765\u8fdb\u884c\u5b8c\u5584\u3002</p>\n<h2>2. \u5b89\u88c5\u73af\u5883\u3001\u4f9d\u8d56</h2>\n<ul>\n<li>\u5b89\u88c5\u65b9\u6cd5:\u652f\u6301\u5728\u7ebf\u5b89\u88c5\u6216\u79bb\u7ebf\u5b89\u88c5\n<ul>\n<li><a href=\"https://pypi.org/project/graphviz-sql/\" rel=\"nofollow\">download</a></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>pip install graphviz_sql</p>\n</blockquote>\n<ul>\n<li>\u5185\u90e8\u4f9d\u8d56\n<ul>\n<li>sklearn</li>\n</ul>\n</li>\n<li>\u5916\u90e8\u4f9d\u8d56\n<ul>\n<li><a href=\"https://graphviz.gitlab.io/download/\" rel=\"nofollow\">Graphviz</a>:\u627e\u5230\u9002\u5408\u81ea\u5df1\u7248\u672c\u4e0b\u8f7d\u5373\u53ef</li>\n</ul>\n</li>\n</ul>\n<h2>3. \u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b</h2>\n<h4>\u5c06<code>tree.export_graphviz</code>\u8f93\u51fa\u7ed3\u679c\u8f6c\u6362\u4e3a\u6807\u51c6<code>sql</code></h4>\n<p><strong><code>tree.export_graphviz</code>\u53c2\u6570\u8bf4\u660e</strong><br>\n\u4e3a\u4e86\u80fd\u591f\u51c6\u786e\u7684\u8f93\u51fa\u51b3\u7b56\u6811\u89c4\u5219\uff0c\u65b9\u6cd5<code>tree.export_graphviz</code>\u5f53\u4e2d\u4e00\u4e0b\u53c2\u6570\u5fc5\u987b\u8bbe\u7f6e\u6210\u4ee5\u4e0b\u5f62\u5f0f\u3002\u5176\u4f59\u53c2\u6570\u4f7f\u7528\u9ed8\u8ba4\u7684\u5373\u53ef\u3002</p>\n<ul>\n<li><code>feature_names</code>\uff1a\u7279\u5f81\u540d\u79f0\uff0c\u987a\u5e8f\u5fc5\u987b\u548c\u8bad\u7ec3\u6837\u672c\u7684\u6570\u636e\u4e00\u81f4</li>\n<li><code>class_names</code>\uff1a\u7c7b\u522b\u540d\u79f0\uff0c\u8f93\u5165\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u8981\u6392\u5e8f\u3002\u5982\u5c06\u539f\u6765\u7684['1', '0']\u8bbe\u7f6e\u4e3a['0', '1']\uff0c\u6ce8\u610f\uff1a\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u4e3a<code>str</code>\u578b\u7684\u3002</li>\n<li><code>filled</code>\uff1a\u586b\u5145\uff0c\u5fc5\u987b\u4e3a<code>True</code></li>\n<li><code>node_ids</code>\uff1a\u8282\u70b9id\uff0c\u5fc5\u987b\u4e3a<code>True</code></li>\n<li><code>rounded</code>\uff1a\u753b\u7684\u56fe\u5f62\u8fb9\u7f18\u662f\u5426\u7f8e\u5316\uff0c\u5fc5\u987b\u4e3a<code>True</code></li>\n<li><code>special_characters</code>\uff1a\u5fc5\u987b\u4e3a<code>True</code></li>\n</ul>\n<p>=========================</p>\n<h3>eg:</h3>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"nn\">pd</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"kn\">from</span> <span class=\"nn\">sklearn</span> <span class=\"kn\">import</span> <span class=\"n\">tree</span>\n<span class=\"kn\">from</span> <span class=\"nn\">sklearn</span> <span class=\"kn\">import</span> <span class=\"n\">metrics</span>\n<span class=\"kn\">from</span> <span class=\"nn\">sklearn.model_selection</span> <span class=\"kn\">import</span> <span class=\"n\">train_test_split</span>\n<span class=\"kn\">from</span> <span class=\"nn\">sklearn.datasets</span> <span class=\"kn\">import</span> <span class=\"n\">load_iris</span>\n<span class=\"n\">iris</span> <span class=\"o\">=</span> <span class=\"n\">load_iris</span><span class=\"p\">()</span>\n<span class=\"n\">clf</span> <span class=\"o\">=</span> <span class=\"n\">tree</span><span class=\"o\">.</span><span class=\"n\">DecisionTreeClassifier</span><span class=\"p\">()</span>\n\n<span class=\"n\">feature_names</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'sepal_length'</span><span class=\"p\">,</span> <span class=\"s1\">'sepal_width'</span><span class=\"p\">,</span> <span class=\"s1\">'petal_length'</span><span class=\"p\">,</span> <span class=\"s1\">'petal_width'</span><span class=\"p\">]</span>\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">DataFrame</span><span class=\"p\">(</span><span class=\"n\">iris</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">columns</span><span class=\"o\">=</span><span class=\"n\">feature_names</span><span class=\"p\">)</span>\n<span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'target'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">iris</span><span class=\"o\">.</span><span class=\"n\">target</span>\n<span class=\"n\">X_train</span><span class=\"p\">,</span> <span class=\"n\">X_test</span><span class=\"p\">,</span> <span class=\"n\">y_train</span><span class=\"p\">,</span> <span class=\"n\">y_test</span> <span class=\"o\">=</span> <span class=\"n\">train_test_split</span><span class=\"p\">(</span>\n                   <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"n\">feature_names</span><span class=\"p\">],</span> <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'target'</span><span class=\"p\">],</span> <span class=\"n\">test_size</span><span class=\"o\">=</span><span class=\"mf\">0.33</span><span class=\"p\">,</span> <span class=\"n\">random_state</span><span class=\"o\">=</span><span class=\"mi\">42</span><span class=\"p\">)</span>\n<span class=\"n\">clf</span> <span class=\"o\">=</span> <span class=\"n\">clf</span><span class=\"o\">.</span><span class=\"n\">fit</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">[</span><span class=\"n\">feature_names</span><span class=\"p\">],</span> <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'target'</span><span class=\"p\">])</span>\n<span class=\"c1\"># tree_rule_2.txt\u4e3a\u8f93\u51fa\u6587\u4ef6\u7684\u8def\u5f84</span>\n<span class=\"n\">tree</span><span class=\"o\">.</span><span class=\"n\">export_graphviz</span><span class=\"p\">(</span><span class=\"n\">model</span><span class=\"p\">,</span><span class=\"n\">out_file</span><span class=\"o\">=</span><span class=\"s1\">'tree_rule.dot'</span><span class=\"p\">,</span>\n                            <span class=\"n\">feature_names</span><span class=\"o\">=</span><span class=\"n\">feture_selected_res</span><span class=\"p\">,</span>\n                            <span class=\"n\">class_names</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'0'</span><span class=\"p\">,</span> <span class=\"s1\">'1'</span><span class=\"p\">],</span>\n                            <span class=\"n\">filled</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n                            <span class=\"n\">node_ids</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n                            <span class=\"n\">rounded</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n                            <span class=\"n\">special_characters</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n\n<span class=\"c1\"># \u8c03\u7528\u63d2\u4ef6  </span>\n<span class=\"kn\">from</span> <span class=\"nn\">graphviz_sql.extract</span> <span class=\"kn\">import</span> <span class=\"n\">to_sql</span> \n\n<span class=\"c1\"># tree_rule.txt: \u901a\u8fc7\u51b3\u7b56\u6811\u751f\u6210\u7684\u7528\u4e8egraphviz\u753b\u56fe\u7684\u6587\u4ef6\u8def\u5f84</span>\n<span class=\"c1\"># tree_rule_2.sql: \u8f6c\u6362\u540e\u7684sql\u6587\u4ef6\u8def\u5f84 </span>\n<span class=\"n\">to_sql</span><span class=\"p\">(</span><span class=\"s1\">'tree_rule.dot'</span><span class=\"p\">,</span> <span class=\"s1\">'tree_rule_2.sql'</span><span class=\"p\">)</span>\n</pre>\n<h1>4. \u4ee3\u7801\u539f\u7406</h1>\n<p>\u901a\u8fc7\u4e00\u79cd\u53cd\u5411\u641c\u7d22\u7684\u65b9\u6cd5\u904d\u5386\u51b3\u7b56\u6811\u7ed3\u679c\uff0c\u5c06\u7ed3\u679c\u8f6c\u6362\u6210\u6807\u51c6sql</p>\n<h1>5. \u5e38\u89c1\u95ee\u9898\u8bf4\u660e</h1>\n<ul>\n<li>\u4e71\u7801\n<ul>\n<li>\u6b64\u95ee\u9898\u53ef\u767e\u5ea6\u4e00\u4e0b\uff0c\u7f51\u4e0a\u6709\u5177\u4f53\u7684\u5904\u7406\u529e\u6cd5\uff0c</li>\n<li>\u5176\u5b83\u95ee\u9898\u8bf7\u53ca\u65f6\u53cd\u9988</li>\n</ul>\n</li>\n</ul>\n<h2>6. \u52a0\u5165\u8fdb\u6765</h2>\n<p>\u5f3a\u5927\u7684\u5de5\u5177\u9700\u8981\u4f60\u6211\u5171\u540c\u5b8c\u5584\uff0c\u671f\u5f85\u6280\u672f\u5927\u4f6c\u7684\u52a0\u5165\u3002</p>\n<ul>\n<li>email:</li>\n</ul>\n<blockquote>\n<p><a href=\"mailto:wang_xup@163.com\">wang_xup@163.com</a><br>\n<a href=\"mailto:857956556@qq.com\">857956556@qq.com</a></p>\n</blockquote>\n\n          </div>"}, "last_serial": 6354175, "releases": {"0.1.8": [{"comment_text": "", "digests": {"md5": "2d6fcca40792e2ce222c9f92f4a24af7", "sha256": "2ed5a525cecb2e81f46a4a75492ee8cdb6113ff6309133cc39809388179774e3"}, "downloads": -1, "filename": "graphviz_sql-0.1.8.tar.gz", "has_sig": false, "md5_digest": "2d6fcca40792e2ce222c9f92f4a24af7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5245, "upload_time": "2019-12-24T07:57:16", "upload_time_iso_8601": "2019-12-24T07:57:16.644698Z", "url": "https://files.pythonhosted.org/packages/2e/a4/97f5cf1064206efe8e7fa0cfb766581de87282b44f186a5fc8a46cbb75d3/graphviz_sql-0.1.8.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "2d6fcca40792e2ce222c9f92f4a24af7", "sha256": "2ed5a525cecb2e81f46a4a75492ee8cdb6113ff6309133cc39809388179774e3"}, "downloads": -1, "filename": "graphviz_sql-0.1.8.tar.gz", "has_sig": false, "md5_digest": "2d6fcca40792e2ce222c9f92f4a24af7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5245, "upload_time": "2019-12-24T07:57:16", "upload_time_iso_8601": "2019-12-24T07:57:16.644698Z", "url": "https://files.pythonhosted.org/packages/2e/a4/97f5cf1064206efe8e7fa0cfb766581de87282b44f186a5fc8a46cbb75d3/graphviz_sql-0.1.8.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:54:29 2020"}