{"info": {"author": "Jim Pivarski (IRIS-HEP)", "author_email": "pivarski@princeton.edu", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "Intended Audience :: Information Technology", "Intended Audience :: Science/Research", "License :: OSI Approved :: BSD License", "Operating System :: MacOS", "Operating System :: POSIX", "Operating System :: Unix", "Programming Language :: Python", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Scientific/Engineering", "Topic :: Scientific/Engineering :: Information Analysis", "Topic :: Scientific/Engineering :: Mathematics", "Topic :: Scientific/Engineering :: Physics", "Topic :: Software Development", "Topic :: Utilities"], "description": "![](https://github.com/scikit-hep/aghast/raw/master/docs/source/logo-300px.png)\n\n# aghast\n\n[![Build Status](https://travis-ci.org/scikit-hep/aghast.svg?branch=master)](https://travis-ci.org/scikit-hep/aghast) [![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/scikit-hep/aghast/master?urlpath=lab/tree/binder%2Ftutorial.ipynb)\n\nAghast is a histogramming library that does not fill histograms and does not plot them. Its role is behind the scenes, to provide better communication between histogramming libraries.\n\nSpecifically, it is a structured representation of **ag**gregated, **h**istogram-like **st**atistics as sharable \"ghasts.\" It has all of the \"bells and whistles\" often associated with plain histograms, such as number of entries, unbinned mean and standard deviation, bin errors, associated fit functions, profile plots, and even simple ntuples (needed for unbinned fits or machine learning applications). [ROOT](https://root.cern.ch/root/htmldoc/guides/users-guide/Histograms.html) has all of these features; [Numpy](https://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html) has none of them.\n\nThe purpose of aghast is to be an intermediate when converting ROOT histograms into Numpy, or vice-versa, or both of these into [Boost.Histogram](https://github.com/boostorg/histogram), [Physt](https://physt.readthedocs.io/en/latest/index.html), [Pandas](https://pandas.pydata.org), etc. Without an intermediate representation, converting between _N_ libraries (to get the advantages of all) would equire _N(N  \u2012 1)/2_ conversion routines; with an intermediate representation, we only need _N_, and the mapping of feature to feature can be made explicit in terms of a common language.\n\nFurthermore, aghast is a [Flatbuffers](http://google.github.io/flatbuffers/) schema, so it can be deciphered in [many languages](https://google.github.io/flatbuffers/flatbuffers_support.html), with [lazy, random-access](https://github.com/mzaks/FlatBuffersSwift/wiki/FlatBuffers-Explained), and uses a [small amount of memory](http://google.github.io/flatbuffers/md__benchmarks.html). A collection of histograms, functions, and ntuples can be shared among processes as shared memory, used in remote procedure calls, processed incrementally in a memory-mapped file, or saved in files with future-proof [schema evolution](https://google.github.io/flatbuffers/md__schemas.html).\n\n## Installation from packages\n\nInstall aghast like any other Python package:\n\n```bash\npip install aghast                        # maybe with sudo or --user, or in virtualenv\n```\n\n<!-- or install with [conda](https://conda.io/en/latest/miniconda.html): -->\n\n<!-- ```bash -->\n<!-- conda config --add channels conda-forge   # if you haven't added conda-forge already -->\n<!-- conda install uproot -->\n<!-- ``` -->\n\n_(Not on conda yet.)_\n\n## Manual installation\n\nAfter you git-clone this GitHub repository and ensure that `numpy` is installed, somehow:\n\n```bash\npip install \"flatbuffers>=1.8.0\"          # for the flatbuffers runtime (with Numpy)\ncd python                                 # only implementation so far is in Python\npython setup.py install                   # to use it outside of this directory\n```\n\nNow you should be able to `import aghast` or `from aghast import *` in Python.\n\nIf you need to change `flatbuffers/aghast.fbs`, you'll need to additionally:\n\n   1. Get `flatc` to generate Python sources from `flatbuffers/aghast.fbs`. I use `conda install -c conda-forge flatbuffers`. (The `flatc` executable is _not_ included in the pip `flatbuffers` package, and the Python runtime is _not_ included in the conda `flatbuffers` package. They're disjoint.)\n   2. In the `python` directory, run `./generate_flatbuffers.py` (which calls `flatc` and does some post-processing).\n\nEvery time you change `flatbuffers/aghast.fbs`, re-run `./generate_flatbuffers.py`.\n\n## Documentation\n\nFull specification:\n\n   * [Introduction](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#introduction)\n   * [Data types](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#data-types)\n      * [Collection](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#collection)\n      * [Histogram](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#histogram)\n      * [Axis](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#axis)\n      * [IntegerBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#integerbinning)\n      * [RegularBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#regularbinning)\n      * [RealInterval](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#realinterval)\n      * [RealOverflow](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#realoverflow)\n      * [HexagonalBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#hexagonalbinning)\n      * [EdgesBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#edgesbinning)\n      * [IrregularBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#irregularbinning)\n      * [CategoryBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#categorybinning)\n      * [SparseRegularBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#sparseregularbinning)\n      * [FractionBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#fractionbinning)\n      * [PredicateBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#predicatebinning)\n      * [VariationBinning](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#variationbinning)\n      * [Variation](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#variation)\n      * [Assignment](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#assignment)\n      * [UnweightedCounts](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#unweightedcounts)\n      * [WeightedCounts](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#weightedcounts)\n      * [InterpretedInlineBuffer](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#interpretedinlinebuffer)\n      * [InterpretedInlineInt64Buffer](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#interpretedinlineint64buffer)\n      * [InterpretedInlineFloat64Buffer](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#interpretedinlinefloat64buffer)\n      * [InterpretedExternalBuffer](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#interpretedexternalbuffer)\n      * [Profile](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#profile)\n      * [Statistics](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#statistics)\n      * [Moments](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#moments)\n      * [Quantiles](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#quantiles)\n      * [Modes](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#modes)\n      * [Extremes](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#extremes)\n      * [StatisticFilter](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#statisticfilter)\n      * [Covariance](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#covariance)\n      * [ParameterizedFunction](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#parameterizedfunction)\n      * [Parameter](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#parameter)\n      * [EvaluatedFunction](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#evaluatedfunction)\n      * [BinnedEvaluatedFunction](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#binnedevaluatedfunction)\n      * [Ntuple](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#ntuple)\n      * [Column](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#column)\n      * [NtupleInstance](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#ntupleinstance)\n      * [Chunk](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#chunk)\n      * [ColumnChunk](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#columnchunk)\n      * [Page](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#page)\n      * [RawInlineBuffer](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#rawinlinebuffer)\n      * [RawExternalBuffer](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#rawexternalbuffer)\n      * [Metadata](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#metadata)\n      * [Decoration](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#decoration)\n\n## Tutorial examples\n\n[Run this tutorial on Binder](https://mybinder.org/v2/gh/scikit-hep/aghast/master?urlpath=lab/tree/binder%2Ftutorial.ipynb).\n\n### Conversions\n\nThe main purpose of aghast is to move aggregated, histogram-like statistics (called \"ghasts\") from one framework to the next. This requires a conversion of high-level domain concepts.\n\nConsider the following example: in Numpy, a histogram is simply a 2-tuple of arrays with special meaning\u2014bin contents, then bin edges.\n\n\n```python\nimport numpy\n\nnumpy_hist = numpy.histogram(numpy.random.normal(0, 1, int(10e6)), bins=80, range=(-5, 5))\nnumpy_hist\n```\n\n\n\n\n    (array([     2,      5,      9,     15,     29,     49,     80,    104,\n               237,    352,    555,    867,   1447,   2046,   3037,   4562,\n              6805,   9540,  13529,  18584,  25593,  35000,  46024,  59103,\n             76492,  96441, 119873, 146159, 177533, 210628, 246316, 283292,\n            321377, 359314, 393857, 426446, 453031, 474806, 489846, 496646,\n            497922, 490499, 473200, 453527, 425650, 393297, 358537, 321099,\n            282519, 246469, 211181, 177550, 147417, 120322,  96592,  76665,\n             59587,  45776,  34459,  25900,  18876,  13576,   9571,   6662,\n              4629,   3161,   2069,   1334,    878,    581,    332,    220,\n               135,     65,     39,     26,     19,     15,      4,      4]),\n     array([-5.   , -4.875, -4.75 , -4.625, -4.5  , -4.375, -4.25 , -4.125,\n            -4.   , -3.875, -3.75 , -3.625, -3.5  , -3.375, -3.25 , -3.125,\n            -3.   , -2.875, -2.75 , -2.625, -2.5  , -2.375, -2.25 , -2.125,\n            -2.   , -1.875, -1.75 , -1.625, -1.5  , -1.375, -1.25 , -1.125,\n            -1.   , -0.875, -0.75 , -0.625, -0.5  , -0.375, -0.25 , -0.125,\n             0.   ,  0.125,  0.25 ,  0.375,  0.5  ,  0.625,  0.75 ,  0.875,\n             1.   ,  1.125,  1.25 ,  1.375,  1.5  ,  1.625,  1.75 ,  1.875,\n             2.   ,  2.125,  2.25 ,  2.375,  2.5  ,  2.625,  2.75 ,  2.875,\n             3.   ,  3.125,  3.25 ,  3.375,  3.5  ,  3.625,  3.75 ,  3.875,\n             4.   ,  4.125,  4.25 ,  4.375,  4.5  ,  4.625,  4.75 ,  4.875,\n             5.   ]))\n\n\n\nWe convert that into the aghast equivalent (a \"ghast\") with a connector (two functions: `from_numpy` and `to_numpy`).\n\n\n```python\nimport aghast\n\nghastly_hist = aghast.from_numpy(numpy_hist)\nghastly_hist\n```\n\n\n\n\n    <Histogram at 0x7f0dc88a9b38>\n\n\n\nThis object is instantiated from a class structure built from simple pieces.\n\n\n```python\nghastly_hist.dump()\n```\n\n    Histogram(\n      axis=[\n        Axis(binning=RegularBinning(num=80, interval=RealInterval(low=-5.0, high=5.0)))\n      ],\n      counts=\n        UnweightedCounts(\n          counts=\n            InterpretedInlineInt64Buffer(\n              buffer=\n                  [     2      5      9     15     29     49     80    104    237    352\n                      555    867   1447   2046   3037   4562   6805   9540  13529  18584\n                    25593  35000  46024  59103  76492  96441 119873 146159 177533 210628\n                   246316 283292 321377 359314 393857 426446 453031 474806 489846 496646\n                   497922 490499 473200 453527 425650 393297 358537 321099 282519 246469\n                   211181 177550 147417 120322  96592  76665  59587  45776  34459  25900\n                    18876  13576   9571   6662   4629   3161   2069   1334    878    581\n                      332    220    135     65     39     26     19     15      4      4])))\n\n\nNow it can be converted to a ROOT histogram with another connector.\n\n\n```python\nroot_hist = aghast.to_root(ghastly_hist, \"root_hist\")\nroot_hist\n```\n\n    <ROOT.TH1D object (\"root_hist\") at 0x55555e208ef0>\n\n```python\nimport ROOT\ncanvas = ROOT.TCanvas()\nroot_hist.Draw()\ncanvas.Draw()\n```\n\n\n![png](docs/tutorial-9_0.png)\n\n\nAnd Pandas with yet another connector.\n\n\n```python\npandas_hist = aghast.to_pandas(ghastly_hist)\npandas_hist\n```\n\n\n\n\n<div>\n<table class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>unweighted</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>[-5.0, -4.875)</th>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>[-4.875, -4.75)</th>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>[-4.75, -4.625)</th>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>[-4.625, -4.5)</th>\n      <td>15</td>\n    </tr>\n    <tr>\n      <th>[-4.5, -4.375)</th>\n      <td>29</td>\n    </tr>\n    <tr>\n      <th>[-4.375, -4.25)</th>\n      <td>49</td>\n    </tr>\n    <tr>\n      <th>[-4.25, -4.125)</th>\n      <td>80</td>\n    </tr>\n    <tr>\n      <th>[-4.125, -4.0)</th>\n      <td>104</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.875)</th>\n      <td>237</td>\n    </tr>\n    <tr>\n      <th>[-3.875, -3.75)</th>\n      <td>352</td>\n    </tr>\n    <tr>\n      <th>[-3.75, -3.625)</th>\n      <td>555</td>\n    </tr>\n    <tr>\n      <th>[-3.625, -3.5)</th>\n      <td>867</td>\n    </tr>\n    <tr>\n      <th>[-3.5, -3.375)</th>\n      <td>1447</td>\n    </tr>\n    <tr>\n      <th>[-3.375, -3.25)</th>\n      <td>2046</td>\n    </tr>\n    <tr>\n      <th>[-3.25, -3.125)</th>\n      <td>3037</td>\n    </tr>\n    <tr>\n      <th>[-3.125, -3.0)</th>\n      <td>4562</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.875)</th>\n      <td>6805</td>\n    </tr>\n    <tr>\n      <th>[-2.875, -2.75)</th>\n      <td>9540</td>\n    </tr>\n    <tr>\n      <th>[-2.75, -2.625)</th>\n      <td>13529</td>\n    </tr>\n    <tr>\n      <th>[-2.625, -2.5)</th>\n      <td>18584</td>\n    </tr>\n    <tr>\n      <th>[-2.5, -2.375)</th>\n      <td>25593</td>\n    </tr>\n    <tr>\n      <th>[-2.375, -2.25)</th>\n      <td>35000</td>\n    </tr>\n    <tr>\n      <th>[-2.25, -2.125)</th>\n      <td>46024</td>\n    </tr>\n    <tr>\n      <th>[-2.125, -2.0)</th>\n      <td>59103</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.875)</th>\n      <td>76492</td>\n    </tr>\n    <tr>\n      <th>[-1.875, -1.75)</th>\n      <td>96441</td>\n    </tr>\n    <tr>\n      <th>[-1.75, -1.625)</th>\n      <td>119873</td>\n    </tr>\n    <tr>\n      <th>[-1.625, -1.5)</th>\n      <td>146159</td>\n    </tr>\n    <tr>\n      <th>[-1.5, -1.375)</th>\n      <td>177533</td>\n    </tr>\n    <tr>\n      <th>[-1.375, -1.25)</th>\n      <td>210628</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>[1.25, 1.375)</th>\n      <td>211181</td>\n    </tr>\n    <tr>\n      <th>[1.375, 1.5)</th>\n      <td>177550</td>\n    </tr>\n    <tr>\n      <th>[1.5, 1.625)</th>\n      <td>147417</td>\n    </tr>\n    <tr>\n      <th>[1.625, 1.75)</th>\n      <td>120322</td>\n    </tr>\n    <tr>\n      <th>[1.75, 1.875)</th>\n      <td>96592</td>\n    </tr>\n    <tr>\n      <th>[1.875, 2.0)</th>\n      <td>76665</td>\n    </tr>\n    <tr>\n      <th>[2.0, 2.125)</th>\n      <td>59587</td>\n    </tr>\n    <tr>\n      <th>[2.125, 2.25)</th>\n      <td>45776</td>\n    </tr>\n    <tr>\n      <th>[2.25, 2.375)</th>\n      <td>34459</td>\n    </tr>\n    <tr>\n      <th>[2.375, 2.5)</th>\n      <td>25900</td>\n    </tr>\n    <tr>\n      <th>[2.5, 2.625)</th>\n      <td>18876</td>\n    </tr>\n    <tr>\n      <th>[2.625, 2.75)</th>\n      <td>13576</td>\n    </tr>\n    <tr>\n      <th>[2.75, 2.875)</th>\n      <td>9571</td>\n    </tr>\n    <tr>\n      <th>[2.875, 3.0)</th>\n      <td>6662</td>\n    </tr>\n    <tr>\n      <th>[3.0, 3.125)</th>\n      <td>4629</td>\n    </tr>\n    <tr>\n      <th>[3.125, 3.25)</th>\n      <td>3161</td>\n    </tr>\n    <tr>\n      <th>[3.25, 3.375)</th>\n      <td>2069</td>\n    </tr>\n    <tr>\n      <th>[3.375, 3.5)</th>\n      <td>1334</td>\n    </tr>\n    <tr>\n      <th>[3.5, 3.625)</th>\n      <td>878</td>\n    </tr>\n    <tr>\n      <th>[3.625, 3.75)</th>\n      <td>581</td>\n    </tr>\n    <tr>\n      <th>[3.75, 3.875)</th>\n      <td>332</td>\n    </tr>\n    <tr>\n      <th>[3.875, 4.0)</th>\n      <td>220</td>\n    </tr>\n    <tr>\n      <th>[4.0, 4.125)</th>\n      <td>135</td>\n    </tr>\n    <tr>\n      <th>[4.125, 4.25)</th>\n      <td>65</td>\n    </tr>\n    <tr>\n      <th>[4.25, 4.375)</th>\n      <td>39</td>\n    </tr>\n    <tr>\n      <th>[4.375, 4.5)</th>\n      <td>26</td>\n    </tr>\n    <tr>\n      <th>[4.5, 4.625)</th>\n      <td>19</td>\n    </tr>\n    <tr>\n      <th>[4.625, 4.75)</th>\n      <td>15</td>\n    </tr>\n    <tr>\n      <th>[4.75, 4.875)</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>[4.875, 5.0)</th>\n      <td>4</td>\n    </tr>\n  </tbody>\n</table>\n<p>80 rows \u00d7 1 columns</p>\n</div>\n\n\n\n### Serialization\n\nA ghast is also a [Flatbuffers](http://google.github.io/flatbuffers/) object, which has a [multi-lingual](https://google.github.io/flatbuffers/flatbuffers_support.html), [random-access](https://github.com/mzaks/FlatBuffersSwift/wiki/FlatBuffers-Explained), [small-footprint](http://google.github.io/flatbuffers/md__benchmarks.html) serialization:\n\n\n```python\nghastly_hist.tobuffer()\n```\n\n    bytearray(\"\\x04\\x00\\x00\\x00\\x90\\xff\\xff\\xff\\x10\\x00\\x00\\x00\\x00\\x01\\n\\x00\\x10\\x00\\x0c\\x00\\x0b\\x00\\x04\n               \\x00\\n\\x00\\x00\\x00`\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x04\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x0c\\x00\\x00\n               \\x00\\x08\\x00\\x0c\\x00\\x0b\\x00\\x04\\x00\\x08\\x00\\x00\\x00\\x10\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\x08\\x00\n               (\\x00\\x1c\\x00\\x04\\x00\\x08\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x14\\xc0\\x00\\x00\\x00\\x00\\x00\n               \\x00\\x14@\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00P\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x08\n               \\x00\\n\\x00\\t\\x00\\x04\\x00\\x08\\x00\\x00\\x00\\x0c\\x00\\x00\\x00\\x00\\x02\\x06\\x00\\x08\\x00\\x04\\x00\\x06\n               \\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x80\\x02\\x00\\x00\\x02\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x05\\x00\\x00\\x00\n               \\x00\\x00\\x00\\x00\\t\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x1d\\x00\\x00\n               \\x00\\x00\\x00\\x00\\x001\\x00\\x00\\x00\\x00\\x00\\x00\\x00P\\x00\\x00\\x00\\x00\\x00\\x00\\x00h\\x00\\x00\\x00\n               \\x00\\x00\\x00\\x00\\xed\\x00\\x00\\x00\\x00\\x00\\x00\\x00`\\x01\\x00\\x00\\x00\\x00\\x00\\x00+\\x02\\x00\\x00\n               \\x00\\x00\\x00\\x00c\\x03\\x00\\x00\\x00\\x00\\x00\\x00\\xa7\\x05\\x00\\x00\\x00\\x00\\x00\\x00\\xfe\\x07\\x00\n               \\x00\\x00\\x00\\x00\\x00\\xdd\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\xd2\\x11\\x00\\x00\\x00\\x00\\x00\\x00\\x95\\x1a\n               \\x00\\x00\\x00\\x00\\x00\\x00D%\\x00\\x00\\x00\\x00\\x00\\x00\\xd94\\x00\\x00\\x00\\x00\\x00\\x00\\x98H\\x00\\x00\n               \\x00\\x00\\x00\\x00\\xf9c\\x00\\x00\\x00\\x00\\x00\\x00\\xb8\\x88\\x00\\x00\\x00\\x00\\x00\\x00\\xc8\\xb3\\x00\\x00\n               \\x00\\x00\\x00\\x00\\xdf\\xe6\\x00\\x00\\x00\\x00\\x00\\x00\\xcc*\\x01\\x00\\x00\\x00\\x00\\x00\\xb9x\\x01\\x00\n               \\x00\\x00\\x00\\x00A\\xd4\\x01\\x00\\x00\\x00\\x00\\x00\\xef:\\x02\\x00\\x00\\x00\\x00\\x00}\\xb5\\x02\\x00\\x00\n               \\x00\\x00\\x00\\xc46\\x03\\x00\\x00\\x00\\x00\\x00,\\xc2\\x03\\x00\\x00\\x00\\x00\\x00\\x9cR\\x04\\x00\\x00\\x00\n               \\x00\\x00a\\xe7\\x04\\x00\\x00\\x00\\x00\\x00\\x92{\\x05\\x00\\x00\\x00\\x00\\x00\\x81\\x02\\x06\\x00\\x00\\x00\n               \\x00\\x00\\xce\\x81\\x06\\x00\\x00\\x00\\x00\\x00\\xa7\\xe9\\x06\\x00\\x00\\x00\\x00\\x00\\xb6>\\x07\\x00\\x00\n               \\x00\\x00\\x00vy\\x07\\x00\\x00\\x00\\x00\\x00\\x06\\x94\\x07\\x00\\x00\\x00\\x00\\x00\\x02\\x99\\x07\\x00\\x00\n               \\x00\\x00\\x00\\x03|\\x07\\x00\\x00\\x00\\x00\\x00p8\\x07\\x00\\x00\\x00\\x00\\x00\\x97\\xeb\\x06\\x00\\x00\\x00\n               \\x00\\x00\\xb2~\\x06\\x00\\x00\\x00\\x00\\x00Q\\x00\\x06\\x00\\x00\\x00\\x00\\x00\\x89x\\x05\\x00\\x00\\x00\\x00\n               \\x00K\\xe6\\x04\\x00\\x00\\x00\\x00\\x00\\x97O\\x04\\x00\\x00\\x00\\x00\\x00\\xc5\\xc2\\x03\\x00\\x00\\x00\\x00\n               \\x00\\xed8\\x03\\x00\\x00\\x00\\x00\\x00\\x8e\\xb5\\x02\\x00\\x00\\x00\\x00\\x00\\xd9?\\x02\\x00\\x00\\x00\\x00\n               \\x00\\x02\\xd6\\x01\\x00\\x00\\x00\\x00\\x00Py\\x01\\x00\\x00\\x00\\x00\\x00y+\\x01\\x00\\x00\\x00\\x00\\x00\\xc3\n               \\xe8\\x00\\x00\\x00\\x00\\x00\\x00\\xd0\\xb2\\x00\\x00\\x00\\x00\\x00\\x00\\x9b\\x86\\x00\\x00\\x00\\x00\\x00\\x00\n               ,e\\x00\\x00\\x00\\x00\\x00\\x00\\xbcI\\x00\\x00\\x00\\x00\\x00\\x00\\x085\\x00\\x00\\x00\\x00\\x00\\x00c%\\x00\n               \\x00\\x00\\x00\\x00\\x00\\x06\\x1a\\x00\\x00\\x00\\x00\\x00\\x00\\x15\\x12\\x00\\x00\\x00\\x00\\x00\\x00Y\\x0c\n               \\x00\\x00\\x00\\x00\\x00\\x00\\x15\\x08\\x00\\x00\\x00\\x00\\x00\\x006\\x05\\x00\\x00\\x00\\x00\\x00\\x00n\\x03\n               \\x00\\x00\\x00\\x00\\x00\\x00E\\x02\\x00\\x00\\x00\\x00\\x00\\x00L\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\xdc\\x00\n               \\x00\\x00\\x00\\x00\\x00\\x00\\x87\\x00\\x00\\x00\\x00\\x00\\x00\\x00A\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\'\\x00\n               \\x00\\x00\\x00\\x00\\x00\\x00\\x1a\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x13\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\n               \\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\")\n\n```python\nprint(\"Numpy size: \", numpy_hist[0].nbytes + numpy_hist[1].nbytes)\n\ntmessage = ROOT.TMessage()\ntmessage.WriteObject(root_hist)\nprint(\"ROOT size:  \", tmessage.Length())\n\nimport pickle\nprint(\"Pandas size:\", len(pickle.dumps(pandas_hist)))\n\nprint(\"Aghast size: \", len(ghastly_hist.tobuffer()))\n```\n\n    Numpy size:  1288\n    ROOT size:   1962\n    Pandas size: 2984\n    Aghast size:  792\n\n\nAghast is generally forseen as a memory format, like [Apache Arrow](https://arrow.apache.org), but for statistical aggregations. Like Arrow, it reduces the need to implement $N(N - 1)/2$ conversion functions among $N$ statistical libraries to just $N$ conversion functions. (See the figure on Arrow's website.)\n\n### Translation of conventions\n\nAghast also intends to be as close to zero-copy as possible. This means that it must make graceful translations among conventions. Different histogramming libraries handle overflow bins in different ways:\n\n\n```python\nfromroot = aghast.from_root(root_hist)\nfromroot.axis[0].binning.dump()\nprint(\"Bin contents length:\", len(fromroot.counts.array))\n```\n\n    RegularBinning(\n      num=80,\n      interval=RealInterval(low=-5.0, high=5.0),\n      overflow=RealOverflow(loc_underflow=BinLocation.below1, loc_overflow=BinLocation.above1))\n    Bin contents length: 82\n\n\n\n```python\nghastly_hist.axis[0].binning.dump()\nprint(\"Bin contents length:\", len(ghastly_hist.counts.array))\n```\n\n    RegularBinning(num=80, interval=RealInterval(low=-5.0, high=5.0))\n    Bin contents length: 80\n\n\nAnd yet we want to be able to manipulate them as though these differences did not exist.\n\n\n```python\nsum_hist = fromroot + ghastly_hist\n```\n\n\n```python\nsum_hist.axis[0].binning.dump()\nprint(\"Bin contents length:\", len(sum_hist.counts.array))\n```\n\n    RegularBinning(\n      num=80,\n      interval=RealInterval(low=-5.0, high=5.0),\n      overflow=RealOverflow(loc_underflow=BinLocation.above1, loc_overflow=BinLocation.above2))\n    Bin contents length: 82\n\n\nThe binning structure keeps track of the existence of underflow/overflow bins and where they are located.\n\n   * ROOT's convention is to put underflow before the normal bins (`below1`) and overflow after (`above1`), so that the normal bins are effectively 1-indexed.\n   * Boost.Histogram's convention is to put overflow after the normal bins (`above1`) and underflow after that (`above2`), so that underflow is accessed via `myhist[-1]` in Numpy.\n   * Numpy histograms don't have underflow/overflow bins.\n   * Pandas could have `Intervals` that extend to infinity.\n\nAghast accepts all of these, so that it doesn't have to manipulate the bin contents buffer it receives, but knows how to deal with them if it has to combine histograms that follow different conventions.\n\n### Binning types\n\nAll the different axis types have an equivalent in aghast (and not all are single-dimensional).\n\n\n```python\naghast.IntegerBinning(5, 10).dump()\naghast.RegularBinning(100, aghast.RealInterval(-5, 5)).dump()\naghast.HexagonalBinning(0, 100, 0, 100, aghast.HexagonalBinning.cube_xy).dump()\naghast.EdgesBinning([0.01, 0.05, 0.1, 0.5, 1, 5, 10, 50, 100]).dump()\naghast.IrregularBinning([aghast.RealInterval(0, 5),\n                         aghast.RealInterval(10, 100),\n                         aghast.RealInterval(-10, 10)],\n                       overlapping_fill=aghast.IrregularBinning.all).dump()\naghast.CategoryBinning([\"one\", \"two\", \"three\"]).dump()\naghast.SparseRegularBinning([5, 3, -2, 8, -100], 10).dump()\naghast.FractionBinning(error_method=aghast.FractionBinning.clopper_pearson).dump()\naghast.PredicateBinning([\"signal region\", \"control region\"]).dump()\naghast.VariationBinning([aghast.Variation([aghast.Assignment(\"x\", \"nominal\")]),\n                         aghast.Variation([aghast.Assignment(\"x\", \"nominal + sigma\")]),\n                         aghast.Variation([aghast.Assignment(\"x\", \"nominal - sigma\")])]).dump()\n```\n\n    IntegerBinning(min=5, max=10)\n    RegularBinning(num=100, interval=RealInterval(low=-5.0, high=5.0))\n    HexagonalBinning(qmin=0, qmax=100, rmin=0, rmax=100, coordinates=HexagonalBinning.cube_xy)\n    EdgesBinning(edges=[0.01 0.05 0.1 0.5 1 5 10 50 100])\n    IrregularBinning(\n      intervals=[\n        RealInterval(low=0.0, high=5.0),\n        RealInterval(low=10.0, high=100.0),\n        RealInterval(low=-10.0, high=10.0)\n      ],\n      overlapping_fill=IrregularBinning.all)\n    CategoryBinning(categories=['one', 'two', 'three'])\n    SparseRegularBinning(bins=[5 3 -2 8 -100], bin_width=10.0)\n    FractionBinning(error_method=FractionBinning.clopper_pearson)\n    PredicateBinning(predicates=['signal region', 'control region'])\n    VariationBinning(\n      variations=[\n        Variation(assignments=[\n            Assignment(identifier='x', expression='nominal')\n          ]),\n        Variation(\n          assignments=[\n            Assignment(identifier='x', expression='nominal + sigma')\n          ]),\n        Variation(\n          assignments=[\n            Assignment(identifier='x', expression='nominal - sigma')\n          ])\n      ])\n\n\nThe meanings of these binning classes are given in [the specification](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#integerbinning), but many of them can be converted into one another, and converting to `CategoryBinning` (strings) often makes the intent clear.\n\n\n```python\naghast.IntegerBinning(5, 10).toCategoryBinning().dump()\naghast.RegularBinning(10, aghast.RealInterval(-5, 5)).toCategoryBinning().dump()\naghast.EdgesBinning([0.01, 0.05, 0.1, 0.5, 1, 5, 10, 50, 100]).toCategoryBinning().dump()\naghast.IrregularBinning([aghast.RealInterval(0, 5),\n                         aghast.RealInterval(10, 100),\n                         aghast.RealInterval(-10, 10)],\n                       overlapping_fill=aghast.IrregularBinning.all).toCategoryBinning().dump()\naghast.SparseRegularBinning([5, 3, -2, 8, -100], 10).toCategoryBinning().dump()\naghast.FractionBinning(error_method=aghast.FractionBinning.clopper_pearson).toCategoryBinning().dump()\naghast.PredicateBinning([\"signal region\", \"control region\"]).toCategoryBinning().dump()\naghast.VariationBinning([aghast.Variation([aghast.Assignment(\"x\", \"nominal\")]),\n                         aghast.Variation([aghast.Assignment(\"x\", \"nominal + sigma\")]),\n                         aghast.Variation([aghast.Assignment(\"x\", \"nominal - sigma\")])]\n                        ).toCategoryBinning().dump()\n```\n\n    CategoryBinning(categories=['5', '6', '7', '8', '9', '10'])\n    CategoryBinning(\n      categories=['[-5, -4)', '[-4, -3)', '[-3, -2)', '[-2, -1)', '[-1, 0)', '[0, 1)', '[1, 2)', '[2, 3)',\n                  '[3, 4)', '[4, 5)'])\n    CategoryBinning(\n      categories=['[0.01, 0.05)', '[0.05, 0.1)', '[0.1, 0.5)', '[0.5, 1)', '[1, 5)', '[5, 10)', '[10, 50)',\n                  '[50, 100)'])\n    CategoryBinning(categories=['[0, 5)', '[10, 100)', '[-10, 10)'])\n    CategoryBinning(categories=['[50, 60)', '[30, 40)', '[-20, -10)', '[80, 90)', '[-1000, -990)'])\n    CategoryBinning(categories=['pass', 'all'])\n    CategoryBinning(categories=['signal region', 'control region'])\n    CategoryBinning(categories=['x := nominal', 'x := nominal + sigma', 'x := nominal - sigma'])\n\n\nThis technique can also clear up confusion about overflow bins.\n\n\n```python\naghast.RegularBinning(5, aghast.RealInterval(-5, 5), aghast.RealOverflow(\n    loc_underflow=aghast.BinLocation.above2,\n    loc_overflow=aghast.BinLocation.above1,\n    loc_nanflow=aghast.BinLocation.below1\n    )).toCategoryBinning().dump()\n```\n\n    CategoryBinning(\n      categories=['{nan}', '[-5, -3)', '[-3, -1)', '[-1, 1)', '[1, 3)', '[3, 5)', '[5, +inf]',\n                  '[-inf, -5)'])\n\n\n## Fancy binning types\n\nYou might also be wondering about `FractionBinning`, `PredicateBinning`, and `VariationBinning`.\n\n`FractionBinning` is an axis of two bins: #passing and #total, #failing and #total, or #passing and #failing. Adding it to another axis effectively makes an \"efficiency plot.\"\n\n\n```python\nh = aghast.Histogram([aghast.Axis(aghast.FractionBinning()),\n                      aghast.Axis(aghast.RegularBinning(10, aghast.RealInterval(-5, 5)))],\n                    aghast.UnweightedCounts(\n                        aghast.InterpretedInlineBuffer.fromarray(\n                            numpy.array([[  9,  25,  29,  35,  54,  67,  60,  84,  80,  94],\n                                         [ 99, 119, 109, 109,  95, 104, 102, 106, 112, 122]]))))\ndf = aghast.to_pandas(h)\ndf\n```\n\n\n\n\n<div>\n<table class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>unweighted</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"10\" valign=\"top\">pass</th>\n      <th>[-5.0, -4.0)</th>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>25</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>29</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>35</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>54</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>67</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>60</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>84</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>80</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>94</td>\n    </tr>\n    <tr>\n      <th rowspan=\"10\" valign=\"top\">all</th>\n      <th>[-5.0, -4.0)</th>\n      <td>99</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>119</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>109</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>109</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>95</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>104</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>102</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>106</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>112</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>122</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n\n\n\n\n```python\ndf = df.unstack(level=0)\ndf\n```\n\n\n\n\n<div>\n<table class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"2\" halign=\"left\">unweighted</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>all</th>\n      <th>pass</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>[-5.0, -4.0)</th>\n      <td>99</td>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>119</td>\n      <td>25</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>109</td>\n      <td>29</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>109</td>\n      <td>35</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>95</td>\n      <td>54</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>104</td>\n      <td>67</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>102</td>\n      <td>60</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>106</td>\n      <td>84</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>112</td>\n      <td>80</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>122</td>\n      <td>94</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n\n\n\n\n```python\ndf[\"unweighted\", \"pass\"] / df[\"unweighted\", \"all\"]\n```\n\n\n\n\n    [-5.0, -4.0)    0.090909\n    [-4.0, -3.0)    0.210084\n    [-3.0, -2.0)    0.266055\n    [-2.0, -1.0)    0.321101\n    [-1.0, 0.0)     0.568421\n    [0.0, 1.0)      0.644231\n    [1.0, 2.0)      0.588235\n    [2.0, 3.0)      0.792453\n    [3.0, 4.0)      0.714286\n    [4.0, 5.0)      0.770492\n    dtype: float64\n\n\n\n`PredicateBinning` means that each bin represents a predicate (if-then rule) in the filling procedure. Aghast doesn't _have_ a filling procedure, but filling-libraries can use this to encode relationships among histograms that a fitting-library can take advantage of, for combined signal-control region fits, for instance. It's possible for those regions to overlap: an input datum might satisfy more than one predicate, and `overlapping_fill` determines which bin(s) were chosen: `first`, `last`, or `all`.\n\n`VariationBinning` means that each bin represents a variation of one of the paramters used to calculate the fill-variables. This is used to determine sensitivity to systematic effects, by varying them and re-filling. In this kind of binning, the same input datum enters every bin.\n\n\n```python\nxdata = numpy.random.normal(0, 1, int(1e6))\nsigma = numpy.random.uniform(-0.1, 0.8, int(1e6))\n\nh = aghast.Histogram([aghast.Axis(aghast.VariationBinning([\n                         aghast.Variation([aghast.Assignment(\"x\", \"nominal\")]),\n                         aghast.Variation([aghast.Assignment(\"x\", \"nominal + sigma\")])])),\n                     aghast.Axis(aghast.RegularBinning(10, aghast.RealInterval(-5, 5)))],\n                    aghast.UnweightedCounts(\n                        aghast.InterpretedInlineBuffer.fromarray(\n                            numpy.concatenate([\n                                numpy.histogram(xdata, bins=10, range=(-5, 5))[0],\n                                numpy.histogram(xdata + sigma, bins=10, range=(-5, 5))[0]]))))\ndf = aghast.to_pandas(h)\ndf\n```\n\n\n\n\n<div>\n<table class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>unweighted</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"10\" valign=\"top\">x := nominal</th>\n      <th>[-5.0, -4.0)</th>\n      <td>31</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>1309</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>21624</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>135279</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>341683</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>341761</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>135675</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>21334</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>1273</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>31</td>\n    </tr>\n    <tr>\n      <th rowspan=\"10\" valign=\"top\">x := nominal + sigma</th>\n      <th>[-5.0, -4.0)</th>\n      <td>14</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>559</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>10814</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>84176</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>271999</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>367950</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>209479</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>49997</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>4815</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>193</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n\n\n\n\n```python\ndf.unstack(level=0)\n```\n\n\n\n\n<div>\n<table class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"2\" halign=\"left\">unweighted</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>x := nominal</th>\n      <th>x := nominal + sigma</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>[-5.0, -4.0)</th>\n      <td>31</td>\n      <td>14</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>1309</td>\n      <td>559</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>21624</td>\n      <td>10814</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>135279</td>\n      <td>84176</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>341683</td>\n      <td>271999</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>341761</td>\n      <td>367950</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>135675</td>\n      <td>209479</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>21334</td>\n      <td>49997</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>1273</td>\n      <td>4815</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>31</td>\n      <td>193</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n\n\n\n### Collections\n\nYou can gather many objects (histograms, functions, ntuples) into a `Collection`, partly for convenience of encapsulating all of them in one object.\n\n\n```python\naghast.Collection({\"one\": fromroot, \"two\": ghastly_hist}).dump()\n```\n\n    Collection(\n      objects={\n        'one': Histogram(\n          axis=[\n            Axis(\n              binning=\n                RegularBinning(\n                  num=80,\n                  interval=RealInterval(low=-5.0, high=5.0),\n                  overflow=RealOverflow(loc_underflow=BinLocation.below1, loc_overflow=BinLocation.above1)),\n              statistics=[\n                Statistics(\n                  moments=[\n                    Moments(sumwxn=InterpretedInlineInt64Buffer(buffer=[1e+07]), n=0),\n                    Moments(sumwxn=InterpretedInlineFloat64Buffer(buffer=[1e+07]), n=0, weightpower=1),\n                    Moments(sumwxn=InterpretedInlineFloat64Buffer(buffer=[1e+07]), n=0, weightpower=2),\n                    Moments(sumwxn=InterpretedInlineFloat64Buffer(buffer=[2468.31]), n=1, weightpower=1),\n                    Moments(\n                      sumwxn=InterpretedInlineFloat64Buffer(buffer=[1.00118e+07]),\n                      n=2,\n                      weightpower=1)\n                  ])\n              ])\n          ],\n          counts=\n            UnweightedCounts(\n              counts=\n                InterpretedInlineFloat64Buffer(\n                  buffer=\n                      [0.00000e+00 2.00000e+00 5.00000e+00 9.00000e+00 1.50000e+01 2.90000e+01\n                       4.90000e+01 8.00000e+01 1.04000e+02 2.37000e+02 3.52000e+02 5.55000e+02\n                       8.67000e+02 1.44700e+03 2.04600e+03 3.03700e+03 4.56200e+03 6.80500e+03\n                       9.54000e+03 1.35290e+04 1.85840e+04 2.55930e+04 3.50000e+04 4.60240e+04\n                       5.91030e+04 7.64920e+04 9.64410e+04 1.19873e+05 1.46159e+05 1.77533e+05\n                       2.10628e+05 2.46316e+05 2.83292e+05 3.21377e+05 3.59314e+05 3.93857e+05\n                       4.26446e+05 4.53031e+05 4.74806e+05 4.89846e+05 4.96646e+05 4.97922e+05\n                       4.90499e+05 4.73200e+05 4.53527e+05 4.25650e+05 3.93297e+05 3.58537e+05\n                       3.21099e+05 2.82519e+05 2.46469e+05 2.11181e+05 1.77550e+05 1.47417e+05\n                       1.20322e+05 9.65920e+04 7.66650e+04 5.95870e+04 4.57760e+04 3.44590e+04\n                       2.59000e+04 1.88760e+04 1.35760e+04 9.57100e+03 6.66200e+03 4.62900e+03\n                       3.16100e+03 2.06900e+03 1.33400e+03 8.78000e+02 5.81000e+02 3.32000e+02\n                       2.20000e+02 1.35000e+02 6.50000e+01 3.90000e+01 2.60000e+01 1.90000e+01\n                       1.50000e+01 4.00000e+00 4.00000e+00 0.00000e+00]))),\n        'two': Histogram(\n          axis=[\n            Axis(binning=RegularBinning(num=80, interval=RealInterval(low=-5.0, high=5.0)))\n          ],\n          counts=\n            UnweightedCounts(\n              counts=\n                InterpretedInlineInt64Buffer(\n                  buffer=\n                      [     2      5      9     15     29     49     80    104    237    352\n                          555    867   1447   2046   3037   4562   6805   9540  13529  18584\n                        25593  35000  46024  59103  76492  96441 119873 146159 177533 210628\n                       246316 283292 321377 359314 393857 426446 453031 474806 489846 496646\n                       497922 490499 473200 453527 425650 393297 358537 321099 282519 246469\n                       211181 177550 147417 120322  96592  76665  59587  45776  34459  25900\n                        18876  13576   9571   6662   4629   3161   2069   1334    878    581\n                          332    220    135     65     39     26     19     15      4      4])))\n      })\n\n\nNot only for convenience: [you can also define](https://github.com/scikit-hep/aghast/blob/master/specification.adoc#Collection) an `Axis` in the `Collection` to subdivide all contents by that `Axis`. For instance, you can make a collection of qualitatively different histograms all have a signal and control region with `PredicateBinning`, or all have systematic variations with `VariationBinning`.\n\nIt is not necessary to rely on naming conventions to communicate this information from filler to fitter.\n\n### Histogram \u2192 histogram conversions\n\nI said in the introduction that aghast does not fill histograms and does not plot histograms\u2014the two things data analysts are expecting to do. These would be done by user-facing libraries.\n\nAghast does, however, transform histograms into other histograms, and not just among formats. You can combine histograms with `+`. In addition to adding histogram counts, it combines auxiliary statistics appropriately (if possible).\n\n\n```python\nh1 = aghast.Histogram([\n    aghast.Axis(aghast.RegularBinning(10, aghast.RealInterval(-5, 5)),\n        statistics=[aghast.Statistics(\n            moments=[\n                aghast.Moments(aghast.InterpretedInlineBuffer.fromarray(numpy.array([10])), n=1),\n                aghast.Moments(aghast.InterpretedInlineBuffer.fromarray(numpy.array([20])), n=2)],\n            quantiles=[\n                aghast.Quantiles(aghast.InterpretedInlineBuffer.fromarray(numpy.array([30])), p=0.5)],\n            mode=aghast.Modes(aghast.InterpretedInlineBuffer.fromarray(numpy.array([40]))),\n            min=aghast.Extremes(aghast.InterpretedInlineBuffer.fromarray(numpy.array([50]))),\n            max=aghast.Extremes(aghast.InterpretedInlineBuffer.fromarray(numpy.array([60]))))])],\n    aghast.UnweightedCounts(aghast.InterpretedInlineBuffer.fromarray(numpy.arange(10))))\nh2 = aghast.Histogram([\n    aghast.Axis(aghast.RegularBinning(10, aghast.RealInterval(-5, 5)),\n        statistics=[aghast.Statistics(\n            moments=[\n                aghast.Moments(aghast.InterpretedInlineBuffer.fromarray(numpy.array([100])), n=1),\n                aghast.Moments(aghast.InterpretedInlineBuffer.fromarray(numpy.array([200])), n=2)],\n            quantiles=[\n                aghast.Quantiles(aghast.InterpretedInlineBuffer.fromarray(numpy.array([300])), p=0.5)],\n            mode=aghast.Modes(aghast.InterpretedInlineBuffer.fromarray(numpy.array([400]))),\n            min=aghast.Extremes(aghast.InterpretedInlineBuffer.fromarray(numpy.array([500]))),\n            max=aghast.Extremes(aghast.InterpretedInlineBuffer.fromarray(numpy.array([600]))))])],\n    aghast.UnweightedCounts(aghast.InterpretedInlineBuffer.fromarray(numpy.arange(100, 200, 10))))\n```\n\n\n```python\n(h1 + h2).dump()\n```\n\n    Histogram(\n      axis=[\n        Axis(\n          binning=RegularBinning(num=10, interval=RealInterval(low=-5.0, high=5.0)),\n          statistics=[\n            Statistics(\n              moments=[\n                Moments(sumwxn=InterpretedInlineInt64Buffer(buffer=[110]), n=1),\n                Moments(sumwxn=InterpretedInlineInt64Buffer(buffer=[220]), n=2)\n              ],\n              min=Extremes(values=InterpretedInlineInt64Buffer(buffer=[50])),\n              max=Extremes(values=InterpretedInlineInt64Buffer(buffer=[600])))\n          ])\n      ],\n      counts=\n        UnweightedCounts(\n          counts=InterpretedInlineInt64Buffer(buffer=[100 111 122 133 144 155 166 177 188 199])))\n\n\nThe corresponding moments of `h1` and `h2` were matched and added, quantiles and modes were dropped (no way to combine them), and the correct minimum and maximum were picked; the histogram contents were added as well.\n\nAnother important histogram \u2192 histogram conversion is axis-reduction, which can take three forms:\n\n   * slicing an axis, either dropping the eliminated bins or adding them to underflow/overflow (if possible, depends on binning type);\n   * rebinning by combining neighboring bins;\n   * projecting out an axis, removing it entirely, summing over all existing bins.\n\nAll of these operations use a Pandas-inspired `loc`/`iloc` syntax.\n\n\n```python\nh = aghast.Histogram(\n    [aghast.Axis(aghast.RegularBinning(10, aghast.RealInterval(-5, 5)))],\n    aghast.UnweightedCounts(\n        aghast.InterpretedInlineBuffer.fromarray(numpy.array([0, 10, 20, 30, 40, 50, 60, 70, 80, 90]))))\n```\n\n`loc` slices in the data's coordinate system. `1.5` rounds up to bin index `6`. The first five bins get combined into an overflow bin: `150 = 10 + 20 + 30 + 40 + 50`.\n\n\n```python\nh.loc[1.5:].dump()\n```\n\n    Histogram(\n      axis=[\n        Axis(\n          binning=\n            RegularBinning(\n              num=4,\n              interval=RealInterval(low=1.0, high=5.0),\n              overflow=\n                RealOverflow(\n                  loc_underflow=BinLocation.above1,\n                  minf_mapping=RealOverflow.missing,\n                  pinf_mapping=RealOverflow.missing,\n                  nan_mapping=RealOverflow.missing)))\n      ],\n      counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[60 70 80 90 150])))\n\n\n`iloc` slices by bin index number.\n\n\n```python\nh.iloc[6:].dump()\n```\n\n    Histogram(\n      axis=[\n        Axis(\n          binning=\n            RegularBinning(\n              num=4,\n              interval=RealInterval(low=1.0, high=5.0),\n              overflow=\n                RealOverflow(\n                  loc_underflow=BinLocation.above1,\n                  minf_mapping=RealOverflow.missing,\n                  pinf_mapping=RealOverflow.missing,\n                  nan_mapping=RealOverflow.missing)))\n      ],\n      counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[60 70 80 90 150])))\n\n\nSlices have a `start`, `stop`, and `step` (`start:stop:step`). The `step` parameter rebins:\n\n\n```python\nh.iloc[::2].dump()\n```\n\n    Histogram(\n      axis=[\n        Axis(binning=RegularBinning(num=5, interval=RealInterval(low=-5.0, high=5.0)))\n      ],\n      counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[10 50 90 130 170])))\n\n\nThus, you can slice and rebin as part of the same operation.\n\nProjecting uses the same mechanism, except that `None` passed as an axis's slice projects it.\n\n\n```python\nh2 = aghast.Histogram(\n    [aghast.Axis(aghast.RegularBinning(10, aghast.RealInterval(-5, 5))),\n     aghast.Axis(aghast.RegularBinning(10, aghast.RealInterval(-5, 5)))],\n    aghast.UnweightedCounts(\n        aghast.InterpretedInlineBuffer.fromarray(numpy.arange(100))))\n\nh2.iloc[:, None].dump()\n```\n\n    Histogram(\n      axis=[\n        Axis(binning=RegularBinning(num=10, interval=RealInterval(low=-5.0, high=5.0)))\n      ],\n      counts=\n        UnweightedCounts(\n          counts=InterpretedInlineInt64Buffer(buffer=[45 145 245 345 445 545 645 745 845 945])))\n\n\nThus, all three axis reduction operations can be performed in a single syntax.\n\nIn general, an n-dimensional ghastly histogram can be sliced like an n-dimensional Numpy array. This includes integer and boolean indexing (though that necessarily changes the binning to `IrregularBinning`).\n\n\n```python\nh.iloc[[4, 3, 6, 7, 1]].dump()\n```\n\n    Histogram(\n      axis=[\n        Axis(\n          binning=\n            IrregularBinning(\n              intervals=[\n                RealInterval(low=-1.0, high=0.0),\n                RealInterval(low=-2.0, high=-1.0),\n                RealInterval(low=1.0, high=2.0),\n                RealInterval(low=2.0, high=3.0),\n                RealInterval(low=-4.0, high=-3.0)\n              ]))\n      ],\n      counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[40 30 60 70 10])))\n\n\n\n```python\nh.iloc[[True, False, True, False, True, False, True, False, True, False]].dump()\n```\n\n    Histogram(\n      axis=[\n        Axis(\n          binning=\n            IrregularBinning(\n              intervals=[\n                RealInterval(low=-5.0, high=-4.0),\n                RealInterval(low=-3.0, high=-2.0),\n                RealInterval(low=-1.0, high=0.0),\n                RealInterval(low=1.0, high=2.0),\n                RealInterval(low=3.0, high=4.0)\n              ]))\n      ],\n      counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[0 20 40 60 80])))\n\n\n`loc` for numerical binnings accepts\n\n   * a real number\n   * a real-valued slice\n   * `None` for projection\n   * ellipsis (`...`)\n\n`loc` for categorical binnings accepts\n\n   * a string\n   * an iterable of strings\n   * an _empty_ slice\n   * `None` for projection\n   * ellipsis (`...`)\n\n`iloc` accepts\n\n   * an integer\n   * an integer-valued slice\n   * `None` for projection\n   * integer-valued array-like\n   * boolean-valued array-like\n   * ellipsis (`...`)\n\n### Bin counts \u2192 Numpy\n\nFrequently, one wants to extract bin counts from a histogram. The `loc`/`iloc` syntax above creates _histograms_ from _histograms_, not bin counts.\n\nA histogram's `counts` property has a slice syntax.\n\n\n```python\nallcounts = numpy.arange(12) * numpy.arange(12)[:, None]   # multiplication table\nallcounts[10, :] = -999   # underflows\nallcounts[11, :] = 999    # overflows\nallcounts[:, 0]  = -999   # underflows\nallcounts[:, 1]  = 999    # overflows\nprint(allcounts)\n```\n\n    [[-999  999    0    0    0    0    0    0    0    0    0    0]\n     [-999  999    2    3    4    5    6    7    8    9   10   11]\n     [-999  999    4    6    8   10   12   14   16   18   20   22]\n     [-999  999    6    9   12   15   18   21   24   27   30   33]\n     [-999  999    8   12   16   20   24   28   32   36   40   44]\n     [-999  999   10   15   20   25   30   35   40   45   50   55]\n     [-999  999   12   18   24   30   36   42   48   54   60   66]\n     [-999  999   14   21   28   35   42   49   56   63   70   77]\n     [-999  999   16   24   32   40   48   56   64   72   80   88]\n     [-999  999   18   27   36   45   54   63   72   81   90   99]\n     [-999  999 -999 -999 -999 -999 -999 -999 -999 -999 -999 -999]\n     [-999  999  999  999  999  999  999  999  999  999  999  999]]\n\n\n\n```python\nh2 = aghast.Histogram(\n    [aghast.Axis(aghast.RegularBinning(10, aghast.RealInterval(-5, 5),\n                     aghast.RealOverflow(loc_underflow=aghast.RealOverflow.above1,\n                                       loc_overflow=aghast.RealOverflow.above2))),\n     aghast.Axis(aghast.RegularBinning(10, aghast.RealInterval(-5, 5),\n                     aghast.RealOverflow(loc_underflow=aghast.RealOverflow.below2,\n                                       loc_overflow=aghast.RealOverflow.below1)))],\n    aghast.UnweightedCounts(\n        aghast.InterpretedInlineBuffer.fromarray(allcounts)))\n```\n\n\n```python\nprint(h2.counts[:, :])\n```\n\n    [[ 0  0  0  0  0  0  0  0  0  0]\n     [ 2  3  4  5  6  7  8  9 10 11]\n     [ 4  6  8 10 12 14 16 18 20 22]\n     [ 6  9 12 15 18 21 24 27 30 33]\n     [ 8 12 16 20 24 28 32 36 40 44]\n     [10 15 20 25 30 35 40 45 50 55]\n     [12 18 24 30 36 42 48 54 60 66]\n     [14 21 28 35 42 49 56 63 70 77]\n     [16 24 32 40 48 56 64 72 80 88]\n     [18 27 36 45 54 63 72 81 90 99]]\n\n\nTo get the underflows and overflows, set the slice extremes to `-inf` and `+inf`.\n\n\n```python\nprint(h2.counts[-numpy.inf:numpy.inf, :])\n```\n\n    [[-999 -999 -999 -999 -999 -999 -999 -999 -999 -999]\n     [   0    0    0    0    0    0    0    0    0    0]\n     [   2    3    4    5    6    7    8    9   10   11]\n     [   4    6    8   10   12   14   16   18   20   22]\n     [   6    9   12   15   18   21   24   27   30   33]\n     [   8   12   16   20   24   28   32   36   40   44]\n     [  10   15   20   25   30   35   40   45   50   55]\n     [  12   18   24   30   36   42   48   54   60   66]\n     [  14   21   28   35   42   49   56   63   70   77]\n     [  16   24   32   40   48   56   64   72   80   88]\n     [  18   27   36   45   54   63   72   81   90   99]\n     [ 999  999  999  999  999  999  999  999  999  999]]\n\n\n\n```python\nprint(h2.counts[:, -numpy.inf:numpy.inf])\n```\n\n    [[-999    0    0    0    0    0    0    0    0    0    0  999]\n     [-999    2    3    4    5    6    7    8    9   10   11  999]\n     [-999    4    6    8   10   12   14   16   18   20   22  999]\n     [-999    6    9   12   15   18   21   24   27   30   33  999]\n     [-999    8   12   16   20   24   28   32   36   40   44  999]\n     [-999   10   15   20   25   30   35   40   45   50   55  999]\n     [-999   12   18   24   30   36   42   48   54   60   66  999]\n     [-999   14   21   28   35   42   49   56   63   70   77  999]\n     [-999   16   24   32   40   48   56   64   72   80   88  999]\n     [-999   18   27   36   45   54   63   72   81   90   99  999]]\n\n\nAlso note that the underflows are now all below the normal bins and overflows are now all above the normal bins, regardless of how they were arranged in the ghast. This allows analysis code to be independent of histogram source.\n\n## Other types\n\nAghast can attach fit functions to histograms, can store standalone functions, such as lookup tables, and can store ntuples for unweighted fits or machine learning.\n\n# Acknowledgements\n\nSupport for this work was provided by NSF cooperative agreement OAC-1836650 (IRIS-HEP), grant OAC-1450377 (DIANA/HEP) and PHY-1520942 (US-CMS LHC Ops).\n\nThanks especially to the gracious help of [aghast contributors](https://github.com/scikit-hep/aghast/graphs/contributors)!\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "https://github.com/scikit-hep/aghast/releases", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/scikit-hep/aghast", "keywords": "", "license": "BSD 3-clause", "maintainer": "Jim Pivarski (IRIS-HEP)", "maintainer_email": "pivarski@princeton.edu", "name": "aghast", "package_url": "https://pypi.org/project/aghast/", "platform": "Any", "project_url": "https://pypi.org/project/aghast/", "project_urls": {"Download": "https://github.com/scikit-hep/aghast/releases", "Homepage": "https://github.com/scikit-hep/aghast"}, "release_url": "https://pypi.org/project/aghast/0.2.1/", "requires_dist": ["flatbuffers (>=1.8.0)", "numpy"], "requires_python": "", "summary": "Aghast: aggregated, histogram-like statistics, sharable as Flatbuffers.", "version": "0.2.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a32313ee91da41fcc1889cd1fd05f301396f2c71/68747470733a2f2f6769746875622e636f6d2f7363696b69742d6865702f6167686173742f7261772f6d61737465722f646f63732f736f757263652f6c6f676f2d33303070782e706e67\"></p>\n<h1>aghast</h1>\n<p><a href=\"https://travis-ci.org/scikit-hep/aghast\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5bbe8739723c872e2d12ebfd7e2a6e302cf7c86d/68747470733a2f2f7472617669732d63692e6f72672f7363696b69742d6865702f6167686173742e7376673f6272616e63683d6d6173746572\"></a> <a href=\"https://mybinder.org/v2/gh/scikit-hep/aghast/master?urlpath=lab/tree/binder%2Ftutorial.ipynb\" rel=\"nofollow\"><img alt=\"Binder\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/85e91bbb928104e4ce317951541520c6b9c170e1/68747470733a2f2f6d7962696e6465722e6f72672f62616467655f6c6f676f2e737667\"></a></p>\n<p>Aghast is a histogramming library that does not fill histograms and does not plot them. Its role is behind the scenes, to provide better communication between histogramming libraries.</p>\n<p>Specifically, it is a structured representation of <strong>ag</strong>gregated, <strong>h</strong>istogram-like <strong>st</strong>atistics as sharable \"ghasts.\" It has all of the \"bells and whistles\" often associated with plain histograms, such as number of entries, unbinned mean and standard deviation, bin errors, associated fit functions, profile plots, and even simple ntuples (needed for unbinned fits or machine learning applications). <a href=\"https://root.cern.ch/root/htmldoc/guides/users-guide/Histograms.html\" rel=\"nofollow\">ROOT</a> has all of these features; <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html\" rel=\"nofollow\">Numpy</a> has none of them.</p>\n<p>The purpose of aghast is to be an intermediate when converting ROOT histograms into Numpy, or vice-versa, or both of these into <a href=\"https://github.com/boostorg/histogram\" rel=\"nofollow\">Boost.Histogram</a>, <a href=\"https://physt.readthedocs.io/en/latest/index.html\" rel=\"nofollow\">Physt</a>, <a href=\"https://pandas.pydata.org\" rel=\"nofollow\">Pandas</a>, etc. Without an intermediate representation, converting between <em>N</em> libraries (to get the advantages of all) would equire <em>N(N  \u2012 1)/2</em> conversion routines; with an intermediate representation, we only need <em>N</em>, and the mapping of feature to feature can be made explicit in terms of a common language.</p>\n<p>Furthermore, aghast is a <a href=\"http://google.github.io/flatbuffers/\" rel=\"nofollow\">Flatbuffers</a> schema, so it can be deciphered in <a href=\"https://google.github.io/flatbuffers/flatbuffers_support.html\" rel=\"nofollow\">many languages</a>, with <a href=\"https://github.com/mzaks/FlatBuffersSwift/wiki/FlatBuffers-Explained\" rel=\"nofollow\">lazy, random-access</a>, and uses a <a href=\"http://google.github.io/flatbuffers/md__benchmarks.html\" rel=\"nofollow\">small amount of memory</a>. A collection of histograms, functions, and ntuples can be shared among processes as shared memory, used in remote procedure calls, processed incrementally in a memory-mapped file, or saved in files with future-proof <a href=\"https://google.github.io/flatbuffers/md__schemas.html\" rel=\"nofollow\">schema evolution</a>.</p>\n<h2>Installation from packages</h2>\n<p>Install aghast like any other Python package:</p>\n<pre>pip install aghast                        <span class=\"c1\"># maybe with sudo or --user, or in virtualenv</span>\n</pre>\n\n\n\n\n\n<p><em>(Not on conda yet.)</em></p>\n<h2>Manual installation</h2>\n<p>After you git-clone this GitHub repository and ensure that <code>numpy</code> is installed, somehow:</p>\n<pre>pip install <span class=\"s2\">\"flatbuffers&gt;=1.8.0\"</span>          <span class=\"c1\"># for the flatbuffers runtime (with Numpy)</span>\n<span class=\"nb\">cd</span> python                                 <span class=\"c1\"># only implementation so far is in Python</span>\npython setup.py install                   <span class=\"c1\"># to use it outside of this directory</span>\n</pre>\n<p>Now you should be able to <code>import aghast</code> or <code>from aghast import *</code> in Python.</p>\n<p>If you need to change <code>flatbuffers/aghast.fbs</code>, you'll need to additionally:</p>\n<ol>\n<li>Get <code>flatc</code> to generate Python sources from <code>flatbuffers/aghast.fbs</code>. I use <code>conda install -c conda-forge flatbuffers</code>. (The <code>flatc</code> executable is <em>not</em> included in the pip <code>flatbuffers</code> package, and the Python runtime is <em>not</em> included in the conda <code>flatbuffers</code> package. They're disjoint.)</li>\n<li>In the <code>python</code> directory, run <code>./generate_flatbuffers.py</code> (which calls <code>flatc</code> and does some post-processing).</li>\n</ol>\n<p>Every time you change <code>flatbuffers/aghast.fbs</code>, re-run <code>./generate_flatbuffers.py</code>.</p>\n<h2>Documentation</h2>\n<p>Full specification:</p>\n<ul>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#introduction\" rel=\"nofollow\">Introduction</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#data-types\" rel=\"nofollow\">Data types</a>\n<ul>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#collection\" rel=\"nofollow\">Collection</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#histogram\" rel=\"nofollow\">Histogram</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#axis\" rel=\"nofollow\">Axis</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#integerbinning\" rel=\"nofollow\">IntegerBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#regularbinning\" rel=\"nofollow\">RegularBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#realinterval\" rel=\"nofollow\">RealInterval</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#realoverflow\" rel=\"nofollow\">RealOverflow</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#hexagonalbinning\" rel=\"nofollow\">HexagonalBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#edgesbinning\" rel=\"nofollow\">EdgesBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#irregularbinning\" rel=\"nofollow\">IrregularBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#categorybinning\" rel=\"nofollow\">CategoryBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#sparseregularbinning\" rel=\"nofollow\">SparseRegularBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#fractionbinning\" rel=\"nofollow\">FractionBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#predicatebinning\" rel=\"nofollow\">PredicateBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#variationbinning\" rel=\"nofollow\">VariationBinning</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#variation\" rel=\"nofollow\">Variation</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#assignment\" rel=\"nofollow\">Assignment</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#unweightedcounts\" rel=\"nofollow\">UnweightedCounts</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#weightedcounts\" rel=\"nofollow\">WeightedCounts</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#interpretedinlinebuffer\" rel=\"nofollow\">InterpretedInlineBuffer</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#interpretedinlineint64buffer\" rel=\"nofollow\">InterpretedInlineInt64Buffer</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#interpretedinlinefloat64buffer\" rel=\"nofollow\">InterpretedInlineFloat64Buffer</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#interpretedexternalbuffer\" rel=\"nofollow\">InterpretedExternalBuffer</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#profile\" rel=\"nofollow\">Profile</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#statistics\" rel=\"nofollow\">Statistics</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#moments\" rel=\"nofollow\">Moments</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#quantiles\" rel=\"nofollow\">Quantiles</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#modes\" rel=\"nofollow\">Modes</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#extremes\" rel=\"nofollow\">Extremes</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#statisticfilter\" rel=\"nofollow\">StatisticFilter</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#covariance\" rel=\"nofollow\">Covariance</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#parameterizedfunction\" rel=\"nofollow\">ParameterizedFunction</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#parameter\" rel=\"nofollow\">Parameter</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#evaluatedfunction\" rel=\"nofollow\">EvaluatedFunction</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#binnedevaluatedfunction\" rel=\"nofollow\">BinnedEvaluatedFunction</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#ntuple\" rel=\"nofollow\">Ntuple</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#column\" rel=\"nofollow\">Column</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#ntupleinstance\" rel=\"nofollow\">NtupleInstance</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#chunk\" rel=\"nofollow\">Chunk</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#columnchunk\" rel=\"nofollow\">ColumnChunk</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#page\" rel=\"nofollow\">Page</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#rawinlinebuffer\" rel=\"nofollow\">RawInlineBuffer</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#rawexternalbuffer\" rel=\"nofollow\">RawExternalBuffer</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#metadata\" rel=\"nofollow\">Metadata</a></li>\n<li><a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#decoration\" rel=\"nofollow\">Decoration</a></li>\n</ul>\n</li>\n</ul>\n<h2>Tutorial examples</h2>\n<p><a href=\"https://mybinder.org/v2/gh/scikit-hep/aghast/master?urlpath=lab/tree/binder%2Ftutorial.ipynb\" rel=\"nofollow\">Run this tutorial on Binder</a>.</p>\n<h3>Conversions</h3>\n<p>The main purpose of aghast is to move aggregated, histogram-like statistics (called \"ghasts\") from one framework to the next. This requires a conversion of high-level domain concepts.</p>\n<p>Consider the following example: in Numpy, a histogram is simply a 2-tuple of arrays with special meaning\u2014bin contents, then bin edges.</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">numpy</span>\n\n<span class=\"n\">numpy_hist</span> <span class=\"o\">=</span> <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">random</span><span class=\"o\">.</span><span class=\"n\">normal</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"mf\">10e6</span><span class=\"p\">)),</span> <span class=\"n\">bins</span><span class=\"o\">=</span><span class=\"mi\">80</span><span class=\"p\">,</span> <span class=\"nb\">range</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">))</span>\n<span class=\"n\">numpy_hist</span>\n</pre>\n<pre><code>(array([     2,      5,      9,     15,     29,     49,     80,    104,\n           237,    352,    555,    867,   1447,   2046,   3037,   4562,\n          6805,   9540,  13529,  18584,  25593,  35000,  46024,  59103,\n         76492,  96441, 119873, 146159, 177533, 210628, 246316, 283292,\n        321377, 359314, 393857, 426446, 453031, 474806, 489846, 496646,\n        497922, 490499, 473200, 453527, 425650, 393297, 358537, 321099,\n        282519, 246469, 211181, 177550, 147417, 120322,  96592,  76665,\n         59587,  45776,  34459,  25900,  18876,  13576,   9571,   6662,\n          4629,   3161,   2069,   1334,    878,    581,    332,    220,\n           135,     65,     39,     26,     19,     15,      4,      4]),\n array([-5.   , -4.875, -4.75 , -4.625, -4.5  , -4.375, -4.25 , -4.125,\n        -4.   , -3.875, -3.75 , -3.625, -3.5  , -3.375, -3.25 , -3.125,\n        -3.   , -2.875, -2.75 , -2.625, -2.5  , -2.375, -2.25 , -2.125,\n        -2.   , -1.875, -1.75 , -1.625, -1.5  , -1.375, -1.25 , -1.125,\n        -1.   , -0.875, -0.75 , -0.625, -0.5  , -0.375, -0.25 , -0.125,\n         0.   ,  0.125,  0.25 ,  0.375,  0.5  ,  0.625,  0.75 ,  0.875,\n         1.   ,  1.125,  1.25 ,  1.375,  1.5  ,  1.625,  1.75 ,  1.875,\n         2.   ,  2.125,  2.25 ,  2.375,  2.5  ,  2.625,  2.75 ,  2.875,\n         3.   ,  3.125,  3.25 ,  3.375,  3.5  ,  3.625,  3.75 ,  3.875,\n         4.   ,  4.125,  4.25 ,  4.375,  4.5  ,  4.625,  4.75 ,  4.875,\n         5.   ]))\n</code></pre>\n<p>We convert that into the aghast equivalent (a \"ghast\") with a connector (two functions: <code>from_numpy</code> and <code>to_numpy</code>).</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">aghast</span>\n\n<span class=\"n\">ghastly_hist</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">from_numpy</span><span class=\"p\">(</span><span class=\"n\">numpy_hist</span><span class=\"p\">)</span>\n<span class=\"n\">ghastly_hist</span>\n</pre>\n<pre><code>&lt;Histogram at 0x7f0dc88a9b38&gt;\n</code></pre>\n<p>This object is instantiated from a class structure built from simple pieces.</p>\n<pre><span class=\"n\">ghastly_hist</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>Histogram(\n  axis=[\n    Axis(binning=RegularBinning(num=80, interval=RealInterval(low=-5.0, high=5.0)))\n  ],\n  counts=\n    UnweightedCounts(\n      counts=\n        InterpretedInlineInt64Buffer(\n          buffer=\n              [     2      5      9     15     29     49     80    104    237    352\n                  555    867   1447   2046   3037   4562   6805   9540  13529  18584\n                25593  35000  46024  59103  76492  96441 119873 146159 177533 210628\n               246316 283292 321377 359314 393857 426446 453031 474806 489846 496646\n               497922 490499 473200 453527 425650 393297 358537 321099 282519 246469\n               211181 177550 147417 120322  96592  76665  59587  45776  34459  25900\n                18876  13576   9571   6662   4629   3161   2069   1334    878    581\n                  332    220    135     65     39     26     19     15      4      4])))\n</code></pre>\n<p>Now it can be converted to a ROOT histogram with another connector.</p>\n<pre><span class=\"n\">root_hist</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">to_root</span><span class=\"p\">(</span><span class=\"n\">ghastly_hist</span><span class=\"p\">,</span> <span class=\"s2\">\"root_hist\"</span><span class=\"p\">)</span>\n<span class=\"n\">root_hist</span>\n</pre>\n<pre><code>&lt;ROOT.TH1D object (\"root_hist\") at 0x55555e208ef0&gt;\n</code></pre>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">ROOT</span>\n<span class=\"n\">canvas</span> <span class=\"o\">=</span> <span class=\"n\">ROOT</span><span class=\"o\">.</span><span class=\"n\">TCanvas</span><span class=\"p\">()</span>\n<span class=\"n\">root_hist</span><span class=\"o\">.</span><span class=\"n\">Draw</span><span class=\"p\">()</span>\n<span class=\"n\">canvas</span><span class=\"o\">.</span><span class=\"n\">Draw</span><span class=\"p\">()</span>\n</pre>\n<p><img alt=\"png\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/57a825d95b14c05d5a8b051d66a9e8b6cebdc2a7/646f63732f7475746f7269616c2d395f302e706e67\"></p>\n<p>And Pandas with yet another connector.</p>\n<pre><span class=\"n\">pandas_hist</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">to_pandas</span><span class=\"p\">(</span><span class=\"n\">ghastly_hist</span><span class=\"p\">)</span>\n<span class=\"n\">pandas_hist</span>\n</pre>\n<div>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>unweighted</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>[-5.0, -4.875)</th>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>[-4.875, -4.75)</th>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>[-4.75, -4.625)</th>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>[-4.625, -4.5)</th>\n      <td>15</td>\n    </tr>\n    <tr>\n      <th>[-4.5, -4.375)</th>\n      <td>29</td>\n    </tr>\n    <tr>\n      <th>[-4.375, -4.25)</th>\n      <td>49</td>\n    </tr>\n    <tr>\n      <th>[-4.25, -4.125)</th>\n      <td>80</td>\n    </tr>\n    <tr>\n      <th>[-4.125, -4.0)</th>\n      <td>104</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.875)</th>\n      <td>237</td>\n    </tr>\n    <tr>\n      <th>[-3.875, -3.75)</th>\n      <td>352</td>\n    </tr>\n    <tr>\n      <th>[-3.75, -3.625)</th>\n      <td>555</td>\n    </tr>\n    <tr>\n      <th>[-3.625, -3.5)</th>\n      <td>867</td>\n    </tr>\n    <tr>\n      <th>[-3.5, -3.375)</th>\n      <td>1447</td>\n    </tr>\n    <tr>\n      <th>[-3.375, -3.25)</th>\n      <td>2046</td>\n    </tr>\n    <tr>\n      <th>[-3.25, -3.125)</th>\n      <td>3037</td>\n    </tr>\n    <tr>\n      <th>[-3.125, -3.0)</th>\n      <td>4562</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.875)</th>\n      <td>6805</td>\n    </tr>\n    <tr>\n      <th>[-2.875, -2.75)</th>\n      <td>9540</td>\n    </tr>\n    <tr>\n      <th>[-2.75, -2.625)</th>\n      <td>13529</td>\n    </tr>\n    <tr>\n      <th>[-2.625, -2.5)</th>\n      <td>18584</td>\n    </tr>\n    <tr>\n      <th>[-2.5, -2.375)</th>\n      <td>25593</td>\n    </tr>\n    <tr>\n      <th>[-2.375, -2.25)</th>\n      <td>35000</td>\n    </tr>\n    <tr>\n      <th>[-2.25, -2.125)</th>\n      <td>46024</td>\n    </tr>\n    <tr>\n      <th>[-2.125, -2.0)</th>\n      <td>59103</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.875)</th>\n      <td>76492</td>\n    </tr>\n    <tr>\n      <th>[-1.875, -1.75)</th>\n      <td>96441</td>\n    </tr>\n    <tr>\n      <th>[-1.75, -1.625)</th>\n      <td>119873</td>\n    </tr>\n    <tr>\n      <th>[-1.625, -1.5)</th>\n      <td>146159</td>\n    </tr>\n    <tr>\n      <th>[-1.5, -1.375)</th>\n      <td>177533</td>\n    </tr>\n    <tr>\n      <th>[-1.375, -1.25)</th>\n      <td>210628</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>[1.25, 1.375)</th>\n      <td>211181</td>\n    </tr>\n    <tr>\n      <th>[1.375, 1.5)</th>\n      <td>177550</td>\n    </tr>\n    <tr>\n      <th>[1.5, 1.625)</th>\n      <td>147417</td>\n    </tr>\n    <tr>\n      <th>[1.625, 1.75)</th>\n      <td>120322</td>\n    </tr>\n    <tr>\n      <th>[1.75, 1.875)</th>\n      <td>96592</td>\n    </tr>\n    <tr>\n      <th>[1.875, 2.0)</th>\n      <td>76665</td>\n    </tr>\n    <tr>\n      <th>[2.0, 2.125)</th>\n      <td>59587</td>\n    </tr>\n    <tr>\n      <th>[2.125, 2.25)</th>\n      <td>45776</td>\n    </tr>\n    <tr>\n      <th>[2.25, 2.375)</th>\n      <td>34459</td>\n    </tr>\n    <tr>\n      <th>[2.375, 2.5)</th>\n      <td>25900</td>\n    </tr>\n    <tr>\n      <th>[2.5, 2.625)</th>\n      <td>18876</td>\n    </tr>\n    <tr>\n      <th>[2.625, 2.75)</th>\n      <td>13576</td>\n    </tr>\n    <tr>\n      <th>[2.75, 2.875)</th>\n      <td>9571</td>\n    </tr>\n    <tr>\n      <th>[2.875, 3.0)</th>\n      <td>6662</td>\n    </tr>\n    <tr>\n      <th>[3.0, 3.125)</th>\n      <td>4629</td>\n    </tr>\n    <tr>\n      <th>[3.125, 3.25)</th>\n      <td>3161</td>\n    </tr>\n    <tr>\n      <th>[3.25, 3.375)</th>\n      <td>2069</td>\n    </tr>\n    <tr>\n      <th>[3.375, 3.5)</th>\n      <td>1334</td>\n    </tr>\n    <tr>\n      <th>[3.5, 3.625)</th>\n      <td>878</td>\n    </tr>\n    <tr>\n      <th>[3.625, 3.75)</th>\n      <td>581</td>\n    </tr>\n    <tr>\n      <th>[3.75, 3.875)</th>\n      <td>332</td>\n    </tr>\n    <tr>\n      <th>[3.875, 4.0)</th>\n      <td>220</td>\n    </tr>\n    <tr>\n      <th>[4.0, 4.125)</th>\n      <td>135</td>\n    </tr>\n    <tr>\n      <th>[4.125, 4.25)</th>\n      <td>65</td>\n    </tr>\n    <tr>\n      <th>[4.25, 4.375)</th>\n      <td>39</td>\n    </tr>\n    <tr>\n      <th>[4.375, 4.5)</th>\n      <td>26</td>\n    </tr>\n    <tr>\n      <th>[4.5, 4.625)</th>\n      <td>19</td>\n    </tr>\n    <tr>\n      <th>[4.625, 4.75)</th>\n      <td>15</td>\n    </tr>\n    <tr>\n      <th>[4.75, 4.875)</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>[4.875, 5.0)</th>\n      <td>4</td>\n    </tr>\n  </tbody>\n</table>\n<p>80 rows \u00d7 1 columns</p>\n</div>\n<h3>Serialization</h3>\n<p>A ghast is also a <a href=\"http://google.github.io/flatbuffers/\" rel=\"nofollow\">Flatbuffers</a> object, which has a <a href=\"https://google.github.io/flatbuffers/flatbuffers_support.html\" rel=\"nofollow\">multi-lingual</a>, <a href=\"https://github.com/mzaks/FlatBuffersSwift/wiki/FlatBuffers-Explained\" rel=\"nofollow\">random-access</a>, <a href=\"http://google.github.io/flatbuffers/md__benchmarks.html\" rel=\"nofollow\">small-footprint</a> serialization:</p>\n<pre><span class=\"n\">ghastly_hist</span><span class=\"o\">.</span><span class=\"n\">tobuffer</span><span class=\"p\">()</span>\n</pre>\n<pre><code>bytearray(\"\\x04\\x00\\x00\\x00\\x90\\xff\\xff\\xff\\x10\\x00\\x00\\x00\\x00\\x01\\n\\x00\\x10\\x00\\x0c\\x00\\x0b\\x00\\x04\n           \\x00\\n\\x00\\x00\\x00`\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x04\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x0c\\x00\\x00\n           \\x00\\x08\\x00\\x0c\\x00\\x0b\\x00\\x04\\x00\\x08\\x00\\x00\\x00\\x10\\x00\\x00\\x00\\x00\\x00\\x00\\x02\\x08\\x00\n           (\\x00\\x1c\\x00\\x04\\x00\\x08\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x14\\xc0\\x00\\x00\\x00\\x00\\x00\n           \\x00\\x14@\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00P\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x08\n           \\x00\\n\\x00\\t\\x00\\x04\\x00\\x08\\x00\\x00\\x00\\x0c\\x00\\x00\\x00\\x00\\x02\\x06\\x00\\x08\\x00\\x04\\x00\\x06\n           \\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x80\\x02\\x00\\x00\\x02\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x05\\x00\\x00\\x00\n           \\x00\\x00\\x00\\x00\\t\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x1d\\x00\\x00\n           \\x00\\x00\\x00\\x00\\x001\\x00\\x00\\x00\\x00\\x00\\x00\\x00P\\x00\\x00\\x00\\x00\\x00\\x00\\x00h\\x00\\x00\\x00\n           \\x00\\x00\\x00\\x00\\xed\\x00\\x00\\x00\\x00\\x00\\x00\\x00`\\x01\\x00\\x00\\x00\\x00\\x00\\x00+\\x02\\x00\\x00\n           \\x00\\x00\\x00\\x00c\\x03\\x00\\x00\\x00\\x00\\x00\\x00\\xa7\\x05\\x00\\x00\\x00\\x00\\x00\\x00\\xfe\\x07\\x00\n           \\x00\\x00\\x00\\x00\\x00\\xdd\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\xd2\\x11\\x00\\x00\\x00\\x00\\x00\\x00\\x95\\x1a\n           \\x00\\x00\\x00\\x00\\x00\\x00D%\\x00\\x00\\x00\\x00\\x00\\x00\\xd94\\x00\\x00\\x00\\x00\\x00\\x00\\x98H\\x00\\x00\n           \\x00\\x00\\x00\\x00\\xf9c\\x00\\x00\\x00\\x00\\x00\\x00\\xb8\\x88\\x00\\x00\\x00\\x00\\x00\\x00\\xc8\\xb3\\x00\\x00\n           \\x00\\x00\\x00\\x00\\xdf\\xe6\\x00\\x00\\x00\\x00\\x00\\x00\\xcc*\\x01\\x00\\x00\\x00\\x00\\x00\\xb9x\\x01\\x00\n           \\x00\\x00\\x00\\x00A\\xd4\\x01\\x00\\x00\\x00\\x00\\x00\\xef:\\x02\\x00\\x00\\x00\\x00\\x00}\\xb5\\x02\\x00\\x00\n           \\x00\\x00\\x00\\xc46\\x03\\x00\\x00\\x00\\x00\\x00,\\xc2\\x03\\x00\\x00\\x00\\x00\\x00\\x9cR\\x04\\x00\\x00\\x00\n           \\x00\\x00a\\xe7\\x04\\x00\\x00\\x00\\x00\\x00\\x92{\\x05\\x00\\x00\\x00\\x00\\x00\\x81\\x02\\x06\\x00\\x00\\x00\n           \\x00\\x00\\xce\\x81\\x06\\x00\\x00\\x00\\x00\\x00\\xa7\\xe9\\x06\\x00\\x00\\x00\\x00\\x00\\xb6&gt;\\x07\\x00\\x00\n           \\x00\\x00\\x00vy\\x07\\x00\\x00\\x00\\x00\\x00\\x06\\x94\\x07\\x00\\x00\\x00\\x00\\x00\\x02\\x99\\x07\\x00\\x00\n           \\x00\\x00\\x00\\x03|\\x07\\x00\\x00\\x00\\x00\\x00p8\\x07\\x00\\x00\\x00\\x00\\x00\\x97\\xeb\\x06\\x00\\x00\\x00\n           \\x00\\x00\\xb2~\\x06\\x00\\x00\\x00\\x00\\x00Q\\x00\\x06\\x00\\x00\\x00\\x00\\x00\\x89x\\x05\\x00\\x00\\x00\\x00\n           \\x00K\\xe6\\x04\\x00\\x00\\x00\\x00\\x00\\x97O\\x04\\x00\\x00\\x00\\x00\\x00\\xc5\\xc2\\x03\\x00\\x00\\x00\\x00\n           \\x00\\xed8\\x03\\x00\\x00\\x00\\x00\\x00\\x8e\\xb5\\x02\\x00\\x00\\x00\\x00\\x00\\xd9?\\x02\\x00\\x00\\x00\\x00\n           \\x00\\x02\\xd6\\x01\\x00\\x00\\x00\\x00\\x00Py\\x01\\x00\\x00\\x00\\x00\\x00y+\\x01\\x00\\x00\\x00\\x00\\x00\\xc3\n           \\xe8\\x00\\x00\\x00\\x00\\x00\\x00\\xd0\\xb2\\x00\\x00\\x00\\x00\\x00\\x00\\x9b\\x86\\x00\\x00\\x00\\x00\\x00\\x00\n           ,e\\x00\\x00\\x00\\x00\\x00\\x00\\xbcI\\x00\\x00\\x00\\x00\\x00\\x00\\x085\\x00\\x00\\x00\\x00\\x00\\x00c%\\x00\n           \\x00\\x00\\x00\\x00\\x00\\x06\\x1a\\x00\\x00\\x00\\x00\\x00\\x00\\x15\\x12\\x00\\x00\\x00\\x00\\x00\\x00Y\\x0c\n           \\x00\\x00\\x00\\x00\\x00\\x00\\x15\\x08\\x00\\x00\\x00\\x00\\x00\\x006\\x05\\x00\\x00\\x00\\x00\\x00\\x00n\\x03\n           \\x00\\x00\\x00\\x00\\x00\\x00E\\x02\\x00\\x00\\x00\\x00\\x00\\x00L\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\xdc\\x00\n           \\x00\\x00\\x00\\x00\\x00\\x00\\x87\\x00\\x00\\x00\\x00\\x00\\x00\\x00A\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\'\\x00\n           \\x00\\x00\\x00\\x00\\x00\\x00\\x1a\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x13\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\n           \\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\")\n</code></pre>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Numpy size: \"</span><span class=\"p\">,</span> <span class=\"n\">numpy_hist</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">nbytes</span> <span class=\"o\">+</span> <span class=\"n\">numpy_hist</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">nbytes</span><span class=\"p\">)</span>\n\n<span class=\"n\">tmessage</span> <span class=\"o\">=</span> <span class=\"n\">ROOT</span><span class=\"o\">.</span><span class=\"n\">TMessage</span><span class=\"p\">()</span>\n<span class=\"n\">tmessage</span><span class=\"o\">.</span><span class=\"n\">WriteObject</span><span class=\"p\">(</span><span class=\"n\">root_hist</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"ROOT size:  \"</span><span class=\"p\">,</span> <span class=\"n\">tmessage</span><span class=\"o\">.</span><span class=\"n\">Length</span><span class=\"p\">())</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">pickle</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Pandas size:\"</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">pickle</span><span class=\"o\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">pandas_hist</span><span class=\"p\">)))</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Aghast size: \"</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">ghastly_hist</span><span class=\"o\">.</span><span class=\"n\">tobuffer</span><span class=\"p\">()))</span>\n</pre>\n<pre><code>Numpy size:  1288\nROOT size:   1962\nPandas size: 2984\nAghast size:  792\n</code></pre>\n<p>Aghast is generally forseen as a memory format, like <a href=\"https://arrow.apache.org\" rel=\"nofollow\">Apache Arrow</a>, but for statistical aggregations. Like Arrow, it reduces the need to implement $N(N - 1)/2$ conversion functions among $N$ statistical libraries to just $N$ conversion functions. (See the figure on Arrow's website.)</p>\n<h3>Translation of conventions</h3>\n<p>Aghast also intends to be as close to zero-copy as possible. This means that it must make graceful translations among conventions. Different histogramming libraries handle overflow bins in different ways:</p>\n<pre><span class=\"n\">fromroot</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">from_root</span><span class=\"p\">(</span><span class=\"n\">root_hist</span><span class=\"p\">)</span>\n<span class=\"n\">fromroot</span><span class=\"o\">.</span><span class=\"n\">axis</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">binning</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Bin contents length:\"</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">fromroot</span><span class=\"o\">.</span><span class=\"n\">counts</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">))</span>\n</pre>\n<pre><code>RegularBinning(\n  num=80,\n  interval=RealInterval(low=-5.0, high=5.0),\n  overflow=RealOverflow(loc_underflow=BinLocation.below1, loc_overflow=BinLocation.above1))\nBin contents length: 82\n</code></pre>\n<pre><span class=\"n\">ghastly_hist</span><span class=\"o\">.</span><span class=\"n\">axis</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">binning</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Bin contents length:\"</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">ghastly_hist</span><span class=\"o\">.</span><span class=\"n\">counts</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">))</span>\n</pre>\n<pre><code>RegularBinning(num=80, interval=RealInterval(low=-5.0, high=5.0))\nBin contents length: 80\n</code></pre>\n<p>And yet we want to be able to manipulate them as though these differences did not exist.</p>\n<pre><span class=\"n\">sum_hist</span> <span class=\"o\">=</span> <span class=\"n\">fromroot</span> <span class=\"o\">+</span> <span class=\"n\">ghastly_hist</span>\n</pre>\n<pre><span class=\"n\">sum_hist</span><span class=\"o\">.</span><span class=\"n\">axis</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">binning</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Bin contents length:\"</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">sum_hist</span><span class=\"o\">.</span><span class=\"n\">counts</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">))</span>\n</pre>\n<pre><code>RegularBinning(\n  num=80,\n  interval=RealInterval(low=-5.0, high=5.0),\n  overflow=RealOverflow(loc_underflow=BinLocation.above1, loc_overflow=BinLocation.above2))\nBin contents length: 82\n</code></pre>\n<p>The binning structure keeps track of the existence of underflow/overflow bins and where they are located.</p>\n<ul>\n<li>ROOT's convention is to put underflow before the normal bins (<code>below1</code>) and overflow after (<code>above1</code>), so that the normal bins are effectively 1-indexed.</li>\n<li>Boost.Histogram's convention is to put overflow after the normal bins (<code>above1</code>) and underflow after that (<code>above2</code>), so that underflow is accessed via <code>myhist[-1]</code> in Numpy.</li>\n<li>Numpy histograms don't have underflow/overflow bins.</li>\n<li>Pandas could have <code>Intervals</code> that extend to infinity.</li>\n</ul>\n<p>Aghast accepts all of these, so that it doesn't have to manipulate the bin contents buffer it receives, but knows how to deal with them if it has to combine histograms that follow different conventions.</p>\n<h3>Binning types</h3>\n<p>All the different axis types have an equivalent in aghast (and not all are single-dimensional).</p>\n<pre><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">IntegerBinning</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">HexagonalBinning</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">HexagonalBinning</span><span class=\"o\">.</span><span class=\"n\">cube_xy</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">EdgesBinning</span><span class=\"p\">([</span><span class=\"mf\">0.01</span><span class=\"p\">,</span> <span class=\"mf\">0.05</span><span class=\"p\">,</span> <span class=\"mf\">0.1</span><span class=\"p\">,</span> <span class=\"mf\">0.5</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">50</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">IrregularBinning</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">),</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">),</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">)],</span>\n                       <span class=\"n\">overlapping_fill</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">IrregularBinning</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">CategoryBinning</span><span class=\"p\">([</span><span class=\"s2\">\"one\"</span><span class=\"p\">,</span> <span class=\"s2\">\"two\"</span><span class=\"p\">,</span> <span class=\"s2\">\"three\"</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">SparseRegularBinning</span><span class=\"p\">([</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">100</span><span class=\"p\">],</span> <span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">FractionBinning</span><span class=\"p\">(</span><span class=\"n\">error_method</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">FractionBinning</span><span class=\"o\">.</span><span class=\"n\">clopper_pearson</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">PredicateBinning</span><span class=\"p\">([</span><span class=\"s2\">\"signal region\"</span><span class=\"p\">,</span> <span class=\"s2\">\"control region\"</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">VariationBinning</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Variation</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Assignment</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span> <span class=\"s2\">\"nominal\"</span><span class=\"p\">)]),</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Variation</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Assignment</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span> <span class=\"s2\">\"nominal + sigma\"</span><span class=\"p\">)]),</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Variation</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Assignment</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span> <span class=\"s2\">\"nominal - sigma\"</span><span class=\"p\">)])])</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>IntegerBinning(min=5, max=10)\nRegularBinning(num=100, interval=RealInterval(low=-5.0, high=5.0))\nHexagonalBinning(qmin=0, qmax=100, rmin=0, rmax=100, coordinates=HexagonalBinning.cube_xy)\nEdgesBinning(edges=[0.01 0.05 0.1 0.5 1 5 10 50 100])\nIrregularBinning(\n  intervals=[\n    RealInterval(low=0.0, high=5.0),\n    RealInterval(low=10.0, high=100.0),\n    RealInterval(low=-10.0, high=10.0)\n  ],\n  overlapping_fill=IrregularBinning.all)\nCategoryBinning(categories=['one', 'two', 'three'])\nSparseRegularBinning(bins=[5 3 -2 8 -100], bin_width=10.0)\nFractionBinning(error_method=FractionBinning.clopper_pearson)\nPredicateBinning(predicates=['signal region', 'control region'])\nVariationBinning(\n  variations=[\n    Variation(assignments=[\n        Assignment(identifier='x', expression='nominal')\n      ]),\n    Variation(\n      assignments=[\n        Assignment(identifier='x', expression='nominal + sigma')\n      ]),\n    Variation(\n      assignments=[\n        Assignment(identifier='x', expression='nominal - sigma')\n      ])\n  ])\n</code></pre>\n<p>The meanings of these binning classes are given in <a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#integerbinning\" rel=\"nofollow\">the specification</a>, but many of them can be converted into one another, and converting to <code>CategoryBinning</code> (strings) often makes the intent clear.</p>\n<pre><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">IntegerBinning</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">toCategoryBinning</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">toCategoryBinning</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">EdgesBinning</span><span class=\"p\">([</span><span class=\"mf\">0.01</span><span class=\"p\">,</span> <span class=\"mf\">0.05</span><span class=\"p\">,</span> <span class=\"mf\">0.1</span><span class=\"p\">,</span> <span class=\"mf\">0.5</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">50</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">toCategoryBinning</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">IrregularBinning</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">),</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">),</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">)],</span>\n                       <span class=\"n\">overlapping_fill</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">IrregularBinning</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">toCategoryBinning</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">SparseRegularBinning</span><span class=\"p\">([</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">100</span><span class=\"p\">],</span> <span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">toCategoryBinning</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">FractionBinning</span><span class=\"p\">(</span><span class=\"n\">error_method</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">FractionBinning</span><span class=\"o\">.</span><span class=\"n\">clopper_pearson</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">toCategoryBinning</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">PredicateBinning</span><span class=\"p\">([</span><span class=\"s2\">\"signal region\"</span><span class=\"p\">,</span> <span class=\"s2\">\"control region\"</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">toCategoryBinning</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n<span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">VariationBinning</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Variation</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Assignment</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span> <span class=\"s2\">\"nominal\"</span><span class=\"p\">)]),</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Variation</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Assignment</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span> <span class=\"s2\">\"nominal + sigma\"</span><span class=\"p\">)]),</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Variation</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Assignment</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span> <span class=\"s2\">\"nominal - sigma\"</span><span class=\"p\">)])]</span>\n                        <span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">toCategoryBinning</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>CategoryBinning(categories=['5', '6', '7', '8', '9', '10'])\nCategoryBinning(\n  categories=['[-5, -4)', '[-4, -3)', '[-3, -2)', '[-2, -1)', '[-1, 0)', '[0, 1)', '[1, 2)', '[2, 3)',\n              '[3, 4)', '[4, 5)'])\nCategoryBinning(\n  categories=['[0.01, 0.05)', '[0.05, 0.1)', '[0.1, 0.5)', '[0.5, 1)', '[1, 5)', '[5, 10)', '[10, 50)',\n              '[50, 100)'])\nCategoryBinning(categories=['[0, 5)', '[10, 100)', '[-10, 10)'])\nCategoryBinning(categories=['[50, 60)', '[30, 40)', '[-20, -10)', '[80, 90)', '[-1000, -990)'])\nCategoryBinning(categories=['pass', 'all'])\nCategoryBinning(categories=['signal region', 'control region'])\nCategoryBinning(categories=['x := nominal', 'x := nominal + sigma', 'x := nominal - sigma'])\n</code></pre>\n<p>This technique can also clear up confusion about overflow bins.</p>\n<pre><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">),</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealOverflow</span><span class=\"p\">(</span>\n    <span class=\"n\">loc_underflow</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">BinLocation</span><span class=\"o\">.</span><span class=\"n\">above2</span><span class=\"p\">,</span>\n    <span class=\"n\">loc_overflow</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">BinLocation</span><span class=\"o\">.</span><span class=\"n\">above1</span><span class=\"p\">,</span>\n    <span class=\"n\">loc_nanflow</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">BinLocation</span><span class=\"o\">.</span><span class=\"n\">below1</span>\n    <span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">toCategoryBinning</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>CategoryBinning(\n  categories=['{nan}', '[-5, -3)', '[-3, -1)', '[-1, 1)', '[1, 3)', '[3, 5)', '[5, +inf]',\n              '[-inf, -5)'])\n</code></pre>\n<h2>Fancy binning types</h2>\n<p>You might also be wondering about <code>FractionBinning</code>, <code>PredicateBinning</code>, and <code>VariationBinning</code>.</p>\n<p><code>FractionBinning</code> is an axis of two bins: #passing and #total, #failing and #total, or #passing and #failing. Adding it to another axis effectively makes an \"efficiency plot.\"</p>\n<pre><span class=\"n\">h</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Histogram</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">FractionBinning</span><span class=\"p\">()),</span>\n                      <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)))],</span>\n                    <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">UnweightedCounts</span><span class=\"p\">(</span>\n                        <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span>\n                            <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([[</span>  <span class=\"mi\">9</span><span class=\"p\">,</span>  <span class=\"mi\">25</span><span class=\"p\">,</span>  <span class=\"mi\">29</span><span class=\"p\">,</span>  <span class=\"mi\">35</span><span class=\"p\">,</span>  <span class=\"mi\">54</span><span class=\"p\">,</span>  <span class=\"mi\">67</span><span class=\"p\">,</span>  <span class=\"mi\">60</span><span class=\"p\">,</span>  <span class=\"mi\">84</span><span class=\"p\">,</span>  <span class=\"mi\">80</span><span class=\"p\">,</span>  <span class=\"mi\">94</span><span class=\"p\">],</span>\n                                         <span class=\"p\">[</span> <span class=\"mi\">99</span><span class=\"p\">,</span> <span class=\"mi\">119</span><span class=\"p\">,</span> <span class=\"mi\">109</span><span class=\"p\">,</span> <span class=\"mi\">109</span><span class=\"p\">,</span>  <span class=\"mi\">95</span><span class=\"p\">,</span> <span class=\"mi\">104</span><span class=\"p\">,</span> <span class=\"mi\">102</span><span class=\"p\">,</span> <span class=\"mi\">106</span><span class=\"p\">,</span> <span class=\"mi\">112</span><span class=\"p\">,</span> <span class=\"mi\">122</span><span class=\"p\">]]))))</span>\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">to_pandas</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">)</span>\n<span class=\"n\">df</span>\n</pre>\n<div>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th></th>\n      <th>unweighted</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>pass</th>\n      <th>[-5.0, -4.0)</th>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>25</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>29</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>35</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>54</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>67</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>60</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>84</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>80</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>94</td>\n    </tr>\n    <tr>\n      <th>all</th>\n      <th>[-5.0, -4.0)</th>\n      <td>99</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>119</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>109</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>109</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>95</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>104</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>102</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>106</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>112</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>122</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<pre><span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">df</span><span class=\"o\">.</span><span class=\"n\">unstack</span><span class=\"p\">(</span><span class=\"n\">level</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"n\">df</span>\n</pre>\n<div>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>unweighted</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>all</th>\n      <th>pass</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>[-5.0, -4.0)</th>\n      <td>99</td>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>119</td>\n      <td>25</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>109</td>\n      <td>29</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>109</td>\n      <td>35</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>95</td>\n      <td>54</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>104</td>\n      <td>67</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>102</td>\n      <td>60</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>106</td>\n      <td>84</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>112</td>\n      <td>80</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>122</td>\n      <td>94</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<pre><span class=\"n\">df</span><span class=\"p\">[</span><span class=\"s2\">\"unweighted\"</span><span class=\"p\">,</span> <span class=\"s2\">\"pass\"</span><span class=\"p\">]</span> <span class=\"o\">/</span> <span class=\"n\">df</span><span class=\"p\">[</span><span class=\"s2\">\"unweighted\"</span><span class=\"p\">,</span> <span class=\"s2\">\"all\"</span><span class=\"p\">]</span>\n</pre>\n<pre><code>[-5.0, -4.0)    0.090909\n[-4.0, -3.0)    0.210084\n[-3.0, -2.0)    0.266055\n[-2.0, -1.0)    0.321101\n[-1.0, 0.0)     0.568421\n[0.0, 1.0)      0.644231\n[1.0, 2.0)      0.588235\n[2.0, 3.0)      0.792453\n[3.0, 4.0)      0.714286\n[4.0, 5.0)      0.770492\ndtype: float64\n</code></pre>\n<p><code>PredicateBinning</code> means that each bin represents a predicate (if-then rule) in the filling procedure. Aghast doesn't <em>have</em> a filling procedure, but filling-libraries can use this to encode relationships among histograms that a fitting-library can take advantage of, for combined signal-control region fits, for instance. It's possible for those regions to overlap: an input datum might satisfy more than one predicate, and <code>overlapping_fill</code> determines which bin(s) were chosen: <code>first</code>, <code>last</code>, or <code>all</code>.</p>\n<p><code>VariationBinning</code> means that each bin represents a variation of one of the paramters used to calculate the fill-variables. This is used to determine sensitivity to systematic effects, by varying them and re-filling. In this kind of binning, the same input datum enters every bin.</p>\n<pre><span class=\"n\">xdata</span> <span class=\"o\">=</span> <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">random</span><span class=\"o\">.</span><span class=\"n\">normal</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"mf\">1e6</span><span class=\"p\">))</span>\n<span class=\"n\">sigma</span> <span class=\"o\">=</span> <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">random</span><span class=\"o\">.</span><span class=\"n\">uniform</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mf\">0.1</span><span class=\"p\">,</span> <span class=\"mf\">0.8</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"mf\">1e6</span><span class=\"p\">))</span>\n\n<span class=\"n\">h</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Histogram</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">VariationBinning</span><span class=\"p\">([</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Variation</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Assignment</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span> <span class=\"s2\">\"nominal\"</span><span class=\"p\">)]),</span>\n                         <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Variation</span><span class=\"p\">([</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Assignment</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">,</span> <span class=\"s2\">\"nominal + sigma\"</span><span class=\"p\">)])])),</span>\n                     <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)))],</span>\n                    <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">UnweightedCounts</span><span class=\"p\">(</span>\n                        <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span>\n                            <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">concatenate</span><span class=\"p\">([</span>\n                                <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"n\">xdata</span><span class=\"p\">,</span> <span class=\"n\">bins</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"nb\">range</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">))[</span><span class=\"mi\">0</span><span class=\"p\">],</span>\n                                <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">histogram</span><span class=\"p\">(</span><span class=\"n\">xdata</span> <span class=\"o\">+</span> <span class=\"n\">sigma</span><span class=\"p\">,</span> <span class=\"n\">bins</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"nb\">range</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">))[</span><span class=\"mi\">0</span><span class=\"p\">]]))))</span>\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">to_pandas</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">)</span>\n<span class=\"n\">df</span>\n</pre>\n<div>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th></th>\n      <th>unweighted</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>x := nominal</th>\n      <th>[-5.0, -4.0)</th>\n      <td>31</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>1309</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>21624</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>135279</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>341683</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>341761</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>135675</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>21334</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>1273</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>31</td>\n    </tr>\n    <tr>\n      <th>x := nominal + sigma</th>\n      <th>[-5.0, -4.0)</th>\n      <td>14</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>559</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>10814</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>84176</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>271999</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>367950</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>209479</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>49997</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>4815</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>193</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<pre><span class=\"n\">df</span><span class=\"o\">.</span><span class=\"n\">unstack</span><span class=\"p\">(</span><span class=\"n\">level</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n</pre>\n<div>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>unweighted</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>x := nominal</th>\n      <th>x := nominal + sigma</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>[-5.0, -4.0)</th>\n      <td>31</td>\n      <td>14</td>\n    </tr>\n    <tr>\n      <th>[-4.0, -3.0)</th>\n      <td>1309</td>\n      <td>559</td>\n    </tr>\n    <tr>\n      <th>[-3.0, -2.0)</th>\n      <td>21624</td>\n      <td>10814</td>\n    </tr>\n    <tr>\n      <th>[-2.0, -1.0)</th>\n      <td>135279</td>\n      <td>84176</td>\n    </tr>\n    <tr>\n      <th>[-1.0, 0.0)</th>\n      <td>341683</td>\n      <td>271999</td>\n    </tr>\n    <tr>\n      <th>[0.0, 1.0)</th>\n      <td>341761</td>\n      <td>367950</td>\n    </tr>\n    <tr>\n      <th>[1.0, 2.0)</th>\n      <td>135675</td>\n      <td>209479</td>\n    </tr>\n    <tr>\n      <th>[2.0, 3.0)</th>\n      <td>21334</td>\n      <td>49997</td>\n    </tr>\n    <tr>\n      <th>[3.0, 4.0)</th>\n      <td>1273</td>\n      <td>4815</td>\n    </tr>\n    <tr>\n      <th>[4.0, 5.0)</th>\n      <td>31</td>\n      <td>193</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h3>Collections</h3>\n<p>You can gather many objects (histograms, functions, ntuples) into a <code>Collection</code>, partly for convenience of encapsulating all of them in one object.</p>\n<pre><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Collection</span><span class=\"p\">({</span><span class=\"s2\">\"one\"</span><span class=\"p\">:</span> <span class=\"n\">fromroot</span><span class=\"p\">,</span> <span class=\"s2\">\"two\"</span><span class=\"p\">:</span> <span class=\"n\">ghastly_hist</span><span class=\"p\">})</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>Collection(\n  objects={\n    'one': Histogram(\n      axis=[\n        Axis(\n          binning=\n            RegularBinning(\n              num=80,\n              interval=RealInterval(low=-5.0, high=5.0),\n              overflow=RealOverflow(loc_underflow=BinLocation.below1, loc_overflow=BinLocation.above1)),\n          statistics=[\n            Statistics(\n              moments=[\n                Moments(sumwxn=InterpretedInlineInt64Buffer(buffer=[1e+07]), n=0),\n                Moments(sumwxn=InterpretedInlineFloat64Buffer(buffer=[1e+07]), n=0, weightpower=1),\n                Moments(sumwxn=InterpretedInlineFloat64Buffer(buffer=[1e+07]), n=0, weightpower=2),\n                Moments(sumwxn=InterpretedInlineFloat64Buffer(buffer=[2468.31]), n=1, weightpower=1),\n                Moments(\n                  sumwxn=InterpretedInlineFloat64Buffer(buffer=[1.00118e+07]),\n                  n=2,\n                  weightpower=1)\n              ])\n          ])\n      ],\n      counts=\n        UnweightedCounts(\n          counts=\n            InterpretedInlineFloat64Buffer(\n              buffer=\n                  [0.00000e+00 2.00000e+00 5.00000e+00 9.00000e+00 1.50000e+01 2.90000e+01\n                   4.90000e+01 8.00000e+01 1.04000e+02 2.37000e+02 3.52000e+02 5.55000e+02\n                   8.67000e+02 1.44700e+03 2.04600e+03 3.03700e+03 4.56200e+03 6.80500e+03\n                   9.54000e+03 1.35290e+04 1.85840e+04 2.55930e+04 3.50000e+04 4.60240e+04\n                   5.91030e+04 7.64920e+04 9.64410e+04 1.19873e+05 1.46159e+05 1.77533e+05\n                   2.10628e+05 2.46316e+05 2.83292e+05 3.21377e+05 3.59314e+05 3.93857e+05\n                   4.26446e+05 4.53031e+05 4.74806e+05 4.89846e+05 4.96646e+05 4.97922e+05\n                   4.90499e+05 4.73200e+05 4.53527e+05 4.25650e+05 3.93297e+05 3.58537e+05\n                   3.21099e+05 2.82519e+05 2.46469e+05 2.11181e+05 1.77550e+05 1.47417e+05\n                   1.20322e+05 9.65920e+04 7.66650e+04 5.95870e+04 4.57760e+04 3.44590e+04\n                   2.59000e+04 1.88760e+04 1.35760e+04 9.57100e+03 6.66200e+03 4.62900e+03\n                   3.16100e+03 2.06900e+03 1.33400e+03 8.78000e+02 5.81000e+02 3.32000e+02\n                   2.20000e+02 1.35000e+02 6.50000e+01 3.90000e+01 2.60000e+01 1.90000e+01\n                   1.50000e+01 4.00000e+00 4.00000e+00 0.00000e+00]))),\n    'two': Histogram(\n      axis=[\n        Axis(binning=RegularBinning(num=80, interval=RealInterval(low=-5.0, high=5.0)))\n      ],\n      counts=\n        UnweightedCounts(\n          counts=\n            InterpretedInlineInt64Buffer(\n              buffer=\n                  [     2      5      9     15     29     49     80    104    237    352\n                      555    867   1447   2046   3037   4562   6805   9540  13529  18584\n                    25593  35000  46024  59103  76492  96441 119873 146159 177533 210628\n                   246316 283292 321377 359314 393857 426446 453031 474806 489846 496646\n                   497922 490499 473200 453527 425650 393297 358537 321099 282519 246469\n                   211181 177550 147417 120322  96592  76665  59587  45776  34459  25900\n                    18876  13576   9571   6662   4629   3161   2069   1334    878    581\n                      332    220    135     65     39     26     19     15      4      4])))\n  })\n</code></pre>\n<p>Not only for convenience: <a href=\"https://github.com/scikit-hep/aghast/blob/master/specification.adoc#Collection\" rel=\"nofollow\">you can also define</a> an <code>Axis</code> in the <code>Collection</code> to subdivide all contents by that <code>Axis</code>. For instance, you can make a collection of qualitatively different histograms all have a signal and control region with <code>PredicateBinning</code>, or all have systematic variations with <code>VariationBinning</code>.</p>\n<p>It is not necessary to rely on naming conventions to communicate this information from filler to fitter.</p>\n<h3>Histogram \u2192 histogram conversions</h3>\n<p>I said in the introduction that aghast does not fill histograms and does not plot histograms\u2014the two things data analysts are expecting to do. These would be done by user-facing libraries.</p>\n<p>Aghast does, however, transform histograms into other histograms, and not just among formats. You can combine histograms with <code>+</code>. In addition to adding histogram counts, it combines auxiliary statistics appropriately (if possible).</p>\n<pre><span class=\"n\">h1</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Histogram</span><span class=\"p\">([</span>\n    <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)),</span>\n        <span class=\"n\">statistics</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Statistics</span><span class=\"p\">(</span>\n            <span class=\"n\">moments</span><span class=\"o\">=</span><span class=\"p\">[</span>\n                <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Moments</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">10</span><span class=\"p\">])),</span> <span class=\"n\">n</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">),</span>\n                <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Moments</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">20</span><span class=\"p\">])),</span> <span class=\"n\">n</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">)],</span>\n            <span class=\"n\">quantiles</span><span class=\"o\">=</span><span class=\"p\">[</span>\n                <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Quantiles</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">30</span><span class=\"p\">])),</span> <span class=\"n\">p</span><span class=\"o\">=</span><span class=\"mf\">0.5</span><span class=\"p\">)],</span>\n            <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Modes</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">40</span><span class=\"p\">]))),</span>\n            <span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Extremes</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">50</span><span class=\"p\">]))),</span>\n            <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Extremes</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">60</span><span class=\"p\">]))))])],</span>\n    <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">UnweightedCounts</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">arange</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">))))</span>\n<span class=\"n\">h2</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Histogram</span><span class=\"p\">([</span>\n    <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)),</span>\n        <span class=\"n\">statistics</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Statistics</span><span class=\"p\">(</span>\n            <span class=\"n\">moments</span><span class=\"o\">=</span><span class=\"p\">[</span>\n                <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Moments</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">100</span><span class=\"p\">])),</span> <span class=\"n\">n</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">),</span>\n                <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Moments</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">200</span><span class=\"p\">])),</span> <span class=\"n\">n</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">)],</span>\n            <span class=\"n\">quantiles</span><span class=\"o\">=</span><span class=\"p\">[</span>\n                <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Quantiles</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">300</span><span class=\"p\">])),</span> <span class=\"n\">p</span><span class=\"o\">=</span><span class=\"mf\">0.5</span><span class=\"p\">)],</span>\n            <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Modes</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">400</span><span class=\"p\">]))),</span>\n            <span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Extremes</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">500</span><span class=\"p\">]))),</span>\n            <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Extremes</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">600</span><span class=\"p\">]))))])],</span>\n    <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">UnweightedCounts</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">arange</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"mi\">200</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">))))</span>\n</pre>\n<pre><span class=\"p\">(</span><span class=\"n\">h1</span> <span class=\"o\">+</span> <span class=\"n\">h2</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>Histogram(\n  axis=[\n    Axis(\n      binning=RegularBinning(num=10, interval=RealInterval(low=-5.0, high=5.0)),\n      statistics=[\n        Statistics(\n          moments=[\n            Moments(sumwxn=InterpretedInlineInt64Buffer(buffer=[110]), n=1),\n            Moments(sumwxn=InterpretedInlineInt64Buffer(buffer=[220]), n=2)\n          ],\n          min=Extremes(values=InterpretedInlineInt64Buffer(buffer=[50])),\n          max=Extremes(values=InterpretedInlineInt64Buffer(buffer=[600])))\n      ])\n  ],\n  counts=\n    UnweightedCounts(\n      counts=InterpretedInlineInt64Buffer(buffer=[100 111 122 133 144 155 166 177 188 199])))\n</code></pre>\n<p>The corresponding moments of <code>h1</code> and <code>h2</code> were matched and added, quantiles and modes were dropped (no way to combine them), and the correct minimum and maximum were picked; the histogram contents were added as well.</p>\n<p>Another important histogram \u2192 histogram conversion is axis-reduction, which can take three forms:</p>\n<ul>\n<li>slicing an axis, either dropping the eliminated bins or adding them to underflow/overflow (if possible, depends on binning type);</li>\n<li>rebinning by combining neighboring bins;</li>\n<li>projecting out an axis, removing it entirely, summing over all existing bins.</li>\n</ul>\n<p>All of these operations use a Pandas-inspired <code>loc</code>/<code>iloc</code> syntax.</p>\n<pre><span class=\"n\">h</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Histogram</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)))],</span>\n    <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">UnweightedCounts</span><span class=\"p\">(</span>\n        <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">20</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"mi\">40</span><span class=\"p\">,</span> <span class=\"mi\">50</span><span class=\"p\">,</span> <span class=\"mi\">60</span><span class=\"p\">,</span> <span class=\"mi\">70</span><span class=\"p\">,</span> <span class=\"mi\">80</span><span class=\"p\">,</span> <span class=\"mi\">90</span><span class=\"p\">]))))</span>\n</pre>\n<p><code>loc</code> slices in the data's coordinate system. <code>1.5</code> rounds up to bin index <code>6</code>. The first five bins get combined into an overflow bin: <code>150 = 10 + 20 + 30 + 40 + 50</code>.</p>\n<pre><span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">loc</span><span class=\"p\">[</span><span class=\"mf\">1.5</span><span class=\"p\">:]</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>Histogram(\n  axis=[\n    Axis(\n      binning=\n        RegularBinning(\n          num=4,\n          interval=RealInterval(low=1.0, high=5.0),\n          overflow=\n            RealOverflow(\n              loc_underflow=BinLocation.above1,\n              minf_mapping=RealOverflow.missing,\n              pinf_mapping=RealOverflow.missing,\n              nan_mapping=RealOverflow.missing)))\n  ],\n  counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[60 70 80 90 150])))\n</code></pre>\n<p><code>iloc</code> slices by bin index number.</p>\n<pre><span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">iloc</span><span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">:]</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>Histogram(\n  axis=[\n    Axis(\n      binning=\n        RegularBinning(\n          num=4,\n          interval=RealInterval(low=1.0, high=5.0),\n          overflow=\n            RealOverflow(\n              loc_underflow=BinLocation.above1,\n              minf_mapping=RealOverflow.missing,\n              pinf_mapping=RealOverflow.missing,\n              nan_mapping=RealOverflow.missing)))\n  ],\n  counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[60 70 80 90 150])))\n</code></pre>\n<p>Slices have a <code>start</code>, <code>stop</code>, and <code>step</code> (<code>start:stop:step</code>). The <code>step</code> parameter rebins:</p>\n<pre><span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">iloc</span><span class=\"p\">[::</span><span class=\"mi\">2</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>Histogram(\n  axis=[\n    Axis(binning=RegularBinning(num=5, interval=RealInterval(low=-5.0, high=5.0)))\n  ],\n  counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[10 50 90 130 170])))\n</code></pre>\n<p>Thus, you can slice and rebin as part of the same operation.</p>\n<p>Projecting uses the same mechanism, except that <code>None</code> passed as an axis's slice projects it.</p>\n<pre><span class=\"n\">h2</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Histogram</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">))),</span>\n     <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">)))],</span>\n    <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">UnweightedCounts</span><span class=\"p\">(</span>\n        <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">arange</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">))))</span>\n\n<span class=\"n\">h2</span><span class=\"o\">.</span><span class=\"n\">iloc</span><span class=\"p\">[:,</span> <span class=\"kc\">None</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>Histogram(\n  axis=[\n    Axis(binning=RegularBinning(num=10, interval=RealInterval(low=-5.0, high=5.0)))\n  ],\n  counts=\n    UnweightedCounts(\n      counts=InterpretedInlineInt64Buffer(buffer=[45 145 245 345 445 545 645 745 845 945])))\n</code></pre>\n<p>Thus, all three axis reduction operations can be performed in a single syntax.</p>\n<p>In general, an n-dimensional ghastly histogram can be sliced like an n-dimensional Numpy array. This includes integer and boolean indexing (though that necessarily changes the binning to <code>IrregularBinning</code>).</p>\n<pre><span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">iloc</span><span class=\"p\">[[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">7</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]]</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>Histogram(\n  axis=[\n    Axis(\n      binning=\n        IrregularBinning(\n          intervals=[\n            RealInterval(low=-1.0, high=0.0),\n            RealInterval(low=-2.0, high=-1.0),\n            RealInterval(low=1.0, high=2.0),\n            RealInterval(low=2.0, high=3.0),\n            RealInterval(low=-4.0, high=-3.0)\n          ]))\n  ],\n  counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[40 30 60 70 10])))\n</code></pre>\n<pre><span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">iloc</span><span class=\"p\">[[</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"kc\">False</span><span class=\"p\">]]</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n</pre>\n<pre><code>Histogram(\n  axis=[\n    Axis(\n      binning=\n        IrregularBinning(\n          intervals=[\n            RealInterval(low=-5.0, high=-4.0),\n            RealInterval(low=-3.0, high=-2.0),\n            RealInterval(low=-1.0, high=0.0),\n            RealInterval(low=1.0, high=2.0),\n            RealInterval(low=3.0, high=4.0)\n          ]))\n  ],\n  counts=UnweightedCounts(counts=InterpretedInlineInt64Buffer(buffer=[0 20 40 60 80])))\n</code></pre>\n<p><code>loc</code> for numerical binnings accepts</p>\n<ul>\n<li>a real number</li>\n<li>a real-valued slice</li>\n<li><code>None</code> for projection</li>\n<li>ellipsis (<code>...</code>)</li>\n</ul>\n<p><code>loc</code> for categorical binnings accepts</p>\n<ul>\n<li>a string</li>\n<li>an iterable of strings</li>\n<li>an <em>empty</em> slice</li>\n<li><code>None</code> for projection</li>\n<li>ellipsis (<code>...</code>)</li>\n</ul>\n<p><code>iloc</code> accepts</p>\n<ul>\n<li>an integer</li>\n<li>an integer-valued slice</li>\n<li><code>None</code> for projection</li>\n<li>integer-valued array-like</li>\n<li>boolean-valued array-like</li>\n<li>ellipsis (<code>...</code>)</li>\n</ul>\n<h3>Bin counts \u2192 Numpy</h3>\n<p>Frequently, one wants to extract bin counts from a histogram. The <code>loc</code>/<code>iloc</code> syntax above creates <em>histograms</em> from <em>histograms</em>, not bin counts.</p>\n<p>A histogram's <code>counts</code> property has a slice syntax.</p>\n<pre><span class=\"n\">allcounts</span> <span class=\"o\">=</span> <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">arange</span><span class=\"p\">(</span><span class=\"mi\">12</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">arange</span><span class=\"p\">(</span><span class=\"mi\">12</span><span class=\"p\">)[:,</span> <span class=\"kc\">None</span><span class=\"p\">]</span>   <span class=\"c1\"># multiplication table</span>\n<span class=\"n\">allcounts</span><span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"p\">:]</span> <span class=\"o\">=</span> <span class=\"o\">-</span><span class=\"mi\">999</span>   <span class=\"c1\"># underflows</span>\n<span class=\"n\">allcounts</span><span class=\"p\">[</span><span class=\"mi\">11</span><span class=\"p\">,</span> <span class=\"p\">:]</span> <span class=\"o\">=</span> <span class=\"mi\">999</span>    <span class=\"c1\"># overflows</span>\n<span class=\"n\">allcounts</span><span class=\"p\">[:,</span> <span class=\"mi\">0</span><span class=\"p\">]</span>  <span class=\"o\">=</span> <span class=\"o\">-</span><span class=\"mi\">999</span>   <span class=\"c1\"># underflows</span>\n<span class=\"n\">allcounts</span><span class=\"p\">[:,</span> <span class=\"mi\">1</span><span class=\"p\">]</span>  <span class=\"o\">=</span> <span class=\"mi\">999</span>    <span class=\"c1\"># overflows</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">allcounts</span><span class=\"p\">)</span>\n</pre>\n<pre><code>[[-999  999    0    0    0    0    0    0    0    0    0    0]\n [-999  999    2    3    4    5    6    7    8    9   10   11]\n [-999  999    4    6    8   10   12   14   16   18   20   22]\n [-999  999    6    9   12   15   18   21   24   27   30   33]\n [-999  999    8   12   16   20   24   28   32   36   40   44]\n [-999  999   10   15   20   25   30   35   40   45   50   55]\n [-999  999   12   18   24   30   36   42   48   54   60   66]\n [-999  999   14   21   28   35   42   49   56   63   70   77]\n [-999  999   16   24   32   40   48   56   64   72   80   88]\n [-999  999   18   27   36   45   54   63   72   81   90   99]\n [-999  999 -999 -999 -999 -999 -999 -999 -999 -999 -999 -999]\n [-999  999  999  999  999  999  999  999  999  999  999  999]]\n</code></pre>\n<pre><span class=\"n\">h2</span> <span class=\"o\">=</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Histogram</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">),</span>\n                     <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealOverflow</span><span class=\"p\">(</span><span class=\"n\">loc_underflow</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealOverflow</span><span class=\"o\">.</span><span class=\"n\">above1</span><span class=\"p\">,</span>\n                                       <span class=\"n\">loc_overflow</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealOverflow</span><span class=\"o\">.</span><span class=\"n\">above2</span><span class=\"p\">))),</span>\n     <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">Axis</span><span class=\"p\">(</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RegularBinning</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealInterval</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">),</span>\n                     <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealOverflow</span><span class=\"p\">(</span><span class=\"n\">loc_underflow</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealOverflow</span><span class=\"o\">.</span><span class=\"n\">below2</span><span class=\"p\">,</span>\n                                       <span class=\"n\">loc_overflow</span><span class=\"o\">=</span><span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">RealOverflow</span><span class=\"o\">.</span><span class=\"n\">below1</span><span class=\"p\">)))],</span>\n    <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">UnweightedCounts</span><span class=\"p\">(</span>\n        <span class=\"n\">aghast</span><span class=\"o\">.</span><span class=\"n\">InterpretedInlineBuffer</span><span class=\"o\">.</span><span class=\"n\">fromarray</span><span class=\"p\">(</span><span class=\"n\">allcounts</span><span class=\"p\">)))</span>\n</pre>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">h2</span><span class=\"o\">.</span><span class=\"n\">counts</span><span class=\"p\">[:,</span> <span class=\"p\">:])</span>\n</pre>\n<pre><code>[[ 0  0  0  0  0  0  0  0  0  0]\n [ 2  3  4  5  6  7  8  9 10 11]\n [ 4  6  8 10 12 14 16 18 20 22]\n [ 6  9 12 15 18 21 24 27 30 33]\n [ 8 12 16 20 24 28 32 36 40 44]\n [10 15 20 25 30 35 40 45 50 55]\n [12 18 24 30 36 42 48 54 60 66]\n [14 21 28 35 42 49 56 63 70 77]\n [16 24 32 40 48 56 64 72 80 88]\n [18 27 36 45 54 63 72 81 90 99]]\n</code></pre>\n<p>To get the underflows and overflows, set the slice extremes to <code>-inf</code> and <code>+inf</code>.</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">h2</span><span class=\"o\">.</span><span class=\"n\">counts</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">inf</span><span class=\"p\">:</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">inf</span><span class=\"p\">,</span> <span class=\"p\">:])</span>\n</pre>\n<pre><code>[[-999 -999 -999 -999 -999 -999 -999 -999 -999 -999]\n [   0    0    0    0    0    0    0    0    0    0]\n [   2    3    4    5    6    7    8    9   10   11]\n [   4    6    8   10   12   14   16   18   20   22]\n [   6    9   12   15   18   21   24   27   30   33]\n [   8   12   16   20   24   28   32   36   40   44]\n [  10   15   20   25   30   35   40   45   50   55]\n [  12   18   24   30   36   42   48   54   60   66]\n [  14   21   28   35   42   49   56   63   70   77]\n [  16   24   32   40   48   56   64   72   80   88]\n [  18   27   36   45   54   63   72   81   90   99]\n [ 999  999  999  999  999  999  999  999  999  999]]\n</code></pre>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">h2</span><span class=\"o\">.</span><span class=\"n\">counts</span><span class=\"p\">[:,</span> <span class=\"o\">-</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">inf</span><span class=\"p\">:</span><span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">inf</span><span class=\"p\">])</span>\n</pre>\n<pre><code>[[-999    0    0    0    0    0    0    0    0    0    0  999]\n [-999    2    3    4    5    6    7    8    9   10   11  999]\n [-999    4    6    8   10   12   14   16   18   20   22  999]\n [-999    6    9   12   15   18   21   24   27   30   33  999]\n [-999    8   12   16   20   24   28   32   36   40   44  999]\n [-999   10   15   20   25   30   35   40   45   50   55  999]\n [-999   12   18   24   30   36   42   48   54   60   66  999]\n [-999   14   21   28   35   42   49   56   63   70   77  999]\n [-999   16   24   32   40   48   56   64   72   80   88  999]\n [-999   18   27   36   45   54   63   72   81   90   99  999]]\n</code></pre>\n<p>Also note that the underflows are now all below the normal bins and overflows are now all above the normal bins, regardless of how they were arranged in the ghast. This allows analysis code to be independent of histogram source.</p>\n<h2>Other types</h2>\n<p>Aghast can attach fit functions to histograms, can store standalone functions, such as lookup tables, and can store ntuples for unweighted fits or machine learning.</p>\n<h1>Acknowledgements</h1>\n<p>Support for this work was provided by NSF cooperative agreement OAC-1836650 (IRIS-HEP), grant OAC-1450377 (DIANA/HEP) and PHY-1520942 (US-CMS LHC Ops).</p>\n<p>Thanks especially to the gracious help of <a href=\"https://github.com/scikit-hep/aghast/graphs/contributors\" rel=\"nofollow\">aghast contributors</a>!</p>\n\n          </div>"}, "last_serial": 5135796, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "08559499a6864632e2969101f9e1da5f", "sha256": "40797f3ba946aa3b8660e02446c6762362a7887627494be5d9981832a7afa9ab"}, "downloads": -1, "filename": "aghast-0.1.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "08559499a6864632e2969101f9e1da5f", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 132674, "upload_time": "2019-03-31T14:08:46", "upload_time_iso_8601": "2019-03-31T14:08:46.417908Z", "url": "https://files.pythonhosted.org/packages/02/44/0e44368da8bdf879f6bf68151c73c2e5cf51d6758bf87c0d160902dfba90/aghast-0.1.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "49c44457ddc64bad447ce6a214b80487", "sha256": "cfcc0d0786d5f48c08f1c4f53bb0ece903dca223edc40548e886976f88291c99"}, "downloads": -1, "filename": "aghast-0.1.0.tar.gz", "has_sig": false, "md5_digest": "49c44457ddc64bad447ce6a214b80487", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 109577, "upload_time": "2019-03-31T14:08:47", "upload_time_iso_8601": "2019-03-31T14:08:47.876664Z", "url": "https://files.pythonhosted.org/packages/68/5a/d6e8b422e397d5219021c81fd12d234cfacd3ed30264be7ff6b2ed094531/aghast-0.1.0.tar.gz", "yanked": false}], "0.1.0rc1": [{"comment_text": "", "digests": {"md5": "2110989b49ef1c69e8646cbe88cf55df", "sha256": "d148cb9a46e3f6a3e8b2384eaeb18af4faa16b5995738ad9356461957841bedd"}, "downloads": -1, "filename": "aghast-0.1.0rc1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "2110989b49ef1c69e8646cbe88cf55df", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 131429, "upload_time": "2019-03-31T00:56:57", "upload_time_iso_8601": "2019-03-31T00:56:57.835342Z", "url": "https://files.pythonhosted.org/packages/d2/33/cc405a95ad720a1c64e5d41dea5688b44bf049cd3a9fb05b1128ac1b9050/aghast-0.1.0rc1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6a9231028f169e0a2e397c21974b93e3", "sha256": "d661db5f6a22e4705c0849612fa4cc6a9425f11f59035291208be6bfdb17602f"}, "downloads": -1, "filename": "aghast-0.1.0rc1.tar.gz", "has_sig": false, "md5_digest": "6a9231028f169e0a2e397c21974b93e3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 88582, "upload_time": "2019-03-31T00:57:01", "upload_time_iso_8601": "2019-03-31T00:57:01.041280Z", "url": "https://files.pythonhosted.org/packages/6d/23/2c12782a99007514d5d6f93ae8e2a40c84fdc62867e0d23d3126fbe088b2/aghast-0.1.0rc1.tar.gz", "yanked": false}], "0.1.0rc2": [{"comment_text": "", "digests": {"md5": "7a665a0ac9cc802bac6fc9841c263b06", "sha256": "4c9069db8a65790afe1a127e5c3988379b6f9309411d57ae4d61d384a1761187"}, "downloads": -1, "filename": "aghast-0.1.0rc2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "7a665a0ac9cc802bac6fc9841c263b06", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 131457, "upload_time": "2019-03-31T00:59:29", "upload_time_iso_8601": "2019-03-31T00:59:29.740707Z", "url": "https://files.pythonhosted.org/packages/18/6b/a9fb914069422e7d310a8566bcabe34c60c88cfbce9a4cd53c1a51fc56dd/aghast-0.1.0rc2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6dbac99d02d7543d220db8a91a5badfc", "sha256": "d6ed8a79546d8c5650b3c19815ae67f375b333a82761f89aaedab84762e0a818"}, "downloads": -1, "filename": "aghast-0.1.0rc2.tar.gz", "has_sig": false, "md5_digest": "6dbac99d02d7543d220db8a91a5badfc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 88640, "upload_time": "2019-03-31T00:59:32", "upload_time_iso_8601": "2019-03-31T00:59:32.371725Z", "url": "https://files.pythonhosted.org/packages/da/47/b3d19bc3b1844c003a65d09d86c2a47666eeebcc8068f04c43d61e4919e7/aghast-0.1.0rc2.tar.gz", "yanked": false}], "0.1.0rc3": [{"comment_text": "", "digests": {"md5": "62824af12544592f1f80186fa5934d40", "sha256": "3a188f4e635529b61157843ffff3548f9903933f63dfb80b5acc84c86932269f"}, "downloads": -1, "filename": "aghast-0.1.0rc3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "62824af12544592f1f80186fa5934d40", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 132580, "upload_time": "2019-03-31T01:04:45", "upload_time_iso_8601": "2019-03-31T01:04:45.339948Z", "url": "https://files.pythonhosted.org/packages/d1/e6/973edd266f966ba6dd2cc5130d416efe46323310e3c7c94a1071696d7732/aghast-0.1.0rc3-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c00074f7e081d1a2c9e929d43d6bf874", "sha256": "9128723166c7a56aa39d768b4bf684fd981bbb35639c1c40201487d002aa35c7"}, "downloads": -1, "filename": "aghast-0.1.0rc3.tar.gz", "has_sig": false, "md5_digest": "c00074f7e081d1a2c9e929d43d6bf874", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 90653, "upload_time": "2019-03-31T01:04:47", "upload_time_iso_8601": "2019-03-31T01:04:47.957918Z", "url": "https://files.pythonhosted.org/packages/25/91/f2fa7ba03c4bd053c77b21481767a313e794ff0c32693a4063e576fad74a/aghast-0.1.0rc3.tar.gz", "yanked": false}], "0.1.0rc4": [{"comment_text": "", "digests": {"md5": "737cac97cbe330654c0f28d0e1b3db15", "sha256": "5c3acd424e7c962e11e6a8248dd52a9f59c74fd38a1bd607bbdd65fa7943fa78"}, "downloads": -1, "filename": "aghast-0.1.0rc4-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "737cac97cbe330654c0f28d0e1b3db15", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 132581, "upload_time": "2019-03-31T01:45:01", "upload_time_iso_8601": "2019-03-31T01:45:01.262472Z", "url": "https://files.pythonhosted.org/packages/f2/b0/39eee3e9aaa12d67ae30468d69119f9062cb9546f739fe527168887ab711/aghast-0.1.0rc4-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "be913c885658fff5c15e0ed6d2b0f204", "sha256": "d5c80ce3bd4b4e4dcd64b4c68f268e62b4e8e6469496e5e0116b3c1f45cf9d09"}, "downloads": -1, "filename": "aghast-0.1.0rc4.tar.gz", "has_sig": false, "md5_digest": "be913c885658fff5c15e0ed6d2b0f204", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 108986, "upload_time": "2019-03-31T01:45:02", "upload_time_iso_8601": "2019-03-31T01:45:02.784268Z", "url": "https://files.pythonhosted.org/packages/db/9c/7cb8c71516eb0f4035eaa3e4de629fffdae96b7b674ec878ab5743673441/aghast-0.1.0rc4.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "249467f76f5f7f3251ac0cc9644ddca5", "sha256": "1e2e67d6bc6235338d2a22b7c1eed4430396798b7596c3a3af9c131d7f8b0c49"}, "downloads": -1, "filename": "aghast-0.2.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "249467f76f5f7f3251ac0cc9644ddca5", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 135759, "upload_time": "2019-04-11T20:48:16", "upload_time_iso_8601": "2019-04-11T20:48:16.801283Z", "url": "https://files.pythonhosted.org/packages/dd/b6/1bec45e1efa55b6c998143f86da2ec9f43ab07599428b2f61792a647024f/aghast-0.2.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "19269e4a4d7dd73aff582eef44ada411", "sha256": "252afb247e055b4b9e793e7a9c461d48940c24db84faf3577517357c792f4d4d"}, "downloads": -1, "filename": "aghast-0.2.0.tar.gz", "has_sig": false, "md5_digest": "19269e4a4d7dd73aff582eef44ada411", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 137516, "upload_time": "2019-04-11T20:48:18", "upload_time_iso_8601": "2019-04-11T20:48:18.373486Z", "url": "https://files.pythonhosted.org/packages/0b/d3/5ee284ba8f8b3fae1f515503dd5efc805a060f238cbc69ceae23cb7a770e/aghast-0.2.0.tar.gz", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "bfca193395dfd928cac5b22e24abb77c", "sha256": "d945d3adb55dea3a1cd465730c49110a8667651d9d2ae1ff6643900b0d3e65c8"}, "downloads": -1, "filename": "aghast-0.2.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "bfca193395dfd928cac5b22e24abb77c", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 135967, "upload_time": "2019-04-12T21:42:29", "upload_time_iso_8601": "2019-04-12T21:42:29.694954Z", "url": "https://files.pythonhosted.org/packages/9a/15/b67a8f15912dbfbbf4ae6025c4284c287a6be67e580d618afb38701af7a2/aghast-0.2.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "47671b75afe7e3406ebed22ac0aaff1f", "sha256": "5a60f84d8ecb1b5d56368d6eb839fdae93496d9d96b2a1ead8f820732679ccb4"}, "downloads": -1, "filename": "aghast-0.2.1.tar.gz", "has_sig": false, "md5_digest": "47671b75afe7e3406ebed22ac0aaff1f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 137730, "upload_time": "2019-04-12T21:42:31", "upload_time_iso_8601": "2019-04-12T21:42:31.147706Z", "url": "https://files.pythonhosted.org/packages/fd/d9/cfbc5921f2fa64648b3aeff0a5f02a7db1287dca0a38e560896a3e805671/aghast-0.2.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "bfca193395dfd928cac5b22e24abb77c", "sha256": "d945d3adb55dea3a1cd465730c49110a8667651d9d2ae1ff6643900b0d3e65c8"}, "downloads": -1, "filename": "aghast-0.2.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "bfca193395dfd928cac5b22e24abb77c", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 135967, "upload_time": "2019-04-12T21:42:29", "upload_time_iso_8601": "2019-04-12T21:42:29.694954Z", "url": "https://files.pythonhosted.org/packages/9a/15/b67a8f15912dbfbbf4ae6025c4284c287a6be67e580d618afb38701af7a2/aghast-0.2.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "47671b75afe7e3406ebed22ac0aaff1f", "sha256": "5a60f84d8ecb1b5d56368d6eb839fdae93496d9d96b2a1ead8f820732679ccb4"}, "downloads": -1, "filename": "aghast-0.2.1.tar.gz", "has_sig": false, "md5_digest": "47671b75afe7e3406ebed22ac0aaff1f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 137730, "upload_time": "2019-04-12T21:42:31", "upload_time_iso_8601": "2019-04-12T21:42:31.147706Z", "url": "https://files.pythonhosted.org/packages/fd/d9/cfbc5921f2fa64648b3aeff0a5f02a7db1287dca0a38e560896a3e805671/aghast-0.2.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:22:31 2020"}