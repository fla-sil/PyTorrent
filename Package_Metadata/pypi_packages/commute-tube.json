{"info": {"author": "Matthias K\u00fcch", "author_email": "halde@matthias-kuech.de", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: End Users/Desktop", "License :: OSI Approved :: GNU General Public License v3 (GPLv3)", "Programming Language :: Python :: 3"], "description": "# commute-tube\n\ncommute-tube is your friend on your daily commute. It will download videos of your interest to your USB pen by night so that you're able to watch the program in bus or train. It is basically a configurable wrapper for [youtube-dl](https://rg3.github.io/youtube-dl/).\n\nI made this tool because I was getting a new job with a daily commute via train attached. On that train ride no cellular network nor wifi was available. Despite wifi was introduced to the trains in the mean time, commute-tube still holds up by giving me instant access to the videos I want to watch without thinking about bandwidth and spinning loading wheels.\n\ncommute-tube is a tool written in Python and should be run in a headless environment such as a server with a USB pen attached. It will look for your USB pen, tries to mount it, download your configured content and unmount the pen afterwards. The only thing that should be done regularly is to plug in your pen after work and catch it before you leave the house. \n\nAlternatively, it is possible to just download to a folder and synch this folder via rsynch to your laptop or smart device.\n\n## Installation\n\n### End User\n\nRun `pip install commute-tube`.\n\n### Development\n\nRun `pip install -e .` in the checked out folder.\n\n## Running\n\nBy running `commute-tube` commute-tube will look for the configuration file (see below) and start downloading to the configured download location.\n\n## Configuration\n\nSee the example [`config.json`](config.example.json) file. The configuration is stored in `$HOME/.config/commutetube/config.json`.\n\nThe file `already_downloaded.txt` will hold all the files already downloaded. They won`t be downloaded in any following run.\n\n### `pen` section\n\nIn the pen section you may declare basic settings such as `penPath` (path to your pen), `mountAndUnmount` (if the path in `penPath` shall be mounted for every run) and `downloadFolder` (the path where files are going be downloaded inside your `penPath`).\n\n#### `common` subsection\n\nThe common subsection features settings that should be inheritet by all subsequent sources. Things like maximum download quality should be configured here.\n\n### `source` section\n\nThe source section contains all the various sources you want to download from.  Besides `description` which contains a description of the source and `shellscript` all the parameters are basic youtube-dl options. See the [youtube-dl implementation](https://github.com/rg3/youtube-dl/blob/master/youtube_dl/YoutubeDL.py) for a detailed overview over the parameters available and how to set them.\n\n#### Shell script support\n\nIn addition to the youtube-dl wrapper it is possible to set the value `shellscript` which invokes a shell script or command that you specify and takes the output one line at a time for youtube-dl as input. This is helpful if you want to parse a video source that is not yet supported by youtube-dl.\n\nFor example, by this approach you can write a shellscript onliner which extracts a list of urls that is supported by youtube-dl.\n\nThe output of the shellscript is passed to youtube-dl.\n\n#### File copy support\n\nBasic files on your host file system are also supported. Use the `path` element for specifying a file to the USB pen. In order to avoid re copying of already copied files, files are checked for their checksum.\n\n#### Changes to older versions\n\nBoth `config.json` and `already_downloaded.txt` are now stored in `$HOME/.config/commutetube/`. Their location can also be changed via command line arguments.\n\n## Best Practices\n\nHere are some best practices listed that I've used on my daily commute ever since creating commute-tube.\n\n### Running commute-tube once every night ###\n\nFor my scenario I've created a [Jenkins](https://jenkins.io/) job that will trigger commute-tube every night at 4 am. The job does also do the following tasks and will upload the log file to an internet resource for me to monitor in case of something went wrong.\n\nSo far I was using two scenarios:\n\n1. Synch via wifi\n2. Copy to USB pen\n\n### Synching a folder to my laptop every morning\n\nThis one is my preferred way since it takes away the need to deal with a USB pen every day.\n\nInstead I'm waking up my MacBook via a `launchd` job every morning and synch all the contents of the download folder via `rsynch`.\n\n### Working with a USB pen\n\nPrior to the actual downloading, Jenkins also checks if the USB pen has been plugged in using the `commute-tube --check` command. If not plugged-in, Jenkins will remind me by sending a push notification to my phone.\n\n#### Deleting contents of the USB pen\n\nEventually the disk space on your USB pen will run out. In my case I was using a Windows host system for watching the contents on my pen. I wrote a Windows batch file that moves all the contents of the Download folder of the pen to a sub folder called `delete`.\n\nThe nightly routine for starting commute-tube will then delete all the contents of the `delete` folder. This will also keep the files on the pen in case of error or when I forget to plug-in the pen.\n\nLater I was switching over to a more automated process by writing something like this in my Jenkins job:\n\n`find /mnt/commute/Download/ -type f -mtime +7 -exec rm -v {} \\;`\n\nThis will delete all files older than 7 days.\n\n#### Mount point for USB pen\n\nBest way would be to use a FAT32 formatted USB pen. Since there is a good working and hassle free implementation of FAT32 on almost any Unix machine. At first you should create a mount point with `mkdir /mnt/commuteUSB` and after that configure `/etc/fstab`.\n\nIn order to do so, extract the UUID of your USB pen and put it into the `/etc/fstab` configuration. The user flag will allow any user to mount and unmount the pen by using `mount /mnt/commuteUSB` or `umount /mnt/commuteUSB` respectively:\n\n```shell\n[matze@beatle ~]$ sudo blkid\n/dev/sdd1: LABEL=\"KINGSTON\" UUID=\"25E6-B035\" TYPE=\"vfat\" PARTUUID=\"c3072e18-01\"\n[matze@beatle ~]$ cat /etc/fstab\nUUID=25E6-B035    /mnt/commuteUSB  vfat   user,noauto,rw,umask=000              0  0\n```\n\n#### Mounting the USB pen\n\nEven though commute-tube brings it's own functionality for mounting and unmounting USB pens, I've found this behaviour rather unreliable compared to native `mount mountpoint` and `umount mountpoint` commands of the system.", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/snipem/commute-tube", "keywords": "youtube-dl wrapper commute config datahoarding", "license": "GPL 3.0", "maintainer": "", "maintainer_email": "", "name": "commute-tube", "package_url": "https://pypi.org/project/commute-tube/", "platform": "", "project_url": "https://pypi.org/project/commute-tube/", "project_urls": {"Homepage": "https://github.com/snipem/commute-tube"}, "release_url": "https://pypi.org/project/commute-tube/1.5/", "requires_dist": null, "requires_python": "", "summary": "", "version": "1.5", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p># commute-tube</p>\n<p>commute-tube is your friend on your daily commute. It will download videos of your interest to your USB pen by night so that you\u2019re able to watch the program in bus or train. It is basically a configurable wrapper for [youtube-dl](<a href=\"https://rg3.github.io/youtube-dl/\" rel=\"nofollow\">https://rg3.github.io/youtube-dl/</a>).</p>\n<p>I made this tool because I was getting a new job with a daily commute via train attached. On that train ride no cellular network nor wifi was available. Despite wifi was introduced to the trains in the mean time, commute-tube still holds up by giving me instant access to the videos I want to watch without thinking about bandwidth and spinning loading wheels.</p>\n<p>commute-tube is a tool written in Python and should be run in a headless environment such as a server with a USB pen attached. It will look for your USB pen, tries to mount it, download your configured content and unmount the pen afterwards. The only thing that should be done regularly is to plug in your pen after work and catch it before you leave the house.</p>\n<p>Alternatively, it is possible to just download to a folder and synch this folder via rsynch to your laptop or smart device.</p>\n<p>## Installation</p>\n<p>### End User</p>\n<p>Run <cite>pip install commute-tube</cite>.</p>\n<p>### Development</p>\n<p>Run <cite>pip install -e .</cite> in the checked out folder.</p>\n<p>## Running</p>\n<p>By running <cite>commute-tube</cite> commute-tube will look for the configuration file (see below) and start downloading to the configured download location.</p>\n<p>## Configuration</p>\n<p>See the example [<cite>config.json</cite>](config.example.json) file. The configuration is stored in <cite>$HOME/.config/commutetube/config.json</cite>.</p>\n<p>The file <cite>already_downloaded.txt</cite> will hold all the files already downloaded. They won`t be downloaded in any following run.</p>\n<p>### <cite>pen</cite> section</p>\n<p>In the pen section you may declare basic settings such as <cite>penPath</cite> (path to your pen), <cite>mountAndUnmount</cite> (if the path in <cite>penPath</cite> shall be mounted for every run) and <cite>downloadFolder</cite> (the path where files are going be downloaded inside your <cite>penPath</cite>).</p>\n<p>#### <cite>common</cite> subsection</p>\n<p>The common subsection features settings that should be inheritet by all subsequent sources. Things like maximum download quality should be configured here.</p>\n<p>### <cite>source</cite> section</p>\n<p>The source section contains all the various sources you want to download from.  Besides <cite>description</cite> which contains a description of the source and <cite>shellscript</cite> all the parameters are basic youtube-dl options. See the [youtube-dl implementation](<a href=\"https://github.com/rg3/youtube-dl/blob/master/youtube_dl/YoutubeDL.py\" rel=\"nofollow\">https://github.com/rg3/youtube-dl/blob/master/youtube_dl/YoutubeDL.py</a>) for a detailed overview over the parameters available and how to set them.</p>\n<p>#### Shell script support</p>\n<p>In addition to the youtube-dl wrapper it is possible to set the value <cite>shellscript</cite> which invokes a shell script or command that you specify and takes the output one line at a time for youtube-dl as input. This is helpful if you want to parse a video source that is not yet supported by youtube-dl.</p>\n<p>For example, by this approach you can write a shellscript onliner which extracts a list of urls that is supported by youtube-dl.</p>\n<p>The output of the shellscript is passed to youtube-dl.</p>\n<p>#### File copy support</p>\n<p>Basic files on your host file system are also supported. Use the <cite>path</cite> element for specifying a file to the USB pen. In order to avoid re copying of already copied files, files are checked for their checksum.</p>\n<p>#### Changes to older versions</p>\n<p>Both <cite>config.json</cite> and <cite>already_downloaded.txt</cite> are now stored in <cite>$HOME/.config/commutetube/</cite>. Their location can also be changed via command line arguments.</p>\n<p>## Best Practices</p>\n<p>Here are some best practices listed that I\u2019ve used on my daily commute ever since creating commute-tube.</p>\n<p>### Running commute-tube once every night ###</p>\n<p>For my scenario I\u2019ve created a [Jenkins](<a href=\"https://jenkins.io/\" rel=\"nofollow\">https://jenkins.io/</a>) job that will trigger commute-tube every night at 4 am. The job does also do the following tasks and will upload the log file to an internet resource for me to monitor in case of something went wrong.</p>\n<p>So far I was using two scenarios:</p>\n<ol>\n<li>Synch via wifi</li>\n<li>Copy to USB pen</li>\n</ol>\n<p>### Synching a folder to my laptop every morning</p>\n<p>This one is my preferred way since it takes away the need to deal with a USB pen every day.</p>\n<p>Instead I\u2019m waking up my MacBook via a <cite>launchd</cite> job every morning and synch all the contents of the download folder via <cite>rsynch</cite>.</p>\n<p>### Working with a USB pen</p>\n<p>Prior to the actual downloading, Jenkins also checks if the USB pen has been plugged in using the <cite>commute-tube \u2013check</cite> command. If not plugged-in, Jenkins will remind me by sending a push notification to my phone.</p>\n<p>#### Deleting contents of the USB pen</p>\n<p>Eventually the disk space on your USB pen will run out. In my case I was using a Windows host system for watching the contents on my pen. I wrote a Windows batch file that moves all the contents of the Download folder of the pen to a sub folder called <cite>delete</cite>.</p>\n<p>The nightly routine for starting commute-tube will then delete all the contents of the <cite>delete</cite> folder. This will also keep the files on the pen in case of error or when I forget to plug-in the pen.</p>\n<p>Later I was switching over to a more automated process by writing something like this in my Jenkins job:</p>\n<p><cite>find /mnt/commute/Download/ -type f -mtime +7 -exec rm -v {} ;</cite></p>\n<p>This will delete all files older than 7 days.</p>\n<p>#### Mount point for USB pen</p>\n<p>Best way would be to use a FAT32 formatted USB pen. Since there is a good working and hassle free implementation of FAT32 on almost any Unix machine. At first you should create a mount point with <cite>mkdir /mnt/commuteUSB</cite> and after that configure <cite>/etc/fstab</cite>.</p>\n<p>In order to do so, extract the UUID of your USB pen and put it into the <cite>/etc/fstab</cite> configuration. The user flag will allow any user to mount and unmount the pen by using <cite>mount /mnt/commuteUSB</cite> or <cite>umount /mnt/commuteUSB</cite> respectively:</p>\n<p><tt>`shell\n[matze@beatle ~]$ sudo blkid\n/dev/sdd1: <span class=\"pre\">LABEL=\"KINGSTON\"</span> <span class=\"pre\">UUID=\"25E6-B035\"</span> <span class=\"pre\">TYPE=\"vfat\"</span> <span class=\"pre\">PARTUUID=\"c3072e18-01\"</span>\n[matze@beatle ~]$ cat /etc/fstab\n<span class=\"pre\">UUID=25E6-B035</span>\u00a0\u00a0\u00a0 /mnt/commuteUSB\u00a0 vfat\u00a0\u00a0 user,noauto,rw,umask=000\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 0\u00a0 0\n`</tt></p>\n<p>#### Mounting the USB pen</p>\n<p>Even though commute-tube brings it\u2019s own functionality for mounting and unmounting USB pens, I\u2019ve found this behaviour rather unreliable compared to native <cite>mount mountpoint</cite> and <cite>umount mountpoint</cite> commands of the system.</p>\n\n          </div>"}, "last_serial": 3743694, "releases": {"0.11dev": [{"comment_text": "", "digests": {"md5": "d80d96824b5f1909259ce5c6aadf878f", "sha256": "33693320d68e2de15bae61d27c05966d6417812976e1a4a8f3e5a4f62a3efdb8"}, "downloads": -1, "filename": "commute-tube-0.11dev.tar.gz", "has_sig": false, "md5_digest": "d80d96824b5f1909259ce5c6aadf878f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8096, "upload_time": "2018-04-07T13:06:47", "upload_time_iso_8601": "2018-04-07T13:06:47.253066Z", "url": "https://files.pythonhosted.org/packages/ba/3b/32ed262a328ed6d1e2d51f781830facf3f94416dbe324c3d4fd11479b069/commute-tube-0.11dev.tar.gz", "yanked": false}], "0.12dev": [{"comment_text": "", "digests": {"md5": "7987c12b2c4b0cc8a44ad198d759072f", "sha256": "0761fe63d4180e39def1a439d3aa544d7087bdd043a799c5438652707ef2ed72"}, "downloads": -1, "filename": "commute-tube-0.12dev.tar.gz", "has_sig": false, "md5_digest": "7987c12b2c4b0cc8a44ad198d759072f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8385, "upload_time": "2018-04-07T13:24:59", "upload_time_iso_8601": "2018-04-07T13:24:59.849019Z", "url": "https://files.pythonhosted.org/packages/ba/8c/4fc7acf440e24793dc4c57f30679995b379e5389f5201fb8469c721f2274/commute-tube-0.12dev.tar.gz", "yanked": false}], "0.13dev": [{"comment_text": "", "digests": {"md5": "2a96bc2b80fdf94adc00c3c0c461b266", "sha256": "868cf837855acc23197423fdda69229190360796e178684bc292b7321b916307"}, "downloads": -1, "filename": "commute-tube-0.13dev.tar.gz", "has_sig": false, "md5_digest": "2a96bc2b80fdf94adc00c3c0c461b266", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8409, "upload_time": "2018-04-07T13:30:07", "upload_time_iso_8601": "2018-04-07T13:30:07.910736Z", "url": "https://files.pythonhosted.org/packages/10/7c/513a9b336d2e188824fa9ffd10adf66af07d7a93a0e91f94f1492f81c3cf/commute-tube-0.13dev.tar.gz", "yanked": false}], "0.1dev": [{"comment_text": "", "digests": {"md5": "5e10ded5d82b316efe0cf738e3d9979a", "sha256": "194bc2540b2ea47f02efe5500434250092cb8e26f671f557cdc1aeb2429d6bce"}, "downloads": -1, "filename": "commute-tube-0.1dev.tar.gz", "has_sig": false, "md5_digest": "5e10ded5d82b316efe0cf738e3d9979a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7648, "upload_time": "2018-04-07T09:34:25", "upload_time_iso_8601": "2018-04-07T09:34:25.546161Z", "url": "https://files.pythonhosted.org/packages/22/e8/05e762fb8c8cf89560b6919373b49dc415558b7743615e2440eafdd6c431/commute-tube-0.1dev.tar.gz", "yanked": false}], "1.5": [{"comment_text": "", "digests": {"md5": "171a15426f7f168c62cbdcb89d01b70f", "sha256": "b1e31c48122b2ad7f9fa2df3aa48c6e038a59cdb32962fc2f8c7177517a63865"}, "downloads": -1, "filename": "commute-tube-1.5.tar.gz", "has_sig": false, "md5_digest": "171a15426f7f168c62cbdcb89d01b70f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8426, "upload_time": "2018-04-07T13:35:26", "upload_time_iso_8601": "2018-04-07T13:35:26.699571Z", "url": "https://files.pythonhosted.org/packages/11/21/759f7c57a75b16e4d263414bd3075ba5443dc107df7770167ece0e2f4f46/commute-tube-1.5.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "171a15426f7f168c62cbdcb89d01b70f", "sha256": "b1e31c48122b2ad7f9fa2df3aa48c6e038a59cdb32962fc2f8c7177517a63865"}, "downloads": -1, "filename": "commute-tube-1.5.tar.gz", "has_sig": false, "md5_digest": "171a15426f7f168c62cbdcb89d01b70f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8426, "upload_time": "2018-04-07T13:35:26", "upload_time_iso_8601": "2018-04-07T13:35:26.699571Z", "url": "https://files.pythonhosted.org/packages/11/21/759f7c57a75b16e4d263414bd3075ba5443dc107df7770167ece0e2f4f46/commute-tube-1.5.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:44:19 2020"}