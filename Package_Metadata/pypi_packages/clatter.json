{"info": {"author": "Michael Delgado", "author_email": "", "bugtrack_url": null, "classifiers": ["Development Status :: 2 - Pre-Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6"], "description": "=======================================\r\nClatter Command Line Application Tester\r\n=======================================\r\n\r\n.. image:: https://img.shields.io/pypi/v/clatter.svg\r\n        :target: https://pypi.python.org/pypi/clatter\r\n\r\n.. image:: https://travis-ci.org/delgadom/clatter.svg?branch=master\r\n        :target: https://travis-ci.org/delgadom/clatter?branch=master\r\n\r\n.. image:: https://coveralls.io/repos/github/delgadom/clatter/badge.svg?branch=master\r\n        :target: https://coveralls.io/github/delgadom/clatter?branch=master\r\n\r\n.. image:: https://readthedocs.org/projects/clatter/badge/?version=latest\r\n        :target: https://clatter.readthedocs.io/en/latest/?badge=latest\r\n        :alt: Documentation Status\r\n\r\n.. image:: https://pyup.io/repos/github/delgadom/clatter/shield.svg\r\n     :target: https://pyup.io/repos/github/delgadom/clatter/\r\n     :alt: Updates\r\n\r\n.. image:: https://api.codacy.com/project/badge/Grade/2c2af36490c04543b925edafc0d66842\r\n    :target: https://www.codacy.com/app/delgadom/clatter?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=delgadom/clatter&amp;utm_campaign=Badge_Grade\r\n\r\n.. image:: https://img.shields.io/pypi/pyversions/clatter.svg\r\n    :target: https://pypi.python.org/pypi/clatter\r\n\r\n\r\nclatter is a doctest-style testing tool for command-line applications. It wraps other testing suites and allows them to be tested in docstrings.\r\n\r\n* Free software: MIT license\r\n* Documentation: https://clatter.readthedocs.io.\r\n\r\n\r\nFeatures\r\n--------\r\n\r\n* Bring testing best practices to your command line apps\r\n* Extensible - subclassing CommandValidator is trivial using any cli testing suite\r\n* Easily test your documentation. This README is a valid doctest!\r\n\r\n\r\nUsage\r\n-----\r\n\r\n.. code-block:: python\r\n\r\n    >>> from clatter import Runner\r\n    >>> from clatter.validators import SubprocessValidator\r\n\r\nTest command line utilities and applications by whitelisting them with app-specific testing engines:\r\n\r\n.. code-block:: python\r\n\r\n    >>> test_str = r'''\r\n    ... \r\n    ... .. code-block:: bash\r\n    ... \r\n    ...     $ echo 'Pining for the fjords'\r\n    ...     Pining for the fjords\r\n    ... '''\r\n    >>>\r\n    >>> tester = Runner()\r\n    >>> tester.call_engines['echo'] = SubprocessValidator()\r\n    >>> tester.teststring(test_str)\r\n\r\nClick applications\r\n~~~~~~~~~~~~~~~~~~\r\n\r\nIntegrate your command line app:\r\n\r\n.. code-block:: python\r\n\r\n    >>> import click\r\n    >>> @click.command()\r\n    ... @click.argument('name')\r\n    ... def hello(name):\r\n    ...     click.echo('Hello %s!' % name)\r\n\r\nThis can now be tested in docstrings:\r\n\r\n.. code-block:: python\r\n\r\n    >>> test_str = '''\r\n    ... \r\n    ... .. code-block:: bash\r\n    ... \r\n    ...     $ hello Polly\r\n    ...     Hello Polly!\r\n    ... \r\n    ...     $ hello Polly Parrot\r\n    ...     Usage: hello [OPTIONS] NAME\r\n    ...     <BLANKLINE>\r\n    ...     Error: Got unexpected extra argument (Parrot)\r\n    ... \r\n    ...     $ hello 'Polly Parrot'\r\n    ...     Hello Polly Parrot!\r\n    ... \r\n    ... '''\r\n\r\nClick applications can be tested with a ``ClickValidator`` engine:\r\n\r\n.. code-block:: python\r\n\r\n    >>> from clatter.validators import ClickValidator\r\n    >>> tester = Runner()\r\n    >>> tester.call_engines['hello'] = ClickValidator(hello)\r\n\r\n    >>> tester.teststring(test_str)\r\n\r\n\r\nMixed applications\r\n~~~~~~~~~~~~~~~~~~\r\n\r\nYour app can be combined with other command-line utilities by adding multiple engines:\r\n\r\n.. code-block:: python\r\n\r\n    >>> test_str = r'''\r\n    ... \r\n    ... .. code-block:: bash\r\n    ... \r\n    ...     $ hello Polly\r\n    ...     Hello Polly!\r\n    ... \r\n    ...     $ echo 'Pining for the fjords'\r\n    ...     Pining for the fjords\r\n    ... \r\n    ... Pipes/redirects don't work, so we can't redirect this value into a file.\r\n    ... But we can write a file with python:\r\n    ... \r\n    ... .. code-block:: bash\r\n    ... \r\n    ...     $ python -c \\\r\n    ...     >     \"with open('tmp.txt', 'w+') as f: f.write('Pushing up daisies')\"\r\n    ... \r\n    ...     $ cat tmp.txt\r\n    ...     Pushing up daisies\r\n    ...\r\n    ... '''\r\n\r\n    >>> tester.call_engines['echo'] = SubprocessValidator()\r\n    >>> tester.call_engines['python'] = SubprocessValidator()\r\n    >>> tester.call_engines['cat'] = SubprocessValidator()\r\n\r\n    >>> tester.teststring(test_str)\r\n\r\nSuppressing commands\r\n~~~~~~~~~~~~~~~~~~~~\r\n\r\nCommands can be skipped altogether with a ``SkipValidator``:\r\n\r\n.. code-block:: python\r\n\r\n    >>> test_str = '''\r\n    ... .. code-block:: bash\r\n    ... \r\n    ...     $ aws storage buckets list\r\n    ... \r\n    ... '''\r\n\r\n    >>> from clatter.validators import SkipValidator\r\n    >>> tester.call_engines['aws'] = SkipValidator()\r\n\r\n    >>> tester.teststring(test_str)\r\n\r\n\r\nIllegal commands\r\n~~~~~~~~~~~~~~~~\r\n\r\nErrors are raised when using an application you haven't whitelisted:\r\n\r\n.. code-block:: python\r\n\r\n    >>> test_str = '''\r\n    ...\r\n    ... The following block of code should cause an error:\r\n    ...\r\n    ... .. code-block:: bash\r\n    ...\r\n    ...     $ rm tmp.txt\r\n    ...\r\n    ... '''\r\n\r\n    >>> tester.teststring(test_str) # doctest +ELLIPSIS\r\n    Traceback (most recent call last):\r\n    ...\r\n    ValueError: Command \"rm\" not allowed. Add command caller to call_engines to whitelist.\r\n\r\nUnrecognized commands will not raise an error if +SKIP is specified\r\n\r\n.. doctest's skip here will be interpreted by doctest, not clatter. So we mock the code here.\r\n\r\n    >>> test_str = r'''\r\n    ...\r\n    ... .. code-block:: bash\r\n    ...\r\n    ...     $ nmake all # doctest\r\n    ...     $ echo 'I made it!'\r\n    ...     I made it!\r\n    ...\r\n    ... '''\r\n    >>> test_str = test_str.replace('ctest', 'ctest: +SKIP')\r\n\r\n.. code-block:: python\r\n\r\n    >>> test_str = r'''\r\n    ...\r\n    ... .. code-block:: bash\r\n    ...\r\n    ...     $ nmake all # doctest: +SKIP\r\n    ...     $ echo 'I made it!'\r\n    ...     I made it!\r\n    ...\r\n    ... '''\r\n    >>> tester.teststring(test_str)\r\n\r\nError handling\r\n~~~~~~~~~~~~~~\r\n\r\nLines failing to match the command's output will raise an error\r\n\r\n.. code-block:: python\r\n\r\n    >>> test_str = r'''\r\n    ... .. code-block:: bash\r\n    ... \r\n    ...     $ echo \"There, it moved!\"\r\n    ...     \"No it didn't!\"\r\n    ... \r\n    ... '''\r\n\r\n    >>> tester = Runner()\r\n    >>> tester.call_engines['echo'] = SubprocessValidator()\r\n\r\n    >>> tester.teststring(test_str) # doctest: +ELLIPSIS +NORMALIZE_WHITESPACE\r\n    Traceback (most recent call last):\r\n    ...\r\n    ValueError: Clatter test failed. There, it moved!\r\n     != \"No it didn't!\"\r\n    + There, it moved!\r\n    - \"No it didn't!\"\r\n\r\nKnown issues\r\n------------\r\n\r\nWe have issues on our `issues <https://github.com/delgadom/clatter/issues>`_ page. But we want to be very up-front about these.\r\n\r\nSecurity\r\n~~~~~~~~\r\n\r\nSimilar to ``doctest``, executing arbitrary commands from within your tests is dangerous, and we make no attempt to protect you. We won't run commands you don't whitelist, but we cant't prevent against malicious cases. Don't run anything you don't understand, and use at your own risk.\r\n\r\nSyntactic completeness\r\n~~~~~~~~~~~~~~~~~~~~~~\r\n\r\nClatter is not a syntactically complete bash emulator and has no intention of being so.\r\n\r\nAll arguments to commands are passed as arguments to the first command. Therefore, loops, pipes, redirects, and other control-flow and IO commands will not work as expected.\r\n\r\n.. code-block:: python\r\n\r\n    >>> test_str = '''\r\n    ...    $ echo hello > test.txt\r\n    ...    $ cat test.txt    \r\n    ...    hello\r\n    ...\r\n    ... '''\r\n    >>> tester.teststring(test_str) # doctest: +ELLIPSIS +NORMALIZE_WHITESPACE\r\n    Traceback (most recent call last):\r\n    ...\r\n    ValueError: Clatter test failed. hello > test.txt\r\n     != \r\n    + hello > test.txt\r\n    - \r\n\r\n\r\n\r\nInstallation\r\n------------\r\n\r\n``pip install clatter``\r\n\r\n\r\nRequirements\r\n------------\r\n\r\n* pytest\r\n\r\n\r\nTodo\r\n----\r\n\r\nSee `issues <https://github.com/delgadom/clatter/issues>`_ to see and add to our todos.", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/delgadom/clatter", "keywords": "clatter", "license": "MIT license", "maintainer": "", "maintainer_email": "", "name": "clatter", "package_url": "https://pypi.org/project/clatter/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/clatter/", "project_urls": {"Homepage": "https://github.com/delgadom/clatter"}, "release_url": "https://pypi.org/project/clatter/0.1.1/", "requires_dist": ["click (>=6.0)", "Sphinx (>=1.4.1); extra == 'test'", "click (>=6.0); extra == 'test'", "coverage (>=4.0); extra == 'test'", "flake8 (>=2.0); extra == 'test'", "jinja2 (>=2.8); extra == 'test'", "pip (>=8.0); extra == 'test'", "pytest (>=3.0); extra == 'test'", "pytest-cov (>=2.0); extra == 'test'", "pytest-runner (>=2.5); extra == 'test'", "sphinx-rtd-theme (>=0.1.0); extra == 'test'", "tox (>=2.3.0); extra == 'test'", "wheel (>=0.27); extra == 'test'"], "requires_python": "", "summary": "A Doctest-stype Command Line Application Tester", "version": "0.1.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://pypi.python.org/pypi/clatter\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/v/clatter.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2d36d4c01ab1278226f61c887894f69784099f43/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f636c61747465722e737667\"></a>\n<a href=\"https://travis-ci.org/delgadom/clatter?branch=master\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/delgadom/clatter.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1ccb51f5a84cb485aa568d039b69b114027965a8/68747470733a2f2f7472617669732d63692e6f72672f64656c6761646f6d2f636c61747465722e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://coveralls.io/github/delgadom/clatter?branch=master\" rel=\"nofollow\"><img alt=\"https://coveralls.io/repos/github/delgadom/clatter/badge.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0a4a896d53a3186d17fc4da772cdbf27870efb93/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f64656c6761646f6d2f636c61747465722f62616467652e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://clatter.readthedocs.io/en/latest/?badge=latest\" rel=\"nofollow\"><img alt=\"Documentation Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/14f19cdbf0c05ecb0194dc1ecc977294c2678f66/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f636c61747465722f62616467652f3f76657273696f6e3d6c6174657374\"></a>\n<a href=\"https://pyup.io/repos/github/delgadom/clatter/\" rel=\"nofollow\"><img alt=\"Updates\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4563b4c5cdd1135b63a2f0b33ab0add00bf7fe2a/68747470733a2f2f707975702e696f2f7265706f732f6769746875622f64656c6761646f6d2f636c61747465722f736869656c642e737667\"></a>\n<a href=\"https://www.codacy.com/app/delgadom/clatter?utm_source=github.com&amp;amp;utm_medium=referral&amp;amp;utm_content=delgadom/clatter&amp;amp;utm_campaign=Badge_Grade\" rel=\"nofollow\"><img alt=\"https://api.codacy.com/project/badge/Grade/2c2af36490c04543b925edafc0d66842\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/960beb6037a814ad5921de1fa004468324c292f2/68747470733a2f2f6170692e636f646163792e636f6d2f70726f6a6563742f62616467652f47726164652f3263326166333634393063303435343362393235656461666330643636383432\"></a>\n<a href=\"https://pypi.python.org/pypi/clatter\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/pyversions/clatter.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f1a48cb059345903e4bd23c208067b5a330e9be0/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f636c61747465722e737667\"></a>\n<p>clatter is a doctest-style testing tool for command-line applications. It wraps other testing suites and allows them to be tested in docstrings.</p>\n<ul>\n<li>Free software: MIT license</li>\n<li>Documentation: <a href=\"https://clatter.readthedocs.io\" rel=\"nofollow\">https://clatter.readthedocs.io</a>.</li>\n</ul>\n<div id=\"features\">\n<h2>Features</h2>\n<ul>\n<li>Bring testing best practices to your command line apps</li>\n<li>Extensible - subclassing CommandValidator is trivial using any cli testing suite</li>\n<li>Easily test your documentation. This README is a valid doctest!</li>\n</ul>\n</div>\n<div id=\"usage\">\n<h2>Usage</h2>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">clatter</span> <span class=\"kn\">import</span> <span class=\"n\">Runner</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">clatter.validators</span> <span class=\"kn\">import</span> <span class=\"n\">SubprocessValidator</span>\n</pre>\n<p>Test command line utilities and applications by whitelisting them with app-specific testing engines:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">test_str</span> <span class=\"o\">=</span> <span class=\"sa\">r</span><span class=\"s1\">'''\n...\n... .. code-block:: bash\n...\n...     $ echo 'Pining for the fjords'\n...     Pining for the fjords\n... '''</span>\n<span class=\"o\">&gt;&gt;&gt;</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span> <span class=\"o\">=</span> <span class=\"n\">Runner</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">call_engines</span><span class=\"p\">[</span><span class=\"s1\">'echo'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">SubprocessValidator</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">teststring</span><span class=\"p\">(</span><span class=\"n\">test_str</span><span class=\"p\">)</span>\n</pre>\n<div id=\"click-applications\">\n<h3>Click applications</h3>\n<p>Integrate your command line app:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">import</span> <span class=\"nn\">click</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@click</span><span class=\"o\">.</span><span class=\"n\">command</span><span class=\"p\">()</span>\n<span class=\"o\">...</span> <span class=\"nd\">@click</span><span class=\"o\">.</span><span class=\"n\">argument</span><span class=\"p\">(</span><span class=\"s1\">'name'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span> <span class=\"k\">def</span> <span class=\"nf\">hello</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"n\">click</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"s1\">'Hello </span><span class=\"si\">%s</span><span class=\"s1\">!'</span> <span class=\"o\">%</span> <span class=\"n\">name</span><span class=\"p\">)</span>\n</pre>\n<p>This can now be tested in docstrings:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">test_str</span> <span class=\"o\">=</span> <span class=\"s1\">'''\n...\n... .. code-block:: bash\n...\n...     $ hello Polly\n...     Hello Polly!\n...\n...     $ hello Polly Parrot\n...     Usage: hello [OPTIONS] NAME\n...     &lt;BLANKLINE&gt;\n...     Error: Got unexpected extra argument (Parrot)\n...\n...     $ hello 'Polly Parrot'\n...     Hello Polly Parrot!\n...\n... '''</span>\n</pre>\n<p>Click applications can be tested with a <tt>ClickValidator</tt> engine:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">clatter.validators</span> <span class=\"kn\">import</span> <span class=\"n\">ClickValidator</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span> <span class=\"o\">=</span> <span class=\"n\">Runner</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">call_engines</span><span class=\"p\">[</span><span class=\"s1\">'hello'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">ClickValidator</span><span class=\"p\">(</span><span class=\"n\">hello</span><span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">teststring</span><span class=\"p\">(</span><span class=\"n\">test_str</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"mixed-applications\">\n<h3>Mixed applications</h3>\n<p>Your app can be combined with other command-line utilities by adding multiple engines:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">test_str</span> <span class=\"o\">=</span> <span class=\"sa\">r</span><span class=\"s1\">'''\n...\n... .. code-block:: bash\n...\n...     $ hello Polly\n...     Hello Polly!\n...\n...     $ echo 'Pining for the fjords'\n...     Pining for the fjords\n...\n... Pipes/redirects don't work, so we can't redirect this value into a file.\n... But we can write a file with python:\n...\n... .. code-block:: bash\n...\n...     $ python -c \\\n...     &gt;     \"with open('tmp.txt', 'w+') as f: f.write('Pushing up daisies')\"\n...\n...     $ cat tmp.txt\n...     Pushing up daisies\n...\n... '''</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">call_engines</span><span class=\"p\">[</span><span class=\"s1\">'echo'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">SubprocessValidator</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">call_engines</span><span class=\"p\">[</span><span class=\"s1\">'python'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">SubprocessValidator</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">call_engines</span><span class=\"p\">[</span><span class=\"s1\">'cat'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">SubprocessValidator</span><span class=\"p\">()</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">teststring</span><span class=\"p\">(</span><span class=\"n\">test_str</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"suppressing-commands\">\n<h3>Suppressing commands</h3>\n<p>Commands can be skipped altogether with a <tt>SkipValidator</tt>:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">test_str</span> <span class=\"o\">=</span> <span class=\"s1\">'''\n... .. code-block:: bash\n...\n...     $ aws storage buckets list\n...\n... '''</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">clatter.validators</span> <span class=\"kn\">import</span> <span class=\"n\">SkipValidator</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">call_engines</span><span class=\"p\">[</span><span class=\"s1\">'aws'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">SkipValidator</span><span class=\"p\">()</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">teststring</span><span class=\"p\">(</span><span class=\"n\">test_str</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"illegal-commands\">\n<h3>Illegal commands</h3>\n<p>Errors are raised when using an application you haven\u2019t whitelisted:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">test_str</span> <span class=\"o\">=</span> <span class=\"s1\">'''\n...\n... The following block of code should cause an error:\n...\n... .. code-block:: bash\n...\n...     $ rm tmp.txt\n...\n... '''</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">teststring</span><span class=\"p\">(</span><span class=\"n\">test_str</span><span class=\"p\">)</span> <span class=\"c1\"># doctest +ELLIPSIS</span>\n<span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>\n<span class=\"ne\">ValueError</span><span class=\"p\">:</span> <span class=\"n\">Command</span> <span class=\"s2\">\"rm\"</span> <span class=\"ow\">not</span> <span class=\"n\">allowed</span><span class=\"o\">.</span> <span class=\"n\">Add</span> <span class=\"n\">command</span> <span class=\"n\">caller</span> <span class=\"n\">to</span> <span class=\"n\">call_engines</span> <span class=\"n\">to</span> <span class=\"n\">whitelist</span><span class=\"o\">.</span>\n</pre>\n<p>Unrecognized commands will not raise an error if +SKIP is specified</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">test_str</span> <span class=\"o\">=</span> <span class=\"sa\">r</span><span class=\"s1\">'''\n...\n... .. code-block:: bash\n...\n...     $ nmake all # doctest: +SKIP\n...     $ echo 'I made it!'\n...     I made it!\n...\n... '''</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">teststring</span><span class=\"p\">(</span><span class=\"n\">test_str</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"error-handling\">\n<h3>Error handling</h3>\n<p>Lines failing to match the command\u2019s output will raise an error</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">test_str</span> <span class=\"o\">=</span> <span class=\"sa\">r</span><span class=\"s1\">'''\n... .. code-block:: bash\n...\n...     $ echo \"There, it moved!\"\n...     \"No it didn't!\"\n...\n... '''</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span> <span class=\"o\">=</span> <span class=\"n\">Runner</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">call_engines</span><span class=\"p\">[</span><span class=\"s1\">'echo'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">SubprocessValidator</span><span class=\"p\">()</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">teststring</span><span class=\"p\">(</span><span class=\"n\">test_str</span><span class=\"p\">)</span> <span class=\"c1\"># doctest: +ELLIPSIS +NORMALIZE_WHITESPACE</span>\n<span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>\n<span class=\"ne\">ValueError</span><span class=\"p\">:</span> <span class=\"n\">Clatter</span> <span class=\"n\">test</span> <span class=\"n\">failed</span><span class=\"o\">.</span> <span class=\"n\">There</span><span class=\"p\">,</span> <span class=\"n\">it</span> <span class=\"n\">moved</span><span class=\"err\">!</span>\n <span class=\"o\">!=</span> <span class=\"s2\">\"No it didn't!\"</span>\n<span class=\"o\">+</span> <span class=\"n\">There</span><span class=\"p\">,</span> <span class=\"n\">it</span> <span class=\"n\">moved</span><span class=\"err\">!</span>\n<span class=\"o\">-</span> <span class=\"s2\">\"No it didn't!\"</span>\n</pre>\n</div>\n</div>\n<div id=\"known-issues\">\n<h2>Known issues</h2>\n<p>We have issues on our <a href=\"https://github.com/delgadom/clatter/issues\" rel=\"nofollow\">issues</a> page. But we want to be very up-front about these.</p>\n<div id=\"security\">\n<h3>Security</h3>\n<p>Similar to <tt>doctest</tt>, executing arbitrary commands from within your tests is dangerous, and we make no attempt to protect you. We won\u2019t run commands you don\u2019t whitelist, but we cant\u2019t prevent against malicious cases. Don\u2019t run anything you don\u2019t understand, and use at your own risk.</p>\n</div>\n<div id=\"syntactic-completeness\">\n<h3>Syntactic completeness</h3>\n<p>Clatter is not a syntactically complete bash emulator and has no intention of being so.</p>\n<p>All arguments to commands are passed as arguments to the first command. Therefore, loops, pipes, redirects, and other control-flow and IO commands will not work as expected.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">test_str</span> <span class=\"o\">=</span> <span class=\"s1\">'''\n...    $ echo hello &gt; test.txt\n...    $ cat test.txt\n...    hello\n...\n... '''</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">tester</span><span class=\"o\">.</span><span class=\"n\">teststring</span><span class=\"p\">(</span><span class=\"n\">test_str</span><span class=\"p\">)</span> <span class=\"c1\"># doctest: +ELLIPSIS +NORMALIZE_WHITESPACE</span>\n<span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>\n<span class=\"ne\">ValueError</span><span class=\"p\">:</span> <span class=\"n\">Clatter</span> <span class=\"n\">test</span> <span class=\"n\">failed</span><span class=\"o\">.</span> <span class=\"n\">hello</span> <span class=\"o\">&gt;</span> <span class=\"n\">test</span><span class=\"o\">.</span><span class=\"n\">txt</span>\n <span class=\"o\">!=</span>\n<span class=\"o\">+</span> <span class=\"n\">hello</span> <span class=\"o\">&gt;</span> <span class=\"n\">test</span><span class=\"o\">.</span><span class=\"n\">txt</span>\n<span class=\"o\">-</span>\n</pre>\n</div>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p><tt>pip install clatter</tt></p>\n</div>\n<div id=\"requirements\">\n<h2>Requirements</h2>\n<ul>\n<li>pytest</li>\n</ul>\n</div>\n<div id=\"todo\">\n<h2>Todo</h2>\n<p>See <a href=\"https://github.com/delgadom/clatter/issues\" rel=\"nofollow\">issues</a> to see and add to our todos.</p>\n</div>\n\n          </div>"}, "last_serial": 2639933, "releases": {"0.0.2": [{"comment_text": "", "digests": {"md5": "a9889989a6dd4f9100f36198df00544d", "sha256": "64999f86772a2167e44608adf1c263aed43d161eab215bb7b349c75ca42e242a"}, "downloads": -1, "filename": "clatter-0.0.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "a9889989a6dd4f9100f36198df00544d", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 7738, "upload_time": "2017-02-11T06:46:28", "upload_time_iso_8601": "2017-02-11T06:46:28.959053Z", "url": "https://files.pythonhosted.org/packages/6f/7c/ecd062a4108ebd236cd8feb7c3c8d72ed75b22a072987a274770ee031d34/clatter-0.0.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "49b68939875e5b4d60999088ab815a62", "sha256": "e7f016f724ae4d50a9a2bf98805accc06e4ae572eb4e9f4b8b8cc8045cf201c1"}, "downloads": -1, "filename": "clatter-0.0.2.tar.gz", "has_sig": false, "md5_digest": "49b68939875e5b4d60999088ab815a62", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6637, "upload_time": "2017-02-11T06:46:31", "upload_time_iso_8601": "2017-02-11T06:46:31.141987Z", "url": "https://files.pythonhosted.org/packages/a7/d3/0eb358c75352183d0fa91bec6af251c7392ce6a32c0bd718314e7fd711dd/clatter-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "9006bd325c8035d6c8c30593832ff11b", "sha256": "492d933ec9aa6f77fff1e65139f86cf7e1063eee4c034978f0e36dea001f700b"}, "downloads": -1, "filename": "clatter-0.0.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "9006bd325c8035d6c8c30593832ff11b", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 8041, "upload_time": "2017-02-11T11:29:23", "upload_time_iso_8601": "2017-02-11T11:29:23.941178Z", "url": "https://files.pythonhosted.org/packages/40/9d/b23d5b42185f8973e2ca4373324f8b88669530c909429b05a0bdde76705e/clatter-0.0.3-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1ad17b00cec7f2c3c8091ba8b61760db", "sha256": "0896cb4c561ef28ff1ce3e55d217be89847bb197fdc9122cf10b2a23a4aadd67"}, "downloads": -1, "filename": "clatter-0.0.3.tar.gz", "has_sig": false, "md5_digest": "1ad17b00cec7f2c3c8091ba8b61760db", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6802, "upload_time": "2017-02-11T11:29:26", "upload_time_iso_8601": "2017-02-11T11:29:26.149085Z", "url": "https://files.pythonhosted.org/packages/b4/80/2041d48bb62648b8e052462a55522297e3f0de10e391e9add9287b6883a6/clatter-0.0.3.tar.gz", "yanked": false}], "0.0.4": [{"comment_text": "", "digests": {"md5": "ebb80214a9fe2add1fcddf6ba722cad2", "sha256": "28518330cc368254b654d227d2d7a4e68b299809f9aa373df5a3178ed73512c6"}, "downloads": -1, "filename": "clatter-0.0.4-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "ebb80214a9fe2add1fcddf6ba722cad2", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 9023, "upload_time": "2017-02-13T07:44:32", "upload_time_iso_8601": "2017-02-13T07:44:32.975391Z", "url": "https://files.pythonhosted.org/packages/a4/b5/f6cb9d1c7302caa724678d6be8435b087b2cb823b129447d1cb7a535aea1/clatter-0.0.4-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5b1a06225fd5fb02c84e913fe04d1a6a", "sha256": "f948086eb84e32cf331d9075dab44cc9c5f68c309188aa4a20ff6bf67854cea6"}, "downloads": -1, "filename": "clatter-0.0.4.tar.gz", "has_sig": false, "md5_digest": "5b1a06225fd5fb02c84e913fe04d1a6a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 22004, "upload_time": "2017-02-13T07:44:35", "upload_time_iso_8601": "2017-02-13T07:44:35.223979Z", "url": "https://files.pythonhosted.org/packages/eb/4d/0cf1bc4747271937d79976841aee3073aa39130e2d5cc9aaeb55684812e4/clatter-0.0.4.tar.gz", "yanked": false}], "0.1.0": [{"comment_text": "", "digests": {"md5": "e4fda352f253717f59e07fc02d6cc9ad", "sha256": "5e78312750e6430a5467f3b806a5cf23d2d24db9e2e5032ad3889c59ae41c070"}, "downloads": -1, "filename": "clatter-0.1.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "e4fda352f253717f59e07fc02d6cc9ad", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 9131, "upload_time": "2017-02-13T21:48:34", "upload_time_iso_8601": "2017-02-13T21:48:34.510390Z", "url": "https://files.pythonhosted.org/packages/00/6a/c242a9a606930ef782c7aca1bc9343a5aa61cf9d0a969463d51df01f8af3/clatter-0.1.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c6c533367d4d6527e4b234f9c07c8193", "sha256": "655bbf6369d7390fdfd3bbb2f5381855eab745a979d3fd6ed22241c427fc15ee"}, "downloads": -1, "filename": "clatter-0.1.0.tar.gz", "has_sig": false, "md5_digest": "c6c533367d4d6527e4b234f9c07c8193", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17163, "upload_time": "2017-02-13T21:48:36", "upload_time_iso_8601": "2017-02-13T21:48:36.672628Z", "url": "https://files.pythonhosted.org/packages/6d/a5/7fda04790dd15ee44fdb0d06db66f646bd273e9ed6ffcf05bf7bc025edff/clatter-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "dd797d7ae53d1cfd44966604e974faa9", "sha256": "e6dcda476297d505f3f62254fbdda2e46aed3be7f56979b258faa2a8fb96209a"}, "downloads": -1, "filename": "clatter-0.1.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "dd797d7ae53d1cfd44966604e974faa9", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 9330, "upload_time": "2017-02-14T02:42:38", "upload_time_iso_8601": "2017-02-14T02:42:38.490931Z", "url": "https://files.pythonhosted.org/packages/25/a1/e57a389060899a0e2e253f290b804211a8f6e1db1dcd8492938d69316ad3/clatter-0.1.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9eed8749c7220c5188a1427467245bf1", "sha256": "c43f4f9f297841b9159e99ebcc855960f910b953a79e8dd9afa8cbc8a7b071cf"}, "downloads": -1, "filename": "clatter-0.1.1.tar.gz", "has_sig": false, "md5_digest": "9eed8749c7220c5188a1427467245bf1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17422, "upload_time": "2017-02-14T02:42:40", "upload_time_iso_8601": "2017-02-14T02:42:40.808895Z", "url": "https://files.pythonhosted.org/packages/f5/bf/03ca35fe3bd7d47dfacde6618555c3e4672323bee6c16b157fc263eb2601/clatter-0.1.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "dd797d7ae53d1cfd44966604e974faa9", "sha256": "e6dcda476297d505f3f62254fbdda2e46aed3be7f56979b258faa2a8fb96209a"}, "downloads": -1, "filename": "clatter-0.1.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "dd797d7ae53d1cfd44966604e974faa9", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 9330, "upload_time": "2017-02-14T02:42:38", "upload_time_iso_8601": "2017-02-14T02:42:38.490931Z", "url": "https://files.pythonhosted.org/packages/25/a1/e57a389060899a0e2e253f290b804211a8f6e1db1dcd8492938d69316ad3/clatter-0.1.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9eed8749c7220c5188a1427467245bf1", "sha256": "c43f4f9f297841b9159e99ebcc855960f910b953a79e8dd9afa8cbc8a7b071cf"}, "downloads": -1, "filename": "clatter-0.1.1.tar.gz", "has_sig": false, "md5_digest": "9eed8749c7220c5188a1427467245bf1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17422, "upload_time": "2017-02-14T02:42:40", "upload_time_iso_8601": "2017-02-14T02:42:40.808895Z", "url": "https://files.pythonhosted.org/packages/f5/bf/03ca35fe3bd7d47dfacde6618555c3e4672323bee6c16b157fc263eb2601/clatter-0.1.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:19:07 2020"}