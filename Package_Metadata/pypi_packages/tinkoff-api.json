{"info": {"author": "Alexander Tikhonov", "author_email": "random.gauss@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: Apache Software License", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: 3 :: Only", "Topic :: Office/Business :: Financial", "Topic :: Office/Business :: Financial :: Investment"], "description": "# tinkoff-api\n\n> Python Tinkoff API client for asyncio and humans.\n\n[![build](https://github.com/Fatal1ty/tinkoff-api/workflows/build/badge.svg)](https://github.com/Fatal1ty/tinkoff-api/actions?query=workflow%3Abuild)\n[![Latest Version](https://img.shields.io/pypi/v/tinkoff-api.svg)](https://pypi.python.org/pypi/tinkoff-api)\n[![Python Version](https://img.shields.io/pypi/pyversions/tinkoff-api.svg)](https://pypi.python.org/pypi/tinkoff-api)\n[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)\n\n\nTable of contens\n--------------------------------------------------------------------------------\n* [Covered APIs](#covered-apis)\n* [Features](#features)\n* [Installation](#installation)\n* [Usage examples](#usage-examples)\n    * [REST API client](#rest-api-client)\n    * [Streaming client](#streaming-client)\n    * [Dynamic subscriptions in runtime](#dynamic-subscriptions-in-runtime)\n    * [Complete simple bot](#complete-simple-bot)\n* [TODO](#todo)\n\n\nCovered APIs\n--------------------------------------------------------------------------------\n* Tinkoff Investments ([official docs](https://tinkoffcreditsystems.github.io/invest-openapi/))\n\n\nFeatures\n--------------------------------------------------------------------------------\n* Clients for both [REST](https://tinkoffcreditsystems.github.io/invest-openapi/rest/) and [Streaming](https://tinkoffcreditsystems.github.io/invest-openapi/marketdata/) protocols in Tinkoff Investments\n* Presence of data classes for all interaction with API\n* Automatic reconnection and keep-alive connections\n* Internal exclusive rate limiter for every resource in REST protocol\n* Friendly exceptions for API errors\n\n\nInstallation\n--------------------------------------------------------------------------------\n\nUse pip to install:\n```shell\n$ pip install tinkoff-api\n```\n\nUsage examples\n--------------------------------------------------------------------------------\n\n#### REST API client:\n```python\nimport asyncio\nfrom datetime import datetime\nfrom tinkoff.investments import (\n    TinkoffInvestmentsRESTClient, Environment,CandleResolution\n)\nfrom tinkoff.investments.client.exceptions import TinkoffInvestmentsError\n\nasync def show_apple_year_candles():\n    try:\n        async with TinkoffInvestmentsRESTClient(\n                token='TOKEN',\n                environment=Environment.SANDBOX) as client:\n\n            candles = await client.market.candles.get(\n                figi='BBG000B9XRY4',\n                dt_from=datetime(2019, 1, 1),\n                dt_to=datetime(2019, 12, 31),\n                interval=CandleResolution.DAY\n            )\n            for candle in candles:\n                print(f'{candle.time}: {candle.h}')\n    except TinkoffInvestmentsError as e:\n        print(e)\n\nasync def jackpot():\n    try:\n        async with TinkoffInvestmentsRESTClient(\n                token='TOKEN',\n                environment=Environment.SANDBOX) as client:\n\n            instruments = await client.market.instruments.search('AAPL')\n            apple = instruments[0]\n\n            account = await client.sandbox.accounts.register()\n            await client.sandbox.accounts.positions.set_balance(\n                broker_account_id=account.brokerAccountId,\n                figi=apple.figi,\n                balance=100,\n            )\n\n            print('We created the following portfolio:')\n            positions = await client.portfolio.get_positions()\n            for position in positions:\n                print(f'{position.name}: {position.lots} lots')\n    except TinkoffInvestmentsError as e:\n        print(e)\n\nasyncio.run(jackpot())\n```\n\n#### Streaming Client:\n```python\nimport asyncio\nfrom datetime import datetime\nfrom tinkoff.investments import (\n    TinkoffInvestmentsStreamingClient, CandleEvent, CandleResolution\n)\n\nclient = TinkoffInvestmentsStreamingClient(token='TOKEN')\n\n@client.events.candles('BBG009S39JX6', CandleResolution.MIN_1)\n@client.events.candles('BBG000B9XRY4', CandleResolution.MIN_1)\nasync def on_candle(candle: CandleEvent, server_time: datetime):\n    print(candle, server_time)\n\nasyncio.run(client.run())\n```\n\n#### Dynamic subscriptions in runtime:\n```python\nimport asyncio\nfrom datetime import datetime\nfrom tinkoff.investments import (\n    TinkoffInvestmentsStreamingClient, CandleEvent, CandleResolution\n)\n\nclient = TinkoffInvestmentsStreamingClient(token='TOKEN')\n\n@client.events.candles('BBG000B9XRY4', CandleResolution.HOUR)\nasync def on_candle(candle: CandleEvent, server_time: datetime):\n    if candle.h > 1000:\n        await client.events.candles.subscribe(\n            callback=on_candle,\n            figi=candle.figi,\n            interval=CandleResolution.MIN_1\n        )\n    elif candle.h < 1000:\n        await client.events.candles.unsubscribe(\n            candle.figi, CandleResolution.MIN_1\n        )\n\nasyncio.run(client.run())\n```\n\n#### Complete simple bot:\n```python\nimport asyncio\nfrom datetime import datetime\nfrom tinkoff.investments import (\n    TinkoffInvestmentsStreamingClient, TinkoffInvestmentsRESTClient,\n    CandleEvent, CandleResolution, OperationType\n)\n\nstreaming = TinkoffInvestmentsStreamingClient('TOKEN')\nrest = TinkoffInvestmentsRESTClient('TOKEN')\n\n@streaming.events.candles('BBG000B9XRY4', CandleResolution.MIN_1)\nasync def buy_apple(candle: CandleEvent, server_time: datetime):\n    if candle.c > 350:\n        await rest.orders.create_market_order(\n            figi='BBG000B9XRY4',\n            lots=1,\n            operation=OperationType.BUY,\n            broker_account_id=123,\n        )\n\nasyncio.run(streaming.run())\n\n```\n\nTODO\n--------------------------------------------------------------------------------\n\n* allow to provide str constants along with specific enum objects\n* add ability to unsubscribe by pattern\n* rename some fields\n* make some fields in snake case\n* generate documentation", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/Fatal1ty/tinkoff-api", "keywords": "", "license": "Apache License, Version 2.0", "maintainer": "", "maintainer_email": "", "name": "tinkoff-api", "package_url": "https://pypi.org/project/tinkoff-api/", "platform": "all", "project_url": "https://pypi.org/project/tinkoff-api/", "project_urls": {"Homepage": "https://github.com/Fatal1ty/tinkoff-api"}, "release_url": "https://pypi.org/project/tinkoff-api/1.3.2/", "requires_dist": null, "requires_python": ">=3.6", "summary": "Python Tinkoff API client for asyncio and humans", "version": "1.3.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>tinkoff-api</h1>\n<blockquote>\n<p>Python Tinkoff API client for asyncio and humans.</p>\n</blockquote>\n<p><a href=\"https://github.com/Fatal1ty/tinkoff-api/actions?query=workflow%3Abuild\" rel=\"nofollow\"><img alt=\"build\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/dd3e0518e0d9e3422d2ceafa94bcb3a5201cab8b/68747470733a2f2f6769746875622e636f6d2f466174616c3174792f74696e6b6f66662d6170692f776f726b666c6f77732f6275696c642f62616467652e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/tinkoff-api\" rel=\"nofollow\"><img alt=\"Latest Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/dbf709b4f5c2d1e26dd4aff86114a56fed9ddb71/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f74696e6b6f66662d6170692e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/tinkoff-api\" rel=\"nofollow\"><img alt=\"Python Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/027fe36a817ffc636e7c9e449590039a93b869cf/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f74696e6b6f66662d6170692e737667\"></a>\n<a href=\"https://opensource.org/licenses/Apache-2.0\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b97ca76cf5d8fd16c7bc4731270e0bbe53df7aa1/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d417061636865253230322e302d626c75652e737667\"></a></p>\n<h2>Table of contens</h2>\n<ul>\n<li><a href=\"#covered-apis\" rel=\"nofollow\">Covered APIs</a></li>\n<li><a href=\"#features\" rel=\"nofollow\">Features</a></li>\n<li><a href=\"#installation\" rel=\"nofollow\">Installation</a></li>\n<li><a href=\"#usage-examples\" rel=\"nofollow\">Usage examples</a>\n<ul>\n<li><a href=\"#rest-api-client\" rel=\"nofollow\">REST API client</a></li>\n<li><a href=\"#streaming-client\" rel=\"nofollow\">Streaming client</a></li>\n<li><a href=\"#dynamic-subscriptions-in-runtime\" rel=\"nofollow\">Dynamic subscriptions in runtime</a></li>\n<li><a href=\"#complete-simple-bot\" rel=\"nofollow\">Complete simple bot</a></li>\n</ul>\n</li>\n<li><a href=\"#todo\" rel=\"nofollow\">TODO</a></li>\n</ul>\n<h2>Covered APIs</h2>\n<ul>\n<li>Tinkoff Investments (<a href=\"https://tinkoffcreditsystems.github.io/invest-openapi/\" rel=\"nofollow\">official docs</a>)</li>\n</ul>\n<h2>Features</h2>\n<ul>\n<li>Clients for both <a href=\"https://tinkoffcreditsystems.github.io/invest-openapi/rest/\" rel=\"nofollow\">REST</a> and <a href=\"https://tinkoffcreditsystems.github.io/invest-openapi/marketdata/\" rel=\"nofollow\">Streaming</a> protocols in Tinkoff Investments</li>\n<li>Presence of data classes for all interaction with API</li>\n<li>Automatic reconnection and keep-alive connections</li>\n<li>Internal exclusive rate limiter for every resource in REST protocol</li>\n<li>Friendly exceptions for API errors</li>\n</ul>\n<h2>Installation</h2>\n<p>Use pip to install:</p>\n<pre>$ pip install tinkoff-api\n</pre>\n<h2>Usage examples</h2>\n<h4>REST API client:</h4>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\n<span class=\"kn\">from</span> <span class=\"nn\">tinkoff.investments</span> <span class=\"kn\">import</span> <span class=\"p\">(</span>\n    <span class=\"n\">TinkoffInvestmentsRESTClient</span><span class=\"p\">,</span> <span class=\"n\">Environment</span><span class=\"p\">,</span><span class=\"n\">CandleResolution</span>\n<span class=\"p\">)</span>\n<span class=\"kn\">from</span> <span class=\"nn\">tinkoff.investments.client.exceptions</span> <span class=\"kn\">import</span> <span class=\"n\">TinkoffInvestmentsError</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">show_apple_year_candles</span><span class=\"p\">():</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">async</span> <span class=\"k\">with</span> <span class=\"n\">TinkoffInvestmentsRESTClient</span><span class=\"p\">(</span>\n                <span class=\"n\">token</span><span class=\"o\">=</span><span class=\"s1\">'TOKEN'</span><span class=\"p\">,</span>\n                <span class=\"n\">environment</span><span class=\"o\">=</span><span class=\"n\">Environment</span><span class=\"o\">.</span><span class=\"n\">SANDBOX</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">client</span><span class=\"p\">:</span>\n\n            <span class=\"n\">candles</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">market</span><span class=\"o\">.</span><span class=\"n\">candles</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span>\n                <span class=\"n\">figi</span><span class=\"o\">=</span><span class=\"s1\">'BBG000B9XRY4'</span><span class=\"p\">,</span>\n                <span class=\"n\">dt_from</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"p\">(</span><span class=\"mi\">2019</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),</span>\n                <span class=\"n\">dt_to</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"p\">(</span><span class=\"mi\">2019</span><span class=\"p\">,</span> <span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"mi\">31</span><span class=\"p\">),</span>\n                <span class=\"n\">interval</span><span class=\"o\">=</span><span class=\"n\">CandleResolution</span><span class=\"o\">.</span><span class=\"n\">DAY</span>\n            <span class=\"p\">)</span>\n            <span class=\"k\">for</span> <span class=\"n\">candle</span> <span class=\"ow\">in</span> <span class=\"n\">candles</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">'</span><span class=\"si\">{</span><span class=\"n\">candle</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"si\">}</span><span class=\"s1\">: </span><span class=\"si\">{</span><span class=\"n\">candle</span><span class=\"o\">.</span><span class=\"n\">h</span><span class=\"si\">}</span><span class=\"s1\">'</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span> <span class=\"n\">TinkoffInvestmentsError</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">jackpot</span><span class=\"p\">():</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">async</span> <span class=\"k\">with</span> <span class=\"n\">TinkoffInvestmentsRESTClient</span><span class=\"p\">(</span>\n                <span class=\"n\">token</span><span class=\"o\">=</span><span class=\"s1\">'TOKEN'</span><span class=\"p\">,</span>\n                <span class=\"n\">environment</span><span class=\"o\">=</span><span class=\"n\">Environment</span><span class=\"o\">.</span><span class=\"n\">SANDBOX</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">client</span><span class=\"p\">:</span>\n\n            <span class=\"n\">instruments</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">market</span><span class=\"o\">.</span><span class=\"n\">instruments</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"s1\">'AAPL'</span><span class=\"p\">)</span>\n            <span class=\"n\">apple</span> <span class=\"o\">=</span> <span class=\"n\">instruments</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n\n            <span class=\"n\">account</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">sandbox</span><span class=\"o\">.</span><span class=\"n\">accounts</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">()</span>\n            <span class=\"k\">await</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">sandbox</span><span class=\"o\">.</span><span class=\"n\">accounts</span><span class=\"o\">.</span><span class=\"n\">positions</span><span class=\"o\">.</span><span class=\"n\">set_balance</span><span class=\"p\">(</span>\n                <span class=\"n\">broker_account_id</span><span class=\"o\">=</span><span class=\"n\">account</span><span class=\"o\">.</span><span class=\"n\">brokerAccountId</span><span class=\"p\">,</span>\n                <span class=\"n\">figi</span><span class=\"o\">=</span><span class=\"n\">apple</span><span class=\"o\">.</span><span class=\"n\">figi</span><span class=\"p\">,</span>\n                <span class=\"n\">balance</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">,</span>\n            <span class=\"p\">)</span>\n\n            <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'We created the following portfolio:'</span><span class=\"p\">)</span>\n            <span class=\"n\">positions</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">portfolio</span><span class=\"o\">.</span><span class=\"n\">get_positions</span><span class=\"p\">()</span>\n            <span class=\"k\">for</span> <span class=\"n\">position</span> <span class=\"ow\">in</span> <span class=\"n\">positions</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">'</span><span class=\"si\">{</span><span class=\"n\">position</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"si\">}</span><span class=\"s1\">: </span><span class=\"si\">{</span><span class=\"n\">position</span><span class=\"o\">.</span><span class=\"n\">lots</span><span class=\"si\">}</span><span class=\"s1\"> lots'</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span> <span class=\"n\">TinkoffInvestmentsError</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n\n<span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">jackpot</span><span class=\"p\">())</span>\n</pre>\n<h4>Streaming Client:</h4>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\n<span class=\"kn\">from</span> <span class=\"nn\">tinkoff.investments</span> <span class=\"kn\">import</span> <span class=\"p\">(</span>\n    <span class=\"n\">TinkoffInvestmentsStreamingClient</span><span class=\"p\">,</span> <span class=\"n\">CandleEvent</span><span class=\"p\">,</span> <span class=\"n\">CandleResolution</span>\n<span class=\"p\">)</span>\n\n<span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">TinkoffInvestmentsStreamingClient</span><span class=\"p\">(</span><span class=\"n\">token</span><span class=\"o\">=</span><span class=\"s1\">'TOKEN'</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@client</span><span class=\"o\">.</span><span class=\"n\">events</span><span class=\"o\">.</span><span class=\"n\">candles</span><span class=\"p\">(</span><span class=\"s1\">'BBG009S39JX6'</span><span class=\"p\">,</span> <span class=\"n\">CandleResolution</span><span class=\"o\">.</span><span class=\"n\">MIN_1</span><span class=\"p\">)</span>\n<span class=\"nd\">@client</span><span class=\"o\">.</span><span class=\"n\">events</span><span class=\"o\">.</span><span class=\"n\">candles</span><span class=\"p\">(</span><span class=\"s1\">'BBG000B9XRY4'</span><span class=\"p\">,</span> <span class=\"n\">CandleResolution</span><span class=\"o\">.</span><span class=\"n\">MIN_1</span><span class=\"p\">)</span>\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">on_candle</span><span class=\"p\">(</span><span class=\"n\">candle</span><span class=\"p\">:</span> <span class=\"n\">CandleEvent</span><span class=\"p\">,</span> <span class=\"n\">server_time</span><span class=\"p\">:</span> <span class=\"n\">datetime</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">candle</span><span class=\"p\">,</span> <span class=\"n\">server_time</span><span class=\"p\">)</span>\n\n<span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">())</span>\n</pre>\n<h4>Dynamic subscriptions in runtime:</h4>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\n<span class=\"kn\">from</span> <span class=\"nn\">tinkoff.investments</span> <span class=\"kn\">import</span> <span class=\"p\">(</span>\n    <span class=\"n\">TinkoffInvestmentsStreamingClient</span><span class=\"p\">,</span> <span class=\"n\">CandleEvent</span><span class=\"p\">,</span> <span class=\"n\">CandleResolution</span>\n<span class=\"p\">)</span>\n\n<span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">TinkoffInvestmentsStreamingClient</span><span class=\"p\">(</span><span class=\"n\">token</span><span class=\"o\">=</span><span class=\"s1\">'TOKEN'</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@client</span><span class=\"o\">.</span><span class=\"n\">events</span><span class=\"o\">.</span><span class=\"n\">candles</span><span class=\"p\">(</span><span class=\"s1\">'BBG000B9XRY4'</span><span class=\"p\">,</span> <span class=\"n\">CandleResolution</span><span class=\"o\">.</span><span class=\"n\">HOUR</span><span class=\"p\">)</span>\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">on_candle</span><span class=\"p\">(</span><span class=\"n\">candle</span><span class=\"p\">:</span> <span class=\"n\">CandleEvent</span><span class=\"p\">,</span> <span class=\"n\">server_time</span><span class=\"p\">:</span> <span class=\"n\">datetime</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">candle</span><span class=\"o\">.</span><span class=\"n\">h</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1000</span><span class=\"p\">:</span>\n        <span class=\"k\">await</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">events</span><span class=\"o\">.</span><span class=\"n\">candles</span><span class=\"o\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span>\n            <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">on_candle</span><span class=\"p\">,</span>\n            <span class=\"n\">figi</span><span class=\"o\">=</span><span class=\"n\">candle</span><span class=\"o\">.</span><span class=\"n\">figi</span><span class=\"p\">,</span>\n            <span class=\"n\">interval</span><span class=\"o\">=</span><span class=\"n\">CandleResolution</span><span class=\"o\">.</span><span class=\"n\">MIN_1</span>\n        <span class=\"p\">)</span>\n    <span class=\"k\">elif</span> <span class=\"n\">candle</span><span class=\"o\">.</span><span class=\"n\">h</span> <span class=\"o\">&lt;</span> <span class=\"mi\">1000</span><span class=\"p\">:</span>\n        <span class=\"k\">await</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">events</span><span class=\"o\">.</span><span class=\"n\">candles</span><span class=\"o\">.</span><span class=\"n\">unsubscribe</span><span class=\"p\">(</span>\n            <span class=\"n\">candle</span><span class=\"o\">.</span><span class=\"n\">figi</span><span class=\"p\">,</span> <span class=\"n\">CandleResolution</span><span class=\"o\">.</span><span class=\"n\">MIN_1</span>\n        <span class=\"p\">)</span>\n\n<span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">())</span>\n</pre>\n<h4>Complete simple bot:</h4>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span>\n<span class=\"kn\">from</span> <span class=\"nn\">tinkoff.investments</span> <span class=\"kn\">import</span> <span class=\"p\">(</span>\n    <span class=\"n\">TinkoffInvestmentsStreamingClient</span><span class=\"p\">,</span> <span class=\"n\">TinkoffInvestmentsRESTClient</span><span class=\"p\">,</span>\n    <span class=\"n\">CandleEvent</span><span class=\"p\">,</span> <span class=\"n\">CandleResolution</span><span class=\"p\">,</span> <span class=\"n\">OperationType</span>\n<span class=\"p\">)</span>\n\n<span class=\"n\">streaming</span> <span class=\"o\">=</span> <span class=\"n\">TinkoffInvestmentsStreamingClient</span><span class=\"p\">(</span><span class=\"s1\">'TOKEN'</span><span class=\"p\">)</span>\n<span class=\"n\">rest</span> <span class=\"o\">=</span> <span class=\"n\">TinkoffInvestmentsRESTClient</span><span class=\"p\">(</span><span class=\"s1\">'TOKEN'</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@streaming</span><span class=\"o\">.</span><span class=\"n\">events</span><span class=\"o\">.</span><span class=\"n\">candles</span><span class=\"p\">(</span><span class=\"s1\">'BBG000B9XRY4'</span><span class=\"p\">,</span> <span class=\"n\">CandleResolution</span><span class=\"o\">.</span><span class=\"n\">MIN_1</span><span class=\"p\">)</span>\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">buy_apple</span><span class=\"p\">(</span><span class=\"n\">candle</span><span class=\"p\">:</span> <span class=\"n\">CandleEvent</span><span class=\"p\">,</span> <span class=\"n\">server_time</span><span class=\"p\">:</span> <span class=\"n\">datetime</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">candle</span><span class=\"o\">.</span><span class=\"n\">c</span> <span class=\"o\">&gt;</span> <span class=\"mi\">350</span><span class=\"p\">:</span>\n        <span class=\"k\">await</span> <span class=\"n\">rest</span><span class=\"o\">.</span><span class=\"n\">orders</span><span class=\"o\">.</span><span class=\"n\">create_market_order</span><span class=\"p\">(</span>\n            <span class=\"n\">figi</span><span class=\"o\">=</span><span class=\"s1\">'BBG000B9XRY4'</span><span class=\"p\">,</span>\n            <span class=\"n\">lots</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span>\n            <span class=\"n\">operation</span><span class=\"o\">=</span><span class=\"n\">OperationType</span><span class=\"o\">.</span><span class=\"n\">BUY</span><span class=\"p\">,</span>\n            <span class=\"n\">broker_account_id</span><span class=\"o\">=</span><span class=\"mi\">123</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n\n<span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">streaming</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">())</span>\n</pre>\n<h2>TODO</h2>\n<ul>\n<li>allow to provide str constants along with specific enum objects</li>\n<li>add ability to unsubscribe by pattern</li>\n<li>rename some fields</li>\n<li>make some fields in snake case</li>\n<li>generate documentation</li>\n</ul>\n\n          </div>"}, "last_serial": 7088440, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "13b454409d61654c693bda46f81e07bd", "sha256": "836d8316a3e7c19fc1f528949463ff96434ec905eddf429a7dadb568548007d6"}, "downloads": -1, "filename": "tinkoff-api-0.0.1.tar.gz", "has_sig": false, "md5_digest": "13b454409d61654c693bda46f81e07bd", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 1216, "upload_time": "2020-02-01T21:58:10", "upload_time_iso_8601": "2020-02-01T21:58:10.452980Z", "url": "https://files.pythonhosted.org/packages/a0/41/8c7632abcef1572bb76ba5954cfb8171308fa916b6ab03be73425b57ebe4/tinkoff-api-0.0.1.tar.gz", "yanked": false}], "0.1": [{"comment_text": "", "digests": {"md5": "076209c9d40f1ab963bca6d1c5152141", "sha256": "d83a6a3829d755ff27bb031cfc13159af1b2309e8c3b075780275ad9c9cd28ff"}, "downloads": -1, "filename": "tinkoff-api-0.1.tar.gz", "has_sig": false, "md5_digest": "076209c9d40f1ab963bca6d1c5152141", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 8331, "upload_time": "2020-02-08T19:59:39", "upload_time_iso_8601": "2020-02-08T19:59:39.626977Z", "url": "https://files.pythonhosted.org/packages/0d/6c/298b306287d16752d0447845b135222ec7d81fc5f3ab33c67a42072d0c7c/tinkoff-api-0.1.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "81599544350e8440b19e2e6475c872a0", "sha256": "38d677b7e90faf8106be6605019f553fbbcb404bfc965e0dfe2db8913acb8128"}, "downloads": -1, "filename": "tinkoff-api-0.1.1.tar.gz", "has_sig": false, "md5_digest": "81599544350e8440b19e2e6475c872a0", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 8332, "upload_time": "2020-02-08T20:04:08", "upload_time_iso_8601": "2020-02-08T20:04:08.986154Z", "url": "https://files.pythonhosted.org/packages/cd/c9/74af9b81c8e7195c33605c8825ab4849c78eae247ea56526539f519c686b/tinkoff-api-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "de22deeec28b13b7642934174c66ed56", "sha256": "d9b02cdffd3a5b6ce4c0c6024f8d54cb3cd78d1c41270c15feffda5d5f8bde8d"}, "downloads": -1, "filename": "tinkoff-api-0.1.2.tar.gz", "has_sig": false, "md5_digest": "de22deeec28b13b7642934174c66ed56", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 9443, "upload_time": "2020-02-08T20:06:20", "upload_time_iso_8601": "2020-02-08T20:06:20.117212Z", "url": "https://files.pythonhosted.org/packages/f9/a3/fb386451a8017b77d676d339ca536ff7a4969f32fef4a45be8e1f18f998c/tinkoff-api-0.1.2.tar.gz", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "55b80766d2bc97203015799493a22a93", "sha256": "9519791b56a6663a7a13f9a6c20e8e5e95c99c5dd72fa6d4adef4b709018ad9b"}, "downloads": -1, "filename": "tinkoff-api-0.2.tar.gz", "has_sig": false, "md5_digest": "55b80766d2bc97203015799493a22a93", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 12697, "upload_time": "2020-02-21T19:27:12", "upload_time_iso_8601": "2020-02-21T19:27:12.783269Z", "url": "https://files.pythonhosted.org/packages/49/87/653f3fcbd292f3c2e782e51d25b657b461ca30c55f6e9f1f00149cd61977/tinkoff-api-0.2.tar.gz", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "8ebabf8a4ab24f076277a56c4c52a584", "sha256": "668852f965dbc55011c9b2cdeec910004963725a0e6a6fd99cabdd1a5a0797a2"}, "downloads": -1, "filename": "tinkoff-api-0.3.tar.gz", "has_sig": false, "md5_digest": "8ebabf8a4ab24f076277a56c4c52a584", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 12963, "upload_time": "2020-02-24T10:31:16", "upload_time_iso_8601": "2020-02-24T10:31:16.895163Z", "url": "https://files.pythonhosted.org/packages/bc/bf/a998f68b4e5227ab12e7a91d01f6b3a5020d20a96ecfd737c611900fc5a3/tinkoff-api-0.3.tar.gz", "yanked": false}], "0.4": [{"comment_text": "", "digests": {"md5": "62a2342fbcb5186770c3d4388d574a22", "sha256": "696e309410f87f3d34a484dcbc75090f79fddf24b16837c6e7dd4308d8044eeb"}, "downloads": -1, "filename": "tinkoff-api-0.4.tar.gz", "has_sig": false, "md5_digest": "62a2342fbcb5186770c3d4388d574a22", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 13303, "upload_time": "2020-02-25T20:20:15", "upload_time_iso_8601": "2020-02-25T20:20:15.782692Z", "url": "https://files.pythonhosted.org/packages/6c/46/5bd228bbafdf12cdd36013c7830484ec18686669c62ca51f8cb398d361b6/tinkoff-api-0.4.tar.gz", "yanked": false}], "0.5": [{"comment_text": "", "digests": {"md5": "294797d227261a0f4a066cd5f2f065ff", "sha256": "f2509372c3681e897617603b82cfd405437318a2bb8e37291e7c82c527ccd43e"}, "downloads": -1, "filename": "tinkoff-api-0.5.tar.gz", "has_sig": false, "md5_digest": "294797d227261a0f4a066cd5f2f065ff", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 13451, "upload_time": "2020-02-28T21:24:35", "upload_time_iso_8601": "2020-02-28T21:24:35.133596Z", "url": "https://files.pythonhosted.org/packages/62/d0/a90845a9d3b468d5d239fd230b64bd3158a6d06f7228999068c53ab8122e/tinkoff-api-0.5.tar.gz", "yanked": false}], "0.6": [{"comment_text": "", "digests": {"md5": "af12aea8262d277cf09ff42bd5e202e2", "sha256": "04aef3b36fc3698614d2f3dfe36606a5fdb4dbadb2ccb175d90a4924130edaa1"}, "downloads": -1, "filename": "tinkoff-api-0.6.tar.gz", "has_sig": false, "md5_digest": "af12aea8262d277cf09ff42bd5e202e2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14048, "upload_time": "2020-02-29T19:41:25", "upload_time_iso_8601": "2020-02-29T19:41:25.265758Z", "url": "https://files.pythonhosted.org/packages/28/c4/f20471ff66f4041f2098cc9f13401758cbd97b6528c2f3501233da8699ea/tinkoff-api-0.6.tar.gz", "yanked": false}], "0.7": [{"comment_text": "", "digests": {"md5": "8ade725be5687ea9156be9e2e9ec4f71", "sha256": "84162c2339c6005a55d71e7bf8f80da57c1e6440e9ee9d1fb8cf01646c293aae"}, "downloads": -1, "filename": "tinkoff-api-0.7.tar.gz", "has_sig": false, "md5_digest": "8ade725be5687ea9156be9e2e9ec4f71", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 13931, "upload_time": "2020-03-09T16:37:35", "upload_time_iso_8601": "2020-03-09T16:37:35.183681Z", "url": "https://files.pythonhosted.org/packages/20/e6/7e5a690d86810444586c90bff2e4aa1244f0083e628adeaffeaf42d84f5b/tinkoff-api-0.7.tar.gz", "yanked": false}], "0.8": [{"comment_text": "", "digests": {"md5": "8534b68c0ed8a2393a46728d4debd954", "sha256": "fba1ce14fbd0fe6e4c4d40f023a11d38574596d99b04c06a4854a100946f39d8"}, "downloads": -1, "filename": "tinkoff-api-0.8.tar.gz", "has_sig": false, "md5_digest": "8534b68c0ed8a2393a46728d4debd954", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14405, "upload_time": "2020-04-10T09:45:22", "upload_time_iso_8601": "2020-04-10T09:45:22.771010Z", "url": "https://files.pythonhosted.org/packages/b6/4a/704f357998f281d59ea9e0c014fd6ed1a468212f22e13b9fa8a70bafacb1/tinkoff-api-0.8.tar.gz", "yanked": false}], "1.0": [{"comment_text": "", "digests": {"md5": "bda86d03a82dd4a87448148c8c8dba3d", "sha256": "d8267222110c60512780c4726c462acb93b88c61677f0cbf870d3c77461a12de"}, "downloads": -1, "filename": "tinkoff-api-1.0.tar.gz", "has_sig": false, "md5_digest": "bda86d03a82dd4a87448148c8c8dba3d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14407, "upload_time": "2020-04-12T22:09:49", "upload_time_iso_8601": "2020-04-12T22:09:49.439127Z", "url": "https://files.pythonhosted.org/packages/f2/1e/8b4b0795b5716d2ef5bf0d58039afafd066297ce097c3db22b4ed963d41f/tinkoff-api-1.0.tar.gz", "yanked": false}], "1.0.1": [{"comment_text": "", "digests": {"md5": "07c8f69be97cb2102e83397c6ff2b038", "sha256": "0ce8a1cd456d83e83c543d227d0d7d5e3b16a17d27124b6c911ac86e8dd0fdc4"}, "downloads": -1, "filename": "tinkoff-api-1.0.1.tar.gz", "has_sig": false, "md5_digest": "07c8f69be97cb2102e83397c6ff2b038", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14404, "upload_time": "2020-04-12T22:14:23", "upload_time_iso_8601": "2020-04-12T22:14:23.317123Z", "url": "https://files.pythonhosted.org/packages/9a/7a/c88f3f01c00cb4a9d9fe66fb55977d24eea8517f91b13f2a4598a1b9bbdb/tinkoff-api-1.0.1.tar.gz", "yanked": false}], "1.1": [{"comment_text": "", "digests": {"md5": "24d24b54825ad1687c24ed5542eb62b1", "sha256": "4903d8e60f59c0b6104e50658c0e639b685cf3790e6b1a97d754a2009308ae2f"}, "downloads": -1, "filename": "tinkoff-api-1.1.tar.gz", "has_sig": false, "md5_digest": "24d24b54825ad1687c24ed5542eb62b1", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14624, "upload_time": "2020-04-15T19:26:13", "upload_time_iso_8601": "2020-04-15T19:26:13.920889Z", "url": "https://files.pythonhosted.org/packages/c0/82/0d6675cd0166276dd6bbb3b07148d57bebe1ebbdd07a070b04298a305fec/tinkoff-api-1.1.tar.gz", "yanked": false}], "1.2": [{"comment_text": "", "digests": {"md5": "e95b7dd3f663eb94da74aeef9a856ffd", "sha256": "14b45835ab9a9c9f360b30ff82fc7fa5cb418af1e6c9567262dca8c45985266b"}, "downloads": -1, "filename": "tinkoff-api-1.2.tar.gz", "has_sig": false, "md5_digest": "e95b7dd3f663eb94da74aeef9a856ffd", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14646, "upload_time": "2020-04-16T19:45:20", "upload_time_iso_8601": "2020-04-16T19:45:20.782679Z", "url": "https://files.pythonhosted.org/packages/7b/95/101a13df7d3c0e6fd124b8ba1b5c5a99c12580158f416a2436e3561e0f42/tinkoff-api-1.2.tar.gz", "yanked": false}], "1.3": [{"comment_text": "", "digests": {"md5": "6304d540b2715b4d39074d7abb2cbc79", "sha256": "06e4383b72b941db39c118e9d92818bc7996c1310d603c746797a58fc84e143a"}, "downloads": -1, "filename": "tinkoff-api-1.3.tar.gz", "has_sig": false, "md5_digest": "6304d540b2715b4d39074d7abb2cbc79", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14677, "upload_time": "2020-04-18T11:05:48", "upload_time_iso_8601": "2020-04-18T11:05:48.518212Z", "url": "https://files.pythonhosted.org/packages/34/eb/235eea279045afea2debbd570bd9400277186532bac5b1677e96523d0b3c/tinkoff-api-1.3.tar.gz", "yanked": false}], "1.3.1": [{"comment_text": "", "digests": {"md5": "34a52be05dbfe300905a52fb496f17f0", "sha256": "21bdf660d9ed2c35225b1b3ba9334afbf41b362e548ab160bf30f225a339006c"}, "downloads": -1, "filename": "tinkoff-api-1.3.1.tar.gz", "has_sig": false, "md5_digest": "34a52be05dbfe300905a52fb496f17f0", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14721, "upload_time": "2020-04-21T21:55:09", "upload_time_iso_8601": "2020-04-21T21:55:09.660198Z", "url": "https://files.pythonhosted.org/packages/f8/9f/e75b33d32b6376d9353ff3a24a0922aa82a3839904533a48482594748493/tinkoff-api-1.3.1.tar.gz", "yanked": false}], "1.3.2": [{"comment_text": "", "digests": {"md5": "9b72ce1761b09d0680194eb278723ff6", "sha256": "b5f401162f76e1711e07c6e9a324d3c31104e7973a3aae36e6c575d262b0c102"}, "downloads": -1, "filename": "tinkoff-api-1.3.2.tar.gz", "has_sig": false, "md5_digest": "9b72ce1761b09d0680194eb278723ff6", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14722, "upload_time": "2020-04-23T23:00:57", "upload_time_iso_8601": "2020-04-23T23:00:57.326529Z", "url": "https://files.pythonhosted.org/packages/95/f7/813bf97f2855092d3cf4a2b5f8edf3d98021e2f8c98e000043a01c456363/tinkoff-api-1.3.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "9b72ce1761b09d0680194eb278723ff6", "sha256": "b5f401162f76e1711e07c6e9a324d3c31104e7973a3aae36e6c575d262b0c102"}, "downloads": -1, "filename": "tinkoff-api-1.3.2.tar.gz", "has_sig": false, "md5_digest": "9b72ce1761b09d0680194eb278723ff6", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14722, "upload_time": "2020-04-23T23:00:57", "upload_time_iso_8601": "2020-04-23T23:00:57.326529Z", "url": "https://files.pythonhosted.org/packages/95/f7/813bf97f2855092d3cf4a2b5f8edf3d98021e2f8c98e000043a01c456363/tinkoff-api-1.3.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:53:10 2020"}