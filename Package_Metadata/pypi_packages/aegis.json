{"info": {"author": "Mehmet Gurdal", "author_email": "mgurdal@protonmail.com", "bugtrack_url": null, "classifiers": ["Framework :: AsyncIO", "License :: OSI Approved :: Apache Software License", "Operating System :: MacOS :: MacOS X", "Operating System :: Microsoft :: Windows", "Operating System :: POSIX", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Internet :: WWW/HTTP"], "description": "\naegis\n=============\n\n|Python 3.6| |pypi| |travis-badge| |coveralls| |codefactor grade| |code-style| |downloads|\n\n.. |Python 3.6| image:: https://img.shields.io/badge/python-3.6-brightgreen.svg\n   :target: https://www.python.org/downloads/release/python-360\n.. |codefactor grade| image:: https://www.codefactor.io/repository/github/mgurdal/aegis/badge\n   :target: https://www.codefactor.io/repository/github/mgurdal/aegis/badge\n.. |travis-badge| image:: https://travis-ci.org/mgurdal/aegis.svg?branch=master\n   :target: https://travis-ci.org/mgurdal/aegis\n.. |coveralls| image:: https://coveralls.io/repos/github/mgurdal/aegis/badge.svg?branch=master\n   :target: https://coveralls.io/github/mgurdal/aegis?branch=master\n.. |pypi| image:: https://badge.fury.io/py/aegis.svg\n    :target: https://badge.fury.io/py/aegis\n.. |downloads| image:: https://img.shields.io/pypi/dm/aegis.svg\n    :target: https://pypi.python.org/pypi/aegis\n.. |code-style| image:: https://img.shields.io/badge/code%20style-black-000000.svg\n    :target: https://github.com/python/black\n\n**aegis** allows to **protect endpoints** and also provides\n**authentication scoping**.\n\n--------------\n\nInstallation\n~~~~~~~~~~~~\n.. code:: bash\n\n     pip install aegis\n\n\nSimple Example\n~~~~~~~~~~~~~~\n\n.. code:: python\n\n   from aiohttp import web\n   from aegis import login_required, JWTAuth\n\n\n   class JWTAuthenticator(JWTAuth):\n       jwt_secret = \"<secret>\"\n\n       async def authenticate(self, request: web.Request) -> dict:\n           db = request.app[\"db\"]\n           credentials = await request.json()\n           id_ = credentials[\"id\"]\n           user = db.get(id_)\n           return user\n\n\n   @login_required\n   async def protected(request):\n       return web.json_response({'hello': 'user'})\n\n\n   def create_app():\n       app = web.Application()\n       app[\"db\"] = {\n           5: {\n               \"name\": \"test\"\n           }\n       }\n       app.router.add_get('/protected', protected)\n\n       JWTAuthenticator.setup(app)\n\n       return app\n\n\n   if __name__ == \"__main__\":\n       app = create_app()\n       web.run_app(app)\n\n\nGet access token\n\n.. code:: bash\n\n   curl -X POST http://0.0.0.0:8080/auth -d '{\"id\": 5}'\n\n\n   {\"access_token\": \"<access_token>\"}\n\nGet user\n\n.. code:: bash\n\n   curl http://0.0.0.0:8080/protected -H 'Authorization: Bearer <access_token>'\n\n\n   {'hello': 'user'}\n\n\n\nTest\n~~~~~~~~~~~~~~\n\n.. code:: bash\n\n    git clone https://github.com/mgurdal/aegis.git\n    cd aegis\n    make cov\n\nRequirements\n~~~~~~~~~~~~\n\n- Python >= 3.6\n- aiohttp\n- PyJWT\n\nLicense\n~~~~~~~~\n\n``aegis`` is offered under the Apache 2 license.\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/mgurdal/aegis", "keywords": "", "license": "Apache 2", "maintainer": "", "maintainer_email": "", "name": "aegis", "package_url": "https://pypi.org/project/aegis/", "platform": "", "project_url": "https://pypi.org/project/aegis/", "project_urls": {"Homepage": "https://github.com/mgurdal/aegis"}, "release_url": "https://pypi.org/project/aegis/1.1.1/", "requires_dist": ["aiohttp", "PyJWT"], "requires_python": ">=3.6.0", "summary": "Authentication library for aiohttp", "version": "1.1.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://www.python.org/downloads/release/python-360\" rel=\"nofollow\"><img alt=\"Python 3.6\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b4d126068744eac14a7a6f738762a928f4a8fd38/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d332e362d627269676874677265656e2e737667\"></a> <a href=\"https://badge.fury.io/py/aegis\" rel=\"nofollow\"><img alt=\"pypi\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2cba873efc6f3b2377186bea9f488d593f502fb6/68747470733a2f2f62616467652e667572792e696f2f70792f61656769732e737667\"></a> <a href=\"https://travis-ci.org/mgurdal/aegis\" rel=\"nofollow\"><img alt=\"travis-badge\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/960edeb530bb889876df2bdb62a756759e9cd550/68747470733a2f2f7472617669732d63692e6f72672f6d67757264616c2f61656769732e7376673f6272616e63683d6d6173746572\"></a> <a href=\"https://coveralls.io/github/mgurdal/aegis?branch=master\" rel=\"nofollow\"><img alt=\"coveralls\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fa3c5ef150ff5c57b6b880d825a76110c0d6f8d4/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f6d67757264616c2f61656769732f62616467652e7376673f6272616e63683d6d6173746572\"></a> <a href=\"https://www.codefactor.io/repository/github/mgurdal/aegis/badge\" rel=\"nofollow\"><img alt=\"codefactor grade\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c815163f5ca5ce30e10a6b3764e9d57a3cc9944a/68747470733a2f2f7777772e636f6465666163746f722e696f2f7265706f7369746f72792f6769746875622f6d67757264616c2f61656769732f6261646765\"></a> <a href=\"https://github.com/python/black\" rel=\"nofollow\"><img alt=\"code-style\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fbfdc7754183ecf079bc71ddeabaf88f6cbc5c00/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667\"></a> <a href=\"https://pypi.python.org/pypi/aegis\" rel=\"nofollow\"><img alt=\"downloads\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4ed2b369edf4ad43c2afbfbd6e0a33173ee919b3/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f61656769732e737667\"></a></p>\n<p><strong>aegis</strong> allows to <strong>protect endpoints</strong> and also provides\n<strong>authentication scoping</strong>.</p>\n<hr class=\"docutils\">\n<div id=\"installation\">\n<h2>Installation</h2>\n<pre>pip install aegis\n</pre>\n</div>\n<div id=\"simple-example\">\n<h2>Simple Example</h2>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">aiohttp</span> <span class=\"kn\">import</span> <span class=\"n\">web</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aegis</span> <span class=\"kn\">import</span> <span class=\"n\">login_required</span><span class=\"p\">,</span> <span class=\"n\">JWTAuth</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">JWTAuthenticator</span><span class=\"p\">(</span><span class=\"n\">JWTAuth</span><span class=\"p\">):</span>\n    <span class=\"n\">jwt_secret</span> <span class=\"o\">=</span> <span class=\"s2\">\"&lt;secret&gt;\"</span>\n\n    <span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">authenticate</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">:</span> <span class=\"n\">web</span><span class=\"o\">.</span><span class=\"n\">Request</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">dict</span><span class=\"p\">:</span>\n        <span class=\"n\">db</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">[</span><span class=\"s2\">\"db\"</span><span class=\"p\">]</span>\n        <span class=\"n\">credentials</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">json</span><span class=\"p\">()</span>\n        <span class=\"n\">id_</span> <span class=\"o\">=</span> <span class=\"n\">credentials</span><span class=\"p\">[</span><span class=\"s2\">\"id\"</span><span class=\"p\">]</span>\n        <span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">id_</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">user</span>\n\n\n<span class=\"nd\">@login_required</span>\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">protected</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">web</span><span class=\"o\">.</span><span class=\"n\">json_response</span><span class=\"p\">({</span><span class=\"s1\">'hello'</span><span class=\"p\">:</span> <span class=\"s1\">'user'</span><span class=\"p\">})</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">create_app</span><span class=\"p\">():</span>\n    <span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">web</span><span class=\"o\">.</span><span class=\"n\">Application</span><span class=\"p\">()</span>\n    <span class=\"n\">app</span><span class=\"p\">[</span><span class=\"s2\">\"db\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"mi\">5</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test\"</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n    <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">router</span><span class=\"o\">.</span><span class=\"n\">add_get</span><span class=\"p\">(</span><span class=\"s1\">'/protected'</span><span class=\"p\">,</span> <span class=\"n\">protected</span><span class=\"p\">)</span>\n\n    <span class=\"n\">JWTAuthenticator</span><span class=\"o\">.</span><span class=\"n\">setup</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">app</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">create_app</span><span class=\"p\">()</span>\n    <span class=\"n\">web</span><span class=\"o\">.</span><span class=\"n\">run_app</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n</pre>\n<p>Get access token</p>\n<pre>curl -X POST http://0.0.0.0:8080/auth -d <span class=\"s1\">'{\"id\": 5}'</span>\n\n\n<span class=\"o\">{</span><span class=\"s2\">\"access_token\"</span>: <span class=\"s2\">\"&lt;access_token&gt;\"</span><span class=\"o\">}</span>\n</pre>\n<p>Get user</p>\n<pre>curl http://0.0.0.0:8080/protected -H <span class=\"s1\">'Authorization: Bearer &lt;access_token&gt;'</span>\n\n\n<span class=\"o\">{</span><span class=\"s1\">'hello'</span>: <span class=\"s1\">'user'</span><span class=\"o\">}</span>\n</pre>\n</div>\n<div id=\"test\">\n<h2>Test</h2>\n<pre>git clone https://github.com/mgurdal/aegis.git\n<span class=\"nb\">cd</span> aegis\nmake cov\n</pre>\n</div>\n<div id=\"requirements\">\n<h2>Requirements</h2>\n<ul>\n<li>Python &gt;= 3.6</li>\n<li>aiohttp</li>\n<li>PyJWT</li>\n</ul>\n</div>\n<div id=\"license\">\n<h2>License</h2>\n<p><tt>aegis</tt> is offered under the Apache 2 license.</p>\n</div>\n\n          </div>"}, "last_serial": 7016285, "releases": {"0.3.1": [{"comment_text": "", "digests": {"md5": "f738da4b9079d30aa4b978416bf4e858", "sha256": "43e2d0ba272ec5f169a64cb4889abd8f6064b0eea3795c59083dbdf6c5b9827f"}, "downloads": -1, "filename": "aegis-0.3.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "f738da4b9079d30aa4b978416bf4e858", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": ">=3.6.0", "size": 19499, "upload_time": "2019-04-26T00:00:09", "upload_time_iso_8601": "2019-04-26T00:00:09.746779Z", "url": "https://files.pythonhosted.org/packages/72/42/2349fbe0eb33c41c139d260aae76887efbe77863971c49c725a67c915014/aegis-0.3.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b8f0f92747316fecafed35a1fa6265ea", "sha256": "0f352a57b437e7a66c3a1fb3bc3a30565f1493b64a11ad9c7395890be215e126"}, "downloads": -1, "filename": "aegis-0.3.1.tar.gz", "has_sig": false, "md5_digest": "b8f0f92747316fecafed35a1fa6265ea", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 7706, "upload_time": "2019-04-26T00:00:15", "upload_time_iso_8601": "2019-04-26T00:00:15.295038Z", "url": "https://files.pythonhosted.org/packages/ad/19/682600491aa0076f2a83f4d1fa2c3e35eb8efc5adcfc9751c52d1d40b8c1/aegis-0.3.1.tar.gz", "yanked": false}], "0.4.0": [{"comment_text": "", "digests": {"md5": "d9d09e46517e53514fd8df21e789aae8", "sha256": "2f7a6b70813b1f5b60b1233f52f884353d5c2ff24c193a9b2bd068645cbb8c49"}, "downloads": -1, "filename": "aegis-0.4.0.tar.gz", "has_sig": false, "md5_digest": "d9d09e46517e53514fd8df21e789aae8", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 8183, "upload_time": "2019-04-29T06:28:14", "upload_time_iso_8601": "2019-04-29T06:28:14.298222Z", "url": "https://files.pythonhosted.org/packages/92/d5/1494ffe7387bcd2421e24b923c3dd5a66feea18ed4c40cb05f6d8526f5ba/aegis-0.4.0.tar.gz", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "edbcb5e2716933c736e49c83be804886", "sha256": "22287ddf4334947773d49f9751e755a8854d9e1ac181b8a3aa8f843d0030c71f"}, "downloads": -1, "filename": "aegis-1.0.0.tar.gz", "has_sig": false, "md5_digest": "edbcb5e2716933c736e49c83be804886", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 8269, "upload_time": "2019-05-09T18:32:03", "upload_time_iso_8601": "2019-05-09T18:32:03.328038Z", "url": "https://files.pythonhosted.org/packages/90/67/e1af6100994a98f6e3729288b34bf8c65d8c837d7c50139cd76587b4c132/aegis-1.0.0.tar.gz", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "6af0a37fdc5da39b3079a295dbdcf16c", "sha256": "91cdf24175ddf99030f85276c19fedfc20aafecdf91c343402557786485787af"}, "downloads": -1, "filename": "aegis-1.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "6af0a37fdc5da39b3079a295dbdcf16c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 14088, "upload_time": "2020-01-14T19:02:03", "upload_time_iso_8601": "2020-01-14T19:02:03.802735Z", "url": "https://files.pythonhosted.org/packages/c4/7f/6c5a0f49aedd71826a18a04a2d3ea41f9abc87f06dbacaef49d12eafaad2/aegis-1.1.0-py3-none-any.whl", "yanked": false}], "1.1.1": [{"comment_text": "", "digests": {"md5": "960f6e643dc15be55181728028f9a340", "sha256": "6db77d0e4373b152f23532738df07b76fb6fbdde169b76cc2794576edc9facc0"}, "downloads": -1, "filename": "aegis-1.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "960f6e643dc15be55181728028f9a340", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 14943, "upload_time": "2020-04-14T10:55:08", "upload_time_iso_8601": "2020-04-14T10:55:08.957564Z", "url": "https://files.pythonhosted.org/packages/50/fb/bcc5f2b3e7da0ab879c3ff9b778ae2ea8da0196adc3a89b94525ec4be3a3/aegis-1.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "575639c90ae20f2075b86e1ada389c3a", "sha256": "c057d0a84476d57211ec29faf95cbc23df293d1a87f308ed1ba765b38b2df5c9"}, "downloads": -1, "filename": "aegis-1.1.1.tar.gz", "has_sig": false, "md5_digest": "575639c90ae20f2075b86e1ada389c3a", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 9190, "upload_time": "2020-04-14T10:55:10", "upload_time_iso_8601": "2020-04-14T10:55:10.568836Z", "url": "https://files.pythonhosted.org/packages/4c/2c/2c2a58f331adc2dc09f506d755fd4d07bb3c9f3d1d1c365491e00aabf399/aegis-1.1.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "960f6e643dc15be55181728028f9a340", "sha256": "6db77d0e4373b152f23532738df07b76fb6fbdde169b76cc2794576edc9facc0"}, "downloads": -1, "filename": "aegis-1.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "960f6e643dc15be55181728028f9a340", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 14943, "upload_time": "2020-04-14T10:55:08", "upload_time_iso_8601": "2020-04-14T10:55:08.957564Z", "url": "https://files.pythonhosted.org/packages/50/fb/bcc5f2b3e7da0ab879c3ff9b778ae2ea8da0196adc3a89b94525ec4be3a3/aegis-1.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "575639c90ae20f2075b86e1ada389c3a", "sha256": "c057d0a84476d57211ec29faf95cbc23df293d1a87f308ed1ba765b38b2df5c9"}, "downloads": -1, "filename": "aegis-1.1.1.tar.gz", "has_sig": false, "md5_digest": "575639c90ae20f2075b86e1ada389c3a", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 9190, "upload_time": "2020-04-14T10:55:10", "upload_time_iso_8601": "2020-04-14T10:55:10.568836Z", "url": "https://files.pythonhosted.org/packages/4c/2c/2c2a58f331adc2dc09f506d755fd4d07bb3c9f3d1d1c365491e00aabf399/aegis-1.1.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:23:00 2020"}