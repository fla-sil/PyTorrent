{"info": {"author": "Slava Cheremushkin", "author_email": "slv0.chr@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Environment :: Web Environment", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Operating System :: OS Independent", "Programming Language :: Python :: 3.7", "Topic :: Internet :: WWW/HTTP"], "description": "# Star resty\nObject-oriented rest framework based on starlette, marshmallow and apispec.\n\n## Requirements\n\n* [Python] 3.7+\n* [Starlette] 0.12.0+\n* [Marshmallow] 3.0.0rc8+\n* [APISpec] 2.0.2+\n\n## Installation\n\n```console\n$ pip install star_resty\n```\n\n## Example\n\n```python\nfrom dataclasses import dataclass\nfrom typing import Optional\n\nfrom marshmallow import Schema, fields, post_load, ValidationError\nfrom starlette.applications import Starlette\nfrom starlette.responses import UJSONResponse\n\nfrom star_resty import Method, Operation, endpoint, json_schema, query, setup_spec\n\n\nclass EchoInput(Schema):\n    a = fields.Int()\n\n\n@dataclass\nclass Payload:\n    a: int\n    s: Optional[str] = None\n\n\nclass PayloadSchema(Schema):\n    a = fields.Int(required=True)\n    s = fields.String()\n\n    @post_load\n    def create_payload(self, data, **kwargs):\n        return Payload(**data)\n\n\napp = Starlette(debug=True)\n\n@app.exception_handler(ValidationError)\ndef register_error(request, e: ValidationError):\n    return UJSONResponse(e.normalized_messages(), status_code=400)\n\n\n@app.route('/echo')\n@endpoint\nclass Echo(Method):\n    meta = Operation(tag='default',\n                     description='echo')\n    response_schema = EchoInput\n\n    async def execute(self, query_params: query(EchoInput)):\n        return query_params\n\n\n@app.route('/post', methods=['POST'])\n@endpoint\nclass Post(Method):\n    meta = Operation(tag='default', description='post')\n\n    async def execute(self, item: json_schema(PayloadSchema, Payload)):\n        return {'a': item.a * 2, 's': item.s}\n\n\nif __name__ == '__main__':\n    import uvicorn\n\n    setup_spec(app, title='Example')\n    uvicorn.run(app, port=8080)\n```\n\nOpen [http://localhost:8080/apidocs.json](http://localhost:8080/apidocs.json) to view generated openapi schema.", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/slv0/start_resty", "keywords": "", "license": "BSD", "maintainer": "", "maintainer_email": "", "name": "star-resty", "package_url": "https://pypi.org/project/star-resty/", "platform": "", "project_url": "https://pypi.org/project/star-resty/", "project_urls": {"Homepage": "https://github.com/slv0/start_resty"}, "release_url": "https://pypi.org/project/star-resty/0.0.12/", "requires_dist": null, "requires_python": ">=3.7", "summary": "The web framework", "version": "0.0.12", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Star resty</h1>\n<p>Object-oriented rest framework based on starlette, marshmallow and apispec.</p>\n<h2>Requirements</h2>\n<ul>\n<li>[Python] 3.7+</li>\n<li>[Starlette] 0.12.0+</li>\n<li>[Marshmallow] 3.0.0rc8+</li>\n<li>[APISpec] 2.0.2+</li>\n</ul>\n<h2>Installation</h2>\n<pre><span class=\"gp\">$</span> pip install star_resty\n</pre>\n<h2>Example</h2>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">dataclasses</span> <span class=\"kn\">import</span> <span class=\"n\">dataclass</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">Optional</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">marshmallow</span> <span class=\"kn\">import</span> <span class=\"n\">Schema</span><span class=\"p\">,</span> <span class=\"n\">fields</span><span class=\"p\">,</span> <span class=\"n\">post_load</span><span class=\"p\">,</span> <span class=\"n\">ValidationError</span>\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.applications</span> <span class=\"kn\">import</span> <span class=\"n\">Starlette</span>\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.responses</span> <span class=\"kn\">import</span> <span class=\"n\">UJSONResponse</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">star_resty</span> <span class=\"kn\">import</span> <span class=\"n\">Method</span><span class=\"p\">,</span> <span class=\"n\">Operation</span><span class=\"p\">,</span> <span class=\"n\">endpoint</span><span class=\"p\">,</span> <span class=\"n\">json_schema</span><span class=\"p\">,</span> <span class=\"n\">query</span><span class=\"p\">,</span> <span class=\"n\">setup_spec</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">EchoInput</span><span class=\"p\">(</span><span class=\"n\">Schema</span><span class=\"p\">):</span>\n    <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"n\">fields</span><span class=\"o\">.</span><span class=\"n\">Int</span><span class=\"p\">()</span>\n\n\n<span class=\"nd\">@dataclass</span>\n<span class=\"k\">class</span> <span class=\"nc\">Payload</span><span class=\"p\">:</span>\n    <span class=\"n\">a</span><span class=\"p\">:</span> <span class=\"nb\">int</span>\n    <span class=\"n\">s</span><span class=\"p\">:</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">PayloadSchema</span><span class=\"p\">(</span><span class=\"n\">Schema</span><span class=\"p\">):</span>\n    <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"n\">fields</span><span class=\"o\">.</span><span class=\"n\">Int</span><span class=\"p\">(</span><span class=\"n\">required</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">fields</span><span class=\"o\">.</span><span class=\"n\">String</span><span class=\"p\">()</span>\n\n    <span class=\"nd\">@post_load</span>\n    <span class=\"k\">def</span> <span class=\"nf\">create_payload</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">Payload</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">data</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Starlette</span><span class=\"p\">(</span><span class=\"n\">debug</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">exception_handler</span><span class=\"p\">(</span><span class=\"n\">ValidationError</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">register_error</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">e</span><span class=\"p\">:</span> <span class=\"n\">ValidationError</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">UJSONResponse</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"o\">.</span><span class=\"n\">normalized_messages</span><span class=\"p\">(),</span> <span class=\"n\">status_code</span><span class=\"o\">=</span><span class=\"mi\">400</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/echo'</span><span class=\"p\">)</span>\n<span class=\"nd\">@endpoint</span>\n<span class=\"k\">class</span> <span class=\"nc\">Echo</span><span class=\"p\">(</span><span class=\"n\">Method</span><span class=\"p\">):</span>\n    <span class=\"n\">meta</span> <span class=\"o\">=</span> <span class=\"n\">Operation</span><span class=\"p\">(</span><span class=\"n\">tag</span><span class=\"o\">=</span><span class=\"s1\">'default'</span><span class=\"p\">,</span>\n                     <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s1\">'echo'</span><span class=\"p\">)</span>\n    <span class=\"n\">response_schema</span> <span class=\"o\">=</span> <span class=\"n\">EchoInput</span>\n\n    <span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">execute</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">query_params</span><span class=\"p\">:</span> <span class=\"n\">query</span><span class=\"p\">(</span><span class=\"n\">EchoInput</span><span class=\"p\">)):</span>\n        <span class=\"k\">return</span> <span class=\"n\">query_params</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/post'</span><span class=\"p\">,</span> <span class=\"n\">methods</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'POST'</span><span class=\"p\">])</span>\n<span class=\"nd\">@endpoint</span>\n<span class=\"k\">class</span> <span class=\"nc\">Post</span><span class=\"p\">(</span><span class=\"n\">Method</span><span class=\"p\">):</span>\n    <span class=\"n\">meta</span> <span class=\"o\">=</span> <span class=\"n\">Operation</span><span class=\"p\">(</span><span class=\"n\">tag</span><span class=\"o\">=</span><span class=\"s1\">'default'</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s1\">'post'</span><span class=\"p\">)</span>\n\n    <span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">execute</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">:</span> <span class=\"n\">json_schema</span><span class=\"p\">(</span><span class=\"n\">PayloadSchema</span><span class=\"p\">,</span> <span class=\"n\">Payload</span><span class=\"p\">)):</span>\n        <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s1\">'a'</span><span class=\"p\">:</span> <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">a</span> <span class=\"o\">*</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">'s'</span><span class=\"p\">:</span> <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">s</span><span class=\"p\">}</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">uvicorn</span>\n\n    <span class=\"n\">setup_spec</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s1\">'Example'</span><span class=\"p\">)</span>\n    <span class=\"n\">uvicorn</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"mi\">8080</span><span class=\"p\">)</span>\n</pre>\n<p>Open <a href=\"http://localhost:8080/apidocs.json\" rel=\"nofollow\">http://localhost:8080/apidocs.json</a> to view generated openapi schema.</p>\n\n          </div>"}, "last_serial": 7022975, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "485faf97f5324af0c1b1b3210b9d859c", "sha256": "08bd487f44abaa37207c5c3835a61279f5d181497410e210b33bd2ed6911a8c3"}, "downloads": -1, "filename": "star_resty-0.0.1.tar.gz", "has_sig": false, "md5_digest": "485faf97f5324af0c1b1b3210b9d859c", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 8992, "upload_time": "2019-07-23T14:26:42", "upload_time_iso_8601": "2019-07-23T14:26:42.570134Z", "url": "https://files.pythonhosted.org/packages/76/d9/ebf609759f0313023e12fe8587a61d3fcf0b9ea9afb5cf5aea6a57a5249e/star_resty-0.0.1.tar.gz", "yanked": false}], "0.0.10": [{"comment_text": "", "digests": {"md5": "424abb8113c1752bd287cff0d85db0d5", "sha256": "a839824671e8afce97fac77154d05f6da4128c2060ed9a4abd5850dc93128fbd"}, "downloads": -1, "filename": "star_resty-0.0.10.tar.gz", "has_sig": false, "md5_digest": "424abb8113c1752bd287cff0d85db0d5", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 9876, "upload_time": "2019-08-23T10:40:38", "upload_time_iso_8601": "2019-08-23T10:40:38.289344Z", "url": "https://files.pythonhosted.org/packages/e5/92/2ce59cfe2953ef271f5bd94fe1c4f8e799de826c638ef564c9f498408913/star_resty-0.0.10.tar.gz", "yanked": false}], "0.0.11": [{"comment_text": "", "digests": {"md5": "4429834bff46e3274c632492bc61fecc", "sha256": "4d8a93bd7e38883a898a6b21b108a6d362227ab091cdc8dfb1d9455729d456b8"}, "downloads": -1, "filename": "star_resty-0.0.11.tar.gz", "has_sig": false, "md5_digest": "4429834bff46e3274c632492bc61fecc", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 9954, "upload_time": "2019-12-11T15:01:50", "upload_time_iso_8601": "2019-12-11T15:01:50.515056Z", "url": "https://files.pythonhosted.org/packages/31/89/0769d84a526217a73743757d16ee12c3bd5fec206007377df3ebceb8b9f1/star_resty-0.0.11.tar.gz", "yanked": false}], "0.0.12": [{"comment_text": "", "digests": {"md5": "2845a09e303d13f5e11a12f74b970565", "sha256": "e3a108745e4cb08ce96cd66ffce2bac3cf16067b86505f0416320cbd51dbf0e2"}, "downloads": -1, "filename": "star_resty-0.0.12.tar.gz", "has_sig": false, "md5_digest": "2845a09e303d13f5e11a12f74b970565", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 10831, "upload_time": "2020-04-15T08:10:14", "upload_time_iso_8601": "2020-04-15T08:10:14.335530Z", "url": "https://files.pythonhosted.org/packages/da/6b/c37be93e64ea02b36dccfc624f2b7cb2835757bb7d2ee66ded3310bb986b/star_resty-0.0.12.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "0b13b4cd0bb1aa4c5a1451589720d221", "sha256": "d4a83a6868cfe24483886e994080e8d4c3e7bbf093c3a718ae3a9435ecf0649d"}, "downloads": -1, "filename": "star_resty-0.0.3.tar.gz", "has_sig": false, "md5_digest": "0b13b4cd0bb1aa4c5a1451589720d221", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 8979, "upload_time": "2019-07-23T14:59:24", "upload_time_iso_8601": "2019-07-23T14:59:24.930632Z", "url": "https://files.pythonhosted.org/packages/c6/6b/1093153dfd482f03ad962895dc5cc2b4d735da3cfd5ef0dc1e3e17e90b75/star_resty-0.0.3.tar.gz", "yanked": false}], "0.0.4": [{"comment_text": "", "digests": {"md5": "51555dc61c23082b4cb843d30728bfad", "sha256": "b05ee050b2919c69613fde992024b36812275855373b990974d3b9dde72e00ea"}, "downloads": -1, "filename": "star_resty-0.0.4.tar.gz", "has_sig": false, "md5_digest": "51555dc61c23082b4cb843d30728bfad", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 9525, "upload_time": "2019-07-24T10:49:33", "upload_time_iso_8601": "2019-07-24T10:49:33.520679Z", "url": "https://files.pythonhosted.org/packages/2f/5e/afc733cc5e1bea2d45119ce02a1b622a9d5f6a42e501f4d2d5cc8bf9ea72/star_resty-0.0.4.tar.gz", "yanked": false}], "0.0.5": [{"comment_text": "", "digests": {"md5": "d600d0bd05eab3e2e01884f88129a945", "sha256": "80660fc8cbc14bf985d889dd8fcd8adf11a1ce2f9e29660053b155de721e3469"}, "downloads": -1, "filename": "star_resty-0.0.5.tar.gz", "has_sig": false, "md5_digest": "d600d0bd05eab3e2e01884f88129a945", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 9516, "upload_time": "2019-07-24T12:36:39", "upload_time_iso_8601": "2019-07-24T12:36:39.154004Z", "url": "https://files.pythonhosted.org/packages/de/29/97429fafafa32b1b60339f95e48c29a6caf1bf9830944936f0c00fadffa6/star_resty-0.0.5.tar.gz", "yanked": false}], "0.0.6": [{"comment_text": "", "digests": {"md5": "6d70e35f76b751651103160b44c88a30", "sha256": "1f13a2a15a7c75881e73b19059b799904172c8d2c0f99c050eb570f7e16164c9"}, "downloads": -1, "filename": "star_resty-0.0.6.tar.gz", "has_sig": false, "md5_digest": "6d70e35f76b751651103160b44c88a30", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 9671, "upload_time": "2019-07-25T08:06:26", "upload_time_iso_8601": "2019-07-25T08:06:26.117055Z", "url": "https://files.pythonhosted.org/packages/5f/d5/d17a605f53191c431675846e958d2796fe85c65d35a733afa01541fec925/star_resty-0.0.6.tar.gz", "yanked": false}], "0.0.7": [{"comment_text": "", "digests": {"md5": "f17dbfbe079258b196b408d6934e9cbe", "sha256": "89094a2b7ec2fc71f1157959d77cf55c2533cdf0cc849b6b149b3d18cab6d2dc"}, "downloads": -1, "filename": "star_resty-0.0.7.tar.gz", "has_sig": false, "md5_digest": "f17dbfbe079258b196b408d6934e9cbe", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 9712, "upload_time": "2019-08-13T10:38:27", "upload_time_iso_8601": "2019-08-13T10:38:27.778975Z", "url": "https://files.pythonhosted.org/packages/73/60/32e7ac482bc99d6f6497bb44353d033d3ad15b0be0d337384d22cb506f97/star_resty-0.0.7.tar.gz", "yanked": false}], "0.0.8": [{"comment_text": "", "digests": {"md5": "39308e4bf8111d16a0f99c17966310d2", "sha256": "e4a5c6f97feaedf5ce7a2532e55a10db57c76d28d8f76625b7c2d1c8bf415a38"}, "downloads": -1, "filename": "star_resty-0.0.8.tar.gz", "has_sig": false, "md5_digest": "39308e4bf8111d16a0f99c17966310d2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 9727, "upload_time": "2019-08-14T09:11:21", "upload_time_iso_8601": "2019-08-14T09:11:21.253599Z", "url": "https://files.pythonhosted.org/packages/91/1b/a86b6325d4f222cdd99cb5f99b78d93ef6e564a93127bff4f342d4506d9d/star_resty-0.0.8.tar.gz", "yanked": false}], "0.0.9": [{"comment_text": "", "digests": {"md5": "b8e92da7c3682c4be80f5b0334b7bfc2", "sha256": "552d2f3df8d7ae29fbd817e491a5e91518db328f2ff2d30ece5968c170effeab"}, "downloads": -1, "filename": "star_resty-0.0.9.tar.gz", "has_sig": false, "md5_digest": "b8e92da7c3682c4be80f5b0334b7bfc2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 9842, "upload_time": "2019-08-14T11:01:53", "upload_time_iso_8601": "2019-08-14T11:01:53.634813Z", "url": "https://files.pythonhosted.org/packages/5f/c4/51bd1fbd47523d2326313dedec9c4f10b455fe8555c8516b14ae92eb979b/star_resty-0.0.9.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "2845a09e303d13f5e11a12f74b970565", "sha256": "e3a108745e4cb08ce96cd66ffce2bac3cf16067b86505f0416320cbd51dbf0e2"}, "downloads": -1, "filename": "star_resty-0.0.12.tar.gz", "has_sig": false, "md5_digest": "2845a09e303d13f5e11a12f74b970565", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 10831, "upload_time": "2020-04-15T08:10:14", "upload_time_iso_8601": "2020-04-15T08:10:14.335530Z", "url": "https://files.pythonhosted.org/packages/da/6b/c37be93e64ea02b36dccfc624f2b7cb2835757bb7d2ee66ded3310bb986b/star_resty-0.0.12.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:02:34 2020"}