{"info": {"author": "Dave Simons", "author_email": "simonsdave@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: Implementation :: CPython", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "clair-cicd\n==========\n\n|Maintained| |MIT license| |PythonVersions| |status| |PyPI|\n|Requirements| |CircleCI| |codecov|\n|docker-simonsdave/clair-cicd-database|\n|docker-simonsdave/clair-cicd-clair|\n\n`Clair <https://github.com/coreos/clair>`__, `released by CoreOS in Nov\n\u201916 <https://coreos.com/blog/vulnerability-analysis-for-containers/>`__,\nis a very effective tool for statically analyzing docker images to\ndetermine which known vulnerabilities exist in the images. Integrating\nClair into a CI/CD pipeline:\n\n1. is complex (believe this is partly a documentation challenge)\n2. creates performance problems (building the Clair required Postgres\n   database of vulnerabilities is slow)\n3. in and of itself is insufficient from a risk assessment point of view\n   because once vulnerabilities are identified there\u2019s a lack of\n   prescriptive guidance on how to act on the identified vulnerabilities\n\nThis repo was created to address the above challenges.\n\nBackground\n----------\n\nThe roots of this repo center around the following beliefs:\n\n-  when inserted into a CI/CD pipeline\n   `Clair <https://github.com/coreos/clair>`__ can be a very effective\n   foundation for the automated assessment of Docker image vulnerability\n   risk\n-  services should be run in Docker containers and thus CI/CD pipelines\n   should be focused on the automated generation, assessment and\n   ultimately deployment of Docker images\n-  understanding and assessing the risk profile of services is important\n   ie. security is important\n-  Docker images should **not** be pushed to a Docker registry until\n   their risk profile is understood (this is an important one)\n-  the CI/CD pipeline has to be fast. how fast? ideally < 5 minutes\n   between code commit and automated (CD) deployment begins rolling out\n   a change\n-  there should be a clear division of responsibilities between those\n   who create a docker image (service engineer) and those who determine\n   the risk of vulnerabilities in a docker image (security analyst)\n-  the risk assessment process should generate evidence which can be\n   used to understand the risk assessment decision\n\nKey Participants\n----------------\n\n-  service engineer - responsible for implementing a service that is\n   packaged in a docker image\n-  security analyst - responsible for defining whitelists which are\n   consumed by ``clair_cicd`` to influence Docker image risk assessment\n   decisions\n\nHow to Use\n----------\n\nGetting Started\n~~~~~~~~~~~~~~~\n\nTo start using ``clair-cicd``, a service engineer inserts a single line\nof code into a service\u2019s CI pipeline. The single line of code runs the\nshell script\n`assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__.\nPart of the CI pipeline\u2019s responsibility is to build the docker image\nand then push that docker image to a docker registry. The single line of\n``clair-cicd`` code should appear after the docker image is built and\ntested but before the docker image is pushed to a docker registry.\n\nIn this simple case,\n`assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__\nreturns a zero exit status if the docker image contains no known\nvulnerabilities above a medium severity. If the docker image contains\nany known vulnerabilities with a severity higher than medium,\n`assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__\nreturns a non-zero exit status and the build fails ie. the build should\nfail before the docker image is pushed to a docker registry.\n\nThe example illustrates what\u2019s described about for the `alpine:3.4\ndocker image <https://hub.docker.com/_/alpine?tab=tags>`__.\n\n.. code:: bash\n\n   ~> curl -s -L \\\n     https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh | \\\n     bash -s -- alpine:3.4\n   ~> echo $?\n   0\n   ~>\n\nUnderstanding the Risk Assessment Decision\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nTo understand how ``assess-image-risk.sh`` is making its risk assessment\ndecision try using the ``-v`` flag.\n\n.. code:: bash\n\n   ~> curl -s -L \\\n     https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh | \\\n     bash -s -- -v alpine:3.4\n   2020-01-12 16:43:35 pulling clair database image 'simonsdave/clair-cicd-database:latest'\n   2020-01-12 16:44:17 successfully pulled clair database image\n   2020-01-12 16:44:17 starting clair database container 'clair-db-c1dbb5f93ae98755'\n   2020-01-12 16:44:23 waiting for database server in container 'clair-db-c1dbb5f93ae98755' to start ...........................\n   2020-01-12 16:44:54 successfully started clair database container\n   2020-01-12 16:44:54 clair configuration in '/var/folders/7x/rr443kj575s8zz54jrbrp4jc0000gn/T/tmp.ElAlhGNl'\n   2020-01-12 16:44:59 pulling clair image 'simonsdave/clair-cicd-clair:latest'\n   2020-01-12 16:45:13 successfully pulled clair image 'simonsdave/clair-cicd-clair:latest'\n   2020-01-12 16:45:13 starting clair container 'clair-e9573ae537134fa0'\n   2020-01-12 16:45:15 successfully started clair container 'clair-e9573ae537134fa0'\n   2020-01-12 16:45:15 saving docker image 'alpine:3.4' to '/tmp/tmp.IaNHCH'\n   2020-01-12 16:45:16 successfully saved docker image 'alpine:3.4'\n   2020-01-12 16:45:16 starting to create clair layers\n   2020-01-12 16:45:16 creating clair layer '378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'\n   2020-01-12 16:45:16 successfully created clair layer '378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'\n   2020-01-12 16:45:16 done creating clair layers\n   2020-01-12 16:45:16 starting to get vulnerabilities for clair layers\n   2020-01-12 16:45:16 saving vulnerabilities to directory '/tmp/tmp.MDncHN'\n   2020-01-12 16:45:16 getting vulnerabilities for layer '378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'\n   2020-01-12 16:45:16 successfully got vulnerabilities for layer '378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'\n   2020-01-12 16:45:16 done getting vulnerabilities for clair layers\n   2020-01-12 21:45:17 INFO io:89 Looking for vulnerabilities in directory '/tmp/tmp.MDncHN'\n   2020-01-12 21:45:17 INFO io:95 Found 1 files with vulnerabilities in directory '/tmp/tmp.MDncHN'\n   2020-01-12 21:45:17 INFO io:104 Looking for vulnerabilities in '/tmp/tmp.MDncHN/378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d.json'\n   2020-01-12 21:45:17 INFO io:122 Found 0 vulnerabilities in '/tmp/tmp.MDncHN/378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d.json'\n   2020-01-12 21:45:17 INFO io:133 Found 0 vulnerabilities in 1 files in directory '/tmp/tmp.MDncHN'\n   2020-01-12 21:45:17 INFO assessor:19 Assessment starts\n   2020-01-12 21:45:17 INFO assessor:26 Assessment ends - pass\n   ~> echo $?\n   0\n   ~>\n\nAdding a Vulnerability Whitelist\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nIn the above examples a default vulnerability whitelist was used. When\nspecified as a JSON doc, this whitelist would be:\n\n.. code:: json\n\n   {\n     \"ignoreSevertiesAtOrBelow\": \"medium\"\n   }\n\nBy default,\n`assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__\nreturns a non-zero exit status if any vulnerabilities are identified in\nthe image with a severity higher than medium. The medium is derived from\nthe default vulnerability whitelist.\n\nThe example below illustrate how to specify a vulnerability whitelist\nand with a severity other than medium. Note the use of the ``json://``\nprefix to indicate this is an inline whitelist.\n\n.. code:: bash\n\n   ~> curl -s -L \\\n     https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh | \\\n     bash -s -- -v --whitelist 'json://{\"ignoreSevertiesAtOrBelow\": \"negligible\"}' ubuntu:18.04\n   2020-01-12 16:46:56 pulling clair database image 'simonsdave/clair-cicd-database:latest'\n   2020-01-12 16:46:58 successfully pulled clair database image\n   2020-01-12 16:46:58 starting clair database container 'clair-db-3b0811925f7e8bc2'\n   2020-01-12 16:46:59 waiting for database server in container 'clair-db-3b0811925f7e8bc2' to start .............................\n   2020-01-12 16:47:32 successfully started clair database container\n   2020-01-12 16:47:32 clair configuration in '/var/folders/7x/rr443kj575s8zz54jrbrp4jc0000gn/T/tmp.BXCs3Giy'\n   2020-01-12 16:47:34 pulling clair image 'simonsdave/clair-cicd-clair:latest'\n   2020-01-12 16:47:36 successfully pulled clair image 'simonsdave/clair-cicd-clair:latest'\n   2020-01-12 16:47:36 starting clair container 'clair-fc579c71e7daba57'\n   2020-01-12 16:47:38 successfully started clair container 'clair-fc579c71e7daba57'\n   2020-01-12 16:47:38 saving docker image 'ubuntu:18.04' to '/tmp/tmp.lPDhNd'\n   2020-01-12 16:47:43 successfully saved docker image 'ubuntu:18.04'\n   2020-01-12 16:47:43 starting to create clair layers\n   2020-01-12 16:47:43 creating clair layer 'cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd'\n   2020-01-12 16:47:43 successfully created clair layer 'cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd'\n   2020-01-12 16:47:43 creating clair layer '27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54'\n   2020-01-12 16:47:44 successfully created clair layer '27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54'\n   2020-01-12 16:47:44 creating clair layer 'd80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e'\n   2020-01-12 16:47:44 successfully created clair layer 'd80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e'\n   2020-01-12 16:47:44 creating clair layer '1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d'\n   2020-01-12 16:47:44 successfully created clair layer '1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d'\n   2020-01-12 16:47:44 done creating clair layers\n   2020-01-12 16:47:44 starting to get vulnerabilities for clair layers\n   2020-01-12 16:47:44 saving vulnerabilities to directory '/tmp/tmp.dkfgmI'\n   2020-01-12 16:47:44 getting vulnerabilities for layer 'cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd'\n   2020-01-12 16:47:44 successfully got vulnerabilities for layer 'cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd'\n   2020-01-12 16:47:44 getting vulnerabilities for layer '27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54'\n   2020-01-12 16:47:44 successfully got vulnerabilities for layer '27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54'\n   2020-01-12 16:47:44 getting vulnerabilities for layer 'd80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e'\n   2020-01-12 16:47:44 successfully got vulnerabilities for layer 'd80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e'\n   2020-01-12 16:47:44 getting vulnerabilities for layer '1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d'\n   2020-01-12 16:47:44 successfully got vulnerabilities for layer '1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d'\n   2020-01-12 16:47:44 done getting vulnerabilities for clair layers\n   2020-01-12 21:47:45 INFO io:89 Looking for vulnerabilities in directory '/tmp/tmp.dkfgmI'\n   2020-01-12 21:47:45 INFO io:95 Found 4 files with vulnerabilities in directory '/tmp/tmp.dkfgmI'\n   2020-01-12 21:47:45 INFO io:104 Looking for vulnerabilities in '/tmp/tmp.dkfgmI/27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54.json'\n   2020-01-12 21:47:45 INFO io:122 Found 33 vulnerabilities in '/tmp/tmp.dkfgmI/27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54.json'\n   2020-01-12 21:47:45 INFO io:104 Looking for vulnerabilities in '/tmp/tmp.dkfgmI/cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd.json'\n   2020-01-12 21:47:45 INFO io:122 Found 33 vulnerabilities in '/tmp/tmp.dkfgmI/cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd.json'\n   2020-01-12 21:47:45 INFO io:104 Looking for vulnerabilities in '/tmp/tmp.dkfgmI/1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d.json'\n   2020-01-12 21:47:45 INFO io:122 Found 33 vulnerabilities in '/tmp/tmp.dkfgmI/1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d.json'\n   2020-01-12 21:47:45 INFO io:104 Looking for vulnerabilities in '/tmp/tmp.dkfgmI/d80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e.json'\n   2020-01-12 21:47:45 INFO io:122 Found 33 vulnerabilities in '/tmp/tmp.dkfgmI/d80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e.json'\n   2020-01-12 21:47:45 INFO io:133 Found 33 vulnerabilities in 4 files in directory '/tmp/tmp.dkfgmI'\n   2020-01-12 21:47:45 INFO assessor:19 Assessment starts\n   2020-01-12 21:47:45 INFO assessor:34 Assessing vulnerability CVE-2018-11236 - start\n   2020-01-12 21:47:45 INFO assessor:52 Vulnerability CVE-2018-11236 @ severity medium greater than whitelist severity @ negligible - fail\n   2020-01-12 21:47:45 INFO assessor:36 Assessing vulnerability CVE-2018-11236 - finish\n   2020-01-12 21:47:45 INFO assessor:23 Assessment ends - fail\n   ~> echo $?\n   1\n   ~>\n\nThe above is an example of an inline whitelist. It\u2019s also possible to\nspecify a whitelist in a file. The example below illustrates the usage.\nNote use of the ``file://`` prefix to indicate the whitelist is\ncontained in a file.\n\n.. code:: bash\n\n   ~> cat whitelist.json\n   {\n     \"ignoreSevertiesAtOrBelow\": \"medium\"\n   }\n   ~> curl -s -L \\\n     https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh | \\\n     bash -s -- -v --whitelist file://whitelist.json alpine:3.4\n   2020-01-12 16:48:41 pulling clair database image 'simonsdave/clair-cicd-database:latest'\n   2020-01-12 16:48:42 successfully pulled clair database image\n   2020-01-12 16:48:42 starting clair database container 'clair-db-191152e37b864e4b'\n   2020-01-12 16:48:43 waiting for database server in container 'clair-db-191152e37b864e4b' to start .............................\n   2020-01-12 16:49:16 successfully started clair database container\n   2020-01-12 16:49:16 clair configuration in '/var/folders/7x/rr443kj575s8zz54jrbrp4jc0000gn/T/tmp.GdlBNmiG'\n   2020-01-12 16:49:19 pulling clair image 'simonsdave/clair-cicd-clair:latest'\n   2020-01-12 16:49:20 successfully pulled clair image 'simonsdave/clair-cicd-clair:latest'\n   2020-01-12 16:49:20 starting clair container 'clair-747d1c50606fba7e'\n   2020-01-12 16:49:21 successfully started clair container 'clair-747d1c50606fba7e'\n   2020-01-12 16:49:22 saving docker image 'alpine:3.4' to '/tmp/tmp.Eldkbe'\n   2020-01-12 16:49:23 successfully saved docker image 'alpine:3.4'\n   2020-01-12 16:49:23 starting to create clair layers\n   2020-01-12 16:49:23 creating clair layer '378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'\n   2020-01-12 16:49:23 successfully created clair layer '378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'\n   2020-01-12 16:49:23 done creating clair layers\n   2020-01-12 16:49:23 starting to get vulnerabilities for clair layers\n   2020-01-12 16:49:23 saving vulnerabilities to directory '/tmp/tmp.pCOhlL'\n   2020-01-12 16:49:23 getting vulnerabilities for layer '378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'\n   2020-01-12 16:49:23 successfully got vulnerabilities for layer '378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'\n   2020-01-12 16:49:23 done getting vulnerabilities for clair layers\n   2020-01-12 21:49:23 INFO io:89 Looking for vulnerabilities in directory '/tmp/tmp.pCOhlL'\n   2020-01-12 21:49:23 INFO io:95 Found 1 files with vulnerabilities in directory '/tmp/tmp.pCOhlL'\n   2020-01-12 21:49:23 INFO io:104 Looking for vulnerabilities in '/tmp/tmp.pCOhlL/378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d.json'\n   2020-01-12 21:49:23 INFO io:122 Found 0 vulnerabilities in '/tmp/tmp.pCOhlL/378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d.json'\n   2020-01-12 21:49:23 INFO io:133 Found 0 vulnerabilities in 1 files in directory '/tmp/tmp.pCOhlL'\n   2020-01-12 21:49:23 INFO assessor:19 Assessment starts\n   2020-01-12 21:49:23 INFO assessor:26 Assessment ends - pass\n   ~> echo $?\n   0\n   ~>\n\nWhitelists can also contain vulnerabilities. The example below\nillustrates this capability. If you add the ``-v`` (verbose) flag to\n``assess-image-risk.sh`` you see exactly how the vulnerabilities impact\nthe risk assessment with statements like\n``Vulnerability CVE-2019-13627 in whitelist - pass``\n\n.. code:: bash\n\n   ~> curl -s -L \\\n     https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh | \\\n     bash -s -- --whitelist 'json://{\"ignoreSevertiesAtOrBelow\":\"low\"}' ubuntu:18.04\n   ~> echo $?\n   1\n   ~> cat whitelist.json\n   {\n     \"ignoreSevertiesAtOrBelow\": \"low\",\n     \"vulnerabilities\": [\n       { \"cveId\": \"CVE-2018-20839\", \"rationale\": \"reason #1\" },\n       { \"cveId\": \"CVE-2019-5188\", \"rationale\": \"reason #2\" },\n       { \"cveId\": \"CVE-2018-11236\", \"rationale\": \"reason #3\" },\n       { \"cveId\": \"CVE-2019-13627\", \"rationale\": \"reason #4\" },\n       { \"cveId\": \"CVE-2019-13050\", \"rationale\": \"reason #5\" },\n       { \"cveId\": \"CVE-2018-11237\", \"rationale\": \"reason #6\" },\n       { \"cveId\": \"CVE-2018-19591\", \"rationale\": \"reason #7\" }\n     ]\n   }\n   ~> curl -s -L \\\n     https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh | \\\n     bash -s -- --whitelist 'file://whitelist.json' ubuntu:18.04\n   ~> echo $?\n   0\n   ~>\n\nResponsibilities\n^^^^^^^^^^^^^^^^\n\n-  maintained by security analyst **not** service engineer\n-  checked into source code control and appropriate change management\n   processes are used to make changes (code reviews, feature branches,\n   etc)\n\nHow it Works + Requirements/Assumptions\n---------------------------------------\n\nThere are 3 moving pieces:\n\n1. `assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__\n   is bash script which does the heavy lifting to co-ordinate the\n   interaction of the 2 other moving pieces\n2. `Clair\u2019s <https://github.com/coreos/clair>`__ vulnerability database\n   which is packaged inside the docker image\n   `simonsdave/clair-database <https://hub.docker.com/r/simonsdave/clair-database/>`__\n   - a `CircleCI <https://circleci.com/>`__ cron job is used to rebuild\n   `simonsdave/clair-database <https://hub.docker.com/r/simonsdave/clair-database/>`__\n   3 days per week to ensure the vulnerability database is current\n3. a set of Python and Bash risk assessment scripts packaged in the\n   `simonsdave/clair-cicd-clair <https://hub.docker.com/r/simonsdave/clair-cicd-clair/>`__\n   docker image which is based on the docker image\n   `quay.io/coreos/clair <https://quay.io/repository/coreos/clair>`__\n   which packages up `Clair <https://github.com/coreos/clair>`__\n\nFrom the samples at the start of this doc you\u2019ll see the approach of\ncurl\u2019ing the latest release of\n`assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__\ninto a localy run bash shell.\n`assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__\nthen spins up a container using the\n`simonsdave/clair-database <https://hub.docker.com/r/simonsdave/clair-database/>`__.\nAnother container is then run using\n`simonsdave/clair-cicd-clair <https://hub.docker.com/r/simonsdave/clair-cicd-clair/>`__\nwith the\n`simonsdave/clair-cicd-clair <https://hub.docker.com/r/simonsdave/clair-cicd-clair/>`__\ncontainer being able to talk with the\n`simonsdave/clair-database <https://hub.docker.com/r/simonsdave/clair-database/>`__\ncontainer. Once the\n`simonsdave/clair-cicd-clair <https://hub.docker.com/r/simonsdave/clair-cicd-clair/>`__\ncontainer is running,\n`assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__\ndocker exec\u2019s `this bash\nscript <dockerfiles/clair/assess-image-risk.sh>`__ which does the actual\nrisk assessment.\n\nArmed with the understanding of how ``clair-cicd`` works you\u2019ll\nappreciate that the ability to execute\n`assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__\nis what defines the requirements for the execution environment.\n`assess-image-risk.sh <https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh>`__\nis a bash script used to launch the risk assessment process and as such\nit\u2019s this script which defines the bulk of the assumptions/requirements\nfor ``clair-cicd`` - the script uses docker, sed and openssl so all\nthese need to be available in the environment running ``clair-cicd``\n\nReferences\n----------\n\n-  `29 Jan \u201920 - What Is DevSecOps, and How Is It Different from\n   DevOps? <https://research.g2.com/insights/what-is-devsecops-and-how-is-it-different-from-devops>`__\n-  `1 Oct \u201918 - Baking Compliance in your CI/CD\n   Pipeline <https://thenewstack.io/baking-compliance-in-your-ci-cd-pipeline>`__\n-  `11 Sep \u201918 - What is\n   DevSecOps? <https://medium.com/@aditi.chaudhry92/what-is-devsecops-cb14cfd457b2>`__\n-  `20 Jun \u201918 - Where in the DevOps cycle do you do\n   security? <https://opensource.com/article/18/6/where-cycle-security-devops>`__\n-  `8 May \u201918 - DevSecOps: 7 habits of strong security\n   organizations <https://enterprisersproject.com/article/2018/5/devsecops-7-habits-strong-security-organizations>`__\n-  `18 Apr \u201918 - The Cloudcast #343 - Container Vulnerability\n   Scanning <http://www.thecloudcast.net/2018/04/the-cloudcast-343-container.html>`__\n-  `21 Feb \u201918 - Automated Compliance Testing Tool Accelerates\n   DevSecOps <https://www.securityweek.com/automated-compliance-testing-tool-accelerates-devsecops>`__\n-  `20 Feb \u201918 - 6 Requirements for Achieving\n   DevSecOps <https://securityboulevard.com/2018/02/6-requirements-for-achieving-devsecops/>`__\n-  `22 Jan \u201918 - DevOps and Security: How to Overcome Cultural\n   Challenges and Transform to True\n   DevSecOps <https://thenewstack.io/devops-security-overcome-cultural-challenges-transform-true-devsecops/>`__\n-  `15 Jan \u201918 - Why DevSecOps matters to IT\n   leaders <https://enterprisersproject.com/article/2018/1/why-devsecops-matters-it-leaders>`__\n-  `27 Nov \u201917 - What is vulnerability management? Processes and\n   software for prioritizing\n   threats <https://www.csoonline.com/article/3238080/vulnerabilities/what-is-vulnerability-management-processes-and-software-for-prioritizing-threats.html>`__\n-  `23 Oct \u201917 - The Ten Cybersecurity\n   Commandments <http://www.securityweek.com/ten-cybersecurity-commandments>`__\n-  `9 Oct \u201917 - 10 layers of Linux container\n   security <https://opensource.com/article/17/10/10-layers-container-security>`__\n-  `5 Oct \u201917 - How to Maintain Security when Rolling out\n   DevOps <https://www.informationweek.com/devops/how-to-maintain-security-when-rolling-out-devops/a/d-id/1330047?imm_mid=0f71d7&cmp=em-webops-na-na-newsltr_security_20171010_length_control>`__\n-  `26 Jan \u201917 - DevOps and Separation of\n   Duties <https://www.newcontext.com/devops-and-separation-of-duties/>`__\n-  `26 Jul \u201916 - Injecting security into Continuous\n   Delivery <https://www.oreilly.com/learning/injecting-security-into-continuous-delivery>`__\n-  `5 Jun \u201916 - <\u2014 Shifting Security to the\n   Left <http://www.devsecops.org/blog/2016/5/20/-security>`__\n-  `Five Secrets and Two Common \u201cGotchas\u201d of Vulnerability\n   Scanning <https://www.kennasecurity.com/resources/secrets-gotchas-of-vuln-scanning>`__\n\n.. |Maintained| image:: https://img.shields.io/maintenance/yes/2020.svg\n.. |MIT license| image:: http://img.shields.io/badge/license-MIT-brightgreen.svg\n   :target: http://opensource.org/licenses/MIT\n.. |PythonVersions| image:: https://img.shields.io/pypi/pyversions/clair-cicd.svg?style=flat\n.. |status| image:: https://img.shields.io/pypi/status/clair-cicd.svg?style=flat\n.. |PyPI| image:: https://img.shields.io/pypi/v/clair-cicd.svg?style=flat\n   :target: https://pypi.python.org/pypi/clair-cicd\n.. |Requirements| image:: https://requires.io/github/simonsdave/clair-cicd/requirements.svg?branch=release-1.0.2\n   :target: https://requires.io/github/simonsdave/clair-cicd/requirements/?branch=release-1.0.2\n.. |CircleCI| image:: https://circleci.com/gh/simonsdave/clair-cicd/tree/release-1.0.2.svg?style=shield\n   :target: https://circleci.com/gh/simonsdave/clair-cicd/tree/release-1.0.2\n.. |codecov| image:: https://codecov.io/gh/simonsdave/clair-cicd/branch/release-1.0.2/graph/badge.svg\n   :target: https://codecov.io/gh/simonsdave/clair-cicd/branch/release-1.0.2\n.. |docker-simonsdave/clair-cicd-database| image:: https://img.shields.io/badge/docker-simonsdave%2Fclair%20cicd%20database-blue.svg\n   :target: https://hub.docker.com/r/simonsdave/clair-cicd-database/\n.. |docker-simonsdave/clair-cicd-clair| image:: https://img.shields.io/badge/docker-simonsdave%2Fclair%20cicd%20clair-blue.svg\n   :target: https://hub.docker.com/r/simonsdave/clair-cicd-clair/\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "https://github.com/simonsdave/clair-cicd/tarball/v1.0.2", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/simonsdave/clair-cicd", "keywords": "development,tools", "license": "MIT", "maintainer": "Dave Simons", "maintainer_email": "simonsdave@gmail.com", "name": "clair-cicd", "package_url": "https://pypi.org/project/clair-cicd/", "platform": "", "project_url": "https://pypi.org/project/clair-cicd/", "project_urls": {"Download": "https://github.com/simonsdave/clair-cicd/tarball/v1.0.2", "Homepage": "https://github.com/simonsdave/clair-cicd"}, "release_url": "https://pypi.org/project/clair-cicd/1.0.2/", "requires_dist": ["jsonschema (==3.2.0)"], "requires_python": "", "summary": "Clair CI/CD", "version": "1.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><img alt=\"Maintained\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/bca9848d2e88f32d30644f64c783b3e5a5c161ed/68747470733a2f2f696d672e736869656c64732e696f2f6d61696e74656e616e63652f7965732f323032302e737667\"> <a href=\"http://opensource.org/licenses/MIT\" rel=\"nofollow\"><img alt=\"MIT license\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/273c229cce783df6c95a151db83b1f00cf93b97c/687474703a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d627269676874677265656e2e737667\"></a> <img alt=\"PythonVersions\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/049c22bb43b911669aaea1418789375b8360783d/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f636c6169722d636963642e7376673f7374796c653d666c6174\"> <img alt=\"status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/de68edf75a2215c8aa54d359754c979a2d996fd3/68747470733a2f2f696d672e736869656c64732e696f2f707970692f7374617475732f636c6169722d636963642e7376673f7374796c653d666c6174\"> <a href=\"https://pypi.python.org/pypi/clair-cicd\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/17d9ecda192f57fcd36f5f53f3db7d3f7b15e5b0/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f636c6169722d636963642e7376673f7374796c653d666c6174\"></a>\n<a href=\"https://requires.io/github/simonsdave/clair-cicd/requirements/?branch=release-1.0.2\" rel=\"nofollow\"><img alt=\"Requirements\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1fdabeef21f872ca65285eda992b5f4e97d9214d/68747470733a2f2f72657175697265732e696f2f6769746875622f73696d6f6e73646176652f636c6169722d636963642f726571756972656d656e74732e7376673f6272616e63683d72656c656173652d312e302e32\"></a> <a href=\"https://circleci.com/gh/simonsdave/clair-cicd/tree/release-1.0.2\" rel=\"nofollow\"><img alt=\"CircleCI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0510cec0a5f7a78ace9101d97d5fc9c238a27b17/68747470733a2f2f636972636c6563692e636f6d2f67682f73696d6f6e73646176652f636c6169722d636963642f747265652f72656c656173652d312e302e322e7376673f7374796c653d736869656c64\"></a> <a href=\"https://codecov.io/gh/simonsdave/clair-cicd/branch/release-1.0.2\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/84490a9303cd6084878ee2783273ff185374ffc9/68747470733a2f2f636f6465636f762e696f2f67682f73696d6f6e73646176652f636c6169722d636963642f6272616e63682f72656c656173652d312e302e322f67726170682f62616467652e737667\"></a>\n<a href=\"https://hub.docker.com/r/simonsdave/clair-cicd-database/\" rel=\"nofollow\"><img alt=\"docker-simonsdave/clair-cicd-database\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/545d55b7940584772470df607187782161d9126e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f636b65722d73696d6f6e7364617665253246636c6169722532306369636425323064617461626173652d626c75652e737667\"></a>\n<a href=\"https://hub.docker.com/r/simonsdave/clair-cicd-clair/\" rel=\"nofollow\"><img alt=\"docker-simonsdave/clair-cicd-clair\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b9f4412f15f01be896190f6cfafd9b4ffb963e22/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f636b65722d73696d6f6e7364617665253246636c61697225323063696364253230636c6169722d626c75652e737667\"></a></p>\n<p><a href=\"https://github.com/coreos/clair\" rel=\"nofollow\">Clair</a>, <a href=\"https://coreos.com/blog/vulnerability-analysis-for-containers/\" rel=\"nofollow\">released by CoreOS in Nov\n\u201916</a>,\nis a very effective tool for statically analyzing docker images to\ndetermine which known vulnerabilities exist in the images. Integrating\nClair into a CI/CD pipeline:</p>\n<ol>\n<li>is complex (believe this is partly a documentation challenge)</li>\n<li>creates performance problems (building the Clair required Postgres\ndatabase of vulnerabilities is slow)</li>\n<li>in and of itself is insufficient from a risk assessment point of view\nbecause once vulnerabilities are identified there\u2019s a lack of\nprescriptive guidance on how to act on the identified vulnerabilities</li>\n</ol>\n<p>This repo was created to address the above challenges.</p>\n<div id=\"background\">\n<h2>Background</h2>\n<p>The roots of this repo center around the following beliefs:</p>\n<ul>\n<li>when inserted into a CI/CD pipeline\n<a href=\"https://github.com/coreos/clair\" rel=\"nofollow\">Clair</a> can be a very effective\nfoundation for the automated assessment of Docker image vulnerability\nrisk</li>\n<li>services should be run in Docker containers and thus CI/CD pipelines\nshould be focused on the automated generation, assessment and\nultimately deployment of Docker images</li>\n<li>understanding and assessing the risk profile of services is important\nie. security is important</li>\n<li>Docker images should <strong>not</strong> be pushed to a Docker registry until\ntheir risk profile is understood (this is an important one)</li>\n<li>the CI/CD pipeline has to be fast. how fast? ideally &lt; 5 minutes\nbetween code commit and automated (CD) deployment begins rolling out\na change</li>\n<li>there should be a clear division of responsibilities between those\nwho create a docker image (service engineer) and those who determine\nthe risk of vulnerabilities in a docker image (security analyst)</li>\n<li>the risk assessment process should generate evidence which can be\nused to understand the risk assessment decision</li>\n</ul>\n</div>\n<div id=\"key-participants\">\n<h2>Key Participants</h2>\n<ul>\n<li>service engineer - responsible for implementing a service that is\npackaged in a docker image</li>\n<li>security analyst - responsible for defining whitelists which are\nconsumed by <tt>clair_cicd</tt> to influence Docker image risk assessment\ndecisions</li>\n</ul>\n</div>\n<div id=\"how-to-use\">\n<h2>How to Use</h2>\n<h2 id=\"getting-started\"><span class=\"section-subtitle\">Getting Started</span></h2>\n<p>To start using <tt><span class=\"pre\">clair-cicd</span></tt>, a service engineer inserts a single line\nof code into a service\u2019s CI pipeline. The single line of code runs the\nshell script\n<a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>.\nPart of the CI pipeline\u2019s responsibility is to build the docker image\nand then push that docker image to a docker registry. The single line of\n<tt><span class=\"pre\">clair-cicd</span></tt> code should appear after the docker image is built and\ntested but before the docker image is pushed to a docker registry.</p>\n<p>In this simple case,\n<a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>\nreturns a zero exit status if the docker image contains no known\nvulnerabilities above a medium severity. If the docker image contains\nany known vulnerabilities with a severity higher than medium,\n<a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>\nreturns a non-zero exit status and the build fails ie. the build should\nfail before the docker image is pushed to a docker registry.</p>\n<p>The example illustrates what\u2019s described about for the <a href=\"https://hub.docker.com/_/alpine?tab=tags\" rel=\"nofollow\">alpine:3.4\ndocker image</a>.</p>\n<pre>~&gt; curl -s -L <span class=\"se\">\\\n</span>  https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh <span class=\"p\">|</span> <span class=\"se\">\\\n</span>  bash -s -- alpine:3.4\n~&gt; <span class=\"nb\">echo</span> <span class=\"nv\">$?</span>\n<span class=\"m\">0</span>\n~&gt;\n</pre>\n<div id=\"understanding-the-risk-assessment-decision\">\n<h3>Understanding the Risk Assessment Decision</h3>\n<p>To understand how <tt><span class=\"pre\">assess-image-risk.sh</span></tt> is making its risk assessment\ndecision try using the <tt><span class=\"pre\">-v</span></tt> flag.</p>\n<pre>~&gt; curl -s -L <span class=\"se\">\\\n</span>  https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh <span class=\"p\">|</span> <span class=\"se\">\\\n</span>  bash -s -- -v alpine:3.4\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:43:35 pulling clair database image <span class=\"s1\">'simonsdave/clair-cicd-database:latest'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:44:17 successfully pulled clair database image\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:44:17 starting clair database container <span class=\"s1\">'clair-db-c1dbb5f93ae98755'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:44:23 waiting <span class=\"k\">for</span> database server in container <span class=\"s1\">'clair-db-c1dbb5f93ae98755'</span> to start ...........................\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:44:54 successfully started clair database container\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:44:54 clair configuration in <span class=\"s1\">'/var/folders/7x/rr443kj575s8zz54jrbrp4jc0000gn/T/tmp.ElAlhGNl'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:44:59 pulling clair image <span class=\"s1\">'simonsdave/clair-cicd-clair:latest'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:13 successfully pulled clair image <span class=\"s1\">'simonsdave/clair-cicd-clair:latest'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:13 starting clair container <span class=\"s1\">'clair-e9573ae537134fa0'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:15 successfully started clair container <span class=\"s1\">'clair-e9573ae537134fa0'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:15 saving docker image <span class=\"s1\">'alpine:3.4'</span> to <span class=\"s1\">'/tmp/tmp.IaNHCH'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 successfully saved docker image <span class=\"s1\">'alpine:3.4'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 starting to create clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 creating clair layer <span class=\"s1\">'378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 successfully created clair layer <span class=\"s1\">'378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 <span class=\"k\">done</span> creating clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 starting to get vulnerabilities <span class=\"k\">for</span> clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 saving vulnerabilities to directory <span class=\"s1\">'/tmp/tmp.MDncHN'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 getting vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 successfully got vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:45:16 <span class=\"k\">done</span> getting vulnerabilities <span class=\"k\">for</span> clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:45:17 INFO io:89 Looking <span class=\"k\">for</span> vulnerabilities in directory <span class=\"s1\">'/tmp/tmp.MDncHN'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:45:17 INFO io:95 Found <span class=\"m\">1</span> files with vulnerabilities in directory <span class=\"s1\">'/tmp/tmp.MDncHN'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:45:17 INFO io:104 Looking <span class=\"k\">for</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.MDncHN/378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:45:17 INFO io:122 Found <span class=\"m\">0</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.MDncHN/378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:45:17 INFO io:133 Found <span class=\"m\">0</span> vulnerabilities in <span class=\"m\">1</span> files in directory <span class=\"s1\">'/tmp/tmp.MDncHN'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:45:17 INFO assessor:19 Assessment starts\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:45:17 INFO assessor:26 Assessment ends - pass\n~&gt; <span class=\"nb\">echo</span> <span class=\"nv\">$?</span>\n<span class=\"m\">0</span>\n~&gt;\n</pre>\n</div>\n<div id=\"adding-a-vulnerability-whitelist\">\n<h3>Adding a Vulnerability Whitelist</h3>\n<p>In the above examples a default vulnerability whitelist was used. When\nspecified as a JSON doc, this whitelist would be:</p>\n<pre><span class=\"p\">{</span>\n  <span class=\"nt\">\"ignoreSevertiesAtOrBelow\"</span><span class=\"p\">:</span> <span class=\"s2\">\"medium\"</span>\n<span class=\"p\">}</span>\n</pre>\n<p>By default,\n<a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>\nreturns a non-zero exit status if any vulnerabilities are identified in\nthe image with a severity higher than medium. The medium is derived from\nthe default vulnerability whitelist.</p>\n<p>The example below illustrate how to specify a vulnerability whitelist\nand with a severity other than medium. Note the use of the <tt><span class=\"pre\">json://</span></tt>\nprefix to indicate this is an inline whitelist.</p>\n<pre>~&gt; curl -s -L <span class=\"se\">\\\n</span>  https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh <span class=\"p\">|</span> <span class=\"se\">\\\n</span>  bash -s -- -v --whitelist <span class=\"s1\">'json://{\"ignoreSevertiesAtOrBelow\": \"negligible\"}'</span> ubuntu:18.04\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:46:56 pulling clair database image <span class=\"s1\">'simonsdave/clair-cicd-database:latest'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:46:58 successfully pulled clair database image\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:46:58 starting clair database container <span class=\"s1\">'clair-db-3b0811925f7e8bc2'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:46:59 waiting <span class=\"k\">for</span> database server in container <span class=\"s1\">'clair-db-3b0811925f7e8bc2'</span> to start .............................\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:32 successfully started clair database container\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:32 clair configuration in <span class=\"s1\">'/var/folders/7x/rr443kj575s8zz54jrbrp4jc0000gn/T/tmp.BXCs3Giy'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:34 pulling clair image <span class=\"s1\">'simonsdave/clair-cicd-clair:latest'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:36 successfully pulled clair image <span class=\"s1\">'simonsdave/clair-cicd-clair:latest'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:36 starting clair container <span class=\"s1\">'clair-fc579c71e7daba57'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:38 successfully started clair container <span class=\"s1\">'clair-fc579c71e7daba57'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:38 saving docker image <span class=\"s1\">'ubuntu:18.04'</span> to <span class=\"s1\">'/tmp/tmp.lPDhNd'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:43 successfully saved docker image <span class=\"s1\">'ubuntu:18.04'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:43 starting to create clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:43 creating clair layer <span class=\"s1\">'cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:43 successfully created clair layer <span class=\"s1\">'cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:43 creating clair layer <span class=\"s1\">'27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 successfully created clair layer <span class=\"s1\">'27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 creating clair layer <span class=\"s1\">'d80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 successfully created clair layer <span class=\"s1\">'d80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 creating clair layer <span class=\"s1\">'1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 successfully created clair layer <span class=\"s1\">'1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 <span class=\"k\">done</span> creating clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 starting to get vulnerabilities <span class=\"k\">for</span> clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 saving vulnerabilities to directory <span class=\"s1\">'/tmp/tmp.dkfgmI'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 getting vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 successfully got vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 getting vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 successfully got vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 getting vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'d80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 successfully got vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'d80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 getting vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 successfully got vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:47:44 <span class=\"k\">done</span> getting vulnerabilities <span class=\"k\">for</span> clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:89 Looking <span class=\"k\">for</span> vulnerabilities in directory <span class=\"s1\">'/tmp/tmp.dkfgmI'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:95 Found <span class=\"m\">4</span> files with vulnerabilities in directory <span class=\"s1\">'/tmp/tmp.dkfgmI'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:104 Looking <span class=\"k\">for</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.dkfgmI/27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:122 Found <span class=\"m\">33</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.dkfgmI/27a911bb510bf1e9458437f0f44216fd38fd08c462ed7aa026d91aab8c054e54.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:104 Looking <span class=\"k\">for</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.dkfgmI/cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:122 Found <span class=\"m\">33</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.dkfgmI/cc59b0ca1cf21d77c81a98138703008daa167b1ab1a115849d498dba64e738dd.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:104 Looking <span class=\"k\">for</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.dkfgmI/1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:122 Found <span class=\"m\">33</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.dkfgmI/1ee34a985f7aef86436a5519f5ad83f866a74c7d9a0c22e47c4213ee9cb64e6d.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:104 Looking <span class=\"k\">for</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.dkfgmI/d80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:122 Found <span class=\"m\">33</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.dkfgmI/d80735acaa72040a0a98ca3ae6891f9abb4e2f5d627b4099c4fefdc3ce1e696e.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO io:133 Found <span class=\"m\">33</span> vulnerabilities in <span class=\"m\">4</span> files in directory <span class=\"s1\">'/tmp/tmp.dkfgmI'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO assessor:19 Assessment starts\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO assessor:34 Assessing vulnerability CVE-2018-11236 - start\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO assessor:52 Vulnerability CVE-2018-11236 @ severity medium greater than whitelist severity @ negligible - fail\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO assessor:36 Assessing vulnerability CVE-2018-11236 - finish\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:47:45 INFO assessor:23 Assessment ends - fail\n~&gt; <span class=\"nb\">echo</span> <span class=\"nv\">$?</span>\n<span class=\"m\">1</span>\n~&gt;\n</pre>\n<p>The above is an example of an inline whitelist. It\u2019s also possible to\nspecify a whitelist in a file. The example below illustrates the usage.\nNote use of the <tt><span class=\"pre\">file://</span></tt> prefix to indicate the whitelist is\ncontained in a file.</p>\n<pre>~&gt; cat whitelist.json\n<span class=\"o\">{</span>\n  <span class=\"s2\">\"ignoreSevertiesAtOrBelow\"</span>: <span class=\"s2\">\"medium\"</span>\n<span class=\"o\">}</span>\n~&gt; curl -s -L <span class=\"se\">\\\n</span>  https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh <span class=\"p\">|</span> <span class=\"se\">\\\n</span>  bash -s -- -v --whitelist file://whitelist.json alpine:3.4\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:48:41 pulling clair database image <span class=\"s1\">'simonsdave/clair-cicd-database:latest'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:48:42 successfully pulled clair database image\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:48:42 starting clair database container <span class=\"s1\">'clair-db-191152e37b864e4b'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:48:43 waiting <span class=\"k\">for</span> database server in container <span class=\"s1\">'clair-db-191152e37b864e4b'</span> to start .............................\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:16 successfully started clair database container\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:16 clair configuration in <span class=\"s1\">'/var/folders/7x/rr443kj575s8zz54jrbrp4jc0000gn/T/tmp.GdlBNmiG'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:19 pulling clair image <span class=\"s1\">'simonsdave/clair-cicd-clair:latest'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:20 successfully pulled clair image <span class=\"s1\">'simonsdave/clair-cicd-clair:latest'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:20 starting clair container <span class=\"s1\">'clair-747d1c50606fba7e'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:21 successfully started clair container <span class=\"s1\">'clair-747d1c50606fba7e'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:22 saving docker image <span class=\"s1\">'alpine:3.4'</span> to <span class=\"s1\">'/tmp/tmp.Eldkbe'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 successfully saved docker image <span class=\"s1\">'alpine:3.4'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 starting to create clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 creating clair layer <span class=\"s1\">'378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 successfully created clair layer <span class=\"s1\">'378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 <span class=\"k\">done</span> creating clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 starting to get vulnerabilities <span class=\"k\">for</span> clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 saving vulnerabilities to directory <span class=\"s1\">'/tmp/tmp.pCOhlL'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 getting vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 successfully got vulnerabilities <span class=\"k\">for</span> layer <span class=\"s1\">'378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">16</span>:49:23 <span class=\"k\">done</span> getting vulnerabilities <span class=\"k\">for</span> clair layers\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:49:23 INFO io:89 Looking <span class=\"k\">for</span> vulnerabilities in directory <span class=\"s1\">'/tmp/tmp.pCOhlL'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:49:23 INFO io:95 Found <span class=\"m\">1</span> files with vulnerabilities in directory <span class=\"s1\">'/tmp/tmp.pCOhlL'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:49:23 INFO io:104 Looking <span class=\"k\">for</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.pCOhlL/378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:49:23 INFO io:122 Found <span class=\"m\">0</span> vulnerabilities in <span class=\"s1\">'/tmp/tmp.pCOhlL/378cb6b4a17e08c366cebd813d218f60889848387fa61a56ac054ca027a4890d.json'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:49:23 INFO io:133 Found <span class=\"m\">0</span> vulnerabilities in <span class=\"m\">1</span> files in directory <span class=\"s1\">'/tmp/tmp.pCOhlL'</span>\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:49:23 INFO assessor:19 Assessment starts\n<span class=\"m\">2020</span>-01-12 <span class=\"m\">21</span>:49:23 INFO assessor:26 Assessment ends - pass\n~&gt; <span class=\"nb\">echo</span> <span class=\"nv\">$?</span>\n<span class=\"m\">0</span>\n~&gt;\n</pre>\n<p>Whitelists can also contain vulnerabilities. The example below\nillustrates this capability. If you add the <tt><span class=\"pre\">-v</span></tt> (verbose) flag to\n<tt><span class=\"pre\">assess-image-risk.sh</span></tt> you see exactly how the vulnerabilities impact\nthe risk assessment with statements like\n<tt>Vulnerability <span class=\"pre\">CVE-2019-13627</span> in whitelist - pass</tt></p>\n<pre>~&gt; curl -s -L <span class=\"se\">\\\n</span>  https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh <span class=\"p\">|</span> <span class=\"se\">\\\n</span>  bash -s -- --whitelist <span class=\"s1\">'json://{\"ignoreSevertiesAtOrBelow\":\"low\"}'</span> ubuntu:18.04\n~&gt; <span class=\"nb\">echo</span> <span class=\"nv\">$?</span>\n<span class=\"m\">1</span>\n~&gt; cat whitelist.json\n<span class=\"o\">{</span>\n  <span class=\"s2\">\"ignoreSevertiesAtOrBelow\"</span>: <span class=\"s2\">\"low\"</span>,\n  <span class=\"s2\">\"vulnerabilities\"</span>: <span class=\"o\">[</span>\n    <span class=\"o\">{</span> <span class=\"s2\">\"cveId\"</span>: <span class=\"s2\">\"CVE-2018-20839\"</span>, <span class=\"s2\">\"rationale\"</span>: <span class=\"s2\">\"reason #1\"</span> <span class=\"o\">}</span>,\n    <span class=\"o\">{</span> <span class=\"s2\">\"cveId\"</span>: <span class=\"s2\">\"CVE-2019-5188\"</span>, <span class=\"s2\">\"rationale\"</span>: <span class=\"s2\">\"reason #2\"</span> <span class=\"o\">}</span>,\n    <span class=\"o\">{</span> <span class=\"s2\">\"cveId\"</span>: <span class=\"s2\">\"CVE-2018-11236\"</span>, <span class=\"s2\">\"rationale\"</span>: <span class=\"s2\">\"reason #3\"</span> <span class=\"o\">}</span>,\n    <span class=\"o\">{</span> <span class=\"s2\">\"cveId\"</span>: <span class=\"s2\">\"CVE-2019-13627\"</span>, <span class=\"s2\">\"rationale\"</span>: <span class=\"s2\">\"reason #4\"</span> <span class=\"o\">}</span>,\n    <span class=\"o\">{</span> <span class=\"s2\">\"cveId\"</span>: <span class=\"s2\">\"CVE-2019-13050\"</span>, <span class=\"s2\">\"rationale\"</span>: <span class=\"s2\">\"reason #5\"</span> <span class=\"o\">}</span>,\n    <span class=\"o\">{</span> <span class=\"s2\">\"cveId\"</span>: <span class=\"s2\">\"CVE-2018-11237\"</span>, <span class=\"s2\">\"rationale\"</span>: <span class=\"s2\">\"reason #6\"</span> <span class=\"o\">}</span>,\n    <span class=\"o\">{</span> <span class=\"s2\">\"cveId\"</span>: <span class=\"s2\">\"CVE-2018-19591\"</span>, <span class=\"s2\">\"rationale\"</span>: <span class=\"s2\">\"reason #7\"</span> <span class=\"o\">}</span>\n  <span class=\"o\">]</span>\n<span class=\"o\">}</span>\n~&gt; curl -s -L <span class=\"se\">\\\n</span>  https://raw.githubusercontent.com/simonsdave/clair-cicd/master/bin/assess-image-risk.sh <span class=\"p\">|</span> <span class=\"se\">\\\n</span>  bash -s -- --whitelist <span class=\"s1\">'file://whitelist.json'</span> ubuntu:18.04\n~&gt; <span class=\"nb\">echo</span> <span class=\"nv\">$?</span>\n<span class=\"m\">0</span>\n~&gt;\n</pre>\n</div>\n<div id=\"responsibilities\">\n<h3>Responsibilities</h3>\n<ul>\n<li>maintained by security analyst <strong>not</strong> service engineer</li>\n<li>checked into source code control and appropriate change management\nprocesses are used to make changes (code reviews, feature branches,\netc)</li>\n</ul>\n</div>\n</div>\n<div id=\"how-it-works-requirements-assumptions\">\n<h2>How it Works + Requirements/Assumptions</h2>\n<p>There are 3 moving pieces:</p>\n<ol>\n<li><a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>\nis bash script which does the heavy lifting to co-ordinate the\ninteraction of the 2 other moving pieces</li>\n<li><a href=\"https://github.com/coreos/clair\" rel=\"nofollow\">Clair\u2019s</a> vulnerability database\nwhich is packaged inside the docker image\n<a href=\"https://hub.docker.com/r/simonsdave/clair-database/\" rel=\"nofollow\">simonsdave/clair-database</a>\n- a <a href=\"https://circleci.com/\" rel=\"nofollow\">CircleCI</a> cron job is used to rebuild\n<a href=\"https://hub.docker.com/r/simonsdave/clair-database/\" rel=\"nofollow\">simonsdave/clair-database</a>\n3 days per week to ensure the vulnerability database is current</li>\n<li>a set of Python and Bash risk assessment scripts packaged in the\n<a href=\"https://hub.docker.com/r/simonsdave/clair-cicd-clair/\" rel=\"nofollow\">simonsdave/clair-cicd-clair</a>\ndocker image which is based on the docker image\n<a href=\"https://quay.io/repository/coreos/clair\" rel=\"nofollow\">quay.io/coreos/clair</a>\nwhich packages up <a href=\"https://github.com/coreos/clair\" rel=\"nofollow\">Clair</a></li>\n</ol>\n<p>From the samples at the start of this doc you\u2019ll see the approach of\ncurl\u2019ing the latest release of\n<a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>\ninto a localy run bash shell.\n<a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>\nthen spins up a container using the\n<a href=\"https://hub.docker.com/r/simonsdave/clair-database/\" rel=\"nofollow\">simonsdave/clair-database</a>.\nAnother container is then run using\n<a href=\"https://hub.docker.com/r/simonsdave/clair-cicd-clair/\" rel=\"nofollow\">simonsdave/clair-cicd-clair</a>\nwith the\n<a href=\"https://hub.docker.com/r/simonsdave/clair-cicd-clair/\" rel=\"nofollow\">simonsdave/clair-cicd-clair</a>\ncontainer being able to talk with the\n<a href=\"https://hub.docker.com/r/simonsdave/clair-database/\" rel=\"nofollow\">simonsdave/clair-database</a>\ncontainer. Once the\n<a href=\"https://hub.docker.com/r/simonsdave/clair-cicd-clair/\" rel=\"nofollow\">simonsdave/clair-cicd-clair</a>\ncontainer is running,\n<a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>\ndocker exec\u2019s <a href=\"dockerfiles/clair/assess-image-risk.sh\" rel=\"nofollow\">this bash\nscript</a> which does the actual\nrisk assessment.</p>\n<p>Armed with the understanding of how <tt><span class=\"pre\">clair-cicd</span></tt> works you\u2019ll\nappreciate that the ability to execute\n<a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>\nis what defines the requirements for the execution environment.\n<a href=\"https://github.com/simonsdave/clair-cicd/blob/release-1.0.2/bin/assess-image-risk.sh\" rel=\"nofollow\">assess-image-risk.sh</a>\nis a bash script used to launch the risk assessment process and as such\nit\u2019s this script which defines the bulk of the assumptions/requirements\nfor <tt><span class=\"pre\">clair-cicd</span></tt> - the script uses docker, sed and openssl so all\nthese need to be available in the environment running <tt><span class=\"pre\">clair-cicd</span></tt></p>\n</div>\n<div id=\"references\">\n<h2>References</h2>\n<ul>\n<li><a href=\"https://research.g2.com/insights/what-is-devsecops-and-how-is-it-different-from-devops\" rel=\"nofollow\">29 Jan \u201920 - What Is DevSecOps, and How Is It Different from\nDevOps?</a></li>\n<li><a href=\"https://thenewstack.io/baking-compliance-in-your-ci-cd-pipeline\" rel=\"nofollow\">1 Oct \u201918 - Baking Compliance in your CI/CD\nPipeline</a></li>\n<li><a href=\"https://medium.com/@aditi.chaudhry92/what-is-devsecops-cb14cfd457b2\" rel=\"nofollow\">11 Sep \u201918 - What is\nDevSecOps?</a></li>\n<li><a href=\"https://opensource.com/article/18/6/where-cycle-security-devops\" rel=\"nofollow\">20 Jun \u201918 - Where in the DevOps cycle do you do\nsecurity?</a></li>\n<li><a href=\"https://enterprisersproject.com/article/2018/5/devsecops-7-habits-strong-security-organizations\" rel=\"nofollow\">8 May \u201918 - DevSecOps: 7 habits of strong security\norganizations</a></li>\n<li><a href=\"http://www.thecloudcast.net/2018/04/the-cloudcast-343-container.html\" rel=\"nofollow\">18 Apr \u201918 - The Cloudcast #343 - Container Vulnerability\nScanning</a></li>\n<li><a href=\"https://www.securityweek.com/automated-compliance-testing-tool-accelerates-devsecops\" rel=\"nofollow\">21 Feb \u201918 - Automated Compliance Testing Tool Accelerates\nDevSecOps</a></li>\n<li><a href=\"https://securityboulevard.com/2018/02/6-requirements-for-achieving-devsecops/\" rel=\"nofollow\">20 Feb \u201918 - 6 Requirements for Achieving\nDevSecOps</a></li>\n<li><a href=\"https://thenewstack.io/devops-security-overcome-cultural-challenges-transform-true-devsecops/\" rel=\"nofollow\">22 Jan \u201918 - DevOps and Security: How to Overcome Cultural\nChallenges and Transform to True\nDevSecOps</a></li>\n<li><a href=\"https://enterprisersproject.com/article/2018/1/why-devsecops-matters-it-leaders\" rel=\"nofollow\">15 Jan \u201918 - Why DevSecOps matters to IT\nleaders</a></li>\n<li><a href=\"https://www.csoonline.com/article/3238080/vulnerabilities/what-is-vulnerability-management-processes-and-software-for-prioritizing-threats.html\" rel=\"nofollow\">27 Nov \u201917 - What is vulnerability management? Processes and\nsoftware for prioritizing\nthreats</a></li>\n<li><a href=\"http://www.securityweek.com/ten-cybersecurity-commandments\" rel=\"nofollow\">23 Oct \u201917 - The Ten Cybersecurity\nCommandments</a></li>\n<li><a href=\"https://opensource.com/article/17/10/10-layers-container-security\" rel=\"nofollow\">9 Oct \u201917 - 10 layers of Linux container\nsecurity</a></li>\n<li><a href=\"https://www.informationweek.com/devops/how-to-maintain-security-when-rolling-out-devops/a/d-id/1330047?imm_mid=0f71d7&amp;cmp=em-webops-na-na-newsltr_security_20171010_length_control\" rel=\"nofollow\">5 Oct \u201917 - How to Maintain Security when Rolling out\nDevOps</a></li>\n<li><a href=\"https://www.newcontext.com/devops-and-separation-of-duties/\" rel=\"nofollow\">26 Jan \u201917 - DevOps and Separation of\nDuties</a></li>\n<li><a href=\"https://www.oreilly.com/learning/injecting-security-into-continuous-delivery\" rel=\"nofollow\">26 Jul \u201916 - Injecting security into Continuous\nDelivery</a></li>\n<li><a href=\"http://www.devsecops.org/blog/2016/5/20/-security\" rel=\"nofollow\">5 Jun \u201916 - &lt;\u2014 Shifting Security to the\nLeft</a></li>\n<li><a href=\"https://www.kennasecurity.com/resources/secrets-gotchas-of-vuln-scanning\" rel=\"nofollow\">Five Secrets and Two Common \u201cGotchas\u201d of Vulnerability\nScanning</a></li>\n</ul>\n</div>\n\n          </div>"}, "last_serial": 6682472, "releases": {"1.0.2": [{"comment_text": "", "digests": {"md5": "ffbbc675b3bbd308e82ba7d6e6603f0c", "sha256": "8186fbe9cc987ac58b2960e455e9b2548dfbb643956f908434e540132658bf8a"}, "downloads": -1, "filename": "clair_cicd-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "ffbbc675b3bbd308e82ba7d6e6603f0c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 20187, "upload_time": "2020-02-23T00:28:06", "upload_time_iso_8601": "2020-02-23T00:28:06.575969Z", "url": "https://files.pythonhosted.org/packages/ff/9a/b5012a106a3f41836fcc9fe4d85bd38ed0649bcdcb20566f603249ae49f6/clair_cicd-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "55ff9b9a77c394e1b617a1b5a50c8b90", "sha256": "1dcf245526e245b8e713c49ff818849908644baa9445de76777f79eca81e3c00"}, "downloads": -1, "filename": "clair-cicd-1.0.2.tar.gz", "has_sig": false, "md5_digest": "55ff9b9a77c394e1b617a1b5a50c8b90", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 19181, "upload_time": "2020-02-23T00:28:09", "upload_time_iso_8601": "2020-02-23T00:28:09.098939Z", "url": "https://files.pythonhosted.org/packages/37/b6/fbe9c9f75857f669411d3e9f7687052bcd2f854ad628faf5df9ef2b2a964/clair-cicd-1.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "ffbbc675b3bbd308e82ba7d6e6603f0c", "sha256": "8186fbe9cc987ac58b2960e455e9b2548dfbb643956f908434e540132658bf8a"}, "downloads": -1, "filename": "clair_cicd-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "ffbbc675b3bbd308e82ba7d6e6603f0c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 20187, "upload_time": "2020-02-23T00:28:06", "upload_time_iso_8601": "2020-02-23T00:28:06.575969Z", "url": "https://files.pythonhosted.org/packages/ff/9a/b5012a106a3f41836fcc9fe4d85bd38ed0649bcdcb20566f603249ae49f6/clair_cicd-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "55ff9b9a77c394e1b617a1b5a50c8b90", "sha256": "1dcf245526e245b8e713c49ff818849908644baa9445de76777f79eca81e3c00"}, "downloads": -1, "filename": "clair-cicd-1.0.2.tar.gz", "has_sig": false, "md5_digest": "55ff9b9a77c394e1b617a1b5a50c8b90", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 19181, "upload_time": "2020-02-23T00:28:09", "upload_time_iso_8601": "2020-02-23T00:28:09.098939Z", "url": "https://files.pythonhosted.org/packages/37/b6/fbe9c9f75857f669411d3e9f7687052bcd2f854ad628faf5df9ef2b2a964/clair-cicd-1.0.2.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:19:11 2020"}