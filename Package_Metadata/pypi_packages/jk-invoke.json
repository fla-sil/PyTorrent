{"info": {"author": "J\u00fcrgen Knauth", "author_email": "pubsrc@binary-overflow.de", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "License :: OSI Approved :: Apache Software License"], "description": "jk_invoke\n==========\n\nIntroduction\n------------\n\nThis python module provides a high level interface to provide a clean API for executing commands and reading and writing files transparently: It doesn't matter if you operate locally or remotely or as a regular user or as root via sudo.\n\nInformation about this module can be found here:\n\n* [github.org](https://github.com/jkpubsrc/python-module-jk-invoke)\n* [pypi.python.org](https://pypi.python.org/pypi/jk_invoke)\n\nWhy this module?\n----------------\n\nIf you need to automate system administration tasks it is convenient if you do not need to distinguish between local or remote operation. This library wraps around `fabric` (which in turn wraps around `paramiko` and `invoke`) in order to streamline system administration tasks.\n\nLimitations of this module\n--------------------------\n\nThis module provides capabilities for:\n* executing commands and process the data returned\n* read individual files\n* store individual files\n\nNothing more. So it's use is quite limited. Nevertheless this exactly fits requirements for system administration.\n\nHow to use this module\n----------------------\n\n### Import this module\n\nPlease include this module into your application using the following code:\n\n```python\nimport jk_invoke\n```\n\n### Instantiate a password provider\n\nYou require a password provider. This object provides a password whenever it is required.\n\nThe following password providers are implemented:\n\n* `InteractivePasswordProvider`\n* `OneSlotPasswordProvider`\n\nIt is extremely easy to implemnt your own password provider. (For details see section \"Extending jk_invoke\" below.)\n\n### Instantiate an invoker\n\nThere are two invokers available for use:\n* `LocalInvoker` - This class should be used of you want to work with the local system.\n* `RemoteInvoker` - This class should be used of you want to work with a remote system.\n\nAn instance of `LocalInvoker` will require these arguments:\n* `callable passwordProvider` - An object that provides the password; required\n* `int localSSHPort` - An integer that tells the system about the local SSH port; optional: if `None` the port will be autodetected via `/etc/ssh/sshd_config`\n\nThe SSH port is required if you intend to use `sudo`. (Though technically we could follow different approaches for ease of implementation an SSH connection to the local machine is initiated on *sudo*.)\n\nExample:\n\n```python\ninvoker = jk_invoke.LocalInvoker(\n\tjk_invoke.InteractivePasswordProvider(),\n\t)\n```\n\nAn instance of `RemoteInvoker` will require these arguments:\n* `str hostName` - The host to connect to; required\n* `int port` - The TCP port to use during connect; required\n* `str userName` - The user name to use for login; required\n* `callable passwordProvider` - An object that provides the password for login; required\n\nExample:\n\n```python\ninvoker = jk_invoke.RemoteInvoker(\n\t\"localhost\",\n\t22,\n\t\"someuser\",\n\tjk_invoke.InteractivePasswordProvider(),\n\t)\n```\n\n### Execute a command\n\nThis is how you can execute a command:\n\n```python\nret = invoker.runCmd(\"/usr/bin/id\")\n```\n\nThe data returned is of type `CommandResult`. This object provides:\n* the STDOUT data\n* the STDOUT data splitted into lines\n* the STDERR data\n* the STDERR data splitted into lines\n* the command exit code\n* the duration of execution in seconds\n\n### Read a text file\n\nThis is how you can read the contents of a text file:\n\n```python\nret = invoker.readTextFile(\"/etc/hostname\")\n```\n\nThe data returned is of type `str`.\n\n### Write a text file\n\nThis is how you can read the contents of a text file:\n\n```python\ninvoker.writeTextFile(\"/tmp/someFile\", \"abcXYZ123\")\n```\n\nThis method returns no data.\n\n### Perform operations as super user\n\nIn order to run commands, read or write files as super user, use the `sudo()` method to obtain another invoker. Example:\n\n```python\nsudoInvoker = invoker.sudo()\nret = sudoInvoker.readTextFile(\"/etc/hostname\")\n```\n\nThe methods `runCmd()` and `writeTextFile()` can be used likewise and transparently.\n\nExtending jk_invoke\n-------------------\n\n### Implement custom password providers\n\nIf you want to write an adapter for using `jk_invoke` in a different context, this is easy by providing a new password provider.\n\nA custom password provider must meet the following requirements:\n\n* It must be a callable object.\n* If called two arguments are passed to the `__call__()` method:\n\t* `str machineName` - The machine to connect to\n\t* `str loginName` - The login name to use during connect\n* On call you must return a string: The password to use on connect.\n\nThat's it. If you meet these requirements your password provider will perfectly work.\n\nA prototype to start from could be the following code:\n\n```python\nclass MyPasswordProvider(object):\n\n\tdef __init__(self, thePassword:str):\n\t\tself.__pwd = thePassword\n\n\tdef __call__(self, machineName:str, loginName:str) -> str:\n\t\treturn self.__pwd\n\n```\n\nContact Information\n-------------------\n\nThis work is Open Source. This enables you to use this work for free.\n\nPlease have in mind this also enables you to contribute. We, the subspecies of software developers, can create great things. But the more collaborate, the more fantastic these things can become. Therefore Feel free to contact the author(s) listed below, either for giving feedback, providing comments, hints, indicate possible collaborations, ideas, improvements. Or maybe for \"only\" reporting some bugs:\n\n* J\u00fcrgen Knauth: jknauth@uni-goettingen.de, pubsrc@binary-overflow.de\n\nLicense\n-------\n\nThis software is provided under the following license:\n\n* Apache Software License 2.0", "description_content_type": "text/markdown", "docs_url": null, "download_url": "https://github.com/jkpubsrc/python-module-jk-invoke/tarball/0.2020.4.6", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/jkpubsrc/python-module-jk-invoke", "keywords": "ssh", "license": "Apache 2.0", "maintainer": "", "maintainer_email": "", "name": "jk-invoke", "package_url": "https://pypi.org/project/jk-invoke/", "platform": "", "project_url": "https://pypi.org/project/jk-invoke/", "project_urls": {"Download": "https://github.com/jkpubsrc/python-module-jk-invoke/tarball/0.2020.4.6", "Homepage": "https://github.com/jkpubsrc/python-module-jk-invoke"}, "release_url": "https://pypi.org/project/jk-invoke/0.2020.4.6/", "requires_dist": null, "requires_python": "", "summary": "This python module provides a high level interface to provide a clean API for executing commands and reading and writing files transparently: It doesn't matter if you operate locally or remotely or as a regular user or as root via sudo.", "version": "0.2020.4.6", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>jk_invoke</h1>\n<h2>Introduction</h2>\n<p>This python module provides a high level interface to provide a clean API for executing commands and reading and writing files transparently: It doesn't matter if you operate locally or remotely or as a regular user or as root via sudo.</p>\n<p>Information about this module can be found here:</p>\n<ul>\n<li><a href=\"https://github.com/jkpubsrc/python-module-jk-invoke\" rel=\"nofollow\">github.org</a></li>\n<li><a href=\"https://pypi.python.org/pypi/jk_invoke\" rel=\"nofollow\">pypi.python.org</a></li>\n</ul>\n<h2>Why this module?</h2>\n<p>If you need to automate system administration tasks it is convenient if you do not need to distinguish between local or remote operation. This library wraps around <code>fabric</code> (which in turn wraps around <code>paramiko</code> and <code>invoke</code>) in order to streamline system administration tasks.</p>\n<h2>Limitations of this module</h2>\n<p>This module provides capabilities for:</p>\n<ul>\n<li>executing commands and process the data returned</li>\n<li>read individual files</li>\n<li>store individual files</li>\n</ul>\n<p>Nothing more. So it's use is quite limited. Nevertheless this exactly fits requirements for system administration.</p>\n<h2>How to use this module</h2>\n<h3>Import this module</h3>\n<p>Please include this module into your application using the following code:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">jk_invoke</span>\n</pre>\n<h3>Instantiate a password provider</h3>\n<p>You require a password provider. This object provides a password whenever it is required.</p>\n<p>The following password providers are implemented:</p>\n<ul>\n<li><code>InteractivePasswordProvider</code></li>\n<li><code>OneSlotPasswordProvider</code></li>\n</ul>\n<p>It is extremely easy to implemnt your own password provider. (For details see section \"Extending jk_invoke\" below.)</p>\n<h3>Instantiate an invoker</h3>\n<p>There are two invokers available for use:</p>\n<ul>\n<li><code>LocalInvoker</code> - This class should be used of you want to work with the local system.</li>\n<li><code>RemoteInvoker</code> - This class should be used of you want to work with a remote system.</li>\n</ul>\n<p>An instance of <code>LocalInvoker</code> will require these arguments:</p>\n<ul>\n<li><code>callable passwordProvider</code> - An object that provides the password; required</li>\n<li><code>int localSSHPort</code> - An integer that tells the system about the local SSH port; optional: if <code>None</code> the port will be autodetected via <code>/etc/ssh/sshd_config</code></li>\n</ul>\n<p>The SSH port is required if you intend to use <code>sudo</code>. (Though technically we could follow different approaches for ease of implementation an SSH connection to the local machine is initiated on <em>sudo</em>.)</p>\n<p>Example:</p>\n<pre><span class=\"n\">invoker</span> <span class=\"o\">=</span> <span class=\"n\">jk_invoke</span><span class=\"o\">.</span><span class=\"n\">LocalInvoker</span><span class=\"p\">(</span>\n\t<span class=\"n\">jk_invoke</span><span class=\"o\">.</span><span class=\"n\">InteractivePasswordProvider</span><span class=\"p\">(),</span>\n\t<span class=\"p\">)</span>\n</pre>\n<p>An instance of <code>RemoteInvoker</code> will require these arguments:</p>\n<ul>\n<li><code>str hostName</code> - The host to connect to; required</li>\n<li><code>int port</code> - The TCP port to use during connect; required</li>\n<li><code>str userName</code> - The user name to use for login; required</li>\n<li><code>callable passwordProvider</code> - An object that provides the password for login; required</li>\n</ul>\n<p>Example:</p>\n<pre><span class=\"n\">invoker</span> <span class=\"o\">=</span> <span class=\"n\">jk_invoke</span><span class=\"o\">.</span><span class=\"n\">RemoteInvoker</span><span class=\"p\">(</span>\n\t<span class=\"s2\">\"localhost\"</span><span class=\"p\">,</span>\n\t<span class=\"mi\">22</span><span class=\"p\">,</span>\n\t<span class=\"s2\">\"someuser\"</span><span class=\"p\">,</span>\n\t<span class=\"n\">jk_invoke</span><span class=\"o\">.</span><span class=\"n\">InteractivePasswordProvider</span><span class=\"p\">(),</span>\n\t<span class=\"p\">)</span>\n</pre>\n<h3>Execute a command</h3>\n<p>This is how you can execute a command:</p>\n<pre><span class=\"n\">ret</span> <span class=\"o\">=</span> <span class=\"n\">invoker</span><span class=\"o\">.</span><span class=\"n\">runCmd</span><span class=\"p\">(</span><span class=\"s2\">\"/usr/bin/id\"</span><span class=\"p\">)</span>\n</pre>\n<p>The data returned is of type <code>CommandResult</code>. This object provides:</p>\n<ul>\n<li>the STDOUT data</li>\n<li>the STDOUT data splitted into lines</li>\n<li>the STDERR data</li>\n<li>the STDERR data splitted into lines</li>\n<li>the command exit code</li>\n<li>the duration of execution in seconds</li>\n</ul>\n<h3>Read a text file</h3>\n<p>This is how you can read the contents of a text file:</p>\n<pre><span class=\"n\">ret</span> <span class=\"o\">=</span> <span class=\"n\">invoker</span><span class=\"o\">.</span><span class=\"n\">readTextFile</span><span class=\"p\">(</span><span class=\"s2\">\"/etc/hostname\"</span><span class=\"p\">)</span>\n</pre>\n<p>The data returned is of type <code>str</code>.</p>\n<h3>Write a text file</h3>\n<p>This is how you can read the contents of a text file:</p>\n<pre><span class=\"n\">invoker</span><span class=\"o\">.</span><span class=\"n\">writeTextFile</span><span class=\"p\">(</span><span class=\"s2\">\"/tmp/someFile\"</span><span class=\"p\">,</span> <span class=\"s2\">\"abcXYZ123\"</span><span class=\"p\">)</span>\n</pre>\n<p>This method returns no data.</p>\n<h3>Perform operations as super user</h3>\n<p>In order to run commands, read or write files as super user, use the <code>sudo()</code> method to obtain another invoker. Example:</p>\n<pre><span class=\"n\">sudoInvoker</span> <span class=\"o\">=</span> <span class=\"n\">invoker</span><span class=\"o\">.</span><span class=\"n\">sudo</span><span class=\"p\">()</span>\n<span class=\"n\">ret</span> <span class=\"o\">=</span> <span class=\"n\">sudoInvoker</span><span class=\"o\">.</span><span class=\"n\">readTextFile</span><span class=\"p\">(</span><span class=\"s2\">\"/etc/hostname\"</span><span class=\"p\">)</span>\n</pre>\n<p>The methods <code>runCmd()</code> and <code>writeTextFile()</code> can be used likewise and transparently.</p>\n<h2>Extending jk_invoke</h2>\n<h3>Implement custom password providers</h3>\n<p>If you want to write an adapter for using <code>jk_invoke</code> in a different context, this is easy by providing a new password provider.</p>\n<p>A custom password provider must meet the following requirements:</p>\n<ul>\n<li>It must be a callable object.</li>\n<li>If called two arguments are passed to the <code>__call__()</code> method:\n<ul>\n<li><code>str machineName</code> - The machine to connect to</li>\n<li><code>str loginName</code> - The login name to use during connect</li>\n</ul>\n</li>\n<li>On call you must return a string: The password to use on connect.</li>\n</ul>\n<p>That's it. If you meet these requirements your password provider will perfectly work.</p>\n<p>A prototype to start from could be the following code:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">MyPasswordProvider</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n\n\t<span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">thePassword</span><span class=\"p\">:</span><span class=\"nb\">str</span><span class=\"p\">):</span>\n\t\t<span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__pwd</span> <span class=\"o\">=</span> <span class=\"n\">thePassword</span>\n\n\t<span class=\"k\">def</span> <span class=\"fm\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">machineName</span><span class=\"p\">:</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">loginName</span><span class=\"p\">:</span><span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">str</span><span class=\"p\">:</span>\n\t\t<span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__pwd</span>\n</pre>\n<h2>Contact Information</h2>\n<p>This work is Open Source. This enables you to use this work for free.</p>\n<p>Please have in mind this also enables you to contribute. We, the subspecies of software developers, can create great things. But the more collaborate, the more fantastic these things can become. Therefore Feel free to contact the author(s) listed below, either for giving feedback, providing comments, hints, indicate possible collaborations, ideas, improvements. Or maybe for \"only\" reporting some bugs:</p>\n<ul>\n<li>J\u00fcrgen Knauth: <a href=\"mailto:jknauth@uni-goettingen.de\">jknauth@uni-goettingen.de</a>, <a href=\"mailto:pubsrc@binary-overflow.de\">pubsrc@binary-overflow.de</a></li>\n</ul>\n<h2>License</h2>\n<p>This software is provided under the following license:</p>\n<ul>\n<li>Apache Software License 2.0</li>\n</ul>\n\n          </div>"}, "last_serial": 6959813, "releases": {"0.2020.3.31": [{"comment_text": "", "digests": {"md5": "088d3853d3690cb782b9f0b020e3abe9", "sha256": "b9a5d74b7f7b183cf0e4822f21d30c7375f7aa86f7715684d14d28ebff0ec956"}, "downloads": -1, "filename": "jk_invoke-0.2020.3.31.tar.gz", "has_sig": false, "md5_digest": "088d3853d3690cb782b9f0b020e3abe9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14521, "upload_time": "2020-03-31T16:38:47", "upload_time_iso_8601": "2020-03-31T16:38:47.777666Z", "url": "https://files.pythonhosted.org/packages/f6/3f/3b997024812cc7aecec8fa4f9a2dc64e1d40745e6ad954268f5406a3bdb7/jk_invoke-0.2020.3.31.tar.gz", "yanked": false}], "0.2020.4.1": [{"comment_text": "", "digests": {"md5": "ad0311e9079195ce7b3fa74bab8e99f8", "sha256": "4a60e13f99cbf5e043df42ddefa74bfa3df7e4daf488f6d5e73c1846bc55cf4d"}, "downloads": -1, "filename": "jk_invoke-0.2020.4.1.tar.gz", "has_sig": false, "md5_digest": "ad0311e9079195ce7b3fa74bab8e99f8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14558, "upload_time": "2020-04-01T04:26:32", "upload_time_iso_8601": "2020-04-01T04:26:32.550930Z", "url": "https://files.pythonhosted.org/packages/e8/6b/6acad8042f8acdb3059750d19ece30655319ecbcb11e46e8b038226d579a/jk_invoke-0.2020.4.1.tar.gz", "yanked": false}], "0.2020.4.1.1": [{"comment_text": "", "digests": {"md5": "9c40ef148bb5ac2c0c2c59ef1e8272af", "sha256": "8a7c275560cdd3b5c87fdc6697c2eb0a756d9549f688640fb118ce7e3b280c10"}, "downloads": -1, "filename": "jk_invoke-0.2020.4.1.1.tar.gz", "has_sig": false, "md5_digest": "9c40ef148bb5ac2c0c2c59ef1e8272af", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14628, "upload_time": "2020-04-01T04:34:37", "upload_time_iso_8601": "2020-04-01T04:34:37.676261Z", "url": "https://files.pythonhosted.org/packages/63/23/acfae40733cc525377d05346a787f90d4c95cc42b8fd714df086855ceee4/jk_invoke-0.2020.4.1.1.tar.gz", "yanked": false}], "0.2020.4.1.2": [{"comment_text": "", "digests": {"md5": "0c49a3be79d503e578fe59a8cf1447fa", "sha256": "48fc04bc4a856e4149c38933906651b2c9e59fb35cec739d627213134edf7da9"}, "downloads": -1, "filename": "jk_invoke-0.2020.4.1.2.tar.gz", "has_sig": false, "md5_digest": "0c49a3be79d503e578fe59a8cf1447fa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14860, "upload_time": "2020-04-01T13:47:14", "upload_time_iso_8601": "2020-04-01T13:47:14.358315Z", "url": "https://files.pythonhosted.org/packages/e9/a7/4b1cc2a16179c5cce4ac5308eb82a20b648a2302403fd8161782072a3a11/jk_invoke-0.2020.4.1.2.tar.gz", "yanked": false}], "0.2020.4.6": [{"comment_text": "", "digests": {"md5": "566a3cbe725499b9b34469dd9de02806", "sha256": "c4813dc04ee18d37d1ff4edcda7a9ef5472f6c62f80395e3106994f0b2091348"}, "downloads": -1, "filename": "jk_invoke-0.2020.4.6.tar.gz", "has_sig": false, "md5_digest": "566a3cbe725499b9b34469dd9de02806", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14857, "upload_time": "2020-04-06T07:43:07", "upload_time_iso_8601": "2020-04-06T07:43:07.630001Z", "url": "https://files.pythonhosted.org/packages/ae/b6/e6252dc710c4fa9e5621bb5184c5c6c6f4d4f8007085af5aa5539101b103/jk_invoke-0.2020.4.6.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "566a3cbe725499b9b34469dd9de02806", "sha256": "c4813dc04ee18d37d1ff4edcda7a9ef5472f6c62f80395e3106994f0b2091348"}, "downloads": -1, "filename": "jk_invoke-0.2020.4.6.tar.gz", "has_sig": false, "md5_digest": "566a3cbe725499b9b34469dd9de02806", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14857, "upload_time": "2020-04-06T07:43:07", "upload_time_iso_8601": "2020-04-06T07:43:07.630001Z", "url": "https://files.pythonhosted.org/packages/ae/b6/e6252dc710c4fa9e5621bb5184c5c6c6f4d4f8007085af5aa5539101b103/jk_invoke-0.2020.4.6.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:52:28 2020"}