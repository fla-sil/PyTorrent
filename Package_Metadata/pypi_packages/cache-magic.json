{"info": {"author": "Chris Piatt", "author_email": "chris@pyython.com", "bugtrack_url": null, "classifiers": ["Development Status :: 7 - Inactive", "Framework :: Jupyter", "Intended Audience :: Developers", "Intended Audience :: Science/Research", "License :: Other/Proprietary License", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Scientific/Engineering :: Information Analysis", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "cache-magic\n===========\n\nThis package adds ``%cache`` line-magic to Jupyter notebooks.\n\nWarning!!!\n----------\n\nThe author of this Python package makes no commitment to maintain it. It\nwas forked from `this\nproject <https://github.com/SmartDataInnovationLab/ipython-cache>`__ and\nyou\u2019re probably better off using that! That said, if you like the tweaks\nI made (added compression, bug fixes, style preferences, etc.), feel\nfree to use it how you see fit. Just be sure to respect the original\nauthor\u2019s license (see LICENSE copied\n`here <https://github.com/pyython/cache-magic/blob/master/LICENSE>`__\nfor your convenience).\n\nQuickstart\n----------\n\n-  The pip-package is called ``cache-magic``\n-  The python module is called ``cache_magic``\n-  The magic is called ``%cache``\n\nSo you can run the magic by entering this into an Jupyter cell:\n\n.. code:: python\n\n   !pip install cache-magic\n   import cache_magic\n   %cache a = 1+1\n   %cache\n\ninstallation\n============\n\ninstall directly from notebook\n------------------------------\n\n1. open jupyter notebook\n2. create new cell\n3. enter ``!pip install cache-magic``\n4. execute\n\ninstall into conda-environment\n------------------------------\n\n.. code:: bash\n\n   conda create -n test\n   source activate test\n   conda install -c pyython cache-magic\n   jupyter notebook\n\nusage\n=====\n\nActivate the magic by loading the module like any other module. Write\ninto a cell ``import cache_magic`` and excecute it.\n\nWhen you want to apply the magic to a line, just prepend the line with\n``%cache``\n\nexample\n-------\n\n::\n\n   %cache myVar = someSlowCalculation(some, \"parameters\")\n\nThis will calculate ``someSlowCalculation(some, \"parameters\")`` once.\nAnd in subsequent calls it restores myVar from storage.\n\nThe magic turns this example into something like this (if there was no\nipython-kernel and no versioning):\n\n.. code:: python\n\n   try:\n     with open(\"myVar.pkl.gz\", 'rb') as fp:\n       myVar = pickle.loads(zlib.decompress(fp.read()))\n   except:\n     myVar = someSlowCalculation(some, \"parameters\")\n     with open(\"myVar.pkl.gz\", 'wb') as fp:\n       fp.write(zlib.compress(pickle.dumps(myVar)))\n\ngeneral form\n------------\n\n::\n\n   %cache <variable> = <expression>\n\n**Variable**: This Variable\u2019s value will be fetched from cache.\n\n**Expression**: This will only be excecuted once and the result will be\nstored to disk.\n\nfull form\n---------\n\n::\n\n   %cache [--version <version>] [--reset] [--debug] variable [= <expression>]\n\n**-v or \u2013version**: either a variable name or an integer. Whenever this\nchanges, a new value is calculated (instead of returning an old value\nfrom the cache).\n\nif version is \u2018\\*\u2019 or omitted, the hashed expression is used as version,\nso whenever the expression changes, a new value is cached.\n\n**-r or \u2013reset**: delete the cached value for this variable. Forces\nrecalculation, if ``<expression>`` is present\n\n**-d or \u2013debug**: additional logging\n\nshow cache\n----------\n\n.. code:: python\n\n   %cache\n\nshows all variables in cache as html-table\n\nfull reset\n----------\n\n.. code:: python\n\n   %cache -r\n   %cache --reset\n\ndeletes all cached values for all variables\n\nwhere is the cache stored?\n--------------------------\n\nIn the directory where the kernel was started (usually where the\nnotebook is located) in a subfolder called ``.cache``\n\ndeveloper Notes\n===============\n\npush to pypi\n------------\n\nprepare environment:\n\n.. code:: bash\n\n   gedit ~/.pypirc\n   chmod 600 ~/.pypirc\n   sudo apt install pandoc\n\nupload changes to test and production:\n\n.. code:: bash\n\n   pandoc -o README.rst README.md\n   restview --pypi-strict README.rst\n   # update version in setup.py\n   rm -r dist\n   python setup.py sdist\n   twine upload dist/* -r testpypi\n   firefox https://testpypi.python.org/pypi/cache-magic\n   twine upload dist/*\n\ntest install from testpypi\n\n.. code:: bash\n\n   pip install --index-url https://test.pypi.org/simple/ --extra-index-url https://pypi.org/simple cache-magic --no-cache-dir --user\n\ntest installation\n\n.. code:: bash\n\n   sudo pip install cache-magic --no-cache-dir --user\n\neditable import\n---------------\n\nInstall into environment with ``-e``:\n\n.. code:: python\n\n   !pip install -e .\n\nreload after each change:\n\n.. code:: bash\n\n   import cache_magic\n   from imp import reload\n   reload(cache_magic)\n\nAlternatively (if you don\u2019t want to install python, jupyter & co), you\ncan use the docker-compose.yml for development:\n\n.. code:: bash\n\n   cd cache-magic\n   docker-compose up\n\ncreate Conda Packet\n-------------------\n\nrequires the bash with latest anaconda on path\n\n.. code:: bash\n\n   bash\n   mkdir test && cd test\n   conda skeleton pypi cache-magic\n   conda config --set anaconda_upload yes\n   conda-build cache-magic -c conda-forge\n\nrunning tests\n-------------\n\n.. code:: bash\n\n   bash\n   conda remove --name test --all\n   conda env create -f test/environment.yml\n   source activate test\n   conda remove cache-magic\n   pip uninstall cache-magic\n   pip install -e .\n   ./test/run_example.py\n\nIf there is any error, it will be printed to stderr and the script\nfails.\n\nthe output can be found in \u201ctest/temp\u201d.", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/pyython/cache-magic", "keywords": "", "license": "BSD-3-Clause", "maintainer": "", "maintainer_email": "", "name": "cache-magic", "package_url": "https://pypi.org/project/cache-magic/", "platform": "", "project_url": "https://pypi.org/project/cache-magic/", "project_urls": {"Homepage": "https://github.com/pyython/cache-magic"}, "release_url": "https://pypi.org/project/cache-magic/1.0.4/", "requires_dist": null, "requires_python": "", "summary": "Versatile cache line magic for jupyter notebooks, based on https://pypi.org/project/ipython-cache/", "version": "1.0.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"cache-magic\">\n<h2>cache-magic</h2>\n<p>This package adds <tt>%cache</tt> line-magic to Jupyter notebooks.</p>\n<div id=\"warning\">\n<h3>Warning!!!</h3>\n<p>The author of this Python package makes no commitment to maintain it. It\nwas forked from <a href=\"https://github.com/SmartDataInnovationLab/ipython-cache\" rel=\"nofollow\">this\nproject</a> and\nyou\u2019re probably better off using that! That said, if you like the tweaks\nI made (added compression, bug fixes, style preferences, etc.), feel\nfree to use it how you see fit. Just be sure to respect the original\nauthor\u2019s license (see LICENSE copied\n<a href=\"https://github.com/pyython/cache-magic/blob/master/LICENSE\" rel=\"nofollow\">here</a>\nfor your convenience).</p>\n</div>\n<div id=\"quickstart\">\n<h3>Quickstart</h3>\n<ul>\n<li>The pip-package is called <tt><span class=\"pre\">cache-magic</span></tt></li>\n<li>The python module is called <tt>cache_magic</tt></li>\n<li>The magic is called <tt>%cache</tt></li>\n</ul>\n<p>So you can run the magic by entering this into an Jupyter cell:</p>\n<pre><span class=\"err\">!</span><span class=\"n\">pip</span> <span class=\"n\">install</span> <span class=\"n\">cache</span><span class=\"o\">-</span><span class=\"n\">magic</span>\n<span class=\"kn\">import</span> <span class=\"nn\">cache_magic</span>\n<span class=\"o\">%</span><span class=\"n\">cache</span> <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"o\">+</span><span class=\"mi\">1</span>\n<span class=\"o\">%</span><span class=\"n\">cache</span>\n</pre>\n</div>\n</div>\n<div id=\"installation\">\n<h2>installation</h2>\n<div id=\"install-directly-from-notebook\">\n<h3>install directly from notebook</h3>\n<ol>\n<li>open jupyter notebook</li>\n<li>create new cell</li>\n<li>enter <tt>!pip install <span class=\"pre\">cache-magic</span></tt></li>\n<li>execute</li>\n</ol>\n</div>\n<div id=\"install-into-conda-environment\">\n<h3>install into conda-environment</h3>\n<pre>conda create -n <span class=\"nb\">test</span>\n<span class=\"nb\">source</span> activate <span class=\"nb\">test</span>\nconda install -c pyython cache-magic\njupyter notebook\n</pre>\n</div>\n</div>\n<div id=\"usage\">\n<h2>usage</h2>\n<p>Activate the magic by loading the module like any other module. Write\ninto a cell <tt>import cache_magic</tt> and excecute it.</p>\n<p>When you want to apply the magic to a line, just prepend the line with\n<tt>%cache</tt></p>\n<div id=\"example\">\n<h3>example</h3>\n<pre>%cache myVar = someSlowCalculation(some, \"parameters\")\n</pre>\n<p>This will calculate <tt>someSlowCalculation(some, \"parameters\")</tt> once.\nAnd in subsequent calls it restores myVar from storage.</p>\n<p>The magic turns this example into something like this (if there was no\nipython-kernel and no versioning):</p>\n<pre><span class=\"k\">try</span><span class=\"p\">:</span>\n  <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">\"myVar.pkl.gz\"</span><span class=\"p\">,</span> <span class=\"s1\">'rb'</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">fp</span><span class=\"p\">:</span>\n    <span class=\"n\">myVar</span> <span class=\"o\">=</span> <span class=\"n\">pickle</span><span class=\"o\">.</span><span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">zlib</span><span class=\"o\">.</span><span class=\"n\">decompress</span><span class=\"p\">(</span><span class=\"n\">fp</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">()))</span>\n<span class=\"k\">except</span><span class=\"p\">:</span>\n  <span class=\"n\">myVar</span> <span class=\"o\">=</span> <span class=\"n\">someSlowCalculation</span><span class=\"p\">(</span><span class=\"n\">some</span><span class=\"p\">,</span> <span class=\"s2\">\"parameters\"</span><span class=\"p\">)</span>\n  <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">\"myVar.pkl.gz\"</span><span class=\"p\">,</span> <span class=\"s1\">'wb'</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">fp</span><span class=\"p\">:</span>\n    <span class=\"n\">fp</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">zlib</span><span class=\"o\">.</span><span class=\"n\">compress</span><span class=\"p\">(</span><span class=\"n\">pickle</span><span class=\"o\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">myVar</span><span class=\"p\">)))</span>\n</pre>\n</div>\n<div id=\"general-form\">\n<h3>general form</h3>\n<pre>%cache &lt;variable&gt; = &lt;expression&gt;\n</pre>\n<p><strong>Variable</strong>: This Variable\u2019s value will be fetched from cache.</p>\n<p><strong>Expression</strong>: This will only be excecuted once and the result will be\nstored to disk.</p>\n</div>\n<div id=\"full-form\">\n<h3>full form</h3>\n<pre>%cache [--version &lt;version&gt;] [--reset] [--debug] variable [= &lt;expression&gt;]\n</pre>\n<p><strong>-v or \u2013version</strong>: either a variable name or an integer. Whenever this\nchanges, a new value is calculated (instead of returning an old value\nfrom the cache).</p>\n<p>if version is \u2018*\u2019 or omitted, the hashed expression is used as version,\nso whenever the expression changes, a new value is cached.</p>\n<p><strong>-r or \u2013reset</strong>: delete the cached value for this variable. Forces\nrecalculation, if <tt>&lt;expression&gt;</tt> is present</p>\n<p><strong>-d or \u2013debug</strong>: additional logging</p>\n</div>\n<div id=\"show-cache\">\n<h3>show cache</h3>\n<pre><span class=\"o\">%</span><span class=\"n\">cache</span>\n</pre>\n<p>shows all variables in cache as html-table</p>\n</div>\n<div id=\"full-reset\">\n<h3>full reset</h3>\n<pre><span class=\"o\">%</span><span class=\"n\">cache</span> <span class=\"o\">-</span><span class=\"n\">r</span>\n<span class=\"o\">%</span><span class=\"n\">cache</span> <span class=\"o\">--</span><span class=\"n\">reset</span>\n</pre>\n<p>deletes all cached values for all variables</p>\n</div>\n<div id=\"where-is-the-cache-stored\">\n<h3>where is the cache stored?</h3>\n<p>In the directory where the kernel was started (usually where the\nnotebook is located) in a subfolder called <tt>.cache</tt></p>\n</div>\n</div>\n<div id=\"developer-notes\">\n<h2>developer Notes</h2>\n<div id=\"push-to-pypi\">\n<h3>push to pypi</h3>\n<p>prepare environment:</p>\n<pre>gedit ~/.pypirc\nchmod <span class=\"m\">600</span> ~/.pypirc\nsudo apt install pandoc\n</pre>\n<p>upload changes to test and production:</p>\n<pre>pandoc -o README.rst README.md\nrestview --pypi-strict README.rst\n<span class=\"c1\"># update version in setup.py\n</span>rm -r dist\npython setup.py sdist\ntwine upload dist/* -r testpypi\nfirefox https://testpypi.python.org/pypi/cache-magic\ntwine upload dist/*\n</pre>\n<p>test install from testpypi</p>\n<pre>pip install --index-url https://test.pypi.org/simple/ --extra-index-url https://pypi.org/simple cache-magic --no-cache-dir --user\n</pre>\n<p>test installation</p>\n<pre>sudo pip install cache-magic --no-cache-dir --user\n</pre>\n</div>\n<div id=\"editable-import\">\n<h3>editable import</h3>\n<p>Install into environment with <tt><span class=\"pre\">-e</span></tt>:</p>\n<pre><span class=\"err\">!</span><span class=\"n\">pip</span> <span class=\"n\">install</span> <span class=\"o\">-</span><span class=\"n\">e</span> <span class=\"o\">.</span>\n</pre>\n<p>reload after each change:</p>\n<pre>import cache_magic\nfrom imp import reload\nreload<span class=\"o\">(</span>cache_magic<span class=\"o\">)</span>\n</pre>\n<p>Alternatively (if you don\u2019t want to install python, jupyter &amp; co), you\ncan use the docker-compose.yml for development:</p>\n<pre><span class=\"nb\">cd</span> cache-magic\ndocker-compose up\n</pre>\n</div>\n<div id=\"create-conda-packet\">\n<h3>create Conda Packet</h3>\n<p>requires the bash with latest anaconda on path</p>\n<pre>bash\nmkdir <span class=\"nb\">test</span> <span class=\"o\">&amp;&amp;</span> <span class=\"nb\">cd</span> <span class=\"nb\">test</span>\nconda skeleton pypi cache-magic\nconda config --set anaconda_upload yes\nconda-build cache-magic -c conda-forge\n</pre>\n</div>\n<div id=\"running-tests\">\n<h3>running tests</h3>\n<pre>bash\nconda remove --name <span class=\"nb\">test</span> --all\nconda env create -f test/environment.yml\n<span class=\"nb\">source</span> activate <span class=\"nb\">test</span>\nconda remove cache-magic\npip uninstall cache-magic\npip install -e .\n./test/run_example.py\n</pre>\n<p>If there is any error, it will be printed to stderr and the script\nfails.</p>\n<p>the output can be found in \u201ctest/temp\u201d.</p>\n</div>\n</div>\n\n          </div>"}, "last_serial": 4145426, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "0979a874e26f0ff78f62773d72528330", "sha256": "f0ad0e6cd554ca0059d1bdf1a897f30aad7b7d48070914df3265c0c75a262f7c"}, "downloads": -1, "filename": "cache-magic-1.0.0.tar.gz", "has_sig": false, "md5_digest": "0979a874e26f0ff78f62773d72528330", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7032, "upload_time": "2018-08-06T04:40:20", "upload_time_iso_8601": "2018-08-06T04:40:20.593634Z", "url": "https://files.pythonhosted.org/packages/38/60/16e96739c3a999525d85b19e54177a138b8e8514f645406c4f5cbc955d57/cache-magic-1.0.0.tar.gz", "yanked": false}], "1.0.1": [{"comment_text": "", "digests": {"md5": "aec95bbcb227a54d3a4d933fd4b10d74", "sha256": "0885bf1c5acd60468d0b12300bbb7b4eaf92dc5a27942136f6008070c92f5651"}, "downloads": -1, "filename": "cache-magic-1.0.1.tar.gz", "has_sig": false, "md5_digest": "aec95bbcb227a54d3a4d933fd4b10d74", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6781, "upload_time": "2018-08-07T17:09:30", "upload_time_iso_8601": "2018-08-07T17:09:30.896438Z", "url": "https://files.pythonhosted.org/packages/14/1e/40c4cc805b36a083b16ecb21ceefc85a2c660e3775a7530575f87646e1a9/cache-magic-1.0.1.tar.gz", "yanked": false}], "1.0.2": [{"comment_text": "", "digests": {"md5": "8bc646fe31ed4da39a20374654dd1c0e", "sha256": "0281392b8ca032108f7c4d2c3ca79a943410f9a4bc0925c9d5657e9bbfc2c767"}, "downloads": -1, "filename": "cache-magic-1.0.2.tar.gz", "has_sig": false, "md5_digest": "8bc646fe31ed4da39a20374654dd1c0e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7023, "upload_time": "2018-08-07T18:14:48", "upload_time_iso_8601": "2018-08-07T18:14:48.570798Z", "url": "https://files.pythonhosted.org/packages/52/94/86b96ffbf4a7f0e9a16d4d65bd5a05e6e9476385ef163a494a2de724cc90/cache-magic-1.0.2.tar.gz", "yanked": false}], "1.0.3": [{"comment_text": "", "digests": {"md5": "f35a1e0781f74b09236acf24c28ce81c", "sha256": "88fb0249cc02ff0282ed4a9aa98913c1ed603b3b195e067363a701e4b5d3bcd8"}, "downloads": -1, "filename": "cache-magic-1.0.3.tar.gz", "has_sig": false, "md5_digest": "f35a1e0781f74b09236acf24c28ce81c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7009, "upload_time": "2018-08-07T18:23:13", "upload_time_iso_8601": "2018-08-07T18:23:13.974880Z", "url": "https://files.pythonhosted.org/packages/2c/38/03540467ad075a573ad6330193f38d9d157359af8394756f350cbd676df6/cache-magic-1.0.3.tar.gz", "yanked": false}], "1.0.4": [{"comment_text": "", "digests": {"md5": "3e119b67f8f1c269a02567801986f41f", "sha256": "d74fd3be75bcb4e6f60edbdd7bb4fd280a63fd0179f052aa3bcad4f09fd4c816"}, "downloads": -1, "filename": "cache-magic-1.0.4.tar.gz", "has_sig": false, "md5_digest": "3e119b67f8f1c269a02567801986f41f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6991, "upload_time": "2018-08-07T18:28:54", "upload_time_iso_8601": "2018-08-07T18:28:54.994761Z", "url": "https://files.pythonhosted.org/packages/03/94/4cbb25895b80704027453fca297825c0b5924b4ba7533329e0b32a4905a2/cache-magic-1.0.4.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "3e119b67f8f1c269a02567801986f41f", "sha256": "d74fd3be75bcb4e6f60edbdd7bb4fd280a63fd0179f052aa3bcad4f09fd4c816"}, "downloads": -1, "filename": "cache-magic-1.0.4.tar.gz", "has_sig": false, "md5_digest": "3e119b67f8f1c269a02567801986f41f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6991, "upload_time": "2018-08-07T18:28:54", "upload_time_iso_8601": "2018-08-07T18:28:54.994761Z", "url": "https://files.pythonhosted.org/packages/03/94/4cbb25895b80704027453fca297825c0b5924b4ba7533329e0b32a4905a2/cache-magic-1.0.4.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:35:43 2020"}