{"info": {"author": "UW Medicine Research IT", "author_email": "", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: BSD License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# uwgs [![Build Status](https://travis-ci.com/uwrit/uwgs.svg?branch=master)](https://travis-ci.com/uwrit/uwgs)\nPython3 Client Library for UW Groups API v3\n\n### Functionality\nAt the moment, this library provides read-only functionality for:\n- [Get Group By Id](https://iam-tools.u.washington.edu/apis/gws/#/Groups/getGroup)\n- [All Read Membership Endpoints (except history)](https://iam-tools.u.washington.edu/apis/gws/#/Membership)\n- [Search](https://iam-tools.u.washington.edu/apis/gws/#/Searches/get_search)\n\n```python\nimport uwgs\nfrom collections import namedtuple\nimport os\nimport json\n\nConfig = namedtuple('Config', ['client_cert', 'client_key', 'url'])\n\ndef load_config():\n    cwd = os.path.dirname(os.path.abspath(__file__))\n    fp = os.path.join(cwd, 'uwgs.json')\n    with open(fp, 'r') as f:\n        data = json.load(f)\n        cfg = Config(data['client_cert'], data['client_key'], data['url'])\n        return cfg\n\n\ndef cli():\n    cfg = load_config()\n    client = uwgs.Client(cfg.client_cert, cfg.client_key, cfg.url)\n\n    payload = client.search(name='<group_prefix>*')\n    if payload.ok:\n        groups = [group['id'] for group in payload.data['data']]\n        rosters = client.get_memberships(groups)\n        print(rosters)\n\nif __name__ == \"__main__\":\n    cli()\n```\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/uwrit/uwgs", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "uwgs", "package_url": "https://pypi.org/project/uwgs/", "platform": "", "project_url": "https://pypi.org/project/uwgs/", "project_urls": {"Homepage": "https://github.com/uwrit/uwgs"}, "release_url": "https://pypi.org/project/uwgs/0.2.0/", "requires_dist": null, "requires_python": "", "summary": "Flexible http client for reading UW Groups API v3.", "version": "0.2.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>uwgs <a href=\"https://travis-ci.com/uwrit/uwgs\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/706539e1e1c797e62d345c26713b0d197f6d0a6e/68747470733a2f2f7472617669732d63692e636f6d2f75777269742f757767732e7376673f6272616e63683d6d6173746572\"></a></h1>\n<p>Python3 Client Library for UW Groups API v3</p>\n<h3>Functionality</h3>\n<p>At the moment, this library provides read-only functionality for:</p>\n<ul>\n<li><a href=\"https://iam-tools.u.washington.edu/apis/gws/#/Groups/getGroup\" rel=\"nofollow\">Get Group By Id</a></li>\n<li><a href=\"https://iam-tools.u.washington.edu/apis/gws/#/Membership\" rel=\"nofollow\">All Read Membership Endpoints (except history)</a></li>\n<li><a href=\"https://iam-tools.u.washington.edu/apis/gws/#/Searches/get_search\" rel=\"nofollow\">Search</a></li>\n</ul>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">uwgs</span>\n<span class=\"kn\">from</span> <span class=\"nn\">collections</span> <span class=\"kn\">import</span> <span class=\"n\">namedtuple</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n\n<span class=\"n\">Config</span> <span class=\"o\">=</span> <span class=\"n\">namedtuple</span><span class=\"p\">(</span><span class=\"s1\">'Config'</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">'client_cert'</span><span class=\"p\">,</span> <span class=\"s1\">'client_key'</span><span class=\"p\">,</span> <span class=\"s1\">'url'</span><span class=\"p\">])</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">load_config</span><span class=\"p\">():</span>\n    <span class=\"n\">cwd</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">dirname</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">abspath</span><span class=\"p\">(</span><span class=\"vm\">__file__</span><span class=\"p\">))</span>\n    <span class=\"n\">fp</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">cwd</span><span class=\"p\">,</span> <span class=\"s1\">'uwgs.json'</span><span class=\"p\">)</span>\n    <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">fp</span><span class=\"p\">,</span> <span class=\"s1\">'r'</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n        <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">)</span>\n        <span class=\"n\">cfg</span> <span class=\"o\">=</span> <span class=\"n\">Config</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'client_cert'</span><span class=\"p\">],</span> <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'client_key'</span><span class=\"p\">],</span> <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'url'</span><span class=\"p\">])</span>\n        <span class=\"k\">return</span> <span class=\"n\">cfg</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">cli</span><span class=\"p\">():</span>\n    <span class=\"n\">cfg</span> <span class=\"o\">=</span> <span class=\"n\">load_config</span><span class=\"p\">()</span>\n    <span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">uwgs</span><span class=\"o\">.</span><span class=\"n\">Client</span><span class=\"p\">(</span><span class=\"n\">cfg</span><span class=\"o\">.</span><span class=\"n\">client_cert</span><span class=\"p\">,</span> <span class=\"n\">cfg</span><span class=\"o\">.</span><span class=\"n\">client_key</span><span class=\"p\">,</span> <span class=\"n\">cfg</span><span class=\"o\">.</span><span class=\"n\">url</span><span class=\"p\">)</span>\n\n    <span class=\"n\">payload</span> <span class=\"o\">=</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'&lt;group_prefix&gt;*'</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">payload</span><span class=\"o\">.</span><span class=\"n\">ok</span><span class=\"p\">:</span>\n        <span class=\"n\">groups</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">group</span><span class=\"p\">[</span><span class=\"s1\">'id'</span><span class=\"p\">]</span> <span class=\"k\">for</span> <span class=\"n\">group</span> <span class=\"ow\">in</span> <span class=\"n\">payload</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'data'</span><span class=\"p\">]]</span>\n        <span class=\"n\">rosters</span> <span class=\"o\">=</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">get_memberships</span><span class=\"p\">(</span><span class=\"n\">groups</span><span class=\"p\">)</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">rosters</span><span class=\"p\">)</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">cli</span><span class=\"p\">()</span>\n</pre>\n\n          </div>"}, "last_serial": 5519253, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "133ce291006bbbfac368545f318e2f9d", "sha256": "37aafedfaf970d6831383570ec33283ce6d23c7cedb958e8f23e95d2acc525c8"}, "downloads": -1, "filename": "uwgs-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "133ce291006bbbfac368545f318e2f9d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5869, "upload_time": "2019-07-11T17:20:13", "upload_time_iso_8601": "2019-07-11T17:20:13.934173Z", "url": "https://files.pythonhosted.org/packages/f5/5b/46e6e2d536d3b99574eb727a56b31ed5ce3b7806bea7b9c332ca45827f6c/uwgs-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2dfbda259b658bf7a5c2727834b1a844", "sha256": "b04a086b2cef6e7bf0540e375d93575c4503937dce26056bc5b92572168b37eb"}, "downloads": -1, "filename": "uwgs-0.2.0.tar.gz", "has_sig": false, "md5_digest": "2dfbda259b658bf7a5c2727834b1a844", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3287, "upload_time": "2019-07-11T17:20:15", "upload_time_iso_8601": "2019-07-11T17:20:15.780494Z", "url": "https://files.pythonhosted.org/packages/db/50/7d866e456cacf6c275fc19a3183fdfef556cb81f2383e74286ab8da2c75b/uwgs-0.2.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "133ce291006bbbfac368545f318e2f9d", "sha256": "37aafedfaf970d6831383570ec33283ce6d23c7cedb958e8f23e95d2acc525c8"}, "downloads": -1, "filename": "uwgs-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "133ce291006bbbfac368545f318e2f9d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5869, "upload_time": "2019-07-11T17:20:13", "upload_time_iso_8601": "2019-07-11T17:20:13.934173Z", "url": "https://files.pythonhosted.org/packages/f5/5b/46e6e2d536d3b99574eb727a56b31ed5ce3b7806bea7b9c332ca45827f6c/uwgs-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2dfbda259b658bf7a5c2727834b1a844", "sha256": "b04a086b2cef6e7bf0540e375d93575c4503937dce26056bc5b92572168b37eb"}, "downloads": -1, "filename": "uwgs-0.2.0.tar.gz", "has_sig": false, "md5_digest": "2dfbda259b658bf7a5c2727834b1a844", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3287, "upload_time": "2019-07-11T17:20:15", "upload_time_iso_8601": "2019-07-11T17:20:15.780494Z", "url": "https://files.pythonhosted.org/packages/db/50/7d866e456cacf6c275fc19a3183fdfef556cb81f2383e74286ab8da2c75b/uwgs-0.2.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:38:37 2020"}