{"info": {"author": "Christopher Singley", "author_email": "csingley@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Intended Audience :: Developers", "Intended Audience :: Financial and Insurance Industry", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: 3 :: Only", "Topic :: Office/Business", "Topic :: Office/Business :: Financial", "Topic :: Office/Business :: Financial :: Accounting", "Topic :: Office/Business :: Financial :: Investment", "Topic :: Software Development :: Libraries :: Python Modules", "Topic :: Utilities"], "description": "=========================================================\nPython parser for Interactive Brokers Flex XML statements\n=========================================================\n\n``ibflex`` is a Python library for converting brokerage statement data in\nInteractive Brokers' Flex XML format into standard Python data structures,\nso it can be conveniently processed and analyzed with Python scripts.\n\n*N.B. This module has nothing to do with programmatic trading.\nIt's about reading brokerage reports.*\n\n``ibflex`` is compatible with Python version 3.7+.  The parser has no\ndependencies beyond the Python standard library (although the optional client\nfor fetching Flex Statements from Interactive Brokers' server does depend\non `requests`_ ).\n\n**This module is alpha software!**  It works and it's useful, but the\nAPI, data structures, etc. are likely to see major changes.  Several XML\nschemata are missing, and a few of the more newly-introduced attributes\nfor the existing schemata.  There are probably bugs.\n\n`Pull requests`_ are welcome.  If you're submitting a pull request for an updated\ntype, please do me a favor and include a test case based on your real-world data\n(censored to remove any personal information) in `tests.test_types.py`.  You should\neasily be able to cut&paste one of the existing `unittest.TestCase` subclasses in\nthat file and adapt it to your own data.  Thanks very much; my own datastream does\nnot have full coverage of the object model!\n\n\nInstallation\n============\n::\n\n    pip install ibflex\n\n\nFlex Parser\n===========\nThe primary facility provided is the ``ibflex.parser`` module, which parses\nFlex-format XML data into a hierarchy of Python objects whose structure\ncorresponds to that of the original Flex statements, with the data converted\ninto appropriate Python types (datetime.datetime, decimal.Decimal, etc.)\n\nUsage example:\n\n.. code:: python\n\n    In [1]: from ibflex import parser\n\n    In [2]: response = parser.parse(\"2017-01_ibkr.xml\")\n\n    In [3]: response\n    Out[3]: FlexQueryResponse(queryName='SCP Everything', type='AF', len(FlexStatements)=1)\n\n    In [4]: stmt = response.FlexStatements[0]\n\n    In [5]: stmt\n    Out[5]: FlexStatement(accountId='U770993', fromDate=datetime.date(2017, 1, 2), toDate=datetime.date(2017, 1, 31), period=None, whenGenerated=datetime.datetime(2017, 5, 10, 11, 41, 38), len(CashReport)=3, len(EquitySummaryInBase)=23, len(StmtFunds)=344, len(ChangeInPositionValues)=2, len(OpenPositions)=2140, len(FxPositions)=1, len(Trades)=339, len(CorporateActions)=1, len(CashTransactions)=4, len(InterestAccruals)=1, len(ChangeInDividendAccruals)=5, len(OpenDividendAccruals)=2, len(SecuritiesInfo)=30, len(ConversionRates)=550)\n\n    In [6]: trade = stmt.Trades[-1]\n\n    In [7]: trade\n    Out[7]: Trade(transactionType=<TradeType.EXCHTRADE: 'ExchTrade'>, openCloseIndicator=<OpenClose.CLOSE: 'C'>, buySell=<BuySell.SELL: 'SELL'>, orderType=<OrderType.LIMIT: 'LMT'>, assetCategory=<AssetClass.STOCK: 'STK'>, accountId='U770993', currency='USD', fxRateToBase=Decimal('1'), symbol='WMIH', description='WMIH CORP', conid='105068604', cusip=None, isin=None, listingExchange=None, multiplier=Decimal('1'), strike=None, expiry=None, putCall=None, tradeID='1742757182', reportDate=datetime.date(2017, 1, 30), tradeDate=datetime.date(2017, 1, 30), tradeTime=datetime.time(15, 39, 36), settleDateTarget=datetime.date(2017, 2, 2), exchange='BYX', quantity=Decimal('-8'), tradePrice=Decimal('1.4'), tradeMoney=Decimal('-11.2'), taxes=Decimal('0'), ibCommission=Decimal('-0.00680792'), ibCommissionCurrency='USD', netCash=Decimal('11.19319208'), netCashInBase=None, closePrice=Decimal('1.4'), notes=(<Code.PARTIAL: 'P'>,), cost=Decimal('-10.853621'), mtmPnl=Decimal('0'), origTradePrice=Decimal('0'), origTradeDate=None, origTradeID=None, origOrderID='0', openDateTime=None, fifoPnlRealized=Decimal('0.339571'), capitalGainsPnl=None, levelOfDetail='EXECUTION', ibOrderID='865480117', orderTime=datetime.datetime(2017, 1, 30, 15, 39, 36), changeInPrice=Decimal('0'), changeInQuantity=Decimal('0'), proceeds=Decimal('11.2'), fxPnl=Decimal('0'), clearingFirmID=None, transactionID='7248583136', holdingPeriodDateTime=None, ibExecID='0001090f.588f449a.01.01', brokerageOrderID=None, orderReference=None, volatilityOrderLink=None, exchOrderId=None, extExecID='S2367553204796', traderID=None, isAPIOrder=False, acctAlias='SCP 0-0', model=None, securityID=None, securityIDType=None, principalAdjustFactor=None, dateTime=None, underlyingConid=None, underlyingSecurityID=None, underlyingSymbol=None, underlyingListingExchange=None, issuer=None, sedol=None, whenRealized=None, whenReopened=None)\n\n    In [8]: print(f\"{trade.tradeDate} {trade.buySell.name} {abs(trade.quantity)} {trade.symbol} @ {trade.tradePrice} {trade.currency}\")\n    2017-01-30 SELL 8 WMIH @ 1.4 USD\n\n    In [9]: pos = stmt.OpenPositions[-1]\n\n    In [10]: pos\n    Out[10]: OpenPosition(side=<LongShort.SHORT: 'Short'>, assetCategory=<AssetClass.STOCK: 'STK'>, accountId='U770993', currency='USD', fxRateToBase=Decimal('1'), reportDate=datetime.date(2017, 1, 31), symbol='VXX', description='IPATH S&P 500 VIX S/T FU ETN', conid='242500577', securityID=None, cusip=None, isin=None, multiplier=Decimal('1'), position=Decimal('-75'), markPrice=Decimal('19.42'), positionValue=Decimal('-1456.5'), openPrice=Decimal('109.210703693'), costBasisPrice=Decimal('109.210703693'), costBasisMoney=Decimal('-8190.802777'), fifoPnlUnrealized=Decimal('6734.302777'), levelOfDetail='LOT', openDateTime=datetime.datetime(2015, 8, 24, 9, 28, 9), holdingPeriodDateTime=datetime.datetime(2015, 8, 24, 9, 28, 9), securityIDType=None, issuer=None, underlyingConid=None, underlyingSymbol=None, code=(), originatingOrderID='699501861', originatingTransactionID='5634129129', accruedInt=None, acctAlias='SCP 0-0', model=None, sedol=None, percentOfNAV=None, strike=None, expiry=None, putCall=None, principalAdjustFactor=None, listingExchange=None, underlyingSecurityID=None, underlyingListingExchange=None, positionValueInBase=None, unrealizedCapitalGainsPnl=None, unrealizedlFxPnl=None)\n\n    In [11]: print(f\"{trade.tradeDate} {trade.buySell.name} {abs(trade.quantity)} {trade.symbol} @ {trade.tradePrice} {trade.currency}\")\n    2017-01-30 SELL 8 WMIH @ 1.4 USD\n\n    In [12]: [sec for sec in stmt.SecuritiesInfo if sec.conid == trade.conid][0]\n    Out[12]: SecurityInfo(assetCategory=<AssetClass.STOCK: 'STK'>, symbol='WMIH', description='WMIH CORP', conid='105068604', securityID=None, cusip=None, isin=None, listingExchange=None, underlyingSecurityID=None, underlyingListingExchange=None, underlyingConid=None, underlyingCategory=None, subCategory=None, multiplier=Decimal('1'), strike=None, expiry=None, maturity=None, issueDate=None, type=None, sedol=None, securityIDType=None, underlyingSymbol=None, issuer=None, putCall=None, principalAdjustFactor=Decimal('1'), code=())\n\n\nFlex Query Report Configuration\n===============================\nConfigure Flex statements through `Interactive Brokers account management`_ .\nReports > Flex Queries > Custom Flex Queries > Configure\n\nYou can configure whatever you like and ibflex should parse it, with these exceptions:\n\n    * You can't use European-style date formats (dd/MM/yy or dd/MM/yyyy).\n      Just accept the default (yyyyMMdd) or get with the program and use ISO-8601 (yyyy-MM-dd).\n\n    * You should use some delimiter between dates & times. The default delimiter\n      (semicolon) is fastest to process.\n\n    * For the Trades section of the statement, you can't select the options at the\n      top for \"Symbol Summary\", \"Asset Class\", or \"Orders\".  These will blow up\n      the parser.  It's fine to check the box for \"Asset Class\" down below, along\n      with the other selections for XML attributes.\n\n\nFlex Client\n===========\nOnce you've defined various Flex queries, you can generate an access token\nthat will allow you to generate statements and download them through the web\nAPI, instead of logging in to get them.\n\nReports > Settings > FlexWeb Service\n\nOnce you've got that set up - armed with the token, and the ID# of the desired\nFlex query - ``ibflex.client`` contains the facilities necessary to retrieve\nthem:\n\n.. code:: python\n\n    In [1]: from ibflex import client\n    In [2]: token = '111111111111111111111111'\n    In [3]: query_id = '111111'\n    In [4]: response = client.download(token, query_id)\n    In [5]: response[:215]\n    Out[5]: b'<FlexQueryResponse queryName=\"Get Everything\" type=\"AF\">\\n<FlexStatements count=\"1\">\\n<FlexStatement accountId=\"U111111\" fromDate=\"2018-01-01\" toDate=\"2018-01-31\" period=\"LastMonth\" whenGenerated=\"2018-02-01;211353\">\\n'\n\n\nYou can also just execute client.main() as a script:\n\n.. code:: bash\n\n    $ python client.py -t 111111111111111111111111 -q 111111 > 2018-01_ibkr.xml\n\n\nFinally, setup.py installs a script at ``~/.local/bin/flexget``... cron-tastic!\n\n.. code:: bash\n\n    $ flexget -t 111111111111111111111111 -q 111111 > 2018-01_ibkr.xml\n\n\nResources\n=========\n* Interactive Brokers `Activity Flex Query Reference`_\n* Interactive Brokers `FlexWeb Service Reference`_\n* `capgains`_ - package that uses ibflex (inter alia) to calculate realized gains\n* `ib-flex-analyzer`_ - Analyze your Interactive Brokers Flex XML reports with pandas\n\n.. _Pull requests: https://github.com/csingley/ibflex/pull/new/master\n.. _requests: https://github.com/requests/requests\n.. _Interactive Brokers account management: https://gdcdyn.interactivebrokers.com/sso/Login\n.. _Activity Flex Query Reference: https://www.interactivebrokers.com/en/software/reportguide/reportguide.htm#reportguide/activity_flex_query_reference.htm\n.. _FlexWeb Service Reference: https://www.interactivebrokers.com/en/software/am/am/reports/flex_web_service_version_3.htm\n.. _capgains: https://github.com/csingley/capgains\n.. _ib-flex-analyzer: https://github.com/wesm/ib-flex-analyzer", "description_content_type": "text/x-rst", "docs_url": null, "download_url": "https://github.com/csingley/ibflex/tarball/master", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/csingley/ibflex", "keywords": "Interactive Brokers,ibkr,flex,xml", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "ibflex", "package_url": "https://pypi.org/project/ibflex/", "platform": "", "project_url": "https://pypi.org/project/ibflex/", "project_urls": {"Download": "https://github.com/csingley/ibflex/tarball/master", "Homepage": "https://github.com/csingley/ibflex"}, "release_url": "https://pypi.org/project/ibflex/0.14/", "requires_dist": null, "requires_python": ">=3.7", "summary": "('Parse Interactive Brokers Flex XML reports and convert to Python types',)", "version": "0.14", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><tt>ibflex</tt> is a Python library for converting brokerage statement data in\nInteractive Brokers\u2019 Flex XML format into standard Python data structures,\nso it can be conveniently processed and analyzed with Python scripts.</p>\n<p><em>N.B. This module has nothing to do with programmatic trading.\nIt\u2019s about reading brokerage reports.</em></p>\n<p><tt>ibflex</tt> is compatible with Python version 3.7+.  The parser has no\ndependencies beyond the Python standard library (although the optional client\nfor fetching Flex Statements from Interactive Brokers\u2019 server does depend\non <a href=\"https://github.com/requests/requests\" rel=\"nofollow\">requests</a> ).</p>\n<p><strong>This module is alpha software!</strong>  It works and it\u2019s useful, but the\nAPI, data structures, etc. are likely to see major changes.  Several XML\nschemata are missing, and a few of the more newly-introduced attributes\nfor the existing schemata.  There are probably bugs.</p>\n<p><a href=\"https://github.com/csingley/ibflex/pull/new/master\" rel=\"nofollow\">Pull requests</a> are welcome.  If you\u2019re submitting a pull request for an updated\ntype, please do me a favor and include a test case based on your real-world data\n(censored to remove any personal information) in <cite>tests.test_types.py</cite>.  You should\neasily be able to cut&amp;paste one of the existing <cite>unittest.TestCase</cite> subclasses in\nthat file and adapt it to your own data.  Thanks very much; my own datastream does\nnot have full coverage of the object model!</p>\n<div id=\"installation\">\n<h2>Installation</h2>\n<pre>pip install ibflex\n</pre>\n</div>\n<div id=\"flex-parser\">\n<h2>Flex Parser</h2>\n<p>The primary facility provided is the <tt>ibflex.parser</tt> module, which parses\nFlex-format XML data into a hierarchy of Python objects whose structure\ncorresponds to that of the original Flex statements, with the data converted\ninto appropriate Python types (datetime.datetime, decimal.Decimal, etc.)</p>\n<p>Usage example:</p>\n<pre><span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]:</span> <span class=\"kn\">from</span> <span class=\"nn\">ibflex</span> <span class=\"kn\">import</span> <span class=\"n\">parser</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]:</span> <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">\"2017-01_ibkr.xml\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]:</span> <span class=\"n\">response</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]:</span> <span class=\"n\">FlexQueryResponse</span><span class=\"p\">(</span><span class=\"n\">queryName</span><span class=\"o\">=</span><span class=\"s1\">'SCP Everything'</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s1\">'AF'</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">FlexStatements</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">]:</span> <span class=\"n\">stmt</span> <span class=\"o\">=</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">FlexStatements</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]:</span> <span class=\"n\">stmt</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]:</span> <span class=\"n\">FlexStatement</span><span class=\"p\">(</span><span class=\"n\">accountId</span><span class=\"o\">=</span><span class=\"s1\">'U770993'</span><span class=\"p\">,</span> <span class=\"n\">fromDate</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"n\">toDate</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">31</span><span class=\"p\">),</span> <span class=\"n\">period</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">whenGenerated</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">11</span><span class=\"p\">,</span> <span class=\"mi\">41</span><span class=\"p\">,</span> <span class=\"mi\">38</span><span class=\"p\">),</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">CashReport</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">EquitySummaryInBase</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">23</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">StmtFunds</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">344</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">ChangeInPositionValues</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">OpenPositions</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">2140</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">FxPositions</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">Trades</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">339</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">CorporateActions</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">CashTransactions</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">InterestAccruals</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">ChangeInDividendAccruals</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">OpenDividendAccruals</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">SecuritiesInfo</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">ConversionRates</span><span class=\"p\">)</span><span class=\"o\">=</span><span class=\"mi\">550</span><span class=\"p\">)</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">]:</span> <span class=\"n\">trade</span> <span class=\"o\">=</span> <span class=\"n\">stmt</span><span class=\"o\">.</span><span class=\"n\">Trades</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">7</span><span class=\"p\">]:</span> <span class=\"n\">trade</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">7</span><span class=\"p\">]:</span> <span class=\"n\">Trade</span><span class=\"p\">(</span><span class=\"n\">transactionType</span><span class=\"o\">=&lt;</span><span class=\"n\">TradeType</span><span class=\"o\">.</span><span class=\"n\">EXCHTRADE</span><span class=\"p\">:</span> <span class=\"s1\">'ExchTrade'</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">openCloseIndicator</span><span class=\"o\">=&lt;</span><span class=\"n\">OpenClose</span><span class=\"o\">.</span><span class=\"n\">CLOSE</span><span class=\"p\">:</span> <span class=\"s1\">'C'</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">buySell</span><span class=\"o\">=&lt;</span><span class=\"n\">BuySell</span><span class=\"o\">.</span><span class=\"n\">SELL</span><span class=\"p\">:</span> <span class=\"s1\">'SELL'</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">orderType</span><span class=\"o\">=&lt;</span><span class=\"n\">OrderType</span><span class=\"o\">.</span><span class=\"n\">LIMIT</span><span class=\"p\">:</span> <span class=\"s1\">'LMT'</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">assetCategory</span><span class=\"o\">=&lt;</span><span class=\"n\">AssetClass</span><span class=\"o\">.</span><span class=\"n\">STOCK</span><span class=\"p\">:</span> <span class=\"s1\">'STK'</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">accountId</span><span class=\"o\">=</span><span class=\"s1\">'U770993'</span><span class=\"p\">,</span> <span class=\"n\">currency</span><span class=\"o\">=</span><span class=\"s1\">'USD'</span><span class=\"p\">,</span> <span class=\"n\">fxRateToBase</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'1'</span><span class=\"p\">),</span> <span class=\"n\">symbol</span><span class=\"o\">=</span><span class=\"s1\">'WMIH'</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s1\">'WMIH CORP'</span><span class=\"p\">,</span> <span class=\"n\">conid</span><span class=\"o\">=</span><span class=\"s1\">'105068604'</span><span class=\"p\">,</span> <span class=\"n\">cusip</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">isin</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">listingExchange</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">multiplier</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'1'</span><span class=\"p\">),</span> <span class=\"n\">strike</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">expiry</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">putCall</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">tradeID</span><span class=\"o\">=</span><span class=\"s1\">'1742757182'</span><span class=\"p\">,</span> <span class=\"n\">reportDate</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">),</span> <span class=\"n\">tradeDate</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">),</span> <span class=\"n\">tradeTime</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">(</span><span class=\"mi\">15</span><span class=\"p\">,</span> <span class=\"mi\">39</span><span class=\"p\">,</span> <span class=\"mi\">36</span><span class=\"p\">),</span> <span class=\"n\">settleDateTarget</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"n\">exchange</span><span class=\"o\">=</span><span class=\"s1\">'BYX'</span><span class=\"p\">,</span> <span class=\"n\">quantity</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'-8'</span><span class=\"p\">),</span> <span class=\"n\">tradePrice</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'1.4'</span><span class=\"p\">),</span> <span class=\"n\">tradeMoney</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'-11.2'</span><span class=\"p\">),</span> <span class=\"n\">taxes</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'0'</span><span class=\"p\">),</span> <span class=\"n\">ibCommission</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'-0.00680792'</span><span class=\"p\">),</span> <span class=\"n\">ibCommissionCurrency</span><span class=\"o\">=</span><span class=\"s1\">'USD'</span><span class=\"p\">,</span> <span class=\"n\">netCash</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'11.19319208'</span><span class=\"p\">),</span> <span class=\"n\">netCashInBase</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">closePrice</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'1.4'</span><span class=\"p\">),</span> <span class=\"n\">notes</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">Code</span><span class=\"o\">.</span><span class=\"n\">PARTIAL</span><span class=\"p\">:</span> <span class=\"s1\">'P'</span><span class=\"o\">&gt;</span><span class=\"p\">,),</span> <span class=\"n\">cost</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'-10.853621'</span><span class=\"p\">),</span> <span class=\"n\">mtmPnl</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'0'</span><span class=\"p\">),</span> <span class=\"n\">origTradePrice</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'0'</span><span class=\"p\">),</span> <span class=\"n\">origTradeDate</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">origTradeID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">origOrderID</span><span class=\"o\">=</span><span class=\"s1\">'0'</span><span class=\"p\">,</span> <span class=\"n\">openDateTime</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">fifoPnlRealized</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'0.339571'</span><span class=\"p\">),</span> <span class=\"n\">capitalGainsPnl</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">levelOfDetail</span><span class=\"o\">=</span><span class=\"s1\">'EXECUTION'</span><span class=\"p\">,</span> <span class=\"n\">ibOrderID</span><span class=\"o\">=</span><span class=\"s1\">'865480117'</span><span class=\"p\">,</span> <span class=\"n\">orderTime</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"mi\">15</span><span class=\"p\">,</span> <span class=\"mi\">39</span><span class=\"p\">,</span> <span class=\"mi\">36</span><span class=\"p\">),</span> <span class=\"n\">changeInPrice</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'0'</span><span class=\"p\">),</span> <span class=\"n\">changeInQuantity</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'0'</span><span class=\"p\">),</span> <span class=\"n\">proceeds</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'11.2'</span><span class=\"p\">),</span> <span class=\"n\">fxPnl</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'0'</span><span class=\"p\">),</span> <span class=\"n\">clearingFirmID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">transactionID</span><span class=\"o\">=</span><span class=\"s1\">'7248583136'</span><span class=\"p\">,</span> <span class=\"n\">holdingPeriodDateTime</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">ibExecID</span><span class=\"o\">=</span><span class=\"s1\">'0001090f.588f449a.01.01'</span><span class=\"p\">,</span> <span class=\"n\">brokerageOrderID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">orderReference</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">volatilityOrderLink</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">exchOrderId</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">extExecID</span><span class=\"o\">=</span><span class=\"s1\">'S2367553204796'</span><span class=\"p\">,</span> <span class=\"n\">traderID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">isAPIOrder</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"n\">acctAlias</span><span class=\"o\">=</span><span class=\"s1\">'SCP 0-0'</span><span class=\"p\">,</span> <span class=\"n\">model</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">securityID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">securityIDType</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">principalAdjustFactor</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">dateTime</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingConid</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingSecurityID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingSymbol</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingListingExchange</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">issuer</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">sedol</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">whenRealized</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">whenReopened</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">8</span><span class=\"p\">]:</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"</span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">tradeDate</span><span class=\"si\">}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">buySell</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"si\">}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"nb\">abs</span><span class=\"p\">(</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">quantity</span><span class=\"p\">)</span><span class=\"si\">}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">symbol</span><span class=\"si\">}</span><span class=\"s2\"> @ </span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">tradePrice</span><span class=\"si\">}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">currency</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n<span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">01</span><span class=\"o\">-</span><span class=\"mi\">30</span> <span class=\"n\">SELL</span> <span class=\"mi\">8</span> <span class=\"n\">WMIH</span> <span class=\"o\">@</span> <span class=\"mf\">1.4</span> <span class=\"n\">USD</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">9</span><span class=\"p\">]:</span> <span class=\"n\">pos</span> <span class=\"o\">=</span> <span class=\"n\">stmt</span><span class=\"o\">.</span><span class=\"n\">OpenPositions</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">]:</span> <span class=\"n\">pos</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">]:</span> <span class=\"n\">OpenPosition</span><span class=\"p\">(</span><span class=\"n\">side</span><span class=\"o\">=&lt;</span><span class=\"n\">LongShort</span><span class=\"o\">.</span><span class=\"n\">SHORT</span><span class=\"p\">:</span> <span class=\"s1\">'Short'</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">assetCategory</span><span class=\"o\">=&lt;</span><span class=\"n\">AssetClass</span><span class=\"o\">.</span><span class=\"n\">STOCK</span><span class=\"p\">:</span> <span class=\"s1\">'STK'</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">accountId</span><span class=\"o\">=</span><span class=\"s1\">'U770993'</span><span class=\"p\">,</span> <span class=\"n\">currency</span><span class=\"o\">=</span><span class=\"s1\">'USD'</span><span class=\"p\">,</span> <span class=\"n\">fxRateToBase</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'1'</span><span class=\"p\">),</span> <span class=\"n\">reportDate</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">31</span><span class=\"p\">),</span> <span class=\"n\">symbol</span><span class=\"o\">=</span><span class=\"s1\">'VXX'</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s1\">'IPATH S&amp;P 500 VIX S/T FU ETN'</span><span class=\"p\">,</span> <span class=\"n\">conid</span><span class=\"o\">=</span><span class=\"s1\">'242500577'</span><span class=\"p\">,</span> <span class=\"n\">securityID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">cusip</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">isin</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">multiplier</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'1'</span><span class=\"p\">),</span> <span class=\"n\">position</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'-75'</span><span class=\"p\">),</span> <span class=\"n\">markPrice</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'19.42'</span><span class=\"p\">),</span> <span class=\"n\">positionValue</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'-1456.5'</span><span class=\"p\">),</span> <span class=\"n\">openPrice</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'109.210703693'</span><span class=\"p\">),</span> <span class=\"n\">costBasisPrice</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'109.210703693'</span><span class=\"p\">),</span> <span class=\"n\">costBasisMoney</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'-8190.802777'</span><span class=\"p\">),</span> <span class=\"n\">fifoPnlUnrealized</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'6734.302777'</span><span class=\"p\">),</span> <span class=\"n\">levelOfDetail</span><span class=\"o\">=</span><span class=\"s1\">'LOT'</span><span class=\"p\">,</span> <span class=\"n\">openDateTime</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"p\">(</span><span class=\"mi\">2015</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">24</span><span class=\"p\">,</span> <span class=\"mi\">9</span><span class=\"p\">,</span> <span class=\"mi\">28</span><span class=\"p\">,</span> <span class=\"mi\">9</span><span class=\"p\">),</span> <span class=\"n\">holdingPeriodDateTime</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"p\">(</span><span class=\"mi\">2015</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">24</span><span class=\"p\">,</span> <span class=\"mi\">9</span><span class=\"p\">,</span> <span class=\"mi\">28</span><span class=\"p\">,</span> <span class=\"mi\">9</span><span class=\"p\">),</span> <span class=\"n\">securityIDType</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">issuer</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingConid</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingSymbol</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">code</span><span class=\"o\">=</span><span class=\"p\">(),</span> <span class=\"n\">originatingOrderID</span><span class=\"o\">=</span><span class=\"s1\">'699501861'</span><span class=\"p\">,</span> <span class=\"n\">originatingTransactionID</span><span class=\"o\">=</span><span class=\"s1\">'5634129129'</span><span class=\"p\">,</span> <span class=\"n\">accruedInt</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">acctAlias</span><span class=\"o\">=</span><span class=\"s1\">'SCP 0-0'</span><span class=\"p\">,</span> <span class=\"n\">model</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">sedol</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">percentOfNAV</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">strike</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">expiry</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">putCall</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">principalAdjustFactor</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">listingExchange</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingSecurityID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingListingExchange</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">positionValueInBase</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">unrealizedCapitalGainsPnl</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">unrealizedlFxPnl</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">11</span><span class=\"p\">]:</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"</span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">tradeDate</span><span class=\"si\">}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">buySell</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"si\">}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"nb\">abs</span><span class=\"p\">(</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">quantity</span><span class=\"p\">)</span><span class=\"si\">}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">symbol</span><span class=\"si\">}</span><span class=\"s2\"> @ </span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">tradePrice</span><span class=\"si\">}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">currency</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n<span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mi\">01</span><span class=\"o\">-</span><span class=\"mi\">30</span> <span class=\"n\">SELL</span> <span class=\"mi\">8</span> <span class=\"n\">WMIH</span> <span class=\"o\">@</span> <span class=\"mf\">1.4</span> <span class=\"n\">USD</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">12</span><span class=\"p\">]:</span> <span class=\"p\">[</span><span class=\"n\">sec</span> <span class=\"k\">for</span> <span class=\"n\">sec</span> <span class=\"ow\">in</span> <span class=\"n\">stmt</span><span class=\"o\">.</span><span class=\"n\">SecuritiesInfo</span> <span class=\"k\">if</span> <span class=\"n\">sec</span><span class=\"o\">.</span><span class=\"n\">conid</span> <span class=\"o\">==</span> <span class=\"n\">trade</span><span class=\"o\">.</span><span class=\"n\">conid</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">12</span><span class=\"p\">]:</span> <span class=\"n\">SecurityInfo</span><span class=\"p\">(</span><span class=\"n\">assetCategory</span><span class=\"o\">=&lt;</span><span class=\"n\">AssetClass</span><span class=\"o\">.</span><span class=\"n\">STOCK</span><span class=\"p\">:</span> <span class=\"s1\">'STK'</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">symbol</span><span class=\"o\">=</span><span class=\"s1\">'WMIH'</span><span class=\"p\">,</span> <span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s1\">'WMIH CORP'</span><span class=\"p\">,</span> <span class=\"n\">conid</span><span class=\"o\">=</span><span class=\"s1\">'105068604'</span><span class=\"p\">,</span> <span class=\"n\">securityID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">cusip</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">isin</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">listingExchange</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingSecurityID</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingListingExchange</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingConid</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingCategory</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">subCategory</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">multiplier</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'1'</span><span class=\"p\">),</span> <span class=\"n\">strike</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">expiry</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">maturity</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">issueDate</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">sedol</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">securityIDType</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">underlyingSymbol</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">issuer</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">putCall</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">principalAdjustFactor</span><span class=\"o\">=</span><span class=\"n\">Decimal</span><span class=\"p\">(</span><span class=\"s1\">'1'</span><span class=\"p\">),</span> <span class=\"n\">code</span><span class=\"o\">=</span><span class=\"p\">())</span>\n</pre>\n</div>\n<div id=\"flex-query-report-configuration\">\n<h2>Flex Query Report Configuration</h2>\n<p>Configure Flex statements through <a href=\"https://gdcdyn.interactivebrokers.com/sso/Login\" rel=\"nofollow\">Interactive Brokers account management</a> .\nReports &gt; Flex Queries &gt; Custom Flex Queries &gt; Configure</p>\n<p>You can configure whatever you like and ibflex should parse it, with these exceptions:</p>\n<blockquote>\n<ul>\n<li>You can\u2019t use European-style date formats (dd/MM/yy or dd/MM/yyyy).\nJust accept the default (yyyyMMdd) or get with the program and use ISO-8601 (yyyy-MM-dd).</li>\n<li>You should use some delimiter between dates &amp; times. The default delimiter\n(semicolon) is fastest to process.</li>\n<li>For the Trades section of the statement, you can\u2019t select the options at the\ntop for \u201cSymbol Summary\u201d, \u201cAsset Class\u201d, or \u201cOrders\u201d.  These will blow up\nthe parser.  It\u2019s fine to check the box for \u201cAsset Class\u201d down below, along\nwith the other selections for XML attributes.</li>\n</ul>\n</blockquote>\n</div>\n<div id=\"flex-client\">\n<h2>Flex Client</h2>\n<p>Once you\u2019ve defined various Flex queries, you can generate an access token\nthat will allow you to generate statements and download them through the web\nAPI, instead of logging in to get them.</p>\n<p>Reports &gt; Settings &gt; FlexWeb Service</p>\n<p>Once you\u2019ve got that set up - armed with the token, and the ID# of the desired\nFlex query - <tt>ibflex.client</tt> contains the facilities necessary to retrieve\nthem:</p>\n<pre><span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]:</span> <span class=\"kn\">from</span> <span class=\"nn\">ibflex</span> <span class=\"kn\">import</span> <span class=\"n\">client</span>\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]:</span> <span class=\"n\">token</span> <span class=\"o\">=</span> <span class=\"s1\">'111111111111111111111111'</span>\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]:</span> <span class=\"n\">query_id</span> <span class=\"o\">=</span> <span class=\"s1\">'111111'</span>\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">]:</span> <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">download</span><span class=\"p\">(</span><span class=\"n\">token</span><span class=\"p\">,</span> <span class=\"n\">query_id</span><span class=\"p\">)</span>\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]:</span> <span class=\"n\">response</span><span class=\"p\">[:</span><span class=\"mi\">215</span><span class=\"p\">]</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]:</span> <span class=\"sa\">b</span><span class=\"s1\">'&lt;FlexQueryResponse queryName=\"Get Everything\" type=\"AF\"&gt;</span><span class=\"se\">\\n</span><span class=\"s1\">&lt;FlexStatements count=\"1\"&gt;</span><span class=\"se\">\\n</span><span class=\"s1\">&lt;FlexStatement accountId=\"U111111\" fromDate=\"2018-01-01\" toDate=\"2018-01-31\" period=\"LastMonth\" whenGenerated=\"2018-02-01;211353\"&gt;</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n</pre>\n<p>You can also just execute client.main() as a script:</p>\n<pre>$ python client.py -t <span class=\"m\">111111111111111111111111</span> -q <span class=\"m\">111111</span> &gt; <span class=\"m\">2018</span>-01_ibkr.xml\n</pre>\n<p>Finally, setup.py installs a script at <tt><span class=\"pre\">~/.local/bin/flexget</span></tt>\u2026 cron-tastic!</p>\n<pre>$ flexget -t <span class=\"m\">111111111111111111111111</span> -q <span class=\"m\">111111</span> &gt; <span class=\"m\">2018</span>-01_ibkr.xml\n</pre>\n</div>\n<div id=\"resources\">\n<h2>Resources</h2>\n<ul>\n<li>Interactive Brokers <a href=\"https://www.interactivebrokers.com/en/software/reportguide/reportguide.htm#reportguide/activity_flex_query_reference.htm\" rel=\"nofollow\">Activity Flex Query Reference</a></li>\n<li>Interactive Brokers <a href=\"https://www.interactivebrokers.com/en/software/am/am/reports/flex_web_service_version_3.htm\" rel=\"nofollow\">FlexWeb Service Reference</a></li>\n<li><a href=\"https://github.com/csingley/capgains\" rel=\"nofollow\">capgains</a> - package that uses ibflex (inter alia) to calculate realized gains</li>\n<li><a href=\"https://github.com/wesm/ib-flex-analyzer\" rel=\"nofollow\">ib-flex-analyzer</a> - Analyze your Interactive Brokers Flex XML reports with pandas</li>\n</ul>\n</div>\n\n          </div>"}, "last_serial": 6646918, "releases": {"0.11": [{"comment_text": "", "digests": {"md5": "df137398ad03b0901b85199c0a9f02ba", "sha256": "d06720f86355c38a6ca83bbea57a9af68bcd3055a8839e72919650f70c98d43d"}, "downloads": -1, "filename": "ibflex-0.11.tar.gz", "has_sig": false, "md5_digest": "df137398ad03b0901b85199c0a9f02ba", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 15771, "upload_time": "2018-02-02T13:18:39", "upload_time_iso_8601": "2018-02-02T13:18:39.367354Z", "url": "https://files.pythonhosted.org/packages/f3/73/7fb2f77abc839e4099ba2bc322fe59a2f2077fb0340d9ea10ffc73117417/ibflex-0.11.tar.gz", "yanked": false}], "0.12": [{"comment_text": "", "digests": {"md5": "081a81d39df58b7414a9fd01b7a670e4", "sha256": "e9cd67464d4c075a127a722fff87ac9930650699ad81767c0877d0e347970c6d"}, "downloads": -1, "filename": "ibflex-0.12.tar.gz", "has_sig": false, "md5_digest": "081a81d39df58b7414a9fd01b7a670e4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 19022, "upload_time": "2018-12-29T13:10:45", "upload_time_iso_8601": "2018-12-29T13:10:45.814744Z", "url": "https://files.pythonhosted.org/packages/5f/bf/bbec7a6e9d038f5907f65fe8ea9f3260f5917c402424d2c7e2b89913cd0a/ibflex-0.12.tar.gz", "yanked": false}], "0.13": [{"comment_text": "", "digests": {"md5": "f782758e338966664e47e7c86a5c6498", "sha256": "29d9216732f052963d6915911ad269689eadcccd518bec1bff14831a23914a33"}, "downloads": -1, "filename": "ibflex-0.13-py3-none-any.whl", "has_sig": false, "md5_digest": "f782758e338966664e47e7c86a5c6498", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7", "size": 25961, "upload_time": "2019-07-11T20:23:59", "upload_time_iso_8601": "2019-07-11T20:23:59.489589Z", "url": "https://files.pythonhosted.org/packages/cc/56/79d39ecb692dde88b22e4eca5e82e097af6a65b119f532a4ee46fbf203aa/ibflex-0.13-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c1a9012515cef414bd3ed10995ec6bf8", "sha256": "808c54edd9c9e5fbcfe655ea266919fc396fcdf9c209e6abf325b3628e3635f6"}, "downloads": -1, "filename": "ibflex-0.13.tar.gz", "has_sig": false, "md5_digest": "c1a9012515cef414bd3ed10995ec6bf8", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 28719, "upload_time": "2019-07-11T20:24:01", "upload_time_iso_8601": "2019-07-11T20:24:01.532157Z", "url": "https://files.pythonhosted.org/packages/4d/e2/8225a5698b0eb2cbe19416d3757e1b9e80dee02bcb5b1282bbd5b5cf4f72/ibflex-0.13.tar.gz", "yanked": false}], "0.14": [{"comment_text": "", "digests": {"md5": "e35fbc3cfb6b6580e50cf85d6fd36c1e", "sha256": "ee1213d20538ec13f9eff40a14d9254b5c615e6b49b3a45485b298abd4c676a3"}, "downloads": -1, "filename": "ibflex-0.14.tar.gz", "has_sig": false, "md5_digest": "e35fbc3cfb6b6580e50cf85d6fd36c1e", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 29311, "upload_time": "2020-02-17T15:32:19", "upload_time_iso_8601": "2020-02-17T15:32:19.525984Z", "url": "https://files.pythonhosted.org/packages/ce/68/5bb81fade2afd7eca4673a60a8c56c0356341efc4131b3f5bdaaec03019e/ibflex-0.14.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "e35fbc3cfb6b6580e50cf85d6fd36c1e", "sha256": "ee1213d20538ec13f9eff40a14d9254b5c615e6b49b3a45485b298abd4c676a3"}, "downloads": -1, "filename": "ibflex-0.14.tar.gz", "has_sig": false, "md5_digest": "e35fbc3cfb6b6580e50cf85d6fd36c1e", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 29311, "upload_time": "2020-02-17T15:32:19", "upload_time_iso_8601": "2020-02-17T15:32:19.525984Z", "url": "https://files.pythonhosted.org/packages/ce/68/5bb81fade2afd7eca4673a60a8c56c0356341efc4131b3f5bdaaec03019e/ibflex-0.14.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:49:15 2020"}