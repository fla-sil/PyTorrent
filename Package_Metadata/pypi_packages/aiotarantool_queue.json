{"info": {"author": "Dmitry Shveenkov", "author_email": "shveenkov@mail.ru", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved :: GNU Library or Lesser General Public License (LGPL)", "Operating System :: OS Independent", "Programming Language :: Python :: 3.4", "Topic :: Database :: Front-Ends", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "Tarantool Queue bindings for work with python asyncio\n----------------------------------------------------------\nBindings require tarantool version 1.6 and aiotarantool connector:\n\n    $ pip install aiotarantool_queue aiotarantool\n\n\nTry it example:\n\n.. code:: python\n\n    import asyncio\n    import aiotarantool_queue\n    import random\n\n    @asyncio.coroutine\n    def put_job(queue):\n        for tube_name in (\"tube1\", \"tube2\", \"tube3\"):\n            tube = queue.tube(tube_name)\n            task = yield from tube.put({\"task_data\": random.random()})\n\n    @asyncio.coroutine\n    def take_job(tube):\n        while True:\n            task = yield from tube.take(5)\n            if not task:\n                break\n\n            print(task.data)\n            yield from task.ack()\n\n    loop = asyncio.get_event_loop()\n\n    queue = aiotarantool_queue.Queue(\"127.0.0.1\", 3301)\n    put_tasks = [asyncio.async(put_job(queue))\n                 for _ in range(20)]\n\n    take_tasks = [asyncio.async(take_job(queue.tube(tube_name)))\n                  for tube_name in (\"tube1\", \"tube2\", \"tube3\")]\n\n    loop.run_until_complete(asyncio.wait(put_tasks + take_tasks))\n    loop.run_until_complete(queue.close())\n    loop.close()\n\n\nThis code makes it easy to develop your application to work with queue.", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/shveenkov/aiotarantool-queue-python", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "aiotarantool_queue", "package_url": "https://pypi.org/project/aiotarantool_queue/", "platform": "", "project_url": "https://pypi.org/project/aiotarantool_queue/", "project_urls": {"Homepage": "https://github.com/shveenkov/aiotarantool-queue-python"}, "release_url": "https://pypi.org/project/aiotarantool_queue/0.0.3/", "requires_dist": null, "requires_python": "", "summary": "Tarantool Queue python bindings for asyncio", "version": "0.0.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>Bindings require tarantool version 1.6 and aiotarantool connector:</p>\n<blockquote>\n$ pip install aiotarantool_queue aiotarantool</blockquote>\n<p>Try it example:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">import</span> <span class=\"nn\">aiotarantool_queue</span>\n<span class=\"kn\">import</span> <span class=\"nn\">random</span>\n\n<span class=\"nd\">@asyncio</span><span class=\"o\">.</span><span class=\"n\">coroutine</span>\n<span class=\"k\">def</span> <span class=\"nf\">put_job</span><span class=\"p\">(</span><span class=\"n\">queue</span><span class=\"p\">):</span>\n    <span class=\"k\">for</span> <span class=\"n\">tube_name</span> <span class=\"ow\">in</span> <span class=\"p\">(</span><span class=\"s2\">\"tube1\"</span><span class=\"p\">,</span> <span class=\"s2\">\"tube2\"</span><span class=\"p\">,</span> <span class=\"s2\">\"tube3\"</span><span class=\"p\">):</span>\n        <span class=\"n\">tube</span> <span class=\"o\">=</span> <span class=\"n\">queue</span><span class=\"o\">.</span><span class=\"n\">tube</span><span class=\"p\">(</span><span class=\"n\">tube_name</span><span class=\"p\">)</span>\n        <span class=\"n\">task</span> <span class=\"o\">=</span> <span class=\"k\">yield from</span> <span class=\"n\">tube</span><span class=\"o\">.</span><span class=\"n\">put</span><span class=\"p\">({</span><span class=\"s2\">\"task_data\"</span><span class=\"p\">:</span> <span class=\"n\">random</span><span class=\"o\">.</span><span class=\"n\">random</span><span class=\"p\">()})</span>\n\n<span class=\"nd\">@asyncio</span><span class=\"o\">.</span><span class=\"n\">coroutine</span>\n<span class=\"k\">def</span> <span class=\"nf\">take_job</span><span class=\"p\">(</span><span class=\"n\">tube</span><span class=\"p\">):</span>\n    <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n        <span class=\"n\">task</span> <span class=\"o\">=</span> <span class=\"k\">yield from</span> <span class=\"n\">tube</span><span class=\"o\">.</span><span class=\"n\">take</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">task</span><span class=\"p\">:</span>\n            <span class=\"k\">break</span>\n\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">task</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">)</span>\n        <span class=\"k\">yield from</span> <span class=\"n\">task</span><span class=\"o\">.</span><span class=\"n\">ack</span><span class=\"p\">()</span>\n\n<span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">get_event_loop</span><span class=\"p\">()</span>\n\n<span class=\"n\">queue</span> <span class=\"o\">=</span> <span class=\"n\">aiotarantool_queue</span><span class=\"o\">.</span><span class=\"n\">Queue</span><span class=\"p\">(</span><span class=\"s2\">\"127.0.0.1\"</span><span class=\"p\">,</span> <span class=\"mi\">3301</span><span class=\"p\">)</span>\n<span class=\"n\">put_tasks</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"k\">async</span><span class=\"p\">(</span><span class=\"n\">put_job</span><span class=\"p\">(</span><span class=\"n\">queue</span><span class=\"p\">))</span>\n             <span class=\"k\">for</span> <span class=\"n\">_</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">20</span><span class=\"p\">)]</span>\n\n<span class=\"n\">take_tasks</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"k\">async</span><span class=\"p\">(</span><span class=\"n\">take_job</span><span class=\"p\">(</span><span class=\"n\">queue</span><span class=\"o\">.</span><span class=\"n\">tube</span><span class=\"p\">(</span><span class=\"n\">tube_name</span><span class=\"p\">)))</span>\n              <span class=\"k\">for</span> <span class=\"n\">tube_name</span> <span class=\"ow\">in</span> <span class=\"p\">(</span><span class=\"s2\">\"tube1\"</span><span class=\"p\">,</span> <span class=\"s2\">\"tube2\"</span><span class=\"p\">,</span> <span class=\"s2\">\"tube3\"</span><span class=\"p\">)]</span>\n\n<span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">run_until_complete</span><span class=\"p\">(</span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">wait</span><span class=\"p\">(</span><span class=\"n\">put_tasks</span> <span class=\"o\">+</span> <span class=\"n\">take_tasks</span><span class=\"p\">))</span>\n<span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">run_until_complete</span><span class=\"p\">(</span><span class=\"n\">queue</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">())</span>\n<span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n</pre>\n<p>This code makes it easy to develop your application to work with queue.</p>\n\n          </div>"}, "last_serial": 2619258, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "71fac90dbd496c5759a0ffe019649f72", "sha256": "01fe264e68cfb567733fc95b7a85e151a7165fa5cbcf1e437a39be9c794b1266"}, "downloads": -1, "filename": "aiotarantool_queue-0.0.1.tar.gz", "has_sig": false, "md5_digest": "71fac90dbd496c5759a0ffe019649f72", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4248, "upload_time": "2015-11-19T12:53:51", "upload_time_iso_8601": "2015-11-19T12:53:51.997952Z", "url": "https://files.pythonhosted.org/packages/7a/bc/8aad6ab7744d4349ddb1912bd509738c961426b4a5f296f40e4552c21333/aiotarantool_queue-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "0312a27e8d2bb4dbf499479c63724fb3", "sha256": "32c67c64acfd23cdb3adac041de3219f9fbf85f6460bc55bb63bdb08d95f33d4"}, "downloads": -1, "filename": "aiotarantool_queue-0.0.2.tar.gz", "has_sig": false, "md5_digest": "0312a27e8d2bb4dbf499479c63724fb3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3931, "upload_time": "2015-11-19T13:05:07", "upload_time_iso_8601": "2015-11-19T13:05:07.881686Z", "url": "https://files.pythonhosted.org/packages/17/83/cac215755965bd885b6534da9e481be7d5f9b75857df297adb103ffdd5fc/aiotarantool_queue-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "bdd3dc30cf214f66ba2a78f5bf277303", "sha256": "8f1d3f2a1996f585177885772639f1efcdb1f5430fde8cc476e55ab080ea9dcc"}, "downloads": -1, "filename": "aiotarantool_queue-0.0.3.tar.gz", "has_sig": false, "md5_digest": "bdd3dc30cf214f66ba2a78f5bf277303", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4324, "upload_time": "2017-02-04T17:23:21", "upload_time_iso_8601": "2017-02-04T17:23:21.867997Z", "url": "https://files.pythonhosted.org/packages/3c/a6/e53b4e50a18c6e7309a062adb52359aadb4ec9bdb2f083d3c44bfc022e1f/aiotarantool_queue-0.0.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "bdd3dc30cf214f66ba2a78f5bf277303", "sha256": "8f1d3f2a1996f585177885772639f1efcdb1f5430fde8cc476e55ab080ea9dcc"}, "downloads": -1, "filename": "aiotarantool_queue-0.0.3.tar.gz", "has_sig": false, "md5_digest": "bdd3dc30cf214f66ba2a78f5bf277303", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4324, "upload_time": "2017-02-04T17:23:21", "upload_time_iso_8601": "2017-02-04T17:23:21.867997Z", "url": "https://files.pythonhosted.org/packages/3c/a6/e53b4e50a18c6e7309a062adb52359aadb4ec9bdb2f083d3c44bfc022e1f/aiotarantool_queue-0.0.3.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:20:43 2020"}