{"info": {"author": "Jared Gillespie", "author_email": "jaredlgillespie@hotmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: Implementation :: CPython", "Topic :: Software Development :: Libraries :: Python Modules", "Topic :: Utilities"], "description": "Rerun Me\n========\n\n.. image:: https://img.shields.io/travis/JaredLGillespie/rerun.me.svg\n    :alt: Travis\n    :target: https://travis-ci.org/JaredLGillespie/rerun.me\n.. image:: https://img.shields.io/coveralls/github/JaredLGillespie/rerun.me.svg\n    :alt: Coveralls github\n    :target: https://coveralls.io/github/JaredLGillespie/rerun.me\n.. image:: https://img.shields.io/pypi/v/rerun.me.svg\n    :alt: PyPI\n    :target: https://pypi.org/project/rerun.me/\n.. image:: https://img.shields.io/pypi/wheel/rerun.me.svg\n    :alt: PyPI - Wheel\n    :target: https://pypi.org/project/rerun.me/\n.. image:: https://img.shields.io/pypi/pyversions/rerun.me.svg\n    :alt: PyPI - Python Version\n    :target: https://pypi.org/project/rerun.me/\n.. image:: https://img.shields.io/pypi/l/rerun.me.svg\n    :alt: PyPI - License\n    :target: https://pypi.org/project/rerun.me/\n\nA library for rerunning functions in the case of raised exceptions and specific return values with configurable delays.\n\n.. code-block:: python\n\n    @rerun(on_delay=fibonacci(1000, 3),\n             on_error=[ConnectionTimeoutError, DeadlockVictimError],\n             on_return=[None]\n             on_retry=lambda d, r: log.info('Retrying connection again (#%s) in %s seconds' % (r, d)))\n    def connection(conn_str, params):\n        conn = db(conn_str, params)\n        return db.open()\n\nInstallation\n------------\n\nThe latest version of rerun.me is available via ``pip``:\n\n.. code-block:: python\n\n    pip install rerun.me\n\nAlternatively, you can download and install from source:\n\n.. code-block:: python\n\n    python setup.py install\n\nGetting Started\n---------------\n\nThe ``rerun`` function contains the following signature:\n\n.. code-block:: python\n\n    def rerun(on_delay=None, on_error=None, on_return=None, on_retry=None, retry_after_delay=False):\n        ...\n\nIt serves as both a function decorator, and a runnable wrapper and is configurable through it's dynamic parameters. Most\nof which are function callbacks which allow the user to highly configure the retrying behavior.\n\nThis configurable nature is what sets this library apart from others with similar functionality. Many of which allow\nbasic configuration using defined retry limits and constant delays between requests, which may be OK for the most\nsimplistic of use cases. But most applications need more complex functionality which can delay with various common\nalgorithms such as exponential or fibonacci delays. This library provides a subset of the most common delay generators,\nbut is easily expandable to fit the application-specific needs.\n\nDelay Generators\n^^^^^^^^^^^^^^^^\n\nDifferent ``on_delay`` generators can be used for increasing the delays between successive retries. Note that the values\nfor the delays are given in milliseconds.\n\n.. code-block:: python\n\n    @rerun(on_delay=[1000, 2000], on_error=KeyError)\n    def func():\n        ...\n\nGenerators and iterable items can be used to generate delays too.\n\n.. code-block:: python\n\n    def fancy_generator():\n        # yield delays\n        ...\n\n    @rerun(on_delay=fancy_generator)\n    def func():\n        ...\n\nIf a single delay is desired, an ``integer`` or ``float`` value can be given, like so.\n\n.. code-block:: python\n\n    @rerun(on_delay=1000, on_error=KeyError)\n    def func():\n        ...\n\nA couple of generator functions are provided in the library. These are the typical algorithms used in most systems, and\ncan serve as a baseline example for more complex delay systems.\n\n- ``constant(delay, limit)``: yields a constant delay at each iteration\n- ``linear(start, increment, limit)``: yields a linearly increasing delay at each iteration\n- ``exponential(base, multiplier, limit)``: yields an exponentially increasing delay at each iteration\n- ``fibonacci(multiplier, limit)``: yields a delay following the fibonacci pattern at each iteration\n\nIf the function fails to yield a response that isn't handled before running out of generated items by the ``on_delay``\ngenerator, a ``MaxRetryException`` is thrown.\n\n.. code-block:: python\n\n    @rerun(on_delay=None, on_error=KeyError)  # No retries\n    def func():\n        raise KeyError\n\n    # MaxRetryException is raised\n\nError Handling\n^^^^^^^^^^^^^^\n\nThe ``on_error`` can be used to determine if a raised exception should be handled and the function retried. A single\nexception can be specified to be handled. If an exception is raised that isn't handled, it will bubble up to the outer\nscope without retrying the function.\n\n.. code-block:: python\n\n    @rerun(on_delay=[1000], on_error=TypeError)\n    def func():\n        raise KeyError\n\n    # KeyError isn't handled, and is thus raised\n\nMultiple errors can be given as a sequence to handle more than one.\n\n.. code-block:: python\n\n    @rerun(on_delay=[1000], on_error=[ValueError, TimeoutError])\n    def func():\n        ...\n\nA callable object (such as a function), can be used for more complex handling of errors. These should accept a single\nvalue, the error raised, and return a boolean indicating ``True`` to handle, or ``False`` to not.\n\n.. code-block:: python\n\n    @rerun(on_delay=[1000], on_error=lambda x: not isinstance(ValueError, TimeoutError))\n    def func():\n        ...\n\nReturn Value Handling\n^^^^^^^^^^^^^^^^^^^^^\n\nLike raised exception, return values can also be handled in a similar manner. Return values that are handled cause the\nfunction to be retried, and those that aren't are simply return. A common use case for this is when interacting with\nfunctions that yield a return value that indicates a failed state (like ``-1`` or ``None``), while other values indicate\na successful state (like ``0`` or an ``object``).\n\n.. code-block:: python\n\n    @rerun(on_delay=[1000], on_return=-1)\n    def func()\n        return -1\n\n    # Function is retried because -1 is handled\n\nOne note to make is that if a sequence is given, any value that is matched in the sequence is handled. If, however, the\nreturn value is a sequence, either a function should be used to check for equality or ``on_return`` should be a sequence\nof sequences, like so.\n\n.. code-block:: python\n\n    # WRONG: checks if [-1, -1] is in the sequence [-1, -1]\n    @rerun(on_delay=[1000], on_return=[-1, -1])\n    def func():\n        return [-1, -1]  # Not handled\n\n    # CORRECT: checks if [-1, -1] is the return value\n    @rerun(on_delay=[1000], on_return=lambda x: x == [-1, -1])\n    def func():\n        return [-1, -1] # Is handled\n\n    # CORRECT: checks if [-1, -1] is in the sequence [[-1, -1]]\n    @rerun(on_delay=[1000], on_return=[[-1, -1]])\n    def func():\n        return [-1, -1] # Is handled\n\nEach time a retry takes place the ``on_retry`` callback is called, if given, passing in the current delay and the number\nof retries thus far. Logging is a common use-case for this, as shown below.\n\n.. code-block:: python\n\n    def log(delay, retry):\n        logging.info('Retrying function again (#%s) in %s seconds' % (delay, retry))\n\n    @rerun(on_delay=[1000, 2000, 3000], on_return=-1, on_retry=log)\n    def func():\n        ...\n\nThe ``on_retry`` callback is called prior to waiting for the delay in-between successive retries. If calling the\nit after the delay, the ``retry_after_delay`` parameter can be specified.\n\n.. code-block:: python\n\n    @rerun(on_delay=[1000],\n             on_return=-1,\n             on_retry=lambda d, r: print('Waited %s seconds for retry #%s' % (d, r)))\n    def func():\n        ...\n\n\nAdvanced Usage\n--------------\n\nInstead of using as a decorator, ``rerun`` can be used as an instead for wrapping an arbitrary number of function\ncalls. This can be achieved via the ``run`` method.\n\n.. code-block:: python\n\n    def func_a():\n        ...\n\n    def func_b():\n        ...\n\n    rerunner = rerun(on_delay=..., on_error=..., on_return=..., on_retry=...)\n\n    # Using same configured rerun instance\n    rerun.run(func_a, args, kwargs)\n    rerun.run(func_b, args, kwargs)\n\nBesides using the provided ``run`` method, like any decorator functions can be locally wrapped, passed around, and\nexecuted.\n\n.. code-block:: python\n\n    def func():\n        ...\n\n    rerunner = rerun(on_delay=..., on_error=..., on_return=..., on_retry=...)\n    rerun_func = rerunner(func)\n    rerun_func(args, kwargs)\n\n    # Or as a one-off like so\n    rerun(...)(func)(args, kwargs)\n\nEach of the function parameters that can be passed into ``rerun``, can actually be configured to accepts different\nnumber of parameters depending on the function. They can each either accept 0 parameters, the parameters that would be\ntypically passed in, or the wrapped function's args and kwargs in addition to the parameters typically given.\n\nOptionally passing in the args and kwargs allows for building more complex callback functions. Each of the possible\nfunction variations are shown below.\n\n.. code-block:: python\n\n    def on_delay(): ...\n    def on_delay(*args, **kwargs): ...\n\n    def on_error(): ...\n    def on_error(error): ...\n    def on_error(error, *args, **kwargs): ...\n\n    def on_return(): ...\n    def on_return(value): ...\n    def on_return(value, *args, **kwargs): ...\n\n    def on_retry(): ...\n    def on_retry(delay, retries): ...\n    def on_retry(delay, retries, *args, **kwargs): ...\n\n\nContribution\n------------\n\nContributions or suggestions are welcome! Feel free to `open an issue`_ if a bug is found or an enhancement is desired,\nor even a `pull request`_.\n\n.. _open an issue: https://github.com/jaredlgillespie/rerun.me/issues\n.. _pull request: https://github.com/jaredlgillespie/rerun.me/compare\n\nChangelog\n---------\n\nAll changes and versioning information can be found in the `CHANGELOG`_.\n\n.. _CHANGELOG: https://github.com/JaredLGillespie/rerun.me/blob/master/CHANGELOG.rst\n\nLicense\n-------\n\nCopyright (c) 2018 Jared Gillespie. See `LICENSE`_ for details.\n\n.. _LICENSE: https://github.com/JaredLGillespie/rerun.me/blob/master/LICENSE.txt\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/jaredlgillespie/rerun.me", "keywords": "rerun.me rerun retry decorator", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "rerun.me", "package_url": "https://pypi.org/project/rerun.me/", "platform": "", "project_url": "https://pypi.org/project/rerun.me/", "project_urls": {"Homepage": "https://github.com/jaredlgillespie/rerun.me"}, "release_url": "https://pypi.org/project/rerun.me/1.0.0/", "requires_dist": null, "requires_python": "", "summary": "A library for rerunning erred functions with delays.", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://travis-ci.org/JaredLGillespie/rerun.me\" rel=\"nofollow\"><img alt=\"Travis\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/28435ab51c47ca4c10324944cf736a2e9c6352ab/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f4a617265644c47696c6c65737069652f726572756e2e6d652e737667\"></a>\n<a href=\"https://coveralls.io/github/JaredLGillespie/rerun.me\" rel=\"nofollow\"><img alt=\"Coveralls github\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c91dfdbcd22adde6f4196758f712144f9c8263c6/68747470733a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f6769746875622f4a617265644c47696c6c65737069652f726572756e2e6d652e737667\"></a>\n<a href=\"https://pypi.org/project/rerun.me/\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6726db59b4e740ec97f0044c9bc46d8fb2b598d6/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f726572756e2e6d652e737667\"></a>\n<a href=\"https://pypi.org/project/rerun.me/\" rel=\"nofollow\"><img alt=\"PyPI - Wheel\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2a14e3b070b5813a24929424fe98b06cb21c607f/68747470733a2f2f696d672e736869656c64732e696f2f707970692f776865656c2f726572756e2e6d652e737667\"></a>\n<a href=\"https://pypi.org/project/rerun.me/\" rel=\"nofollow\"><img alt=\"PyPI - Python Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f7fd818fc7440e1d2a4002ce7e97e396e694b9b4/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f726572756e2e6d652e737667\"></a>\n<a href=\"https://pypi.org/project/rerun.me/\" rel=\"nofollow\"><img alt=\"PyPI - License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/9c0ad26bee77cb0446a6e43e46aeee4633e0953a/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f726572756e2e6d652e737667\"></a>\n<p>A library for rerunning functions in the case of raised exceptions and specific return values with configurable delays.</p>\n<pre><span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"n\">fibonacci</span><span class=\"p\">(</span><span class=\"mi\">1000</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">),</span>\n         <span class=\"n\">on_error</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">ConnectionTimeoutError</span><span class=\"p\">,</span> <span class=\"n\">DeadlockVictimError</span><span class=\"p\">],</span>\n         <span class=\"n\">on_return</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"kc\">None</span><span class=\"p\">]</span>\n         <span class=\"n\">on_retry</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">d</span><span class=\"p\">,</span> <span class=\"n\">r</span><span class=\"p\">:</span> <span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"s1\">'Retrying connection again (#</span><span class=\"si\">%s</span><span class=\"s1\">) in </span><span class=\"si\">%s</span><span class=\"s1\"> seconds'</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">r</span><span class=\"p\">,</span> <span class=\"n\">d</span><span class=\"p\">)))</span>\n<span class=\"k\">def</span> <span class=\"nf\">connection</span><span class=\"p\">(</span><span class=\"n\">conn_str</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">):</span>\n    <span class=\"n\">conn</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"p\">(</span><span class=\"n\">conn_str</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">open</span><span class=\"p\">()</span>\n</pre>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p>The latest version of rerun.me is available via <tt>pip</tt>:</p>\n<pre><span class=\"n\">pip</span> <span class=\"n\">install</span> <span class=\"n\">rerun</span><span class=\"o\">.</span><span class=\"n\">me</span>\n</pre>\n<p>Alternatively, you can download and install from source:</p>\n<pre><span class=\"n\">python</span> <span class=\"n\">setup</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"n\">install</span>\n</pre>\n</div>\n<div id=\"getting-started\">\n<h2>Getting Started</h2>\n<p>The <tt>rerun</tt> function contains the following signature:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">on_error</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">on_return</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">on_retry</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">retry_after_delay</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span>\n</pre>\n<p>It serves as both a function decorator, and a runnable wrapper and is configurable through it\u2019s dynamic parameters. Most\nof which are function callbacks which allow the user to highly configure the retrying behavior.</p>\n<p>This configurable nature is what sets this library apart from others with similar functionality. Many of which allow\nbasic configuration using defined retry limits and constant delays between requests, which may be OK for the most\nsimplistic of use cases. But most applications need more complex functionality which can delay with various common\nalgorithms such as exponential or fibonacci delays. This library provides a subset of the most common delay generators,\nbut is easily expandable to fit the application-specific needs.</p>\n<div id=\"delay-generators\">\n<h3>Delay Generators</h3>\n<p>Different <tt>on_delay</tt> generators can be used for increasing the delays between successive retries. Note that the values\nfor the delays are given in milliseconds.</p>\n<pre><span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">,</span> <span class=\"mi\">2000</span><span class=\"p\">],</span> <span class=\"n\">on_error</span><span class=\"o\">=</span><span class=\"ne\">KeyError</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n</pre>\n<p>Generators and iterable items can be used to generate delays too.</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">fancy_generator</span><span class=\"p\">():</span>\n    <span class=\"c1\"># yield delays</span>\n    <span class=\"o\">...</span>\n\n<span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"n\">fancy_generator</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n</pre>\n<p>If a single delay is desired, an <tt>integer</tt> or <tt>float</tt> value can be given, like so.</p>\n<pre><span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"mi\">1000</span><span class=\"p\">,</span> <span class=\"n\">on_error</span><span class=\"o\">=</span><span class=\"ne\">KeyError</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n</pre>\n<p>A couple of generator functions are provided in the library. These are the typical algorithms used in most systems, and\ncan serve as a baseline example for more complex delay systems.</p>\n<ul>\n<li><tt>constant(delay, limit)</tt>: yields a constant delay at each iteration</li>\n<li><tt>linear(start, increment, limit)</tt>: yields a linearly increasing delay at each iteration</li>\n<li><tt>exponential(base, multiplier, limit)</tt>: yields an exponentially increasing delay at each iteration</li>\n<li><tt>fibonacci(multiplier, limit)</tt>: yields a delay following the fibonacci pattern at each iteration</li>\n</ul>\n<p>If the function fails to yield a response that isn\u2019t handled before running out of generated items by the <tt>on_delay</tt>\ngenerator, a <tt>MaxRetryException</tt> is thrown.</p>\n<pre><span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">on_error</span><span class=\"o\">=</span><span class=\"ne\">KeyError</span><span class=\"p\">)</span>  <span class=\"c1\"># No retries</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"k\">raise</span> <span class=\"ne\">KeyError</span>\n\n<span class=\"c1\"># MaxRetryException is raised</span>\n</pre>\n</div>\n<div id=\"error-handling\">\n<h3>Error Handling</h3>\n<p>The <tt>on_error</tt> can be used to determine if a raised exception should be handled and the function retried. A single\nexception can be specified to be handled. If an exception is raised that isn\u2019t handled, it will bubble up to the outer\nscope without retrying the function.</p>\n<pre><span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">],</span> <span class=\"n\">on_error</span><span class=\"o\">=</span><span class=\"ne\">TypeError</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"k\">raise</span> <span class=\"ne\">KeyError</span>\n\n<span class=\"c1\"># KeyError isn't handled, and is thus raised</span>\n</pre>\n<p>Multiple errors can be given as a sequence to handle more than one.</p>\n<pre><span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">],</span> <span class=\"n\">on_error</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"ne\">ValueError</span><span class=\"p\">,</span> <span class=\"ne\">TimeoutError</span><span class=\"p\">])</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n</pre>\n<p>A callable object (such as a function), can be used for more complex handling of errors. These should accept a single\nvalue, the error raised, and return a boolean indicating <tt>True</tt> to handle, or <tt>False</tt> to not.</p>\n<pre><span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">],</span> <span class=\"n\">on_error</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">x</span><span class=\"p\">:</span> <span class=\"ow\">not</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"ne\">ValueError</span><span class=\"p\">,</span> <span class=\"ne\">TimeoutError</span><span class=\"p\">))</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n</pre>\n</div>\n<div id=\"return-value-handling\">\n<h3>Return Value Handling</h3>\n<p>Like raised exception, return values can also be handled in a similar manner. Return values that are handled cause the\nfunction to be retried, and those that aren\u2019t are simply return. A common use case for this is when interacting with\nfunctions that yield a return value that indicates a failed state (like <tt><span class=\"pre\">-1</span></tt> or <tt>None</tt>), while other values indicate\na successful state (like <tt>0</tt> or an <tt>object</tt>).</p>\n<pre><span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">],</span> <span class=\"n\">on_return</span><span class=\"o\">=-</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">()</span>\n    <span class=\"k\">return</span> <span class=\"o\">-</span><span class=\"mi\">1</span>\n\n<span class=\"c1\"># Function is retried because -1 is handled</span>\n</pre>\n<p>One note to make is that if a sequence is given, any value that is matched in the sequence is handled. If, however, the\nreturn value is a sequence, either a function should be used to check for equality or <tt>on_return</tt> should be a sequence\nof sequences, like so.</p>\n<pre><span class=\"c1\"># WRONG: checks if [-1, -1] is in the sequence [-1, -1]</span>\n<span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">],</span> <span class=\"n\">on_return</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">])</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span>  <span class=\"c1\"># Not handled</span>\n\n<span class=\"c1\"># CORRECT: checks if [-1, -1] is the return value</span>\n<span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">],</span> <span class=\"n\">on_return</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">x</span><span class=\"p\">:</span> <span class=\"n\">x</span> <span class=\"o\">==</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">])</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"c1\"># Is handled</span>\n\n<span class=\"c1\"># CORRECT: checks if [-1, -1] is in the sequence [[-1, -1]]</span>\n<span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">],</span> <span class=\"n\">on_return</span><span class=\"o\">=</span><span class=\"p\">[[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]])</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"c1\"># Is handled</span>\n</pre>\n<p>Each time a retry takes place the <tt>on_retry</tt> callback is called, if given, passing in the current delay and the number\nof retries thus far. Logging is a common use-case for this, as shown below.</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">log</span><span class=\"p\">(</span><span class=\"n\">delay</span><span class=\"p\">,</span> <span class=\"n\">retry</span><span class=\"p\">):</span>\n    <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"s1\">'Retrying function again (#</span><span class=\"si\">%s</span><span class=\"s1\">) in </span><span class=\"si\">%s</span><span class=\"s1\"> seconds'</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">delay</span><span class=\"p\">,</span> <span class=\"n\">retry</span><span class=\"p\">))</span>\n\n<span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">,</span> <span class=\"mi\">2000</span><span class=\"p\">,</span> <span class=\"mi\">3000</span><span class=\"p\">],</span> <span class=\"n\">on_return</span><span class=\"o\">=-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">on_retry</span><span class=\"o\">=</span><span class=\"n\">log</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n</pre>\n<p>The <tt>on_retry</tt> callback is called prior to waiting for the delay in-between successive retries. If calling the\nit after the delay, the <tt>retry_after_delay</tt> parameter can be specified.</p>\n<pre><span class=\"nd\">@rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1000</span><span class=\"p\">],</span>\n         <span class=\"n\">on_return</span><span class=\"o\">=-</span><span class=\"mi\">1</span><span class=\"p\">,</span>\n         <span class=\"n\">on_retry</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">d</span><span class=\"p\">,</span> <span class=\"n\">r</span><span class=\"p\">:</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Waited </span><span class=\"si\">%s</span><span class=\"s1\"> seconds for retry #</span><span class=\"si\">%s</span><span class=\"s1\">'</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">d</span><span class=\"p\">,</span> <span class=\"n\">r</span><span class=\"p\">)))</span>\n<span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n</pre>\n</div>\n</div>\n<div id=\"advanced-usage\">\n<h2>Advanced Usage</h2>\n<p>Instead of using as a decorator, <tt>rerun</tt> can be used as an instead for wrapping an arbitrary number of function\ncalls. This can be achieved via the <tt>run</tt> method.</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">func_a</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">func_b</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n\n<span class=\"n\">rerunner</span> <span class=\"o\">=</span> <span class=\"n\">rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=...</span><span class=\"p\">,</span> <span class=\"n\">on_error</span><span class=\"o\">=...</span><span class=\"p\">,</span> <span class=\"n\">on_return</span><span class=\"o\">=...</span><span class=\"p\">,</span> <span class=\"n\">on_retry</span><span class=\"o\">=...</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Using same configured rerun instance</span>\n<span class=\"n\">rerun</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">func_a</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">kwargs</span><span class=\"p\">)</span>\n<span class=\"n\">rerun</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">func_b</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">kwargs</span><span class=\"p\">)</span>\n</pre>\n<p>Besides using the provided <tt>run</tt> method, like any decorator functions can be locally wrapped, passed around, and\nexecuted.</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">func</span><span class=\"p\">():</span>\n    <span class=\"o\">...</span>\n\n<span class=\"n\">rerunner</span> <span class=\"o\">=</span> <span class=\"n\">rerun</span><span class=\"p\">(</span><span class=\"n\">on_delay</span><span class=\"o\">=...</span><span class=\"p\">,</span> <span class=\"n\">on_error</span><span class=\"o\">=...</span><span class=\"p\">,</span> <span class=\"n\">on_return</span><span class=\"o\">=...</span><span class=\"p\">,</span> <span class=\"n\">on_retry</span><span class=\"o\">=...</span><span class=\"p\">)</span>\n<span class=\"n\">rerun_func</span> <span class=\"o\">=</span> <span class=\"n\">rerunner</span><span class=\"p\">(</span><span class=\"n\">func</span><span class=\"p\">)</span>\n<span class=\"n\">rerun_func</span><span class=\"p\">(</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">kwargs</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Or as a one-off like so</span>\n<span class=\"n\">rerun</span><span class=\"p\">(</span><span class=\"o\">...</span><span class=\"p\">)(</span><span class=\"n\">func</span><span class=\"p\">)(</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">kwargs</span><span class=\"p\">)</span>\n</pre>\n<p>Each of the function parameters that can be passed into <tt>rerun</tt>, can actually be configured to accepts different\nnumber of parameters depending on the function. They can each either accept 0 parameters, the parameters that would be\ntypically passed in, or the wrapped function\u2019s args and kwargs in addition to the parameters typically given.</p>\n<p>Optionally passing in the args and kwargs allows for building more complex callback functions. Each of the possible\nfunction variations are shown below.</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">on_delay</span><span class=\"p\">():</span> <span class=\"o\">...</span>\n<span class=\"k\">def</span> <span class=\"nf\">on_delay</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span> <span class=\"o\">...</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">on_error</span><span class=\"p\">():</span> <span class=\"o\">...</span>\n<span class=\"k\">def</span> <span class=\"nf\">on_error</span><span class=\"p\">(</span><span class=\"n\">error</span><span class=\"p\">):</span> <span class=\"o\">...</span>\n<span class=\"k\">def</span> <span class=\"nf\">on_error</span><span class=\"p\">(</span><span class=\"n\">error</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span> <span class=\"o\">...</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">on_return</span><span class=\"p\">():</span> <span class=\"o\">...</span>\n<span class=\"k\">def</span> <span class=\"nf\">on_return</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">):</span> <span class=\"o\">...</span>\n<span class=\"k\">def</span> <span class=\"nf\">on_return</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span> <span class=\"o\">...</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">on_retry</span><span class=\"p\">():</span> <span class=\"o\">...</span>\n<span class=\"k\">def</span> <span class=\"nf\">on_retry</span><span class=\"p\">(</span><span class=\"n\">delay</span><span class=\"p\">,</span> <span class=\"n\">retries</span><span class=\"p\">):</span> <span class=\"o\">...</span>\n<span class=\"k\">def</span> <span class=\"nf\">on_retry</span><span class=\"p\">(</span><span class=\"n\">delay</span><span class=\"p\">,</span> <span class=\"n\">retries</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span> <span class=\"o\">...</span>\n</pre>\n</div>\n<div id=\"contribution\">\n<h2>Contribution</h2>\n<p>Contributions or suggestions are welcome! Feel free to <a href=\"https://github.com/jaredlgillespie/rerun.me/issues\" rel=\"nofollow\">open an issue</a> if a bug is found or an enhancement is desired,\nor even a <a href=\"https://github.com/jaredlgillespie/rerun.me/compare\" rel=\"nofollow\">pull request</a>.</p>\n</div>\n<div id=\"changelog\">\n<h2>Changelog</h2>\n<p>All changes and versioning information can be found in the <a href=\"https://github.com/JaredLGillespie/rerun.me/blob/master/CHANGELOG.rst\" rel=\"nofollow\">CHANGELOG</a>.</p>\n</div>\n<div id=\"license\">\n<h2>License</h2>\n<p>Copyright (c) 2018 Jared Gillespie. See <a href=\"https://github.com/JaredLGillespie/rerun.me/blob/master/LICENSE.txt\" rel=\"nofollow\">LICENSE</a> for details.</p>\n</div>\n\n          </div>"}, "last_serial": 3980193, "releases": {"0.1.1": [{"comment_text": "", "digests": {"md5": "5d41994d4011d51a751fe8f4e4166df4", "sha256": "eace18f95104e29e5e82bbaf71fa3caf1561e5971bf19545b179a3567e2d8a2f"}, "downloads": -1, "filename": "rerun.me-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "5d41994d4011d51a751fe8f4e4166df4", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9117, "upload_time": "2018-06-17T05:54:03", "upload_time_iso_8601": "2018-06-17T05:54:03.686260Z", "url": "https://files.pythonhosted.org/packages/6f/84/d5f75a3d7930e6a7e24071808cd3cccb439e874b88f26a99a18ebe6c262c/rerun.me-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2bb176e6ceb7b00c1a7b091448547a0c", "sha256": "a0e9b097e6388c47395d3c2a1adae549c7981dd2832fe2ed22ceb01cc5c35dc1"}, "downloads": -1, "filename": "rerun.me-0.1.1.tar.gz", "has_sig": false, "md5_digest": "2bb176e6ceb7b00c1a7b091448547a0c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9642, "upload_time": "2018-06-17T05:54:04", "upload_time_iso_8601": "2018-06-17T05:54:04.984608Z", "url": "https://files.pythonhosted.org/packages/29/dd/ff3ba6653a002ec3f30ce3ce93a77216b2a1b7e713a49ebc0dbb670e8735/rerun.me-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "1d1ce0fb99de7041297051a50e5bd9a2", "sha256": "126b38d2ce48affa88f408bca38c8cac56f4d570aa09b12a0d8538063472f9b5"}, "downloads": -1, "filename": "rerun.me-0.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "1d1ce0fb99de7041297051a50e5bd9a2", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9120, "upload_time": "2018-06-17T19:10:07", "upload_time_iso_8601": "2018-06-17T19:10:07.390316Z", "url": "https://files.pythonhosted.org/packages/1f/c8/31ad6a73d9604d61953c85c797763cb7dc22777119809e7030050b99b638/rerun.me-0.1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1d209d9164335316109bacf7e8c729fa", "sha256": "3a9ffebad24e1cfa6a5e6a27057d5bba85974bda3faee1d86725fc8fdb21a614"}, "downloads": -1, "filename": "rerun.me-0.1.2.tar.gz", "has_sig": false, "md5_digest": "1d209d9164335316109bacf7e8c729fa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9718, "upload_time": "2018-06-17T19:10:08", "upload_time_iso_8601": "2018-06-17T19:10:08.797431Z", "url": "https://files.pythonhosted.org/packages/97/bb/60b852d54cbf29e31567ca3fd6edcbd6f06de69dcbbf7ef327eb9302c02a/rerun.me-0.1.2.tar.gz", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "261a2a6396d77506c788e8f0be6f09aa", "sha256": "c4303bf28e2cf4119cd4c1172ee6da9b274dd44904e414dff4e552c276bb2160"}, "downloads": -1, "filename": "rerun.me-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "261a2a6396d77506c788e8f0be6f09aa", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9121, "upload_time": "2018-06-20T05:47:48", "upload_time_iso_8601": "2018-06-20T05:47:48.213783Z", "url": "https://files.pythonhosted.org/packages/a3/e9/9cd8895d7f03df2207b670d79fc008161827be6e024f80418330300df7ea/rerun.me-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "675a3bee66707dbf15714823d9d0a4b5", "sha256": "a58b8bb2121b440a1e7e5e85bdac57c76f9b50d7bef2b94ae00f955651cb056a"}, "downloads": -1, "filename": "rerun.me-1.0.0.tar.gz", "has_sig": false, "md5_digest": "675a3bee66707dbf15714823d9d0a4b5", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9780, "upload_time": "2018-06-20T05:47:49", "upload_time_iso_8601": "2018-06-20T05:47:49.368720Z", "url": "https://files.pythonhosted.org/packages/6c/a7/bd6b5df1bff1056ac70754dcc6d9a585ce924a0241a40fdbc6d23748af59/rerun.me-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "261a2a6396d77506c788e8f0be6f09aa", "sha256": "c4303bf28e2cf4119cd4c1172ee6da9b274dd44904e414dff4e552c276bb2160"}, "downloads": -1, "filename": "rerun.me-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "261a2a6396d77506c788e8f0be6f09aa", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9121, "upload_time": "2018-06-20T05:47:48", "upload_time_iso_8601": "2018-06-20T05:47:48.213783Z", "url": "https://files.pythonhosted.org/packages/a3/e9/9cd8895d7f03df2207b670d79fc008161827be6e024f80418330300df7ea/rerun.me-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "675a3bee66707dbf15714823d9d0a4b5", "sha256": "a58b8bb2121b440a1e7e5e85bdac57c76f9b50d7bef2b94ae00f955651cb056a"}, "downloads": -1, "filename": "rerun.me-1.0.0.tar.gz", "has_sig": false, "md5_digest": "675a3bee66707dbf15714823d9d0a4b5", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9780, "upload_time": "2018-06-20T05:47:49", "upload_time_iso_8601": "2018-06-20T05:47:49.368720Z", "url": "https://files.pythonhosted.org/packages/6c/a7/bd6b5df1bff1056ac70754dcc6d9a585ce924a0241a40fdbc6d23748af59/rerun.me-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:03:56 2020"}