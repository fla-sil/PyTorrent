{"info": {"author": "Steven Silva Mendoza", "author_email": "sasilva1998@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# uPy-rosserial\n`rosserial` a method used by ROS in order to establish communication via serial , mostly this is used with microcontrollers, which in this case are the ones responsible in some ROS applications for actuators and sensors usage.\n\nSince there is no rosserial package for uPy as there is for Arduino, this repo has been created where every needed script to establish rosserial with uPy will be found.\n\n## Features\n- [x] Advertising Topics\n- [x] Publishing\n- [x] Subscribing\n- [ ] Actions\n- [ ] Services\n\n**To Do: Subscribing testing and implementation.**\n\n## Installation\nBefore using this library you must have ROS installed, as well as rosserial which would be with the following command:\n`sudo apt install ros-<version>-rosserial`\n\n\nIn theory every board with the kind of generic `UART` class for ESP32 is capable of using this library, but it must be known exactly which `UART ID` is being used, this means for example, for ESP32 defined pins correspond to TX0 and RX0 for UART0, and so on. In the examples below, UART2 is used.\n\nIn order to use ros node communication, have in mind a python class for each message must be available. this means a dependency of this library is [uPy Genpy](https://github.com/FunPythonEC/uPy-genpy), used to create Python classes for messages from `*.msg` files. Follow the installation from `ugenpy` before proceeding.\n\nOnce `ugenpy` is inside, the packages `uros` and `rosserial_msgs` from `src` folder from this repository must be copied to the flash memory. I strongly recommend using [rshell](https://github.com/dhylands/rshell).\n>Note: Soon this will be available to be installed with upip.\n\n**Have in mind before publishing or subscribing to a topic, the message class must be generated with `ugenpy`**\n\n## Usage\n\nEverytime before establishing rosserial communication, this command must be run, even before running the script in uPy, will be improved afterwards:\n>rosrun rosserial_arduino serial_node.py _port:=/dev/ttyUSB0 _baud:=115200\n\n**Note port and baudrate can be changed, in ESP32 I prefer using 115200 for baudrate.**\n\n### Publish example\n\nSuppose `ColorRGBA.py` has been created using `ugenpy` and `ColorRGBA.msg` file:\n```\nfloat32 r\nfloat32 g\nfloat32 b\nfloat32 a\n```\n\nAnd then running the following e.g.:\n\n``` python\nimport uros\nfrom std_msgs import ColorRGBA #message object ColorRGBA\nfrom time import sleep\nnode=uros.NodeHandle(2,115200) #node initialized, for tx2/rx2 and 115200 baudrate\nmsg=ColorRGBA() #msg object init\nmsg.r=1 #values to variables assigned\nmsg.g=3\nmsg.b=4\nmsg.a=1\nwhile True:\n    node.publish('Colorsh',msg) #publish data to node Colorsh\n    sleep(1)\n```\n\n### Subscribe example\n\n```python\nimport uros\nfrom std_msgs import String\n\ndef cb(msg):\n\tprint(msg.data)\n\t\nnode = uros.NodeHandle(2, 115200)\nnode.subscribe('chatter', String, cb)\n```\n\n### Mixed example\n\n```python\nimport uros\nfrom std_msgs import String\n\ndef cb(msg):\n\tprint(msg.data)\n\t\npacket=String()\npacket.data='hola fpy'\nnode = uros.NodeHandle(2, 115200)\nnode.subscribe('chatter', String, cb)\nwhile True:\n\tnode.publish('greet', packet)\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/FunPythonEC/uPy-rosserial", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "micropython-rosserial", "package_url": "https://pypi.org/project/micropython-rosserial/", "platform": "", "project_url": "https://pypi.org/project/micropython-rosserial/", "project_urls": {"Homepage": "https://github.com/FunPythonEC/uPy-rosserial"}, "release_url": "https://pypi.org/project/micropython-rosserial/0.2.4/", "requires_dist": null, "requires_python": "", "summary": "A package done in order to use rosserial with micropython.", "version": "0.2.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>uPy-rosserial</h1>\n<p><code>rosserial</code> a method used by ROS in order to establish communication via serial , mostly this is used with microcontrollers, which in this case are the ones responsible in some ROS applications for actuators and sensors usage.</p>\n<p>Since there is no rosserial package for uPy as there is for Arduino, this repo has been created where every needed script to establish rosserial with uPy will be found.</p>\n<h2>Features</h2>\n<ul>\n<li>[x] Advertising Topics</li>\n<li>[x] Publishing</li>\n<li>[x] Subscribing</li>\n<li>[ ] Actions</li>\n<li>[ ] Services</li>\n</ul>\n<p><strong>To Do: Subscribing testing and implementation.</strong></p>\n<h2>Installation</h2>\n<p>Before using this library you must have ROS installed, as well as rosserial which would be with the following command:\n<code>sudo apt install ros-&lt;version&gt;-rosserial</code></p>\n<p>In theory every board with the kind of generic <code>UART</code> class for ESP32 is capable of using this library, but it must be known exactly which <code>UART ID</code> is being used, this means for example, for ESP32 defined pins correspond to TX0 and RX0 for UART0, and so on. In the examples below, UART2 is used.</p>\n<p>In order to use ros node communication, have in mind a python class for each message must be available. this means a dependency of this library is <a href=\"https://github.com/FunPythonEC/uPy-genpy\" rel=\"nofollow\">uPy Genpy</a>, used to create Python classes for messages from <code>*.msg</code> files. Follow the installation from <code>ugenpy</code> before proceeding.</p>\n<p>Once <code>ugenpy</code> is inside, the packages <code>uros</code> and <code>rosserial_msgs</code> from <code>src</code> folder from this repository must be copied to the flash memory. I strongly recommend using <a href=\"https://github.com/dhylands/rshell\" rel=\"nofollow\">rshell</a>.</p>\n<blockquote>\n<p>Note: Soon this will be available to be installed with upip.</p>\n</blockquote>\n<p><strong>Have in mind before publishing or subscribing to a topic, the message class must be generated with <code>ugenpy</code></strong></p>\n<h2>Usage</h2>\n<p>Everytime before establishing rosserial communication, this command must be run, even before running the script in uPy, will be improved afterwards:</p>\n<blockquote>\n<p>rosrun rosserial_arduino serial_node.py _port:=/dev/ttyUSB0 _baud:=115200</p>\n</blockquote>\n<p><strong>Note port and baudrate can be changed, in ESP32 I prefer using 115200 for baudrate.</strong></p>\n<h3>Publish example</h3>\n<p>Suppose <code>ColorRGBA.py</code> has been created using <code>ugenpy</code> and <code>ColorRGBA.msg</code> file:</p>\n<pre><code>float32 r\nfloat32 g\nfloat32 b\nfloat32 a\n</code></pre>\n<p>And then running the following e.g.:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">uros</span>\n<span class=\"kn\">from</span> <span class=\"nn\">std_msgs</span> <span class=\"kn\">import</span> <span class=\"n\">ColorRGBA</span> <span class=\"c1\">#message object ColorRGBA</span>\n<span class=\"kn\">from</span> <span class=\"nn\">time</span> <span class=\"kn\">import</span> <span class=\"n\">sleep</span>\n<span class=\"n\">node</span><span class=\"o\">=</span><span class=\"n\">uros</span><span class=\"o\">.</span><span class=\"n\">NodeHandle</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">115200</span><span class=\"p\">)</span> <span class=\"c1\">#node initialized, for tx2/rx2 and 115200 baudrate</span>\n<span class=\"n\">msg</span><span class=\"o\">=</span><span class=\"n\">ColorRGBA</span><span class=\"p\">()</span> <span class=\"c1\">#msg object init</span>\n<span class=\"n\">msg</span><span class=\"o\">.</span><span class=\"n\">r</span><span class=\"o\">=</span><span class=\"mi\">1</span> <span class=\"c1\">#values to variables assigned</span>\n<span class=\"n\">msg</span><span class=\"o\">.</span><span class=\"n\">g</span><span class=\"o\">=</span><span class=\"mi\">3</span>\n<span class=\"n\">msg</span><span class=\"o\">.</span><span class=\"n\">b</span><span class=\"o\">=</span><span class=\"mi\">4</span>\n<span class=\"n\">msg</span><span class=\"o\">.</span><span class=\"n\">a</span><span class=\"o\">=</span><span class=\"mi\">1</span>\n<span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n    <span class=\"n\">node</span><span class=\"o\">.</span><span class=\"n\">publish</span><span class=\"p\">(</span><span class=\"s1\">'Colorsh'</span><span class=\"p\">,</span><span class=\"n\">msg</span><span class=\"p\">)</span> <span class=\"c1\">#publish data to node Colorsh</span>\n    <span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n</pre>\n<h3>Subscribe example</h3>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">uros</span>\n<span class=\"kn\">from</span> <span class=\"nn\">std_msgs</span> <span class=\"kn\">import</span> <span class=\"n\">String</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">cb</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"p\">):</span>\n\t<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">)</span>\n\t\n<span class=\"n\">node</span> <span class=\"o\">=</span> <span class=\"n\">uros</span><span class=\"o\">.</span><span class=\"n\">NodeHandle</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">115200</span><span class=\"p\">)</span>\n<span class=\"n\">node</span><span class=\"o\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s1\">'chatter'</span><span class=\"p\">,</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cb</span><span class=\"p\">)</span>\n</pre>\n<h3>Mixed example</h3>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">uros</span>\n<span class=\"kn\">from</span> <span class=\"nn\">std_msgs</span> <span class=\"kn\">import</span> <span class=\"n\">String</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">cb</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"p\">):</span>\n\t<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">)</span>\n\t\n<span class=\"n\">packet</span><span class=\"o\">=</span><span class=\"n\">String</span><span class=\"p\">()</span>\n<span class=\"n\">packet</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'hola fpy'</span>\n<span class=\"n\">node</span> <span class=\"o\">=</span> <span class=\"n\">uros</span><span class=\"o\">.</span><span class=\"n\">NodeHandle</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">115200</span><span class=\"p\">)</span>\n<span class=\"n\">node</span><span class=\"o\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s1\">'chatter'</span><span class=\"p\">,</span> <span class=\"n\">String</span><span class=\"p\">,</span> <span class=\"n\">cb</span><span class=\"p\">)</span>\n<span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n\t<span class=\"n\">node</span><span class=\"o\">.</span><span class=\"n\">publish</span><span class=\"p\">(</span><span class=\"s1\">'greet'</span><span class=\"p\">,</span> <span class=\"n\">packet</span><span class=\"p\">)</span>\n</pre>\n\n          </div>"}, "last_serial": 6939517, "releases": {"0.2.3": [{"comment_text": "", "digests": {"md5": "1e5228f6255fb457ba2487b237582fb6", "sha256": "6b47e547b841021a8a1785fbeb9dcb801d2bfc722be8c0d3f20cea9a1911c31b"}, "downloads": -1, "filename": "micropython-rosserial-0.2.3.tar.gz", "has_sig": false, "md5_digest": "1e5228f6255fb457ba2487b237582fb6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3842, "upload_time": "2020-04-02T22:43:09", "upload_time_iso_8601": "2020-04-02T22:43:09.621960Z", "url": "https://files.pythonhosted.org/packages/c7/5e/453cd02251edf82ebed36444dbb882660d6ddbaba8e737f4a6e3eece43b9/micropython-rosserial-0.2.3.tar.gz", "yanked": false}], "0.2.4": [{"comment_text": "", "digests": {"md5": "1093bf8c88a470cfe10028502790e5e0", "sha256": "05f44374e7c6a8f54181d22a45cc2d13b56b00fe9921509a7027be21ea4525cc"}, "downloads": -1, "filename": "micropython-rosserial-0.2.4.tar.gz", "has_sig": false, "md5_digest": "1093bf8c88a470cfe10028502790e5e0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3842, "upload_time": "2020-04-02T22:47:54", "upload_time_iso_8601": "2020-04-02T22:47:54.123626Z", "url": "https://files.pythonhosted.org/packages/7e/b2/012ba155b7f1c2768d5507983708e79ce4cf8feed38bf31588b9ee580c10/micropython-rosserial-0.2.4.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "1093bf8c88a470cfe10028502790e5e0", "sha256": "05f44374e7c6a8f54181d22a45cc2d13b56b00fe9921509a7027be21ea4525cc"}, "downloads": -1, "filename": "micropython-rosserial-0.2.4.tar.gz", "has_sig": false, "md5_digest": "1093bf8c88a470cfe10028502790e5e0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3842, "upload_time": "2020-04-02T22:47:54", "upload_time_iso_8601": "2020-04-02T22:47:54.123626Z", "url": "https://files.pythonhosted.org/packages/7e/b2/012ba155b7f1c2768d5507983708e79ce4cf8feed38bf31588b9ee580c10/micropython-rosserial-0.2.4.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:55:02 2020"}