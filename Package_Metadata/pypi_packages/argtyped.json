{"info": {"author": "Zecong Hu", "author_email": "huzecong@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Environment :: Console", "Intended Audience :: Developers", "Intended Audience :: Science/Research", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3 :: Only", "Topic :: System :: Shells", "Topic :: Utilities", "Typing :: Typed"], "description": "# `argtyped`: Command Line Argument Parser, with Types\n\n[![Build Status](https://github.com/huzecong/argtyped/workflows/Build/badge.svg)](https://github.com/huzecong/argtyped/actions?query=workflow%3ABuild+branch%3Amaster)\n[![CodeCov](https://codecov.io/gh/huzecong/argtyped/branch/master/graph/badge.svg?token=ELHfYJ2Ydq)](https://codecov.io/gh/huzecong/argtyped)\n[![PyPI](https://badge.fury.io/py/argtyped.svg)](https://pypi.org/project/argtyped/)\n[![MIT License](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/huzecong/argtyped/blob/master/LICENSE)\n\n`argtyped` is an command line argument parser with that relies on type annotations. It is built on\n[`argparse`](https://docs.python.org/3/library/argparse.html), the command line argument parser library built into\nPython. Compared with `argparse`, this library gives you:\n\n- More concise and intuitive syntax, less boilerplate code.\n- Type checking and IDE auto-completion for command line arguments.\n- A drop-in replacement for `argparse` in most cases.\n\n\n## Installation\n\nInstall stable release from [PyPI](https://pypi.org/project/argtyped/):\n```bash\npip install argtyped\n```\n\nOr, install the latest commit from GitHub:\n```bash\npip install -e git+https://github.com/huzecong/argtyped.git\n```\n\n## Usage\n\nWith `argtyped`, you can define command line arguments in a syntax similar to\n[`typing.NamedTuple`](https://docs.python.org/3/library/typing.html#typing.NamedTuple). The syntax is intuitive and can\nbe illustrated with an example:\n```python\nfrom typing import Optional\n\nfrom argtyped import Arguments, Choices, Switch\nfrom argtyped import Enum, auto\n\nclass LoggingLevels(Enum):\n    Debug = auto()\n    Info = auto()\n    Warning = auto()\n    Error = auto()\n    Critical = auto()\n\nclass MyArguments(Arguments):\n    model_name: str         # required argument of `str` type\n    hidden_size: int = 512  # `int` argument with default value of 512\n\n    activation: Choices['relu', 'tanh', 'sigmoid'] = 'relu'  # argument with limited choices\n    logging_level: LoggingLevels = LoggingLevels.Info        # using `Enum` class as choices\n\n    use_dropout: Switch = True  # switch argument, enable with \"--use-dropout\" and disable with \"--no-use-dropout\"\n    dropout_prob: Optional[float] = 0.5  # optional argument, \"--dropout-prob=none\" parses into `None`\n\nargs = Arguments()\n```\n\nThis is equivalent to the following code with Python built-in `argparse`:\n```python\nimport argparse\nfrom enum import Enum\n\nclass LoggingLevels(Enum):\n    Debug = \"debug\"\n    Info = \"info\"\n    Warning = \"warning\"\n    Error = \"error\"\n    Critical = \"critical\"\n\nparser = argparse.ArgumentParser()\n\nparser.add_argument(\"--model-name\", type=str, required=True)\nparser.add_argument(\"--hidden-size\", type=int, default=512)\n\nparser.add_argument(\"--activation\", choices=[\"relu\", \"tanh\", \"sigmoid\"], default=\"relu\")\nparser.add_argument(\"--logging-level\", choices=list(LoggingLevels), type=LoggingLevels, default=\"info\")\n\nparser.add_argument(\"--use-dropout\", action=\"store_true\", dest=\"use_dropout\", default=True)\nparser.add_argument(\"--no-use-dropout\", action=\"store_false\", dest=\"use_dropout\")\nparser.add_argument(\"--dropout-prob\", type=lambda s: None if s.lower() == 'none' else float(s), default=0.5)\n\nargs = parser.parse_args()\n```\n\nSave the code into a file named `main.py`. Suppose the following arguments are provided:\n```bash\npython main.py \\\n    --model-name LSTM \\\n    --activation sigmoid \\\n    --logging-level debug \\\n    --no-use-dropout \\\n    --dropout-prob none\n```\nThen the parsed arguments will be equivalent to the following structured returned by `argparse`:\n```python\nargparse.Namespace(\n    model_name=\"LSTM\", hidden_size=512, activation=\"sigmoid\", logging_level=\"debug\",\n    use_dropout=False, dropout_prob=None)\n```\n\nArguments can also be pretty-printed with `print(args.to_string())`, which gives:\n```\n<class '__main__.MyArguments'>\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551 Arguments       \u2502 Values                           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 model_name      \u2502 'LSTM'                           \u2551\n\u2551 hidden_size     \u2502 512                              \u2551\n\u2551 activation      \u2502 'sigmoid'                        \u2551\n\u2551 logging_level   \u2502 <MyLoggingLevels.Debug: 'debug'> \u2551\n\u2551 use_dropout     \u2502 False                            \u2551\n\u2551 dropout_prob    \u2502 None                             \u2551\n\u2551 label_smoothing \u2502 0.1                              \u2551\n\u2551 some_true_arg   \u2502 True                             \u2551\n\u2551 some_false_arg  \u2502 False                            \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n```\n\n## Reference\n\n### The `argtyped.Arguments` Class\n\nThe `argtyped.Arguments` class is main class of the package, from which you should derive your custom class that holds\narguments. Each argument takes the form of a class attribute, with its type annotation and an optional default value.\n\nWhen an instance of your custom class is initialized, the command line arguments are parsed from `sys.argv` into values\nwith your annotated types. You can also provide the list of strings to parse by passing them as the parameter.\n\nThe parsed arguments are stored in an object of your custom type. This gives you arguments that can be auto-completed\nby the IDE, and type-checked by a static type checker like [`mypy`](http://mypy-lang.org/).\n\nThe following example illustrates the keypoints:\n```python\nclass MyArgs(argtyped.Arguments):\n    # name: type [= default_val]\n    value: int = 0\n\nargs = MyArgs()                    # equivalent to `parser.parse_args()`\nargs = MyArgs([\"--value\", \"123\"])  # equivalent to `parser.parse_args([\"--value\", \"123\"])\nassert isinstance(args, MyArgs)\n```\n\n### Argument Types\n\nTo summarize, whatever works for `argparse` works here. The following types are supported:\n\n- Built-in types such as `int`, `float`, `str`.\n- `bool` type. Accepted values (case-insensitive) for `True` are: `y`, `yes`, `true`, `ok`; accepted values for `False`\n  are: `n`, `no`, `false`.\n- Choice types `Choices[...]`. A choice argument is essentially an `str` argument with limited choice of values. The\n  ellipses can be filled with a tuple of `str`s, or an expression that evaluates to a list of `str`s:\n  ```python\n  from argtyped import Arguments, Choices\n  from typing import List\n\n  def logging_levels() -> List[str]:\n      return [\"debug\", \"info\", \"warning\", \"error\"]\n\n  class MyArgs(Arguments):\n      foo: Choices[\"debug\", \"info\", \"warning\", \"error\"]  # 4 choices\n      bar: Choices[logging_levels()]                     # the same 4 choices\n\n  # argv: [\"--foo=debug\", \"--bar=info\"] => foo=\"debug\", bar=\"info\"\n  ```\n  This is equivalent to the `choices` keyword in `argparse.add_argument`.\n- Enum types derived from `enum.Enum`. It is recommended to use `argtyped.Enum` which uses the instance names as values:\n  ```python\n  from argtyped import Enum\n\n  class MyEnum(Enum):\n      Debug = auto()    # \"debug\"\n      Info = auto()     # \"info\"\n      Warning = auto()  # \"warning\"\n  ```\n- Switch types `Switch`. `Switch` arguments are like `bool` arguments, but they don't take values. Instead, a switch\n  argument `switch` requires `--switch` to enable and `--no-switch` to disable:\n  ```python\n  from argtyped import Arguments, Switch\n\n  class MyArgs(Arguments):\n      switch: Switch = True\n      bool_arg: bool = False\n\n  # argv: []                                 => flag=True, bool_arg=False\n  # argv: [\"--switch\", \"--bool-arg=false\"]   => flag=True, bool_arg=False\n  # argv: [\"--no-switch\", \"--bool-arg=true\"] => flag=False, bool_arg=True\n  # argv: [\"--switch=false\"]                 => WRONG\n  # argv: [\"--no-bool-arg\"]                  => WRONG\n  ```\n- Optional types `Optional[T]`, where `T` is any supported type (except choices or switch). An optional argument will be\n  filled with `None` if no value is provided. It could also be explicitly set to `None` by using `none` as value in the\n  command line:\n  ```python\n  from argtyped import Arguments\n  from typing import Optional\n\n  class MyArgs(Arguments):\n      opt_arg: Optional[int]  # implicitly defaults to `None`\n\n  # argv: []                 => opt_arg=None\n  # argv: [\"--opt-arg=1\"]    => opt_arg=1\n  # argv: [\"--opt-arg=none\"] => opt_arg=None\n  ```\n- Any other type that takes a single `str` as `__init__` parameters. It is also theoretically possible to use a function\n  that takes an `str` as input, but it's not recommended as it's not type-safe.\n\n\n## Caveats\n\n- Advanced `argparse` features such as subparsers, groups, argument lists, and custom actions are not supported.\n- Using switch arguments may result in name clashes: if a switch argument has name `arg`, there can be no argument with\n  the name `no_arg`.\n- `Optional` cannot be used with `Choices`. You can add `\"none\"` as a valid choice to mimic a similar behavior.\n- `Optional[str]` would parse a value of `\"none\"` into `None`.\n\n## Under the Hood\n\nThis is what happens under the hood:\n1. When an instance of `argtyped.Arguments` (or any subclass) is initialized, type annotations and class-level\n   attributes (i.e., the default values) are collected to form argument declarations.\n2. After verifying the validity of declared arguments, an instance of `argparse.ArgumentParser` is created and arguments\n   are registered with the parser.\n3. The parser's `parse_args` method is invoked with either `sys.argv` or strings provided as parameters, returning\n   parsed arguments.\n4. The parsed arguments are assigned to `self` (the instance of `Arguments` subclass being initialized).\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/huzecong/argtyped", "keywords": "", "license": "MIT License", "maintainer": "", "maintainer_email": "", "name": "argtyped", "package_url": "https://pypi.org/project/argtyped/", "platform": "any", "project_url": "https://pypi.org/project/argtyped/", "project_urls": {"Homepage": "https://github.com/huzecong/argtyped"}, "release_url": "https://pypi.org/project/argtyped/0.1/", "requires_dist": null, "requires_python": ">=3.6", "summary": "Command line arguments, with types", "version": "0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1><code>argtyped</code>: Command Line Argument Parser, with Types</h1>\n<p><a href=\"https://github.com/huzecong/argtyped/actions?query=workflow%3ABuild+branch%3Amaster\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/49f4d39bf2957b2d6f4a470b967d805af20b2079/68747470733a2f2f6769746875622e636f6d2f68757a65636f6e672f61726774797065642f776f726b666c6f77732f4275696c642f62616467652e737667\"></a>\n<a href=\"https://codecov.io/gh/huzecong/argtyped\" rel=\"nofollow\"><img alt=\"CodeCov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a4fa8ed8ec45d9bde4416069acae809b1a17f7fe/68747470733a2f2f636f6465636f762e696f2f67682f68757a65636f6e672f61726774797065642f6272616e63682f6d61737465722f67726170682f62616467652e7376673f746f6b656e3d454c4866594a32596471\"></a>\n<a href=\"https://pypi.org/project/argtyped/\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/af7f4f0c78edbd420a751e9c17d0fce2c5c78b06/68747470733a2f2f62616467652e667572792e696f2f70792f61726774797065642e737667\"></a>\n<a href=\"https://github.com/huzecong/argtyped/blob/master/LICENSE\" rel=\"nofollow\"><img alt=\"MIT License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c88fab50b4a1dc0cd91faeb7ba5654d56e380260/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e737667\"></a></p>\n<p><code>argtyped</code> is an command line argument parser with that relies on type annotations. It is built on\n<a href=\"https://docs.python.org/3/library/argparse.html\" rel=\"nofollow\"><code>argparse</code></a>, the command line argument parser library built into\nPython. Compared with <code>argparse</code>, this library gives you:</p>\n<ul>\n<li>More concise and intuitive syntax, less boilerplate code.</li>\n<li>Type checking and IDE auto-completion for command line arguments.</li>\n<li>A drop-in replacement for <code>argparse</code> in most cases.</li>\n</ul>\n<h2>Installation</h2>\n<p>Install stable release from <a href=\"https://pypi.org/project/argtyped/\" rel=\"nofollow\">PyPI</a>:</p>\n<pre>pip install argtyped\n</pre>\n<p>Or, install the latest commit from GitHub:</p>\n<pre>pip install -e git+https://github.com/huzecong/argtyped.git\n</pre>\n<h2>Usage</h2>\n<p>With <code>argtyped</code>, you can define command line arguments in a syntax similar to\n<a href=\"https://docs.python.org/3/library/typing.html#typing.NamedTuple\" rel=\"nofollow\"><code>typing.NamedTuple</code></a>. The syntax is intuitive and can\nbe illustrated with an example:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">Optional</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">argtyped</span> <span class=\"kn\">import</span> <span class=\"n\">Arguments</span><span class=\"p\">,</span> <span class=\"n\">Choices</span><span class=\"p\">,</span> <span class=\"n\">Switch</span>\n<span class=\"kn\">from</span> <span class=\"nn\">argtyped</span> <span class=\"kn\">import</span> <span class=\"n\">Enum</span><span class=\"p\">,</span> <span class=\"n\">auto</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">LoggingLevels</span><span class=\"p\">(</span><span class=\"n\">Enum</span><span class=\"p\">):</span>\n    <span class=\"n\">Debug</span> <span class=\"o\">=</span> <span class=\"n\">auto</span><span class=\"p\">()</span>\n    <span class=\"n\">Info</span> <span class=\"o\">=</span> <span class=\"n\">auto</span><span class=\"p\">()</span>\n    <span class=\"ne\">Warning</span> <span class=\"o\">=</span> <span class=\"n\">auto</span><span class=\"p\">()</span>\n    <span class=\"n\">Error</span> <span class=\"o\">=</span> <span class=\"n\">auto</span><span class=\"p\">()</span>\n    <span class=\"n\">Critical</span> <span class=\"o\">=</span> <span class=\"n\">auto</span><span class=\"p\">()</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyArguments</span><span class=\"p\">(</span><span class=\"n\">Arguments</span><span class=\"p\">):</span>\n    <span class=\"n\">model_name</span><span class=\"p\">:</span> <span class=\"nb\">str</span>         <span class=\"c1\"># required argument of `str` type</span>\n    <span class=\"n\">hidden_size</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">512</span>  <span class=\"c1\"># `int` argument with default value of 512</span>\n\n    <span class=\"n\">activation</span><span class=\"p\">:</span> <span class=\"n\">Choices</span><span class=\"p\">[</span><span class=\"s1\">'relu'</span><span class=\"p\">,</span> <span class=\"s1\">'tanh'</span><span class=\"p\">,</span> <span class=\"s1\">'sigmoid'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">'relu'</span>  <span class=\"c1\"># argument with limited choices</span>\n    <span class=\"n\">logging_level</span><span class=\"p\">:</span> <span class=\"n\">LoggingLevels</span> <span class=\"o\">=</span> <span class=\"n\">LoggingLevels</span><span class=\"o\">.</span><span class=\"n\">Info</span>        <span class=\"c1\"># using `Enum` class as choices</span>\n\n    <span class=\"n\">use_dropout</span><span class=\"p\">:</span> <span class=\"n\">Switch</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>  <span class=\"c1\"># switch argument, enable with \"--use-dropout\" and disable with \"--no-use-dropout\"</span>\n    <span class=\"n\">dropout_prob</span><span class=\"p\">:</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"nb\">float</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"mf\">0.5</span>  <span class=\"c1\"># optional argument, \"--dropout-prob=none\" parses into `None`</span>\n\n<span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"n\">Arguments</span><span class=\"p\">()</span>\n</pre>\n<p>This is equivalent to the following code with Python built-in <code>argparse</code>:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">argparse</span>\n<span class=\"kn\">from</span> <span class=\"nn\">enum</span> <span class=\"kn\">import</span> <span class=\"n\">Enum</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">LoggingLevels</span><span class=\"p\">(</span><span class=\"n\">Enum</span><span class=\"p\">):</span>\n    <span class=\"n\">Debug</span> <span class=\"o\">=</span> <span class=\"s2\">\"debug\"</span>\n    <span class=\"n\">Info</span> <span class=\"o\">=</span> <span class=\"s2\">\"info\"</span>\n    <span class=\"ne\">Warning</span> <span class=\"o\">=</span> <span class=\"s2\">\"warning\"</span>\n    <span class=\"n\">Error</span> <span class=\"o\">=</span> <span class=\"s2\">\"error\"</span>\n    <span class=\"n\">Critical</span> <span class=\"o\">=</span> <span class=\"s2\">\"critical\"</span>\n\n<span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">argparse</span><span class=\"o\">.</span><span class=\"n\">ArgumentParser</span><span class=\"p\">()</span>\n\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s2\">\"--model-name\"</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">required</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s2\">\"--hidden-size\"</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"mi\">512</span><span class=\"p\">)</span>\n\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s2\">\"--activation\"</span><span class=\"p\">,</span> <span class=\"n\">choices</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">\"relu\"</span><span class=\"p\">,</span> <span class=\"s2\">\"tanh\"</span><span class=\"p\">,</span> <span class=\"s2\">\"sigmoid\"</span><span class=\"p\">],</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"s2\">\"relu\"</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s2\">\"--logging-level\"</span><span class=\"p\">,</span> <span class=\"n\">choices</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">LoggingLevels</span><span class=\"p\">),</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"n\">LoggingLevels</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"s2\">\"info\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s2\">\"--use-dropout\"</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">\"store_true\"</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">\"use_dropout\"</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s2\">\"--no-use-dropout\"</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">\"store_false\"</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">\"use_dropout\"</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s2\">\"--dropout-prob\"</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">s</span><span class=\"p\">:</span> <span class=\"kc\">None</span> <span class=\"k\">if</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"s1\">'none'</span> <span class=\"k\">else</span> <span class=\"nb\">float</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">),</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"mf\">0.5</span><span class=\"p\">)</span>\n\n<span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n</pre>\n<p>Save the code into a file named <code>main.py</code>. Suppose the following arguments are provided:</p>\n<pre>python main.py <span class=\"se\">\\</span>\n    --model-name LSTM <span class=\"se\">\\</span>\n    --activation sigmoid <span class=\"se\">\\</span>\n    --logging-level debug <span class=\"se\">\\</span>\n    --no-use-dropout <span class=\"se\">\\</span>\n    --dropout-prob none\n</pre>\n<p>Then the parsed arguments will be equivalent to the following structured returned by <code>argparse</code>:</p>\n<pre><span class=\"n\">argparse</span><span class=\"o\">.</span><span class=\"n\">Namespace</span><span class=\"p\">(</span>\n    <span class=\"n\">model_name</span><span class=\"o\">=</span><span class=\"s2\">\"LSTM\"</span><span class=\"p\">,</span> <span class=\"n\">hidden_size</span><span class=\"o\">=</span><span class=\"mi\">512</span><span class=\"p\">,</span> <span class=\"n\">activation</span><span class=\"o\">=</span><span class=\"s2\">\"sigmoid\"</span><span class=\"p\">,</span> <span class=\"n\">logging_level</span><span class=\"o\">=</span><span class=\"s2\">\"debug\"</span><span class=\"p\">,</span>\n    <span class=\"n\">use_dropout</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"n\">dropout_prob</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n</pre>\n<p>Arguments can also be pretty-printed with <code>print(args.to_string())</code>, which gives:</p>\n<pre><code>&lt;class '__main__.MyArguments'&gt;\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551 Arguments       \u2502 Values                           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 model_name      \u2502 'LSTM'                           \u2551\n\u2551 hidden_size     \u2502 512                              \u2551\n\u2551 activation      \u2502 'sigmoid'                        \u2551\n\u2551 logging_level   \u2502 &lt;MyLoggingLevels.Debug: 'debug'&gt; \u2551\n\u2551 use_dropout     \u2502 False                            \u2551\n\u2551 dropout_prob    \u2502 None                             \u2551\n\u2551 label_smoothing \u2502 0.1                              \u2551\n\u2551 some_true_arg   \u2502 True                             \u2551\n\u2551 some_false_arg  \u2502 False                            \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>\n<h2>Reference</h2>\n<h3>The <code>argtyped.Arguments</code> Class</h3>\n<p>The <code>argtyped.Arguments</code> class is main class of the package, from which you should derive your custom class that holds\narguments. Each argument takes the form of a class attribute, with its type annotation and an optional default value.</p>\n<p>When an instance of your custom class is initialized, the command line arguments are parsed from <code>sys.argv</code> into values\nwith your annotated types. You can also provide the list of strings to parse by passing them as the parameter.</p>\n<p>The parsed arguments are stored in an object of your custom type. This gives you arguments that can be auto-completed\nby the IDE, and type-checked by a static type checker like <a href=\"http://mypy-lang.org/\" rel=\"nofollow\"><code>mypy</code></a>.</p>\n<p>The following example illustrates the keypoints:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">MyArgs</span><span class=\"p\">(</span><span class=\"n\">argtyped</span><span class=\"o\">.</span><span class=\"n\">Arguments</span><span class=\"p\">):</span>\n    <span class=\"c1\"># name: type [= default_val]</span>\n    <span class=\"n\">value</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n\n<span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"n\">MyArgs</span><span class=\"p\">()</span>                    <span class=\"c1\"># equivalent to `parser.parse_args()`</span>\n<span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"n\">MyArgs</span><span class=\"p\">([</span><span class=\"s2\">\"--value\"</span><span class=\"p\">,</span> <span class=\"s2\">\"123\"</span><span class=\"p\">])</span>  <span class=\"c1\"># equivalent to `parser.parse_args([\"--value\", \"123\"])</span>\n<span class=\"k\">assert</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">MyArgs</span><span class=\"p\">)</span>\n</pre>\n<h3>Argument Types</h3>\n<p>To summarize, whatever works for <code>argparse</code> works here. The following types are supported:</p>\n<ul>\n<li>Built-in types such as <code>int</code>, <code>float</code>, <code>str</code>.</li>\n<li><code>bool</code> type. Accepted values (case-insensitive) for <code>True</code> are: <code>y</code>, <code>yes</code>, <code>true</code>, <code>ok</code>; accepted values for <code>False</code>\nare: <code>n</code>, <code>no</code>, <code>false</code>.</li>\n<li>Choice types <code>Choices[...]</code>. A choice argument is essentially an <code>str</code> argument with limited choice of values. The\nellipses can be filled with a tuple of <code>str</code>s, or an expression that evaluates to a list of <code>str</code>s:\n<pre><span class=\"kn\">from</span> <span class=\"nn\">argtyped</span> <span class=\"kn\">import</span> <span class=\"n\">Arguments</span><span class=\"p\">,</span> <span class=\"n\">Choices</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">List</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">logging_levels</span><span class=\"p\">()</span> <span class=\"o\">-&gt;</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]:</span>\n    <span class=\"k\">return</span> <span class=\"p\">[</span><span class=\"s2\">\"debug\"</span><span class=\"p\">,</span> <span class=\"s2\">\"info\"</span><span class=\"p\">,</span> <span class=\"s2\">\"warning\"</span><span class=\"p\">,</span> <span class=\"s2\">\"error\"</span><span class=\"p\">]</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyArgs</span><span class=\"p\">(</span><span class=\"n\">Arguments</span><span class=\"p\">):</span>\n    <span class=\"n\">foo</span><span class=\"p\">:</span> <span class=\"n\">Choices</span><span class=\"p\">[</span><span class=\"s2\">\"debug\"</span><span class=\"p\">,</span> <span class=\"s2\">\"info\"</span><span class=\"p\">,</span> <span class=\"s2\">\"warning\"</span><span class=\"p\">,</span> <span class=\"s2\">\"error\"</span><span class=\"p\">]</span>  <span class=\"c1\"># 4 choices</span>\n    <span class=\"n\">bar</span><span class=\"p\">:</span> <span class=\"n\">Choices</span><span class=\"p\">[</span><span class=\"n\">logging_levels</span><span class=\"p\">()]</span>                     <span class=\"c1\"># the same 4 choices</span>\n\n<span class=\"c1\"># argv: [\"--foo=debug\", \"--bar=info\"] =&gt; foo=\"debug\", bar=\"info\"</span>\n</pre>\nThis is equivalent to the <code>choices</code> keyword in <code>argparse.add_argument</code>.</li>\n<li>Enum types derived from <code>enum.Enum</code>. It is recommended to use <code>argtyped.Enum</code> which uses the instance names as values:\n<pre><span class=\"kn\">from</span> <span class=\"nn\">argtyped</span> <span class=\"kn\">import</span> <span class=\"n\">Enum</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyEnum</span><span class=\"p\">(</span><span class=\"n\">Enum</span><span class=\"p\">):</span>\n    <span class=\"n\">Debug</span> <span class=\"o\">=</span> <span class=\"n\">auto</span><span class=\"p\">()</span>    <span class=\"c1\"># \"debug\"</span>\n    <span class=\"n\">Info</span> <span class=\"o\">=</span> <span class=\"n\">auto</span><span class=\"p\">()</span>     <span class=\"c1\"># \"info\"</span>\n    <span class=\"ne\">Warning</span> <span class=\"o\">=</span> <span class=\"n\">auto</span><span class=\"p\">()</span>  <span class=\"c1\"># \"warning\"</span>\n</pre>\n</li>\n<li>Switch types <code>Switch</code>. <code>Switch</code> arguments are like <code>bool</code> arguments, but they don't take values. Instead, a switch\nargument <code>switch</code> requires <code>--switch</code> to enable and <code>--no-switch</code> to disable:\n<pre><span class=\"kn\">from</span> <span class=\"nn\">argtyped</span> <span class=\"kn\">import</span> <span class=\"n\">Arguments</span><span class=\"p\">,</span> <span class=\"n\">Switch</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyArgs</span><span class=\"p\">(</span><span class=\"n\">Arguments</span><span class=\"p\">):</span>\n    <span class=\"n\">switch</span><span class=\"p\">:</span> <span class=\"n\">Switch</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n    <span class=\"n\">bool_arg</span><span class=\"p\">:</span> <span class=\"nb\">bool</span> <span class=\"o\">=</span> <span class=\"kc\">False</span>\n\n<span class=\"c1\"># argv: []                                 =&gt; flag=True, bool_arg=False</span>\n<span class=\"c1\"># argv: [\"--switch\", \"--bool-arg=false\"]   =&gt; flag=True, bool_arg=False</span>\n<span class=\"c1\"># argv: [\"--no-switch\", \"--bool-arg=true\"] =&gt; flag=False, bool_arg=True</span>\n<span class=\"c1\"># argv: [\"--switch=false\"]                 =&gt; WRONG</span>\n<span class=\"c1\"># argv: [\"--no-bool-arg\"]                  =&gt; WRONG</span>\n</pre>\n</li>\n<li>Optional types <code>Optional[T]</code>, where <code>T</code> is any supported type (except choices or switch). An optional argument will be\nfilled with <code>None</code> if no value is provided. It could also be explicitly set to <code>None</code> by using <code>none</code> as value in the\ncommand line:\n<pre><span class=\"kn\">from</span> <span class=\"nn\">argtyped</span> <span class=\"kn\">import</span> <span class=\"n\">Arguments</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">Optional</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyArgs</span><span class=\"p\">(</span><span class=\"n\">Arguments</span><span class=\"p\">):</span>\n    <span class=\"n\">opt_arg</span><span class=\"p\">:</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"nb\">int</span><span class=\"p\">]</span>  <span class=\"c1\"># implicitly defaults to `None`</span>\n\n<span class=\"c1\"># argv: []                 =&gt; opt_arg=None</span>\n<span class=\"c1\"># argv: [\"--opt-arg=1\"]    =&gt; opt_arg=1</span>\n<span class=\"c1\"># argv: [\"--opt-arg=none\"] =&gt; opt_arg=None</span>\n</pre>\n</li>\n<li>Any other type that takes a single <code>str</code> as <code>__init__</code> parameters. It is also theoretically possible to use a function\nthat takes an <code>str</code> as input, but it's not recommended as it's not type-safe.</li>\n</ul>\n<h2>Caveats</h2>\n<ul>\n<li>Advanced <code>argparse</code> features such as subparsers, groups, argument lists, and custom actions are not supported.</li>\n<li>Using switch arguments may result in name clashes: if a switch argument has name <code>arg</code>, there can be no argument with\nthe name <code>no_arg</code>.</li>\n<li><code>Optional</code> cannot be used with <code>Choices</code>. You can add <code>\"none\"</code> as a valid choice to mimic a similar behavior.</li>\n<li><code>Optional[str]</code> would parse a value of <code>\"none\"</code> into <code>None</code>.</li>\n</ul>\n<h2>Under the Hood</h2>\n<p>This is what happens under the hood:</p>\n<ol>\n<li>When an instance of <code>argtyped.Arguments</code> (or any subclass) is initialized, type annotations and class-level\nattributes (i.e., the default values) are collected to form argument declarations.</li>\n<li>After verifying the validity of declared arguments, an instance of <code>argparse.ArgumentParser</code> is created and arguments\nare registered with the parser.</li>\n<li>The parser's <code>parse_args</code> method is invoked with either <code>sys.argv</code> or strings provided as parameters, returning\nparsed arguments.</li>\n<li>The parsed arguments are assigned to <code>self</code> (the instance of <code>Arguments</code> subclass being initialized).</li>\n</ol>\n\n          </div>"}, "last_serial": 6643308, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "ead601d16eb1af56df7796f128fd4fd0", "sha256": "39f01d515879ba3bfe852ebe5df1220cee1ff524bce6645a8b06c85c436b501c"}, "downloads": -1, "filename": "argtyped-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "ead601d16eb1af56df7796f128fd4fd0", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 10778, "upload_time": "2020-02-17T00:57:18", "upload_time_iso_8601": "2020-02-17T00:57:18.594577Z", "url": "https://files.pythonhosted.org/packages/f1/bb/36e1d57d8b3822c05255a01694593848f7ee179b077b08ba6b973fee3215/argtyped-0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "fd99944c479d3c0d53a47f571431140d", "sha256": "7385edeb83eaf0dc998e2bb9ce30666dd0b6e9cd6d14d6170fdf6bb851f131a8"}, "downloads": -1, "filename": "argtyped-0.1.tar.gz", "has_sig": false, "md5_digest": "fd99944c479d3c0d53a47f571431140d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 10223, "upload_time": "2020-02-17T00:57:20", "upload_time_iso_8601": "2020-02-17T00:57:20.426917Z", "url": "https://files.pythonhosted.org/packages/5c/0a/0387915f091eab3669bb0ef9468e146e86d0f938d34f0e7ddc29d6aa97d5/argtyped-0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "ead601d16eb1af56df7796f128fd4fd0", "sha256": "39f01d515879ba3bfe852ebe5df1220cee1ff524bce6645a8b06c85c436b501c"}, "downloads": -1, "filename": "argtyped-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "ead601d16eb1af56df7796f128fd4fd0", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 10778, "upload_time": "2020-02-17T00:57:18", "upload_time_iso_8601": "2020-02-17T00:57:18.594577Z", "url": "https://files.pythonhosted.org/packages/f1/bb/36e1d57d8b3822c05255a01694593848f7ee179b077b08ba6b973fee3215/argtyped-0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "fd99944c479d3c0d53a47f571431140d", "sha256": "7385edeb83eaf0dc998e2bb9ce30666dd0b6e9cd6d14d6170fdf6bb851f131a8"}, "downloads": -1, "filename": "argtyped-0.1.tar.gz", "has_sig": false, "md5_digest": "fd99944c479d3c0d53a47f571431140d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 10223, "upload_time": "2020-02-17T00:57:20", "upload_time_iso_8601": "2020-02-17T00:57:20.426917Z", "url": "https://files.pythonhosted.org/packages/5c/0a/0387915f091eab3669bb0ef9468e146e86d0f938d34f0e7ddc29d6aa97d5/argtyped-0.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:17:16 2020"}