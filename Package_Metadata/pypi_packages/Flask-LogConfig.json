{"info": {"author": "Derrick Gilland", "author_email": "dgilland@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Environment :: Web Environment", "Framework :: Flask", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.6", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.4", "Topic :: Internet :: WWW/HTTP :: Dynamic Content", "Topic :: Software Development :: Libraries :: Python Modules", "Topic :: System :: Logging"], "description": "***************\nFlask-LogConfig\n***************\n\n|version| |travis| |coveralls| |license|\n\nFlask extension for configuring Python logging module.\n\n\nRequirements\n============\n\n\nCompatibility\n-------------\n\n- Python 2.6\n- Python 2.7\n- Python 3.3\n- Python 3.4\n\n\nDependencies\n------------\n\n- `Flask <https://github.com/mitsuhiko/flask>`_\n- `logconfig <https://github.com/dgilland/logconfig>`_\n\n\nInstallation\n============\n\n\n::\n\n    pip install Flask-LogConfig\n\n\nQuickstart\n==========\n\nUse ``Flask-LogConfig`` to easily configure the Python logging module using your Flask app's ``config`` object:\n\n\n.. code-block:: python\n\n    import flask\n    from flask.ext.logconfig import LogConfig\n\n    class MyConfig(object):\n        LOGCONFIG = {\n            'version': 1,\n            'disable_existing_loggers': False,\n            'formatters': {\n                'simple': {\n                    '()': 'myapp.logging.simple_formatter_factory'\n                },\n                'email': {\n                    '()': 'myapp.logging.email_formatter_factory'\n                }\n            },\n            'filters': {\n                'email': {\n                    '()': 'myapp.logging.RequestFilter'\n                }\n            },\n            'handlers': {\n                'smtp': {\n                    'class': 'logging.handlers.SMTPHandler',\n                    'level': 'ERROR',\n                    'formatter': 'email',\n                    'filters': ['email'],\n                    'mailhost': ('example.com', 587),\n                    'fromaddr': 'Mailer <mailer@example.com>',\n                    'toaddrs': ['admins@example.com'],\n                    'subject': 'Application Error',\n                    'credentials': ('mailer@example.com', 'password'),\n                    'secure': ()\n                },\n                'console': {\n                    'class': 'logging.StreamHandler',\n                    'level': 'DEBUG',\n                    'formatter': 'simple',\n                    'stream': 'ext://sys.stderr'\n                }\n            },\n            'loggers': {\n                'myapp': {\n                    'handlers': ['smtp', 'console'],\n                    'level': 'DEBUG'\n                }\n            }\n        }\n\n        LOGCONFIG_QUEUE = ['myapp']\n\n    app = flask.Flask(__name__)\n    app.config.from_object(MyConfig)\n    logcfg = LogConfig(app)\n\n    # or using lazy instantiation\n    logcfg = LogConfig()\n    logcfg.init_app(app)\n\n\nConfiguration\n=============\n\nConfiguration of Python's logging module is specified using the standard ``dictConfig`` or ``fileConfig`` formats supported by `logging.config <https://docs.python.org/library/logging.config.html>`_. This allows Flask apps to be configured as one would in a Django app that uses `logging <https://docs.djangoproject.com/en/1.7/topics/logging/>`__.\n\n\nLOGCONFIG\n---------\n\nThe main configuration option for ``Flask-LogConfig`` is ``LOGCONFIG``. This option can either be a ``dict`` or a pathname to a configuration file. The format of the ``dict`` or config file must follow the format supported by ``logging.config.dictConfig`` or ``loging.config.fileConfig``. See `Logging Configuration <https://docs.python.org/library/logging.config.html>`_ for more details. If using a pathname, the supported file formats are ``JSON``, ``YAML``, and ``ConfigParser``.\n\n\nLOGCONFIG_QUEUE\n---------------\n\nThe purpose of ``LOGCONFIG_QUEUE`` is to provide an easy way to utilize logging without blocking the main thread.\n\nTo set up a basic logging queue, specify the loggers you want to queuify by setting ``LOGCONFIG_QUEUE`` to a list of the logger names (as strings). These loggers will have their handlers moved to a queue which will then be managed by a queue handler and listener, one per logger.\n\nEach logger's queue handler will be an instance of ``flask_logconfig.FlaskQueueHandler`` which is an extension of `logging.handlers.QueueHandler <https://docs.python.org/3/library/logging.handlers.html#queuehandler>`_ (back ported to Python 2 via `logutils <https://pypi.python.org/pypi/logutils>`_). ``FlaskQueueHandler`` adds a copy of the current request context to the log record so that the queuified log handlers can access any Flask request globals outside of the normal request context (i.e. inside the listener thread) via ``flask_logconfig.request_context_from_record``. The queue listener used is an instance of `logconfig.QueueListener <https://github.com/dgilland/logconfig>`_ that extends `logging.handlers.QueueListener <https://docs.python.org/3/library/logging.handlers.html#logging.handlers.QueueListener>`_ with proper support for respecting a handler's log level (i.e. ``logging.handlers.QueueListener`` delegates all log records to a handler even if that handler's log level is set higher than the log record's while ``logconfig.QueueListener`` does not).\n\nAfter the log handlers are queuified, their listener thread will be started automatically unless you specify otherwise. You can access the listeners via the ``LogConfig`` instance:\n\n\n.. code-block:: python\n\n    logcfg = LogConfig()\n\n    # start_listeners=True by default\n    logcfg.init_app(app, start_listeners=False)\n\n    assert isinstance(logcfg, list)\n\n    # start listeners manually\n    logcfg.start_listeners(app)\n\n    # stop listeners\n    logcfg.stop_listeners(app)\n\n\nSee the `Log Record Request Context`_ section for details on accessing an application's request context from within a queue.\n\n\nLOGCONFIG_REQUESTS_ENABLED\n--------------------------\n\nWhen set to ``True``, ``LOGCONFIG_REQUESTS_ENABLED`` turns on logging for all requests. Defaults to ``False``.\n\nRequests will be logged at the end of the request via the ``app.after_request`` hook. In addition to providing a custom log msg, additional ``extra`` arguments will be passed to the logging call:\n\n- ``response``\n- ``request``\n\nThese can later be accessed from the log record via ``record.response`` and ``record.request``. This provides a convenient way for the log filters, handlers, and formatters to access request/response specific data.\n\n\nLOGCONFIG_REQUESTS_LOGGER\n-------------------------\n\nThe logger name to use when logging all requests. Defaults to ``None`` which uses ``app.logger``.\n\n\nLOGCONFIG_REQUESTS_LEVEL\n------------------------\n\nThe log level at which to log all requests. Defaults to ``logging.DEBUG``.\n\n\nLOGCONFIG_REQUESTS_MSG_FORMAT\n-----------------------------\n\nThe message format used to generate the ``msg`` argument to ``log()`` when logging all requests. Defaults to ``'{method} {path} - {status_code}'``.\n\nWhen generating the message, ``LOGCONFIG_REQUESTS_MSG_FORMAT.format(**kargs)`` will be called with the following keyword arguments:\n\n\nFrom request.environ\n++++++++++++++++++++\n\n- ``SERVER_PORT``\n- ``SERVER_PROTOCOL``\n- ``SCRIPT_NAME``\n- ``REQUEST_METHOD``\n- ``HTTP_HOST``\n- ``PATH_INFO``\n- ``QUERY_STRING``\n- ``CONTENT_LENGTH``\n- ``SERVER_NAME``\n- ``CONTENT_TYPE``\n\n**NOTE:** Additional data may be available depending on the WSGI environment provided.\n\nFrom request\n++++++++++++\n\n- ``method``\n- ``path``\n- ``base_url``\n- ``url``\n- ``remote_addr``\n- ``user_agent``\n\nFrom response\n+++++++++++++\n\n- ``status_code``\n- ``status``\n\nFrom flask\n++++++++++\n\n- ``session``\n\n**NOTE:** The ``session`` argument is a computed as follows:\n\n\n.. code-block:: python\n\n    from collections import defaultdict\n    from flask import session\n\n    session_data = defaultdict(lambda: None)\n    session_data.update(dict(session)\n\n\nThis means that you can safely access ``session`` values even if they aren't explictly set. When they are missing, ``None`` will be returned instead.\n\nFrom computed\n+++++++++++++\n\n- ``execution_time`` (in milliseconds) **NOTE:** This is the time between the start of the request and then end.\n\n\nLog Record Request Context\n==========================\n\nWhen using ``LOGCONFIG_QUEUE``, accessing Flask's request globals from within a log handler requires using the request context that is attached to the emitted log record.\n\nBelow is an example that uses a logging ``Filter`` to attach the request environment to the log record using ``flask_logconfig.request_context_from_record``:\n\n\n.. code-block:: python\n\n    import logging\n    from pprint import pformat\n    from flask import request\n\n    from flask_logconfig import request_context_from_record\n\n    class RequestFilter(logging.Filter):\n        \"\"\"Impart contextual information related to Flask HTTP request.\"\"\"\n        def filter(self, record):\n            \"\"\"Attach request contextual information to log record.\"\"\"\n            with request_context_from_record(record):\n                record.environ_info = request.environ.copy()\n                record.environ_text = pformat(record.environ_info)\n            return True\n\n\nIt's also safe to use ``request_context_from_record`` from directly inside Flask's request context:\n\n\n.. code-block:: python\n\n\n    with request_context_from_record():\n        # do something using Flask request globals\n        pass\n\n\nIf no request context exists (either on the log record provided or inside the actual Flask request context), then a ``flask_logconfig.FlaskLogConfigException`` will be thrown.\n\n\n.. |version| image:: http://img.shields.io/pypi/v/flask-logconfig.svg?style=flat\n    :target: https://pypi.python.org/pypi/flask-logconfig/\n\n.. |travis| image:: http://img.shields.io/travis/dgilland/flask-logconfig/master.svg?style=flat\n    :target: https://travis-ci.org/dgilland/flask-logconfig\n\n.. |coveralls| image:: http://img.shields.io/coveralls/dgilland/flask-logconfig/master.svg?style=flat\n    :target: https://coveralls.io/r/dgilland/flask-logconfig\n\n.. |license| image:: http://img.shields.io/pypi/l/flask-logconfig.svg?style=flat\n    :target: https://pypi.python.org/pypi/flask-logconfig/", "description_content_type": null, "docs_url": null, "download_url": null, "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/dgilland/flask-logconfig", "keywords": "flask logging config configuration", "license": "MIT License", "maintainer": null, "maintainer_email": null, "name": "Flask-LogConfig", "package_url": "https://pypi.org/project/Flask-LogConfig/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/Flask-LogConfig/", "project_urls": {"Homepage": "https://github.com/dgilland/flask-logconfig"}, "release_url": "https://pypi.org/project/Flask-LogConfig/0.4.2/", "requires_dist": null, "requires_python": null, "summary": "Flask extension for configuring Python logging module", "version": "0.4.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://pypi.python.org/pypi/flask-logconfig/\" rel=\"nofollow\"><img alt=\"version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/26b40a5a50ca228af78251e86dcd27bd1663cf42/687474703a2f2f696d672e736869656c64732e696f2f707970692f762f666c61736b2d6c6f67636f6e6669672e7376673f7374796c653d666c6174\"></a> <a href=\"https://travis-ci.org/dgilland/flask-logconfig\" rel=\"nofollow\"><img alt=\"travis\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a36a0dc0d76b84f6be150547348699a90faed349/687474703a2f2f696d672e736869656c64732e696f2f7472617669732f6467696c6c616e642f666c61736b2d6c6f67636f6e6669672f6d61737465722e7376673f7374796c653d666c6174\"></a> <a href=\"https://coveralls.io/r/dgilland/flask-logconfig\" rel=\"nofollow\"><img alt=\"coveralls\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3df1e6643632e24dae54241a51f3d83848453da5/687474703a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f6467696c6c616e642f666c61736b2d6c6f67636f6e6669672f6d61737465722e7376673f7374796c653d666c6174\"></a> <a href=\"https://pypi.python.org/pypi/flask-logconfig/\" rel=\"nofollow\"><img alt=\"license\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/dbc62e46d0f7f4aefc5b39ba2a9f9fe3c36b5fe1/687474703a2f2f696d672e736869656c64732e696f2f707970692f6c2f666c61736b2d6c6f67636f6e6669672e7376673f7374796c653d666c6174\"></a></p>\n<p>Flask extension for configuring Python logging module.</p>\n<div id=\"requirements\">\n<h2>Requirements</h2>\n<div id=\"compatibility\">\n<h3>Compatibility</h3>\n<ul>\n<li>Python 2.6</li>\n<li>Python 2.7</li>\n<li>Python 3.3</li>\n<li>Python 3.4</li>\n</ul>\n</div>\n<div id=\"dependencies\">\n<h3>Dependencies</h3>\n<ul>\n<li><a href=\"https://github.com/mitsuhiko/flask\" rel=\"nofollow\">Flask</a></li>\n<li><a href=\"https://github.com/dgilland/logconfig\" rel=\"nofollow\">logconfig</a></li>\n</ul>\n</div>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<pre>pip install Flask-LogConfig\n</pre>\n</div>\n<div id=\"quickstart\">\n<h2>Quickstart</h2>\n<p>Use <tt><span class=\"pre\">Flask-LogConfig</span></tt> to easily configure the Python logging module using your Flask app\u2019s <tt>config</tt> object:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">flask</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask.ext.logconfig</span> <span class=\"kn\">import</span> <span class=\"n\">LogConfig</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyConfig</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n    <span class=\"n\">LOGCONFIG</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'version'</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n        <span class=\"s1\">'disable_existing_loggers'</span><span class=\"p\">:</span> <span class=\"kc\">False</span><span class=\"p\">,</span>\n        <span class=\"s1\">'formatters'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'simple'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"s1\">'()'</span><span class=\"p\">:</span> <span class=\"s1\">'myapp.logging.simple_formatter_factory'</span>\n            <span class=\"p\">},</span>\n            <span class=\"s1\">'email'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"s1\">'()'</span><span class=\"p\">:</span> <span class=\"s1\">'myapp.logging.email_formatter_factory'</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'filters'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'email'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"s1\">'()'</span><span class=\"p\">:</span> <span class=\"s1\">'myapp.logging.RequestFilter'</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'handlers'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'smtp'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"s1\">'class'</span><span class=\"p\">:</span> <span class=\"s1\">'logging.handlers.SMTPHandler'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'level'</span><span class=\"p\">:</span> <span class=\"s1\">'ERROR'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'formatter'</span><span class=\"p\">:</span> <span class=\"s1\">'email'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'filters'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'email'</span><span class=\"p\">],</span>\n                <span class=\"s1\">'mailhost'</span><span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"s1\">'example.com'</span><span class=\"p\">,</span> <span class=\"mi\">587</span><span class=\"p\">),</span>\n                <span class=\"s1\">'fromaddr'</span><span class=\"p\">:</span> <span class=\"s1\">'Mailer &lt;mailer@example.com&gt;'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'toaddrs'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'admins@example.com'</span><span class=\"p\">],</span>\n                <span class=\"s1\">'subject'</span><span class=\"p\">:</span> <span class=\"s1\">'Application Error'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'credentials'</span><span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"s1\">'mailer@example.com'</span><span class=\"p\">,</span> <span class=\"s1\">'password'</span><span class=\"p\">),</span>\n                <span class=\"s1\">'secure'</span><span class=\"p\">:</span> <span class=\"p\">()</span>\n            <span class=\"p\">},</span>\n            <span class=\"s1\">'console'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"s1\">'class'</span><span class=\"p\">:</span> <span class=\"s1\">'logging.StreamHandler'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'level'</span><span class=\"p\">:</span> <span class=\"s1\">'DEBUG'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'formatter'</span><span class=\"p\">:</span> <span class=\"s1\">'simple'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'stream'</span><span class=\"p\">:</span> <span class=\"s1\">'ext://sys.stderr'</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'loggers'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'myapp'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"s1\">'handlers'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'smtp'</span><span class=\"p\">,</span> <span class=\"s1\">'console'</span><span class=\"p\">],</span>\n                <span class=\"s1\">'level'</span><span class=\"p\">:</span> <span class=\"s1\">'DEBUG'</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"n\">LOGCONFIG_QUEUE</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'myapp'</span><span class=\"p\">]</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">flask</span><span class=\"o\">.</span><span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">from_object</span><span class=\"p\">(</span><span class=\"n\">MyConfig</span><span class=\"p\">)</span>\n<span class=\"n\">logcfg</span> <span class=\"o\">=</span> <span class=\"n\">LogConfig</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># or using lazy instantiation</span>\n<span class=\"n\">logcfg</span> <span class=\"o\">=</span> <span class=\"n\">LogConfig</span><span class=\"p\">()</span>\n<span class=\"n\">logcfg</span><span class=\"o\">.</span><span class=\"n\">init_app</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"configuration\">\n<h2>Configuration</h2>\n<p>Configuration of Python\u2019s logging module is specified using the standard <tt>dictConfig</tt> or <tt>fileConfig</tt> formats supported by <a href=\"https://docs.python.org/library/logging.config.html\" rel=\"nofollow\">logging.config</a>. This allows Flask apps to be configured as one would in a Django app that uses <a href=\"https://docs.djangoproject.com/en/1.7/topics/logging/\" rel=\"nofollow\">logging</a>.</p>\n<div id=\"id1\">\n<h3>LOGCONFIG</h3>\n<p>The main configuration option for <tt><span class=\"pre\">Flask-LogConfig</span></tt> is <tt>LOGCONFIG</tt>. This option can either be a <tt>dict</tt> or a pathname to a configuration file. The format of the <tt>dict</tt> or config file must follow the format supported by <tt>logging.config.dictConfig</tt> or <tt>loging.config.fileConfig</tt>. See <a href=\"https://docs.python.org/library/logging.config.html\" rel=\"nofollow\">Logging Configuration</a> for more details. If using a pathname, the supported file formats are <tt>JSON</tt>, <tt>YAML</tt>, and <tt>ConfigParser</tt>.</p>\n</div>\n<div id=\"logconfig-queue\">\n<h3>LOGCONFIG_QUEUE</h3>\n<p>The purpose of <tt>LOGCONFIG_QUEUE</tt> is to provide an easy way to utilize logging without blocking the main thread.</p>\n<p>To set up a basic logging queue, specify the loggers you want to queuify by setting <tt>LOGCONFIG_QUEUE</tt> to a list of the logger names (as strings). These loggers will have their handlers moved to a queue which will then be managed by a queue handler and listener, one per logger.</p>\n<p>Each logger\u2019s queue handler will be an instance of <tt>flask_logconfig.FlaskQueueHandler</tt> which is an extension of <a href=\"https://docs.python.org/3/library/logging.handlers.html#queuehandler\" rel=\"nofollow\">logging.handlers.QueueHandler</a> (back ported to Python 2 via <a href=\"https://pypi.python.org/pypi/logutils\" rel=\"nofollow\">logutils</a>). <tt>FlaskQueueHandler</tt> adds a copy of the current request context to the log record so that the queuified log handlers can access any Flask request globals outside of the normal request context (i.e. inside the listener thread) via <tt>flask_logconfig.request_context_from_record</tt>. The queue listener used is an instance of <a href=\"https://github.com/dgilland/logconfig\" rel=\"nofollow\">logconfig.QueueListener</a> that extends <a href=\"https://docs.python.org/3/library/logging.handlers.html#logging.handlers.QueueListener\" rel=\"nofollow\">logging.handlers.QueueListener</a> with proper support for respecting a handler\u2019s log level (i.e. <tt>logging.handlers.QueueListener</tt> delegates all log records to a handler even if that handler\u2019s log level is set higher than the log record\u2019s while <tt>logconfig.QueueListener</tt> does not).</p>\n<p>After the log handlers are queuified, their listener thread will be started automatically unless you specify otherwise. You can access the listeners via the <tt>LogConfig</tt> instance:</p>\n<pre><span class=\"n\">logcfg</span> <span class=\"o\">=</span> <span class=\"n\">LogConfig</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># start_listeners=True by default</span>\n<span class=\"n\">logcfg</span><span class=\"o\">.</span><span class=\"n\">init_app</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">start_listeners</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n\n<span class=\"k\">assert</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">logcfg</span><span class=\"p\">,</span> <span class=\"nb\">list</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># start listeners manually</span>\n<span class=\"n\">logcfg</span><span class=\"o\">.</span><span class=\"n\">start_listeners</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># stop listeners</span>\n<span class=\"n\">logcfg</span><span class=\"o\">.</span><span class=\"n\">stop_listeners</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n</pre>\n<p>See the <a href=\"#log-record-request-context\" rel=\"nofollow\">Log Record Request Context</a> section for details on accessing an application\u2019s request context from within a queue.</p>\n</div>\n<div id=\"logconfig-requests-enabled\">\n<h3>LOGCONFIG_REQUESTS_ENABLED</h3>\n<p>When set to <tt>True</tt>, <tt>LOGCONFIG_REQUESTS_ENABLED</tt> turns on logging for all requests. Defaults to <tt>False</tt>.</p>\n<p>Requests will be logged at the end of the request via the <tt>app.after_request</tt> hook. In addition to providing a custom log msg, additional <tt>extra</tt> arguments will be passed to the logging call:</p>\n<ul>\n<li><tt>response</tt></li>\n<li><tt>request</tt></li>\n</ul>\n<p>These can later be accessed from the log record via <tt>record.response</tt> and <tt>record.request</tt>. This provides a convenient way for the log filters, handlers, and formatters to access request/response specific data.</p>\n</div>\n<div id=\"logconfig-requests-logger\">\n<h3>LOGCONFIG_REQUESTS_LOGGER</h3>\n<p>The logger name to use when logging all requests. Defaults to <tt>None</tt> which uses <tt>app.logger</tt>.</p>\n</div>\n<div id=\"logconfig-requests-level\">\n<h3>LOGCONFIG_REQUESTS_LEVEL</h3>\n<p>The log level at which to log all requests. Defaults to <tt>logging.DEBUG</tt>.</p>\n</div>\n<div id=\"logconfig-requests-msg-format\">\n<h3>LOGCONFIG_REQUESTS_MSG_FORMAT</h3>\n<p>The message format used to generate the <tt>msg</tt> argument to <tt>log()</tt> when logging all requests. Defaults to <tt>'{method} {path} - {status_code}'</tt>.</p>\n<p>When generating the message, <tt><span class=\"pre\">LOGCONFIG_REQUESTS_MSG_FORMAT.format(**kargs)</span></tt> will be called with the following keyword arguments:</p>\n<div id=\"from-request-environ\">\n<h4>From request.environ</h4>\n<ul>\n<li><tt>SERVER_PORT</tt></li>\n<li><tt>SERVER_PROTOCOL</tt></li>\n<li><tt>SCRIPT_NAME</tt></li>\n<li><tt>REQUEST_METHOD</tt></li>\n<li><tt>HTTP_HOST</tt></li>\n<li><tt>PATH_INFO</tt></li>\n<li><tt>QUERY_STRING</tt></li>\n<li><tt>CONTENT_LENGTH</tt></li>\n<li><tt>SERVER_NAME</tt></li>\n<li><tt>CONTENT_TYPE</tt></li>\n</ul>\n<p><strong>NOTE:</strong> Additional data may be available depending on the WSGI environment provided.</p>\n</div>\n<div id=\"from-request\">\n<h4>From request</h4>\n<ul>\n<li><tt>method</tt></li>\n<li><tt>path</tt></li>\n<li><tt>base_url</tt></li>\n<li><tt>url</tt></li>\n<li><tt>remote_addr</tt></li>\n<li><tt>user_agent</tt></li>\n</ul>\n</div>\n<div id=\"from-response\">\n<h4>From response</h4>\n<ul>\n<li><tt>status_code</tt></li>\n<li><tt>status</tt></li>\n</ul>\n</div>\n<div id=\"from-flask\">\n<h4>From flask</h4>\n<ul>\n<li><tt>session</tt></li>\n</ul>\n<p><strong>NOTE:</strong> The <tt>session</tt> argument is a computed as follows:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">collections</span> <span class=\"kn\">import</span> <span class=\"n\">defaultdict</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">session</span>\n\n<span class=\"n\">session_data</span> <span class=\"o\">=</span> <span class=\"n\">defaultdict</span><span class=\"p\">(</span><span class=\"k\">lambda</span><span class=\"p\">:</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"n\">session_data</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">session</span><span class=\"p\">)</span>\n</pre>\n<p>This means that you can safely access <tt>session</tt> values even if they aren\u2019t explictly set. When they are missing, <tt>None</tt> will be returned instead.</p>\n</div>\n<div id=\"from-computed\">\n<h4>From computed</h4>\n<ul>\n<li><tt>execution_time</tt> (in milliseconds) <strong>NOTE:</strong> This is the time between the start of the request and then end.</li>\n</ul>\n</div>\n</div>\n</div>\n<div id=\"log-record-request-context\">\n<h2>Log Record Request Context</h2>\n<p>When using <tt>LOGCONFIG_QUEUE</tt>, accessing Flask\u2019s request globals from within a log handler requires using the request context that is attached to the emitted log record.</p>\n<p>Below is an example that uses a logging <tt>Filter</tt> to attach the request environment to the log record using <tt>flask_logconfig.request_context_from_record</tt>:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pprint</span> <span class=\"kn\">import</span> <span class=\"n\">pformat</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">request</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">flask_logconfig</span> <span class=\"kn\">import</span> <span class=\"n\">request_context_from_record</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">RequestFilter</span><span class=\"p\">(</span><span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">Filter</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Impart contextual information related to Flask HTTP request.\"\"\"</span>\n    <span class=\"k\">def</span> <span class=\"nf\">filter</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">record</span><span class=\"p\">):</span>\n        <span class=\"sd\">\"\"\"Attach request contextual information to log record.\"\"\"</span>\n        <span class=\"k\">with</span> <span class=\"n\">request_context_from_record</span><span class=\"p\">(</span><span class=\"n\">record</span><span class=\"p\">):</span>\n            <span class=\"n\">record</span><span class=\"o\">.</span><span class=\"n\">environ_info</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"o\">.</span><span class=\"n\">copy</span><span class=\"p\">()</span>\n            <span class=\"n\">record</span><span class=\"o\">.</span><span class=\"n\">environ_text</span> <span class=\"o\">=</span> <span class=\"n\">pformat</span><span class=\"p\">(</span><span class=\"n\">record</span><span class=\"o\">.</span><span class=\"n\">environ_info</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"kc\">True</span>\n</pre>\n<p>It\u2019s also safe to use <tt>request_context_from_record</tt> from directly inside Flask\u2019s request context:</p>\n<pre><span class=\"k\">with</span> <span class=\"n\">request_context_from_record</span><span class=\"p\">():</span>\n    <span class=\"c1\"># do something using Flask request globals</span>\n    <span class=\"k\">pass</span>\n</pre>\n<p>If no request context exists (either on the log record provided or inside the actual Flask request context), then a <tt>flask_logconfig.FlaskLogConfigException</tt> will be thrown.</p>\n</div>\n\n          </div>"}, "last_serial": 1655049, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "062e52a348ef2d5051a114945e857c2c", "sha256": "d17e4b8ced6655ec5f29b4e648ff6a5a39bc7234079bc18038e361e0c2c81861"}, "downloads": -1, "filename": "Flask_LogConfig-0.1.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "062e52a348ef2d5051a114945e857c2c", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 8927, "upload_time": "2014-12-25T04:37:27", "upload_time_iso_8601": "2014-12-25T04:37:27.300314Z", "url": "https://files.pythonhosted.org/packages/d9/47/aa72ed9f3defccc334eff8fdb46542fc2d015b03f611ca6369308ba546b2/Flask_LogConfig-0.1.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f91e88cbd3c65e60d2e38a944a44d414", "sha256": "bc232e62a65ee9e75bc5a45ecdb21c3fa8642e51ab7102f493a654d4741a676b"}, "downloads": -1, "filename": "Flask-LogConfig-0.1.0.tar.gz", "has_sig": false, "md5_digest": "f91e88cbd3c65e60d2e38a944a44d414", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6669, "upload_time": "2014-12-25T04:37:24", "upload_time_iso_8601": "2014-12-25T04:37:24.846440Z", "url": "https://files.pythonhosted.org/packages/6d/fd/7d780e586637c13cc61dca20df4187da967860fd478578117c090e61eb8e/Flask-LogConfig-0.1.0.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "ce4c64f2377573ac0dfd43c6c710c591", "sha256": "b221557704cf8823aa34698bc655bc901a09f47d21c74aefed15987a32b70197"}, "downloads": -1, "filename": "Flask_LogConfig-0.2.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "ce4c64f2377573ac0dfd43c6c710c591", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 9036, "upload_time": "2015-01-23T02:33:26", "upload_time_iso_8601": "2015-01-23T02:33:26.472161Z", "url": "https://files.pythonhosted.org/packages/c8/a6/520f813c190b738a12164586c04b1d7c8ae9608a63715a6d7cad3b6c3364/Flask_LogConfig-0.2.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "865f95880857cbda09087ecf3dc9068c", "sha256": "e026894f6d231a3643c29703a51884e0cb9d6ca4f0b43b763fe2f1fba7d6752c"}, "downloads": -1, "filename": "Flask-LogConfig-0.2.0.tar.gz", "has_sig": false, "md5_digest": "865f95880857cbda09087ecf3dc9068c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6835, "upload_time": "2015-01-23T02:33:24", "upload_time_iso_8601": "2015-01-23T02:33:24.609070Z", "url": "https://files.pythonhosted.org/packages/4a/78/9d9f1a5327cb11438d710875a0edd1dabb45b58ac1f516bd9c4583ae9bfc/Flask-LogConfig-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "26351078ba29d04366ce1661cb58a208", "sha256": "0e22f5b188a74ddf73c7a1aee8a19e6f96a985ffb8671e856046ced5e64aad91"}, "downloads": -1, "filename": "Flask_LogConfig-0.3.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "26351078ba29d04366ce1661cb58a208", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 11497, "upload_time": "2015-01-25T18:45:51", "upload_time_iso_8601": "2015-01-25T18:45:51.627697Z", "url": "https://files.pythonhosted.org/packages/a0/d5/93e439a0cc6e98489a951f700160d4d1458aa90376c90e74a7fc6fa6e97d/Flask_LogConfig-0.3.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9b0b59aea2b6483fe14694809f903a13", "sha256": "2fadfc6ac4e09fad56de6ae99ad72d0cc0b7ae57abb0fd8a7ff66d136e063a7c"}, "downloads": -1, "filename": "Flask-LogConfig-0.3.0.tar.gz", "has_sig": false, "md5_digest": "9b0b59aea2b6483fe14694809f903a13", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8869, "upload_time": "2015-01-25T18:45:40", "upload_time_iso_8601": "2015-01-25T18:45:40.232196Z", "url": "https://files.pythonhosted.org/packages/86/76/c9cabd1066a188a8671faa2a939b9e90ae3646a49ce6e4a415cae1d0ef5b/Flask-LogConfig-0.3.0.tar.gz", "yanked": false}], "0.4.0": [{"comment_text": "", "digests": {"md5": "4c2b9c9110d1062aa494d03924efef17", "sha256": "67edbf46ce8537ab7ad5576379a6c4d56e52018a0a829b79a8578290ad59d8b7"}, "downloads": -1, "filename": "Flask_LogConfig-0.4.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "4c2b9c9110d1062aa494d03924efef17", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 12130, "upload_time": "2015-02-04T03:49:29", "upload_time_iso_8601": "2015-02-04T03:49:29.102683Z", "url": "https://files.pythonhosted.org/packages/6d/90/cbf5ecce27aba98246759508996ea3741b3d74660a19c017b8aa2fa30e0e/Flask_LogConfig-0.4.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2d69297631f09a33904b3f6c573a156c", "sha256": "c3b7fc16eb26912f7a82284dbe55af8663965db14052ed98262012c41009deab"}, "downloads": -1, "filename": "Flask-LogConfig-0.4.0.tar.gz", "has_sig": false, "md5_digest": "2d69297631f09a33904b3f6c573a156c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12472, "upload_time": "2015-02-04T03:49:25", "upload_time_iso_8601": "2015-02-04T03:49:25.242762Z", "url": "https://files.pythonhosted.org/packages/0f/70/37a16c26ed4e9d49dcf7a8fd758970a46eabd44c9124f3ef16988b88038f/Flask-LogConfig-0.4.0.tar.gz", "yanked": false}], "0.4.1": [{"comment_text": "", "digests": {"md5": "fd28790decdd1a59dbee1e3af49936c9", "sha256": "4c0ed3977a0e24f20cfc3155b3b3eab3a92196f67d7d0ee683ff10275788bbd8"}, "downloads": -1, "filename": "Flask_LogConfig-0.4.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "fd28790decdd1a59dbee1e3af49936c9", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 12136, "upload_time": "2015-05-21T03:57:46", "upload_time_iso_8601": "2015-05-21T03:57:46.780987Z", "url": "https://files.pythonhosted.org/packages/19/bf/9f0d8ec996b143c760d7366ff753fcfafb0cea1f8f2d51803110e5f54b15/Flask_LogConfig-0.4.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c85b9f736bcaf506406550151db80ed2", "sha256": "6394710e5900a96e9c874690e3eb1c7f549cca33509c8311f579d16997e8cca5"}, "downloads": -1, "filename": "Flask-LogConfig-0.4.1.tar.gz", "has_sig": false, "md5_digest": "c85b9f736bcaf506406550151db80ed2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12512, "upload_time": "2015-05-21T03:57:43", "upload_time_iso_8601": "2015-05-21T03:57:43.872970Z", "url": "https://files.pythonhosted.org/packages/7a/53/c84cc043415bb402459a6cd166f7f3535bd2195f89072046cd6c146f9e15/Flask-LogConfig-0.4.1.tar.gz", "yanked": false}], "0.4.2": [{"comment_text": "", "digests": {"md5": "fad9029181b27aa0d96c0fccc3058eae", "sha256": "a301b56a3ca7dc49302a11206799962dd51c1e6c172ee9ebf59abfd56cef3a43"}, "downloads": -1, "filename": "Flask_LogConfig-0.4.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "fad9029181b27aa0d96c0fccc3058eae", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 12385, "upload_time": "2015-07-29T13:33:54", "upload_time_iso_8601": "2015-07-29T13:33:54.955033Z", "url": "https://files.pythonhosted.org/packages/b9/a3/e5b0c3df47179900e3a9c16a73195cdb20fb6ee950b21781657b4813a0b6/Flask_LogConfig-0.4.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "04d3575e2d9081c18c8612662190c12b", "sha256": "802cb98aa2b8a2cf89d6b6fd5c7673c8e3129f5147ac05396984dcf0645bf594"}, "downloads": -1, "filename": "Flask-LogConfig-0.4.2.tar.gz", "has_sig": false, "md5_digest": "04d3575e2d9081c18c8612662190c12b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12672, "upload_time": "2015-07-29T13:33:51", "upload_time_iso_8601": "2015-07-29T13:33:51.754309Z", "url": "https://files.pythonhosted.org/packages/c4/8e/49ae35ce5d30f352e9e923a98e6e091342dd3f351f8b2fbcdef21116dbcc/Flask-LogConfig-0.4.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "fad9029181b27aa0d96c0fccc3058eae", "sha256": "a301b56a3ca7dc49302a11206799962dd51c1e6c172ee9ebf59abfd56cef3a43"}, "downloads": -1, "filename": "Flask_LogConfig-0.4.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "fad9029181b27aa0d96c0fccc3058eae", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 12385, "upload_time": "2015-07-29T13:33:54", "upload_time_iso_8601": "2015-07-29T13:33:54.955033Z", "url": "https://files.pythonhosted.org/packages/b9/a3/e5b0c3df47179900e3a9c16a73195cdb20fb6ee950b21781657b4813a0b6/Flask_LogConfig-0.4.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "04d3575e2d9081c18c8612662190c12b", "sha256": "802cb98aa2b8a2cf89d6b6fd5c7673c8e3129f5147ac05396984dcf0645bf594"}, "downloads": -1, "filename": "Flask-LogConfig-0.4.2.tar.gz", "has_sig": false, "md5_digest": "04d3575e2d9081c18c8612662190c12b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12672, "upload_time": "2015-07-29T13:33:51", "upload_time_iso_8601": "2015-07-29T13:33:51.754309Z", "url": "https://files.pythonhosted.org/packages/c4/8e/49ae35ce5d30f352e9e923a98e6e091342dd3f351f8b2fbcdef21116dbcc/Flask-LogConfig-0.4.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 01:02:40 2020"}