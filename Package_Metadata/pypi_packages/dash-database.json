{"info": {"author": "Thibault B\u00e9tr\u00e9mieux", "author_email": "thibault.betremieux@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: Public Domain", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7"], "description": "[![CircleCI](https://circleci.com/gh/ThibTrip/dash_database.svg?style=svg)](https://circleci.com/gh/ThibTrip/dash_database) [![codecov](https://codecov.io/gh/ThibTrip/dash_database/branch/master/graph/badge.svg)](https://codecov.io/gh/ThibTrip/dash_database)\n\n# dash_database\n\nManages user values for a [dash](https://github.com/plotly/dash) app. This is an alternative solution for [sharing data between callbacks](https://dash.plot.ly/sharing-data-between-callbacks) based on the library sqlitedict. \n\nIt has the following benefits:\n\n* easy installation via git clone and pip install (I would like to push dash_database to PyPI to make it even easier but want to make sure there aren't any issues inherent to using sqlitedict first) unlike redis\n* no need to fiddle with json dumps and pickles unlike redis or dcc.Store. It takes any picklable objects out of the box.\n* no need to have a redis server running\n* it is thread safe\n* it can work in memory\n\n# Installation\n\n```\n# clone repository\ngit clone https://github.com/ThibTrip/dash_database.git\n# install dash_database\npip install ./dash_database  # do not forget ./ (from local folder and not from Python Package Index)\n```\n\n# Usage\n\n## Basic usage\n\nImport the main object DashDatabase and you can start managing data already. Detailled information on the arguments of DashDatabase's methods and how the class was implemented can be found in its docstring.\n\n```python\nfrom dash_database import DashDatabase\n\n# create an instance of DashDatabase\ndash_db = DashDatabase(db_location = None) # if None it is created in a temp folder and deleted after use\n\n# save values for user 123\ndash_db.store_user_value(user_id = 123, key_name = 'account_id', value = 46887)\ndash_db.store_user_value(user_id = 123, key_name = 'favorite_animal', value = 'monkey')\ndash_db.list_stored_user_keys(123) # list the names of the keys used by the user\n['account_id', 'favorite_animal']\n\n# save values for user 456\ndash_db.store_user_value(user_id = 456, key_name = 'account_id', value = 87874)\ndash_db.store_user_value(456, 'favorite_color', 'green')\ndash_db.list_stored_user_keys(456) # list the names of the keys used by the user\n['account_id', 'favorite_color']\n\n# get the value behind a user key\ndash_db.get_user_value(user_id = 123, key_name = 'favorite_animal')\n'monkey'\n\n# delete a key and its value for a user\ndash_db.delete_user_value(user_id = 123, key_name = 'favorite_animal', \n                          # when if_not_exists is equal to \"raise\" you get an error if a key does not exist\n                          # if it is equal to \"ignore\" nothing happens if it does not exist (default)\n                          if_not_exists = 'ignore') \n\n# delete all keys and their values for a user\ndash_db.delete_all_user_values(456)\n\n# list all keys of the users again for testing purposes\ndash_db.list_stored_user_keys(123)\n['account_id']\ndash_db.list_stored_user_keys(456)\n[]\n```\n\n## Example with a dash app\n\n```python\nimport dash\nimport dash_core_components as dcc\nimport dash_html_components as html\nfrom dash.dependencies import Input, Output, State\nfrom dash.exceptions import PreventUpdate\nfrom dash_database import DashDatabase\nimport uuid\n\ndef serve_layout():\n    \"\"\"Creates the layout for each user of the app.\n    This function is executed each time a session is created for the app.\n    It creates a new session id (a uuid.uuid1 as string) each time.\n\n    This session id will be used in combination with a DashDatabase instance to manage user values.\n    It will be fetched via the property data of a dcc.Store component.\n    \"\"\"\n    \n    # create a session id\n    session_id = str(uuid.uuid1())\n    \n    # store the session id in a dcc.Store component (invisible component for storing data)\n    store_session_id_div = dcc.Store(id='session_id_div_id', \n                                     storage_type = 'session', # IMPORTANT! see docstring of dcc.Store \n                                     data = session_id)\n    \n    # create tab to enter a value\n    first_tab = dcc.Tab(label = \"Enter a value\", \n                        children = [dcc.Input(placeholder = \"Enter value here\", id = \"input_div\"),\n                                    html.Button(children = \"OK\", id = \"ok_button\"),\n                                    dcc.Markdown(id = \"success_value_saved\")])\n    \n    # create tab to retrieve the value entered in the other tab\n    second_tab = dcc.Tab(label = \"Retrieve the value\",\n                         children = [html.Button(children = \"Show me the value\", id = \"show_value_button\"),\n                                     dcc.Markdown(id = \"show_value_div\")])\n    \n    # assemble tabs in dcc.Tabs object\n    tabs = dcc.Tabs(children = [first_tab, second_tab])\n\n    \n    # create layout\n    layout = html.Div(children = [tabs, store_session_id_div])\n\n    \n    return layout\n\n\n# putting your callbacks in functions is a nice trick to be able to move them in other modules and import them \ndef create_callback_save_value(app:dash.Dash, \n                               dash_db:DashDatabase):\n    @app.callback(Output('success_value_saved', 'children'),\n                  [Input('ok_button', 'n_clicks')], # the button triggers the callback\n                  [State('input_div', 'value'), # additional info that does not trigger the callback \n                   State('session_id_div_id', 'data')]) # used to identify the user and save its data\n    def save_value(n_clicks, value, session_id):\n        \n        # when the app starts all callbacks are triggered by default. \n        # raise a PreventUpdate to avoid the callback trigger at start (n_clicks is None at this point)\n        if n_clicks is None:\n            raise PreventUpdate\n            \n        # save value \n        dash_db.store_user_value(user_id = session_id, \n                                 key_name = 'value', \n                                 value = value)\n        \n        # return success message\n        return \"Your value was sucessfully saved. Try to retrieve it in the other tab now :)!\"\n    \ndef create_callback_retrieve_value(app:dash.Dash, \n                                   dash_db:DashDatabase):\n    @app.callback(Output('show_value_div', 'children'),\n                  [Input('show_value_button', 'n_clicks')],\n                  [State('session_id_div_id', 'data')])\n    def retrieve_value(n_clicks, session_id):\n        \n        # when the app starts all callbacks are triggered by default. \n        # raise a PreventUpdate to avoid the callback trigger at start (n_clicks is 0 at this point)\n        if n_clicks is None:\n            raise PreventUpdate\n            \n        # save value \n        value = dash_db.get_user_value(user_id = session_id, \n                                       key_name = 'value')\n        \n        # return success message\n        return f\"Your value is {value}\"\n    \n    \n# create the app, add the layout and the callbacks\napp = dash.Dash()\napp.layout = serve_layout\ndash_db = DashDatabase() # create a DashDatabase instance for managing user values\ncreate_callback_save_value(app, dash_db)\ncreate_callback_retrieve_value(app, dash_db)\n\nif __name__ == \"__main__\":\n    app.run_server(debug = True) # set to False if running in a Jupyter Notebook or in Jupyter Lab!\n    \n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "https://github.com/ThibTrip/dash_database/archive/v1.tar.gz", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/ThibTrip/dash_database", "keywords": "dash,plotly", "license": "The Unlicense", "maintainer": "", "maintainer_email": "", "name": "dash-database", "package_url": "https://pypi.org/project/dash-database/", "platform": "", "project_url": "https://pypi.org/project/dash-database/", "project_urls": {"Download": "https://github.com/ThibTrip/dash_database/archive/v1.tar.gz", "Homepage": "https://github.com/ThibTrip/dash_database"}, "release_url": "https://pypi.org/project/dash-database/1.0/", "requires_dist": null, "requires_python": "", "summary": "Manages user values for a dash app.", "version": "1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://circleci.com/gh/ThibTrip/dash_database\" rel=\"nofollow\"><img alt=\"CircleCI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/914b2bcd1dc372239da3f1d22e5cd9be48a8fb06/68747470733a2f2f636972636c6563692e636f6d2f67682f54686962547269702f646173685f64617461626173652e7376673f7374796c653d737667\"></a> <a href=\"https://codecov.io/gh/ThibTrip/dash_database\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/bc2fd973d58291a628cb715857080a3d4775f49e/68747470733a2f2f636f6465636f762e696f2f67682f54686962547269702f646173685f64617461626173652f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a></p>\n<h1>dash_database</h1>\n<p>Manages user values for a <a href=\"https://github.com/plotly/dash\" rel=\"nofollow\">dash</a> app. This is an alternative solution for <a href=\"https://dash.plot.ly/sharing-data-between-callbacks\" rel=\"nofollow\">sharing data between callbacks</a> based on the library sqlitedict.</p>\n<p>It has the following benefits:</p>\n<ul>\n<li>easy installation via git clone and pip install (I would like to push dash_database to PyPI to make it even easier but want to make sure there aren't any issues inherent to using sqlitedict first) unlike redis</li>\n<li>no need to fiddle with json dumps and pickles unlike redis or dcc.Store. It takes any picklable objects out of the box.</li>\n<li>no need to have a redis server running</li>\n<li>it is thread safe</li>\n<li>it can work in memory</li>\n</ul>\n<h1>Installation</h1>\n<pre><code># clone repository\ngit clone https://github.com/ThibTrip/dash_database.git\n# install dash_database\npip install ./dash_database  # do not forget ./ (from local folder and not from Python Package Index)\n</code></pre>\n<h1>Usage</h1>\n<h2>Basic usage</h2>\n<p>Import the main object DashDatabase and you can start managing data already. Detailled information on the arguments of DashDatabase's methods and how the class was implemented can be found in its docstring.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">dash_database</span> <span class=\"kn\">import</span> <span class=\"n\">DashDatabase</span>\n\n<span class=\"c1\"># create an instance of DashDatabase</span>\n<span class=\"n\">dash_db</span> <span class=\"o\">=</span> <span class=\"n\">DashDatabase</span><span class=\"p\">(</span><span class=\"n\">db_location</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">)</span> <span class=\"c1\"># if None it is created in a temp folder and deleted after use</span>\n\n<span class=\"c1\"># save values for user 123</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">store_user_value</span><span class=\"p\">(</span><span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"n\">key_name</span> <span class=\"o\">=</span> <span class=\"s1\">'account_id'</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"mi\">46887</span><span class=\"p\">)</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">store_user_value</span><span class=\"p\">(</span><span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"n\">key_name</span> <span class=\"o\">=</span> <span class=\"s1\">'favorite_animal'</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"s1\">'monkey'</span><span class=\"p\">)</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">list_stored_user_keys</span><span class=\"p\">(</span><span class=\"mi\">123</span><span class=\"p\">)</span> <span class=\"c1\"># list the names of the keys used by the user</span>\n<span class=\"p\">[</span><span class=\"s1\">'account_id'</span><span class=\"p\">,</span> <span class=\"s1\">'favorite_animal'</span><span class=\"p\">]</span>\n\n<span class=\"c1\"># save values for user 456</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">store_user_value</span><span class=\"p\">(</span><span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"mi\">456</span><span class=\"p\">,</span> <span class=\"n\">key_name</span> <span class=\"o\">=</span> <span class=\"s1\">'account_id'</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"mi\">87874</span><span class=\"p\">)</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">store_user_value</span><span class=\"p\">(</span><span class=\"mi\">456</span><span class=\"p\">,</span> <span class=\"s1\">'favorite_color'</span><span class=\"p\">,</span> <span class=\"s1\">'green'</span><span class=\"p\">)</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">list_stored_user_keys</span><span class=\"p\">(</span><span class=\"mi\">456</span><span class=\"p\">)</span> <span class=\"c1\"># list the names of the keys used by the user</span>\n<span class=\"p\">[</span><span class=\"s1\">'account_id'</span><span class=\"p\">,</span> <span class=\"s1\">'favorite_color'</span><span class=\"p\">]</span>\n\n<span class=\"c1\"># get the value behind a user key</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">get_user_value</span><span class=\"p\">(</span><span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"n\">key_name</span> <span class=\"o\">=</span> <span class=\"s1\">'favorite_animal'</span><span class=\"p\">)</span>\n<span class=\"s1\">'monkey'</span>\n\n<span class=\"c1\"># delete a key and its value for a user</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">delete_user_value</span><span class=\"p\">(</span><span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"mi\">123</span><span class=\"p\">,</span> <span class=\"n\">key_name</span> <span class=\"o\">=</span> <span class=\"s1\">'favorite_animal'</span><span class=\"p\">,</span> \n                          <span class=\"c1\"># when if_not_exists is equal to \"raise\" you get an error if a key does not exist</span>\n                          <span class=\"c1\"># if it is equal to \"ignore\" nothing happens if it does not exist (default)</span>\n                          <span class=\"n\">if_not_exists</span> <span class=\"o\">=</span> <span class=\"s1\">'ignore'</span><span class=\"p\">)</span> \n\n<span class=\"c1\"># delete all keys and their values for a user</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">delete_all_user_values</span><span class=\"p\">(</span><span class=\"mi\">456</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># list all keys of the users again for testing purposes</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">list_stored_user_keys</span><span class=\"p\">(</span><span class=\"mi\">123</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"s1\">'account_id'</span><span class=\"p\">]</span>\n<span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">list_stored_user_keys</span><span class=\"p\">(</span><span class=\"mi\">456</span><span class=\"p\">)</span>\n<span class=\"p\">[]</span>\n</pre>\n<h2>Example with a dash app</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">dash</span>\n<span class=\"kn\">import</span> <span class=\"nn\">dash_core_components</span> <span class=\"k\">as</span> <span class=\"nn\">dcc</span>\n<span class=\"kn\">import</span> <span class=\"nn\">dash_html_components</span> <span class=\"k\">as</span> <span class=\"nn\">html</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dash.dependencies</span> <span class=\"kn\">import</span> <span class=\"n\">Input</span><span class=\"p\">,</span> <span class=\"n\">Output</span><span class=\"p\">,</span> <span class=\"n\">State</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dash.exceptions</span> <span class=\"kn\">import</span> <span class=\"n\">PreventUpdate</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dash_database</span> <span class=\"kn\">import</span> <span class=\"n\">DashDatabase</span>\n<span class=\"kn\">import</span> <span class=\"nn\">uuid</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">serve_layout</span><span class=\"p\">():</span>\n    <span class=\"sd\">\"\"\"Creates the layout for each user of the app.</span>\n<span class=\"sd\">    This function is executed each time a session is created for the app.</span>\n<span class=\"sd\">    It creates a new session id (a uuid.uuid1 as string) each time.</span>\n\n<span class=\"sd\">    This session id will be used in combination with a DashDatabase instance to manage user values.</span>\n<span class=\"sd\">    It will be fetched via the property data of a dcc.Store component.</span>\n<span class=\"sd\">    \"\"\"</span>\n    \n    <span class=\"c1\"># create a session id</span>\n    <span class=\"n\">session_id</span> <span class=\"o\">=</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">uuid</span><span class=\"o\">.</span><span class=\"n\">uuid1</span><span class=\"p\">())</span>\n    \n    <span class=\"c1\"># store the session id in a dcc.Store component (invisible component for storing data)</span>\n    <span class=\"n\">store_session_id_div</span> <span class=\"o\">=</span> <span class=\"n\">dcc</span><span class=\"o\">.</span><span class=\"n\">Store</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"s1\">'session_id_div_id'</span><span class=\"p\">,</span> \n                                     <span class=\"n\">storage_type</span> <span class=\"o\">=</span> <span class=\"s1\">'session'</span><span class=\"p\">,</span> <span class=\"c1\"># IMPORTANT! see docstring of dcc.Store </span>\n                                     <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">session_id</span><span class=\"p\">)</span>\n    \n    <span class=\"c1\"># create tab to enter a value</span>\n    <span class=\"n\">first_tab</span> <span class=\"o\">=</span> <span class=\"n\">dcc</span><span class=\"o\">.</span><span class=\"n\">Tab</span><span class=\"p\">(</span><span class=\"n\">label</span> <span class=\"o\">=</span> <span class=\"s2\">\"Enter a value\"</span><span class=\"p\">,</span> \n                        <span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">dcc</span><span class=\"o\">.</span><span class=\"n\">Input</span><span class=\"p\">(</span><span class=\"n\">placeholder</span> <span class=\"o\">=</span> <span class=\"s2\">\"Enter value here\"</span><span class=\"p\">,</span> <span class=\"nb\">id</span> <span class=\"o\">=</span> <span class=\"s2\">\"input_div\"</span><span class=\"p\">),</span>\n                                    <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Button</span><span class=\"p\">(</span><span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"s2\">\"OK\"</span><span class=\"p\">,</span> <span class=\"nb\">id</span> <span class=\"o\">=</span> <span class=\"s2\">\"ok_button\"</span><span class=\"p\">),</span>\n                                    <span class=\"n\">dcc</span><span class=\"o\">.</span><span class=\"n\">Markdown</span><span class=\"p\">(</span><span class=\"nb\">id</span> <span class=\"o\">=</span> <span class=\"s2\">\"success_value_saved\"</span><span class=\"p\">)])</span>\n    \n    <span class=\"c1\"># create tab to retrieve the value entered in the other tab</span>\n    <span class=\"n\">second_tab</span> <span class=\"o\">=</span> <span class=\"n\">dcc</span><span class=\"o\">.</span><span class=\"n\">Tab</span><span class=\"p\">(</span><span class=\"n\">label</span> <span class=\"o\">=</span> <span class=\"s2\">\"Retrieve the value\"</span><span class=\"p\">,</span>\n                         <span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Button</span><span class=\"p\">(</span><span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"s2\">\"Show me the value\"</span><span class=\"p\">,</span> <span class=\"nb\">id</span> <span class=\"o\">=</span> <span class=\"s2\">\"show_value_button\"</span><span class=\"p\">),</span>\n                                     <span class=\"n\">dcc</span><span class=\"o\">.</span><span class=\"n\">Markdown</span><span class=\"p\">(</span><span class=\"nb\">id</span> <span class=\"o\">=</span> <span class=\"s2\">\"show_value_div\"</span><span class=\"p\">)])</span>\n    \n    <span class=\"c1\"># assemble tabs in dcc.Tabs object</span>\n    <span class=\"n\">tabs</span> <span class=\"o\">=</span> <span class=\"n\">dcc</span><span class=\"o\">.</span><span class=\"n\">Tabs</span><span class=\"p\">(</span><span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">first_tab</span><span class=\"p\">,</span> <span class=\"n\">second_tab</span><span class=\"p\">])</span>\n\n    \n    <span class=\"c1\"># create layout</span>\n    <span class=\"n\">layout</span> <span class=\"o\">=</span> <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Div</span><span class=\"p\">(</span><span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">tabs</span><span class=\"p\">,</span> <span class=\"n\">store_session_id_div</span><span class=\"p\">])</span>\n\n    \n    <span class=\"k\">return</span> <span class=\"n\">layout</span>\n\n\n<span class=\"c1\"># putting your callbacks in functions is a nice trick to be able to move them in other modules and import them </span>\n<span class=\"k\">def</span> <span class=\"nf\">create_callback_save_value</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">:</span><span class=\"n\">dash</span><span class=\"o\">.</span><span class=\"n\">Dash</span><span class=\"p\">,</span> \n                               <span class=\"n\">dash_db</span><span class=\"p\">:</span><span class=\"n\">DashDatabase</span><span class=\"p\">):</span>\n    <span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">callback</span><span class=\"p\">(</span><span class=\"n\">Output</span><span class=\"p\">(</span><span class=\"s1\">'success_value_saved'</span><span class=\"p\">,</span> <span class=\"s1\">'children'</span><span class=\"p\">),</span>\n                  <span class=\"p\">[</span><span class=\"n\">Input</span><span class=\"p\">(</span><span class=\"s1\">'ok_button'</span><span class=\"p\">,</span> <span class=\"s1\">'n_clicks'</span><span class=\"p\">)],</span> <span class=\"c1\"># the button triggers the callback</span>\n                  <span class=\"p\">[</span><span class=\"n\">State</span><span class=\"p\">(</span><span class=\"s1\">'input_div'</span><span class=\"p\">,</span> <span class=\"s1\">'value'</span><span class=\"p\">),</span> <span class=\"c1\"># additional info that does not trigger the callback </span>\n                   <span class=\"n\">State</span><span class=\"p\">(</span><span class=\"s1\">'session_id_div_id'</span><span class=\"p\">,</span> <span class=\"s1\">'data'</span><span class=\"p\">)])</span> <span class=\"c1\"># used to identify the user and save its data</span>\n    <span class=\"k\">def</span> <span class=\"nf\">save_value</span><span class=\"p\">(</span><span class=\"n\">n_clicks</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">session_id</span><span class=\"p\">):</span>\n        \n        <span class=\"c1\"># when the app starts all callbacks are triggered by default. </span>\n        <span class=\"c1\"># raise a PreventUpdate to avoid the callback trigger at start (n_clicks is None at this point)</span>\n        <span class=\"k\">if</span> <span class=\"n\">n_clicks</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"k\">raise</span> <span class=\"n\">PreventUpdate</span>\n            \n        <span class=\"c1\"># save value </span>\n        <span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">store_user_value</span><span class=\"p\">(</span><span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"n\">session_id</span><span class=\"p\">,</span> \n                                 <span class=\"n\">key_name</span> <span class=\"o\">=</span> <span class=\"s1\">'value'</span><span class=\"p\">,</span> \n                                 <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"n\">value</span><span class=\"p\">)</span>\n        \n        <span class=\"c1\"># return success message</span>\n        <span class=\"k\">return</span> <span class=\"s2\">\"Your value was sucessfully saved. Try to retrieve it in the other tab now :)!\"</span>\n    \n<span class=\"k\">def</span> <span class=\"nf\">create_callback_retrieve_value</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">:</span><span class=\"n\">dash</span><span class=\"o\">.</span><span class=\"n\">Dash</span><span class=\"p\">,</span> \n                                   <span class=\"n\">dash_db</span><span class=\"p\">:</span><span class=\"n\">DashDatabase</span><span class=\"p\">):</span>\n    <span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">callback</span><span class=\"p\">(</span><span class=\"n\">Output</span><span class=\"p\">(</span><span class=\"s1\">'show_value_div'</span><span class=\"p\">,</span> <span class=\"s1\">'children'</span><span class=\"p\">),</span>\n                  <span class=\"p\">[</span><span class=\"n\">Input</span><span class=\"p\">(</span><span class=\"s1\">'show_value_button'</span><span class=\"p\">,</span> <span class=\"s1\">'n_clicks'</span><span class=\"p\">)],</span>\n                  <span class=\"p\">[</span><span class=\"n\">State</span><span class=\"p\">(</span><span class=\"s1\">'session_id_div_id'</span><span class=\"p\">,</span> <span class=\"s1\">'data'</span><span class=\"p\">)])</span>\n    <span class=\"k\">def</span> <span class=\"nf\">retrieve_value</span><span class=\"p\">(</span><span class=\"n\">n_clicks</span><span class=\"p\">,</span> <span class=\"n\">session_id</span><span class=\"p\">):</span>\n        \n        <span class=\"c1\"># when the app starts all callbacks are triggered by default. </span>\n        <span class=\"c1\"># raise a PreventUpdate to avoid the callback trigger at start (n_clicks is 0 at this point)</span>\n        <span class=\"k\">if</span> <span class=\"n\">n_clicks</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"k\">raise</span> <span class=\"n\">PreventUpdate</span>\n            \n        <span class=\"c1\"># save value </span>\n        <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"n\">dash_db</span><span class=\"o\">.</span><span class=\"n\">get_user_value</span><span class=\"p\">(</span><span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"n\">session_id</span><span class=\"p\">,</span> \n                                       <span class=\"n\">key_name</span> <span class=\"o\">=</span> <span class=\"s1\">'value'</span><span class=\"p\">)</span>\n        \n        <span class=\"c1\"># return success message</span>\n        <span class=\"k\">return</span> <span class=\"sa\">f</span><span class=\"s2\">\"Your value is </span><span class=\"si\">{</span><span class=\"n\">value</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n    \n    \n<span class=\"c1\"># create the app, add the layout and the callbacks</span>\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">dash</span><span class=\"o\">.</span><span class=\"n\">Dash</span><span class=\"p\">()</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">layout</span> <span class=\"o\">=</span> <span class=\"n\">serve_layout</span>\n<span class=\"n\">dash_db</span> <span class=\"o\">=</span> <span class=\"n\">DashDatabase</span><span class=\"p\">()</span> <span class=\"c1\"># create a DashDatabase instance for managing user values</span>\n<span class=\"n\">create_callback_save_value</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">dash_db</span><span class=\"p\">)</span>\n<span class=\"n\">create_callback_retrieve_value</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">dash_db</span><span class=\"p\">)</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">run_server</span><span class=\"p\">(</span><span class=\"n\">debug</span> <span class=\"o\">=</span> <span class=\"kc\">True</span><span class=\"p\">)</span> <span class=\"c1\"># set to False if running in a Jupyter Notebook or in Jupyter Lab!</span>\n    \n</pre>\n\n          </div>"}, "last_serial": 5799473, "releases": {"1.0": [{"comment_text": "", "digests": {"md5": "3fdf03a8b646c037e0b63dcb9076edb7", "sha256": "311a19e196f7edb16cc5def9d4593005dc092a83736ff8adfa1aab82a0fac0a3"}, "downloads": -1, "filename": "dash_database-1.0.tar.gz", "has_sig": false, "md5_digest": "3fdf03a8b646c037e0b63dcb9076edb7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6497, "upload_time": "2019-09-08T14:36:25", "upload_time_iso_8601": "2019-09-08T14:36:25.133595Z", "url": "https://files.pythonhosted.org/packages/eb/f5/bb2165c82256ee7d009d978bea4097f4268407e57b8880b5f776036e1c4b/dash_database-1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "3fdf03a8b646c037e0b63dcb9076edb7", "sha256": "311a19e196f7edb16cc5def9d4593005dc092a83736ff8adfa1aab82a0fac0a3"}, "downloads": -1, "filename": "dash_database-1.0.tar.gz", "has_sig": false, "md5_digest": "3fdf03a8b646c037e0b63dcb9076edb7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6497, "upload_time": "2019-09-08T14:36:25", "upload_time_iso_8601": "2019-09-08T14:36:25.133595Z", "url": "https://files.pythonhosted.org/packages/eb/f5/bb2165c82256ee7d009d978bea4097f4268407e57b8880b5f776036e1c4b/dash_database-1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:40:36 2020"}