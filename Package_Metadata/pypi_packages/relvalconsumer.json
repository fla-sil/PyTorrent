{"info": {"author": "Adam Williamson", "author_email": "awilliam@redhat.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)", "Topic :: Utilities"], "description": "relvalconsumer\n==============\n\n``relvalconsumer`` is a fedora-messaging consumer for creating Fedora\nrelease validation test events. Each time a compose appears, it runs\nvarious checks to decide whether it should create an event for the\ncompose. It creates events for both nightly composes and \u2018candidate\u2019\ncomposes.\n\nIt should create a first nightly for the next release shortly after a\nrelease goes out. From then until the release, it will create new\nnightly events periodically. It will never create a nightly event fewer\nthan three days after the current event. Between three and fourteen days\nafter the current event, it will create a new event if certain packages\nhave changed (these are defined in the code). After fourteen days it\nwill create an event as soon as a nightly compose appears. It will\ncreate events for all candidate composes as soon as they appear.\n\nIt should never create an event for a given release from a Rawhide\ncompose after that release branches, because at that point wikitcms will\ndecide that any notional event for a Rawhide compose would be for the\nrelease *two* after the current stable release, and this script will\ncreate events only for the release *one* after the current stable\nrelease.\n\nNote that in production mode the consumer is configured to create events\nin the production wiki and send announcement emails to the test@ mailing\nlist. So, really, only one person should ever have it running in\nproduction mode, and that\u2019s probably me. Please don\u2019t run it in\nproduction mode unless you\u2019re taking over my job or something.\n\nAs long as relval is also installed, relvalconsumer will also run the\nimage size check on the newly-created event, whenever it creates an\nevent.\n\nThe project also includes another consumer, RelvalAMIConsumer, which\nupdates a wiki page containing information on available EC2 AMIs for a\nvalidation event whenever a relevant \u2018AMI published\u2019 message is received\nfrom fedimg (the tool that publishes Fedora AMI images to EC2).\n\nRequirements\n------------\n\nPython libraries:\n\n-  `fedora-messaging <https://github.com/fedora-infra/fedora-messaging>`__\n-  `fedfind <https://pagure.io/fedora-qa/fedfind>`__\n-  `wikitcms <https://pagure.io/fedora-qa/python-wikitcms>`__\n-  `mwclient <https://github.com/mwclient/mwclient>`__\n\nThe ``hawkey`` library is also required. This is only available on\nFedora and RHEL and is only available from official package\nrepositories, it is not available from Pypi.\n\nOptionally also `relval <https://pagure.io/fedora-qa/relval>`__ itself,\nto run image size check tests on the created events.\n\nInstallation\n------------\n\nInstall the required external Python libraries, then use setuptools to\ninstall, e.g.:\n\n::\n\n       python3 setup.py install\n\nYou will also typically need to do:\n\n::\n\n       dnf install fedora-messaging python3-hawkey\n\nConfiguration\n-------------\n\nA sample configuration file which is set up to listen for real compose\nevents on the production fedora-messaging bus is provided as\n``relvalconsumer.toml``. A sample file for the AMI consumer is provided\nas ``relvalamiconsumer.toml``. To use these, you must at least change\nthe queue name from ``00000000-0000-0000-0000-000000000000`` to a unique\nand private string; the official recommendation is to use a UUID\ngenerated by uuidgen. Then place the file in ``/etc/fedora-messaging``.\n\nYou can then enable and start the consumer as a systemd service:\n\n::\n\n   sudo systemctl enable fm-consumer@relvalconsumer\n   sudo systemctl start fm-consumer@relvalconsumer\n\nFor the AMI consumer:\n\n::\n\n   sudo systemctl enable fm-consumer@relvalamiconsumer\n   sudo systemctl start fm-consumer@relvalamiconsumer\n\nTest and production modes\n-------------------------\n\nA configuration setting, ``relval_prod``, decides whether the consumer\noperates in \u2018production\u2019 or \u2018test\u2019 mode. This is set in the consumer\nconfiguration file\u2019s ``consumer_config`` section. The corresponding\nsetting for the AMI consumer is ``relvalami_prod``. In test mode:\n\n-  The consumer creates events on the staging wiki (not production wiki)\n-  The announcement email is logged rather than being mailed out\n\nIn this mode it is fairly safe to play around with the consumer. You\nwill need a local fedora-messaging broker instance to be able to trigger\nthe consumer at will, though. Depending on how you set that up, you may\nalso need to change the ``routing_keys`` from ``.prod.`` to ``.dev.`` or\nsimilar.\n\nFor \u2018production\u2019:\n\n-  **The consumer creates events on the production wiki**\n-  **The consumer sends email notifications to public mailing lists**\n\n**PLEASE** do not enable the production consumer unless you\u2019re\nabsolutely sure it\u2019s your job to create the official events.\n\nLicense\n-------\n\n``relvalconsumer`` is released under the\n`GPL <https://www.gnu.org/licenses/gpl.txt>`__, version 3 or later. See\n``COPYING`` and the header of ``relvalconsumer.py`` itself.\n\nContributing\n------------\n\nIssues and pull requests can be filed in\n`Pagure <https://pagure.io/fedora-qa/relvalconsumer>`__. Pull requests\nmust be signed off (use the ``-s`` git argument). By signing off your\npull request you are agreeing to the `Developer\u2019s Certificate of\nOrigin <http://developercertificate.org/>`__:\n\n::\n\n   Developer's Certificate of Origin 1.1\n\n   By making a contribution to this project, I certify that:\n\n   (a) The contribution was created in whole or in part by me and I\n       have the right to submit it under the open source license\n       indicated in the file; or\n\n   (b) The contribution is based upon previous work that, to the best\n       of my knowledge, is covered under an appropriate open source\n       license and I have the right under that license to submit that\n       work with modifications, whether created in whole or in part\n       by me, under the same open source license (unless I am\n       permitted to submit under a different license), as indicated\n       in the file; or\n\n   (c) The contribution was provided directly to me by some other\n       person who certified (a), (b) or (c) and I have not modified\n       it.\n\n   (d) I understand and agree that this project and the contribution\n       are public and that a record of the contribution (including all\n       personal information I submit with it, including my sign-off) is\n       maintained indefinitely and may be redistributed consistent with\n       this project or the open source license(s) involved.", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://pagure.io/fedora-qa/relvalconsumer", "keywords": "fedora qa mediawiki validation", "license": "GPLv3+", "maintainer": "", "maintainer_email": "", "name": "relvalconsumer", "package_url": "https://pypi.org/project/relvalconsumer/", "platform": "", "project_url": "https://pypi.org/project/relvalconsumer/", "project_urls": {"Homepage": "https://pagure.io/fedora-qa/relvalconsumer"}, "release_url": "https://pypi.org/project/relvalconsumer/2.1.0/", "requires_dist": null, "requires_python": "", "summary": "Fedora QA wiki release validation event fedora-messaging consumer", "version": "2.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><tt>relvalconsumer</tt> is a fedora-messaging consumer for creating Fedora\nrelease validation test events. Each time a compose appears, it runs\nvarious checks to decide whether it should create an event for the\ncompose. It creates events for both nightly composes and \u2018candidate\u2019\ncomposes.</p>\n<p>It should create a first nightly for the next release shortly after a\nrelease goes out. From then until the release, it will create new\nnightly events periodically. It will never create a nightly event fewer\nthan three days after the current event. Between three and fourteen days\nafter the current event, it will create a new event if certain packages\nhave changed (these are defined in the code). After fourteen days it\nwill create an event as soon as a nightly compose appears. It will\ncreate events for all candidate composes as soon as they appear.</p>\n<p>It should never create an event for a given release from a Rawhide\ncompose after that release branches, because at that point wikitcms will\ndecide that any notional event for a Rawhide compose would be for the\nrelease <em>two</em> after the current stable release, and this script will\ncreate events only for the release <em>one</em> after the current stable\nrelease.</p>\n<p>Note that in production mode the consumer is configured to create events\nin the production wiki and send announcement emails to the test@ mailing\nlist. So, really, only one person should ever have it running in\nproduction mode, and that\u2019s probably me. Please don\u2019t run it in\nproduction mode unless you\u2019re taking over my job or something.</p>\n<p>As long as relval is also installed, relvalconsumer will also run the\nimage size check on the newly-created event, whenever it creates an\nevent.</p>\n<p>The project also includes another consumer, RelvalAMIConsumer, which\nupdates a wiki page containing information on available EC2 AMIs for a\nvalidation event whenever a relevant \u2018AMI published\u2019 message is received\nfrom fedimg (the tool that publishes Fedora AMI images to EC2).</p>\n<div id=\"requirements\">\n<h2>Requirements</h2>\n<p>Python libraries:</p>\n<ul>\n<li><a href=\"https://github.com/fedora-infra/fedora-messaging\" rel=\"nofollow\">fedora-messaging</a></li>\n<li><a href=\"https://pagure.io/fedora-qa/fedfind\" rel=\"nofollow\">fedfind</a></li>\n<li><a href=\"https://pagure.io/fedora-qa/python-wikitcms\" rel=\"nofollow\">wikitcms</a></li>\n<li><a href=\"https://github.com/mwclient/mwclient\" rel=\"nofollow\">mwclient</a></li>\n</ul>\n<p>The <tt>hawkey</tt> library is also required. This is only available on\nFedora and RHEL and is only available from official package\nrepositories, it is not available from Pypi.</p>\n<p>Optionally also <a href=\"https://pagure.io/fedora-qa/relval\" rel=\"nofollow\">relval</a> itself,\nto run image size check tests on the created events.</p>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p>Install the required external Python libraries, then use setuptools to\ninstall, e.g.:</p>\n<pre>python3 setup.py install\n</pre>\n<p>You will also typically need to do:</p>\n<pre>dnf install fedora-messaging python3-hawkey\n</pre>\n</div>\n<div id=\"configuration\">\n<h2>Configuration</h2>\n<p>A sample configuration file which is set up to listen for real compose\nevents on the production fedora-messaging bus is provided as\n<tt>relvalconsumer.toml</tt>. A sample file for the AMI consumer is provided\nas <tt>relvalamiconsumer.toml</tt>. To use these, you must at least change\nthe queue name from <tt><span class=\"pre\">00000000-0000-0000-0000-000000000000</span></tt> to a unique\nand private string; the official recommendation is to use a UUID\ngenerated by uuidgen. Then place the file in <tt><span class=\"pre\">/etc/fedora-messaging</span></tt>.</p>\n<p>You can then enable and start the consumer as a systemd service:</p>\n<pre>sudo systemctl enable fm-consumer@relvalconsumer\nsudo systemctl start fm-consumer@relvalconsumer\n</pre>\n<p>For the AMI consumer:</p>\n<pre>sudo systemctl enable fm-consumer@relvalamiconsumer\nsudo systemctl start fm-consumer@relvalamiconsumer\n</pre>\n</div>\n<div id=\"test-and-production-modes\">\n<h2>Test and production modes</h2>\n<p>A configuration setting, <tt>relval_prod</tt>, decides whether the consumer\noperates in \u2018production\u2019 or \u2018test\u2019 mode. This is set in the consumer\nconfiguration file\u2019s <tt>consumer_config</tt> section. The corresponding\nsetting for the AMI consumer is <tt>relvalami_prod</tt>. In test mode:</p>\n<ul>\n<li>The consumer creates events on the staging wiki (not production wiki)</li>\n<li>The announcement email is logged rather than being mailed out</li>\n</ul>\n<p>In this mode it is fairly safe to play around with the consumer. You\nwill need a local fedora-messaging broker instance to be able to trigger\nthe consumer at will, though. Depending on how you set that up, you may\nalso need to change the <tt>routing_keys</tt> from <tt>.prod.</tt> to <tt>.dev.</tt> or\nsimilar.</p>\n<p>For \u2018production\u2019:</p>\n<ul>\n<li><strong>The consumer creates events on the production wiki</strong></li>\n<li><strong>The consumer sends email notifications to public mailing lists</strong></li>\n</ul>\n<p><strong>PLEASE</strong> do not enable the production consumer unless you\u2019re\nabsolutely sure it\u2019s your job to create the official events.</p>\n</div>\n<div id=\"license\">\n<h2>License</h2>\n<p><tt>relvalconsumer</tt> is released under the\n<a href=\"https://www.gnu.org/licenses/gpl.txt\" rel=\"nofollow\">GPL</a>, version 3 or later. See\n<tt>COPYING</tt> and the header of <tt>relvalconsumer.py</tt> itself.</p>\n</div>\n<div id=\"contributing\">\n<h2>Contributing</h2>\n<p>Issues and pull requests can be filed in\n<a href=\"https://pagure.io/fedora-qa/relvalconsumer\" rel=\"nofollow\">Pagure</a>. Pull requests\nmust be signed off (use the <tt><span class=\"pre\">-s</span></tt> git argument). By signing off your\npull request you are agreeing to the <a href=\"http://developercertificate.org/\" rel=\"nofollow\">Developer\u2019s Certificate of\nOrigin</a>:</p>\n<pre>Developer's Certificate of Origin 1.1\n\nBy making a contribution to this project, I certify that:\n\n(a) The contribution was created in whole or in part by me and I\n    have the right to submit it under the open source license\n    indicated in the file; or\n\n(b) The contribution is based upon previous work that, to the best\n    of my knowledge, is covered under an appropriate open source\n    license and I have the right under that license to submit that\n    work with modifications, whether created in whole or in part\n    by me, under the same open source license (unless I am\n    permitted to submit under a different license), as indicated\n    in the file; or\n\n(c) The contribution was provided directly to me by some other\n    person who certified (a), (b) or (c) and I have not modified\n    it.\n\n(d) I understand and agree that this project and the contribution\n    are public and that a record of the contribution (including all\n    personal information I submit with it, including my sign-off) is\n    maintained indefinitely and may be redistributed consistent with\n    this project or the open source license(s) involved.\n</pre>\n</div>\n\n          </div>"}, "last_serial": 6133555, "releases": {"1.0.0": [], "1.0.1": [{"comment_text": "", "digests": {"md5": "ce8fd8d9911c64d35f77cd5a5911e574", "sha256": "1e708d56b983435de18dac9aca3a805e4474d18d7de93017e1b7b86b2fbb3a76"}, "downloads": -1, "filename": "relvalconsumer-1.0.1.tar.gz", "has_sig": false, "md5_digest": "ce8fd8d9911c64d35f77cd5a5911e574", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 25345, "upload_time": "2017-02-18T16:49:29", "upload_time_iso_8601": "2017-02-18T16:49:29.425692Z", "url": "https://files.pythonhosted.org/packages/81/29/4a3c31eb71b45f752cadc15077e309948391b6e3a3445f1dd98fe83a840e/relvalconsumer-1.0.1.tar.gz", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "56cf5d6b8158ecee08b2288c22a13c3c", "sha256": "7765913a3e0c48f0ca16b1fe20aed3d7a1e8363e411ee0b2ff744ce236b2926f"}, "downloads": -1, "filename": "relvalconsumer-1.1.0.tar.gz", "has_sig": false, "md5_digest": "56cf5d6b8158ecee08b2288c22a13c3c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 28320, "upload_time": "2017-11-11T01:20:20", "upload_time_iso_8601": "2017-11-11T01:20:20.854544Z", "url": "https://files.pythonhosted.org/packages/4f/36/4eef03e83d25ed1d0ad1d284929f4093326930ec77c5714d1ff9087a5ed4/relvalconsumer-1.1.0.tar.gz", "yanked": false}], "1.2.0": [{"comment_text": "", "digests": {"md5": "e9ae7cfbb09ea00171ef085dc44e2764", "sha256": "298fd3c93d1b31b03a4437e5490de37acd4139e142e109c6cb5e030c62bbbd4b"}, "downloads": -1, "filename": "relvalconsumer-1.2.0.tar.gz", "has_sig": false, "md5_digest": "e9ae7cfbb09ea00171ef085dc44e2764", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 28349, "upload_time": "2017-12-22T19:52:20", "upload_time_iso_8601": "2017-12-22T19:52:20.938099Z", "url": "https://files.pythonhosted.org/packages/64/e9/3d790ab6da08a2deb676c7034dfe62b8d96664e5c08955ffa5d5a8e9e080/relvalconsumer-1.2.0.tar.gz", "yanked": false}], "1.3.0": [{"comment_text": "", "digests": {"md5": "77f9f326b2202a1a30ba954eb2c1054c", "sha256": "563fd622201a8e05241d8c4fe37a1b8f356f73a9b10b47c75c94a2eba8cda12c"}, "downloads": -1, "filename": "relvalconsumer-1.3.0.tar.gz", "has_sig": false, "md5_digest": "77f9f326b2202a1a30ba954eb2c1054c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 26510, "upload_time": "2018-02-14T00:36:42", "upload_time_iso_8601": "2018-02-14T00:36:42.338681Z", "url": "https://files.pythonhosted.org/packages/93/5f/feeb8bf527fa6ef8d8a30b64e345a9b3e4a4773af69b7436fc22f98427fb/relvalconsumer-1.3.0.tar.gz", "yanked": false}], "1.3.1": [{"comment_text": "", "digests": {"md5": "d7f302bb8b6342e5a05a0921669d772a", "sha256": "5592e58bf89fb4a5dd7f00929986bd6851155212a97ff62f684558707d52e268"}, "downloads": -1, "filename": "relvalconsumer-1.3.1.tar.gz", "has_sig": false, "md5_digest": "d7f302bb8b6342e5a05a0921669d772a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 28923, "upload_time": "2018-02-23T01:02:20", "upload_time_iso_8601": "2018-02-23T01:02:20.001914Z", "url": "https://files.pythonhosted.org/packages/46/13/3b04bdf8e7a028498281a147aaff0b8775da2d953249a3fdb474e55059d4/relvalconsumer-1.3.1.tar.gz", "yanked": false}], "2.0.0": [{"comment_text": "", "digests": {"md5": "31533f5b2424d2161d3346b80d45f23f", "sha256": "4611724c711e5377928f7e40a53ae1f781f47fb6c626269eb614d0d6f33ba371"}, "downloads": -1, "filename": "relvalconsumer-2.0.0.tar.gz", "has_sig": false, "md5_digest": "31533f5b2424d2161d3346b80d45f23f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27578, "upload_time": "2019-06-18T23:19:37", "upload_time_iso_8601": "2019-06-18T23:19:37.781091Z", "url": "https://files.pythonhosted.org/packages/da/f1/ff8e507e8a9735ec7488f6c3ac3a2e82663b298571568565d5dd52ea5515/relvalconsumer-2.0.0.tar.gz", "yanked": false}], "2.0.1": [{"comment_text": "", "digests": {"md5": "f65624966219928de0505fc974331985", "sha256": "71d8db2ea4a3a6614576e60eb9863c2a428bf6bdb8579f37fcfb1f9c093073a2"}, "downloads": -1, "filename": "relvalconsumer-2.0.1.tar.gz", "has_sig": false, "md5_digest": "f65624966219928de0505fc974331985", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 28220, "upload_time": "2019-09-19T19:22:14", "upload_time_iso_8601": "2019-09-19T19:22:14.534278Z", "url": "https://files.pythonhosted.org/packages/2e/19/1b688de68196f16d01a0c7203aa62484db017fba211e890bc4487f8f2ca3/relvalconsumer-2.0.1.tar.gz", "yanked": false}], "2.1.0": [{"comment_text": "", "digests": {"md5": "554e7f5b515ea3195f6b7b610babc80a", "sha256": "078208d8d1c068054eaf3d07221f9bbcf5d593e81bcda6bca6fef9555ae612e6"}, "downloads": -1, "filename": "relvalconsumer-2.1.0.tar.gz", "has_sig": false, "md5_digest": "554e7f5b515ea3195f6b7b610babc80a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 30461, "upload_time": "2019-11-13T23:29:14", "upload_time_iso_8601": "2019-11-13T23:29:14.599221Z", "url": "https://files.pythonhosted.org/packages/ea/86/66b6cdf0422ad9529e8f4680547a5c03d582b54b342493ea69e7d300a404/relvalconsumer-2.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "554e7f5b515ea3195f6b7b610babc80a", "sha256": "078208d8d1c068054eaf3d07221f9bbcf5d593e81bcda6bca6fef9555ae612e6"}, "downloads": -1, "filename": "relvalconsumer-2.1.0.tar.gz", "has_sig": false, "md5_digest": "554e7f5b515ea3195f6b7b610babc80a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 30461, "upload_time": "2019-11-13T23:29:14", "upload_time_iso_8601": "2019-11-13T23:29:14.599221Z", "url": "https://files.pythonhosted.org/packages/ea/86/66b6cdf0422ad9529e8f4680547a5c03d582b54b342493ea69e7d300a404/relvalconsumer-2.1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:04:57 2020"}