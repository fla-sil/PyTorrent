{"info": {"author": "Ryan Petrello", "author_email": "ryan@ryanpetrello.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Environment :: Console", "Environment :: Web Environment", "Intended Audience :: Developers", "Intended Audience :: System Administrators", "License :: OSI Approved :: MIT License", "Operating System :: MacOS :: MacOS X", "Operating System :: Microsoft :: Windows", "Operating System :: POSIX", "Programming Language :: Python", "Programming Language :: Python :: 2.6", "Programming Language :: Python :: 2.7", "Topic :: Internet :: WWW/HTTP :: WSGI", "Topic :: Software Development :: Libraries :: Application Frameworks"], "description": "``canary`` is a small library for recording and shipping exceptions from Python to `logstash <http://logstash.net>`_ via `ZeroMQ <http://www.zeromq.org>`_.\n\n.. _travis: http://travis-ci.org/ryanpetrello/canary\n.. |travis| image:: https://secure.travis-ci.org/ryanpetrello/canary.png\n\n|travis|_\n\nExample Usage\n-------------\n\nAssuming ``logstash`` is running and bound to a **0mq** socket at\n``tcp://0.0.0.0:2120``::\n\n    $ cat logstash.conf\n    input {\n        zeromq {\n            type => 'python-exception'\n            mode => 'server'\n            topology => 'pushpull'\n            address => 'tcp://0.0.0.0:2120'\n            charset => 'UTF-8'\n        }\n    }\n    output {\n        debug => true\n    }\n\n...to report exceptions thrown by your WSGI application, wrap your WSGI app\nwith ``canary.middleware.LogStashMiddleware``:\n\n.. code:: python\n\n    from logging.config import dictConfig as load_logging_config\n    from wsgiref.simple_server import make_server\n    from wsgiref.util import setup_testing_defaults\n    \n    from canary.middleware import LogStashMiddleware\n    \n    \n    def app(environ, start_response):\n        setup_testing_defaults(environ)\n        assert True is False\n    \n    if __name__ == '__main__':\n        load_logging_config({\n            'version': 1,\n            'loggers': {'canary': {'level': 'ERROR', 'handlers': ['zeromq']}},\n            'handlers': {\n                'zeromq': {\n                    'level': 'ERROR',\n                    'class': 'canary.handler.ZeroMQHandler',\n                    'address': 'tcp://127.0.0.1:2120',\n                    'formatter': 'logstash'\n                }\n            },\n            'formatters': {\n                'logstash': {\n                    '()': 'canary.format.LogstashFormatter'\n                }\n            }\n        })\n    \n        httpd = make_server('', 8080, LogStashMiddleware(app))\n        print \"Serving on port 8080...\"\n        httpd.serve_forever()\n\nExcluding Certain Exceptions\n----------------------------\n\nYou may want to prevent ``canary`` from logging certain types of exceptions.\nTo do so, pass a list of exceptions into the ``LogStashMiddleware``\nconstructor:\n\n.. code:: python\n\n    app = LogStashMiddleware(app, ignored_exceptions=[SomePrivateException])\n\nFiltering Sensitive Data\n------------------------\n\n``canary`` automatically populates exception logs with contextual data from the\nWSGI ``environ``.  Sometimes, though, this data can contain sensitive details,\nlike customer's login credentials.  ``canary`` makes it easy to filter certain\nrequest arguments from the logs it produces:\n\n.. code:: python\n\n    app = LogStashMiddleware(app, sensitive_keys=['password', 'cc_number'])\n\nDevelopment\n-----------\n\nSource hosted at `GitHub <https://github.com/ryanpetrello/canary>`_.\nReport issues and feature requests on `GitHub\nIssues <https://github.com/ryanpetrello/canary/issues>`_.\n\nTo fix bugs or add features to ``canary``, a GitHub account is required.\n\nThe general practice for contributing is to `fork canary\n<https://help.github.com/articles/fork-a-repo>`_ and make changes in the\n``next`` branch. When you're finished, `send a pull request\n<https://help.github.com/articles/using-pull-requests>`_ and your patch will\nbe reviewed.\n\nTests require ``tox`` and can be run with ``$ pip install tox && tox``.\n\nAll contributions must:\n\n* Include accompanying tests.\n* Include API documentation if new features or API methods are changed/added.\n* Be (generally) compliant with PEP8.\n* Not break the tests or build. Before issuing a pull request, ensure that all\n  tests still pass across multiple versions of Python.\n", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://github.com/ryanpetrello/canary", "keywords": "web framework wsgi logstash logging zeromq", "license": "MIT", "maintainer": null, "maintainer_email": null, "name": "canary", "package_url": "https://pypi.org/project/canary/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/canary/", "project_urls": {"Download": "UNKNOWN", "Homepage": "http://github.com/ryanpetrello/canary"}, "release_url": "https://pypi.org/project/canary/0.1.4/", "requires_dist": null, "requires_python": null, "summary": "canary is a small library for recording and shipping exceptions from Python to logstash via ZeroMQ.", "version": "0.1.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><tt>canary</tt> is a small library for recording and shipping exceptions from Python to <a href=\"http://logstash.net\" rel=\"nofollow\">logstash</a> via <a href=\"http://www.zeromq.org\" rel=\"nofollow\">ZeroMQ</a>.</p>\n<p><a href=\"http://travis-ci.org/ryanpetrello/canary\" rel=\"nofollow\"><img alt=\"travis\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4df0ec364c1269ef188a8755ee783311d2910623/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f7279616e70657472656c6c6f2f63616e6172792e706e67\"></a></p>\n<div id=\"example-usage\">\n<h2>Example Usage</h2>\n<p>Assuming <tt>logstash</tt> is running and bound to a <strong>0mq</strong> socket at\n<tt><span class=\"pre\">tcp://0.0.0.0:2120</span></tt>:</p>\n<pre>$ cat logstash.conf\ninput {\n    zeromq {\n        type =&gt; 'python-exception'\n        mode =&gt; 'server'\n        topology =&gt; 'pushpull'\n        address =&gt; 'tcp://0.0.0.0:2120'\n        charset =&gt; 'UTF-8'\n    }\n}\noutput {\n    debug =&gt; true\n}\n</pre>\n<p>\u2026to report exceptions thrown by your WSGI application, wrap your WSGI app\nwith <tt>canary.middleware.LogStashMiddleware</tt>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">logging.config</span> <span class=\"kn\">import</span> <span class=\"n\">dictConfig</span> <span class=\"k\">as</span> <span class=\"n\">load_logging_config</span>\n<span class=\"kn\">from</span> <span class=\"nn\">wsgiref.simple_server</span> <span class=\"kn\">import</span> <span class=\"n\">make_server</span>\n<span class=\"kn\">from</span> <span class=\"nn\">wsgiref.util</span> <span class=\"kn\">import</span> <span class=\"n\">setup_testing_defaults</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">canary.middleware</span> <span class=\"kn\">import</span> <span class=\"n\">LogStashMiddleware</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">):</span>\n    <span class=\"n\">setup_testing_defaults</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">)</span>\n    <span class=\"k\">assert</span> <span class=\"kc\">True</span> <span class=\"ow\">is</span> <span class=\"kc\">False</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">load_logging_config</span><span class=\"p\">({</span>\n        <span class=\"s1\">'version'</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n        <span class=\"s1\">'loggers'</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'canary'</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'level'</span><span class=\"p\">:</span> <span class=\"s1\">'ERROR'</span><span class=\"p\">,</span> <span class=\"s1\">'handlers'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'zeromq'</span><span class=\"p\">]}},</span>\n        <span class=\"s1\">'handlers'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'zeromq'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"s1\">'level'</span><span class=\"p\">:</span> <span class=\"s1\">'ERROR'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'class'</span><span class=\"p\">:</span> <span class=\"s1\">'canary.handler.ZeroMQHandler'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'address'</span><span class=\"p\">:</span> <span class=\"s1\">'tcp://127.0.0.1:2120'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'formatter'</span><span class=\"p\">:</span> <span class=\"s1\">'logstash'</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'formatters'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'logstash'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"s1\">'()'</span><span class=\"p\">:</span> <span class=\"s1\">'canary.format.LogstashFormatter'</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n\n    <span class=\"n\">httpd</span> <span class=\"o\">=</span> <span class=\"n\">make_server</span><span class=\"p\">(</span><span class=\"s1\">''</span><span class=\"p\">,</span> <span class=\"mi\">8080</span><span class=\"p\">,</span> <span class=\"n\">LogStashMiddleware</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">))</span>\n    <span class=\"nb\">print</span> <span class=\"s2\">\"Serving on port 8080...\"</span>\n    <span class=\"n\">httpd</span><span class=\"o\">.</span><span class=\"n\">serve_forever</span><span class=\"p\">()</span>\n</pre>\n</div>\n<div id=\"excluding-certain-exceptions\">\n<h2>Excluding Certain Exceptions</h2>\n<p>You may want to prevent <tt>canary</tt> from logging certain types of exceptions.\nTo do so, pass a list of exceptions into the <tt>LogStashMiddleware</tt>\nconstructor:</p>\n<pre><span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">LogStashMiddleware</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">ignored_exceptions</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">SomePrivateException</span><span class=\"p\">])</span>\n</pre>\n</div>\n<div id=\"filtering-sensitive-data\">\n<h2>Filtering Sensitive Data</h2>\n<p><tt>canary</tt> automatically populates exception logs with contextual data from the\nWSGI <tt>environ</tt>.  Sometimes, though, this data can contain sensitive details,\nlike customer\u2019s login credentials.  <tt>canary</tt> makes it easy to filter certain\nrequest arguments from the logs it produces:</p>\n<pre><span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">LogStashMiddleware</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">sensitive_keys</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"s1\">'cc_number'</span><span class=\"p\">])</span>\n</pre>\n</div>\n<div id=\"development\">\n<h2>Development</h2>\n<p>Source hosted at <a href=\"https://github.com/ryanpetrello/canary\" rel=\"nofollow\">GitHub</a>.\nReport issues and feature requests on <a href=\"https://github.com/ryanpetrello/canary/issues\" rel=\"nofollow\">GitHub\nIssues</a>.</p>\n<p>To fix bugs or add features to <tt>canary</tt>, a GitHub account is required.</p>\n<p>The general practice for contributing is to <a href=\"https://help.github.com/articles/fork-a-repo\" rel=\"nofollow\">fork canary</a> and make changes in the\n<tt>next</tt> branch. When you\u2019re finished, <a href=\"https://help.github.com/articles/using-pull-requests\" rel=\"nofollow\">send a pull request</a> and your patch will\nbe reviewed.</p>\n<p>Tests require <tt>tox</tt> and can be run with <tt>$ pip install tox &amp;&amp; tox</tt>.</p>\n<p>All contributions must:</p>\n<ul>\n<li>Include accompanying tests.</li>\n<li>Include API documentation if new features or API methods are changed/added.</li>\n<li>Be (generally) compliant with PEP8.</li>\n<li>Not break the tests or build. Before issuing a pull request, ensure that all\ntests still pass across multiple versions of Python.</li>\n</ul>\n</div>\n\n          </div>"}, "last_serial": 787226, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "a731e13a05e44eb72408973f53d3a1d3", "sha256": "466f579e4ba4cb2ad1e732f8ba5f749f2126b6cd99c1a20e4b381c376f1c6998"}, "downloads": -1, "filename": "canary-0.1.0.tar.gz", "has_sig": false, "md5_digest": "a731e13a05e44eb72408973f53d3a1d3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6977, "upload_time": "2013-02-19T22:36:37", "upload_time_iso_8601": "2013-02-19T22:36:37.446636Z", "url": "https://files.pythonhosted.org/packages/4a/5a/de8dabc0facd7b8246e570381a09768bcdfa2a16d87a55b0225d4f4a49c8/canary-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "b823aff0a0006e6e77e4f2af4f4261f3", "sha256": "452548bb6af035f0f698e5d1b22ebd10ef57995ea2820864c6b34cc6547662d8"}, "downloads": -1, "filename": "canary-0.1.1.tar.gz", "has_sig": false, "md5_digest": "b823aff0a0006e6e77e4f2af4f4261f3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7045, "upload_time": "2013-02-19T23:00:23", "upload_time_iso_8601": "2013-02-19T23:00:23.874564Z", "url": "https://files.pythonhosted.org/packages/b9/1c/b7c66277b378da1dc4cd32a6302d91502d629aeb6a4afabf929fed6528dd/canary-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "82c23e1dc24f0e7ac37f2d545f6aad91", "sha256": "274cd9c81a58ac7e4a5ab9d12d4da40879828a80a34006aac9f8d61a8e8d70b1"}, "downloads": -1, "filename": "canary-0.1.2.tar.gz", "has_sig": false, "md5_digest": "82c23e1dc24f0e7ac37f2d545f6aad91", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7586, "upload_time": "2013-03-08T20:04:14", "upload_time_iso_8601": "2013-03-08T20:04:14.498494Z", "url": "https://files.pythonhosted.org/packages/47/d5/fa6b080d707fb6a9ab60e65c6956ebf290d807066fa5c790f41d298e5424/canary-0.1.2.tar.gz", "yanked": false}], "0.1.3": [{"comment_text": "", "digests": {"md5": "a9680455e1daa6714b62d5da4a4a50ef", "sha256": "9a5bd34d6eaef7c17619c6ff1cdb5462a3f4e7362315850d7228dec06777021e"}, "downloads": -1, "filename": "canary-0.1.3.tar.gz", "has_sig": false, "md5_digest": "a9680455e1daa6714b62d5da4a4a50ef", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7590, "upload_time": "2013-04-01T15:28:58", "upload_time_iso_8601": "2013-04-01T15:28:58.357482Z", "url": "https://files.pythonhosted.org/packages/bf/44/71b2e0705f2cb48afda92715e6e62754f0332aca43ba68d0408b8cd4318a/canary-0.1.3.tar.gz", "yanked": false}], "0.1.4": [{"comment_text": "", "digests": {"md5": "c97e8758971a7a43c72a556501f40535", "sha256": "ebd565ef561f8974b9ddf11a504c486a936c27fa85bac72768949dcea1847c6b"}, "downloads": -1, "filename": "canary-0.1.4.tar.gz", "has_sig": false, "md5_digest": "c97e8758971a7a43c72a556501f40535", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6863, "upload_time": "2013-04-11T16:09:21", "upload_time_iso_8601": "2013-04-11T16:09:21.723623Z", "url": "https://files.pythonhosted.org/packages/32/97/3ab7ee9e2b7e68ad95b7c508203141cdf0174c441c0b1099df84e4e0a206/canary-0.1.4.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "c97e8758971a7a43c72a556501f40535", "sha256": "ebd565ef561f8974b9ddf11a504c486a936c27fa85bac72768949dcea1847c6b"}, "downloads": -1, "filename": "canary-0.1.4.tar.gz", "has_sig": false, "md5_digest": "c97e8758971a7a43c72a556501f40535", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6863, "upload_time": "2013-04-11T16:09:21", "upload_time_iso_8601": "2013-04-11T16:09:21.723623Z", "url": "https://files.pythonhosted.org/packages/32/97/3ab7ee9e2b7e68ad95b7c508203141cdf0174c441c0b1099df84e4e0a206/canary-0.1.4.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:35:32 2020"}