{"info": {"author": "KawanSoft", "author_email": "contact@kawansoft.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "License :: OSI Approved :: Apache Software License", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Database", "Topic :: Software Development :: Libraries :: Application Frameworks"], "description": "# AceQL HTTP \n\n## Python Client SDK v3.0.1 - April 20, 2020\n\n<img src=\"https://www.aceql.com/favicon.png\" alt=\"\"/>\n\n  * [Fundamentals](#fundamentals)\n      * [License](#license)\n      * [Python Versions &amp; DB-API 2.0](#python-versions--db-api-20)\n      * [AceQL Server side compatiblity](#aceql-server-side-compatiblity)\n      * [Installation](#installation)\n      * [Data transport](#data-transport)\n      * [Best practices for fast response time](#best-practices-for-fast-response-time)\n      * [Datatypes](#datatypes)\n   * [Usage](#usage)\n      * [Quickstart](#quickstart)\n      * [Handling Exceptions](#handling-exceptions)\n         * [The error type](#the-error-type)\n         * [Most common AceQL server messages](#most-common-aceql-server-messages)\n         * [HTTP Status Codes](#http-status-codes)\n      * [Advanced Usage](#advanced-usage)\n         * [Managing NULL values](#managing-null-values)\n            * [Setting NULL values](#setting-null-values)\n            * [Reading NULL values](#reading-null-values)\n         * [Transactions](#transactions)\n         * [Proxies](#proxies)\n         * [Timeouts](#timeouts)\n         * [BLOB management](#blob-management)\n            * [BLOB creation](#blob-creation)\n            * [BLOB reading](#blob-reading)\n            * [Managing BLOB upload progress](#managing-blob-upload-progress)\n      * [Using the Metadata Query API](#using-the-metadata-query-api)\n         * [Downloading database schema into a file](#downloading-database-schema-into-a-file)\n         * [Accessing remote database main properties](#accessing-remote-database-main-properties)\n         * [Getting Details of Tables and Columns](#getting-details-of-tables-and-columns)\n\n# Fundamentals\n\nThis document describes how to use the AceQL SDK / module and gives some details about how it operates with the AceQL Server side.\n\nThe AceQL SDK / module allows you to wrap the [AceQL HTTP APIs](https://github.com/kawansoft/aceql-http/blob/master/aceql-http-5.0.1-user-guide-api.md)  to access remote SQL databases and/or SQL databases in the cloud by simply including standard Python SQL calls in your code, just like you would do for any local database. There is zero learning curve and usage is straightforward.\n\nThe AceQL Server operation is described in [AceQL HTTP Server Installation and Configuration Guide](https://github.com/kawansoft/aceql-http/blob/master/README.md), whose content is sometimes referred to in his User Guide.\n\nOn the remote side, like the AceQL Server access to the SQL database using Java JDBC, we will sometimes use the JDBC terminology (ResultSet, etc.) in this document. Nevertheless, knowledge of Java or JDBC is *not* a requirement.\n\n## License\n\nThe SDK is licensed with the liberal [Apache 2.0](https://www.apache.org/licenses/LICENSE-2.0) license.\n\n## Python Versions & DB-API 2.0\n\nThe module supports Python 3.6\u20133.8.\n\nThe module provides a SQL interface compliant with the DB-API 2.0 specification described by [**PEP 249**](https://www.python.org/dev/peps/pep-0249).\n\n## AceQL Server side compatiblity\n\nThis 3.0.1 SDK version is compatible with AceQL HTTP server side v2.0+. It is not compatible with AceQL HTTP server side v1.0.\n\n## Installation\n\n`pip install aceql`\n\n## Data transport\n\nHTTP requests parameters are transported in UTF-8 format and JSON format is used for data and class  transport\n\nAll requests are streamed:\n\n- Output requests (from the client side)  are streamed directly from the socket to the server to avoid buffering any     content body\n- Input responses (for the client side)   are streamed directly from the socket to the server to efficiently read     the response body\n\nLarge content (query results, Blobs/Clobs, etc.) is transferred using files. It is never loaded in memory. Streaming techniques are always used to read and write this content.\n\n## Best practices for fast response time\n\nEvery HTTP exchange between the client and server side is time-consuming, because the HTTP call is synchronous and waits for the server's response\n\nTry to avoid coding SQL calls inside loops, as this can reduce execution speed. Each SQL call will send an http request and wait for the response from the server.\n\nNote that AceQL is optimized as much as possible. A SELECT call returning a huge data volume will not consume memory on the server or client side:  AceQL uses input stream and output stream I/O for data  transfer.\n\nServer JDBC ResultSet retrieval is as fast as possible :\n\n- The ResultSet creation is done once on the server by the executeQuery.\n\n\n- The rows are all dumped at once on the servlet output stream by the server\n\n\n- The client side gets the ResultSet content as a file.\n\nAll data reading commands are executed locally on the client side with forward-only reading.\n\n## Datatypes\n\nThe main server side JDBC data types for columns are supported:\n\n`Boolean`, `Blob/Clob`, `Integer`, `Short`, `Double`,  `Float`, `BigDecimal`, `Long`, `String`, `Date`, `Time`, and `Timestamp`.\n\nNote that the AceQL module does not allow you to specify data types to use; data types are implicitly chosen by the module.\n\nParameter values are automatically converted to their SQL equivalent. The following Python types can thus be sent to remote server without any problem:\n\n| Python type / class                      | SQL type                                 |\n| ---------------------------------------- | ---------------------------------------- |\n| Tuple  (None, SqlNullType.&lt;SQL_TYPE&gt;) | NULL                                     |\n| str                                      | CHAR, VARCHAR                            |\n| int                                      | INTEGER, or BIGINT/NUMERIC,  <br />depending on size |\n| bool                                     | BIT, BOOL                                |\n| float                                    | REAL                                     |\n| date                                     | DATE                                     |\n| datetime                                 | TIMESTAMP                                |\n| time                                     | TIME                                     |\n| File Object                              | BLOB                                     |\n\nNULL and BLOB types are explained in Advanced Usage.\n\nThis is how SQL types are converted to Python types by default:\n\n| SQL type         | Python type / class                |\n| ---------------- | ---------------------------------- |\n| NULL             | None                               |\n| CHAR, VARCHAR    | str                                |\n| TINYINT, INTEGER | int                                |\n| BIGINT, NUMERIC  | Python 2: long <br />Python 3: int |\n| BOOL, BIT        | bool                               |\n| DATE             | date                               |\n| TIMESTAMP        | datetime                           |\n| TIME             | time                               |\n| BLOB             | Response stream                    |\n\n# Usage\n\n## Quickstart\n\nTo use the module, just create a `Connection` object that represents the database:\n\n```python\nimport aceql\n\n# URL of the AceQL server, Remote SQL database name\n# & authentication info\nhost = \"https://www.acme.com:9443/aceql\"\ndatabase = \"sampledb\"\nusername = \"user1\"\npassword = \"password1\"\n\nconnection = aceql.connect(host, database, username, password)\n```\n\nThe schema of the database is here:  [sampledb](https://www.aceql.com/rest/soft/5.0.1/src/sampledb_other_databases.txt)\n\nOnce you have a `Connection`, you can create a `Cursor` object and call its `execute()` method to perform SQL commands.\n\nFollowing sample shows how to insert 3 new customers using prepared statements:\n\n```python\nsql = \"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"\nparams = (1, 'Sir', 'John', 'Smith I', '1 Madison Ave', 'New York',\n          'NY 10010', '+1 212-586-7001')\ncursor.execute(sql, params)\nrows_inserted = cursor.rowcount\n\nsql = \"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"\nparams = (2, 'Sir', 'William', 'Smith II', '1 Madison Ave', 'New York',\n          'NY 10010', '+1 212-586-7002')\ncursor.execute(sql, params)\nrows_inserted += cursor.rowcount\n\nsql = \"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"\nparams = (3, 'Sir', 'William', 'Smith III', '1 Madison Ave', 'New York',\n          'NY 10010', '+1 212-586-7003')\ncursor.execute(sql, params)\nrows_inserted += cursor.rowcount\n\nprint(\"rows inserted: \" + str(rows_inserted))\n```\n\nwhich returns:\n\n```bash\nrows inserted: 3\n```\n\nThe `cursor.execute()`  sends the SQL order and the parameters to the server who executes it on.\n\nWe view the first inserted customer:\n\n```python\nsql = \"select * from customer where customer_id = ?\"\nparams = (1,)\ncursor.execute(sql, params)\nrow = cursor.fetchone()\nprint (row)\n```\n\nwhich returns:\n\n```bash\n(1, 'Sir ', 'John', 'Smith', '1 Madison Ave', 'New York', 'NY 10010  ', '+1 212-586-7000')\n```\n\nThe remote result set is downloaded into a file that is read line per line at each `Cursor.fetchone()` call.\n\nWe have access to the name and type of each column:\n\n```python\nfor desc in cursor.description:\n    print(desc[0] + \", \" + desc[1])\n```\n\nWhich returns:\n\n```bash\ncustomer_id, INTEGER\ncustomer_title, CHAR\nfname, VARCHAR\nlname, VARCHAR\naddressline, VARCHAR\ntown, VARCHAR\nzipcode, CHAR\nphone, VARCHAR\n```\n\nIt's recommended to close the `Cursor` at end of SELECT usage in order to release  the underlying file stream and delete the associated temp file:\n\n```python\ncursor.close()\n```\n\nWe view now all the customers and apply good practice to force the closing of `Cursor`:\n\n```python\nwith closing(connection.cursor()) as cursor:\n    sql = \"select * from customer where customer_id >= ? order by customer_id\"\n    params = (1,)\n    cursor.execute(sql, params)\n    print(\"rows: \" + str(cursor.rowcount))\n\n    rows = cursor.fetchall()\n\n    for row in rows:\n        print(row)\n```\n\nWhich returns:\n\n```bash\n(1, 'Sir ', 'John', 'Smith', '1 Madison Ave', 'New York', 'NY 10010  ', '+1 212-586-7001')\n(2, 'Sir ', 'William', 'Smith II', '1 Madison Ave', 'New York', 'NY 10010  ', '+1 212-586-7002')\n(3, 'Sir ', 'William', 'Smith III', '1 Madison Ave', 'New York', 'NY 10010  ', '+1 212-586-7003')\nrows: 3\n```\n\nAt end of our session, it is highly recommended to close the `Connection`:\n\n```python\n# Make sure connection is always closed in order to close and release\n# server connection into the pool:\nconnection.close()\n```\n\n## Handling Exceptions\n\nExcept for `TypeError`, Exceptions thrown are always an instance of `Error`\n\nThe `Error` contains 5 pieces of information:\n\n| Info             | Description                              |\n| :--------------- | :--------------------------------------- |\n| Reason           | The error message. Retrieved with `reason` property. |\n| Error Type       | See below for description. Retrieved with `error_type` property. |\n| Exception        | The original `Exception` that is the cause, if any. Retrieved with  `cause` property. |\n| Http Status Code | See below for description. Retrieved with `http_status_code` property. |\n| Server Exception | The Java Exception Stack Trace thrown on server side,  if any. Retrieved with `remote_stack_trace` property. |\n\n### The error type\n\nThe error type allows you to get the type of error, and where the error occurred. It is retrieved with the `Error.error_type` property.\n\n| Error Type  Value | Description                              |\n| :---------------: | :--------------------------------------- |\n|         0         | The error occurred locally on the client side.   See `http_status_code` property for more info.  Typical cases: no Internet connection, proxy  authentication required. |\n|         1         | The error is due to a JDBC Exception.  It was raised by the remote JDBC Driver and is rerouted  by AceQL as is.  The JDBC error message is accessible via `reason` property.  Typical case: an error in the SQL statement.  <br />Examples: wrong table or column name. |\n|         2         | The error was raised by the AceQL Server.  This means that the AceQL Server expected a value or  parameter that was not sent by the client side.  Typical cases: misspelling in URL parameter, missing  required request parameters,  JDBC  Connection expiration, etc.  The detailed error message is accessible via `reason` property.  See below for most common AceQL Server error  messages. |\n|         3         | The AceQL Server forbade the execution of the SQL  statement for a security reason.  For security reasons, `reason` property gives access to voluntarily vague  details. |\n|         4         | The AceQL Server is on failure and raised an  unexpected Java Exception.  The stack track is included and accessible via `remote_stack_trace` property. |\n\n###  Most common AceQL server messages\n\n| AceQL Sever  Error Messages   (Error.error_type  = 2)        |\n| ------------------------------------------------------------ |\n| AceQL main  servlet not found in path                        |\n| An error occurred  during Blob download                      |\n| An error occurred  during Blob upload                        |\n| Blob directory  defined in DatabaseConfigurator.getBlobDirectory() does not exist |\n| Connection is  invalidated (probably expired)                |\n| Database does not  exist                                     |\n| Invalid blob_id.  Cannot be used to create a file            |\n| Invalid blob_id.  No Blob corresponding to blob_id           |\n| Invalid  session_id                                          |\n| Invalid username  or password                                |\n| No action found  in request                                  |\n| Unable to get a  Connection                                  |\n| Unknown SQL  action or not supported by software             |\n\n### HTTP Status Codes\n\nThe HTTP Status Code is accessible with the `Error.http_status_code` property. The HTTP Status Code is 200 (OK) on successful completion calls.\n\nWhen an error occurs:\n\n- If error type is 0, the HTTP Status Code is returned by the client side and may take all possible values in a malformed HTTP call.\n\n- If error type is > 0, the HTTP Status Code can take one the following values returned by the server side:\n\n\n\n| HTTP  Status Code            | Description                              |\n| ---------------------------- | ---------------------------------------- |\n| 400  (BAD REQUEST)           | Missing element in URL path<br />Missing request parameters<br />All JDBC errors raised by the remote JDBC  Driver |\n| 401  (UNAUTHORIZED)          | Invalid username or password in connect<br />Invalid session_id<br />The AceQL Server forbade the execution of  the SQL statement for security reasons |\n| 404 (NOT_FOUND)              | BLOB directory does not exist on server<br />BLOB file not found on server |\n| 500  (INTERNAL_SERVER_ERROR) | The AceQL Server is on failure and raised  an unexpected Java Exception |\n\n## Advanced Usage\n\n### Managing NULL values\n\n#### Setting NULL values\n\n`NULL` values are handled in a specific way, because the remote server must know the type of the `NULL` value.\n\nTo create a `NULL` value parameter, create a tuple of 2 elements:\n\n- First value is `None`.\n- Second value is a one of the `SqlNullType` constants that defines the type of the parameter.\n\nThis 2 elements tuple is then inserted in the tuple of the prepared statement parameters:\n\n```python\nsql = \"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"\nparams = (4, 'Sir', 'William', 'Smith IV', '1 Madison Ave',\n          'New York', 'NY 10010', (None, SqlNullType.VARCHAR))\ncursor.execute(sql, params)\n```\n\n#### Reading NULL values\n\nA `NULL` column value is returned as `None`:\n\n```\nsql = \"select * from customer_3 where customer_id = ? order by customer_id\"\nparams = (4,)\ncursor.execute(sql, params)\nrow = cursor.fetchone()\nprint (row)\n```\n\nExecution will return:\n\n```\n(4, 'Sir ', 'William', 'Smith IV', '1 Madison Ave', 'New York', 'NY 10010  ', None)\n```\n\nIn this AceQL module version: there is no difference for string columns between a real NULL in the database and the ''NULL\" string.\n\n### Transactions\n\nTransactions are supported by the module. Because the remote server executes JDBC code, client code must follow the JDBC requirement to set the auto commit mode to false prior executing a transaction.\n\nThis is done with `Cursor.set_auto_commit(False)`. It is good practice to always reset auto commit mode to true at end of your transactions. Not that it auto commit mode state is undefined when a `Connection` is created with `aceql.connect()` call.\n\nTransaction example:\n\n```python\n# To do prior transaction\nself.connection.set_auto_commit(False)\n\ncursor = self.connection.cursor()\n\ntry:\n    # Create a Customer\n    sql = \"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"\n    params = (customer_id, 'Sir', 'John', 'Smith', '1 Madison Ave',\n              'New York', 'NY 10010', '+1 212-586-7000')\n    cursor.execute(sql, params)\n\n    # Create an Order for this Customer\n    sql = \"insert into orderlog values ( ?, ?, ?, ?, ?, ?, ?, ?, ? )\"\n\n    the_datetime = datetime.now()\n    the_date = the_datetime.date()\n\n    # (None, SqlNullType.BLOB) means to set the jpeg_image BLOB\n    # column to NULL on server:\n    params = (customer_id, item_id, \"Item Description\", 9999,\n              the_date, the_datetime, (None, SqlNullType.BLOB), 1, 2)\n    cursor.execute(sql, params)\n\n    self.connection.commit()\nexcept Error as e:\n    print(e)\n    self.connection.rollback()\n    raise e\nfinally:\n    self.connection.set_auto_commit(True) # Good practice\n    cursor.close()\n```\n\n### Proxies\n\nThe AceQL module support proxies, using  the [proxy](https://requests.readthedocs.io/en/master/user/advanced/#proxies) syntax of [Requests](https://requests.readthedocs.io/en/master/) The aceql module uses Requests for HTTP communications with the remote server:\n\n```python\nimport aceql\nfrom aceql import *\n\nproxies = {\n  'http': 'http://10.10.1.10:3128',\n  'https': 'http://10.10.1.10:1080',\n}\n\n# Create a Connection using a proxy:\nconnection = aceql.connect(host, database,\n                           username, password, proxies=proxies)\n```\n\nAuthenticated proxies are supported.  Just create an `aceql.ProxyAuth`  instance and pass it to `aceql.connect()`:\n\n```python\nimport aceql\nfrom aceql import *\n\nproxies = {\n  'http': 'http://10.10.1.10:3128',\n  'https': 'http://10.10.1.10:1080',\n}\n\n# The proxy authentication info:\nauth = ProxyAuth(\"proxyUsername\", \"proxyPassword\")\n\n# Create a Connection using an authenticated proxy:\nconnection = aceql.connect(host, database,\n                           username, password,\n                           proxies=proxies, auth=auth)\n```\n\nThe AceQL module uses  [requests-toolbelt](https://pypi.python.org/pypi/requests-toolbelt)  for authenticated proxy management.\n\n### Timeouts\n\nUse static method `Connection.set_timeout(timeout)`to define a timeout in seconds\n\nIf no timeout is specified explicitly, requests do not time out. (For more info: timeouts are implemented with [Requests Timeouts](https://requests.readthedocs.io/en/master/user/advanced/#timeouts).)\n\n### BLOB management\n\nThe AceQL module supports BLOB creation and reading. Methods are implemented using streaming techniques to keep low memory consumption. CLOBs are not supported in this version.\n\n#### BLOB creation\n\nBLOB creation is supported by passing a tuple with a File Object as parameter of a prepared statement:\n\n```python\nsql = \"insert into orderlog values ( ?, ?, ?, ?, ?, ?, ?, ?, ? )\"\n\nfilename = os.getcwd() + sep + \"item_1_image.png\"\nfd = open(filename, \"rb\") # File will be closed by AceQL\nblob_tuple = (fd, )\n\nparams = (1, 1, \"Item 1 Description\", 9999,\n          datetime.now() , datetime.now().date(), blob_tuple, 1, 2)\ncursor.execute(sql, params)\n```\n\n#### BLOB reading\n\nBLOB reading is supported through `Cursor.get_blob_stream(column_index`). The stream can then be read with a `for` loop that iterates on the `respsonse`, using syntax provided by [Requests](https://requests.readthedocs.io/en/master/user/quickstart/#raw-response-content):\n\n```python\nsql = \"select customer_id, item_id, jpeg_image from orderlog \" \\\n      \"where customer_id = ? and item_id = ?\"\nparams = (1, 1)\ncursor.execute(sql, params)\nrow = cursor.fetchone()\n\n# You can get BLOB length if you want to use a progress indicator\nblob_length = cursor.get_blob_length(2)\nprint(\"blob length: \" + str(blob_length))\n\n# Get the stream to the remote BLOB\nresponse = cursor.get_blob_stream(2)\n\n# Download is streamed and writen into filename\nfilename = os.path.expanduser(\"~\") + sep + \"jpeg_image.jpg\"\nwith open(filename, 'wb') as fd:\n    for chunk in response.iter_content(chunk_size=2048):\n        fd.write(chunk)\n\nstat_info = os.stat(filename)\nprint(\"file length: \" + str(stat_info.st_size))\n```\n\n#### Managing BLOB upload progress\n\nYou may want to give your users a progress bar when uploading BLOBs.\n\nThe `ProgressIndicator.Percent` property allows you to get the current percent of upload. Value will be incremented automatically during upload.\n\nTo activate the update mechanism:\n\n1/ Set the long BLOB length along the File Object in the tuple of the BLOB prepared statement parameter:\n\n```python\nfile_length = os.stat(filename).st_size\n\nfd = open(filename, \"rb\")\nblob_tuple = (fd, file_length)\n```\n\n2/ Create your `ProgressIndicator` instance and enter it to the `Connection` instance before the `Cursor.execute(sql,  params)` call :\n\n```python\nprogress_indicator = ProgressIndicator()\nconnection.set_progress_indicator(progress_indicator)\n```\n\nYou then can read `ProgressIndicator.percent` property in your watching thread.\n\nCode sample:\n\n```python\nwith closing(connection.cursor()) as cursor:\n    filename = os.getcwd() + sep + \"item_1_image.jpg\"\n    file_length = os.stat(filename).st_size\n\n    fd = open(filename, \"rb\")\n    blob_tuple = (fd, file_length)\n\n    progress_indicator = ProgressIndicator()\n    connection.set_progress_indicator(progress_indicator)\n\n    sql = \"insert into orderlog values ( ?, ?, ?, ?, ?, ?, ?, ?, ? )\"\n\n    params = (1, 1, \"Item 1 Description\", 9999,\n              datetime.now() , datetime.now().date(),\n              blob_tuple, 1, 2)\n    \n    # cursor.execute() uploads BLOB by chunks and increments \n    # ProgressIndicator.percent property\n    cursor.execute(sql, params)\n```\n\n## Using the Metadata Query API \n\nThe metadata API allows:\n\n- downloading a remote database schema\n  in HTML or text format,\n- to get a remote database main properties,\n- to get the list of tables, \n- to get the details of each table. \n\nIt also allows wrapping remote tables, columns, indexes, etc. into\neasy to use provided Python classes: Table, Index, Column, etc.\n\nFirst step is to get an instance of `RemoteDatabaseMetaData`:\n\n```python\nremote_database_meta_data = RemoteDatabaseMetaData(connection)\n```\n\n### Downloading database schema into a file\n\nDownloading a schema into a  `File` is done through the method. See the `RemoteDatabaseMetaData` documentation:\n\n```python\nfilename = os.path.expanduser(\"~\") + os.sep + \"db_schema.html\"\nremote_database_meta_data.db_schema_download(filename)\n```\n\nSee an example of the built HTML schema:  [db_schema.out.html](https://www.aceql.com/rest/soft/5.0.1/src/db_schema.out.html)\n\n### Accessing remote database main properties\n\nThe `JdbcDatabaseMetaData` class wraps instance the main value retrieved by a remote server JDBC call to `java.sql.Connection.getMetaData()`:\n\n```python\njdbc_meta_data = remote_database_meta_data.get_jdbc_database_meta_data()\nprint(\"Major Version: \" + str(jdbc_meta_data.getJDBCMajorVersion))\nprint(\"Minor Version: \" + str(jdbc_meta_data.getJDBCMinorVersion))\nprint(\"IsReadOnly   : \" + str(jdbc_meta_data.isReadOnly))\n```\n\n### Getting Details of Tables and Columns\n\nSee the `RemoteDatabaseMetaData` documentation:\n\n```python\nprint(\"Print the column details of each table:\")\nfor table_name in table_names:\n    table = remote_database_meta_data.get_table(table_name)\n\n    print()\n    print(\"Columns of table: \" + table_name)\n    for column in table.columns:\n        print(column)\n```\n\n____________", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/kawansoft/aceql-py", "keywords": "DATABASE SQL HTTP CLIENT-SERVER", "license": "Apache 2.0", "maintainer": "", "maintainer_email": "", "name": "aceql", "package_url": "https://pypi.org/project/aceql/", "platform": "", "project_url": "https://pypi.org/project/aceql/", "project_urls": {"Homepage": "https://github.com/kawansoft/aceql-py"}, "release_url": "https://pypi.org/project/aceql/3.0.1/", "requires_dist": null, "requires_python": "", "summary": "Python 3 Client toolkit for easy access of remote SQL databases managed with AceQL HTTP.", "version": "3.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>AceQL HTTP</h1>\n<h2>Python Client SDK v3.0.1 - April 20, 2020</h2>\n<img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/52c4c3d737f6f0329765933a96eb13bb76a86c70/68747470733a2f2f7777772e616365716c2e636f6d2f66617669636f6e2e706e67\">\n<ul>\n<li><a href=\"#fundamentals\" rel=\"nofollow\">Fundamentals</a>\n<ul>\n<li><a href=\"#license\" rel=\"nofollow\">License</a></li>\n<li><a href=\"#python-versions--db-api-20\" rel=\"nofollow\">Python Versions &amp; DB-API 2.0</a></li>\n<li><a href=\"#aceql-server-side-compatiblity\" rel=\"nofollow\">AceQL Server side compatiblity</a></li>\n<li><a href=\"#installation\" rel=\"nofollow\">Installation</a></li>\n<li><a href=\"#data-transport\" rel=\"nofollow\">Data transport</a></li>\n<li><a href=\"#best-practices-for-fast-response-time\" rel=\"nofollow\">Best practices for fast response time</a></li>\n<li><a href=\"#datatypes\" rel=\"nofollow\">Datatypes</a></li>\n</ul>\n</li>\n<li><a href=\"#usage\" rel=\"nofollow\">Usage</a>\n<ul>\n<li><a href=\"#quickstart\" rel=\"nofollow\">Quickstart</a></li>\n<li><a href=\"#handling-exceptions\" rel=\"nofollow\">Handling Exceptions</a>\n<ul>\n<li><a href=\"#the-error-type\" rel=\"nofollow\">The error type</a></li>\n<li><a href=\"#most-common-aceql-server-messages\" rel=\"nofollow\">Most common AceQL server messages</a></li>\n<li><a href=\"#http-status-codes\" rel=\"nofollow\">HTTP Status Codes</a></li>\n</ul>\n</li>\n<li><a href=\"#advanced-usage\" rel=\"nofollow\">Advanced Usage</a>\n<ul>\n<li><a href=\"#managing-null-values\" rel=\"nofollow\">Managing NULL values</a>\n<ul>\n<li><a href=\"#setting-null-values\" rel=\"nofollow\">Setting NULL values</a></li>\n<li><a href=\"#reading-null-values\" rel=\"nofollow\">Reading NULL values</a></li>\n</ul>\n</li>\n<li><a href=\"#transactions\" rel=\"nofollow\">Transactions</a></li>\n<li><a href=\"#proxies\" rel=\"nofollow\">Proxies</a></li>\n<li><a href=\"#timeouts\" rel=\"nofollow\">Timeouts</a></li>\n<li><a href=\"#blob-management\" rel=\"nofollow\">BLOB management</a>\n<ul>\n<li><a href=\"#blob-creation\" rel=\"nofollow\">BLOB creation</a></li>\n<li><a href=\"#blob-reading\" rel=\"nofollow\">BLOB reading</a></li>\n<li><a href=\"#managing-blob-upload-progress\" rel=\"nofollow\">Managing BLOB upload progress</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#using-the-metadata-query-api\" rel=\"nofollow\">Using the Metadata Query API</a>\n<ul>\n<li><a href=\"#downloading-database-schema-into-a-file\" rel=\"nofollow\">Downloading database schema into a file</a></li>\n<li><a href=\"#accessing-remote-database-main-properties\" rel=\"nofollow\">Accessing remote database main properties</a></li>\n<li><a href=\"#getting-details-of-tables-and-columns\" rel=\"nofollow\">Getting Details of Tables and Columns</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1>Fundamentals</h1>\n<p>This document describes how to use the AceQL SDK / module and gives some details about how it operates with the AceQL Server side.</p>\n<p>The AceQL SDK / module allows you to wrap the <a href=\"https://github.com/kawansoft/aceql-http/blob/master/aceql-http-5.0.1-user-guide-api.md\" rel=\"nofollow\">AceQL HTTP APIs</a>  to access remote SQL databases and/or SQL databases in the cloud by simply including standard Python SQL calls in your code, just like you would do for any local database. There is zero learning curve and usage is straightforward.</p>\n<p>The AceQL Server operation is described in <a href=\"https://github.com/kawansoft/aceql-http/blob/master/README.md\" rel=\"nofollow\">AceQL HTTP Server Installation and Configuration Guide</a>, whose content is sometimes referred to in his User Guide.</p>\n<p>On the remote side, like the AceQL Server access to the SQL database using Java JDBC, we will sometimes use the JDBC terminology (ResultSet, etc.) in this document. Nevertheless, knowledge of Java or JDBC is <em>not</em> a requirement.</p>\n<h2>License</h2>\n<p>The SDK is licensed with the liberal <a href=\"https://www.apache.org/licenses/LICENSE-2.0\" rel=\"nofollow\">Apache 2.0</a> license.</p>\n<h2>Python Versions &amp; DB-API 2.0</h2>\n<p>The module supports Python 3.6\u20133.8.</p>\n<p>The module provides a SQL interface compliant with the DB-API 2.0 specification described by <a href=\"https://www.python.org/dev/peps/pep-0249\" rel=\"nofollow\"><strong>PEP 249</strong></a>.</p>\n<h2>AceQL Server side compatiblity</h2>\n<p>This 3.0.1 SDK version is compatible with AceQL HTTP server side v2.0+. It is not compatible with AceQL HTTP server side v1.0.</p>\n<h2>Installation</h2>\n<p><code>pip install aceql</code></p>\n<h2>Data transport</h2>\n<p>HTTP requests parameters are transported in UTF-8 format and JSON format is used for data and class  transport</p>\n<p>All requests are streamed:</p>\n<ul>\n<li>Output requests (from the client side)  are streamed directly from the socket to the server to avoid buffering any     content body</li>\n<li>Input responses (for the client side)   are streamed directly from the socket to the server to efficiently read     the response body</li>\n</ul>\n<p>Large content (query results, Blobs/Clobs, etc.) is transferred using files. It is never loaded in memory. Streaming techniques are always used to read and write this content.</p>\n<h2>Best practices for fast response time</h2>\n<p>Every HTTP exchange between the client and server side is time-consuming, because the HTTP call is synchronous and waits for the server's response</p>\n<p>Try to avoid coding SQL calls inside loops, as this can reduce execution speed. Each SQL call will send an http request and wait for the response from the server.</p>\n<p>Note that AceQL is optimized as much as possible. A SELECT call returning a huge data volume will not consume memory on the server or client side:  AceQL uses input stream and output stream I/O for data  transfer.</p>\n<p>Server JDBC ResultSet retrieval is as fast as possible :</p>\n<ul>\n<li>\n<p>The ResultSet creation is done once on the server by the executeQuery.</p>\n</li>\n<li>\n<p>The rows are all dumped at once on the servlet output stream by the server</p>\n</li>\n<li>\n<p>The client side gets the ResultSet content as a file.</p>\n</li>\n</ul>\n<p>All data reading commands are executed locally on the client side with forward-only reading.</p>\n<h2>Datatypes</h2>\n<p>The main server side JDBC data types for columns are supported:</p>\n<p><code>Boolean</code>, <code>Blob/Clob</code>, <code>Integer</code>, <code>Short</code>, <code>Double</code>,  <code>Float</code>, <code>BigDecimal</code>, <code>Long</code>, <code>String</code>, <code>Date</code>, <code>Time</code>, and <code>Timestamp</code>.</p>\n<p>Note that the AceQL module does not allow you to specify data types to use; data types are implicitly chosen by the module.</p>\n<p>Parameter values are automatically converted to their SQL equivalent. The following Python types can thus be sent to remote server without any problem:</p>\n<table>\n<thead>\n<tr>\n<th>Python type / class</th>\n<th>SQL type</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Tuple  (None, SqlNullType.&lt;SQL_TYPE&gt;)</td>\n<td>NULL</td>\n</tr>\n<tr>\n<td>str</td>\n<td>CHAR, VARCHAR</td>\n</tr>\n<tr>\n<td>int</td>\n<td>INTEGER, or BIGINT/NUMERIC,  <br>depending on size</td>\n</tr>\n<tr>\n<td>bool</td>\n<td>BIT, BOOL</td>\n</tr>\n<tr>\n<td>float</td>\n<td>REAL</td>\n</tr>\n<tr>\n<td>date</td>\n<td>DATE</td>\n</tr>\n<tr>\n<td>datetime</td>\n<td>TIMESTAMP</td>\n</tr>\n<tr>\n<td>time</td>\n<td>TIME</td>\n</tr>\n<tr>\n<td>File Object</td>\n<td>BLOB</td>\n</tr></tbody></table>\n<p>NULL and BLOB types are explained in Advanced Usage.</p>\n<p>This is how SQL types are converted to Python types by default:</p>\n<table>\n<thead>\n<tr>\n<th>SQL type</th>\n<th>Python type / class</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>NULL</td>\n<td>None</td>\n</tr>\n<tr>\n<td>CHAR, VARCHAR</td>\n<td>str</td>\n</tr>\n<tr>\n<td>TINYINT, INTEGER</td>\n<td>int</td>\n</tr>\n<tr>\n<td>BIGINT, NUMERIC</td>\n<td>Python 2: long <br>Python 3: int</td>\n</tr>\n<tr>\n<td>BOOL, BIT</td>\n<td>bool</td>\n</tr>\n<tr>\n<td>DATE</td>\n<td>date</td>\n</tr>\n<tr>\n<td>TIMESTAMP</td>\n<td>datetime</td>\n</tr>\n<tr>\n<td>TIME</td>\n<td>time</td>\n</tr>\n<tr>\n<td>BLOB</td>\n<td>Response stream</td>\n</tr></tbody></table>\n<h1>Usage</h1>\n<h2>Quickstart</h2>\n<p>To use the module, just create a <code>Connection</code> object that represents the database:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">aceql</span>\n\n<span class=\"c1\"># URL of the AceQL server, Remote SQL database name</span>\n<span class=\"c1\"># &amp; authentication info</span>\n<span class=\"n\">host</span> <span class=\"o\">=</span> <span class=\"s2\">\"https://www.acme.com:9443/aceql\"</span>\n<span class=\"n\">database</span> <span class=\"o\">=</span> <span class=\"s2\">\"sampledb\"</span>\n<span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"s2\">\"user1\"</span>\n<span class=\"n\">password</span> <span class=\"o\">=</span> <span class=\"s2\">\"password1\"</span>\n\n<span class=\"n\">connection</span> <span class=\"o\">=</span> <span class=\"n\">aceql</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"p\">,</span> <span class=\"n\">database</span><span class=\"p\">,</span> <span class=\"n\">username</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"p\">)</span>\n</pre>\n<p>The schema of the database is here:  <a href=\"https://www.aceql.com/rest/soft/5.0.1/src/sampledb_other_databases.txt\" rel=\"nofollow\">sampledb</a></p>\n<p>Once you have a <code>Connection</code>, you can create a <code>Cursor</code> object and call its <code>execute()</code> method to perform SQL commands.</p>\n<p>Following sample shows how to insert 3 new customers using prepared statements:</p>\n<pre><span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"</span>\n<span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">'Sir'</span><span class=\"p\">,</span> <span class=\"s1\">'John'</span><span class=\"p\">,</span> <span class=\"s1\">'Smith I'</span><span class=\"p\">,</span> <span class=\"s1\">'1 Madison Ave'</span><span class=\"p\">,</span> <span class=\"s1\">'New York'</span><span class=\"p\">,</span>\n          <span class=\"s1\">'NY 10010'</span><span class=\"p\">,</span> <span class=\"s1\">'+1 212-586-7001'</span><span class=\"p\">)</span>\n<span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n<span class=\"n\">rows_inserted</span> <span class=\"o\">=</span> <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">rowcount</span>\n\n<span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"</span>\n<span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">'Sir'</span><span class=\"p\">,</span> <span class=\"s1\">'William'</span><span class=\"p\">,</span> <span class=\"s1\">'Smith II'</span><span class=\"p\">,</span> <span class=\"s1\">'1 Madison Ave'</span><span class=\"p\">,</span> <span class=\"s1\">'New York'</span><span class=\"p\">,</span>\n          <span class=\"s1\">'NY 10010'</span><span class=\"p\">,</span> <span class=\"s1\">'+1 212-586-7002'</span><span class=\"p\">)</span>\n<span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n<span class=\"n\">rows_inserted</span> <span class=\"o\">+=</span> <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">rowcount</span>\n\n<span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"</span>\n<span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">'Sir'</span><span class=\"p\">,</span> <span class=\"s1\">'William'</span><span class=\"p\">,</span> <span class=\"s1\">'Smith III'</span><span class=\"p\">,</span> <span class=\"s1\">'1 Madison Ave'</span><span class=\"p\">,</span> <span class=\"s1\">'New York'</span><span class=\"p\">,</span>\n          <span class=\"s1\">'NY 10010'</span><span class=\"p\">,</span> <span class=\"s1\">'+1 212-586-7003'</span><span class=\"p\">)</span>\n<span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n<span class=\"n\">rows_inserted</span> <span class=\"o\">+=</span> <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">rowcount</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"rows inserted: \"</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">rows_inserted</span><span class=\"p\">))</span>\n</pre>\n<p>which returns:</p>\n<pre>rows inserted: <span class=\"m\">3</span>\n</pre>\n<p>The <code>cursor.execute()</code>  sends the SQL order and the parameters to the server who executes it on.</p>\n<p>We view the first inserted customer:</p>\n<pre><span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"select * from customer where customer_id = ?\"</span>\n<span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,)</span>\n<span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n<span class=\"n\">row</span> <span class=\"o\">=</span> <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">fetchone</span><span class=\"p\">()</span>\n<span class=\"nb\">print</span> <span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">)</span>\n</pre>\n<p>which returns:</p>\n<pre><span class=\"o\">(</span><span class=\"m\">1</span>, <span class=\"s1\">'Sir '</span>, <span class=\"s1\">'John'</span>, <span class=\"s1\">'Smith'</span>, <span class=\"s1\">'1 Madison Ave'</span>, <span class=\"s1\">'New York'</span>, <span class=\"s1\">'NY 10010  '</span>, <span class=\"s1\">'+1 212-586-7000'</span><span class=\"o\">)</span>\n</pre>\n<p>The remote result set is downloaded into a file that is read line per line at each <code>Cursor.fetchone()</code> call.</p>\n<p>We have access to the name and type of each column:</p>\n<pre><span class=\"k\">for</span> <span class=\"n\">desc</span> <span class=\"ow\">in</span> <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">description</span><span class=\"p\">:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">desc</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"s2\">\", \"</span> <span class=\"o\">+</span> <span class=\"n\">desc</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">])</span>\n</pre>\n<p>Which returns:</p>\n<pre>customer_id, INTEGER\ncustomer_title, CHAR\nfname, VARCHAR\nlname, VARCHAR\naddressline, VARCHAR\ntown, VARCHAR\nzipcode, CHAR\nphone, VARCHAR\n</pre>\n<p>It's recommended to close the <code>Cursor</code> at end of SELECT usage in order to release  the underlying file stream and delete the associated temp file:</p>\n<pre><span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n</pre>\n<p>We view now all the customers and apply good practice to force the closing of <code>Cursor</code>:</p>\n<pre><span class=\"k\">with</span> <span class=\"n\">closing</span><span class=\"p\">(</span><span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">cursor</span><span class=\"p\">())</span> <span class=\"k\">as</span> <span class=\"n\">cursor</span><span class=\"p\">:</span>\n    <span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"select * from customer where customer_id &gt;= ? order by customer_id\"</span>\n    <span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,)</span>\n    <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"rows: \"</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">rowcount</span><span class=\"p\">))</span>\n\n    <span class=\"n\">rows</span> <span class=\"o\">=</span> <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">fetchall</span><span class=\"p\">()</span>\n\n    <span class=\"k\">for</span> <span class=\"n\">row</span> <span class=\"ow\">in</span> <span class=\"n\">rows</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">)</span>\n</pre>\n<p>Which returns:</p>\n<pre><span class=\"o\">(</span><span class=\"m\">1</span>, <span class=\"s1\">'Sir '</span>, <span class=\"s1\">'John'</span>, <span class=\"s1\">'Smith'</span>, <span class=\"s1\">'1 Madison Ave'</span>, <span class=\"s1\">'New York'</span>, <span class=\"s1\">'NY 10010  '</span>, <span class=\"s1\">'+1 212-586-7001'</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"m\">2</span>, <span class=\"s1\">'Sir '</span>, <span class=\"s1\">'William'</span>, <span class=\"s1\">'Smith II'</span>, <span class=\"s1\">'1 Madison Ave'</span>, <span class=\"s1\">'New York'</span>, <span class=\"s1\">'NY 10010  '</span>, <span class=\"s1\">'+1 212-586-7002'</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"m\">3</span>, <span class=\"s1\">'Sir '</span>, <span class=\"s1\">'William'</span>, <span class=\"s1\">'Smith III'</span>, <span class=\"s1\">'1 Madison Ave'</span>, <span class=\"s1\">'New York'</span>, <span class=\"s1\">'NY 10010  '</span>, <span class=\"s1\">'+1 212-586-7003'</span><span class=\"o\">)</span>\nrows: <span class=\"m\">3</span>\n</pre>\n<p>At end of our session, it is highly recommended to close the <code>Connection</code>:</p>\n<pre><span class=\"c1\"># Make sure connection is always closed in order to close and release</span>\n<span class=\"c1\"># server connection into the pool:</span>\n<span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n</pre>\n<h2>Handling Exceptions</h2>\n<p>Except for <code>TypeError</code>, Exceptions thrown are always an instance of <code>Error</code></p>\n<p>The <code>Error</code> contains 5 pieces of information:</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Info</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">Reason</td>\n<td align=\"left\">The error message. Retrieved with <code>reason</code> property.</td>\n</tr>\n<tr>\n<td align=\"left\">Error Type</td>\n<td align=\"left\">See below for description. Retrieved with <code>error_type</code> property.</td>\n</tr>\n<tr>\n<td align=\"left\">Exception</td>\n<td align=\"left\">The original <code>Exception</code> that is the cause, if any. Retrieved with  <code>cause</code> property.</td>\n</tr>\n<tr>\n<td align=\"left\">Http Status Code</td>\n<td align=\"left\">See below for description. Retrieved with <code>http_status_code</code> property.</td>\n</tr>\n<tr>\n<td align=\"left\">Server Exception</td>\n<td align=\"left\">The Java Exception Stack Trace thrown on server side,  if any. Retrieved with <code>remote_stack_trace</code> property.</td>\n</tr></tbody></table>\n<h3>The error type</h3>\n<p>The error type allows you to get the type of error, and where the error occurred. It is retrieved with the <code>Error.error_type</code> property.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Error Type  Value</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">0</td>\n<td align=\"left\">The error occurred locally on the client side.   See <code>http_status_code</code> property for more info.  Typical cases: no Internet connection, proxy  authentication required.</td>\n</tr>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"left\">The error is due to a JDBC Exception.  It was raised by the remote JDBC Driver and is rerouted  by AceQL as is.  The JDBC error message is accessible via <code>reason</code> property.  Typical case: an error in the SQL statement.  <br>Examples: wrong table or column name.</td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"left\">The error was raised by the AceQL Server.  This means that the AceQL Server expected a value or  parameter that was not sent by the client side.  Typical cases: misspelling in URL parameter, missing  required request parameters,  JDBC  Connection expiration, etc.  The detailed error message is accessible via <code>reason</code> property.  See below for most common AceQL Server error  messages.</td>\n</tr>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"left\">The AceQL Server forbade the execution of the SQL  statement for a security reason.  For security reasons, <code>reason</code> property gives access to voluntarily vague  details.</td>\n</tr>\n<tr>\n<td align=\"center\">4</td>\n<td align=\"left\">The AceQL Server is on failure and raised an  unexpected Java Exception.  The stack track is included and accessible via <code>remote_stack_trace</code> property.</td>\n</tr></tbody></table>\n<h3>Most common AceQL server messages</h3>\n<table>\n<thead>\n<tr>\n<th>AceQL Sever  Error Messages   (Error.error_type  = 2)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AceQL main  servlet not found in path</td>\n</tr>\n<tr>\n<td>An error occurred  during Blob download</td>\n</tr>\n<tr>\n<td>An error occurred  during Blob upload</td>\n</tr>\n<tr>\n<td>Blob directory  defined in DatabaseConfigurator.getBlobDirectory() does not exist</td>\n</tr>\n<tr>\n<td>Connection is  invalidated (probably expired)</td>\n</tr>\n<tr>\n<td>Database does not  exist</td>\n</tr>\n<tr>\n<td>Invalid blob_id.  Cannot be used to create a file</td>\n</tr>\n<tr>\n<td>Invalid blob_id.  No Blob corresponding to blob_id</td>\n</tr>\n<tr>\n<td>Invalid  session_id</td>\n</tr>\n<tr>\n<td>Invalid username  or password</td>\n</tr>\n<tr>\n<td>No action found  in request</td>\n</tr>\n<tr>\n<td>Unable to get a  Connection</td>\n</tr>\n<tr>\n<td>Unknown SQL  action or not supported by software</td>\n</tr></tbody></table>\n<h3>HTTP Status Codes</h3>\n<p>The HTTP Status Code is accessible with the <code>Error.http_status_code</code> property. The HTTP Status Code is 200 (OK) on successful completion calls.</p>\n<p>When an error occurs:</p>\n<ul>\n<li>\n<p>If error type is 0, the HTTP Status Code is returned by the client side and may take all possible values in a malformed HTTP call.</p>\n</li>\n<li>\n<p>If error type is &gt; 0, the HTTP Status Code can take one the following values returned by the server side:</p>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>HTTP  Status Code</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>400  (BAD REQUEST)</td>\n<td>Missing element in URL path<br>Missing request parameters<br>All JDBC errors raised by the remote JDBC  Driver</td>\n</tr>\n<tr>\n<td>401  (UNAUTHORIZED)</td>\n<td>Invalid username or password in connect<br>Invalid session_id<br>The AceQL Server forbade the execution of  the SQL statement for security reasons</td>\n</tr>\n<tr>\n<td>404 (NOT_FOUND)</td>\n<td>BLOB directory does not exist on server<br>BLOB file not found on server</td>\n</tr>\n<tr>\n<td>500  (INTERNAL_SERVER_ERROR)</td>\n<td>The AceQL Server is on failure and raised  an unexpected Java Exception</td>\n</tr></tbody></table>\n<h2>Advanced Usage</h2>\n<h3>Managing NULL values</h3>\n<h4>Setting NULL values</h4>\n<p><code>NULL</code> values are handled in a specific way, because the remote server must know the type of the <code>NULL</code> value.</p>\n<p>To create a <code>NULL</code> value parameter, create a tuple of 2 elements:</p>\n<ul>\n<li>First value is <code>None</code>.</li>\n<li>Second value is a one of the <code>SqlNullType</code> constants that defines the type of the parameter.</li>\n</ul>\n<p>This 2 elements tuple is then inserted in the tuple of the prepared statement parameters:</p>\n<pre><span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"</span>\n<span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"s1\">'Sir'</span><span class=\"p\">,</span> <span class=\"s1\">'William'</span><span class=\"p\">,</span> <span class=\"s1\">'Smith IV'</span><span class=\"p\">,</span> <span class=\"s1\">'1 Madison Ave'</span><span class=\"p\">,</span>\n          <span class=\"s1\">'New York'</span><span class=\"p\">,</span> <span class=\"s1\">'NY 10010'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">SqlNullType</span><span class=\"o\">.</span><span class=\"n\">VARCHAR</span><span class=\"p\">))</span>\n<span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n</pre>\n<h4>Reading NULL values</h4>\n<p>A <code>NULL</code> column value is returned as <code>None</code>:</p>\n<pre><code>sql = \"select * from customer_3 where customer_id = ? order by customer_id\"\nparams = (4,)\ncursor.execute(sql, params)\nrow = cursor.fetchone()\nprint (row)\n</code></pre>\n<p>Execution will return:</p>\n<pre><code>(4, 'Sir ', 'William', 'Smith IV', '1 Madison Ave', 'New York', 'NY 10010  ', None)\n</code></pre>\n<p>In this AceQL module version: there is no difference for string columns between a real NULL in the database and the ''NULL\" string.</p>\n<h3>Transactions</h3>\n<p>Transactions are supported by the module. Because the remote server executes JDBC code, client code must follow the JDBC requirement to set the auto commit mode to false prior executing a transaction.</p>\n<p>This is done with <code>Cursor.set_auto_commit(False)</code>. It is good practice to always reset auto commit mode to true at end of your transactions. Not that it auto commit mode state is undefined when a <code>Connection</code> is created with <code>aceql.connect()</code> call.</p>\n<p>Transaction example:</p>\n<pre><span class=\"c1\"># To do prior transaction</span>\n<span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">set_auto_commit</span><span class=\"p\">(</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n\n<span class=\"n\">cursor</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">cursor</span><span class=\"p\">()</span>\n\n<span class=\"k\">try</span><span class=\"p\">:</span>\n    <span class=\"c1\"># Create a Customer</span>\n    <span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"insert into customer values (?, ?, ?, ?, ?, ?, ?, ?)\"</span>\n    <span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">customer_id</span><span class=\"p\">,</span> <span class=\"s1\">'Sir'</span><span class=\"p\">,</span> <span class=\"s1\">'John'</span><span class=\"p\">,</span> <span class=\"s1\">'Smith'</span><span class=\"p\">,</span> <span class=\"s1\">'1 Madison Ave'</span><span class=\"p\">,</span>\n              <span class=\"s1\">'New York'</span><span class=\"p\">,</span> <span class=\"s1\">'NY 10010'</span><span class=\"p\">,</span> <span class=\"s1\">'+1 212-586-7000'</span><span class=\"p\">)</span>\n    <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># Create an Order for this Customer</span>\n    <span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"insert into orderlog values ( ?, ?, ?, ?, ?, ?, ?, ?, ? )\"</span>\n\n    <span class=\"n\">the_datetime</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span>\n    <span class=\"n\">the_date</span> <span class=\"o\">=</span> <span class=\"n\">the_datetime</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">()</span>\n\n    <span class=\"c1\"># (None, SqlNullType.BLOB) means to set the jpeg_image BLOB</span>\n    <span class=\"c1\"># column to NULL on server:</span>\n    <span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">customer_id</span><span class=\"p\">,</span> <span class=\"n\">item_id</span><span class=\"p\">,</span> <span class=\"s2\">\"Item Description\"</span><span class=\"p\">,</span> <span class=\"mi\">9999</span><span class=\"p\">,</span>\n              <span class=\"n\">the_date</span><span class=\"p\">,</span> <span class=\"n\">the_datetime</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">SqlNullType</span><span class=\"o\">.</span><span class=\"n\">BLOB</span><span class=\"p\">),</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n    <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">commit</span><span class=\"p\">()</span>\n<span class=\"k\">except</span> <span class=\"n\">Error</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">rollback</span><span class=\"p\">()</span>\n    <span class=\"k\">raise</span> <span class=\"n\">e</span>\n<span class=\"k\">finally</span><span class=\"p\">:</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">set_auto_commit</span><span class=\"p\">(</span><span class=\"kc\">True</span><span class=\"p\">)</span> <span class=\"c1\"># Good practice</span>\n    <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n</pre>\n<h3>Proxies</h3>\n<p>The AceQL module support proxies, using  the <a href=\"https://requests.readthedocs.io/en/master/user/advanced/#proxies\" rel=\"nofollow\">proxy</a> syntax of <a href=\"https://requests.readthedocs.io/en/master/\" rel=\"nofollow\">Requests</a> The aceql module uses Requests for HTTP communications with the remote server:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">aceql</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aceql</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"n\">proxies</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"s1\">'http'</span><span class=\"p\">:</span> <span class=\"s1\">'http://10.10.1.10:3128'</span><span class=\"p\">,</span>\n  <span class=\"s1\">'https'</span><span class=\"p\">:</span> <span class=\"s1\">'http://10.10.1.10:1080'</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\"># Create a Connection using a proxy:</span>\n<span class=\"n\">connection</span> <span class=\"o\">=</span> <span class=\"n\">aceql</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"p\">,</span> <span class=\"n\">database</span><span class=\"p\">,</span>\n                           <span class=\"n\">username</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"p\">,</span> <span class=\"n\">proxies</span><span class=\"o\">=</span><span class=\"n\">proxies</span><span class=\"p\">)</span>\n</pre>\n<p>Authenticated proxies are supported.  Just create an <code>aceql.ProxyAuth</code>  instance and pass it to <code>aceql.connect()</code>:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">aceql</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aceql</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"n\">proxies</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"s1\">'http'</span><span class=\"p\">:</span> <span class=\"s1\">'http://10.10.1.10:3128'</span><span class=\"p\">,</span>\n  <span class=\"s1\">'https'</span><span class=\"p\">:</span> <span class=\"s1\">'http://10.10.1.10:1080'</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\"># The proxy authentication info:</span>\n<span class=\"n\">auth</span> <span class=\"o\">=</span> <span class=\"n\">ProxyAuth</span><span class=\"p\">(</span><span class=\"s2\">\"proxyUsername\"</span><span class=\"p\">,</span> <span class=\"s2\">\"proxyPassword\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Create a Connection using an authenticated proxy:</span>\n<span class=\"n\">connection</span> <span class=\"o\">=</span> <span class=\"n\">aceql</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"p\">,</span> <span class=\"n\">database</span><span class=\"p\">,</span>\n                           <span class=\"n\">username</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"p\">,</span>\n                           <span class=\"n\">proxies</span><span class=\"o\">=</span><span class=\"n\">proxies</span><span class=\"p\">,</span> <span class=\"n\">auth</span><span class=\"o\">=</span><span class=\"n\">auth</span><span class=\"p\">)</span>\n</pre>\n<p>The AceQL module uses  <a href=\"https://pypi.python.org/pypi/requests-toolbelt\" rel=\"nofollow\">requests-toolbelt</a>  for authenticated proxy management.</p>\n<h3>Timeouts</h3>\n<p>Use static method <code>Connection.set_timeout(timeout)</code>to define a timeout in seconds</p>\n<p>If no timeout is specified explicitly, requests do not time out. (For more info: timeouts are implemented with <a href=\"https://requests.readthedocs.io/en/master/user/advanced/#timeouts\" rel=\"nofollow\">Requests Timeouts</a>.)</p>\n<h3>BLOB management</h3>\n<p>The AceQL module supports BLOB creation and reading. Methods are implemented using streaming techniques to keep low memory consumption. CLOBs are not supported in this version.</p>\n<h4>BLOB creation</h4>\n<p>BLOB creation is supported by passing a tuple with a File Object as parameter of a prepared statement:</p>\n<pre><span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"insert into orderlog values ( ?, ?, ?, ?, ?, ?, ?, ?, ? )\"</span>\n\n<span class=\"n\">filename</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getcwd</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">sep</span> <span class=\"o\">+</span> <span class=\"s2\">\"item_1_image.png\"</span>\n<span class=\"n\">fd</span> <span class=\"o\">=</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"s2\">\"rb\"</span><span class=\"p\">)</span> <span class=\"c1\"># File will be closed by AceQL</span>\n<span class=\"n\">blob_tuple</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">fd</span><span class=\"p\">,</span> <span class=\"p\">)</span>\n\n<span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s2\">\"Item 1 Description\"</span><span class=\"p\">,</span> <span class=\"mi\">9999</span><span class=\"p\">,</span>\n          <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"p\">,</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">(),</span> <span class=\"n\">blob_tuple</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n</pre>\n<h4>BLOB reading</h4>\n<p>BLOB reading is supported through <code>Cursor.get_blob_stream(column_index</code>). The stream can then be read with a <code>for</code> loop that iterates on the <code>respsonse</code>, using syntax provided by <a href=\"https://requests.readthedocs.io/en/master/user/quickstart/#raw-response-content\" rel=\"nofollow\">Requests</a>:</p>\n<pre><span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"select customer_id, item_id, jpeg_image from orderlog \"</span> \\\n      <span class=\"s2\">\"where customer_id = ? and item_id = ?\"</span>\n<span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n<span class=\"n\">row</span> <span class=\"o\">=</span> <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">fetchone</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># You can get BLOB length if you want to use a progress indicator</span>\n<span class=\"n\">blob_length</span> <span class=\"o\">=</span> <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">get_blob_length</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"blob length: \"</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">blob_length</span><span class=\"p\">))</span>\n\n<span class=\"c1\"># Get the stream to the remote BLOB</span>\n<span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">get_blob_stream</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Download is streamed and writen into filename</span>\n<span class=\"n\">filename</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">expanduser</span><span class=\"p\">(</span><span class=\"s2\">\"~\"</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"n\">sep</span> <span class=\"o\">+</span> <span class=\"s2\">\"jpeg_image.jpg\"</span>\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"s1\">'wb'</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">fd</span><span class=\"p\">:</span>\n    <span class=\"k\">for</span> <span class=\"n\">chunk</span> <span class=\"ow\">in</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">iter_content</span><span class=\"p\">(</span><span class=\"n\">chunk_size</span><span class=\"o\">=</span><span class=\"mi\">2048</span><span class=\"p\">):</span>\n        <span class=\"n\">fd</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">chunk</span><span class=\"p\">)</span>\n\n<span class=\"n\">stat_info</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">stat</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"file length: \"</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">stat_info</span><span class=\"o\">.</span><span class=\"n\">st_size</span><span class=\"p\">))</span>\n</pre>\n<h4>Managing BLOB upload progress</h4>\n<p>You may want to give your users a progress bar when uploading BLOBs.</p>\n<p>The <code>ProgressIndicator.Percent</code> property allows you to get the current percent of upload. Value will be incremented automatically during upload.</p>\n<p>To activate the update mechanism:</p>\n<p>1/ Set the long BLOB length along the File Object in the tuple of the BLOB prepared statement parameter:</p>\n<pre><span class=\"n\">file_length</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">stat</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">st_size</span>\n\n<span class=\"n\">fd</span> <span class=\"o\">=</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"s2\">\"rb\"</span><span class=\"p\">)</span>\n<span class=\"n\">blob_tuple</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">fd</span><span class=\"p\">,</span> <span class=\"n\">file_length</span><span class=\"p\">)</span>\n</pre>\n<p>2/ Create your <code>ProgressIndicator</code> instance and enter it to the <code>Connection</code> instance before the <code>Cursor.execute(sql, params)</code> call :</p>\n<pre><span class=\"n\">progress_indicator</span> <span class=\"o\">=</span> <span class=\"n\">ProgressIndicator</span><span class=\"p\">()</span>\n<span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">set_progress_indicator</span><span class=\"p\">(</span><span class=\"n\">progress_indicator</span><span class=\"p\">)</span>\n</pre>\n<p>You then can read <code>ProgressIndicator.percent</code> property in your watching thread.</p>\n<p>Code sample:</p>\n<pre><span class=\"k\">with</span> <span class=\"n\">closing</span><span class=\"p\">(</span><span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">cursor</span><span class=\"p\">())</span> <span class=\"k\">as</span> <span class=\"n\">cursor</span><span class=\"p\">:</span>\n    <span class=\"n\">filename</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getcwd</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">sep</span> <span class=\"o\">+</span> <span class=\"s2\">\"item_1_image.jpg\"</span>\n    <span class=\"n\">file_length</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">stat</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">st_size</span>\n\n    <span class=\"n\">fd</span> <span class=\"o\">=</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"s2\">\"rb\"</span><span class=\"p\">)</span>\n    <span class=\"n\">blob_tuple</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">fd</span><span class=\"p\">,</span> <span class=\"n\">file_length</span><span class=\"p\">)</span>\n\n    <span class=\"n\">progress_indicator</span> <span class=\"o\">=</span> <span class=\"n\">ProgressIndicator</span><span class=\"p\">()</span>\n    <span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">set_progress_indicator</span><span class=\"p\">(</span><span class=\"n\">progress_indicator</span><span class=\"p\">)</span>\n\n    <span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s2\">\"insert into orderlog values ( ?, ?, ?, ?, ?, ?, ?, ?, ? )\"</span>\n\n    <span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s2\">\"Item 1 Description\"</span><span class=\"p\">,</span> <span class=\"mi\">9999</span><span class=\"p\">,</span>\n              <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"p\">,</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">date</span><span class=\"p\">(),</span>\n              <span class=\"n\">blob_tuple</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n    \n    <span class=\"c1\"># cursor.execute() uploads BLOB by chunks and increments </span>\n    <span class=\"c1\"># ProgressIndicator.percent property</span>\n    <span class=\"n\">cursor</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"p\">)</span>\n</pre>\n<h2>Using the Metadata Query API</h2>\n<p>The metadata API allows:</p>\n<ul>\n<li>downloading a remote database schema\nin HTML or text format,</li>\n<li>to get a remote database main properties,</li>\n<li>to get the list of tables,</li>\n<li>to get the details of each table.</li>\n</ul>\n<p>It also allows wrapping remote tables, columns, indexes, etc. into\neasy to use provided Python classes: Table, Index, Column, etc.</p>\n<p>First step is to get an instance of <code>RemoteDatabaseMetaData</code>:</p>\n<pre><span class=\"n\">remote_database_meta_data</span> <span class=\"o\">=</span> <span class=\"n\">RemoteDatabaseMetaData</span><span class=\"p\">(</span><span class=\"n\">connection</span><span class=\"p\">)</span>\n</pre>\n<h3>Downloading database schema into a file</h3>\n<p>Downloading a schema into a  <code>File</code> is done through the method. See the <code>RemoteDatabaseMetaData</code> documentation:</p>\n<pre><span class=\"n\">filename</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">expanduser</span><span class=\"p\">(</span><span class=\"s2\">\"~\"</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">sep</span> <span class=\"o\">+</span> <span class=\"s2\">\"db_schema.html\"</span>\n<span class=\"n\">remote_database_meta_data</span><span class=\"o\">.</span><span class=\"n\">db_schema_download</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">)</span>\n</pre>\n<p>See an example of the built HTML schema:  <a href=\"https://www.aceql.com/rest/soft/5.0.1/src/db_schema.out.html\" rel=\"nofollow\">db_schema.out.html</a></p>\n<h3>Accessing remote database main properties</h3>\n<p>The <code>JdbcDatabaseMetaData</code> class wraps instance the main value retrieved by a remote server JDBC call to <code>java.sql.Connection.getMetaData()</code>:</p>\n<pre><span class=\"n\">jdbc_meta_data</span> <span class=\"o\">=</span> <span class=\"n\">remote_database_meta_data</span><span class=\"o\">.</span><span class=\"n\">get_jdbc_database_meta_data</span><span class=\"p\">()</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Major Version: \"</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">jdbc_meta_data</span><span class=\"o\">.</span><span class=\"n\">getJDBCMajorVersion</span><span class=\"p\">))</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Minor Version: \"</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">jdbc_meta_data</span><span class=\"o\">.</span><span class=\"n\">getJDBCMinorVersion</span><span class=\"p\">))</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"IsReadOnly   : \"</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">jdbc_meta_data</span><span class=\"o\">.</span><span class=\"n\">isReadOnly</span><span class=\"p\">))</span>\n</pre>\n<h3>Getting Details of Tables and Columns</h3>\n<p>See the <code>RemoteDatabaseMetaData</code> documentation:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Print the column details of each table:\"</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">table_name</span> <span class=\"ow\">in</span> <span class=\"n\">table_names</span><span class=\"p\">:</span>\n    <span class=\"n\">table</span> <span class=\"o\">=</span> <span class=\"n\">remote_database_meta_data</span><span class=\"o\">.</span><span class=\"n\">get_table</span><span class=\"p\">(</span><span class=\"n\">table_name</span><span class=\"p\">)</span>\n\n    <span class=\"nb\">print</span><span class=\"p\">()</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Columns of table: \"</span> <span class=\"o\">+</span> <span class=\"n\">table_name</span><span class=\"p\">)</span>\n    <span class=\"k\">for</span> <span class=\"n\">column</span> <span class=\"ow\">in</span> <span class=\"n\">table</span><span class=\"o\">.</span><span class=\"n\">columns</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">column</span><span class=\"p\">)</span>\n</pre>\n<hr>\n\n          </div>"}, "last_serial": 7062550, "releases": {"1.0.2": [{"comment_text": "", "digests": {"md5": "e98b5aa94b17dbaf86d789e3dfb0bdc2", "sha256": "c7d7b3153f019c685e0290a0a385b5135f099e11e177e44e36a09145790ef2c9"}, "downloads": -1, "filename": "aceql-1.0.2.tar.gz", "has_sig": false, "md5_digest": "e98b5aa94b17dbaf86d789e3dfb0bdc2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23237, "upload_time": "2017-12-29T21:16:15", "upload_time_iso_8601": "2017-12-29T21:16:15.385787Z", "url": "https://files.pythonhosted.org/packages/83/a1/d8314a3bdac17d1f23ada8d955c442e5c4e743444127093d7e7b1bcc957e/aceql-1.0.2.tar.gz", "yanked": false}], "2.0.0": [{"comment_text": "", "digests": {"md5": "64847fc19904e5b8d6ca109ac970d277", "sha256": "d7dc5d1d13cfc88ea5798d1763ff665d48246d9d12ac20ad55bbc958c1bac9f7"}, "downloads": -1, "filename": "aceql-2.0.0.tar.gz", "has_sig": false, "md5_digest": "64847fc19904e5b8d6ca109ac970d277", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24263, "upload_time": "2018-03-07T18:07:35", "upload_time_iso_8601": "2018-03-07T18:07:35.261094Z", "url": "https://files.pythonhosted.org/packages/77/41/665bd7066923cde774d227bf8e65e9507b99b95c57f6a04011c4f6fca709/aceql-2.0.0.tar.gz", "yanked": false}], "2.0.1": [{"comment_text": "", "digests": {"md5": "d14b63b5614b627411c7e4885da53f6e", "sha256": "7f093b67c9e4a0387f75f4f2e2c108feac1a53add37aef7862299c82f7dcc2a7"}, "downloads": -1, "filename": "aceql-2.0.1.tar.gz", "has_sig": false, "md5_digest": "d14b63b5614b627411c7e4885da53f6e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 30644, "upload_time": "2020-01-11T11:27:47", "upload_time_iso_8601": "2020-01-11T11:27:47.738096Z", "url": "https://files.pythonhosted.org/packages/1e/69/3d1a3dafd31dd7805b7b5cd7c8a681a196627490089ec9192432369e240b/aceql-2.0.1.tar.gz", "yanked": false}], "2.0.2": [{"comment_text": "", "digests": {"md5": "6c909cd0101e5ba3235455915c332594", "sha256": "b5a9828b1227ba36cc012e429be38339541f3ffe6964e146b46e6de1017c20d7"}, "downloads": -1, "filename": "aceql-2.0.2.tar.gz", "has_sig": false, "md5_digest": "6c909cd0101e5ba3235455915c332594", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 30731, "upload_time": "2020-01-11T14:29:39", "upload_time_iso_8601": "2020-01-11T14:29:39.285645Z", "url": "https://files.pythonhosted.org/packages/4d/b2/bc66b42416763baa5881357eba79b61d5c9b101c01e31ee1759423ab3b23/aceql-2.0.2.tar.gz", "yanked": false}], "3.0": [{"comment_text": "", "digests": {"md5": "80e830ace66dcc6dd5bb676d2d27daf2", "sha256": "e7bbbcb231cb31c3f720e0ac1467684b90cfe9973431be651483f9df031c43ea"}, "downloads": -1, "filename": "aceql-3.0.tar.gz", "has_sig": false, "md5_digest": "80e830ace66dcc6dd5bb676d2d27daf2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 40143, "upload_time": "2020-04-19T10:34:03", "upload_time_iso_8601": "2020-04-19T10:34:03.273373Z", "url": "https://files.pythonhosted.org/packages/91/f4/7a105f8f66fcc05647ffc1af78e856cb366b2b2c7541d893672616075c40/aceql-3.0.tar.gz", "yanked": false}], "3.0.1": [{"comment_text": "", "digests": {"md5": "3395574b6842d6b2da0aa077cb64dc81", "sha256": "2464532731bc0fd8654a3b37898d2cafb285de954584c236764f7ea7e918b42f"}, "downloads": -1, "filename": "aceql-3.0.1.tar.gz", "has_sig": false, "md5_digest": "3395574b6842d6b2da0aa077cb64dc81", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 50121, "upload_time": "2020-04-20T19:59:48", "upload_time_iso_8601": "2020-04-20T19:59:48.169058Z", "url": "https://files.pythonhosted.org/packages/16/cd/483e3e971d926d020ec5c25827e058be2d4034cd59bcc6ddeeaa9cc53aa4/aceql-3.0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "3395574b6842d6b2da0aa077cb64dc81", "sha256": "2464532731bc0fd8654a3b37898d2cafb285de954584c236764f7ea7e918b42f"}, "downloads": -1, "filename": "aceql-3.0.1.tar.gz", "has_sig": false, "md5_digest": "3395574b6842d6b2da0aa077cb64dc81", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 50121, "upload_time": "2020-04-20T19:59:48", "upload_time_iso_8601": "2020-04-20T19:59:48.169058Z", "url": "https://files.pythonhosted.org/packages/16/cd/483e3e971d926d020ec5c25827e058be2d4034cd59bcc6ddeeaa9cc53aa4/aceql-3.0.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:24:41 2020"}