{"info": {"author": "defrag.works", "author_email": "hello@defrag.works", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Software Development :: Build Tools"], "description": "**estpop** is a Python package providing population forecasting from historical data. This method is based on cohort change ratio[1].\n\n# Sample Code\n\n## Change Ratio\n\n```python\nimport numpy as np\nimport openpyxl\nimport estpop\n\nsheet = openpyxl.load_workbook('data.xlsx').worksheets[0]\n\npops = {}\nfor i in range(1, sheet.max_row):\n    code = sheet.cell(i+1, 3).value\n\n    if not code in pops:\n        pops[code] = []\n\n    males, females = [], []\n    for j in range(29, 50):\n        males.append(sheet.cell(i+1, j).value)\n        females.append(sheet.cell(i+1, j+22).value)\n    pops[code].append([males, females])\n\nratios = {}\nfor k, v in pops.items():\n    change_ratios, baby_ratios, tail_ratios = [], [], []\n    try:\n        for i in range(len(v) - 5):\n            change_ratio, baby_ratio, tail_ratio = estpop.ratios(v[i], v[i+5])\n            change_ratios.append(change_ratio)\n            baby_ratios.append(baby_ratio)\n            tail_ratios.append(tail_ratio)\n\n        ratios[k] = {\n            'change_ratio': np.mean(change_ratios, axis=0).tolist(),\n            'baby_ratio': float(np.mean(baby_ratios)),\n            'tail_ratio': float(np.mean(tail_ratios))\n        }\n    except:\n        pass\n```\n\n## Simulation\n\n```python\nimport openpyxl\nimport estpop\n\nf = open('result.csv', mode='w')\nf.write('code,year\\n')\n\nfor k, v in pops.items():\n    if k in [411, 421, 521]:\n        change_ratio = ratios[0]['change_ratio']\n        baby_ratio = ratios[0]['baby_ratio']\n        tail_ratio = ratios[0]['tail_ratio']\n    else:\n        change_ratio = ratios[k]['change_ratio']\n        baby_ratio = ratios[k]['baby_ratio']\n        tail_ratio = ratios[k]['tail_ratio']\n\n    try:\n        year = 2020\n        estimates = v[5]\n\n        for i in range(7):\n            estimates = estpop.simulate(estimates, change_ratio,\n                                        baby_ratio, tail_ratio)\n            f.write('%s,%s,%s,%s\\n' % (k, year+i*5,\n                                       ','.join(map(str, estimates[0])),\n                                       ','.join(map(str, estimates[1]))))\n    except:\n        print(k)\n\nf.close()\n```\n\n# References\n\n1. Einoshin SUZUKI, Kaoru MORI, Koichi NAGASE, Masatoshi TAMAMURA, Ikuyo KANEKO: The Development of the Future Predictive Model of 'Potentially Disappearing Neighborhood Associations' Using Demographic Data of the Neighborhood Association Base, Journal of the Japan Association of Regional Development and Vitalization, Vol.6, pp.20-30, 2015.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/defragworks/estpop", "keywords": "simulation", "license": "", "maintainer": "", "maintainer_email": "", "name": "estpop", "package_url": "https://pypi.org/project/estpop/", "platform": "", "project_url": "https://pypi.org/project/estpop/", "project_urls": {"Bug Reports": "https://github.com/defragworks/estpop/issues", "Homepage": "https://github.com/defragworks/estpop", "Source": "https://github.com/defragworks/estpop/"}, "release_url": "https://pypi.org/project/estpop/0.0.4/", "requires_dist": ["numpy"], "requires_python": ">=3.5", "summary": "Utility Tools for Population Estimates", "version": "0.0.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><strong>estpop</strong> is a Python package providing population forecasting from historical data. This method is based on cohort change ratio[1].</p>\n<h1>Sample Code</h1>\n<h2>Change Ratio</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"kn\">import</span> <span class=\"nn\">openpyxl</span>\n<span class=\"kn\">import</span> <span class=\"nn\">estpop</span>\n\n<span class=\"n\">sheet</span> <span class=\"o\">=</span> <span class=\"n\">openpyxl</span><span class=\"o\">.</span><span class=\"n\">load_workbook</span><span class=\"p\">(</span><span class=\"s1\">'data.xlsx'</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">worksheets</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n\n<span class=\"n\">pops</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">sheet</span><span class=\"o\">.</span><span class=\"n\">max_row</span><span class=\"p\">):</span>\n    <span class=\"n\">code</span> <span class=\"o\">=</span> <span class=\"n\">sheet</span><span class=\"o\">.</span><span class=\"n\">cell</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">value</span>\n\n    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">code</span> <span class=\"ow\">in</span> <span class=\"n\">pops</span><span class=\"p\">:</span>\n        <span class=\"n\">pops</span><span class=\"p\">[</span><span class=\"n\">code</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n    <span class=\"n\">males</span><span class=\"p\">,</span> <span class=\"n\">females</span> <span class=\"o\">=</span> <span class=\"p\">[],</span> <span class=\"p\">[]</span>\n    <span class=\"k\">for</span> <span class=\"n\">j</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">29</span><span class=\"p\">,</span> <span class=\"mi\">50</span><span class=\"p\">):</span>\n        <span class=\"n\">males</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">sheet</span><span class=\"o\">.</span><span class=\"n\">cell</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">j</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">value</span><span class=\"p\">)</span>\n        <span class=\"n\">females</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">sheet</span><span class=\"o\">.</span><span class=\"n\">cell</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">j</span><span class=\"o\">+</span><span class=\"mi\">22</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">value</span><span class=\"p\">)</span>\n    <span class=\"n\">pops</span><span class=\"p\">[</span><span class=\"n\">code</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">([</span><span class=\"n\">males</span><span class=\"p\">,</span> <span class=\"n\">females</span><span class=\"p\">])</span>\n\n<span class=\"n\">ratios</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n<span class=\"k\">for</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span> <span class=\"ow\">in</span> <span class=\"n\">pops</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n    <span class=\"n\">change_ratios</span><span class=\"p\">,</span> <span class=\"n\">baby_ratios</span><span class=\"p\">,</span> <span class=\"n\">tail_ratios</span> <span class=\"o\">=</span> <span class=\"p\">[],</span> <span class=\"p\">[],</span> <span class=\"p\">[]</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">v</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"mi\">5</span><span class=\"p\">):</span>\n            <span class=\"n\">change_ratio</span><span class=\"p\">,</span> <span class=\"n\">baby_ratio</span><span class=\"p\">,</span> <span class=\"n\">tail_ratio</span> <span class=\"o\">=</span> <span class=\"n\">estpop</span><span class=\"o\">.</span><span class=\"n\">ratios</span><span class=\"p\">(</span><span class=\"n\">v</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">],</span> <span class=\"n\">v</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">5</span><span class=\"p\">])</span>\n            <span class=\"n\">change_ratios</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">change_ratio</span><span class=\"p\">)</span>\n            <span class=\"n\">baby_ratios</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">baby_ratio</span><span class=\"p\">)</span>\n            <span class=\"n\">tail_ratios</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">tail_ratio</span><span class=\"p\">)</span>\n\n        <span class=\"n\">ratios</span><span class=\"p\">[</span><span class=\"n\">k</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'change_ratio'</span><span class=\"p\">:</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">mean</span><span class=\"p\">(</span><span class=\"n\">change_ratios</span><span class=\"p\">,</span> <span class=\"n\">axis</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">tolist</span><span class=\"p\">(),</span>\n            <span class=\"s1\">'baby_ratio'</span><span class=\"p\">:</span> <span class=\"nb\">float</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">mean</span><span class=\"p\">(</span><span class=\"n\">baby_ratios</span><span class=\"p\">)),</span>\n            <span class=\"s1\">'tail_ratio'</span><span class=\"p\">:</span> <span class=\"nb\">float</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">mean</span><span class=\"p\">(</span><span class=\"n\">tail_ratios</span><span class=\"p\">))</span>\n        <span class=\"p\">}</span>\n    <span class=\"k\">except</span><span class=\"p\">:</span>\n        <span class=\"k\">pass</span>\n</pre>\n<h2>Simulation</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">openpyxl</span>\n<span class=\"kn\">import</span> <span class=\"nn\">estpop</span>\n\n<span class=\"n\">f</span> <span class=\"o\">=</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">'result.csv'</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"s1\">'w'</span><span class=\"p\">)</span>\n<span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s1\">'code,year</span><span class=\"se\">\\n</span><span class=\"s1\">'</span><span class=\"p\">)</span>\n\n<span class=\"k\">for</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span> <span class=\"ow\">in</span> <span class=\"n\">pops</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n    <span class=\"k\">if</span> <span class=\"n\">k</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"mi\">411</span><span class=\"p\">,</span> <span class=\"mi\">421</span><span class=\"p\">,</span> <span class=\"mi\">521</span><span class=\"p\">]:</span>\n        <span class=\"n\">change_ratio</span> <span class=\"o\">=</span> <span class=\"n\">ratios</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'change_ratio'</span><span class=\"p\">]</span>\n        <span class=\"n\">baby_ratio</span> <span class=\"o\">=</span> <span class=\"n\">ratios</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'baby_ratio'</span><span class=\"p\">]</span>\n        <span class=\"n\">tail_ratio</span> <span class=\"o\">=</span> <span class=\"n\">ratios</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'tail_ratio'</span><span class=\"p\">]</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"n\">change_ratio</span> <span class=\"o\">=</span> <span class=\"n\">ratios</span><span class=\"p\">[</span><span class=\"n\">k</span><span class=\"p\">][</span><span class=\"s1\">'change_ratio'</span><span class=\"p\">]</span>\n        <span class=\"n\">baby_ratio</span> <span class=\"o\">=</span> <span class=\"n\">ratios</span><span class=\"p\">[</span><span class=\"n\">k</span><span class=\"p\">][</span><span class=\"s1\">'baby_ratio'</span><span class=\"p\">]</span>\n        <span class=\"n\">tail_ratio</span> <span class=\"o\">=</span> <span class=\"n\">ratios</span><span class=\"p\">[</span><span class=\"n\">k</span><span class=\"p\">][</span><span class=\"s1\">'tail_ratio'</span><span class=\"p\">]</span>\n\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"n\">year</span> <span class=\"o\">=</span> <span class=\"mi\">2020</span>\n        <span class=\"n\">estimates</span> <span class=\"o\">=</span> <span class=\"n\">v</span><span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]</span>\n\n        <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">7</span><span class=\"p\">):</span>\n            <span class=\"n\">estimates</span> <span class=\"o\">=</span> <span class=\"n\">estpop</span><span class=\"o\">.</span><span class=\"n\">simulate</span><span class=\"p\">(</span><span class=\"n\">estimates</span><span class=\"p\">,</span> <span class=\"n\">change_ratio</span><span class=\"p\">,</span>\n                                        <span class=\"n\">baby_ratio</span><span class=\"p\">,</span> <span class=\"n\">tail_ratio</span><span class=\"p\">)</span>\n            <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s1\">'</span><span class=\"si\">%s</span><span class=\"s1\">,</span><span class=\"si\">%s</span><span class=\"s1\">,</span><span class=\"si\">%s</span><span class=\"s1\">,</span><span class=\"si\">%s</span><span class=\"se\">\\n</span><span class=\"s1\">'</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">year</span><span class=\"o\">+</span><span class=\"n\">i</span><span class=\"o\">*</span><span class=\"mi\">5</span><span class=\"p\">,</span>\n                                       <span class=\"s1\">','</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"nb\">map</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">estimates</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])),</span>\n                                       <span class=\"s1\">','</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"nb\">map</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">estimates</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]))))</span>\n    <span class=\"k\">except</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">k</span><span class=\"p\">)</span>\n\n<span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n</pre>\n<h1>References</h1>\n<ol>\n<li>Einoshin SUZUKI, Kaoru MORI, Koichi NAGASE, Masatoshi TAMAMURA, Ikuyo KANEKO: The Development of the Future Predictive Model of 'Potentially Disappearing Neighborhood Associations' Using Demographic Data of the Neighborhood Association Base, Journal of the Japan Association of Regional Development and Vitalization, Vol.6, pp.20-30, 2015.</li>\n</ol>\n\n          </div>"}, "last_serial": 7082594, "releases": {"0.0.3": [{"comment_text": "", "digests": {"md5": "209d54d5d0439f21700f607a8e6dbcc8", "sha256": "015fc17e6fa8941ba3827233e25e79a7db699f3ceea660ce32a23f05ffe82f9c"}, "downloads": -1, "filename": "estpop-0.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "209d54d5d0439f21700f607a8e6dbcc8", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 2794, "upload_time": "2020-04-23T06:47:30", "upload_time_iso_8601": "2020-04-23T06:47:30.191601Z", "url": "https://files.pythonhosted.org/packages/4b/53/c884e52a61d378d6282e0f18bb0321371f82c5ed8dcf6810a77a461db045/estpop-0.0.3-py3-none-any.whl", "yanked": false}], "0.0.4": [{"comment_text": "", "digests": {"md5": "537e1d3e4cbe84b0ad2970839c32e640", "sha256": "a6cb7c04fda834eb9efe8d8d9d902772eebe8749fdcab01e8e799fd28fe91d1e"}, "downloads": -1, "filename": "estpop-0.0.4-py3-none-any.whl", "has_sig": false, "md5_digest": "537e1d3e4cbe84b0ad2970839c32e640", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 3715, "upload_time": "2020-04-23T08:12:18", "upload_time_iso_8601": "2020-04-23T08:12:18.269980Z", "url": "https://files.pythonhosted.org/packages/f2/3a/77cb336e8bf1b50d69a60f1168657b7e00065ea6bfee83f8d112923aeda0/estpop-0.0.4-py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "537e1d3e4cbe84b0ad2970839c32e640", "sha256": "a6cb7c04fda834eb9efe8d8d9d902772eebe8749fdcab01e8e799fd28fe91d1e"}, "downloads": -1, "filename": "estpop-0.0.4-py3-none-any.whl", "has_sig": false, "md5_digest": "537e1d3e4cbe84b0ad2970839c32e640", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 3715, "upload_time": "2020-04-23T08:12:18", "upload_time_iso_8601": "2020-04-23T08:12:18.269980Z", "url": "https://files.pythonhosted.org/packages/f2/3a/77cb336e8bf1b50d69a60f1168657b7e00065ea6bfee83f8d112923aeda0/estpop-0.0.4-py3-none-any.whl", "yanked": false}], "timestamp": "Fri May  8 00:45:33 2020"}