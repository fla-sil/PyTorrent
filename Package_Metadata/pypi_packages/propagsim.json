{"info": {"author": "Manuel Capel", "author_email": "manuel.capel@parcoor.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# py-propagsim\n[![license](https://img.shields.io/github/license/DAVFoundation/captain-n3m0.svg?style=flat-square)](https://github.com/DAVFoundation/captain-n3m0/blob/master/LICENSE)\n\nAuthor: Manuel Capel\n\n![CAST geographical time evolution](../master/img/mapevolution.gif?raw=true \"CAST geographical time evolution\")\n\nThis is the implementation in Python of a propagation model that we propose to call *CAST* as *Cell Agent State Transitions*. Its purpose is modeling the propagation of epidemics and the impact of actions to counter it.\n\n[:fr:](https://gist.github.com/Helmasaur/fb8ca2c08131c58341d443b43672a1f5) For French, see this [blog article](https://blog.parcoor.com/2020-04-22-cast-prediction-propagation/)\n\n![CAST contaminations transitions](../master/img/chainevolution.gif?raw=true \"CAST contaminations transitions\")\n\n## Installation\n```\npip install propagsim\n```\n\n## Usage\nSee this [notebook](examples/example0.ipynb) for a (toy) example of an implementation of this model\n\n![CAST state time evolution](../master/img/nevolution.png?raw=true \"CAST state time evolution\")\n\n## Model description\n### Basic objects\nBasically, this model considers three types of object:\n1. **Cell**. A *cell* can contain 0, 1 or many *agent*s at any time. It has also a *position* (Euclidean coordinates on a plan)\n2. **Agent**. An agent has one (and only one) *state* at a given moment, and is also in one (and only one) cell. The *cell* where an *agent* is initially is considered to be its *home_cell*.\n3. **State**. A state has a predefined *severity*, *contagiousity* and *sensitivity*, all in (0, 1)\n\n### Contagion\nA contagion happens within a cell, when it contains several agents at the same time and one of them is contagious.\nWhen an agent has a state with *contagiousity* > 0, then the other agents in the same cell can get infected. \nThe probability of *Agent_A* to contaminate *Agent_B* in *cell* is given by:\n\n<img src=\"https://render.githubusercontent.com/render/math?math=p = contagiousity(state(Agent_A)) \\times sensitivity(state(Agent_B)) \\times unsafety(cell)\">\n\n**NB**: \n* The highest contagiousity in the cell is taken to compute *p*.\n* The *unsafety* of a *cell* measures how a cell is unsafe for contagion (social distancing respected or not inside etc.)\n\n![CAST contamination process](../master/img/contagion.png?raw=true \"CAST contamination process\")\n\nIf *Agent_B* gets infected, it gets to its own state having the least strictly positive *severity* (it can't jump directly to a more severe state).\n\n### State transition\nA *state transition matrix* and *state durations* are attached to each *agent*. The *state transition matrix* is a Markovian matrix describing the transition probabilities between the states an agent can take. The *state durations* are the duration of each state. If a agent is in a given *state*, it will switch to another one sampled according to its *state transition matrix*\n\n**NB**: Different *agent*s can share the same states and the same *state transition matrix* but have different *state durations*, or have have the same *state*, the same *state durations* but a different *state transition matrix*, or etc.\n\n### Moves\nA move consists in moving *agent*s to other cells. When a move is done, all *agent*s are concerned. It happens it two steps:\n1. Selecting *agent*s that will move\n2. moving the selected *agent*s to their new cells\n\n#### Agent selection\nThe probability of an *agent* to be selected for a move is:\n\n<img src=\"https://render.githubusercontent.com/render/math?math=p = proba\\_move(agent) \\times (1 - severity(state(agent)))\">\n\n\nThe first factor represents the mobility of the *agent* so to say. The second factor represents the fact that the more severe the state of an *agent*, the less the probability that it will move.\n\n#### Cell selection\nThe *cell* where to move a selected *agent* is sampled according to a probability\n\n<img src=\"https://render.githubusercontent.com/render/math?math=p \\~ \\frac{attractivity(cell)}{distance(home\\_cell(agent), cell)}\">\n\n![CAST move process](../master/img/move.png?raw=true \"CAST move process\")\n\n**NB**: \n* a limitation of this model is that the attractivity of each *cell* is the same for all *agent*. An extension / refinement of this model would be to have *cell* attractivities personalized by agent.\n* The distance is always computed from the *home_cell* of an agent, not from its *current_cell*. An *agent* is considered wandering around its *home_cell*\n* The *agent*s not selected for a move will be moved to their *home_cell* afterward\n\n### Temporality\nEach time *period* contains move rounds (they don't have to have all the same number of move *rounds*). During each move *round*, *agent*s are selected and moved as described above. Id they are infected, they can infect other agents in the same *cell* than themselves. A time *period* finishes when all agents are simultanously *forwarded*. Each *agent* is actually in a given state, that has a given duration. By a *forward*, the time in this state is incremented by 1. If this time then exceeds the duration of the current state of the agent, the agent moves to the next state according to its *transition* described above.\n\n![CAST temporality](../master/img/temporality.png?raw=true \"CAST temporality\")\n\n## Contributing\nPull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.\n\nPlease make sure to update tests as appropriate.\n\n## License\n[MIT](https://choosealicense.com/licenses/mit/)\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/parcoor/py-propagsim", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "propagsim", "package_url": "https://pypi.org/project/propagsim/", "platform": "", "project_url": "https://pypi.org/project/propagsim/", "project_urls": {"Homepage": "https://github.com/parcoor/py-propagsim"}, "release_url": "https://pypi.org/project/propagsim/0.2/", "requires_dist": null, "requires_python": "", "summary": "Implementation of CAST propagation model", "version": "0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>py-propagsim</h1>\n<p><a href=\"https://github.com/DAVFoundation/captain-n3m0/blob/master/LICENSE\" rel=\"nofollow\"><img alt=\"license\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6d769712e3a8e6b2919f7cca2339a2cc234aa291/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f444156466f756e646174696f6e2f6361707461696e2d6e336d302e7376673f7374796c653d666c61742d737175617265\"></a></p>\n<p>Author: Manuel Capel</p>\n<p><img alt=\"CAST geographical time evolution\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/658935845ebdb51b57552fb18515884f534d5751/2e2e2f6d61737465722f696d672f6d617065766f6c7574696f6e2e6769663f7261773d74727565\"></p>\n<p>This is the implementation in Python of a propagation model that we propose to call <em>CAST</em> as <em>Cell Agent State Transitions</em>. Its purpose is modeling the propagation of epidemics and the impact of actions to counter it.</p>\n<p><a href=\"https://gist.github.com/Helmasaur/fb8ca2c08131c58341d443b43672a1f5\" rel=\"nofollow\">:fr:</a> For French, see this <a href=\"https://blog.parcoor.com/2020-04-22-cast-prediction-propagation/\" rel=\"nofollow\">blog article</a></p>\n<p><img alt=\"CAST contaminations transitions\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7975ca2e41d37badfb739f4663b91076e972026c/2e2e2f6d61737465722f696d672f636861696e65766f6c7574696f6e2e6769663f7261773d74727565\"></p>\n<h2>Installation</h2>\n<pre><code>pip install propagsim\n</code></pre>\n<h2>Usage</h2>\n<p>See this <a href=\"examples/example0.ipynb\" rel=\"nofollow\">notebook</a> for a (toy) example of an implementation of this model</p>\n<p><img alt=\"CAST state time evolution\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/16af1fef4137f8bce36a61ac1457db7da2b91e05/2e2e2f6d61737465722f696d672f6e65766f6c7574696f6e2e706e673f7261773d74727565\"></p>\n<h2>Model description</h2>\n<h3>Basic objects</h3>\n<p>Basically, this model considers three types of object:</p>\n<ol>\n<li><strong>Cell</strong>. A <em>cell</em> can contain 0, 1 or many <em>agent</em>s at any time. It has also a <em>position</em> (Euclidean coordinates on a plan)</li>\n<li><strong>Agent</strong>. An agent has one (and only one) <em>state</em> at a given moment, and is also in one (and only one) cell. The <em>cell</em> where an <em>agent</em> is initially is considered to be its <em>home_cell</em>.</li>\n<li><strong>State</strong>. A state has a predefined <em>severity</em>, <em>contagiousity</em> and <em>sensitivity</em>, all in (0, 1)</li>\n</ol>\n<h3>Contagion</h3>\n<p>A contagion happens within a cell, when it contains several agents at the same time and one of them is contagious.\nWhen an agent has a state with <em>contagiousity</em> &gt; 0, then the other agents in the same cell can get infected.\nThe probability of <em>Agent_A</em> to contaminate <em>Agent_B</em> in <em>cell</em> is given by:</p>\n<img src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2c43422d3060495f158df8b2b91db385c43c5fb2/68747470733a2f2f72656e6465722e67697468756275736572636f6e74656e742e636f6d2f72656e6465722f6d6174683f6d6174683d70203d20636f6e746167696f7573697479287374617465284167656e745f412929205c74696d65732073656e7369746976697479287374617465284167656e745f422929205c74696d657320756e7361666574792863656c6c29\">\n<p><strong>NB</strong>:</p>\n<ul>\n<li>The highest contagiousity in the cell is taken to compute <em>p</em>.</li>\n<li>The <em>unsafety</em> of a <em>cell</em> measures how a cell is unsafe for contagion (social distancing respected or not inside etc.)</li>\n</ul>\n<p><img alt=\"CAST contamination process\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/81b8f93b6f9309a013565f171470416adbb3349a/2e2e2f6d61737465722f696d672f636f6e746167696f6e2e706e673f7261773d74727565\"></p>\n<p>If <em>Agent_B</em> gets infected, it gets to its own state having the least strictly positive <em>severity</em> (it can't jump directly to a more severe state).</p>\n<h3>State transition</h3>\n<p>A <em>state transition matrix</em> and <em>state durations</em> are attached to each <em>agent</em>. The <em>state transition matrix</em> is a Markovian matrix describing the transition probabilities between the states an agent can take. The <em>state durations</em> are the duration of each state. If a agent is in a given <em>state</em>, it will switch to another one sampled according to its <em>state transition matrix</em></p>\n<p><strong>NB</strong>: Different <em>agent</em>s can share the same states and the same <em>state transition matrix</em> but have different <em>state durations</em>, or have have the same <em>state</em>, the same <em>state durations</em> but a different <em>state transition matrix</em>, or etc.</p>\n<h3>Moves</h3>\n<p>A move consists in moving <em>agent</em>s to other cells. When a move is done, all <em>agent</em>s are concerned. It happens it two steps:</p>\n<ol>\n<li>Selecting <em>agent</em>s that will move</li>\n<li>moving the selected <em>agent</em>s to their new cells</li>\n</ol>\n<h4>Agent selection</h4>\n<p>The probability of an <em>agent</em> to be selected for a move is:</p>\n<img src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6c0ad0b559d59a91276850955297fc313eba8a2c/68747470733a2f2f72656e6465722e67697468756275736572636f6e74656e742e636f6d2f72656e6465722f6d6174683f6d6174683d70203d2070726f62615c5f6d6f7665286167656e7429205c74696d6573202831202d207365766572697479287374617465286167656e74292929\">\n<p>The first factor represents the mobility of the <em>agent</em> so to say. The second factor represents the fact that the more severe the state of an <em>agent</em>, the less the probability that it will move.</p>\n<h4>Cell selection</h4>\n<p>The <em>cell</em> where to move a selected <em>agent</em> is sampled according to a probability</p>\n<img src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/97ae4e6cef915ff7de3b925269559b5a0a65124c/68747470733a2f2f72656e6465722e67697468756275736572636f6e74656e742e636f6d2f72656e6465722f6d6174683f6d6174683d70205c7e205c667261637b6174747261637469766974792863656c6c297d7b64697374616e636528686f6d655c5f63656c6c286167656e74292c2063656c6c297d\">\n<p><img alt=\"CAST move process\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a4f0efc58e02ef2b855d2a0a23ba7f4ce645bc58/2e2e2f6d61737465722f696d672f6d6f76652e706e673f7261773d74727565\"></p>\n<p><strong>NB</strong>:</p>\n<ul>\n<li>a limitation of this model is that the attractivity of each <em>cell</em> is the same for all <em>agent</em>. An extension / refinement of this model would be to have <em>cell</em> attractivities personalized by agent.</li>\n<li>The distance is always computed from the <em>home_cell</em> of an agent, not from its <em>current_cell</em>. An <em>agent</em> is considered wandering around its <em>home_cell</em></li>\n<li>The <em>agent</em>s not selected for a move will be moved to their <em>home_cell</em> afterward</li>\n</ul>\n<h3>Temporality</h3>\n<p>Each time <em>period</em> contains move rounds (they don't have to have all the same number of move <em>rounds</em>). During each move <em>round</em>, <em>agent</em>s are selected and moved as described above. Id they are infected, they can infect other agents in the same <em>cell</em> than themselves. A time <em>period</em> finishes when all agents are simultanously <em>forwarded</em>. Each <em>agent</em> is actually in a given state, that has a given duration. By a <em>forward</em>, the time in this state is incremented by 1. If this time then exceeds the duration of the current state of the agent, the agent moves to the next state according to its <em>transition</em> described above.</p>\n<p><img alt=\"CAST temporality\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ae247b91c5f3ca2ef8515bd1c5b43d8fa6c2562f/2e2e2f6d61737465722f696d672f74656d706f72616c6974792e706e673f7261773d74727565\"></p>\n<h2>Contributing</h2>\n<p>Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.</p>\n<p>Please make sure to update tests as appropriate.</p>\n<h2>License</h2>\n<p><a href=\"https://choosealicense.com/licenses/mit/\" rel=\"nofollow\">MIT</a></p>\n\n          </div>"}, "last_serial": 7101357, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "5f3b2edee92dc67a0c8692f8e974ffa1", "sha256": "030ade4d216a769dd10952e43e71291e1e10ee4710ccd45c3090d2fd8a42952b"}, "downloads": -1, "filename": "propagsim-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "5f3b2edee92dc67a0c8692f8e974ffa1", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9237, "upload_time": "2020-04-25T20:56:32", "upload_time_iso_8601": "2020-04-25T20:56:32.344033Z", "url": "https://files.pythonhosted.org/packages/2e/c3/ce6372b26cfca6f3db8796818b66e3aa283210d1a34580984e877dcf3fdc/propagsim-0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "a4068e1477cc7a26d130222ecb10474d", "sha256": "462d7e4012a091175bf2e47649afe24fa3b43d3bd582929627fdb4eddebc9c16"}, "downloads": -1, "filename": "propagsim-0.1.tar.gz", "has_sig": false, "md5_digest": "a4068e1477cc7a26d130222ecb10474d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 37132111, "upload_time": "2020-04-25T20:57:12", "upload_time_iso_8601": "2020-04-25T20:57:12.646691Z", "url": "https://files.pythonhosted.org/packages/74/14/8ee7a8d8f6cd5cefe9f7285ce1169270f9805a8db064deab1b9d20a9a392/propagsim-0.1.tar.gz", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "c31ab476f84859676ef061790f93a262", "sha256": "ff8ebd56f705fdfe6646cc934927974bf6ccf9184ae6f69106191d6c68ffb0d9"}, "downloads": -1, "filename": "propagsim-0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "c31ab476f84859676ef061790f93a262", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9267, "upload_time": "2020-04-25T21:32:43", "upload_time_iso_8601": "2020-04-25T21:32:43.339274Z", "url": "https://files.pythonhosted.org/packages/49/48/75e005f20f4c6afff95b13e014b464837c0abd7c2b004093b92fcdbf333d/propagsim-0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "75fc03984f2eb32202cc498e4cdd9e03", "sha256": "dda5db99dce72710f9ccbd27d7283d57fbdf2fc15c23e5ea5744b8586a559325"}, "downloads": -1, "filename": "propagsim-0.2.tar.gz", "has_sig": false, "md5_digest": "75fc03984f2eb32202cc498e4cdd9e03", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 37379411, "upload_time": "2020-04-25T21:33:04", "upload_time_iso_8601": "2020-04-25T21:33:04.276363Z", "url": "https://files.pythonhosted.org/packages/cd/f0/b0e7b2e172d641521af1ee9d02caaeae69a904389e2396d1ca8957d6f479/propagsim-0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "c31ab476f84859676ef061790f93a262", "sha256": "ff8ebd56f705fdfe6646cc934927974bf6ccf9184ae6f69106191d6c68ffb0d9"}, "downloads": -1, "filename": "propagsim-0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "c31ab476f84859676ef061790f93a262", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9267, "upload_time": "2020-04-25T21:32:43", "upload_time_iso_8601": "2020-04-25T21:32:43.339274Z", "url": "https://files.pythonhosted.org/packages/49/48/75e005f20f4c6afff95b13e014b464837c0abd7c2b004093b92fcdbf333d/propagsim-0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "75fc03984f2eb32202cc498e4cdd9e03", "sha256": "dda5db99dce72710f9ccbd27d7283d57fbdf2fc15c23e5ea5744b8586a559325"}, "downloads": -1, "filename": "propagsim-0.2.tar.gz", "has_sig": false, "md5_digest": "75fc03984f2eb32202cc498e4cdd9e03", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 37379411, "upload_time": "2020-04-25T21:33:04", "upload_time_iso_8601": "2020-04-25T21:33:04.276363Z", "url": "https://files.pythonhosted.org/packages/cd/f0/b0e7b2e172d641521af1ee9d02caaeae69a904389e2396d1ca8957d6f479/propagsim-0.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:17:00 2020"}