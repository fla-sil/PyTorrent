{"info": {"author": "Lichangsong&TianYang", "author_email": "lics@nscc-tj.cn", "bugtrack_url": null, "classifiers": ["Framework :: Django", "Framework :: Django :: 2.0", "Framework :: Django :: 3.0", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Internet :: WWW/HTTP", "Topic :: Internet :: WWW/HTTP :: Dynamic Content"], "description": "=========\nthStorage\n=========\n\nthStorage is a simple app to connect to th clusters' storage system\n\ndetail documentation is in the \"docs\" directory\n\nQuick start\n\n-----------\n\n1. Install based pubgins [django restframework;requests] like this::\n\n   'pip install djangorestframework==3.11.0'\n   'pip install requests'\n\n2. Add \"rest_framework\" and \"thStorage\" to your INSTALLED_APPS setting like this::\n\n    INSTALL_APPS = [\n        ...\n        'thStorage',\n        'rest_framework',\n    ]\n\n3. Include the thStorage URLconf in your project urls.py like this::\n\n    from thStorage import urls as thStorageUrls\n    urlpatterns = [\n        path('admin/', admin.site.urls),\n        path('login/', main.login),\n    ] + thStorageUrls.urlpatterns\n\n4. Run `python manage.py migrate` to create thStorage models\n\n5. Run `python manage.py collectstatic` to migrate thStorage statics\n\n6. Set django project settings like::\n\n    REST_FRAMEWORK = {\n        'DEFAULT_AUTHENTICATION_CLASSES': (\n            'rest_framework.authentication.TokenAuthentication',\n        )\n    } # restful api csrftoken!!!!!!\n\n    X_FRAME_OPTIONS = 'ALLOWALL' # (or your host name)\n    STATIC_URL = '/static/'\n    STATIC_ROOT = os.path.join(BASE_DIR,\"static\").replace(\"\\\\\",\"/\")\n    TH_STORAGE_CONFIG = {\n        'TOKEN_UPDATE_IMTERVAL': 36000000,\n        'STORAGE_BACKEND_HOST':'thstorage backend server',\n        'STORAGE_BACKEND_APPID':'your thstorage appid',\n        'STORAGE_BACKEND_APPKEY':'your thstorage appkey',\n    }\n\n7. Login thstorage when your project's user login like this::\n\n    from thStorage.models import THStorageUser\n    ...\n    systemUsername = user.username  # systemUsername is tianhe system (in nscc-tj) username, and username is your project username\n    cluster = \"TH-HPC1\" # cluster is tianhe system cluster name\n    thStorageUser = THStorageUser(username,cluster,systemUsername)\n    thStorageUser.Login()\n\n8. Set LocalStorage in login redirect page like this::\n\n    from thStorage.thstorage import THStorageUser\n    ...\n    username = request.user.username\n    systemUsername = request.session.get(\"systemUsername\",\"\")\n    cluster = request.session.get(\"cluster\",\"\")\n    thStorageUser = THStorageUser(username, cluster, systemUsername)\n    t, u, c, s = thStorageUser.Login()\n    thst = {\"token\": t, \"username\": s, \"cluster\": c,\"platform\":\"default\"}\n    return render(request, 'index.html', {\"thst\":thst})\n\n    edit index.html\n    <script>\n        var platform = \"{{thst.platform}}\";\n        var username = \"{{thst.username}}\";\n        var cluster = \"{{thst.cluster}}\";\n        var token = \"{{thst.token}}\";\n        localStorage.setItem(\"platform\", platform);\n        localStorage.setItem(\"username\", username);\n        localStorage.setItem(\"cluster\", cluster);\n        localStorage.setItem(\"token\", token);\n    </script>\n\n9. Add url \"/thStorage\" to your storage page by iframe::\n\n    <body>\n        <div> your html elements </div>\n        <div>\n            <iframe id=\"myiframe\" src=\"/thstorage\" frameborder=\"0\" width=\"100%\" height=\"100%\"></iframe>\n        </div>\n    </body>\n    <script>\n        var ifm= document.getElementById(\"myiframe\"); //or set as your div element's height\n        ifm.height=document.documentElement.clientHeight;\n    </script>\n\n10. Add thStorage's NetDiskUser to admin::\n\n    from thStorage.models import NetDiskUser\n    # Register your models here.\n    admin.site.register(NetDiskUser)\n\n11. Test thStorage::\n    Run `python manage.py createsuperuser`\n    add a admin user\n    add a test user to thStorage's NetDiskUser by admin (user must map to real th systemuser)\n\n12. Start the development server and visit http://127.0.0.1:8000/yourLoginUrl then login and enjoy it!", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://www.nscc-tj.cn", "keywords": "", "license": "BSD License", "maintainer": "", "maintainer_email": "", "name": "django-thStorage", "package_url": "https://pypi.org/project/django-thStorage/", "platform": "", "project_url": "https://pypi.org/project/django-thStorage/", "project_urls": {"Homepage": "https://www.nscc-tj.cn"}, "release_url": "https://pypi.org/project/django-thStorage/0.1.4/", "requires_dist": null, "requires_python": "", "summary": "A simple django app to connect to thStroage,", "version": "0.1.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>=========\nthStorage</h1>\n<p>thStorage is a simple app to connect to th clusters' storage system</p>\n<p>detail documentation is in the \"docs\" directory</p>\n<p>Quick start</p>\n<hr>\n<ol>\n<li>\n<p>Install based pubgins [django restframework;requests] like this::</p>\n<p>'pip install djangorestframework==3.11.0'\n'pip install requests'</p>\n</li>\n<li>\n<p>Add \"rest_framework\" and \"thStorage\" to your INSTALLED_APPS setting like this::</p>\n<p>INSTALL_APPS = [\n...\n'thStorage',\n'rest_framework',\n]</p>\n</li>\n<li>\n<p>Include the thStorage URLconf in your project urls.py like this::</p>\n<p>from thStorage import urls as thStorageUrls\nurlpatterns = [\npath('admin/', admin.site.urls),\npath('login/', main.login),\n] + thStorageUrls.urlpatterns</p>\n</li>\n<li>\n<p>Run <code>python manage.py migrate</code> to create thStorage models</p>\n</li>\n<li>\n<p>Run <code>python manage.py collectstatic</code> to migrate thStorage statics</p>\n</li>\n<li>\n<p>Set django project settings like::</p>\n<p>REST_FRAMEWORK = {\n'DEFAULT_AUTHENTICATION_CLASSES': (\n'rest_framework.authentication.TokenAuthentication',\n)\n} # restful api csrftoken!!!!!!</p>\n<p>X_FRAME_OPTIONS = 'ALLOWALL' # (or your host name)\nSTATIC_URL = '/static/'\nSTATIC_ROOT = os.path.join(BASE_DIR,\"static\").replace(\"\\\",\"/\")\nTH_STORAGE_CONFIG = {\n'TOKEN_UPDATE_IMTERVAL': 36000000,\n'STORAGE_BACKEND_HOST':'thstorage backend server',\n'STORAGE_BACKEND_APPID':'your thstorage appid',\n'STORAGE_BACKEND_APPKEY':'your thstorage appkey',\n}</p>\n</li>\n<li>\n<p>Login thstorage when your project's user login like this::</p>\n<p>from thStorage.models import THStorageUser\n...\nsystemUsername = user.username  # systemUsername is tianhe system (in nscc-tj) username, and username is your project username\ncluster = \"TH-HPC1\" # cluster is tianhe system cluster name\nthStorageUser = THStorageUser(username,cluster,systemUsername)\nthStorageUser.Login()</p>\n</li>\n<li>\n<p>Set LocalStorage in login redirect page like this::</p>\n<p>from thStorage.thstorage import THStorageUser\n...\nusername = request.user.username\nsystemUsername = request.session.get(\"systemUsername\",\"\")\ncluster = request.session.get(\"cluster\",\"\")\nthStorageUser = THStorageUser(username, cluster, systemUsername)\nt, u, c, s = thStorageUser.Login()\nthst = {\"token\": t, \"username\": s, \"cluster\": c,\"platform\":\"default\"}\nreturn render(request, 'index.html', {\"thst\":thst})</p>\n<p>edit index.html</p>\n &lt;script&gt;\n     var platform = \"{{thst.platform}}\";\n     var username = \"{{thst.username}}\";\n     var cluster = \"{{thst.cluster}}\";\n     var token = \"{{thst.token}}\";\n     localStorage.setItem(\"platform\", platform);\n     localStorage.setItem(\"username\", username);\n     localStorage.setItem(\"cluster\", cluster);\n     localStorage.setItem(\"token\", token);\n &lt;/script&gt;\n</li>\n<li>\n<p>Add url \"/thStorage\" to your storage page by iframe::</p>\n &lt;body&gt;\n     <div> your html elements </div>\n     <div>\n         &lt;iframe id=\"myiframe\" src=\"/thstorage\" frameborder=\"0\" width=\"100%\" height=\"100%\"&gt;&lt;/iframe&gt;\n     </div>\n &lt;/body&gt;\n &lt;script&gt;\n     var ifm= document.getElementById(\"myiframe\"); //or set as your div element's height\n     ifm.height=document.documentElement.clientHeight;\n &lt;/script&gt;\n</li>\n<li>\n<p>Add thStorage's NetDiskUser to admin::</p>\n<p>from thStorage.models import NetDiskUser</p>\n<h1>Register your models here.</h1>\n<p>admin.site.register(NetDiskUser)</p>\n</li>\n<li>\n<p>Test thStorage::\nRun <code>python manage.py createsuperuser</code>\nadd a admin user\nadd a test user to thStorage's NetDiskUser by admin (user must map to real th systemuser)</p>\n</li>\n<li>\n<p>Start the development server and visit <a href=\"http://127.0.0.1:8000/yourLoginUrl\" rel=\"nofollow\">http://127.0.0.1:8000/yourLoginUrl</a> then login and enjoy it!</p>\n</li>\n</ol>\n\n          </div>"}, "last_serial": 7064944, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "6c8e6ce2170b256ea4a190c60a5e9dda", "sha256": "035073aa68c2d36cf9f2d491cc7b5aae03c45844d6b63b24da23b4e5f4b13d90"}, "downloads": -1, "filename": "django-thStorage-0.1.tar.gz", "has_sig": false, "md5_digest": "6c8e6ce2170b256ea4a190c60a5e9dda", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 379255, "upload_time": "2019-12-17T09:58:57", "upload_time_iso_8601": "2019-12-17T09:58:57.054430Z", "url": "https://files.pythonhosted.org/packages/4d/93/8fc4b2bb1f89a0920964c54f72c0317cd2a99eb4e44197709659c8323690/django-thStorage-0.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "48c429c5bf80072dcd87df5e21499462", "sha256": "6ed63d6982ada7983a0f56c7dee0733817c5b194043c506c5eda302c6522bb2b"}, "downloads": -1, "filename": "django-thStorage-0.1.2.tar.gz", "has_sig": false, "md5_digest": "48c429c5bf80072dcd87df5e21499462", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 379749, "upload_time": "2019-12-18T03:45:00", "upload_time_iso_8601": "2019-12-18T03:45:00.814779Z", "url": "https://files.pythonhosted.org/packages/7d/06/a1441f0d87474ee2e969688bc95f2e55305e9f1b73c831a44e652c2ed8fe/django-thStorage-0.1.2.tar.gz", "yanked": false}], "0.1.4": [{"comment_text": "", "digests": {"md5": "97a240c171e182bc5369f683f255a31b", "sha256": "8f9c5ff2afdd39abaa639169e7c8ae2e5b92bd2905cc40705c2608a3c20d8428"}, "downloads": -1, "filename": "django-thStorage-0.1.4.tar.gz", "has_sig": false, "md5_digest": "97a240c171e182bc5369f683f255a31b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 638931, "upload_time": "2020-04-21T03:18:57", "upload_time_iso_8601": "2020-04-21T03:18:57.012791Z", "url": "https://files.pythonhosted.org/packages/96/4a/a4953b66056783a165f5532f1dcc9e83099a9c414ae9b139d28dec8056d9/django-thStorage-0.1.4.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "97a240c171e182bc5369f683f255a31b", "sha256": "8f9c5ff2afdd39abaa639169e7c8ae2e5b92bd2905cc40705c2608a3c20d8428"}, "downloads": -1, "filename": "django-thStorage-0.1.4.tar.gz", "has_sig": false, "md5_digest": "97a240c171e182bc5369f683f255a31b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 638931, "upload_time": "2020-04-21T03:18:57", "upload_time_iso_8601": "2020-04-21T03:18:57.012791Z", "url": "https://files.pythonhosted.org/packages/96/4a/a4953b66056783a165f5532f1dcc9e83099a9c414ae9b139d28dec8056d9/django-thStorage-0.1.4.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:52:29 2020"}