{"info": {"author": "Benjamin Le Forestier", "author_email": "benjamin@leforestier.org", "bugtrack_url": null, "classifiers": ["Environment :: Other Environment", "Environment :: Web Environment", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.6", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Topic :: Internet :: WWW/HTTP", "Topic :: Internet :: WWW/HTTP :: Dynamic Content", "Topic :: Software Development :: Libraries :: Python Modules"], "description": ".. image:: https://travis-ci.org/leforestier/naval.svg\n    :target: https://travis-ci.org/leforestier/naval\n\n-----------------------------\nNaval is a validation library\n-----------------------------\n\nUsing *Naval*, you can define schemas to validate or transform python dictionaries or other objects.\n*Naval* provides you with error messages in multiple languages. You can use it to validate JSON documents.\n\n*Naval* offers a very flexible and readable way to transform python dictionaries, which makes it a valuable \ntool when implementing RESTful apis.\n\nYou could also use *Naval* to validate HTML forms.\n\n`table of contents`_\n\n---------------\nExamples of use\n---------------\n\nSimple validation\n=================\n\n.. code:: python\n\n    >>> from naval import *\n    >>> address_schema = Schema(\n            ['house number', Type(int), Range(1, 10000)],\n            ['street', Type(str), Length(min=5, max=255)],\n            ['zipcode', Type(str), Regex('\\d{4,5}')],\n            ['country', ('France', 'Germany', 'Spain')]\n        )\n\n    >>> address_schema.validate({\n            'house number': 12000,\n            'street': 'tapioca boulevard',\n            'country': 'Federal Kingdom of Portulombia'\n        })\n    ...\n    ValidationError: {'house number': 'The maximum is 10000.', 'zipcode': 'Field is missing.', 'country': 'Incorrect value.'}\n\n    >>> address_schema.validate({\n            'house number': 17,\n            'street': 'rambla del Raval',\n            'zipcode': '08001',\n            'country': 'Spain'\n        })\n    {'country': 'Spain',\n     'house number': 17,\n     'street': 'rambla del Raval',\n     'zipcode': '08001'}\n\nValidation and transformation\n=============================\n\n.. code:: python\n\n    >>> from naval import *\n    >>> from passlib.hash import bcrypt # we're going to use the passlib library to encrypt passwords\n\n    >>> registration_form = Schema(    \n            ['username', Type(str), Length(min=3, max=16)],\n            ['password', Type(str)],\n            ['password2'],\n            [\n                Assert(\n                    (lambda d: d['password'] == d['password2']),\n                    error_message = \"Passwords don't match\"\n                )\n            ],\n            ['password', lambda s: s.encode('utf-8'), bcrypt.encrypt, Save],\n            ['password2', Delete],\n            ['email', Email]\n        )\n\n    >>> registration_form.validate({\n            'email': 'the-king@example.com',\n            'username': 'TheKing',\n            'password': 'hackme',\n            'password2': 'hackme'\n        })\n    {'email': 'the-king@example.com',\n     'password': '$2a$12$JT2UlXP0REt3EX7kGIFGV.5uKPQJL4phDRpfcplW91sJAyB8RuKwm',\n     'username': 'TheKing'}\n\n    >>> registration_form.validate({\n            'username': 'TheKing',\n            'email': '@@@@@@@@@@',\n            'password': 'hackme',\n            'password2': 'saltme'\n        })\n    ...\n    ValidationError: {'email': 'This is not a valid email address.', '*': \"Passwords don't match\"}\n\nComposing schemas\n=================\n\nSchemas can be reused to build bigger schemas.\n\n.. code:: python\n\n    >>> from naval import *\n\n    >>> editor_schema = Schema(\n            ['name', Type(str)],\n            ['website', Optional, Url]\n        )\n        \n    >>> book_schema = Schema(\n            ['title', Type(str)],\n            ['author', Type(str), Length(max=200)],\n            ['isbn13', Type(str), Length(13,13), Regex('\\d+')],\n            ['editor', editor_schema]\n        )\n\n    >>> book_schema.validate({\n            'title': 'Lose weight by eating pancakes',\n            'author': 'John Greedyquack',\n            'isbn13': '1234567890123',\n            'editor': {\n                'name': 'Flawed Books',\n                'website': 'http://#'\n            }\n        })\n    ...\n    ValidationError: {'editor': {'website': 'This is not a valid url.'}}\n\n\nInternationalization\n====================\n\nSupply a ``lang`` keyword argument to the ``validate`` method to obtain translated error messages.\n\n.. code:: python\n\n    >>> editor_schema.validate({ 'website': 'http://#' }, lang = 'fr')\n    ...\n    ValidationError: {'name': 'Champ manquant.', 'website': \"Ce n'est pas une url valide.\"}\n\n\n-------\nFilters\n-------\n\nFilters are used to validate or transform python objects. Filters are instances of the many subclasses of ``naval.Filter``.\nA filter's ``validate`` method takes a value to examine, and either returns it (or a modified version of it), or it raises a\n``ValidationError`` exception. You can catch this exception like this:\n\n.. code:: python \n\n        try:\n            potentially_modified_version = my_filter.validate(obj)\n        except ValidationError as exc:\n            print(exc.error_details)\n\nThe ``ValidationError`` instance has a ``error_details`` attribute, that contains, well, details about the error.\nFor elementary filters, ``exc.error_details`` is just a string describing the error. \nFor the ``Schema`` filter (used to validate python dictionaries), ``exc.error_details`` is a dictionary \n(each key of this dictionary contains details about the errors generated by a particular item).\n\nIt's always possible to supply custom error messages when constructing a filter.\n\n\nElementary filters\n==================\n\nRange\n-----\n\n.. code:: python\n\n    >>> Range(5, 10).validate(7)\n    7\n\n    >>> Range(5, 10).validate(-16)\n    ...\n    ValidationError: The minimum is 5.\n\nLength\n------\n\n.. code:: python\n\n    >>> Length(max=3).validate(['one', 'two', 'three'])\n    ['one', 'two', 'three']\n\n    >>> Length(max=3).validate(['one', 'two', 'three', 'four'])\n    ValidationError: The value is too long. Max length is 3.\n\n    # customizing the error message\n    >>> Length(max=3, too_long_error=\"Please, no more than {max_length} items\").validate(\n            ['one', 'two', 'three', 'four']\n        )\n    ...\n    ValidationError: Please, no more than 3 items\n\nType\n----\n\n.. code:: python\n\n    >>> Type(int, float).validate(3.14)\n    3.14\n\nBy default, the type must match exactly.\nUse ``subclasses = True`` to allow for subclasses.\n\n.. code:: python\n\n    >>> from collections import OrderedDict\n\n    >>> Type(dict).validate(OrderedDict([('a', 1), ('b', 2)]))\n    ...\n    ValidationError: Wrong type. Expected dict. Got OrderedDict instead.\n    \n    >>> Type(dict, subclasses = True).validate(OrderedDict([('a', 1), ('b', 2)]))\n    OrderedDict([('a', 1), ('b', 2)])\n\nRegex\n-----\n\n    The pattern must match exactly, from the beginning to the end of the string.\n\n.. code:: python\n\n    >>> Regex('[A-Za-z][-_A-Za-z0-9]+').validate('TheKing!!!')\n    ...\n    ValidationError: Incorrect value.\n\n    >>> Regex('[A-Za-z][-_A-Za-z0-9]+').validate('TheKing')\n    'TheKing'\n\nEmail\n-----\n\nEmail validator.\n\nInternally, this filter uses the email validation function from the *validators* library: https://github.com/kvesteri/validators\n\n.. code:: python\n\n    >>> Email.validate('email@example.com')\n    'email@example.com'\n\n.. code:: python\n\n    >>> Email.validate('user@92.80.0.1')\n    ...\n    ValidationError: This is not a valid email address.\n\nUrl\n---\n\nUrl validator.\nThe regex used to validate urls was borrowed from the Spoon php library: http://spoon-library.be\n\n.. code:: python\n\n    >>> Url.validate('http://www.example.com/v1/?sort=asc')\n    'http://www.example.com/v1/?sort=asc'\n\n.. code:: python\n\n    >>> Url.validate('http://0.0.0.0')\n    ...\n    ValidationError: This is not a valid url.\n    \nDomain\n------\n\nDomain name validator.\n\nInternally, this filter uses the domain name validation function from the *validators* library: https://github.com/kvesteri/validators\n\n.. code:: python\n\n    >>> Domain.validate('example.com')\n    'example.com'\n\n.. code:: python\n\n    >>> Domain.validate('example.com/')\n    ...\n    ValidationError: This is not a valid domain name.\n\nAssert\n------\n\nAssert builds a filter from a boolean function.\n\n.. code:: python\n\n    >>> only_digits = Assert(str.isdigit, error_message = \"Only digits are allowed\")\n\n    >>> only_digits.validate('12345')\n    '12345'\n\n    >>> only_digits.validate('12-345')\n    ...\n    ValidationError: Only digits are allowed\n    \n\n\nApply\n-----\n\n``Apply`` applies a function to its argument and returns the result.\nBy default, it will reraise any exception as a ValidationError, but you can specify what kind of exception\n(if any) is expected. \n\n.. code:: python\n    \n    >>> hex_to_int = Apply(lambda h: int(h, 16))\n    \n    >>> hex_to_int.validate('aa')\n    170\n\n    >>> hex_to_int.validate('zz')\n    ...\n    ValidationError: invalid literal for int() with base 16: 'zz'\n\nYou rarely have to use ``Apply`` inside a ``Schema``, because any callable is converted implicitly to an ``Apply`` filter.\n\n.. code:: python\n\n    forum_post = Schema(\n        ['title', Length(max=100), str.lower, str.capitalize, Save],\n        ['post', Length(max=4000)]\n    )\n\nHowever, it can sometimes be useful to explicitly use ``Apply`` to customize the error message, or to specify exactly what kind of exception\nis expected.\n\n.. code:: python\n\n    >>> import numpy as np\n    >>> matrix_inverter = Schema(\n            ['matrix',\n                np.array,\n                Apply(\n                    np.linalg.inv,\n                    catch = (np.linalg.LinAlgError,),\n                    error_message = \"Please supply an invertible square matrix\"\n                ),\n                (lambda mat: mat.tolist()),\n                MoveTo('inverse')\n            ]\n        )\n\nThis example uses three ``Apply`` filters. ``np.array`` and ``(lambda mat: mat.tolist())`` are implicitly converted \nto ``Apply`` filters by the ``Schema`` constructor.\n\n.. code:: python\n\n    >>> matrix_inverter.validate({'matrix': [[1,1],[1,0]]})\n    {'inverse': [[0.0, 1.0], [1.0, -1.0]]}\n\n    >>> matrix_inverter.validate({'matrix': [[1,1],[1,1]]})\n    ...\n    ValidationError: {'matrix': 'Please supply an invertible square matrix', 'inverse': \"Couldn't compute field.\"}\n\nIn\n--\n\n.. code:: python\n\n    >>> In(['red', 'blue', 'yellow']).validate('blue')\n    'blue'\n\n    >>> In(['red', 'blue', 'yellow']).validate(\"broccoli\")\n    ...    \n    ValidationError: Incorrect value.\n\n    >>> In(\n            ['red', 'blue', 'yellow'],\n            error_message = \"Please choose one of the available colors.\"\n        ).validate(\"broccoli\")\n    ...\n    ValidationError: Please choose one of the available colors.\n    \n\nYou rarely have to use ``In`` explicitly in a ``Schema``. Any object that implements the ``__contains__`` special method (like for example, python lists, tuples, set, and many more) will be automatically converted to an ``In`` filter by the ``Schema`` constructor.\n\n.. code:: python\n    \n    shipping_schema = Schema(\n        ['address', address_schema],\n        ['shipping method', ('priority mail', 'parcel post', 'bottle to the sea')] \n    )\n    \nAs you can see, unless you want to customize the error message, you don't have to build a ``In`` filter explicitly, when \nyou define a ``Schema``.\n\n\nFilter builders\n===============\n\nYou can build filters from other filters.\nThe most sophisticated example is probably ``Schema`` which is used to create a filter for python dictionaries.\n\n.. code:: python\n\n    >>> from naval import *\n    >>> address_schema = Schema(\n            ['house number', Type(int), Range(1, 10000)],\n            ['street', Type(str), Length(min=5, max=255)],\n            ['zipcode', Type(str), Regex('\\d{4,5}')],\n            ['country', ('France', 'Germany', 'Spain')]\n        )\n\n    >>> address_schema.validate({\n            'house number': 12000,\n            'street': 'tapioca boulevard',\n            'country': 'Federal Kingdom of Portulombia'\n        })\n    ...\n    ValidationError: {'house number': 'The maximum is 10000.', 'zipcode': 'Field is missing.', 'country': 'Incorrect value.'}\n\nBut first let's talk about some simpler filter builders.\n\nDo\n--\n\n``Do`` creates a new filter from existing filters. The filters will be applied one after another.\nFor example, the ``Url`` validator is actually defined this way:\n\n.. code:: python\n\n    Url = Do(\n        Type(str),\n        Length(max=2083),\n        Regex(\"a huge regex here\"),\n        error_message = _(\"This is not a valid url.\")\n    )\n\nAs you can see, it is possible to specify an error message.\nThis error message will override any error message that could be triggered by \nthe filters in the sequence. \n\nEach\n----\n\nUse ``Each`` if you want to apply a filter to every element of a collection.\n\nFor example, to validate that a field is a list of integers:\n\n.. code:: python\n\n    >>> schema = Schema(\n            ['integers', Type(list), Each(Type(int))]\n        )\n\n    >>> schema.validate({'integers': [1, 2, 3, 5]})\n    {'integers': [1, 2, 3, 5]}\n\n    >>> schema.validate({'integers': [8, \"broccoli\", 21]})\n    ...\n    ValidationError: {'integers': 'Item #2: Wrong type. Expected int. Got str instead.'}\n\nYou can use ``Each0`` if you want the items to be numbered from 0 when generating the error messages:\n\n.. code:: python\n\n    >>> Each0(Type(int)).validate([8, \"broccoli\", 21])\n    ...\n    ValidationError: Item #1: Wrong type. Expected int. Got str instead.\n\nIt can prove useful to use ``Each`` in combination with ``Do`` in order to apply many filters\nto each elements of a list. For example:\n\n.. code:: python\n\n    >>> schema = Schema(\n        ['keywords', Type(list), Each( Do( Type(str), Length(min=2, max=30), str.lower) ), Save]\n    )\n\n    >>> schema.validate({'keywords': ['PANCAKES', 'FOOD', 'Recipe']})\n    {'keywords': ['pancakes', 'food', 'recipe']}\n\nSchema\n------\n\n``Schema`` is the class used to define validation and transformation rules for python dictionaries.\nEach rule is expressed as a list. Like this:\n\n.. code:: python\n\n    address_schema = Schema(\n        ['house number', Type(int), Range(1, 10000)],\n        ['street', Type(str), Length(min=5, max=255)],\n        ['zipcode', Type(str), Regex('\\d{4,5}')],\n        ['country', ('France', 'Germany', 'Spain')],\n    )\n\nor this:\n\n.. code:: python\n\n    registration_form = Schema(    \n        ['username', Type(str), Length(min=3, max=16)],\n        ['password', Type(str)],\n        ['password2'],\n        [\n            Assert(\n                (lambda d: d['password'] == d['password2']),\n                error_message = \"Passwords don't match\"\n            )\n        ],\n        ['password', lambda s: s.encode('utf-8'), bcrypt.encrypt, Save],\n        ['password2', Delete],\n        ['email', Email]\n    )\n\nEach rule either apply to a particular field of the dictionary, or it applies to the dictionary\nas a whole. If a rule starts with a filter, or a callable, then the rule applies to the whole dictionary.\nOtherwise (for example if the rule starts with a string like ``\"username\"``), then the rule applies to this\nparticular item of the dictionary.\n\nIn the preceding example, the rule\n\n.. code:: python\n\n        [\n            Assert(\n                (lambda d: d['password'] == d['password2']),\n                error_message = \"Passwords don't match\"\n            )\n        ]\n\nis a global rule. The ``Assert`` filter is called on the whole dictionary.\n\n\nHere's another example:\n\n.. code:: python\n\n    schema = Schema(\n        ['first name', Type(str), Length(min=1, max=50)],\n        ['last name', Type(str), Length(min=1, max=50)],\n        [lambda d: d['first name'] + ' ' + d['last name'], SaveAs('full name')]\n    )\n\nThe last rule starts with a callable so it applies to the whole dictionary.\nI guess it's time to introduce the ``SaveAs`` instruction.\n\nEach rule can optionally end with a storage instruction: ``SaveAs``, ``MoveTo``, ``Save`` or ``Delete``.\n\nSaveAs\n~~~~~~\n\nUse SaveAs at the end of chain to save the current value under another key.\nKeep in mind that it doesn't modify the input dictionary. The modification is seen only\nin the output dictionary (the return value of the ``validate`` method).\n\nExample:\n\n.. code:: python\n\n    >>> original = {'age': 25.4}\n\n    >>> Schema(['age', round, SaveAs('age_round')]).validate(original)\n    {'age': 25.4, 'age_round': 25}\n\n    >>> original\n    {'age': 25.4}\n\n\nMoveTo\n~~~~~~\n\nUse MoveTo at the end of a chain to move an item under another key, and delete the current key.\nKeep in mind that it doesn't modify the input dictionary. The modification is seen only\nin the output dictionary (the return value of the ``validate`` method).\n\nExample:\n\n.. code:: python\n\n    >>> original = {'age': 25.4}\n\n    >>> Schema(['age', round, MoveTo('age_round')]).validate(original)\n    {'age_round': 25}\n\n    >>> >>> original\n    {'age': 25.4}\n\n\nSave\n~~~~\n\nUse Save at the end of a chain in order to save the current value under the current key.\nKeep in mind that it doesn't modify the input dictionary. The modification is seen only\nin the output dictionary (the return value of the ``validate`` method).\n\nExample:\n\n.. code:: python\n        \n    >>> original = {'age': 25.4}\n\n    >>> Schema(['age', round, Save]).validate()\n    {'age': 25}\n\n    >>> original\n    {'age': 25.4}\n\nDelete\n~~~~~~\n\nUse Delete at the end of a chain to delete the current key.\nKeep in mind that it doesn't modify the input dictionary. The modification is seen only\nin the output dictionary (the return value of the ``validate`` method).\n\nI have to introduce 3 other useful instructions now: ``Optional``, ``Default`` and ``Discard``.\n\nOptional\n~~~~~~~~\n\nOptional should be placed after a field name in a chain.\n\n.. code:: python\n\n   >>> icecream_order = Schema(\n           ['flavour', ('vanilla', 'chocolate', 'pistachio')],\n           ['topping', Optional, ('whipped cream', 'chocolate sprinkles', 'peanuts')],\n           ['quantity', int, Range(1, 12)]\n       )\n\nThe schema will just skip to the next rule if it doesn't find the key in the dictionary.\n\n.. code:: python\n\n    >>> icecream_order.validate({'flavour': 'vanilla', 'quantity': 4})\n    {'flavour': 'vanilla', 'quantity': 4}\n\nDefault\n~~~~~~~\n\n``Default`` should be placed after a field name in a chain.\nThe ``Default`` constructor takes an object or a callable as an argument.\n\nExample:\n\n.. code:: python\n\n     ['currency', Default('USD')]\n\nExample (using a callable):\n\n.. code:: python\n\n        ['username', Default(lambda d: ''.join(random.choice(string.ascii_lowercase) for _ in range(6)))]\n        \nThis would generate a random username if no username was supplied.\n\nIf you pass a callable, this should be a unary function. It will be passed the whole dictionary.\nThis way, it is possible to set a default value for a field using other items of the dictionary. For example:\n\n.. code:: python\n\n    >>> schema = Schema(\n            ['email', Email],\n            ['username', Default(lambda d: d['email'])]\n        )\n        \nThis would set the username to be the email address if no username was supplied.\n\n.. code:: python\n\n    >>> schema.validate({'email': 'the-king@example.com'})\n    {'email': 'the-king@example.com', 'username': 'the-king@example.com'}\n    \n\nDiscard\n~~~~~~~ \n\n``Discard`` should be placed after a field name in a chain. \n``Discard`` is used to indicate that if a key in the input dictionary contains a particular value, this\nkey should be regarded as absent from the dictionary.\n\n.. code:: python\n\n    >>> schema = Schema(\n            ['name', Type(str)],\n            ['address', Discard(''), Type(str)]\n        )\n\n    >>> schema.validate({'name': 'Marcel Bichon', 'address': ''})\n    ...\n    ValidationError: {'address': 'Field is missing.'}\n\nIt can prove useful to combine ``Discard`` with ``Optional``:\n\n.. code:: python\n\n    >>> schema = Schema(\n            ['name', Type(str)],\n            ['address', Discard(''), Optional, Type(str)]\n        )\n\n    >>> schema.validate({'name': 'Marcel Bichon', 'address': ''})\n    {'name': 'Marcel Bichon'}\n\nOr with ``Default``:\n\n.. code:: python\n\n    >>> household_schema = Schema(\n            ['married', Type(bool)],\n            ['number of children', Discard(''), Default('0'), int, Save]\n        )\n\n    >>> household_schema.validate({'married': False, 'number of children': ''})\n    {'married': False, 'number of children': 0}\n\nYou can decide to discard multiple values. For example:\n\n.. code:: python\n\n    ['task_id', Discard('', None)]\n\nThis would discard both ``''`` and ``None``.\n\nUnexpected Keys\n~~~~~~~~~~~~~~~\n\nThe Schema constructor takes an optional ``unexpected_keys`` argument.\nIt defines what should be done with keys that don't appear in your schema.\n\nWith ``unexpected_keys=Schema.FAIL``, the schema will refuse to validate a dictionary if it \ncontains unknown keys. This is the default.\n\nWith ``unexpected_keys=Schema.KEEP``, the schema will validate a dictionary even if it \ncontains unknown keys. These unknown items will appear in the output dictionary (the dictionary \nreturned by the ``validate`` method).\n\nWith ``unexpected_keys=Schema.DELETE``, the schema will agree to validate a dictionary that\ncontains unknown keys, but these items won't appear in the output dictionary.\n\n---------------------------------\nTranslation of the error messages\n---------------------------------\n\nBuilt-in messages\n=================\n\nThe ``validate`` method of the ``Filter`` class (and its subclasses, like for example, ``Schema``),\ntakes an optional ``lang`` keyword argument.\nUse this ``lang`` keyword argument to obtain the potential error messages in the desired language.\n\n.. code:: python\n\n    >>> editor_schema = Schema(\n            ['name', Type(str)],\n            ['website', Optional, Url]\n        )\n\n    >>> editor_schema.validate(\n            { 'website': 'http://#' },\n            lang = 'fr'\n        )\n    ...\n    ValidationError: {'name': 'Champ manquant.', 'website': \"Ce n'est pas une url valide.\"}\n\nIf the built-in error messages are not available in the language you're looking for, submit an issue,\nor (if you feel like contributing to the project by translating the messages yourself) a pull request at https://github.com/leforestier/naval .\n\nCustom messages\n===============\n\n*Naval* translation feature relies on the *postpone* library and the *gettext* module.\nHere's how you could define customized translatable error messages.\n\n.. code:: python\n\n    from postpone import LazyString as _\n\n    pencil_schema = Schema(\n        ['thickness',\n            Type(int),\n            Range(1, 100, max_message = _(\"Maximum thickness is {max}.\"))\n        ],\n        ['color',\n            Type(str),\n            Regex(\n                '[0-9a-fA-F]{6}',\n                error_message = _(\"This is not a valid color.\")\n            )\n        ]\n    )\n\nYou just added two new messages that aren't translatable yet.\n\n*Naval*'s ``locale`` directory contain the translations for the standard *Naval* messages.\nYou should copy this directory. For example, if you've installed the naval library inside\n/usr/local/lib/python3.5/site-packages:\n    \n    $ cp -r /usr/local/lib/python3.5/site-packages/naval/locale /home/myuser/myapp/naval-locale\n\nThen add your translations to the relevant .po files and, in your application code, insert the line:\n\n.. code:: python\n\n    import naval\n    naval.settings.locale_directory = '/home/myuser/myapp/naval-locale'\n\nAfter that, *Naval* will search for translations in the directory ``'/home/myuser/myapp/naval-locale'``\ninstead of *Naval*'s default locale directory.\n\n.. _`table of contents`:\n\n-----------------\nTable of contents\n-----------------\n.. contents::\n\n\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/leforestier/naval", "keywords": "validation", "license": "", "maintainer": "", "maintainer_email": "", "name": "naval", "package_url": "https://pypi.org/project/naval/", "platform": "", "project_url": "https://pypi.org/project/naval/", "project_urls": {"Homepage": "https://github.com/leforestier/naval"}, "release_url": "https://pypi.org/project/naval/1.0.0/", "requires_dist": null, "requires_python": "", "summary": "Validation library with error messages in multiple languages and a readable syntax.", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://travis-ci.org/leforestier/naval\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/leforestier/naval.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ed1275f0e15cd3e266da132de160cbef6731ba3b/68747470733a2f2f7472617669732d63692e6f72672f6c65666f726573746965722f6e6176616c2e737667\"></a>\n<div id=\"naval-is-a-validation-library\">\n<h2><a href=\"#id2\" rel=\"nofollow\">Naval is a validation library</a></h2>\n<p>Using <em>Naval</em>, you can define schemas to validate or transform python dictionaries or other objects.\n<em>Naval</em> provides you with error messages in multiple languages. You can use it to validate JSON documents.</p>\n<p><em>Naval</em> offers a very flexible and readable way to transform python dictionaries, which makes it a valuable\ntool when implementing RESTful apis.</p>\n<p>You could also use <em>Naval</em> to validate HTML forms.</p>\n<p><a href=\"#table-of-contents\" rel=\"nofollow\">table of contents</a></p>\n</div>\n<div id=\"examples-of-use\">\n<h2><a href=\"#id3\" rel=\"nofollow\">Examples of use</a></h2>\n<div id=\"simple-validation\">\n<h3><a href=\"#id4\" rel=\"nofollow\">Simple validation</a></h3>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">naval</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">address_schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'house number'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">),</span> <span class=\"n\">Range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">10000</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'street'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">255</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'zipcode'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Regex</span><span class=\"p\">(</span><span class=\"s1\">'\\d{4,5}'</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'country'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"s1\">'France'</span><span class=\"p\">,</span> <span class=\"s1\">'Germany'</span><span class=\"p\">,</span> <span class=\"s1\">'Spain'</span><span class=\"p\">)]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">address_schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span>\n        <span class=\"s1\">'house number'</span><span class=\"p\">:</span> <span class=\"mi\">12000</span><span class=\"p\">,</span>\n        <span class=\"s1\">'street'</span><span class=\"p\">:</span> <span class=\"s1\">'tapioca boulevard'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'country'</span><span class=\"p\">:</span> <span class=\"s1\">'Federal Kingdom of Portulombia'</span>\n    <span class=\"p\">})</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'house number'</span><span class=\"p\">:</span> <span class=\"s1\">'The maximum is 10000.'</span><span class=\"p\">,</span> <span class=\"s1\">'zipcode'</span><span class=\"p\">:</span> <span class=\"s1\">'Field is missing.'</span><span class=\"p\">,</span> <span class=\"s1\">'country'</span><span class=\"p\">:</span> <span class=\"s1\">'Incorrect value.'</span><span class=\"p\">}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">address_schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span>\n        <span class=\"s1\">'house number'</span><span class=\"p\">:</span> <span class=\"mi\">17</span><span class=\"p\">,</span>\n        <span class=\"s1\">'street'</span><span class=\"p\">:</span> <span class=\"s1\">'rambla del Raval'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'zipcode'</span><span class=\"p\">:</span> <span class=\"s1\">'08001'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'country'</span><span class=\"p\">:</span> <span class=\"s1\">'Spain'</span>\n    <span class=\"p\">})</span>\n<span class=\"p\">{</span><span class=\"s1\">'country'</span><span class=\"p\">:</span> <span class=\"s1\">'Spain'</span><span class=\"p\">,</span>\n <span class=\"s1\">'house number'</span><span class=\"p\">:</span> <span class=\"mi\">17</span><span class=\"p\">,</span>\n <span class=\"s1\">'street'</span><span class=\"p\">:</span> <span class=\"s1\">'rambla del Raval'</span><span class=\"p\">,</span>\n <span class=\"s1\">'zipcode'</span><span class=\"p\">:</span> <span class=\"s1\">'08001'</span><span class=\"p\">}</span>\n</pre>\n</div>\n<div id=\"validation-and-transformation\">\n<h3><a href=\"#id5\" rel=\"nofollow\">Validation and transformation</a></h3>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">naval</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">passlib.hash</span> <span class=\"kn\">import</span> <span class=\"n\">bcrypt</span> <span class=\"c1\"># we're going to use the passlib library to encrypt passwords</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">registration_form</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'username'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">16</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'password2'</span><span class=\"p\">],</span>\n        <span class=\"p\">[</span>\n            <span class=\"n\">Assert</span><span class=\"p\">(</span>\n                <span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">d</span><span class=\"p\">:</span> <span class=\"n\">d</span><span class=\"p\">[</span><span class=\"s1\">'password'</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"n\">d</span><span class=\"p\">[</span><span class=\"s1\">'password2'</span><span class=\"p\">]),</span>\n                <span class=\"n\">error_message</span> <span class=\"o\">=</span> <span class=\"s2\">\"Passwords don't match\"</span>\n            <span class=\"p\">)</span>\n        <span class=\"p\">],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"k\">lambda</span> <span class=\"n\">s</span><span class=\"p\">:</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">encode</span><span class=\"p\">(</span><span class=\"s1\">'utf-8'</span><span class=\"p\">),</span> <span class=\"n\">bcrypt</span><span class=\"o\">.</span><span class=\"n\">encrypt</span><span class=\"p\">,</span> <span class=\"n\">Save</span><span class=\"p\">],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'password2'</span><span class=\"p\">,</span> <span class=\"n\">Delete</span><span class=\"p\">],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'email'</span><span class=\"p\">,</span> <span class=\"n\">Email</span><span class=\"p\">]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">registration_form</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span>\n        <span class=\"s1\">'email'</span><span class=\"p\">:</span> <span class=\"s1\">'the-king@example.com'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'username'</span><span class=\"p\">:</span> <span class=\"s1\">'TheKing'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'password'</span><span class=\"p\">:</span> <span class=\"s1\">'hackme'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'password2'</span><span class=\"p\">:</span> <span class=\"s1\">'hackme'</span>\n    <span class=\"p\">})</span>\n<span class=\"p\">{</span><span class=\"s1\">'email'</span><span class=\"p\">:</span> <span class=\"s1\">'the-king@example.com'</span><span class=\"p\">,</span>\n <span class=\"s1\">'password'</span><span class=\"p\">:</span> <span class=\"s1\">'$2a$12$JT2UlXP0REt3EX7kGIFGV.5uKPQJL4phDRpfcplW91sJAyB8RuKwm'</span><span class=\"p\">,</span>\n <span class=\"s1\">'username'</span><span class=\"p\">:</span> <span class=\"s1\">'TheKing'</span><span class=\"p\">}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">registration_form</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span>\n        <span class=\"s1\">'username'</span><span class=\"p\">:</span> <span class=\"s1\">'TheKing'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'email'</span><span class=\"p\">:</span> <span class=\"s1\">'@@@@@@@@@@'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'password'</span><span class=\"p\">:</span> <span class=\"s1\">'hackme'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'password2'</span><span class=\"p\">:</span> <span class=\"s1\">'saltme'</span>\n    <span class=\"p\">})</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'email'</span><span class=\"p\">:</span> <span class=\"s1\">'This is not a valid email address.'</span><span class=\"p\">,</span> <span class=\"s1\">'*'</span><span class=\"p\">:</span> <span class=\"s2\">\"Passwords don't match\"</span><span class=\"p\">}</span>\n</pre>\n</div>\n<div id=\"composing-schemas\">\n<h3><a href=\"#id6\" rel=\"nofollow\">Composing schemas</a></h3>\n<p>Schemas can be reused to build bigger schemas.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">naval</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">editor_schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'name'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'website'</span><span class=\"p\">,</span> <span class=\"n\">Optional</span><span class=\"p\">,</span> <span class=\"n\">Url</span><span class=\"p\">]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">book_schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'title'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'author'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">200</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'isbn13'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"mi\">13</span><span class=\"p\">),</span> <span class=\"n\">Regex</span><span class=\"p\">(</span><span class=\"s1\">'\\d+'</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'editor'</span><span class=\"p\">,</span> <span class=\"n\">editor_schema</span><span class=\"p\">]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">book_schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span>\n        <span class=\"s1\">'title'</span><span class=\"p\">:</span> <span class=\"s1\">'Lose weight by eating pancakes'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'author'</span><span class=\"p\">:</span> <span class=\"s1\">'John Greedyquack'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'isbn13'</span><span class=\"p\">:</span> <span class=\"s1\">'1234567890123'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'editor'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'name'</span><span class=\"p\">:</span> <span class=\"s1\">'Flawed Books'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'website'</span><span class=\"p\">:</span> <span class=\"s1\">'http://#'</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">})</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'editor'</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'website'</span><span class=\"p\">:</span> <span class=\"s1\">'This is not a valid url.'</span><span class=\"p\">}}</span>\n</pre>\n</div>\n<div id=\"internationalization\">\n<h3><a href=\"#id7\" rel=\"nofollow\">Internationalization</a></h3>\n<p>Supply a <tt>lang</tt> keyword argument to the <tt>validate</tt> method to obtain translated error messages.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">editor_schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span> <span class=\"s1\">'website'</span><span class=\"p\">:</span> <span class=\"s1\">'http://#'</span> <span class=\"p\">},</span> <span class=\"n\">lang</span> <span class=\"o\">=</span> <span class=\"s1\">'fr'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'name'</span><span class=\"p\">:</span> <span class=\"s1\">'Champ manquant.'</span><span class=\"p\">,</span> <span class=\"s1\">'website'</span><span class=\"p\">:</span> <span class=\"s2\">\"Ce n'est pas une url valide.\"</span><span class=\"p\">}</span>\n</pre>\n</div>\n</div>\n<div id=\"filters\">\n<h2><a href=\"#id8\" rel=\"nofollow\">Filters</a></h2>\n<p>Filters are used to validate or transform python objects. Filters are instances of the many subclasses of <tt>naval.Filter</tt>.\nA filter\u2019s <tt>validate</tt> method takes a value to examine, and either returns it (or a modified version of it), or it raises a\n<tt>ValidationError</tt> exception. You can catch this exception like this:</p>\n<pre><span class=\"k\">try</span><span class=\"p\">:</span>\n    <span class=\"n\">potentially_modified_version</span> <span class=\"o\">=</span> <span class=\"n\">my_filter</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">)</span>\n<span class=\"k\">except</span> <span class=\"n\">ValidationError</span> <span class=\"k\">as</span> <span class=\"n\">exc</span><span class=\"p\">:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">exc</span><span class=\"o\">.</span><span class=\"n\">error_details</span><span class=\"p\">)</span>\n</pre>\n<p>The <tt>ValidationError</tt> instance has a <tt>error_details</tt> attribute, that contains, well, details about the error.\nFor elementary filters, <tt>exc.error_details</tt> is just a string describing the error.\nFor the <tt>Schema</tt> filter (used to validate python dictionaries), <tt>exc.error_details</tt> is a dictionary\n(each key of this dictionary contains details about the errors generated by a particular item).</p>\n<p>It\u2019s always possible to supply custom error messages when constructing a filter.</p>\n<div id=\"elementary-filters\">\n<h3><a href=\"#id9\" rel=\"nofollow\">Elementary filters</a></h3>\n<div id=\"range\">\n<h4><a href=\"#id10\" rel=\"nofollow\">Range</a></h4>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Range</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"mi\">7</span><span class=\"p\">)</span>\n<span class=\"mi\">7</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Range</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">16</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">The</span> <span class=\"n\">minimum</span> <span class=\"ow\">is</span> <span class=\"mf\">5.</span>\n</pre>\n</div>\n<div id=\"length\">\n<h4><a href=\"#id11\" rel=\"nofollow\">Length</a></h4>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">([</span><span class=\"s1\">'one'</span><span class=\"p\">,</span> <span class=\"s1\">'two'</span><span class=\"p\">,</span> <span class=\"s1\">'three'</span><span class=\"p\">])</span>\n<span class=\"p\">[</span><span class=\"s1\">'one'</span><span class=\"p\">,</span> <span class=\"s1\">'two'</span><span class=\"p\">,</span> <span class=\"s1\">'three'</span><span class=\"p\">]</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">([</span><span class=\"s1\">'one'</span><span class=\"p\">,</span> <span class=\"s1\">'two'</span><span class=\"p\">,</span> <span class=\"s1\">'three'</span><span class=\"p\">,</span> <span class=\"s1\">'four'</span><span class=\"p\">])</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">The</span> <span class=\"n\">value</span> <span class=\"ow\">is</span> <span class=\"n\">too</span> <span class=\"n\">long</span><span class=\"o\">.</span> <span class=\"n\">Max</span> <span class=\"n\">length</span> <span class=\"ow\">is</span> <span class=\"mf\">3.</span>\n\n<span class=\"c1\"># customizing the error message</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">too_long_error</span><span class=\"o\">=</span><span class=\"s2\">\"Please, no more than </span><span class=\"si\">{max_length}</span><span class=\"s2\"> items\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'one'</span><span class=\"p\">,</span> <span class=\"s1\">'two'</span><span class=\"p\">,</span> <span class=\"s1\">'three'</span><span class=\"p\">,</span> <span class=\"s1\">'four'</span><span class=\"p\">]</span>\n    <span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">Please</span><span class=\"p\">,</span> <span class=\"n\">no</span> <span class=\"n\">more</span> <span class=\"n\">than</span> <span class=\"mi\">3</span> <span class=\"n\">items</span>\n</pre>\n</div>\n<div id=\"type\">\n<h4><a href=\"#id12\" rel=\"nofollow\">Type</a></h4>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"mf\">3.14</span><span class=\"p\">)</span>\n<span class=\"mf\">3.14</span>\n</pre>\n<p>By default, the type must match exactly.\nUse <tt>subclasses = True</tt> to allow for subclasses.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">collections</span> <span class=\"kn\">import</span> <span class=\"n\">OrderedDict</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">dict</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">OrderedDict</span><span class=\"p\">([(</span><span class=\"s1\">'a'</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">'b'</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)]))</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">Wrong</span> <span class=\"nb\">type</span><span class=\"o\">.</span> <span class=\"n\">Expected</span> <span class=\"nb\">dict</span><span class=\"o\">.</span> <span class=\"n\">Got</span> <span class=\"n\">OrderedDict</span> <span class=\"n\">instead</span><span class=\"o\">.</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">dict</span><span class=\"p\">,</span> <span class=\"n\">subclasses</span> <span class=\"o\">=</span> <span class=\"kc\">True</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">OrderedDict</span><span class=\"p\">([(</span><span class=\"s1\">'a'</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">'b'</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)]))</span>\n<span class=\"n\">OrderedDict</span><span class=\"p\">([(</span><span class=\"s1\">'a'</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">'b'</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)])</span>\n</pre>\n</div>\n<div id=\"regex\">\n<h4><a href=\"#id13\" rel=\"nofollow\">Regex</a></h4>\n<blockquote>\nThe pattern must match exactly, from the beginning to the end of the string.</blockquote>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Regex</span><span class=\"p\">(</span><span class=\"s1\">'[A-Za-z][-_A-Za-z0-9]+'</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'TheKing!!!'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">Incorrect</span> <span class=\"n\">value</span><span class=\"o\">.</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Regex</span><span class=\"p\">(</span><span class=\"s1\">'[A-Za-z][-_A-Za-z0-9]+'</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'TheKing'</span><span class=\"p\">)</span>\n<span class=\"s1\">'TheKing'</span>\n</pre>\n</div>\n<div id=\"email\">\n<h4><a href=\"#id14\" rel=\"nofollow\">Email</a></h4>\n<p>Email validator.</p>\n<p>Internally, this filter uses the email validation function from the <em>validators</em> library: <a href=\"https://github.com/kvesteri/validators\" rel=\"nofollow\">https://github.com/kvesteri/validators</a></p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Email</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'email@example.com'</span><span class=\"p\">)</span>\n<span class=\"s1\">'email@example.com'</span>\n</pre>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Email</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'user@92.80.0.1'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">This</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">email</span> <span class=\"n\">address</span><span class=\"o\">.</span>\n</pre>\n</div>\n<div id=\"url\">\n<h4><a href=\"#id15\" rel=\"nofollow\">Url</a></h4>\n<p>Url validator.\nThe regex used to validate urls was borrowed from the Spoon php library: <a href=\"http://spoon-library.be\" rel=\"nofollow\">http://spoon-library.be</a></p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Url</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'http://www.example.com/v1/?sort=asc'</span><span class=\"p\">)</span>\n<span class=\"s1\">'http://www.example.com/v1/?sort=asc'</span>\n</pre>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Url</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'http://0.0.0.0'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">This</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">url</span><span class=\"o\">.</span>\n</pre>\n</div>\n<div id=\"domain\">\n<h4><a href=\"#id16\" rel=\"nofollow\">Domain</a></h4>\n<p>Domain name validator.</p>\n<p>Internally, this filter uses the domain name validation function from the <em>validators</em> library: <a href=\"https://github.com/kvesteri/validators\" rel=\"nofollow\">https://github.com/kvesteri/validators</a></p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Domain</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'example.com'</span><span class=\"p\">)</span>\n<span class=\"s1\">'example.com'</span>\n</pre>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Domain</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'example.com/'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">This</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">domain</span> <span class=\"n\">name</span><span class=\"o\">.</span>\n</pre>\n</div>\n<div id=\"assert\">\n<h4><a href=\"#id17\" rel=\"nofollow\">Assert</a></h4>\n<p>Assert builds a filter from a boolean function.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">only_digits</span> <span class=\"o\">=</span> <span class=\"n\">Assert</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"o\">.</span><span class=\"n\">isdigit</span><span class=\"p\">,</span> <span class=\"n\">error_message</span> <span class=\"o\">=</span> <span class=\"s2\">\"Only digits are allowed\"</span><span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">only_digits</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'12345'</span><span class=\"p\">)</span>\n<span class=\"s1\">'12345'</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">only_digits</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'12-345'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">Only</span> <span class=\"n\">digits</span> <span class=\"n\">are</span> <span class=\"n\">allowed</span>\n</pre>\n</div>\n<div id=\"apply\">\n<h4><a href=\"#id18\" rel=\"nofollow\">Apply</a></h4>\n<p><tt>Apply</tt> applies a function to its argument and returns the result.\nBy default, it will reraise any exception as a ValidationError, but you can specify what kind of exception\n(if any) is expected.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">hex_to_int</span> <span class=\"o\">=</span> <span class=\"n\">Apply</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">h</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">,</span> <span class=\"mi\">16</span><span class=\"p\">))</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">hex_to_int</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'aa'</span><span class=\"p\">)</span>\n<span class=\"mi\">170</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">hex_to_int</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'zz'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">invalid</span> <span class=\"n\">literal</span> <span class=\"k\">for</span> <span class=\"nb\">int</span><span class=\"p\">()</span> <span class=\"k\">with</span> <span class=\"n\">base</span> <span class=\"mi\">16</span><span class=\"p\">:</span> <span class=\"s1\">'zz'</span>\n</pre>\n<p>You rarely have to use <tt>Apply</tt> inside a <tt>Schema</tt>, because any callable is converted implicitly to an <tt>Apply</tt> filter.</p>\n<pre><span class=\"n\">forum_post</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"s1\">'title'</span><span class=\"p\">,</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">),</span> <span class=\"nb\">str</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"o\">.</span><span class=\"n\">capitalize</span><span class=\"p\">,</span> <span class=\"n\">Save</span><span class=\"p\">],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'post'</span><span class=\"p\">,</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">4000</span><span class=\"p\">)]</span>\n<span class=\"p\">)</span>\n</pre>\n<p>However, it can sometimes be useful to explicitly use <tt>Apply</tt> to customize the error message, or to specify exactly what kind of exception\nis expected.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">matrix_inverter</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'matrix'</span><span class=\"p\">,</span>\n            <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">,</span>\n            <span class=\"n\">Apply</span><span class=\"p\">(</span>\n                <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">linalg</span><span class=\"o\">.</span><span class=\"n\">inv</span><span class=\"p\">,</span>\n                <span class=\"n\">catch</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">linalg</span><span class=\"o\">.</span><span class=\"n\">LinAlgError</span><span class=\"p\">,),</span>\n                <span class=\"n\">error_message</span> <span class=\"o\">=</span> <span class=\"s2\">\"Please supply an invertible square matrix\"</span>\n            <span class=\"p\">),</span>\n            <span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">mat</span><span class=\"p\">:</span> <span class=\"n\">mat</span><span class=\"o\">.</span><span class=\"n\">tolist</span><span class=\"p\">()),</span>\n            <span class=\"n\">MoveTo</span><span class=\"p\">(</span><span class=\"s1\">'inverse'</span><span class=\"p\">)</span>\n        <span class=\"p\">]</span>\n    <span class=\"p\">)</span>\n</pre>\n<p>This example uses three <tt>Apply</tt> filters. <tt>np.array</tt> and <tt>(lambda mat: <span class=\"pre\">mat.tolist())</span></tt> are implicitly converted\nto <tt>Apply</tt> filters by the <tt>Schema</tt> constructor.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">matrix_inverter</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'matrix'</span><span class=\"p\">:</span> <span class=\"p\">[[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">],[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">]]})</span>\n<span class=\"p\">{</span><span class=\"s1\">'inverse'</span><span class=\"p\">:</span> <span class=\"p\">[[</span><span class=\"mf\">0.0</span><span class=\"p\">,</span> <span class=\"mf\">1.0</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mf\">1.0</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">1.0</span><span class=\"p\">]]}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">matrix_inverter</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'matrix'</span><span class=\"p\">:</span> <span class=\"p\">[[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">],[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">]]})</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'matrix'</span><span class=\"p\">:</span> <span class=\"s1\">'Please supply an invertible square matrix'</span><span class=\"p\">,</span> <span class=\"s1\">'inverse'</span><span class=\"p\">:</span> <span class=\"s2\">\"Couldn't compute field.\"</span><span class=\"p\">}</span>\n</pre>\n</div>\n<div id=\"in\">\n<h4><a href=\"#id19\" rel=\"nofollow\">In</a></h4>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">In</span><span class=\"p\">([</span><span class=\"s1\">'red'</span><span class=\"p\">,</span> <span class=\"s1\">'blue'</span><span class=\"p\">,</span> <span class=\"s1\">'yellow'</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s1\">'blue'</span><span class=\"p\">)</span>\n<span class=\"s1\">'blue'</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">In</span><span class=\"p\">([</span><span class=\"s1\">'red'</span><span class=\"p\">,</span> <span class=\"s1\">'blue'</span><span class=\"p\">,</span> <span class=\"s1\">'yellow'</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s2\">\"broccoli\"</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">Incorrect</span> <span class=\"n\">value</span><span class=\"o\">.</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">In</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'red'</span><span class=\"p\">,</span> <span class=\"s1\">'blue'</span><span class=\"p\">,</span> <span class=\"s1\">'yellow'</span><span class=\"p\">],</span>\n        <span class=\"n\">error_message</span> <span class=\"o\">=</span> <span class=\"s2\">\"Please choose one of the available colors.\"</span>\n    <span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"s2\">\"broccoli\"</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">Please</span> <span class=\"n\">choose</span> <span class=\"n\">one</span> <span class=\"n\">of</span> <span class=\"n\">the</span> <span class=\"n\">available</span> <span class=\"n\">colors</span><span class=\"o\">.</span>\n</pre>\n<p>You rarely have to use <tt>In</tt> explicitly in a <tt>Schema</tt>. Any object that implements the <tt>__contains__</tt> special method (like for example, python lists, tuples, set, and many more) will be automatically converted to an <tt>In</tt> filter by the <tt>Schema</tt> constructor.</p>\n<pre><span class=\"n\">shipping_schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"s1\">'address'</span><span class=\"p\">,</span> <span class=\"n\">address_schema</span><span class=\"p\">],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'shipping method'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"s1\">'priority mail'</span><span class=\"p\">,</span> <span class=\"s1\">'parcel post'</span><span class=\"p\">,</span> <span class=\"s1\">'bottle to the sea'</span><span class=\"p\">)]</span>\n<span class=\"p\">)</span>\n</pre>\n<p>As you can see, unless you want to customize the error message, you don\u2019t have to build a <tt>In</tt> filter explicitly, when\nyou define a <tt>Schema</tt>.</p>\n</div>\n</div>\n<div id=\"filter-builders\">\n<h3><a href=\"#id20\" rel=\"nofollow\">Filter builders</a></h3>\n<p>You can build filters from other filters.\nThe most sophisticated example is probably <tt>Schema</tt> which is used to create a filter for python dictionaries.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">naval</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">address_schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'house number'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">),</span> <span class=\"n\">Range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">10000</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'street'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">255</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'zipcode'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Regex</span><span class=\"p\">(</span><span class=\"s1\">'\\d{4,5}'</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'country'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"s1\">'France'</span><span class=\"p\">,</span> <span class=\"s1\">'Germany'</span><span class=\"p\">,</span> <span class=\"s1\">'Spain'</span><span class=\"p\">)]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">address_schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span>\n        <span class=\"s1\">'house number'</span><span class=\"p\">:</span> <span class=\"mi\">12000</span><span class=\"p\">,</span>\n        <span class=\"s1\">'street'</span><span class=\"p\">:</span> <span class=\"s1\">'tapioca boulevard'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'country'</span><span class=\"p\">:</span> <span class=\"s1\">'Federal Kingdom of Portulombia'</span>\n    <span class=\"p\">})</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'house number'</span><span class=\"p\">:</span> <span class=\"s1\">'The maximum is 10000.'</span><span class=\"p\">,</span> <span class=\"s1\">'zipcode'</span><span class=\"p\">:</span> <span class=\"s1\">'Field is missing.'</span><span class=\"p\">,</span> <span class=\"s1\">'country'</span><span class=\"p\">:</span> <span class=\"s1\">'Incorrect value.'</span><span class=\"p\">}</span>\n</pre>\n<p>But first let\u2019s talk about some simpler filter builders.</p>\n<div id=\"do\">\n<h4><a href=\"#id21\" rel=\"nofollow\">Do</a></h4>\n<p><tt>Do</tt> creates a new filter from existing filters. The filters will be applied one after another.\nFor example, the <tt>Url</tt> validator is actually defined this way:</p>\n<pre><span class=\"n\">Url</span> <span class=\"o\">=</span> <span class=\"n\">Do</span><span class=\"p\">(</span>\n    <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span>\n    <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">2083</span><span class=\"p\">),</span>\n    <span class=\"n\">Regex</span><span class=\"p\">(</span><span class=\"s2\">\"a huge regex here\"</span><span class=\"p\">),</span>\n    <span class=\"n\">error_message</span> <span class=\"o\">=</span> <span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s2\">\"This is not a valid url.\"</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n</pre>\n<p>As you can see, it is possible to specify an error message.\nThis error message will override any error message that could be triggered by\nthe filters in the sequence.</p>\n</div>\n<div id=\"each\">\n<h4><a href=\"#id22\" rel=\"nofollow\">Each</a></h4>\n<p>Use <tt>Each</tt> if you want to apply a filter to every element of a collection.</p>\n<p>For example, to validate that a field is a list of integers:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'integers'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">list</span><span class=\"p\">),</span> <span class=\"n\">Each</span><span class=\"p\">(</span><span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">))]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'integers'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]})</span>\n<span class=\"p\">{</span><span class=\"s1\">'integers'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'integers'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"s2\">\"broccoli\"</span><span class=\"p\">,</span> <span class=\"mi\">21</span><span class=\"p\">]})</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'integers'</span><span class=\"p\">:</span> <span class=\"s1\">'Item #2: Wrong type. Expected int. Got str instead.'</span><span class=\"p\">}</span>\n</pre>\n<p>You can use <tt>Each0</tt> if you want the items to be numbered from 0 when generating the error messages:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Each0</span><span class=\"p\">(</span><span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">([</span><span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"s2\">\"broccoli\"</span><span class=\"p\">,</span> <span class=\"mi\">21</span><span class=\"p\">])</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"n\">Item</span> <span class=\"c1\">#1: Wrong type. Expected int. Got str instead.</span>\n</pre>\n<p>It can prove useful to use <tt>Each</tt> in combination with <tt>Do</tt> in order to apply many filters\nto each elements of a list. For example:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"s1\">'keywords'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">list</span><span class=\"p\">),</span> <span class=\"n\">Each</span><span class=\"p\">(</span> <span class=\"n\">Do</span><span class=\"p\">(</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">30</span><span class=\"p\">),</span> <span class=\"nb\">str</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">)</span> <span class=\"p\">),</span> <span class=\"n\">Save</span><span class=\"p\">]</span>\n<span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'keywords'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'PANCAKES'</span><span class=\"p\">,</span> <span class=\"s1\">'FOOD'</span><span class=\"p\">,</span> <span class=\"s1\">'Recipe'</span><span class=\"p\">]})</span>\n<span class=\"p\">{</span><span class=\"s1\">'keywords'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'pancakes'</span><span class=\"p\">,</span> <span class=\"s1\">'food'</span><span class=\"p\">,</span> <span class=\"s1\">'recipe'</span><span class=\"p\">]}</span>\n</pre>\n</div>\n<div id=\"schema\">\n<h4><a href=\"#id23\" rel=\"nofollow\">Schema</a></h4>\n<p><tt>Schema</tt> is the class used to define validation and transformation rules for python dictionaries.\nEach rule is expressed as a list. Like this:</p>\n<pre><span class=\"n\">address_schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"s1\">'house number'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">),</span> <span class=\"n\">Range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">10000</span><span class=\"p\">)],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'street'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">255</span><span class=\"p\">)],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'zipcode'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Regex</span><span class=\"p\">(</span><span class=\"s1\">'\\d{4,5}'</span><span class=\"p\">)],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'country'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"s1\">'France'</span><span class=\"p\">,</span> <span class=\"s1\">'Germany'</span><span class=\"p\">,</span> <span class=\"s1\">'Spain'</span><span class=\"p\">)],</span>\n<span class=\"p\">)</span>\n</pre>\n<p>or this:</p>\n<pre><span class=\"n\">registration_form</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"s1\">'username'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">16</span><span class=\"p\">)],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'password2'</span><span class=\"p\">],</span>\n    <span class=\"p\">[</span>\n        <span class=\"n\">Assert</span><span class=\"p\">(</span>\n            <span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">d</span><span class=\"p\">:</span> <span class=\"n\">d</span><span class=\"p\">[</span><span class=\"s1\">'password'</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"n\">d</span><span class=\"p\">[</span><span class=\"s1\">'password2'</span><span class=\"p\">]),</span>\n            <span class=\"n\">error_message</span> <span class=\"o\">=</span> <span class=\"s2\">\"Passwords don't match\"</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"k\">lambda</span> <span class=\"n\">s</span><span class=\"p\">:</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">encode</span><span class=\"p\">(</span><span class=\"s1\">'utf-8'</span><span class=\"p\">),</span> <span class=\"n\">bcrypt</span><span class=\"o\">.</span><span class=\"n\">encrypt</span><span class=\"p\">,</span> <span class=\"n\">Save</span><span class=\"p\">],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'password2'</span><span class=\"p\">,</span> <span class=\"n\">Delete</span><span class=\"p\">],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'email'</span><span class=\"p\">,</span> <span class=\"n\">Email</span><span class=\"p\">]</span>\n<span class=\"p\">)</span>\n</pre>\n<p>Each rule either apply to a particular field of the dictionary, or it applies to the dictionary\nas a whole. If a rule starts with a filter, or a callable, then the rule applies to the whole dictionary.\nOtherwise (for example if the rule starts with a string like <tt>\"username\"</tt>), then the rule applies to this\nparticular item of the dictionary.</p>\n<p>In the preceding example, the rule</p>\n<pre><span class=\"p\">[</span>\n    <span class=\"n\">Assert</span><span class=\"p\">(</span>\n        <span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">d</span><span class=\"p\">:</span> <span class=\"n\">d</span><span class=\"p\">[</span><span class=\"s1\">'password'</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"n\">d</span><span class=\"p\">[</span><span class=\"s1\">'password2'</span><span class=\"p\">]),</span>\n        <span class=\"n\">error_message</span> <span class=\"o\">=</span> <span class=\"s2\">\"Passwords don't match\"</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">]</span>\n</pre>\n<p>is a global rule. The <tt>Assert</tt> filter is called on the whole dictionary.</p>\n<p>Here\u2019s another example:</p>\n<pre><span class=\"n\">schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"s1\">'first name'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'last name'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span> <span class=\"n\">Length</span><span class=\"p\">(</span><span class=\"nb\">min</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nb\">max</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)],</span>\n    <span class=\"p\">[</span><span class=\"k\">lambda</span> <span class=\"n\">d</span><span class=\"p\">:</span> <span class=\"n\">d</span><span class=\"p\">[</span><span class=\"s1\">'first name'</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"s1\">' '</span> <span class=\"o\">+</span> <span class=\"n\">d</span><span class=\"p\">[</span><span class=\"s1\">'last name'</span><span class=\"p\">],</span> <span class=\"n\">SaveAs</span><span class=\"p\">(</span><span class=\"s1\">'full name'</span><span class=\"p\">)]</span>\n<span class=\"p\">)</span>\n</pre>\n<p>The last rule starts with a callable so it applies to the whole dictionary.\nI guess it\u2019s time to introduce the <tt>SaveAs</tt> instruction.</p>\n<p>Each rule can optionally end with a storage instruction: <tt>SaveAs</tt>, <tt>MoveTo</tt>, <tt>Save</tt> or <tt>Delete</tt>.</p>\n<div id=\"saveas\">\n<h5><a href=\"#id24\" rel=\"nofollow\">SaveAs</a></h5>\n<p>Use SaveAs at the end of chain to save the current value under another key.\nKeep in mind that it doesn\u2019t modify the input dictionary. The modification is seen only\nin the output dictionary (the return value of the <tt>validate</tt> method).</p>\n<p>Example:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">original</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">'age'</span><span class=\"p\">:</span> <span class=\"mf\">25.4</span><span class=\"p\">}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Schema</span><span class=\"p\">([</span><span class=\"s1\">'age'</span><span class=\"p\">,</span> <span class=\"nb\">round</span><span class=\"p\">,</span> <span class=\"n\">SaveAs</span><span class=\"p\">(</span><span class=\"s1\">'age_round'</span><span class=\"p\">)])</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">original</span><span class=\"p\">)</span>\n<span class=\"p\">{</span><span class=\"s1\">'age'</span><span class=\"p\">:</span> <span class=\"mf\">25.4</span><span class=\"p\">,</span> <span class=\"s1\">'age_round'</span><span class=\"p\">:</span> <span class=\"mi\">25</span><span class=\"p\">}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">original</span>\n<span class=\"p\">{</span><span class=\"s1\">'age'</span><span class=\"p\">:</span> <span class=\"mf\">25.4</span><span class=\"p\">}</span>\n</pre>\n</div>\n<div id=\"moveto\">\n<h5><a href=\"#id25\" rel=\"nofollow\">MoveTo</a></h5>\n<p>Use MoveTo at the end of a chain to move an item under another key, and delete the current key.\nKeep in mind that it doesn\u2019t modify the input dictionary. The modification is seen only\nin the output dictionary (the return value of the <tt>validate</tt> method).</p>\n<p>Example:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">original</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">'age'</span><span class=\"p\">:</span> <span class=\"mf\">25.4</span><span class=\"p\">}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Schema</span><span class=\"p\">([</span><span class=\"s1\">'age'</span><span class=\"p\">,</span> <span class=\"nb\">round</span><span class=\"p\">,</span> <span class=\"n\">MoveTo</span><span class=\"p\">(</span><span class=\"s1\">'age_round'</span><span class=\"p\">)])</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">original</span><span class=\"p\">)</span>\n<span class=\"p\">{</span><span class=\"s1\">'age_round'</span><span class=\"p\">:</span> <span class=\"mi\">25</span><span class=\"p\">}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">original</span>\n<span class=\"p\">{</span><span class=\"s1\">'age'</span><span class=\"p\">:</span> <span class=\"mf\">25.4</span><span class=\"p\">}</span>\n</pre>\n</div>\n<div id=\"save\">\n<h5><a href=\"#id26\" rel=\"nofollow\">Save</a></h5>\n<p>Use Save at the end of a chain in order to save the current value under the current key.\nKeep in mind that it doesn\u2019t modify the input dictionary. The modification is seen only\nin the output dictionary (the return value of the <tt>validate</tt> method).</p>\n<p>Example:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">original</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">'age'</span><span class=\"p\">:</span> <span class=\"mf\">25.4</span><span class=\"p\">}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Schema</span><span class=\"p\">([</span><span class=\"s1\">'age'</span><span class=\"p\">,</span> <span class=\"nb\">round</span><span class=\"p\">,</span> <span class=\"n\">Save</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">()</span>\n<span class=\"p\">{</span><span class=\"s1\">'age'</span><span class=\"p\">:</span> <span class=\"mi\">25</span><span class=\"p\">}</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">original</span>\n<span class=\"p\">{</span><span class=\"s1\">'age'</span><span class=\"p\">:</span> <span class=\"mf\">25.4</span><span class=\"p\">}</span>\n</pre>\n</div>\n<div id=\"delete\">\n<h5><a href=\"#id27\" rel=\"nofollow\">Delete</a></h5>\n<p>Use Delete at the end of a chain to delete the current key.\nKeep in mind that it doesn\u2019t modify the input dictionary. The modification is seen only\nin the output dictionary (the return value of the <tt>validate</tt> method).</p>\n<p>I have to introduce 3 other useful instructions now: <tt>Optional</tt>, <tt>Default</tt> and <tt>Discard</tt>.</p>\n</div>\n<div id=\"optional\">\n<h5><a href=\"#id28\" rel=\"nofollow\">Optional</a></h5>\n<p>Optional should be placed after a field name in a chain.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">icecream_order</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'flavour'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"s1\">'vanilla'</span><span class=\"p\">,</span> <span class=\"s1\">'chocolate'</span><span class=\"p\">,</span> <span class=\"s1\">'pistachio'</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'topping'</span><span class=\"p\">,</span> <span class=\"n\">Optional</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"s1\">'whipped cream'</span><span class=\"p\">,</span> <span class=\"s1\">'chocolate sprinkles'</span><span class=\"p\">,</span> <span class=\"s1\">'peanuts'</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'quantity'</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">Range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">12</span><span class=\"p\">)]</span>\n    <span class=\"p\">)</span>\n</pre>\n<p>The schema will just skip to the next rule if it doesn\u2019t find the key in the dictionary.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">icecream_order</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'flavour'</span><span class=\"p\">:</span> <span class=\"s1\">'vanilla'</span><span class=\"p\">,</span> <span class=\"s1\">'quantity'</span><span class=\"p\">:</span> <span class=\"mi\">4</span><span class=\"p\">})</span>\n<span class=\"p\">{</span><span class=\"s1\">'flavour'</span><span class=\"p\">:</span> <span class=\"s1\">'vanilla'</span><span class=\"p\">,</span> <span class=\"s1\">'quantity'</span><span class=\"p\">:</span> <span class=\"mi\">4</span><span class=\"p\">}</span>\n</pre>\n</div>\n<div id=\"default\">\n<h5><a href=\"#id29\" rel=\"nofollow\">Default</a></h5>\n<p><tt>Default</tt> should be placed after a field name in a chain.\nThe <tt>Default</tt> constructor takes an object or a callable as an argument.</p>\n<p>Example:</p>\n<pre><span class=\"p\">[</span><span class=\"s1\">'currency'</span><span class=\"p\">,</span> <span class=\"n\">Default</span><span class=\"p\">(</span><span class=\"s1\">'USD'</span><span class=\"p\">)]</span>\n</pre>\n<p>Example (using a callable):</p>\n<pre><span class=\"p\">[</span><span class=\"s1\">'username'</span><span class=\"p\">,</span> <span class=\"n\">Default</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">d</span><span class=\"p\">:</span> <span class=\"s1\">''</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">random</span><span class=\"o\">.</span><span class=\"n\">choice</span><span class=\"p\">(</span><span class=\"n\">string</span><span class=\"o\">.</span><span class=\"n\">ascii_lowercase</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">_</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">6</span><span class=\"p\">)))]</span>\n</pre>\n<p>This would generate a random username if no username was supplied.</p>\n<p>If you pass a callable, this should be a unary function. It will be passed the whole dictionary.\nThis way, it is possible to set a default value for a field using other items of the dictionary. For example:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'email'</span><span class=\"p\">,</span> <span class=\"n\">Email</span><span class=\"p\">],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'username'</span><span class=\"p\">,</span> <span class=\"n\">Default</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">d</span><span class=\"p\">:</span> <span class=\"n\">d</span><span class=\"p\">[</span><span class=\"s1\">'email'</span><span class=\"p\">])]</span>\n    <span class=\"p\">)</span>\n</pre>\n<p>This would set the username to be the email address if no username was supplied.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'email'</span><span class=\"p\">:</span> <span class=\"s1\">'the-king@example.com'</span><span class=\"p\">})</span>\n<span class=\"p\">{</span><span class=\"s1\">'email'</span><span class=\"p\">:</span> <span class=\"s1\">'the-king@example.com'</span><span class=\"p\">,</span> <span class=\"s1\">'username'</span><span class=\"p\">:</span> <span class=\"s1\">'the-king@example.com'</span><span class=\"p\">}</span>\n</pre>\n</div>\n<div id=\"discard\">\n<h5><a href=\"#id30\" rel=\"nofollow\">Discard</a></h5>\n<p><tt>Discard</tt> should be placed after a field name in a chain.\n<tt>Discard</tt> is used to indicate that if a key in the input dictionary contains a particular value, this\nkey should be regarded as absent from the dictionary.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'name'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'address'</span><span class=\"p\">,</span> <span class=\"n\">Discard</span><span class=\"p\">(</span><span class=\"s1\">''</span><span class=\"p\">),</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'name'</span><span class=\"p\">:</span> <span class=\"s1\">'Marcel Bichon'</span><span class=\"p\">,</span> <span class=\"s1\">'address'</span><span class=\"p\">:</span> <span class=\"s1\">''</span><span class=\"p\">})</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'address'</span><span class=\"p\">:</span> <span class=\"s1\">'Field is missing.'</span><span class=\"p\">}</span>\n</pre>\n<p>It can prove useful to combine <tt>Discard</tt> with <tt>Optional</tt>:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'name'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'address'</span><span class=\"p\">,</span> <span class=\"n\">Discard</span><span class=\"p\">(</span><span class=\"s1\">''</span><span class=\"p\">),</span> <span class=\"n\">Optional</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'name'</span><span class=\"p\">:</span> <span class=\"s1\">'Marcel Bichon'</span><span class=\"p\">,</span> <span class=\"s1\">'address'</span><span class=\"p\">:</span> <span class=\"s1\">''</span><span class=\"p\">})</span>\n<span class=\"p\">{</span><span class=\"s1\">'name'</span><span class=\"p\">:</span> <span class=\"s1\">'Marcel Bichon'</span><span class=\"p\">}</span>\n</pre>\n<p>Or with <tt>Default</tt>:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">household_schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'married'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">bool</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'number of children'</span><span class=\"p\">,</span> <span class=\"n\">Discard</span><span class=\"p\">(</span><span class=\"s1\">''</span><span class=\"p\">),</span> <span class=\"n\">Default</span><span class=\"p\">(</span><span class=\"s1\">'0'</span><span class=\"p\">),</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">Save</span><span class=\"p\">]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">household_schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">({</span><span class=\"s1\">'married'</span><span class=\"p\">:</span> <span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"s1\">'number of children'</span><span class=\"p\">:</span> <span class=\"s1\">''</span><span class=\"p\">})</span>\n<span class=\"p\">{</span><span class=\"s1\">'married'</span><span class=\"p\">:</span> <span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"s1\">'number of children'</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">}</span>\n</pre>\n<p>You can decide to discard multiple values. For example:</p>\n<pre><span class=\"p\">[</span><span class=\"s1\">'task_id'</span><span class=\"p\">,</span> <span class=\"n\">Discard</span><span class=\"p\">(</span><span class=\"s1\">''</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)]</span>\n</pre>\n<p>This would discard both <tt>''</tt> and <tt>None</tt>.</p>\n</div>\n<div id=\"unexpected-keys\">\n<h5><a href=\"#id31\" rel=\"nofollow\">Unexpected Keys</a></h5>\n<p>The Schema constructor takes an optional <tt>unexpected_keys</tt> argument.\nIt defines what should be done with keys that don\u2019t appear in your schema.</p>\n<p>With <tt>unexpected_keys=Schema.FAIL</tt>, the schema will refuse to validate a dictionary if it\ncontains unknown keys. This is the default.</p>\n<p>With <tt>unexpected_keys=Schema.KEEP</tt>, the schema will validate a dictionary even if it\ncontains unknown keys. These unknown items will appear in the output dictionary (the dictionary\nreturned by the <tt>validate</tt> method).</p>\n<p>With <tt>unexpected_keys=Schema.DELETE</tt>, the schema will agree to validate a dictionary that\ncontains unknown keys, but these items won\u2019t appear in the output dictionary.</p>\n</div>\n</div>\n</div>\n</div>\n<div id=\"translation-of-the-error-messages\">\n<h2><a href=\"#id32\" rel=\"nofollow\">Translation of the error messages</a></h2>\n<div id=\"built-in-messages\">\n<h3><a href=\"#id33\" rel=\"nofollow\">Built-in messages</a></h3>\n<p>The <tt>validate</tt> method of the <tt>Filter</tt> class (and its subclasses, like for example, <tt>Schema</tt>),\ntakes an optional <tt>lang</tt> keyword argument.\nUse this <tt>lang</tt> keyword argument to obtain the potential error messages in the desired language.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">editor_schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n        <span class=\"p\">[</span><span class=\"s1\">'name'</span><span class=\"p\">,</span> <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)],</span>\n        <span class=\"p\">[</span><span class=\"s1\">'website'</span><span class=\"p\">,</span> <span class=\"n\">Optional</span><span class=\"p\">,</span> <span class=\"n\">Url</span><span class=\"p\">]</span>\n    <span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">editor_schema</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span>\n        <span class=\"p\">{</span> <span class=\"s1\">'website'</span><span class=\"p\">:</span> <span class=\"s1\">'http://#'</span> <span class=\"p\">},</span>\n        <span class=\"n\">lang</span> <span class=\"o\">=</span> <span class=\"s1\">'fr'</span>\n    <span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">ValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'name'</span><span class=\"p\">:</span> <span class=\"s1\">'Champ manquant.'</span><span class=\"p\">,</span> <span class=\"s1\">'website'</span><span class=\"p\">:</span> <span class=\"s2\">\"Ce n'est pas une url valide.\"</span><span class=\"p\">}</span>\n</pre>\n<p>If the built-in error messages are not available in the language you\u2019re looking for, submit an issue,\nor (if you feel like contributing to the project by translating the messages yourself) a pull request at <a href=\"https://github.com/leforestier/naval\" rel=\"nofollow\">https://github.com/leforestier/naval</a> .</p>\n</div>\n<div id=\"custom-messages\">\n<h3><a href=\"#id34\" rel=\"nofollow\">Custom messages</a></h3>\n<p><em>Naval</em> translation feature relies on the <em>postpone</em> library and the <em>gettext</em> module.\nHere\u2019s how you could define customized translatable error messages.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">postpone</span> <span class=\"kn\">import</span> <span class=\"n\">LazyString</span> <span class=\"k\">as</span> <span class=\"n\">_</span>\n\n<span class=\"n\">pencil_schema</span> <span class=\"o\">=</span> <span class=\"n\">Schema</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"s1\">'thickness'</span><span class=\"p\">,</span>\n        <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">),</span>\n        <span class=\"n\">Range</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"n\">max_message</span> <span class=\"o\">=</span> <span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s2\">\"Maximum thickness is </span><span class=\"si\">{max}</span><span class=\"s2\">.\"</span><span class=\"p\">))</span>\n    <span class=\"p\">],</span>\n    <span class=\"p\">[</span><span class=\"s1\">'color'</span><span class=\"p\">,</span>\n        <span class=\"n\">Type</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">),</span>\n        <span class=\"n\">Regex</span><span class=\"p\">(</span>\n            <span class=\"s1\">'[0-9a-fA-F]</span><span class=\"si\">{6}</span><span class=\"s1\">'</span><span class=\"p\">,</span>\n            <span class=\"n\">error_message</span> <span class=\"o\">=</span> <span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s2\">\"This is not a valid color.\"</span><span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">]</span>\n<span class=\"p\">)</span>\n</pre>\n<p>You just added two new messages that aren\u2019t translatable yet.</p>\n<p><em>Naval</em>\u2019s <tt>locale</tt> directory contain the translations for the standard <em>Naval</em> messages.\nYou should copy this directory. For example, if you\u2019ve installed the naval library inside\n/usr/local/lib/python3.5/site-packages:</p>\n<blockquote>\n$ cp -r /usr/local/lib/python3.5/site-packages/naval/locale /home/myuser/myapp/naval-locale</blockquote>\n<p>Then add your translations to the relevant .po files and, in your application code, insert the line:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">naval</span>\n<span class=\"n\">naval</span><span class=\"o\">.</span><span class=\"n\">settings</span><span class=\"o\">.</span><span class=\"n\">locale_directory</span> <span class=\"o\">=</span> <span class=\"s1\">'/home/myuser/myapp/naval-locale'</span>\n</pre>\n<p>After that, <em>Naval</em> will search for translations in the directory <tt><span class=\"pre\">'/home/myuser/myapp/naval-locale'</span></tt>\ninstead of <em>Naval</em>\u2019s default locale directory.</p>\n</div>\n</div>\n<div id=\"id1\">\n<span id=\"table-of-contents\"></span><h2><a href=\"#id35\" rel=\"nofollow\">Table of contents</a></h2>\n<div id=\"contents\">\n<p>Contents</p>\n<ul>\n<li><a href=\"#naval-is-a-validation-library\" id=\"id2\" rel=\"nofollow\">Naval is a validation library</a></li>\n<li><a href=\"#examples-of-use\" id=\"id3\" rel=\"nofollow\">Examples of use</a><ul>\n<li><a href=\"#simple-validation\" id=\"id4\" rel=\"nofollow\">Simple validation</a></li>\n<li><a href=\"#validation-and-transformation\" id=\"id5\" rel=\"nofollow\">Validation and transformation</a></li>\n<li><a href=\"#composing-schemas\" id=\"id6\" rel=\"nofollow\">Composing schemas</a></li>\n<li><a href=\"#internationalization\" id=\"id7\" rel=\"nofollow\">Internationalization</a></li>\n</ul>\n</li>\n<li><a href=\"#filters\" id=\"id8\" rel=\"nofollow\">Filters</a><ul>\n<li><a href=\"#elementary-filters\" id=\"id9\" rel=\"nofollow\">Elementary filters</a><ul>\n<li><a href=\"#range\" id=\"id10\" rel=\"nofollow\">Range</a></li>\n<li><a href=\"#length\" id=\"id11\" rel=\"nofollow\">Length</a></li>\n<li><a href=\"#type\" id=\"id12\" rel=\"nofollow\">Type</a></li>\n<li><a href=\"#regex\" id=\"id13\" rel=\"nofollow\">Regex</a></li>\n<li><a href=\"#email\" id=\"id14\" rel=\"nofollow\">Email</a></li>\n<li><a href=\"#url\" id=\"id15\" rel=\"nofollow\">Url</a></li>\n<li><a href=\"#domain\" id=\"id16\" rel=\"nofollow\">Domain</a></li>\n<li><a href=\"#assert\" id=\"id17\" rel=\"nofollow\">Assert</a></li>\n<li><a href=\"#apply\" id=\"id18\" rel=\"nofollow\">Apply</a></li>\n<li><a href=\"#in\" id=\"id19\" rel=\"nofollow\">In</a></li>\n</ul>\n</li>\n<li><a href=\"#filter-builders\" id=\"id20\" rel=\"nofollow\">Filter builders</a><ul>\n<li><a href=\"#do\" id=\"id21\" rel=\"nofollow\">Do</a></li>\n<li><a href=\"#each\" id=\"id22\" rel=\"nofollow\">Each</a></li>\n<li><a href=\"#schema\" id=\"id23\" rel=\"nofollow\">Schema</a><ul>\n<li><a href=\"#saveas\" id=\"id24\" rel=\"nofollow\">SaveAs</a></li>\n<li><a href=\"#moveto\" id=\"id25\" rel=\"nofollow\">MoveTo</a></li>\n<li><a href=\"#save\" id=\"id26\" rel=\"nofollow\">Save</a></li>\n<li><a href=\"#delete\" id=\"id27\" rel=\"nofollow\">Delete</a></li>\n<li><a href=\"#optional\" id=\"id28\" rel=\"nofollow\">Optional</a></li>\n<li><a href=\"#default\" id=\"id29\" rel=\"nofollow\">Default</a></li>\n<li><a href=\"#discard\" id=\"id30\" rel=\"nofollow\">Discard</a></li>\n<li><a href=\"#unexpected-keys\" id=\"id31\" rel=\"nofollow\">Unexpected Keys</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#translation-of-the-error-messages\" id=\"id32\" rel=\"nofollow\">Translation of the error messages</a><ul>\n<li><a href=\"#built-in-messages\" id=\"id33\" rel=\"nofollow\">Built-in messages</a></li>\n<li><a href=\"#custom-messages\" id=\"id34\" rel=\"nofollow\">Custom messages</a></li>\n</ul>\n</li>\n<li><a href=\"#id1\" id=\"id35\" rel=\"nofollow\">Table of contents</a></li>\n</ul>\n</div>\n</div>\n\n          </div>"}, "last_serial": 5359765, "releases": {"0.5.0": [{"comment_text": "", "digests": {"md5": "08c3c559a7f20e4d420a227a3674af3e", "sha256": "b8c97c47fca2083eb93d1c5bd60e6aa59c68772a0044d222213260390df1a7ea"}, "downloads": -1, "filename": "naval-0.5.0.tar.gz", "has_sig": false, "md5_digest": "08c3c559a7f20e4d420a227a3674af3e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23755, "upload_time": "2016-01-07T22:27:43", "upload_time_iso_8601": "2016-01-07T22:27:43.847362Z", "url": "https://files.pythonhosted.org/packages/77/f0/266d8553271ad395bc9ebb9c46d9c73657de429a13a6bd7f6ae2e3063fc3/naval-0.5.0.tar.gz", "yanked": false}, {"comment_text": "", "digests": {"md5": "a076c1fe671c0d0666aee2e102bf0635", "sha256": "9bed80da6b90bb547743f8e594d449a55e1833eed8125fbd1a25b470263dec5f"}, "downloads": -1, "filename": "naval-0.5.0.zip", "has_sig": false, "md5_digest": "a076c1fe671c0d0666aee2e102bf0635", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 29271, "upload_time": "2016-01-07T22:27:49", "upload_time_iso_8601": "2016-01-07T22:27:49.839871Z", "url": "https://files.pythonhosted.org/packages/1e/6d/72a3d087d022465f3a74af94d14213280ebca21f6b2ee5b1505bd0e54c47/naval-0.5.0.zip", "yanked": false}], "0.5.1": [{"comment_text": "", "digests": {"md5": "56eaa88d171c9b1f8364d344195ed2e9", "sha256": "ab40ac719baa84587d4e64c2d7d4dab8adcf6aa0cd5cab50346553a40f41e09d"}, "downloads": -1, "filename": "naval-0.5.1.tar.gz", "has_sig": false, "md5_digest": "56eaa88d171c9b1f8364d344195ed2e9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23747, "upload_time": "2016-01-08T10:46:50", "upload_time_iso_8601": "2016-01-08T10:46:50.210091Z", "url": "https://files.pythonhosted.org/packages/d8/de/a0dbe77750805d78d084d92063147ce575afa6af87749ed731bd2d8cdfe2/naval-0.5.1.tar.gz", "yanked": false}, {"comment_text": "", "digests": {"md5": "eb1312942ef4b84ac2b3675c2005c3d9", "sha256": "2dc5de42c477dabaa9e27fd120f5e12b4b4a7a968f5e384aadff969c09e363d1"}, "downloads": -1, "filename": "naval-0.5.1.zip", "has_sig": false, "md5_digest": "eb1312942ef4b84ac2b3675c2005c3d9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 29251, "upload_time": "2016-01-08T10:46:56", "upload_time_iso_8601": "2016-01-08T10:46:56.373687Z", "url": "https://files.pythonhosted.org/packages/96/d0/fd4c67c0f82d9e83e694605b2abbe5ec3515d9465df4459b30ef49887324/naval-0.5.1.zip", "yanked": false}], "0.6.0": [{"comment_text": "", "digests": {"md5": "2db96edcf55df0405e96a182ba0fd7ec", "sha256": "8a113f1cdbe46f110d4585f0b0d62ee16393548e5fed927de261529c4f4019dd"}, "downloads": -1, "filename": "naval-0.6.0.tar.gz", "has_sig": false, "md5_digest": "2db96edcf55df0405e96a182ba0fd7ec", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23958, "upload_time": "2017-01-15T13:03:32", "upload_time_iso_8601": "2017-01-15T13:03:32.356367Z", "url": "https://files.pythonhosted.org/packages/39/27/9f8dbdd0583fed15430c41da6de98b9eacda37b1bea0d0ae8676acd1b67d/naval-0.6.0.tar.gz", "yanked": false}], "0.6.1": [{"comment_text": "", "digests": {"md5": "9f9364b609fc9e634cabee945051c9b3", "sha256": "7a4ae022415dcae53475a912a27e20d99b96c6bf7fdf856d748eef3480bd17a0"}, "downloads": -1, "filename": "naval-0.6.1.tar.gz", "has_sig": false, "md5_digest": "9f9364b609fc9e634cabee945051c9b3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23958, "upload_time": "2017-01-15T16:06:56", "upload_time_iso_8601": "2017-01-15T16:06:56.880603Z", "url": "https://files.pythonhosted.org/packages/8b/78/592d1cddfb7f56734fd15be358b409fcd27fc7ab4eead67b0924c8994c97/naval-0.6.1.tar.gz", "yanked": false}], "0.6.2": [{"comment_text": "", "digests": {"md5": "9041edbd077c4f4c4dc88c1764a5218d", "sha256": "0ad784739ae08b202ad1f6ee34523ba55534790208fc181864a23cbea9fb9a4e"}, "downloads": -1, "filename": "naval-0.6.2.tar.gz", "has_sig": false, "md5_digest": "9041edbd077c4f4c4dc88c1764a5218d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24031, "upload_time": "2017-03-02T17:24:04", "upload_time_iso_8601": "2017-03-02T17:24:04.741886Z", "url": "https://files.pythonhosted.org/packages/20/2c/fdf098c808abc440154cd90eb67c7f50bec0a23584811f9d2f711f8b241b/naval-0.6.2.tar.gz", "yanked": false}], "0.7.0": [{"comment_text": "", "digests": {"md5": "7e6dc3142577dbd2c4df8ff79d892fae", "sha256": "6d404a62727dec23b7e364b7e72696db5ab841d0f7d779845d6d4e0f5873ce61"}, "downloads": -1, "filename": "naval-0.7.0.tar.gz", "has_sig": false, "md5_digest": "7e6dc3142577dbd2c4df8ff79d892fae", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24399, "upload_time": "2017-03-22T12:43:03", "upload_time_iso_8601": "2017-03-22T12:43:03.896759Z", "url": "https://files.pythonhosted.org/packages/ab/cf/237c793d82cd49e73a0fc456f4e9ed3a63cbfa36a41d3d7df77af787fb01/naval-0.7.0.tar.gz", "yanked": false}], "0.8.0": [{"comment_text": "", "digests": {"md5": "561c1f15b811a0cb5371eafc5535ab2f", "sha256": "304562aefab4ca67f69a8e65af8aa5523b8605677ffda77471b7f0be91f944fd"}, "downloads": -1, "filename": "naval-0.8.0.tar.gz", "has_sig": false, "md5_digest": "561c1f15b811a0cb5371eafc5535ab2f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24402, "upload_time": "2017-03-23T09:29:10", "upload_time_iso_8601": "2017-03-23T09:29:10.829336Z", "url": "https://files.pythonhosted.org/packages/ec/34/9d93f2e0c2cffb94969ea800ec924d9551d5483ed2a195ee410919e5b8d7/naval-0.8.0.tar.gz", "yanked": false}], "0.9.0": [{"comment_text": "", "digests": {"md5": "97c34d0d266fe5066519c607d142d2f9", "sha256": "0a99226d985cb9230d6ede54d93b4c4467778ca9b6e467496635005e2313dc38"}, "downloads": -1, "filename": "naval-0.9.0.tar.gz", "has_sig": false, "md5_digest": "97c34d0d266fe5066519c607d142d2f9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24435, "upload_time": "2018-04-26T22:58:42", "upload_time_iso_8601": "2018-04-26T22:58:42.941521Z", "url": "https://files.pythonhosted.org/packages/1b/64/c332751e09ff999f2309b974ef9df1d989d258fe2d9d50ce347cb5945d93/naval-0.9.0.tar.gz", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "a21353086bb081e54a8c787abbb167d2", "sha256": "a74621dcd5b36bb8920f3f907b22c17e58e25fce28f32e533324dc7ce34cae69"}, "downloads": -1, "filename": "naval-1.0.0.tar.gz", "has_sig": false, "md5_digest": "a21353086bb081e54a8c787abbb167d2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 20348, "upload_time": "2019-06-04T21:32:04", "upload_time_iso_8601": "2019-06-04T21:32:04.822385Z", "url": "https://files.pythonhosted.org/packages/3e/72/aaec535bb9b5172ede4ffcfb82af184208387be537f8a7d84554373e8804/naval-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "a21353086bb081e54a8c787abbb167d2", "sha256": "a74621dcd5b36bb8920f3f907b22c17e58e25fce28f32e533324dc7ce34cae69"}, "downloads": -1, "filename": "naval-1.0.0.tar.gz", "has_sig": false, "md5_digest": "a21353086bb081e54a8c787abbb167d2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 20348, "upload_time": "2019-06-04T21:32:04", "upload_time_iso_8601": "2019-06-04T21:32:04.822385Z", "url": "https://files.pythonhosted.org/packages/3e/72/aaec535bb9b5172ede4ffcfb82af184208387be537f8a7d84554373e8804/naval-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:47:13 2020"}