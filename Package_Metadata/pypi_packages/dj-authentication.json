{"info": {"author": "Aiakos Contributors", "author_email": "aiakos@aiakosauth.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Framework :: Django", "Framework :: Django :: 2.0", "Framework :: Django :: 2.1", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3 :: Only", "Topic :: System :: Systems Administration :: Authentication/Directory"], "description": "# Nice authentication support for Django\n\nThis is a simple, ready-to-use module for handling any standard kind of authentication in Django apps, without writing any code. However - if you have greater needs - this is also a uniform, configurable and extensible framework you can use to do whatever you need.\n\n## Features\n* Per-request authentication: common base for supporting any number of standard HTTP auth methods, and HTTP Basic and OAuth Bearer Token auth methods included\n* OpenID Connect module: support for OpenID Connect token verification and issuance.\n* Modular, uniform architecture: you can mix and match different auth mechanisms, and everything will just work!\n\nWe are only getting started. More generic auth mechanisms are going to be added in the future (see Planned features).\n\n## Requirements\n* Django 2.0+\n\n## Installation\n```sh\npip install dj-authentication\n```\n\n### settings.py\n* Add `'dj_authentication'` to the list of `INSTALLED_APPS`.\n* Remove `'django.contrib.auth.middleware.AuthenticationMiddleware'` from the list of `MIDDLEWARE`s.\n* Add `dj_authentication.request_http_auth.HTTPAuthMiddleware` to the list of `MIDDLEWARE`s.\n* Choose backends used for determining `request.user`, for example:\n```python\nREQUEST_USER_BACKENDS = [\n    'dj_authentication.methods.basic', # HTTP Basic Auth\n    'dj_authentication.methods.bearer', # OAuth Bearer Token Auth\n    'django.contrib.auth',\n]\n```\n\n## Per-request auth methods\n\n### Basic auth\nThis method checks the provided username and password against configured Django authentication backends.\n\n#### Tips\nTo trigger an authentication dialog in a browser, if the user is not authenticated:\n```python\nif not request.user.is_authenticated:\n    return HttpResponse(status=401)\n```\n\n### Bearer auth\nThis method checks the provided bearer token against the OpenID Connect module, described below.\n\n## `openid` module - OpenID Connect / OAuth support\n`dj_authentication` includes an implementation of OpenID Connect / OAuth token verification and issuance.\n\nYou can configure the list of trusted OpenID Providers by providing their URLs thru `(*_)AUTH_URL` environment variables, like:\n* `GOOGLE_AUTH_URL=https://client_id@accounts.google.com`\n* `FACEBOOK_AUTH_URL=facebook+https://app_id@facebook.com`\n\nAll conforming OpenID Providers are supported; some other services too - see the list at [python-openid-connect](https://gitlab.com/aiakos/python-openid-connect). However, only conforming OpenID Providers that issue id_tokens are supported automatically in the Bearer auth.\n\n### Token verification\nYou can verify tokens using:\n* `dj_authentication.openid.verify()` function - on the OAuth callback URL, you should pass all the GET parameters you've received to this function. Some of the understood parameters are `id_token`, `iss` (for non-OpenID OAuth servers, for example `https://facebook.com`), `token_type`, `access_token`. Note that providing the `iss` parameter is **required** for legacy OAuth servers.\n* `dj_authentication.methods.bearer` request.user backend - you can pass `id_token`s returned by the OpenID Providers in the `Authorization: Bearer` header, and this backend will automatically verify them to provide request.user.\n\n#### How it works?\n* For OpenID Providers, `id_token`s are verified against the [`jwks_uri`](https://tools.ietf.org/html/rfc8414#section-2).\n* For supported legacy OAuth servers, `access_token`s are used to access userinfo endpoints and obtain user information.\n\n#### User mapping\nBy default, `dj_authentication.methods.bearer` sets the `request.user` to a dict with the data decoded from the id_token, with `is_authenticated = True` property added.\n\nTo have it automatically map the ID data to a true user object, set the `MAP_ID_TO_USER_FUNC` variable. dj_authentication provides two ready-to-use functions:\n* `'dj_authentication.user_mappings:map_email'` - it looks up the users by the email address\n* `'dj_authentication.user_mappings:map_sub_to_username'` - it looks up the users using OpenID token subject as the username\n\n### Issuing your own tokens\nYou can also issue and verify your own JWT id_tokens - just set `OPENID_PROVIDER = 'dj_authentication.openid:SimpleDjangoProvider'` in the `settings.py` file and use the `dj_authentication.openid.issue()` function. They will be signed with the Django `SECRET_KEY`.\n\n## Example configurations\n\n### App that supports session-less HTTP Basic auth in addition to standard Django sessions\n```\nREQUEST_USER_BACKENDS = [\n    'dj_authentication.methods.basic',\n    'django.contrib.auth',\n]\n```\n\n### Session-less app that supports only Google id_tokens passed as Bearer tokens\n```\nAUTHENTICATION_BACKENDS = [] # Fully disable session-based auth; you may choose to delete django.contrib.auth from INSTALLED_APPS too.\n\nREQUEST_USER_BACKENDS = [\n    'dj_authentication.methods.bearer',\n]\n\nos.environ['GOOGLE_AUTH_URL'] = 'https://client_id@accounts.google.com'\n```\n\n### App that supports both email-based, Google and Facebook login\n```\nREQUEST_USER_BACKENDS = [\n    'django.contrib.auth',\n]\n\nOPENID_PROVIDER = 'dj_authentication.openid:SimpleDjangoProvider' # for tokens sent in email verification messages\n\nos.environ['GOOGLE_AUTH_URL'] = 'https://client_id@accounts.google.com'\nos.environ['FACEBOOK_AUTH_URL'] = 'facebook+https://app_id@facebook.com'\n```\n\n### App that supports both email-based, Google and Facebook login; and session-less Google id_tokens passed as Bearer tokens\n```\nREQUEST_USER_BACKENDS = [\n    'dj_authentication.methods.bearer',\n    'django.contrib.auth',\n]\n\nOPENID_PROVIDER = 'dj_authentication.openid:SimpleDjangoProvider' # for tokens sent in email verification messages\n\nMAP_ID_TO_USER_FUNC = 'dj_authentication.user_mappings:map_email'\n\nos.environ['GOOGLE_AUTH_URL'] = 'https://client_id@accounts.google.com'\nos.environ['FACEBOOK_AUTH_URL'] = 'facebook+https://app_id@facebook.com'\n```\n\n## Planned features\n* Verification of `access_token` and `code` against `at_hash` and `c_hash` - to return them from `verify()`\n* Support for opaque `id_token`s verified against a single configured OAuth/OIDC auth server thru [Introspection Endpoint](https://tools.ietf.org/html/rfc7662)\n* Support for opaque `id_token`s verified against the Django session system (aka sending the session key as the Bearer token)\n* Support for client certificates (see also [OAuth 2.0 Mutual TLS](https://tools.ietf.org/html/draft-ietf-oauth-mtls-12))\n* Support for [OIDC `private_key_jwt` scheme](https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication)\n* Support for asymmetric signing methods for the issued tokens\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://gitlab.com/aiakos/dj-authentication", "keywords": "http auth authentication basic www-authenticate", "license": "", "maintainer": "", "maintainer_email": "", "name": "dj-authentication", "package_url": "https://pypi.org/project/dj-authentication/", "platform": "", "project_url": "https://pypi.org/project/dj-authentication/", "project_urls": {"Homepage": "https://gitlab.com/aiakos/dj-authentication"}, "release_url": "https://pypi.org/project/dj-authentication/0.2.0/", "requires_dist": ["django (>=2.0.0)", "openid-connect (>=0.5.0)", "dj12 (>=0.3.0)"], "requires_python": "", "summary": "Nice HTTP authentication support for Django", "version": "0.2.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Nice authentication support for Django</h1>\n<p>This is a simple, ready-to-use module for handling any standard kind of authentication in Django apps, without writing any code. However - if you have greater needs - this is also a uniform, configurable and extensible framework you can use to do whatever you need.</p>\n<h2>Features</h2>\n<ul>\n<li>Per-request authentication: common base for supporting any number of standard HTTP auth methods, and HTTP Basic and OAuth Bearer Token auth methods included</li>\n<li>OpenID Connect module: support for OpenID Connect token verification and issuance.</li>\n<li>Modular, uniform architecture: you can mix and match different auth mechanisms, and everything will just work!</li>\n</ul>\n<p>We are only getting started. More generic auth mechanisms are going to be added in the future (see Planned features).</p>\n<h2>Requirements</h2>\n<ul>\n<li>Django 2.0+</li>\n</ul>\n<h2>Installation</h2>\n<pre>pip install dj-authentication\n</pre>\n<h3>settings.py</h3>\n<ul>\n<li>Add <code>'dj_authentication'</code> to the list of <code>INSTALLED_APPS</code>.</li>\n<li>Remove <code>'django.contrib.auth.middleware.AuthenticationMiddleware'</code> from the list of <code>MIDDLEWARE</code>s.</li>\n<li>Add <code>dj_authentication.request_http_auth.HTTPAuthMiddleware</code> to the list of <code>MIDDLEWARE</code>s.</li>\n<li>Choose backends used for determining <code>request.user</code>, for example:</li>\n</ul>\n<pre><span class=\"n\">REQUEST_USER_BACKENDS</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"s1\">'dj_authentication.methods.basic'</span><span class=\"p\">,</span> <span class=\"c1\"># HTTP Basic Auth</span>\n    <span class=\"s1\">'dj_authentication.methods.bearer'</span><span class=\"p\">,</span> <span class=\"c1\"># OAuth Bearer Token Auth</span>\n    <span class=\"s1\">'django.contrib.auth'</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n</pre>\n<h2>Per-request auth methods</h2>\n<h3>Basic auth</h3>\n<p>This method checks the provided username and password against configured Django authentication backends.</p>\n<h4>Tips</h4>\n<p>To trigger an authentication dialog in a browser, if the user is not authenticated:</p>\n<pre><span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">is_authenticated</span><span class=\"p\">:</span>\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"o\">=</span><span class=\"mi\">401</span><span class=\"p\">)</span>\n</pre>\n<h3>Bearer auth</h3>\n<p>This method checks the provided bearer token against the OpenID Connect module, described below.</p>\n<h2><code>openid</code> module - OpenID Connect / OAuth support</h2>\n<p><code>dj_authentication</code> includes an implementation of OpenID Connect / OAuth token verification and issuance.</p>\n<p>You can configure the list of trusted OpenID Providers by providing their URLs thru <code>(*_)AUTH_URL</code> environment variables, like:</p>\n<ul>\n<li><code>GOOGLE_AUTH_URL=https://client_id@accounts.google.com</code></li>\n<li><code>FACEBOOK_AUTH_URL=facebook+https://app_id@facebook.com</code></li>\n</ul>\n<p>All conforming OpenID Providers are supported; some other services too - see the list at <a href=\"https://gitlab.com/aiakos/python-openid-connect\" rel=\"nofollow\">python-openid-connect</a>. However, only conforming OpenID Providers that issue id_tokens are supported automatically in the Bearer auth.</p>\n<h3>Token verification</h3>\n<p>You can verify tokens using:</p>\n<ul>\n<li><code>dj_authentication.openid.verify()</code> function - on the OAuth callback URL, you should pass all the GET parameters you've received to this function. Some of the understood parameters are <code>id_token</code>, <code>iss</code> (for non-OpenID OAuth servers, for example <code>https://facebook.com</code>), <code>token_type</code>, <code>access_token</code>. Note that providing the <code>iss</code> parameter is <strong>required</strong> for legacy OAuth servers.</li>\n<li><code>dj_authentication.methods.bearer</code> request.user backend - you can pass <code>id_token</code>s returned by the OpenID Providers in the <code>Authorization: Bearer</code> header, and this backend will automatically verify them to provide request.user.</li>\n</ul>\n<h4>How it works?</h4>\n<ul>\n<li>For OpenID Providers, <code>id_token</code>s are verified against the <a href=\"https://tools.ietf.org/html/rfc8414#section-2\" rel=\"nofollow\"><code>jwks_uri</code></a>.</li>\n<li>For supported legacy OAuth servers, <code>access_token</code>s are used to access userinfo endpoints and obtain user information.</li>\n</ul>\n<h4>User mapping</h4>\n<p>By default, <code>dj_authentication.methods.bearer</code> sets the <code>request.user</code> to a dict with the data decoded from the id_token, with <code>is_authenticated = True</code> property added.</p>\n<p>To have it automatically map the ID data to a true user object, set the <code>MAP_ID_TO_USER_FUNC</code> variable. dj_authentication provides two ready-to-use functions:</p>\n<ul>\n<li><code>'dj_authentication.user_mappings:map_email'</code> - it looks up the users by the email address</li>\n<li><code>'dj_authentication.user_mappings:map_sub_to_username'</code> - it looks up the users using OpenID token subject as the username</li>\n</ul>\n<h3>Issuing your own tokens</h3>\n<p>You can also issue and verify your own JWT id_tokens - just set <code>OPENID_PROVIDER = 'dj_authentication.openid:SimpleDjangoProvider'</code> in the <code>settings.py</code> file and use the <code>dj_authentication.openid.issue()</code> function. They will be signed with the Django <code>SECRET_KEY</code>.</p>\n<h2>Example configurations</h2>\n<h3>App that supports session-less HTTP Basic auth in addition to standard Django sessions</h3>\n<pre><code>REQUEST_USER_BACKENDS = [\n    'dj_authentication.methods.basic',\n    'django.contrib.auth',\n]\n</code></pre>\n<h3>Session-less app that supports only Google id_tokens passed as Bearer tokens</h3>\n<pre><code>AUTHENTICATION_BACKENDS = [] # Fully disable session-based auth; you may choose to delete django.contrib.auth from INSTALLED_APPS too.\n\nREQUEST_USER_BACKENDS = [\n    'dj_authentication.methods.bearer',\n]\n\nos.environ['GOOGLE_AUTH_URL'] = 'https://client_id@accounts.google.com'\n</code></pre>\n<h3>App that supports both email-based, Google and Facebook login</h3>\n<pre><code>REQUEST_USER_BACKENDS = [\n    'django.contrib.auth',\n]\n\nOPENID_PROVIDER = 'dj_authentication.openid:SimpleDjangoProvider' # for tokens sent in email verification messages\n\nos.environ['GOOGLE_AUTH_URL'] = 'https://client_id@accounts.google.com'\nos.environ['FACEBOOK_AUTH_URL'] = 'facebook+https://app_id@facebook.com'\n</code></pre>\n<h3>App that supports both email-based, Google and Facebook login; and session-less Google id_tokens passed as Bearer tokens</h3>\n<pre><code>REQUEST_USER_BACKENDS = [\n    'dj_authentication.methods.bearer',\n    'django.contrib.auth',\n]\n\nOPENID_PROVIDER = 'dj_authentication.openid:SimpleDjangoProvider' # for tokens sent in email verification messages\n\nMAP_ID_TO_USER_FUNC = 'dj_authentication.user_mappings:map_email'\n\nos.environ['GOOGLE_AUTH_URL'] = 'https://client_id@accounts.google.com'\nos.environ['FACEBOOK_AUTH_URL'] = 'facebook+https://app_id@facebook.com'\n</code></pre>\n<h2>Planned features</h2>\n<ul>\n<li>Verification of <code>access_token</code> and <code>code</code> against <code>at_hash</code> and <code>c_hash</code> - to return them from <code>verify()</code></li>\n<li>Support for opaque <code>id_token</code>s verified against a single configured OAuth/OIDC auth server thru <a href=\"https://tools.ietf.org/html/rfc7662\" rel=\"nofollow\">Introspection Endpoint</a></li>\n<li>Support for opaque <code>id_token</code>s verified against the Django session system (aka sending the session key as the Bearer token)</li>\n<li>Support for client certificates (see also <a href=\"https://tools.ietf.org/html/draft-ietf-oauth-mtls-12\" rel=\"nofollow\">OAuth 2.0 Mutual TLS</a>)</li>\n<li>Support for <a href=\"https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication\" rel=\"nofollow\">OIDC <code>private_key_jwt</code> scheme</a></li>\n<li>Support for asymmetric signing methods for the issued tokens</li>\n</ul>\n\n          </div>"}, "last_serial": 5267441, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "15e5099018019cfcb33faff31a485c38", "sha256": "546d621aab227b6ccdc7ef1b9359dcc727462a5e18fd0d34e843ffadacd72122"}, "downloads": -1, "filename": "dj_authentication-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "15e5099018019cfcb33faff31a485c38", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5919, "upload_time": "2019-01-28T16:47:57", "upload_time_iso_8601": "2019-01-28T16:47:57.532400Z", "url": "https://files.pythonhosted.org/packages/c5/de/2962aa9df469e4a69155d33e8b036dcc89fc1863c23887e84ed5bfe5cf73/dj_authentication-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8f74cbb3a5a09ee8442ef65e10363f66", "sha256": "543786dd013b822e82e085c988d09da614d03898cd68b88a428dc179dbee40a6"}, "downloads": -1, "filename": "dj-authentication-0.1.0.tar.gz", "has_sig": false, "md5_digest": "8f74cbb3a5a09ee8442ef65e10363f66", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4069, "upload_time": "2019-01-28T16:47:59", "upload_time_iso_8601": "2019-01-28T16:47:59.936644Z", "url": "https://files.pythonhosted.org/packages/fe/a1/cb55e807927482146860c48f4d8b0fc23d37bc6f7ca4fc95620480907a2b/dj-authentication-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "ebda09db84542cec0a2bb7d96e094195", "sha256": "f7fd01b7fb528ae3336d1c57e7ef875f76b294394be844af986f3bdece640156"}, "downloads": -1, "filename": "dj_authentication-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "ebda09db84542cec0a2bb7d96e094195", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 6637, "upload_time": "2019-01-28T17:04:23", "upload_time_iso_8601": "2019-01-28T17:04:23.928256Z", "url": "https://files.pythonhosted.org/packages/1d/0f/dd09d7f4ea69562bbb12abc83fbcb088a949d1e3cc32ed0e3018902d0a07/dj_authentication-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8bc879e3ca5655b43b4ecd9bd0196453", "sha256": "f1355c0973f042d6f1342f1ef96daad05486d0027eb09b8ac16ebd8a9706eb9e"}, "downloads": -1, "filename": "dj-authentication-0.1.1.tar.gz", "has_sig": false, "md5_digest": "8bc879e3ca5655b43b4ecd9bd0196453", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4418, "upload_time": "2019-01-28T17:04:25", "upload_time_iso_8601": "2019-01-28T17:04:25.260352Z", "url": "https://files.pythonhosted.org/packages/19/06/a35f0f2606dfbd2f93a2d1fcc4d7a69094e5a5da9fc918dc06ee058ea2ff/dj-authentication-0.1.1.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "8fb0ef7d15f696975dcad897cbf083d5", "sha256": "0eae96c86213cef281e453f89b6a404556e8f7b5c01bc703200e102e1f988b81"}, "downloads": -1, "filename": "dj_authentication-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8fb0ef7d15f696975dcad897cbf083d5", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9406, "upload_time": "2019-05-14T13:36:51", "upload_time_iso_8601": "2019-05-14T13:36:51.950451Z", "url": "https://files.pythonhosted.org/packages/7c/ad/9293ca7e52b203ab65023646fa58b71fedb3d741b4e772d62c0fa96054a3/dj_authentication-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "78fb8513f03e422e54c9bff6b9dafd1a", "sha256": "eca4e0a15d8983d8d8dfa8f3a8208d6ca594e02a935a4cd7b8154f21d5d4a2c7"}, "downloads": -1, "filename": "dj-authentication-0.2.0.tar.gz", "has_sig": false, "md5_digest": "78fb8513f03e422e54c9bff6b9dafd1a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7004, "upload_time": "2019-05-14T13:36:53", "upload_time_iso_8601": "2019-05-14T13:36:53.589408Z", "url": "https://files.pythonhosted.org/packages/b8/9b/2cb9267ca72fe405608d1cf5ab2d6a23fc9643156576b7439a2bc5ed1a15/dj-authentication-0.2.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "8fb0ef7d15f696975dcad897cbf083d5", "sha256": "0eae96c86213cef281e453f89b6a404556e8f7b5c01bc703200e102e1f988b81"}, "downloads": -1, "filename": "dj_authentication-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8fb0ef7d15f696975dcad897cbf083d5", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9406, "upload_time": "2019-05-14T13:36:51", "upload_time_iso_8601": "2019-05-14T13:36:51.950451Z", "url": "https://files.pythonhosted.org/packages/7c/ad/9293ca7e52b203ab65023646fa58b71fedb3d741b4e772d62c0fa96054a3/dj_authentication-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "78fb8513f03e422e54c9bff6b9dafd1a", "sha256": "eca4e0a15d8983d8d8dfa8f3a8208d6ca594e02a935a4cd7b8154f21d5d4a2c7"}, "downloads": -1, "filename": "dj-authentication-0.2.0.tar.gz", "has_sig": false, "md5_digest": "78fb8513f03e422e54c9bff6b9dafd1a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7004, "upload_time": "2019-05-14T13:36:53", "upload_time_iso_8601": "2019-05-14T13:36:53.589408Z", "url": "https://files.pythonhosted.org/packages/b8/9b/2cb9267ca72fe405608d1cf5ab2d6a23fc9643156576b7439a2bc5ed1a15/dj-authentication-0.2.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:51:41 2020"}