{"info": {"author": "Eloy F\u00e9lix", "author_email": "eloyfelix@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 2 - Pre-Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: POSIX :: Linux", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# CBL Migrator\n\nSmall SQLAlchemy based library that migrates Oracle DBs to MySQL, PostgreSQL and SQLite. Used in ChEMBL dumps generation process.\n\nto use it, as a Python library:\n\n```python\nfrom cbl_migrator import DbMigrator\n\norigin = 'oracle://{user}:{pass}@{host}:{port}/{sid}?encoding=utf8'\ndest = 'postgresql://{user}:{pass}@{host}:{port}/{dbname}?client_encoding=utf8'\n\nmigrator = DbMigrator(origin, dest, ['excluded_table1', 'excluded_table2'], n_workers=4)\nmigrator.migrate()\n```\n\ndirectly from the command line:\n```bash\ncbl-migrator oracle://{user}:{pass}@{host}:{port}/{sid}?encoding=utf8 postgresql://{user}:{pass}@{host}:{port}/{dbname}?client_encoding=utf8 --n_workers 4 \n```\n\n## What it does (in order of events)\n\n- Copies tables from origin to dest using the closest data type for each field. No constraints except PKs are initially copied across.\n- Table contents are migrated from origin to dest tables. In parallel.\n- If the data migration is succesful it will first generate the constraints and then the indexes. Any index in a field with a previously created UK will be skipped (UKs are implemented as unique indexes).\n- It logs every time it was not possible to migrate an object, e.g., ```(psycopg2.OperationalError) index row size 2856 exceeds maximum 2712 for index.```\n\n## What it does not do\n\n- It won't migrate any table without a PK. May hang with a table without PK and containing an UK field referenced as FK in another table.\n- It does not try to migrate server default values.\n- It does not set autoincremental fields.\n- It does not try to migrate triggers nor procedures.\n\n## SQLite\n\nSQLite can not:\n\n- concurrently write\n- alter table ADD CONSTRAINT\n\nSo only one core is used when migrating to it. All constraints are generated at the time of generating the destination tables and it sequentially inserts rows in tables in correct FKs order.\n\n\n## MySQL\n\nCLOBs are migrated to LONGTEXT.", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/chembl/cbl_migrator", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "cbl-migrator", "package_url": "https://pypi.org/project/cbl-migrator/", "platform": "", "project_url": "https://pypi.org/project/cbl-migrator/", "project_urls": {"Homepage": "https://github.com/chembl/cbl_migrator"}, "release_url": "https://pypi.org/project/cbl-migrator/0.1.7/", "requires_dist": null, "requires_python": "", "summary": "Migrates Oracle dbs to PostgreSQL, MySQL and Sqlite", "version": "0.1.7", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>CBL Migrator</h1>\n<p>Small SQLAlchemy based library that migrates Oracle DBs to MySQL, PostgreSQL and SQLite. Used in ChEMBL dumps generation process.</p>\n<p>to use it, as a Python library:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">cbl_migrator</span> <span class=\"kn\">import</span> <span class=\"n\">DbMigrator</span>\n\n<span class=\"n\">origin</span> <span class=\"o\">=</span> <span class=\"s1\">'oracle://</span><span class=\"si\">{user}</span><span class=\"s1\">:</span><span class=\"si\">{pass}</span><span class=\"s1\">@</span><span class=\"si\">{host}</span><span class=\"s1\">:</span><span class=\"si\">{port}</span><span class=\"s1\">/</span><span class=\"si\">{sid}</span><span class=\"s1\">?encoding=utf8'</span>\n<span class=\"n\">dest</span> <span class=\"o\">=</span> <span class=\"s1\">'postgresql://</span><span class=\"si\">{user}</span><span class=\"s1\">:</span><span class=\"si\">{pass}</span><span class=\"s1\">@</span><span class=\"si\">{host}</span><span class=\"s1\">:</span><span class=\"si\">{port}</span><span class=\"s1\">/</span><span class=\"si\">{dbname}</span><span class=\"s1\">?client_encoding=utf8'</span>\n\n<span class=\"n\">migrator</span> <span class=\"o\">=</span> <span class=\"n\">DbMigrator</span><span class=\"p\">(</span><span class=\"n\">origin</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">'excluded_table1'</span><span class=\"p\">,</span> <span class=\"s1\">'excluded_table2'</span><span class=\"p\">],</span> <span class=\"n\">n_workers</span><span class=\"o\">=</span><span class=\"mi\">4</span><span class=\"p\">)</span>\n<span class=\"n\">migrator</span><span class=\"o\">.</span><span class=\"n\">migrate</span><span class=\"p\">()</span>\n</pre>\n<p>directly from the command line:</p>\n<pre>cbl-migrator oracle://<span class=\"o\">{</span>user<span class=\"o\">}</span>:<span class=\"o\">{</span>pass<span class=\"o\">}</span>@<span class=\"o\">{</span>host<span class=\"o\">}</span>:<span class=\"o\">{</span>port<span class=\"o\">}</span>/<span class=\"o\">{</span>sid<span class=\"o\">}</span>?encoding<span class=\"o\">=</span>utf8 postgresql://<span class=\"o\">{</span>user<span class=\"o\">}</span>:<span class=\"o\">{</span>pass<span class=\"o\">}</span>@<span class=\"o\">{</span>host<span class=\"o\">}</span>:<span class=\"o\">{</span>port<span class=\"o\">}</span>/<span class=\"o\">{</span>dbname<span class=\"o\">}</span>?client_encoding<span class=\"o\">=</span>utf8 --n_workers <span class=\"m\">4</span> \n</pre>\n<h2>What it does (in order of events)</h2>\n<ul>\n<li>Copies tables from origin to dest using the closest data type for each field. No constraints except PKs are initially copied across.</li>\n<li>Table contents are migrated from origin to dest tables. In parallel.</li>\n<li>If the data migration is succesful it will first generate the constraints and then the indexes. Any index in a field with a previously created UK will be skipped (UKs are implemented as unique indexes).</li>\n<li>It logs every time it was not possible to migrate an object, e.g., <code>(psycopg2.OperationalError) index row size 2856 exceeds maximum 2712 for index.</code></li>\n</ul>\n<h2>What it does not do</h2>\n<ul>\n<li>It won't migrate any table without a PK. May hang with a table without PK and containing an UK field referenced as FK in another table.</li>\n<li>It does not try to migrate server default values.</li>\n<li>It does not set autoincremental fields.</li>\n<li>It does not try to migrate triggers nor procedures.</li>\n</ul>\n<h2>SQLite</h2>\n<p>SQLite can not:</p>\n<ul>\n<li>concurrently write</li>\n<li>alter table ADD CONSTRAINT</li>\n</ul>\n<p>So only one core is used when migrating to it. All constraints are generated at the time of generating the destination tables and it sequentially inserts rows in tables in correct FKs order.</p>\n<h2>MySQL</h2>\n<p>CLOBs are migrated to LONGTEXT.</p>\n\n          </div>"}, "last_serial": 6561840, "releases": {"0.1.3": [{"comment_text": "", "digests": {"md5": "ef54b1e529427cd4c010a2adf1b02ed5", "sha256": "65208c19b17de036d44f9230d273d0cbe63c4c00288975f418b2062ced00665d"}, "downloads": -1, "filename": "cbl_migrator-0.1.3.tar.gz", "has_sig": false, "md5_digest": "ef54b1e529427cd4c010a2adf1b02ed5", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6664, "upload_time": "2020-01-29T13:28:41", "upload_time_iso_8601": "2020-01-29T13:28:41.685936Z", "url": "https://files.pythonhosted.org/packages/79/51/dfd377bbd2d726efa1a05ae55059775b6c8e7f36e793e0dba337098cc430/cbl_migrator-0.1.3.tar.gz", "yanked": false}], "0.1.4": [{"comment_text": "", "digests": {"md5": "44e90a1ce7b7ced279601fe44aac9f7b", "sha256": "ea7704a0f3d390b8cbf35b5f000ab3df22f907e3e9c02b02290709e9d8730d20"}, "downloads": -1, "filename": "cbl_migrator-0.1.4.tar.gz", "has_sig": false, "md5_digest": "44e90a1ce7b7ced279601fe44aac9f7b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6593, "upload_time": "2020-01-29T22:27:49", "upload_time_iso_8601": "2020-01-29T22:27:49.937532Z", "url": "https://files.pythonhosted.org/packages/ed/8e/329a4020fce53b8588e1ae9766525b196bbb4ec14156ee13daf17bcb39ba/cbl_migrator-0.1.4.tar.gz", "yanked": false}], "0.1.5": [{"comment_text": "", "digests": {"md5": "dce8e76aa93e2fbe7dd0d04663ff6df7", "sha256": "824f197e37fc8d6ab546669b81712042c2764ea26fd27f92167179758a537589"}, "downloads": -1, "filename": "cbl_migrator-0.1.5.tar.gz", "has_sig": false, "md5_digest": "dce8e76aa93e2fbe7dd0d04663ff6df7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7517, "upload_time": "2020-01-31T13:06:35", "upload_time_iso_8601": "2020-01-31T13:06:35.185748Z", "url": "https://files.pythonhosted.org/packages/a8/ba/b9456ca9f5f09e989165c7e64ef5fe4931b96053a7b9dc8e953502efd8bd/cbl_migrator-0.1.5.tar.gz", "yanked": false}], "0.1.6": [{"comment_text": "", "digests": {"md5": "5d3bd8cdd2c57ffeca19b6e9ed3f1a49", "sha256": "575fb4cca5d79722406c1577c5b1224158fe0ffa7bf1961cdde78b7e17060a8b"}, "downloads": -1, "filename": "cbl_migrator-0.1.6.tar.gz", "has_sig": false, "md5_digest": "5d3bd8cdd2c57ffeca19b6e9ed3f1a49", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7188, "upload_time": "2020-01-31T13:28:40", "upload_time_iso_8601": "2020-01-31T13:28:40.655815Z", "url": "https://files.pythonhosted.org/packages/56/17/0c417db480621dace69c028c47d0b2d74ca6f8fdf40d8bc45f525552e917/cbl_migrator-0.1.6.tar.gz", "yanked": false}], "0.1.7": [{"comment_text": "", "digests": {"md5": "ecdc2d76d9e8e5eb01a4e4dc296c52b8", "sha256": "6e5ecdf817b01d093c8f2a50fe732a06234c653a1683a3d6e757ab00dd54d88f"}, "downloads": -1, "filename": "cbl_migrator-0.1.7.tar.gz", "has_sig": false, "md5_digest": "ecdc2d76d9e8e5eb01a4e4dc296c52b8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7794, "upload_time": "2020-02-03T10:03:05", "upload_time_iso_8601": "2020-02-03T10:03:05.100528Z", "url": "https://files.pythonhosted.org/packages/ac/9e/a22c3e09bfc9550e568a969d9f29f3c50baf63abdc2afc4a7f761ef00040/cbl_migrator-0.1.7.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "ecdc2d76d9e8e5eb01a4e4dc296c52b8", "sha256": "6e5ecdf817b01d093c8f2a50fe732a06234c653a1683a3d6e757ab00dd54d88f"}, "downloads": -1, "filename": "cbl_migrator-0.1.7.tar.gz", "has_sig": false, "md5_digest": "ecdc2d76d9e8e5eb01a4e4dc296c52b8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7794, "upload_time": "2020-02-03T10:03:05", "upload_time_iso_8601": "2020-02-03T10:03:05.100528Z", "url": "https://files.pythonhosted.org/packages/ac/9e/a22c3e09bfc9550e568a969d9f29f3c50baf63abdc2afc4a7f761ef00040/cbl_migrator-0.1.7.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:35:09 2020"}