{"info": {"author": "Memory_Leak", "author_email": "irealing@163.com", "bugtrack_url": null, "classifiers": [], "description": "# red_cache\n\n#### \u4ecb\u7ecd\n\u57fa\u4e8eRedis\u5b9e\u73b0\u7684Python\u7f13\u5b58\u5de5\u5177\n#### \u793a\u4f8b\n##### \u5b89\u88c5\u65b9\u6cd5\n```shell\n$ pip install red-cache\n```\n\n##### \u7f13\u5b58\u51fd\u6570\u6267\u884c\u7ed3\u679c\n\n```python\n@redis_cache.pickle_cache(key=lambda v, t: \"cache:{}:{}\".format(v, t), ex=180)\ndef hell_world(val: str, times: int):\n    return val * times\n```\n##### \u4fdd\u5b58JSON\u7f13\u5b58\u6570\u636e\n\n```python\n\n@redis_cache.json_cache(key=lambda v, t: \"cache:{}:{}\".format(v, t), ex=180)\ndef hell_world(val: str, times: int):\n    return {\"val\": val, \"times\": times}\n\n```\n\n##### \u7f13\u5b58\u7684\u5c5e\u6027\n\n```python\nclass Demo:\n    def load_xxx(self):\n        return\n\n    xxx = redis_cache.property(key=lambda: \"Demo::xxx\", ex=10)(lambda self: self.load_xxx())\n\n```\n#### \u5220\u9664\u7f13\u5b58\n\n```python\n\n@redis_cache.remove(lambda o: \"auth::user:{}\".format(o))\ndef modify_user(user_id):\n    # DO MODIFY USER\n    pass\n\n```\n\u4f7f\u7528\u8fd4\u56de\u503c\n\n```python\n\n@redis_cache.remove(lambda o: \"auth::user:{}\".format(o), by_return=True)\ndef modify_user(user_id):\n    # DO MODIFY USER\n    return \"*********\"\n```\n\u4f7f\u7528\u751f\u6210\u5668\n\n```python\n@redis_cache.remove(lambda o: \"auth::user:{}\".format(o), by_return=True)\ndef modify_users(users):\n    # modify users\n    for u in users:\n        yield u\n\n```\n\n#### \u57fa\u4e8eRedis\u7684\u5206\u5e03\u5f0f\u9501\n\n```python\n\n@red_cache.red_lock(lambda uid, **kwargs: \"red::lock:{}\".format(uid), ttl=100000, retry_times=10, retry_delay=200)\ndef modify_user(uid: str, **kwargs):\n    # DO MODIFY USER\n    pass\n\n```\n\n#### \u4e34\u65f6\u4ee4\u724c\u5de5\u5177\n\n```python\nimport uuid\n\nfrom red_cache import RedisCache, CachedToken\n\nred_cache = RedisCache(dict(host='10.0.0.11', db=9))\n\n\n# \u58f0\u660e Token\u4ee4\u724c\u7c7b\uff0c\u96c6\u6210CachedToken\nclass Token(CachedToken, metaclass=red_cache.token_meta):\n\n    # \u4f7f\u7528metaclass\u65f6\u53ef\u81ea\u52a8\u6ce8\u5165RedisCache\u5bf9\u8c61\u5230\u5f53\u524d\u7c7b\u5bf9\u8c61\n    # \u4f7f\u7528\u7c7b\u5c5e\u6027`red_cache`\u6307\u5b9a\u7ed1\u5b9a\u7684RedisCache\u4ea6\u53ef\n\n    def __init__(self, token: str, username: str):\n        super().__init__()\n        self.token = token\n        self.username = username\n\n    # \u4f7f\u7528cache_key_prefix\u6307\u5b9a\u7f13\u5b58\u540d\u79f0\u524d\u7f00\n    cache_key_prefix = property(lambda self: self.__class__.__name__)\n\n    # id \u5373\u5f53\u524d\u4ee4\u724c\u5bf9\u8c61\u552f\u4e00\u503c\n    @property\n    def id(self):\n        return self.token\n\n    # \u8fd4\u56de\u5b57\u5178\uff0cCachedToken\u4f7f\u7528\u6807\u51c6\u5e93\u7684json\u5305\u5e8f\u5217\u5316\u8be5\u5b57\u5178\u4f5c\u4e3a\u5bf9\u5e94\u7f13\u5b58\u7684\u503c\n    def marshal(self) -> dict:\n        return dict(token=self.token, username=self.username)\n\n    @classmethod\n    def new(cls, username: str):\n        return cls(token=uuid.uuid1().hex, username=username)\n\n\nif __name__ == '__main__':\n    tk = Token.new('/**/').save()\n    # \u4f7f\u7528ID\u8bfb\u53d6\u4ee4\u724c\n    tk = Token.read(tk.token)\n    # \u5237\u65b0\uff0c\u5373\u5f3a\u5236\u5199\u5165\u4ee4\u724c\u5230Redis\n    tk.flush()\n    # \u5220\u9664\u4ee4\u724c\n    tk.remove()\n\n```\n\n#### \u8ba1\u6570\u5668\u5de5\u5177\n\n```python\nfrom red_cache import RedisCache\n\nred_cache = RedisCache(dict(host='10.0.0.11'))\n\n\nclass A:\n    # \u81ea\u589e\u8ba1\u6570\u5668\n    counter = red_cache.counter(\"resource::a\", 3,init=lambda:20*20)\n    # \u81ea\u51cf\u8ba1\u6570\u5668\n    desc = red_cache.counter(\"resource:desc\", -2)\n    # \u57fa\u4e8eHASH\u7684\u81ea\u589e\u8ba1\u6570\u5668\n    score = red_cache.hash_counter(\"score\", \"a\", 1,init=lambda:20+1)\n\n    def __init__(self):\n        self._sign = red_cache.counter(\"{}::sign:{}\".format(self.__class__.__name__, id(self)))\n\n    # \u4f7f\u7528\u5c5e\u6027\n    sign = property(lambda self: self._sign.get())\n\n\n```\n\n@author:[Memory_Leak](https://github.com/irealing/red_cache)\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://gitee.com/irealing/red_cache", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "red-cache", "package_url": "https://pypi.org/project/red-cache/", "platform": "", "project_url": "https://pypi.org/project/red-cache/", "project_urls": {"Homepage": "https://gitee.com/irealing/red_cache"}, "release_url": "https://pypi.org/project/red-cache/0.0.8/", "requires_dist": ["redis (>=3.0.1)"], "requires_python": "", "summary": "", "version": "0.0.8", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>red_cache</h1>\n<h4>\u4ecb\u7ecd</h4>\n<p>\u57fa\u4e8eRedis\u5b9e\u73b0\u7684Python\u7f13\u5b58\u5de5\u5177</p>\n<h4>\u793a\u4f8b</h4>\n<h5>\u5b89\u88c5\u65b9\u6cd5</h5>\n<pre>$ pip install red-cache\n</pre>\n<h5>\u7f13\u5b58\u51fd\u6570\u6267\u884c\u7ed3\u679c</h5>\n<pre><span class=\"nd\">@redis_cache</span><span class=\"o\">.</span><span class=\"n\">pickle_cache</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">v</span><span class=\"p\">,</span> <span class=\"n\">t</span><span class=\"p\">:</span> <span class=\"s2\">\"cache:</span><span class=\"si\">{}</span><span class=\"s2\">:</span><span class=\"si\">{}</span><span class=\"s2\">\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">v</span><span class=\"p\">,</span> <span class=\"n\">t</span><span class=\"p\">),</span> <span class=\"n\">ex</span><span class=\"o\">=</span><span class=\"mi\">180</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">hell_world</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">times</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">val</span> <span class=\"o\">*</span> <span class=\"n\">times</span>\n</pre>\n<h5>\u4fdd\u5b58JSON\u7f13\u5b58\u6570\u636e</h5>\n<pre><span class=\"nd\">@redis_cache</span><span class=\"o\">.</span><span class=\"n\">json_cache</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">v</span><span class=\"p\">,</span> <span class=\"n\">t</span><span class=\"p\">:</span> <span class=\"s2\">\"cache:</span><span class=\"si\">{}</span><span class=\"s2\">:</span><span class=\"si\">{}</span><span class=\"s2\">\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">v</span><span class=\"p\">,</span> <span class=\"n\">t</span><span class=\"p\">),</span> <span class=\"n\">ex</span><span class=\"o\">=</span><span class=\"mi\">180</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">hell_world</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">times</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">\"val\"</span><span class=\"p\">:</span> <span class=\"n\">val</span><span class=\"p\">,</span> <span class=\"s2\">\"times\"</span><span class=\"p\">:</span> <span class=\"n\">times</span><span class=\"p\">}</span>\n</pre>\n<h5>\u7f13\u5b58\u7684\u5c5e\u6027</h5>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Demo</span><span class=\"p\">:</span>\n    <span class=\"k\">def</span> <span class=\"nf\">load_xxx</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span>\n\n    <span class=\"n\">xxx</span> <span class=\"o\">=</span> <span class=\"n\">redis_cache</span><span class=\"o\">.</span><span class=\"n\">property</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"o\">=</span><span class=\"k\">lambda</span><span class=\"p\">:</span> <span class=\"s2\">\"Demo::xxx\"</span><span class=\"p\">,</span> <span class=\"n\">ex</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">)(</span><span class=\"k\">lambda</span> <span class=\"bp\">self</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">load_xxx</span><span class=\"p\">())</span>\n</pre>\n<h4>\u5220\u9664\u7f13\u5b58</h4>\n<pre><span class=\"nd\">@redis_cache</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">o</span><span class=\"p\">:</span> <span class=\"s2\">\"auth::user:</span><span class=\"si\">{}</span><span class=\"s2\">\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">o</span><span class=\"p\">))</span>\n<span class=\"k\">def</span> <span class=\"nf\">modify_user</span><span class=\"p\">(</span><span class=\"n\">user_id</span><span class=\"p\">):</span>\n    <span class=\"c1\"># DO MODIFY USER</span>\n    <span class=\"k\">pass</span>\n</pre>\n<p>\u4f7f\u7528\u8fd4\u56de\u503c</p>\n<pre><span class=\"nd\">@redis_cache</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">o</span><span class=\"p\">:</span> <span class=\"s2\">\"auth::user:</span><span class=\"si\">{}</span><span class=\"s2\">\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">o</span><span class=\"p\">),</span> <span class=\"n\">by_return</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">modify_user</span><span class=\"p\">(</span><span class=\"n\">user_id</span><span class=\"p\">):</span>\n    <span class=\"c1\"># DO MODIFY USER</span>\n    <span class=\"k\">return</span> <span class=\"s2\">\"*********\"</span>\n</pre>\n<p>\u4f7f\u7528\u751f\u6210\u5668</p>\n<pre><span class=\"nd\">@redis_cache</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">o</span><span class=\"p\">:</span> <span class=\"s2\">\"auth::user:</span><span class=\"si\">{}</span><span class=\"s2\">\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">o</span><span class=\"p\">),</span> <span class=\"n\">by_return</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">modify_users</span><span class=\"p\">(</span><span class=\"n\">users</span><span class=\"p\">):</span>\n    <span class=\"c1\"># modify users</span>\n    <span class=\"k\">for</span> <span class=\"n\">u</span> <span class=\"ow\">in</span> <span class=\"n\">users</span><span class=\"p\">:</span>\n        <span class=\"k\">yield</span> <span class=\"n\">u</span>\n</pre>\n<h4>\u57fa\u4e8eRedis\u7684\u5206\u5e03\u5f0f\u9501</h4>\n<pre><span class=\"nd\">@red_cache</span><span class=\"o\">.</span><span class=\"n\">red_lock</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">uid</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">:</span> <span class=\"s2\">\"red::lock:</span><span class=\"si\">{}</span><span class=\"s2\">\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">uid</span><span class=\"p\">),</span> <span class=\"n\">ttl</span><span class=\"o\">=</span><span class=\"mi\">100000</span><span class=\"p\">,</span> <span class=\"n\">retry_times</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">retry_delay</span><span class=\"o\">=</span><span class=\"mi\">200</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">modify_user</span><span class=\"p\">(</span><span class=\"n\">uid</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n    <span class=\"c1\"># DO MODIFY USER</span>\n    <span class=\"k\">pass</span>\n</pre>\n<h4>\u4e34\u65f6\u4ee4\u724c\u5de5\u5177</h4>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">uuid</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">red_cache</span> <span class=\"kn\">import</span> <span class=\"n\">RedisCache</span><span class=\"p\">,</span> <span class=\"n\">CachedToken</span>\n\n<span class=\"n\">red_cache</span> <span class=\"o\">=</span> <span class=\"n\">RedisCache</span><span class=\"p\">(</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"o\">=</span><span class=\"s1\">'10.0.0.11'</span><span class=\"p\">,</span> <span class=\"n\">db</span><span class=\"o\">=</span><span class=\"mi\">9</span><span class=\"p\">))</span>\n\n\n<span class=\"c1\"># \u58f0\u660e Token\u4ee4\u724c\u7c7b\uff0c\u96c6\u6210CachedToken</span>\n<span class=\"k\">class</span> <span class=\"nc\">Token</span><span class=\"p\">(</span><span class=\"n\">CachedToken</span><span class=\"p\">,</span> <span class=\"n\">metaclass</span><span class=\"o\">=</span><span class=\"n\">red_cache</span><span class=\"o\">.</span><span class=\"n\">token_meta</span><span class=\"p\">):</span>\n\n    <span class=\"c1\"># \u4f7f\u7528metaclass\u65f6\u53ef\u81ea\u52a8\u6ce8\u5165RedisCache\u5bf9\u8c61\u5230\u5f53\u524d\u7c7b\u5bf9\u8c61</span>\n    <span class=\"c1\"># \u4f7f\u7528\u7c7b\u5c5e\u6027`red_cache`\u6307\u5b9a\u7ed1\u5b9a\u7684RedisCache\u4ea6\u53ef</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">token</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">username</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n        <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">()</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">token</span> <span class=\"o\">=</span> <span class=\"n\">token</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"n\">username</span>\n\n    <span class=\"c1\"># \u4f7f\u7528cache_key_prefix\u6307\u5b9a\u7f13\u5b58\u540d\u79f0\u524d\u7f00</span>\n    <span class=\"n\">cache_key_prefix</span> <span class=\"o\">=</span> <span class=\"nb\">property</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"bp\">self</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"vm\">__class__</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># id \u5373\u5f53\u524d\u4ee4\u724c\u5bf9\u8c61\u552f\u4e00\u503c</span>\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">id</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">token</span>\n\n    <span class=\"c1\"># \u8fd4\u56de\u5b57\u5178\uff0cCachedToken\u4f7f\u7528\u6807\u51c6\u5e93\u7684json\u5305\u5e8f\u5217\u5316\u8be5\u5b57\u5178\u4f5c\u4e3a\u5bf9\u5e94\u7f13\u5b58\u7684\u503c</span>\n    <span class=\"k\">def</span> <span class=\"nf\">marshal</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">dict</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">token</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">token</span><span class=\"p\">,</span> <span class=\"n\">username</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span><span class=\"p\">)</span>\n\n    <span class=\"nd\">@classmethod</span>\n    <span class=\"k\">def</span> <span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"bp\">cls</span><span class=\"p\">,</span> <span class=\"n\">username</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">cls</span><span class=\"p\">(</span><span class=\"n\">token</span><span class=\"o\">=</span><span class=\"n\">uuid</span><span class=\"o\">.</span><span class=\"n\">uuid1</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">hex</span><span class=\"p\">,</span> <span class=\"n\">username</span><span class=\"o\">=</span><span class=\"n\">username</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">tk</span> <span class=\"o\">=</span> <span class=\"n\">Token</span><span class=\"o\">.</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"s1\">'/**/'</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n    <span class=\"c1\"># \u4f7f\u7528ID\u8bfb\u53d6\u4ee4\u724c</span>\n    <span class=\"n\">tk</span> <span class=\"o\">=</span> <span class=\"n\">Token</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"n\">tk</span><span class=\"o\">.</span><span class=\"n\">token</span><span class=\"p\">)</span>\n    <span class=\"c1\"># \u5237\u65b0\uff0c\u5373\u5f3a\u5236\u5199\u5165\u4ee4\u724c\u5230Redis</span>\n    <span class=\"n\">tk</span><span class=\"o\">.</span><span class=\"n\">flush</span><span class=\"p\">()</span>\n    <span class=\"c1\"># \u5220\u9664\u4ee4\u724c</span>\n    <span class=\"n\">tk</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">()</span>\n</pre>\n<h4>\u8ba1\u6570\u5668\u5de5\u5177</h4>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">red_cache</span> <span class=\"kn\">import</span> <span class=\"n\">RedisCache</span>\n\n<span class=\"n\">red_cache</span> <span class=\"o\">=</span> <span class=\"n\">RedisCache</span><span class=\"p\">(</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"o\">=</span><span class=\"s1\">'10.0.0.11'</span><span class=\"p\">))</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">A</span><span class=\"p\">:</span>\n    <span class=\"c1\"># \u81ea\u589e\u8ba1\u6570\u5668</span>\n    <span class=\"n\">counter</span> <span class=\"o\">=</span> <span class=\"n\">red_cache</span><span class=\"o\">.</span><span class=\"n\">counter</span><span class=\"p\">(</span><span class=\"s2\">\"resource::a\"</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"n\">init</span><span class=\"o\">=</span><span class=\"k\">lambda</span><span class=\"p\">:</span><span class=\"mi\">20</span><span class=\"o\">*</span><span class=\"mi\">20</span><span class=\"p\">)</span>\n    <span class=\"c1\"># \u81ea\u51cf\u8ba1\u6570\u5668</span>\n    <span class=\"n\">desc</span> <span class=\"o\">=</span> <span class=\"n\">red_cache</span><span class=\"o\">.</span><span class=\"n\">counter</span><span class=\"p\">(</span><span class=\"s2\">\"resource:desc\"</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n    <span class=\"c1\"># \u57fa\u4e8eHASH\u7684\u81ea\u589e\u8ba1\u6570\u5668</span>\n    <span class=\"n\">score</span> <span class=\"o\">=</span> <span class=\"n\">red_cache</span><span class=\"o\">.</span><span class=\"n\">hash_counter</span><span class=\"p\">(</span><span class=\"s2\">\"score\"</span><span class=\"p\">,</span> <span class=\"s2\">\"a\"</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"n\">init</span><span class=\"o\">=</span><span class=\"k\">lambda</span><span class=\"p\">:</span><span class=\"mi\">20</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_sign</span> <span class=\"o\">=</span> <span class=\"n\">red_cache</span><span class=\"o\">.</span><span class=\"n\">counter</span><span class=\"p\">(</span><span class=\"s2\">\"</span><span class=\"si\">{}</span><span class=\"s2\">::sign:</span><span class=\"si\">{}</span><span class=\"s2\">\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"vm\">__class__</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"p\">,</span> <span class=\"nb\">id</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)))</span>\n\n    <span class=\"c1\"># \u4f7f\u7528\u5c5e\u6027</span>\n    <span class=\"n\">sign</span> <span class=\"o\">=</span> <span class=\"nb\">property</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"bp\">self</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_sign</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">())</span>\n</pre>\n<p>@author:<a href=\"https://github.com/irealing/red_cache\" rel=\"nofollow\">Memory_Leak</a></p>\n\n          </div>"}, "last_serial": 6355244, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "5020c7340e0103fe455a5fbd40e1ed64", "sha256": "c38acdfc9a2c08b65f6a6925cfc63e4393a1d30455ba3089c8f189926387d4b8"}, "downloads": -1, "filename": "red_cache-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "5020c7340e0103fe455a5fbd40e1ed64", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 3419, "upload_time": "2019-01-08T09:23:30", "upload_time_iso_8601": "2019-01-08T09:23:30.401949Z", "url": "https://files.pythonhosted.org/packages/db/5b/20e34b7ca68e6f94e8f409ce8f2a204b3e692583da183a5d70545285790d/red_cache-0.0.1-py3-none-any.whl", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "35eab958389cbed8e8e403e451669837", "sha256": "232281d3980ec07bc792d0000612adc530904b829db9f7965ac367fe4d1f2131"}, "downloads": -1, "filename": "red_cache-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "35eab958389cbed8e8e403e451669837", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7823, "upload_time": "2019-01-08T09:35:49", "upload_time_iso_8601": "2019-01-08T09:35:49.288804Z", "url": "https://files.pythonhosted.org/packages/44/24/587c4b441854e8c5d93a321ecaa45536e2250334e28583c512b0c8226143/red_cache-0.0.2-py3-none-any.whl", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "b47f27406963969c3e72bcbec61197a5", "sha256": "b94460b43c20f58e22774e9538d9377d80071bdc771c577db05dd5189eb844d1"}, "downloads": -1, "filename": "red_cache-0.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "b47f27406963969c3e72bcbec61197a5", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7918, "upload_time": "2019-01-09T01:19:57", "upload_time_iso_8601": "2019-01-09T01:19:57.604266Z", "url": "https://files.pythonhosted.org/packages/b6/ae/107b42b118dacdd47c847665f49ff5d239e4f739930a6e5cef6749c1bde1/red_cache-0.0.3-py3-none-any.whl", "yanked": false}], "0.0.4": [{"comment_text": "", "digests": {"md5": "f28e325ec37585ce3142b3acbb9b9b4d", "sha256": "a2e9676b807a4dd562671f1d6e456b541115580edf3dd9728e1f6721f2d864c7"}, "downloads": -1, "filename": "red_cache-0.0.4-py3-none-any.whl", "has_sig": false, "md5_digest": "f28e325ec37585ce3142b3acbb9b9b4d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8078, "upload_time": "2019-01-10T10:28:03", "upload_time_iso_8601": "2019-01-10T10:28:03.387514Z", "url": "https://files.pythonhosted.org/packages/73/a8/c2dbbfb467d4b7b74eb13a54b04f4b492f0d3eae22d2d8161ebf9ac0d808/red_cache-0.0.4-py3-none-any.whl", "yanked": false}], "0.0.5": [{"comment_text": "", "digests": {"md5": "c424c94f63838e69d76afdff34be257f", "sha256": "5e89b84dd8ce2dee2587d80e4b9cce0debde542015b79fd8fd664fff2c8b99cb"}, "downloads": -1, "filename": "red_cache-0.0.5.tar.gz", "has_sig": false, "md5_digest": "c424c94f63838e69d76afdff34be257f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4944, "upload_time": "2019-07-13T06:40:47", "upload_time_iso_8601": "2019-07-13T06:40:47.727883Z", "url": "https://files.pythonhosted.org/packages/1a/2c/210f166e192a2e872864b9f7eb3a09235e99b91e5124dbe9080647552e81/red_cache-0.0.5.tar.gz", "yanked": false}], "0.0.6": [{"comment_text": "", "digests": {"md5": "c6b4c0794ce713f49904814ff4842946", "sha256": "5b43c5b02b5aedee1857333fa482bc2ae2801ab71ca1ca1ef53969d5fed9ba45"}, "downloads": -1, "filename": "red_cache-0.0.6-py3-none-any.whl", "has_sig": false, "md5_digest": "c6b4c0794ce713f49904814ff4842946", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 10614, "upload_time": "2019-08-07T15:26:16", "upload_time_iso_8601": "2019-08-07T15:26:16.556102Z", "url": "https://files.pythonhosted.org/packages/95/8e/597bc49f7873e537b20e9546771eb3c600d46dad193a921fd4f5ec5d5ff9/red_cache-0.0.6-py3-none-any.whl", "yanked": false}], "0.0.7": [{"comment_text": "", "digests": {"md5": "62a87499c0079f6e578c54005fc5aea1", "sha256": "93669ace8beaf6711bdba9da265716487cc4ff42b914f6ecfdfcde71de54c07c"}, "downloads": -1, "filename": "red_cache-0.0.7-py3-none-any.whl", "has_sig": false, "md5_digest": "62a87499c0079f6e578c54005fc5aea1", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 10716, "upload_time": "2019-08-08T04:50:40", "upload_time_iso_8601": "2019-08-08T04:50:40.462073Z", "url": "https://files.pythonhosted.org/packages/db/e6/c7e02e26434968748ea70edf9f8f90369ec0d483091a58491fed31bf1f5d/red_cache-0.0.7-py3-none-any.whl", "yanked": false}], "0.0.8": [{"comment_text": "", "digests": {"md5": "15b4cb0beb7e889a7eab22c8593405e7", "sha256": "c69b20f236d937b1331eee67b8d398d0dc69322020d3af631d1422c641415a74"}, "downloads": -1, "filename": "red_cache-0.0.8-py3-none-any.whl", "has_sig": false, "md5_digest": "15b4cb0beb7e889a7eab22c8593405e7", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 10740, "upload_time": "2019-12-24T13:00:30", "upload_time_iso_8601": "2019-12-24T13:00:30.226905Z", "url": "https://files.pythonhosted.org/packages/91/80/d695e96aacb8c87d1547ab942c4f550e1e1c982e9df1d568991640bd799c/red_cache-0.0.8-py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "15b4cb0beb7e889a7eab22c8593405e7", "sha256": "c69b20f236d937b1331eee67b8d398d0dc69322020d3af631d1422c641415a74"}, "downloads": -1, "filename": "red_cache-0.0.8-py3-none-any.whl", "has_sig": false, "md5_digest": "15b4cb0beb7e889a7eab22c8593405e7", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 10740, "upload_time": "2019-12-24T13:00:30", "upload_time_iso_8601": "2019-12-24T13:00:30.226905Z", "url": "https://files.pythonhosted.org/packages/91/80/d695e96aacb8c87d1547ab942c4f550e1e1c982e9df1d568991640bd799c/red_cache-0.0.8-py3-none-any.whl", "yanked": false}], "timestamp": "Fri May  8 03:05:59 2020"}