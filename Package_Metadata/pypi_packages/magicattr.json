{"info": {"author": "frmdstryr", "author_email": "frmdstryr@gmail.com", "bugtrack_url": null, "classifiers": [], "description": "# Magicattr\n\n[![Build Status](https://travis-ci.org/frmdstryr/magicattr.svg?branch=master)](https://travis-ci.org/frmdstryr/magicattr)\n[![codecov](https://codecov.io/gh/frmdstryr/magicattr/branch/master/graph/badge.svg)](https://codecov.io/gh/frmdstryr/magicattr)\n\n\nA getattr and setattr that works on nested objects, lists, \ndictionaries, and any combination thereof without resorting to eval.\n\nIt differs from getattr and setattr in that it retains the failure cause \ninstead of always raising an AttributeError.\n\n\n\n### Example\n\nSay we have a person class as follows:\n\n```python\n\n\nclass Person:\n    settings = {\n        'autosave': True,\n        'style': {\n            'height': 30,\n            'width': 200\n        },\n        'themes': ['light', 'dark']\n    }\n    def __init__(self, name, age, friends):\n        self.name = name\n        self.age = age\n        self.friends = friends\n\n\nbob = Person(name=\"Bob\", age=31, friends=[])\njill = Person(name=\"Jill\", age=29, friends=[bob])\njack = Person(name=\"Jack\", age=28, friends=[bob, jill])\n\n```\n\nWith magicattr we can do this\n\n```python\n\n# Nothing new\nassert magicattr.get(bob, 'age') == 31\n\n# Lists\nassert magicattr.get(jill, 'friends[0].name') == 'Bob'\nassert magicattr.get(jack, 'friends[-1].age') == 29\n\n# Dict lookups\nassert magicattr.get(jack, 'settings[\"style\"][\"width\"]') == 200\n\n# Combination of lookups\nassert magicattr.get(jack, 'settings[\"themes\"][-2]') == 'light'\nassert magicattr.get(jack, 'friends[-1].settings[\"themes\"][1]') == 'dark'\n\n# Setattr\nmagicattr.set(bob, 'settings[\"style\"][\"width\"]', 400)\nassert magicattr.get(bob, 'settings[\"style\"][\"width\"]') == 400\n\n# Nested objects\nmagicattr.set(bob, 'friends', [jack, jill])\nassert magicattr.get(jack, 'friends[0].friends[0]') == jack\n\nmagicattr.set(jill, 'friends[0].age', 32)\nassert bob.age == 32\n```\n\nYou can also delete like this too.\n\n```python\n\n# Deletion\nmagicattr.delete(jill, 'friends[0]')\nassert len(jill.friends) == 0\n\nmagicattr.delete(jill, 'age')\nassert not hasattr(jill, 'age')\n\nmagicattr.delete(bob, 'friends[0].age')\nassert not hasattr(jack, 'age')\n\n```\n\nWhat if someone tries to mess with you?\n\n```python\n\n# Unsupported\nwith pytest.raises(NotImplementedError) as e:\n    magicattr.get(bob, 'friends[0+1]')\n\nwith pytest.raises(SyntaxError) as e:\n    magicattr.get(bob, 'friends[')\n\nwith pytest.raises(ValueError) as e:\n    magicattr.get(bob, 'friends = [1,1]')\n\n# Nice try, function calls are not allowed\nwith pytest.raises(ValueError):\n    magicattr.get(bob, 'friends.pop(0)')\n\n```\n\nDid I miss anything? Let me know!\n\n\n\n#### What it can't do?\n\nSlicing, expressions, function calls, append/pop from lists, eval stuff, etc...\n\n#### How does it work?\n\nParses the attr string into an ast node and manually evaluates it.\n\n\n### Installing\n\n`pip install magicattr`\n\n\n### License\n\nMIT\n\nHope it helps, cheers!\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/frmdstryr/magicattr", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "magicattr", "package_url": "https://pypi.org/project/magicattr/", "platform": "", "project_url": "https://pypi.org/project/magicattr/", "project_urls": {"Homepage": "https://github.com/frmdstryr/magicattr"}, "release_url": "https://pypi.org/project/magicattr/0.1.4/", "requires_dist": null, "requires_python": "", "summary": "A getattr and setattr that works on nested objects, lists, dicts, and any combination thereof without resorting to eval", "version": "0.1.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Magicattr</h1>\n<p><a href=\"https://travis-ci.org/frmdstryr/magicattr\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/838c2bd7612c3700c2bbd319d7c34bc03279704e/68747470733a2f2f7472617669732d63692e6f72672f66726d6473747279722f6d61676963617474722e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/gh/frmdstryr/magicattr\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/30c81313b488136270ea3e60f08d284c46f42362/68747470733a2f2f636f6465636f762e696f2f67682f66726d6473747279722f6d61676963617474722f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a></p>\n<p>A getattr and setattr that works on nested objects, lists,\ndictionaries, and any combination thereof without resorting to eval.</p>\n<p>It differs from getattr and setattr in that it retains the failure cause\ninstead of always raising an AttributeError.</p>\n<h3>Example</h3>\n<p>Say we have a person class as follows:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Person</span><span class=\"p\">:</span>\n    <span class=\"n\">settings</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'autosave'</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"s1\">'style'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'height'</span><span class=\"p\">:</span> <span class=\"mi\">30</span><span class=\"p\">,</span>\n            <span class=\"s1\">'width'</span><span class=\"p\">:</span> <span class=\"mi\">200</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'themes'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'light'</span><span class=\"p\">,</span> <span class=\"s1\">'dark'</span><span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"p\">,</span> <span class=\"n\">friends</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">name</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">age</span> <span class=\"o\">=</span> <span class=\"n\">age</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">friends</span> <span class=\"o\">=</span> <span class=\"n\">friends</span>\n\n\n<span class=\"n\">bob</span> <span class=\"o\">=</span> <span class=\"n\">Person</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"Bob\"</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"o\">=</span><span class=\"mi\">31</span><span class=\"p\">,</span> <span class=\"n\">friends</span><span class=\"o\">=</span><span class=\"p\">[])</span>\n<span class=\"n\">jill</span> <span class=\"o\">=</span> <span class=\"n\">Person</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"Jill\"</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"o\">=</span><span class=\"mi\">29</span><span class=\"p\">,</span> <span class=\"n\">friends</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">bob</span><span class=\"p\">])</span>\n<span class=\"n\">jack</span> <span class=\"o\">=</span> <span class=\"n\">Person</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"Jack\"</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"o\">=</span><span class=\"mi\">28</span><span class=\"p\">,</span> <span class=\"n\">friends</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"n\">jill</span><span class=\"p\">])</span>\n</pre>\n<p>With magicattr we can do this</p>\n<pre><span class=\"c1\"># Nothing new</span>\n<span class=\"k\">assert</span> <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"s1\">'age'</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">31</span>\n\n<span class=\"c1\"># Lists</span>\n<span class=\"k\">assert</span> <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">jill</span><span class=\"p\">,</span> <span class=\"s1\">'friends[0].name'</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'Bob'</span>\n<span class=\"k\">assert</span> <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">jack</span><span class=\"p\">,</span> <span class=\"s1\">'friends[-1].age'</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">29</span>\n\n<span class=\"c1\"># Dict lookups</span>\n<span class=\"k\">assert</span> <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">jack</span><span class=\"p\">,</span> <span class=\"s1\">'settings[\"style\"][\"width\"]'</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">200</span>\n\n<span class=\"c1\"># Combination of lookups</span>\n<span class=\"k\">assert</span> <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">jack</span><span class=\"p\">,</span> <span class=\"s1\">'settings[\"themes\"][-2]'</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'light'</span>\n<span class=\"k\">assert</span> <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">jack</span><span class=\"p\">,</span> <span class=\"s1\">'friends[-1].settings[\"themes\"][1]'</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'dark'</span>\n\n<span class=\"c1\"># Setattr</span>\n<span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"s1\">'settings[\"style\"][\"width\"]'</span><span class=\"p\">,</span> <span class=\"mi\">400</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"s1\">'settings[\"style\"][\"width\"]'</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">400</span>\n\n<span class=\"c1\"># Nested objects</span>\n<span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"s1\">'friends'</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">jack</span><span class=\"p\">,</span> <span class=\"n\">jill</span><span class=\"p\">])</span>\n<span class=\"k\">assert</span> <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">jack</span><span class=\"p\">,</span> <span class=\"s1\">'friends[0].friends[0]'</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">jack</span>\n\n<span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"n\">jill</span><span class=\"p\">,</span> <span class=\"s1\">'friends[0].age'</span><span class=\"p\">,</span> <span class=\"mi\">32</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"n\">bob</span><span class=\"o\">.</span><span class=\"n\">age</span> <span class=\"o\">==</span> <span class=\"mi\">32</span>\n</pre>\n<p>You can also delete like this too.</p>\n<pre><span class=\"c1\"># Deletion</span>\n<span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"n\">jill</span><span class=\"p\">,</span> <span class=\"s1\">'friends[0]'</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">jill</span><span class=\"o\">.</span><span class=\"n\">friends</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">0</span>\n\n<span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"n\">jill</span><span class=\"p\">,</span> <span class=\"s1\">'age'</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"ow\">not</span> <span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"n\">jill</span><span class=\"p\">,</span> <span class=\"s1\">'age'</span><span class=\"p\">)</span>\n\n<span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"s1\">'friends[0].age'</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"ow\">not</span> <span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"n\">jack</span><span class=\"p\">,</span> <span class=\"s1\">'age'</span><span class=\"p\">)</span>\n</pre>\n<p>What if someone tries to mess with you?</p>\n<pre><span class=\"c1\"># Unsupported</span>\n<span class=\"k\">with</span> <span class=\"n\">pytest</span><span class=\"o\">.</span><span class=\"n\">raises</span><span class=\"p\">(</span><span class=\"ne\">NotImplementedError</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n    <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"s1\">'friends[0+1]'</span><span class=\"p\">)</span>\n\n<span class=\"k\">with</span> <span class=\"n\">pytest</span><span class=\"o\">.</span><span class=\"n\">raises</span><span class=\"p\">(</span><span class=\"ne\">SyntaxError</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n    <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"s1\">'friends['</span><span class=\"p\">)</span>\n\n<span class=\"k\">with</span> <span class=\"n\">pytest</span><span class=\"o\">.</span><span class=\"n\">raises</span><span class=\"p\">(</span><span class=\"ne\">ValueError</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n    <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"s1\">'friends = [1,1]'</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Nice try, function calls are not allowed</span>\n<span class=\"k\">with</span> <span class=\"n\">pytest</span><span class=\"o\">.</span><span class=\"n\">raises</span><span class=\"p\">(</span><span class=\"ne\">ValueError</span><span class=\"p\">):</span>\n    <span class=\"n\">magicattr</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">bob</span><span class=\"p\">,</span> <span class=\"s1\">'friends.pop(0)'</span><span class=\"p\">)</span>\n</pre>\n<p>Did I miss anything? Let me know!</p>\n<h4>What it can't do?</h4>\n<p>Slicing, expressions, function calls, append/pop from lists, eval stuff, etc...</p>\n<h4>How does it work?</h4>\n<p>Parses the attr string into an ast node and manually evaluates it.</p>\n<h3>Installing</h3>\n<p><code>pip install magicattr</code></p>\n<h3>License</h3>\n<p>MIT</p>\n<p>Hope it helps, cheers!</p>\n\n          </div>"}, "last_serial": 3934755, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "62262ddf6c77341a72a5a927c0acd85b", "sha256": "df2d8433a44d3d41126e67c030ce73e9a82bfbc9491555effbbab90b9d0d3cff"}, "downloads": -1, "filename": "magicattr-0.1.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "62262ddf6c77341a72a5a927c0acd85b", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 3240, "upload_time": "2018-06-04T21:05:14", "upload_time_iso_8601": "2018-06-04T21:05:14.495782Z", "url": "https://files.pythonhosted.org/packages/8f/da/4e6d9042fe953a83d94d98f10c6378733e335a68fc1be04e482eca3c7a02/magicattr-0.1.0-py2.py3-none-any.whl", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "daa1192c26b81db411bfce508fcce74e", "sha256": "634e15620be422573744bf30cf5468fac379442279666395108f992a33df9ca2"}, "downloads": -1, "filename": "magicattr-0.1.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "daa1192c26b81db411bfce508fcce74e", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 3384, "upload_time": "2018-06-04T21:39:17", "upload_time_iso_8601": "2018-06-04T21:39:17.490915Z", "url": "https://files.pythonhosted.org/packages/18/26/05f9cd1ada6529f529bf51485945137fcebe06d2f255ff3833c733dd4dbb/magicattr-0.1.1-py2.py3-none-any.whl", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "eb666dc3daa987598631415a46eca784", "sha256": "c2643fa0a4152f71ddb160206f13045a4bab3a1bdc1ebf86f6b117859bbcb011"}, "downloads": -1, "filename": "magicattr-0.1.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "eb666dc3daa987598631415a46eca784", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 3464, "upload_time": "2018-06-04T22:08:49", "upload_time_iso_8601": "2018-06-04T22:08:49.784561Z", "url": "https://files.pythonhosted.org/packages/68/08/897d2af1dc9bb4c81082a4bfb7f91257d0a53fd095da10974cb11b2bcb79/magicattr-0.1.2-py2.py3-none-any.whl", "yanked": false}], "0.1.3": [{"comment_text": "", "digests": {"md5": "0f39c3a45d670c5e779f5cd3bb6dce43", "sha256": "6d20bef5821691f62cfdf23b5c57b5cd0c3852c48cb7daa391c5f935742988f1"}, "downloads": -1, "filename": "magicattr-0.1.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "0f39c3a45d670c5e779f5cd3bb6dce43", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 3621, "upload_time": "2018-06-06T04:49:29", "upload_time_iso_8601": "2018-06-06T04:49:29.101601Z", "url": "https://files.pythonhosted.org/packages/8e/d9/355cf36fc0684980c708a930f3b556439685f27f5779166804b357821bf3/magicattr-0.1.3-py2.py3-none-any.whl", "yanked": false}], "0.1.4": [{"comment_text": "", "digests": {"md5": "9d2cef84f5a17d921e651bb3db1dc24f", "sha256": "5424b31312b6436d1593c32fbddff7701a90a13fba024a50faa54ed5011017ec"}, "downloads": -1, "filename": "magicattr-0.1.4-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "9d2cef84f5a17d921e651bb3db1dc24f", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 3689, "upload_time": "2018-06-06T05:08:52", "upload_time_iso_8601": "2018-06-06T05:08:52.488354Z", "url": "https://files.pythonhosted.org/packages/5b/c9/1e310dbabfaff4c045edd1a3a9257c756852460f5b37feef9f26407bd054/magicattr-0.1.4-py2.py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "9d2cef84f5a17d921e651bb3db1dc24f", "sha256": "5424b31312b6436d1593c32fbddff7701a90a13fba024a50faa54ed5011017ec"}, "downloads": -1, "filename": "magicattr-0.1.4-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "9d2cef84f5a17d921e651bb3db1dc24f", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 3689, "upload_time": "2018-06-06T05:08:52", "upload_time_iso_8601": "2018-06-06T05:08:52.488354Z", "url": "https://files.pythonhosted.org/packages/5b/c9/1e310dbabfaff4c045edd1a3a9257c756852460f5b37feef9f26407bd054/magicattr-0.1.4-py2.py3-none-any.whl", "yanked": false}], "timestamp": "Fri May  8 00:42:07 2020"}