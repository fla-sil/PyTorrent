{"info": {"author": "Ondrej Samohel", "author_email": "annatar@annatar.net", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: Apache Software License", "Programming Language :: Python", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Software Development :: Libraries :: Python Modules", "Topic :: System :: Filesystems"], "description": "# speedcopy\n\n[![Build Status](https://travis-ci.com/antirotor/speedcopy.svg?branch=master)](https://travis-ci.com/antirotor/speedcopy)\n[![PyPI version](https://badge.fury.io/py/speedcopy.svg)](https://badge.fury.io/py/speedcopy)\n\nPatched python shutil.copyfile using native call `CopyFile2` on windows to accelerate\ntransfer on windows shares. On Linux, it issues special ioctl command `CIFS_IOC_COPYCHUNK_FILE` to enable server-side copy.\n\nThis works only when both source and destination files are on same SMB1(CIFS)/2/3 filesystem.\n\nSee https://wiki.samba.org/index.php/Server-Side_Copy\n\n## Installation\n\nAdd speedcopy to `PYTHONPATH` or:\n\n```\npip install speedcopy\n```\n\n## Usage\n\nIf you want to monkeypatch `shutil.copyfile()` then:\n\n```python\nimport shutil\nimport speedcopy\n\nspeedcopy.patch_copyfile()\n\n# your code ...\nshutil.copyfile(src, dst)\n```\nThis will make last call to use speedcopy.\n\nDirect use:\n```python\nimport speedcopy\n\n# some code ...\n\nspeedcopy.copyfile(src, dst)\n```\n\nThere is also debug mode enabled by setting `speedcopy.SPEEDCOPY_DEBUG = True`. This will print more information during runtime.\n\n## Benchmark\n\n### Windows\n\n| Filesize | Python | Speedcopy | Factor |\n| --- | --- | --- | --- |\n| 1 | 0.0797 | 0.0222 | 3.59 |\n| 2 | 0.1702 | 0.0254 | 6.69 |\n| 4 | 0.3257 | 0.0271 | 12.01 |\n| 8 | 0.6729 | 0.0337 | 19.94 |\n| 16 | 1.335 | 0.0384 | 34.72 |\n| 32 | 2.3612 | 0.0625 | 37.72 |\n| 64 | 57.4549 | 0.9758 | 58.88 |\n| 128 | 10.9294 | 0.1669 | 65.47 |\n| 256 | 20.3843 | 2.276 | 8.96 |\n| 512 | 35.9462 | 3.9966 | 8.99 |\n| 1024 | 65.6285 | 28.0291 | 2.34 |\n\n### Linux\n\n| Filesize | Python | Speedcopy | Factor |\n| --- | --- | --- | --- |\n| 1 | 0.0682 | 0.0099 | 6.88 |\n| 2 | 0.0894 | 0.0105 | 8.51 |\n| 4 | 0.1337 | 0.012 | 11.14 |\n| 8 | 0.1922 | 0.0145 | 13.25 |\n| 16 | 0.2853 | 0.0193 | 14.78 |\n| 32 | 0.4724 | 0.0288 | 16.4 |\n| 64 | 8.0071 | 0.4724 | 16.94 |\n| 128 | 1.3338 | 0.2311 | 5.77 |\n| 256 | 2.6599 | 0.4788 | 5.55 |\n| 512 | 5.3798 | 0.9796 | 5.49 |\n| 1024 | 10.3328 | 2.9180 | 3.54 |\n\n*Note that Windows and Linux timing do not correlate, they are taken from different systems. Notice the spike on 64 Mb size file on both of them. Also note that these figures are not taken from production grade hardware and setup and can be completely off at other places.*\n\nYou can test it yourself with included `benchmark.py` (and this will take some time as values are measured multiple times and then averaged).\n\n## Todo\n\n- Better error handling\n- Other platforms support\n- Conform behaviour to original `shutil.copyfile()`\n- Review benchmark code\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/antirotor/speedcopy", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "speedcopy", "package_url": "https://pypi.org/project/speedcopy/", "platform": "", "project_url": "https://pypi.org/project/speedcopy/", "project_urls": {"Homepage": "https://github.com/antirotor/speedcopy"}, "release_url": "https://pypi.org/project/speedcopy/2.0.1/", "requires_dist": null, "requires_python": "", "summary": "Windows xcopy patch for shutil.copyfile, based on pyfastcopy", "version": "2.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>speedcopy</h1>\n<p><a href=\"https://travis-ci.com/antirotor/speedcopy\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4b16f66e4cdee7f4c6430846f705cfbbe81ca17a/68747470733a2f2f7472617669732d63692e636f6d2f616e7469726f746f722f7370656564636f70792e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://badge.fury.io/py/speedcopy\" rel=\"nofollow\"><img alt=\"PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/bc2a0df8ab99417bec0885f3ba2b756afdc8ca1b/68747470733a2f2f62616467652e667572792e696f2f70792f7370656564636f70792e737667\"></a></p>\n<p>Patched python shutil.copyfile using native call <code>CopyFile2</code> on windows to accelerate\ntransfer on windows shares. On Linux, it issues special ioctl command <code>CIFS_IOC_COPYCHUNK_FILE</code> to enable server-side copy.</p>\n<p>This works only when both source and destination files are on same SMB1(CIFS)/2/3 filesystem.</p>\n<p>See <a href=\"https://wiki.samba.org/index.php/Server-Side_Copy\" rel=\"nofollow\">https://wiki.samba.org/index.php/Server-Side_Copy</a></p>\n<h2>Installation</h2>\n<p>Add speedcopy to <code>PYTHONPATH</code> or:</p>\n<pre><code>pip install speedcopy\n</code></pre>\n<h2>Usage</h2>\n<p>If you want to monkeypatch <code>shutil.copyfile()</code> then:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">shutil</span>\n<span class=\"kn\">import</span> <span class=\"nn\">speedcopy</span>\n\n<span class=\"n\">speedcopy</span><span class=\"o\">.</span><span class=\"n\">patch_copyfile</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># your code ...</span>\n<span class=\"n\">shutil</span><span class=\"o\">.</span><span class=\"n\">copyfile</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"p\">,</span> <span class=\"n\">dst</span><span class=\"p\">)</span>\n</pre>\n<p>This will make last call to use speedcopy.</p>\n<p>Direct use:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">speedcopy</span>\n\n<span class=\"c1\"># some code ...</span>\n\n<span class=\"n\">speedcopy</span><span class=\"o\">.</span><span class=\"n\">copyfile</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"p\">,</span> <span class=\"n\">dst</span><span class=\"p\">)</span>\n</pre>\n<p>There is also debug mode enabled by setting <code>speedcopy.SPEEDCOPY_DEBUG = True</code>. This will print more information during runtime.</p>\n<h2>Benchmark</h2>\n<h3>Windows</h3>\n<table>\n<thead>\n<tr>\n<th>Filesize</th>\n<th>Python</th>\n<th>Speedcopy</th>\n<th>Factor</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>0.0797</td>\n<td>0.0222</td>\n<td>3.59</td>\n</tr>\n<tr>\n<td>2</td>\n<td>0.1702</td>\n<td>0.0254</td>\n<td>6.69</td>\n</tr>\n<tr>\n<td>4</td>\n<td>0.3257</td>\n<td>0.0271</td>\n<td>12.01</td>\n</tr>\n<tr>\n<td>8</td>\n<td>0.6729</td>\n<td>0.0337</td>\n<td>19.94</td>\n</tr>\n<tr>\n<td>16</td>\n<td>1.335</td>\n<td>0.0384</td>\n<td>34.72</td>\n</tr>\n<tr>\n<td>32</td>\n<td>2.3612</td>\n<td>0.0625</td>\n<td>37.72</td>\n</tr>\n<tr>\n<td>64</td>\n<td>57.4549</td>\n<td>0.9758</td>\n<td>58.88</td>\n</tr>\n<tr>\n<td>128</td>\n<td>10.9294</td>\n<td>0.1669</td>\n<td>65.47</td>\n</tr>\n<tr>\n<td>256</td>\n<td>20.3843</td>\n<td>2.276</td>\n<td>8.96</td>\n</tr>\n<tr>\n<td>512</td>\n<td>35.9462</td>\n<td>3.9966</td>\n<td>8.99</td>\n</tr>\n<tr>\n<td>1024</td>\n<td>65.6285</td>\n<td>28.0291</td>\n<td>2.34</td>\n</tr></tbody></table>\n<h3>Linux</h3>\n<table>\n<thead>\n<tr>\n<th>Filesize</th>\n<th>Python</th>\n<th>Speedcopy</th>\n<th>Factor</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>0.0682</td>\n<td>0.0099</td>\n<td>6.88</td>\n</tr>\n<tr>\n<td>2</td>\n<td>0.0894</td>\n<td>0.0105</td>\n<td>8.51</td>\n</tr>\n<tr>\n<td>4</td>\n<td>0.1337</td>\n<td>0.012</td>\n<td>11.14</td>\n</tr>\n<tr>\n<td>8</td>\n<td>0.1922</td>\n<td>0.0145</td>\n<td>13.25</td>\n</tr>\n<tr>\n<td>16</td>\n<td>0.2853</td>\n<td>0.0193</td>\n<td>14.78</td>\n</tr>\n<tr>\n<td>32</td>\n<td>0.4724</td>\n<td>0.0288</td>\n<td>16.4</td>\n</tr>\n<tr>\n<td>64</td>\n<td>8.0071</td>\n<td>0.4724</td>\n<td>16.94</td>\n</tr>\n<tr>\n<td>128</td>\n<td>1.3338</td>\n<td>0.2311</td>\n<td>5.77</td>\n</tr>\n<tr>\n<td>256</td>\n<td>2.6599</td>\n<td>0.4788</td>\n<td>5.55</td>\n</tr>\n<tr>\n<td>512</td>\n<td>5.3798</td>\n<td>0.9796</td>\n<td>5.49</td>\n</tr>\n<tr>\n<td>1024</td>\n<td>10.3328</td>\n<td>2.9180</td>\n<td>3.54</td>\n</tr></tbody></table>\n<p><em>Note that Windows and Linux timing do not correlate, they are taken from different systems. Notice the spike on 64 Mb size file on both of them. Also note that these figures are not taken from production grade hardware and setup and can be completely off at other places.</em></p>\n<p>You can test it yourself with included <code>benchmark.py</code> (and this will take some time as values are measured multiple times and then averaged).</p>\n<h2>Todo</h2>\n<ul>\n<li>Better error handling</li>\n<li>Other platforms support</li>\n<li>Conform behaviour to original <code>shutil.copyfile()</code></li>\n<li>Review benchmark code</li>\n</ul>\n\n          </div>"}, "last_serial": 6451529, "releases": {"1.0.2": [{"comment_text": "", "digests": {"md5": "2c3dc261c5762288d4351071e9d83eca", "sha256": "b45c6ae28594d934852e69a66a9645ad68da05293b29b0151ad33a234bb3665e"}, "downloads": -1, "filename": "speedcopy-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "2c3dc261c5762288d4351071e9d83eca", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 6193, "upload_time": "2019-06-12T13:02:42", "upload_time_iso_8601": "2019-06-12T13:02:42.872937Z", "url": "https://files.pythonhosted.org/packages/b3/91/a5a9cfdc29d99ee0e26b308c51a485fefd78390b13a8f234df3092eb1c29/speedcopy-1.0.2-py3-none-any.whl", "yanked": false}], "1.0.3": [{"comment_text": "", "digests": {"md5": "1337dee67ed3311c422af44a4ef6ebfe", "sha256": "fd4d9ff4ab3986d89ed08ada1918d0a59e90d1cdf2d3ca2e366675180b9ccdda"}, "downloads": -1, "filename": "speedcopy-1.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "1337dee67ed3311c422af44a4ef6ebfe", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8350, "upload_time": "2019-06-12T13:28:36", "upload_time_iso_8601": "2019-06-12T13:28:36.193018Z", "url": "https://files.pythonhosted.org/packages/91/51/2acb826da66b8186e449956f72c81deaf799653fbf714cfe80e874ce2bce/speedcopy-1.0.3-py3-none-any.whl", "yanked": false}], "1.0.4": [{"comment_text": "", "digests": {"md5": "bd2e2e4061b8b8fb7a6550b03f98d137", "sha256": "5054a57d675b55af6beb7baa541899879d4079bee0f5e4e1827cd8ab8051140f"}, "downloads": -1, "filename": "speedcopy-1.0.4-py3-none-any.whl", "has_sig": false, "md5_digest": "bd2e2e4061b8b8fb7a6550b03f98d137", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8349, "upload_time": "2019-06-12T13:46:35", "upload_time_iso_8601": "2019-06-12T13:46:35.417551Z", "url": "https://files.pythonhosted.org/packages/ee/d4/82fc9f7fcfb7f9abba7074cdc6ead828576ec5be3e7296f2ad4c922318bd/speedcopy-1.0.4-py3-none-any.whl", "yanked": false}], "2.0.0": [{"comment_text": "", "digests": {"md5": "e43cbc839bde6a59aaf96179e9e5a531", "sha256": "27a948025834e2def9e828f9bc13bcc51dd15f9d3785392c8b8cd5035a402765"}, "downloads": -1, "filename": "speedcopy-2.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "e43cbc839bde6a59aaf96179e9e5a531", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 11729, "upload_time": "2019-11-20T10:55:55", "upload_time_iso_8601": "2019-11-20T10:55:55.862917Z", "url": "https://files.pythonhosted.org/packages/16/ad/30e2e021db68bab23e46a530eee3043b5398f6878724105f035fb8fb9cd1/speedcopy-2.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5cbc5583f12890535af8114c27acc363", "sha256": "d8c18a6042dc2fc5d717ebc7f7d2fe3b69fe2a78e649ca78c99e15fc0fe5bceb"}, "downloads": -1, "filename": "speedcopy-2.0.0.tar.gz", "has_sig": false, "md5_digest": "5cbc5583f12890535af8114c27acc363", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8629, "upload_time": "2019-11-20T10:55:56", "upload_time_iso_8601": "2019-11-20T10:55:56.981193Z", "url": "https://files.pythonhosted.org/packages/af/16/94711261d1530e528028597b972cae2dbab6abc797ae9d267d8927cd4ec8/speedcopy-2.0.0.tar.gz", "yanked": false}], "2.0.1": [{"comment_text": "", "digests": {"md5": "75fc14e0d7171f15b39f9d54c0c64129", "sha256": "458856526ec19c74c60da79f8d5cc56c68cf57c671d7d27e7c3ecdf850f70dca"}, "downloads": -1, "filename": "speedcopy-2.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "75fc14e0d7171f15b39f9d54c0c64129", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 11748, "upload_time": "2020-01-14T12:55:12", "upload_time_iso_8601": "2020-01-14T12:55:12.623452Z", "url": "https://files.pythonhosted.org/packages/51/d1/ad8e7ab316a6fcc2f1216f48b85a4d045cc81e93f10f52325a48083c2bc8/speedcopy-2.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "ca33de30d1009c8f8bbbf6eff8d6b6aa", "sha256": "f154e0924026cf54a76989b4087c9ecdc68af9401ffe34500468b62b38a1f0ba"}, "downloads": -1, "filename": "speedcopy-2.0.1.tar.gz", "has_sig": false, "md5_digest": "ca33de30d1009c8f8bbbf6eff8d6b6aa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8650, "upload_time": "2020-01-14T12:55:14", "upload_time_iso_8601": "2020-01-14T12:55:14.350968Z", "url": "https://files.pythonhosted.org/packages/f4/d2/75073f4d4b0bb73875a558fbdb5e5318a4533b51ab2ac0916c2d52b6cc1e/speedcopy-2.0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "75fc14e0d7171f15b39f9d54c0c64129", "sha256": "458856526ec19c74c60da79f8d5cc56c68cf57c671d7d27e7c3ecdf850f70dca"}, "downloads": -1, "filename": "speedcopy-2.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "75fc14e0d7171f15b39f9d54c0c64129", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 11748, "upload_time": "2020-01-14T12:55:12", "upload_time_iso_8601": "2020-01-14T12:55:12.623452Z", "url": "https://files.pythonhosted.org/packages/51/d1/ad8e7ab316a6fcc2f1216f48b85a4d045cc81e93f10f52325a48083c2bc8/speedcopy-2.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "ca33de30d1009c8f8bbbf6eff8d6b6aa", "sha256": "f154e0924026cf54a76989b4087c9ecdc68af9401ffe34500468b62b38a1f0ba"}, "downloads": -1, "filename": "speedcopy-2.0.1.tar.gz", "has_sig": false, "md5_digest": "ca33de30d1009c8f8bbbf6eff8d6b6aa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8650, "upload_time": "2020-01-14T12:55:14", "upload_time_iso_8601": "2020-01-14T12:55:14.350968Z", "url": "https://files.pythonhosted.org/packages/f4/d2/75073f4d4b0bb73875a558fbdb5e5318a4533b51ab2ac0916c2d52b6cc1e/speedcopy-2.0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:05:34 2020"}