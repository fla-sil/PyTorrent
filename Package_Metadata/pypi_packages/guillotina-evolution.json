{"info": {"author": "Jordi Masip", "author_email": "jmasip@vinissimus.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: GNU General Public License v3 (GPLv3)", "Natural Language :: English", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# guillotina_evolution\n\n\n[![Build Status](https://travis-ci.org/vinissimus/guillotina_evolution.svg?branch=master)](https://travis-ci.org/vinissimus/guillotina_evolution) [![PyPI version](https://badge.fury.io/py/guillotina-evolution.svg)](https://badge.fury.io/py/guillotina-evolution) [![Codcov](https://codecov.io/gh/vinissimus/guillotina_evolution/branch/master/graph/badge.svg)](https://codecov.io/gh/vinissimus/guillotina_evolution/branch/master) ![](https://img.shields.io/pypi/pyversions/guillotina_evolution.svg)\n\nAddon that provides evolutions/migrations to create or update objects in your Guillotina containers.\n\n\n## Install\n\n```console\npip install guillotina_evolution\n```\n\n\n## Configure\n\nAdd the following values in `app_settings`:\n\n```python\napp_settings = {\n    \"applications\": [\n        \"guillotina_evolution\",\n    ],\n    \"commands\": {\n        \"g-evolve\": \"guillotina_evolution.commands.evolve.EvolveCommand\",\n    },\n```\n\nConfigure your app addon to initialize guillotina_evolution when is installed:\n\n```python\nfrom guillotina.component import get_utility\nfrom guillotina_evolution.interfaces import IEvolutionUtility\n\n@configure.addon(name=\"app\", title=\"Your guillotina app\")\nclass ManageAddon(Addon):\n    @classmethod\n    async def install(cls, container, request):\n        utility = get_utility(IEvolutionUtility)\n        utility.install()  # initialize current generation with the greatest registered generation\n\n        # ...\n```\n\n\n## Write your evolver\n\nCreate a folder `evolutions` inside your guillotina app that contains the following files:\n\n`app/evolutions/__init__.py`\n```python\nfrom .r20190118 import *  # noqa\n# Don't forget to add all rXXXXXXXX.py!\n```\n\n`app/evolutions/r20190118.py`\n```python\nfrom guillotina_evolution.utils import register_evolution\n\n@register_evolution(1)\nasync def evolver(container):\n    async for item in container.async_items():\n        item.title = item.title + ' (Migrated)'\n        item.register()\n```\n\nUpdate the `includeme()` of your app:\n\n`app/__init__.py`\n```python\ndef includeme(root):\n    # ...\n    configure.scan(\"app.evolutions\")\n```\n\n\n## Evolve\n\nRun guillotina command `g-evolve` to run your migrations.\n\n```console\ng -c config.yaml g-evolve\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/vinissimus/guillotina_evolution", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "guillotina-evolution", "package_url": "https://pypi.org/project/guillotina-evolution/", "platform": "", "project_url": "https://pypi.org/project/guillotina-evolution/", "project_urls": {"Homepage": "https://github.com/vinissimus/guillotina_evolution"}, "release_url": "https://pypi.org/project/guillotina-evolution/1.1.2/", "requires_dist": null, "requires_python": "", "summary": "", "version": "1.1.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>guillotina_evolution</h1>\n<p><a href=\"https://travis-ci.org/vinissimus/guillotina_evolution\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/180635b3fbea3fa0abab721bceae0cad21a1e958/68747470733a2f2f7472617669732d63692e6f72672f76696e697373696d75732f6775696c6c6f74696e615f65766f6c7574696f6e2e7376673f6272616e63683d6d6173746572\"></a> <a href=\"https://badge.fury.io/py/guillotina-evolution\" rel=\"nofollow\"><img alt=\"PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8359b4d42fc507635b777ace78e651fc8798de70/68747470733a2f2f62616467652e667572792e696f2f70792f6775696c6c6f74696e612d65766f6c7574696f6e2e737667\"></a> <a href=\"https://codecov.io/gh/vinissimus/guillotina_evolution/branch/master\" rel=\"nofollow\"><img alt=\"Codcov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/afa3f7eef38eff46932bbf2097184036187a69d3/68747470733a2f2f636f6465636f762e696f2f67682f76696e697373696d75732f6775696c6c6f74696e615f65766f6c7574696f6e2f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a> <img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/42180cf0e54a4ba133c7cafe21f3a68d6068eefc/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f6775696c6c6f74696e615f65766f6c7574696f6e2e737667\"></p>\n<p>Addon that provides evolutions/migrations to create or update objects in your Guillotina containers.</p>\n<h2>Install</h2>\n<pre><span class=\"go\">pip install guillotina_evolution</span>\n</pre>\n<h2>Configure</h2>\n<p>Add the following values in <code>app_settings</code>:</p>\n<pre><span class=\"n\">app_settings</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s2\">\"applications\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"guillotina_evolution\"</span><span class=\"p\">,</span>\n    <span class=\"p\">],</span>\n    <span class=\"s2\">\"commands\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"g-evolve\"</span><span class=\"p\">:</span> <span class=\"s2\">\"guillotina_evolution.commands.evolve.EvolveCommand\"</span><span class=\"p\">,</span>\n    <span class=\"p\">},</span>\n</pre>\n<p>Configure your app addon to initialize guillotina_evolution when is installed:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">guillotina.component</span> <span class=\"kn\">import</span> <span class=\"n\">get_utility</span>\n<span class=\"kn\">from</span> <span class=\"nn\">guillotina_evolution.interfaces</span> <span class=\"kn\">import</span> <span class=\"n\">IEvolutionUtility</span>\n\n<span class=\"nd\">@configure</span><span class=\"o\">.</span><span class=\"n\">addon</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"app\"</span><span class=\"p\">,</span> <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s2\">\"Your guillotina app\"</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">ManageAddon</span><span class=\"p\">(</span><span class=\"n\">Addon</span><span class=\"p\">):</span>\n    <span class=\"nd\">@classmethod</span>\n    <span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">install</span><span class=\"p\">(</span><span class=\"bp\">cls</span><span class=\"p\">,</span> <span class=\"n\">container</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>\n        <span class=\"n\">utility</span> <span class=\"o\">=</span> <span class=\"n\">get_utility</span><span class=\"p\">(</span><span class=\"n\">IEvolutionUtility</span><span class=\"p\">)</span>\n        <span class=\"n\">utility</span><span class=\"o\">.</span><span class=\"n\">install</span><span class=\"p\">()</span>  <span class=\"c1\"># initialize current generation with the greatest registered generation</span>\n\n        <span class=\"c1\"># ...</span>\n</pre>\n<h2>Write your evolver</h2>\n<p>Create a folder <code>evolutions</code> inside your guillotina app that contains the following files:</p>\n<p><code>app/evolutions/__init__.py</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">.r20190118</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># noqa</span>\n<span class=\"c1\"># Don't forget to add all rXXXXXXXX.py!</span>\n</pre>\n<p><code>app/evolutions/r20190118.py</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">guillotina_evolution.utils</span> <span class=\"kn\">import</span> <span class=\"n\">register_evolution</span>\n\n<span class=\"nd\">@register_evolution</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">evolver</span><span class=\"p\">(</span><span class=\"n\">container</span><span class=\"p\">):</span>\n    <span class=\"k\">async</span> <span class=\"k\">for</span> <span class=\"n\">item</span> <span class=\"ow\">in</span> <span class=\"n\">container</span><span class=\"o\">.</span><span class=\"n\">async_items</span><span class=\"p\">():</span>\n        <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">title</span> <span class=\"o\">=</span> <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">title</span> <span class=\"o\">+</span> <span class=\"s1\">' (Migrated)'</span>\n        <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">()</span>\n</pre>\n<p>Update the <code>includeme()</code> of your app:</p>\n<p><code>app/__init__.py</code></p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">includeme</span><span class=\"p\">(</span><span class=\"n\">root</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"n\">configure</span><span class=\"o\">.</span><span class=\"n\">scan</span><span class=\"p\">(</span><span class=\"s2\">\"app.evolutions\"</span><span class=\"p\">)</span>\n</pre>\n<h2>Evolve</h2>\n<p>Run guillotina command <code>g-evolve</code> to run your migrations.</p>\n<pre><span class=\"go\">g -c config.yaml g-evolve</span>\n</pre>\n\n          </div>"}, "last_serial": 6424220, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "aaff44175de1d682d17a6501b3627b7d", "sha256": "98d3c029bf6d8850d8f4f608235a6a73977dfb7f65c4e923f895e370da5e7668"}, "downloads": -1, "filename": "guillotina_evolution-0.2.0.tar.gz", "has_sig": false, "md5_digest": "aaff44175de1d682d17a6501b3627b7d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4317, "upload_time": "2019-07-15T10:56:52", "upload_time_iso_8601": "2019-07-15T10:56:52.799314Z", "url": "https://files.pythonhosted.org/packages/60/5a/0a16fab8bb0844073d9e98e8d2e9da46af1a190b770c9384edf87fde14b6/guillotina_evolution-0.2.0.tar.gz", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "fa6b196e2377b2cfebf70a4ff0dea4df", "sha256": "0bbed58eff13b710cc98528392dcb1acbf39063d84181bbaf16cb7a98b0d6149"}, "downloads": -1, "filename": "guillotina_evolution-0.2.1.tar.gz", "has_sig": false, "md5_digest": "fa6b196e2377b2cfebf70a4ff0dea4df", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4477, "upload_time": "2019-07-15T12:20:42", "upload_time_iso_8601": "2019-07-15T12:20:42.147164Z", "url": "https://files.pythonhosted.org/packages/99/3f/2bcb058e3040839d5a612d8eba18fe81c07a1b3feb5676ed89918e764b6e/guillotina_evolution-0.2.1.tar.gz", "yanked": false}], "0.2.2": [{"comment_text": "", "digests": {"md5": "00b7c254a8e03db83ca07ee3b7de74ac", "sha256": "358df0a8f69c3fdce339cdd2026f6490ed4670afd4fb3d562a4862f96eb63bd7"}, "downloads": -1, "filename": "guillotina_evolution-0.2.2.tar.gz", "has_sig": false, "md5_digest": "00b7c254a8e03db83ca07ee3b7de74ac", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16824, "upload_time": "2019-07-18T16:01:19", "upload_time_iso_8601": "2019-07-18T16:01:19.143972Z", "url": "https://files.pythonhosted.org/packages/82/89/a568109bc4946bc41565a22db22e68fba467607a5e4ff00f8082859de05c/guillotina_evolution-0.2.2.tar.gz", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "e163eb4e7ac8696430970bbc2c1088d4", "sha256": "8c6137b4e575c453a320365add6933e14d619c2b82432214ea7fc37e2dc0b1a9"}, "downloads": -1, "filename": "guillotina_evolution-1.0.0.tar.gz", "has_sig": false, "md5_digest": "e163eb4e7ac8696430970bbc2c1088d4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16493, "upload_time": "2019-10-15T13:44:03", "upload_time_iso_8601": "2019-10-15T13:44:03.822783Z", "url": "https://files.pythonhosted.org/packages/32/b9/b7b81a18e3b074f46475375b54a72363698f7b51bc7a94f6e6d25468c4ac/guillotina_evolution-1.0.0.tar.gz", "yanked": false}], "1.0.1": [{"comment_text": "", "digests": {"md5": "abda872ebc1699495fc69c4c4ce66d40", "sha256": "2b20a18bfd22def533f2e3bff0607bca60494cd3be2483fdb55b402f1ffaa631"}, "downloads": -1, "filename": "guillotina_evolution-1.0.1.tar.gz", "has_sig": false, "md5_digest": "abda872ebc1699495fc69c4c4ce66d40", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16791, "upload_time": "2019-10-15T13:52:23", "upload_time_iso_8601": "2019-10-15T13:52:23.342778Z", "url": "https://files.pythonhosted.org/packages/45/7c/feb14cd1d489f098a0fc5423e4ba9200dba65e52da8deab928681ae93457/guillotina_evolution-1.0.1.tar.gz", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "b47fc1e82c9dc2360d93dcc9ad603a52", "sha256": "39e52309df57cdaf4afede9f7cdbd0796c73d149dcdf904bc0e555869877ce44"}, "downloads": -1, "filename": "guillotina_evolution-1.1.0.tar.gz", "has_sig": false, "md5_digest": "b47fc1e82c9dc2360d93dcc9ad603a52", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16797, "upload_time": "2019-12-09T11:37:33", "upload_time_iso_8601": "2019-12-09T11:37:33.473992Z", "url": "https://files.pythonhosted.org/packages/d9/73/de0137b466fcc943c554bf311bcd5b54df4cd122f86663febcefb0f32664/guillotina_evolution-1.1.0.tar.gz", "yanked": false}], "1.1.1": [{"comment_text": "", "digests": {"md5": "1f44948ca249fb54dee343d87ce4eb0f", "sha256": "1a5b341a87c0e06d4ad4e5778e4419f87b91f78ecd165edb0590d459992321c7"}, "downloads": -1, "filename": "guillotina_evolution-1.1.1.tar.gz", "has_sig": false, "md5_digest": "1f44948ca249fb54dee343d87ce4eb0f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16910, "upload_time": "2019-12-12T10:33:17", "upload_time_iso_8601": "2019-12-12T10:33:17.897849Z", "url": "https://files.pythonhosted.org/packages/7c/95/e766a649ffd4a74e1dfd4389670e72f7acdf7ccc2d49d986aeb57f957ace/guillotina_evolution-1.1.1.tar.gz", "yanked": false}], "1.1.2": [{"comment_text": "", "digests": {"md5": "097aeee4b65c7956bee4522ffc997d56", "sha256": "f844a9bb4c97be77be82bf5a382a6a0545768a7f6c6946976fbcdf4a82077879"}, "downloads": -1, "filename": "guillotina_evolution-1.1.2.tar.gz", "has_sig": false, "md5_digest": "097aeee4b65c7956bee4522ffc997d56", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16994, "upload_time": "2020-01-09T19:47:11", "upload_time_iso_8601": "2020-01-09T19:47:11.204406Z", "url": "https://files.pythonhosted.org/packages/a9/57/1d41f7f37ffbf9f5e7aeb6418cc5f085d7ef2ef2e953052f3d4a803ec762/guillotina_evolution-1.1.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "097aeee4b65c7956bee4522ffc997d56", "sha256": "f844a9bb4c97be77be82bf5a382a6a0545768a7f6c6946976fbcdf4a82077879"}, "downloads": -1, "filename": "guillotina_evolution-1.1.2.tar.gz", "has_sig": false, "md5_digest": "097aeee4b65c7956bee4522ffc997d56", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16994, "upload_time": "2020-01-09T19:47:11", "upload_time_iso_8601": "2020-01-09T19:47:11.204406Z", "url": "https://files.pythonhosted.org/packages/a9/57/1d41f7f37ffbf9f5e7aeb6418cc5f085d7ef2ef2e953052f3d4a803ec762/guillotina_evolution-1.1.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:53:17 2020"}