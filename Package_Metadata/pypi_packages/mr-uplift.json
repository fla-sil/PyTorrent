{"info": {"author": "Ibotta Inc.", "author_email": "machine_learning@ibotta.com", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Scientific/Engineering"], "description": "mr_uplift: Machine learning Uplift Package\n========================================================\n\n\nIntroduction\n-----------------\nThere are currently several packages for uplift models (see `EconML <https://github.com/microsoft/EconML>`__ and `GRF <https://github.com/grf-labs/grf>`__). They tend to focus on interesting ways of estimating the heterogeneous treatment effect. However models in their current state tend to focus on the single response, singe treatment scenario. In addition the metrics they use do not give estimates to the expectations of response variables if the models were used in practice.\n\nThis package attempts to build an automated solution for Uplift modeling that includes the following features:\n\n#. It allows for Multiple Treatments. In addition one can incorporate meta features for each treatment. For example; a particular treatment might have several shared features with other bonuses. Instead of creating a dummy indicator for each bonus the user can create a vector of categorial or continuous variables to represent the treatment.\n#. `ERUPT <https://medium.com/building-ibotta/erupt-expected-response-under-proposed-treatments-ff7dd45c84b4>`__ functionality that estimates model performance on OOS data. This metric calculates the expected response if the model were given to the average user.\n#. Support for multiple responses. This allows estimation of tradeoffs between maximizing / minimizing weighted sums of responses. An example can be found `here <https://medium.com/building-ibotta/estimating-and-visualizing-business-tradeoffs-in-uplift-models-80ff845a5698>`__\n\nIt does so by estimating a neural network of the form y \u223c f(t,x) where y, x, and t are the response, explanatory variables and treatment variables. It is assumed the treatment was randomly assigned. There is functionality to predict counterfactuals for all treatments and calculates ERUPT metrics on out of sample data.\n\n\nQuick Start Example\n-------------------\n\nIn a python enviornment :\n\n.. code-block:: python\n\n    import numpy as np\n    import pandas as pd\n\n    from dataset.data_simulation import get_simple_uplift_data\n    from mr_uplift.mr_uplift import MRUplift\n\n    #Generate Data\n    y, x, t = get_simple_uplift_data(10000)\n    y = pd.DataFrame(y)\n    y.columns = ['revenue','cost', 'noise']\n    y['profit'] = y['revenue'] - y['cost']\n\n    #Build / Gridsearch model\n    uplift_model = MRUplift()\n    param_grid = dict(num_nodes=[8], dropout=[.1, .5], activation=[\n                          'relu'], num_layers=[1, 2], epochs=[25], batch_size=[30])\n    uplift_model.fit(x, y, t.reshape(-1,1), param_grid = param_grid, n_jobs = 1)\n\n    #OOS ERUPT Curves\n    erupt_curves, dists = uplift_model.get_erupt_curves()\n\n    #predict optimal treatments with new observations\n    _, x_new ,_  = get_simple_uplift_data(5)\n    uplift_model.predict_optimal_treatments(x_new, weights = np.array([.6,-.4,0,0]).reshape(1,-1))\n\n\n\nRelevant Papers and Blog Posts\n------------------------------\n\nFor Discussion on the metric used to calculate how model performs see:\n\n`ERUPT: Expected Response Under Proposed Treatments <https://medium.com/building-ibotta/erupt-expected-response-under-proposed-treatments-ff7dd45c84b4>`__\n\n`Uplift Modeling with Multiple Treatments and General Response Types <https://arxiv.org/pdf/1705.08492.pdf>`__\n\n`Heterogeneous Treatment Effects and Optimal Targeting Policy Evaluation <https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3111957>`__\n\nFor tradeoff analysis see:\n\n`Estimating and Visualizing Business Tradeoffs in Uplift Models <https://medium.com/building-ibotta/estimating-and-visualizing-business-tradeoffs-in-uplift-models-80ff845a5698>`__\n\n\nAcknowledgements\n~~~~~~~~~~~~~~~~\nThanks to `Evan Harris <https://github.com/denver1117>`__, `Andrew Tilley <https://github.com/tilleyand>`__, `Matt Johnson <https://github.com/mattsgithub>`__, and `Nicole Woytarowicz <https://github.com/nicolele>`__  for internal review before open source. Thanks to `James Foley <https://github.com/chadfoley36>`__ for logo artwork.", "description_content_type": "", "docs_url": null, "download_url": "https://github.com/Ibotta/mr_uplift", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "", "license": "Apache 2.0", "maintainer": "", "maintainer_email": "", "name": "mr-uplift", "package_url": "https://pypi.org/project/mr-uplift/", "platform": "", "project_url": "https://pypi.org/project/mr-uplift/", "project_urls": {"Download": "https://github.com/Ibotta/mr_uplift", "Source Code": "https://github.com/Ibotta/mr_uplift"}, "release_url": "https://pypi.org/project/mr-uplift/0.0.3/", "requires_dist": null, "requires_python": ">=3.5", "summary": "Machine learning tools for uplift models", "version": "0.0.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"introduction\">\n<h2>Introduction</h2>\n<p>There are currently several packages for uplift models (see <a href=\"https://github.com/microsoft/EconML\" rel=\"nofollow\">EconML</a> and <a href=\"https://github.com/grf-labs/grf\" rel=\"nofollow\">GRF</a>). They tend to focus on interesting ways of estimating the heterogeneous treatment effect. However models in their current state tend to focus on the single response, singe treatment scenario. In addition the metrics they use do not give estimates to the expectations of response variables if the models were used in practice.</p>\n<p>This package attempts to build an automated solution for Uplift modeling that includes the following features:</p>\n<ol>\n<li>It allows for Multiple Treatments. In addition one can incorporate meta features for each treatment. For example; a particular treatment might have several shared features with other bonuses. Instead of creating a dummy indicator for each bonus the user can create a vector of categorial or continuous variables to represent the treatment.</li>\n<li><a href=\"https://medium.com/building-ibotta/erupt-expected-response-under-proposed-treatments-ff7dd45c84b4\" rel=\"nofollow\">ERUPT</a> functionality that estimates model performance on OOS data. This metric calculates the expected response if the model were given to the average user.</li>\n<li>Support for multiple responses. This allows estimation of tradeoffs between maximizing / minimizing weighted sums of responses. An example can be found <a href=\"https://medium.com/building-ibotta/estimating-and-visualizing-business-tradeoffs-in-uplift-models-80ff845a5698\" rel=\"nofollow\">here</a></li>\n</ol>\n<p>It does so by estimating a neural network of the form y \u223c f(t,x) where y, x, and t are the response, explanatory variables and treatment variables. It is assumed the treatment was randomly assigned. There is functionality to predict counterfactuals for all treatments and calculates ERUPT metrics on out of sample data.</p>\n</div>\n<div id=\"quick-start-example\">\n<h2>Quick Start Example</h2>\n<p>In a python enviornment :</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"nn\">pd</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">dataset.data_simulation</span> <span class=\"kn\">import</span> <span class=\"n\">get_simple_uplift_data</span>\n<span class=\"kn\">from</span> <span class=\"nn\">mr_uplift.mr_uplift</span> <span class=\"kn\">import</span> <span class=\"n\">MRUplift</span>\n\n<span class=\"c1\">#Generate Data</span>\n<span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"n\">get_simple_uplift_data</span><span class=\"p\">(</span><span class=\"mi\">10000</span><span class=\"p\">)</span>\n<span class=\"n\">y</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">DataFrame</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">)</span>\n<span class=\"n\">y</span><span class=\"o\">.</span><span class=\"n\">columns</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'revenue'</span><span class=\"p\">,</span><span class=\"s1\">'cost'</span><span class=\"p\">,</span> <span class=\"s1\">'noise'</span><span class=\"p\">]</span>\n<span class=\"n\">y</span><span class=\"p\">[</span><span class=\"s1\">'profit'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">y</span><span class=\"p\">[</span><span class=\"s1\">'revenue'</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"n\">y</span><span class=\"p\">[</span><span class=\"s1\">'cost'</span><span class=\"p\">]</span>\n\n<span class=\"c1\">#Build / Gridsearch model</span>\n<span class=\"n\">uplift_model</span> <span class=\"o\">=</span> <span class=\"n\">MRUplift</span><span class=\"p\">()</span>\n<span class=\"n\">param_grid</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">num_nodes</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">8</span><span class=\"p\">],</span> <span class=\"n\">dropout</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"o\">.</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">.</span><span class=\"mi\">5</span><span class=\"p\">],</span> <span class=\"n\">activation</span><span class=\"o\">=</span><span class=\"p\">[</span>\n                      <span class=\"s1\">'relu'</span><span class=\"p\">],</span> <span class=\"n\">num_layers</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"n\">epochs</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">25</span><span class=\"p\">],</span> <span class=\"n\">batch_size</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">])</span>\n<span class=\"n\">uplift_model</span><span class=\"o\">.</span><span class=\"n\">fit</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"n\">reshape</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"n\">param_grid</span> <span class=\"o\">=</span> <span class=\"n\">param_grid</span><span class=\"p\">,</span> <span class=\"n\">n_jobs</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n\n<span class=\"c1\">#OOS ERUPT Curves</span>\n<span class=\"n\">erupt_curves</span><span class=\"p\">,</span> <span class=\"n\">dists</span> <span class=\"o\">=</span> <span class=\"n\">uplift_model</span><span class=\"o\">.</span><span class=\"n\">get_erupt_curves</span><span class=\"p\">()</span>\n\n<span class=\"c1\">#predict optimal treatments with new observations</span>\n<span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">x_new</span> <span class=\"p\">,</span><span class=\"n\">_</span>  <span class=\"o\">=</span> <span class=\"n\">get_simple_uplift_data</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n<span class=\"n\">uplift_model</span><span class=\"o\">.</span><span class=\"n\">predict_optimal_treatments</span><span class=\"p\">(</span><span class=\"n\">x_new</span><span class=\"p\">,</span> <span class=\"n\">weights</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"o\">.</span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"o\">-.</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">reshape</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">))</span>\n</pre>\n</div>\n<div id=\"relevant-papers-and-blog-posts\">\n<h2>Relevant Papers and Blog Posts</h2>\n<p>For Discussion on the metric used to calculate how model performs see:</p>\n<p><a href=\"https://medium.com/building-ibotta/erupt-expected-response-under-proposed-treatments-ff7dd45c84b4\" rel=\"nofollow\">ERUPT: Expected Response Under Proposed Treatments</a></p>\n<p><a href=\"https://arxiv.org/pdf/1705.08492.pdf\" rel=\"nofollow\">Uplift Modeling with Multiple Treatments and General Response Types</a></p>\n<p><a href=\"https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3111957\" rel=\"nofollow\">Heterogeneous Treatment Effects and Optimal Targeting Policy Evaluation</a></p>\n<p>For tradeoff analysis see:</p>\n<p><a href=\"https://medium.com/building-ibotta/estimating-and-visualizing-business-tradeoffs-in-uplift-models-80ff845a5698\" rel=\"nofollow\">Estimating and Visualizing Business Tradeoffs in Uplift Models</a></p>\n<div id=\"acknowledgements\">\n<h3>Acknowledgements</h3>\n<p>Thanks to <a href=\"https://github.com/denver1117\" rel=\"nofollow\">Evan Harris</a>, <a href=\"https://github.com/tilleyand\" rel=\"nofollow\">Andrew Tilley</a>, <a href=\"https://github.com/mattsgithub\" rel=\"nofollow\">Matt Johnson</a>, and <a href=\"https://github.com/nicolele\" rel=\"nofollow\">Nicole Woytarowicz</a>  for internal review before open source. Thanks to <a href=\"https://github.com/chadfoley36\" rel=\"nofollow\">James Foley</a> for logo artwork.</p>\n</div>\n</div>\n\n          </div>"}, "last_serial": 7146890, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "d8abe85aab7058171aff586742b1d8d4", "sha256": "1422a1f18a03d44bb4478c3495832e185ffca4dbb9d6a4f60e6a12885ad00153"}, "downloads": -1, "filename": "mr_uplift-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "d8abe85aab7058171aff586742b1d8d4", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 19142, "upload_time": "2020-04-22T16:09:25", "upload_time_iso_8601": "2020-04-22T16:09:25.984411Z", "url": "https://files.pythonhosted.org/packages/66/16/3bdf3294e494ff2806cad1365334dea051f73e6315e4c129391dba07ad87/mr_uplift-0.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "0b0830ca271c2b521c9471d3abbfce03", "sha256": "11cc671e6a48cd421a9fdd6ad5b052dde33785d882d06442e23ab01944cc53d8"}, "downloads": -1, "filename": "mr_uplift-0.0.1.tar.gz", "has_sig": false, "md5_digest": "0b0830ca271c2b521c9471d3abbfce03", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 13198, "upload_time": "2020-04-22T16:09:27", "upload_time_iso_8601": "2020-04-22T16:09:27.969434Z", "url": "https://files.pythonhosted.org/packages/63/4f/b7c0b780943aa632d1bebc72a9b23d2224b0156df99b39a16c0e9acbaf9d/mr_uplift-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "b30bf97c2867ae3197f8d7093e2ee355", "sha256": "1287c5620014bb2a2edb74a757a6e4ba01e83add1685d700c3414e7837613607"}, "downloads": -1, "filename": "mr_uplift-0.0.2.tar.gz", "has_sig": false, "md5_digest": "b30bf97c2867ae3197f8d7093e2ee355", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 13274, "upload_time": "2020-04-23T18:39:44", "upload_time_iso_8601": "2020-04-23T18:39:44.965864Z", "url": "https://files.pythonhosted.org/packages/af/b4/4248a1fd277b2abe8d0354c37a880b250ca74056a9c24596c2eef42bbd69/mr_uplift-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "6ac6215fbc52e45b4471733928ff7dc0", "sha256": "dde2c0372849f1a9e67697219fac65560207e93cca401ce32fbf23ffdcfad880"}, "downloads": -1, "filename": "mr_uplift-0.0.3.tar.gz", "has_sig": false, "md5_digest": "6ac6215fbc52e45b4471733928ff7dc0", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 13391, "upload_time": "2020-05-01T18:19:22", "upload_time_iso_8601": "2020-05-01T18:19:22.375731Z", "url": "https://files.pythonhosted.org/packages/8b/5f/e4be9c5a1a0e9d404bb60ab5b7e6cf5179c2114b71f94fc3a5f6b1d5bbde/mr_uplift-0.0.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "6ac6215fbc52e45b4471733928ff7dc0", "sha256": "dde2c0372849f1a9e67697219fac65560207e93cca401ce32fbf23ffdcfad880"}, "downloads": -1, "filename": "mr_uplift-0.0.3.tar.gz", "has_sig": false, "md5_digest": "6ac6215fbc52e45b4471733928ff7dc0", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 13391, "upload_time": "2020-05-01T18:19:22", "upload_time_iso_8601": "2020-05-01T18:19:22.375731Z", "url": "https://files.pythonhosted.org/packages/8b/5f/e4be9c5a1a0e9d404bb60ab5b7e6cf5179c2114b71f94fc3a5f6b1d5bbde/mr_uplift-0.0.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:50:57 2020"}