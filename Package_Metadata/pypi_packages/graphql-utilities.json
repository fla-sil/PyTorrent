{"info": {"author": "Melvin Koh", "author_email": "melvinkcx@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Environment :: Web Environment", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Software Development :: Libraries"], "description": "# graphql-utilities\n\n![](https://github.com/melvinkcx/graphql-utilities/workflows/tests/badge.svg)\n\n**graphql-utilities** tries to secure your GraphQL API from malicious queries and provides utilities to make using `graphql-core` easier.\n\n1. It comes with a custom configurable `ExtendedExecutionContext` class that is capable of performing:\n\n   * **query cost analysis**: define the cost of your queries using the `@cost()` directive provided, `graphql-utilities` provides helper functions and custom execution context to protect you from overly complex queries.\n   * **depth limiting**: limit the maximum depth of queries, it's especially useful with object types with recursive relationship\n\n2. It also ships decorators for:\n\n   * **resource-level/one-shot middleware**: middleware in `graphql-core` is run at field-level, it is handly when you need your middleware to run only once, especially auth-related middleware.\n\n## Installation\n\n```sh\npip install graphql-utilities\n```\n\nAlternatively, if you use pipenv:\n\n```sh\npipenv install graphql-utilities\n```\n\n## Examples\n\n### Operation-level middleware (One-shot middleware)\n\n```python\nfrom graphql_utilities.decorators import run_only_once\n\n\nclass AuthMiddleware:\n    @run_only_once\n    def resolve(self, next_, root, info, *args, **kwargs):\n        # middleware logic\n        return next_(root, info, *args, **kwargs)   \n```\n\n### Limiting Query Depth\n\n```python\n# import your schema\nfrom graphql import execute, parse   # Requires `graphql-core>=3.0`\nfrom graphql_utilities.execution import ExtendedExecutionContext\n\n\nquery = '{ field_1_str field_2_int field_3_obj { field_3_obj_sub_1 { xxx } } }'\ngraphql_sync(schema=schema, source=query,\n               context_value={\"depth_analysis\": {\n                   \"max_depth\": 2   # Maximum depth allowed\n               }},\n               execution_context_class=ExtendedExecutionContext     # Use the `ExtendedExecutionContext` provided in `graphql-utilities`\n        )\n```\n\n### Query Cost Analysis\n\nSee the documentation at [https://graphql-utilities.readthedocs.io/en/latest/](https://graphql-utilities.readthedocs.io/en/latest/)\n\n## Motivation\n\nIn recent projects, I ran into some problems with `graphene` and `graphql-core` including missing operation-level middleware (See [issue here](https://github.com/graphql-python/graphene/issues/1117)), etc. \n`graphql-utilities` is a compilation of utilities and custom execution context for depth analysis, etc targeting `graphql-core>=3.0`.\n\n## Contributing\n\nAny form of contribution, feature requests, bug reports, pull requests are largely welcome.  \n\n## Licenses\n\nMIT Licensed. GraphQL logo is licensed under Facebook [BSD](http://opensource.org/licenses/bsd-license.php).\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/melvinkcx/graphql-utilities", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "graphql-utilities", "package_url": "https://pypi.org/project/graphql-utilities/", "platform": "", "project_url": "https://pypi.org/project/graphql-utilities/", "project_urls": {"Homepage": "https://github.com/melvinkcx/graphql-utilities"}, "release_url": "https://pypi.org/project/graphql-utilities/0.4.0/", "requires_dist": ["graphql-core (>=3.0)", "pytest (<6,>=5.3.4) ; extra == 'dev'", "flake8 (<4,>=3.7.9) ; extra == 'dev'", "pytest-describe (<1,>=0.12) ; extra == 'dev'", "django (<3,>=1.11) ; extra == 'dev'", "sphinx (<3,>=2.4.1) ; extra == 'dev'", "sphinx-rtd-theme (<1,>=0.4.3) ; extra == 'dev'"], "requires_python": ">=3.6,<4", "summary": "Collection of utilities, middleware, decorators for graphql-core>=3.0", "version": "0.4.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>graphql-utilities</h1>\n<p><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b10fbc810d2bb188e8947c15c3e06d7137453904/68747470733a2f2f6769746875622e636f6d2f6d656c76696e6b63782f6772617068716c2d7574696c69746965732f776f726b666c6f77732f74657374732f62616467652e737667\"></p>\n<p><strong>graphql-utilities</strong> tries to secure your GraphQL API from malicious queries and provides utilities to make using <code>graphql-core</code> easier.</p>\n<ol>\n<li>\n<p>It comes with a custom configurable <code>ExtendedExecutionContext</code> class that is capable of performing:</p>\n<ul>\n<li><strong>query cost analysis</strong>: define the cost of your queries using the <code>@cost()</code> directive provided, <code>graphql-utilities</code> provides helper functions and custom execution context to protect you from overly complex queries.</li>\n<li><strong>depth limiting</strong>: limit the maximum depth of queries, it's especially useful with object types with recursive relationship</li>\n</ul>\n</li>\n<li>\n<p>It also ships decorators for:</p>\n<ul>\n<li><strong>resource-level/one-shot middleware</strong>: middleware in <code>graphql-core</code> is run at field-level, it is handly when you need your middleware to run only once, especially auth-related middleware.</li>\n</ul>\n</li>\n</ol>\n<h2>Installation</h2>\n<pre>pip install graphql-utilities\n</pre>\n<p>Alternatively, if you use pipenv:</p>\n<pre>pipenv install graphql-utilities\n</pre>\n<h2>Examples</h2>\n<h3>Operation-level middleware (One-shot middleware)</h3>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">graphql_utilities.decorators</span> <span class=\"kn\">import</span> <span class=\"n\">run_only_once</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">AuthMiddleware</span><span class=\"p\">:</span>\n    <span class=\"nd\">@run_only_once</span>\n    <span class=\"k\">def</span> <span class=\"nf\">resolve</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">next_</span><span class=\"p\">,</span> <span class=\"n\">root</span><span class=\"p\">,</span> <span class=\"n\">info</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"c1\"># middleware logic</span>\n        <span class=\"k\">return</span> <span class=\"n\">next_</span><span class=\"p\">(</span><span class=\"n\">root</span><span class=\"p\">,</span> <span class=\"n\">info</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>   \n</pre>\n<h3>Limiting Query Depth</h3>\n<pre><span class=\"c1\"># import your schema</span>\n<span class=\"kn\">from</span> <span class=\"nn\">graphql</span> <span class=\"kn\">import</span> <span class=\"n\">execute</span><span class=\"p\">,</span> <span class=\"n\">parse</span>   <span class=\"c1\"># Requires `graphql-core&gt;=3.0`</span>\n<span class=\"kn\">from</span> <span class=\"nn\">graphql_utilities.execution</span> <span class=\"kn\">import</span> <span class=\"n\">ExtendedExecutionContext</span>\n\n\n<span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"s1\">'{ field_1_str field_2_int field_3_obj { field_3_obj_sub_1 { xxx } } }'</span>\n<span class=\"n\">graphql_sync</span><span class=\"p\">(</span><span class=\"n\">schema</span><span class=\"o\">=</span><span class=\"n\">schema</span><span class=\"p\">,</span> <span class=\"n\">source</span><span class=\"o\">=</span><span class=\"n\">query</span><span class=\"p\">,</span>\n               <span class=\"n\">context_value</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"depth_analysis\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                   <span class=\"s2\">\"max_depth\"</span><span class=\"p\">:</span> <span class=\"mi\">2</span>   <span class=\"c1\"># Maximum depth allowed</span>\n               <span class=\"p\">}},</span>\n               <span class=\"n\">execution_context_class</span><span class=\"o\">=</span><span class=\"n\">ExtendedExecutionContext</span>     <span class=\"c1\"># Use the `ExtendedExecutionContext` provided in `graphql-utilities`</span>\n        <span class=\"p\">)</span>\n</pre>\n<h3>Query Cost Analysis</h3>\n<p>See the documentation at <a href=\"https://graphql-utilities.readthedocs.io/en/latest/\" rel=\"nofollow\">https://graphql-utilities.readthedocs.io/en/latest/</a></p>\n<h2>Motivation</h2>\n<p>In recent projects, I ran into some problems with <code>graphene</code> and <code>graphql-core</code> including missing operation-level middleware (See <a href=\"https://github.com/graphql-python/graphene/issues/1117\" rel=\"nofollow\">issue here</a>), etc.\n<code>graphql-utilities</code> is a compilation of utilities and custom execution context for depth analysis, etc targeting <code>graphql-core&gt;=3.0</code>.</p>\n<h2>Contributing</h2>\n<p>Any form of contribution, feature requests, bug reports, pull requests are largely welcome.</p>\n<h2>Licenses</h2>\n<p>MIT Licensed. GraphQL logo is licensed under Facebook <a href=\"http://opensource.org/licenses/bsd-license.php\" rel=\"nofollow\">BSD</a>.</p>\n\n          </div>"}, "last_serial": 6679730, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "65628f8dae5036222b68b0b8676ed22e", "sha256": "c8354a06e88cb4aed207ceb6d7f5a3dc5b77f86b68282f8464e162dafb1d69cc"}, "downloads": -1, "filename": "graphql_utilities-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "65628f8dae5036222b68b0b8676ed22e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4", "size": 7499, "upload_time": "2020-01-31T07:24:41", "upload_time_iso_8601": "2020-01-31T07:24:41.413243Z", "url": "https://files.pythonhosted.org/packages/a3/ca/00329cd10c515d2f80a4f7cfbdeb560a542ab9631e6ecc27d39b53465dbc/graphql_utilities-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "330974e1f450e8e93c29deb6e4e9cd7b", "sha256": "58e6a7980a07513f03f9ecae7dc40faf1939878019b6dd398e6ad0b19d697c9a"}, "downloads": -1, "filename": "graphql-utilities-0.1.0.tar.gz", "has_sig": false, "md5_digest": "330974e1f450e8e93c29deb6e4e9cd7b", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4", "size": 4740, "upload_time": "2020-01-31T07:24:44", "upload_time_iso_8601": "2020-01-31T07:24:44.081098Z", "url": "https://files.pythonhosted.org/packages/f3/2d/c26d0e056046106531d35b6266e8d057578d5e56111734a5ca5997757a7e/graphql-utilities-0.1.0.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "251414931ae0b519dc1beb2903cb9948", "sha256": "230632e7785b1ec48251a5b5c16240b4ba308cc95362c19c15937c96ff20502a"}, "downloads": -1, "filename": "graphql_utilities-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "251414931ae0b519dc1beb2903cb9948", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4", "size": 8106, "upload_time": "2020-02-19T06:30:28", "upload_time_iso_8601": "2020-02-19T06:30:28.514074Z", "url": "https://files.pythonhosted.org/packages/6c/65/7eef77470a065fda9e1c53352630079c347ca87c1ed8e5a78dc372c92ea7/graphql_utilities-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "af63ed587ddb8e0e53a9e703eb43194c", "sha256": "d552689a661618efd1a39cfe6bb7e83b789eb7dc09ef64074b177f587204c2ae"}, "downloads": -1, "filename": "graphql-utilities-0.2.0.tar.gz", "has_sig": false, "md5_digest": "af63ed587ddb8e0e53a9e703eb43194c", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4", "size": 5633, "upload_time": "2020-02-19T06:30:29", "upload_time_iso_8601": "2020-02-19T06:30:29.700064Z", "url": "https://files.pythonhosted.org/packages/ae/a8/be0f0fe21b0b888115bee0df497fcafea76c2aa89fe96177b81dc9b9fd32/graphql-utilities-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "44b3aba55694782d0be247bf217a48ea", "sha256": "e0dfe955d41a6311dd09c80d06678e72a01dfb668c0a0adc6ee7dc7394963fb0"}, "downloads": -1, "filename": "graphql_utilities-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "44b3aba55694782d0be247bf217a48ea", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4", "size": 8218, "upload_time": "2020-02-20T01:57:54", "upload_time_iso_8601": "2020-02-20T01:57:54.969649Z", "url": "https://files.pythonhosted.org/packages/11/8e/3f46fa31a22e65db67be66a9de56f66aeacc8725eed4402b9a7f10c2c20e/graphql_utilities-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "eb6183335003a9ca7af3d21269061266", "sha256": "ef7270c8d3bf2704c89eafaced69280dccbd76b74680bc7016bf8668c62869ad"}, "downloads": -1, "filename": "graphql-utilities-0.3.0.tar.gz", "has_sig": false, "md5_digest": "eb6183335003a9ca7af3d21269061266", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4", "size": 5777, "upload_time": "2020-02-20T01:57:55", "upload_time_iso_8601": "2020-02-20T01:57:55.871057Z", "url": "https://files.pythonhosted.org/packages/60/12/e1de8005a4f0e309d7ab392a1b969f401de7fb6c93fa4c7e3e0ea93f659d/graphql-utilities-0.3.0.tar.gz", "yanked": false}], "0.4.0": [{"comment_text": "", "digests": {"md5": "7c3a2088c3d054be29bcd0fdf4fc3637", "sha256": "9c13af3fc4d5648df8e91385542aa155c51feb7009127e89350839763f871df3"}, "downloads": -1, "filename": "graphql_utilities-0.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "7c3a2088c3d054be29bcd0fdf4fc3637", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4", "size": 14136, "upload_time": "2020-02-22T06:36:33", "upload_time_iso_8601": "2020-02-22T06:36:33.214546Z", "url": "https://files.pythonhosted.org/packages/27/7e/2e9469fd4763e8557e59f5662f4caba6e37670bc03ec78f3304abf4807d1/graphql_utilities-0.4.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9d3b7a5c58c9245cd5a1bfe68084b2f4", "sha256": "8d1e5f43ec45c8da2b254cb53f4253df14fa7edeb494bae604aec21fe8d5d2e6"}, "downloads": -1, "filename": "graphql-utilities-0.4.0.tar.gz", "has_sig": false, "md5_digest": "9d3b7a5c58c9245cd5a1bfe68084b2f4", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4", "size": 11534, "upload_time": "2020-02-22T06:36:34", "upload_time_iso_8601": "2020-02-22T06:36:34.536686Z", "url": "https://files.pythonhosted.org/packages/50/24/cf4a8dac6c526ef2479a2afadc3c2b2d559878b336ceb762f7301458a986/graphql-utilities-0.4.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "7c3a2088c3d054be29bcd0fdf4fc3637", "sha256": "9c13af3fc4d5648df8e91385542aa155c51feb7009127e89350839763f871df3"}, "downloads": -1, "filename": "graphql_utilities-0.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "7c3a2088c3d054be29bcd0fdf4fc3637", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4", "size": 14136, "upload_time": "2020-02-22T06:36:33", "upload_time_iso_8601": "2020-02-22T06:36:33.214546Z", "url": "https://files.pythonhosted.org/packages/27/7e/2e9469fd4763e8557e59f5662f4caba6e37670bc03ec78f3304abf4807d1/graphql_utilities-0.4.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9d3b7a5c58c9245cd5a1bfe68084b2f4", "sha256": "8d1e5f43ec45c8da2b254cb53f4253df14fa7edeb494bae604aec21fe8d5d2e6"}, "downloads": -1, "filename": "graphql-utilities-0.4.0.tar.gz", "has_sig": false, "md5_digest": "9d3b7a5c58c9245cd5a1bfe68084b2f4", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4", "size": 11534, "upload_time": "2020-02-22T06:36:34", "upload_time_iso_8601": "2020-02-22T06:36:34.536686Z", "url": "https://files.pythonhosted.org/packages/50/24/cf4a8dac6c526ef2479a2afadc3c2b2d559878b336ceb762f7301458a986/graphql-utilities-0.4.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:54:32 2020"}