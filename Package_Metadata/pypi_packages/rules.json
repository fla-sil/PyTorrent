{"info": {"author": "Akis Kesoglou", "author_email": "akiskesoglou@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Environment :: Web Environment", "Framework :: Django", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "rules\n^^^^^\n\n``rules`` is a tiny but powerful app providing object-level permissions to\nDjango, without requiring a database. At its core, it is a generic framework\nfor building rule-based systems, similar to `decision trees`_. It can also be\nused as a standalone library in other contexts and frameworks.\n\n.. image:: https://travis-ci.org/dfunckt/django-rules.svg?branch=master\n    :target: https://travis-ci.org/dfunckt/django-rules\n.. image:: https://coveralls.io/repos/dfunckt/django-rules/badge.svg\n    :target: https://coveralls.io/r/dfunckt/django-rules\n.. image:: https://img.shields.io/pypi/v/rules.svg\n    :target: https://pypi.python.org/pypi/rules\n.. image:: https://img.shields.io/pypi/pyversions/rules.svg\n    :target: https://pypi.python.org/pypi/rules\n\n.. _decision trees: http://wikipedia.org/wiki/Decision_tree\n\n\nFeatures\n========\n\n``rules`` has got you covered. ``rules`` is:\n\n-   **Documented**, **tested**, **reliable** and **easy to use**.\n-   **Versatile**. Decorate callables to build complex graphs of predicates.\n    Predicates can be any type of callable -- simple functions, lambdas,\n    methods, callable class objects, partial functions, decorated functions,\n    anything really.\n-   **A good Django citizen**. Seamless integration with Django views,\n    templates and the Admin for testing for object-level permissions.\n-   **Efficient** and **smart**. No need to mess around with a database to figure\n    out whether John really wrote that book.\n-   **Simple**. Dive in the code. You'll need 10 minutes to figure out how it\n    works.\n-   **Powerful**. ``rules`` comes complete with advanced features, such as\n    invocation context and storage for arbitrary data, skipping evaluation of\n    predicates under specific conditions, logging of evaluated predicates and more!\n\n\nTable of Contents\n=================\n\n- `Requirements`_\n- `Upgrading from 1.x`_\n- `How to install`_\n\n  - `Configuring Django`_\n\n- `Using Rules`_\n\n  - `Creating predicates`_\n  - `Setting up rules`_\n  - `Combining predicates`_\n\n- `Using Rules with Django`_\n\n  - `Permissions`_\n  - `Permissions in models`_\n  - `Permissions in views`_\n  - `Permissions and rules in templates`_\n  - `Permissions in the Admin`_\n  - `Permissions in Django Rest Framework`_\n\n- `Advanced features`_\n\n  - `Custom rule sets`_\n  - `Invocation context`_\n  - `Binding \"self\"`_\n  - `Skipping predicates`_\n  - `Logging predicate evaluation`_\n\n- `Best practices`_\n- `API Reference`_\n- `Licence`_\n\n\nRequirements\n============\n\n``rules`` requires Python 2.7/3.4 or newer. It can optionally integrate with\nDjango, in which case requires Django 1.11 or newer.\n\n*Note*: At any given moment in time, ``rules`` will maintain support for all\ncurrently supported Django versions, while dropping support for those versions\nthat reached end-of-life in minor releases. See the `Supported Versions`_\nsection on Django Project website for the current state and timeline.\n\n.. _Supported Versions: https://www.djangoproject.com/download/#supported-versions\n\n\nUpgrading from 1.x\n==================\n\n*   Support for Python 2.6 and 3.3, and Django versions before 1.11 has been\n    dropped.\n\n*   The ``SkipPredicate`` exception and ``skip()`` method of ``Predicate``,\n    that were used to signify that a predicate should be skipped, have been\n    removed. You may return ``None`` from your predicate to achieve this.\n\n*   The APIs to replace a rule's predicate have been renamed and their\n    behaviour changed. ``replace_rule`` and ``replace_perm`` functions and\n    ``replace_rule`` method of ``RuleSet`` have been renamed to ``set_rule``,\n    ``set_perm`` and ``RuleSet.set_perm`` respectively. The old behaviour was\n    to raise a ``KeyError`` if a rule by the given name did not exist. Since\n    version 2.0 this has changed and you can safely use ``set_*`` to set a\n    rule's predicate without having to ensure the rule exists first.\n\n\nHow to install\n==============\n\nUsing pip:\n\n.. code:: bash\n\n    $ pip install rules\n\nManually:\n\n.. code:: bash\n\n    $ git clone https://github.com/dfunckt/django-rules.git\n    $ cd django-rules\n    $ python setup.py install\n\nRun tests with:\n\n.. code:: bash\n\n    $ ./runtests.sh\n\nYou may also want to read `Best practices`_ for general advice on how to\nuse ``rules``.\n\n\nConfiguring Django\n------------------\n\nAdd ``rules`` to ``INSTALLED_APPS``:\n\n.. code:: python\n\n    INSTALLED_APPS = (\n        # ...\n        'rules',\n    )\n\nAdd the authentication backend:\n\n.. code:: python\n\n    AUTHENTICATION_BACKENDS = (\n        'rules.permissions.ObjectPermissionBackend',\n        'django.contrib.auth.backends.ModelBackend',\n    )\n\n\nUsing Rules\n===========\n\n``rules`` is based on the idea that you maintain a dict-like object that maps\nstring keys used as identifiers of some kind, to callables, called\n*predicates*. This dict-like object is actually an instance of ``RuleSet`` and\nthe predicates are instances of ``Predicate``.\n\n\nCreating predicates\n-------------------\n\nLet's ignore rule sets for a moment and go ahead and define a predicate. The\neasiest way is with the ``@predicate`` decorator:\n\n.. code:: python\n\n    >>> @rules.predicate\n    >>> def is_book_author(user, book):\n    ...     return book.author == user\n    ...\n    >>> is_book_author\n    <Predicate:is_book_author object at 0x10eeaa490>\n\nThis predicate will return ``True`` if the book's author is the given user,\n``False`` otherwise.\n\nPredicates can be created from any callable that accepts anything from zero to\ntwo positional arguments:\n\n*   ``fn(obj, target)``\n*   ``fn(obj)``\n*   ``fn()``\n\nThis is their generic form. If seen from the perspective of authorization in\nDjango, the equivalent signatures are:\n\n*   ``fn(user, obj)``\n*   ``fn(user)``\n*   ``fn()``\n\nPredicates can do pretty much anything with the given arguments, but must\nalways return ``True`` if the condition they check is true, ``False``\notherwise. ``rules`` comes with several predefined predicates that you may\nread about later on in `API Reference`_, that are mostly useful when dealing\nwith `authorization in Django`_.\n\n\nSetting up rules\n----------------\n\nLet's pretend that we want to let authors edit or delete their books, but not\nbooks written by other authors. So, essentially, what determines whether an\nauthor *can edit* or *can delete* a given book is *whether they are its\nauthor*.\n\nIn ``rules``, such requirements are modelled as *rules*. A *rule* is a map of\na unique identifier (eg. \"can edit\") to a predicate. Rules are grouped\ntogether into a *rule set*. ``rules`` has two predefined rule sets:\n\n*   A default rule set storing shared rules.\n*   Another rule set storing rules that serve as permissions in a Django\n    context.\n\nSo, let's define our first couple of rules, adding them to the shared rule\nset. We can use the ``is_book_author`` predicate we defined earlier:\n    \n.. code:: python\n\n    >>> rules.add_rule('can_edit_book', is_book_author)\n    >>> rules.add_rule('can_delete_book', is_book_author)\n\nAssuming we've got some data, we can now test our rules:\n\n.. code:: python\n\n    >>> from django.contrib.auth.models import User\n    >>> from books.models import Book\n    >>> guidetodjango = Book.objects.get(isbn='978-1-4302-1936-1')\n    >>> guidetodjango.author\n    <User: adrian>\n    >>> adrian = User.objects.get(username='adrian')\n    >>> rules.test_rule('can_edit_book', adrian, guidetodjango)\n    True\n    >>> rules.test_rule('can_delete_book', adrian, guidetodjango)\n    True\n\nNice... but not awesome.\n\n\nCombining predicates\n--------------------\n\nPredicates by themselves are not so useful -- not more useful than any other\nfunction would be. Predicates, however, can be combined using binary operators\nto create more complex ones. Predicates support the following operators:\n\n*   ``P1 & P2``: Returns a new predicate that returns ``True`` if *both*\n    predicates return ``True``, otherwise ``False``. If P1 returns ``False``,\n    P2 will not be evaluated.\n*   ``P1 | P2``: Returns a new predicate that returns ``True`` if *any* of the\n    predicates returns ``True``, otherwise ``False``. If P1 returns ``True``,\n    P2 will not be evaluated.\n*   ``P1 ^ P2``: Returns a new predicate that returns ``True`` if one of the\n    predicates returns ``True`` and the other returns ``False``, otherwise\n    ``False``.\n*   ``~P``: Returns a new predicate that returns the negated result of the\n    original predicate.\n\nSuppose the requirement for allowing a user to edit a given book was for them\nto be either the book's author, or a member of the \"editors\" group. Allowing\nusers to delete a book should still be determined by whether the user is the\nbook's author.\n\nWith ``rules`` that's easy to implement. We'd have to define another\npredicate, that would return ``True`` if the given user is a member of the\n\"editors\" group, ``False`` otherwise. The built-in ``is_group_member`` factory\nwill come in handy:\n\n.. code:: python\n\n    >>> is_editor = rules.is_group_member('editors')\n    >>> is_editor\n    <Predicate:is_group_member:editors object at 0x10eee1350>\n\nWe could combine it with the ``is_book_author`` predicate to create a new one\nthat checks for either condition:\n\n.. code:: python\n\n    >>> is_book_author_or_editor = is_book_author | is_editor\n    >>> is_book_author_or_editor\n    <Predicate:(is_book_author | is_group_member:editors) object at 0x10eee1390>\n\nWe can now update our ``can_edit_book`` rule:\n\n.. code:: python\n\n    >>> rules.set_rule('can_edit_book', is_book_author_or_editor)\n    >>> rules.test_rule('can_edit_book', adrian, guidetodjango)\n    True\n    >>> rules.test_rule('can_delete_book', adrian, guidetodjango)\n    True\n\nLet's see what happens with another user:\n\n.. code:: python\n\n    >>> martin = User.objects.get(username='martin')\n    >>> list(martin.groups.values_list('name', flat=True))\n    ['editors']\n    >>> rules.test_rule('can_edit_book', martin, guidetodjango)\n    True\n    >>> rules.test_rule('can_delete_book', martin, guidetodjango)\n    False\n\nAwesome.\n\nSo far, we've only used the underlying, generic framework for defining and\ntesting rules. This layer is not at all specific to Django; it may be used in\nany context. There's actually no import of anything Django-related in the\nwhole app (except in the ``rules.templatetags`` module). ``rules`` however can\nintegrate tightly with Django to provide authorization.\n\n\n.. _authorization in Django:\n\nUsing Rules with Django\n=======================\n\n``rules`` is able to provide object-level permissions in Django. It comes\nwith an authorization backend and a couple template tags for use in your\ntemplates.\n\n\nPermissions\n-----------\n\nIn ``rules``, permissions are a specialised type of rules. You still define\nrules by creating and combining predicates. These rules however, must be added\nto a permissions-specific rule set that comes with ``rules`` so that they can\nbe picked up by the ``rules`` authorization backend.\n\n\nCreating permissions\n++++++++++++++++++++\n\nThe convention for naming permissions in Django is ``app_label.action_object``,\nand we like to adhere to that. Let's add rules for the ``books.change_book``\nand ``books.delete_book`` permissions:\n\n.. code:: python\n\n    >>> rules.add_perm('books.change_book', is_book_author | is_editor)\n    >>> rules.add_perm('books.delete_book', is_book_author)\n\nSee the difference in the API? ``add_perm`` adds to a permissions-specific\nrule set, whereas ``add_rule`` adds to a default shared rule set. It's\nimportant to know however, that these two rule sets are separate, meaning that\nadding a rule in one does not make it available to the other.\n\n\nChecking for permission\n+++++++++++++++++++++++\n\nLet's go ahead and check whether ``adrian`` has change permission to the\n``guidetodjango`` book:\n\n.. code:: python\n\n    >>> adrian.has_perm('books.change_book', guidetodjango)\n    False\n\nWhen you call the ``User.has_perm`` method, Django asks each backend in\n``settings.AUTHENTICATION_BACKENDS`` whether a user has the given permission\nfor the object. When queried for object permissions, Django's default\nauthentication backend always returns ``False``. ``rules`` comes with an\nauthorization backend, that is able to provide object-level permissions by\nlooking into the permissions-specific rule set.\n\nLet's add the ``rules`` authorization backend in settings:\n\n.. code:: python\n\n    AUTHENTICATION_BACKENDS = (\n        'rules.permissions.ObjectPermissionBackend',\n        'django.contrib.auth.backends.ModelBackend',\n    )\n\nNow, checking again gives ``adrian`` the required permissions:\n\n.. code:: python\n\n    >>> adrian.has_perm('books.change_book', guidetodjango)\n    True\n    >>> adrian.has_perm('books.delete_book', guidetodjango)\n    True\n    >>> martin.has_perm('books.change_book', guidetodjango)\n    True\n    >>> martin.has_perm('books.delete_book', guidetodjango)\n    False\n\n\nPermissions in models\n---------------------\n\n**NOTE:** The features described in this section work on Python 3+ only.\n\nIt is common to have a set of permissions for a model, like what Django offers with\nits default model permissions (such as *add*, *change* etc.). When using ``rules``\nas the permission checking backend, you can declare object-level permissions for\nany model in a similar way, using a new ``Meta`` option.\n\nFirst, you need to switch your model's base and metaclass to the slightly extended\nversions provided in ``rules.contrib.models``. There are several classes and mixins\nyou can use, depending on whether you're already using a custom base and/or metaclass\nfor your models or not. The extensions are very slim and don't affect the models'\nbehavior in any way other than making it register permissions.\n\n* If you're using the stock ``django.db.models.Model`` as base for your models,\n  simply switch over to ``RulesModel`` and you're good to go.\n\n* If you already have a custom base class adding common functionality to your models,\n  add ``RulesModelMixin`` to the classes it inherits from and set ``RulesModelBase``\n  as its metaclass, like so::\n\n      from django.db.models import Model\n      from rules.contrib.models import RulesModelBase, RulesModelMixin\n\n      class MyModel(RulesModelMixin, Model, metaclass=RulesModelBase):\n          ...\n\n* If you're using a custom metaclass for your models, you'll already know how to\n  make it inherit from ``RulesModelBaseMixin`` yourself.\n\nThen, create your models like so, assuming you're using ``RulesModel`` as base\ndirectly::\n\n    import rules\n    from rules.contrib.models import RulesModel\n\n    class Book(RulesModel):\n        class Meta:\n            rules_permissions = {\n                \"add\": rules.is_staff,\n                \"read\": rules.is_authenticated,\n            }\n\nThis would be equivalent to the following calls::\n\n    rules.add_perm(\"app_label.add_book\", rules.is_staff)\n    rules.add_perm(\"app_label.read_book\", rules.is_authenticated)\n\nThere are methods in ``RulesModelMixin`` that you can overwrite in order to customize\nhow a model's permissions are registered. See the documented source code for details\nif you need this.\n\nOf special interest is the ``get_perm`` classmethod of ``RulesModelMixin``, which can\nbe used to convert a permission type to the corresponding full permission name. If\nyou need to query for some type of permission on a given model programmatically,\nthis is handy::\n\n    if user.has_perm(Book.get_perm(\"read\")):\n        ...\n\n\nPermissions in views\n--------------------\n\n``rules`` comes with a set of view decorators to help you enforce\nauthorization in your views.\n\nUsing the function-based view decorator\n+++++++++++++++++++++++++++++++++++++++\n\nFor function-based views you can use the ``permission_required`` decorator:\n\n.. code:: python\n\n    from django.shortcuts import get_object_or_404\n    from rules.contrib.views import permission_required\n    from posts.models import Post\n\n    def get_post_by_pk(request, post_id):\n        return get_object_or_404(Post, pk=post_id)\n\n    @permission_required('posts.change_post', fn=get_post_by_pk)\n    def post_update(request, post_id):\n        # ...\n\nUsage is straight-forward, but there's one thing in the example above that\nstands out and this is the ``get_post_by_pk`` function. This function, given\nthe current request and all arguments passed to the view, is responsible for\nfetching and returning the object to check permissions against -- i.e. the\n``Post`` instance with PK equal to the given ``post_id`` in the example.\nThis specific use-case is quite common so, to save you some typing, ``rules``\ncomes with a generic helper function that you can use to do this declaratively.\nThe example below is equivalent to the one above:\n\n.. code:: python\n\n    from rules.contrib.views import permission_required, objectgetter\n    from posts.models import Post\n\n    @permission_required('posts.change_post', fn=objectgetter(Post, 'post_id'))\n    def post_update(request, post_id):\n        # ...    \n\nFor more information on the decorator and helper function, refer to the\n``rules.contrib.views`` module.\n\nUsing the class-based view mixin\n++++++++++++++++++++++++++++++++\n\nDjango includes a set of access mixins that you can use in your class-based\nviews to enforce authorization. ``rules`` extends this framework to provide\nobject-level permissions via a mixin, ``PermissionRequiredMixin``.\n\nThe following example will automatically test for permission against the\ninstance returned by the view's ``get_object`` method:\n\n.. code:: python\n\n    from django.views.generic.edit import UpdateView\n    from rules.contrib.views import PermissionRequiredMixin\n    from posts.models import Post\n\n    class PostUpdate(PermissionRequiredMixin, UpdateView):\n        model = Post\n        permission_required = 'posts.change_post'\n\nYou can customise the object either by overriding ``get_object`` or\n``get_permission_object``.\n\nFor more information refer to the `Django documentation`_ and the\n``rules.contrib.views`` module.\n\n.. _Django documentation: https://docs.djangoproject.com/en/1.9/topics/auth/default/#limiting-access-to-logged-in-users\n\nChecking permission automatically based on view type\n++++++++++++++++++++++++++++++++++++++++++++++++++++\n\nIf you use the mechanisms provided by ``rules.contrib.models`` to register permissions\nfor your models as described in `Permissions in models`_, there's another convenient\nmixin for class-based views available for you.\n\n``rules.contrib.views.AutoPermissionRequiredMixin`` can recognize the type of view\nit's used with and check for the corresponding permission automatically.\n\nThis example view would, without any further configuration, automatically check for\nthe ``\"posts.change_post\"`` permission, given that the app label is ``\"posts\"``::\n\n    from django.views.generic import UpdateView\n    from rules.contrib.views import AutoPermissionRequiredMixin\n    from posts.models import Post\n\n    class UpdatePostView(AutoPermissionRequiredMixin, UpdateView):\n        model = Post\n\nBy default, the generic CRUD views from ``django.views.generic`` are mapped to the\nnative Django permission types (*add*, *change*, *delete* and *view*). However,\nthe pre-defined mappings can be extended, changed or replaced altogether when\nsubclassing ``AutoPermissionRequiredMixin``. See the fully documented source code\nfor details on how to do that properly.\n\n\nPermissions and rules in templates\n----------------------------------\n\n``rules`` comes with two template tags to allow you to test for rules and\npermissions in templates.\n\nAdd ``rules`` to your ``INSTALLED_APPS``:\n\n.. code:: python\n\n    INSTALLED_APPS = (\n        # ...\n        'rules',\n    )\n\nThen, in your template::\n\n    {% load rules %}\n    \n    {% has_perm 'books.change_book' author book as can_edit_book %}\n    {% if can_edit_book %}\n        ...\n    {% endif %}\n    \n    {% test_rule 'has_super_feature' user as has_super_feature %}\n    {% if has_super_feature %}\n        ...\n    {% endif %}\n\n\nPermissions in the Admin\n------------------------\n\nIf you've setup ``rules`` to be used with permissions in Django, you're almost\nset to also use ``rules`` to authorize any add/change/delete actions in the\nAdmin. The Admin asks for *four* different permissions, depending on action:\n\n- ``<app_label>.add_<modelname>``\n- ``<app_label>.view_<modelname>``\n- ``<app_label>.change_<modelname>``\n- ``<app_label>.delete_<modelname>``\n- ``<app_label>``\n\n*Note:* view permission is new in Django v2.1 and should not be added in versions before that. \n\nThe first four are obvious. The fifth is the required permission for an app\nto be displayed in the Admin's \"dashboard\". Overriding it does not restrict access to the add, \nchange or delete views. Here's some rules for our imaginary ``books`` app as an example:\n\n.. code:: python\n\n    >>> rules.add_perm('books', rules.always_allow)\n    >>> rules.add_perm('books.add_book', is_staff)\n    >>> rules.add_perm('books.view_book', is_staff | has_secret_access_code)\n    >>> rules.add_perm('books.change_book', is_staff)\n    >>> rules.add_perm('books.delete_book', is_staff)\n\nDjango Admin does not support object-permissions, in the sense that it will\nnever ask for permission to perform an action *on an object*, only whether a\nuser is allowed to act on (*any*) instances of a model.\n\nIf you'd like to tell Django whether a user has permissions on a specific\nobject, you'd have to override the following methods of a model's\n``ModelAdmin``:\n\n- ``has_view_permission(user, obj=None)``\n- ``has_change_permission(user, obj=None)``\n- ``has_delete_permission(user, obj=None)``\n\n``rules`` comes with a custom ``ModelAdmin`` subclass,\n``rules.contrib.admin.ObjectPermissionsModelAdmin``, that overrides these\nmethods to pass on the edited model instance to the authorization backends,\nthus enabling permissions per object in the Admin:\n\n.. code:: python\n\n    # books/admin.py\n    from django.contrib import admin\n    from rules.contrib.admin import ObjectPermissionsModelAdmin\n    from .models import Book\n    \n    class BookAdmin(ObjectPermissionsModelAdmin):\n        pass\n    \n    admin.site.register(Book, BookAdmin)\n\nNow this allows you to specify permissions like this:\n\n.. code:: python\n\n    >>> rules.add_perm('books', rules.always_allow)\n    >>> rules.add_perm('books.add_book', has_author_profile)\n    >>> rules.add_perm('books.change_book', is_book_author_or_editor)\n    >>> rules.add_perm('books.delete_book', is_book_author)\n\nTo preserve backwards compatibility, Django will ask for either *view* or\n*change* permission. For maximum flexibility, ``rules`` behaves subtly\ndifferent: ``rules`` will ask for the change permission if and only if no rule\nexists for the view permission.\n\n\nPermissions in Django Rest Framework\n------------------------------------\n\nSimilar to ``rules.contrib.views.AutoPermissionRequiredMixin``, there is a\n``rules.contrib.rest_framework.AutoPermissionViewSetMixin`` for viewsets in Django\nRest Framework. The difference is that it doesn't derive permission from the type\nof view but from the API action (*create*, *retrieve* etc.) that's tried to be\nperformed. Of course, it also requires you to declare your models as described in\n`Permissions in models`_.\n\nHere is a possible ``ModelViewSet`` for the ``Post`` model with fully automated CRUD\npermission checking::\n\n    from rest_framework.serializers import ModelSerializer\n    from rest_framework.viewsets import ModelViewSet\n    from rules.contrib.rest_framework import AutoPermissionViewSetMixin\n    from posts.models import Post\n\n    class PostSerializer(ModelSerializer):\n        class Meta:\n            model = Post\n            fields = \"__all__\"\n\n    class PostViewSet(AutoPermissionViewSetMixin, ModelViewSet):\n        queryset = Post.objects.all()\n        serializer_class = PostSerializer\n\nBy default, the CRUD actions of ``ModelViewSet`` are mapped to the native\nDjango permission types (*add*, *change*, *delete* and *view*). The ``list``\naction has no permission checking enabled. However, the pre-defined mappings\ncan be extended, changed or replaced altogether when using (or subclassing)\n``AutoPermissionViewSetMixin``. Custom API actions defined via the ``@action``\ndecorator may then be mapped as well. See the fully documented source code for\ndetails on how to properly customize the default behavior.\n\n\nAdvanced features\n=================\n\nCustom rule sets\n----------------\n\nYou may create as many rule sets as you need:\n\n.. code:: python\n\n    >>> features = rules.RuleSet()\n\nAnd manipulate them by adding, removing, querying and testing rules:\n\n.. code:: python\n\n    >>> features.rule_exists('has_super_feature')\n    False\n    >>> is_special_user = rules.is_group_member('special')\n    >>> features.add_rule('has_super_feature', is_special_user)\n    >>> 'has_super_feature' in features\n    True\n    >>> features['has_super_feature']\n    <Predicate:is_group_member:special object at 0x10eeaa500>\n    >>> features.test_rule('has_super_feature', adrian)\n    True\n    >>> features.remove_rule('has_super_feature')\n\nNote however that custom rule sets are *not available* in Django templates --\nyou need to provide integration yourself.\n\n\nInvocation context\n------------------\n\nA new context is created as a result of invoking ``Predicate.test()`` and is\nonly valid for the duration of the invocation. A context is a simple ``dict``\nthat you can use to store arbitrary data, (eg. caching computed values,\nsetting flags, etc.), that can be used by predicates later on in the chain.\nInside a predicate function it can be used like so:\n\n.. code:: python\n\n    >>> @predicate\n    ... def mypred(a, b):\n    ...     value = compute_expensive_value(a)\n    ...     mypred.context['value'] = value\n    ...     return True\n\nOther predicates can later use stored values:\n\n.. code:: python\n\n    >>> @predicate\n    ... def myotherpred(a, b):\n    ...     value = myotherpred.context.get('value')\n    ...     if value is not None:\n    ...         return do_something_with_value(value)\n    ...     else:\n    ...         return do_something_without_value()\n\n``Predicate.context`` provides a single ``args`` attribute that contains the\narguments as given to ``test()`` at the beginning of the invocation.\n\n\nBinding \"self\"\n--------------\n\nIn a predicate's function body, you can refer to the predicate instance itself\nby its name, eg. ``is_book_author``. Passing ``bind=True`` as a keyword\nargument to the ``predicate`` decorator will let you refer to the predicate\nwith ``self``, which is more convenient. Binding ``self`` is just syntactic\nsugar. As a matter of fact, the following two are equivalent:\n\n.. code:: python\n\n    >>> @predicate\n    ... def is_book_author(user, book):\n    ...     if is_book_author.context.args:\n    ...         return user == book.author\n    ...     return False\n\n    >>> @predicate(bind=True)\n    ... def is_book_author(self, user, book):\n    ...     if self.context.args:\n    ...         return user == book.author\n    ...     return False\n\n\nSkipping predicates\n-------------------\n\nYou may skip evaluation by returning ``None`` from your predicate:\n\n.. code:: python\n\n    >>> @predicate(bind=True)\n    ... def is_book_author(self, user, book):\n    ...     if len(self.context.args) > 1:\n    ...         return user == book.author\n    ...     else:\n    ...         return None\n\nReturning ``None`` signifies that the predicate need not be evaluated, thus\nleaving the predicate result up to that point unchanged.\n\n\nLogging predicate evaluation\n----------------------------\n\n``rules`` can optionally be configured to log debug information as rules are\nevaluated to help with debugging your predicates. Messages are sent at the\nDEBUG level to the ``'rules'`` logger. The following `dictConfig`_ configures\na console logger (place this in your project's `settings.py` if you're using\n`rules` with Django): \n\n.. code:: python\n\n    LOGGING = {\n        'version': 1,\n        'disable_existing_loggers': False,\n        'handlers': {\n            'console': {\n                'level': 'DEBUG',\n                'class': 'logging.StreamHandler',\n            },\n        },\n        'loggers': {\n            'rules': {\n                'handlers': ['console'],\n                'level': 'DEBUG',\n                'propagate': True,\n            },\n        },\n    }\n\nWhen this logger is active each individual predicate will have a log message\nprinted when it is evaluated.\n\n.. _dictConfig: https://docs.python.org/3.6/library/logging.config.html#logging-config-dictschema\n\n\nBest practices\n==============\n\nBefore you can test for rules, these rules must be registered with a rule set,\nand for this to happen the modules containing your rule definitions must be\nimported.\n\nFor complex projects with several predicates and rules, it may not be\npractical to define all your predicates and rules inside one module. It might\nbe best to split them among any sub-components of your project. In a Django\ncontext, these sub-components could be the apps for your project.\n\nOn the other hand, because importing predicates from all over the place in\norder to define rules can lead to circular imports and broken hearts, it's\nbest to further split predicates and rules in different modules.\n\n``rules`` may optionally be configured to autodiscover ``rules.py`` modules in\nyour apps and import them at startup. To have ``rules`` do so, just edit your\n``INSTALLED_APPS`` setting:\n\n.. code:: python\n\n    INSTALLED_APPS = (\n        # replace 'rules' with:\n        'rules.apps.AutodiscoverRulesConfig',\n    )\n\n**Note:** On Python 2, you must also add the following to the top of your\n``rules.py`` file, or you'll get import errors trying to import ``rules``\nitself:\n\n.. code:: python\n\n    from __future__ import absolute_import\n\n\nAPI Reference\n=============\n\nThe core APIs are accessible from the root ``rules`` module. Django-specific\nfunctionality for the Admin and views is available from ``rules.contrib``.\n\n\nClass ``rules.Predicate``\n-------------------------\n\nYou create ``Predicate`` instances by passing in a callable:\n\n.. code:: python\n\n    >>> def is_book_author(user, book):\n    ...     return book.author == user\n    ...\n    >>> pred = Predicate(is_book_author)\n    >>> pred\n    <Predicate:is_book_author object at 0x10eeaa490>\n\nYou may optionally provide a different name for the predicate that is used\nwhen inspecting it:\n\n.. code:: python\n\n    >>> pred = Predicate(is_book_author, name='another_name')\n    >>> pred\n    <Predicate:another_name object at 0x10eeaa490>\n\nAlso, you may optionally provide ``bind=True`` in order to be able to access\nthe predicate instance with ``self``:\n\n.. code:: python\n\n    >>> def is_book_author(self, user, book):\n    ...     if self.context.args:\n    ...         return user == book.author\n    ...     return False\n    ...\n    >>> pred = Predicate(is_book_author, bind=True)\n    >>> pred\n    <Predicate:is_book_author object at 0x10eeaa490>\n\n\nInstance methods\n++++++++++++++++\n\n``test(obj=None, target=None)``\n    Returns the result of calling the passed in callable with zero, one or two\n    positional arguments, depending on how many it accepts.\n\n\nClass ``rules.RuleSet``\n-----------------------\n\n``RuleSet`` extends Python's built-in `dict`_ type. Therefore, you may create\nand use a rule set any way you'd use a dict.\n\n.. _dict: http://docs.python.org/library/stdtypes.html#mapping-types-dict\n\n\nInstance methods\n++++++++++++++++\n\n``add_rule(name, predicate)``\n    Adds a predicate to the rule set, assigning it to the given rule name.\n    Raises ``KeyError`` if another rule with that name already exists.\n\n``set_rule(name, predicate)``\n    Set the rule with the given name, regardless if one already exists.\n\n``remove_rule(name)``\n    Remove the rule with the given name. Raises ``KeyError`` if a rule with\n    that name does not exist.\n\n``rule_exists(name)``\n    Returns ``True`` if a rule with the given name exists, ``False`` otherwise.\n\n``test_rule(name, obj=None, target=None)``\n    Returns the result of calling ``predicate.test(obj, target)`` where\n    ``predicate`` is the predicate for the rule with the given name. Returns\n    ``False`` if a rule with the given name does not exist.\n\nDecorators\n----------\n\n``@predicate``\n    Decorator that creates a predicate out of any callable:\n    \n    .. code:: python\n    \n        >>> @predicate\n        ... def is_book_author(user, book):\n        ...     return book.author == user\n        ...\n        >>> is_book_author\n        <Predicate:is_book_author object at 0x10eeaa490>\n\n    Customising the predicate name:\n    \n    .. code:: python\n    \n        >>> @predicate(name='another_name')\n        ... def is_book_author(user, book):\n        ...     return book.author == user\n        ...\n        >>> is_book_author\n        <Predicate:another_name object at 0x10eeaa490>\n\n    Binding ``self``:\n    \n    .. code:: python\n    \n        >>> @predicate(bind=True)\n        ... def is_book_author(self, user, book):\n        ...     if 'user_has_special_flag' in self.context:\n        ...         return self.context['user_has_special_flag']\n        ...     return book.author == user\n\n\nPredefined predicates\n---------------------\n\n``always_allow()``, ``always_true()``\n    Always returns ``True``.\n\n``always_deny()``, ``always_false()``\n    Always returns ``False``.\n\n``is_authenticated(user)``\n    Returns the result of calling ``user.is_authenticated()``. Returns\n    ``False`` if the given user does not have an ``is_authenticated`` method.\n\n``is_superuser(user)``\n    Returns the result of calling ``user.is_superuser``. Returns ``False``\n    if the given user does not have an ``is_superuser`` property.\n\n``is_staff(user)``\n    Returns the result of calling ``user.is_staff``. Returns ``False`` if the\n    given user does not have an ``is_staff`` property.\n\n``is_active(user)``\n    Returns the result of calling ``user.is_active``. Returns ``False`` if the\n    given user does not have an ``is_active`` property.\n\n``is_group_member(*groups)``\n    Factory that creates a new predicate that returns ``True`` if the given\n    user is a member of *all* the given groups, ``False`` otherwise.\n\n\nShortcuts\n---------\n\nManaging the shared rule set\n++++++++++++++++++++++++++++\n\n``add_rule(name, predicate)``\n    Adds a rule to the shared rule set. See ``RuleSet.add_rule``.\n\n``set_rule(name, predicate)``\n    Set the rule with the given name from the shared rule set. See\n    ``RuleSet.set_rule``.\n\n``remove_rule(name)``\n    Remove a rule from the shared rule set. See ``RuleSet.remove_rule``.\n\n``rule_exists(name)``\n    Returns whether a rule exists in the shared rule set. See\n    ``RuleSet.rule_exists``.\n\n``test_rule(name, obj=None, target=None)``\n    Tests the rule with the given name. See ``RuleSet.test_rule``.\n\n\nManaging the permissions rule set\n+++++++++++++++++++++++++++++++++\n\n``add_perm(name, predicate)``\n    Adds a rule to the permissions rule set. See ``RuleSet.add_rule``.\n\n``set_perm(name, predicate)``\n    Replace a rule from the permissions rule set. See ``RuleSet.set_rule``.\n\n``remove_perm(name)``\n    Remove a rule from the permissions rule set. See ``RuleSet.remove_rule``.\n\n``perm_exists(name)``\n    Returns whether a rule exists in the permissions rule set. See\n    ``RuleSet.rule_exists``.\n\n``has_perm(name, user=None, obj=None)``\n    Tests the rule with the given name. See ``RuleSet.test_rule``.\n\n\nLicence\n=======\n\n``django-rules`` is distributed under the MIT licence.\n\nCopyright (c) 2014 Akis Kesoglou\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://github.com/dfunckt/django-rules", "keywords": "", "license": "MIT", "maintainer": "Akis Kesoglou", "maintainer_email": "akiskesoglou@gmail.com", "name": "rules", "package_url": "https://pypi.org/project/rules/", "platform": "", "project_url": "https://pypi.org/project/rules/", "project_urls": {"Homepage": "http://github.com/dfunckt/django-rules"}, "release_url": "https://pypi.org/project/rules/2.2/", "requires_dist": null, "requires_python": "", "summary": "Awesome Django authorization, without the database", "version": "2.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><tt>rules</tt> is a tiny but powerful app providing object-level permissions to\nDjango, without requiring a database. At its core, it is a generic framework\nfor building rule-based systems, similar to <a href=\"http://wikipedia.org/wiki/Decision_tree\" rel=\"nofollow\">decision trees</a>. It can also be\nused as a standalone library in other contexts and frameworks.</p>\n<a href=\"https://travis-ci.org/dfunckt/django-rules\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/dfunckt/django-rules.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8b63adfa3475417f1541cf8826b3d96aad702ecb/68747470733a2f2f7472617669732d63692e6f72672f6466756e636b742f646a616e676f2d72756c65732e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://coveralls.io/r/dfunckt/django-rules\" rel=\"nofollow\"><img alt=\"https://coveralls.io/repos/dfunckt/django-rules/badge.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/71238eda19df8b534c2ea3b150d8b7a7a75cf74d/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6466756e636b742f646a616e676f2d72756c65732f62616467652e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/rules\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/v/rules.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/39626648f21630293d225ee0c39597d7100b28a4/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f72756c65732e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/rules\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/pyversions/rules.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/177c7861886d862d32443af5226b8428e74a1f1d/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f72756c65732e737667\"></a>\n<div id=\"features\">\n<h2>Features</h2>\n<p><tt>rules</tt> has got you covered. <tt>rules</tt> is:</p>\n<ul>\n<li><strong>Documented</strong>, <strong>tested</strong>, <strong>reliable</strong> and <strong>easy to use</strong>.</li>\n<li><strong>Versatile</strong>. Decorate callables to build complex graphs of predicates.\nPredicates can be any type of callable \u2013 simple functions, lambdas,\nmethods, callable class objects, partial functions, decorated functions,\nanything really.</li>\n<li><strong>A good Django citizen</strong>. Seamless integration with Django views,\ntemplates and the Admin for testing for object-level permissions.</li>\n<li><strong>Efficient</strong> and <strong>smart</strong>. No need to mess around with a database to figure\nout whether John really wrote that book.</li>\n<li><strong>Simple</strong>. Dive in the code. You\u2019ll need 10 minutes to figure out how it\nworks.</li>\n<li><strong>Powerful</strong>. <tt>rules</tt> comes complete with advanced features, such as\ninvocation context and storage for arbitrary data, skipping evaluation of\npredicates under specific conditions, logging of evaluated predicates and more!</li>\n</ul>\n</div>\n<div id=\"table-of-contents\">\n<h2>Table of Contents</h2>\n<ul>\n<li><a href=\"#requirements\" rel=\"nofollow\">Requirements</a></li>\n<li><a href=\"#upgrading-from-1-x\" rel=\"nofollow\">Upgrading from 1.x</a></li>\n<li><a href=\"#how-to-install\" rel=\"nofollow\">How to install</a><ul>\n<li><a href=\"#configuring-django\" rel=\"nofollow\">Configuring Django</a></li>\n</ul>\n</li>\n<li><a href=\"#using-rules\" rel=\"nofollow\">Using Rules</a><ul>\n<li><a href=\"#creating-predicates\" rel=\"nofollow\">Creating predicates</a></li>\n<li><a href=\"#setting-up-rules\" rel=\"nofollow\">Setting up rules</a></li>\n<li><a href=\"#combining-predicates\" rel=\"nofollow\">Combining predicates</a></li>\n</ul>\n</li>\n<li><a href=\"#using-rules-with-django\" rel=\"nofollow\">Using Rules with Django</a><ul>\n<li><a href=\"#permissions\" rel=\"nofollow\">Permissions</a></li>\n<li><a href=\"#permissions-in-models\" rel=\"nofollow\">Permissions in models</a></li>\n<li><a href=\"#permissions-in-views\" rel=\"nofollow\">Permissions in views</a></li>\n<li><a href=\"#permissions-and-rules-in-templates\" rel=\"nofollow\">Permissions and rules in templates</a></li>\n<li><a href=\"#permissions-in-the-admin\" rel=\"nofollow\">Permissions in the Admin</a></li>\n<li><a href=\"#permissions-in-django-rest-framework\" rel=\"nofollow\">Permissions in Django Rest Framework</a></li>\n</ul>\n</li>\n<li><a href=\"#advanced-features\" rel=\"nofollow\">Advanced features</a><ul>\n<li><a href=\"#custom-rule-sets\" rel=\"nofollow\">Custom rule sets</a></li>\n<li><a href=\"#invocation-context\" rel=\"nofollow\">Invocation context</a></li>\n<li><a href=\"#binding-self\" rel=\"nofollow\">Binding \u201cself\u201d</a></li>\n<li><a href=\"#skipping-predicates\" rel=\"nofollow\">Skipping predicates</a></li>\n<li><a href=\"#logging-predicate-evaluation\" rel=\"nofollow\">Logging predicate evaluation</a></li>\n</ul>\n</li>\n<li><a href=\"#best-practices\" rel=\"nofollow\">Best practices</a></li>\n<li><a href=\"#api-reference\" rel=\"nofollow\">API Reference</a></li>\n<li><a href=\"#licence\" rel=\"nofollow\">Licence</a></li>\n</ul>\n</div>\n<div id=\"requirements\">\n<h2>Requirements</h2>\n<p><tt>rules</tt> requires Python 2.7/3.4 or newer. It can optionally integrate with\nDjango, in which case requires Django 1.11 or newer.</p>\n<p><em>Note</em>: At any given moment in time, <tt>rules</tt> will maintain support for all\ncurrently supported Django versions, while dropping support for those versions\nthat reached end-of-life in minor releases. See the <a href=\"https://www.djangoproject.com/download/#supported-versions\" rel=\"nofollow\">Supported Versions</a>\nsection on Django Project website for the current state and timeline.</p>\n</div>\n<div id=\"upgrading-from-1-x\">\n<h2>Upgrading from 1.x</h2>\n<ul>\n<li>Support for Python 2.6 and 3.3, and Django versions before 1.11 has been\ndropped.</li>\n<li>The <tt>SkipPredicate</tt> exception and <tt>skip()</tt> method of <tt>Predicate</tt>,\nthat were used to signify that a predicate should be skipped, have been\nremoved. You may return <tt>None</tt> from your predicate to achieve this.</li>\n<li>The APIs to replace a rule\u2019s predicate have been renamed and their\nbehaviour changed. <tt>replace_rule</tt> and <tt>replace_perm</tt> functions and\n<tt>replace_rule</tt> method of <tt>RuleSet</tt> have been renamed to <tt>set_rule</tt>,\n<tt>set_perm</tt> and <tt>RuleSet.set_perm</tt> respectively. The old behaviour was\nto raise a <tt>KeyError</tt> if a rule by the given name did not exist. Since\nversion 2.0 this has changed and you can safely use <tt>set_*</tt> to set a\nrule\u2019s predicate without having to ensure the rule exists first.</li>\n</ul>\n</div>\n<div id=\"how-to-install\">\n<h2>How to install</h2>\n<p>Using pip:</p>\n<pre>$ pip install rules\n</pre>\n<p>Manually:</p>\n<pre>$ git clone https://github.com/dfunckt/django-rules.git\n$ <span class=\"nb\">cd</span> django-rules\n$ python setup.py install\n</pre>\n<p>Run tests with:</p>\n<pre>$ ./runtests.sh\n</pre>\n<p>You may also want to read <a href=\"#best-practices\" rel=\"nofollow\">Best practices</a> for general advice on how to\nuse <tt>rules</tt>.</p>\n<div id=\"configuring-django\">\n<h3>Configuring Django</h3>\n<p>Add <tt>rules</tt> to <tt>INSTALLED_APPS</tt>:</p>\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"s1\">'rules'</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n</pre>\n<p>Add the authentication backend:</p>\n<pre><span class=\"n\">AUTHENTICATION_BACKENDS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"s1\">'rules.permissions.ObjectPermissionBackend'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'django.contrib.auth.backends.ModelBackend'</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n</pre>\n</div>\n</div>\n<div id=\"using-rules\">\n<h2>Using Rules</h2>\n<p><tt>rules</tt> is based on the idea that you maintain a dict-like object that maps\nstring keys used as identifiers of some kind, to callables, called\n<em>predicates</em>. This dict-like object is actually an instance of <tt>RuleSet</tt> and\nthe predicates are instances of <tt>Predicate</tt>.</p>\n<div id=\"creating-predicates\">\n<h3>Creating predicates</h3>\n<p>Let\u2019s ignore rule sets for a moment and go ahead and define a predicate. The\neasiest way is with the <tt>@predicate</tt> decorator:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@rules</span><span class=\"o\">.</span><span class=\"n\">predicate</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"k\">def</span> <span class=\"nf\">is_book_author</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">book</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"k\">return</span> <span class=\"n\">book</span><span class=\"o\">.</span><span class=\"n\">author</span> <span class=\"o\">==</span> <span class=\"n\">user</span>\n<span class=\"o\">...</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">is_book_author</span>\n<span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"p\">:</span><span class=\"n\">is_book_author</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10eeaa490</span><span class=\"o\">&gt;</span>\n</pre>\n<p>This predicate will return <tt>True</tt> if the book\u2019s author is the given user,\n<tt>False</tt> otherwise.</p>\n<p>Predicates can be created from any callable that accepts anything from zero to\ntwo positional arguments:</p>\n<ul>\n<li><tt>fn(obj, target)</tt></li>\n<li><tt>fn(obj)</tt></li>\n<li><tt>fn()</tt></li>\n</ul>\n<p>This is their generic form. If seen from the perspective of authorization in\nDjango, the equivalent signatures are:</p>\n<ul>\n<li><tt>fn(user, obj)</tt></li>\n<li><tt>fn(user)</tt></li>\n<li><tt>fn()</tt></li>\n</ul>\n<p>Predicates can do pretty much anything with the given arguments, but must\nalways return <tt>True</tt> if the condition they check is true, <tt>False</tt>\notherwise. <tt>rules</tt> comes with several predefined predicates that you may\nread about later on in <a href=\"#api-reference\" rel=\"nofollow\">API Reference</a>, that are mostly useful when dealing\nwith <a href=\"#authorization-in-django\" rel=\"nofollow\">authorization in Django</a>.</p>\n</div>\n<div id=\"setting-up-rules\">\n<h3>Setting up rules</h3>\n<p>Let\u2019s pretend that we want to let authors edit or delete their books, but not\nbooks written by other authors. So, essentially, what determines whether an\nauthor <em>can edit</em> or <em>can delete</em> a given book is <em>whether they are its\nauthor</em>.</p>\n<p>In <tt>rules</tt>, such requirements are modelled as <em>rules</em>. A <em>rule</em> is a map of\na unique identifier (eg. \u201ccan edit\u201d) to a predicate. Rules are grouped\ntogether into a <em>rule set</em>. <tt>rules</tt> has two predefined rule sets:</p>\n<ul>\n<li>A default rule set storing shared rules.</li>\n<li>Another rule set storing rules that serve as permissions in a Django\ncontext.</li>\n</ul>\n<p>So, let\u2019s define our first couple of rules, adding them to the shared rule\nset. We can use the <tt>is_book_author</tt> predicate we defined earlier:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_rule</span><span class=\"p\">(</span><span class=\"s1\">'can_edit_book'</span><span class=\"p\">,</span> <span class=\"n\">is_book_author</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_rule</span><span class=\"p\">(</span><span class=\"s1\">'can_delete_book'</span><span class=\"p\">,</span> <span class=\"n\">is_book_author</span><span class=\"p\">)</span>\n</pre>\n<p>Assuming we\u2019ve got some data, we can now test our rules:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">django.contrib.auth.models</span> <span class=\"kn\">import</span> <span class=\"n\">User</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">books.models</span> <span class=\"kn\">import</span> <span class=\"n\">Book</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">guidetodjango</span> <span class=\"o\">=</span> <span class=\"n\">Book</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">isbn</span><span class=\"o\">=</span><span class=\"s1\">'978-1-4302-1936-1'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">guidetodjango</span><span class=\"o\">.</span><span class=\"n\">author</span>\n<span class=\"o\">&lt;</span><span class=\"n\">User</span><span class=\"p\">:</span> <span class=\"n\">adrian</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">adrian</span> <span class=\"o\">=</span> <span class=\"n\">User</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">username</span><span class=\"o\">=</span><span class=\"s1\">'adrian'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">test_rule</span><span class=\"p\">(</span><span class=\"s1\">'can_edit_book'</span><span class=\"p\">,</span> <span class=\"n\">adrian</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">True</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">test_rule</span><span class=\"p\">(</span><span class=\"s1\">'can_delete_book'</span><span class=\"p\">,</span> <span class=\"n\">adrian</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">True</span>\n</pre>\n<p>Nice\u2026 but not awesome.</p>\n</div>\n<div id=\"combining-predicates\">\n<h3>Combining predicates</h3>\n<p>Predicates by themselves are not so useful \u2013 not more useful than any other\nfunction would be. Predicates, however, can be combined using binary operators\nto create more complex ones. Predicates support the following operators:</p>\n<ul>\n<li><tt>P1 &amp; P2</tt>: Returns a new predicate that returns <tt>True</tt> if <em>both</em>\npredicates return <tt>True</tt>, otherwise <tt>False</tt>. If P1 returns <tt>False</tt>,\nP2 will not be evaluated.</li>\n<li><tt>P1 | P2</tt>: Returns a new predicate that returns <tt>True</tt> if <em>any</em> of the\npredicates returns <tt>True</tt>, otherwise <tt>False</tt>. If P1 returns <tt>True</tt>,\nP2 will not be evaluated.</li>\n<li><tt>P1 ^ P2</tt>: Returns a new predicate that returns <tt>True</tt> if one of the\npredicates returns <tt>True</tt> and the other returns <tt>False</tt>, otherwise\n<tt>False</tt>.</li>\n<li><tt>~P</tt>: Returns a new predicate that returns the negated result of the\noriginal predicate.</li>\n</ul>\n<p>Suppose the requirement for allowing a user to edit a given book was for them\nto be either the book\u2019s author, or a member of the \u201ceditors\u201d group. Allowing\nusers to delete a book should still be determined by whether the user is the\nbook\u2019s author.</p>\n<p>With <tt>rules</tt> that\u2019s easy to implement. We\u2019d have to define another\npredicate, that would return <tt>True</tt> if the given user is a member of the\n\u201ceditors\u201d group, <tt>False</tt> otherwise. The built-in <tt>is_group_member</tt> factory\nwill come in handy:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">is_editor</span> <span class=\"o\">=</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">is_group_member</span><span class=\"p\">(</span><span class=\"s1\">'editors'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">is_editor</span>\n<span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"p\">:</span><span class=\"n\">is_group_member</span><span class=\"p\">:</span><span class=\"n\">editors</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10eee1350</span><span class=\"o\">&gt;</span>\n</pre>\n<p>We could combine it with the <tt>is_book_author</tt> predicate to create a new one\nthat checks for either condition:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">is_book_author_or_editor</span> <span class=\"o\">=</span> <span class=\"n\">is_book_author</span> <span class=\"o\">|</span> <span class=\"n\">is_editor</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">is_book_author_or_editor</span>\n<span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"p\">:(</span><span class=\"n\">is_book_author</span> <span class=\"o\">|</span> <span class=\"n\">is_group_member</span><span class=\"p\">:</span><span class=\"n\">editors</span><span class=\"p\">)</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10eee1390</span><span class=\"o\">&gt;</span>\n</pre>\n<p>We can now update our <tt>can_edit_book</tt> rule:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">set_rule</span><span class=\"p\">(</span><span class=\"s1\">'can_edit_book'</span><span class=\"p\">,</span> <span class=\"n\">is_book_author_or_editor</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">test_rule</span><span class=\"p\">(</span><span class=\"s1\">'can_edit_book'</span><span class=\"p\">,</span> <span class=\"n\">adrian</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">True</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">test_rule</span><span class=\"p\">(</span><span class=\"s1\">'can_delete_book'</span><span class=\"p\">,</span> <span class=\"n\">adrian</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">True</span>\n</pre>\n<p>Let\u2019s see what happens with another user:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">martin</span> <span class=\"o\">=</span> <span class=\"n\">User</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">username</span><span class=\"o\">=</span><span class=\"s1\">'martin'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">martin</span><span class=\"o\">.</span><span class=\"n\">groups</span><span class=\"o\">.</span><span class=\"n\">values_list</span><span class=\"p\">(</span><span class=\"s1\">'name'</span><span class=\"p\">,</span> <span class=\"n\">flat</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">))</span>\n<span class=\"p\">[</span><span class=\"s1\">'editors'</span><span class=\"p\">]</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">test_rule</span><span class=\"p\">(</span><span class=\"s1\">'can_edit_book'</span><span class=\"p\">,</span> <span class=\"n\">martin</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">True</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">test_rule</span><span class=\"p\">(</span><span class=\"s1\">'can_delete_book'</span><span class=\"p\">,</span> <span class=\"n\">martin</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">False</span>\n</pre>\n<p>Awesome.</p>\n<p>So far, we\u2019ve only used the underlying, generic framework for defining and\ntesting rules. This layer is not at all specific to Django; it may be used in\nany context. There\u2019s actually no import of anything Django-related in the\nwhole app (except in the <tt>rules.templatetags</tt> module). <tt>rules</tt> however can\nintegrate tightly with Django to provide authorization.</p>\n</div>\n</div>\n<div id=\"using-rules-with-django\">\n<span id=\"authorization-in-django\"></span><h2>Using Rules with Django</h2>\n<p><tt>rules</tt> is able to provide object-level permissions in Django. It comes\nwith an authorization backend and a couple template tags for use in your\ntemplates.</p>\n<div id=\"permissions\">\n<h3>Permissions</h3>\n<p>In <tt>rules</tt>, permissions are a specialised type of rules. You still define\nrules by creating and combining predicates. These rules however, must be added\nto a permissions-specific rule set that comes with <tt>rules</tt> so that they can\nbe picked up by the <tt>rules</tt> authorization backend.</p>\n<div id=\"creating-permissions\">\n<h4>Creating permissions</h4>\n<p>The convention for naming permissions in Django is <tt>app_label.action_object</tt>,\nand we like to adhere to that. Let\u2019s add rules for the <tt>books.change_book</tt>\nand <tt>books.delete_book</tt> permissions:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.change_book'</span><span class=\"p\">,</span> <span class=\"n\">is_book_author</span> <span class=\"o\">|</span> <span class=\"n\">is_editor</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.delete_book'</span><span class=\"p\">,</span> <span class=\"n\">is_book_author</span><span class=\"p\">)</span>\n</pre>\n<p>See the difference in the API? <tt>add_perm</tt> adds to a permissions-specific\nrule set, whereas <tt>add_rule</tt> adds to a default shared rule set. It\u2019s\nimportant to know however, that these two rule sets are separate, meaning that\nadding a rule in one does not make it available to the other.</p>\n</div>\n<div id=\"checking-for-permission\">\n<h4>Checking for permission</h4>\n<p>Let\u2019s go ahead and check whether <tt>adrian</tt> has change permission to the\n<tt>guidetodjango</tt> book:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">adrian</span><span class=\"o\">.</span><span class=\"n\">has_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.change_book'</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">False</span>\n</pre>\n<p>When you call the <tt>User.has_perm</tt> method, Django asks each backend in\n<tt>settings.AUTHENTICATION_BACKENDS</tt> whether a user has the given permission\nfor the object. When queried for object permissions, Django\u2019s default\nauthentication backend always returns <tt>False</tt>. <tt>rules</tt> comes with an\nauthorization backend, that is able to provide object-level permissions by\nlooking into the permissions-specific rule set.</p>\n<p>Let\u2019s add the <tt>rules</tt> authorization backend in settings:</p>\n<pre><span class=\"n\">AUTHENTICATION_BACKENDS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"s1\">'rules.permissions.ObjectPermissionBackend'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'django.contrib.auth.backends.ModelBackend'</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n</pre>\n<p>Now, checking again gives <tt>adrian</tt> the required permissions:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">adrian</span><span class=\"o\">.</span><span class=\"n\">has_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.change_book'</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">True</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">adrian</span><span class=\"o\">.</span><span class=\"n\">has_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.delete_book'</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">True</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">martin</span><span class=\"o\">.</span><span class=\"n\">has_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.change_book'</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">True</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">martin</span><span class=\"o\">.</span><span class=\"n\">has_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.delete_book'</span><span class=\"p\">,</span> <span class=\"n\">guidetodjango</span><span class=\"p\">)</span>\n<span class=\"kc\">False</span>\n</pre>\n</div>\n</div>\n<div id=\"permissions-in-models\">\n<h3>Permissions in models</h3>\n<p><strong>NOTE:</strong> The features described in this section work on Python 3+ only.</p>\n<p>It is common to have a set of permissions for a model, like what Django offers with\nits default model permissions (such as <em>add</em>, <em>change</em> etc.). When using <tt>rules</tt>\nas the permission checking backend, you can declare object-level permissions for\nany model in a similar way, using a new <tt>Meta</tt> option.</p>\n<p>First, you need to switch your model\u2019s base and metaclass to the slightly extended\nversions provided in <tt>rules.contrib.models</tt>. There are several classes and mixins\nyou can use, depending on whether you\u2019re already using a custom base and/or metaclass\nfor your models or not. The extensions are very slim and don\u2019t affect the models\u2019\nbehavior in any way other than making it register permissions.</p>\n<ul>\n<li><p>If you\u2019re using the stock <tt>django.db.models.Model</tt> as base for your models,\nsimply switch over to <tt>RulesModel</tt> and you\u2019re good to go.</p>\n</li>\n<li><p>If you already have a custom base class adding common functionality to your models,\nadd <tt>RulesModelMixin</tt> to the classes it inherits from and set <tt>RulesModelBase</tt>\nas its metaclass, like so:</p>\n<pre>from django.db.models import Model\nfrom rules.contrib.models import RulesModelBase, RulesModelMixin\n\nclass MyModel(RulesModelMixin, Model, metaclass=RulesModelBase):\n    ...\n</pre>\n</li>\n<li><p>If you\u2019re using a custom metaclass for your models, you\u2019ll already know how to\nmake it inherit from <tt>RulesModelBaseMixin</tt> yourself.</p>\n</li>\n</ul>\n<p>Then, create your models like so, assuming you\u2019re using <tt>RulesModel</tt> as base\ndirectly:</p>\n<pre>import rules\nfrom rules.contrib.models import RulesModel\n\nclass Book(RulesModel):\n    class Meta:\n        rules_permissions = {\n            \"add\": rules.is_staff,\n            \"read\": rules.is_authenticated,\n        }\n</pre>\n<p>This would be equivalent to the following calls:</p>\n<pre>rules.add_perm(\"app_label.add_book\", rules.is_staff)\nrules.add_perm(\"app_label.read_book\", rules.is_authenticated)\n</pre>\n<p>There are methods in <tt>RulesModelMixin</tt> that you can overwrite in order to customize\nhow a model\u2019s permissions are registered. See the documented source code for details\nif you need this.</p>\n<p>Of special interest is the <tt>get_perm</tt> classmethod of <tt>RulesModelMixin</tt>, which can\nbe used to convert a permission type to the corresponding full permission name. If\nyou need to query for some type of permission on a given model programmatically,\nthis is handy:</p>\n<pre>if user.has_perm(Book.get_perm(\"read\")):\n    ...\n</pre>\n</div>\n<div id=\"permissions-in-views\">\n<h3>Permissions in views</h3>\n<p><tt>rules</tt> comes with a set of view decorators to help you enforce\nauthorization in your views.</p>\n<div id=\"using-the-function-based-view-decorator\">\n<h4>Using the function-based view decorator</h4>\n<p>For function-based views you can use the <tt>permission_required</tt> decorator:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.shortcuts</span> <span class=\"kn\">import</span> <span class=\"n\">get_object_or_404</span>\n<span class=\"kn\">from</span> <span class=\"nn\">rules.contrib.views</span> <span class=\"kn\">import</span> <span class=\"n\">permission_required</span>\n<span class=\"kn\">from</span> <span class=\"nn\">posts.models</span> <span class=\"kn\">import</span> <span class=\"n\">Post</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">get_post_by_pk</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">post_id</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">get_object_or_404</span><span class=\"p\">(</span><span class=\"n\">Post</span><span class=\"p\">,</span> <span class=\"n\">pk</span><span class=\"o\">=</span><span class=\"n\">post_id</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@permission_required</span><span class=\"p\">(</span><span class=\"s1\">'posts.change_post'</span><span class=\"p\">,</span> <span class=\"n\">fn</span><span class=\"o\">=</span><span class=\"n\">get_post_by_pk</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">post_update</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">post_id</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n</pre>\n<p>Usage is straight-forward, but there\u2019s one thing in the example above that\nstands out and this is the <tt>get_post_by_pk</tt> function. This function, given\nthe current request and all arguments passed to the view, is responsible for\nfetching and returning the object to check permissions against \u2013 i.e. the\n<tt>Post</tt> instance with PK equal to the given <tt>post_id</tt> in the example.\nThis specific use-case is quite common so, to save you some typing, <tt>rules</tt>\ncomes with a generic helper function that you can use to do this declaratively.\nThe example below is equivalent to the one above:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">rules.contrib.views</span> <span class=\"kn\">import</span> <span class=\"n\">permission_required</span><span class=\"p\">,</span> <span class=\"n\">objectgetter</span>\n<span class=\"kn\">from</span> <span class=\"nn\">posts.models</span> <span class=\"kn\">import</span> <span class=\"n\">Post</span>\n\n<span class=\"nd\">@permission_required</span><span class=\"p\">(</span><span class=\"s1\">'posts.change_post'</span><span class=\"p\">,</span> <span class=\"n\">fn</span><span class=\"o\">=</span><span class=\"n\">objectgetter</span><span class=\"p\">(</span><span class=\"n\">Post</span><span class=\"p\">,</span> <span class=\"s1\">'post_id'</span><span class=\"p\">))</span>\n<span class=\"k\">def</span> <span class=\"nf\">post_update</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">post_id</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n</pre>\n<p>For more information on the decorator and helper function, refer to the\n<tt>rules.contrib.views</tt> module.</p>\n</div>\n<div id=\"using-the-class-based-view-mixin\">\n<h4>Using the class-based view mixin</h4>\n<p>Django includes a set of access mixins that you can use in your class-based\nviews to enforce authorization. <tt>rules</tt> extends this framework to provide\nobject-level permissions via a mixin, <tt>PermissionRequiredMixin</tt>.</p>\n<p>The following example will automatically test for permission against the\ninstance returned by the view\u2019s <tt>get_object</tt> method:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.views.generic.edit</span> <span class=\"kn\">import</span> <span class=\"n\">UpdateView</span>\n<span class=\"kn\">from</span> <span class=\"nn\">rules.contrib.views</span> <span class=\"kn\">import</span> <span class=\"n\">PermissionRequiredMixin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">posts.models</span> <span class=\"kn\">import</span> <span class=\"n\">Post</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">PostUpdate</span><span class=\"p\">(</span><span class=\"n\">PermissionRequiredMixin</span><span class=\"p\">,</span> <span class=\"n\">UpdateView</span><span class=\"p\">):</span>\n    <span class=\"n\">model</span> <span class=\"o\">=</span> <span class=\"n\">Post</span>\n    <span class=\"n\">permission_required</span> <span class=\"o\">=</span> <span class=\"s1\">'posts.change_post'</span>\n</pre>\n<p>You can customise the object either by overriding <tt>get_object</tt> or\n<tt>get_permission_object</tt>.</p>\n<p>For more information refer to the <a href=\"https://docs.djangoproject.com/en/1.9/topics/auth/default/#limiting-access-to-logged-in-users\" rel=\"nofollow\">Django documentation</a> and the\n<tt>rules.contrib.views</tt> module.</p>\n</div>\n<div id=\"checking-permission-automatically-based-on-view-type\">\n<h4>Checking permission automatically based on view type</h4>\n<p>If you use the mechanisms provided by <tt>rules.contrib.models</tt> to register permissions\nfor your models as described in <a href=\"#permissions-in-models\" rel=\"nofollow\">Permissions in models</a>, there\u2019s another convenient\nmixin for class-based views available for you.</p>\n<p><tt>rules.contrib.views.AutoPermissionRequiredMixin</tt> can recognize the type of view\nit\u2019s used with and check for the corresponding permission automatically.</p>\n<p>This example view would, without any further configuration, automatically check for\nthe <tt>\"posts.change_post\"</tt> permission, given that the app label is <tt>\"posts\"</tt>:</p>\n<pre>from django.views.generic import UpdateView\nfrom rules.contrib.views import AutoPermissionRequiredMixin\nfrom posts.models import Post\n\nclass UpdatePostView(AutoPermissionRequiredMixin, UpdateView):\n    model = Post\n</pre>\n<p>By default, the generic CRUD views from <tt>django.views.generic</tt> are mapped to the\nnative Django permission types (<em>add</em>, <em>change</em>, <em>delete</em> and <em>view</em>). However,\nthe pre-defined mappings can be extended, changed or replaced altogether when\nsubclassing <tt>AutoPermissionRequiredMixin</tt>. See the fully documented source code\nfor details on how to do that properly.</p>\n</div>\n</div>\n<div id=\"permissions-and-rules-in-templates\">\n<h3>Permissions and rules in templates</h3>\n<p><tt>rules</tt> comes with two template tags to allow you to test for rules and\npermissions in templates.</p>\n<p>Add <tt>rules</tt> to your <tt>INSTALLED_APPS</tt>:</p>\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"s1\">'rules'</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n</pre>\n<p>Then, in your template:</p>\n<pre>{% load rules %}\n\n{% has_perm 'books.change_book' author book as can_edit_book %}\n{% if can_edit_book %}\n    ...\n{% endif %}\n\n{% test_rule 'has_super_feature' user as has_super_feature %}\n{% if has_super_feature %}\n    ...\n{% endif %}\n</pre>\n</div>\n<div id=\"permissions-in-the-admin\">\n<h3>Permissions in the Admin</h3>\n<p>If you\u2019ve setup <tt>rules</tt> to be used with permissions in Django, you\u2019re almost\nset to also use <tt>rules</tt> to authorize any add/change/delete actions in the\nAdmin. The Admin asks for <em>four</em> different permissions, depending on action:</p>\n<ul>\n<li><tt><span class=\"pre\">&lt;app_label&gt;.add_&lt;modelname&gt;</span></tt></li>\n<li><tt><span class=\"pre\">&lt;app_label&gt;.view_&lt;modelname&gt;</span></tt></li>\n<li><tt><span class=\"pre\">&lt;app_label&gt;.change_&lt;modelname&gt;</span></tt></li>\n<li><tt><span class=\"pre\">&lt;app_label&gt;.delete_&lt;modelname&gt;</span></tt></li>\n<li><tt>&lt;app_label&gt;</tt></li>\n</ul>\n<p><em>Note:</em> view permission is new in Django v2.1 and should not be added in versions before that.</p>\n<p>The first four are obvious. The fifth is the required permission for an app\nto be displayed in the Admin\u2019s \u201cdashboard\u201d. Overriding it does not restrict access to the add,\nchange or delete views. Here\u2019s some rules for our imaginary <tt>books</tt> app as an example:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books'</span><span class=\"p\">,</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">always_allow</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.add_book'</span><span class=\"p\">,</span> <span class=\"n\">is_staff</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.view_book'</span><span class=\"p\">,</span> <span class=\"n\">is_staff</span> <span class=\"o\">|</span> <span class=\"n\">has_secret_access_code</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.change_book'</span><span class=\"p\">,</span> <span class=\"n\">is_staff</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.delete_book'</span><span class=\"p\">,</span> <span class=\"n\">is_staff</span><span class=\"p\">)</span>\n</pre>\n<p>Django Admin does not support object-permissions, in the sense that it will\nnever ask for permission to perform an action <em>on an object</em>, only whether a\nuser is allowed to act on (<em>any</em>) instances of a model.</p>\n<p>If you\u2019d like to tell Django whether a user has permissions on a specific\nobject, you\u2019d have to override the following methods of a model\u2019s\n<tt>ModelAdmin</tt>:</p>\n<ul>\n<li><tt>has_view_permission(user, obj=None)</tt></li>\n<li><tt>has_change_permission(user, obj=None)</tt></li>\n<li><tt>has_delete_permission(user, obj=None)</tt></li>\n</ul>\n<p><tt>rules</tt> comes with a custom <tt>ModelAdmin</tt> subclass,\n<tt>rules.contrib.admin.ObjectPermissionsModelAdmin</tt>, that overrides these\nmethods to pass on the edited model instance to the authorization backends,\nthus enabling permissions per object in the Admin:</p>\n<pre><span class=\"c1\"># books/admin.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib</span> <span class=\"kn\">import</span> <span class=\"n\">admin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">rules.contrib.admin</span> <span class=\"kn\">import</span> <span class=\"n\">ObjectPermissionsModelAdmin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.models</span> <span class=\"kn\">import</span> <span class=\"n\">Book</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">BookAdmin</span><span class=\"p\">(</span><span class=\"n\">ObjectPermissionsModelAdmin</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">Book</span><span class=\"p\">,</span> <span class=\"n\">BookAdmin</span><span class=\"p\">)</span>\n</pre>\n<p>Now this allows you to specify permissions like this:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books'</span><span class=\"p\">,</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">always_allow</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.add_book'</span><span class=\"p\">,</span> <span class=\"n\">has_author_profile</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.change_book'</span><span class=\"p\">,</span> <span class=\"n\">is_book_author_or_editor</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">add_perm</span><span class=\"p\">(</span><span class=\"s1\">'books.delete_book'</span><span class=\"p\">,</span> <span class=\"n\">is_book_author</span><span class=\"p\">)</span>\n</pre>\n<p>To preserve backwards compatibility, Django will ask for either <em>view</em> or\n<em>change</em> permission. For maximum flexibility, <tt>rules</tt> behaves subtly\ndifferent: <tt>rules</tt> will ask for the change permission if and only if no rule\nexists for the view permission.</p>\n</div>\n<div id=\"permissions-in-django-rest-framework\">\n<h3>Permissions in Django Rest Framework</h3>\n<p>Similar to <tt>rules.contrib.views.AutoPermissionRequiredMixin</tt>, there is a\n<tt>rules.contrib.rest_framework.AutoPermissionViewSetMixin</tt> for viewsets in Django\nRest Framework. The difference is that it doesn\u2019t derive permission from the type\nof view but from the API action (<em>create</em>, <em>retrieve</em> etc.) that\u2019s tried to be\nperformed. Of course, it also requires you to declare your models as described in\n<a href=\"#permissions-in-models\" rel=\"nofollow\">Permissions in models</a>.</p>\n<p>Here is a possible <tt>ModelViewSet</tt> for the <tt>Post</tt> model with fully automated CRUD\npermission checking:</p>\n<pre>from rest_framework.serializers import ModelSerializer\nfrom rest_framework.viewsets import ModelViewSet\nfrom rules.contrib.rest_framework import AutoPermissionViewSetMixin\nfrom posts.models import Post\n\nclass PostSerializer(ModelSerializer):\n    class Meta:\n        model = Post\n        fields = \"__all__\"\n\nclass PostViewSet(AutoPermissionViewSetMixin, ModelViewSet):\n    queryset = Post.objects.all()\n    serializer_class = PostSerializer\n</pre>\n<p>By default, the CRUD actions of <tt>ModelViewSet</tt> are mapped to the native\nDjango permission types (<em>add</em>, <em>change</em>, <em>delete</em> and <em>view</em>). The <tt>list</tt>\naction has no permission checking enabled. However, the pre-defined mappings\ncan be extended, changed or replaced altogether when using (or subclassing)\n<tt>AutoPermissionViewSetMixin</tt>. Custom API actions defined via the <tt>@action</tt>\ndecorator may then be mapped as well. See the fully documented source code for\ndetails on how to properly customize the default behavior.</p>\n</div>\n</div>\n<div id=\"advanced-features\">\n<h2>Advanced features</h2>\n<div id=\"custom-rule-sets\">\n<h3>Custom rule sets</h3>\n<p>You may create as many rule sets as you need:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">features</span> <span class=\"o\">=</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">RuleSet</span><span class=\"p\">()</span>\n</pre>\n<p>And manipulate them by adding, removing, querying and testing rules:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">features</span><span class=\"o\">.</span><span class=\"n\">rule_exists</span><span class=\"p\">(</span><span class=\"s1\">'has_super_feature'</span><span class=\"p\">)</span>\n<span class=\"kc\">False</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">is_special_user</span> <span class=\"o\">=</span> <span class=\"n\">rules</span><span class=\"o\">.</span><span class=\"n\">is_group_member</span><span class=\"p\">(</span><span class=\"s1\">'special'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">features</span><span class=\"o\">.</span><span class=\"n\">add_rule</span><span class=\"p\">(</span><span class=\"s1\">'has_super_feature'</span><span class=\"p\">,</span> <span class=\"n\">is_special_user</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"s1\">'has_super_feature'</span> <span class=\"ow\">in</span> <span class=\"n\">features</span>\n<span class=\"kc\">True</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">features</span><span class=\"p\">[</span><span class=\"s1\">'has_super_feature'</span><span class=\"p\">]</span>\n<span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"p\">:</span><span class=\"n\">is_group_member</span><span class=\"p\">:</span><span class=\"n\">special</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10eeaa500</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">features</span><span class=\"o\">.</span><span class=\"n\">test_rule</span><span class=\"p\">(</span><span class=\"s1\">'has_super_feature'</span><span class=\"p\">,</span> <span class=\"n\">adrian</span><span class=\"p\">)</span>\n<span class=\"kc\">True</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">features</span><span class=\"o\">.</span><span class=\"n\">remove_rule</span><span class=\"p\">(</span><span class=\"s1\">'has_super_feature'</span><span class=\"p\">)</span>\n</pre>\n<p>Note however that custom rule sets are <em>not available</em> in Django templates \u2013\nyou need to provide integration yourself.</p>\n</div>\n<div id=\"invocation-context\">\n<h3>Invocation context</h3>\n<p>A new context is created as a result of invoking <tt>Predicate.test()</tt> and is\nonly valid for the duration of the invocation. A context is a simple <tt>dict</tt>\nthat you can use to store arbitrary data, (eg. caching computed values,\nsetting flags, etc.), that can be used by predicates later on in the chain.\nInside a predicate function it can be used like so:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@predicate</span>\n<span class=\"o\">...</span> <span class=\"k\">def</span> <span class=\"nf\">mypred</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"n\">compute_expensive_value</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>     <span class=\"n\">mypred</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s1\">'value'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">value</span>\n<span class=\"o\">...</span>     <span class=\"k\">return</span> <span class=\"kc\">True</span>\n</pre>\n<p>Other predicates can later use stored values:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@predicate</span>\n<span class=\"o\">...</span> <span class=\"k\">def</span> <span class=\"nf\">myotherpred</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"n\">myotherpred</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'value'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>     <span class=\"k\">if</span> <span class=\"n\">value</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>         <span class=\"k\">return</span> <span class=\"n\">do_something_with_value</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>     <span class=\"k\">else</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>         <span class=\"k\">return</span> <span class=\"n\">do_something_without_value</span><span class=\"p\">()</span>\n</pre>\n<p><tt>Predicate.context</tt> provides a single <tt>args</tt> attribute that contains the\narguments as given to <tt>test()</tt> at the beginning of the invocation.</p>\n</div>\n<div id=\"binding-self\">\n<h3>Binding \u201cself\u201d</h3>\n<p>In a predicate\u2019s function body, you can refer to the predicate instance itself\nby its name, eg. <tt>is_book_author</tt>. Passing <tt>bind=True</tt> as a keyword\nargument to the <tt>predicate</tt> decorator will let you refer to the predicate\nwith <tt>self</tt>, which is more convenient. Binding <tt>self</tt> is just syntactic\nsugar. As a matter of fact, the following two are equivalent:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@predicate</span>\n<span class=\"o\">...</span> <span class=\"k\">def</span> <span class=\"nf\">is_book_author</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">book</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"k\">if</span> <span class=\"n\">is_book_author</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>         <span class=\"k\">return</span> <span class=\"n\">user</span> <span class=\"o\">==</span> <span class=\"n\">book</span><span class=\"o\">.</span><span class=\"n\">author</span>\n<span class=\"o\">...</span>     <span class=\"k\">return</span> <span class=\"kc\">False</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@predicate</span><span class=\"p\">(</span><span class=\"n\">bind</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"o\">...</span> <span class=\"k\">def</span> <span class=\"nf\">is_book_author</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">book</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>         <span class=\"k\">return</span> <span class=\"n\">user</span> <span class=\"o\">==</span> <span class=\"n\">book</span><span class=\"o\">.</span><span class=\"n\">author</span>\n<span class=\"o\">...</span>     <span class=\"k\">return</span> <span class=\"kc\">False</span>\n</pre>\n</div>\n<div id=\"skipping-predicates\">\n<h3>Skipping predicates</h3>\n<p>You may skip evaluation by returning <tt>None</tt> from your predicate:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@predicate</span><span class=\"p\">(</span><span class=\"n\">bind</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"o\">...</span> <span class=\"k\">def</span> <span class=\"nf\">is_book_author</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">book</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"k\">if</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>         <span class=\"k\">return</span> <span class=\"n\">user</span> <span class=\"o\">==</span> <span class=\"n\">book</span><span class=\"o\">.</span><span class=\"n\">author</span>\n<span class=\"o\">...</span>     <span class=\"k\">else</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>         <span class=\"k\">return</span> <span class=\"kc\">None</span>\n</pre>\n<p>Returning <tt>None</tt> signifies that the predicate need not be evaluated, thus\nleaving the predicate result up to that point unchanged.</p>\n</div>\n<div id=\"logging-predicate-evaluation\">\n<h3>Logging predicate evaluation</h3>\n<p><tt>rules</tt> can optionally be configured to log debug information as rules are\nevaluated to help with debugging your predicates. Messages are sent at the\nDEBUG level to the <tt>'rules'</tt> logger. The following <a href=\"https://docs.python.org/3.6/library/logging.config.html#logging-config-dictschema\" rel=\"nofollow\">dictConfig</a> configures\na console logger (place this in your project\u2019s <cite>settings.py</cite> if you\u2019re using\n<cite>rules</cite> with Django):</p>\n<pre><span class=\"n\">LOGGING</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s1\">'version'</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n    <span class=\"s1\">'disable_existing_loggers'</span><span class=\"p\">:</span> <span class=\"kc\">False</span><span class=\"p\">,</span>\n    <span class=\"s1\">'handlers'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'console'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'level'</span><span class=\"p\">:</span> <span class=\"s1\">'DEBUG'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'class'</span><span class=\"p\">:</span> <span class=\"s1\">'logging.StreamHandler'</span><span class=\"p\">,</span>\n        <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n    <span class=\"s1\">'loggers'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'rules'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'handlers'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'console'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'level'</span><span class=\"p\">:</span> <span class=\"s1\">'DEBUG'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'propagate'</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">}</span>\n</pre>\n<p>When this logger is active each individual predicate will have a log message\nprinted when it is evaluated.</p>\n</div>\n</div>\n<div id=\"best-practices\">\n<h2>Best practices</h2>\n<p>Before you can test for rules, these rules must be registered with a rule set,\nand for this to happen the modules containing your rule definitions must be\nimported.</p>\n<p>For complex projects with several predicates and rules, it may not be\npractical to define all your predicates and rules inside one module. It might\nbe best to split them among any sub-components of your project. In a Django\ncontext, these sub-components could be the apps for your project.</p>\n<p>On the other hand, because importing predicates from all over the place in\norder to define rules can lead to circular imports and broken hearts, it\u2019s\nbest to further split predicates and rules in different modules.</p>\n<p><tt>rules</tt> may optionally be configured to autodiscover <tt>rules.py</tt> modules in\nyour apps and import them at startup. To have <tt>rules</tt> do so, just edit your\n<tt>INSTALLED_APPS</tt> setting:</p>\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"c1\"># replace 'rules' with:</span>\n    <span class=\"s1\">'rules.apps.AutodiscoverRulesConfig'</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n</pre>\n<p><strong>Note:</strong> On Python 2, you must also add the following to the top of your\n<tt>rules.py</tt> file, or you\u2019ll get import errors trying to import <tt>rules</tt>\nitself:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"kn\">import</span> <span class=\"n\">absolute_import</span>\n</pre>\n</div>\n<div id=\"api-reference\">\n<h2>API Reference</h2>\n<p>The core APIs are accessible from the root <tt>rules</tt> module. Django-specific\nfunctionality for the Admin and views is available from <tt>rules.contrib</tt>.</p>\n<div id=\"class-rules-predicate\">\n<h3>Class <tt>rules.Predicate</tt></h3>\n<p>You create <tt>Predicate</tt> instances by passing in a callable:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"k\">def</span> <span class=\"nf\">is_book_author</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">book</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"k\">return</span> <span class=\"n\">book</span><span class=\"o\">.</span><span class=\"n\">author</span> <span class=\"o\">==</span> <span class=\"n\">user</span>\n<span class=\"o\">...</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">pred</span> <span class=\"o\">=</span> <span class=\"n\">Predicate</span><span class=\"p\">(</span><span class=\"n\">is_book_author</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">pred</span>\n<span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"p\">:</span><span class=\"n\">is_book_author</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10eeaa490</span><span class=\"o\">&gt;</span>\n</pre>\n<p>You may optionally provide a different name for the predicate that is used\nwhen inspecting it:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">pred</span> <span class=\"o\">=</span> <span class=\"n\">Predicate</span><span class=\"p\">(</span><span class=\"n\">is_book_author</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'another_name'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">pred</span>\n<span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"p\">:</span><span class=\"n\">another_name</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10eeaa490</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Also, you may optionally provide <tt>bind=True</tt> in order to be able to access\nthe predicate instance with <tt>self</tt>:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"k\">def</span> <span class=\"nf\">is_book_author</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">book</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>         <span class=\"k\">return</span> <span class=\"n\">user</span> <span class=\"o\">==</span> <span class=\"n\">book</span><span class=\"o\">.</span><span class=\"n\">author</span>\n<span class=\"o\">...</span>     <span class=\"k\">return</span> <span class=\"kc\">False</span>\n<span class=\"o\">...</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">pred</span> <span class=\"o\">=</span> <span class=\"n\">Predicate</span><span class=\"p\">(</span><span class=\"n\">is_book_author</span><span class=\"p\">,</span> <span class=\"n\">bind</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">pred</span>\n<span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"p\">:</span><span class=\"n\">is_book_author</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10eeaa490</span><span class=\"o\">&gt;</span>\n</pre>\n<div id=\"instance-methods\">\n<h4>Instance methods</h4>\n<dl>\n<dt><tt>test(obj=None, target=None)</tt></dt>\n<dd>Returns the result of calling the passed in callable with zero, one or two\npositional arguments, depending on how many it accepts.</dd>\n</dl>\n</div>\n</div>\n<div id=\"class-rules-ruleset\">\n<h3>Class <tt>rules.RuleSet</tt></h3>\n<p><tt>RuleSet</tt> extends Python\u2019s built-in <a href=\"http://docs.python.org/library/stdtypes.html#mapping-types-dict\" rel=\"nofollow\">dict</a> type. Therefore, you may create\nand use a rule set any way you\u2019d use a dict.</p>\n<div id=\"id1\">\n<h4>Instance methods</h4>\n<dl>\n<dt><tt>add_rule(name, predicate)</tt></dt>\n<dd>Adds a predicate to the rule set, assigning it to the given rule name.\nRaises <tt>KeyError</tt> if another rule with that name already exists.</dd>\n<dt><tt>set_rule(name, predicate)</tt></dt>\n<dd>Set the rule with the given name, regardless if one already exists.</dd>\n<dt><tt>remove_rule(name)</tt></dt>\n<dd>Remove the rule with the given name. Raises <tt>KeyError</tt> if a rule with\nthat name does not exist.</dd>\n<dt><tt>rule_exists(name)</tt></dt>\n<dd>Returns <tt>True</tt> if a rule with the given name exists, <tt>False</tt> otherwise.</dd>\n<dt><tt>test_rule(name, obj=None, target=None)</tt></dt>\n<dd>Returns the result of calling <tt>predicate.test(obj, target)</tt> where\n<tt>predicate</tt> is the predicate for the rule with the given name. Returns\n<tt>False</tt> if a rule with the given name does not exist.</dd>\n</dl>\n</div>\n</div>\n<div id=\"decorators\">\n<h3>Decorators</h3>\n<dl>\n<dt><tt>@predicate</tt></dt>\n<dd><p>Decorator that creates a predicate out of any callable:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@predicate</span>\n<span class=\"o\">...</span> <span class=\"k\">def</span> <span class=\"nf\">is_book_author</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">book</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"k\">return</span> <span class=\"n\">book</span><span class=\"o\">.</span><span class=\"n\">author</span> <span class=\"o\">==</span> <span class=\"n\">user</span>\n<span class=\"o\">...</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">is_book_author</span>\n<span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"p\">:</span><span class=\"n\">is_book_author</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10eeaa490</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Customising the predicate name:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@predicate</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'another_name'</span><span class=\"p\">)</span>\n<span class=\"o\">...</span> <span class=\"k\">def</span> <span class=\"nf\">is_book_author</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">book</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"k\">return</span> <span class=\"n\">book</span><span class=\"o\">.</span><span class=\"n\">author</span> <span class=\"o\">==</span> <span class=\"n\">user</span>\n<span class=\"o\">...</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">is_book_author</span>\n<span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"p\">:</span><span class=\"n\">another_name</span> <span class=\"nb\">object</span> <span class=\"n\">at</span> <span class=\"mh\">0x10eeaa490</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Binding <tt>self</tt>:</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nd\">@predicate</span><span class=\"p\">(</span><span class=\"n\">bind</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"o\">...</span> <span class=\"k\">def</span> <span class=\"nf\">is_book_author</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">book</span><span class=\"p\">):</span>\n<span class=\"o\">...</span>     <span class=\"k\">if</span> <span class=\"s1\">'user_has_special_flag'</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>         <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s1\">'user_has_special_flag'</span><span class=\"p\">]</span>\n<span class=\"o\">...</span>     <span class=\"k\">return</span> <span class=\"n\">book</span><span class=\"o\">.</span><span class=\"n\">author</span> <span class=\"o\">==</span> <span class=\"n\">user</span>\n</pre>\n</dd>\n</dl>\n</div>\n<div id=\"predefined-predicates\">\n<h3>Predefined predicates</h3>\n<dl>\n<dt><tt>always_allow()</tt>, <tt>always_true()</tt></dt>\n<dd>Always returns <tt>True</tt>.</dd>\n<dt><tt>always_deny()</tt>, <tt>always_false()</tt></dt>\n<dd>Always returns <tt>False</tt>.</dd>\n<dt><tt>is_authenticated(user)</tt></dt>\n<dd>Returns the result of calling <tt>user.is_authenticated()</tt>. Returns\n<tt>False</tt> if the given user does not have an <tt>is_authenticated</tt> method.</dd>\n<dt><tt>is_superuser(user)</tt></dt>\n<dd>Returns the result of calling <tt>user.is_superuser</tt>. Returns <tt>False</tt>\nif the given user does not have an <tt>is_superuser</tt> property.</dd>\n<dt><tt>is_staff(user)</tt></dt>\n<dd>Returns the result of calling <tt>user.is_staff</tt>. Returns <tt>False</tt> if the\ngiven user does not have an <tt>is_staff</tt> property.</dd>\n<dt><tt>is_active(user)</tt></dt>\n<dd>Returns the result of calling <tt>user.is_active</tt>. Returns <tt>False</tt> if the\ngiven user does not have an <tt>is_active</tt> property.</dd>\n<dt><tt><span class=\"pre\">is_group_member(*groups)</span></tt></dt>\n<dd>Factory that creates a new predicate that returns <tt>True</tt> if the given\nuser is a member of <em>all</em> the given groups, <tt>False</tt> otherwise.</dd>\n</dl>\n</div>\n<div id=\"shortcuts\">\n<h3>Shortcuts</h3>\n<div id=\"managing-the-shared-rule-set\">\n<h4>Managing the shared rule set</h4>\n<dl>\n<dt><tt>add_rule(name, predicate)</tt></dt>\n<dd>Adds a rule to the shared rule set. See <tt>RuleSet.add_rule</tt>.</dd>\n<dt><tt>set_rule(name, predicate)</tt></dt>\n<dd>Set the rule with the given name from the shared rule set. See\n<tt>RuleSet.set_rule</tt>.</dd>\n<dt><tt>remove_rule(name)</tt></dt>\n<dd>Remove a rule from the shared rule set. See <tt>RuleSet.remove_rule</tt>.</dd>\n<dt><tt>rule_exists(name)</tt></dt>\n<dd>Returns whether a rule exists in the shared rule set. See\n<tt>RuleSet.rule_exists</tt>.</dd>\n<dt><tt>test_rule(name, obj=None, target=None)</tt></dt>\n<dd>Tests the rule with the given name. See <tt>RuleSet.test_rule</tt>.</dd>\n</dl>\n</div>\n<div id=\"managing-the-permissions-rule-set\">\n<h4>Managing the permissions rule set</h4>\n<dl>\n<dt><tt>add_perm(name, predicate)</tt></dt>\n<dd>Adds a rule to the permissions rule set. See <tt>RuleSet.add_rule</tt>.</dd>\n<dt><tt>set_perm(name, predicate)</tt></dt>\n<dd>Replace a rule from the permissions rule set. See <tt>RuleSet.set_rule</tt>.</dd>\n<dt><tt>remove_perm(name)</tt></dt>\n<dd>Remove a rule from the permissions rule set. See <tt>RuleSet.remove_rule</tt>.</dd>\n<dt><tt>perm_exists(name)</tt></dt>\n<dd>Returns whether a rule exists in the permissions rule set. See\n<tt>RuleSet.rule_exists</tt>.</dd>\n<dt><tt>has_perm(name, user=None, obj=None)</tt></dt>\n<dd>Tests the rule with the given name. See <tt>RuleSet.test_rule</tt>.</dd>\n</dl>\n</div>\n</div>\n</div>\n<div id=\"licence\">\n<h2>Licence</h2>\n<p><tt><span class=\"pre\">django-rules</span></tt> is distributed under the MIT licence.</p>\n<p>Copyright (c) 2014 Akis Kesoglou</p>\n<p>Permission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \u201cSoftware\u201d), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:</p>\n<p>The above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.</p>\n<p>THE SOFTWARE IS PROVIDED \u201cAS IS\u201d, WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.</p>\n</div>\n\n          </div>"}, "last_serial": 6472272, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "4377aa5f81dec79a8b87963247d86dc1", "sha256": "4e21ef407ec8eff16fa7e184fb483319da8309526ccfb3524e70d39ef706af96"}, "downloads": -1, "filename": "rules-0.1.tar.gz", "has_sig": false, "md5_digest": "4377aa5f81dec79a8b87963247d86dc1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17225, "upload_time": "2014-03-09T15:03:05", "upload_time_iso_8601": "2014-03-09T15:03:05.446237Z", "url": "https://files.pythonhosted.org/packages/cb/8e/3b4002ad5156f4368ec00212135f65f48049d2a39f1e5e1c8a34f380ead1/rules-0.1.tar.gz", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "4d6b92f2ad5ae15dff406ccd6b279824", "sha256": "9a3455697fc4eaca11d6d99a8be6cde2fedc12e8c10d517ac3954ef93ef54791"}, "downloads": -1, "filename": "rules-0.2.tar.gz", "has_sig": false, "md5_digest": "4d6b92f2ad5ae15dff406ccd6b279824", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 19784, "upload_time": "2014-06-09T16:34:05", "upload_time_iso_8601": "2014-06-09T16:34:05.433981Z", "url": "https://files.pythonhosted.org/packages/1b/f7/e313dee1b8d94a4ae56621a80c76c9542b5e5baf6fb2b7fab77ad35a28ec/rules-0.2.tar.gz", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "8dbf2a79e6c9c5bdad3e309be16b6b53", "sha256": "0f15cb4627a15a03b9e83f7bb782e89b416e28c86a98942a7c4c62d248cb5009"}, "downloads": -1, "filename": "rules-0.3.tar.gz", "has_sig": false, "md5_digest": "8dbf2a79e6c9c5bdad3e309be16b6b53", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 20444, "upload_time": "2014-10-15T16:09:10", "upload_time_iso_8601": "2014-10-15T16:09:10.239202Z", "url": "https://files.pythonhosted.org/packages/01/c4/9fc1a4ca778e6afe5a28b6be0291715d25ddbe46a5b0e06eb772311964a7/rules-0.3.tar.gz", "yanked": false}], "0.4": [{"comment_text": "", "digests": {"md5": "5cea5432a226fa0c9537dbba936b17c3", "sha256": "61f19fba0ccbdd85aa2c188dfbf7e592eccf5f591880575af69f9c520c627ce4"}, "downloads": -1, "filename": "rules-0.4.tar.gz", "has_sig": false, "md5_digest": "5cea5432a226fa0c9537dbba936b17c3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24499, "upload_time": "2015-02-16T08:36:40", "upload_time_iso_8601": "2015-02-16T08:36:40.143100Z", "url": "https://files.pythonhosted.org/packages/2f/1d/405ce85209e42f84b8b4643092ae2ffb6dd5180f1638fb2e41fdb8ba9839/rules-0.4.tar.gz", "yanked": false}], "1.0": [{"comment_text": "", "digests": {"md5": "be0f851b261dcc1e063656ddd95bb9c2", "sha256": "86892fdeed8087f7cdddc1b8f4d526f775a1fce8a99f3bf487fc44a2a159f947"}, "downloads": -1, "filename": "rules-1.0.tar.gz", "has_sig": false, "md5_digest": "be0f851b261dcc1e063656ddd95bb9c2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 38407, "upload_time": "2015-10-06T19:25:10", "upload_time_iso_8601": "2015-10-06T19:25:10.756131Z", "url": "https://files.pythonhosted.org/packages/4e/03/a8fcb2b089f5c8c3ecfca7334b71c9a615b53a2999b4a0e55516d6d44014/rules-1.0.tar.gz", "yanked": false}], "1.1": [{"comment_text": "", "digests": {"md5": "894482246778be4fe2c53d814c81385a", "sha256": "5a3c095a0f93550dd87040a54a1ef5ab3410e7c413d568f0eee4d3fa9946609f"}, "downloads": -1, "filename": "rules-1.1.tar.gz", "has_sig": false, "md5_digest": "894482246778be4fe2c53d814c81385a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 40794, "upload_time": "2015-12-05T16:18:06", "upload_time_iso_8601": "2015-12-05T16:18:06.191129Z", "url": "https://files.pythonhosted.org/packages/37/24/a2cd3c770c278a724297433bcdd235991416a373e373f3b4969cc5af0511/rules-1.1.tar.gz", "yanked": false}], "1.1.1": [{"comment_text": "", "digests": {"md5": "47c90403aa4a824ead9de6e0d3c4de86", "sha256": "c29b15c5368552fdc660699731e62e3c800772a249b7b816ffe0eeb440823963"}, "downloads": -1, "filename": "rules-1.1.1.tar.gz", "has_sig": false, "md5_digest": "47c90403aa4a824ead9de6e0d3c4de86", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 40903, "upload_time": "2015-12-07T09:45:00", "upload_time_iso_8601": "2015-12-07T09:45:00.075568Z", "url": "https://files.pythonhosted.org/packages/76/bb/21b9148fd3a2d7e178a162e76a43faf1a6109a957550fcef518644453ce4/rules-1.1.1.tar.gz", "yanked": false}], "1.2": [{"comment_text": "", "digests": {"md5": "075ff53e09989f6310d02e6dad33cd8f", "sha256": "2c4b3542bcc34f9f8d39111a61e8fd9e37cfb72e01b7d947d097018ba405767e"}, "downloads": -1, "filename": "rules-1.2.tar.gz", "has_sig": false, "md5_digest": "075ff53e09989f6310d02e6dad33cd8f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 43287, "upload_time": "2016-12-18T21:20:01", "upload_time_iso_8601": "2016-12-18T21:20:01.296433Z", "url": "https://files.pythonhosted.org/packages/95/1b/efd0df3013c6699c05df0e19e0078908377d5995359e4bfabe60ea6b49ee/rules-1.2.tar.gz", "yanked": false}], "1.2.1": [{"comment_text": "", "digests": {"md5": "72f2ee2ed1ef31bd39c2659351229b42", "sha256": "993e236deb3e63a3e412b7865e53978c7a2d32bda7348df70988967faca2d5d7"}, "downloads": -1, "filename": "rules-1.2.1.tar.gz", "has_sig": false, "md5_digest": "72f2ee2ed1ef31bd39c2659351229b42", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 43327, "upload_time": "2017-05-13T12:22:32", "upload_time_iso_8601": "2017-05-13T12:22:32.574762Z", "url": "https://files.pythonhosted.org/packages/06/af/9c99bb9a5e4360e4db1091748c7b06017e0cb3708900adb1ec9804df622c/rules-1.2.1.tar.gz", "yanked": false}], "1.3": [{"comment_text": "", "digests": {"md5": "986e7d975453cdbec57754aa46f14702", "sha256": "89150f94a3339dc4f8aa9da6bf3b5ee2dd9ac17666982b8ca8ea9a551cb83b50"}, "downloads": -1, "filename": "rules-1.3.tar.gz", "has_sig": false, "md5_digest": "986e7d975453cdbec57754aa46f14702", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 43139, "upload_time": "2017-12-12T22:38:16", "upload_time_iso_8601": "2017-12-12T22:38:16.379959Z", "url": "https://files.pythonhosted.org/packages/ea/f0/b59bfc65b0b591f3c4f3413a1026555dbd622671137974c0299aeb392a33/rules-1.3.tar.gz", "yanked": false}], "1.4": [{"comment_text": "", "digests": {"md5": "4a2bd9ac7e8fe71230fa8fab3e7175ef", "sha256": "7b56810023f4f49e8630b1176951eb8b305b1d1dc1559a3ad4a76c030065d7d9"}, "downloads": -1, "filename": "rules-1.4.tar.gz", "has_sig": false, "md5_digest": "4a2bd9ac7e8fe71230fa8fab3e7175ef", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 44142, "upload_time": "2018-07-21T15:56:15", "upload_time_iso_8601": "2018-07-21T15:56:15.841774Z", "url": "https://files.pythonhosted.org/packages/37/69/5a0fb82b9b08f55bff6027a2e8c17f16cf1b20121ec0d75d79fc267e8360/rules-1.4.tar.gz", "yanked": false}], "2.0": [{"comment_text": "", "digests": {"md5": "428479676517a10abf5734da712bd5bc", "sha256": "2c6ef34e00d333e6f40f8e86bb7de057909f4524b53b673641610bed20633c4f"}, "downloads": -1, "filename": "rules-2.0.tar.gz", "has_sig": false, "md5_digest": "428479676517a10abf5734da712bd5bc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 43402, "upload_time": "2018-07-22T13:51:38", "upload_time_iso_8601": "2018-07-22T13:51:38.602553Z", "url": "https://files.pythonhosted.org/packages/2c/a7/26fa7404a8c459c1f2b0bc409561e9ce8ca30fac0c50e3e531941b88644b/rules-2.0.tar.gz", "yanked": false}], "2.0.1": [{"comment_text": "", "digests": {"md5": "f4d5b5c2d3b34977a8d8d6ef90e3ce5b", "sha256": "da47c407e1af2fa5a500658fb6575ced4893dacaf65f1d576ead04956a9c3dae"}, "downloads": -1, "filename": "rules-2.0.1.tar.gz", "has_sig": false, "md5_digest": "f4d5b5c2d3b34977a8d8d6ef90e3ce5b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 43596, "upload_time": "2018-12-07T14:15:21", "upload_time_iso_8601": "2018-12-07T14:15:21.442433Z", "url": "https://files.pythonhosted.org/packages/35/f3/01ab1b1461326ba3caf5722e95ac93efc54063e422d2b8d4e9c1cc8c9edb/rules-2.0.1.tar.gz", "yanked": false}], "2.1": [{"comment_text": "", "digests": {"md5": "ec8b0d925194d1bb64b7a93f5f3aebe6", "sha256": "2c0a3707e5e935a883ef8fe65fd080e7169f67ac1ef0c5e2d2e6932cb3ef5318"}, "downloads": -1, "filename": "rules-2.1.tar.gz", "has_sig": false, "md5_digest": "ec8b0d925194d1bb64b7a93f5f3aebe6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 52808, "upload_time": "2019-08-11T13:18:10", "upload_time_iso_8601": "2019-08-11T13:18:10.652881Z", "url": "https://files.pythonhosted.org/packages/8a/5d/f35209aeb1e34e6cf0ad113930829618864a8a455ed2a9c63c696d822f97/rules-2.1.tar.gz", "yanked": false}], "2.2": [{"comment_text": "", "digests": {"md5": "ad89cd8bda1938e07b182c875380f5a6", "sha256": "9bae429f9d4f91a375402990da1541f9e093b0ac077221d57124d06eeeca4405"}, "downloads": -1, "filename": "rules-2.2.tar.gz", "has_sig": false, "md5_digest": "ad89cd8bda1938e07b182c875380f5a6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 53025, "upload_time": "2020-01-17T10:23:24", "upload_time_iso_8601": "2020-01-17T10:23:24.817482Z", "url": "https://files.pythonhosted.org/packages/7d/c4/ecfe8e5aaa9fb9e6017bd3c7ebae03c9c54881520f3e6d75d8035bfa9ec6/rules-2.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "ad89cd8bda1938e07b182c875380f5a6", "sha256": "9bae429f9d4f91a375402990da1541f9e093b0ac077221d57124d06eeeca4405"}, "downloads": -1, "filename": "rules-2.2.tar.gz", "has_sig": false, "md5_digest": "ad89cd8bda1938e07b182c875380f5a6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 53025, "upload_time": "2020-01-17T10:23:24", "upload_time_iso_8601": "2020-01-17T10:23:24.817482Z", "url": "https://files.pythonhosted.org/packages/7d/c4/ecfe8e5aaa9fb9e6017bd3c7ebae03c9c54881520f3e6d75d8035bfa9ec6/rules-2.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:00:06 2020"}