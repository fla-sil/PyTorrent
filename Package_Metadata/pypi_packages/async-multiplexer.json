{"info": {"author": "Aratz M. Lasa", "author_email": "aratz.m.lasa@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# async_multiplexer\n[![PyPI version](https://badge.fury.io/py/async-multiplexer.svg)](https://badge.fury.io/py/async-multiplexer)\n[![Python 3.8](https://img.shields.io/badge/python-3.8-blue.svg)](https://www.python.org/downloads/release/python-380/)\n[![Build Status](https://travis-ci.com/aratz-lasa/async-multiplexer.svg?branch=master)](https://travis-ci.com/aratz-lasa/async-multiplexer)\n[![codecov](https://codecov.io/gh/aratz-lasa/async-multiplexer/branch/master/graph/badge.svg)](https://codecov.io/gh/aratz-lasa/async-multiplexer)\n\n[![PEP8](https://img.shields.io/badge/code%20style-pep8-orange.svg)](https://www.python.org/dev/peps/pep-0008/)\n[![black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)\n[![Checked with mypy](http://www.mypy-lang.org/static/mypy_badge.svg)](http://mypy-lang.org/)\n\n**async_multiplexer** is a TCP Multiplexer based on [Mplex](https://github.com/libp2p/specs/tree/master/mplex) protocol, but simplified.\nIt is intended for creating mutiple streams in parallel\non top of a same TCP connection.\n\n## Installation\n```bash\npip install async-multiplexer\n``` \n\n## Usage\n\n### Client\n```python\nimport asyncio\nfrom async_multiplexer import open_multiplexer_context\n\nasync def echo_client():\n    async with open_multiplexer_context(\"127.0.0.1\", 7777) as multiplexer:\n        stream_echo_1 = await multiplexer.multiplex(\"echo.1\")\n        stream_echo_2 = await multiplexer.multiplex(\"echo.2\")\n        await stream_echo_1.write(b\"echo.1\")\n        await stream_echo_2.write(b\"echo.2\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(echo_client())\n```\n\n### Server\n```python\nimport asyncio\nfrom async_multiplexer import bind_multiplex_listener_context\n\nasync def handler(stream):\n    data = await stream.read()\n    print(data)\n\nasync def echo_server():\n    async with bind_multiplex_listener_context(\"127.0.0.1\", 7777) as listener:\n        listener.set_handler(\"echo.1\", handler)\n        listener.set_handler(\"echo.2\", handler)\n        await asyncio.sleep(10)\n\nif __name__ == \"__main__\":\n    asyncio.run(echo_server())\n```\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/aratz-lasa/async-multiplexer", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "async-multiplexer", "package_url": "https://pypi.org/project/async-multiplexer/", "platform": "", "project_url": "https://pypi.org/project/async-multiplexer/", "project_urls": {"Homepage": "https://github.com/aratz-lasa/async-multiplexer"}, "release_url": "https://pypi.org/project/async-multiplexer/0.1.0/", "requires_dist": ["uvarint (==1.2.0)", "pytest (==5.4.1) ; extra == 'dev'", "pytest-asyncio (==0.11.0) ; extra == 'dev'", "hypothesis (==5.10.4) ; extra == 'dev'", "hypothesis-pytest (==0.19.0) ; extra == 'dev'"], "requires_python": ">=3.8", "summary": "Asyncio TCP Multiplexer", "version": "0.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>async_multiplexer</h1>\n<p><a href=\"https://badge.fury.io/py/async-multiplexer\" rel=\"nofollow\"><img alt=\"PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e958a8646d07cc329b39585b646234d0f5f7f48f/68747470733a2f2f62616467652e667572792e696f2f70792f6173796e632d6d756c7469706c657865722e737667\"></a>\n<a href=\"https://www.python.org/downloads/release/python-380/\" rel=\"nofollow\"><img alt=\"Python 3.8\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7f8a5f68d8d76185564998e2d4814ac79bc72a7c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d332e382d626c75652e737667\"></a>\n<a href=\"https://travis-ci.com/aratz-lasa/async-multiplexer\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e13cc7eb21597803659a2e8990c1a341c1b5fdf9/68747470733a2f2f7472617669732d63692e636f6d2f617261747a2d6c6173612f6173796e632d6d756c7469706c657865722e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/gh/aratz-lasa/async-multiplexer\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/cf3b427a6448c3ffe70243e9dab89dd1059254cc/68747470733a2f2f636f6465636f762e696f2f67682f617261747a2d6c6173612f6173796e632d6d756c7469706c657865722f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a></p>\n<p><a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow\"><img alt=\"PEP8\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/41f7bd188e2af668ecd0a553dfc66df3c46f42af/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d706570382d6f72616e67652e737667\"></a>\n<a href=\"https://github.com/psf/black\" rel=\"nofollow\"><img alt=\"black\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fbfdc7754183ecf079bc71ddeabaf88f6cbc5c00/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667\"></a>\n<a href=\"http://mypy-lang.org/\" rel=\"nofollow\"><img alt=\"Checked with mypy\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d0db8f5dcbf5f340f278004d5db3d16b4cdf33ba/687474703a2f2f7777772e6d7970792d6c616e672e6f72672f7374617469632f6d7970795f62616467652e737667\"></a></p>\n<p><strong>async_multiplexer</strong> is a TCP Multiplexer based on <a href=\"https://github.com/libp2p/specs/tree/master/mplex\" rel=\"nofollow\">Mplex</a> protocol, but simplified.\nIt is intended for creating mutiple streams in parallel\non top of a same TCP connection.</p>\n<h2>Installation</h2>\n<pre>pip install async-multiplexer\n</pre>\n<h2>Usage</h2>\n<h3>Client</h3>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">async_multiplexer</span> <span class=\"kn\">import</span> <span class=\"n\">open_multiplexer_context</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">echo_client</span><span class=\"p\">():</span>\n    <span class=\"k\">async</span> <span class=\"k\">with</span> <span class=\"n\">open_multiplexer_context</span><span class=\"p\">(</span><span class=\"s2\">\"127.0.0.1\"</span><span class=\"p\">,</span> <span class=\"mi\">7777</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">multiplexer</span><span class=\"p\">:</span>\n        <span class=\"n\">stream_echo_1</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">multiplexer</span><span class=\"o\">.</span><span class=\"n\">multiplex</span><span class=\"p\">(</span><span class=\"s2\">\"echo.1\"</span><span class=\"p\">)</span>\n        <span class=\"n\">stream_echo_2</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">multiplexer</span><span class=\"o\">.</span><span class=\"n\">multiplex</span><span class=\"p\">(</span><span class=\"s2\">\"echo.2\"</span><span class=\"p\">)</span>\n        <span class=\"k\">await</span> <span class=\"n\">stream_echo_1</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"sa\">b</span><span class=\"s2\">\"echo.1\"</span><span class=\"p\">)</span>\n        <span class=\"k\">await</span> <span class=\"n\">stream_echo_2</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"sa\">b</span><span class=\"s2\">\"echo.2\"</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">echo_client</span><span class=\"p\">())</span>\n</pre>\n<h3>Server</h3>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">async_multiplexer</span> <span class=\"kn\">import</span> <span class=\"n\">bind_multiplex_listener_context</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">handler</span><span class=\"p\">(</span><span class=\"n\">stream</span><span class=\"p\">):</span>\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">()</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">echo_server</span><span class=\"p\">():</span>\n    <span class=\"k\">async</span> <span class=\"k\">with</span> <span class=\"n\">bind_multiplex_listener_context</span><span class=\"p\">(</span><span class=\"s2\">\"127.0.0.1\"</span><span class=\"p\">,</span> <span class=\"mi\">7777</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">listener</span><span class=\"p\">:</span>\n        <span class=\"n\">listener</span><span class=\"o\">.</span><span class=\"n\">set_handler</span><span class=\"p\">(</span><span class=\"s2\">\"echo.1\"</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">)</span>\n        <span class=\"n\">listener</span><span class=\"o\">.</span><span class=\"n\">set_handler</span><span class=\"p\">(</span><span class=\"s2\">\"echo.2\"</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">)</span>\n        <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">echo_server</span><span class=\"p\">())</span>\n</pre>\n\n          </div>"}, "last_serial": 7167583, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "11c9167106e7f7546bfe9c95fb5012a0", "sha256": "9fa6428cd410698483f7fd7bab02304c9d657f4afd90c96bc3835a1900738ff0"}, "downloads": -1, "filename": "async_multiplexer-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "11c9167106e7f7546bfe9c95fb5012a0", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7", "size": 12562, "upload_time": "2020-04-30T01:50:05", "upload_time_iso_8601": "2020-04-30T01:50:05.319096Z", "url": "https://files.pythonhosted.org/packages/6a/42/42135e0a1c793ffa41416cedaa1b4f247976ccfcd014571f43551231ceae/async_multiplexer-0.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "672f8ab89b9265f3b46ab1e5841971a7", "sha256": "dae4abbcac369248bb29bf41bf0e4830f475f6be9ef962dcd8d36afc4ca08702"}, "downloads": -1, "filename": "async_multiplexer-0.0.1.tar.gz", "has_sig": false, "md5_digest": "672f8ab89b9265f3b46ab1e5841971a7", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 8456, "upload_time": "2020-04-30T01:50:07", "upload_time_iso_8601": "2020-04-30T01:50:07.548429Z", "url": "https://files.pythonhosted.org/packages/d4/72/8003fdaac7e2e54b62d9062ae04d0bd3d2ee9eabcae4693f0e0aa61da038/async_multiplexer-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "8b68e7695ec0c04318f734fb9f1dfe07", "sha256": "d225ab90e442e0b54adb8f7273d4a67fc4a2e39bbf8875e3058f5a323185ddce"}, "downloads": -1, "filename": "async_multiplexer-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "8b68e7695ec0c04318f734fb9f1dfe07", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7", "size": 12586, "upload_time": "2020-04-30T01:56:26", "upload_time_iso_8601": "2020-04-30T01:56:26.129426Z", "url": "https://files.pythonhosted.org/packages/16/1d/07c3ac82fcf2e8b0c5a68e59497ae5f4a43804e03e9d31b7872e4da65587/async_multiplexer-0.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1539574ce25eaabe1c39b2b51f281595", "sha256": "1fd918cede08c755bf56db1607f0c1f47c7f552043dd673419c67ddd9cc48c14"}, "downloads": -1, "filename": "async_multiplexer-0.0.2.tar.gz", "has_sig": false, "md5_digest": "1539574ce25eaabe1c39b2b51f281595", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 8497, "upload_time": "2020-04-30T01:56:27", "upload_time_iso_8601": "2020-04-30T01:56:27.456713Z", "url": "https://files.pythonhosted.org/packages/a6/54/7c1c73742da8f54c3ded3503c98e97864a862c204a698a6ac77b6e0b9a5b/async_multiplexer-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "d402202f0ce7beff834758db23319f6a", "sha256": "2969899993993637e7f65ee762b0a101c9e2c46b3e1c590506f19b75cc35a6aa"}, "downloads": -1, "filename": "async_multiplexer-0.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "d402202f0ce7beff834758db23319f6a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.8", "size": 12755, "upload_time": "2020-04-30T03:14:37", "upload_time_iso_8601": "2020-04-30T03:14:37.534434Z", "url": "https://files.pythonhosted.org/packages/a4/d0/3a9d68b4e115c2a23d6fc5085ffea998d24dedc4faea74501a34c0aa8220/async_multiplexer-0.0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "7366d94e24aa137036b1142045e8abfb", "sha256": "181d592b6e821bcd81842f9fc469223654a0475cb627585899d425bd00468831"}, "downloads": -1, "filename": "async_multiplexer-0.0.3.tar.gz", "has_sig": false, "md5_digest": "7366d94e24aa137036b1142045e8abfb", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.8", "size": 8755, "upload_time": "2020-04-30T03:14:38", "upload_time_iso_8601": "2020-04-30T03:14:38.973679Z", "url": "https://files.pythonhosted.org/packages/15/23/5ef4b8177ebad7aec789ec45f77bba99dc259b20b2a55973814a00d6384a/async_multiplexer-0.0.3.tar.gz", "yanked": false}], "0.1.0": [{"comment_text": "", "digests": {"md5": "610f02de9742893029eb562f5cc59090", "sha256": "3c26cda3f5455e89009be65ebc4c1ec980629f23d29d1ddf89e1bb1579e5b554"}, "downloads": -1, "filename": "async_multiplexer-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "610f02de9742893029eb562f5cc59090", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.8", "size": 13058, "upload_time": "2020-05-04T20:38:37", "upload_time_iso_8601": "2020-05-04T20:38:37.520518Z", "url": "https://files.pythonhosted.org/packages/bc/87/19d50ac8aab36097db7022d8453fb55d8fc7e4e0ea48ceae9cf1a12c0f90/async_multiplexer-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "345c145b33c2873e2974486845251d29", "sha256": "32a642790b5ea46830cb174019c9784c7e3e6005fcf461a4f5d68b1f0c7d5562"}, "downloads": -1, "filename": "async_multiplexer-0.1.0.tar.gz", "has_sig": false, "md5_digest": "345c145b33c2873e2974486845251d29", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.8", "size": 9114, "upload_time": "2020-05-04T20:38:38", "upload_time_iso_8601": "2020-05-04T20:38:38.411157Z", "url": "https://files.pythonhosted.org/packages/09/4e/e7c42803dee68e62cd3030fea20a3184459044326554d7434b97c0e318f5/async_multiplexer-0.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "610f02de9742893029eb562f5cc59090", "sha256": "3c26cda3f5455e89009be65ebc4c1ec980629f23d29d1ddf89e1bb1579e5b554"}, "downloads": -1, "filename": "async_multiplexer-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "610f02de9742893029eb562f5cc59090", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.8", "size": 13058, "upload_time": "2020-05-04T20:38:37", "upload_time_iso_8601": "2020-05-04T20:38:37.520518Z", "url": "https://files.pythonhosted.org/packages/bc/87/19d50ac8aab36097db7022d8453fb55d8fc7e4e0ea48ceae9cf1a12c0f90/async_multiplexer-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "345c145b33c2873e2974486845251d29", "sha256": "32a642790b5ea46830cb174019c9784c7e3e6005fcf461a4f5d68b1f0c7d5562"}, "downloads": -1, "filename": "async_multiplexer-0.1.0.tar.gz", "has_sig": false, "md5_digest": "345c145b33c2873e2974486845251d29", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.8", "size": 9114, "upload_time": "2020-05-04T20:38:38", "upload_time_iso_8601": "2020-05-04T20:38:38.411157Z", "url": "https://files.pythonhosted.org/packages/09/4e/e7c42803dee68e62cd3030fea20a3184459044326554d7434b97c0e318f5/async_multiplexer-0.1.0.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:16:42 2020"}