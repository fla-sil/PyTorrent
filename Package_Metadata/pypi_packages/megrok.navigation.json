{"info": {"author": "Jeroen Michiel", "author_email": "jmichiel@yahoo.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Environment :: Web Environment", "Framework :: Zope3", "Intended Audience :: Other Audience", "License :: OSI Approved :: GNU General Public License (GPL)", "Operating System :: OS Independent", "Programming Language :: Python"], "description": ".. contents::\n\n=================\nmegrok.navigation\n=================\n\nMegrok.navigation lets you easily add all sorts of menus to a site.\nMenus are implemented as viewletmanagers, and items as viewlets.\nYou can also override the default templates by registering your own IPageTemplate \n\nLet's first setup a simple site\n\n    >>> import grok\n    >>> class MySite(grok.Container, grok.Application):\n    ...     pass\n    >>> grok_component('mysite', MySite)\n    True\n\n    >>> root = getRootFolder()\n    >>> root['site'] = site = MySite()\n    \nLet us now define a menu\nWe'll first define an Interface, so that later on we won't need to redefine some menus after we redefined \nthe Navigation menu, so this is not necessary to do, although it can lessen dependencies.\n\n    >>> from megrok import navigation\n    >>> class INavigation(navigation.interfaces.IMenu):\n    ...     pass\n    >>> class Navigation(navigation.Menu):\n    ...     grok.name('navigation')\n    ...     grok.implements(INavigation)\n    >>> grok_component('nav', Navigation)\n    True\n    \nMenus are implemented as viewletmanagers\n\n    >>> from zope.viewlet.interfaces import IViewletManager\n    >>> IViewletManager.implementedBy(Navigation)\n    True\n    \nRendering the menu now leaves us with an empty <ul>\n\n    >>> from zope.security.testing import Principal, Participation\n    >>> from zope.security.management import newInteraction, endInteraction\n    >>> participation = Participation(Principal('zope.anybody'))\n    >>> from zope.publisher.browser import TestRequest\n    >>> request = TestRequest()\n    >>> newInteraction(participation)\n    >>> nav = Navigation(site, request, grok.View(site, request))\n    >>> nav.update()\n    >>> len(nav.viewlets)\n    0\n\nWe can also get the Menu with the help of the Component Architecture::\n\n    >>> from zope.component import getMultiAdapter\n    >>> from zope.viewlet.interfaces import IContentProvider\n    >>> component_nav = getMultiAdapter((site, request, grok.View(site, request)), \n    ...     IContentProvider, name=\"navigation\")\n    >>> component_nav\n    <megrok.navigation.tests.Navigation object at 0...>\n\n    >>> print nav.render()\n    <div class=\"\">\n    </div>\n    \n    \nGlobal Menu Items\n-----------------\n\nGlobal Menu Items are links to fixed urls, typically links to other sites.\nYou define them on the menu you want them to be rendered:\n\n    >>> class Navigation(navigation.Menu):\n    ...     grok.name('navigation')\n    ...     grok.implements(INavigation)\n    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!')\n    >>> grok_component('nav', Navigation)\n    True\n\nLet's see what that gives us now:\n\n    >>> nav = Navigation(site, request, grok.View(site, request))\n    >>> nav.update()\n    >>> len(nav.viewlets)\n    1\n    \n    >>> print nav.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://grok.zope.org\">Grok!</a>\n    <BLANKLINE>\n    </li>    \n    </ul>\n    </div>\n\nYou can set the css classes with the cssClass and cssItemClass attributes:\n\n    >>> class Navigation(navigation.Menu):\n    ...     grok.name('navigation')\n    ...     grok.implements(INavigation)\n    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!')\n    ...     cssClass='menu'\n    ...     cssItemClass='menu-item'\n    >>> grok_component('nav', Navigation)\n    True\n    >>> nav = Navigation(site, request, grok.View(site, request))\n    >>> nav.update()\n    >>> print nav.render()\n    <div class=\"menu\">\n    <ul>\n    <li class=\"menu-item\">\n    <a href=\"http://grok.zope.org\">Grok!</a>\n    <BLANKLINE>\n    </li>    \n    </ul>\n    </div>\n\n\nSite Menu Items\n-----------------\n\nSite menu items have links to views of the site itself, \nand are meant to be displayed for each view the menu is rendered in.\nA good example is a 'Home' link to your site root.\nSite Menu items are defined on the view that is to be linked to\nI want to be sure that my Home link is the first.\n\n    >>> class Index(grok.View):\n    ...     grok.context(MySite)\n    ...     navigation.sitemenuitem(INavigation, 'Home', order=-1)\n    ...     def render(self):\n    ...         return 'test'\n    >>> grok_component('index', Index)\n    True\n\nLet's see what that gives us now:\n\n    >>> nav = Navigation(site, request, grok.View(site, request))\n    >>> nav.update()\n    \n    >>> print nav.render()\n    <div class=\"menu\">\n    <ul>\n    <li class=\"menu-item\">\n    <a href=\"http://127.0.0.1/site/index\">Home</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"menu-item\">\n    <a href=\"http://grok.zope.org\">Grok!</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n\nContextual Menu Items\n---------------------\n\nContext menus are meant to be used to show everything you can do (all views) with the current context.\nIn fact all menus are context-sensitive, as a viewletmanager will only display viewlets that are appropriate for\ntheir current context. A Menu Item defined with the menuitem directive will inherit its context\nfrom the view it is defined for. \nContext menus are not implemented as IBrowserMenus, but implement the same use case.\nWe'll first need some context to demonstrate\n\n    >>> from zope.interface import Interface\n    >>> class IFoo(Interface):\n    ...     pass\n    >>> class Foo(grok.Model):\n    ...     grok.implements(IFoo)\n    >>> site['foo'] = foo = Foo()\n    >>> site['foo2'] = Foo()\n\nWe'll define a new menu as Context Menu to attach the views to\n\n    >>> class IActions(navigation.interfaces.IMenu):\n    ...     pass\n    >>> class Actions(navigation.Menu):\n    ...     grok.implements(IActions)\n    ...     grok.name('actions')\n    >>> grok_component('actions', Actions)\n    True\n    \nNow let's define some views and attach them to the menu\n\n    >>> class FooIndex(grok.View):\n    ...     grok.context(IFoo)\n    ...     navigation.menuitem(IActions, 'Details', order=0)\n    ...     def render(self):\n    ...         return 'test'\n    >>> grok_component('fooindex', FooIndex)\n    True\n\n    >>> class FooEdit(grok.View):\n    ...     grok.context(IFoo)\n    ...     grok.title('Edit')\n    ...     navigation.menuitem(IActions, order=1)\n    ...     def render(self):\n    ...         return 'test'\n    >>> grok_component('fooedit', FooEdit)\n    True\n    \nLet's render it on the site:\n\n    >>> actions = Actions(site, request, grok.View(site, request))\n    >>> actions.update()\n    >>> actions.items\n    []\n    \n    >>> print actions.render()\n    <div class=\"\">\n    </div>\n\nSince the context was the site, there were no menu items.\nLet's draw it on a IFoo object:\n\n    >>> actions = Actions(foo, request, grok.View(foo, request))\n    >>> actions.update()\n    >>> len(actions.items)\n    2\n    \n    >>> print actions.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooindex\">Details</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooedit\">Edit</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n    \nNote that if you don't specify a title in the menuitem directive, it will use the name\nspecified with the title directive, if available. Otherwise the view name is used.\n\nOf course, you would now like to have the Actions menu be a part of our global navigation menu.\nNo problem: either use the submenu directive on the main menu:\n\n    >>> class Navigation(navigation.Menu):\n    ...     grok.name('navigation')\n    ...     grok.implements(INavigation)\n    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!', order=10)\n    ...     navigation.submenu('actions', 'Actions', order=2)\n    >>> grok_component('nav', Navigation)\n    True\n \n    >>> nav = Navigation(foo, request, grok.View(site, request))\n    >>> nav.update()\n    >>> print nav.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/index\">Home</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a>Actions</a>\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooindex\">Details</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooedit\">Edit</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n    </li>\n    <li class=\"\">\n    <a href=\"http://grok.zope.org\">Grok!</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n\nOr use the parentmenu directive on the submenu:\n\nFirst reinstate the old Navigation menu definition and the home link\n\n    >>> class Navigation(navigation.Menu):\n    ...     grok.name('navigation')\n    ...     grok.implements(INavigation)\n    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!', order=10)\n    >>> grok_component('nav', Navigation)\n    True\n\nNow redefine the Actions menu\n\n    >>> class Actions(navigation.Menu):\n    ...     grok.implements(IActions)\n    ...     grok.name('actions')\n    ...     grok.title('Actions')\n    ...     navigation.parentmenu(INavigation)\n    >>> grok_component('actions', Actions)\n    True\n \n    >>> nav = Navigation(foo, request, grok.View(site, request))\n    >>> nav.update()\n    >>> print nav.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/index\">Home</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a>Actions</a>\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooindex\">Details</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooedit\">Edit</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n    </li>\n    <li class=\"\">\n    <a href=\"http://grok.zope.org\">Grok!</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n\nNow let's throw in permissions\n\n    >>> class FooProtected(grok.View):\n    ...     grok.context(IFoo)\n    ...     grok.title('Manage')\n    ...     grok.require('zope.ManageContent')\n    ...     navigation.menuitem(IActions, order=2)\n    ...     def render(self):\n    ...         return 'test'\n    >>> grok_component('fooprotected', FooProtected)\n    True\n\nWe shouldn't see that view\n\n    >>> actions.update()\n    >>> print actions.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooindex\">Details</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooedit\">Edit</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n\nNow use a more powerful user:\n\n    >>> from zope.security.testing import Principal, Participation\n    >>> from zope.security.management import newInteraction, endInteraction\n    >>> endInteraction()\n    >>> participation = Participation(Principal('zope.user'))\n    >>> newInteraction(participation)\n    >>> actions.update()\n    >>> print actions.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooindex\">Details</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooedit\">Edit</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooprotected\">Manage</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n\nYou can link a view to multiple menus by repeating the menuitem directive\n\n    >>> class FooAdd(grok.View):\n    ...     grok.context(MySite)\n    ...     navigation.menuitem(Actions, 'Add a Foo', order=3)\n    ...     navigation.menuitem(Navigation, 'Add a Foo', order=5)\n    ...     def render(self):\n    ...         return 'test'\n    >>> grok_component('fooadd', FooAdd)\n    True\n\n    >>> nav = Navigation(site, request, grok.View(site, request))\n    >>> nav.update()\n    >>> print nav.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/index\">Home</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a>Actions</a>\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/fooadd\">Add a Foo</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/fooadd\">Add a Foo</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://grok.zope.org\">Grok!</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n\n\nContent Menus\n-------------\n\nNow the icing on the cake: content menus!\nContent Menus are meant to be used if you want direct links to some of your content from your menu.\nA good example is a 'Products' menu that links directly to all products you offer on your site\nLet's define and add some content:\n\n    >>> from zope.schema import TextLine\n    >>> class IProduct(Interface):\n    ...     name = TextLine()\n    >>> class Product(grok.Container):\n    ...     grok.implements(IProduct)\n    ...     def __init__(self, name):\n    ...         super(Product, self).__init__()\n    ...         self.name=name\n    \n    >>> site['coffeemachine']=Product('Coffee Machine')\n    >>> site['terminator']=Product('Terminator')\n\nNow the content menu. The content menu doesn't know where to get the content, so you need to override the\ngetContent() method. If you don't you'll get a NotImplementedError:\n    \n    >>> class ProductMenu(navigation.ContentMenu):\n    ...     grok.name('products')    \n    >>> grok_component('productmenu', ProductMenu)\n    True\n    >>> pm = ProductMenu(foo, request, FooIndex(foo, request))\n    >>> pm.update()\n    Traceback (most recent call last):\n    NotImplementedError: Subclasses of ContentMenu must override getContent()\n\nSo let's define the getContent() method, and also a getTitle() method to return \nsomething else than the __name__ attribute. You can override the view to be rendered\nwith the viewName attribute, which defaults to 'index'\nThere is also a getURL() method that you can override to create a link yourself.\n\n    >>> class ProductMenu(navigation.ContentMenu):\n    ...     grok.name('products')\n    ...     def getContent(self):\n    ...         return [x for x in site.values() if IProduct.providedBy(x)]    \n    ...     def getTitle(self, obj):\n    ...         return obj.name    \n    >>> grok_component('productmenu', ProductMenu)\n    True\n    >>> pm = ProductMenu(foo, request, FooIndex(foo, request))\n    >>> pm.update()\n    >>> print pm.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/coffeemachine/index\">Coffee Machine</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/index\">Terminator</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n    \nWhat just happened here? The items of the menu were rendered as Context Menu Items, \nwith the context not the current view context, but the item to be rendered.\nWhy this is done like that will become clear when content submenus are thrown into the mix.\nLet's define Series and Models for our Products:\n\n    >>> class ISeries(Interface):\n    ...     name = TextLine()\n    >>> class Series(grok.Container):\n    ...     grok.implements(ISeries)\n    ...     def __init__(self, name):\n    ...         super(Series, self).__init__()\n    ...         self.name=name\n    >>> class IModel(Interface):\n    ...     name = TextLine()\n    >>> class Model(grok.Container):\n    ...     grok.implements(IModel)\n    ...     def __init__(self, name):\n    ...         super(Model, self).__init__()\n    ...         self.name=name\n    >>> site['terminator']['800']=Series('T-800')\n    >>> site['terminator']['1000']=Series('T-1000')\n    >>> site['terminator']['X']=Series('T-X')\n    >>> site['terminator']['800']['101']=Model('101')\n\nNow we need the corresponding submenus:\nThe ContentSubMenu class is just a ContentMenu with a default getContent method returning self.context.values()\n\n    >>> class SeriesMenu(navigation.ContentSubMenu):\n    ...     navigation.contentsubmenu('model-menu')\n    ...     grok.name('series-menu')\n    ...     def getTitle(self, obj):\n    ...         return obj.name    \n    >>> grok_component('seriesmenu', SeriesMenu)\n    True\n    >>> class ModelMenu(navigation.ContentSubMenu):\n    ...     grok.name('model-menu')\n    ...     def getTitle(self, obj):\n    ...         return obj.name    \n    >>> grok_component('modelmenu', ModelMenu)\n    True\n\nNow we need to link them to the product menu:\n\n    >>> class ProductMenu(navigation.ContentMenu):\n    ...     navigation.contentsubmenu('series-menu')\n    ...     grok.name('products')\n    ...     def getContent(self):\n    ...         return [x for x in site.values() if IProduct.providedBy(x)]    \n    ...     def getTitle(self, obj):\n    ...         return obj.name    \n    >>> grok_component('productmenu', ProductMenu)\n    True\n\nLet's render\n\n    >>> pm = ProductMenu(site, request, grok.View(site, request))\n    >>> pm.update()\n    >>> print pm.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/coffeemachine/index\">Coffee Machine</a>\n    <div class=\"\">\n    <ul>\n    <BLANKLINE>\n    </ul>\n    </div>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/index\">Terminator</a>\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/1000/index\">T-1000</a>\n    <div class=\"\">\n    <ul>\n    <BLANKLINE>\n    </ul>\n    </div>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/800/index\">T-800</a>\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/800/101/index\">101</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/X/index\">T-X</a>\n    <div class=\"\">\n    <ul>\n    <BLANKLINE>\n    </ul>\n    </div>\n    </li>\n    </ul>\n    </div>\n    </li>\n    </ul>\n    </div>\n        \nOr we could have done it like this:\n\n    >>> class ProductMenu(navigation.ContentMenu):\n    ...     grok.name('products')\n    ...     def getContent(self):\n    ...         return [x for x in site.values() if IProduct.providedBy(x)]    \n    ...     def getTitle(self, obj):\n    ...         return obj.name    \n    >>> grok_component('productmenu', ProductMenu)\n    True\n    >>> class SeriesMenu(navigation.ContentSubMenu):\n    ...     navigation.parentmenu(ProductMenu)\n    ...     grok.name('series-menu')\n    ...     def getTitle(self, obj):\n    ...         return obj.name    \n    >>> grok_component('seriesmenu', SeriesMenu)\n    True\n    >>> class ModelMenu(navigation.ContentSubMenu):\n    ...     navigation.parentmenu(SeriesMenu)\n    ...     grok.name('model-menu')\n    ...     def getTitle(self, obj):\n    ...         return obj.name    \n    >>> grok_component('modelmenu', ModelMenu)\n    True\n\nLet's render\n\n    >>> pm = ProductMenu(site, request, grok.View(site, request))\n    >>> pm.update()\n    >>> print pm.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/coffeemachine/index\">Coffee Machine</a>\n    <div class=\"\">\n    <ul>\n    <BLANKLINE>\n    </ul>\n    </div>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/index\">Terminator</a>\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/1000/index\">T-1000</a>\n    <div class=\"\">\n    <ul>\n    <BLANKLINE>\n    </ul>\n    </div>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/800/index\">T-800</a>\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/800/101/index\">101</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/terminator/X/index\">T-X</a>\n    <div class=\"\">\n    <ul>\n    <BLANKLINE>\n    </ul>\n    </div>\n    </li>\n    </ul>\n    </div>\n    </li>\n    </ul>\n    </div>\n\n\nGroups\n------\n\nMenu Items can be categorized into groups by adding a group parameter to all menuitem, submenu and the patentmenu \ndirectives:\n\n    >>> class IGroupedMenu(navigation.interfaces.IMenu):\n    ...     pass\n    >>> class GroupedMenu(navigation.Menu):\n    ...     grok.implements(IGroupedMenu)\n    >>> grok_component('GroupedMenu', GroupedMenu)\n    True\n    >>> class Index(grok.View):\n    ...     grok.context(MySite)\n    ...     navigation.sitemenuitem(IGroupedMenu, 'Home', order=1, group='Group 1')\n    ...     def render(self):\n    ...         return 'test'\n    >>> grok_component('Index', Index)\n    True\n    >>> class View2(grok.View):\n    ...     grok.context(MySite)\n    ...     navigation.sitemenuitem(IGroupedMenu, 'View 2', order=0, group='Group 2')\n    ...     def render(self):\n    ...         return 'test'\n    >>> grok_component('View2', View2)\n    True\n    >>> class View3(grok.View):\n    ...     grok.context(MySite)\n    ...     navigation.sitemenuitem(IGroupedMenu, 'View 3', order=2, group='Group 1')\n    ...     def render(self):\n    ...         return 'test'\n    >>> grok_component('View3', View3)\n    True\n\nThe default templates render a separate <ul> for each group:\n\n    >>> gm = GroupedMenu(site, request, grok.View(site, request))\n    >>> gm.update()\n    >>> print gm.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/view2\">View 2</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/index\">Home</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/view3\">View 3</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n    \nYou can change the order of the groups by setting the grouporder attribute on the Menu class:\n\n    >>> class GroupedMenu(navigation.Menu):\n    ...     grok.implements(IGroupedMenu)\n    ...     grouporder=['Group 1', 'Group 2']\n    >>> grok_component('GroupedMenu', GroupedMenu)\n    True\n    >>> gm = GroupedMenu(site, request, grok.View(site, request))\n    >>> gm.update()\n    >>> print gm.render()\n    <div class=\"\">\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/index\">Home</a>\n    <BLANKLINE>\n    </li>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/view3\">View 3</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    <ul>\n    <li class=\"\">\n    <a href=\"http://127.0.0.1/site/view2\">View 2</a>\n    <BLANKLINE>\n    </li>\n    </ul>\n    </div>\n\n        \nPage Templates\n--------------\n\nmegrok.navigation uses zope.pagetemplate (or megrok.pagetemplate) to allow you to override the default templates.\nLet's define a template based on divs, instead of ul\n\n    >>> mt = \"\"\"<div tal:attributes='class menu/cssClass'>\n    ... <div tal:repeat='group menu/groups'>\n    ...      <tal:repeat tal:repeat=\"item group/items\"\n    ...                  tal:replace='structure item/render' />\n    ... </div>\n    ... </div>\"\"\"\n    >>> from megrok import pagetemplate\n    >>> class DivMenu(pagetemplate.PageTemplate):\n    ...     template = grok.PageTemplate(mt)\n    ...     pagetemplate.view(navigation.interfaces.IMenu)\n    >>> grok_component('divmenu', DivMenu)\n    True\n\n    >>> it = \"\"\"<div tal:attributes='class menu/cssItemClass'>\n    ... <a tal:attributes=\"href item/link; \n    ...                    title viewlet/description|nothing\">\n    ... <img tal:condition=\"item/icon | nothing\" \n    ...      tal:attributes=\"src item/icon\"/>\n    ... <span tal:replace=\"item/title\"/></a>\n    ... <tal:replace tal:condition=\"item/submenu | nothing\" \n    ...              tal:replace=\"structure provider:${item/submenu}\"/>\n    ... </div>\"\"\"\n    >>> class DivMenuItem(pagetemplate.PageTemplate):\n    ...     template = grok.PageTemplate(it)\n    ...     pagetemplate.view(navigation.interfaces.IMenuItem)\n    >>> grok_component('divmenuitem', DivMenuItem)\n    True\n\n    >>> print actions.render()\n    <div class=\"\">\n    <div>\n    <div class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooindex\">\n    <BLANKLINE>\n    Details</a>\n    <BLANKLINE>\n    </div>\n    <div class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooedit\">\n    <BLANKLINE>\n    Edit</a>\n    <BLANKLINE>\n    </div>\n    <div class=\"\">\n    <a href=\"http://127.0.0.1/site/foo/fooprotected\">\n    <BLANKLINE>\n    Manage</a>\n    <BLANKLINE>\n    </div>\n    </div>\n    </div>\n    \n    \nBut what if you want 2 different templates for items to be used in different menus? You never specify any Items\nyourself, so you can't tell them to implement a different interface and register the template to that interface.\nTo allow this, the itemsimplement directive was introduced.\n\n    >>> class IIconItem(navigation.interfaces.IMenuItem):\n    ...     pass\n    >>> class IconMenu(navigation.Menu):\n    ...     grok.name('icons')\n    ...     navigation.itemsimplement(IIconItem)\n    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!',\n    ...                               icon='icon.jpg')\n    >>> grok_component('nav', IconMenu)\n    True\n  \n    >>> it = \"\"\"<img tal:condition=\"item/icon | nothing\" \n    ...      tal:attributes=\"src item/icon\"/>\"\"\"\n    >>> class IconMenuItem(pagetemplate.PageTemplate):\n    ...     template = grok.PageTemplate(it)\n    ...     pagetemplate.view(IIconItem)\n    >>> grok_component('iconmenuitem', IconMenuItem)\n    True\n    >>> icons = IconMenu(site, request, grok.View(site, request))\n    >>> icons.update()\n    >>> print icons.render()\n    <div class=\"\">\n    <div>\n    <img src=\"icon.jpg\" />\n    </div>\n    </div>\n\n\nRegister plain viewlets and *.items together.\n\n\n    >>> from zope.publisher.interfaces.browser import IDefaultBrowserLayer\n    >>> class IGlobalMenu(navigation.interfaces.IMenu):\n    ...     pass\n\n    >>> class GlobalMenu(navigation.Menu):\n    ...     grok.name('globalmenu')\n    ...     grok.implements(IGlobalMenu)\n    >>> grok_component('globalmenu', GlobalMenu)\n    True\n\n    >>> class Contact(grok.View):\n    ...     grok.context(MySite)\n    ...     grok.layer(IDefaultBrowserLayer)\n    ...     navigation.menuitem(IGlobalMenu)\n    ...     def render(self):\n    ...         return \"test\"\n    >>> grok_component('contact', Contact)\n    True\n\n    >>> class Logout(grok.Viewlet):\n    ...     grok.viewletmanager(IGlobalMenu)\n    ...     grok.context(MySite)\n    ...     grok.layer(IDefaultBrowserLayer)\n    ...     def render(self):\n    ...         return \"logout\"   \n    >>> grok_component('logout', Logout)\n    True\n \n    >>> globalmenu = getMultiAdapter((site, request, grok.View(site, request)), \n    ...     IContentProvider, name=\"globalmenu\")\n\n    >>> globalmenu.update()\n    >>> logout, contact = globalmenu.viewlets\n\n    >>> logout\n    <megrok.navigation.tests.Logout object at ...>\n\n    >>> contact\n    <megrok.navigation.util.MySite_contact object at ...>\n\n    >>> grok.layer.bind().get(logout)\n    <InterfaceClass zope.publisher.interfaces.browser.IDefaultBrowserLayer>\n\n    >>> grok.layer.bind().get(contact)\n    <InterfaceClass zope.publisher.interfaces.browser.IDefaultBrowserLayer>\n\n    >>> print globalmenu.render()\n    <div class=\"\">\n    <div>\n         logout\n         <div class=\"\">\n    <a href=\"http://127.0.0.1/site/contact\">\n    contact</a>\n    </div>\n    </div>\n    </div>\n\n\nLet's see if we can get the individual viewlets based on their name via\nthe Zope-Component Architecture\n\n    >>> from zope.viewlet.interfaces import IViewlet\n    >>> contact = getMultiAdapter(\n    ...     (site, request, grok.View(site, request), globalmenu),\n    ...     IViewlet, name=u\"MySite_contact\")\n    >>> contact\n    <megrok.navigation.util.MySite_contact object at ...>\n\n\n    >>> class Contact(grok.View):\n    ...     grok.context(MySite)\n    ...     grok.name('othercontact')\n    ...     grok.title('Other Link')\n    ...     grok.layer(IDefaultBrowserLayer)\n    ...     navigation.menuitem(IGlobalMenu)\n    ...     def render(self):\n    ...         return \"test\"\n    >>> grok_component('contact', Contact)\n    True\n\n    >>> contact1 = getMultiAdapter(\n    ...     (site, request, grok.View(site, request), globalmenu),\n    ...     IViewlet, name=u\"MySite_othercontact\")\n\n    >>> contact1\n    <megrok.navigation.util.MySite_othercontact object at ...>\n\n\n\n=======\nHistory\n=======\n\n0.6.2 (2012-03-20)\n------------------\n\n- fix for itemsimplement on submenus: use the parents itemsimplement in the submenus main menuitem\n\n0.6.1 (2010-06-28)\n------------------\n\n- fix if icon is a callable\n\n0.6 (2010-05-09)\n----------------\n\n- update to make icon display compatible with zope.fanstatic\n  icon paths are now traversed instead of literally used\n\n0.5 (2010-05-09)\n----------------\n\n- use current grok version 1.1rc1.cfg\n- now it's possible to register plain viewlets with the directive\n  grok.viewletmanager to IMenu Items.\n- added the layer directive (if setted) to IMenuItems\n- register the components now with the default_view_name of the factory\n  instead of the autogenerated name. This allows us to override simple\n  MenuItems with the help of the ZCA.\n\n\n0.4 (2010-03-26)\n----------------\n\nImplemented groups:\n- contentgroup directive\n- grouporder attribute\n\n0.3 (2010-03-26)\n----------------\n\n- separate directives in directives submodule\n- getURL method for ContentMenus\n- itemsimplement directive\n- parenmenu directive\n- 'menu' and 'item' template namespace entries\n- 'menu' attribute for MenuItem which refers to the viewletmanager \n- 'items' attribute for Menu which refers to the viewlets\n- removed submenu/subMenu inconsistency (may break overriden templates!)\n- contentorder directive\n\n0.2.2 (2010-03-09)\n------------------\n\n- Fix getSite import issue\n\n0.2.1 (2010-02-22)\n------------------\n\n- Fix issue with requiring zope.site to make it work on Grok 1.0\n\n0.2 (2010-02-03)\n----------------\n\n- Allow views to be registered to multiple menus\n- Scrap ContextMenu class as it's nothing more than a regular Menu anyway\n\n0.1 (2010-01-29)\n----------------\n\n- Initial Release", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://www.python.org/pypi/megrok.navigation", "keywords": null, "license": "UNKNOWN", "maintainer": null, "maintainer_email": null, "name": "megrok.navigation", "package_url": "https://pypi.org/project/megrok.navigation/", "platform": "Any", "project_url": "https://pypi.org/project/megrok.navigation/", "project_urls": {"Download": "UNKNOWN", "Homepage": "http://www.python.org/pypi/megrok.navigation"}, "release_url": "https://pypi.org/project/megrok.navigation/0.6.2/", "requires_dist": null, "requires_python": null, "summary": "Navigation Menus for Grok", "version": "0.6.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            .. contents::<br><br>=================<br>megrok.navigation<br>=================<br><br>Megrok.navigation lets you easily add all sorts of menus to a site.<br>Menus are implemented as viewletmanagers, and items as viewlets.<br>You can also override the default templates by registering your own IPageTemplate <br><br>Let's first setup a simple site<br><br>    &gt;&gt;&gt; import grok<br>    &gt;&gt;&gt; class MySite(grok.Container, grok.Application):<br>    ...     pass<br>    &gt;&gt;&gt; grok_component('mysite', MySite)<br>    True<br><br>    &gt;&gt;&gt; root = getRootFolder()<br>    &gt;&gt;&gt; root['site'] = site = MySite()<br>    <br>Let us now define a menu<br>We'll first define an Interface, so that later on we won't need to redefine some menus after we redefined <br>the Navigation menu, so this is not necessary to do, although it can lessen dependencies.<br><br>    &gt;&gt;&gt; from megrok import navigation<br>    &gt;&gt;&gt; class INavigation(navigation.interfaces.IMenu):<br>    ...     pass<br>    &gt;&gt;&gt; class Navigation(navigation.Menu):<br>    ...     grok.name('navigation')<br>    ...     grok.implements(INavigation)<br>    &gt;&gt;&gt; grok_component('nav', Navigation)<br>    True<br>    <br>Menus are implemented as viewletmanagers<br><br>    &gt;&gt;&gt; from zope.viewlet.interfaces import IViewletManager<br>    &gt;&gt;&gt; IViewletManager.implementedBy(Navigation)<br>    True<br>    <br>Rendering the menu now leaves us with an empty &lt;ul&gt;<br><br>    &gt;&gt;&gt; from zope.security.testing import Principal, Participation<br>    &gt;&gt;&gt; from zope.security.management import newInteraction, endInteraction<br>    &gt;&gt;&gt; participation = Participation(Principal('zope.anybody'))<br>    &gt;&gt;&gt; from zope.publisher.browser import TestRequest<br>    &gt;&gt;&gt; request = TestRequest()<br>    &gt;&gt;&gt; newInteraction(participation)<br>    &gt;&gt;&gt; nav = Navigation(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; nav.update()<br>    &gt;&gt;&gt; len(nav.viewlets)<br>    0<br><br>We can also get the Menu with the help of the Component Architecture::<br><br>    &gt;&gt;&gt; from zope.component import getMultiAdapter<br>    &gt;&gt;&gt; from zope.viewlet.interfaces import IContentProvider<br>    &gt;&gt;&gt; component_nav = getMultiAdapter((site, request, grok.View(site, request)), <br>    ...     IContentProvider, name=\"navigation\")<br>    &gt;&gt;&gt; component_nav<br>    &lt;megrok.navigation.tests.Navigation object at 0...&gt;<br><br>    &gt;&gt;&gt; print nav.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;/div&gt;<br>    <br>    <br>Global Menu Items<br>-----------------<br><br>Global Menu Items are links to fixed urls, typically links to other sites.<br>You define them on the menu you want them to be rendered:<br><br>    &gt;&gt;&gt; class Navigation(navigation.Menu):<br>    ...     grok.name('navigation')<br>    ...     grok.implements(INavigation)<br>    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!')<br>    &gt;&gt;&gt; grok_component('nav', Navigation)<br>    True<br><br>Let's see what that gives us now:<br><br>    &gt;&gt;&gt; nav = Navigation(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; nav.update()<br>    &gt;&gt;&gt; len(nav.viewlets)<br>    1<br>    <br>    &gt;&gt;&gt; print nav.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://grok.zope.org\"&gt;Grok!&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;    <br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br>You can set the css classes with the cssClass and cssItemClass attributes:<br><br>    &gt;&gt;&gt; class Navigation(navigation.Menu):<br>    ...     grok.name('navigation')<br>    ...     grok.implements(INavigation)<br>    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!')<br>    ...     cssClass='menu'<br>    ...     cssItemClass='menu-item'<br>    &gt;&gt;&gt; grok_component('nav', Navigation)<br>    True<br>    &gt;&gt;&gt; nav = Navigation(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; nav.update()<br>    &gt;&gt;&gt; print nav.render()<br>    &lt;div class=\"menu\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"menu-item\"&gt;<br>    &lt;a href=\"http://grok.zope.org\"&gt;Grok!&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;    <br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br><br>Site Menu Items<br>-----------------<br><br>Site menu items have links to views of the site itself, <br>and are meant to be displayed for each view the menu is rendered in.<br>A good example is a 'Home' link to your site root.<br>Site Menu items are defined on the view that is to be linked to<br>I want to be sure that my Home link is the first.<br><br>    &gt;&gt;&gt; class Index(grok.View):<br>    ...     grok.context(MySite)<br>    ...     navigation.sitemenuitem(INavigation, 'Home', order=-1)<br>    ...     def render(self):<br>    ...         return 'test'<br>    &gt;&gt;&gt; grok_component('index', Index)<br>    True<br><br>Let's see what that gives us now:<br><br>    &gt;&gt;&gt; nav = Navigation(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; nav.update()<br>    <br>    &gt;&gt;&gt; print nav.render()<br>    &lt;div class=\"menu\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"menu-item\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/index\"&gt;Home&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"menu-item\"&gt;<br>    &lt;a href=\"http://grok.zope.org\"&gt;Grok!&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br>Contextual Menu Items<br>---------------------<br><br>Context menus are meant to be used to show everything you can do (all views) with the current context.<br>In fact all menus are context-sensitive, as a viewletmanager will only display viewlets that are appropriate for<br>their current context. A Menu Item defined with the menuitem directive will inherit its context<br>from the view it is defined for. <br>Context menus are not implemented as IBrowserMenus, but implement the same use case.<br>We'll first need some context to demonstrate<br><br>    &gt;&gt;&gt; from zope.interface import Interface<br>    &gt;&gt;&gt; class IFoo(Interface):<br>    ...     pass<br>    &gt;&gt;&gt; class Foo(grok.Model):<br>    ...     grok.implements(IFoo)<br>    &gt;&gt;&gt; site['foo'] = foo = Foo()<br>    &gt;&gt;&gt; site['foo2'] = Foo()<br><br>We'll define a new menu as Context Menu to attach the views to<br><br>    &gt;&gt;&gt; class IActions(navigation.interfaces.IMenu):<br>    ...     pass<br>    &gt;&gt;&gt; class Actions(navigation.Menu):<br>    ...     grok.implements(IActions)<br>    ...     grok.name('actions')<br>    &gt;&gt;&gt; grok_component('actions', Actions)<br>    True<br>    <br>Now let's define some views and attach them to the menu<br><br>    &gt;&gt;&gt; class FooIndex(grok.View):<br>    ...     grok.context(IFoo)<br>    ...     navigation.menuitem(IActions, 'Details', order=0)<br>    ...     def render(self):<br>    ...         return 'test'<br>    &gt;&gt;&gt; grok_component('fooindex', FooIndex)<br>    True<br><br>    &gt;&gt;&gt; class FooEdit(grok.View):<br>    ...     grok.context(IFoo)<br>    ...     grok.title('Edit')<br>    ...     navigation.menuitem(IActions, order=1)<br>    ...     def render(self):<br>    ...         return 'test'<br>    &gt;&gt;&gt; grok_component('fooedit', FooEdit)<br>    True<br>    <br>Let's render it on the site:<br><br>    &gt;&gt;&gt; actions = Actions(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; actions.update()<br>    &gt;&gt;&gt; actions.items<br>    []<br>    <br>    &gt;&gt;&gt; print actions.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;/div&gt;<br><br>Since the context was the site, there were no menu items.<br>Let's draw it on a IFoo object:<br><br>    &gt;&gt;&gt; actions = Actions(foo, request, grok.View(foo, request))<br>    &gt;&gt;&gt; actions.update()<br>    &gt;&gt;&gt; len(actions.items)<br>    2<br>    <br>    &gt;&gt;&gt; print actions.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooindex\"&gt;Details&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooedit\"&gt;Edit&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    <br>Note that if you don't specify a title in the menuitem directive, it will use the name<br>specified with the title directive, if available. Otherwise the view name is used.<br><br>Of course, you would now like to have the Actions menu be a part of our global navigation menu.<br>No problem: either use the submenu directive on the main menu:<br><br>    &gt;&gt;&gt; class Navigation(navigation.Menu):<br>    ...     grok.name('navigation')<br>    ...     grok.implements(INavigation)<br>    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!', order=10)<br>    ...     navigation.submenu('actions', 'Actions', order=2)<br>    &gt;&gt;&gt; grok_component('nav', Navigation)<br>    True<br> <br>    &gt;&gt;&gt; nav = Navigation(foo, request, grok.View(site, request))<br>    &gt;&gt;&gt; nav.update()<br>    &gt;&gt;&gt; print nav.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/index\"&gt;Home&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a&gt;Actions&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooindex\"&gt;Details&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooedit\"&gt;Edit&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://grok.zope.org\"&gt;Grok!&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br>Or use the parentmenu directive on the submenu:<br><br>First reinstate the old Navigation menu definition and the home link<br><br>    &gt;&gt;&gt; class Navigation(navigation.Menu):<br>    ...     grok.name('navigation')<br>    ...     grok.implements(INavigation)<br>    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!', order=10)<br>    &gt;&gt;&gt; grok_component('nav', Navigation)<br>    True<br><br>Now redefine the Actions menu<br><br>    &gt;&gt;&gt; class Actions(navigation.Menu):<br>    ...     grok.implements(IActions)<br>    ...     grok.name('actions')<br>    ...     grok.title('Actions')<br>    ...     navigation.parentmenu(INavigation)<br>    &gt;&gt;&gt; grok_component('actions', Actions)<br>    True<br> <br>    &gt;&gt;&gt; nav = Navigation(foo, request, grok.View(site, request))<br>    &gt;&gt;&gt; nav.update()<br>    &gt;&gt;&gt; print nav.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/index\"&gt;Home&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a&gt;Actions&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooindex\"&gt;Details&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooedit\"&gt;Edit&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://grok.zope.org\"&gt;Grok!&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br>Now let's throw in permissions<br><br>    &gt;&gt;&gt; class FooProtected(grok.View):<br>    ...     grok.context(IFoo)<br>    ...     grok.title('Manage')<br>    ...     grok.require('zope.ManageContent')<br>    ...     navigation.menuitem(IActions, order=2)<br>    ...     def render(self):<br>    ...         return 'test'<br>    &gt;&gt;&gt; grok_component('fooprotected', FooProtected)<br>    True<br><br>We shouldn't see that view<br><br>    &gt;&gt;&gt; actions.update()<br>    &gt;&gt;&gt; print actions.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooindex\"&gt;Details&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooedit\"&gt;Edit&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br>Now use a more powerful user:<br><br>    &gt;&gt;&gt; from zope.security.testing import Principal, Participation<br>    &gt;&gt;&gt; from zope.security.management import newInteraction, endInteraction<br>    &gt;&gt;&gt; endInteraction()<br>    &gt;&gt;&gt; participation = Participation(Principal('zope.user'))<br>    &gt;&gt;&gt; newInteraction(participation)<br>    &gt;&gt;&gt; actions.update()<br>    &gt;&gt;&gt; print actions.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooindex\"&gt;Details&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooedit\"&gt;Edit&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooprotected\"&gt;Manage&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br>You can link a view to multiple menus by repeating the menuitem directive<br><br>    &gt;&gt;&gt; class FooAdd(grok.View):<br>    ...     grok.context(MySite)<br>    ...     navigation.menuitem(Actions, 'Add a Foo', order=3)<br>    ...     navigation.menuitem(Navigation, 'Add a Foo', order=5)<br>    ...     def render(self):<br>    ...         return 'test'<br>    &gt;&gt;&gt; grok_component('fooadd', FooAdd)<br>    True<br><br>    &gt;&gt;&gt; nav = Navigation(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; nav.update()<br>    &gt;&gt;&gt; print nav.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/index\"&gt;Home&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a&gt;Actions&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/fooadd\"&gt;Add a Foo&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/fooadd\"&gt;Add a Foo&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://grok.zope.org\"&gt;Grok!&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br><br>Content Menus<br>-------------<br><br>Now the icing on the cake: content menus!<br>Content Menus are meant to be used if you want direct links to some of your content from your menu.<br>A good example is a 'Products' menu that links directly to all products you offer on your site<br>Let's define and add some content:<br><br>    &gt;&gt;&gt; from zope.schema import TextLine<br>    &gt;&gt;&gt; class IProduct(Interface):<br>    ...     name = TextLine()<br>    &gt;&gt;&gt; class Product(grok.Container):<br>    ...     grok.implements(IProduct)<br>    ...     def __init__(self, name):<br>    ...         super(Product, self).__init__()<br>    ...         self.name=name<br>    <br>    &gt;&gt;&gt; site['coffeemachine']=Product('Coffee Machine')<br>    &gt;&gt;&gt; site['terminator']=Product('Terminator')<br><br>Now the content menu. The content menu doesn't know where to get the content, so you need to override the<br>getContent() method. If you don't you'll get a NotImplementedError:<br>    <br>    &gt;&gt;&gt; class ProductMenu(navigation.ContentMenu):<br>    ...     grok.name('products')    <br>    &gt;&gt;&gt; grok_component('productmenu', ProductMenu)<br>    True<br>    &gt;&gt;&gt; pm = ProductMenu(foo, request, FooIndex(foo, request))<br>    &gt;&gt;&gt; pm.update()<br>    Traceback (most recent call last):<br>    NotImplementedError: Subclasses of ContentMenu must override getContent()<br><br>So let's define the getContent() method, and also a getTitle() method to return <br>something else than the __name__ attribute. You can override the view to be rendered<br>with the viewName attribute, which defaults to 'index'<br>There is also a getURL() method that you can override to create a link yourself.<br><br>    &gt;&gt;&gt; class ProductMenu(navigation.ContentMenu):<br>    ...     grok.name('products')<br>    ...     def getContent(self):<br>    ...         return [x for x in site.values() if IProduct.providedBy(x)]    <br>    ...     def getTitle(self, obj):<br>    ...         return obj.name    <br>    &gt;&gt;&gt; grok_component('productmenu', ProductMenu)<br>    True<br>    &gt;&gt;&gt; pm = ProductMenu(foo, request, FooIndex(foo, request))<br>    &gt;&gt;&gt; pm.update()<br>    &gt;&gt;&gt; print pm.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/coffeemachine/index\"&gt;Coffee Machine&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/index\"&gt;Terminator&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    <br>What just happened here? The items of the menu were rendered as Context Menu Items, <br>with the context not the current view context, but the item to be rendered.<br>Why this is done like that will become clear when content submenus are thrown into the mix.<br>Let's define Series and Models for our Products:<br><br>    &gt;&gt;&gt; class ISeries(Interface):<br>    ...     name = TextLine()<br>    &gt;&gt;&gt; class Series(grok.Container):<br>    ...     grok.implements(ISeries)<br>    ...     def __init__(self, name):<br>    ...         super(Series, self).__init__()<br>    ...         self.name=name<br>    &gt;&gt;&gt; class IModel(Interface):<br>    ...     name = TextLine()<br>    &gt;&gt;&gt; class Model(grok.Container):<br>    ...     grok.implements(IModel)<br>    ...     def __init__(self, name):<br>    ...         super(Model, self).__init__()<br>    ...         self.name=name<br>    &gt;&gt;&gt; site['terminator']['800']=Series('T-800')<br>    &gt;&gt;&gt; site['terminator']['1000']=Series('T-1000')<br>    &gt;&gt;&gt; site['terminator']['X']=Series('T-X')<br>    &gt;&gt;&gt; site['terminator']['800']['101']=Model('101')<br><br>Now we need the corresponding submenus:<br>The ContentSubMenu class is just a ContentMenu with a default getContent method returning self.context.values()<br><br>    &gt;&gt;&gt; class SeriesMenu(navigation.ContentSubMenu):<br>    ...     navigation.contentsubmenu('model-menu')<br>    ...     grok.name('series-menu')<br>    ...     def getTitle(self, obj):<br>    ...         return obj.name    <br>    &gt;&gt;&gt; grok_component('seriesmenu', SeriesMenu)<br>    True<br>    &gt;&gt;&gt; class ModelMenu(navigation.ContentSubMenu):<br>    ...     grok.name('model-menu')<br>    ...     def getTitle(self, obj):<br>    ...         return obj.name    <br>    &gt;&gt;&gt; grok_component('modelmenu', ModelMenu)<br>    True<br><br>Now we need to link them to the product menu:<br><br>    &gt;&gt;&gt; class ProductMenu(navigation.ContentMenu):<br>    ...     navigation.contentsubmenu('series-menu')<br>    ...     grok.name('products')<br>    ...     def getContent(self):<br>    ...         return [x for x in site.values() if IProduct.providedBy(x)]    <br>    ...     def getTitle(self, obj):<br>    ...         return obj.name    <br>    &gt;&gt;&gt; grok_component('productmenu', ProductMenu)<br>    True<br><br>Let's render<br><br>    &gt;&gt;&gt; pm = ProductMenu(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; pm.update()<br>    &gt;&gt;&gt; print pm.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/coffeemachine/index\"&gt;Coffee Machine&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/index\"&gt;Terminator&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/1000/index\"&gt;T-1000&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/800/index\"&gt;T-800&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/800/101/index\"&gt;101&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/X/index\"&gt;T-X&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>        <br>Or we could have done it like this:<br><br>    &gt;&gt;&gt; class ProductMenu(navigation.ContentMenu):<br>    ...     grok.name('products')<br>    ...     def getContent(self):<br>    ...         return [x for x in site.values() if IProduct.providedBy(x)]    <br>    ...     def getTitle(self, obj):<br>    ...         return obj.name    <br>    &gt;&gt;&gt; grok_component('productmenu', ProductMenu)<br>    True<br>    &gt;&gt;&gt; class SeriesMenu(navigation.ContentSubMenu):<br>    ...     navigation.parentmenu(ProductMenu)<br>    ...     grok.name('series-menu')<br>    ...     def getTitle(self, obj):<br>    ...         return obj.name    <br>    &gt;&gt;&gt; grok_component('seriesmenu', SeriesMenu)<br>    True<br>    &gt;&gt;&gt; class ModelMenu(navigation.ContentSubMenu):<br>    ...     navigation.parentmenu(SeriesMenu)<br>    ...     grok.name('model-menu')<br>    ...     def getTitle(self, obj):<br>    ...         return obj.name    <br>    &gt;&gt;&gt; grok_component('modelmenu', ModelMenu)<br>    True<br><br>Let's render<br><br>    &gt;&gt;&gt; pm = ProductMenu(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; pm.update()<br>    &gt;&gt;&gt; print pm.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/coffeemachine/index\"&gt;Coffee Machine&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/index\"&gt;Terminator&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/1000/index\"&gt;T-1000&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/800/index\"&gt;T-800&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/800/101/index\"&gt;101&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/terminator/X/index\"&gt;T-X&lt;/a&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br><br>Groups<br>------<br><br>Menu Items can be categorized into groups by adding a group parameter to all menuitem, submenu and the patentmenu <br>directives:<br><br>    &gt;&gt;&gt; class IGroupedMenu(navigation.interfaces.IMenu):<br>    ...     pass<br>    &gt;&gt;&gt; class GroupedMenu(navigation.Menu):<br>    ...     grok.implements(IGroupedMenu)<br>    &gt;&gt;&gt; grok_component('GroupedMenu', GroupedMenu)<br>    True<br>    &gt;&gt;&gt; class Index(grok.View):<br>    ...     grok.context(MySite)<br>    ...     navigation.sitemenuitem(IGroupedMenu, 'Home', order=1, group='Group 1')<br>    ...     def render(self):<br>    ...         return 'test'<br>    &gt;&gt;&gt; grok_component('Index', Index)<br>    True<br>    &gt;&gt;&gt; class View2(grok.View):<br>    ...     grok.context(MySite)<br>    ...     navigation.sitemenuitem(IGroupedMenu, 'View 2', order=0, group='Group 2')<br>    ...     def render(self):<br>    ...         return 'test'<br>    &gt;&gt;&gt; grok_component('View2', View2)<br>    True<br>    &gt;&gt;&gt; class View3(grok.View):<br>    ...     grok.context(MySite)<br>    ...     navigation.sitemenuitem(IGroupedMenu, 'View 3', order=2, group='Group 1')<br>    ...     def render(self):<br>    ...         return 'test'<br>    &gt;&gt;&gt; grok_component('View3', View3)<br>    True<br><br>The default templates render a separate &lt;ul&gt; for each group:<br><br>    &gt;&gt;&gt; gm = GroupedMenu(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; gm.update()<br>    &gt;&gt;&gt; print gm.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/view2\"&gt;View 2&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/index\"&gt;Home&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/view3\"&gt;View 3&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br>    <br>You can change the order of the groups by setting the grouporder attribute on the Menu class:<br><br>    &gt;&gt;&gt; class GroupedMenu(navigation.Menu):<br>    ...     grok.implements(IGroupedMenu)<br>    ...     grouporder=['Group 1', 'Group 2']<br>    &gt;&gt;&gt; grok_component('GroupedMenu', GroupedMenu)<br>    True<br>    &gt;&gt;&gt; gm = GroupedMenu(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; gm.update()<br>    &gt;&gt;&gt; print gm.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/index\"&gt;Home&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/view3\"&gt;View 3&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;ul&gt;<br>    &lt;li class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/view2\"&gt;View 2&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;/div&gt;<br><br>        <br>Page Templates<br>--------------<br><br>megrok.navigation uses zope.pagetemplate (or megrok.pagetemplate) to allow you to override the default templates.<br>Let's define a template based on divs, instead of ul<br><br>    &gt;&gt;&gt; mt = \"\"\"&lt;div tal:attributes='class menu/cssClass'&gt;<br>    ... &lt;div tal:repeat='group menu/groups'&gt;<br>    ...      &lt;tal:repeat tal:repeat=\"item group/items\"<br>    ...                  tal:replace='structure item/render' /&gt;<br>    ... &lt;/div&gt;<br>    ... &lt;/div&gt;\"\"\"<br>    &gt;&gt;&gt; from megrok import pagetemplate<br>    &gt;&gt;&gt; class DivMenu(pagetemplate.PageTemplate):<br>    ...     template = grok.PageTemplate(mt)<br>    ...     pagetemplate.view(navigation.interfaces.IMenu)<br>    &gt;&gt;&gt; grok_component('divmenu', DivMenu)<br>    True<br><br>    &gt;&gt;&gt; it = \"\"\"&lt;div tal:attributes='class menu/cssItemClass'&gt;<br>    ... &lt;a tal:attributes=\"href item/link; <br>    ...                    title viewlet/description|nothing\"&gt;<br>    ... &lt;img tal:condition=\"item/icon | nothing\" <br>    ...      tal:attributes=\"src item/icon\"/&gt;<br>    ... &lt;span tal:replace=\"item/title\"/&gt;&lt;/a&gt;<br>    ... &lt;tal:replace tal:condition=\"item/submenu | nothing\" <br>    ...              tal:replace=\"structure provider:${item/submenu}\"/&gt;<br>    ... &lt;/div&gt;\"\"\"<br>    &gt;&gt;&gt; class DivMenuItem(pagetemplate.PageTemplate):<br>    ...     template = grok.PageTemplate(it)<br>    ...     pagetemplate.view(navigation.interfaces.IMenuItem)<br>    &gt;&gt;&gt; grok_component('divmenuitem', DivMenuItem)<br>    True<br><br>    &gt;&gt;&gt; print actions.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;div&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooindex\"&gt;<br>    &lt;BLANKLINE&gt;<br>    Details&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/div&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooedit\"&gt;<br>    &lt;BLANKLINE&gt;<br>    Edit&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/div&gt;<br>    &lt;div class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/foo/fooprotected\"&gt;<br>    &lt;BLANKLINE&gt;<br>    Manage&lt;/a&gt;<br>    &lt;BLANKLINE&gt;<br>    &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;/div&gt;<br>    <br>    <br>But what if you want 2 different templates for items to be used in different menus? You never specify any Items<br>yourself, so you can't tell them to implement a different interface and register the template to that interface.<br>To allow this, the itemsimplement directive was introduced.<br><br>    &gt;&gt;&gt; class IIconItem(navigation.interfaces.IMenuItem):<br>    ...     pass<br>    &gt;&gt;&gt; class IconMenu(navigation.Menu):<br>    ...     grok.name('icons')<br>    ...     navigation.itemsimplement(IIconItem)<br>    ...     navigation.globalmenuitem('http://grok.zope.org', 'Grok!',<br>    ...                               icon='icon.jpg')<br>    &gt;&gt;&gt; grok_component('nav', IconMenu)<br>    True<br>  <br>    &gt;&gt;&gt; it = \"\"\"&lt;img tal:condition=\"item/icon | nothing\" <br>    ...      tal:attributes=\"src item/icon\"/&gt;\"\"\"<br>    &gt;&gt;&gt; class IconMenuItem(pagetemplate.PageTemplate):<br>    ...     template = grok.PageTemplate(it)<br>    ...     pagetemplate.view(IIconItem)<br>    &gt;&gt;&gt; grok_component('iconmenuitem', IconMenuItem)<br>    True<br>    &gt;&gt;&gt; icons = IconMenu(site, request, grok.View(site, request))<br>    &gt;&gt;&gt; icons.update()<br>    &gt;&gt;&gt; print icons.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;div&gt;<br>    &lt;img src=\"icon.jpg\" /&gt;<br>    &lt;/div&gt;<br>    &lt;/div&gt;<br><br><br>Register plain viewlets and *.items together.<br><br><br>    &gt;&gt;&gt; from zope.publisher.interfaces.browser import IDefaultBrowserLayer<br>    &gt;&gt;&gt; class IGlobalMenu(navigation.interfaces.IMenu):<br>    ...     pass<br><br>    &gt;&gt;&gt; class GlobalMenu(navigation.Menu):<br>    ...     grok.name('globalmenu')<br>    ...     grok.implements(IGlobalMenu)<br>    &gt;&gt;&gt; grok_component('globalmenu', GlobalMenu)<br>    True<br><br>    &gt;&gt;&gt; class Contact(grok.View):<br>    ...     grok.context(MySite)<br>    ...     grok.layer(IDefaultBrowserLayer)<br>    ...     navigation.menuitem(IGlobalMenu)<br>    ...     def render(self):<br>    ...         return \"test\"<br>    &gt;&gt;&gt; grok_component('contact', Contact)<br>    True<br><br>    &gt;&gt;&gt; class Logout(grok.Viewlet):<br>    ...     grok.viewletmanager(IGlobalMenu)<br>    ...     grok.context(MySite)<br>    ...     grok.layer(IDefaultBrowserLayer)<br>    ...     def render(self):<br>    ...         return \"logout\"   <br>    &gt;&gt;&gt; grok_component('logout', Logout)<br>    True<br> <br>    &gt;&gt;&gt; globalmenu = getMultiAdapter((site, request, grok.View(site, request)), <br>    ...     IContentProvider, name=\"globalmenu\")<br><br>    &gt;&gt;&gt; globalmenu.update()<br>    &gt;&gt;&gt; logout, contact = globalmenu.viewlets<br><br>    &gt;&gt;&gt; logout<br>    &lt;megrok.navigation.tests.Logout object at ...&gt;<br><br>    &gt;&gt;&gt; contact<br>    &lt;megrok.navigation.util.MySite_contact object at ...&gt;<br><br>    &gt;&gt;&gt; grok.layer.bind().get(logout)<br>    &lt;InterfaceClass zope.publisher.interfaces.browser.IDefaultBrowserLayer&gt;<br><br>    &gt;&gt;&gt; grok.layer.bind().get(contact)<br>    &lt;InterfaceClass zope.publisher.interfaces.browser.IDefaultBrowserLayer&gt;<br><br>    &gt;&gt;&gt; print globalmenu.render()<br>    &lt;div class=\"\"&gt;<br>    &lt;div&gt;<br>         logout<br>         &lt;div class=\"\"&gt;<br>    &lt;a href=\"http://127.0.0.1/site/contact\"&gt;<br>    contact&lt;/a&gt;<br>    &lt;/div&gt;<br>    &lt;/div&gt;<br>    &lt;/div&gt;<br><br><br>Let's see if we can get the individual viewlets based on their name via<br>the Zope-Component Architecture<br><br>    &gt;&gt;&gt; from zope.viewlet.interfaces import IViewlet<br>    &gt;&gt;&gt; contact = getMultiAdapter(<br>    ...     (site, request, grok.View(site, request), globalmenu),<br>    ...     IViewlet, name=u\"MySite_contact\")<br>    &gt;&gt;&gt; contact<br>    &lt;megrok.navigation.util.MySite_contact object at ...&gt;<br><br><br>    &gt;&gt;&gt; class Contact(grok.View):<br>    ...     grok.context(MySite)<br>    ...     grok.name('othercontact')<br>    ...     grok.title('Other Link')<br>    ...     grok.layer(IDefaultBrowserLayer)<br>    ...     navigation.menuitem(IGlobalMenu)<br>    ...     def render(self):<br>    ...         return \"test\"<br>    &gt;&gt;&gt; grok_component('contact', Contact)<br>    True<br><br>    &gt;&gt;&gt; contact1 = getMultiAdapter(<br>    ...     (site, request, grok.View(site, request), globalmenu),<br>    ...     IViewlet, name=u\"MySite_othercontact\")<br><br>    &gt;&gt;&gt; contact1<br>    &lt;megrok.navigation.util.MySite_othercontact object at ...&gt;<br><br><br><br>=======<br>History<br>=======<br><br>0.6.2 (2012-03-20)<br>------------------<br><br>- fix for itemsimplement on submenus: use the parents itemsimplement in the submenus main menuitem<br><br>0.6.1 (2010-06-28)<br>------------------<br><br>- fix if icon is a callable<br><br>0.6 (2010-05-09)<br>----------------<br><br>- update to make icon display compatible with zope.fanstatic<br>  icon paths are now traversed instead of literally used<br><br>0.5 (2010-05-09)<br>----------------<br><br>- use current grok version 1.1rc1.cfg<br>- now it's possible to register plain viewlets with the directive<br>  grok.viewletmanager to IMenu Items.<br>- added the layer directive (if setted) to IMenuItems<br>- register the components now with the default_view_name of the factory<br>  instead of the autogenerated name. This allows us to override simple<br>  MenuItems with the help of the ZCA.<br><br><br>0.4 (2010-03-26)<br>----------------<br><br>Implemented groups:<br>- contentgroup directive<br>- grouporder attribute<br><br>0.3 (2010-03-26)<br>----------------<br><br>- separate directives in directives submodule<br>- getURL method for ContentMenus<br>- itemsimplement directive<br>- parenmenu directive<br>- 'menu' and 'item' template namespace entries<br>- 'menu' attribute for MenuItem which refers to the viewletmanager <br>- 'items' attribute for Menu which refers to the viewlets<br>- removed submenu/subMenu inconsistency (may break overriden templates!)<br>- contentorder directive<br><br>0.2.2 (2010-03-09)<br>------------------<br><br>- Fix getSite import issue<br><br>0.2.1 (2010-02-22)<br>------------------<br><br>- Fix issue with requiring zope.site to make it work on Grok 1.0<br><br>0.2 (2010-02-03)<br>----------------<br><br>- Allow views to be registered to multiple menus<br>- Scrap ContextMenu class as it's nothing more than a regular Menu anyway<br><br>0.1 (2010-01-29)<br>----------------<br><br>- Initial Release\n          </div>"}, "last_serial": 794646, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "acdeac64a70a9c3ae7cbfd617380204b", "sha256": "c2ca106711f4c4270a4bb62179c4debaf7d723067f227a610e3728e00660259a"}, "downloads": -1, "filename": "megrok.navigation-0.1.zip", "has_sig": false, "md5_digest": "acdeac64a70a9c3ae7cbfd617380204b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 21735, "upload_time": "2010-02-02T09:07:10", "upload_time_iso_8601": "2010-02-02T09:07:10.320743Z", "url": "https://files.pythonhosted.org/packages/c7/b2/0d9f79021f7c983eb81a903d13a180f4931db78be942ba27d65646bd480e/megrok.navigation-0.1.zip", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "2e428b7a3db3d8346a0c402adf9e9ada", "sha256": "a3173f8b11321404fe80fba24338be8b95765f4172135fe718c4dbfa39d33169"}, "downloads": -1, "filename": "megrok.navigation-0.2.zip", "has_sig": false, "md5_digest": "2e428b7a3db3d8346a0c402adf9e9ada", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 22499, "upload_time": "2010-02-03T11:32:05", "upload_time_iso_8601": "2010-02-03T11:32:05.469802Z", "url": "https://files.pythonhosted.org/packages/e6/90/2fbeb4a47e756d565593486aeda61cc00bcb5d4db9c69be7d36b274c5df7/megrok.navigation-0.2.zip", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "41bb1af9f54b7bac5e4e00fc084ed701", "sha256": "bf60a51bb58a2ba1497cded42a42219fae24fc83fdc6533d199d2c488a7baa79"}, "downloads": -1, "filename": "megrok.navigation-0.2.1.zip", "has_sig": false, "md5_digest": "41bb1af9f54b7bac5e4e00fc084ed701", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 22816, "upload_time": "2010-02-22T11:21:05", "upload_time_iso_8601": "2010-02-22T11:21:05.277378Z", "url": "https://files.pythonhosted.org/packages/b5/39/3db0fea941b55cc7e4ad8ad518b92d1393d68dd6f474d85ab966ec3e9e1a/megrok.navigation-0.2.1.zip", "yanked": false}], "0.2.2": [{"comment_text": "", "digests": {"md5": "5b12b3b0f5ee4b0335fba32eaaaeae9a", "sha256": "f30f2df1d36bcf36a39fb49f435c24677033909fded1d8e421db94cbfa35a73f"}, "downloads": -1, "filename": "megrok.navigation-0.2.2.zip", "has_sig": false, "md5_digest": "5b12b3b0f5ee4b0335fba32eaaaeae9a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 22888, "upload_time": "2010-03-09T08:48:40", "upload_time_iso_8601": "2010-03-09T08:48:40.394837Z", "url": "https://files.pythonhosted.org/packages/a6/17/55f3fed0f69d0a6367b1129fbaa7775c48fb744ce1b355ccc8fdd40b6041/megrok.navigation-0.2.2.zip", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "f194ab98c3dc68983ac5dbe16e16be7e", "sha256": "7ed1f1431df8f649736cc8f127fefa28b3b6130fbee29de9feb77b8f62e0a882"}, "downloads": -1, "filename": "megrok.navigation-0.3.zip", "has_sig": false, "md5_digest": "f194ab98c3dc68983ac5dbe16e16be7e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27443, "upload_time": "2010-03-26T11:22:14", "upload_time_iso_8601": "2010-03-26T11:22:14.842829Z", "url": "https://files.pythonhosted.org/packages/df/74/b679f72ce3e936428a64a03f5facb8cc95cd27940c6b8d437177f664f5db/megrok.navigation-0.3.zip", "yanked": false}], "0.4": [{"comment_text": "", "digests": {"md5": "3ad38400009eb73e8f10c24f01f3e9ca", "sha256": "144ea279ca64e62bd04a42a0c03d69a3ce174f4cd106d5fb802fdb323b6ced8e"}, "downloads": -1, "filename": "megrok.navigation-0.4.zip", "has_sig": false, "md5_digest": "3ad38400009eb73e8f10c24f01f3e9ca", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 28772, "upload_time": "2010-03-26T15:11:31", "upload_time_iso_8601": "2010-03-26T15:11:31.175267Z", "url": "https://files.pythonhosted.org/packages/52/7a/87ac0360415eb95df9e7d3ff93d1876579aafffa4f0de5df3fea7e2f3206/megrok.navigation-0.4.zip", "yanked": false}], "0.5": [{"comment_text": "", "digests": {"md5": "b344d5960c1ae10b19da93df607bf8a3", "sha256": "ec577f9912d8092c21bbc337b1661597b4f5e42b681530d65c0ca03cb7a1b8f1"}, "downloads": -1, "filename": "megrok.navigation-0.5.zip", "has_sig": false, "md5_digest": "b344d5960c1ae10b19da93df607bf8a3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31249, "upload_time": "2011-05-09T15:20:02", "upload_time_iso_8601": "2011-05-09T15:20:02.380639Z", "url": "https://files.pythonhosted.org/packages/d9/99/dfa6cc40d0e2eeab66ebc5103230adfe2df7628cfd244a7ef1d044be618f/megrok.navigation-0.5.zip", "yanked": false}], "0.6": [{"comment_text": "", "digests": {"md5": "d1c5973905bf22b6a6037642b0c71553", "sha256": "842b35a587b1fc3228b9762b39240d1ffe23d54bb308848d181c6698c405a507"}, "downloads": -1, "filename": "megrok.navigation-0.6.zip", "has_sig": false, "md5_digest": "d1c5973905bf22b6a6037642b0c71553", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31472, "upload_time": "2011-05-18T10:30:12", "upload_time_iso_8601": "2011-05-18T10:30:12.622959Z", "url": "https://files.pythonhosted.org/packages/88/28/bda340313c66db1caa7922b798fa635f5baf9e7c30c75582ee53dc5245ab/megrok.navigation-0.6.zip", "yanked": false}], "0.6.1": [{"comment_text": "", "digests": {"md5": "830e0696a4dd9d5630874d5854bb385f", "sha256": "ca24e5539505d08bc340c9e0b13a42c966be1b49e88d581fa33fb855114629a8"}, "downloads": -1, "filename": "megrok.navigation-0.6.1.zip", "has_sig": false, "md5_digest": "830e0696a4dd9d5630874d5854bb385f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31732, "upload_time": "2011-06-28T10:34:38", "upload_time_iso_8601": "2011-06-28T10:34:38.264558Z", "url": "https://files.pythonhosted.org/packages/42/bf/5a16ac32a0c197e42a08e15e95c4ea7723bda0c519df74157999c9a9905a/megrok.navigation-0.6.1.zip", "yanked": false}], "0.6.2": [{"comment_text": "", "digests": {"md5": "cc1193bd1a00290586f31654b6b816c6", "sha256": "743638df4adb328ce5c05aa2a2cd47205f219acf91b819e2d98ae3ad9a8232d7"}, "downloads": -1, "filename": "megrok.navigation-0.6.2.zip", "has_sig": false, "md5_digest": "cc1193bd1a00290586f31654b6b816c6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31862, "upload_time": "2012-03-20T14:14:10", "upload_time_iso_8601": "2012-03-20T14:14:10.216548Z", "url": "https://files.pythonhosted.org/packages/51/44/5d691a0aff2490ff816ffd82ec88d1db1854ccc807e5cbf7b0f1f4e125c2/megrok.navigation-0.6.2.zip", "yanked": false}], "0.6dev": [{"comment_text": "", "digests": {"md5": "5b08e114ba9c9e6a09199b47fe3ec3f2", "sha256": "d0a58d2f557d3b715e8bfee195a2b4795a2e6dba5d49e6fb51ffb7b06ab1bc3d"}, "downloads": -1, "filename": "megrok.navigation-0.6dev.zip", "has_sig": false, "md5_digest": "5b08e114ba9c9e6a09199b47fe3ec3f2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31660, "upload_time": "2011-05-18T10:29:52", "upload_time_iso_8601": "2011-05-18T10:29:52.897310Z", "url": "https://files.pythonhosted.org/packages/52/15/91f26d21de843e40fe568432bc4bd9e18055178dc669a6a09adc3f4991ed/megrok.navigation-0.6dev.zip", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "cc1193bd1a00290586f31654b6b816c6", "sha256": "743638df4adb328ce5c05aa2a2cd47205f219acf91b819e2d98ae3ad9a8232d7"}, "downloads": -1, "filename": "megrok.navigation-0.6.2.zip", "has_sig": false, "md5_digest": "cc1193bd1a00290586f31654b6b816c6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31862, "upload_time": "2012-03-20T14:14:10", "upload_time_iso_8601": "2012-03-20T14:14:10.216548Z", "url": "https://files.pythonhosted.org/packages/51/44/5d691a0aff2490ff816ffd82ec88d1db1854ccc807e5cbf7b0f1f4e125c2/megrok.navigation-0.6.2.zip", "yanked": false}], "timestamp": "Fri May  8 00:56:27 2020"}