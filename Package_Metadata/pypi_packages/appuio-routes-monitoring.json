{"info": {"author": "Nicolas Bigler", "author_email": "nicolas.bigler@vshn.ch", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Environment :: Console", "Intended Audience :: System Administrators", "License :: OSI Approved :: BSD License", "Operating System :: Unix", "Programming Language :: Python :: 3 :: Only", "Topic :: System :: Systems Administration"], "description": "########################\nappuio_routes_monitoring\n########################\n\n.. contents:: Table of Contents\n\n\n********\nOverview\n********\n\n`appuio_routes_monitoring` is a tool to generate yaml code for hieradata from APPUiO\nroutes to configure http icinga2 monitoring checks for those routes.\nHowever the script should work on any openshift cluster.\n\nappuio_routes_monitoring\n========================\n\n`appuio_routes_monitoring` expects the `oc` to be in the path variable and you need to be\nlogged in to APPUiO before calling this script.\n\nBy default the script will generate yaml code for all routes the logged in user has access to.\nRoutes created by ACME integration are ignored.\n\nSee usage section of this document for details.\n\n\n************\nDependencies\n************\n\n`appuio_routes_monitoring` supports python >=3.4 and has the following 3rd-party dependencies\n - `pyyaml <https://pypi.python.org/pypi/pyyaml>`_ (>= 3.10)\n\n`appuio_routes_monitoring` further relies on the `oc` binary to extract the routes from the\nopenshift cluster.\n\n\n************\nInstallation\n************\n\n`appuio_routes_monitoring` can be easily installed using pip:\n`pip install appuio_routes_monitoring`\n\n*************\nConfiguration\n*************\n\n`appuio_routes_monitoring` does not have any configuration files.\nBut it does rely on the `oc` binary and valid session to APPUiO.\nFurthermore the script reads annotations from the routes to generate the appropriate\nyaml code.\nCurrently the following annotations are supported:\n\n\nmonitoring/enabled\n==================\n\nSetting this annotation to false will not create an entry for this route.\n\nmonitoring/alert_customer\n=========================\n\nSetting this annotation on the route to `true`, will set the `alert_customer` variable to\n`true` as well. This will configure the http check to alert to the defined e-mail address.\n\nmonitoring/alert_vshn: 'true'\n=============================\n\nSetting this annotation on the route to `true`, will set the `production_level` of the check\nto `4`, making the check a 24/7 check. This means VSHN will be alerted anytime the check fails.\n\nmonitoring/path\n===============\nSetting this annotation on the route to a URI, will set the http_uri to the specified path.\nIf the annoation is missing, and no route path is set, the http_uri will default to `/`.\n\n\n*****\nUsage\n*****\n\n.. code-block:: text\n\n    usage: generate_monitoring_check [-h] [-p PROJECTS [PROJECTS ...]] [-k HIERAKEY]\n\n    generate hieradata from appuio routes\n\n    optional arguments:\n      -h, --help            show this help message and exit\n      -p PROJECTS [PROJECTS ...], --project PROJECTS [PROJECTS ...]\n      -k HIERAKEY, --key HIERAKEY\n\n\n\nExamples\n========\n\nGenerate yaml code for project `my-test-project`\n\n.. code-block:: text\n\n    generate_monitoring_check -p my-test-project\n    profile_icinga2::hiera_httpchecks:\n        test-project.example.com:\n            display_name: test-project.example.com on APPUiO in my-test-project\n            http_address: test-project.example.com\n            http_ssl: true\n            http_uri: /\n            vars:\n                alert_customer: false\n        test-project.example.com:a:b:\n            display_name: test-project.example.com/a/b on APPUiO in my-test-project\n            http_address: test-project.example.com\n            http_ssl: true\n            http_uri: /a/b\n            vars:\n                alert_customer: false\n        test-project.example.com:a:b:c:\n            display_name: test-project.example.com/a/b/c on APPUiO in my-test-project\n            http_address: test-project.example.com\n            http_ssl: true\n            http_uri: /a/b/c/status\n            vars:\n                alert_customer: false\n\n\n***********\nDevelopment\n***********\n\nrun development version\n=======================\n\n.. code-block:: bash\n\n    git clone git@git.vshn.net:vshn/appuio_routes_monitoring.git\n    cd appuio_routes_monitoring\n    python -m venv pyvenv\n    . pyvenv/bin/activate\n    pip install --upgrade pip\n    pip install -r requirements.in\n\n    python -m appuio_routes_monitoring", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://git.vshn.net/vshn/appuio_routes_monitoring", "keywords": "", "license": "BSD", "maintainer": "", "maintainer_email": "", "name": "appuio-routes-monitoring", "package_url": "https://pypi.org/project/appuio-routes-monitoring/", "platform": "any", "project_url": "https://pypi.org/project/appuio-routes-monitoring/", "project_urls": {"Homepage": "https://git.vshn.net/vshn/appuio_routes_monitoring"}, "release_url": "https://pypi.org/project/appuio-routes-monitoring/1.2.1/", "requires_dist": null, "requires_python": ">=3.5", "summary": "A tool to generate yaml code for hieradata from APPUiO routes to configure", "version": "1.2.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"table-of-contents\">\n<p>Table of Contents</p>\n<ul>\n<li><a href=\"#overview\" id=\"id2\" rel=\"nofollow\">Overview</a><ul>\n<li><a href=\"#id1\" id=\"id3\" rel=\"nofollow\">appuio_routes_monitoring</a></li>\n</ul>\n</li>\n<li><a href=\"#dependencies\" id=\"id4\" rel=\"nofollow\">Dependencies</a></li>\n<li><a href=\"#installation\" id=\"id5\" rel=\"nofollow\">Installation</a></li>\n<li><a href=\"#configuration\" id=\"id6\" rel=\"nofollow\">Configuration</a><ul>\n<li><a href=\"#monitoring-enabled\" id=\"id7\" rel=\"nofollow\">monitoring/enabled</a></li>\n<li><a href=\"#monitoring-alert-customer\" id=\"id8\" rel=\"nofollow\">monitoring/alert_customer</a></li>\n<li><a href=\"#monitoring-alert-vshn-true\" id=\"id9\" rel=\"nofollow\">monitoring/alert_vshn: \u2018true\u2019</a></li>\n<li><a href=\"#monitoring-path\" id=\"id10\" rel=\"nofollow\">monitoring/path</a></li>\n</ul>\n</li>\n<li><a href=\"#usage\" id=\"id11\" rel=\"nofollow\">Usage</a><ul>\n<li><a href=\"#examples\" id=\"id12\" rel=\"nofollow\">Examples</a></li>\n</ul>\n</li>\n<li><a href=\"#development\" id=\"id13\" rel=\"nofollow\">Development</a></li>\n</ul>\n</div>\n<div id=\"overview\">\n<h2><a href=\"#id2\" rel=\"nofollow\">Overview</a></h2>\n<p><cite>appuio_routes_monitoring</cite> is a tool to generate yaml code for hieradata from APPUiO\nroutes to configure http icinga2 monitoring checks for those routes.\nHowever the script should work on any openshift cluster.</p>\n<div id=\"id1\">\n<h3><a href=\"#id3\" rel=\"nofollow\">appuio_routes_monitoring</a></h3>\n<p><cite>appuio_routes_monitoring</cite> expects the <cite>oc</cite> to be in the path variable and you need to be\nlogged in to APPUiO before calling this script.</p>\n<p>By default the script will generate yaml code for all routes the logged in user has access to.\nRoutes created by ACME integration are ignored.</p>\n<p>See usage section of this document for details.</p>\n</div>\n</div>\n<div id=\"dependencies\">\n<h2><a href=\"#id4\" rel=\"nofollow\">Dependencies</a></h2>\n<dl>\n<dt><cite>appuio_routes_monitoring</cite> supports python &gt;=3.4 and has the following 3rd-party dependencies</dt>\n<dd><ul>\n<li><a href=\"https://pypi.python.org/pypi/pyyaml\" rel=\"nofollow\">pyyaml</a> (&gt;= 3.10)</li>\n</ul>\n</dd>\n</dl>\n<p><cite>appuio_routes_monitoring</cite> further relies on the <cite>oc</cite> binary to extract the routes from the\nopenshift cluster.</p>\n</div>\n<div id=\"installation\">\n<h2><a href=\"#id5\" rel=\"nofollow\">Installation</a></h2>\n<p><cite>appuio_routes_monitoring</cite> can be easily installed using pip:\n<cite>pip install appuio_routes_monitoring</cite></p>\n</div>\n<div id=\"configuration\">\n<h2><a href=\"#id6\" rel=\"nofollow\">Configuration</a></h2>\n<p><cite>appuio_routes_monitoring</cite> does not have any configuration files.\nBut it does rely on the <cite>oc</cite> binary and valid session to APPUiO.\nFurthermore the script reads annotations from the routes to generate the appropriate\nyaml code.\nCurrently the following annotations are supported:</p>\n<div id=\"monitoring-enabled\">\n<h3><a href=\"#id7\" rel=\"nofollow\">monitoring/enabled</a></h3>\n<p>Setting this annotation to false will not create an entry for this route.</p>\n</div>\n<div id=\"monitoring-alert-customer\">\n<h3><a href=\"#id8\" rel=\"nofollow\">monitoring/alert_customer</a></h3>\n<p>Setting this annotation on the route to <cite>true</cite>, will set the <cite>alert_customer</cite> variable to\n<cite>true</cite> as well. This will configure the http check to alert to the defined e-mail address.</p>\n</div>\n<div id=\"monitoring-alert-vshn-true\">\n<h3><a href=\"#id9\" rel=\"nofollow\">monitoring/alert_vshn: \u2018true\u2019</a></h3>\n<p>Setting this annotation on the route to <cite>true</cite>, will set the <cite>production_level</cite> of the check\nto <cite>4</cite>, making the check a 24/7 check. This means VSHN will be alerted anytime the check fails.</p>\n</div>\n<div id=\"monitoring-path\">\n<h3><a href=\"#id10\" rel=\"nofollow\">monitoring/path</a></h3>\n<p>Setting this annotation on the route to a URI, will set the http_uri to the specified path.\nIf the annoation is missing, and no route path is set, the http_uri will default to <cite>/</cite>.</p>\n</div>\n</div>\n<div id=\"usage\">\n<h2><a href=\"#id11\" rel=\"nofollow\">Usage</a></h2>\n<pre>usage: generate_monitoring_check [-h] [-p PROJECTS [PROJECTS ...]] [-k HIERAKEY]\n\ngenerate hieradata from appuio routes\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -p PROJECTS [PROJECTS ...], --project PROJECTS [PROJECTS ...]\n  -k HIERAKEY, --key HIERAKEY\n</pre>\n<div id=\"examples\">\n<h3><a href=\"#id12\" rel=\"nofollow\">Examples</a></h3>\n<p>Generate yaml code for project <cite>my-test-project</cite></p>\n<pre>generate_monitoring_check -p my-test-project\nprofile_icinga2::hiera_httpchecks:\n    test-project.example.com:\n        display_name: test-project.example.com on APPUiO in my-test-project\n        http_address: test-project.example.com\n        http_ssl: true\n        http_uri: /\n        vars:\n            alert_customer: false\n    test-project.example.com:a:b:\n        display_name: test-project.example.com/a/b on APPUiO in my-test-project\n        http_address: test-project.example.com\n        http_ssl: true\n        http_uri: /a/b\n        vars:\n            alert_customer: false\n    test-project.example.com:a:b:c:\n        display_name: test-project.example.com/a/b/c on APPUiO in my-test-project\n        http_address: test-project.example.com\n        http_ssl: true\n        http_uri: /a/b/c/status\n        vars:\n            alert_customer: false\n</pre>\n</div>\n</div>\n<div id=\"development\">\n<h2><a href=\"#id13\" rel=\"nofollow\">Development</a></h2>\n<h2 id=\"run-development-version\"><span class=\"section-subtitle\">run development version</span></h2>\n<pre>git clone git@git.vshn.net:vshn/appuio_routes_monitoring.git\n<span class=\"nb\">cd</span> appuio_routes_monitoring\npython -m venv pyvenv\n. pyvenv/bin/activate\npip install --upgrade pip\npip install -r requirements.in\n\npython -m appuio_routes_monitoring\n</pre>\n</div>\n\n          </div>"}, "last_serial": 6762228, "releases": {"1.0.3": [{"comment_text": "", "digests": {"md5": "828465ac2ab86036c085aca63423454d", "sha256": "d7f79056f583b1a7f0b1b8af488a47af6c16cd17ae002ede3811b5fe1698b59b"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "828465ac2ab86036c085aca63423454d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 5870, "upload_time": "2019-01-21T14:46:13", "upload_time_iso_8601": "2019-01-21T14:46:13.488742Z", "url": "https://files.pythonhosted.org/packages/7c/30/7d95d1219aeb6bc38cf710e4074d0806042e99f98962e1aee37f9f2ad5b0/appuio_routes_monitoring-1.0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "28112ec313e84d8efdd0844537289a4f", "sha256": "b6415be3337d9870e5edad4cd5800ff32ca96e7e1f323cf9f17a06245b6c3fc4"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.0.3.tar.gz", "has_sig": false, "md5_digest": "28112ec313e84d8efdd0844537289a4f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 4175, "upload_time": "2019-01-21T14:46:14", "upload_time_iso_8601": "2019-01-21T14:46:14.649402Z", "url": "https://files.pythonhosted.org/packages/e1/ff/8ef4f01098b74a540714d106084e3f8eb6684a0787161b8ee7c97ce84eb3/appuio_routes_monitoring-1.0.3.tar.gz", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "e38f9b515f212c6671c602a0626e3103", "sha256": "b279e627ac2ec4afce543ea03f23a3980fc62b5acd0304e44796caa8afc4e08c"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "e38f9b515f212c6671c602a0626e3103", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 6002, "upload_time": "2019-01-25T14:11:24", "upload_time_iso_8601": "2019-01-25T14:11:24.448479Z", "url": "https://files.pythonhosted.org/packages/d0/ec/25c25f678ee52af7a08f1ba4f2141080cf2eeb00d5c57712db743e996259/appuio_routes_monitoring-1.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1bba16696ef8a59b104d989c8418fdd3", "sha256": "ab217227f7a6780242a3038b0019899a3dd7a4f64fdd26e62ffb8ab1d3ee05b4"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.1.0.tar.gz", "has_sig": false, "md5_digest": "1bba16696ef8a59b104d989c8418fdd3", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 4337, "upload_time": "2019-01-25T14:11:25", "upload_time_iso_8601": "2019-01-25T14:11:25.875620Z", "url": "https://files.pythonhosted.org/packages/b9/34/0df1c581d53a80d3d4773e1acc880e3c4e76e46ef42292b54dee57707723/appuio_routes_monitoring-1.1.0.tar.gz", "yanked": false}], "1.1.1": [{"comment_text": "", "digests": {"md5": "3663d2a8c6839bd8c8c09ba76dc52d3f", "sha256": "9fa26c85793908279292daaf9803fe21cc5baeed032d3e8ce6270dcc0c1b8760"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "3663d2a8c6839bd8c8c09ba76dc52d3f", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 5995, "upload_time": "2019-02-07T14:32:22", "upload_time_iso_8601": "2019-02-07T14:32:22.404327Z", "url": "https://files.pythonhosted.org/packages/14/e6/7f6ce2c4da684a3b7f3bfcfe8970eae4d29782013157016c1410613d7407/appuio_routes_monitoring-1.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8166a45a4ee9cc2db152bd80e7a8da2c", "sha256": "8cf9d85c66967262ae9b306f767df2d6c2b067f8cc580371da4e1e937df50939"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.1.1.tar.gz", "has_sig": false, "md5_digest": "8166a45a4ee9cc2db152bd80e7a8da2c", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 4331, "upload_time": "2019-02-07T14:32:23", "upload_time_iso_8601": "2019-02-07T14:32:23.911518Z", "url": "https://files.pythonhosted.org/packages/f5/6b/32d1bc969f0093d6e52ceaf97e6bf329c004c1b4fa2afb866d6356162eb8/appuio_routes_monitoring-1.1.1.tar.gz", "yanked": false}], "1.2.0": [{"comment_text": "", "digests": {"md5": "77db31b5168b5ceb89b73f5a82e10b82", "sha256": "df1b6b855bda168cde4dcab78fad34788a8f98fe6bb6d6ef4997317100f517ee"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "77db31b5168b5ceb89b73f5a82e10b82", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 6629, "upload_time": "2020-02-12T17:06:23", "upload_time_iso_8601": "2020-02-12T17:06:23.861123Z", "url": "https://files.pythonhosted.org/packages/70/10/7f3960b9c18827a3124d8d49ef30c3f86eb2425236e314808e60d268ab9b/appuio_routes_monitoring-1.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "4de746a3f02ab26dd91187ccb7db40c5", "sha256": "058ed00b368ae80e3d0ce5c0db973260217c2ceac6563f06b9728f22cc1a2d1d"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.2.0.tar.gz", "has_sig": false, "md5_digest": "4de746a3f02ab26dd91187ccb7db40c5", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 5236, "upload_time": "2020-02-12T17:06:25", "upload_time_iso_8601": "2020-02-12T17:06:25.150578Z", "url": "https://files.pythonhosted.org/packages/2b/d7/b270cd7d8075d4b486ab51e2c6efaff64a9ab8ca4928986d5fec255cdd4a/appuio_routes_monitoring-1.2.0.tar.gz", "yanked": false}], "1.2.1": [{"comment_text": "", "digests": {"md5": "896343d8a58123be7541f332bccd6a15", "sha256": "35daf7d740598fe7939c6fec8c37caca614b5add81b406d05a3209fc8f9899aa"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "896343d8a58123be7541f332bccd6a15", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 6632, "upload_time": "2020-03-06T14:18:22", "upload_time_iso_8601": "2020-03-06T14:18:22.009705Z", "url": "https://files.pythonhosted.org/packages/be/10/aa3637e7922ec8ab593cb31db1c923d0d89af5ad149e463ef813e5d1976a/appuio_routes_monitoring-1.2.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "888df2acf072aba70fc5bd26749d66f2", "sha256": "5c3e315b51b134d47743fa26db2b07988e22f3d66c6176f7edb3d159c037d496"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.2.1.tar.gz", "has_sig": false, "md5_digest": "888df2acf072aba70fc5bd26749d66f2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 5264, "upload_time": "2020-03-06T14:18:14", "upload_time_iso_8601": "2020-03-06T14:18:14.461403Z", "url": "https://files.pythonhosted.org/packages/ea/5d/4c4e101e7befb15ac30932bd6ccc293e13f5d18b3c82b162ca7676201d3e/appuio_routes_monitoring-1.2.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "896343d8a58123be7541f332bccd6a15", "sha256": "35daf7d740598fe7939c6fec8c37caca614b5add81b406d05a3209fc8f9899aa"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "896343d8a58123be7541f332bccd6a15", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 6632, "upload_time": "2020-03-06T14:18:22", "upload_time_iso_8601": "2020-03-06T14:18:22.009705Z", "url": "https://files.pythonhosted.org/packages/be/10/aa3637e7922ec8ab593cb31db1c923d0d89af5ad149e463ef813e5d1976a/appuio_routes_monitoring-1.2.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "888df2acf072aba70fc5bd26749d66f2", "sha256": "5c3e315b51b134d47743fa26db2b07988e22f3d66c6176f7edb3d159c037d496"}, "downloads": -1, "filename": "appuio_routes_monitoring-1.2.1.tar.gz", "has_sig": false, "md5_digest": "888df2acf072aba70fc5bd26749d66f2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 5264, "upload_time": "2020-03-06T14:18:14", "upload_time_iso_8601": "2020-03-06T14:18:14.461403Z", "url": "https://files.pythonhosted.org/packages/ea/5d/4c4e101e7befb15ac30932bd6ccc293e13f5d18b3c82b162ca7676201d3e/appuio_routes_monitoring-1.2.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:17:34 2020"}