{"info": {"author": "Christo Crampton", "author_email": "info@38.co.za", "bugtrack_url": null, "classifiers": ["Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# Sage Pay lib\n\n> **Note:** This library still refers to netcash. I'll update all references to NetCash in the future\n\nA simple library for interacting with Sage Pay SOAP services\n\n## Installation\n\n```\npip install python-netcash\n```\n\n## Usage\n\nThe preferred way to interact with the repo is using docker.\n\n### Quick commands:\n\n**Run the tests**\n\n> Warning: These are integration tests and will hit the netcash endpoints\n\n```bash\ndocker-compose up\n```\n\n- See: `tests.py` for example code\n\nYou must provide the following environment variables in `env.dev` (you can copy `env.example` and put your values in):\n\nNETCASH_MERCHANT_ACCOUNT=...\nNETCASH_SOFTWARE_VENDOR_KEY=...\n\nYou customer will provide:\n\nNETCASH_SERVICE_ID=...\nNETCASH_SERVICE_KEY=...\n\n## Integration requirements\n\nIn order to integrate with Netcash, you will be required to implement the following functionality:\n\n**Tip:** You can get an interactive shell with:\n\n```\ndocker-compose run --rm netcash ipython\n```\n\n### Setup the client\n\n```python\n# get environment variables into constants:\nfrom netcash.client import Netcash\nimport os\n\nNETCASH_MERCHANT_ACCOUNT = os.environ.get(\"NETCASH_MERCHANT_ACCOUNT\")\nNETCASH_SOFTWARE_VENDOR_KEY = os.environ.get(\"NETCASH_SOFTWARE_VENDOR_KEY\")\n\nservice_id = ...\nservice_key = ...\n\nnetcash = Netcash(NETCASH_MERCHANT_ACCOUNT, NETCASH_SOFTWARE_VENDOR_KEY)\n```\n\n### Validate service key\n\n```python\n# returns a boolean True if valid account. Otherwise False\nnetcash.validate_service_key(service_id, service_key)\n```\n\n### Request and retrieve merchant statement\n\n```python\n# request a statement:\n\n# this is just for readability:\nfrom datetime import date, timedelta\n\nfrom_date = date.today() - timedelta(days=7) # get the last week's worth of transactions\n\npolling_id = netcash.request_merchant_statement(\n    from_date=from_date, service_key=service_key,\n)\nres = netcash.retrieve_merchant_statement(\n    polling_id, service_key=service_key, as_csv_reader=True\n)\nfor row in res.rows:\n    print(row)\n\n>> ['2020-04-14', 'OBL', '0', 'Opening Balance', '0.0000', '+', '0', '', '', '']\n>> ['2020-04-14', 'CBL', '0', 'Closing Balance', '0.0000', '+', '0']\n```\n\n## Paynow\n\nCreating a form to initiate a PayNow request:\n\n```html\n<form method=\"POST\"\n    action=\"https://paynow.netcash.co.za/site/paynow.aspx\" target=\"_top\">\n  <input type=\"hidden\" name=\"M1\" value=\"..\">  <!--- YOUR PAY NOW SERVICE KEY GOES IN HERE --->\n  <input type=\"hidden\" name=\"M2\" value=\"..\">  <!--- SOFTWARE VENDOR KEY GOES IN HERE --->\n  <input type=\"hidden\" name=\"P2\" value=\"\">  <!--- TRANSACTION_ID --->\n  <input type=\"hidden\" name=\"P3\" value=\"\">  <!--- TRANSACTION DESCRIPTION --->\n  <input type=\"hidden\" name=\"P4\" value=\"\">  <!--- TRANSACTION AMOUNT --->\n\n  <!--- ARBITARY FIELDS FOR STORING ANY INFORMATION YOU MIGHT NEED (E.G.: REFERENCES ETC) --->\n  <input type=\"hidden\" name=\"M4\" value=\"\">\n  <input type=\"hidden\" name=\"M5\" value=\"\">\n  <input type=\"hidden\" name=\"M6\" value=\"\">\n\n  <input type=\"hidden\" name=\"M9\" value=\"\"> <!--- CARDHOLDER EMAIL --->\n  <input type=\"hidden\" name=\"M11\" value=\"\"> <!--- CARDHOLDER MOBILE NUMBER --->\n\n  <input type=\"hidden\" name=\"Budget\" value=\"Y\">  <!--- REQUIRED, MUST BE Y --->\n</form>\n```\n\n* Documentation on all the fields can be found [here](https://api.netcash.co.za/integration/Inbound%20Payments/paynow_gateway#post-to-the-pay-now-page)\n* [Logos and press kit](https://netcash.co.za/logo-download-centre/)\n\n## Contributing\n\nThis library is pretty simple. To add support for a new web method do:\n\n1. Add a payload to `sagepay/payloads.py`\n2. Add a method to wrap request in `sagepay/client.py`", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://gitlab.com/schoolorchestration/libs/python-netcash", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "python-netcash", "package_url": "https://pypi.org/project/python-netcash/", "platform": "", "project_url": "https://pypi.org/project/python-netcash/", "project_urls": {"Homepage": "https://gitlab.com/schoolorchestration/libs/python-netcash"}, "release_url": "https://pypi.org/project/python-netcash/0.0.1/", "requires_dist": null, "requires_python": "", "summary": "", "version": "0.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Sage Pay lib</h1>\n<blockquote>\n<p><strong>Note:</strong> This library still refers to netcash. I'll update all references to NetCash in the future</p>\n</blockquote>\n<p>A simple library for interacting with Sage Pay SOAP services</p>\n<h2>Installation</h2>\n<pre><code>pip install python-netcash\n</code></pre>\n<h2>Usage</h2>\n<p>The preferred way to interact with the repo is using docker.</p>\n<h3>Quick commands:</h3>\n<p><strong>Run the tests</strong></p>\n<blockquote>\n<p>Warning: These are integration tests and will hit the netcash endpoints</p>\n</blockquote>\n<pre>docker-compose up\n</pre>\n<ul>\n<li>See: <code>tests.py</code> for example code</li>\n</ul>\n<p>You must provide the following environment variables in <code>env.dev</code> (you can copy <code>env.example</code> and put your values in):</p>\n<p>NETCASH_MERCHANT_ACCOUNT=...\nNETCASH_SOFTWARE_VENDOR_KEY=...</p>\n<p>You customer will provide:</p>\n<p>NETCASH_SERVICE_ID=...\nNETCASH_SERVICE_KEY=...</p>\n<h2>Integration requirements</h2>\n<p>In order to integrate with Netcash, you will be required to implement the following functionality:</p>\n<p><strong>Tip:</strong> You can get an interactive shell with:</p>\n<pre><code>docker-compose run --rm netcash ipython\n</code></pre>\n<h3>Setup the client</h3>\n<pre><span class=\"c1\"># get environment variables into constants:</span>\n<span class=\"kn\">from</span> <span class=\"nn\">netcash.client</span> <span class=\"kn\">import</span> <span class=\"n\">Netcash</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n\n<span class=\"n\">NETCASH_MERCHANT_ACCOUNT</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"NETCASH_MERCHANT_ACCOUNT\"</span><span class=\"p\">)</span>\n<span class=\"n\">NETCASH_SOFTWARE_VENDOR_KEY</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"NETCASH_SOFTWARE_VENDOR_KEY\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">service_id</span> <span class=\"o\">=</span> <span class=\"o\">...</span>\n<span class=\"n\">service_key</span> <span class=\"o\">=</span> <span class=\"o\">...</span>\n\n<span class=\"n\">netcash</span> <span class=\"o\">=</span> <span class=\"n\">Netcash</span><span class=\"p\">(</span><span class=\"n\">NETCASH_MERCHANT_ACCOUNT</span><span class=\"p\">,</span> <span class=\"n\">NETCASH_SOFTWARE_VENDOR_KEY</span><span class=\"p\">)</span>\n</pre>\n<h3>Validate service key</h3>\n<pre><span class=\"c1\"># returns a boolean True if valid account. Otherwise False</span>\n<span class=\"n\">netcash</span><span class=\"o\">.</span><span class=\"n\">validate_service_key</span><span class=\"p\">(</span><span class=\"n\">service_id</span><span class=\"p\">,</span> <span class=\"n\">service_key</span><span class=\"p\">)</span>\n</pre>\n<h3>Request and retrieve merchant statement</h3>\n<pre><span class=\"c1\"># request a statement:</span>\n\n<span class=\"c1\"># this is just for readability:</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">date</span><span class=\"p\">,</span> <span class=\"n\">timedelta</span>\n\n<span class=\"n\">from_date</span> <span class=\"o\">=</span> <span class=\"n\">date</span><span class=\"o\">.</span><span class=\"n\">today</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">=</span><span class=\"mi\">7</span><span class=\"p\">)</span> <span class=\"c1\"># get the last week's worth of transactions</span>\n\n<span class=\"n\">polling_id</span> <span class=\"o\">=</span> <span class=\"n\">netcash</span><span class=\"o\">.</span><span class=\"n\">request_merchant_statement</span><span class=\"p\">(</span>\n    <span class=\"n\">from_date</span><span class=\"o\">=</span><span class=\"n\">from_date</span><span class=\"p\">,</span> <span class=\"n\">service_key</span><span class=\"o\">=</span><span class=\"n\">service_key</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n<span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">netcash</span><span class=\"o\">.</span><span class=\"n\">retrieve_merchant_statement</span><span class=\"p\">(</span>\n    <span class=\"n\">polling_id</span><span class=\"p\">,</span> <span class=\"n\">service_key</span><span class=\"o\">=</span><span class=\"n\">service_key</span><span class=\"p\">,</span> <span class=\"n\">as_csv_reader</span><span class=\"o\">=</span><span class=\"kc\">True</span>\n<span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">row</span> <span class=\"ow\">in</span> <span class=\"n\">res</span><span class=\"o\">.</span><span class=\"n\">rows</span><span class=\"p\">:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;</span> <span class=\"p\">[</span><span class=\"s1\">'2020-04-14'</span><span class=\"p\">,</span> <span class=\"s1\">'OBL'</span><span class=\"p\">,</span> <span class=\"s1\">'0'</span><span class=\"p\">,</span> <span class=\"s1\">'Opening Balance'</span><span class=\"p\">,</span> <span class=\"s1\">'0.0000'</span><span class=\"p\">,</span> <span class=\"s1\">'+'</span><span class=\"p\">,</span> <span class=\"s1\">'0'</span><span class=\"p\">,</span> <span class=\"s1\">''</span><span class=\"p\">,</span> <span class=\"s1\">''</span><span class=\"p\">,</span> <span class=\"s1\">''</span><span class=\"p\">]</span>\n<span class=\"o\">&gt;&gt;</span> <span class=\"p\">[</span><span class=\"s1\">'2020-04-14'</span><span class=\"p\">,</span> <span class=\"s1\">'CBL'</span><span class=\"p\">,</span> <span class=\"s1\">'0'</span><span class=\"p\">,</span> <span class=\"s1\">'Closing Balance'</span><span class=\"p\">,</span> <span class=\"s1\">'0.0000'</span><span class=\"p\">,</span> <span class=\"s1\">'+'</span><span class=\"p\">,</span> <span class=\"s1\">'0'</span><span class=\"p\">]</span>\n</pre>\n<h2>Paynow</h2>\n<p>Creating a form to initiate a PayNow request:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"POST\"</span>\n    <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"https://paynow.netcash.co.za/site/paynow.aspx\"</span> <span class=\"na\">target</span><span class=\"o\">=</span><span class=\"s\">\"_top\"</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"M1\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"..\"</span><span class=\"p\">&gt;</span>  <span class=\"c\">&lt;!--- YOUR PAY NOW SERVICE KEY GOES IN HERE ---&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"M2\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"..\"</span><span class=\"p\">&gt;</span>  <span class=\"c\">&lt;!--- SOFTWARE VENDOR KEY GOES IN HERE ---&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"P2\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;</span>  <span class=\"c\">&lt;!--- TRANSACTION_ID ---&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"P3\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;</span>  <span class=\"c\">&lt;!--- TRANSACTION DESCRIPTION ---&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"P4\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;</span>  <span class=\"c\">&lt;!--- TRANSACTION AMOUNT ---&gt;</span>\n\n  <span class=\"c\">&lt;!--- ARBITARY FIELDS FOR STORING ANY INFORMATION YOU MIGHT NEED (E.G.: REFERENCES ETC) ---&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"M4\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"M5\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"M6\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;</span>\n\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"M9\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;</span> <span class=\"c\">&lt;!--- CARDHOLDER EMAIL ---&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"M11\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;</span> <span class=\"c\">&lt;!--- CARDHOLDER MOBILE NUMBER ---&gt;</span>\n\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"hidden\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"Budget\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"Y\"</span><span class=\"p\">&gt;</span>  <span class=\"c\">&lt;!--- REQUIRED, MUST BE Y ---&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<ul>\n<li>Documentation on all the fields can be found <a href=\"https://api.netcash.co.za/integration/Inbound%20Payments/paynow_gateway#post-to-the-pay-now-page\" rel=\"nofollow\">here</a></li>\n<li><a href=\"https://netcash.co.za/logo-download-centre/\" rel=\"nofollow\">Logos and press kit</a></li>\n</ul>\n<h2>Contributing</h2>\n<p>This library is pretty simple. To add support for a new web method do:</p>\n<ol>\n<li>Add a payload to <code>sagepay/payloads.py</code></li>\n<li>Add a method to wrap request in <code>sagepay/client.py</code></li>\n</ol>\n\n          </div>"}, "last_serial": 7070529, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "e5e755e608d107c3d5e655d090179200", "sha256": "d4ccc371430dcc4d0179802463569409c1b6ae5f6a5ac556649f8aecedd07750"}, "downloads": -1, "filename": "python-netcash-0.0.1.tar.gz", "has_sig": false, "md5_digest": "e5e755e608d107c3d5e655d090179200", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4342, "upload_time": "2020-04-21T19:05:50", "upload_time_iso_8601": "2020-04-21T19:05:50.630042Z", "url": "https://files.pythonhosted.org/packages/14/54/9efc1e0f0f6963b9e78344ed3a162e74887da82c0deaea49aa1e09966cbd/python-netcash-0.0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "e5e755e608d107c3d5e655d090179200", "sha256": "d4ccc371430dcc4d0179802463569409c1b6ae5f6a5ac556649f8aecedd07750"}, "downloads": -1, "filename": "python-netcash-0.0.1.tar.gz", "has_sig": false, "md5_digest": "e5e755e608d107c3d5e655d090179200", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4342, "upload_time": "2020-04-21T19:05:50", "upload_time_iso_8601": "2020-04-21T19:05:50.630042Z", "url": "https://files.pythonhosted.org/packages/14/54/9efc1e0f0f6963b9e78344ed3a162e74887da82c0deaea49aa1e09966cbd/python-netcash-0.0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:16:24 2020"}