{"info": {"author": "Lev Kokotov", "author_email": "lev.kokotov@instacart.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "[![Build Status](https://travis-ci.com/levkk/pg-logical-manager.svg?branch=master)](https://travis-ci.com/levkk/pg-logical-manager)\n\n# pg-logical-manager\nManage logical replication for your PostgreSQL cluster. Simply create/drop/enable/disable/list subscriptions.\n\nIncludes other more risky but interesting abilities like:\n1. rewinding subscriptions, i.e. moving back and forth between LSNs,\n2. creating reverse subscriptions, i.e. send data from replica to primary instead after replica promotion.\n\n[Pg Logical Manager Demo](https://i.imgur.com/bXpufEm.gif)\n\n## Setup\n\n## Pypi (production)\n\nSimply `pip install pglogicalmanager`.\n\n### Virtual environment (development)\n\n1. `pip install virtualenv`\n2. `virtualenv venv --python=python3`\n3. `source .venv/bin/activate`\n4. `pip install -e \".[dev]\"`\n\nWhen developing inside the virtual environment, use\n\n```bash\n$ python -m pglogicalmanager\n```\n\ninstead of\n\n```bash\n$ pglogicalmanager\n```\n\nfor all commands.\n\n### Configuration\n\n```bash\n$ pglogicalmanager --source=postgres://user:password@primary-db:5432/database --destination=postgres://user:password@replica-db:5432/database\n```\n\nThis will write a `.env` file in the same current folder. It will contain the DSNs above.\n\n### Make sure it works\n\n```bash\n$ pglogicalmanager list-subscriptions\n```\n\n## Usage\n\nCheck out the help menu:\n\n```bash\n$ pglogicalmanager --help\n```\n\n## Features\n\n### Basic features\n\nYou can easily list, create, drop, disable, and enable subscriptions. These sit directly on top of Postgres primitives (i.e. `CREATE SUBSCRIPTION`, `DROP SUBSCRIPTION`, etc.) and are fairly well-known. You can also list tables in source/destination and list columns in those tables.\n\n### Advanced (read risky) features\n\nLogical replication is powerful and flexible, and it allows you to do things binary replication can't do. Features we found useful and which are implemented here are:\n\n1. rewind subscription to specific LSN,\n2. reverse subscriptions,\n3. manually create/drop replication slots.\n\n#### Rewind subscription\n\nRewinding a subscription makes it replicate from a paritcular point-in-time. This works like `pg_rewind` except on a live cluster and without changing the WAL timeline. Note: _this is pretty dangerous_. If you rewind it to a wrong spot, you could create conflicts (unique contraint violations, for example) and the replication can break.\n\n```bash\n$ pglogicalmanager list-replication-origins\n$ pglogicalmanager rewind-replication-origin --help\n```\n\nTODO: Document use cases.\n\n#### Reverse subscription\n\nReversing a subscription is switching roles between the primary and the replica: the replica becomes the primary and the primary becomes the replica. This makes sense if you are promoting the replica to become the new primary and you want the old primary to be kept around for backup/rollback purposes. This is not as risky as rewinding, but it is irreverisble: once done, the replica must be the source for all writes, otherwise a split brain situation will be created.\n\n\n```bash\n$ pglogicalmanager reverse-subscription --help\n```\n\nThis will also overwrite your `.env` configuration and change the source DSN to the destination DSN and vice versa.\n\n#### Manually creating replication slots\n\nCreating replication slots is useful to tell your source (primary) to preserve WAL segments from the point of creation of the slot. The inheritent danger is running out of space on write-heavy systems, since WAL segments won't be cleaned up, and busy servers write a lot of WAL!\n\n```bash\n$ pglogicalmanager create-replication-slot test_slot\n```\n\nand see all current replication slots with\n\n```bash\n$ pglogicalmanager list-replication-slots\n```\n\nTODO: Document use cases.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/levkk/pg-logical-manager", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "pg-logical-manager", "package_url": "https://pypi.org/project/pg-logical-manager/", "platform": "", "project_url": "https://pypi.org/project/pg-logical-manager/", "project_urls": {"Homepage": "https://github.com/levkk/pg-logical-manager"}, "release_url": "https://pypi.org/project/pg-logical-manager/0.4.3/", "requires_dist": ["Click (>=7.0)", "colorama (>=0.4.3)", "prettytable (>=0.7.2)", "psycopg2 (>=2.8.4)", "python-dotenv (>=0.10.3)", "pytest ; extra == 'dev'"], "requires_python": ">=3.6", "summary": "View and manage logical subscriptions for a PostgreSQL cluster.", "version": "0.4.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://travis-ci.com/levkk/pg-logical-manager\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/65fe57889bec90fe1083830b60006d5c15c96514/68747470733a2f2f7472617669732d63692e636f6d2f6c65766b6b2f70672d6c6f676963616c2d6d616e616765722e7376673f6272616e63683d6d6173746572\"></a></p>\n<h1>pg-logical-manager</h1>\n<p>Manage logical replication for your PostgreSQL cluster. Simply create/drop/enable/disable/list subscriptions.</p>\n<p>Includes other more risky but interesting abilities like:</p>\n<ol>\n<li>rewinding subscriptions, i.e. moving back and forth between LSNs,</li>\n<li>creating reverse subscriptions, i.e. send data from replica to primary instead after replica promotion.</li>\n</ol>\n<p><a href=\"https://i.imgur.com/bXpufEm.gif\" rel=\"nofollow\">Pg Logical Manager Demo</a></p>\n<h2>Setup</h2>\n<h2>Pypi (production)</h2>\n<p>Simply <code>pip install pglogicalmanager</code>.</p>\n<h3>Virtual environment (development)</h3>\n<ol>\n<li><code>pip install virtualenv</code></li>\n<li><code>virtualenv venv --python=python3</code></li>\n<li><code>source .venv/bin/activate</code></li>\n<li><code>pip install -e \".[dev]\"</code></li>\n</ol>\n<p>When developing inside the virtual environment, use</p>\n<pre>$ python -m pglogicalmanager\n</pre>\n<p>instead of</p>\n<pre>$ pglogicalmanager\n</pre>\n<p>for all commands.</p>\n<h3>Configuration</h3>\n<pre>$ pglogicalmanager --source<span class=\"o\">=</span>postgres://user:password@primary-db:5432/database --destination<span class=\"o\">=</span>postgres://user:password@replica-db:5432/database\n</pre>\n<p>This will write a <code>.env</code> file in the same current folder. It will contain the DSNs above.</p>\n<h3>Make sure it works</h3>\n<pre>$ pglogicalmanager list-subscriptions\n</pre>\n<h2>Usage</h2>\n<p>Check out the help menu:</p>\n<pre>$ pglogicalmanager --help\n</pre>\n<h2>Features</h2>\n<h3>Basic features</h3>\n<p>You can easily list, create, drop, disable, and enable subscriptions. These sit directly on top of Postgres primitives (i.e. <code>CREATE SUBSCRIPTION</code>, <code>DROP SUBSCRIPTION</code>, etc.) and are fairly well-known. You can also list tables in source/destination and list columns in those tables.</p>\n<h3>Advanced (read risky) features</h3>\n<p>Logical replication is powerful and flexible, and it allows you to do things binary replication can't do. Features we found useful and which are implemented here are:</p>\n<ol>\n<li>rewind subscription to specific LSN,</li>\n<li>reverse subscriptions,</li>\n<li>manually create/drop replication slots.</li>\n</ol>\n<h4>Rewind subscription</h4>\n<p>Rewinding a subscription makes it replicate from a paritcular point-in-time. This works like <code>pg_rewind</code> except on a live cluster and without changing the WAL timeline. Note: <em>this is pretty dangerous</em>. If you rewind it to a wrong spot, you could create conflicts (unique contraint violations, for example) and the replication can break.</p>\n<pre>$ pglogicalmanager list-replication-origins\n$ pglogicalmanager rewind-replication-origin --help\n</pre>\n<p>TODO: Document use cases.</p>\n<h4>Reverse subscription</h4>\n<p>Reversing a subscription is switching roles between the primary and the replica: the replica becomes the primary and the primary becomes the replica. This makes sense if you are promoting the replica to become the new primary and you want the old primary to be kept around for backup/rollback purposes. This is not as risky as rewinding, but it is irreverisble: once done, the replica must be the source for all writes, otherwise a split brain situation will be created.</p>\n<pre>$ pglogicalmanager reverse-subscription --help\n</pre>\n<p>This will also overwrite your <code>.env</code> configuration and change the source DSN to the destination DSN and vice versa.</p>\n<h4>Manually creating replication slots</h4>\n<p>Creating replication slots is useful to tell your source (primary) to preserve WAL segments from the point of creation of the slot. The inheritent danger is running out of space on write-heavy systems, since WAL segments won't be cleaned up, and busy servers write a lot of WAL!</p>\n<pre>$ pglogicalmanager create-replication-slot test_slot\n</pre>\n<p>and see all current replication slots with</p>\n<pre>$ pglogicalmanager list-replication-slots\n</pre>\n<p>TODO: Document use cases.</p>\n\n          </div>"}, "last_serial": 6403638, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "369002421daff5fc4c841f378e92e393", "sha256": "e1fed2d559650364bfc06aec37a54b6fed688bc89ad06244b2510dbd36808898"}, "downloads": -1, "filename": "pg_logical_manager-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "369002421daff5fc4c841f378e92e393", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 20619, "upload_time": "2019-12-29T21:49:39", "upload_time_iso_8601": "2019-12-29T21:49:39.743824Z", "url": "https://files.pythonhosted.org/packages/2b/c2/9ea08a60d0b58f2483807ed5958414265edc73c70b81f88fdd4d5533623d/pg_logical_manager-0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "828d47488d4bef6264e9186abc5329ae", "sha256": "d21f5090c22a14f9d5d5f4dd225468198e1f251eefc43696bda8680c6daaf197"}, "downloads": -1, "filename": "pg-logical-manager-0.1.tar.gz", "has_sig": false, "md5_digest": "828d47488d4bef6264e9186abc5329ae", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 8346, "upload_time": "2019-12-29T21:49:42", "upload_time_iso_8601": "2019-12-29T21:49:42.294451Z", "url": "https://files.pythonhosted.org/packages/70/c5/83d49cf881e9b2a5e8141ea497d94649921185ced011a73ac3d70315668a/pg-logical-manager-0.1.tar.gz", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "30a6d7e9fbb6f7795628b11997120e1a", "sha256": "bf53b1a508d914607a05f6c0b843a50275404ed4d0c9f314d5027456dfb53bb2"}, "downloads": -1, "filename": "pg_logical_manager-0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "30a6d7e9fbb6f7795628b11997120e1a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 20719, "upload_time": "2019-12-29T22:40:25", "upload_time_iso_8601": "2019-12-29T22:40:25.559937Z", "url": "https://files.pythonhosted.org/packages/ba/a6/999e5e71b05614ee9651077629639f3a98cfab40e19f73c232c9311ecbe7/pg_logical_manager-0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "12339fed4a7f23939f47f9b865d899da", "sha256": "630643d243648db75b55967ea02e3d1181f229c8815a045369d7edc027e3a8f6"}, "downloads": -1, "filename": "pg-logical-manager-0.2.tar.gz", "has_sig": false, "md5_digest": "12339fed4a7f23939f47f9b865d899da", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 8438, "upload_time": "2019-12-29T22:40:28", "upload_time_iso_8601": "2019-12-29T22:40:28.412435Z", "url": "https://files.pythonhosted.org/packages/61/1c/7dda9e08e70b02f28f5a9650cbaae4c8b410491e2cc8650ab04340ccaed3/pg-logical-manager-0.2.tar.gz", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "7ee9ebe31021fe3e5727fb6d77807b8e", "sha256": "ebf69add710b790ea3ced8448bf01d694a818d6e4647918077c8851301139613"}, "downloads": -1, "filename": "pg_logical_manager-0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "7ee9ebe31021fe3e5727fb6d77807b8e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 21110, "upload_time": "2020-01-02T22:04:18", "upload_time_iso_8601": "2020-01-02T22:04:18.757535Z", "url": "https://files.pythonhosted.org/packages/6f/d3/b80742793697b4116b09ef21497b69d943a79c67c5416e4e64c79bac1e42/pg_logical_manager-0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "7fef16f1b75da59f8f8c0c8942bfbea8", "sha256": "ed33466d460ddbcc2d21fd97f04ede6bc5f765984dc860845bec2d861f44e8ae"}, "downloads": -1, "filename": "pg-logical-manager-0.3.tar.gz", "has_sig": false, "md5_digest": "7fef16f1b75da59f8f8c0c8942bfbea8", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 8848, "upload_time": "2020-01-02T22:04:20", "upload_time_iso_8601": "2020-01-02T22:04:20.701435Z", "url": "https://files.pythonhosted.org/packages/1e/2a/fb2e14625142b9b6651fa99dc734de58e640f02eff0be5edf775082547a7/pg-logical-manager-0.3.tar.gz", "yanked": false}], "0.4": [{"comment_text": "", "digests": {"md5": "490266825813b77851797c0c692d0d98", "sha256": "dc0e9863397909663c8627d712bbb911d2ed28b0724502fd46f960ef1b00ab7e"}, "downloads": -1, "filename": "pg_logical_manager-0.4-py3-none-any.whl", "has_sig": false, "md5_digest": "490266825813b77851797c0c692d0d98", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 21550, "upload_time": "2020-01-02T22:36:32", "upload_time_iso_8601": "2020-01-02T22:36:32.384048Z", "url": "https://files.pythonhosted.org/packages/78/ed/63ff400ce0cd73b695e564b55398a7eb25a218e087a166c7e46ba7c8ba15/pg_logical_manager-0.4-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9b829236c45ffa997e1318b39589a3c6", "sha256": "2d664a3d6712fdfa3f4f10d6ee1a81e4140c20d05f0f2d230b75b60c940d05d3"}, "downloads": -1, "filename": "pg-logical-manager-0.4.tar.gz", "has_sig": false, "md5_digest": "9b829236c45ffa997e1318b39589a3c6", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 9157, "upload_time": "2020-01-02T22:36:36", "upload_time_iso_8601": "2020-01-02T22:36:36.066104Z", "url": "https://files.pythonhosted.org/packages/79/ee/6d5f7ef9b77c9cb498876992116f0b6575e025f811655e9efcc97537648d/pg-logical-manager-0.4.tar.gz", "yanked": false}], "0.4.1": [{"comment_text": "", "digests": {"md5": "409253cf801ce924586945d8f77ab2f6", "sha256": "099003c956b4a35f0220428f69f18d550f01b0df123488930ede0bcd8d4d4ae1"}, "downloads": -1, "filename": "pg_logical_manager-0.4.1-py3-none-any.whl", "has_sig": false, "md5_digest": "409253cf801ce924586945d8f77ab2f6", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 21590, "upload_time": "2020-01-02T22:51:12", "upload_time_iso_8601": "2020-01-02T22:51:12.357790Z", "url": "https://files.pythonhosted.org/packages/5f/7b/fcce6c4958dbaba9d750510b5fde170c7a9e681397b88dd5618ca1836966/pg_logical_manager-0.4.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "3c4e6b440f4112bce23a917d1889f7f4", "sha256": "cdbbe281e7ff91b4e49126bbdfbc5754316f35f234acfaccd582e6ed403141f1"}, "downloads": -1, "filename": "pg-logical-manager-0.4.1.tar.gz", "has_sig": false, "md5_digest": "3c4e6b440f4112bce23a917d1889f7f4", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 9182, "upload_time": "2020-01-02T22:51:15", "upload_time_iso_8601": "2020-01-02T22:51:15.483099Z", "url": "https://files.pythonhosted.org/packages/39/cf/9ee67b35a36afaddfceb74eda6dcb483e28ac6bcc347300d177702dae052/pg-logical-manager-0.4.1.tar.gz", "yanked": false}], "0.4.2": [{"comment_text": "", "digests": {"md5": "f16c5c573686a2e9c7c092185e45f560", "sha256": "0066629c0a36c6e9c3182603166bb2fd4fc305b3863aab528015db34b33ec82a"}, "downloads": -1, "filename": "pg_logical_manager-0.4.2-py3-none-any.whl", "has_sig": false, "md5_digest": "f16c5c573686a2e9c7c092185e45f560", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 21602, "upload_time": "2020-01-03T00:27:37", "upload_time_iso_8601": "2020-01-03T00:27:37.436450Z", "url": "https://files.pythonhosted.org/packages/2b/6e/648d5cc430eb164e5b2f08114fa492e8a326e99dada8c3c759a6a6252425/pg_logical_manager-0.4.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "10fdb563af3c083065ded9cd542d8584", "sha256": "aa6f3f0fa3074b4c89c997b0b0339efe638a6bd1ff41860e4dbf443a2f445373"}, "downloads": -1, "filename": "pg-logical-manager-0.4.2.tar.gz", "has_sig": false, "md5_digest": "10fdb563af3c083065ded9cd542d8584", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 9192, "upload_time": "2020-01-03T00:27:41", "upload_time_iso_8601": "2020-01-03T00:27:41.007582Z", "url": "https://files.pythonhosted.org/packages/0b/b3/a76571abaad9141107b1e18c9b67299d6773b54a5aa330a6f5d947b7ada0/pg-logical-manager-0.4.2.tar.gz", "yanked": false}], "0.4.3": [{"comment_text": "", "digests": {"md5": "4eb537daf1d7b417f9184a71b4547596", "sha256": "a8a0963ef5fde5e5a87a631803593d17c1c17982cd59c30a2ca0eae551f7fcae"}, "downloads": -1, "filename": "pg_logical_manager-0.4.3-py3-none-any.whl", "has_sig": false, "md5_digest": "4eb537daf1d7b417f9184a71b4547596", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 21596, "upload_time": "2020-01-06T18:04:07", "upload_time_iso_8601": "2020-01-06T18:04:07.506901Z", "url": "https://files.pythonhosted.org/packages/ce/42/a83d7eaf5d38d3dbd70cf72db78a50b7c5a7f2d7ca62078c2a28214cd2a6/pg_logical_manager-0.4.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2bb1f2b3f2e3d2619c34840f6d02a554", "sha256": "54b200a14d9a87e4938c80548fb5880abe2c2ff0a97657f789e594229e71ab63"}, "downloads": -1, "filename": "pg-logical-manager-0.4.3.tar.gz", "has_sig": false, "md5_digest": "2bb1f2b3f2e3d2619c34840f6d02a554", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 9200, "upload_time": "2020-01-06T18:04:13", "upload_time_iso_8601": "2020-01-06T18:04:13.631395Z", "url": "https://files.pythonhosted.org/packages/c6/ac/5163567e1bd2719135c64c8930efb2c2e25a4a3d6bbd4ee0b20d71fee047/pg-logical-manager-0.4.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4eb537daf1d7b417f9184a71b4547596", "sha256": "a8a0963ef5fde5e5a87a631803593d17c1c17982cd59c30a2ca0eae551f7fcae"}, "downloads": -1, "filename": "pg_logical_manager-0.4.3-py3-none-any.whl", "has_sig": false, "md5_digest": "4eb537daf1d7b417f9184a71b4547596", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 21596, "upload_time": "2020-01-06T18:04:07", "upload_time_iso_8601": "2020-01-06T18:04:07.506901Z", "url": "https://files.pythonhosted.org/packages/ce/42/a83d7eaf5d38d3dbd70cf72db78a50b7c5a7f2d7ca62078c2a28214cd2a6/pg_logical_manager-0.4.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2bb1f2b3f2e3d2619c34840f6d02a554", "sha256": "54b200a14d9a87e4938c80548fb5880abe2c2ff0a97657f789e594229e71ab63"}, "downloads": -1, "filename": "pg-logical-manager-0.4.3.tar.gz", "has_sig": false, "md5_digest": "2bb1f2b3f2e3d2619c34840f6d02a554", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 9200, "upload_time": "2020-01-06T18:04:13", "upload_time_iso_8601": "2020-01-06T18:04:13.631395Z", "url": "https://files.pythonhosted.org/packages/c6/ac/5163567e1bd2719135c64c8930efb2c2e25a4a3d6bbd4ee0b20d71fee047/pg-logical-manager-0.4.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:55:47 2020"}