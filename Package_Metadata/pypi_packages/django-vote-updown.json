{"info": {"author": "", "author_email": "", "bugtrack_url": null, "classifiers": [], "description": "<!--\nhttps://pypi.org/project/readme-generator/\nhttps://pypi.org/project/python-readme-generator/\n-->\n\n[![](https://img.shields.io/pypi/pyversions/django-vote-updown.svg?longCache=True)](https://pypi.org/project/django-vote-updown/)\n[![](https://img.shields.io/badge/License-Unlicense-blue.svg?longCache=True)](https://unlicense.org/)\n\n#### Installation\n```bash\n$ [sudo] pip install django-vote-updown\n```\n\n#### Examples\n`settings.py`\n```python\nAUTH_USER_MODEL = 'users.User'\n```\n\n`users/models.py`\n```python\nfrom django.contrib.auth.models import AbstractUser\n\nclass User(AbstractUser):\n    ...\n```\n\n`my_app/models.py`\n```python\nfrom django_vote_updown.models import Vote\n\nclass ProjectVote(Vote):\n    obj = models.ForeignKey('Project',related_name=\"+\",on_delete=models.CASCADE)\n\n    class Meta:\n        db_table = 'project_vote'\n        unique_together = [('obj', 'created_by')]\n```\n\n`views.py`\n```python\nfrom django.views.generic.base import TemplateView\nfrom django_vote_updown.views import VoteDownAjaxView, VoteUpAjaxView, VoteViewMixin\nfrom my_app.models import Project, ProjectVote\n\nclass VoteViewMixin:\n    vote_model = ProjectVote\n\n    def get_json_data(self,obj_id,is_up):\n        project = Project.objects.get(id=obj_id)\n        return {'is_up':is_up,'votes_up_count':project.votes_up_count,'votes_down_count':project.votes_down_count}\n\nclass VoteDownAjaxView(VoteViewMixin,VoteDownAjaxView):\n    pass\n\nclass VoteUpAjaxView(VoteViewMixin,VoteUpAjaxView):\n    pass\n\nclass ProjectDetailView(VoteViewMixin,TemplateView):\n    template_name = 'my_app/project_detail.html'\n    vote_model = ProjectVote\n\n    def get_vote_obj(self):\n        return self.project\n\n    def vote_down_url(self):\n        return '/project/vote/down/%s' % self.project.id\n\n    def vote_up_url(self):\n        return '/project/vote/up/%s' % self.project.id\n```\n\n`urls.py`\n\n```python\nurlpatterns = [\n    path('down/<int:obj_id>', views.VoteDownAjaxView.as_view(),name='down'),\n    path('up/<int:obj_id>', views.VoteUpAjaxView.as_view(),name='up'),\n]\n```\n\n`my_app/project_detail.html`\n```html\n<a data-id=\"{{ vote_obj.pk }}\" {% if request.user.is_authenticated %}data-href=\"{{ vote_down_url }}\"{% else %}href=\"{% url 'login' %}?next={{ request.path }}\"{% endif %}>down</a>\n\n<a data-id=\"{{ vote_obj.pk }}\" {% if request.user.is_authenticated %}data-href=\"{{ vote_up_url }}\"{% else %}href=\"{% url 'login' %}?next={{ request.path }}\"{% endif %}>up</a>\n```\n\n`vote.js`\n```javascript\n// your code ...\n```\n\n<p align=\"center\">\n    <a href=\"https://pypi.org/project/python-readme-generator/\">python-readme-generator</a>\n</p>", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/andrewp-as-is/django-vote-updown.py", "keywords": "django,vote", "license": "Unlicense", "maintainer": "", "maintainer_email": "", "name": "django-vote-updown", "package_url": "https://pypi.org/project/django-vote-updown/", "platform": "", "project_url": "https://pypi.org/project/django-vote-updown/", "project_urls": {"Homepage": "https://github.com/andrewp-as-is/django-vote-updown.py"}, "release_url": "https://pypi.org/project/django-vote-updown/2020.4.11/", "requires_dist": null, "requires_python": "", "summary": "Django abstract model and views for up/down voting", "version": "2020.4.11", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://pypi.org/project/django-vote-updown/\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3937fa5796c899c590a9ff8931c102254bceab1e/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f646a616e676f2d766f74652d7570646f776e2e7376673f6c6f6e6743616368653d54727565\"></a>\n<a href=\"https://unlicense.org/\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f4e8a8f9c20068b8993eef25e402898571038660/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d556e6c6963656e73652d626c75652e7376673f6c6f6e6743616368653d54727565\"></a></p>\n<h4>Installation</h4>\n<pre>$ <span class=\"o\">[</span>sudo<span class=\"o\">]</span> pip install django-vote-updown\n</pre>\n<h4>Examples</h4>\n<p><code>settings.py</code></p>\n<pre><span class=\"n\">AUTH_USER_MODEL</span> <span class=\"o\">=</span> <span class=\"s1\">'users.User'</span>\n</pre>\n<p><code>users/models.py</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.contrib.auth.models</span> <span class=\"kn\">import</span> <span class=\"n\">AbstractUser</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">User</span><span class=\"p\">(</span><span class=\"n\">AbstractUser</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span>\n</pre>\n<p><code>my_app/models.py</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django_vote_updown.models</span> <span class=\"kn\">import</span> <span class=\"n\">Vote</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">ProjectVote</span><span class=\"p\">(</span><span class=\"n\">Vote</span><span class=\"p\">):</span>\n    <span class=\"n\">obj</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"s1\">'Project'</span><span class=\"p\">,</span><span class=\"n\">related_name</span><span class=\"o\">=</span><span class=\"s2\">\"+\"</span><span class=\"p\">,</span><span class=\"n\">on_delete</span><span class=\"o\">=</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CASCADE</span><span class=\"p\">)</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">db_table</span> <span class=\"o\">=</span> <span class=\"s1\">'project_vote'</span>\n        <span class=\"n\">unique_together</span> <span class=\"o\">=</span> <span class=\"p\">[(</span><span class=\"s1\">'obj'</span><span class=\"p\">,</span> <span class=\"s1\">'created_by'</span><span class=\"p\">)]</span>\n</pre>\n<p><code>views.py</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.views.generic.base</span> <span class=\"kn\">import</span> <span class=\"n\">TemplateView</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django_vote_updown.views</span> <span class=\"kn\">import</span> <span class=\"n\">VoteDownAjaxView</span><span class=\"p\">,</span> <span class=\"n\">VoteUpAjaxView</span><span class=\"p\">,</span> <span class=\"n\">VoteViewMixin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">my_app.models</span> <span class=\"kn\">import</span> <span class=\"n\">Project</span><span class=\"p\">,</span> <span class=\"n\">ProjectVote</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">VoteViewMixin</span><span class=\"p\">:</span>\n    <span class=\"n\">vote_model</span> <span class=\"o\">=</span> <span class=\"n\">ProjectVote</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get_json_data</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"n\">obj_id</span><span class=\"p\">,</span><span class=\"n\">is_up</span><span class=\"p\">):</span>\n        <span class=\"n\">project</span> <span class=\"o\">=</span> <span class=\"n\">Project</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"n\">obj_id</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s1\">'is_up'</span><span class=\"p\">:</span><span class=\"n\">is_up</span><span class=\"p\">,</span><span class=\"s1\">'votes_up_count'</span><span class=\"p\">:</span><span class=\"n\">project</span><span class=\"o\">.</span><span class=\"n\">votes_up_count</span><span class=\"p\">,</span><span class=\"s1\">'votes_down_count'</span><span class=\"p\">:</span><span class=\"n\">project</span><span class=\"o\">.</span><span class=\"n\">votes_down_count</span><span class=\"p\">}</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">VoteDownAjaxView</span><span class=\"p\">(</span><span class=\"n\">VoteViewMixin</span><span class=\"p\">,</span><span class=\"n\">VoteDownAjaxView</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">VoteUpAjaxView</span><span class=\"p\">(</span><span class=\"n\">VoteViewMixin</span><span class=\"p\">,</span><span class=\"n\">VoteUpAjaxView</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">ProjectDetailView</span><span class=\"p\">(</span><span class=\"n\">VoteViewMixin</span><span class=\"p\">,</span><span class=\"n\">TemplateView</span><span class=\"p\">):</span>\n    <span class=\"n\">template_name</span> <span class=\"o\">=</span> <span class=\"s1\">'my_app/project_detail.html'</span>\n    <span class=\"n\">vote_model</span> <span class=\"o\">=</span> <span class=\"n\">ProjectVote</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get_vote_obj</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">project</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">vote_down_url</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"s1\">'/project/vote/down/</span><span class=\"si\">%s</span><span class=\"s1\">'</span> <span class=\"o\">%</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">project</span><span class=\"o\">.</span><span class=\"n\">id</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">vote_up_url</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"s1\">'/project/vote/up/</span><span class=\"si\">%s</span><span class=\"s1\">'</span> <span class=\"o\">%</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">project</span><span class=\"o\">.</span><span class=\"n\">id</span>\n</pre>\n<p><code>urls.py</code></p>\n<pre><span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s1\">'down/&lt;int:obj_id&gt;'</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">VoteDownAjaxView</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'down'</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s1\">'up/&lt;int:obj_id&gt;'</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">VoteUpAjaxView</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'up'</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre>\n<p><code>my_app/project_detail.html</code></p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">a</span> <span class=\"na\">data-id</span><span class=\"o\">=</span><span class=\"s\">\"{{ vote_obj.pk }}\"</span> <span class=\"err\">{%</span> <span class=\"na\">if</span> <span class=\"na\">request</span><span class=\"err\">.</span><span class=\"na\">user</span><span class=\"err\">.</span><span class=\"na\">is_authenticated</span> <span class=\"err\">%}</span><span class=\"na\">data-href</span><span class=\"o\">=</span><span class=\"s\">\"{{ vote_down_url }}\"</span><span class=\"err\">{%</span> <span class=\"na\">else</span> <span class=\"err\">%}</span><span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"{% url 'login' %}?next={{ request.path }}\"</span><span class=\"err\">{%</span> <span class=\"na\">endif</span> <span class=\"err\">%}</span><span class=\"p\">&gt;</span>down<span class=\"p\">&lt;/</span><span class=\"nt\">a</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">a</span> <span class=\"na\">data-id</span><span class=\"o\">=</span><span class=\"s\">\"{{ vote_obj.pk }}\"</span> <span class=\"err\">{%</span> <span class=\"na\">if</span> <span class=\"na\">request</span><span class=\"err\">.</span><span class=\"na\">user</span><span class=\"err\">.</span><span class=\"na\">is_authenticated</span> <span class=\"err\">%}</span><span class=\"na\">data-href</span><span class=\"o\">=</span><span class=\"s\">\"{{ vote_up_url }}\"</span><span class=\"err\">{%</span> <span class=\"na\">else</span> <span class=\"err\">%}</span><span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"{% url 'login' %}?next={{ request.path }}\"</span><span class=\"err\">{%</span> <span class=\"na\">endif</span> <span class=\"err\">%}</span><span class=\"p\">&gt;</span>up<span class=\"p\">&lt;/</span><span class=\"nt\">a</span><span class=\"p\">&gt;</span>\n</pre>\n<p><code>vote.js</code></p>\n<pre><span class=\"c1\">// your code ...</span>\n</pre>\n<p align=\"center\">\n    <a href=\"https://pypi.org/project/python-readme-generator/\" rel=\"nofollow\">python-readme-generator</a>\n</p>\n\n          </div>"}, "last_serial": 6999906, "releases": {"2020.4.10": [{"comment_text": "", "digests": {"md5": "a8f353993d6dfc02e00dc69859d05e6a", "sha256": "3980f8d3473efdf527655709c1a21457a8ac2f92d73fdcad62ad5338cdd54d32"}, "downloads": -1, "filename": "django-vote-updown-2020.4.10.tar.gz", "has_sig": false, "md5_digest": "a8f353993d6dfc02e00dc69859d05e6a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2603, "upload_time": "2020-04-11T14:08:06", "upload_time_iso_8601": "2020-04-11T14:08:06.743264Z", "url": "https://files.pythonhosted.org/packages/22/a9/4e5e28741214bdc236b8c2c914078b3634945b090845c12c8fc88a56386e/django-vote-updown-2020.4.10.tar.gz", "yanked": false}], "2020.4.11": [{"comment_text": "", "digests": {"md5": "74e33576be53f6913025033c51ce0712", "sha256": "5f7232994784e19a0847e7f410fce518342301dd39762efb59abff8199d8440b"}, "downloads": -1, "filename": "django-vote-updown-2020.4.11.tar.gz", "has_sig": false, "md5_digest": "74e33576be53f6913025033c51ce0712", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2607, "upload_time": "2020-04-11T14:53:35", "upload_time_iso_8601": "2020-04-11T14:53:35.509744Z", "url": "https://files.pythonhosted.org/packages/b3/f2/f36839b1642faf7eb3728c4f505b4b419f6fb9aadd1a21c6bc6b51b88636/django-vote-updown-2020.4.11.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "74e33576be53f6913025033c51ce0712", "sha256": "5f7232994784e19a0847e7f410fce518342301dd39762efb59abff8199d8440b"}, "downloads": -1, "filename": "django-vote-updown-2020.4.11.tar.gz", "has_sig": false, "md5_digest": "74e33576be53f6913025033c51ce0712", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2607, "upload_time": "2020-04-11T14:53:35", "upload_time_iso_8601": "2020-04-11T14:53:35.509744Z", "url": "https://files.pythonhosted.org/packages/b3/f2/f36839b1642faf7eb3728c4f505b4b419f6fb9aadd1a21c6bc6b51b88636/django-vote-updown-2020.4.11.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:51:59 2020"}