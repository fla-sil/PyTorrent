{"info": {"author": "Metin Senturk", "author_email": "metinsenturk@me.com", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Topic :: Scientific/Engineering :: Information Analysis"], "description": "## Flat-Table: Dictionary and List Normalizer\n\nThis package is a normalizer for [pandas](https://pandas.pydata.org/) dataframe objects that has dictionary or list objects within it's columns. The library will expand all of the columns that has data types in (list, dict) into individual seperate rows and columns.\n\nPS: Flat table will use the current index of the dataframe as an identifier while expanding lists. The output will have an index column of your original dataframe. You can drop it later if you not plan to use it.\n\n### To Install\n\nTo install, use pip.\n\n```\npip install flat-table\n```\n\n### How to Use It\n\nFrom a given pandas dataframe, the `index` of the dataframe will be used to create seperate columns and rows. \n\n``` python\n# some dataframe contains dicts and lists in it's columns\ndf = ...\n```\n\n``` python\nimport flat_table\n\nflat_table.normalize(df)\n```\n\nThis will give you all the keys in dictionaries as columns, and all the lists as seperate rows.\n\n### Example Illustration\n\nLets assume that you have a dataframe of the followings shape.\n\n\nid | user_info | address\n-- | --------- | ------ |\n1001 | { 'first_name': 'john', 'last_name': 'smith', 'phones': {'mobile': '201-..', 'home': '978-..'} }| [{ 'zip': '07014', 'city': 'clifton' }] |\n1002 | NaN| [{'zip': '07014', 'address1': '1 Journal Square'}]|\n1003 |\u00a0{ 'first_name': 'marry', 'last_name': 'kate', 'gender': 'female'  } |\u00a0[{ 'zip': '10001', 'city': 'new york' }, { 'zip': '10008', 'city': 'brooklyn' }]|\n\n\nThis table given above has some dictionaries and lists in it's columns. Normally, what you would do is to use `pd.io.json.json_normalize` function to expand dictionaries. However, in cases you have `NaN` values in your column, `pd.io.json.json_normalize` end up throwing an `AttributeError` error for `NaN` values because they are not of the same type. `flat_table` is a wraper around the `json_normalize` function where it expands it's abilities to be more robust for `NaN` values and also, it expands lists rowwise so that it will be more clear to see the information.\n\nFor the above table, the flatten table after applying `flat_table.normalize` will look like the following.\n\n|    |   index |   id | user_info.gender   | user_info.phones.home   | user_info.phones.mobile   | user_info.last_name   | user_info.first_name   | address.address1   | address.city   |   address.zip |\n|---:|--------:|-----:|:-------------------|:------------------------|:--------------------------|:----------------------|:-----------------------|:-------------------|:---------------|--------------:|\n|  0 |       0 | 1001 | nan                | 978-..                  | 201-..                    | smith                 | john                   | nan                | clifton        |         07014 |\n|  1 |       1 | 1002 | nan                | nan                     | nan                       | nan                   | nan                    | 1 Journal Square   | nan            |         07014 |\n|  2 |       2 | 1003 | female             | nan                     | nan                       | kate                  | marry                  | nan                | new york       |         10001 |\n|  3 |       2 | 1003 | female             | nan                     | nan                       | kate                  | marry                  | nan                | brooklyn       |         10008 |\n\n### New in Version 1.1.0\n\nThe expansion for dicts and lists made optional. Now, you can choose to expand list types and dict types with normalize function.\n\n``` python\nflat_table.normalize(df, expand_dicts=False, expand_lists=True)\n```\n\nNormalized version of df will be following.\n\n|    |   index |   id | user_info                                                                                      | address.address1   | address.city   |   address.zip |\n|---:|--------:|-----:|:-----------------------------------------------------------------------------------------------|:-------------------|:---------------|--------------:|\n|  0 |       0 | 1001 | {...} | nan                | clifton        |         07014 |\n|  1 |       1 | 1002 | nan                                                                                            | 1 Journal Square   | nan            |         07014 |\n|  2 |       2 | 1003 | {...}                               | nan                | new york       |         10001 |\n|  3 |       2 | 1003 | {...}                               | nan                | brooklyn       |         10008 |\n\n### How it Works?\n\nBasically, `flat_table` will look for each of the series in a dataframe to understand what type of data it contains. \n\nFor every series, it creates a list of information on how to expand it. It will go into all dictionaries and all lists in all levels and expand them as rows and columns. Dictionary `keys` will be used for column names, and The `index` of the giden dataframe will be used for row expansion.\n\nIf you want to see how the columns are mapped, you can use `flat_table.mapper` function to get all information about your columns in your original dataframe. For example, for the above table, the mapper function will provide the following table.\n\n|    | parent    | child                   | type   | obj   |\n|---:|:----------|:------------------------|:-------|:------|\n|  0 | .         | id                      | int    | ...   |\n|  1 | .         | user_info               | dict   | ...   |\n|  2 | user_info | user_info.gender        | str    | ...   |\n|  3 | user_info | user_info.phones.home   | str    | ...   |\n|  4 | user_info | user_info.phones.mobile | str    | ...   |\n|  5 | user_info | user_info.last_name     | str    | ...   |\n|  6 | user_info | user_info.first_name    | str    | ...   |\n|  7 | .         | address                 | list   | ...   |\n|  8 |           | address                 | dict   | ...   |\n|  9 | address   | address.address1        | str    | ...   |\n| 10 | address   | address.city            | str    | ...   |\n| 11 | address   | address.zip             | str    | ...   |\n\n## Licence\n\nLicence is use it at your own will, with whatever way you want it to use :smiley:.\n\n## Author\n\nBuild by [@metinsenturk](https://github.com/metinsenturk/)\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/metinsenturk/flat_table", "keywords": "pandas,json_normalize,dict_to_columns,flatten", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "flat-table", "package_url": "https://pypi.org/project/flat-table/", "platform": "", "project_url": "https://pypi.org/project/flat-table/", "project_urls": {"Homepage": "https://github.com/metinsenturk/flat_table"}, "release_url": "https://pypi.org/project/flat-table/1.1.0/", "requires_dist": ["pandas"], "requires_python": ">=3.6", "summary": "A broader implementation of pandas json_normalize function.", "version": "1.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h2>Flat-Table: Dictionary and List Normalizer</h2>\n<p>This package is a normalizer for <a href=\"https://pandas.pydata.org/\" rel=\"nofollow\">pandas</a> dataframe objects that has dictionary or list objects within it's columns. The library will expand all of the columns that has data types in (list, dict) into individual seperate rows and columns.</p>\n<p>PS: Flat table will use the current index of the dataframe as an identifier while expanding lists. The output will have an index column of your original dataframe. You can drop it later if you not plan to use it.</p>\n<h3>To Install</h3>\n<p>To install, use pip.</p>\n<pre><code>pip install flat-table\n</code></pre>\n<h3>How to Use It</h3>\n<p>From a given pandas dataframe, the <code>index</code> of the dataframe will be used to create seperate columns and rows.</p>\n<pre><span class=\"c1\"># some dataframe contains dicts and lists in it's columns</span>\n<span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"o\">...</span>\n</pre>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">flat_table</span>\n\n<span class=\"n\">flat_table</span><span class=\"o\">.</span><span class=\"n\">normalize</span><span class=\"p\">(</span><span class=\"n\">df</span><span class=\"p\">)</span>\n</pre>\n<p>This will give you all the keys in dictionaries as columns, and all the lists as seperate rows.</p>\n<h3>Example Illustration</h3>\n<p>Lets assume that you have a dataframe of the followings shape.</p>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>user_info</th>\n<th>address</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1001</td>\n<td>{ 'first_name': 'john', 'last_name': 'smith', 'phones': {'mobile': '201-..', 'home': '978-..'} }</td>\n<td>[{ 'zip': '07014', 'city': 'clifton' }]</td>\n</tr>\n<tr>\n<td>1002</td>\n<td>NaN</td>\n<td>[{'zip': '07014', 'address1': '1 Journal Square'}]</td>\n</tr>\n<tr>\n<td>1003</td>\n<td>\u00a0{ 'first_name': 'marry', 'last_name': 'kate', 'gender': 'female'  }</td>\n<td>\u00a0[{ 'zip': '10001', 'city': 'new york' }, { 'zip': '10008', 'city': 'brooklyn' }]</td>\n</tr></tbody></table>\n<p>This table given above has some dictionaries and lists in it's columns. Normally, what you would do is to use <code>pd.io.json.json_normalize</code> function to expand dictionaries. However, in cases you have <code>NaN</code> values in your column, <code>pd.io.json.json_normalize</code> end up throwing an <code>AttributeError</code> error for <code>NaN</code> values because they are not of the same type. <code>flat_table</code> is a wraper around the <code>json_normalize</code> function where it expands it's abilities to be more robust for <code>NaN</code> values and also, it expands lists rowwise so that it will be more clear to see the information.</p>\n<p>For the above table, the flatten table after applying <code>flat_table.normalize</code> will look like the following.</p>\n<table>\n<thead>\n<tr>\n<th align=\"right\"></th>\n<th align=\"right\">index</th>\n<th align=\"right\">id</th>\n<th align=\"left\">user_info.gender</th>\n<th align=\"left\">user_info.phones.home</th>\n<th align=\"left\">user_info.phones.mobile</th>\n<th align=\"left\">user_info.last_name</th>\n<th align=\"left\">user_info.first_name</th>\n<th align=\"left\">address.address1</th>\n<th align=\"left\">address.city</th>\n<th align=\"right\">address.zip</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"right\">0</td>\n<td align=\"right\">0</td>\n<td align=\"right\">1001</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">978-..</td>\n<td align=\"left\">201-..</td>\n<td align=\"left\">smith</td>\n<td align=\"left\">john</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">clifton</td>\n<td align=\"right\">07014</td>\n</tr>\n<tr>\n<td align=\"right\">1</td>\n<td align=\"right\">1</td>\n<td align=\"right\">1002</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">1 Journal Square</td>\n<td align=\"left\">nan</td>\n<td align=\"right\">07014</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td align=\"right\">2</td>\n<td align=\"right\">1003</td>\n<td align=\"left\">female</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">kate</td>\n<td align=\"left\">marry</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">new york</td>\n<td align=\"right\">10001</td>\n</tr>\n<tr>\n<td align=\"right\">3</td>\n<td align=\"right\">2</td>\n<td align=\"right\">1003</td>\n<td align=\"left\">female</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">kate</td>\n<td align=\"left\">marry</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">brooklyn</td>\n<td align=\"right\">10008</td>\n</tr></tbody></table>\n<h3>New in Version 1.1.0</h3>\n<p>The expansion for dicts and lists made optional. Now, you can choose to expand list types and dict types with normalize function.</p>\n<pre><span class=\"n\">flat_table</span><span class=\"o\">.</span><span class=\"n\">normalize</span><span class=\"p\">(</span><span class=\"n\">df</span><span class=\"p\">,</span> <span class=\"n\">expand_dicts</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"n\">expand_lists</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>Normalized version of df will be following.</p>\n<table>\n<thead>\n<tr>\n<th align=\"right\"></th>\n<th align=\"right\">index</th>\n<th align=\"right\">id</th>\n<th align=\"left\">user_info</th>\n<th align=\"left\">address.address1</th>\n<th align=\"left\">address.city</th>\n<th align=\"right\">address.zip</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"right\">0</td>\n<td align=\"right\">0</td>\n<td align=\"right\">1001</td>\n<td align=\"left\">{...}</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">clifton</td>\n<td align=\"right\">07014</td>\n</tr>\n<tr>\n<td align=\"right\">1</td>\n<td align=\"right\">1</td>\n<td align=\"right\">1002</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">1 Journal Square</td>\n<td align=\"left\">nan</td>\n<td align=\"right\">07014</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td align=\"right\">2</td>\n<td align=\"right\">1003</td>\n<td align=\"left\">{...}</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">new york</td>\n<td align=\"right\">10001</td>\n</tr>\n<tr>\n<td align=\"right\">3</td>\n<td align=\"right\">2</td>\n<td align=\"right\">1003</td>\n<td align=\"left\">{...}</td>\n<td align=\"left\">nan</td>\n<td align=\"left\">brooklyn</td>\n<td align=\"right\">10008</td>\n</tr></tbody></table>\n<h3>How it Works?</h3>\n<p>Basically, <code>flat_table</code> will look for each of the series in a dataframe to understand what type of data it contains.</p>\n<p>For every series, it creates a list of information on how to expand it. It will go into all dictionaries and all lists in all levels and expand them as rows and columns. Dictionary <code>keys</code> will be used for column names, and The <code>index</code> of the giden dataframe will be used for row expansion.</p>\n<p>If you want to see how the columns are mapped, you can use <code>flat_table.mapper</code> function to get all information about your columns in your original dataframe. For example, for the above table, the mapper function will provide the following table.</p>\n<table>\n<thead>\n<tr>\n<th align=\"right\"></th>\n<th align=\"left\">parent</th>\n<th align=\"left\">child</th>\n<th align=\"left\">type</th>\n<th align=\"left\">obj</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"right\">0</td>\n<td align=\"left\">.</td>\n<td align=\"left\">id</td>\n<td align=\"left\">int</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">1</td>\n<td align=\"left\">.</td>\n<td align=\"left\">user_info</td>\n<td align=\"left\">dict</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td align=\"left\">user_info</td>\n<td align=\"left\">user_info.gender</td>\n<td align=\"left\">str</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">3</td>\n<td align=\"left\">user_info</td>\n<td align=\"left\">user_info.phones.home</td>\n<td align=\"left\">str</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">4</td>\n<td align=\"left\">user_info</td>\n<td align=\"left\">user_info.phones.mobile</td>\n<td align=\"left\">str</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">5</td>\n<td align=\"left\">user_info</td>\n<td align=\"left\">user_info.last_name</td>\n<td align=\"left\">str</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">6</td>\n<td align=\"left\">user_info</td>\n<td align=\"left\">user_info.first_name</td>\n<td align=\"left\">str</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">7</td>\n<td align=\"left\">.</td>\n<td align=\"left\">address</td>\n<td align=\"left\">list</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">8</td>\n<td align=\"left\"></td>\n<td align=\"left\">address</td>\n<td align=\"left\">dict</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">9</td>\n<td align=\"left\">address</td>\n<td align=\"left\">address.address1</td>\n<td align=\"left\">str</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">10</td>\n<td align=\"left\">address</td>\n<td align=\"left\">address.city</td>\n<td align=\"left\">str</td>\n<td align=\"left\">...</td>\n</tr>\n<tr>\n<td align=\"right\">11</td>\n<td align=\"left\">address</td>\n<td align=\"left\">address.zip</td>\n<td align=\"left\">str</td>\n<td align=\"left\">...</td>\n</tr></tbody></table>\n<h2>Licence</h2>\n<p>Licence is use it at your own will, with whatever way you want it to use :smiley:.</p>\n<h2>Author</h2>\n<p>Build by <a href=\"https://github.com/metinsenturk/\" rel=\"nofollow\">@metinsenturk</a></p>\n\n          </div>"}, "last_serial": 5985852, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "7fdaaecc67ef2b0b84c988fd2eb3a17c", "sha256": "471cb1b6ba5d8c14e5a5ec6c230fd82ab857cdc846c7cb5e8be321993ff01bf0"}, "downloads": -1, "filename": "flat_table-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "7fdaaecc67ef2b0b84c988fd2eb3a17c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 6264, "upload_time": "2019-09-26T23:50:16", "upload_time_iso_8601": "2019-09-26T23:50:16.669757Z", "url": "https://files.pythonhosted.org/packages/01/96/4fa8a4c0d25fc30157b43e44f00f8b935a51eaa5c8de303e612da021bb01/flat_table-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9fb62baa18ffb77aeec2a9af99c3176e", "sha256": "d29785a09bf0696e27417a8078ad0c70dacb2a0c3f4b0c1d1db6f17ad422d4fc"}, "downloads": -1, "filename": "flat_table-1.0.0.tar.gz", "has_sig": false, "md5_digest": "9fb62baa18ffb77aeec2a9af99c3176e", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5068, "upload_time": "2019-09-26T23:50:19", "upload_time_iso_8601": "2019-09-26T23:50:19.001022Z", "url": "https://files.pythonhosted.org/packages/b6/f2/c0066a3d9f56dab5297e4f5da66f6327e00eb8f444d480b43896c68a8807/flat_table-1.0.0.tar.gz", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "578dcc83c48b1a25fb4e77ab49958389", "sha256": "e4dad08c51e370e0e8e6c3489591e29e710655264318638806a41d1af47c9cfc"}, "downloads": -1, "filename": "flat_table-1.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "578dcc83c48b1a25fb4e77ab49958389", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 6796, "upload_time": "2019-10-16T18:49:23", "upload_time_iso_8601": "2019-10-16T18:49:23.306783Z", "url": "https://files.pythonhosted.org/packages/fe/e8/5054b78b999d81acfec3606a2fcc131a341c8736a8da03e827fc823f308d/flat_table-1.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8473b06a3bd319d45b592eab07d70694", "sha256": "b40fc49237fd8e625ef51adce7174fa219230c0937f8f2521eeb41ac3e6bd9df"}, "downloads": -1, "filename": "flat_table-1.1.0.tar.gz", "has_sig": false, "md5_digest": "8473b06a3bd319d45b592eab07d70694", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5669, "upload_time": "2019-10-16T18:49:24", "upload_time_iso_8601": "2019-10-16T18:49:24.784519Z", "url": "https://files.pythonhosted.org/packages/b5/41/b55eaa62c0ecf6f53effeba5ecc5c1693ef7f370e62c18289ee637f3e781/flat_table-1.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "578dcc83c48b1a25fb4e77ab49958389", "sha256": "e4dad08c51e370e0e8e6c3489591e29e710655264318638806a41d1af47c9cfc"}, "downloads": -1, "filename": "flat_table-1.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "578dcc83c48b1a25fb4e77ab49958389", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 6796, "upload_time": "2019-10-16T18:49:23", "upload_time_iso_8601": "2019-10-16T18:49:23.306783Z", "url": "https://files.pythonhosted.org/packages/fe/e8/5054b78b999d81acfec3606a2fcc131a341c8736a8da03e827fc823f308d/flat_table-1.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8473b06a3bd319d45b592eab07d70694", "sha256": "b40fc49237fd8e625ef51adce7174fa219230c0937f8f2521eeb41ac3e6bd9df"}, "downloads": -1, "filename": "flat_table-1.1.0.tar.gz", "has_sig": false, "md5_digest": "8473b06a3bd319d45b592eab07d70694", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5669, "upload_time": "2019-10-16T18:49:24", "upload_time_iso_8601": "2019-10-16T18:49:24.784519Z", "url": "https://files.pythonhosted.org/packages/b5/41/b55eaa62c0ecf6f53effeba5ecc5c1693ef7f370e62c18289ee637f3e781/flat_table-1.1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 01:02:03 2020"}