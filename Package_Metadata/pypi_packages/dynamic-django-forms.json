{"info": {"author": "Alexander Skvortsov", "author_email": "sasha.skvortsov109@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# Dynamic Django Forms\n\n**dynamic-django-forms** is a simple, reusable app that allows you to build (and respond to) dynamic forms, i.e. forms that have variable numbers and types of fields. A few examples of uses include:\n\n1. Building and sending out surveys\n2. Job applications where each job might have a different application forms\n\n## Installation\n\nInstall via pip:\n\n`pip install dynamic-django-forms`\n\nAdd to settings.INSTALLED_APPS:\n\n`\nINSTALLED_APPS = {\n    \"...\",\n    \"dynamic_forms\",\n    \"...\"\n}\n`\n\n## Components\n\nThe main functionality of `dynamic-django-forms` is contained within 2 model fields:\n\n### Form Builder\n\n`dynamic_forms.models.FormField` allows you to build and edit forms via a convenient UI, and stores them in JSON-Schema form. It is easy to use both through the admin panel and in any custom template webpage.\n\nExample Setup:\n\n`from dynamic_forms.models import FormField\n\nclass Survey:\n    # Other Fields Here\n    form = FormField()`\n\nPlease note that JSON data can saved into the model field as a python `dict` or a valid JSON string. When the value is retrieved from the database, it will be provided as a `list` containing `dict`s for each dynamic form field.\n\n### Form Response\n\n`dynamic_forms.models.ResponseField` allows you to render, and collect responses to, forms built with the Form Builder. It is currently only supported through custom views. All form responses are stored as a dict where the key is the question label, and the value is the user's input.\n\nExample Setup:\n\nModel Config:\n`from django.db import models\nfrom dynamic_forms.models import ResponseField\nfrom otherapp.models import Survey\n\nclass SurveyResponse:\n    # Other Fields Here\n    survey = models.ForeignKey(Survey, on_delete=models.CASCADE) # Optional\n    response = ResponseField()`\nPlease note that including a ForeignKey link from the model containing responses to the model containing forms isnt technically required; however, it is highly recommended and will make linking the two much easier\n\n### Configuring ResponseFields with forms\n\nYou must provide a valid JSON Schema to ResponseField's associated FormField at runtime. This is best done in the view where the dynamic form will be used. Generally speaking, this means you should:\n1. Obtain the JSON Schema Form Data\n   * Get an instance of a model containing a FormField that has already been built OR\n   * Provide the form data as a constant\n2. Intercept the Form instance used in the view where the dynamic form will be shown. This could be an automatically generated ModelForm (via a generic Class Based View), or a form instance you have made yourself.\n3. Provide the JSON form data to the form field:\n   * form_instance.fields['response_field_name_in_form'].add_fields(JSON_DATA) will add the fields in JSON_DATA to the existing fields in the dynamic form.\n   * form_instance.fields['response_field_name_in_form].replace_fields(JSON_DATA) will remove any fields currently in the dynamic form and replace the with the fields in JSON_DATA\n\nAn example of how to do this can be found in the DynamicFormMixin explained in the next section:\n\n`from django.views.generic.edit import FormMixin\n\nclass DynamicFormMixin(FormMixin):\n    form_model_pk_field = None\n    form_field = \"form\"\n    form_pk_url_kwarg = \"pk\"\n\n    response_form_fk_field = None\n    response_field = \"response\"\n\n    def _get_object_containing_form(self, pk):\n        return self.form_model.objects.get(pk=pk)\n\n    def get_form(self, *args, **kwargs):\n        form = super().get_form(*args, **kwargs)\n        # Get instance of model containing form used for this response. Save this object as an instance variable for use in form_valid method\n        form_instance_pk = self.kwargs[self.form_pk_url_kwarg]\n        self.form_instance = self._get_object_containing_form(form_instance_pk)\n        # Get json form configuration from form-containing object\n        json_data = getattr(self.form_instance, self.form_field)\n        # Add fields in JSON to dynamic form rendering field.\n        form.fields[self.response_field].add_fields(json_data)\n        return form\n\n    def form_valid(self, form):\n        action = form.save(commit=False)\n        action.survey = self.form_instance\n        action.save()\n        return super().form_valid(form)`\n\n#### Configuration Shortcut\n\nThe process of configuring ResponseFields with forms is somewhat complicated, so a shortcut is provided.\n\n`dynamic_forms.views.DynamicFormMixin` can be added to Class Based Views extending from `django.views.generic.edit.CreateView` and `django.views.generic.edit.UpdateView`, and will automatically complete configure the dynamic form provided that:\n\n1. The model containing the ResponseField has a ForeignKey link to a model containing the FormField.\n2. The following attributes are provided:\n   1.  `form_model`: The relevant model (not instance) containing a FormField with the wanted dynamic form configuration. I.e. which model is the survey defined in? Default: `None`\n   2.  `form_field`: The attribute of `form_model` that contains the FormField. I.e. Which field in the Survey model contains the form? Default: `form`\n   3.  `form_pk_url_kwarg` The [URL Keyword Argument](https://docs.djangoproject.com/en/2.2/topics/http/urls/#passing-extra-options-to-view-functions) containing the primary key of the instance of `form_model` that contains the dynamic form we want? I.e. Which survey are we responding to? Default: `pk`\n   4.  `response_form_fk_field` The attribute of the model which contains the ResponseField that links via ForeignKey to the model containing the FormField. I.e. Which attribute of the Survey Response model links to the Survey model? Default: `None`\n   5.  `response_field` The attribute of the Response model which contains the ResponseField. I.e. which attribute of the Survey Response model contains the actual responses? Default: `response`\n\nExample:\n\n`class RespondView(DynamicFormMixin, CreateView):\n    model = SurveyResponse\n    fields = ['response']\n    template_name = \"example/respond.html\"\n\n    form_model = Survey\n    form_field = \"form\"\n    form_pk_url_kwarg = \"survey_id\"\n    response_form_fk_field = \"survey\"\n    response_field = \"response\"\n\n    def get_success_url(self):\n        return reverse('survey_detail', kwargs={\"survey_id\": self.form_instance.pk})`\n\n### Django Crispy Forms Support\n\nIf you are using [Django Crispy Forms](https://github.com/django-crispy-forms/django-crispy-forms) to make your forms look awesome, set use the following setting:\n\n`USE_CRISPY = True` (false by default)\n\nPlease note that you are responsible for importing any CSS/JS libraries needed by your chosen crispy template pack into the templates where (e.x. bootstrap, uni-form, foundation).\n\n## Fields Supported and Limitations\n\n`dynamic-django-forms` currently supports the following field types:\n\n* Checkbox Group\n* Date Field\n* Hidden Input\n* Number\n* Radio Group\n* Select\n* Text Field\n* Email Field\n* Text Area\n\nThe only major limitation of `dynamic-django-forms`, which is also one of its major features, is the dissociation of dynamic form questions and responses.\n\nPros:\n\n* Responses cannot be changed after submission\n* Dynamic forms can be edited, removing, changing, or adding questions, without affecting prior responses\n\nCons:\n\n* Responses cannot be changed after submission\n\n## Example Site\n\nTo run an example site, run `cd example && docker-compose up`. If you do not use docker, you can manually install the requirements with `pip install -r example/requirements.txt` and run the site with `python example/manage.py runserver`.\n\n## Planned Improvements\n\n* Support for some HTML Elements\n  * Headers\n  * Paragraph Text\n  * Dividers\n* Support for the following fields:\n  * Color Field\n  * Telephone Field\n  * Star Rating\n* Support for \"Other\" option on radio groups, checkbox groups, and select dropdowns\n  * User can select \"other\", at which point an inline text-type input will appear where they can put a custom choice\n* Ability to provide default JSON form config via:\n  * String\n  * Dict\n  * File\n  * Remote URL\n* DynamicFormMixin should support slugs\n* Ability to customize JSONBuilder settings through Django settings\n* Extensive Automated Testing\n\n### Possible Improvements\n\n* Support File Upload Field\n\n## Credits\n\nHuge thanks to Kevin Chappell & Team for developing the awesome open source [Form Builder UI](https://github.com/kevinchappell/formBuilder)!", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/askvortsov1/dynamic-django-forms", "keywords": "django,dynamic,forms,json", "license": "MIT License", "maintainer": "Alexander Skvortsov", "maintainer_email": "", "name": "dynamic-django-forms", "package_url": "https://pypi.org/project/dynamic-django-forms/", "platform": "", "project_url": "https://pypi.org/project/dynamic-django-forms/", "project_urls": {"Homepage": "https://github.com/askvortsov1/dynamic-django-forms"}, "release_url": "https://pypi.org/project/dynamic-django-forms/0.1.4/", "requires_dist": null, "requires_python": "", "summary": "JSON-Powered Dynamic Forms for Django", "version": "0.1.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Dynamic Django Forms</h1>\n<p><strong>dynamic-django-forms</strong> is a simple, reusable app that allows you to build (and respond to) dynamic forms, i.e. forms that have variable numbers and types of fields. A few examples of uses include:</p>\n<ol>\n<li>Building and sending out surveys</li>\n<li>Job applications where each job might have a different application forms</li>\n</ol>\n<h2>Installation</h2>\n<p>Install via pip:</p>\n<p><code>pip install dynamic-django-forms</code></p>\n<p>Add to settings.INSTALLED_APPS:</p>\n<p><code>INSTALLED_APPS = { \"...\", \"dynamic_forms\", \"...\" }</code></p>\n<h2>Components</h2>\n<p>The main functionality of <code>dynamic-django-forms</code> is contained within 2 model fields:</p>\n<h3>Form Builder</h3>\n<p><code>dynamic_forms.models.FormField</code> allows you to build and edit forms via a convenient UI, and stores them in JSON-Schema form. It is easy to use both through the admin panel and in any custom template webpage.</p>\n<p>Example Setup:</p>\n<p>`from dynamic_forms.models import FormField</p>\n<p>class Survey:\n# Other Fields Here\nform = FormField()`</p>\n<p>Please note that JSON data can saved into the model field as a python <code>dict</code> or a valid JSON string. When the value is retrieved from the database, it will be provided as a <code>list</code> containing <code>dict</code>s for each dynamic form field.</p>\n<h3>Form Response</h3>\n<p><code>dynamic_forms.models.ResponseField</code> allows you to render, and collect responses to, forms built with the Form Builder. It is currently only supported through custom views. All form responses are stored as a dict where the key is the question label, and the value is the user's input.</p>\n<p>Example Setup:</p>\n<p>Model Config:\n`from django.db import models\nfrom dynamic_forms.models import ResponseField\nfrom otherapp.models import Survey</p>\n<p>class SurveyResponse:\n# Other Fields Here\nsurvey = models.ForeignKey(Survey, on_delete=models.CASCADE) # Optional\nresponse = ResponseField()`\nPlease note that including a ForeignKey link from the model containing responses to the model containing forms isnt technically required; however, it is highly recommended and will make linking the two much easier</p>\n<h3>Configuring ResponseFields with forms</h3>\n<p>You must provide a valid JSON Schema to ResponseField's associated FormField at runtime. This is best done in the view where the dynamic form will be used. Generally speaking, this means you should:</p>\n<ol>\n<li>Obtain the JSON Schema Form Data\n<ul>\n<li>Get an instance of a model containing a FormField that has already been built OR</li>\n<li>Provide the form data as a constant</li>\n</ul>\n</li>\n<li>Intercept the Form instance used in the view where the dynamic form will be shown. This could be an automatically generated ModelForm (via a generic Class Based View), or a form instance you have made yourself.</li>\n<li>Provide the JSON form data to the form field:\n<ul>\n<li>form_instance.fields['response_field_name_in_form'].add_fields(JSON_DATA) will add the fields in JSON_DATA to the existing fields in the dynamic form.</li>\n<li>form_instance.fields['response_field_name_in_form].replace_fields(JSON_DATA) will remove any fields currently in the dynamic form and replace the with the fields in JSON_DATA</li>\n</ul>\n</li>\n</ol>\n<p>An example of how to do this can be found in the DynamicFormMixin explained in the next section:</p>\n<p>`from django.views.generic.edit import FormMixin</p>\n<p>class DynamicFormMixin(FormMixin):\nform_model_pk_field = None\nform_field = \"form\"\nform_pk_url_kwarg = \"pk\"</p>\n<pre><code>response_form_fk_field = None\nresponse_field = \"response\"\n\ndef _get_object_containing_form(self, pk):\n    return self.form_model.objects.get(pk=pk)\n\ndef get_form(self, *args, **kwargs):\n    form = super().get_form(*args, **kwargs)\n    # Get instance of model containing form used for this response. Save this object as an instance variable for use in form_valid method\n    form_instance_pk = self.kwargs[self.form_pk_url_kwarg]\n    self.form_instance = self._get_object_containing_form(form_instance_pk)\n    # Get json form configuration from form-containing object\n    json_data = getattr(self.form_instance, self.form_field)\n    # Add fields in JSON to dynamic form rendering field.\n    form.fields[self.response_field].add_fields(json_data)\n    return form\n\ndef form_valid(self, form):\n    action = form.save(commit=False)\n    action.survey = self.form_instance\n    action.save()\n    return super().form_valid(form)`\n</code></pre>\n<h4>Configuration Shortcut</h4>\n<p>The process of configuring ResponseFields with forms is somewhat complicated, so a shortcut is provided.</p>\n<p><code>dynamic_forms.views.DynamicFormMixin</code> can be added to Class Based Views extending from <code>django.views.generic.edit.CreateView</code> and <code>django.views.generic.edit.UpdateView</code>, and will automatically complete configure the dynamic form provided that:</p>\n<ol>\n<li>The model containing the ResponseField has a ForeignKey link to a model containing the FormField.</li>\n<li>The following attributes are provided:\n<ol>\n<li><code>form_model</code>: The relevant model (not instance) containing a FormField with the wanted dynamic form configuration. I.e. which model is the survey defined in? Default: <code>None</code></li>\n<li><code>form_field</code>: The attribute of <code>form_model</code> that contains the FormField. I.e. Which field in the Survey model contains the form? Default: <code>form</code></li>\n<li><code>form_pk_url_kwarg</code> The <a href=\"https://docs.djangoproject.com/en/2.2/topics/http/urls/#passing-extra-options-to-view-functions\" rel=\"nofollow\">URL Keyword Argument</a> containing the primary key of the instance of <code>form_model</code> that contains the dynamic form we want? I.e. Which survey are we responding to? Default: <code>pk</code></li>\n<li><code>response_form_fk_field</code> The attribute of the model which contains the ResponseField that links via ForeignKey to the model containing the FormField. I.e. Which attribute of the Survey Response model links to the Survey model? Default: <code>None</code></li>\n<li><code>response_field</code> The attribute of the Response model which contains the ResponseField. I.e. which attribute of the Survey Response model contains the actual responses? Default: <code>response</code></li>\n</ol>\n</li>\n</ol>\n<p>Example:</p>\n<p>`class RespondView(DynamicFormMixin, CreateView):\nmodel = SurveyResponse\nfields = ['response']\ntemplate_name = \"example/respond.html\"</p>\n<pre><code>form_model = Survey\nform_field = \"form\"\nform_pk_url_kwarg = \"survey_id\"\nresponse_form_fk_field = \"survey\"\nresponse_field = \"response\"\n\ndef get_success_url(self):\n    return reverse('survey_detail', kwargs={\"survey_id\": self.form_instance.pk})`\n</code></pre>\n<h3>Django Crispy Forms Support</h3>\n<p>If you are using <a href=\"https://github.com/django-crispy-forms/django-crispy-forms\" rel=\"nofollow\">Django Crispy Forms</a> to make your forms look awesome, set use the following setting:</p>\n<p><code>USE_CRISPY = True</code> (false by default)</p>\n<p>Please note that you are responsible for importing any CSS/JS libraries needed by your chosen crispy template pack into the templates where (e.x. bootstrap, uni-form, foundation).</p>\n<h2>Fields Supported and Limitations</h2>\n<p><code>dynamic-django-forms</code> currently supports the following field types:</p>\n<ul>\n<li>Checkbox Group</li>\n<li>Date Field</li>\n<li>Hidden Input</li>\n<li>Number</li>\n<li>Radio Group</li>\n<li>Select</li>\n<li>Text Field</li>\n<li>Email Field</li>\n<li>Text Area</li>\n</ul>\n<p>The only major limitation of <code>dynamic-django-forms</code>, which is also one of its major features, is the dissociation of dynamic form questions and responses.</p>\n<p>Pros:</p>\n<ul>\n<li>Responses cannot be changed after submission</li>\n<li>Dynamic forms can be edited, removing, changing, or adding questions, without affecting prior responses</li>\n</ul>\n<p>Cons:</p>\n<ul>\n<li>Responses cannot be changed after submission</li>\n</ul>\n<h2>Example Site</h2>\n<p>To run an example site, run <code>cd example &amp;&amp; docker-compose up</code>. If you do not use docker, you can manually install the requirements with <code>pip install -r example/requirements.txt</code> and run the site with <code>python example/manage.py runserver</code>.</p>\n<h2>Planned Improvements</h2>\n<ul>\n<li>Support for some HTML Elements\n<ul>\n<li>Headers</li>\n<li>Paragraph Text</li>\n<li>Dividers</li>\n</ul>\n</li>\n<li>Support for the following fields:\n<ul>\n<li>Color Field</li>\n<li>Telephone Field</li>\n<li>Star Rating</li>\n</ul>\n</li>\n<li>Support for \"Other\" option on radio groups, checkbox groups, and select dropdowns\n<ul>\n<li>User can select \"other\", at which point an inline text-type input will appear where they can put a custom choice</li>\n</ul>\n</li>\n<li>Ability to provide default JSON form config via:\n<ul>\n<li>String</li>\n<li>Dict</li>\n<li>File</li>\n<li>Remote URL</li>\n</ul>\n</li>\n<li>DynamicFormMixin should support slugs</li>\n<li>Ability to customize JSONBuilder settings through Django settings</li>\n<li>Extensive Automated Testing</li>\n</ul>\n<h3>Possible Improvements</h3>\n<ul>\n<li>Support File Upload Field</li>\n</ul>\n<h2>Credits</h2>\n<p>Huge thanks to Kevin Chappell &amp; Team for developing the awesome open source <a href=\"https://github.com/kevinchappell/formBuilder\" rel=\"nofollow\">Form Builder UI</a>!</p>\n\n          </div>"}, "last_serial": 6419712, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "db0ff589acc31c6560ce10178020cdc7", "sha256": "410c26a52c3eac91e5e34965644b5f613a1bdf369b7ff619cb73701168ed4d9d"}, "downloads": -1, "filename": "dynamic-django-forms-0.1.0.tar.gz", "has_sig": false, "md5_digest": "db0ff589acc31c6560ce10178020cdc7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8398, "upload_time": "2019-08-13T01:17:34", "upload_time_iso_8601": "2019-08-13T01:17:34.735371Z", "url": "https://files.pythonhosted.org/packages/3e/3c/715cd711231ea4408c8ab98e91d3e55308209a68807859c8de456c88ef86/dynamic-django-forms-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "fd6eca48f034e7d34b32528c2f9776bc", "sha256": "877ca4feea427c4e98a757244fd53c00342c1c9773db4442636f801fa346e8dc"}, "downloads": -1, "filename": "dynamic-django-forms-0.1.1.tar.gz", "has_sig": false, "md5_digest": "fd6eca48f034e7d34b32528c2f9776bc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8408, "upload_time": "2019-08-13T01:17:36", "upload_time_iso_8601": "2019-08-13T01:17:36.994844Z", "url": "https://files.pythonhosted.org/packages/93/54/56453cc2786c55a3b30c995632393043052b3515e8b66f81050f51c31b27/dynamic-django-forms-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "e01b44e7bf05d470b4411f334e393da6", "sha256": "8a4caefeca08f463c6cd5352e8756a1ecca5a69002eb956f87ea63e6f9f7649e"}, "downloads": -1, "filename": "dynamic-django-forms-0.1.2.tar.gz", "has_sig": false, "md5_digest": "e01b44e7bf05d470b4411f334e393da6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10212, "upload_time": "2019-08-13T02:54:14", "upload_time_iso_8601": "2019-08-13T02:54:14.558162Z", "url": "https://files.pythonhosted.org/packages/3c/65/5c99cab37830ca2922ff23624219c2bc13db4fdf8ad18c7a1d4fc7ccc370/dynamic-django-forms-0.1.2.tar.gz", "yanked": false}], "0.1.3": [{"comment_text": "", "digests": {"md5": "ef39696c9442c9b06ee0a2d98992e1f6", "sha256": "4aa08c16ab5899f31479cab8d06565dc8182107d2300ed6d692b21fe8727de5a"}, "downloads": -1, "filename": "dynamic-django-forms-0.1.3.tar.gz", "has_sig": false, "md5_digest": "ef39696c9442c9b06ee0a2d98992e1f6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10246, "upload_time": "2020-01-09T01:20:24", "upload_time_iso_8601": "2020-01-09T01:20:24.285471Z", "url": "https://files.pythonhosted.org/packages/71/be/ebde47ab14114d82f4e2cf1769ef19705189a58544258c6f743662f38be1/dynamic-django-forms-0.1.3.tar.gz", "yanked": false}], "0.1.4": [{"comment_text": "", "digests": {"md5": "c98cbafc929e9c55310d2802f6e10375", "sha256": "e790af00b5bfea42dfdb2e88a1695f1cf1f18844636757ff0c0fd926b28e1af4"}, "downloads": -1, "filename": "dynamic-django-forms-0.1.4.tar.gz", "has_sig": false, "md5_digest": "c98cbafc929e9c55310d2802f6e10375", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10236, "upload_time": "2020-01-09T02:27:06", "upload_time_iso_8601": "2020-01-09T02:27:06.498378Z", "url": "https://files.pythonhosted.org/packages/c3/4c/0297f61a42a4b99bd8b8e896de8d3bbaf5f34181bc36343468a244977b64/dynamic-django-forms-0.1.4.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "c98cbafc929e9c55310d2802f6e10375", "sha256": "e790af00b5bfea42dfdb2e88a1695f1cf1f18844636757ff0c0fd926b28e1af4"}, "downloads": -1, "filename": "dynamic-django-forms-0.1.4.tar.gz", "has_sig": false, "md5_digest": "c98cbafc929e9c55310d2802f6e10375", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10236, "upload_time": "2020-01-09T02:27:06", "upload_time_iso_8601": "2020-01-09T02:27:06.498378Z", "url": "https://files.pythonhosted.org/packages/c3/4c/0297f61a42a4b99bd8b8e896de8d3bbaf5f34181bc36343468a244977b64/dynamic-django-forms-0.1.4.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:48:43 2020"}