{"info": {"author": "A10 Networks", "author_email": "opensource@a10networks.com", "bugtrack_url": null, "classifiers": ["Development Status :: 2 - Pre-Alpha", "Environment :: OpenStack", "Intended Audience :: Developers", "Intended Audience :: Information Technology", "Intended Audience :: System Administrators", "License :: OSI Approved :: Apache Software License", "Operating System :: POSIX :: Linux", "Programming Language :: Python", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5"], "description": "# A10 Networks OpenStack Octavia Driver\n\n## Table of Contents\n1. [Overview](#Overview)\n\n2. [System Requirements](#System-Requirements)\n\n3. [Setup and Configuration](#Setup-And-Configuration)\n\n    1. [For use with vThunders](#3a-for-use-with-vthunders)\n\n    2. [For use with hardware devices](#3b-for-use-with-hardware-devices)\n\n4. [Setting Object Defaults](#Setting-Object-Defaults)\n\n5. [Troubleshooting](#Troubleshooting)\n\n6. [Contributing](#Contributing)\n\n7. [Issues and Inquiries](#Issues-and-Inquiries)\n\n## Overview\n\n**This solution is currently in beta stage with limited support**\n\nThe A10 Networks Octavia Driver allows for configuration of Thunder, vThunder, and AX Series Appliances deployed in\nan Openstack enviroment. While the default Octavia provider leverages an \"Amphora per VIP\" architecture,\nthis provider driver uses a \"Thunder per Tenant\" architecture. Therefore, each tenant may only be serviced by a single\n**active** Thunder device.\n\n## System Requirements \n\nOpenstack Controller Node Minimum Requirements\n* Memory: 8GB\n* Disk: 20GB \n* OS: Ubuntu 18.04 or later\n* OpenStack (Nova, Neutron, Etc): Stein Release\n* Octavia version: >=4.1.1, <5.0.0.0rc1 (Stein versions)\n\nOpenstack Compute Node Minimum Requirements\n* vCPUs: 8\n* Memory: 16GB\n* Disk: 40GB\n* OS: Ubuntu 18.04 or later\n* Openstack (Nova, Neutron, Etc): Stein Release\n\nACOS Device Requirements\n* ACOS version: ACOS 4.1.4 GR1 P2\n* AXAPI version: 3.0\n\n## Installation\n\nThis guide assumes that Openstack has already been deployed and Octavia has already been configured.\n\n*Note: The following configurations should be done as an Openstack admin user*\n\n### Install from PyPi\n\n```shell\n$ pip install a10-octavia\n```\n\n## Setup And Configuration\n\n### 1. Enable A10 provider driver in Octavia config file\nAdd the following to `/etc/octavia/octavia.conf` under the `api-settings` section\n\n```shell\nenabled_provider_drivers = a10: 'The A10 Octavia driver.'\n\ndefault_provider_driver = a10\n```\n\n### 2. Restart Openstack Octavia services\nUse `systemctl` or similar a command to restart the Octavia API service. \n\n### 3a. For use with vThunders\n\n#### 3aa. Upload vThunder image and create a nova flavor for amphorae devices\n\nUpload a vThunder image (QCOW2) and create a nova flavor with the required resources.\n\nRecommended vThunder flavor settings:\n* 8 vCPUs\n* 8GB RAM\n* 30GB disk\n\n```shell\n$ openstack image create --disk-format qcow2 --container-format bare --public --file vThunder414.qcow2 vThunder.qcow2\n$ openstack flavor create --vcpu 8 --ram 8196 --disk 30 vThunder_flavor\n```\n\nNote down the `image ID` and `flavor ID` of created resources.\n\n*Please contact support@a10networks.com for questions on acquiring and licensing vThunder images*\n\n#### 3ab. Create the a10-octavia.conf file\n```shell\n$ mkdir /etc/a10\n$ touch /etc/a10/a10-octavia.conf\n```\n\n*Note: Make sure the user running the Octavia service has access to these files* \n\n#### 3ac. Sample a10-octavia.conf for vThunders\n```shell\n[VTHUNDER]\nDEFAULT_VTHUNDER_USERNAME = \"admin\"\nDEFAULT_VTHUNDER_PASSWORD = \"a10\"\nDEFAULT_AXAPI_VERSION = \"30\"\n\n[a10_controller_worker]\namp_image_owner_id = <admin_project_id>\namp_secgroup_list = <security_group_to_apply>\namp_flavor_id = <vthunder_flavor_id>\namp_boot_network_list = <netword_id_to_boot_vthunder_in_admin_project>\namp_ssh_key_name = <ssh_key_for_amphorae>\nnetwork_driver = a10_octavia_neutron_driver\nworkers = 2\namp_active_retries = 100\namp_active_wait_sec = 2\namp_image_id = <vthunder_image_id>\nloadbalancer_topology = <SINGLE or ACTIVE_STANDBY>\n\n[a10_health_manager]\nudp_server_ip_address = <server_ip_address_for_health_monitor>\nbind_port = 5550\nbind_ip = <controller_ip_configured_to_listen_for_udp_health_packets>\nheartbeat_interval = 5\nheartbeat_key = insecure\nheartbeat_timeout = 90\nhealth_check_interval = 3\nfailover_timeout = 600\nhealth_check_timeout = 3\nhealth_check_max_retries = 5\n\n[a10_house_keeping]\nload_balancer_expiry_age = 3600\namphorae_expiry_age = 3600\n```\n\nFull list of options can be found here: [Config Options Module](https://github.com/a10networks/a10-octavia/blob/master/a10_octavia/common/config_options.py)\n\n#### 3ad. Update security group to access vThunder AXAPIs\n\nThese settings are for ports allocated on the managment network. It's up to the operator to define the data network security rules.\n\nWhen delopying with the STANDALONE loadbalancer topology\n\n| Protocol   | Port  | Ingress    | Egress  | Purpose                                   |\n|:----------:|:-----:|:----------:|:-------:|:-----------------------------------------:|\n| TCP        | 80    | \u2713          | \u2713       | Communication with AXAPI                  |\n| TCP        | 443   | \u2713          | \u2713       | Communication with AXAPI                  |\n| UDP        | 5550  |            | \u2713       | Communication with Health Manager Service |\n\nWhen deploying with the ACTIVE-STANDBY loadbalancer topology\n\n| Protocol   | Port   | Ingress    | Egress  | Purpose                                           |\n|:----------:|:------:|:----------:|:-------:|:-------------------------------------------------:|\n| TCP        | 80     | \u2713          | \u2713       | Communication with AXAPI                          |\n| TCP        | 443    | \u2713          | \u2713       | Communication with AXAPI                          |\n| UDP        | ALL    | \u2713          | \u2713       | For specifics contact support@a10networks.com     |\n\n\n### 3b. For use with hardware devices\n\n#### 3ba. Create the a10-octavia.conf file\n```shell\n$ mkdir /etc/a10\n$ touch a10-octavia.conf\n```\n\n#### 3bb. Sample a10-octavia.conf for hardware devices\n\n```shell\n[a10_controller_worker]\namp_secgroup_list = <security_group_to_apply> \namp_boot_network_list = <netword_id_to_boot_amphorae_in_admin_project>\namp_ssh_key_name = <ssh_key_for_amphorae>\nnetwork_driver = a10_octavia_neutron_driver\nworkers = 2\namp_active_retries = 100\namp_active_wait_sec = 2\nloadbalancer_topology = SINGLE\n\n[RACK_VTHUNDER]\ndevices = \"\"\"[\n                    {\n                     \"project_id\":\"<project_id>\",\n                     \"ip_address\":\"10.0.0.4\",\n                     \"undercloud\":\"True\",\n                     \"username\":\"<username>\",\n                     \"password\":\"<password>\",\n                     \"device_name\":\"<device_name>\",\n                     \"axapi_version\":\"30\"\n                     },\n                     {\n                     \"project_id\":\"<another_project_id>\",\n                     \"ip_address\":\"10.0.0.5\",\n                     \"undercloud\":\"True\",\n                     \"username\":\"<username>\",\n                     \"password\":\"<password>\",\n                     \"device_name\":\"<device_name>\",\n                     \"axapi_version\":\"30\",\n                     }\n             ]\n       \"\"\"\n```\n\nFull list of options can be found here: [Config Options Module](https://github.com/a10networks/a10-octavia/blob/master/a10_octavia/common/config_options.py)\n\n### 4. Run database migrations\n\nFrom the `/path/to/a10-octavia/a10_octavia/db/migration` folder run \n\n```shell\n$ alembic upgrade head\n```\n\nIf versioning error occurs, delete all entries in the `alembic_version` table from `octavia` database and re-run the above command.\n\n```shell\nmysql> use octavia;\nmysql> DELETE FROM alembic_version;\n```\n\n*Note: Octavia verisons less than 4.1.1 have the `alembic_migrations` table instead*\n\n\n### 5. Register and start a10-octavia services\n\nWith `a10-octavia` installed, run the following command to register the services\n\n```shell\n$ install-a10-octavia\n```\n\nThis will install systemd services with names - `a10-controller-worker.service`, `a10-health-manager.service` and `a10-housekeeper-manager.service`.\n\n#### 5a. Make sure the services are up and running.\n\n```shell\n$ systemctl status a10-controller-worker.service a10-health-manager.service a10-housekeeper-manager.service\n```\n\nYou can start/stop the services using systemctl/service commands.\n\n\n## Setting Object Defaults\n\nThese settings are added to the `a10-octavia.conf` file. They allow the operator to configure options not exposed by the Openstack CLI.\n\n*WARNING: Any option specified here will apply globally meaning all projects and devices*\n\n#### Loadbalancer/virtual server config example\n```shell\n[SLB]\narp_disable = False\ndefault_virtual_server_vrid = \"10\"\nlogging_template = \"Logging_temp1\"\npolicy_template = \"policy_temp1\"\ntemplate_virtual_server = \"virtual_server_template1\"\ndefault_virtual_server_vrid = 0\n```\n\n#### Listener/virtual port config example\n```shell\n[LISTENER]\nipinip = False\nno_dest_nat = False\nha_conn_mirror = False\ntemplate_virtual_port = \"vport_template\"\ntemplate_tcp = \"tcp_template\"\ntemplate_policy = \"policy_temp1\"\nautosnat = True\nconn_limit = 5000\ntemplate_http = \"http_template\"\n```\n\n#### Pool/service group config example\n```shell\n[SERVICE - GROUP]\ntemplates = \"server1\"\n```\n\n#### Member config example\n```shell\n[SERVER]\nconn_limit = 5000\nconn_resume = 1\ntemplates = \"server1\"\n```\n\nFull list of options can be found here: [Config Options Module](https://github.com/a10networks/a10-octavia/blob/master/a10_octavia/common/config_options.py)\n\n## Troubleshooting\nYou may check logs of the services using `journalctl` commands. For example:\n\n```shell\n$ journalctl -af --unit a10-controller-worker.service\n$ journalctl -af --unit a10-health-manager.service\n$ journalctl -af --unit a10-housekeeper-manager.service\n```\n\n## Contributing\n\n### 1. Fork the a10-octavia repository\n\n[How To Fork](https://help.github.com/en/github/getting-started-with-github/fork-a-repo)\n\n### 2. Clone the repo from your fork\n\n```shell\n$ git clone https://git@github.com:<username>/a10-octavia.git\n```\n\n### 3. Checkout to a new branch\n\n```shell\n$ git checkout -b feature/<branch_name>\n```\n\n### 4. Run octavia install script \n**WARNING: THIS INSTALLS DEVSTACK. RUN IN A VM** \n\nRun the following as the super user\n\n```shell\n$ sudo ./path/to/a10-octavia/a10_octavia/contrib/devstack/new-octavia-devstack.sh\n```\n\n### 5. Become the stack user and move the a10-octavia repo\n\n```shell\n$ sudo su - stack\n$ mv /path/to/a10-octavia .\n$ sudo chown -R stack:stack a10-octavia\n```\n\n### 6. Install in edit mode\n\n```shell\n$ pip install -e a10-octavia\n```\n\n### 7. Restart the Octavia API service\n`sudo systemctl restart devstack@o-api.service`\n\n### 8. Update security groups \n\nModify the `lb-mgmt-sec-grp` to include\n\n| Protocol   | Port   | Ingress    | Egress  | Purpose                                           |\n|:----------:|:------:|:----------:|:-------:|:-------------------------------------------------:|\n| TCP        | 80     | \u2713          | \u2713       | Communication with AXAPI                          |\n| TCP        | 443    | \u2713          | \u2713       | Communication with AXAPI                          |\n| UDP        | ALL    | \u2713          | \u2713       | For specifics contact support@a10networks.com     | \n\nModify the `lb-health-mgr-sec-grp` to include\n\n| Protocol   | Port  | Ingress    | Egress  | Purpose                                   |\n|:----------:|:-----:|:----------:|:-------:|:-----------------------------------------:|\n| UDP        | 5550  |            | \u2713       | Communication with Health Manager Service |\n\n### 9. Register and start the a10-octavia services \n\n```shell\n$ install-a10-octavia\n```\n\n#### Testing install script changes\nWhen testing changes to the `install-a10-octavia` script, run `python setup.py install` from within the `a10-octavia` dir to re-install the script.\n\n## Issues and Inquiries\nFor all issues, please send an email to support@a10networks.com \n\nFor general inquiries, please send an email to opensource@a10networks.com", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/a10networks/a10-octavia", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "a10-octavia", "package_url": "https://pypi.org/project/a10-octavia/", "platform": "", "project_url": "https://pypi.org/project/a10-octavia/", "project_urls": {"Homepage": "https://github.com/a10networks/a10-octavia"}, "release_url": "https://pypi.org/project/a10-octavia/0.1.2/", "requires_dist": null, "requires_python": "", "summary": "A10 Octavia Provider Driver", "version": "0.1.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>A10 Networks OpenStack Octavia Driver</h1>\n<h2>Table of Contents</h2>\n<ol>\n<li>\n<p><a href=\"#Overview\" rel=\"nofollow\">Overview</a></p>\n</li>\n<li>\n<p><a href=\"#System-Requirements\" rel=\"nofollow\">System Requirements</a></p>\n</li>\n<li>\n<p><a href=\"#Setup-And-Configuration\" rel=\"nofollow\">Setup and Configuration</a></p>\n<ol>\n<li>\n<p><a href=\"#3a-for-use-with-vthunders\" rel=\"nofollow\">For use with vThunders</a></p>\n</li>\n<li>\n<p><a href=\"#3b-for-use-with-hardware-devices\" rel=\"nofollow\">For use with hardware devices</a></p>\n</li>\n</ol>\n</li>\n<li>\n<p><a href=\"#Setting-Object-Defaults\" rel=\"nofollow\">Setting Object Defaults</a></p>\n</li>\n<li>\n<p><a href=\"#Troubleshooting\" rel=\"nofollow\">Troubleshooting</a></p>\n</li>\n<li>\n<p><a href=\"#Contributing\" rel=\"nofollow\">Contributing</a></p>\n</li>\n<li>\n<p><a href=\"#Issues-and-Inquiries\" rel=\"nofollow\">Issues and Inquiries</a></p>\n</li>\n</ol>\n<h2>Overview</h2>\n<p><strong>This solution is currently in beta stage with limited support</strong></p>\n<p>The A10 Networks Octavia Driver allows for configuration of Thunder, vThunder, and AX Series Appliances deployed in\nan Openstack enviroment. While the default Octavia provider leverages an \"Amphora per VIP\" architecture,\nthis provider driver uses a \"Thunder per Tenant\" architecture. Therefore, each tenant may only be serviced by a single\n<strong>active</strong> Thunder device.</p>\n<h2>System Requirements</h2>\n<p>Openstack Controller Node Minimum Requirements</p>\n<ul>\n<li>Memory: 8GB</li>\n<li>Disk: 20GB</li>\n<li>OS: Ubuntu 18.04 or later</li>\n<li>OpenStack (Nova, Neutron, Etc): Stein Release</li>\n<li>Octavia version: &gt;=4.1.1, &lt;5.0.0.0rc1 (Stein versions)</li>\n</ul>\n<p>Openstack Compute Node Minimum Requirements</p>\n<ul>\n<li>vCPUs: 8</li>\n<li>Memory: 16GB</li>\n<li>Disk: 40GB</li>\n<li>OS: Ubuntu 18.04 or later</li>\n<li>Openstack (Nova, Neutron, Etc): Stein Release</li>\n</ul>\n<p>ACOS Device Requirements</p>\n<ul>\n<li>ACOS version: ACOS 4.1.4 GR1 P2</li>\n<li>AXAPI version: 3.0</li>\n</ul>\n<h2>Installation</h2>\n<p>This guide assumes that Openstack has already been deployed and Octavia has already been configured.</p>\n<p><em>Note: The following configurations should be done as an Openstack admin user</em></p>\n<h3>Install from PyPi</h3>\n<pre>$ pip install a10-octavia\n</pre>\n<h2>Setup And Configuration</h2>\n<h3>1. Enable A10 provider driver in Octavia config file</h3>\n<p>Add the following to <code>/etc/octavia/octavia.conf</code> under the <code>api-settings</code> section</p>\n<pre><span class=\"nv\">enabled_provider_drivers</span> <span class=\"o\">=</span> a10: <span class=\"s1\">'The A10 Octavia driver.'</span>\n\n<span class=\"nv\">default_provider_driver</span> <span class=\"o\">=</span> a10\n</pre>\n<h3>2. Restart Openstack Octavia services</h3>\n<p>Use <code>systemctl</code> or similar a command to restart the Octavia API service.</p>\n<h3>3a. For use with vThunders</h3>\n<h4>3aa. Upload vThunder image and create a nova flavor for amphorae devices</h4>\n<p>Upload a vThunder image (QCOW2) and create a nova flavor with the required resources.</p>\n<p>Recommended vThunder flavor settings:</p>\n<ul>\n<li>8 vCPUs</li>\n<li>8GB RAM</li>\n<li>30GB disk</li>\n</ul>\n<pre>$ openstack image create --disk-format qcow2 --container-format bare --public --file vThunder414.qcow2 vThunder.qcow2\n$ openstack flavor create --vcpu <span class=\"m\">8</span> --ram <span class=\"m\">8196</span> --disk <span class=\"m\">30</span> vThunder_flavor\n</pre>\n<p>Note down the <code>image ID</code> and <code>flavor ID</code> of created resources.</p>\n<p><em>Please contact <a href=\"mailto:support@a10networks.com\">support@a10networks.com</a> for questions on acquiring and licensing vThunder images</em></p>\n<h4>3ab. Create the a10-octavia.conf file</h4>\n<pre>$ mkdir /etc/a10\n$ touch /etc/a10/a10-octavia.conf\n</pre>\n<p><em>Note: Make sure the user running the Octavia service has access to these files</em></p>\n<h4>3ac. Sample a10-octavia.conf for vThunders</h4>\n<pre><span class=\"o\">[</span>VTHUNDER<span class=\"o\">]</span>\n<span class=\"nv\">DEFAULT_VTHUNDER_USERNAME</span> <span class=\"o\">=</span> <span class=\"s2\">\"admin\"</span>\n<span class=\"nv\">DEFAULT_VTHUNDER_PASSWORD</span> <span class=\"o\">=</span> <span class=\"s2\">\"a10\"</span>\n<span class=\"nv\">DEFAULT_AXAPI_VERSION</span> <span class=\"o\">=</span> <span class=\"s2\">\"30\"</span>\n\n<span class=\"o\">[</span>a10_controller_worker<span class=\"o\">]</span>\n<span class=\"nv\">amp_image_owner_id</span> <span class=\"o\">=</span> &lt;admin_project_id&gt;\n<span class=\"nv\">amp_secgroup_list</span> <span class=\"o\">=</span> &lt;security_group_to_apply&gt;\n<span class=\"nv\">amp_flavor_id</span> <span class=\"o\">=</span> &lt;vthunder_flavor_id&gt;\n<span class=\"nv\">amp_boot_network_list</span> <span class=\"o\">=</span> &lt;netword_id_to_boot_vthunder_in_admin_project&gt;\n<span class=\"nv\">amp_ssh_key_name</span> <span class=\"o\">=</span> &lt;ssh_key_for_amphorae&gt;\n<span class=\"nv\">network_driver</span> <span class=\"o\">=</span> a10_octavia_neutron_driver\n<span class=\"nv\">workers</span> <span class=\"o\">=</span> <span class=\"m\">2</span>\n<span class=\"nv\">amp_active_retries</span> <span class=\"o\">=</span> <span class=\"m\">100</span>\n<span class=\"nv\">amp_active_wait_sec</span> <span class=\"o\">=</span> <span class=\"m\">2</span>\n<span class=\"nv\">amp_image_id</span> <span class=\"o\">=</span> &lt;vthunder_image_id&gt;\n<span class=\"nv\">loadbalancer_topology</span> <span class=\"o\">=</span> &lt;SINGLE or ACTIVE_STANDBY&gt;\n\n<span class=\"o\">[</span>a10_health_manager<span class=\"o\">]</span>\n<span class=\"nv\">udp_server_ip_address</span> <span class=\"o\">=</span> &lt;server_ip_address_for_health_monitor&gt;\n<span class=\"nv\">bind_port</span> <span class=\"o\">=</span> <span class=\"m\">5550</span>\n<span class=\"nv\">bind_ip</span> <span class=\"o\">=</span> &lt;controller_ip_configured_to_listen_for_udp_health_packets&gt;\n<span class=\"nv\">heartbeat_interval</span> <span class=\"o\">=</span> <span class=\"m\">5</span>\n<span class=\"nv\">heartbeat_key</span> <span class=\"o\">=</span> insecure\n<span class=\"nv\">heartbeat_timeout</span> <span class=\"o\">=</span> <span class=\"m\">90</span>\n<span class=\"nv\">health_check_interval</span> <span class=\"o\">=</span> <span class=\"m\">3</span>\n<span class=\"nv\">failover_timeout</span> <span class=\"o\">=</span> <span class=\"m\">600</span>\n<span class=\"nv\">health_check_timeout</span> <span class=\"o\">=</span> <span class=\"m\">3</span>\n<span class=\"nv\">health_check_max_retries</span> <span class=\"o\">=</span> <span class=\"m\">5</span>\n\n<span class=\"o\">[</span>a10_house_keeping<span class=\"o\">]</span>\n<span class=\"nv\">load_balancer_expiry_age</span> <span class=\"o\">=</span> <span class=\"m\">3600</span>\n<span class=\"nv\">amphorae_expiry_age</span> <span class=\"o\">=</span> <span class=\"m\">3600</span>\n</pre>\n<p>Full list of options can be found here: <a href=\"https://github.com/a10networks/a10-octavia/blob/master/a10_octavia/common/config_options.py\" rel=\"nofollow\">Config Options Module</a></p>\n<h4>3ad. Update security group to access vThunder AXAPIs</h4>\n<p>These settings are for ports allocated on the managment network. It's up to the operator to define the data network security rules.</p>\n<p>When delopying with the STANDALONE loadbalancer topology</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Protocol</th>\n<th align=\"center\">Port</th>\n<th align=\"center\">Ingress</th>\n<th align=\"center\">Egress</th>\n<th align=\"center\">Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">TCP</td>\n<td align=\"center\">80</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">Communication with AXAPI</td>\n</tr>\n<tr>\n<td align=\"center\">TCP</td>\n<td align=\"center\">443</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">Communication with AXAPI</td>\n</tr>\n<tr>\n<td align=\"center\">UDP</td>\n<td align=\"center\">5550</td>\n<td align=\"center\"></td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">Communication with Health Manager Service</td>\n</tr></tbody></table>\n<p>When deploying with the ACTIVE-STANDBY loadbalancer topology</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Protocol</th>\n<th align=\"center\">Port</th>\n<th align=\"center\">Ingress</th>\n<th align=\"center\">Egress</th>\n<th align=\"center\">Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">TCP</td>\n<td align=\"center\">80</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">Communication with AXAPI</td>\n</tr>\n<tr>\n<td align=\"center\">TCP</td>\n<td align=\"center\">443</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">Communication with AXAPI</td>\n</tr>\n<tr>\n<td align=\"center\">UDP</td>\n<td align=\"center\">ALL</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">For specifics contact <a href=\"mailto:support@a10networks.com\">support@a10networks.com</a></td>\n</tr></tbody></table>\n<h3>3b. For use with hardware devices</h3>\n<h4>3ba. Create the a10-octavia.conf file</h4>\n<pre>$ mkdir /etc/a10\n$ touch a10-octavia.conf\n</pre>\n<h4>3bb. Sample a10-octavia.conf for hardware devices</h4>\n<pre><span class=\"o\">[</span>a10_controller_worker<span class=\"o\">]</span>\n<span class=\"nv\">amp_secgroup_list</span> <span class=\"o\">=</span> &lt;security_group_to_apply&gt; \n<span class=\"nv\">amp_boot_network_list</span> <span class=\"o\">=</span> &lt;netword_id_to_boot_amphorae_in_admin_project&gt;\n<span class=\"nv\">amp_ssh_key_name</span> <span class=\"o\">=</span> &lt;ssh_key_for_amphorae&gt;\n<span class=\"nv\">network_driver</span> <span class=\"o\">=</span> a10_octavia_neutron_driver\n<span class=\"nv\">workers</span> <span class=\"o\">=</span> <span class=\"m\">2</span>\n<span class=\"nv\">amp_active_retries</span> <span class=\"o\">=</span> <span class=\"m\">100</span>\n<span class=\"nv\">amp_active_wait_sec</span> <span class=\"o\">=</span> <span class=\"m\">2</span>\n<span class=\"nv\">loadbalancer_topology</span> <span class=\"o\">=</span> SINGLE\n\n<span class=\"o\">[</span>RACK_VTHUNDER<span class=\"o\">]</span>\n<span class=\"nv\">devices</span> <span class=\"o\">=</span> <span class=\"s2\">\"\"\"[</span>\n<span class=\"s2\">                    {</span>\n<span class=\"s2\">                     \"</span>project_id<span class=\"s2\">\":\"</span>&lt;project_id&gt;<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>ip_address<span class=\"s2\">\":\"</span><span class=\"m\">10</span>.0.0.4<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>undercloud<span class=\"s2\">\":\"</span>True<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>username<span class=\"s2\">\":\"</span>&lt;username&gt;<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>password<span class=\"s2\">\":\"</span>&lt;password&gt;<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>device_name<span class=\"s2\">\":\"</span>&lt;device_name&gt;<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>axapi_version<span class=\"s2\">\":\"</span><span class=\"m\">30</span><span class=\"s2\">\"</span>\n<span class=\"s2\">                     },</span>\n<span class=\"s2\">                     {</span>\n<span class=\"s2\">                     \"</span>project_id<span class=\"s2\">\":\"</span>&lt;another_project_id&gt;<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>ip_address<span class=\"s2\">\":\"</span><span class=\"m\">10</span>.0.0.5<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>undercloud<span class=\"s2\">\":\"</span>True<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>username<span class=\"s2\">\":\"</span>&lt;username&gt;<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>password<span class=\"s2\">\":\"</span>&lt;password&gt;<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>device_name<span class=\"s2\">\":\"</span>&lt;device_name&gt;<span class=\"s2\">\",</span>\n<span class=\"s2\">                     \"</span>axapi_version<span class=\"s2\">\":\"</span><span class=\"m\">30</span><span class=\"s2\">\",</span>\n<span class=\"s2\">                     }</span>\n<span class=\"s2\">             ]</span>\n<span class=\"s2\">       \"\"\"</span>\n</pre>\n<p>Full list of options can be found here: <a href=\"https://github.com/a10networks/a10-octavia/blob/master/a10_octavia/common/config_options.py\" rel=\"nofollow\">Config Options Module</a></p>\n<h3>4. Run database migrations</h3>\n<p>From the <code>/path/to/a10-octavia/a10_octavia/db/migration</code> folder run</p>\n<pre>$ alembic upgrade head\n</pre>\n<p>If versioning error occurs, delete all entries in the <code>alembic_version</code> table from <code>octavia</code> database and re-run the above command.</p>\n<pre>mysql&gt; use octavia<span class=\"p\">;</span>\nmysql&gt; DELETE FROM alembic_version<span class=\"p\">;</span>\n</pre>\n<p><em>Note: Octavia verisons less than 4.1.1 have the <code>alembic_migrations</code> table instead</em></p>\n<h3>5. Register and start a10-octavia services</h3>\n<p>With <code>a10-octavia</code> installed, run the following command to register the services</p>\n<pre>$ install-a10-octavia\n</pre>\n<p>This will install systemd services with names - <code>a10-controller-worker.service</code>, <code>a10-health-manager.service</code> and <code>a10-housekeeper-manager.service</code>.</p>\n<h4>5a. Make sure the services are up and running.</h4>\n<pre>$ systemctl status a10-controller-worker.service a10-health-manager.service a10-housekeeper-manager.service\n</pre>\n<p>You can start/stop the services using systemctl/service commands.</p>\n<h2>Setting Object Defaults</h2>\n<p>These settings are added to the <code>a10-octavia.conf</code> file. They allow the operator to configure options not exposed by the Openstack CLI.</p>\n<p><em>WARNING: Any option specified here will apply globally meaning all projects and devices</em></p>\n<h4>Loadbalancer/virtual server config example</h4>\n<pre><span class=\"o\">[</span>SLB<span class=\"o\">]</span>\n<span class=\"nv\">arp_disable</span> <span class=\"o\">=</span> False\n<span class=\"nv\">default_virtual_server_vrid</span> <span class=\"o\">=</span> <span class=\"s2\">\"10\"</span>\n<span class=\"nv\">logging_template</span> <span class=\"o\">=</span> <span class=\"s2\">\"Logging_temp1\"</span>\n<span class=\"nv\">policy_template</span> <span class=\"o\">=</span> <span class=\"s2\">\"policy_temp1\"</span>\n<span class=\"nv\">template_virtual_server</span> <span class=\"o\">=</span> <span class=\"s2\">\"virtual_server_template1\"</span>\n<span class=\"nv\">default_virtual_server_vrid</span> <span class=\"o\">=</span> <span class=\"m\">0</span>\n</pre>\n<h4>Listener/virtual port config example</h4>\n<pre><span class=\"o\">[</span>LISTENER<span class=\"o\">]</span>\n<span class=\"nv\">ipinip</span> <span class=\"o\">=</span> False\n<span class=\"nv\">no_dest_nat</span> <span class=\"o\">=</span> False\n<span class=\"nv\">ha_conn_mirror</span> <span class=\"o\">=</span> False\n<span class=\"nv\">template_virtual_port</span> <span class=\"o\">=</span> <span class=\"s2\">\"vport_template\"</span>\n<span class=\"nv\">template_tcp</span> <span class=\"o\">=</span> <span class=\"s2\">\"tcp_template\"</span>\n<span class=\"nv\">template_policy</span> <span class=\"o\">=</span> <span class=\"s2\">\"policy_temp1\"</span>\n<span class=\"nv\">autosnat</span> <span class=\"o\">=</span> True\n<span class=\"nv\">conn_limit</span> <span class=\"o\">=</span> <span class=\"m\">5000</span>\n<span class=\"nv\">template_http</span> <span class=\"o\">=</span> <span class=\"s2\">\"http_template\"</span>\n</pre>\n<h4>Pool/service group config example</h4>\n<pre><span class=\"o\">[</span>SERVICE - GROUP<span class=\"o\">]</span>\n<span class=\"nv\">templates</span> <span class=\"o\">=</span> <span class=\"s2\">\"server1\"</span>\n</pre>\n<h4>Member config example</h4>\n<pre><span class=\"o\">[</span>SERVER<span class=\"o\">]</span>\n<span class=\"nv\">conn_limit</span> <span class=\"o\">=</span> <span class=\"m\">5000</span>\n<span class=\"nv\">conn_resume</span> <span class=\"o\">=</span> <span class=\"m\">1</span>\n<span class=\"nv\">templates</span> <span class=\"o\">=</span> <span class=\"s2\">\"server1\"</span>\n</pre>\n<p>Full list of options can be found here: <a href=\"https://github.com/a10networks/a10-octavia/blob/master/a10_octavia/common/config_options.py\" rel=\"nofollow\">Config Options Module</a></p>\n<h2>Troubleshooting</h2>\n<p>You may check logs of the services using <code>journalctl</code> commands. For example:</p>\n<pre>$ journalctl -af --unit a10-controller-worker.service\n$ journalctl -af --unit a10-health-manager.service\n$ journalctl -af --unit a10-housekeeper-manager.service\n</pre>\n<h2>Contributing</h2>\n<h3>1. Fork the a10-octavia repository</h3>\n<p><a href=\"https://help.github.com/en/github/getting-started-with-github/fork-a-repo\" rel=\"nofollow\">How To Fork</a></p>\n<h3>2. Clone the repo from your fork</h3>\n<pre>$ git clone https://git@github.com:&lt;username&gt;/a10-octavia.git\n</pre>\n<h3>3. Checkout to a new branch</h3>\n<pre>$ git checkout -b feature/&lt;branch_name&gt;\n</pre>\n<h3>4. Run octavia install script</h3>\n<p><strong>WARNING: THIS INSTALLS DEVSTACK. RUN IN A VM</strong></p>\n<p>Run the following as the super user</p>\n<pre>$ sudo ./path/to/a10-octavia/a10_octavia/contrib/devstack/new-octavia-devstack.sh\n</pre>\n<h3>5. Become the stack user and move the a10-octavia repo</h3>\n<pre>$ sudo su - stack\n$ mv /path/to/a10-octavia .\n$ sudo chown -R stack:stack a10-octavia\n</pre>\n<h3>6. Install in edit mode</h3>\n<pre>$ pip install -e a10-octavia\n</pre>\n<h3>7. Restart the Octavia API service</h3>\n<p><code>sudo systemctl restart devstack@o-api.service</code></p>\n<h3>8. Update security groups</h3>\n<p>Modify the <code>lb-mgmt-sec-grp</code> to include</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Protocol</th>\n<th align=\"center\">Port</th>\n<th align=\"center\">Ingress</th>\n<th align=\"center\">Egress</th>\n<th align=\"center\">Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">TCP</td>\n<td align=\"center\">80</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">Communication with AXAPI</td>\n</tr>\n<tr>\n<td align=\"center\">TCP</td>\n<td align=\"center\">443</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">Communication with AXAPI</td>\n</tr>\n<tr>\n<td align=\"center\">UDP</td>\n<td align=\"center\">ALL</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">For specifics contact <a href=\"mailto:support@a10networks.com\">support@a10networks.com</a></td>\n</tr></tbody></table>\n<p>Modify the <code>lb-health-mgr-sec-grp</code> to include</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Protocol</th>\n<th align=\"center\">Port</th>\n<th align=\"center\">Ingress</th>\n<th align=\"center\">Egress</th>\n<th align=\"center\">Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">UDP</td>\n<td align=\"center\">5550</td>\n<td align=\"center\"></td>\n<td align=\"center\">\u2713</td>\n<td align=\"center\">Communication with Health Manager Service</td>\n</tr></tbody></table>\n<h3>9. Register and start the a10-octavia services</h3>\n<pre>$ install-a10-octavia\n</pre>\n<h4>Testing install script changes</h4>\n<p>When testing changes to the <code>install-a10-octavia</code> script, run <code>python setup.py install</code> from within the <code>a10-octavia</code> dir to re-install the script.</p>\n<h2>Issues and Inquiries</h2>\n<p>For all issues, please send an email to <a href=\"mailto:support@a10networks.com\">support@a10networks.com</a></p>\n<p>For general inquiries, please send an email to <a href=\"mailto:opensource@a10networks.com\">opensource@a10networks.com</a></p>\n\n          </div>"}, "last_serial": 7075776, "releases": {"0.1.0.dev384": [{"comment_text": "", "digests": {"md5": "ec66d788ca0cab329208df3a7b88262a", "sha256": "a8394d89fb1b79d26d1d2f9e337cc0e30f8dda6830b90f4c94727cb633325c15"}, "downloads": -1, "filename": "a10_octavia-0.1.0.dev384-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "ec66d788ca0cab329208df3a7b88262a", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 150155, "upload_time": "2020-04-22T02:36:25", "upload_time_iso_8601": "2020-04-22T02:36:25.588934Z", "url": "https://files.pythonhosted.org/packages/86/d8/53f7f935eef0c75631f16ce20501f37d19f6a7e635183778a6f72f60a8f9/a10_octavia-0.1.0.dev384-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6bd540c50ac2edaec03185f35130d925", "sha256": "92858d7e6781deb88229c4e8efaf1801389f8afad16f9f00b4a5b71c47ad92d3"}, "downloads": -1, "filename": "a10-octavia-0.1.0.dev384.tar.gz", "has_sig": false, "md5_digest": "6bd540c50ac2edaec03185f35130d925", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 89890, "upload_time": "2020-04-22T02:36:28", "upload_time_iso_8601": "2020-04-22T02:36:28.204000Z", "url": "https://files.pythonhosted.org/packages/b2/ff/2890a7a3fb932f86fe603a9babe91cd66b10a6353e316f6c34769a112fda/a10-octavia-0.1.0.dev384.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "fee299d72b86367a2f311480ed77ee3c", "sha256": "f9c428b16e21a2aea23e3050577b2eb13c9988b344b4a6a83139701e1b378019"}, "downloads": -1, "filename": "a10-octavia-0.1.1.tar.gz", "has_sig": false, "md5_digest": "fee299d72b86367a2f311480ed77ee3c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 89845, "upload_time": "2020-04-22T10:52:26", "upload_time_iso_8601": "2020-04-22T10:52:26.042814Z", "url": "https://files.pythonhosted.org/packages/b8/af/107ee7f82c347070734d4274a671bb4545a454d7f1aa3d0587f34ba4323c/a10-octavia-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "f7e528150acfe15116b9c2dcdf2aabf2", "sha256": "be7ecf0772f6ccc43203b37f35308244d7b3164bf19367a92b6dbfe099373d1d"}, "downloads": -1, "filename": "a10-octavia-0.1.2.tar.gz", "has_sig": false, "md5_digest": "f7e528150acfe15116b9c2dcdf2aabf2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 89885, "upload_time": "2020-04-22T11:11:21", "upload_time_iso_8601": "2020-04-22T11:11:21.623942Z", "url": "https://files.pythonhosted.org/packages/1e/c0/c320f0e30e8fb05daccc4198d0e5dfe9dfa6b11688736bb8f513759cc441/a10-octavia-0.1.2.tar.gz", "yanked": false}], "0.1.2.0a1": [{"comment_text": "", "digests": {"md5": "ad3ade835c8151b28e1bb385cb8d9b2a", "sha256": "bbb1b88b375d67c7b746240a4eda3b16c7c3b12ce8ec485a627cf5c318b6d701"}, "downloads": -1, "filename": "a10-octavia-0.1.2.0a1.tar.gz", "has_sig": false, "md5_digest": "ad3ade835c8151b28e1bb385cb8d9b2a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 89854, "upload_time": "2020-04-22T10:54:57", "upload_time_iso_8601": "2020-04-22T10:54:57.732753Z", "url": "https://files.pythonhosted.org/packages/15/fe/27fcd4d037dded434dadb63502cc6dcaabfc91c2a00456b88c582af76521/a10-octavia-0.1.2.0a1.tar.gz", "yanked": false}], "0.1.2.0a2": [{"comment_text": "", "digests": {"md5": "c1359055d7fce69cfa611dcd75fc123a", "sha256": "a5dadc05dbd85ccb366d62f7b188c92da9e9b13343f9dd22b99b27b7bbfeabf8"}, "downloads": -1, "filename": "a10-octavia-0.1.2.0a2.tar.gz", "has_sig": false, "md5_digest": "c1359055d7fce69cfa611dcd75fc123a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 89872, "upload_time": "2020-04-22T11:00:20", "upload_time_iso_8601": "2020-04-22T11:00:20.234719Z", "url": "https://files.pythonhosted.org/packages/9b/d7/e5b4ab93441224af9e638507c5273aee1f5a62d9bce1b4e1b8d182f7fbd4/a10-octavia-0.1.2.0a2.tar.gz", "yanked": false}], "0.1.2.0a3": [{"comment_text": "", "digests": {"md5": "2790ec12e139d98a9e21a02cabb951f0", "sha256": "351baf0b447d424e9efab51fa38b2c60f1578ebcbd5bfb177bc703d63db7f2e6"}, "downloads": -1, "filename": "a10-octavia-0.1.2.0a3.tar.gz", "has_sig": false, "md5_digest": "2790ec12e139d98a9e21a02cabb951f0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 89863, "upload_time": "2020-04-22T11:05:35", "upload_time_iso_8601": "2020-04-22T11:05:35.724213Z", "url": "https://files.pythonhosted.org/packages/ba/ba/9cf2908c59999bca85c4d466144a2ecb45f30e87168b571fe66e02bd0b8f/a10-octavia-0.1.2.0a3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "f7e528150acfe15116b9c2dcdf2aabf2", "sha256": "be7ecf0772f6ccc43203b37f35308244d7b3164bf19367a92b6dbfe099373d1d"}, "downloads": -1, "filename": "a10-octavia-0.1.2.tar.gz", "has_sig": false, "md5_digest": "f7e528150acfe15116b9c2dcdf2aabf2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 89885, "upload_time": "2020-04-22T11:11:21", "upload_time_iso_8601": "2020-04-22T11:11:21.623942Z", "url": "https://files.pythonhosted.org/packages/1e/c0/c320f0e30e8fb05daccc4198d0e5dfe9dfa6b11688736bb8f513759cc441/a10-octavia-0.1.2.tar.gz", "yanked": false}], "timestamp": "Thu May  7 15:55:34 2020"}