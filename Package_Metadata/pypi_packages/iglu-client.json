{"info": {"author": "Josh Wymer", "author_email": "josh@mixpanel.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: Apache Software License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# Python client for Iglu [![Travis-CI Build Status](https://travis-ci.com/jbwyme/iglu-python-client.svg?branch=master&status=passed)](https://travis-ci.com/github/jbwyme/iglu-python-client)\n\n\n\nA Python client and resolver for **[Iglu schema repositories][iglu-wiki]**\n\n# Installation\n`pip install iglu_client`\n\n# Usage\n\n```py\nimport json\nimport jsonschema\n\nfrom iglu_client import SchemaResolver, SelfDescribingJson\n\nresolver_conf = \"\"\"\n{\n    \"schema\": \"iglu:com.snowplowanalytics.iglu/resolver-config/jsonschema/1-0-2\",\n    \"data\": {\n        \"cacheSize\": 500,\n        \"repositories\": [\n            {\n                \"name\": \"My Private Repo\",\n                \"priority\": 0,\n                \"vendorPrefixes\": [\"com.mycompany\"],\n                \"connection\": {\"http\": {\"uri\": \"http://myprivaterepo.com\", \"apikey\": \"api-key\"}}\n            },\n            {\n                \"name\": \"Iglu Central\",\n                \"priority\": 1,\n                \"vendorPrefixes\": [\"com.snowplowanalytics.snowplow\"],\n                \"connection\": {\"http\": {\"uri\": \"http://iglucentral.com\"}}\n            }\n        ]\n    }\n}\n\"\"\"\nresolver = SchemaResolver.parse(resolver_conf)\n\n# Retrieve a schema\nschema = resolver.lookup_schema(\"iglu:com.snowplowanalytics.snowplow/link_click/jsonschema/1-0-0\")\nprint(\"schema: %s\" % schema)\n\n\n# Validate a self-describing JSON\nevent = \"\"\"\n{\n    \"schema\": \"iglu:com.snowplowanalytics.snowplow/link_click/jsonschema/1-0-0\",\n    \"data\": {\n        \"targetUrl\": \"https://mixpanel.com\"\n    }\n}\n\"\"\"\ndata = SelfDescribingJson.parse(event)\ntry:\n    data.validate(resolver) # will throw an exception if the event is invalid\n    print(\"event is valid\")\nexcept jsonschema.exceptions.ValidationError as e:\n    print(\"event is invalid\")\n\nif data.valid(resolver): # will return True or False\n    print(\"event is valid\")\nelse:\n    print(\"event is invalid\")\n\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/jbwyme/iglu-python-client", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "iglu-client", "package_url": "https://pypi.org/project/iglu-client/", "platform": "", "project_url": "https://pypi.org/project/iglu-client/", "project_urls": {"Homepage": "https://github.com/jbwyme/iglu-python-client"}, "release_url": "https://pypi.org/project/iglu-client/0.1.1/", "requires_dist": null, "requires_python": ">=3.6", "summary": "A python client for retrieving Iglu schemas and validating self-describing JSON", "version": "0.1.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Python client for Iglu <a href=\"https://travis-ci.com/github/jbwyme/iglu-python-client\" rel=\"nofollow\"><img alt=\"Travis-CI Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d6df5f6a6c8b0b42e6be21dc1b2768bac3b44793/68747470733a2f2f7472617669732d63692e636f6d2f6a6277796d652f69676c752d707974686f6e2d636c69656e742e7376673f6272616e63683d6d6173746572267374617475733d706173736564\"></a></h1>\n<p>A Python client and resolver for <strong>[Iglu schema repositories][iglu-wiki]</strong></p>\n<h1>Installation</h1>\n<p><code>pip install iglu_client</code></p>\n<h1>Usage</h1>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">import</span> <span class=\"nn\">jsonschema</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">iglu_client</span> <span class=\"kn\">import</span> <span class=\"n\">SchemaResolver</span><span class=\"p\">,</span> <span class=\"n\">SelfDescribingJson</span>\n\n<span class=\"n\">resolver_conf</span> <span class=\"o\">=</span> <span class=\"s2\">\"\"\"</span>\n<span class=\"s2\">{</span>\n<span class=\"s2\">    \"schema\": \"iglu:com.snowplowanalytics.iglu/resolver-config/jsonschema/1-0-2\",</span>\n<span class=\"s2\">    \"data\": {</span>\n<span class=\"s2\">        \"cacheSize\": 500,</span>\n<span class=\"s2\">        \"repositories\": [</span>\n<span class=\"s2\">            {</span>\n<span class=\"s2\">                \"name\": \"My Private Repo\",</span>\n<span class=\"s2\">                \"priority\": 0,</span>\n<span class=\"s2\">                \"vendorPrefixes\": [\"com.mycompany\"],</span>\n<span class=\"s2\">                \"connection\": {\"http\": {\"uri\": \"http://myprivaterepo.com\", \"apikey\": \"api-key\"}}</span>\n<span class=\"s2\">            },</span>\n<span class=\"s2\">            {</span>\n<span class=\"s2\">                \"name\": \"Iglu Central\",</span>\n<span class=\"s2\">                \"priority\": 1,</span>\n<span class=\"s2\">                \"vendorPrefixes\": [\"com.snowplowanalytics.snowplow\"],</span>\n<span class=\"s2\">                \"connection\": {\"http\": {\"uri\": \"http://iglucentral.com\"}}</span>\n<span class=\"s2\">            }</span>\n<span class=\"s2\">        ]</span>\n<span class=\"s2\">    }</span>\n<span class=\"s2\">}</span>\n<span class=\"s2\">\"\"\"</span>\n<span class=\"n\">resolver</span> <span class=\"o\">=</span> <span class=\"n\">SchemaResolver</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"n\">resolver_conf</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Retrieve a schema</span>\n<span class=\"n\">schema</span> <span class=\"o\">=</span> <span class=\"n\">resolver</span><span class=\"o\">.</span><span class=\"n\">lookup_schema</span><span class=\"p\">(</span><span class=\"s2\">\"iglu:com.snowplowanalytics.snowplow/link_click/jsonschema/1-0-0\"</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"schema: </span><span class=\"si\">%s</span><span class=\"s2\">\"</span> <span class=\"o\">%</span> <span class=\"n\">schema</span><span class=\"p\">)</span>\n\n\n<span class=\"c1\"># Validate a self-describing JSON</span>\n<span class=\"n\">event</span> <span class=\"o\">=</span> <span class=\"s2\">\"\"\"</span>\n<span class=\"s2\">{</span>\n<span class=\"s2\">    \"schema\": \"iglu:com.snowplowanalytics.snowplow/link_click/jsonschema/1-0-0\",</span>\n<span class=\"s2\">    \"data\": {</span>\n<span class=\"s2\">        \"targetUrl\": \"https://mixpanel.com\"</span>\n<span class=\"s2\">    }</span>\n<span class=\"s2\">}</span>\n<span class=\"s2\">\"\"\"</span>\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">SelfDescribingJson</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">)</span>\n<span class=\"k\">try</span><span class=\"p\">:</span>\n    <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">validate</span><span class=\"p\">(</span><span class=\"n\">resolver</span><span class=\"p\">)</span> <span class=\"c1\"># will throw an exception if the event is invalid</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"event is valid\"</span><span class=\"p\">)</span>\n<span class=\"k\">except</span> <span class=\"n\">jsonschema</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">ValidationError</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"event is invalid\"</span><span class=\"p\">)</span>\n\n<span class=\"k\">if</span> <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">valid</span><span class=\"p\">(</span><span class=\"n\">resolver</span><span class=\"p\">):</span> <span class=\"c1\"># will return True or False</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"event is valid\"</span><span class=\"p\">)</span>\n<span class=\"k\">else</span><span class=\"p\">:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"event is invalid\"</span><span class=\"p\">)</span>\n</pre>\n\n          </div>"}, "last_serial": 7191772, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "0b451db3e434ebc8f7307f73e481ef20", "sha256": "8070eff1a332024afd37debddb6d558054ffd625336aaafba4353cc0f2df768b"}, "downloads": -1, "filename": "iglu-client-0.1.0.tar.gz", "has_sig": false, "md5_digest": "0b451db3e434ebc8f7307f73e481ef20", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 6809, "upload_time": "2020-04-28T17:31:45", "upload_time_iso_8601": "2020-04-28T17:31:45.820579Z", "url": "https://files.pythonhosted.org/packages/b7/ee/6893e31c86fa15c0508d4a7a8d3d08f0e7ca921f960acf2e6502ec41bae1/iglu-client-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "f339bb29afd10e858590fd9aaaff8bd0", "sha256": "b6adee36c74e59aee753c64e09a5e4bc0395538a4348d69f8508733e47f3836f"}, "downloads": -1, "filename": "iglu-client-0.1.1.tar.gz", "has_sig": false, "md5_digest": "f339bb29afd10e858590fd9aaaff8bd0", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 7871, "upload_time": "2020-05-07T20:58:53", "upload_time_iso_8601": "2020-05-07T20:58:53.206812Z", "url": "https://files.pythonhosted.org/packages/9e/60/81349618d980bfb5d5af3a119d42a2284e972116b4a0e7efdb2a58823fe2/iglu-client-0.1.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "f339bb29afd10e858590fd9aaaff8bd0", "sha256": "b6adee36c74e59aee753c64e09a5e4bc0395538a4348d69f8508733e47f3836f"}, "downloads": -1, "filename": "iglu-client-0.1.1.tar.gz", "has_sig": false, "md5_digest": "f339bb29afd10e858590fd9aaaff8bd0", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 7871, "upload_time": "2020-05-07T20:58:53", "upload_time_iso_8601": "2020-05-07T20:58:53.206812Z", "url": "https://files.pythonhosted.org/packages/9e/60/81349618d980bfb5d5af3a119d42a2284e972116b4a0e7efdb2a58823fe2/iglu-client-0.1.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:48:42 2020"}