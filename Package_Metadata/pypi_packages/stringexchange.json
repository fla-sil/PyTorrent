{"info": {"author": "UNKNOWN", "author_email": "UNKNOWN", "bugtrack_url": null, "classifiers": ["Programming Language :: Python", "Programming Language :: Python :: Implementation :: CPython"], "description": "stringexchange\n========================================\n\nno pyramid\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.. code:: python\n\n    from stringexchange import make_exchange, function_call_emitter\n\n    exchange = make_exchange(function_call_emitter)\n\n    template = \"\"\"f(a, {}, b)\"\"\".format(exchange.subscribe(\"args\"))\n    p = exchange.publisher(\"args\")\n\n    p.publish(\"x\")\n    p.publish(\"y\\n\")\n    p.publish(\"z\")\n\n    output = exchange.emit(template)\n    assert output == \"f(a, x, y, z, b)\"\n\non pyramid\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nfile structure\n\n- onpyramid.py\n- top.html\n\nonpyramid.py\n\n.. code:: python\n\n    # -*- coding:utf-8 -*-\n    ## onpyramid.py\n    from wsgiref.simple_server import make_server\n    from pyramid.config import Configurator\n    import os.path\n\n\n    def top_view(request):\n        js = request.string_exchange.publisher(\"js\")\n        css = request.string_exchange.publisher(\"css\")\n        return {\"css\": css, \"js\": js}\n\n\n    if __name__ == '__main__':\n        here = os.path.dirname(os.path.abspath(__file__))\n        settings = {\"mako.directories\": here,\n                    \"pyramid.reload_templates\": True}\n        config = Configurator(settings=settings)\n\n        config.include(\"pyramid_mako\")\n        config.include(\"stringexchange\")  # !!\n        config.add_mako_renderer(\".html\")\n\n        config.add_route('top', '/')\n        config.add_view(top_view, route_name='top', renderer=\"top.html\")\n\n        app = config.make_wsgi_app()\n        server = make_server('0.0.0.0', 8080, app)\n        server.serve_forever()\n\ntop.html\n\n.. code:: html\n\n    ## top.html\n    <html>\n    <head>\n    ${request.string_exchange.subscribe(\"css\", emit=\"newline\", iterator=\"unique\")}\n    </head>\n    <body>\n    \n    <!-- foo widget -->\n    <% js.publish('<script src=\"base.js\"></script>') %>\n    <% js.publish('<script src=\"foo.js\"></script>') %>\n    <h1>foo</h1>\n    foo content\n    \n    <!-- boo widget -->\n    <% js.publish('<script src=\"base.js\"></script>') %>\n    <% js.publish('<script src=\"boo.js\"></script>') %>\n    <% css.publish('<link href=\"widget.boo.css\"></link>') %>\n    <h1>boo</h1>\n    <ul>\n    <li>boo0</li>\n    <li>boo1</li>\n    <li>boo2</li>\n    </ul>\n    \n    ${request.string_exchange.subscribe(\"js\", \"newline\", iterator=\"unique\")}\n    </body>\n    </html>\n\noutput\n\n.. code:: bash\n\n    $ python demo/onpyramid.py &\n    $ curl http://localhost:8080\n    <html>\n    <head>\n    <link href=\"widget.boo.css\"></link>\n    </head>\n    <body>\n    \n    <!-- foo widget -->\n    \n    \n    <h1>foo</h1>\n    foo content\n    \n    <!-- boo widget -->\n    \n    \n    \n    <h1>boo</h1>\n    <ul>\n    <li>boo0</li>\n    <li>boo1</li>\n    <li>boo2</li>\n    </ul>\n    \n    <script src=\"base.js\"></script>\n    <script src=\"foo.js\"></script>\n    <script src=\"boo.js\"></script>\n    </body>\n    </html>", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "UNKNOWN", "keywords": "", "license": "UNKNOWN", "maintainer": null, "maintainer_email": null, "name": "stringexchange", "package_url": "https://pypi.org/project/stringexchange/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/stringexchange/", "project_urls": {"Download": "UNKNOWN", "Homepage": "UNKNOWN"}, "release_url": "https://pypi.org/project/stringexchange/0.1/", "requires_dist": null, "requires_python": null, "summary": "anything like django sekizai", "version": "0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"no-pyramid\">\n<h2>no pyramid</h2>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">stringexchange</span> <span class=\"kn\">import</span> <span class=\"n\">make_exchange</span><span class=\"p\">,</span> <span class=\"n\">function_call_emitter</span>\n\n<span class=\"n\">exchange</span> <span class=\"o\">=</span> <span class=\"n\">make_exchange</span><span class=\"p\">(</span><span class=\"n\">function_call_emitter</span><span class=\"p\">)</span>\n\n<span class=\"n\">template</span> <span class=\"o\">=</span> <span class=\"s2\">\"\"\"f(a, </span><span class=\"si\">{}</span><span class=\"s2\">, b)\"\"\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">exchange</span><span class=\"o\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s2\">\"args\"</span><span class=\"p\">))</span>\n<span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">exchange</span><span class=\"o\">.</span><span class=\"n\">publisher</span><span class=\"p\">(</span><span class=\"s2\">\"args\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">publish</span><span class=\"p\">(</span><span class=\"s2\">\"x\"</span><span class=\"p\">)</span>\n<span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">publish</span><span class=\"p\">(</span><span class=\"s2\">\"y</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n<span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">publish</span><span class=\"p\">(</span><span class=\"s2\">\"z\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">output</span> <span class=\"o\">=</span> <span class=\"n\">exchange</span><span class=\"o\">.</span><span class=\"n\">emit</span><span class=\"p\">(</span><span class=\"n\">template</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"n\">output</span> <span class=\"o\">==</span> <span class=\"s2\">\"f(a, x, y, z, b)\"</span>\n</pre>\n</div>\n<div id=\"on-pyramid\">\n<h2>on pyramid</h2>\n<p>file structure</p>\n<ul>\n<li>onpyramid.py</li>\n<li>top.html</li>\n</ul>\n<p>onpyramid.py</p>\n<pre><span class=\"c1\"># -*- coding:utf-8 -*-</span>\n<span class=\"c1\">## onpyramid.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">wsgiref.simple_server</span> <span class=\"kn\">import</span> <span class=\"n\">make_server</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pyramid.config</span> <span class=\"kn\">import</span> <span class=\"n\">Configurator</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os.path</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">top_view</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"n\">js</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">string_exchange</span><span class=\"o\">.</span><span class=\"n\">publisher</span><span class=\"p\">(</span><span class=\"s2\">\"js\"</span><span class=\"p\">)</span>\n    <span class=\"n\">css</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">string_exchange</span><span class=\"o\">.</span><span class=\"n\">publisher</span><span class=\"p\">(</span><span class=\"s2\">\"css\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">\"css\"</span><span class=\"p\">:</span> <span class=\"n\">css</span><span class=\"p\">,</span> <span class=\"s2\">\"js\"</span><span class=\"p\">:</span> <span class=\"n\">js</span><span class=\"p\">}</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">here</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">dirname</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">abspath</span><span class=\"p\">(</span><span class=\"vm\">__file__</span><span class=\"p\">))</span>\n    <span class=\"n\">settings</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"mako.directories\"</span><span class=\"p\">:</span> <span class=\"n\">here</span><span class=\"p\">,</span>\n                <span class=\"s2\">\"pyramid.reload_templates\"</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">}</span>\n    <span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">Configurator</span><span class=\"p\">(</span><span class=\"n\">settings</span><span class=\"o\">=</span><span class=\"n\">settings</span><span class=\"p\">)</span>\n\n    <span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">\"pyramid_mako\"</span><span class=\"p\">)</span>\n    <span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">\"stringexchange\"</span><span class=\"p\">)</span>  <span class=\"c1\"># !!</span>\n    <span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_mako_renderer</span><span class=\"p\">(</span><span class=\"s2\">\".html\"</span><span class=\"p\">)</span>\n\n    <span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_route</span><span class=\"p\">(</span><span class=\"s1\">'top'</span><span class=\"p\">,</span> <span class=\"s1\">'/'</span><span class=\"p\">)</span>\n    <span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_view</span><span class=\"p\">(</span><span class=\"n\">top_view</span><span class=\"p\">,</span> <span class=\"n\">route_name</span><span class=\"o\">=</span><span class=\"s1\">'top'</span><span class=\"p\">,</span> <span class=\"n\">renderer</span><span class=\"o\">=</span><span class=\"s2\">\"top.html\"</span><span class=\"p\">)</span>\n\n    <span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">make_wsgi_app</span><span class=\"p\">()</span>\n    <span class=\"n\">server</span> <span class=\"o\">=</span> <span class=\"n\">make_server</span><span class=\"p\">(</span><span class=\"s1\">'0.0.0.0'</span><span class=\"p\">,</span> <span class=\"mi\">8080</span><span class=\"p\">,</span> <span class=\"n\">app</span><span class=\"p\">)</span>\n    <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">serve_forever</span><span class=\"p\">()</span>\n</pre>\n<p>top.html</p>\n<pre>## top.html\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n${request.string_exchange.subscribe(\"css\", emit=\"newline\", iterator=\"unique\")}\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n\n<span class=\"c\">&lt;!-- foo widget --&gt;</span>\n<span class=\"err\">&lt;</span>% js.publish('<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"base.js\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>') %&gt;\n<span class=\"err\">&lt;</span>% js.publish('<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"foo.js\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>') %&gt;\n<span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\nfoo content\n\n<span class=\"c\">&lt;!-- boo widget --&gt;</span>\n<span class=\"err\">&lt;</span>% js.publish('<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"base.js\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>') %&gt;\n<span class=\"err\">&lt;</span>% js.publish('<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"boo.js\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>') %&gt;\n<span class=\"err\">&lt;</span>% css.publish('<span class=\"p\">&lt;</span><span class=\"nt\">link</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"widget.boo.css\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">link</span><span class=\"p\">&gt;</span>') %&gt;\n<span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>boo<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>boo0<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>boo1<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>boo2<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n\n${request.string_exchange.subscribe(\"js\", \"newline\", iterator=\"unique\")}\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</pre>\n<p>output</p>\n<pre>$ python demo/onpyramid.py <span class=\"p\">&amp;</span>\n$ curl http://localhost:8080\n&lt;html&gt;\n&lt;head&gt;\n&lt;link <span class=\"nv\">href</span><span class=\"o\">=</span><span class=\"s2\">\"widget.boo.css\"</span>&gt;&lt;/link&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;!-- foo widget --&gt;\n\n\n&lt;h1&gt;foo&lt;/h1&gt;\nfoo content\n\n&lt;!-- boo widget --&gt;\n\n\n\n&lt;h1&gt;boo&lt;/h1&gt;\n&lt;ul&gt;\n&lt;li&gt;boo0&lt;/li&gt;\n&lt;li&gt;boo1&lt;/li&gt;\n&lt;li&gt;boo2&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;script <span class=\"nv\">src</span><span class=\"o\">=</span><span class=\"s2\">\"base.js\"</span>&gt;&lt;/script&gt;\n&lt;script <span class=\"nv\">src</span><span class=\"o\">=</span><span class=\"s2\">\"foo.js\"</span>&gt;&lt;/script&gt;\n&lt;script <span class=\"nv\">src</span><span class=\"o\">=</span><span class=\"s2\">\"boo.js\"</span>&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</pre>\n</div>\n\n          </div>"}, "last_serial": 1119273, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "388eda08c736bcc235ab1c87a504adc7", "sha256": "b68942d685993ebe9751a6d537171d3e8d39007e78b5e5ce5d1fe58a436b2cab"}, "downloads": -1, "filename": "stringexchange-0.1.tar.gz", "has_sig": false, "md5_digest": "388eda08c736bcc235ab1c87a504adc7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4941, "upload_time": "2014-06-09T14:19:18", "upload_time_iso_8601": "2014-06-09T14:19:18.232482Z", "url": "https://files.pythonhosted.org/packages/dc/5f/4dee6823478718460a80060b57084da51dc8c799e8664091c1a053f5d62e/stringexchange-0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "388eda08c736bcc235ab1c87a504adc7", "sha256": "b68942d685993ebe9751a6d537171d3e8d39007e78b5e5ce5d1fe58a436b2cab"}, "downloads": -1, "filename": "stringexchange-0.1.tar.gz", "has_sig": false, "md5_digest": "388eda08c736bcc235ab1c87a504adc7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4941, "upload_time": "2014-06-09T14:19:18", "upload_time_iso_8601": "2014-06-09T14:19:18.232482Z", "url": "https://files.pythonhosted.org/packages/dc/5f/4dee6823478718460a80060b57084da51dc8c799e8664091c1a053f5d62e/stringexchange-0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:01:12 2020"}