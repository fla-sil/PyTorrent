{"info": {"author": "Encore Technologies", "author_email": "code@encore.tech", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Environment :: Console", "Intended Audience :: Developers", "License :: OSI Approved :: Apache Software License", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "[![Build Status](https://circleci.com/gh/EncoreTechnologies/orquestaconvert.svg?style=shield&circle-token=:circle-token)](https://circleci.com/gh/EncoreTechnologies/orquestaconvert) [![codecov](https://codecov.io/gh/EncoreTechnologies/orquestaconvert/branch/master/graph/badge.svg)](https://codecov.io/gh/EncoreTechnologies/orquestaconvert) [![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)\n\n# orquestaconvert\n\nConverts Mistral workflows into Orquesta workflows\n\n# Usage\n\n## Getting Started\n\nThe script automatically sets up a `virtualenv` (if it doesn't exist) that contains all of the necessary depedencies to run. \n\nSimply run the command for the first time and everything will get setup for you:\n\n``` shell\ngit clone https://github.com/EncoreTechnologies/orquestaconvert.git\ncd orquestaconvert\n./bin/orquestaconvert.sh --help\n```\n\n## `orquestaconvert.sh` - convert a single workflow and print to stdout\n\nYou must specify one or more workflow YAML files to convert as the last arguments to the script.\n\nThere are also some options you can use:\n\n- `-e <type>` - Type of expressions (YAQL or Jinja) to use when inserting new expressions (such as task transitions in the `when` clause)\n- `--force` - Forces the script to convert and print the workflow even if it does not successfully validate against the Orquesta YAML schema.\n- `--validate` - Runs just the validation portion of the script, very useful to validate workflows you partially converted with `--force` then finished conversion by hand.\n\n### Examples\n\n#### Convert a single workflow\n\nConvert the `nasa_apod_twitter_post.yaml` workflow from Mistral to Orquesta, using Jinja expressions (the default) in task transition conditions.\n\n```shell\n./bin/orquestaconvert.sh ./tests/fixtures/mistral/nasa_apod_twitter_post.yaml\n```\n\n#### Convert a workflow, output YAQL expressions\n\nConvert the workflow, using YAQL expressions for new task transition conditions, and skips Orquesta workflow validation. Note that this may generate a workflow that is *neither* a valid Mistral *nor* a valid Orquesta workflow.\n\n```shell\n./bin/orquestaconvert.sh -e yaql --force ./tests/fixtures/mistral/nasa_apod_twitter_post.yaml\n```\n\n#### Validate an Orquesta workflow\n\nRun Orquesta YAML schema validation on the file. Returns 0 on successful validation, nonzero on unsuccessful validation. Also use the `--verbose` option to explitly print the validation results for the file.\n\n```shell\n./bin/orquestaconvert.sh --validate ./tests/fixtures/orquesta/nasa_apod_twitter_post.yaml\n```\n\n## `orquestaconvert-pack.sh` - convert all Mistral workflows in a pack\n\nThis script scans a pack for all action metadata files and attempts to convert all Mistral workflows to Orquesta and/or validates all Orquesta workflows in a pack using the `orquestaconvert.sh` script. This script passes all unrecognized arguments to `orquestaconvert.sh`, so all actions you can do on one workflow with that script, you can do to the entire pack by using this script.\n\nYou must either run this command from the base directory of a pack or you must specify the directory that contains action metadata files with the `--actions-dir` option.\n\nRecognized options are:\n\n- `--list-workflows <type>` - List all workflows of the specified type (must either be `action-chain` for ActionChain, `mistral-v2` for Mistral, or `orquesta` or `orchestra` for Orquesta workflows)\n- `--actions-dir <dir>` - Specifies the directory to scan and convert\n\n### Examples\n\n#### Convert all workflows in a pack\n\nAttempts to convert all workflows from Mistral to Orquesta, using Jinja expressions in new task transitions (Jinja is the default).\n\n```shell\n./bin/orquestaconvert-pack.sh\n```\n\n#### List Mistral workflows in a pack\n\nLists remaining Mistral workflows.\n\n```shell\n./bin/orquestaconvert-pack.sh --list-workflows mistral-v2\n```\n\n#### Convert all workflows in a pack, outputting YAQL expressions\n\nConverts all Mistral workflows (using YAQL expressions when generating task transition conditions) in `mypack/actions` to Orquesta and skips validation. Note that using this option may create workflows that are *neither* valid as Mistral *nor* Orquesta workflows.\n\n```shell\n./bin/orquestaconvert-pack.sh --expressions yaql --force --action-dir mypack/actions\n```\n\n#### Validate all Orquesta workflows in a pack\n\nExplicitly rints the validation results for all Orquesta workflows.\n\n```shell\n./bin/orquestaconvert-pack.sh --validate --verbose\n```\n\n# Features\n\n* Converts `direct` Mistral Workflows into Orquesta Workflows (general structure)\n* Handles `input`, `output`, `tasks`\n* For each task, `action`, `input`, `publish`, `on-success`, `on-error`, and `on-complete` are all converted\n* Converts _simple_ Jinja and YAQL expressions\n* Converts `task()`, `st2kv`, `_.xxx` / `$.xxx`, etc in Jinja and YAQL expressions\n* Converts `with-items` and `concurrency` attributes\n* Converts most `retry` attributes, including `continue-on` and _simple_ `break-on` expressions\n\n# Limitations\n\n* Does not convert `{% %}` Jinja expressions\n* Does not convert complex Jinja / YAQL expressions\n* Does not convert `reverse` type workflows\n* Does not convert workbooks (multiple workflows in the same file\n* Does not convert `task('xxx')` references to non-local tasks, the current task is always assumed.\n* Does not convert workflows with an `output-on-error` stanza\n* Does not convert workflows if the tasks contain one or more of the following attributes\n    * `keep-result`\n    * `pause-before`\n    * `safe-rerun`\n    * `target`\n    * `timeout`\n    * `wait-after`\n    * `wait-before`\n    * `workflow`\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://encore.tech/", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "orquestaconvert", "package_url": "https://pypi.org/project/orquestaconvert/", "platform": "", "project_url": "https://pypi.org/project/orquestaconvert/", "project_urls": {"Homepage": "https://encore.tech/"}, "release_url": "https://pypi.org/project/orquestaconvert/0.1/", "requires_dist": ["ruamel.yaml (>=0.15.0)", "yamlloader (>=0.5.0)", "orquesta"], "requires_python": "", "summary": "Tool to convert OpenStack Mistral workflows to StackStorm Orquesta workflows", "version": "0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://circleci.com/gh/EncoreTechnologies/orquestaconvert\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6f880dbd01106e33b4589aed539b92d5e2748a26/68747470733a2f2f636972636c6563692e636f6d2f67682f456e636f7265546563686e6f6c6f676965732f6f72717565737461636f6e766572742e7376673f7374796c653d736869656c6426636972636c652d746f6b656e3d3a636972636c652d746f6b656e\"></a> <a href=\"https://codecov.io/gh/EncoreTechnologies/orquestaconvert\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8a510948b7b5383caf1539cf05e21bc136a84966/68747470733a2f2f636f6465636f762e696f2f67682f456e636f7265546563686e6f6c6f676965732f6f72717565737461636f6e766572742f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a> <a href=\"https://opensource.org/licenses/Apache-2.0\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b97ca76cf5d8fd16c7bc4731270e0bbe53df7aa1/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d417061636865253230322e302d626c75652e737667\"></a></p>\n<h1>orquestaconvert</h1>\n<p>Converts Mistral workflows into Orquesta workflows</p>\n<h1>Usage</h1>\n<h2>Getting Started</h2>\n<p>The script automatically sets up a <code>virtualenv</code> (if it doesn't exist) that contains all of the necessary depedencies to run.</p>\n<p>Simply run the command for the first time and everything will get setup for you:</p>\n<pre>git clone https://github.com/EncoreTechnologies/orquestaconvert.git\n<span class=\"nb\">cd</span> orquestaconvert\n./bin/orquestaconvert.sh --help\n</pre>\n<h2><code>orquestaconvert.sh</code> - convert a single workflow and print to stdout</h2>\n<p>You must specify one or more workflow YAML files to convert as the last arguments to the script.</p>\n<p>There are also some options you can use:</p>\n<ul>\n<li><code>-e &lt;type&gt;</code> - Type of expressions (YAQL or Jinja) to use when inserting new expressions (such as task transitions in the <code>when</code> clause)</li>\n<li><code>--force</code> - Forces the script to convert and print the workflow even if it does not successfully validate against the Orquesta YAML schema.</li>\n<li><code>--validate</code> - Runs just the validation portion of the script, very useful to validate workflows you partially converted with <code>--force</code> then finished conversion by hand.</li>\n</ul>\n<h3>Examples</h3>\n<h4>Convert a single workflow</h4>\n<p>Convert the <code>nasa_apod_twitter_post.yaml</code> workflow from Mistral to Orquesta, using Jinja expressions (the default) in task transition conditions.</p>\n<pre>./bin/orquestaconvert.sh ./tests/fixtures/mistral/nasa_apod_twitter_post.yaml\n</pre>\n<h4>Convert a workflow, output YAQL expressions</h4>\n<p>Convert the workflow, using YAQL expressions for new task transition conditions, and skips Orquesta workflow validation. Note that this may generate a workflow that is <em>neither</em> a valid Mistral <em>nor</em> a valid Orquesta workflow.</p>\n<pre>./bin/orquestaconvert.sh -e yaql --force ./tests/fixtures/mistral/nasa_apod_twitter_post.yaml\n</pre>\n<h4>Validate an Orquesta workflow</h4>\n<p>Run Orquesta YAML schema validation on the file. Returns 0 on successful validation, nonzero on unsuccessful validation. Also use the <code>--verbose</code> option to explitly print the validation results for the file.</p>\n<pre>./bin/orquestaconvert.sh --validate ./tests/fixtures/orquesta/nasa_apod_twitter_post.yaml\n</pre>\n<h2><code>orquestaconvert-pack.sh</code> - convert all Mistral workflows in a pack</h2>\n<p>This script scans a pack for all action metadata files and attempts to convert all Mistral workflows to Orquesta and/or validates all Orquesta workflows in a pack using the <code>orquestaconvert.sh</code> script. This script passes all unrecognized arguments to <code>orquestaconvert.sh</code>, so all actions you can do on one workflow with that script, you can do to the entire pack by using this script.</p>\n<p>You must either run this command from the base directory of a pack or you must specify the directory that contains action metadata files with the <code>--actions-dir</code> option.</p>\n<p>Recognized options are:</p>\n<ul>\n<li><code>--list-workflows &lt;type&gt;</code> - List all workflows of the specified type (must either be <code>action-chain</code> for ActionChain, <code>mistral-v2</code> for Mistral, or <code>orquesta</code> or <code>orchestra</code> for Orquesta workflows)</li>\n<li><code>--actions-dir &lt;dir&gt;</code> - Specifies the directory to scan and convert</li>\n</ul>\n<h3>Examples</h3>\n<h4>Convert all workflows in a pack</h4>\n<p>Attempts to convert all workflows from Mistral to Orquesta, using Jinja expressions in new task transitions (Jinja is the default).</p>\n<pre>./bin/orquestaconvert-pack.sh\n</pre>\n<h4>List Mistral workflows in a pack</h4>\n<p>Lists remaining Mistral workflows.</p>\n<pre>./bin/orquestaconvert-pack.sh --list-workflows mistral-v2\n</pre>\n<h4>Convert all workflows in a pack, outputting YAQL expressions</h4>\n<p>Converts all Mistral workflows (using YAQL expressions when generating task transition conditions) in <code>mypack/actions</code> to Orquesta and skips validation. Note that using this option may create workflows that are <em>neither</em> valid as Mistral <em>nor</em> Orquesta workflows.</p>\n<pre>./bin/orquestaconvert-pack.sh --expressions yaql --force --action-dir mypack/actions\n</pre>\n<h4>Validate all Orquesta workflows in a pack</h4>\n<p>Explicitly rints the validation results for all Orquesta workflows.</p>\n<pre>./bin/orquestaconvert-pack.sh --validate --verbose\n</pre>\n<h1>Features</h1>\n<ul>\n<li>Converts <code>direct</code> Mistral Workflows into Orquesta Workflows (general structure)</li>\n<li>Handles <code>input</code>, <code>output</code>, <code>tasks</code></li>\n<li>For each task, <code>action</code>, <code>input</code>, <code>publish</code>, <code>on-success</code>, <code>on-error</code>, and <code>on-complete</code> are all converted</li>\n<li>Converts <em>simple</em> Jinja and YAQL expressions</li>\n<li>Converts <code>task()</code>, <code>st2kv</code>, <code>_.xxx</code> / <code>$.xxx</code>, etc in Jinja and YAQL expressions</li>\n<li>Converts <code>with-items</code> and <code>concurrency</code> attributes</li>\n<li>Converts most <code>retry</code> attributes, including <code>continue-on</code> and <em>simple</em> <code>break-on</code> expressions</li>\n</ul>\n<h1>Limitations</h1>\n<ul>\n<li>Does not convert <code>{% %}</code> Jinja expressions</li>\n<li>Does not convert complex Jinja / YAQL expressions</li>\n<li>Does not convert <code>reverse</code> type workflows</li>\n<li>Does not convert workbooks (multiple workflows in the same file</li>\n<li>Does not convert <code>task('xxx')</code> references to non-local tasks, the current task is always assumed.</li>\n<li>Does not convert workflows with an <code>output-on-error</code> stanza</li>\n<li>Does not convert workflows if the tasks contain one or more of the following attributes\n<ul>\n<li><code>keep-result</code></li>\n<li><code>pause-before</code></li>\n<li><code>safe-rerun</code></li>\n<li><code>target</code></li>\n<li><code>timeout</code></li>\n<li><code>wait-after</code></li>\n<li><code>wait-before</code></li>\n<li><code>workflow</code></li>\n</ul>\n</li>\n</ul>\n\n          </div>"}, "last_serial": 6534094, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "46a9970a2d5077598854f6a8c2b960bf", "sha256": "b005be7424c2870971f9930fcfc0df1239fd17db914dfafda70ad1f6c1b622f8"}, "downloads": -1, "filename": "orquestaconvert-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "46a9970a2d5077598854f6a8c2b960bf", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 40111, "upload_time": "2020-01-28T08:16:57", "upload_time_iso_8601": "2020-01-28T08:16:57.716216Z", "url": "https://files.pythonhosted.org/packages/29/20/896d51000de77d11a6509f9a3cf72964e70abb84f7f1e4d6c3052dd52be6/orquestaconvert-0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b733b71906e478db26395bd3f969eb0b", "sha256": "56e65b2149cfde1259eb84768418c70750b31f75f75da9d83abd72b250c9bc75"}, "downloads": -1, "filename": "orquestaconvert-0.1.tar.gz", "has_sig": false, "md5_digest": "b733b71906e478db26395bd3f969eb0b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27594, "upload_time": "2020-01-28T08:17:00", "upload_time_iso_8601": "2020-01-28T08:17:00.350854Z", "url": "https://files.pythonhosted.org/packages/20/6f/0da278e6e894f5ed53a87464943eda05789bfbf2bc81a9fba07e6cb7b6e9/orquestaconvert-0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "46a9970a2d5077598854f6a8c2b960bf", "sha256": "b005be7424c2870971f9930fcfc0df1239fd17db914dfafda70ad1f6c1b622f8"}, "downloads": -1, "filename": "orquestaconvert-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "46a9970a2d5077598854f6a8c2b960bf", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 40111, "upload_time": "2020-01-28T08:16:57", "upload_time_iso_8601": "2020-01-28T08:16:57.716216Z", "url": "https://files.pythonhosted.org/packages/29/20/896d51000de77d11a6509f9a3cf72964e70abb84f7f1e4d6c3052dd52be6/orquestaconvert-0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b733b71906e478db26395bd3f969eb0b", "sha256": "56e65b2149cfde1259eb84768418c70750b31f75f75da9d83abd72b250c9bc75"}, "downloads": -1, "filename": "orquestaconvert-0.1.tar.gz", "has_sig": false, "md5_digest": "b733b71906e478db26395bd3f969eb0b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27594, "upload_time": "2020-01-28T08:17:00", "upload_time_iso_8601": "2020-01-28T08:17:00.350854Z", "url": "https://files.pythonhosted.org/packages/20/6f/0da278e6e894f5ed53a87464943eda05789bfbf2bc81a9fba07e6cb7b6e9/orquestaconvert-0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:01:31 2020"}