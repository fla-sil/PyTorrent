{"info": {"author": "Ben Windsor", "author_email": "", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Software Development", "Typing :: Typed"], "description": "[![Build Status](https://travis-ci.org/bwindsor/typed-config.svg?branch=master)](https://travis-ci.org/bwindsor/typed-config)\n[![codecov](https://codecov.io/gh/bwindsor/typed-config/branch/master/graph/badge.svg)](https://codecov.io/gh/bwindsor/typed-config)\n\n# typed-config\nTyped, extensible, dependency free configuration reader for Python projects for multiple config sources and working well in IDEs for great autocomplete performance.\n\n`pip install typed-config`\n\nRequires python 3.6 or above.\n\n## Basic usage\n```python\n# my_app/config.py\nfrom typedconfig import Config, key, section\nfrom typedconfig.source import EnvironmentConfigSource\n\n@section('database')\nclass AppConfig(Config):\n    host = key(cast=str)\n    port = key(cast=int)\n    timeout = key(cast=float)\n\nconfig = AppConfig()\nconfig.add_source(EnvironmentConfigSource())\nconfig.read()\n```\n\n```python\n# my_app/main.py\nfrom my_app.config import config\nprint(config.host)\n```\nIn PyCharm, and hopefully other IDEs, it will recognise the datatypes of your configuration and allow you to autocomplete. No more remembering strings to get the right thing out!\n\n## How it works\nConfiguration is always supplied in a two level structure, so your source configuration can have multiple sections, and each section contains multiple key/value configuration pairs. For example:\n```ini\n[database]\nhost = 127.0.0.1\nport = 2000\n\n[algorithm]\nmax_value = 10\nmin_value = 20\n```\n\nYou then create your configuration hierarchy in code (this can be flat or many levels deep) and supply the matching between strings in your config sources and properties of your configuration classes.\n\nYou provide one or more `ConfigSource`s, from which the config for your application can be read. For example, you might supply an `EnvironmentConfigSource`,  and two `IniFileConfigSource`s. This would make your application first look for a configuration value in environment variables, if not found there it would then look at the first INI file (perhaps a user-specific file), before falling back to the second INI file (perhaps a default configuration shared between all users). If a parameter is still not found and is a required parameter, an error would be thrown.\n\nThere is emphasis on type information being available for everything so that an IDE will autocomplete when trying to use your config across your application.\n\n### Multiple data sources\n```python\nfrom typedconfig import Config, key, section, group_key\nfrom typedconfig.source import EnvironmentConfigSource, IniFileConfigSource\n\n@section('database')\nclass DatabaseConfig(Config):\n    host = key(cast=str)\n    port = key(cast=int)\n    username = key(cast=str)\n    password = key(cast=str)\n\nconfig = DatabaseConfig()\nconfig.add_source(EnvironmentConfigSource(prefix=\"EXAMPLE\"))\nconfig.add_source(IniFileConfigSource(\"config.cfg\"))\n\n# OR provide sources directly to the constructor\nconfig = DatabaseConfig(sources=[\n    EnvironmentConfigSource(prefix=\"EXAMPLE\"),\n    IniFileConfigSource(\"config.cfg\")\n])\n```\n\nSince you don't want to hard code your secret credentials, you might supply them through the environment.\nSo for the above configuration, the environment might look like this:\n```bash\nexport EXAMPLE_DATABASE_USERNAME=my_username\nexport EXAMPLE_DATABASE_PASSWORD=my_very_secret_password\nexport EXAMPLE_DATABASE_PORT=2001\n```\n\nThose values which couldn't be found in the environment would then be read from the INI file, which might look like this:\n```ini\n[database]\nHOST = db1.mydomain.com\nPORT = 2000\n```\n\nNote after this, `config.port` will be equal to `2001` as the value in the environment took priority over the value in the INI file.\n\n### Caching\nWhen config values are first used, they are read. This is lazy evaluation by default so that not everything is read if not necessary.\n\nAfter first use, they are cached in memory so that there should be no further I/O if the config value is used again.\n\nFor fail fast behaviour, and also to stop unexpected latency when a config value is read partway through your application (e.g. your config could be coming across a network), the option is available to read all config values at the start. Just call\n\n`config.read()`\n\nThis will throw an exception if any required config value cannot be found, and will also keep all read config values in memory for next time they are used. If you do not use `read` you will only get the exception when you first try to use the offending config key.\n\n### Hierarchical configuration\nUse `group_key` to represent a \"sub-config\" of a configuration. Set up \"sub-configs\" exactly as demonstrated above, and then create a parent config to compose them in one place.\n```python\nfrom typedconfig import Config, key, section, group_key\nfrom typedconfig.source import EnvironmentConfigSource, IniFileConfigSource\n\n@section('database')\nclass DatabaseConfig(Config):\n    host = key(cast=str)\n    port = key(cast=int)\n\n@section('algorithm')\nclass AlgorithmConfig(Config):\n    max_value = key(cast=float)\n    min_value = key(cast=float)\n\nclass ParentConfig(Config):\n    database = group_key(DatabaseConfig)\n    algorithm = group_key(AlgorithmConfig)\n    description = key(cast=str, section_name=\"general\")\n\nconfig = ParentConfig()\nconfig.add_source(EnvironmentConfigSource(prefix=\"EXAMPLE\"))\nconfig.add_source(IniFileConfigSource(\"config.cfg\"))\nconfig.read()\n```\n\nThe first time the `config.database` or `config.algorithm` is accessed (which in the case above is when `read()` is called), then an instance will be instantiated. Notice that it is the class definition, not an instance of the class, which is passed to the `group_key` function.\n\n### Custom section/key names, optional parameters, default values\nLet's take a look at this:\n```python\nfrom typedconfig import Config, key, section\n\n@section('database')\nclass AppConfig(Config):\n    host1 = key()\n    host2 = key(section_name='database', key_name='HOST2',\n                required=True, cast=str, default=None)\n```\nBoth `host1` and `host2` are legitimate configuration key definitions.\n\n* `section_name` - this name of the section in the configuration source from which this parameter should be read. This can be provided on a key-by-key basis, but if it is left out then the section name supplied by the `@section` decorator is used. If all keys supply a `section_name`, the class decorator is not needed. If both `section_name` and a decorator are provided, the `section_name` argument takes priority.\n* `key_name` - the name of this key in the configuration source from which this parameter is read. If not supplied, some magic uses the object property name as the key name.\n* `required` - default True. If False, and the configuration value can't be found, no error will be thrown and the default value will be used, if provided. If a default not provided, `None` will be used.\n* `cast` - probably the most important option for typing. **If you want autocomplete typing support you must specify this**. It's just a function which takes a string as an input and returns a parsed value. See the casting section for more. If not supplied, the value remains as a string.\n* `default` - only applicable if `required` is false. When `required` is false this value is used if a value cannot be found.\n\n### Types\n```python\nfrom typedconfig import Config, key, section\nfrom typing import List\n\ndef split_str(s: str) -> List[str]:\n    return [x.strip() for x in s.split(\",\")]\n\n@section('database')\nclass AppConfig(Config):\n    host = key()\n    port = key(cast=int)\n    users = key(cast=split_str)\n    zero_based_index = key(cast=lambda x: int(x)-1)\nconfig = AppConfig(sources=[...])\n```\nIn this example we have three ways of casting:\n1. Not casting at all. This default to returning a `str`, but your IDE won't know that so if you want type hints use `cast=str`\n2. Casting to an built in type which can take a string input and parse it, for example `int`\n3. Defining a custom function. Your function should take one string input and return one output of any type. To get type hint, just make sure your function has type annotations.\n4. Using a lambda expression. The type inference may or may not work depending on your expression, so if it doesn't just write it as a function with type annotations.\n\n## Configuration Sources\nConfiguration sources are how your main `Config` class knows where to get its data from. These are totally extensible so that you can read in your configuration from wherever you like - from a database, from S3, anywhere that you can write code for.\n\nYou supply your configuration source to your config after you've instantiated it, but **before** you try to read any data from it:\n```python\nconfig = AppConfig()\nconfig.add_source(my_first_source)\nconfig.add_source(my_second_source)\nconfig.read()\n```\nOr you can supply the sources directly in the constructor like this:\n```python\nconfig = AppConfig(sources=[my_first_source, my_second_source])\nconfig.read()\n```\n\nThe below is bad practice, but if for some reason you do add further config sources after it's been read, or need to refresh the config for some reason, you'll need to clear any cached values in order to force re-reading of the config. You can do this by\n```python\nconfig.clear_cache()\nconfig.read()          # Read all configuration values again\n```\n\n### Supplied Config Sources\n#### `EnvironmentConfigSource`\nThis just reads configuration from environment variables.\n```python\nfrom typedconfig.source import EnvironmentConfigSource\nsource = EnvironmentConfigSource(prefix=\"XYZ\")\n# OR just\nsource = EnvironmentConfigSource()\n```\nIt just takes one optional input argument, a prefix. This can be useful to avoid name clashes in environment variables.\n\n* If prefix is provided, environment variables are expected to look like `{PREFIX}_{SECTION}_{KEY}`, for example `export XYZ_DATABASE_PORT=2000`. \n* If no prefix is provided, environment variables should look like `{SECTION}_{KEY}`, for example `export DATABASE_PORT=2000`.\n\n#### `IniFileConfigSource`\nThis reads from an INI file using Python's built in [configparser](https://docs.python.org/3/library/configparser.html). Read the docs for `configparser` for more about the structure of the file.\n```python\nfrom typedconfig.source import IniFileConfigSource\nsource = IniFileConfigSource(\"config.cfg\", encoding='utf-8', must_exist=True)\n```\n\n* The first argument is the filename (absolute or relative to the current working directory).\n* `encoding` is the text encoding of the file. `configparser`'s default is used if not supplied.\n* `must_exist` - default `True`. If the file can't be found, an error will be thrown by default. Setting `must_exist` to be `False` allows the file not to be present, in which case this source will just report that it can't find any configuration values and your `Config` class will move onto looking in the next `ConfigSource`.\n\n#### `IniStringConfigSource`\nThis reads from a string instead of a file\n```python\nfrom typedconfig.source import IniStringConfigSource\nsource = IniStringConfigSource(\"\"\"\n[section_name]\nkey_name=key_value\n\"\"\")\n```\n\n#### `DictConfigSource`\nThe most basic source, entirely in memory, and also useful when writing tests. It is case insensitive.\n```python\nfrom typedconfig.source import DictConfigSource\nsource = DictConfigSource({\n    'database': dict(HOST='db1', PORT='2000'),\n    'algorithm': dict(MAX_VALUE='20', MIN_VALUE='10')\n})\n```\n\nIt expects data type `Dict[str, Dict[str, str]]`, i.e. such that `string_value = d['section_name']['key_name']`. Everything should be provided as string data so that it can be parsed in the same way as if data was coming from a file or elsewhere.\n\nThis is an alternative way of supplying default values instead of using the `default` option when defining your `key`s. Just provide a `DictConfigSource` as the lowest priority source, containing your defaults.\n\n### Writing your own `ConfigSource`s\nAn abstract base class `ConfigSource` is supplied. You should extend it and implement the method `get_config_value` as demonstrated below, which takes a section name and key name, and returns either a `str` config value, or `None` if the value could not be found. It should not error if the value cannot be found, `Config` will throw an error later if it still can't find the value in any of its other available sources. To make it easier for the user try to make your source case insensitive.\n\nHere's an outline of how you might implement a source to read your config from a JSON file, for example. Use the `__init__` method to provide any information your source needs to fetch the data, such as filename, api details, etc. You can do sanity checks in the `__init__` method and throw an error if something is wrong.\n```python\nimport json\nfrom typing import Optional\nfrom typedconfig.source import ConfigSource\n\nclass JsonConfigSource(ConfigSource):\n    def __init__(self, filename: str):\n        # Read data - will raise an exception if problem with file\n        with open(filename, 'r') as f:\n            self.data = json.load(f)\n        # Quick checks on data format\n        assert type(self.data) is dict\n        for k, v in self.data.items():\n            assert type(k) is str\n            assert type(v) is dict\n            for v_k, v_v in v.items():\n                assert type(v_k) is str\n                assert type(v_v) is str\n        # Convert all keys to lowercase\n        self.data = {\n            k.lower(): {\n                v_k.lower(): v_v\n                for v_k, v_v in v.items()\n            }\n            for k, v in self.data.items()\n        }    \n\n    def get_config_value(self, section_name: str, key_name: str) -> Optional[str]:\n        # Extract info from data which we read in during __init__\n        section = self.data.get(section_name.lower(), None)\n        if section is None:\n            return None\n        return section.get(key_name.lower(), None)\n```\n\n### Additional config sources\nIn order to keep `typed-config` dependency free, `ConfigSources` requiring additional dependencies are in separate packages, which also have `typed-config` as a dependency.\n\nThese are listed here:\n\n| pip install name | import name | Description |\n| --- | --- | --- |\n| [typed-config-aws-sources](https://pypi.org/project/typed-config-aws-sources) | `typedconfig_awssource` | Config sources using `boto3` to get config e.g. from S3 or DynamoDB\n\n## Contributing\nIdeas for new features and pull requests are welcome. PRs must come with tests included. This was developed using Python 3.7 but Travis tests run with v3.6 too.\n\n### Development setup\n1. Clone the git repository\n2. Create a virtual environment `virtualenv venv`\n3. Activate the environment `venv/scripts/activate`\n4. Install development dependencies `pip install -r requirements.txt`\n\n### Running tests\n`pytest`\n\nTo run with coverage:\n\n`pytest --cov`\n\n### Making a release\nYou'll need to `pip install twine` if you don't have it.\n\n1. Bump version number in `typedconfig/__version__.py`\n2. Add changes to [CHANGELOG.md](CHANGELOG.md)\n3. Commit your changes and tag with `git tag -a v0.1.0 -m \"Summary of changes\"`\n4. Clear the dist directory `rm -r dist`\n5. `python setup.py sdist bdist_wheel`\n6. `twine check dist/*`\n7. Upload to the test PyPI `twine upload --repository-url https://test.pypi.org/legacy/ dist/*`\n8. Check all looks ok at [https://test.pypi.org/project/typed-config](https://test.pypi.org/project/typed-config)\n9. Upload to live PyPI `twine upload dist/*`\n\nHere is [a good tutorial](https://realpython.com/pypi-publish-python-package) on publishing packages to PyPI.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/bwindsor/typed-config", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "typed-config", "package_url": "https://pypi.org/project/typed-config/", "platform": "", "project_url": "https://pypi.org/project/typed-config/", "project_urls": {"Homepage": "https://github.com/bwindsor/typed-config"}, "release_url": "https://pypi.org/project/typed-config/0.1.3/", "requires_dist": null, "requires_python": ">=3.6.0", "summary": "Typed, extensible, dependency free configuration reader for Python projects for multiple config sources and working well in IDEs for great autocomplete performance.", "version": "0.1.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://travis-ci.org/bwindsor/typed-config\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c415e2f14fdf9868f5fef11f28a01aff9a3b05bb/68747470733a2f2f7472617669732d63692e6f72672f6277696e64736f722f74797065642d636f6e6669672e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/gh/bwindsor/typed-config\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/54b55298f98a8fe71bea8013c65d73c0b9b85f23/68747470733a2f2f636f6465636f762e696f2f67682f6277696e64736f722f74797065642d636f6e6669672f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a></p>\n<h1>typed-config</h1>\n<p>Typed, extensible, dependency free configuration reader for Python projects for multiple config sources and working well in IDEs for great autocomplete performance.</p>\n<p><code>pip install typed-config</code></p>\n<p>Requires python 3.6 or above.</p>\n<h2>Basic usage</h2>\n<pre><span class=\"c1\"># my_app/config.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typedconfig</span> <span class=\"kn\">import</span> <span class=\"n\">Config</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">section</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typedconfig.source</span> <span class=\"kn\">import</span> <span class=\"n\">EnvironmentConfigSource</span>\n\n<span class=\"nd\">@section</span><span class=\"p\">(</span><span class=\"s1\">'database'</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">AppConfig</span><span class=\"p\">(</span><span class=\"n\">Config</span><span class=\"p\">):</span>\n    <span class=\"n\">host</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n    <span class=\"n\">port</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">)</span>\n    <span class=\"n\">timeout</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">float</span><span class=\"p\">)</span>\n\n<span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">AppConfig</span><span class=\"p\">()</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_source</span><span class=\"p\">(</span><span class=\"n\">EnvironmentConfigSource</span><span class=\"p\">())</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">()</span>\n</pre>\n<pre><span class=\"c1\"># my_app/main.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">my_app.config</span> <span class=\"kn\">import</span> <span class=\"n\">config</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">host</span><span class=\"p\">)</span>\n</pre>\n<p>In PyCharm, and hopefully other IDEs, it will recognise the datatypes of your configuration and allow you to autocomplete. No more remembering strings to get the right thing out!</p>\n<h2>How it works</h2>\n<p>Configuration is always supplied in a two level structure, so your source configuration can have multiple sections, and each section contains multiple key/value configuration pairs. For example:</p>\n<pre><span class=\"k\">[database]</span>\n<span class=\"na\">host</span> <span class=\"o\">=</span> <span class=\"s\">127.0.0.1</span>\n<span class=\"na\">port</span> <span class=\"o\">=</span> <span class=\"s\">2000</span>\n\n<span class=\"k\">[algorithm]</span>\n<span class=\"na\">max_value</span> <span class=\"o\">=</span> <span class=\"s\">10</span>\n<span class=\"na\">min_value</span> <span class=\"o\">=</span> <span class=\"s\">20</span>\n</pre>\n<p>You then create your configuration hierarchy in code (this can be flat or many levels deep) and supply the matching between strings in your config sources and properties of your configuration classes.</p>\n<p>You provide one or more <code>ConfigSource</code>s, from which the config for your application can be read. For example, you might supply an <code>EnvironmentConfigSource</code>,  and two <code>IniFileConfigSource</code>s. This would make your application first look for a configuration value in environment variables, if not found there it would then look at the first INI file (perhaps a user-specific file), before falling back to the second INI file (perhaps a default configuration shared between all users). If a parameter is still not found and is a required parameter, an error would be thrown.</p>\n<p>There is emphasis on type information being available for everything so that an IDE will autocomplete when trying to use your config across your application.</p>\n<h3>Multiple data sources</h3>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedconfig</span> <span class=\"kn\">import</span> <span class=\"n\">Config</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">section</span><span class=\"p\">,</span> <span class=\"n\">group_key</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typedconfig.source</span> <span class=\"kn\">import</span> <span class=\"n\">EnvironmentConfigSource</span><span class=\"p\">,</span> <span class=\"n\">IniFileConfigSource</span>\n\n<span class=\"nd\">@section</span><span class=\"p\">(</span><span class=\"s1\">'database'</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">DatabaseConfig</span><span class=\"p\">(</span><span class=\"n\">Config</span><span class=\"p\">):</span>\n    <span class=\"n\">host</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n    <span class=\"n\">port</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">)</span>\n    <span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n    <span class=\"n\">password</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n\n<span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">DatabaseConfig</span><span class=\"p\">()</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_source</span><span class=\"p\">(</span><span class=\"n\">EnvironmentConfigSource</span><span class=\"p\">(</span><span class=\"n\">prefix</span><span class=\"o\">=</span><span class=\"s2\">\"EXAMPLE\"</span><span class=\"p\">))</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_source</span><span class=\"p\">(</span><span class=\"n\">IniFileConfigSource</span><span class=\"p\">(</span><span class=\"s2\">\"config.cfg\"</span><span class=\"p\">))</span>\n\n<span class=\"c1\"># OR provide sources directly to the constructor</span>\n<span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">DatabaseConfig</span><span class=\"p\">(</span><span class=\"n\">sources</span><span class=\"o\">=</span><span class=\"p\">[</span>\n    <span class=\"n\">EnvironmentConfigSource</span><span class=\"p\">(</span><span class=\"n\">prefix</span><span class=\"o\">=</span><span class=\"s2\">\"EXAMPLE\"</span><span class=\"p\">),</span>\n    <span class=\"n\">IniFileConfigSource</span><span class=\"p\">(</span><span class=\"s2\">\"config.cfg\"</span><span class=\"p\">)</span>\n<span class=\"p\">])</span>\n</pre>\n<p>Since you don't want to hard code your secret credentials, you might supply them through the environment.\nSo for the above configuration, the environment might look like this:</p>\n<pre><span class=\"nb\">export</span> <span class=\"nv\">EXAMPLE_DATABASE_USERNAME</span><span class=\"o\">=</span>my_username\n<span class=\"nb\">export</span> <span class=\"nv\">EXAMPLE_DATABASE_PASSWORD</span><span class=\"o\">=</span>my_very_secret_password\n<span class=\"nb\">export</span> <span class=\"nv\">EXAMPLE_DATABASE_PORT</span><span class=\"o\">=</span><span class=\"m\">2001</span>\n</pre>\n<p>Those values which couldn't be found in the environment would then be read from the INI file, which might look like this:</p>\n<pre><span class=\"k\">[database]</span>\n<span class=\"na\">HOST</span> <span class=\"o\">=</span> <span class=\"s\">db1.mydomain.com</span>\n<span class=\"na\">PORT</span> <span class=\"o\">=</span> <span class=\"s\">2000</span>\n</pre>\n<p>Note after this, <code>config.port</code> will be equal to <code>2001</code> as the value in the environment took priority over the value in the INI file.</p>\n<h3>Caching</h3>\n<p>When config values are first used, they are read. This is lazy evaluation by default so that not everything is read if not necessary.</p>\n<p>After first use, they are cached in memory so that there should be no further I/O if the config value is used again.</p>\n<p>For fail fast behaviour, and also to stop unexpected latency when a config value is read partway through your application (e.g. your config could be coming across a network), the option is available to read all config values at the start. Just call</p>\n<p><code>config.read()</code></p>\n<p>This will throw an exception if any required config value cannot be found, and will also keep all read config values in memory for next time they are used. If you do not use <code>read</code> you will only get the exception when you first try to use the offending config key.</p>\n<h3>Hierarchical configuration</h3>\n<p>Use <code>group_key</code> to represent a \"sub-config\" of a configuration. Set up \"sub-configs\" exactly as demonstrated above, and then create a parent config to compose them in one place.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedconfig</span> <span class=\"kn\">import</span> <span class=\"n\">Config</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">section</span><span class=\"p\">,</span> <span class=\"n\">group_key</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typedconfig.source</span> <span class=\"kn\">import</span> <span class=\"n\">EnvironmentConfigSource</span><span class=\"p\">,</span> <span class=\"n\">IniFileConfigSource</span>\n\n<span class=\"nd\">@section</span><span class=\"p\">(</span><span class=\"s1\">'database'</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">DatabaseConfig</span><span class=\"p\">(</span><span class=\"n\">Config</span><span class=\"p\">):</span>\n    <span class=\"n\">host</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n    <span class=\"n\">port</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@section</span><span class=\"p\">(</span><span class=\"s1\">'algorithm'</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">AlgorithmConfig</span><span class=\"p\">(</span><span class=\"n\">Config</span><span class=\"p\">):</span>\n    <span class=\"n\">max_value</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">float</span><span class=\"p\">)</span>\n    <span class=\"n\">min_value</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">float</span><span class=\"p\">)</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">ParentConfig</span><span class=\"p\">(</span><span class=\"n\">Config</span><span class=\"p\">):</span>\n    <span class=\"n\">database</span> <span class=\"o\">=</span> <span class=\"n\">group_key</span><span class=\"p\">(</span><span class=\"n\">DatabaseConfig</span><span class=\"p\">)</span>\n    <span class=\"n\">algorithm</span> <span class=\"o\">=</span> <span class=\"n\">group_key</span><span class=\"p\">(</span><span class=\"n\">AlgorithmConfig</span><span class=\"p\">)</span>\n    <span class=\"n\">description</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">section_name</span><span class=\"o\">=</span><span class=\"s2\">\"general\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">ParentConfig</span><span class=\"p\">()</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_source</span><span class=\"p\">(</span><span class=\"n\">EnvironmentConfigSource</span><span class=\"p\">(</span><span class=\"n\">prefix</span><span class=\"o\">=</span><span class=\"s2\">\"EXAMPLE\"</span><span class=\"p\">))</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_source</span><span class=\"p\">(</span><span class=\"n\">IniFileConfigSource</span><span class=\"p\">(</span><span class=\"s2\">\"config.cfg\"</span><span class=\"p\">))</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">()</span>\n</pre>\n<p>The first time the <code>config.database</code> or <code>config.algorithm</code> is accessed (which in the case above is when <code>read()</code> is called), then an instance will be instantiated. Notice that it is the class definition, not an instance of the class, which is passed to the <code>group_key</code> function.</p>\n<h3>Custom section/key names, optional parameters, default values</h3>\n<p>Let's take a look at this:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedconfig</span> <span class=\"kn\">import</span> <span class=\"n\">Config</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">section</span>\n\n<span class=\"nd\">@section</span><span class=\"p\">(</span><span class=\"s1\">'database'</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">AppConfig</span><span class=\"p\">(</span><span class=\"n\">Config</span><span class=\"p\">):</span>\n    <span class=\"n\">host1</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">()</span>\n    <span class=\"n\">host2</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">section_name</span><span class=\"o\">=</span><span class=\"s1\">'database'</span><span class=\"p\">,</span> <span class=\"n\">key_name</span><span class=\"o\">=</span><span class=\"s1\">'HOST2'</span><span class=\"p\">,</span>\n                <span class=\"n\">required</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n</pre>\n<p>Both <code>host1</code> and <code>host2</code> are legitimate configuration key definitions.</p>\n<ul>\n<li><code>section_name</code> - this name of the section in the configuration source from which this parameter should be read. This can be provided on a key-by-key basis, but if it is left out then the section name supplied by the <code>@section</code> decorator is used. If all keys supply a <code>section_name</code>, the class decorator is not needed. If both <code>section_name</code> and a decorator are provided, the <code>section_name</code> argument takes priority.</li>\n<li><code>key_name</code> - the name of this key in the configuration source from which this parameter is read. If not supplied, some magic uses the object property name as the key name.</li>\n<li><code>required</code> - default True. If False, and the configuration value can't be found, no error will be thrown and the default value will be used, if provided. If a default not provided, <code>None</code> will be used.</li>\n<li><code>cast</code> - probably the most important option for typing. <strong>If you want autocomplete typing support you must specify this</strong>. It's just a function which takes a string as an input and returns a parsed value. See the casting section for more. If not supplied, the value remains as a string.</li>\n<li><code>default</code> - only applicable if <code>required</code> is false. When <code>required</code> is false this value is used if a value cannot be found.</li>\n</ul>\n<h3>Types</h3>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedconfig</span> <span class=\"kn\">import</span> <span class=\"n\">Config</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">section</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">List</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">split_str</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]:</span>\n    <span class=\"k\">return</span> <span class=\"p\">[</span><span class=\"n\">x</span><span class=\"o\">.</span><span class=\"n\">strip</span><span class=\"p\">()</span> <span class=\"k\">for</span> <span class=\"n\">x</span> <span class=\"ow\">in</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"s2\">\",\"</span><span class=\"p\">)]</span>\n\n<span class=\"nd\">@section</span><span class=\"p\">(</span><span class=\"s1\">'database'</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">AppConfig</span><span class=\"p\">(</span><span class=\"n\">Config</span><span class=\"p\">):</span>\n    <span class=\"n\">host</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">()</span>\n    <span class=\"n\">port</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">)</span>\n    <span class=\"n\">users</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"n\">split_str</span><span class=\"p\">)</span>\n    <span class=\"n\">zero_based_index</span> <span class=\"o\">=</span> <span class=\"n\">key</span><span class=\"p\">(</span><span class=\"n\">cast</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">x</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">AppConfig</span><span class=\"p\">(</span><span class=\"n\">sources</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"o\">...</span><span class=\"p\">])</span>\n</pre>\n<p>In this example we have three ways of casting:</p>\n<ol>\n<li>Not casting at all. This default to returning a <code>str</code>, but your IDE won't know that so if you want type hints use <code>cast=str</code></li>\n<li>Casting to an built in type which can take a string input and parse it, for example <code>int</code></li>\n<li>Defining a custom function. Your function should take one string input and return one output of any type. To get type hint, just make sure your function has type annotations.</li>\n<li>Using a lambda expression. The type inference may or may not work depending on your expression, so if it doesn't just write it as a function with type annotations.</li>\n</ol>\n<h2>Configuration Sources</h2>\n<p>Configuration sources are how your main <code>Config</code> class knows where to get its data from. These are totally extensible so that you can read in your configuration from wherever you like - from a database, from S3, anywhere that you can write code for.</p>\n<p>You supply your configuration source to your config after you've instantiated it, but <strong>before</strong> you try to read any data from it:</p>\n<pre><span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">AppConfig</span><span class=\"p\">()</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_source</span><span class=\"p\">(</span><span class=\"n\">my_first_source</span><span class=\"p\">)</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">add_source</span><span class=\"p\">(</span><span class=\"n\">my_second_source</span><span class=\"p\">)</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">()</span>\n</pre>\n<p>Or you can supply the sources directly in the constructor like this:</p>\n<pre><span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">AppConfig</span><span class=\"p\">(</span><span class=\"n\">sources</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">my_first_source</span><span class=\"p\">,</span> <span class=\"n\">my_second_source</span><span class=\"p\">])</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">()</span>\n</pre>\n<p>The below is bad practice, but if for some reason you do add further config sources after it's been read, or need to refresh the config for some reason, you'll need to clear any cached values in order to force re-reading of the config. You can do this by</p>\n<pre><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">clear_cache</span><span class=\"p\">()</span>\n<span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">()</span>          <span class=\"c1\"># Read all configuration values again</span>\n</pre>\n<h3>Supplied Config Sources</h3>\n<h4><code>EnvironmentConfigSource</code></h4>\n<p>This just reads configuration from environment variables.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedconfig.source</span> <span class=\"kn\">import</span> <span class=\"n\">EnvironmentConfigSource</span>\n<span class=\"n\">source</span> <span class=\"o\">=</span> <span class=\"n\">EnvironmentConfigSource</span><span class=\"p\">(</span><span class=\"n\">prefix</span><span class=\"o\">=</span><span class=\"s2\">\"XYZ\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># OR just</span>\n<span class=\"n\">source</span> <span class=\"o\">=</span> <span class=\"n\">EnvironmentConfigSource</span><span class=\"p\">()</span>\n</pre>\n<p>It just takes one optional input argument, a prefix. This can be useful to avoid name clashes in environment variables.</p>\n<ul>\n<li>If prefix is provided, environment variables are expected to look like <code>{PREFIX}_{SECTION}_{KEY}</code>, for example <code>export XYZ_DATABASE_PORT=2000</code>.</li>\n<li>If no prefix is provided, environment variables should look like <code>{SECTION}_{KEY}</code>, for example <code>export DATABASE_PORT=2000</code>.</li>\n</ul>\n<h4><code>IniFileConfigSource</code></h4>\n<p>This reads from an INI file using Python's built in <a href=\"https://docs.python.org/3/library/configparser.html\" rel=\"nofollow\">configparser</a>. Read the docs for <code>configparser</code> for more about the structure of the file.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedconfig.source</span> <span class=\"kn\">import</span> <span class=\"n\">IniFileConfigSource</span>\n<span class=\"n\">source</span> <span class=\"o\">=</span> <span class=\"n\">IniFileConfigSource</span><span class=\"p\">(</span><span class=\"s2\">\"config.cfg\"</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"o\">=</span><span class=\"s1\">'utf-8'</span><span class=\"p\">,</span> <span class=\"n\">must_exist</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<ul>\n<li>The first argument is the filename (absolute or relative to the current working directory).</li>\n<li><code>encoding</code> is the text encoding of the file. <code>configparser</code>'s default is used if not supplied.</li>\n<li><code>must_exist</code> - default <code>True</code>. If the file can't be found, an error will be thrown by default. Setting <code>must_exist</code> to be <code>False</code> allows the file not to be present, in which case this source will just report that it can't find any configuration values and your <code>Config</code> class will move onto looking in the next <code>ConfigSource</code>.</li>\n</ul>\n<h4><code>IniStringConfigSource</code></h4>\n<p>This reads from a string instead of a file</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedconfig.source</span> <span class=\"kn\">import</span> <span class=\"n\">IniStringConfigSource</span>\n<span class=\"n\">source</span> <span class=\"o\">=</span> <span class=\"n\">IniStringConfigSource</span><span class=\"p\">(</span><span class=\"s2\">\"\"\"</span>\n<span class=\"s2\">[section_name]</span>\n<span class=\"s2\">key_name=key_value</span>\n<span class=\"s2\">\"\"\"</span><span class=\"p\">)</span>\n</pre>\n<h4><code>DictConfigSource</code></h4>\n<p>The most basic source, entirely in memory, and also useful when writing tests. It is case insensitive.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedconfig.source</span> <span class=\"kn\">import</span> <span class=\"n\">DictConfigSource</span>\n<span class=\"n\">source</span> <span class=\"o\">=</span> <span class=\"n\">DictConfigSource</span><span class=\"p\">({</span>\n    <span class=\"s1\">'database'</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">HOST</span><span class=\"o\">=</span><span class=\"s1\">'db1'</span><span class=\"p\">,</span> <span class=\"n\">PORT</span><span class=\"o\">=</span><span class=\"s1\">'2000'</span><span class=\"p\">),</span>\n    <span class=\"s1\">'algorithm'</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">MAX_VALUE</span><span class=\"o\">=</span><span class=\"s1\">'20'</span><span class=\"p\">,</span> <span class=\"n\">MIN_VALUE</span><span class=\"o\">=</span><span class=\"s1\">'10'</span><span class=\"p\">)</span>\n<span class=\"p\">})</span>\n</pre>\n<p>It expects data type <code>Dict[str, Dict[str, str]]</code>, i.e. such that <code>string_value = d['section_name']['key_name']</code>. Everything should be provided as string data so that it can be parsed in the same way as if data was coming from a file or elsewhere.</p>\n<p>This is an alternative way of supplying default values instead of using the <code>default</code> option when defining your <code>key</code>s. Just provide a <code>DictConfigSource</code> as the lowest priority source, containing your defaults.</p>\n<h3>Writing your own <code>ConfigSource</code>s</h3>\n<p>An abstract base class <code>ConfigSource</code> is supplied. You should extend it and implement the method <code>get_config_value</code> as demonstrated below, which takes a section name and key name, and returns either a <code>str</code> config value, or <code>None</code> if the value could not be found. It should not error if the value cannot be found, <code>Config</code> will throw an error later if it still can't find the value in any of its other available sources. To make it easier for the user try to make your source case insensitive.</p>\n<p>Here's an outline of how you might implement a source to read your config from a JSON file, for example. Use the <code>__init__</code> method to provide any information your source needs to fetch the data, such as filename, api details, etc. You can do sanity checks in the <code>__init__</code> method and throw an error if something is wrong.</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">json</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">Optional</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typedconfig.source</span> <span class=\"kn\">import</span> <span class=\"n\">ConfigSource</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">JsonConfigSource</span><span class=\"p\">(</span><span class=\"n\">ConfigSource</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">filename</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n        <span class=\"c1\"># Read data - will raise an exception if problem with file</span>\n        <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"s1\">'r'</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">)</span>\n        <span class=\"c1\"># Quick checks on data format</span>\n        <span class=\"k\">assert</span> <span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">)</span> <span class=\"ow\">is</span> <span class=\"nb\">dict</span>\n        <span class=\"k\">for</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n            <span class=\"k\">assert</span> <span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">k</span><span class=\"p\">)</span> <span class=\"ow\">is</span> <span class=\"nb\">str</span>\n            <span class=\"k\">assert</span> <span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">v</span><span class=\"p\">)</span> <span class=\"ow\">is</span> <span class=\"nb\">dict</span>\n            <span class=\"k\">for</span> <span class=\"n\">v_k</span><span class=\"p\">,</span> <span class=\"n\">v_v</span> <span class=\"ow\">in</span> <span class=\"n\">v</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n                <span class=\"k\">assert</span> <span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">v_k</span><span class=\"p\">)</span> <span class=\"ow\">is</span> <span class=\"nb\">str</span>\n                <span class=\"k\">assert</span> <span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">v_v</span><span class=\"p\">)</span> <span class=\"ow\">is</span> <span class=\"nb\">str</span>\n        <span class=\"c1\"># Convert all keys to lowercase</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n            <span class=\"n\">k</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">():</span> <span class=\"p\">{</span>\n                <span class=\"n\">v_k</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">():</span> <span class=\"n\">v_v</span>\n                <span class=\"k\">for</span> <span class=\"n\">v_k</span><span class=\"p\">,</span> <span class=\"n\">v_v</span> <span class=\"ow\">in</span> <span class=\"n\">v</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">()</span>\n            <span class=\"p\">}</span>\n            <span class=\"k\">for</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">()</span>\n        <span class=\"p\">}</span>    \n\n    <span class=\"k\">def</span> <span class=\"nf\">get_config_value</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">section_name</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">key_name</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">Optional</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]:</span>\n        <span class=\"c1\"># Extract info from data which we read in during __init__</span>\n        <span class=\"n\">section</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">section_name</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">(),</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">section</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"kc\">None</span>\n        <span class=\"k\">return</span> <span class=\"n\">section</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">key_name</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">(),</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n</pre>\n<h3>Additional config sources</h3>\n<p>In order to keep <code>typed-config</code> dependency free, <code>ConfigSources</code> requiring additional dependencies are in separate packages, which also have <code>typed-config</code> as a dependency.</p>\n<p>These are listed here:</p>\n<table>\n<thead>\n<tr>\n<th>pip install name</th>\n<th>import name</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://pypi.org/project/typed-config-aws-sources\" rel=\"nofollow\">typed-config-aws-sources</a></td>\n<td><code>typedconfig_awssource</code></td>\n<td>Config sources using <code>boto3</code> to get config e.g. from S3 or DynamoDB</td>\n</tr></tbody></table>\n<h2>Contributing</h2>\n<p>Ideas for new features and pull requests are welcome. PRs must come with tests included. This was developed using Python 3.7 but Travis tests run with v3.6 too.</p>\n<h3>Development setup</h3>\n<ol>\n<li>Clone the git repository</li>\n<li>Create a virtual environment <code>virtualenv venv</code></li>\n<li>Activate the environment <code>venv/scripts/activate</code></li>\n<li>Install development dependencies <code>pip install -r requirements.txt</code></li>\n</ol>\n<h3>Running tests</h3>\n<p><code>pytest</code></p>\n<p>To run with coverage:</p>\n<p><code>pytest --cov</code></p>\n<h3>Making a release</h3>\n<p>You'll need to <code>pip install twine</code> if you don't have it.</p>\n<ol>\n<li>Bump version number in <code>typedconfig/__version__.py</code></li>\n<li>Add changes to <a href=\"CHANGELOG.md\" rel=\"nofollow\">CHANGELOG.md</a></li>\n<li>Commit your changes and tag with <code>git tag -a v0.1.0 -m \"Summary of changes\"</code></li>\n<li>Clear the dist directory <code>rm -r dist</code></li>\n<li><code>python setup.py sdist bdist_wheel</code></li>\n<li><code>twine check dist/*</code></li>\n<li>Upload to the test PyPI <code>twine upload --repository-url https://test.pypi.org/legacy/ dist/*</code></li>\n<li>Check all looks ok at <a href=\"https://test.pypi.org/project/typed-config\" rel=\"nofollow\">https://test.pypi.org/project/typed-config</a></li>\n<li>Upload to live PyPI <code>twine upload dist/*</code></li>\n</ol>\n<p>Here is <a href=\"https://realpython.com/pypi-publish-python-package\" rel=\"nofollow\">a good tutorial</a> on publishing packages to PyPI.</p>\n\n          </div>"}, "last_serial": 6792062, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "b021510b121541dc18ade41159a764eb", "sha256": "ad0f1800da5d6968ea0fb5e5caecf64d91860e80aa74aa045099a6228f847dbd"}, "downloads": -1, "filename": "typed_config-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "b021510b121541dc18ade41159a764eb", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 11856, "upload_time": "2019-03-20T17:56:45", "upload_time_iso_8601": "2019-03-20T17:56:45.992692Z", "url": "https://files.pythonhosted.org/packages/e3/9e/b05414ce55aa948b425850cb343abacc5c669515757d435aa720d5b19e8c/typed_config-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5ce536175e2df8121fdcb42c6575944a", "sha256": "c7460ed1c5a83e7504817c65453624bb5ed366971fdd42beca441e58643baab9"}, "downloads": -1, "filename": "typed-config-0.1.0.tar.gz", "has_sig": false, "md5_digest": "5ce536175e2df8121fdcb42c6575944a", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 17519, "upload_time": "2019-03-20T17:56:47", "upload_time_iso_8601": "2019-03-20T17:56:47.987913Z", "url": "https://files.pythonhosted.org/packages/e3/7b/c2054746a06d41c186361a76d801ed5421ca5c79e775aa9996e458977145/typed-config-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "210cff15abc245acb66454a4fbc3cd6d", "sha256": "a7beb7243e2e3f41e732583c94a37b82c650f21209384448347e18b2529988aa"}, "downloads": -1, "filename": "typed_config-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "210cff15abc245acb66454a4fbc3cd6d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 11864, "upload_time": "2019-05-09T11:23:35", "upload_time_iso_8601": "2019-05-09T11:23:35.494369Z", "url": "https://files.pythonhosted.org/packages/5b/b3/b4d2af26c4fed3c99c1ad26c2b0d933080392b7eb209217a33fd7588f1e1/typed_config-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "343343be9fe4a36bf1ff9ec3d3d14abe", "sha256": "71ae2592408776036a6a8ae6d015132ccc3cd58d369c0902953ed35877e9acd0"}, "downloads": -1, "filename": "typed-config-0.1.1.tar.gz", "has_sig": false, "md5_digest": "343343be9fe4a36bf1ff9ec3d3d14abe", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 18253, "upload_time": "2019-05-09T11:23:36", "upload_time_iso_8601": "2019-05-09T11:23:36.665786Z", "url": "https://files.pythonhosted.org/packages/6b/74/90bf73ce5b2cb1e29412b3c8e984bd514ed386cb7633dbfcdd24740d65f1/typed-config-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "2a54cfcb8f0a60430c6838c0fa0bc2f1", "sha256": "0b32f099029291b81245e05e736a9b98b68d9b370419e0067ca841fb456eccd9"}, "downloads": -1, "filename": "typed_config-0.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "2a54cfcb8f0a60430c6838c0fa0bc2f1", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 12444, "upload_time": "2020-03-11T11:34:41", "upload_time_iso_8601": "2020-03-11T11:34:41.054211Z", "url": "https://files.pythonhosted.org/packages/0b/15/7f05b88407124da7ebff2f7dff9062d17ff94fffa58ff6d8b689609ef11f/typed_config-0.1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "12af7e4dd708aaa1f15d5ac239543494", "sha256": "1fd5390b12f14df00ab8e07102a263435bee476b72b241d61e6fa252f6250757"}, "downloads": -1, "filename": "typed-config-0.1.2.tar.gz", "has_sig": false, "md5_digest": "12af7e4dd708aaa1f15d5ac239543494", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 18904, "upload_time": "2020-03-11T11:34:42", "upload_time_iso_8601": "2020-03-11T11:34:42.225002Z", "url": "https://files.pythonhosted.org/packages/ee/40/e833b053bf15c635a245105dddd69d6a77e675d955c154ae2aea3c69c254/typed-config-0.1.2.tar.gz", "yanked": false}], "0.1.3": [{"comment_text": "", "digests": {"md5": "4d0bc47117e0c275f2b971b007bf2777", "sha256": "69aa7c34df80e131d05472e3c578682d801411c4d1bf38ca8116e55a7f2f1bc7"}, "downloads": -1, "filename": "typed_config-0.1.3-py3-none-any.whl", "has_sig": false, "md5_digest": "4d0bc47117e0c275f2b971b007bf2777", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 12340, "upload_time": "2020-03-11T12:52:29", "upload_time_iso_8601": "2020-03-11T12:52:29.376144Z", "url": "https://files.pythonhosted.org/packages/9e/c3/dfe6d2951ceea5b4fb30340fbff38efefe25ad3ab2d3e414d596abbf48e5/typed_config-0.1.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "cc10ee5a9e3ea9ba417e340a014de420", "sha256": "72dba868b3230ed9cd056b60ae3c07e461b7249e734fded46aeab079cacfe26b"}, "downloads": -1, "filename": "typed-config-0.1.3.tar.gz", "has_sig": false, "md5_digest": "cc10ee5a9e3ea9ba417e340a014de420", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 18467, "upload_time": "2020-03-11T12:52:31", "upload_time_iso_8601": "2020-03-11T12:52:31.082823Z", "url": "https://files.pythonhosted.org/packages/8f/d1/eea247cc9ed8a1fcb018005e030e466b769445972d66a16e0c5750e49c7a/typed-config-0.1.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4d0bc47117e0c275f2b971b007bf2777", "sha256": "69aa7c34df80e131d05472e3c578682d801411c4d1bf38ca8116e55a7f2f1bc7"}, "downloads": -1, "filename": "typed_config-0.1.3-py3-none-any.whl", "has_sig": false, "md5_digest": "4d0bc47117e0c275f2b971b007bf2777", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 12340, "upload_time": "2020-03-11T12:52:29", "upload_time_iso_8601": "2020-03-11T12:52:29.376144Z", "url": "https://files.pythonhosted.org/packages/9e/c3/dfe6d2951ceea5b4fb30340fbff38efefe25ad3ab2d3e414d596abbf48e5/typed_config-0.1.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "cc10ee5a9e3ea9ba417e340a014de420", "sha256": "72dba868b3230ed9cd056b60ae3c07e461b7249e734fded46aeab079cacfe26b"}, "downloads": -1, "filename": "typed-config-0.1.3.tar.gz", "has_sig": false, "md5_digest": "cc10ee5a9e3ea9ba417e340a014de420", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 18467, "upload_time": "2020-03-11T12:52:31", "upload_time_iso_8601": "2020-03-11T12:52:31.082823Z", "url": "https://files.pythonhosted.org/packages/8f/d1/eea247cc9ed8a1fcb018005e030e466b769445972d66a16e0c5750e49c7a/typed-config-0.1.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:42:53 2020"}