{"info": {"author": "Rodrigo Diaz Leven", "author_email": "ramakandra@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# Description of yapi\n\nIt allows to use declarative language (yaml) to talk to APIs and to save the response for future ones.\n\nThe main use case is to talk to [HashiCorp Vault API](https://www.vaultproject.io/api/overview.html).\n\nIt is heavily based on [Tavern-ci](https://github.com/taverntesting/tavern)\n# Installing it\n```\npip install yapi-ci\n```\n# How to use it\nFor this example we will use `http://httpbin.org/put` as `VAULT_ADDR`, this service will echo everything we send plus extra information about our request.\n\n```c\n2019-11-20 17:09:18,736 [None][INFO]\nStarting yapi 0.1.6\n\n2019-11-20 17:09:18,743 [None][INFO]\nLoading examples/vault-init.yaml\n\n2019-11-20 17:09:18,743 [None][INFO]\nStage: 01-Init Vault\n\n2019-11-20 17:09:18,744 [01-Init Vault][INFO]\n->URL: http://httpbin.org/put\n\n2019-11-20 17:09:18,744 [01-Init Vault][INFO]\n->Method: PUT\n\n2019-11-20 17:09:18,745 [01-Init Vault][INFO]\n->Body:\n{\n    \"mykeys\": [\n        \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n    ],\n    \"secret_shares\": 1,\n    \"secret_threshold\": 1\n}\n\n2019-11-20 17:09:18,934 [01-Init Vault][INFO]\n<-Received status code OK 200 == 200\n\n2019-11-20 17:09:18,935 [01-Init Vault][INFO]\n<-Body of response:\n{\n...\n    \"headers\": {\n        \"Accept-Encoding\": \"identity\",\n        \"Content-Length\": \"123\",\n        \"Content-Type\": \"application/json\",\n        \"Host\": \"httpbin.org\"\n    },\n    \"json\": {\n        \"mykeys\": [\n            \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n        ],\n        \"secret_shares\": 1,\n        \"secret_threshold\": 1\n    },\n...\n}\n\n2019-11-20 17:09:18,936 [01-Init Vault][INFO]\nWriting to examples/data/primary/init.json\n\n2019-11-20 17:09:18,937 [None][INFO]\nSaved response variables:\n{'headers': {'Accept-Encoding': 'identity',\n             'Content-Length': '123',\n             'Content-Type': 'application/json',\n             'Host': 'httpbin.org'},\n 'json_full': {'mykeys': ['7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2'],\n               'secret_shares': 1,\n               'secret_threshold': 1},\n 'json_keys_list': ['7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2'],\n 'json_secret_shares': 1}\n\n2019-11-20 17:09:18,938 [None][INFO]\nEnd of stage: 01-Init Vault\n\n\n\n2019-11-20 17:09:18,938 [None][INFO]\nStage: 02-Unseal Vault\n\n2019-11-20 17:09:18,942 [02-Unseal Vault][INFO]\nReading examples/data/primary/init.json , sub_vars: True\n\n2019-11-20 17:09:18,945 [02-Unseal Vault][INFO]\n->URL: http://httpbin.org/put\n\n2019-11-20 17:09:18,945 [02-Unseal Vault][INFO]\n->Method: PUT\n\n2019-11-20 17:09:18,945 [02-Unseal Vault][INFO]\n->Body:\n{\n    \"json_full\": {\n        \"mykeys\": [\n            \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n        ],\n        \"secret_shares\": 1,\n        \"secret_threshold\": 1\n    },\n    \"json_keys_list\": \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\",\n    \"json_secret_shares\": \"test string 1\",\n    \"myheaders\": {\n        \"Accept-Encoding\": \"identity\",\n        \"Content-Length\": \"123\",\n        \"Content-Type\": \"application/json\",\n        \"Host\": \"httpbin.org\"\n    },\n    \"mykeys\": [\n        \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n    ]\n}\n\n2019-11-20 17:09:19,138 [02-Unseal Vault][INFO]\n<-Received status code OK 200 == 200\n\n2019-11-20 17:09:19,139 [02-Unseal Vault][INFO]\n<-Body of response:\n{\n...\n    \"headers\": {\n        \"Accept-Encoding\": \"identity\",\n        \"Content-Length\": \"473\",\n        \"Content-Type\": \"application/json\",\n        \"Host\": \"httpbin.org\"\n    },\n    \"json\": {\n        \"json_full\": {\n            \"mykeys\": [\n                \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n            ],\n            \"secret_shares\": 1,\n            \"secret_threshold\": 1\n        },\n        \"json_keys_list\": \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\",\n        \"json_secret_shares\": \"test string 1\",\n        \"myheaders\": {\n            \"Accept-Encoding\": \"identity\",\n            \"Content-Length\": \"123\",\n            \"Content-Type\": \"application/json\",\n            \"Host\": \"httpbin.org\"\n        },\n        \"mykeys\": [\n            \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n        ]\n    },\n...\n}\n\n2019-11-20 17:09:19,140 [02-Unseal Vault][INFO]\nWriting to examples/data/primary/unsealed_response.json\n\n2019-11-20 17:09:19,141 [None][INFO]\nEnd of stage: 02-Unseal Vault\n\n2019-11-20 17:09:19,141 [None][INFO]\nFinished examples/vault-init.yaml\n```\n\n# Example file vault-init.yaml\n```yaml\n---\nstages:\n  - name: 01-Init Vault\n    request:\n      url: \"{env_vars.VAULT_ADDR}\"\n      method: PUT\n      json:\n        secret_shares: 1\n        secret_threshold: 1\n        mykeys:\n           - 7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\n    response:\n      status_code: 200\n      save:\n        $ext:\n          function: extensions.save_response\n          extra_kwargs:\n            path: \"examples/data/{env_vars.VAULT_CLUSTER}/init.json\"\n      body:\n        headers: headers\n        json_keys_list: json.mykeys\n        json_secret_shares: json.secret_shares\n        json_full: json\n  - name: 02-Unseal Vault\n    request:\n      url: \"{env_vars.VAULT_ADDR}\"\n      method: PUT\n      json:\n        mykeys: \"ext.json.mykeys.to_list()\"\n        myheaders: \"resp.headers.to_dict()\"\n        json_keys_list: \"resp.json_keys_list.to_list()[0]\"\n        json_secret_shares: \"test string {resp.json_secret_shares}\"\n        json_full: \"resp.json_full.to_dict()\"\n        $ext:\n          function: extensions.read_json\n          extra_kwargs:\n            path: \"examples/data/{env_vars.VAULT_CLUSTER}/init.json\"\n            sub_vars: True\n    response:\n      status_code: 200\n      save:\n        $ext:\n          function: extensions.save_response\n          extra_kwargs:\n            path: \"examples/data/{env_vars.VAULT_CLUSTER}/unsealed_response.json\"\n```\n\n### The first stage called `01-Init Vault`\n- `env_vars.VAULT_ADDR` will be replaced by the enviromental variable `$VAULT_ADDR` as is the same with all variables starting with `env_vars.`\n- Do a `GET` call to `url`\n- The json sent to the API will be:\n```json\n{\n    \"mykeys\": [\n        \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n    ],\n    \"secret_shares\": 1,\n    \"secret_threshold\": 1\n}\n```\n- It expects a HTTP response of `200` or it will error out.\n- It will save the output of the response as a json file under `data/{env_vars.VAULT_CLUSTER}/init.json`\n- It will try to convert the response to json and save them in variables for the next stage:\n```yaml\n    response:\n    ...\n      body:\n        headers: headers\n        json_keys_list: json.mykeys\n        json_secret_shares: json.secret_shares\n        json_full: json\n```\n### The second stage called `02-Unseal Vault` \n- Replace replace variables that start with `{env_vars.}` with environmental variables.\n- Insert the variables saved in previous stages from `resp.` converting them to a python dictionary or list depending if we want a json object or array.\n- Variables that have `{}` are used to `format` the string instead of replacing it with its value.\n- \n```yaml\n      json:\n        mykeys: \"ext.json.mykeys.to_list()\"\n        myheaders: \"resp.headers.to_dict()\"\n        json_keys_list: \"resp.json_keys_list.to_list()[0]\"\n        json_secret_shares: \"test string {resp.json_secret_shares}\"\n        json_full: \"resp.json_full.to_dict()\"\n```\n- Read `data/{env_vars.VAULT_CLUSTER}/init.json` and replace variables that start with `ext.` in the body with data from the json when `sub_vars` is set to `True`.\n```json\n  \"json\": {\n    \"mykeys\": [\n      \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n    ],\n```\n\nBecomes:\n\n```yaml\n    mykeys: \"ext.json.mykeys.to_list()\"\n```\n\n- Do a `PUT` call to `url`\n- With the json:\n```json\n{\n    \"json_full\": {\n        \"mykeys\": [\n            \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n        ],\n        \"secret_shares\": 1,\n        \"secret_threshold\": 1\n    },\n    \"json_keys_list\": \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\",\n    \"json_secret_shares\": \"test string 1\",\n    \"myheaders\": {\n        \"Accept-Encoding\": \"identity\",\n        \"Content-Length\": \"123\",\n        \"Content-Type\": \"application/json\",\n        \"Host\": \"httpbin.org\"\n    },\n    \"mykeys\": [\n        \"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"\n    ]\n}\n```\n- It will expect a `200` response code or error out.\n- It will save the response to `data/{env_vars.VAULT_CLUSTER}/unsealed_response.json`\n\n\n## TODO \n- [ ] Add Automated testing\n- [ ] Add version tagging\n- [ ] Add package automatic building from tags\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/bruj0/yapi", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "yapi-ci", "package_url": "https://pypi.org/project/yapi-ci/", "platform": "", "project_url": "https://pypi.org/project/yapi-ci/", "project_urls": {"Homepage": "https://github.com/bruj0/yapi"}, "release_url": "https://pypi.org/project/yapi-ci/0.1.6/", "requires_dist": ["certifi (>=2019.9.11)", "chardet (>=3.0.4)", "flatten-json (>=0.1.7)", "idna (>=2.8)", "python-box (>=3.4.5)", "PyYAML (>=5.1.2)", "requests (>=2.22.0)", "requests-toolbelt (>=0.9.1)", "six (>=1.13.0)", "urllib3 (>=1.25.6)"], "requires_python": ">=3.6", "summary": "Using yaml to talk to APIs in an automated, descriptive way.", "version": "0.1.6", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Description of yapi</h1>\n<p>It allows to use declarative language (yaml) to talk to APIs and to save the response for future ones.</p>\n<p>The main use case is to talk to <a href=\"https://www.vaultproject.io/api/overview.html\" rel=\"nofollow\">HashiCorp Vault API</a>.</p>\n<p>It is heavily based on <a href=\"https://github.com/taverntesting/tavern\" rel=\"nofollow\">Tavern-ci</a></p>\n<h1>Installing it</h1>\n<pre><code>pip install yapi-ci\n</code></pre>\n<h1>How to use it</h1>\n<p>For this example we will use <code>http://httpbin.org/put</code> as <code>VAULT_ADDR</code>, this service will echo everything we send plus extra information about our request.</p>\n<pre><span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">736</span> <span class=\"p\">[</span><span class=\"n\">None</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"n\">Starting</span> <span class=\"n\">yapi</span> <span class=\"mf\">0.1.6</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">743</span> <span class=\"p\">[</span><span class=\"n\">None</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"n\">Loading</span> <span class=\"n\">examples</span><span class=\"o\">/</span><span class=\"n\">vault</span><span class=\"o\">-</span><span class=\"n\">init</span><span class=\"p\">.</span><span class=\"n\">yaml</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">743</span> <span class=\"p\">[</span><span class=\"n\">None</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"nl\">Stage</span><span class=\"p\">:</span> <span class=\"mo\">01</span><span class=\"o\">-</span><span class=\"n\">Init</span> <span class=\"n\">Vault</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">744</span> <span class=\"p\">[</span><span class=\"mo\">01</span><span class=\"o\">-</span><span class=\"n\">Init</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">-&gt;</span><span class=\"nl\">URL</span><span class=\"p\">:</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//httpbin.org/put</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">744</span> <span class=\"p\">[</span><span class=\"mo\">01</span><span class=\"o\">-</span><span class=\"n\">Init</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">-&gt;</span><span class=\"nl\">Method</span><span class=\"p\">:</span> <span class=\"n\">PUT</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">745</span> <span class=\"p\">[</span><span class=\"mo\">01</span><span class=\"o\">-</span><span class=\"n\">Init</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">-&gt;</span><span class=\"nl\">Body</span><span class=\"p\">:</span>\n<span class=\"p\">{</span>\n    <span class=\"s\">\"mykeys\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n        <span class=\"s\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n    <span class=\"p\">],</span>\n    <span class=\"s\">\"secret_shares\"</span><span class=\"o\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n    <span class=\"s\">\"secret_threshold\"</span><span class=\"o\">:</span> <span class=\"mi\">1</span>\n<span class=\"p\">}</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">934</span> <span class=\"p\">[</span><span class=\"mo\">01</span><span class=\"o\">-</span><span class=\"n\">Init</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">&lt;-</span><span class=\"n\">Received</span> <span class=\"n\">status</span> <span class=\"n\">code</span> <span class=\"n\">OK</span> <span class=\"mi\">200</span> <span class=\"o\">==</span> <span class=\"mi\">200</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">935</span> <span class=\"p\">[</span><span class=\"mo\">01</span><span class=\"o\">-</span><span class=\"n\">Init</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">&lt;-</span><span class=\"n\">Body</span> <span class=\"n\">of</span> <span class=\"nl\">response</span><span class=\"p\">:</span>\n<span class=\"p\">{</span>\n<span class=\"p\">...</span>\n    <span class=\"s\">\"headers\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"Accept-Encoding\"</span><span class=\"o\">:</span> <span class=\"s\">\"identity\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"Content-Length\"</span><span class=\"o\">:</span> <span class=\"s\">\"123\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"Content-Type\"</span><span class=\"o\">:</span> <span class=\"s\">\"application/json\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"Host\"</span><span class=\"o\">:</span> <span class=\"s\">\"httpbin.org\"</span>\n    <span class=\"p\">},</span>\n    <span class=\"s\">\"json\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"mykeys\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n            <span class=\"s\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n        <span class=\"p\">],</span>\n        <span class=\"s\">\"secret_shares\"</span><span class=\"o\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n        <span class=\"s\">\"secret_threshold\"</span><span class=\"o\">:</span> <span class=\"mi\">1</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">...</span>\n<span class=\"p\">}</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">936</span> <span class=\"p\">[</span><span class=\"mo\">01</span><span class=\"o\">-</span><span class=\"n\">Init</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"n\">Writing</span> <span class=\"n\">to</span> <span class=\"n\">examples</span><span class=\"o\">/</span><span class=\"n\">data</span><span class=\"o\">/</span><span class=\"n\">primary</span><span class=\"o\">/</span><span class=\"n\">init</span><span class=\"p\">.</span><span class=\"n\">json</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">937</span> <span class=\"p\">[</span><span class=\"n\">None</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"n\">Saved</span> <span class=\"n\">response</span> <span class=\"nl\">variables</span><span class=\"p\">:</span>\n<span class=\"p\">{</span><span class=\"err\">'</span><span class=\"n\">headers</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"p\">{</span><span class=\"err\">'</span><span class=\"n\">Accept</span><span class=\"o\">-</span><span class=\"n\">Encoding</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"err\">'</span><span class=\"n\">identity</span><span class=\"err\">'</span><span class=\"p\">,</span>\n             <span class=\"err\">'</span><span class=\"n\">Content</span><span class=\"o\">-</span><span class=\"n\">Length</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"err\">'</span><span class=\"mi\">123</span><span class=\"err\">'</span><span class=\"p\">,</span>\n             <span class=\"err\">'</span><span class=\"n\">Content</span><span class=\"o\">-</span><span class=\"n\">Type</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"err\">'</span><span class=\"n\">application</span><span class=\"o\">/</span><span class=\"n\">json</span><span class=\"err\">'</span><span class=\"p\">,</span>\n             <span class=\"err\">'</span><span class=\"n\">Host</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"err\">'</span><span class=\"n\">httpbin</span><span class=\"p\">.</span><span class=\"n\">org</span><span class=\"err\">'</span><span class=\"p\">},</span>\n <span class=\"err\">'</span><span class=\"n\">json_full</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"p\">{</span><span class=\"err\">'</span><span class=\"n\">mykeys</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"p\">[</span><span class=\"err\">'</span><span class=\"mf\">7f</span><span class=\"mi\">921414</span><span class=\"n\">b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2</span><span class=\"err\">'</span><span class=\"p\">],</span>\n               <span class=\"err\">'</span><span class=\"n\">secret_shares</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n               <span class=\"err\">'</span><span class=\"n\">secret_threshold</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"mi\">1</span><span class=\"p\">},</span>\n <span class=\"err\">'</span><span class=\"n\">json_keys_list</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"p\">[</span><span class=\"err\">'</span><span class=\"mf\">7f</span><span class=\"mi\">921414</span><span class=\"n\">b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2</span><span class=\"err\">'</span><span class=\"p\">],</span>\n <span class=\"err\">'</span><span class=\"n\">json_secret_shares</span><span class=\"err\">'</span><span class=\"o\">:</span> <span class=\"mi\">1</span><span class=\"p\">}</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">938</span> <span class=\"p\">[</span><span class=\"n\">None</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"n\">End</span> <span class=\"n\">of</span> <span class=\"nl\">stage</span><span class=\"p\">:</span> <span class=\"mo\">01</span><span class=\"o\">-</span><span class=\"n\">Init</span> <span class=\"n\">Vault</span>\n\n\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">938</span> <span class=\"p\">[</span><span class=\"n\">None</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"nl\">Stage</span><span class=\"p\">:</span> <span class=\"mo\">02</span><span class=\"o\">-</span><span class=\"n\">Unseal</span> <span class=\"n\">Vault</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">942</span> <span class=\"p\">[</span><span class=\"mo\">02</span><span class=\"o\">-</span><span class=\"n\">Unseal</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"n\">Reading</span> <span class=\"n\">examples</span><span class=\"o\">/</span><span class=\"n\">data</span><span class=\"o\">/</span><span class=\"n\">primary</span><span class=\"o\">/</span><span class=\"n\">init</span><span class=\"p\">.</span><span class=\"n\">json</span> <span class=\"p\">,</span> <span class=\"nl\">sub_vars</span><span class=\"p\">:</span> <span class=\"n\">True</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">945</span> <span class=\"p\">[</span><span class=\"mo\">02</span><span class=\"o\">-</span><span class=\"n\">Unseal</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">-&gt;</span><span class=\"nl\">URL</span><span class=\"p\">:</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//httpbin.org/put</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">945</span> <span class=\"p\">[</span><span class=\"mo\">02</span><span class=\"o\">-</span><span class=\"n\">Unseal</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">-&gt;</span><span class=\"nl\">Method</span><span class=\"p\">:</span> <span class=\"n\">PUT</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"p\">,</span><span class=\"mi\">945</span> <span class=\"p\">[</span><span class=\"mo\">02</span><span class=\"o\">-</span><span class=\"n\">Unseal</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">-&gt;</span><span class=\"nl\">Body</span><span class=\"p\">:</span>\n<span class=\"p\">{</span>\n    <span class=\"s\">\"json_full\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"mykeys\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n            <span class=\"s\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n        <span class=\"p\">],</span>\n        <span class=\"s\">\"secret_shares\"</span><span class=\"o\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n        <span class=\"s\">\"secret_threshold\"</span><span class=\"o\">:</span> <span class=\"mi\">1</span>\n    <span class=\"p\">},</span>\n    <span class=\"s\">\"json_keys_list\"</span><span class=\"o\">:</span> <span class=\"s\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span><span class=\"p\">,</span>\n    <span class=\"s\">\"json_secret_shares\"</span><span class=\"o\">:</span> <span class=\"s\">\"test string 1\"</span><span class=\"p\">,</span>\n    <span class=\"s\">\"myheaders\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"Accept-Encoding\"</span><span class=\"o\">:</span> <span class=\"s\">\"identity\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"Content-Length\"</span><span class=\"o\">:</span> <span class=\"s\">\"123\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"Content-Type\"</span><span class=\"o\">:</span> <span class=\"s\">\"application/json\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"Host\"</span><span class=\"o\">:</span> <span class=\"s\">\"httpbin.org\"</span>\n    <span class=\"p\">},</span>\n    <span class=\"s\">\"mykeys\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n        <span class=\"s\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n    <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">19</span><span class=\"p\">,</span><span class=\"mi\">138</span> <span class=\"p\">[</span><span class=\"mo\">02</span><span class=\"o\">-</span><span class=\"n\">Unseal</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">&lt;-</span><span class=\"n\">Received</span> <span class=\"n\">status</span> <span class=\"n\">code</span> <span class=\"n\">OK</span> <span class=\"mi\">200</span> <span class=\"o\">==</span> <span class=\"mi\">200</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">19</span><span class=\"p\">,</span><span class=\"mi\">139</span> <span class=\"p\">[</span><span class=\"mo\">02</span><span class=\"o\">-</span><span class=\"n\">Unseal</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"o\">&lt;-</span><span class=\"n\">Body</span> <span class=\"n\">of</span> <span class=\"nl\">response</span><span class=\"p\">:</span>\n<span class=\"p\">{</span>\n<span class=\"p\">...</span>\n    <span class=\"s\">\"headers\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"Accept-Encoding\"</span><span class=\"o\">:</span> <span class=\"s\">\"identity\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"Content-Length\"</span><span class=\"o\">:</span> <span class=\"s\">\"473\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"Content-Type\"</span><span class=\"o\">:</span> <span class=\"s\">\"application/json\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"Host\"</span><span class=\"o\">:</span> <span class=\"s\">\"httpbin.org\"</span>\n    <span class=\"p\">},</span>\n    <span class=\"s\">\"json\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n        <span class=\"s\">\"json_full\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n            <span class=\"s\">\"mykeys\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n                <span class=\"s\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n            <span class=\"p\">],</span>\n            <span class=\"s\">\"secret_shares\"</span><span class=\"o\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n            <span class=\"s\">\"secret_threshold\"</span><span class=\"o\">:</span> <span class=\"mi\">1</span>\n        <span class=\"p\">},</span>\n        <span class=\"s\">\"json_keys_list\"</span><span class=\"o\">:</span> <span class=\"s\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"json_secret_shares\"</span><span class=\"o\">:</span> <span class=\"s\">\"test string 1\"</span><span class=\"p\">,</span>\n        <span class=\"s\">\"myheaders\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n            <span class=\"s\">\"Accept-Encoding\"</span><span class=\"o\">:</span> <span class=\"s\">\"identity\"</span><span class=\"p\">,</span>\n            <span class=\"s\">\"Content-Length\"</span><span class=\"o\">:</span> <span class=\"s\">\"123\"</span><span class=\"p\">,</span>\n            <span class=\"s\">\"Content-Type\"</span><span class=\"o\">:</span> <span class=\"s\">\"application/json\"</span><span class=\"p\">,</span>\n            <span class=\"s\">\"Host\"</span><span class=\"o\">:</span> <span class=\"s\">\"httpbin.org\"</span>\n        <span class=\"p\">},</span>\n        <span class=\"s\">\"mykeys\"</span><span class=\"o\">:</span> <span class=\"p\">[</span>\n            <span class=\"s\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n        <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">...</span>\n<span class=\"p\">}</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">19</span><span class=\"p\">,</span><span class=\"mi\">140</span> <span class=\"p\">[</span><span class=\"mo\">02</span><span class=\"o\">-</span><span class=\"n\">Unseal</span> <span class=\"n\">Vault</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"n\">Writing</span> <span class=\"n\">to</span> <span class=\"n\">examples</span><span class=\"o\">/</span><span class=\"n\">data</span><span class=\"o\">/</span><span class=\"n\">primary</span><span class=\"o\">/</span><span class=\"n\">unsealed_response</span><span class=\"p\">.</span><span class=\"n\">json</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">19</span><span class=\"p\">,</span><span class=\"mi\">141</span> <span class=\"p\">[</span><span class=\"n\">None</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"n\">End</span> <span class=\"n\">of</span> <span class=\"nl\">stage</span><span class=\"p\">:</span> <span class=\"mo\">02</span><span class=\"o\">-</span><span class=\"n\">Unseal</span> <span class=\"n\">Vault</span>\n\n<span class=\"mi\">2019</span><span class=\"o\">-</span><span class=\"mi\">11</span><span class=\"o\">-</span><span class=\"mi\">20</span> <span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">19</span><span class=\"p\">,</span><span class=\"mi\">141</span> <span class=\"p\">[</span><span class=\"n\">None</span><span class=\"p\">][</span><span class=\"n\">INFO</span><span class=\"p\">]</span>\n<span class=\"n\">Finished</span> <span class=\"n\">examples</span><span class=\"o\">/</span><span class=\"n\">vault</span><span class=\"o\">-</span><span class=\"n\">init</span><span class=\"p\">.</span><span class=\"n\">yaml</span>\n</pre>\n<h1>Example file vault-init.yaml</h1>\n<pre><span class=\"nn\">---</span>\n<span class=\"nt\">stages</span><span class=\"p\">:</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">01-Init Vault</span>\n    <span class=\"nt\">request</span><span class=\"p\">:</span>\n      <span class=\"nt\">url</span><span class=\"p\">:</span> <span class=\"s\">\"{env_vars.VAULT_ADDR}\"</span>\n      <span class=\"nt\">method</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">PUT</span>\n      <span class=\"nt\">json</span><span class=\"p\">:</span>\n        <span class=\"nt\">secret_shares</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">1</span>\n        <span class=\"nt\">secret_threshold</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">1</span>\n        <span class=\"nt\">mykeys</span><span class=\"p\">:</span>\n           <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2</span>\n    <span class=\"nt\">response</span><span class=\"p\">:</span>\n      <span class=\"nt\">status_code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">200</span>\n      <span class=\"nt\">save</span><span class=\"p\">:</span>\n        <span class=\"nt\">$ext</span><span class=\"p\">:</span>\n          <span class=\"nt\">function</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">extensions.save_response</span>\n          <span class=\"nt\">extra_kwargs</span><span class=\"p\">:</span>\n            <span class=\"nt\">path</span><span class=\"p\">:</span> <span class=\"s\">\"examples/data/{env_vars.VAULT_CLUSTER}/init.json\"</span>\n      <span class=\"nt\">body</span><span class=\"p\">:</span>\n        <span class=\"nt\">headers</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">headers</span>\n        <span class=\"nt\">json_keys_list</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">json.mykeys</span>\n        <span class=\"nt\">json_secret_shares</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">json.secret_shares</span>\n        <span class=\"nt\">json_full</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">json</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">02-Unseal Vault</span>\n    <span class=\"nt\">request</span><span class=\"p\">:</span>\n      <span class=\"nt\">url</span><span class=\"p\">:</span> <span class=\"s\">\"{env_vars.VAULT_ADDR}\"</span>\n      <span class=\"nt\">method</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">PUT</span>\n      <span class=\"nt\">json</span><span class=\"p\">:</span>\n        <span class=\"nt\">mykeys</span><span class=\"p\">:</span> <span class=\"s\">\"ext.json.mykeys.to_list()\"</span>\n        <span class=\"nt\">myheaders</span><span class=\"p\">:</span> <span class=\"s\">\"resp.headers.to_dict()\"</span>\n        <span class=\"nt\">json_keys_list</span><span class=\"p\">:</span> <span class=\"s\">\"resp.json_keys_list.to_list()[0]\"</span>\n        <span class=\"nt\">json_secret_shares</span><span class=\"p\">:</span> <span class=\"s\">\"test</span><span class=\"nv\"> </span><span class=\"s\">string</span><span class=\"nv\"> </span><span class=\"s\">{resp.json_secret_shares}\"</span>\n        <span class=\"nt\">json_full</span><span class=\"p\">:</span> <span class=\"s\">\"resp.json_full.to_dict()\"</span>\n        <span class=\"nt\">$ext</span><span class=\"p\">:</span>\n          <span class=\"nt\">function</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">extensions.read_json</span>\n          <span class=\"nt\">extra_kwargs</span><span class=\"p\">:</span>\n            <span class=\"nt\">path</span><span class=\"p\">:</span> <span class=\"s\">\"examples/data/{env_vars.VAULT_CLUSTER}/init.json\"</span>\n            <span class=\"nt\">sub_vars</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">True</span>\n    <span class=\"nt\">response</span><span class=\"p\">:</span>\n      <span class=\"nt\">status_code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">200</span>\n      <span class=\"nt\">save</span><span class=\"p\">:</span>\n        <span class=\"nt\">$ext</span><span class=\"p\">:</span>\n          <span class=\"nt\">function</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">extensions.save_response</span>\n          <span class=\"nt\">extra_kwargs</span><span class=\"p\">:</span>\n            <span class=\"nt\">path</span><span class=\"p\">:</span> <span class=\"s\">\"examples/data/{env_vars.VAULT_CLUSTER}/unsealed_response.json\"</span>\n</pre>\n<h3>The first stage called <code>01-Init Vault</code></h3>\n<ul>\n<li><code>env_vars.VAULT_ADDR</code> will be replaced by the enviromental variable <code>$VAULT_ADDR</code> as is the same with all variables starting with <code>env_vars.</code></li>\n<li>Do a <code>GET</code> call to <code>url</code></li>\n<li>The json sent to the API will be:</li>\n</ul>\n<pre><span class=\"p\">{</span>\n    <span class=\"nt\">\"mykeys\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n    <span class=\"p\">],</span>\n    <span class=\"nt\">\"secret_shares\"</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"secret_threshold\"</span><span class=\"p\">:</span> <span class=\"mi\">1</span>\n<span class=\"p\">}</span>\n</pre>\n<ul>\n<li>It expects a HTTP response of <code>200</code> or it will error out.</li>\n<li>It will save the output of the response as a json file under <code>data/{env_vars.VAULT_CLUSTER}/init.json</code></li>\n<li>It will try to convert the response to json and save them in variables for the next stage:</li>\n</ul>\n<pre>    <span class=\"nt\">response</span><span class=\"p\">:</span>\n    <span class=\"l l-Scalar l-Scalar-Plain\">...</span>\n      <span class=\"l l-Scalar l-Scalar-Plain\">body</span><span class=\"p p-Indicator\">:</span>\n        <span class=\"nt\">headers</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">headers</span>\n        <span class=\"nt\">json_keys_list</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">json.mykeys</span>\n        <span class=\"nt\">json_secret_shares</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">json.secret_shares</span>\n        <span class=\"nt\">json_full</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">json</span>\n</pre>\n<h3>The second stage called <code>02-Unseal Vault</code></h3>\n<ul>\n<li>Replace replace variables that start with <code>{env_vars.}</code> with environmental variables.</li>\n<li>Insert the variables saved in previous stages from <code>resp.</code> converting them to a python dictionary or list depending if we want a json object or array.</li>\n<li>Variables that have <code>{}</code> are used to <code>format</code> the string instead of replacing it with its value.</li>\n<li>\n</ul>\n<pre>      <span class=\"nt\">json</span><span class=\"p\">:</span>\n        <span class=\"nt\">mykeys</span><span class=\"p\">:</span> <span class=\"s\">\"ext.json.mykeys.to_list()\"</span>\n        <span class=\"nt\">myheaders</span><span class=\"p\">:</span> <span class=\"s\">\"resp.headers.to_dict()\"</span>\n        <span class=\"nt\">json_keys_list</span><span class=\"p\">:</span> <span class=\"s\">\"resp.json_keys_list.to_list()[0]\"</span>\n        <span class=\"nt\">json_secret_shares</span><span class=\"p\">:</span> <span class=\"s\">\"test</span><span class=\"nv\"> </span><span class=\"s\">string</span><span class=\"nv\"> </span><span class=\"s\">{resp.json_secret_shares}\"</span>\n        <span class=\"nt\">json_full</span><span class=\"p\">:</span> <span class=\"s\">\"resp.json_full.to_dict()\"</span>\n</pre>\n<ul>\n<li>Read <code>data/{env_vars.VAULT_CLUSTER}/init.json</code> and replace variables that start with <code>ext.</code> in the body with data from the json when <code>sub_vars</code> is set to <code>True</code>.</li>\n</ul>\n<pre>  <span class=\"s2\">\"json\"</span><span class=\"err\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"mykeys\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n      <span class=\"s2\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n    <span class=\"p\">],</span>\n</pre>\n<p>Becomes:</p>\n<pre>    <span class=\"nt\">mykeys</span><span class=\"p\">:</span> <span class=\"s\">\"ext.json.mykeys.to_list()\"</span>\n</pre>\n<ul>\n<li>Do a <code>PUT</code> call to <code>url</code></li>\n<li>With the json:</li>\n</ul>\n<pre><span class=\"p\">{</span>\n    <span class=\"nt\">\"json_full\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"mykeys\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n        <span class=\"p\">],</span>\n        <span class=\"nt\">\"secret_shares\"</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"secret_threshold\"</span><span class=\"p\">:</span> <span class=\"mi\">1</span>\n    <span class=\"p\">},</span>\n    <span class=\"nt\">\"json_keys_list\"</span><span class=\"p\">:</span> <span class=\"s2\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"json_secret_shares\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test string 1\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"myheaders\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"Accept-Encoding\"</span><span class=\"p\">:</span> <span class=\"s2\">\"identity\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"Content-Length\"</span><span class=\"p\">:</span> <span class=\"s2\">\"123\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"Content-Type\"</span><span class=\"p\">:</span> <span class=\"s2\">\"application/json\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"Host\"</span><span class=\"p\">:</span> <span class=\"s2\">\"httpbin.org\"</span>\n    <span class=\"p\">},</span>\n    <span class=\"nt\">\"mykeys\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">\"7f921414b13ad05eb844dc349423765d857e8175b48c5854ada0e24e96924ac2\"</span>\n    <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</pre>\n<ul>\n<li>It will expect a <code>200</code> response code or error out.</li>\n<li>It will save the response to <code>data/{env_vars.VAULT_CLUSTER}/unsealed_response.json</code></li>\n</ul>\n<h2>TODO</h2>\n<ul>\n<li>[ ] Add Automated testing</li>\n<li>[ ] Add version tagging</li>\n<li>[ ] Add package automatic building from tags</li>\n</ul>\n\n          </div>"}, "last_serial": 6169695, "releases": {"0.1.1": [{"comment_text": "", "digests": {"md5": "f8868dd5a5104c084e45d0c6bdb82374", "sha256": "e3003e125ffbf47cdbd47534d6d135e31b9c1fec9c98e7ac212dc9c8fc5b8b0f"}, "downloads": -1, "filename": "yapi_ci-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "f8868dd5a5104c084e45d0c6bdb82374", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 13735, "upload_time": "2019-11-06T14:14:01", "upload_time_iso_8601": "2019-11-06T14:14:01.347431Z", "url": "https://files.pythonhosted.org/packages/9c/5b/c4f6fb7e1265edeabca2ae1e0564cf3a6b35a358c7f321b8fa1aa7fea038/yapi_ci-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "29474475b67f091a708f1c6d9a08626c", "sha256": "8e88f2471a8df3baec472b491425a4b8b43947e434c0d5026f6918dc14641618"}, "downloads": -1, "filename": "yapi-ci-0.1.1.tar.gz", "has_sig": false, "md5_digest": "29474475b67f091a708f1c6d9a08626c", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 11584, "upload_time": "2019-11-06T14:14:04", "upload_time_iso_8601": "2019-11-06T14:14:04.064258Z", "url": "https://files.pythonhosted.org/packages/ee/4b/2f38ac94c8ddd122b7fff8ee658931b68b0c89fd53d04e193ac830b10ac0/yapi-ci-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "70ddaf7766bd725b92e032f1942485d9", "sha256": "9ce6ced01f79d728052690ee9092f3cce165c07f112e6ee69c4360d52676e76b"}, "downloads": -1, "filename": "yapi_ci-0.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "70ddaf7766bd725b92e032f1942485d9", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 13332, "upload_time": "2019-11-06T15:15:04", "upload_time_iso_8601": "2019-11-06T15:15:04.970355Z", "url": "https://files.pythonhosted.org/packages/a7/ea/3c9afc200659095fe5729c00f23e81b85fa30522637ab6985056ba855339/yapi_ci-0.1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d55ce8a0c337109fe333fe3ff6c97ec1", "sha256": "a1441029b13a439d49a244786cc347e8a67128c08cf19f81031b6406c12fff80"}, "downloads": -1, "filename": "yapi-ci-0.1.2.tar.gz", "has_sig": false, "md5_digest": "d55ce8a0c337109fe333fe3ff6c97ec1", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 11602, "upload_time": "2019-11-06T15:15:06", "upload_time_iso_8601": "2019-11-06T15:15:06.590032Z", "url": "https://files.pythonhosted.org/packages/0b/54/bf0f0f8ec13967538c65307dac6dd3aff3f2ed5dce0edc3582fc0bb5b2b2/yapi-ci-0.1.2.tar.gz", "yanked": false}], "0.1.3": [{"comment_text": "", "digests": {"md5": "0ee0c6e79b6609a6da006ed1df6c3ac1", "sha256": "4b021979e0afce6df9f9cb84318e4c7eb37501798fde204d911f7188a6a76d14"}, "downloads": -1, "filename": "yapi_ci-0.1.3-py3-none-any.whl", "has_sig": false, "md5_digest": "0ee0c6e79b6609a6da006ed1df6c3ac1", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 13577, "upload_time": "2019-11-07T11:57:02", "upload_time_iso_8601": "2019-11-07T11:57:02.353590Z", "url": "https://files.pythonhosted.org/packages/97/8a/1854720d7f36df161e677c533c1d1ef289cb72267cd8bec75c42e4bfa0a6/yapi_ci-0.1.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "ea7b69738049b4ef793178dd7520ad57", "sha256": "76831e3c2725d3be2f49ca1c0d5736c5ea226149a8d057680c8f9552e26f497d"}, "downloads": -1, "filename": "yapi-ci-0.1.3.tar.gz", "has_sig": false, "md5_digest": "ea7b69738049b4ef793178dd7520ad57", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 11910, "upload_time": "2019-11-07T11:57:04", "upload_time_iso_8601": "2019-11-07T11:57:04.066754Z", "url": "https://files.pythonhosted.org/packages/bf/5b/ed9ef0967076a28020dfd5bbd51fa7474ee596a0ba0761e2dd600ee7d1c2/yapi-ci-0.1.3.tar.gz", "yanked": false}], "0.1.5": [{"comment_text": "", "digests": {"md5": "c42de1bd8c79c50133d2ad282fce5e5c", "sha256": "e7df86d743a924fb4246e137d76a051717d27f94bc040fe88e54a3b74ebc141b"}, "downloads": -1, "filename": "yapi_ci-0.1.5-py3-none-any.whl", "has_sig": false, "md5_digest": "c42de1bd8c79c50133d2ad282fce5e5c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 15218, "upload_time": "2019-11-12T13:34:34", "upload_time_iso_8601": "2019-11-12T13:34:34.915911Z", "url": "https://files.pythonhosted.org/packages/d4/5e/03797dafe53c74bc142887ab6791d6ea5c598019facb8418fabb530ee4dd/yapi_ci-0.1.5-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6d030afb8900cee2eaac803701a11a65", "sha256": "3c4bb3d431b0bd1f5339b9ea253e9313306c0e729528c5f851c6524691a1da1a"}, "downloads": -1, "filename": "yapi-ci-0.1.5.tar.gz", "has_sig": false, "md5_digest": "6d030afb8900cee2eaac803701a11a65", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14105, "upload_time": "2019-11-12T13:34:36", "upload_time_iso_8601": "2019-11-12T13:34:36.407084Z", "url": "https://files.pythonhosted.org/packages/bd/7f/c3b7d7cc2dd12a5835a3fd706fd57522e781b905cfe092e2ac681a32acc9/yapi-ci-0.1.5.tar.gz", "yanked": false}], "0.1.6": [{"comment_text": "", "digests": {"md5": "7699ce30bf6504b099dc0d6a7c97ee90", "sha256": "fe3facf08ced8cd8b551f54359f2db5410ea5937401e5cb7306ad764ae404234"}, "downloads": -1, "filename": "yapi_ci-0.1.6-py3-none-any.whl", "has_sig": false, "md5_digest": "7699ce30bf6504b099dc0d6a7c97ee90", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 15521, "upload_time": "2019-11-20T16:24:37", "upload_time_iso_8601": "2019-11-20T16:24:37.203699Z", "url": "https://files.pythonhosted.org/packages/3e/3a/8cff8ec2b8b970d55a4b4c58955d00c574f365988d7c94c96253eca26455/yapi_ci-0.1.6-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "0bdedf71f563bd834385deb9599a7174", "sha256": "c3f5e109e95bbb249ba890c9cb935464bf32dc057ae789abb7573f4945414ce4"}, "downloads": -1, "filename": "yapi-ci-0.1.6.tar.gz", "has_sig": false, "md5_digest": "0bdedf71f563bd834385deb9599a7174", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14366, "upload_time": "2019-11-20T16:24:38", "upload_time_iso_8601": "2019-11-20T16:24:38.457022Z", "url": "https://files.pythonhosted.org/packages/4d/ad/a1f20205a2024428555c54e343bd1493731ea0e02f2cca9475eca1b5f7d7/yapi-ci-0.1.6.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "7699ce30bf6504b099dc0d6a7c97ee90", "sha256": "fe3facf08ced8cd8b551f54359f2db5410ea5937401e5cb7306ad764ae404234"}, "downloads": -1, "filename": "yapi_ci-0.1.6-py3-none-any.whl", "has_sig": false, "md5_digest": "7699ce30bf6504b099dc0d6a7c97ee90", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 15521, "upload_time": "2019-11-20T16:24:37", "upload_time_iso_8601": "2019-11-20T16:24:37.203699Z", "url": "https://files.pythonhosted.org/packages/3e/3a/8cff8ec2b8b970d55a4b4c58955d00c574f365988d7c94c96253eca26455/yapi_ci-0.1.6-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "0bdedf71f563bd834385deb9599a7174", "sha256": "c3f5e109e95bbb249ba890c9cb935464bf32dc057ae789abb7573f4945414ce4"}, "downloads": -1, "filename": "yapi-ci-0.1.6.tar.gz", "has_sig": false, "md5_digest": "0bdedf71f563bd834385deb9599a7174", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14366, "upload_time": "2019-11-20T16:24:38", "upload_time_iso_8601": "2019-11-20T16:24:38.457022Z", "url": "https://files.pythonhosted.org/packages/4d/ad/a1f20205a2024428555c54e343bd1493731ea0e02f2cca9475eca1b5f7d7/yapi-ci-0.1.6.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:23:04 2020"}