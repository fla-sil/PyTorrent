{"info": {"author": "Leiden University Medical Center", "author_email": "sasc@lumc.nl", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: 3 :: Only"], "description": "wdl-packager\n============\n\n.. Badges have empty alts. So nothing shows up if they do not work.\n.. This fixes readthedocs issues with badges.\n.. image:: https://img.shields.io/pypi/v/wdl-packager.svg\n  :target: https://pypi.org/project/wdl-packager/\n  :alt:\n\n.. image:: https://img.shields.io/conda/v/conda-forge/wdl-packager.svg\n  :target: https://anaconda.org/conda-forge/wdl-packager\n  :alt:\n\n.. image:: https://img.shields.io/pypi/pyversions/wdl-packager.svg\n  :target: https://pypi.org/project/wdl-packager/\n  :alt:\n\n.. image:: https://img.shields.io/pypi/l/wdl-packager.svg\n  :target: https://github.com/biowdl/wdl-packager/blob/master/LICENSE\n  :alt:\n\n.. image:: https://travis-ci.com/biowdl/wdl-packager.svg?branch=develop\n  :target: https://travis-ci.com/biowdl/wdl-packager\n  :alt:\n\n.. image:: https://codecov.io/gh/biowdl/wdl-packager/branch/develop/graph/badge.svg\n  :target: https://codecov.io/gh/biowdl/wdl-packager\n  :alt:\n\nPackage a WDL and its imports into a zip file.\n\nThe zip file can be used as a valid imports zip for `cromwell\n<https://github.com/broadinstitute/cromwell>`_. It can also be used to archive\nyour workflow.\n\nWdl-packager can create zip packages that are `binary reproducible\n<https://reproducible-builds.org/>`_ when used with the ``--reproducible``\nflag. It can also include additional files such as licenses, READMEs and\nexample configuration files. This makes it ideal for distributing WDL workflows\nas packages.\n\nWdl-packager currently only supports file based imports.\n\nUsage\n-----\n\n.. code-block:: text\n\n    usage: wdl-packager [-h] [-o OUTPUT] [-a ADDITIONAL_FILES]\n                        [--use-git-version-name] [--use-git-commit-timestamp]\n                        [--reproducible] [--version]\n                        WDL_FILE\n\n    positional arguments:\n      WDL_FILE              The WDL file that will be packaged.\n\n    optional arguments:\n      -h, --help            show this help message and exit\n      -o OUTPUT, --output OUTPUT\n                            The output zip file. By default uses the name of the\n                            input. This overrides the git name option.\n      -a ADDITIONAL_FILES, --additional-file ADDITIONAL_FILES\n                            Additional files to be included in the zip. Additional\n                            files will be added according to their relative\n                            position to the WDL file. If that is not possible they\n                            will be added to the base of the zip. Multiple '-a'\n                            flags can be used.\n      --use-git-version-name\n                            Use git describe to determine the name of the zip.\n      --use-git-commit-timestamp\n                            Use the git commit timestamp to timestamp all the\n                            files in the zip.\n      --reproducible        shorthand for --use-git-version-name and --use-git-\n                            commit-timestamp\n      --version             show program's version number and exit\n\nReproducibility\n---------------\nThe internal process to create a reproducible package is as follows:\n\n+ It checks each file with ``git log --n1 --pretty=%at`` to get the unix\n  timestamp of the latest commit that affected that file.\n+ Each file is then copied to a temporary directory where the last modified\n  time is changed to the unix timestamp found in the first step.\n+ The list of files is then sorted by their destination path in the zip. The\n  sorting ensures that the files will always be added in the same order.\n+ The timezone of the process is changed to UTC, as the timezone affects the\n  timestamp of the files in the zip archive.\n+ The files are added to the zip package in sorted order.\n\nThe name for a reproducible package consists of\n\n+ The WDL file basename without ``.wdl``.\n+ A version description by ``git describe --always``.\n+ A ``.zip`` extension.\n\nKnown issues\n------------\n+ Old versions of `Cromwell <https://github.com/broadinstitute/cromwell>`_\n  contain a bug that causes a crash when opening zip files with nested\n  directories. This was fixed in cromwell version 49.\n+ ``http://`` imports are currently not supported. Wdl-packager could be an\n  ideal tool to fetch WDLs from the web and package their imports in such a\n  way that they can be used locally. Unfortunately this requires rewriting the\n  import paths inside the WDL files before they are packaged. This is\n  non-trivial to implement and it may have unintentioned side effects.\n+ When packaging reproducibly the timezone of the python process needs to be\n  changed to 'UTC'. Otherwise the last modified times in the zip will differ\n  for each timezone. This will affect all code run in the same process. This\n  does not matter for wdl-packager itself, but it does matter for programs that\n  use wdl_packager as a library. Not using ``use_git_timestamps`` circumvents\n  this problem.\n\n\n", "description_content_type": "text/x-rst", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/biowdl/wdl-packager", "keywords": "WDL wdl zip package", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "wdl-packager", "package_url": "https://pypi.org/project/wdl-packager/", "platform": "", "project_url": "https://pypi.org/project/wdl-packager/", "project_urls": {"Homepage": "https://github.com/biowdl/wdl-packager"}, "release_url": "https://pypi.org/project/wdl-packager/1.0.0/", "requires_dist": ["miniwdl"], "requires_python": ">=3.6", "summary": "Package a WDL and its imports into a zip file.", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://pypi.org/project/wdl-packager/\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5dfc6a7c0dea06567859d707ccf1442988b218bf/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f77646c2d7061636b616765722e737667\"></a>\n<a href=\"https://anaconda.org/conda-forge/wdl-packager\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/67ef0a0bf456dd5d1b4e2220098529e0e40a00ee/68747470733a2f2f696d672e736869656c64732e696f2f636f6e64612f762f636f6e64612d666f7267652f77646c2d7061636b616765722e737667\"></a>\n<a href=\"https://pypi.org/project/wdl-packager/\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7cff805cc8050c19896eb62441982f7d37896fe2/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f77646c2d7061636b616765722e737667\"></a>\n<a href=\"https://github.com/biowdl/wdl-packager/blob/master/LICENSE\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/18a70d2389abce8476c0fa78ceb2a91a8b46a92c/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f77646c2d7061636b616765722e737667\"></a>\n<a href=\"https://travis-ci.com/biowdl/wdl-packager\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/443f7ec2dea123a5e00a3781a65d374e5cbc42cc/68747470733a2f2f7472617669732d63692e636f6d2f62696f77646c2f77646c2d7061636b616765722e7376673f6272616e63683d646576656c6f70\"></a>\n<a href=\"https://codecov.io/gh/biowdl/wdl-packager\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b10a1457e861f07c3624866c8ae54f4c52e8da8d/68747470733a2f2f636f6465636f762e696f2f67682f62696f77646c2f77646c2d7061636b616765722f6272616e63682f646576656c6f702f67726170682f62616467652e737667\"></a>\n<p>Package a WDL and its imports into a zip file.</p>\n<p>The zip file can be used as a valid imports zip for <a href=\"https://github.com/broadinstitute/cromwell\" rel=\"nofollow\">cromwell</a>. It can also be used to archive\nyour workflow.</p>\n<p>Wdl-packager can create zip packages that are <a href=\"https://reproducible-builds.org/\" rel=\"nofollow\">binary reproducible</a> when used with the <tt><span class=\"pre\">--reproducible</span></tt>\nflag. It can also include additional files such as licenses, READMEs and\nexample configuration files. This makes it ideal for distributing WDL workflows\nas packages.</p>\n<p>Wdl-packager currently only supports file based imports.</p>\n<div id=\"usage\">\n<h2>Usage</h2>\n<pre>usage: wdl-packager [-h] [-o OUTPUT] [-a ADDITIONAL_FILES]\n                    [--use-git-version-name] [--use-git-commit-timestamp]\n                    [--reproducible] [--version]\n                    WDL_FILE\n\npositional arguments:\n  WDL_FILE              The WDL file that will be packaged.\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -o OUTPUT, --output OUTPUT\n                        The output zip file. By default uses the name of the\n                        input. This overrides the git name option.\n  -a ADDITIONAL_FILES, --additional-file ADDITIONAL_FILES\n                        Additional files to be included in the zip. Additional\n                        files will be added according to their relative\n                        position to the WDL file. If that is not possible they\n                        will be added to the base of the zip. Multiple '-a'\n                        flags can be used.\n  --use-git-version-name\n                        Use git describe to determine the name of the zip.\n  --use-git-commit-timestamp\n                        Use the git commit timestamp to timestamp all the\n                        files in the zip.\n  --reproducible        shorthand for --use-git-version-name and --use-git-\n                        commit-timestamp\n  --version             show program's version number and exit\n</pre>\n</div>\n<div id=\"reproducibility\">\n<h2>Reproducibility</h2>\n<p>The internal process to create a reproducible package is as follows:</p>\n<ul>\n<li>It checks each file with <tt>git log <span class=\"pre\">--n1</span> <span class=\"pre\">--pretty=%at</span></tt> to get the unix\ntimestamp of the latest commit that affected that file.</li>\n<li>Each file is then copied to a temporary directory where the last modified\ntime is changed to the unix timestamp found in the first step.</li>\n<li>The list of files is then sorted by their destination path in the zip. The\nsorting ensures that the files will always be added in the same order.</li>\n<li>The timezone of the process is changed to UTC, as the timezone affects the\ntimestamp of the files in the zip archive.</li>\n<li>The files are added to the zip package in sorted order.</li>\n</ul>\n<p>The name for a reproducible package consists of</p>\n<ul>\n<li>The WDL file basename without <tt>.wdl</tt>.</li>\n<li>A version description by <tt>git describe <span class=\"pre\">--always</span></tt>.</li>\n<li>A <tt>.zip</tt> extension.</li>\n</ul>\n</div>\n<div id=\"known-issues\">\n<h2>Known issues</h2>\n<ul>\n<li>Old versions of <a href=\"https://github.com/broadinstitute/cromwell\" rel=\"nofollow\">Cromwell</a>\ncontain a bug that causes a crash when opening zip files with nested\ndirectories. This was fixed in cromwell version 49.</li>\n<li><tt><span class=\"pre\">http://</span></tt> imports are currently not supported. Wdl-packager could be an\nideal tool to fetch WDLs from the web and package their imports in such a\nway that they can be used locally. Unfortunately this requires rewriting the\nimport paths inside the WDL files before they are packaged. This is\nnon-trivial to implement and it may have unintentioned side effects.</li>\n<li>When packaging reproducibly the timezone of the python process needs to be\nchanged to \u2018UTC\u2019. Otherwise the last modified times in the zip will differ\nfor each timezone. This will affect all code run in the same process. This\ndoes not matter for wdl-packager itself, but it does matter for programs that\nuse wdl_packager as a library. Not using <tt>use_git_timestamps</tt> circumvents\nthis problem.</li>\n</ul>\n</div>\n\n          </div>"}, "last_serial": 6785807, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "0a492559ca7a33f746a7dc8f235d0019", "sha256": "4f5f0f805683b6671c9dfda5a91febd369d1a834960fe553528ef83b85dd7e6d"}, "downloads": -1, "filename": "wdl_packager-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "0a492559ca7a33f746a7dc8f235d0019", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 12057, "upload_time": "2020-03-10T15:33:34", "upload_time_iso_8601": "2020-03-10T15:33:34.110784Z", "url": "https://files.pythonhosted.org/packages/83/0c/a0f052b45fc1483fa47094a3b1ef12fb8db3b12a3e18e0b71a7e8ce42cbe/wdl_packager-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "29e3529c8557d910355e5482bbec1d8d", "sha256": "8cf66b5dc5ad345874e29e39dc3ad9ac618b8a9b6ab88c8dee1e4cf174d8afe6"}, "downloads": -1, "filename": "wdl-packager-1.0.0.tar.gz", "has_sig": false, "md5_digest": "29e3529c8557d910355e5482bbec1d8d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 8880, "upload_time": "2020-03-10T15:33:36", "upload_time_iso_8601": "2020-03-10T15:33:36.669028Z", "url": "https://files.pythonhosted.org/packages/d5/ec/09ba811aba78770cc9ebdb24064e87aa80104154dc98b6ab71bd64393d6a/wdl-packager-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "0a492559ca7a33f746a7dc8f235d0019", "sha256": "4f5f0f805683b6671c9dfda5a91febd369d1a834960fe553528ef83b85dd7e6d"}, "downloads": -1, "filename": "wdl_packager-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "0a492559ca7a33f746a7dc8f235d0019", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 12057, "upload_time": "2020-03-10T15:33:34", "upload_time_iso_8601": "2020-03-10T15:33:34.110784Z", "url": "https://files.pythonhosted.org/packages/83/0c/a0f052b45fc1483fa47094a3b1ef12fb8db3b12a3e18e0b71a7e8ce42cbe/wdl_packager-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "29e3529c8557d910355e5482bbec1d8d", "sha256": "8cf66b5dc5ad345874e29e39dc3ad9ac618b8a9b6ab88c8dee1e4cf174d8afe6"}, "downloads": -1, "filename": "wdl-packager-1.0.0.tar.gz", "has_sig": false, "md5_digest": "29e3529c8557d910355e5482bbec1d8d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 8880, "upload_time": "2020-03-10T15:33:36", "upload_time_iso_8601": "2020-03-10T15:33:36.669028Z", "url": "https://files.pythonhosted.org/packages/d5/ec/09ba811aba78770cc9ebdb24064e87aa80104154dc98b6ab71bd64393d6a/wdl-packager-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:31:39 2020"}