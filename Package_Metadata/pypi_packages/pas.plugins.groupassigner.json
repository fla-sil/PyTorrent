{"info": {"author": "Riccardo Lemmi", "author_email": "riccardo@reflab.com", "bugtrack_url": null, "classifiers": ["Framework :: Plone", "Intended Audience :: Developers", "License :: OSI Approved :: GNU General Public License (GPL)", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "Introduction\n============\n\n    The plugin creates a virtual group and helps to assign this group to\n    users by evaluation of a TALES expression.\n\nInstallation\n============\n\n    Buildout\n\n      See docs/INSTALL.txt\n\n    Plone Site\n\n      - Go in the site acl_users then add \"Group Assigner\"\n      - Set the properties: group id, group title and the condition\n        (see below for the meaning of 'debug')\n      - Activate all the functionalities provided by the plugin\n\nNotes\n=====\n\n    The expression is based only on principal methods and attributes.\n    It is not possible to assign the group on context base.\n\n    Variable available are:\n\n        principal\n        portal\n        nothing\n        modules\n\n    From 'principal' you can use the 'getProperty' method to use in your\n    expression. For example:\n\n      python: principal.getProperty('email').split('@')[-1] in ['reflab.com',]\n\n    To assign more than one group you have to add one plugin for each group.\n\n    To cache the plugin add a RAMCache manager and assign the plugin to him.\n    If the plugin is cached remember to invalidate the cache when changing\n    properties.\n\n    You can activate the 'debug' properties to log the evaluation of the\n    expression (in this case don't use cache).\n\nOther infos\n===========\n\n    Questions and comments to riccardo@reflab.com\n\n    Report bugs at riccardo@reflab.com\n\n    Code repository: http://svn.plone.org/svn/collective/PASPlugins/pas.plugins.groupassigner\n\nChange history\n**************\n\n1.0 (2010-07-02)\n----------------\n\n- Released plugin\n\nDetailed Documentation\n**********************\n\nTests for pas.plugins.groupassigner\n\nTest setup\n----------\n\n    >>> from Testing.ZopeTestCase import user_password\n    >>> from Products.Five.testbrowser import Browser\n    >>> browser = Browser()\n\nPlugin setup\n------------\n\n    >>> acl_users_url = \"%s/acl_users\" % self.portal.absolute_url()\n    >>> browser.addHeader('Authorization', 'Basic %s:%s' % ('portal_owner', user_password))\n\n    >>> self.portal.acl_users.userFolderAddUser('test_user_2_', 'secret', ['Member'], [])\n    >>> u1 = self.portal.acl_users.getUserById('test_user_1_')\n    >>> gtool = self.portal.portal_groups\n    >>> gtool.addGroup('group1', ())\n    True\n\npas.plugins.groupassigner should be in the list of installable plugins:\n\n    >>> browser.open(\"%s/manage_main\" % acl_users_url)\n    >>> browser.url\n    'http://nohost/plone/acl_users/manage_main'\n    >>> form = browser.getForm(index=0)\n    >>> select = form.getControl(name=':action')\n\n    >>> 'Group Assigner' in select.displayOptions\n    True\n\nand we can select it:\n\n    >>> select.getControl('Group Assigner').click()\n    >>> select.displayValue\n    ['Group Assigner']\n    >>> select.value\n    ['manage_addProduct/pas.plugins.groupassigner/manage_add_groupassigner_form']\n\nwe add 'Group Assigner' to acl_users:\n\n    >>> from pas.plugins.groupassigner.plugin import GroupAssigner\n    >>> assigner = GroupAssigner('group_assigner_test', 'Group Assigner')\n    >>> assigner.group = 'group1'\n    >>> assigner.condition = \"python: 'reflab.com' in principal.getProperty('email')\"\n    >>> self.portal.acl_users['group_assigner_test'] = assigner\n    >>> assigner = self.portal.acl_users['group_assigner_test']\n\nNow the tests:\n\n    >>> assigner.getGroupsForPrincipal(u1)\n    ()\n    >>> assigner.getGroupMembers('group1')\n    ()\n    >>> u1.setProperties(email='u1@reflab.com')\n    >>> assigner.getGroupsForPrincipal(u1)\n    ('group1',)\n    >>> assigner.getGroupMembers('group1')\n    ()\n\n    >>> assigner.enumerateGroups()\n    [{'pluginid': 'group_assigner_test', 'title': 'Group Assigner', 'id': 'group1', 'groupid': 'group1'}]\n    >>> assigner.enumerateGroups(id='group1')\n    [{'pluginid': 'group_assigner_test', 'title': 'Group Assigner', 'id': 'group1', 'groupid': 'group1'}]\n    >>> assigner.enumerateGroups(id='groupX')\n    []\n\nContributors\n************\n\nRiccardo Lemmi, Reflab Srl", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://www.reflab.com", "keywords": "", "license": "GPL", "maintainer": null, "maintainer_email": null, "name": "pas.plugins.groupassigner", "package_url": "https://pypi.org/project/pas.plugins.groupassigner/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/pas.plugins.groupassigner/", "project_urls": {"Download": "UNKNOWN", "Homepage": "http://www.reflab.com"}, "release_url": "https://pypi.org/project/pas.plugins.groupassigner/1.0/", "requires_dist": null, "requires_python": null, "summary": "Assign a group to user based on an expression.", "version": "1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"introduction\">\n<h2>Introduction</h2>\n<blockquote>\nThe plugin creates a virtual group and helps to assign this group to\nusers by evaluation of a TALES expression.</blockquote>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<blockquote>\n<p>Buildout</p>\n<blockquote>\nSee docs/INSTALL.txt</blockquote>\n<p>Plone Site</p>\n<blockquote>\n<ul>\n<li>Go in the site acl_users then add \u201cGroup Assigner\u201d</li>\n<li>Set the properties: group id, group title and the condition\n(see below for the meaning of \u2018debug\u2019)</li>\n<li>Activate all the functionalities provided by the plugin</li>\n</ul>\n</blockquote>\n</blockquote>\n</div>\n<div id=\"notes\">\n<h2>Notes</h2>\n<blockquote>\n<p>The expression is based only on principal methods and attributes.\nIt is not possible to assign the group on context base.</p>\n<p>Variable available are:</p>\n<blockquote>\nprincipal\nportal\nnothing\nmodules</blockquote>\n<p>From \u2018principal\u2019 you can use the \u2018getProperty\u2019 method to use in your\nexpression. For example:</p>\n<blockquote>\npython: principal.getProperty(\u2018email\u2019).split(\u2018@\u2019)[-1] in [\u2018reflab.com\u2019,]</blockquote>\n<p>To assign more than one group you have to add one plugin for each group.</p>\n<p>To cache the plugin add a RAMCache manager and assign the plugin to him.\nIf the plugin is cached remember to invalidate the cache when changing\nproperties.</p>\n<p>You can activate the \u2018debug\u2019 properties to log the evaluation of the\nexpression (in this case don\u2019t use cache).</p>\n</blockquote>\n</div>\n<div id=\"other-infos\">\n<h2>Other infos</h2>\n<blockquote>\n<p>Questions and comments to <a href=\"mailto:riccardo%40reflab.com\">riccardo<span>@</span>reflab<span>.</span>com</a></p>\n<p>Report bugs at <a href=\"mailto:riccardo%40reflab.com\">riccardo<span>@</span>reflab<span>.</span>com</a></p>\n<p>Code repository: <a href=\"http://svn.plone.org/svn/collective/PASPlugins/pas.plugins.groupassigner\" rel=\"nofollow\">http://svn.plone.org/svn/collective/PASPlugins/pas.plugins.groupassigner</a></p>\n</blockquote>\n<div id=\"change-history\">\n<h3>Change history</h3>\n<h3 id=\"id1\"><span class=\"section-subtitle\">1.0 (2010-07-02)</span></h3>\n<ul>\n<li>Released plugin</li>\n</ul>\n</div>\n<div id=\"detailed-documentation\">\n<h3>Detailed Documentation</h3>\n<p>Tests for pas.plugins.groupassigner</p>\n<div id=\"test-setup\">\n<h4>Test setup</h4>\n<blockquote>\n<pre>&gt;&gt;&gt; from Testing.ZopeTestCase import user_password\n&gt;&gt;&gt; from Products.Five.testbrowser import Browser\n&gt;&gt;&gt; browser = Browser()\n</pre>\n</blockquote>\n</div>\n<div id=\"plugin-setup\">\n<h4>Plugin setup</h4>\n<blockquote>\n<pre>&gt;&gt;&gt; acl_users_url = \"%s/acl_users\" % self.portal.absolute_url()\n&gt;&gt;&gt; browser.addHeader('Authorization', 'Basic %s:%s' % ('portal_owner', user_password))\n</pre>\n<pre>&gt;&gt;&gt; self.portal.acl_users.userFolderAddUser('test_user_2_', 'secret', ['Member'], [])\n&gt;&gt;&gt; u1 = self.portal.acl_users.getUserById('test_user_1_')\n&gt;&gt;&gt; gtool = self.portal.portal_groups\n&gt;&gt;&gt; gtool.addGroup('group1', ())\nTrue\n</pre>\n</blockquote>\n<p>pas.plugins.groupassigner should be in the list of installable plugins:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; browser.open(\"%s/manage_main\" % acl_users_url)\n&gt;&gt;&gt; browser.url\n'http://nohost/plone/acl_users/manage_main'\n&gt;&gt;&gt; form = browser.getForm(index=0)\n&gt;&gt;&gt; select = form.getControl(name=':action')\n</pre>\n<pre>&gt;&gt;&gt; 'Group Assigner' in select.displayOptions\nTrue\n</pre>\n</blockquote>\n<p>and we can select it:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; select.getControl('Group Assigner').click()\n&gt;&gt;&gt; select.displayValue\n['Group Assigner']\n&gt;&gt;&gt; select.value\n['manage_addProduct/pas.plugins.groupassigner/manage_add_groupassigner_form']\n</pre>\n</blockquote>\n<p>we add \u2018Group Assigner\u2019 to acl_users:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; from pas.plugins.groupassigner.plugin import GroupAssigner\n&gt;&gt;&gt; assigner = GroupAssigner('group_assigner_test', 'Group Assigner')\n&gt;&gt;&gt; assigner.group = 'group1'\n&gt;&gt;&gt; assigner.condition = \"python: 'reflab.com' in principal.getProperty('email')\"\n&gt;&gt;&gt; self.portal.acl_users['group_assigner_test'] = assigner\n&gt;&gt;&gt; assigner = self.portal.acl_users['group_assigner_test']\n</pre>\n</blockquote>\n<p>Now the tests:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; assigner.getGroupsForPrincipal(u1)\n()\n&gt;&gt;&gt; assigner.getGroupMembers('group1')\n()\n&gt;&gt;&gt; u1.setProperties(email='u1@reflab.com')\n&gt;&gt;&gt; assigner.getGroupsForPrincipal(u1)\n('group1',)\n&gt;&gt;&gt; assigner.getGroupMembers('group1')\n()\n</pre>\n<pre>&gt;&gt;&gt; assigner.enumerateGroups()\n[{'pluginid': 'group_assigner_test', 'title': 'Group Assigner', 'id': 'group1', 'groupid': 'group1'}]\n&gt;&gt;&gt; assigner.enumerateGroups(id='group1')\n[{'pluginid': 'group_assigner_test', 'title': 'Group Assigner', 'id': 'group1', 'groupid': 'group1'}]\n&gt;&gt;&gt; assigner.enumerateGroups(id='groupX')\n[]\n</pre>\n</blockquote>\n</div>\n</div>\n<div id=\"contributors\">\n<h3>Contributors</h3>\n<p>Riccardo Lemmi, Reflab Srl</p>\n</div>\n</div>\n\n          </div>"}, "last_serial": 796034, "releases": {"1.0": [{"comment_text": "", "digests": {"md5": "9c44a719c6eb8a265645424047d15aad", "sha256": "5761644fefead87555d51e1de84ccd6bddd3d3c890a947cd2e5fe14371e3ed75"}, "downloads": -1, "filename": "pas.plugins.groupassigner-1.0.tar.gz", "has_sig": false, "md5_digest": "9c44a719c6eb8a265645424047d15aad", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14277, "upload_time": "2010-07-02T18:15:32", "upload_time_iso_8601": "2010-07-02T18:15:32.753725Z", "url": "https://files.pythonhosted.org/packages/86/26/5d41ec5188a8a4d4cde83d209fc17c477cdd06ade8df1fe348e1db7f96e8/pas.plugins.groupassigner-1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "9c44a719c6eb8a265645424047d15aad", "sha256": "5761644fefead87555d51e1de84ccd6bddd3d3c890a947cd2e5fe14371e3ed75"}, "downloads": -1, "filename": "pas.plugins.groupassigner-1.0.tar.gz", "has_sig": false, "md5_digest": "9c44a719c6eb8a265645424047d15aad", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14277, "upload_time": "2010-07-02T18:15:32", "upload_time_iso_8601": "2010-07-02T18:15:32.753725Z", "url": "https://files.pythonhosted.org/packages/86/26/5d41ec5188a8a4d4cde83d209fc17c477cdd06ade8df1fe348e1db7f96e8/pas.plugins.groupassigner-1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:58:09 2020"}