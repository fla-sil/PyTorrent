{"info": {"author": "Ask Solem", "author_email": "ask@celeryproject.org", "bugtrack_url": null, "classifiers": ["Development Status :: 2 - Pre-Alpha", "License :: OSI Approved :: BSD License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: Implementation :: CPython", "Programming Language :: Python :: Implementation :: Jython", "Programming Language :: Python :: Implementation :: PyPy"], "description": "=====================================================================\n Cyanide - Celery stress testing and integration test support.\n=====================================================================\n\n|build-status| |coverage| |license| |wheel| |pyversion| |pyimp|\n\n:Version: 1.3.0\n:Web: https://cyanide.readthedocs.io/\n:Download: http://pypi.python.org/pypi/cyanide/\n:Source: http://github.com/celery/cyanide/\n:Keywords: celery, stress, integration, functional, testing\n\n.. contents::\n    :local:\n\nIntroduction\n============\n\nThis stress test suite will attempt to break the Celery worker in different\nways, and can also be used to write new stress test suites for projects\ndepending on Celery infrastructure.\n\nThe worker must currently be started separately, and it's encouraged\nto repeat the suite using workers started with different configuration values.\n\nIdeas include:\n\n#. Default, single process:\n    ::\n\n        $ celery -A cyanide worker -c 1\n\n#. Default, multiple processes:\n    ::\n\n        $ celery -A cyanide worker -c 8\n\n#.  Frequent ``maxtasksperchild`` recycling, single child process:\n    ::\n\n        $ celery -A cyanide worker -c 1 --maxtasksperchild=1\n\n#. Frequent autoscale scale down & ``maxtasksperchild``, single child process:\n    ::\n\n        $ AUTOSCALE_KEEPALIVE=0.01 celery -A cyanide worker \\\n        >   --autoscale=1,0 --maxtasksperchild=1\n\n#. Frequent ``maxtasksperchild``, multiple child processes:\n    ::\n\n        $ celery -A cyanide worker -c 8 --maxtasksperchild=1\n\n#. Processes terminated by time limits:\n    ::\n\n        $ celery -A cyanide worker --time-limit=1\n\n#. Frequent ``maxtasksperchild``, single child process with late ack:\n    ::\n\n        $ celery -A cyanide worker -c1 --maxtasksperchild=1 -Z acks_late\n\n#. Worker using the ``eventlet`` pool:\n\n    Start the worker, here having a thousand green-threads:\n    ::\n\n            $ celery -A cyanide worker -c1000 -P eventlet\n\n    You must activate the `green` test group when starting the test suite:\n    ::\n\n        $ celery cyanide -g green\n\n#. Worker using the ``gevent`` pool:\n\n    Start the worker, here having a thousand green-threads:\n    ::\n\n            $ celery -A cyanide worker -c1000 -P gevent\n\n    You must activate the `green` test group when starting the test suite:\n    ::\n\n        $ celery cyanide -g green\n\nTips\n====\n\nIt's a good idea to include the ``--purge <celery worker --purge>``\nargument to clear out tasks from previous runs.\n\nNote that the stress client will probably hang if the test fails, so this\ntest suite is currently not suited for automatic runs.\n\nConfiguration Templates\n=======================\n\nYou can select a configuration template using the `-Z` command-line argument\nto any ``celery -A cyanide`` command or the ``celery cyanide``\ncommand used to execute the test suite.\n\nThe templates available are:\n\n* ``default``\n\n    Using AMQP as a broker, RPC as a result backend,\n    and using JSON serialization for task and result messages.\n\n    Both broker and result store is expected to run at localhost.\n\n* ``vagrant1``\n\n    Use the VM started by ``celery vagrant up`` as the broker\n    and result backend (RabbitMQ).\n\n* ``vagrant1_redis``\n\n    Use the VM started by ``celery vagrant up`` as the broker\n    and result backend (Redis).\n\n* ``redis``\n\n    Using Redis as a broker and result backend.\n\n* ``redistore``\n\n    Using Redis as a result backend only.\n\n* ``acks_late``\n\n    Enables late ack globally.\n\n* ``pickle``\n\n    Using pickle as the serializer for tasks and results\n    (also allowing the worker to receive and process pickled messages)\n\n* ``confirms``\n\n    Enables RabbitMQ publisher confirmations.\n\n* ``events``\n\n    Configure workers to send task events.\n\n* ``proto1``\n\n    Use version 1 of the task message protocol (pre 4.0)\n\nYou can see the resulting configuration from any template by running\nthe command:\n::\n\n    $ celery -A cyanide report -Z redis\n\nExamples\n--------\n\nExample running the stress test using the ``redis`` configuration template:\n::\n\n    $ cyanide -Z redis\n\nExample running the worker using the ``redis`` configuration template:\n::\n\n    $ celery -A cyanide worker -Z redis\n\nYou can also mix several templates by providing a comma-separated list:\n::\n\n    $ celery -A cyanide worker -Z redis,acks_late\n\nIn this example (``redis,acks_late``) the ``redis`` template will be used\nas main configuration, and then the additional keys from the ``acks_late`` template\nwill be merged as changes.\n\nTest Suite Options\n==================\n\nAfter one or more worker instances are running, you can start executing the\ntests.\n\nBy default the complete test suite will be executed:\n::\n\n    $ celery cyanide\n\nYou can also specify what test cases to run by providing one or more names\nas arguments:\n::\n\n    $ celery cyanide revoketermfast revoketermslow\n\nA full list of test case names can be retrieved with the\n``-l <celery cyanide -l>`` switch:\n::\n\n    $ celery cyanide -l\n    .> 1) chain,\n    .> 2) chaincomplex,\n    .> 3) parentids_chain,\n    .> 4) parentids_group,\n    .> 5) manyshort,\n    .> 6) unicodetask,\n    .> 7) always_timeout,\n    .> 8) termbysig,\n    .> 9) timelimits,\n    .> 10) timelimits_soft,\n    .> 11) alwayskilled,\n    .> 12) alwaysexits,\n    .> 13) bigtasksbigvalue,\n    .> 14) bigtasks,\n    .> 15) smalltasks,\n    .> 16) revoketermfast,\n    .> 17) revoketermslow\n\nYou can also start from an offset within this list, e.g. to skip the first two\ntests use ``--offset=2 <celery cyanide --offset>``:\n::\n\n    $ celery cyanide --offset=2\n\nSee ``celery cyanide --help`` for a list of all available\ncommand-line options.\n\nVagrant\n=======\n\nStarting\n--------\n\nCyanide ships with a complete virtual machine solution to run your tests.\nThe image ships with Celery, Cyanide, RabbitMQ and Redis and can be deployed\nsimply by running the ``celery vagrant`` command:\n::\n\n    $ celery vagrant up\n\n\nThe IP address of the new virtual machine will be 192.168.33.123,\nand you can easily tell both the worker and cyanide test suite to use\nit by specifying the ``vagrant1`` (RabbitMQ) or ``vagrant1_redis`` templates:\n::\n\n    $ celery -A worker -Z vagrant1\n    $ celery cyanide -Z vagrant1\n\nSSH\n---\n\nTo open an SSH session with the virtual machine after starting\nwith ``celery vagrant up`` do:\n::\n\n    $ ssh $(celery vagrant sshargs)\n\nStopping\n--------\n\nTo shutdown the virtual machine run the command:\n::\n\n    $ celery vagrant halt\n\nTo destroy the instance run the command:\n::\n\n    $ celery vagrant destroy\n\n\n.. note::\n\n    To completely wipe your instance you need to remove the\n    ``.vagrant`` directory.\n\n    The location of this directory can be retrieved by executing\n    the following:\n    ::\n\n        $ celery vagrant statedir\n        /opt/devel/cyanide/cyanide/vagrant/.vagrant\n\n    You can combine this with ``rm`` to force removal of this\n    directory:\n    ::\n\n        $ rm -rf $(celery vagrant statedir)\n\nEnvironment Variables\n=====================\n\n``CYANIDE_TRANS``\n-----------------\n\nIf the ``CYANIDE_TRANS`` environment variable is set\nthe stress test suite will use transient task messages instead of persisting\nmessages to disk.\n\nTo avoid declaration collision the ``cstress.trans`` queue name will be used\nwhen this option is enabled.\n\n``CYANIDE_BROKER``\n------------------\n\nYou can set the ``CYANIDE_BROKER`` environment variable\nto change the default broker used:\n::\n\n    $ CYANIDE_BROKER='amqp://' celery -A cyanide worker # ...\n    $ CYANIDE_BROKER='amqp://' celery cyanide\n\n``CYANIDE_BACKEND``\n-------------------\n\nYou can set the ``CYANIDE_BACKEND`` environment variable to change\nthe result backend used:\n::\n\n    $ CYANIDE_BACKEND='amqp://' celery -A cyanide worker # ...\n    $ CYANIDE_BACKEND='amqp://' celery cyanide\n\n``CYANIDE_QUEUE``\n-----------------\n\nA queue named ``c.stress`` is created and used by default for all task\ncommunication.\n\nYou can change the name of this queue using the ``CYANIDE_QUEUE``\nenvironment variable:\n::\n\n    $ CYANIDE_QUEUE='cyanide' celery -A cyanide worker # ...\n    $ CYANIDE_QUEUE='cyanide' celery cyanide\n\n``CYANIDE_PREFETCH``\n--------------------\n\nThe ``CYANIDE_PREFETCH`` environment variable sets the default prefetch\nmultiplier (default value is 10).\n\n``AWS_REGION``\n--------------\n\nThe ``AWS_REGION`` environment variable changes the Amazon AWS region\nto something other than the default ``us-east-1``, to be used with the\n``sqs`` template.\n\n\nCustom Suites\n=============\n\nYou can define custom suites (look at source code of\n``cyanide.suites.default`` for inspiration), and tell cyanide to use that\nsuite by specifying the ``celery cyanide -S`` option:\n::\n\n    $ celery cyanide -S proj.funtests:MySuite\n\n.. _installation:\n\nInstallation\n============\n\nYou can install cyanide either via the Python Package Index (PyPI)\nor from source.\n\nTo install using `pip`:\n::\n\n    $ pip install -U cyanide\n\n.. _installing-from-source:\n\nDownloading and installing from source\n--------------------------------------\n\nDownload the latest version of cyanide from\nhttp://pypi.python.org/pypi/cyanide\n\nYou can install it by doing the following:\n::\n\n    $ tar xvfz cyanide-0.0.0.tar.gz\n    $ cd cyanide-0.0.0\n    $ python setup.py build\n    # python setup.py install\n\nThe last command must be executed as a privileged user if\nyou are not currently using a virtualenv.\n\n.. _installing-from-git:\n\nUsing the development version\n-----------------------------\n\nWith pip\n~~~~~~~~\n\nYou can install the latest snapshot of cyanide using the following\npip command:\n::\n\n    $ pip install https://github.com/celery/cyanide/zipball/master#egg=cyanide\n\n.. |build-status| image:: https://secure.travis-ci.org/celery/cyanide.png?branch=master\n    :alt: Build status\n    :target: https://travis-ci.org/celery/cyanide\n\n.. |coverage| image:: https://codecov.io/github/celery/cyanide/coverage.svg?branch=master\n    :target: https://codecov.io/github/celery/cyanide?branch=master\n\n.. |license| image:: https://img.shields.io/pypi/l/cyanide.svg\n    :alt: BSD License\n    :target: https://opensource.org/licenses/BSD-3-Clause\n\n.. |wheel| image:: https://img.shields.io/pypi/wheel/cyanide.svg\n    :alt: Cyanide can be installed via wheel\n    :target: http://pypi.python.org/pypi/cyanide/\n\n.. |pyversion| image:: https://img.shields.io/pypi/pyversions/cyanide.svg\n    :alt: Supported Python versions.\n    :target: http://pypi.python.org/pypi/cyanide/\n\n.. |pyimp| image:: https://img.shields.io/pypi/implementation/cyanide.svg\n    :alt: Support Python implementations.\n    :target: http://pypi.python.org/pypi/cyanide/", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/celery/cyanide", "keywords": "celery integration test suite", "license": "BSD", "maintainer": null, "maintainer_email": null, "name": "cyanide", "package_url": "https://pypi.org/project/cyanide/", "platform": "any", "project_url": "https://pypi.org/project/cyanide/", "project_urls": {"Download": "UNKNOWN", "Homepage": "https://github.com/celery/cyanide"}, "release_url": "https://pypi.org/project/cyanide/1.3.0/", "requires_dist": null, "requires_python": null, "summary": "Celery stress testing and integration test support.", "version": "1.3.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://travis-ci.org/celery/cyanide\" rel=\"nofollow\"><img alt=\"Build status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0ba20ec85db67d3224fa65d8bb72ef67ea565a87/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f63656c6572792f6379616e6964652e706e673f6272616e63683d6d6173746572\"></a> <a href=\"https://codecov.io/github/celery/cyanide?branch=master\" rel=\"nofollow\"><img alt=\"coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/92406f7aeb5e37bb2387260ac6f86f7518e0b9af/68747470733a2f2f636f6465636f762e696f2f6769746875622f63656c6572792f6379616e6964652f636f7665726167652e7376673f6272616e63683d6d6173746572\"></a> <a href=\"https://opensource.org/licenses/BSD-3-Clause\" rel=\"nofollow\"><img alt=\"BSD License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d7c9ec6d33ef3c00ba30230bce465763a89b47de/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f6379616e6964652e737667\"></a> <a href=\"http://pypi.python.org/pypi/cyanide/\" rel=\"nofollow\"><img alt=\"Cyanide can be installed via wheel\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f7335d385c69660df4ffbea591a62d76b8978f70/68747470733a2f2f696d672e736869656c64732e696f2f707970692f776865656c2f6379616e6964652e737667\"></a> <a href=\"http://pypi.python.org/pypi/cyanide/\" rel=\"nofollow\"><img alt=\"Supported Python versions.\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/414958bc7900ef77f194dddfc42c32beed374987/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f6379616e6964652e737667\"></a> <a href=\"http://pypi.python.org/pypi/cyanide/\" rel=\"nofollow\"><img alt=\"Support Python implementations.\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fd0ddb2a95a91a3dad7455f2390ca357a0366e0a/68747470733a2f2f696d672e736869656c64732e696f2f707970692f696d706c656d656e746174696f6e2f6379616e6964652e737667\"></a></p>\n<table>\n<col>\n<col>\n<tbody>\n<tr><th>Version:</th><td>1.3.0</td>\n</tr>\n<tr><th>Web:</th><td><a href=\"https://cyanide.readthedocs.io/\" rel=\"nofollow\">https://cyanide.readthedocs.io/</a></td>\n</tr>\n<tr><th>Download:</th><td><a href=\"http://pypi.python.org/pypi/cyanide/\" rel=\"nofollow\">http://pypi.python.org/pypi/cyanide/</a></td>\n</tr>\n<tr><th>Source:</th><td><a href=\"http://github.com/celery/cyanide/\" rel=\"nofollow\">http://github.com/celery/cyanide/</a></td>\n</tr>\n<tr><th>Keywords:</th><td>celery, stress, integration, functional, testing</td>\n</tr>\n</tbody>\n</table>\n<div id=\"contents\">\n<ul>\n<li><a href=\"#introduction\" id=\"id2\" rel=\"nofollow\">Introduction</a></li>\n<li><a href=\"#tips\" id=\"id3\" rel=\"nofollow\">Tips</a></li>\n<li><a href=\"#configuration-templates\" id=\"id4\" rel=\"nofollow\">Configuration Templates</a><ul>\n<li><a href=\"#examples\" id=\"id5\" rel=\"nofollow\">Examples</a></li>\n</ul>\n</li>\n<li><a href=\"#test-suite-options\" id=\"id6\" rel=\"nofollow\">Test Suite Options</a></li>\n<li><a href=\"#vagrant\" id=\"id7\" rel=\"nofollow\">Vagrant</a><ul>\n<li><a href=\"#starting\" id=\"id8\" rel=\"nofollow\">Starting</a></li>\n<li><a href=\"#ssh\" id=\"id9\" rel=\"nofollow\">SSH</a></li>\n<li><a href=\"#stopping\" id=\"id10\" rel=\"nofollow\">Stopping</a></li>\n</ul>\n</li>\n<li><a href=\"#environment-variables\" id=\"id11\" rel=\"nofollow\">Environment Variables</a><ul>\n<li><a href=\"#cyanide-trans\" id=\"id12\" rel=\"nofollow\"><tt>CYANIDE_TRANS</tt></a></li>\n<li><a href=\"#cyanide-broker\" id=\"id13\" rel=\"nofollow\"><tt>CYANIDE_BROKER</tt></a></li>\n<li><a href=\"#cyanide-backend\" id=\"id14\" rel=\"nofollow\"><tt>CYANIDE_BACKEND</tt></a></li>\n<li><a href=\"#cyanide-queue\" id=\"id15\" rel=\"nofollow\"><tt>CYANIDE_QUEUE</tt></a></li>\n<li><a href=\"#cyanide-prefetch\" id=\"id16\" rel=\"nofollow\"><tt>CYANIDE_PREFETCH</tt></a></li>\n<li><a href=\"#aws-region\" id=\"id17\" rel=\"nofollow\"><tt>AWS_REGION</tt></a></li>\n</ul>\n</li>\n<li><a href=\"#custom-suites\" id=\"id18\" rel=\"nofollow\">Custom Suites</a></li>\n<li><a href=\"#id1\" id=\"id19\" rel=\"nofollow\">Installation</a><ul>\n<li><a href=\"#downloading-and-installing-from-source\" id=\"id20\" rel=\"nofollow\">Downloading and installing from source</a></li>\n<li><a href=\"#using-the-development-version\" id=\"id21\" rel=\"nofollow\">Using the development version</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<div id=\"introduction\">\n<h2><a href=\"#id2\" rel=\"nofollow\">Introduction</a></h2>\n<p>This stress test suite will attempt to break the Celery worker in different\nways, and can also be used to write new stress test suites for projects\ndepending on Celery infrastructure.</p>\n<p>The worker must currently be started separately, and it\u2019s encouraged\nto repeat the suite using workers started with different configuration values.</p>\n<p>Ideas include:</p>\n<ol>\n<li><dl>\n<dt>Default, single process:</dt>\n<dd><pre>$ celery -A cyanide worker -c 1\n</pre>\n</dd>\n</dl>\n</li>\n<li><dl>\n<dt>Default, multiple processes:</dt>\n<dd><pre>$ celery -A cyanide worker -c 8\n</pre>\n</dd>\n</dl>\n</li>\n<li><p>Frequent <tt>maxtasksperchild</tt> recycling, single child process:</p>\n<pre>$ celery -A cyanide worker -c 1 --maxtasksperchild=1\n</pre>\n</li>\n<li><dl>\n<dt>Frequent autoscale scale down &amp; <tt>maxtasksperchild</tt>, single child process:</dt>\n<dd><pre>$ AUTOSCALE_KEEPALIVE=0.01 celery -A cyanide worker \\\n&gt;   --autoscale=1,0 --maxtasksperchild=1\n</pre>\n</dd>\n</dl>\n</li>\n<li><dl>\n<dt>Frequent <tt>maxtasksperchild</tt>, multiple child processes:</dt>\n<dd><pre>$ celery -A cyanide worker -c 8 --maxtasksperchild=1\n</pre>\n</dd>\n</dl>\n</li>\n<li><dl>\n<dt>Processes terminated by time limits:</dt>\n<dd><pre>$ celery -A cyanide worker --time-limit=1\n</pre>\n</dd>\n</dl>\n</li>\n<li><dl>\n<dt>Frequent <tt>maxtasksperchild</tt>, single child process with late ack:</dt>\n<dd><pre>$ celery -A cyanide worker -c1 --maxtasksperchild=1 -Z acks_late\n</pre>\n</dd>\n</dl>\n</li>\n<li><p>Worker using the <tt>eventlet</tt> pool:</p>\n<blockquote>\n<p>Start the worker, here having a thousand green-threads:</p>\n<pre>$ celery -A cyanide worker -c1000 -P eventlet\n</pre>\n<p>You must activate the <cite>green</cite> test group when starting the test suite:</p>\n<pre>$ celery cyanide -g green\n</pre>\n</blockquote>\n</li>\n<li><p>Worker using the <tt>gevent</tt> pool:</p>\n<blockquote>\n<p>Start the worker, here having a thousand green-threads:</p>\n<pre>$ celery -A cyanide worker -c1000 -P gevent\n</pre>\n<p>You must activate the <cite>green</cite> test group when starting the test suite:</p>\n<pre>$ celery cyanide -g green\n</pre>\n</blockquote>\n</li>\n</ol>\n</div>\n<div id=\"tips\">\n<h2><a href=\"#id3\" rel=\"nofollow\">Tips</a></h2>\n<p>It\u2019s a good idea to include the <tt><span class=\"pre\">--purge</span> &lt;celery worker <span class=\"pre\">--purge&gt;</span></tt>\nargument to clear out tasks from previous runs.</p>\n<p>Note that the stress client will probably hang if the test fails, so this\ntest suite is currently not suited for automatic runs.</p>\n</div>\n<div id=\"configuration-templates\">\n<h2><a href=\"#id4\" rel=\"nofollow\">Configuration Templates</a></h2>\n<p>You can select a configuration template using the <cite>-Z</cite> command-line argument\nto any <tt>celery <span class=\"pre\">-A</span> cyanide</tt> command or the <tt>celery cyanide</tt>\ncommand used to execute the test suite.</p>\n<p>The templates available are:</p>\n<ul>\n<li><p><tt>default</tt></p>\n<blockquote>\n<p>Using AMQP as a broker, RPC as a result backend,\nand using JSON serialization for task and result messages.</p>\n<p>Both broker and result store is expected to run at localhost.</p>\n</blockquote>\n</li>\n<li><p><tt>vagrant1</tt></p>\n<blockquote>\n<p>Use the VM started by <tt>celery vagrant up</tt> as the broker\nand result backend (RabbitMQ).</p>\n</blockquote>\n</li>\n<li><p><tt>vagrant1_redis</tt></p>\n<blockquote>\n<p>Use the VM started by <tt>celery vagrant up</tt> as the broker\nand result backend (Redis).</p>\n</blockquote>\n</li>\n<li><p><tt>redis</tt></p>\n<blockquote>\n<p>Using Redis as a broker and result backend.</p>\n</blockquote>\n</li>\n<li><p><tt>redistore</tt></p>\n<blockquote>\n<p>Using Redis as a result backend only.</p>\n</blockquote>\n</li>\n<li><p><tt>acks_late</tt></p>\n<blockquote>\n<p>Enables late ack globally.</p>\n</blockquote>\n</li>\n<li><p><tt>pickle</tt></p>\n<blockquote>\n<p>Using pickle as the serializer for tasks and results\n(also allowing the worker to receive and process pickled messages)</p>\n</blockquote>\n</li>\n<li><p><tt>confirms</tt></p>\n<blockquote>\n<p>Enables RabbitMQ publisher confirmations.</p>\n</blockquote>\n</li>\n<li><p><tt>events</tt></p>\n<blockquote>\n<p>Configure workers to send task events.</p>\n</blockquote>\n</li>\n<li><p><tt>proto1</tt></p>\n<blockquote>\n<p>Use version 1 of the task message protocol (pre 4.0)</p>\n</blockquote>\n</li>\n</ul>\n<p>You can see the resulting configuration from any template by running\nthe command:</p>\n<pre>$ celery -A cyanide report -Z redis\n</pre>\n<div id=\"examples\">\n<h3><a href=\"#id5\" rel=\"nofollow\">Examples</a></h3>\n<p>Example running the stress test using the <tt>redis</tt> configuration template:</p>\n<pre>$ cyanide -Z redis\n</pre>\n<p>Example running the worker using the <tt>redis</tt> configuration template:</p>\n<pre>$ celery -A cyanide worker -Z redis\n</pre>\n<p>You can also mix several templates by providing a comma-separated list:</p>\n<pre>$ celery -A cyanide worker -Z redis,acks_late\n</pre>\n<p>In this example (<tt>redis,acks_late</tt>) the <tt>redis</tt> template will be used\nas main configuration, and then the additional keys from the <tt>acks_late</tt> template\nwill be merged as changes.</p>\n</div>\n</div>\n<div id=\"test-suite-options\">\n<h2><a href=\"#id6\" rel=\"nofollow\">Test Suite Options</a></h2>\n<p>After one or more worker instances are running, you can start executing the\ntests.</p>\n<p>By default the complete test suite will be executed:</p>\n<pre>$ celery cyanide\n</pre>\n<p>You can also specify what test cases to run by providing one or more names\nas arguments:</p>\n<pre>$ celery cyanide revoketermfast revoketermslow\n</pre>\n<p>A full list of test case names can be retrieved with the\n<tt><span class=\"pre\">-l</span> &lt;celery cyanide <span class=\"pre\">-l&gt;</span></tt> switch:</p>\n<pre>$ celery cyanide -l\n.&gt; 1) chain,\n.&gt; 2) chaincomplex,\n.&gt; 3) parentids_chain,\n.&gt; 4) parentids_group,\n.&gt; 5) manyshort,\n.&gt; 6) unicodetask,\n.&gt; 7) always_timeout,\n.&gt; 8) termbysig,\n.&gt; 9) timelimits,\n.&gt; 10) timelimits_soft,\n.&gt; 11) alwayskilled,\n.&gt; 12) alwaysexits,\n.&gt; 13) bigtasksbigvalue,\n.&gt; 14) bigtasks,\n.&gt; 15) smalltasks,\n.&gt; 16) revoketermfast,\n.&gt; 17) revoketermslow\n</pre>\n<p>You can also start from an offset within this list, e.g. to skip the first two\ntests use <tt><span class=\"pre\">--offset=2</span> &lt;celery cyanide <span class=\"pre\">--offset&gt;</span></tt>:</p>\n<pre>$ celery cyanide --offset=2\n</pre>\n<p>See <tt>celery cyanide <span class=\"pre\">--help</span></tt> for a list of all available\ncommand-line options.</p>\n</div>\n<div id=\"vagrant\">\n<h2><a href=\"#id7\" rel=\"nofollow\">Vagrant</a></h2>\n<div id=\"starting\">\n<h3><a href=\"#id8\" rel=\"nofollow\">Starting</a></h3>\n<p>Cyanide ships with a complete virtual machine solution to run your tests.\nThe image ships with Celery, Cyanide, RabbitMQ and Redis and can be deployed\nsimply by running the <tt>celery vagrant</tt> command:</p>\n<pre>$ celery vagrant up\n</pre>\n<p>The IP address of the new virtual machine will be 192.168.33.123,\nand you can easily tell both the worker and cyanide test suite to use\nit by specifying the <tt>vagrant1</tt> (RabbitMQ) or <tt>vagrant1_redis</tt> templates:</p>\n<pre>$ celery -A worker -Z vagrant1\n$ celery cyanide -Z vagrant1\n</pre>\n</div>\n<div id=\"ssh\">\n<h3><a href=\"#id9\" rel=\"nofollow\">SSH</a></h3>\n<p>To open an SSH session with the virtual machine after starting\nwith <tt>celery vagrant up</tt> do:</p>\n<pre>$ ssh $(celery vagrant sshargs)\n</pre>\n</div>\n<div id=\"stopping\">\n<h3><a href=\"#id10\" rel=\"nofollow\">Stopping</a></h3>\n<p>To shutdown the virtual machine run the command:</p>\n<pre>$ celery vagrant halt\n</pre>\n<p>To destroy the instance run the command:</p>\n<pre>$ celery vagrant destroy\n</pre>\n<div>\n<p>Note</p>\n<p>To completely wipe your instance you need to remove the\n<tt>.vagrant</tt> directory.</p>\n<p>The location of this directory can be retrieved by executing\nthe following:</p>\n<pre>$ celery vagrant statedir\n/opt/devel/cyanide/cyanide/vagrant/.vagrant\n</pre>\n<p>You can combine this with <tt>rm</tt> to force removal of this\ndirectory:</p>\n<pre>$ rm -rf $(celery vagrant statedir)\n</pre>\n</div>\n</div>\n</div>\n<div id=\"environment-variables\">\n<h2><a href=\"#id11\" rel=\"nofollow\">Environment Variables</a></h2>\n<div id=\"cyanide-trans\">\n<h3><a href=\"#id12\" rel=\"nofollow\"><tt>CYANIDE_TRANS</tt></a></h3>\n<p>If the <tt>CYANIDE_TRANS</tt> environment variable is set\nthe stress test suite will use transient task messages instead of persisting\nmessages to disk.</p>\n<p>To avoid declaration collision the <tt>cstress.trans</tt> queue name will be used\nwhen this option is enabled.</p>\n</div>\n<div id=\"cyanide-broker\">\n<h3><a href=\"#id13\" rel=\"nofollow\"><tt>CYANIDE_BROKER</tt></a></h3>\n<p>You can set the <tt>CYANIDE_BROKER</tt> environment variable\nto change the default broker used:</p>\n<pre>$ CYANIDE_BROKER='amqp://' celery -A cyanide worker # ...\n$ CYANIDE_BROKER='amqp://' celery cyanide\n</pre>\n</div>\n<div id=\"cyanide-backend\">\n<h3><a href=\"#id14\" rel=\"nofollow\"><tt>CYANIDE_BACKEND</tt></a></h3>\n<p>You can set the <tt>CYANIDE_BACKEND</tt> environment variable to change\nthe result backend used:</p>\n<pre>$ CYANIDE_BACKEND='amqp://' celery -A cyanide worker # ...\n$ CYANIDE_BACKEND='amqp://' celery cyanide\n</pre>\n</div>\n<div id=\"cyanide-queue\">\n<h3><a href=\"#id15\" rel=\"nofollow\"><tt>CYANIDE_QUEUE</tt></a></h3>\n<p>A queue named <tt>c.stress</tt> is created and used by default for all task\ncommunication.</p>\n<p>You can change the name of this queue using the <tt>CYANIDE_QUEUE</tt>\nenvironment variable:</p>\n<pre>$ CYANIDE_QUEUE='cyanide' celery -A cyanide worker # ...\n$ CYANIDE_QUEUE='cyanide' celery cyanide\n</pre>\n</div>\n<div id=\"cyanide-prefetch\">\n<h3><a href=\"#id16\" rel=\"nofollow\"><tt>CYANIDE_PREFETCH</tt></a></h3>\n<p>The <tt>CYANIDE_PREFETCH</tt> environment variable sets the default prefetch\nmultiplier (default value is 10).</p>\n</div>\n<div id=\"aws-region\">\n<h3><a href=\"#id17\" rel=\"nofollow\"><tt>AWS_REGION</tt></a></h3>\n<p>The <tt>AWS_REGION</tt> environment variable changes the Amazon AWS region\nto something other than the default <tt><span class=\"pre\">us-east-1</span></tt>, to be used with the\n<tt>sqs</tt> template.</p>\n</div>\n</div>\n<div id=\"custom-suites\">\n<h2><a href=\"#id18\" rel=\"nofollow\">Custom Suites</a></h2>\n<p>You can define custom suites (look at source code of\n<tt>cyanide.suites.default</tt> for inspiration), and tell cyanide to use that\nsuite by specifying the <tt>celery cyanide <span class=\"pre\">-S</span></tt> option:</p>\n<pre>$ celery cyanide -S proj.funtests:MySuite\n</pre>\n</div>\n<div id=\"id1\">\n<span id=\"installation\"></span><h2><a href=\"#id19\" rel=\"nofollow\">Installation</a></h2>\n<p>You can install cyanide either via the Python Package Index (PyPI)\nor from source.</p>\n<p>To install using <cite>pip</cite>:</p>\n<pre>$ pip install -U cyanide\n</pre>\n<div id=\"downloading-and-installing-from-source\">\n<span id=\"installing-from-source\"></span><h3><a href=\"#id20\" rel=\"nofollow\">Downloading and installing from source</a></h3>\n<p>Download the latest version of cyanide from\n<a href=\"http://pypi.python.org/pypi/cyanide\" rel=\"nofollow\">http://pypi.python.org/pypi/cyanide</a></p>\n<p>You can install it by doing the following:</p>\n<pre>$ tar xvfz cyanide-0.0.0.tar.gz\n$ cd cyanide-0.0.0\n$ python setup.py build\n# python setup.py install\n</pre>\n<p>The last command must be executed as a privileged user if\nyou are not currently using a virtualenv.</p>\n</div>\n<div id=\"using-the-development-version\">\n<span id=\"installing-from-git\"></span><h3><a href=\"#id21\" rel=\"nofollow\">Using the development version</a></h3>\n<h3 id=\"with-pip\"><span class=\"section-subtitle\">With pip</span></h3>\n<p>You can install the latest snapshot of cyanide using the following\npip command:</p>\n<pre>$ pip install https://github.com/celery/cyanide/zipball/master#egg=cyanide\n</pre>\n</div>\n</div>\n\n          </div>"}, "last_serial": 3086525, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "4093b34f40ccafd7a845b83e8944f1f8", "sha256": "57beee1e64f0e528935004d7fd05e6d8ca1f5009b2275f6d57c515dc5786cb59"}, "downloads": -1, "filename": "cyanide-1.0.0-py2.py3-none-any.whl", "has_sig": true, "md5_digest": "4093b34f40ccafd7a845b83e8944f1f8", "packagetype": "bdist_wheel", "python_version": "2.7", "requires_python": null, "size": 27072, "upload_time": "2016-04-27T01:21:29", "upload_time_iso_8601": "2016-04-27T01:21:29.752184Z", "url": "https://files.pythonhosted.org/packages/9b/3f/41a399e6a92e8da5fd2f12690df1948a77ff855cf173c2e258f6f3e4d2d6/cyanide-1.0.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2e3f5de7b76110d000992d75c7cd2673", "sha256": "fa403d1e0f62a3e9a0343890368f839848b30c4c4c12119e4c7cd721f69dfa93"}, "downloads": -1, "filename": "cyanide-1.0.0.tar.gz", "has_sig": true, "md5_digest": "2e3f5de7b76110d000992d75c7cd2673", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 66001, "upload_time": "2016-04-27T01:20:59", "upload_time_iso_8601": "2016-04-27T01:20:59.075813Z", "url": "https://files.pythonhosted.org/packages/de/bd/8342930e7f8af92ab634c67dac3d9a2e082255d982885e876a4b91acc323/cyanide-1.0.0.tar.gz", "yanked": false}], "1.0.1": [{"comment_text": "", "digests": {"md5": "85e7fdede587d4b7246ec85a3e60a47f", "sha256": "75c76bf909e9e7b1e585fa02d4177f163a5a7fe15925e923be1a06dcfc8d3bdf"}, "downloads": -1, "filename": "cyanide-1.0.1-py2.py3-none-any.whl", "has_sig": true, "md5_digest": "85e7fdede587d4b7246ec85a3e60a47f", "packagetype": "bdist_wheel", "python_version": "2.7", "requires_python": null, "size": 27407, "upload_time": "2016-04-27T01:45:46", "upload_time_iso_8601": "2016-04-27T01:45:46.213240Z", "url": "https://files.pythonhosted.org/packages/99/50/fbc61333b310ac4ab74a7ffbba24c586f5dbb88e0624892cbf8e2b0c6087/cyanide-1.0.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b734535623872b07f2fa86934771db82", "sha256": "143b160cf1b750294ab0deb7ccaad3324a0dd4b3b233b85ec52e951807803a7b"}, "downloads": -1, "filename": "cyanide-1.0.1.tar.gz", "has_sig": true, "md5_digest": "b734535623872b07f2fa86934771db82", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 66200, "upload_time": "2016-04-27T01:45:40", "upload_time_iso_8601": "2016-04-27T01:45:40.286347Z", "url": "https://files.pythonhosted.org/packages/c7/e7/cbb48522aa7326afa8701337b4bea8aebadafbdf44c2bfc8369b67365cd0/cyanide-1.0.1.tar.gz", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "9841e2841308ff24b1fcd97649027327", "sha256": "c244a3d1f1e33594eca96799a69d3de3ecc2a72f5d9904828022d4a8e85b3a94"}, "downloads": -1, "filename": "cyanide-1.1.0-py2.py3-none-any.whl", "has_sig": true, "md5_digest": "9841e2841308ff24b1fcd97649027327", "packagetype": "bdist_wheel", "python_version": "2.7", "requires_python": null, "size": 30009, "upload_time": "2016-05-12T22:14:25", "upload_time_iso_8601": "2016-05-12T22:14:25.542195Z", "url": "https://files.pythonhosted.org/packages/8a/bf/e2983023bb13114fbecf445918ab490244d4c2f6f8c22d26fd93ebc81f1c/cyanide-1.1.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "fb0fede653d09aea11e3d35a9179afe9", "sha256": "4c7af4baa6ff7b243761f6540f4ef08cddc816cfaf99ecc8c6dec8a89ac22f5d"}, "downloads": -1, "filename": "cyanide-1.1.0.tar.gz", "has_sig": true, "md5_digest": "fb0fede653d09aea11e3d35a9179afe9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 70226, "upload_time": "2016-05-12T22:14:17", "upload_time_iso_8601": "2016-05-12T22:14:17.805427Z", "url": "https://files.pythonhosted.org/packages/8d/30/95ed189995aa4fa13d29caea303ffa16d1bf93252341ba04e0817fbe2733/cyanide-1.1.0.tar.gz", "yanked": false}], "1.2.0": [{"comment_text": "built for Darwin-15.6.0", "digests": {"md5": "2e89f9e305aab1a0b646d909af9124f4", "sha256": "fd911a589eb368053a3012ce2fc39090b48a77160d050971b69c8b1e1d734b66"}, "downloads": -1, "filename": "cyanide-1.2.0.macosx-10.11-intel.tar.gz", "has_sig": true, "md5_digest": "2e89f9e305aab1a0b646d909af9124f4", "packagetype": "bdist_dumb", "python_version": "any", "requires_python": null, "size": 42946, "upload_time": "2016-06-30T19:04:00", "upload_time_iso_8601": "2016-06-30T19:04:00.237060Z", "url": "https://files.pythonhosted.org/packages/5d/42/38d3b344eb7518bd131b2c72f16424d272d849c4155c0065babe67fc8993/cyanide-1.2.0.macosx-10.11-intel.tar.gz", "yanked": false}], "1.3.0": [{"comment_text": "", "digests": {"md5": "59960406f02e4beb1f6418bcda70ede8", "sha256": "0f9e682dc493151b9c3b0aad417a8be98b29fddf311974e5a9470d00091eaa50"}, "downloads": -1, "filename": "cyanide-1.3.0-py2.py3-none-any.whl", "has_sig": true, "md5_digest": "59960406f02e4beb1f6418bcda70ede8", "packagetype": "bdist_wheel", "python_version": "2.7", "requires_python": null, "size": 30510, "upload_time": "2016-10-19T19:39:28", "upload_time_iso_8601": "2016-10-19T19:39:28.661912Z", "url": "https://files.pythonhosted.org/packages/ce/4d/89b72e4c7c160d58b0a85e0fb01f4e41d2c25a03d73d295e2cb39a3e5a21/cyanide-1.3.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b299b0826df450ca518b63a925c0c633", "sha256": "5a75f962f313dd64bbe5b21983a76cf4def64cdfc249bfa1d92994c29bcc6326"}, "downloads": -1, "filename": "cyanide-1.3.0.tar.gz", "has_sig": true, "md5_digest": "b299b0826df450ca518b63a925c0c633", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 70544, "upload_time": "2016-10-19T19:39:25", "upload_time_iso_8601": "2016-10-19T19:39:25.686264Z", "url": "https://files.pythonhosted.org/packages/65/3c/5cc5a38e2c24d68ddfa39c3e5e7f547a7be2e59702fee5d2e23a4327e157/cyanide-1.3.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "59960406f02e4beb1f6418bcda70ede8", "sha256": "0f9e682dc493151b9c3b0aad417a8be98b29fddf311974e5a9470d00091eaa50"}, "downloads": -1, "filename": "cyanide-1.3.0-py2.py3-none-any.whl", "has_sig": true, "md5_digest": "59960406f02e4beb1f6418bcda70ede8", "packagetype": "bdist_wheel", "python_version": "2.7", "requires_python": null, "size": 30510, "upload_time": "2016-10-19T19:39:28", "upload_time_iso_8601": "2016-10-19T19:39:28.661912Z", "url": "https://files.pythonhosted.org/packages/ce/4d/89b72e4c7c160d58b0a85e0fb01f4e41d2c25a03d73d295e2cb39a3e5a21/cyanide-1.3.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b299b0826df450ca518b63a925c0c633", "sha256": "5a75f962f313dd64bbe5b21983a76cf4def64cdfc249bfa1d92994c29bcc6326"}, "downloads": -1, "filename": "cyanide-1.3.0.tar.gz", "has_sig": true, "md5_digest": "b299b0826df450ca518b63a925c0c633", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 70544, "upload_time": "2016-10-19T19:39:25", "upload_time_iso_8601": "2016-10-19T19:39:25.686264Z", "url": "https://files.pythonhosted.org/packages/65/3c/5cc5a38e2c24d68ddfa39c3e5e7f547a7be2e59702fee5d2e23a4327e157/cyanide-1.3.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:41:08 2020"}