{"info": {"author": "clintval", "author_email": "valentine.clint@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 2 - Pre-Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7"], "description": "# reticle\n\n[![Testing Status](https://travis-ci.org/clintval/reticle.svg?branch=master)](https://travis-ci.org/clintval/reticle)\n[![codecov](https://codecov.io/gh/clintval/reticle/branch/master/graph/badge.svg)](https://codecov.io/gh/clintval/reticle)\n[![Documentation Build Status](https://readthedocs.org/projects/reticle/badge/?version=latest)](https://reticle.readthedocs.io/en/latest/?badge=latest)\n[![PyPi Release](https://badge.fury.io/py/reticle.svg)](https://badge.fury.io/py/reticle)\n[![Python Versions](https://img.shields.io/pypi/pyversions/reticle.svg)](https://pypi.python.org/pypi/reticle/)\n[![MyPy Checked](http://www.mypy-lang.org/static/mypy_badge.svg)](http://mypy-lang.org/)\n[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/ambv/black)\n\nPython 3.6+ library for submitting to AWS Batch interactively.\n\n```bash\n\u276f pip install reticle\n```\n\nFeatures:\n\n- Submit Batch jobs\n\nRead the documentation at: [reticle.readthedocs.io](https://reticle.readthedocs.io/en/latest/)\n\n\n## End-to-end Example\n\nThe principle object for deploying jobs to AWS Batch is the Batch job definition.\nEvery Batch job definition has a name, parameters, and some form of optional parameter validation.\n\n```python\nfrom reticle.aws.batch import JobDefinition\nfrom reticle.aws.s3 import S3Uri\n\nclass DemoJobDefinition(JobDefinition):\n    \"\"\"A Batch job definition for demonstrating our API.\n\n    Args:\n        input_object: The S3 URI to the input object.\n\n    \"\"\"\n    def __init__(self, input_object: S3Uri):\n        self.input_object = input_object\n\n    @property\n    def name(self) -> str:\n        \"\"\"Return the job definition name.\"\"\"\n        return 'demo-job'\n\n    def validate(self) -> None:\n        \"\"\"Validate this parameterized job definition.\"\"\"\n        if not self.input_object.object_exists():\n            raise f'S3 object does not exist: {self.input_object}'\n```\n\nWe can now wrap the parameterized job definition in a Batch job and set a specific revision.\n\n```python\nfrom reticle.aws.batch import BatchJob\n\ndefinition = DemoJobDefinition(input_object='s3://bucket/object')\ndefinition.at_revision('6')\n\njob = BatchJob(definition)\n```\n\nSubmitting this Batch job is easy, and introspection can be performed immediately:\n\n```python\nresponse = job.submit(queue='prod')\n```\n\nWhen the job is in a `RUNNING` state we can access the job's Cloudwatch logs:\n\n```python\nfor log_event in job.log_stream_events():\n    print(log_event)\n\"\"\"\nLogEvent(timestamp=\"1543809952329\", message=\"You have started up this demo job\", ingestion_time=\"1543809957080\")\nLogEvent(timestamp=\"1543809955437\", message=\"Configuration, we are loading from...\", ingestion_time=\"1543809957080\")\nLogEvent(timestamp=\"1543809955437\", message=\"Defaulting to approximate values\", ingestion_time=\"1543809957080\")\nLogEvent(timestamp=\"1543809955437\", message=\"Setting up logger, nothing to see here\", ingestion_time=\"1543809957080\")\n\"\"\"\n```\n\nAnd if we must, we can cancel the job as long as we provide a reason:\n\n```python\njob.terminate(reason='I was just testing!')\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "https://github.com/clintval/reticle/archive/v0.1.0.tar.gz", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/clintval/reticle", "keywords": "AWS Batch job submission", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "reticle", "package_url": "https://pypi.org/project/reticle/", "platform": "", "project_url": "https://pypi.org/project/reticle/", "project_urls": {"Documentation": "https://reticle.readthedocs.io", "Download": "https://github.com/clintval/reticle/archive/v0.1.0.tar.gz", "Homepage": "https://github.com/clintval/reticle", "Issue-Tracker": "https://github.com/clintval/reticle/issues"}, "release_url": "https://pypi.org/project/reticle/0.1.0/", "requires_dist": null, "requires_python": "", "summary": "Python 3.6+ library for submitting to AWS Batch interactively.", "version": "0.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>reticle</h1>\n<p><a href=\"https://travis-ci.org/clintval/reticle\" rel=\"nofollow\"><img alt=\"Testing Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e5f852f32378eee646901d9b89514674c15c7451/68747470733a2f2f7472617669732d63692e6f72672f636c696e7476616c2f72657469636c652e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/gh/clintval/reticle\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5bb48fb91cef56053a0e61e6b623635f6d4e8d9f/68747470733a2f2f636f6465636f762e696f2f67682f636c696e7476616c2f72657469636c652f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a>\n<a href=\"https://reticle.readthedocs.io/en/latest/?badge=latest\" rel=\"nofollow\"><img alt=\"Documentation Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4f1c7ae60d8fb4f07e6ff1fb2863f3ad8831dc93/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f72657469636c652f62616467652f3f76657273696f6e3d6c6174657374\"></a>\n<a href=\"https://badge.fury.io/py/reticle\" rel=\"nofollow\"><img alt=\"PyPi Release\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4c399fd644295c5b70c2b51679bfca735a6b8769/68747470733a2f2f62616467652e667572792e696f2f70792f72657469636c652e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/reticle/\" rel=\"nofollow\"><img alt=\"Python Versions\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6037fab2cae5ae8ae03d24b3ace806e0e9c927f8/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f72657469636c652e737667\"></a>\n<a href=\"http://mypy-lang.org/\" rel=\"nofollow\"><img alt=\"MyPy Checked\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d0db8f5dcbf5f340f278004d5db3d16b4cdf33ba/687474703a2f2f7777772e6d7970792d6c616e672e6f72672f7374617469632f6d7970795f62616467652e737667\"></a>\n<a href=\"https://github.com/ambv/black\" rel=\"nofollow\"><img alt=\"Code style: black\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fbfdc7754183ecf079bc71ddeabaf88f6cbc5c00/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667\"></a></p>\n<p>Python 3.6+ library for submitting to AWS Batch interactively.</p>\n<pre>\u276f pip install reticle\n</pre>\n<p>Features:</p>\n<ul>\n<li>Submit Batch jobs</li>\n</ul>\n<p>Read the documentation at: <a href=\"https://reticle.readthedocs.io/en/latest/\" rel=\"nofollow\">reticle.readthedocs.io</a></p>\n<h2>End-to-end Example</h2>\n<p>The principle object for deploying jobs to AWS Batch is the Batch job definition.\nEvery Batch job definition has a name, parameters, and some form of optional parameter validation.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">reticle.aws.batch</span> <span class=\"kn\">import</span> <span class=\"n\">JobDefinition</span>\n<span class=\"kn\">from</span> <span class=\"nn\">reticle.aws.s3</span> <span class=\"kn\">import</span> <span class=\"n\">S3Uri</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">DemoJobDefinition</span><span class=\"p\">(</span><span class=\"n\">JobDefinition</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"A Batch job definition for demonstrating our API.</span>\n\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        input_object: The S3 URI to the input object.</span>\n\n<span class=\"sd\">    \"\"\"</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">input_object</span><span class=\"p\">:</span> <span class=\"n\">S3Uri</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">input_object</span> <span class=\"o\">=</span> <span class=\"n\">input_object</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">name</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">str</span><span class=\"p\">:</span>\n        <span class=\"sd\">\"\"\"Return the job definition name.\"\"\"</span>\n        <span class=\"k\">return</span> <span class=\"s1\">'demo-job'</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">validate</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"sd\">\"\"\"Validate this parameterized job definition.\"\"\"</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">input_object</span><span class=\"o\">.</span><span class=\"n\">object_exists</span><span class=\"p\">():</span>\n            <span class=\"k\">raise</span> <span class=\"sa\">f</span><span class=\"s1\">'S3 object does not exist: </span><span class=\"si\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">input_object</span><span class=\"si\">}</span><span class=\"s1\">'</span>\n</pre>\n<p>We can now wrap the parameterized job definition in a Batch job and set a specific revision.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">reticle.aws.batch</span> <span class=\"kn\">import</span> <span class=\"n\">BatchJob</span>\n\n<span class=\"n\">definition</span> <span class=\"o\">=</span> <span class=\"n\">DemoJobDefinition</span><span class=\"p\">(</span><span class=\"n\">input_object</span><span class=\"o\">=</span><span class=\"s1\">'s3://bucket/object'</span><span class=\"p\">)</span>\n<span class=\"n\">definition</span><span class=\"o\">.</span><span class=\"n\">at_revision</span><span class=\"p\">(</span><span class=\"s1\">'6'</span><span class=\"p\">)</span>\n\n<span class=\"n\">job</span> <span class=\"o\">=</span> <span class=\"n\">BatchJob</span><span class=\"p\">(</span><span class=\"n\">definition</span><span class=\"p\">)</span>\n</pre>\n<p>Submitting this Batch job is easy, and introspection can be performed immediately:</p>\n<pre><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">job</span><span class=\"o\">.</span><span class=\"n\">submit</span><span class=\"p\">(</span><span class=\"n\">queue</span><span class=\"o\">=</span><span class=\"s1\">'prod'</span><span class=\"p\">)</span>\n</pre>\n<p>When the job is in a <code>RUNNING</code> state we can access the job's Cloudwatch logs:</p>\n<pre><span class=\"k\">for</span> <span class=\"n\">log_event</span> <span class=\"ow\">in</span> <span class=\"n\">job</span><span class=\"o\">.</span><span class=\"n\">log_stream_events</span><span class=\"p\">():</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">log_event</span><span class=\"p\">)</span>\n<span class=\"sd\">\"\"\"</span>\n<span class=\"sd\">LogEvent(timestamp=\"1543809952329\", message=\"You have started up this demo job\", ingestion_time=\"1543809957080\")</span>\n<span class=\"sd\">LogEvent(timestamp=\"1543809955437\", message=\"Configuration, we are loading from...\", ingestion_time=\"1543809957080\")</span>\n<span class=\"sd\">LogEvent(timestamp=\"1543809955437\", message=\"Defaulting to approximate values\", ingestion_time=\"1543809957080\")</span>\n<span class=\"sd\">LogEvent(timestamp=\"1543809955437\", message=\"Setting up logger, nothing to see here\", ingestion_time=\"1543809957080\")</span>\n<span class=\"sd\">\"\"\"</span>\n</pre>\n<p>And if we must, we can cancel the job as long as we provide a reason:</p>\n<pre><span class=\"n\">job</span><span class=\"o\">.</span><span class=\"n\">terminate</span><span class=\"p\">(</span><span class=\"n\">reason</span><span class=\"o\">=</span><span class=\"s1\">'I was just testing!'</span><span class=\"p\">)</span>\n</pre>\n\n          </div>"}, "last_serial": 4554350, "releases": {"0.0.2": [{"comment_text": "", "digests": {"md5": "dc3435deb53ef85b8732f99e184abd60", "sha256": "0f220b7dd54ad05b53f0737f5fe9053896cf530cc80c6d43b0c05dbc59e72c06"}, "downloads": -1, "filename": "reticle-0.0.2.tar.gz", "has_sig": false, "md5_digest": "dc3435deb53ef85b8732f99e184abd60", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4052, "upload_time": "2018-12-03T02:51:55", "upload_time_iso_8601": "2018-12-03T02:51:55.926464Z", "url": "https://files.pythonhosted.org/packages/76/88/0031520d34cb30a4c468ddb7ed8ed9d602dc247f5718bf59eaab3e55f87f/reticle-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "5eb2c6e8a3b4746ee73336341f845166", "sha256": "4860d9c98d24ad879d2636ea760cfbbbd0f906ee59b3dc71e90d889fbd8d890b"}, "downloads": -1, "filename": "reticle-0.0.3.tar.gz", "has_sig": false, "md5_digest": "5eb2c6e8a3b4746ee73336341f845166", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4233, "upload_time": "2018-12-03T02:59:54", "upload_time_iso_8601": "2018-12-03T02:59:54.667340Z", "url": "https://files.pythonhosted.org/packages/78/ed/cedc5c9bbb4be9f10991694e9be5cf84ca68e2b3e0fa15cd9ce241fccbf3/reticle-0.0.3.tar.gz", "yanked": false}], "0.0.4": [{"comment_text": "", "digests": {"md5": "8b17b17991f5d6844ea99c2abb2e71c2", "sha256": "3a2f928d77afe028a9292a915b4648eed7c1d1cc2b05e906b01ec91e8770efb9"}, "downloads": -1, "filename": "reticle-0.0.4.tar.gz", "has_sig": false, "md5_digest": "8b17b17991f5d6844ea99c2abb2e71c2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5399, "upload_time": "2018-12-03T04:32:22", "upload_time_iso_8601": "2018-12-03T04:32:22.200625Z", "url": "https://files.pythonhosted.org/packages/5e/1f/6844530d7f4d5a9c85c10ec84d06df9fcedce1e07a7a05c34559e0bde25f/reticle-0.0.4.tar.gz", "yanked": false}], "0.1.0": [{"comment_text": "", "digests": {"md5": "8c3bf840734af645e97a09c384baecd8", "sha256": "3936d1d75b19b77d9ea66ebd9609ca04bbed76f4866cbd4ff98420faaa60787c"}, "downloads": -1, "filename": "reticle-0.1.0.tar.gz", "has_sig": false, "md5_digest": "8c3bf840734af645e97a09c384baecd8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5375, "upload_time": "2018-12-03T04:41:48", "upload_time_iso_8601": "2018-12-03T04:41:48.223031Z", "url": "https://files.pythonhosted.org/packages/a5/b1/7e4935dcfd1bf5707203e074e52ef31d248744e2aa9cabc74984c18c9779/reticle-0.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "8c3bf840734af645e97a09c384baecd8", "sha256": "3936d1d75b19b77d9ea66ebd9609ca04bbed76f4866cbd4ff98420faaa60787c"}, "downloads": -1, "filename": "reticle-0.1.0.tar.gz", "has_sig": false, "md5_digest": "8c3bf840734af645e97a09c384baecd8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5375, "upload_time": "2018-12-03T04:41:48", "upload_time_iso_8601": "2018-12-03T04:41:48.223031Z", "url": "https://files.pythonhosted.org/packages/a5/b1/7e4935dcfd1bf5707203e074e52ef31d248744e2aa9cabc74984c18c9779/reticle-0.1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:03:26 2020"}