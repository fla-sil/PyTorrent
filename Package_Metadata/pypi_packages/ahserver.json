{"info": {"author": "yumoqing", "author_email": "yumoqing@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# ahserver\n\nahserver is a http(s) server base on aiohttp asynchronous framework.\n\nahserver capabilities:\n* user authorization and authentication support\n* https support\n* processor for registed file type\n* pre-defined variables and function can be called by processors\n* multiple database connection and connection pool\n* a easy way to wrap SQL\n* configure data from  json file stored at ./conf/config.json\n* upload file auto save under config.filesroot folder\n* i18n support\n* processors include:\n\t+ 'dspy' file subffix by '.dspy', is process as a python script\n\t+ 'tmpl' files subffix by '.tmpl', is process as a template\n\t+ 'md' files subffix by '.md', is process as a markdown file\n\t+ 'xlsxds' files subffix by '.xlsxds' is process as a data source from xlsx file\n\t+ 'sqlds' files subffixed by '.sqlds' is process as a data source from database via a sql command\n\n## Requirements\n\nsee requirements.txt\n\n[pyutils](https://github.com/yumoqing/pyutils)\n\n[sqlor](https://github.com/yumoqing/sqlor)\n\n## How to use\nsee ah.py\n\n```\nfrom ahserver.configuredServer import ConfiguredServer\n\nif __name__ == '__main__':\n\tserver = ConfiguredServer()\n\tserver.run()\n```\n\n## Folder structure\n\n+ app\n+ |-ah.py\n+ |--ahserver\n+ |-conf\n+      |-config.json\n+ |-i18n\n\n## Configuration file content\nahserver using json file format in its configuration, the following is a sample:\n```\n{\n\t\"databases\":{\n\t\t\"aiocfae\":{\n\t\t\t\"driver\":\"aiomysql\",\n\t\t\t\"async_mode\":true,\n\t\t\t\"coding\":\"utf8\",\n\t\t\t\"dbname\":\"cfae\",\n\t\t\t\"kwargs\":{\n\t\t\t\t\t\"user\":\"test\",\n\t\t\t\t\t\"db\":\"cfae\",\n\t\t\t\t\t\"password\":\"test123\",\n\t\t\t\t\t\"host\":\"localhost\"\n\t\t\t}\n\t\t},\n\t\t\"cfae\":{\n\t\t\t\"driver\":\"mysql.connector\",\n\t\t\t\"coding\":\"utf8\",\n\t\t\t\"dbname\":\"cfae\",\n\t\t\t\"kwargs\":{\n\t\t\t\t\t\"user\":\"test\",\n\t\t\t\t\t\"db\":\"cfae\",\n\t\t\t\t\t\"password\":\"test123\",\n\t\t\t\t\t\"host\":\"localhost\"\n\t\t\t}\n\t\t}\n\t},\n\t\"website\":{\n\t\t\"paths\":[\n\t\t\t[\"$[workdir]$/../usedpkgs/antd\",\"/antd\"],\n\t\t\t[\"$[workdir]$/../wolon\",\"\"]\n\t\t],\n\t\t\"host\":\"0.0.0.0\",\n\t\t\"port\":8080,\n\t\t\"coding\":\"utf-8\",\n\t\t\"ssl\":{\n\t\t\t\"crtfile\":\"$[workdir]$/conf/www.xxx.com.pem\",\n\t\t\t\"keyfile\":\"$[workdir]$/conf/www.xxx.com.key\"\n\t\t},\n\t\t\"indexes\":[\n\t\t\t\"index.html\",\n\t\t\t\"index.tmpl\",\n\t\t\t\"index.dspy\",\n\t\t\t\"index.md\"\n\t\t],\n\t\t\"visualcoding\":{\n\t\t\t\"default_root\":\"/samples/vc/test\",\n\t\t\t\"userroot\":{\n\t\t\t\t\"ymq\":\"/samples/vc/ymq\",\n\t\t\t\t\"root\":\"/samples/vc/root\"\n\t\t\t},\n\t\t\t\"jrjpath\":\"/samples/vc/default\"\n\t\t},\n\t\t\"processors\":[\n\t\t\t[\".xlsxds\",\"xlsxds\"],\n\t\t\t[\".sqlds\",\"sqlds\"],\n\t\t\t[\".tmpl.js\",\"tmpl\"],\n\t\t\t[\".tmpl.css\",\"tmpl\"],\n\t\t\t[\".html.tmpl\",\"tmpl\"],\n\t\t\t[\".tmpl\",\"tmpl\"],\n\t\t\t[\".dspy\",\"dspy\"],\n\t\t\t[\".md\",\"md\"]\n\t\t]\n\t},\n\t\"langMapping\":{\n\t\t\"zh-Hans-CN\":\"zh-cn\",\n\t\t\"zh-CN\":\"zh-cn\",\n\t\t\"en-us\":\"en\",\n\t\t\"en-US\":\"en\"\n\t}\n}\n```\n\n### database configuration\nthe ahserver using packages for database engines are:\n* oracle:cx_Oracle\n* mysql:mysql-connector\n* postgresql:psycopg2\n* sql server:pymssql\n\nhowever, you can change it, but must change the \"driver\" value the the package name in the database connection definition.\n\nin the databases section in config.json, you can define one or more database connection, and also, it support many database engine, just as ORACLE,mysql,postgreSQL.\ndefine a database connnect you need follow the following json format.\n\n* mysql or mariadb\n```\n                \"metadb\":{\n                        \"driver\":\"mysql.connector\",\n                        \"coding\":\"utf8\",\n                        \"dbname\":\"sampledb\",\n                        \"kwargs\":{\n                                \"user\":\"user1\",\n                                \"db\":\"sampledb\",\n                                \"password\":\"user123\",\n                                \"host\":\"localhost\"\n                        }\n                }\n```\nthe dbname and \"db\" should the same, which is the database name in mysql database\n* Oracle\n```\n\t\t\"db_ora\":{\n\t\t\t\"driver\":\"cx_Oracle\",\n\t\t\t\"coding\":\"utf8\",\n\t\t\t\"dbname\":sampledb\",\n\t\t\t\"kwargs\":{\n\t\t\t\t\"user\":\"user1\",\n\t\t\t\t\"host\":\"localhost\",\n\t\t\t\t\"dsn\":\"10.0.185.137:1521/SAMPLEDB\"\n\t\t\t}\n\t\t}\n```\n\n* SQL Server\n```\n                \"db_mssql\":{\n                        \"driver\":\"pymssql\",\n                        \"coding\":\"utf8\",\n                        \"dbname\":\"sampledb\",\n                        \"kwargs\":{\n                                \"user\":\"user1\",\n                                \"database\":\"sampledb\",\n                                \"password\":\"user123\",\n                                \"server\":\"localhost\",\n                                \"port\":1433,\n                                \"charset\":\"utf8\"\n                        }\n                }\n```\n* PostgreSQL\n```\n\t\t\"db_pg\":{\n\t\t\t\"driver\":\"psycopg2\",\n\t\t\t\"dbname\":\"testdb\",\n\t\t\t\"coding\":\"utf8\",\n\t\t\t\"kwargs\":{\n\t\t\t\t\"database\":\"testdb\",\n\t\t\t\t\"user\":\"postgres\",\n\t\t\t\t\"password\":\"pass123\",\n\t\t\t\t\"host\":\"127.0.0.1\",\n\t\t\t\t\"port\":\"5432\"\n\t\t\t}\n\t\t}\n```\n### https support\n\nIn config.json file, config.website.ssl need to set(see above)\n\n### website configuration\n#### paths\nahserver can serve its contents (static file, dynamic contents render by its processors) resided on difference folders on the server file system.\nahserver finds a content identified by http url in order the of the paths specified by \"paths\" lists inside \"website\" definition of config.json file\n#### processors\nall the prcessors ahserver using, must be listed here.\n#### host\nby defaualt, '0.0.0.0'\n#### port\nby default, 8080\n#### coding\nahserver recomments using 'utf-8'\n\n### langMapping\n\nthe browsers will send 'Accept-Language' are difference even if the same language. so ahserver using a \"langMapping\" definition to mapping multiple browser lang to same i18n file\n\n\n## international\n\nahserver using MiniI18N in appPublic modules in pyutils package to implements i18n support\n\nit will search translate text in ms* txt file in folder named by language name inside i18n folder in workdir folder, workdir is the folder where the ahserver program resided or identified by command line paraments.\n\n## performance\n\nTo be list here\n\n## environment for processors\n\nWhen coding in processors, ahserver provide some environment stuff for build apllication, there are modules, functions, classes and variables\n\n\n### modules:\n* time\n* datetime\n* random\n* json\n\n### functions:\n* configValue\n* isNone\n* int\n* str\n* float\n* type\n* str2date\n* str2datetime\n* curDatetime\n* uuid\n* runSQL\n* runSQLPaging\n* runSQLIterator\n* runSQLResultFields\n* getTables\n* getTableFields\n* getTablePrimaryKey\n* getTableForignKeys\n* folderInfo\n* abspath\n* request2ns\n* CRUD\n* data2xlsx\n* xlsxdata\n* openfile\n* i18n\n* i18nDict\n* absurl\n* abspath\n* request2ns\n\n### variables\n* resource\n* terminalType\n\n### classes\n* ArgsConvert\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/yumoqing/ahserver", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "ahserver", "package_url": "https://pypi.org/project/ahserver/", "platform": "", "project_url": "https://pypi.org/project/ahserver/", "project_urls": {"Homepage": "https://github.com/yumoqing/ahserver"}, "release_url": "https://pypi.org/project/ahserver/0.0.2/", "requires_dist": null, "requires_python": "", "summary": "ahserver", "version": "0.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>ahserver</h1>\n<p>ahserver is a http(s) server base on aiohttp asynchronous framework.</p>\n<p>ahserver capabilities:</p>\n<ul>\n<li>user authorization and authentication support</li>\n<li>https support</li>\n<li>processor for registed file type</li>\n<li>pre-defined variables and function can be called by processors</li>\n<li>multiple database connection and connection pool</li>\n<li>a easy way to wrap SQL</li>\n<li>configure data from  json file stored at ./conf/config.json</li>\n<li>upload file auto save under config.filesroot folder</li>\n<li>i18n support</li>\n<li>processors include:\n<ul>\n<li>'dspy' file subffix by '.dspy', is process as a python script</li>\n<li>'tmpl' files subffix by '.tmpl', is process as a template</li>\n<li>'md' files subffix by '.md', is process as a markdown file</li>\n<li>'xlsxds' files subffix by '.xlsxds' is process as a data source from xlsx file</li>\n<li>'sqlds' files subffixed by '.sqlds' is process as a data source from database via a sql command</li>\n</ul>\n</li>\n</ul>\n<h2>Requirements</h2>\n<p>see requirements.txt</p>\n<p><a href=\"https://github.com/yumoqing/pyutils\" rel=\"nofollow\">pyutils</a></p>\n<p><a href=\"https://github.com/yumoqing/sqlor\" rel=\"nofollow\">sqlor</a></p>\n<h2>How to use</h2>\n<p>see ah.py</p>\n<pre><code>from ahserver.configuredServer import ConfiguredServer\n\nif __name__ == '__main__':\n\tserver = ConfiguredServer()\n\tserver.run()\n</code></pre>\n<h2>Folder structure</h2>\n<ul>\n<li>app</li>\n<li>|-ah.py</li>\n<li>|--ahserver</li>\n<li>|-conf</li>\n<li>\n<pre><code> |-config.json\n</code></pre>\n</li>\n<li>|-i18n</li>\n</ul>\n<h2>Configuration file content</h2>\n<p>ahserver using json file format in its configuration, the following is a sample:</p>\n<pre><code>{\n\t\"databases\":{\n\t\t\"aiocfae\":{\n\t\t\t\"driver\":\"aiomysql\",\n\t\t\t\"async_mode\":true,\n\t\t\t\"coding\":\"utf8\",\n\t\t\t\"dbname\":\"cfae\",\n\t\t\t\"kwargs\":{\n\t\t\t\t\t\"user\":\"test\",\n\t\t\t\t\t\"db\":\"cfae\",\n\t\t\t\t\t\"password\":\"test123\",\n\t\t\t\t\t\"host\":\"localhost\"\n\t\t\t}\n\t\t},\n\t\t\"cfae\":{\n\t\t\t\"driver\":\"mysql.connector\",\n\t\t\t\"coding\":\"utf8\",\n\t\t\t\"dbname\":\"cfae\",\n\t\t\t\"kwargs\":{\n\t\t\t\t\t\"user\":\"test\",\n\t\t\t\t\t\"db\":\"cfae\",\n\t\t\t\t\t\"password\":\"test123\",\n\t\t\t\t\t\"host\":\"localhost\"\n\t\t\t}\n\t\t}\n\t},\n\t\"website\":{\n\t\t\"paths\":[\n\t\t\t[\"$[workdir]$/../usedpkgs/antd\",\"/antd\"],\n\t\t\t[\"$[workdir]$/../wolon\",\"\"]\n\t\t],\n\t\t\"host\":\"0.0.0.0\",\n\t\t\"port\":8080,\n\t\t\"coding\":\"utf-8\",\n\t\t\"ssl\":{\n\t\t\t\"crtfile\":\"$[workdir]$/conf/www.xxx.com.pem\",\n\t\t\t\"keyfile\":\"$[workdir]$/conf/www.xxx.com.key\"\n\t\t},\n\t\t\"indexes\":[\n\t\t\t\"index.html\",\n\t\t\t\"index.tmpl\",\n\t\t\t\"index.dspy\",\n\t\t\t\"index.md\"\n\t\t],\n\t\t\"visualcoding\":{\n\t\t\t\"default_root\":\"/samples/vc/test\",\n\t\t\t\"userroot\":{\n\t\t\t\t\"ymq\":\"/samples/vc/ymq\",\n\t\t\t\t\"root\":\"/samples/vc/root\"\n\t\t\t},\n\t\t\t\"jrjpath\":\"/samples/vc/default\"\n\t\t},\n\t\t\"processors\":[\n\t\t\t[\".xlsxds\",\"xlsxds\"],\n\t\t\t[\".sqlds\",\"sqlds\"],\n\t\t\t[\".tmpl.js\",\"tmpl\"],\n\t\t\t[\".tmpl.css\",\"tmpl\"],\n\t\t\t[\".html.tmpl\",\"tmpl\"],\n\t\t\t[\".tmpl\",\"tmpl\"],\n\t\t\t[\".dspy\",\"dspy\"],\n\t\t\t[\".md\",\"md\"]\n\t\t]\n\t},\n\t\"langMapping\":{\n\t\t\"zh-Hans-CN\":\"zh-cn\",\n\t\t\"zh-CN\":\"zh-cn\",\n\t\t\"en-us\":\"en\",\n\t\t\"en-US\":\"en\"\n\t}\n}\n</code></pre>\n<h3>database configuration</h3>\n<p>the ahserver using packages for database engines are:</p>\n<ul>\n<li>oracle:cx_Oracle</li>\n<li>mysql:mysql-connector</li>\n<li>postgresql:psycopg2</li>\n<li>sql server:pymssql</li>\n</ul>\n<p>however, you can change it, but must change the \"driver\" value the the package name in the database connection definition.</p>\n<p>in the databases section in config.json, you can define one or more database connection, and also, it support many database engine, just as ORACLE,mysql,postgreSQL.\ndefine a database connnect you need follow the following json format.</p>\n<ul>\n<li>mysql or mariadb</li>\n</ul>\n<pre><code>                \"metadb\":{\n                        \"driver\":\"mysql.connector\",\n                        \"coding\":\"utf8\",\n                        \"dbname\":\"sampledb\",\n                        \"kwargs\":{\n                                \"user\":\"user1\",\n                                \"db\":\"sampledb\",\n                                \"password\":\"user123\",\n                                \"host\":\"localhost\"\n                        }\n                }\n</code></pre>\n<p>the dbname and \"db\" should the same, which is the database name in mysql database</p>\n<ul>\n<li>Oracle</li>\n</ul>\n<pre><code>\t\t\"db_ora\":{\n\t\t\t\"driver\":\"cx_Oracle\",\n\t\t\t\"coding\":\"utf8\",\n\t\t\t\"dbname\":sampledb\",\n\t\t\t\"kwargs\":{\n\t\t\t\t\"user\":\"user1\",\n\t\t\t\t\"host\":\"localhost\",\n\t\t\t\t\"dsn\":\"10.0.185.137:1521/SAMPLEDB\"\n\t\t\t}\n\t\t}\n</code></pre>\n<ul>\n<li>SQL Server</li>\n</ul>\n<pre><code>                \"db_mssql\":{\n                        \"driver\":\"pymssql\",\n                        \"coding\":\"utf8\",\n                        \"dbname\":\"sampledb\",\n                        \"kwargs\":{\n                                \"user\":\"user1\",\n                                \"database\":\"sampledb\",\n                                \"password\":\"user123\",\n                                \"server\":\"localhost\",\n                                \"port\":1433,\n                                \"charset\":\"utf8\"\n                        }\n                }\n</code></pre>\n<ul>\n<li>PostgreSQL</li>\n</ul>\n<pre><code>\t\t\"db_pg\":{\n\t\t\t\"driver\":\"psycopg2\",\n\t\t\t\"dbname\":\"testdb\",\n\t\t\t\"coding\":\"utf8\",\n\t\t\t\"kwargs\":{\n\t\t\t\t\"database\":\"testdb\",\n\t\t\t\t\"user\":\"postgres\",\n\t\t\t\t\"password\":\"pass123\",\n\t\t\t\t\"host\":\"127.0.0.1\",\n\t\t\t\t\"port\":\"5432\"\n\t\t\t}\n\t\t}\n</code></pre>\n<h3>https support</h3>\n<p>In config.json file, config.website.ssl need to set(see above)</p>\n<h3>website configuration</h3>\n<h4>paths</h4>\n<p>ahserver can serve its contents (static file, dynamic contents render by its processors) resided on difference folders on the server file system.\nahserver finds a content identified by http url in order the of the paths specified by \"paths\" lists inside \"website\" definition of config.json file</p>\n<h4>processors</h4>\n<p>all the prcessors ahserver using, must be listed here.</p>\n<h4>host</h4>\n<p>by defaualt, '0.0.0.0'</p>\n<h4>port</h4>\n<p>by default, 8080</p>\n<h4>coding</h4>\n<p>ahserver recomments using 'utf-8'</p>\n<h3>langMapping</h3>\n<p>the browsers will send 'Accept-Language' are difference even if the same language. so ahserver using a \"langMapping\" definition to mapping multiple browser lang to same i18n file</p>\n<h2>international</h2>\n<p>ahserver using MiniI18N in appPublic modules in pyutils package to implements i18n support</p>\n<p>it will search translate text in ms* txt file in folder named by language name inside i18n folder in workdir folder, workdir is the folder where the ahserver program resided or identified by command line paraments.</p>\n<h2>performance</h2>\n<p>To be list here</p>\n<h2>environment for processors</h2>\n<p>When coding in processors, ahserver provide some environment stuff for build apllication, there are modules, functions, classes and variables</p>\n<h3>modules:</h3>\n<ul>\n<li>time</li>\n<li>datetime</li>\n<li>random</li>\n<li>json</li>\n</ul>\n<h3>functions:</h3>\n<ul>\n<li>configValue</li>\n<li>isNone</li>\n<li>int</li>\n<li>str</li>\n<li>float</li>\n<li>type</li>\n<li>str2date</li>\n<li>str2datetime</li>\n<li>curDatetime</li>\n<li>uuid</li>\n<li>runSQL</li>\n<li>runSQLPaging</li>\n<li>runSQLIterator</li>\n<li>runSQLResultFields</li>\n<li>getTables</li>\n<li>getTableFields</li>\n<li>getTablePrimaryKey</li>\n<li>getTableForignKeys</li>\n<li>folderInfo</li>\n<li>abspath</li>\n<li>request2ns</li>\n<li>CRUD</li>\n<li>data2xlsx</li>\n<li>xlsxdata</li>\n<li>openfile</li>\n<li>i18n</li>\n<li>i18nDict</li>\n<li>absurl</li>\n<li>abspath</li>\n<li>request2ns</li>\n</ul>\n<h3>variables</h3>\n<ul>\n<li>resource</li>\n<li>terminalType</li>\n</ul>\n<h3>classes</h3>\n<ul>\n<li>ArgsConvert</li>\n</ul>\n\n          </div>"}, "last_serial": 5798095, "releases": {"0.0.2": [{"comment_text": "", "digests": {"md5": "7b284877932371f5de2bb2a22f55e8a4", "sha256": "5c2b30a4c7970050a001651fd6fa4ca5f728676841a83dca7d4dc65896c73a8f"}, "downloads": -1, "filename": "ahserver-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "7b284877932371f5de2bb2a22f55e8a4", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 20403, "upload_time": "2019-09-08T02:45:22", "upload_time_iso_8601": "2019-09-08T02:45:22.814941Z", "url": "https://files.pythonhosted.org/packages/b5/51/3049979cfb6ec3b823f7626985c05c10117e981335bafe1701bee1212fd0/ahserver-0.0.2-py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "7b284877932371f5de2bb2a22f55e8a4", "sha256": "5c2b30a4c7970050a001651fd6fa4ca5f728676841a83dca7d4dc65896c73a8f"}, "downloads": -1, "filename": "ahserver-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "7b284877932371f5de2bb2a22f55e8a4", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 20403, "upload_time": "2019-09-08T02:45:22", "upload_time_iso_8601": "2019-09-08T02:45:22.814941Z", "url": "https://files.pythonhosted.org/packages/b5/51/3049979cfb6ec3b823f7626985c05c10117e981335bafe1701bee1212fd0/ahserver-0.0.2-py3-none-any.whl", "yanked": false}], "timestamp": "Thu May  7 16:22:14 2020"}