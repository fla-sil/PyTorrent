{"info": {"author": "cdp", "author_email": "sucpandu@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Operating System :: MacOS :: MacOS X", "Operating System :: Microsoft :: Windows", "Operating System :: POSIX :: Linux", "Programming Language :: Python", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: System :: Logging"], "description": "# Installation\n\n```\npip install splunk-hec-handler\n```\n\n# Features\n1. Log messages to Splunk via HTTP Event Collector (HEC).\nSee [Splunk HEC Documentation](http://docs.splunk.com/Documentation/Splunk/latest/Data/AboutHEC)\n2. All messages are logged as '_json' sourcetype by default.\n3. A dictionary with 'log_level' and 'message' keys are constructed for logging records of type string.\n\n![String log record representation in Splunk](https://github.com/vavarachen/splunk_http_handler/blob/master/resources/str_record.png)\n\n4. Dictionary objects are preserved as JSON.\n\n![Dictionary log record representation in Splunk](https://github.com/vavarachen/splunk_http_handler/blob/master/resources/dict_record.png)\n\n5. If log record (dict) does not contains a 'time' field,  one is added with the value set to current time.\n\n# Examples\n\n## Basic\n```python\nimport logging\nfrom splunk_hec_handler import SplunkHecHandler\nlogger = logging.getLogger('SplunkHecHandlerExample')\nlogger.setLevel(logging.DEBUG)\n\n# If using self-signed certificate, set ssl_verify to False\n# If using http, set proto to http\nsplunk_handler = SplunkHecHandler('splunkfw.domain.tld',\n                    'EA33046C-6FEC-4DC0-AC66-4326E58B54C3',\n                    port=8888, proto='https', ssl_verify=True,\n                    source=\"HEC_example\")\nlogger.addHandler(splunk_handler)\n```\n\nFollowing should result in a Splunk entry with _time set to current timestamp.\n\n```python\nlogger.info(\"Testing Splunk HEC Info message\")\n```\n\n![Basic Example](https://github.com/vavarachen/splunk_http_handler/blob/master/resources/basic_example.png)\n\nFollowing should result in a Splunk entry of Monday, 08/06/2018 4:33:43 AM, and contain two\ncustom fields (color, api_endpoint).  Custom fields can be seen in verbose mode. \n\n```python\ndict_obj = {'time': 1533530023, 'fields': {'color': 'yellow', 'api_endpoint': '/results'},\n                    'user': 'foobar', 'app': 'my demo', 'severity': 'low', 'error codes': [1, 23, 34, 456]}\nlogger.error(dict_obj)\n```\n\n![Fields Example](https://github.com/vavarachen/splunk_http_handler/blob/master/resources/fields_example.png)\n\n:warning: In order to use custom fields, 'sourcetype' property must be specified in the event \nand sourcetype definition must enable *indexed field extractions*.\n\n\nSee http://dev.splunk.com/view/event-collector/SP-CAAAE6P for 'fields'\n\n## Advanced\nUsing 'fields', many of the metadata fields associated with an event can be changed from the default.  Additionally, new\nfields, which are not part of the event, can be also added.\n\nIn the following example, we are sending events to two different indexes (see \"Select Allowed Indexes (optional)\" setting)\nand overriding 'host', 'source', 'sourcetype' fields, while adding some new fields ('color', 'api_endpoint').\n\n```python\nimport logging\nfrom splunk_hec_handler import SplunkHecHandler\n\nlogger = logging.getLogger('SplunkHecHandlerExample')\nlogger.setLevel(logging.DEBUG)\n\nstream_handler = logging.StreamHandler()\nstream_handler.level = logging.DEBUG\nlogger.addHandler(stream_handler)\n\ntoken = \"EA33046C-6FEC-4DC0-AC66-4326E58B54C3'\nsplunk_handler = SplunkHecHandler('splunkfw.domain.tld',\n                                 token, index=\"hec\",\n                                 port=8080, proto='https', ssl_verify=False\n                                 source=\"evtx2json\", sourcetype='xxxxxxxx_json')\nlogger.addHandler(splunk_handler)\n\n\ndict_obj = {'fields': {'color': 'yellow', 'api_endpoint': '/results', 'host': 'app01', 'index':'hec'},\n            'user': 'foobar', 'app': 'my demo', 'severity': 'low', 'error codes': [1, 23, 34, 456]}\nlogger.info(dict_obj)\n\nlog_summary_evt = {'fields': {'index': 'adhoc', 'sourcetype': '_json', 'source': 'adv_example'}, 'exit code': 0, 'events logged': 100}\nlogger.debug(log_summary_evt)\n```\n\n![Advanced Fields Example](https://github.com/vavarachen/splunk_http_handler/blob/master/resources/advanced_example.png)\n\n\n# Todo\n1. Event acknowledgement support", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/vavarachen/splunk_hec_handler", "keywords": "", "license": "MIT License", "maintainer": "", "maintainer_email": "", "name": "cdphandler-splunk", "package_url": "https://pypi.org/project/cdphandler-splunk/", "platform": "", "project_url": "https://pypi.org/project/cdphandler-splunk/", "project_urls": {"Homepage": "https://github.com/vavarachen/splunk_hec_handler"}, "release_url": "https://pypi.org/project/cdphandler-splunk/1.1.0/", "requires_dist": null, "requires_python": "", "summary": "A Python logging handler to sends logs to Splunk using HTTP event collector (HEC)", "version": "1.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Installation</h1>\n<pre><code>pip install splunk-hec-handler\n</code></pre>\n<h1>Features</h1>\n<ol>\n<li>Log messages to Splunk via HTTP Event Collector (HEC).\nSee <a href=\"http://docs.splunk.com/Documentation/Splunk/latest/Data/AboutHEC\" rel=\"nofollow\">Splunk HEC Documentation</a></li>\n<li>All messages are logged as '_json' sourcetype by default.</li>\n<li>A dictionary with 'log_level' and 'message' keys are constructed for logging records of type string.</li>\n</ol>\n<p><img alt=\"String log record representation in Splunk\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4eca30c71fd5b18bdda576b98520f4befebbc298/68747470733a2f2f6769746875622e636f6d2f7661766172616368656e2f73706c756e6b5f687474705f68616e646c65722f626c6f622f6d61737465722f7265736f75726365732f7374725f7265636f72642e706e67\"></p>\n<ol>\n<li>Dictionary objects are preserved as JSON.</li>\n</ol>\n<p><img alt=\"Dictionary log record representation in Splunk\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c9c6b92822209e098155c454a0faf6ebedc743ce/68747470733a2f2f6769746875622e636f6d2f7661766172616368656e2f73706c756e6b5f687474705f68616e646c65722f626c6f622f6d61737465722f7265736f75726365732f646963745f7265636f72642e706e67\"></p>\n<ol>\n<li>If log record (dict) does not contains a 'time' field,  one is added with the value set to current time.</li>\n</ol>\n<h1>Examples</h1>\n<h2>Basic</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"kn\">from</span> <span class=\"nn\">splunk_hec_handler</span> <span class=\"kn\">import</span> <span class=\"n\">SplunkHecHandler</span>\n<span class=\"n\">logger</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"s1\">'SplunkHecHandlerExample'</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">setLevel</span><span class=\"p\">(</span><span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">DEBUG</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># If using self-signed certificate, set ssl_verify to False</span>\n<span class=\"c1\"># If using http, set proto to http</span>\n<span class=\"n\">splunk_handler</span> <span class=\"o\">=</span> <span class=\"n\">SplunkHecHandler</span><span class=\"p\">(</span><span class=\"s1\">'splunkfw.domain.tld'</span><span class=\"p\">,</span>\n                    <span class=\"s1\">'EA33046C-6FEC-4DC0-AC66-4326E58B54C3'</span><span class=\"p\">,</span>\n                    <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"mi\">8888</span><span class=\"p\">,</span> <span class=\"n\">proto</span><span class=\"o\">=</span><span class=\"s1\">'https'</span><span class=\"p\">,</span> <span class=\"n\">ssl_verify</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n                    <span class=\"n\">source</span><span class=\"o\">=</span><span class=\"s2\">\"HEC_example\"</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">addHandler</span><span class=\"p\">(</span><span class=\"n\">splunk_handler</span><span class=\"p\">)</span>\n</pre>\n<p>Following should result in a Splunk entry with _time set to current timestamp.</p>\n<pre><span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"s2\">\"Testing Splunk HEC Info message\"</span><span class=\"p\">)</span>\n</pre>\n<p><img alt=\"Basic Example\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/109d2829dbb231fa8673f05994a41655f3cd73be/68747470733a2f2f6769746875622e636f6d2f7661766172616368656e2f73706c756e6b5f687474705f68616e646c65722f626c6f622f6d61737465722f7265736f75726365732f62617369635f6578616d706c652e706e67\"></p>\n<p>Following should result in a Splunk entry of Monday, 08/06/2018 4:33:43 AM, and contain two\ncustom fields (color, api_endpoint).  Custom fields can be seen in verbose mode.</p>\n<pre><span class=\"n\">dict_obj</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">'time'</span><span class=\"p\">:</span> <span class=\"mi\">1533530023</span><span class=\"p\">,</span> <span class=\"s1\">'fields'</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'color'</span><span class=\"p\">:</span> <span class=\"s1\">'yellow'</span><span class=\"p\">,</span> <span class=\"s1\">'api_endpoint'</span><span class=\"p\">:</span> <span class=\"s1\">'/results'</span><span class=\"p\">},</span>\n                    <span class=\"s1\">'user'</span><span class=\"p\">:</span> <span class=\"s1\">'foobar'</span><span class=\"p\">,</span> <span class=\"s1\">'app'</span><span class=\"p\">:</span> <span class=\"s1\">'my demo'</span><span class=\"p\">,</span> <span class=\"s1\">'severity'</span><span class=\"p\">:</span> <span class=\"s1\">'low'</span><span class=\"p\">,</span> <span class=\"s1\">'error codes'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">,</span> <span class=\"mi\">34</span><span class=\"p\">,</span> <span class=\"mi\">456</span><span class=\"p\">]}</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">error</span><span class=\"p\">(</span><span class=\"n\">dict_obj</span><span class=\"p\">)</span>\n</pre>\n<p><img alt=\"Fields Example\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/51730e1ad483a2d3aefb4bd361a81864493a734b/68747470733a2f2f6769746875622e636f6d2f7661766172616368656e2f73706c756e6b5f687474705f68616e646c65722f626c6f622f6d61737465722f7265736f75726365732f6669656c64735f6578616d706c652e706e67\"></p>\n<p>:warning: In order to use custom fields, 'sourcetype' property must be specified in the event\nand sourcetype definition must enable <em>indexed field extractions</em>.</p>\n<p>See <a href=\"http://dev.splunk.com/view/event-collector/SP-CAAAE6P\" rel=\"nofollow\">http://dev.splunk.com/view/event-collector/SP-CAAAE6P</a> for 'fields'</p>\n<h2>Advanced</h2>\n<p>Using 'fields', many of the metadata fields associated with an event can be changed from the default.  Additionally, new\nfields, which are not part of the event, can be also added.</p>\n<p>In the following example, we are sending events to two different indexes (see \"Select Allowed Indexes (optional)\" setting)\nand overriding 'host', 'source', 'sourcetype' fields, while adding some new fields ('color', 'api_endpoint').</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"kn\">from</span> <span class=\"nn\">splunk_hec_handler</span> <span class=\"kn\">import</span> <span class=\"n\">SplunkHecHandler</span>\n\n<span class=\"n\">logger</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"s1\">'SplunkHecHandlerExample'</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">setLevel</span><span class=\"p\">(</span><span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">DEBUG</span><span class=\"p\">)</span>\n\n<span class=\"n\">stream_handler</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">StreamHandler</span><span class=\"p\">()</span>\n<span class=\"n\">stream_handler</span><span class=\"o\">.</span><span class=\"n\">level</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">DEBUG</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">addHandler</span><span class=\"p\">(</span><span class=\"n\">stream_handler</span><span class=\"p\">)</span>\n\n<span class=\"n\">token</span> <span class=\"o\">=</span> <span class=\"s2\">\"EA33046C-6FEC-4DC0-AC66-4326E58B54C3'</span>\n<span class=\"n\">splunk_handler</span> <span class=\"o\">=</span> <span class=\"n\">SplunkHecHandler</span><span class=\"p\">(</span><span class=\"s1\">'splunkfw.domain.tld'</span><span class=\"p\">,</span>\n                                 <span class=\"n\">token</span><span class=\"p\">,</span> <span class=\"n\">index</span><span class=\"o\">=</span><span class=\"s2\">\"hec\"</span><span class=\"p\">,</span>\n                                 <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"mi\">8080</span><span class=\"p\">,</span> <span class=\"n\">proto</span><span class=\"o\">=</span><span class=\"s1\">'https'</span><span class=\"p\">,</span> <span class=\"n\">ssl_verify</span><span class=\"o\">=</span><span class=\"kc\">False</span>\n                                 <span class=\"n\">source</span><span class=\"o\">=</span><span class=\"s2\">\"evtx2json\"</span><span class=\"p\">,</span> <span class=\"n\">sourcetype</span><span class=\"o\">=</span><span class=\"s1\">'xxxxxxxx_json'</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">addHandler</span><span class=\"p\">(</span><span class=\"n\">splunk_handler</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">dict_obj</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">'fields'</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'color'</span><span class=\"p\">:</span> <span class=\"s1\">'yellow'</span><span class=\"p\">,</span> <span class=\"s1\">'api_endpoint'</span><span class=\"p\">:</span> <span class=\"s1\">'/results'</span><span class=\"p\">,</span> <span class=\"s1\">'host'</span><span class=\"p\">:</span> <span class=\"s1\">'app01'</span><span class=\"p\">,</span> <span class=\"s1\">'index'</span><span class=\"p\">:</span><span class=\"s1\">'hec'</span><span class=\"p\">},</span>\n            <span class=\"s1\">'user'</span><span class=\"p\">:</span> <span class=\"s1\">'foobar'</span><span class=\"p\">,</span> <span class=\"s1\">'app'</span><span class=\"p\">:</span> <span class=\"s1\">'my demo'</span><span class=\"p\">,</span> <span class=\"s1\">'severity'</span><span class=\"p\">:</span> <span class=\"s1\">'low'</span><span class=\"p\">,</span> <span class=\"s1\">'error codes'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">23</span><span class=\"p\">,</span> <span class=\"mi\">34</span><span class=\"p\">,</span> <span class=\"mi\">456</span><span class=\"p\">]}</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"n\">dict_obj</span><span class=\"p\">)</span>\n\n<span class=\"n\">log_summary_evt</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">'fields'</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s1\">'index'</span><span class=\"p\">:</span> <span class=\"s1\">'adhoc'</span><span class=\"p\">,</span> <span class=\"s1\">'sourcetype'</span><span class=\"p\">:</span> <span class=\"s1\">'_json'</span><span class=\"p\">,</span> <span class=\"s1\">'source'</span><span class=\"p\">:</span> <span class=\"s1\">'adv_example'</span><span class=\"p\">},</span> <span class=\"s1\">'exit code'</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">'events logged'</span><span class=\"p\">:</span> <span class=\"mi\">100</span><span class=\"p\">}</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">(</span><span class=\"n\">log_summary_evt</span><span class=\"p\">)</span>\n</pre>\n<p><img alt=\"Advanced Fields Example\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5fee4a3b789bd847e187c4959fbb9fcf64c5bb25/68747470733a2f2f6769746875622e636f6d2f7661766172616368656e2f73706c756e6b5f687474705f68616e646c65722f626c6f622f6d61737465722f7265736f75726365732f616476616e6365645f6578616d706c652e706e67\"></p>\n<h1>Todo</h1>\n<ol>\n<li>Event acknowledgement support</li>\n</ol>\n\n          </div>"}, "last_serial": 5996255, "releases": {"1.1.0": [{"comment_text": "", "digests": {"md5": "a3655eb63dc09323028a391093c870ec", "sha256": "48ba7a0502483e6866462a162f7c1baa2fe3ce267afb3bdb4137f7d61b1e5592"}, "downloads": -1, "filename": "cdphandler_splunk-1.1.0.tar.gz", "has_sig": false, "md5_digest": "a3655eb63dc09323028a391093c870ec", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5361, "upload_time": "2019-10-18T15:44:19", "upload_time_iso_8601": "2019-10-18T15:44:19.274985Z", "url": "https://files.pythonhosted.org/packages/0a/86/f6ecbc9d9ada5e17b9c1d6b26fbd9b67da552d00f5de65338f8a89fb9067/cdphandler_splunk-1.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "a3655eb63dc09323028a391093c870ec", "sha256": "48ba7a0502483e6866462a162f7c1baa2fe3ce267afb3bdb4137f7d61b1e5592"}, "downloads": -1, "filename": "cdphandler_splunk-1.1.0.tar.gz", "has_sig": false, "md5_digest": "a3655eb63dc09323028a391093c870ec", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5361, "upload_time": "2019-10-18T15:44:19", "upload_time_iso_8601": "2019-10-18T15:44:19.274985Z", "url": "https://files.pythonhosted.org/packages/0a/86/f6ecbc9d9ada5e17b9c1d6b26fbd9b67da552d00f5de65338f8a89fb9067/cdphandler_splunk-1.1.0.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:34:55 2020"}