{"info": {"author": "Depop", "author_email": "dev@depop.com", "bugtrack_url": null, "classifiers": ["Environment :: Plugins", "Intended Audience :: Developers", "License :: OSI Approved :: Apache Software License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.6"], "description": "flexisettings\n=============\n\n|PyPI Version| |Build Status|\n\n.. |PyPI Version| image:: http://img.shields.io/pypi/v/flexisettings.svg?style=flat\n   :target: https://pypi.python.org/pypi/flexisettings/\n   :alt: Latest PyPI version\n\n.. |Build Status| image:: https://circleci.com/gh/depop/python-flexisettings.svg?style=shield&circle-token=ae7b355ec3b18c69d3370898a69932091c43d152\n    :alt: Build Status\n\nPartly inspired by Django's ``from django.conf import settings`` settings object.\n\nThe goal is to allow shared libraries to be configured by a settings file in\nthe project which imports them (like how Django libraries can expect the Django\n``settings`` object to exist).\n\nUsage\n-----\n\n.. code:: bash\n\n    pip install flexisettings\n\nWe want the shared lib to be able to load config values *from the app which is*\n*importing it*.\n\nA suggested layout would be as found in ``test_project/test_lib`` in this repo.\nFor example, create a ``test_lib/conf/__init__.py`` like:\n\n.. code:: python\n\n\tfrom flexisettings import Settings\n\n\tsettings = Settings(initial_namespace='TEST_LIB', defaults='test_lib.conf.defaults')\n\nWe have a concept of customisable 'namespace' (prefix) for config values. This\nis as defined by the `ConfigLoader <https://pypi.python.org/pypi/configloader>`_\nlib we are making use of.\n\n``initial_namespace`` is the default namespace for config values of your shared\nlib. Projects who want to use your lib will be able to customise the namespace,\nbut as they are used for bootstrapping there are two config values which will\n*always* use the default name (``APP_CONFIG`` and ``CONFIG_NAMESPACE``).\n\nSo for example, say ``myapp`` wants to use ``test_lib``. ``myapp`` can\ncustomise the namespace by defining ``TEST_LIB_CONFIG_NAMESPACE = 'CUSTOM'``.\n\n``defaults`` is the import path to a python module or object *in your shared lib*\nwhich contains default values for your config. These keys should *not* be\nnamespaced.\n\nFor example if you want the config namespace for your shared lib to be\nconfigurable via env var you could create ``test_lib/conf/defaults.py`` like:\n\n.. code:: python\n\n\timport os\n\n\t# namespace for config keys loaded from e.g. Django conf or env vars\n\tCONFIG_NAMESPACE = os.getenv('TEST_LIB_CONFIG_NAMESPACE', 'TEST_LIB')\n\n\tAPP_CONFIG = os.getenv('TEST_LIB_APP_CONFIG', None)\n\nThen ``myapp`` would be able to ``export TEST_LIB_CONFIG_NAMESPACE=CUSTOM``.\n\nThat explains namespace customisation a bit, what about the ``APP_CONFIG``?\n\nSay for example that ``myapp`` is a Django website and ``test_lib`` has the\ndefaults file shown above. In your ``myapp`` project you could:\n\n.. code:: bash\n\n\texport TEST_LIB_CONFIG_NAMESPACE=CUSTOM\n\texport TEST_LIB_APP_CONFIG=django.conf.settings\n\nThen in ``myapp/settings.py`` you could have:\n\n.. code:: python\n\n\tCUSTOM_VAR1 = 'whatever'\n\nNow, recall the ``test_lib/conf/__init__.py`` that we created at the start. In\nyour ``test_lib`` code you could have:\n\n.. code:: python\n\n\tfrom test_lib.conf import settings\n\n\tassert settings.VAR1 == 'whatever'\n\nAs you can see the ``VAR1`` was set in the importing project's Django settings\nwith the ``CUSTOM_`` prefix but is available in your shared lib's ``settings``\nobject under its non-prefixed name.\n\nCompatibility\n-------------\n\nThis project is tested against:\n\n=========== ===\nPython 2.7   * \nPython 3.6   * \n=========== ===\n\nRunning the tests\n-----------------\n\nCircleCI\n~~~~~~~~\n\n| The easiest way to test the full version matrix is to install the\n  CircleCI command line app:\n| https://circleci.com/docs/2.0/local-jobs/\n| (requires Docker)\n\nThe cli does not support 'workflows' at the moment so you have to run\nthe two Python version jobs separately:\n\n.. code:: bash\n\n    circleci build --job python-2.7\n\n.. code:: bash\n\n    circleci build --job python-3.6\n\npy.test (single python version)\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nIt's also possible to run the tests locally, allowing for debugging of\nerrors that occur.\n\nNow decide which Python version you want to test and create a virtualenv:\n\n.. code:: bash\n\n    pyenv virtualenv 3.6.4 flexisettings\n    pip install -r requirements-test.txt\n\nThe code in ``test_project`` demonstrates collaborative config between a shared\nlibrary ``test_lib`` and the app that wants to use it ``app``. Set the path to\nthe test project\n\n.. code:: bash\n\n    make test", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/depop/python-flexisettings", "keywords": "", "license": "Apache 2.0", "maintainer": "", "maintainer_email": "", "name": "flexisettings", "package_url": "https://pypi.org/project/flexisettings/", "platform": "", "project_url": "https://pypi.org/project/flexisettings/", "project_urls": {"Homepage": "https://github.com/depop/python-flexisettings"}, "release_url": "https://pypi.org/project/flexisettings/1.0.3/", "requires_dist": null, "requires_python": "", "summary": "Overridable config for shared libraries.", "version": "1.0.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://pypi.python.org/pypi/flexisettings/\" rel=\"nofollow\"><img alt=\"Latest PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1cd6673d3dc2b91e40d960ad673313eba9c391e8/687474703a2f2f696d672e736869656c64732e696f2f707970692f762f666c65786973657474696e67732e7376673f7374796c653d666c6174\"></a> <img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/43681c0c5a960ade1c6e989ec0cc1e68ae7bf363/68747470733a2f2f636972636c6563692e636f6d2f67682f6465706f702f707974686f6e2d666c65786973657474696e67732e7376673f7374796c653d736869656c6426636972636c652d746f6b656e3d61653762333535656333623138633639643333373038393861363939333230393163343364313532\"></p>\n<p>Partly inspired by Django\u2019s <tt>from django.conf import settings</tt> settings object.</p>\n<p>The goal is to allow shared libraries to be configured by a settings file in\nthe project which imports them (like how Django libraries can expect the Django\n<tt>settings</tt> object to exist).</p>\n<div id=\"usage\">\n<h2>Usage</h2>\n<pre>pip install flexisettings\n</pre>\n<p>We want the shared lib to be able to load config values <em>from the app which is</em>\n<em>importing it</em>.</p>\n<p>A suggested layout would be as found in <tt>test_project/test_lib</tt> in this repo.\nFor example, create a <tt>test_lib/conf/__init__.py</tt> like:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flexisettings</span> <span class=\"kn\">import</span> <span class=\"n\">Settings</span>\n\n<span class=\"n\">settings</span> <span class=\"o\">=</span> <span class=\"n\">Settings</span><span class=\"p\">(</span><span class=\"n\">initial_namespace</span><span class=\"o\">=</span><span class=\"s1\">'TEST_LIB'</span><span class=\"p\">,</span> <span class=\"n\">defaults</span><span class=\"o\">=</span><span class=\"s1\">'test_lib.conf.defaults'</span><span class=\"p\">)</span>\n</pre>\n<p>We have a concept of customisable \u2018namespace\u2019 (prefix) for config values. This\nis as defined by the <a href=\"https://pypi.python.org/pypi/configloader\" rel=\"nofollow\">ConfigLoader</a>\nlib we are making use of.</p>\n<p><tt>initial_namespace</tt> is the default namespace for config values of your shared\nlib. Projects who want to use your lib will be able to customise the namespace,\nbut as they are used for bootstrapping there are two config values which will\n<em>always</em> use the default name (<tt>APP_CONFIG</tt> and <tt>CONFIG_NAMESPACE</tt>).</p>\n<p>So for example, say <tt>myapp</tt> wants to use <tt>test_lib</tt>. <tt>myapp</tt> can\ncustomise the namespace by defining <tt>TEST_LIB_CONFIG_NAMESPACE = 'CUSTOM'</tt>.</p>\n<p><tt>defaults</tt> is the import path to a python module or object <em>in your shared lib</em>\nwhich contains default values for your config. These keys should <em>not</em> be\nnamespaced.</p>\n<p>For example if you want the config namespace for your shared lib to be\nconfigurable via env var you could create <tt>test_lib/conf/defaults.py</tt> like:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">os</span>\n\n<span class=\"c1\"># namespace for config keys loaded from e.g. Django conf or env vars</span>\n<span class=\"n\">CONFIG_NAMESPACE</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getenv</span><span class=\"p\">(</span><span class=\"s1\">'TEST_LIB_CONFIG_NAMESPACE'</span><span class=\"p\">,</span> <span class=\"s1\">'TEST_LIB'</span><span class=\"p\">)</span>\n\n<span class=\"n\">APP_CONFIG</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getenv</span><span class=\"p\">(</span><span class=\"s1\">'TEST_LIB_APP_CONFIG'</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n</pre>\n<p>Then <tt>myapp</tt> would be able to <tt>export TEST_LIB_CONFIG_NAMESPACE=CUSTOM</tt>.</p>\n<p>That explains namespace customisation a bit, what about the <tt>APP_CONFIG</tt>?</p>\n<p>Say for example that <tt>myapp</tt> is a Django website and <tt>test_lib</tt> has the\ndefaults file shown above. In your <tt>myapp</tt> project you could:</p>\n<pre><span class=\"nb\">export</span> <span class=\"nv\">TEST_LIB_CONFIG_NAMESPACE</span><span class=\"o\">=</span>CUSTOM\n<span class=\"nb\">export</span> <span class=\"nv\">TEST_LIB_APP_CONFIG</span><span class=\"o\">=</span>django.conf.settings\n</pre>\n<p>Then in <tt>myapp/settings.py</tt> you could have:</p>\n<pre><span class=\"n\">CUSTOM_VAR1</span> <span class=\"o\">=</span> <span class=\"s1\">'whatever'</span>\n</pre>\n<p>Now, recall the <tt>test_lib/conf/__init__.py</tt> that we created at the start. In\nyour <tt>test_lib</tt> code you could have:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">test_lib.conf</span> <span class=\"kn\">import</span> <span class=\"n\">settings</span>\n\n<span class=\"k\">assert</span> <span class=\"n\">settings</span><span class=\"o\">.</span><span class=\"n\">VAR1</span> <span class=\"o\">==</span> <span class=\"s1\">'whatever'</span>\n</pre>\n<p>As you can see the <tt>VAR1</tt> was set in the importing project\u2019s Django settings\nwith the <tt>CUSTOM_</tt> prefix but is available in your shared lib\u2019s <tt>settings</tt>\nobject under its non-prefixed name.</p>\n</div>\n<div id=\"compatibility\">\n<h2>Compatibility</h2>\n<p>This project is tested against:</p>\n<table>\n<colgroup>\n<col>\n<col>\n</colgroup>\n<tbody>\n<tr><td>Python 2.7</td>\n<td><ul>\n<li>\n</ul>\n</td>\n</tr>\n<tr><td>Python 3.6</td>\n<td><ul>\n<li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div id=\"running-the-tests\">\n<h2>Running the tests</h2>\n<div id=\"circleci\">\n<h3>CircleCI</h3>\n<div>\n<div>The easiest way to test the full version matrix is to install the\nCircleCI command line app:</div>\n<div><a href=\"https://circleci.com/docs/2.0/local-jobs/\" rel=\"nofollow\">https://circleci.com/docs/2.0/local-jobs/</a></div>\n<div>(requires Docker)</div>\n</div>\n<p>The cli does not support \u2018workflows\u2019 at the moment so you have to run\nthe two Python version jobs separately:</p>\n<pre>circleci build --job python-2.7\n</pre>\n<pre>circleci build --job python-3.6\n</pre>\n</div>\n<div id=\"py-test-single-python-version\">\n<h3>py.test (single python version)</h3>\n<p>It\u2019s also possible to run the tests locally, allowing for debugging of\nerrors that occur.</p>\n<p>Now decide which Python version you want to test and create a virtualenv:</p>\n<pre>pyenv virtualenv <span class=\"m\">3</span>.6.4 flexisettings\npip install -r requirements-test.txt\n</pre>\n<p>The code in <tt>test_project</tt> demonstrates collaborative config between a shared\nlibrary <tt>test_lib</tt> and the app that wants to use it <tt>app</tt>. Set the path to\nthe test project</p>\n<pre>make <span class=\"nb\">test</span>\n</pre>\n</div>\n</div>\n\n          </div>"}, "last_serial": 3929225, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "7b4cd35877dff96abb1696e12cadc310", "sha256": "8423b707ec2f910767c1ccfbe0cdbf94dac3e4789bf785307b53a86bd4d8aee1"}, "downloads": -1, "filename": "flexisettings-1.0.0.tar.gz", "has_sig": false, "md5_digest": "7b4cd35877dff96abb1696e12cadc310", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4863, "upload_time": "2017-11-03T10:25:08", "upload_time_iso_8601": "2017-11-03T10:25:08.440336Z", "url": "https://files.pythonhosted.org/packages/b9/dd/f979e785d0eb84e4c86154d0e36d488e3e1249c2f749cb6aa0a8e8404b2d/flexisettings-1.0.0.tar.gz", "yanked": false}], "1.0.1": [{"comment_text": "", "digests": {"md5": "278a98ec2427af5a57cd4a89fa888f61", "sha256": "7a2fd8efd356aa6458a37f72f2f642ed81786a5201d644c8ef308ec1a4c057b9"}, "downloads": -1, "filename": "flexisettings-1.0.1.tar.gz", "has_sig": false, "md5_digest": "278a98ec2427af5a57cd4a89fa888f61", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4979, "upload_time": "2018-02-19T16:07:59", "upload_time_iso_8601": "2018-02-19T16:07:59.382959Z", "url": "https://files.pythonhosted.org/packages/01/75/9b9ad5cf90b1aa25f387144ace0e70dbb6058134cb60a3037dc76b53487f/flexisettings-1.0.1.tar.gz", "yanked": false}], "1.0.2": [{"comment_text": "", "digests": {"md5": "443f75a645e33a27dd4be8286af5e6f6", "sha256": "7449c9ef79b6f2124f6a65162a69233e84f21cc240ddcb4dbb95ff6f7ac0126b"}, "downloads": -1, "filename": "flexisettings-1.0.2.tar.gz", "has_sig": false, "md5_digest": "443f75a645e33a27dd4be8286af5e6f6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4972, "upload_time": "2018-03-15T10:12:05", "upload_time_iso_8601": "2018-03-15T10:12:05.882147Z", "url": "https://files.pythonhosted.org/packages/8e/30/e12d1cf8c60fac91ee8bd728da0d7dabf4c3a54737311196b793a8beacfa/flexisettings-1.0.2.tar.gz", "yanked": false}], "1.0.3": [{"comment_text": "", "digests": {"md5": "d6bf323b439bb0bffae9d40191302afa", "sha256": "0d058b9c7238e57310850461ddc9d1ad08ea71351970ab29f9d16bc5a5559b09"}, "downloads": -1, "filename": "flexisettings-1.0.3.tar.gz", "has_sig": false, "md5_digest": "d6bf323b439bb0bffae9d40191302afa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5339, "upload_time": "2018-06-04T16:24:15", "upload_time_iso_8601": "2018-06-04T16:24:15.913377Z", "url": "https://files.pythonhosted.org/packages/1c/39/25d538aaab21c503a557d213bddaf41b7b308fb778eafcadb94557436a15/flexisettings-1.0.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d6bf323b439bb0bffae9d40191302afa", "sha256": "0d058b9c7238e57310850461ddc9d1ad08ea71351970ab29f9d16bc5a5559b09"}, "downloads": -1, "filename": "flexisettings-1.0.3.tar.gz", "has_sig": false, "md5_digest": "d6bf323b439bb0bffae9d40191302afa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5339, "upload_time": "2018-06-04T16:24:15", "upload_time_iso_8601": "2018-06-04T16:24:15.913377Z", "url": "https://files.pythonhosted.org/packages/1c/39/25d538aaab21c503a557d213bddaf41b7b308fb778eafcadb94557436a15/flexisettings-1.0.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 01:01:55 2020"}