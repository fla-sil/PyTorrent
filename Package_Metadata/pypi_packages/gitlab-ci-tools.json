{"info": {"author": "Joseph Weston", "author_email": "joseph@weston.cloud", "bugtrack_url": null, "classifiers": [], "description": "Gitlab CI Tools\n===============\n.. badges-start\n\n\n.. image:: https://gitlab.com/jbweston/gitlab-ci-tools/badges/master/build.svg\n   :target: https://gitlab.com/jbweston/gitlab-ci-tools/badges/master/build.svg\n   :alt: Build status\n\n.. image:: https://img.shields.io/pypi/l/gitlab-ci-tools.svg\n   :target: https://img.shields.io/pypi/l/gitlab-ci-tools.svg\n   :alt: License\n\n.. image:: https://img.shields.io/pypi/v/gitlab-ci-tools.svg\n   :target: https://img.shields.io/pypi/v/gitlab-ci-tools.svg\n   :alt: PyPi package\n\n.. badges-end\n\nScripts for getting useful information (e.g. the git hash of the last successful build) from within Gitlab CI \n\nOverview\n--------\nOften when using Gitlab CI you need information that is not\navailable from the `environment variables`_ provided by the CI\nrunner. This package contains a collection of scripts for obtaining\ninformation from the Gitlab API\n\n.. _environment variables: https://docs.gitlab.com/ce/ci/variables/\n\nLicense\n-------\n``gitlab-ci-tools`` is licensed under the simplfied (2-clause) BSD licence.\nSee the LICENSE_ file for details.\n\n.. _LICENSE: LICENSE\n\nInstallation\n------------\nThe scripts are written in Python 3, so this will need to be installed\nprior to the following::\n\n    pip3 install gitlab-ci-tools\n\nYou can install the package on your local computer to test out\nthe scripts (see the Usage section for details), however typically\nyou will want to install this package into the Gitlab CI environment.\n\nThe simplest way to accomplish this is to add the following to the top\nof your ``.gitlab-ci.yml``::\n\n    before_script:\n        - pip3 install gitlab-ci-tools\n\n\nUsage\n-----\nInstalling ``gitlab-ci-tools`` installs a bunch of scripts that you can\nrun from the command line. See the next section for a list of the installed\ntools.\n\nIn order for the scripts to be able to access the Gitlab API you must\nprovide a CI secret variable ``GITLAB_API_TOKEN`` that contains a\npersonal access token with ``api`` scope (check out `these instructions`_ to\nfind out how to generate one).\n\nSecurity Considerations\n~~~~~~~~~~~~~~~~~~~~~~~\n\nUnfortunately Gitlab's API permissions are not very granular, so\n**anyone with access to this token is, effectively, you** (at least as\nfar as Gitlab is concerned). If people you don't trust have access to\nyour CI (e.g. they can make CI-triggering commits to your repository)\n**this is a bad idea**. There are several outstanding issues on Gitlab\n(e.g. `#29566`_ and `#41084`_) that attempt to address the problem of\nauthenticated API access from within CI runners.\n\n.. _these instructions: https://docs.gitlab.com/ce/user/profile/personal_access_tokens.html#creating-a-personal-access-token\n.. _#29566: https://gitlab.com/gitlab-org/gitlab-ce/issues/29566\n.. _#41084: https://gitlab.com/gitlab-org/gitlab-ce/issues/41084\n\nList of Tools\n-------------\n\n``last-good-build``\n~~~~~~~~~~~~~~~~~~~\nPrint the Git hash of the last successful build for the current branch.\nAn useful example would be generating a PDF of the diff between two Latex\ndocuments::\n\n    before_script:\n      pip install gitlab-ci-tools\n      LAST_GOOD_BUILD=$(last-good-build || echo '')\n\n    report diff:\n      script:\n        - git show $LAST_GOOD_BUILD:important_doc.tex > old_doc.tex\n        - latexdiff old_doc.tex important_doc.tex > diff_doc.tex\n        - latexmk -pdf diff_doc.tex\n      artifacts:\n        paths:\n          - diff_doc.pdf\n\nContributing\n------------\nI would be happy to add more tools here, not just ones that I find useful.\nIt would be good if the script were to follow a similar structure to the\nexisting ones (i.e. provide a ``main()`` function, and expose a command line\nthat can be driven with command-line options or with environment variables),\nbut I am happy to guide anyone through this process if need be.\n\nOnce there is more than a single script we can start to think about how best\nto separate out common functionlity so that we can reduce boilerplate.\n\n\n", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/jbweston/gitlab-ci-tools", "keywords": "", "license": "BSD 2-Clause", "maintainer": "", "maintainer_email": "", "name": "gitlab-ci-tools", "package_url": "https://pypi.org/project/gitlab-ci-tools/", "platform": "GNU/Linux", "project_url": "https://pypi.org/project/gitlab-ci-tools/", "project_urls": {"Homepage": "https://github.com/jbweston/gitlab-ci-tools"}, "release_url": "https://pypi.org/project/gitlab-ci-tools/0.1.0/", "requires_dist": ["python-gitlab", "pep8; extra == 'dev'", "pylint; extra == 'dev'"], "requires_python": "", "summary": "Tools for working inside Gitlab CI", "version": "0.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://gitlab.com/jbweston/gitlab-ci-tools/badges/master/build.svg\" rel=\"nofollow\"><img alt=\"Build status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/430e11b5bbe05a34ca60f2d4a51faeac84757bb7/68747470733a2f2f6769746c61622e636f6d2f6a62776573746f6e2f6769746c61622d63692d746f6f6c732f6261646765732f6d61737465722f6275696c642e737667\"></a>\n<a href=\"https://img.shields.io/pypi/l/gitlab-ci-tools.svg\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/233818cc05600df3f2315cafda2cb1b8b5a27530/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f6769746c61622d63692d746f6f6c732e737667\"></a>\n<a href=\"https://img.shields.io/pypi/v/gitlab-ci-tools.svg\" rel=\"nofollow\"><img alt=\"PyPi package\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/dd8e33245158361efbbe3e7c0e1573183aefcc02/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6769746c61622d63692d746f6f6c732e737667\"></a>\n<p>Scripts for getting useful information (e.g. the git hash of the last successful build) from within Gitlab CI</p>\n<div id=\"overview\">\n<h2>Overview</h2>\n<p>Often when using Gitlab CI you need information that is not\navailable from the <a href=\"https://docs.gitlab.com/ce/ci/variables/\" rel=\"nofollow\">environment variables</a> provided by the CI\nrunner. This package contains a collection of scripts for obtaining\ninformation from the Gitlab API</p>\n</div>\n<div id=\"license\">\n<h2>License</h2>\n<p><tt><span class=\"pre\">gitlab-ci-tools</span></tt> is licensed under the simplfied (2-clause) BSD licence.\nSee the <a href=\"LICENSE\" rel=\"nofollow\">LICENSE</a> file for details.</p>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p>The scripts are written in Python 3, so this will need to be installed\nprior to the following:</p>\n<pre>pip3 install gitlab-ci-tools\n</pre>\n<p>You can install the package on your local computer to test out\nthe scripts (see the Usage section for details), however typically\nyou will want to install this package into the Gitlab CI environment.</p>\n<p>The simplest way to accomplish this is to add the following to the top\nof your <tt><span class=\"pre\">.gitlab-ci.yml</span></tt>:</p>\n<pre>before_script:\n    - pip3 install gitlab-ci-tools\n</pre>\n</div>\n<div id=\"usage\">\n<h2>Usage</h2>\n<p>Installing <tt><span class=\"pre\">gitlab-ci-tools</span></tt> installs a bunch of scripts that you can\nrun from the command line. See the next section for a list of the installed\ntools.</p>\n<p>In order for the scripts to be able to access the Gitlab API you must\nprovide a CI secret variable <tt>GITLAB_API_TOKEN</tt> that contains a\npersonal access token with <tt>api</tt> scope (check out <a href=\"https://docs.gitlab.com/ce/user/profile/personal_access_tokens.html#creating-a-personal-access-token\" rel=\"nofollow\">these instructions</a> to\nfind out how to generate one).</p>\n<div id=\"security-considerations\">\n<h3>Security Considerations</h3>\n<p>Unfortunately Gitlab\u2019s API permissions are not very granular, so\n<strong>anyone with access to this token is, effectively, you</strong> (at least as\nfar as Gitlab is concerned). If people you don\u2019t trust have access to\nyour CI (e.g. they can make CI-triggering commits to your repository)\n<strong>this is a bad idea</strong>. There are several outstanding issues on Gitlab\n(e.g. <a href=\"https://gitlab.com/gitlab-org/gitlab-ce/issues/29566\" rel=\"nofollow\">#29566</a> and <a href=\"https://gitlab.com/gitlab-org/gitlab-ce/issues/41084\" rel=\"nofollow\">#41084</a>) that attempt to address the problem of\nauthenticated API access from within CI runners.</p>\n</div>\n</div>\n<div id=\"list-of-tools\">\n<h2>List of Tools</h2>\n<h2 id=\"last-good-build\"><span class=\"section-subtitle\"><tt><span class=\"pre\">last-good-build</span></tt></span></h2>\n<p>Print the Git hash of the last successful build for the current branch.\nAn useful example would be generating a PDF of the diff between two Latex\ndocuments:</p>\n<pre>before_script:\n  pip install gitlab-ci-tools\n  LAST_GOOD_BUILD=$(last-good-build || echo '')\n\nreport diff:\n  script:\n    - git show $LAST_GOOD_BUILD:important_doc.tex &gt; old_doc.tex\n    - latexdiff old_doc.tex important_doc.tex &gt; diff_doc.tex\n    - latexmk -pdf diff_doc.tex\n  artifacts:\n    paths:\n      - diff_doc.pdf\n</pre>\n</div>\n<div id=\"contributing\">\n<h2>Contributing</h2>\n<p>I would be happy to add more tools here, not just ones that I find useful.\nIt would be good if the script were to follow a similar structure to the\nexisting ones (i.e. provide a <tt>main()</tt> function, and expose a command line\nthat can be driven with command-line options or with environment variables),\nbut I am happy to guide anyone through this process if need be.</p>\n<p>Once there is more than a single script we can start to think about how best\nto separate out common functionlity so that we can reduce boilerplate.</p>\n</div>\n\n          </div>"}, "last_serial": 3546376, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "68e23cf30e5156e78951e10fe1555f9c", "sha256": "d78f7993a84d5b3be801cbeccf8ffac8a68cf19ad624f7390a9360ea8f6babaa"}, "downloads": -1, "filename": "gitlab_ci_tools-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "68e23cf30e5156e78951e10fe1555f9c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7735, "upload_time": "2018-02-02T17:32:35", "upload_time_iso_8601": "2018-02-02T17:32:35.732947Z", "url": "https://files.pythonhosted.org/packages/c5/2c/1dc9ebea43d79f41bf832ce4c65ff49a7074341c06bbb3c1889674d9b9e7/gitlab_ci_tools-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "23c681234049b00792937d6d41e8b37e", "sha256": "52335836cec49ce13a443def989e0ad52f25fc664c5e2ef8750d039629861755"}, "downloads": -1, "filename": "gitlab-ci-tools-0.1.0.tar.gz", "has_sig": false, "md5_digest": "23c681234049b00792937d6d41e8b37e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 21194, "upload_time": "2018-02-02T17:32:38", "upload_time_iso_8601": "2018-02-02T17:32:38.085250Z", "url": "https://files.pythonhosted.org/packages/d2/88/c6fca2a306565802e5c3f7a26cdf6f86a5a5385e62facb0000133a987c30/gitlab-ci-tools-0.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "68e23cf30e5156e78951e10fe1555f9c", "sha256": "d78f7993a84d5b3be801cbeccf8ffac8a68cf19ad624f7390a9360ea8f6babaa"}, "downloads": -1, "filename": "gitlab_ci_tools-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "68e23cf30e5156e78951e10fe1555f9c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7735, "upload_time": "2018-02-02T17:32:35", "upload_time_iso_8601": "2018-02-02T17:32:35.732947Z", "url": "https://files.pythonhosted.org/packages/c5/2c/1dc9ebea43d79f41bf832ce4c65ff49a7074341c06bbb3c1889674d9b9e7/gitlab_ci_tools-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "23c681234049b00792937d6d41e8b37e", "sha256": "52335836cec49ce13a443def989e0ad52f25fc664c5e2ef8750d039629861755"}, "downloads": -1, "filename": "gitlab-ci-tools-0.1.0.tar.gz", "has_sig": false, "md5_digest": "23c681234049b00792937d6d41e8b37e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 21194, "upload_time": "2018-02-02T17:32:38", "upload_time_iso_8601": "2018-02-02T17:32:38.085250Z", "url": "https://files.pythonhosted.org/packages/d2/88/c6fca2a306565802e5c3f7a26cdf6f86a5a5385e62facb0000133a987c30/gitlab-ci-tools-0.1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:56:55 2020"}