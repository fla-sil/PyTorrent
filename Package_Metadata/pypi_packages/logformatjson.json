{"info": {"author": "Ryan Richard", "author_email": "ryan@kumoru.io", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: Apache Software License", "Natural Language :: English", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.4", "Topic :: Software Development :: Libraries", "Topic :: System :: Logging"], "description": "=============\nlogformatjson\n=============\n\n``logformatjson`` is a library that provides a simple JSON formatter for the standard python logging package. It allows for nested arbitrary metadata to be inserted at instantiation and run time. The library is opionanted but attempts to allow most opinions to be overridden.\n\n**warning**: This library is under active development. The log format and API are expected to change.\n\n.. image:: https://circleci.com/gh/kumoru/logformatjson.svg?style=svg\n    :target: https://circleci.com/gh/kumoru/logformatjson\n\n\nInstall\n-------\n\n* via ``pip``:\n\n.. code-block:: shell\n\n        pip install logformatjson\n\nExamples\n========\n\n1. basic usage - JSONFormatter can be set on any handler as your would expect:\n\n.. code-block:: python\n\n        import logging\n        import sys\n        from logformatjson import JSONFormatter\n\n        LOGGER = logging.getLogger()\n        LOGGER.setLevel(logging.DEBUG)\n        log_handler = logging.StreamHandler(sys.stdout)\n        log_handler.setFormatter(JSONFormatter())\n        LOGGER.addHandler(log_handler)\n\n        LOGGER.debug('this is my debug message', extra={'some_key': 'important_value'})\n\nwhich produces the following json (from ipython):\n\n.. code-block:: javascript\n\n        {\n          \"timestamp\": \"2016-02-19T19:39:17.061886\",\n          \"message\": \"this is my debug message\",\n          \"levelname\": \"DEBUG\",\n          \"metadata\": {\n            \"filename\": \"test.py\",\n            \"funcName\": \"<module>\",\n            \"extra\": {\n              \"some_key\": \"important_value\"\n            },\n            \"log_type\": \"python\",\n            \"lineno\": 11,\n            \"module\": \"test\",\n            \"pathname\": \"test.py\"\n          },\n          \"log_version\": \"1.0\"\n        }\n\n2. Adding an additional metadata in **every** log entry:\n\n.. code-block:: python\n\n        \u2026\n        log_handler.setFormatter(JSONFormatter(metadata={'application_version': '1.0.0'}))\n        \u2026\n\n3. Overriding the defaults at instantiation:\n\n    * Override attributes copied or skipped from the LogRecord_:\n        .. code-block:: python\n\n                \u2026\n                log_handler.setFormatter(JSONFormatter(kept_attrs= ['created', \u2026]))\n                log_handler.setFormatter(JSONFormatter(skipped_attrs= ['filename', \u2026]))\n                \u2026\n\n    * Override the provided json encoder:\n\n        .. code-block:: python\n\n                def my_json_encoder(obj):\n                  return int(obj)\n\n                \u2026\n                log_handler.setFormatter(JSONFormatter(json_encoder = my_json_encoder))\n                \u2026\n\n\n\n\n4. Override the defaults at runtime:\n\n    * Log type (intended to be mixed with extra fields):\n\n        .. code-block:: python\n\n                \u2026\n                logger.debug('GET / HTTP/1.1', log_type='HTTP'}\n                \u2026\n\n5. Extra fields:\n\n        .. code-block:: python\n\n                \u2026\n                LOGGER.debug('this is my debug message', extra={'some_key': 'important_value'})\n                \u2026\n\n\n.. _LogRecord: https://docs.python.org/3.4/library/logging.html#logrecord-attributes\n\nTests\n=====\n\nTests can be run via ``make``:\n\n.. code-block:: shell\n\n        make lint\n        make test\n\nAuthors\n=======\n* Ryan Richard <ryan@kumoru.io>", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/kumoru/logformatjson", "keywords": "formatter,json,logging", "license": "Apache 2.0", "maintainer": null, "maintainer_email": null, "name": "logformatjson", "package_url": "https://pypi.org/project/logformatjson/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/logformatjson/", "project_urls": {"Download": "UNKNOWN", "Homepage": "https://github.com/kumoru/logformatjson"}, "release_url": "https://pypi.org/project/logformatjson/0.1.0/", "requires_dist": null, "requires_python": null, "summary": "Json formatter for logging", "version": "0.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><tt>logformatjson</tt> is a library that provides a simple JSON formatter for the standard python logging package. It allows for nested arbitrary metadata to be inserted at instantiation and run time. The library is opionanted but attempts to allow most opinions to be overridden.</p>\n<p><strong>warning</strong>: This library is under active development. The log format and API are expected to change.</p>\n<a href=\"https://circleci.com/gh/kumoru/logformatjson\" rel=\"nofollow\"><img alt=\"https://circleci.com/gh/kumoru/logformatjson.svg?style=svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/dc50a085ae58cea40bf7ff6b3762311ef604ed45/68747470733a2f2f636972636c6563692e636f6d2f67682f6b756d6f72752f6c6f67666f726d61746a736f6e2e7376673f7374796c653d737667\"></a>\n<div id=\"install\">\n<h2>Install</h2>\n<ul>\n<li>via <tt>pip</tt>:</li>\n</ul>\n<pre>pip install logformatjson\n</pre>\n<div id=\"examples\">\n<h3>Examples</h3>\n<ol>\n<li>basic usage - JSONFormatter can be set on any handler as your would expect:</li>\n</ol>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n<span class=\"kn\">from</span> <span class=\"nn\">logformatjson</span> <span class=\"kn\">import</span> <span class=\"n\">JSONFormatter</span>\n\n<span class=\"n\">LOGGER</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">()</span>\n<span class=\"n\">LOGGER</span><span class=\"o\">.</span><span class=\"n\">setLevel</span><span class=\"p\">(</span><span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">DEBUG</span><span class=\"p\">)</span>\n<span class=\"n\">log_handler</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">StreamHandler</span><span class=\"p\">(</span><span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">stdout</span><span class=\"p\">)</span>\n<span class=\"n\">log_handler</span><span class=\"o\">.</span><span class=\"n\">setFormatter</span><span class=\"p\">(</span><span class=\"n\">JSONFormatter</span><span class=\"p\">())</span>\n<span class=\"n\">LOGGER</span><span class=\"o\">.</span><span class=\"n\">addHandler</span><span class=\"p\">(</span><span class=\"n\">log_handler</span><span class=\"p\">)</span>\n\n<span class=\"n\">LOGGER</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">(</span><span class=\"s1\">'this is my debug message'</span><span class=\"p\">,</span> <span class=\"n\">extra</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'some_key'</span><span class=\"p\">:</span> <span class=\"s1\">'important_value'</span><span class=\"p\">})</span>\n</pre>\n<p>which produces the following json (from ipython):</p>\n<pre><span class=\"p\">{</span>\n  <span class=\"s2\">\"timestamp\"</span><span class=\"o\">:</span> <span class=\"s2\">\"2016-02-19T19:39:17.061886\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"message\"</span><span class=\"o\">:</span> <span class=\"s2\">\"this is my debug message\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"levelname\"</span><span class=\"o\">:</span> <span class=\"s2\">\"DEBUG\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"metadata\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n    <span class=\"s2\">\"filename\"</span><span class=\"o\">:</span> <span class=\"s2\">\"test.py\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"funcName\"</span><span class=\"o\">:</span> <span class=\"s2\">\"&lt;module&gt;\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"extra\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n      <span class=\"s2\">\"some_key\"</span><span class=\"o\">:</span> <span class=\"s2\">\"important_value\"</span>\n    <span class=\"p\">},</span>\n    <span class=\"s2\">\"log_type\"</span><span class=\"o\">:</span> <span class=\"s2\">\"python\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"lineno\"</span><span class=\"o\">:</span> <span class=\"mi\">11</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"module\"</span><span class=\"o\">:</span> <span class=\"s2\">\"test\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"pathname\"</span><span class=\"o\">:</span> <span class=\"s2\">\"test.py\"</span>\n  <span class=\"p\">},</span>\n  <span class=\"s2\">\"log_version\"</span><span class=\"o\">:</span> <span class=\"s2\">\"1.0\"</span>\n<span class=\"p\">}</span>\n</pre>\n<ol>\n<li>Adding an additional metadata in <strong>every</strong> log entry:</li>\n</ol>\n<pre><span class=\"err\">\u2026</span>\n<span class=\"n\">log_handler</span><span class=\"o\">.</span><span class=\"n\">setFormatter</span><span class=\"p\">(</span><span class=\"n\">JSONFormatter</span><span class=\"p\">(</span><span class=\"n\">metadata</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'application_version'</span><span class=\"p\">:</span> <span class=\"s1\">'1.0.0'</span><span class=\"p\">}))</span>\n<span class=\"err\">\u2026</span>\n</pre>\n<ol>\n<li><p>Overriding the defaults at instantiation:</p>\n<blockquote>\n<ul>\n<li><dl>\n<dt>Override attributes copied or skipped from the <a href=\"https://docs.python.org/3.4/library/logging.html#logrecord-attributes\" rel=\"nofollow\">LogRecord</a>:</dt>\n<dd><pre><span class=\"err\">\u2026</span>\n<span class=\"n\">log_handler</span><span class=\"o\">.</span><span class=\"n\">setFormatter</span><span class=\"p\">(</span><span class=\"n\">JSONFormatter</span><span class=\"p\">(</span><span class=\"n\">kept_attrs</span><span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'created'</span><span class=\"p\">,</span> <span class=\"err\">\u2026</span><span class=\"p\">]))</span>\n<span class=\"n\">log_handler</span><span class=\"o\">.</span><span class=\"n\">setFormatter</span><span class=\"p\">(</span><span class=\"n\">JSONFormatter</span><span class=\"p\">(</span><span class=\"n\">skipped_attrs</span><span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'filename'</span><span class=\"p\">,</span> <span class=\"err\">\u2026</span><span class=\"p\">]))</span>\n<span class=\"err\">\u2026</span>\n</pre>\n</dd>\n</dl>\n</li>\n<li><p>Override the provided json encoder:</p>\n<blockquote>\n<pre><span class=\"k\">def</span> <span class=\"nf\">my_json_encoder</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">):</span>\n  <span class=\"k\">return</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">)</span>\n\n<span class=\"err\">\u2026</span>\n<span class=\"n\">log_handler</span><span class=\"o\">.</span><span class=\"n\">setFormatter</span><span class=\"p\">(</span><span class=\"n\">JSONFormatter</span><span class=\"p\">(</span><span class=\"n\">json_encoder</span> <span class=\"o\">=</span> <span class=\"n\">my_json_encoder</span><span class=\"p\">))</span>\n<span class=\"err\">\u2026</span>\n</pre>\n</blockquote>\n</li>\n</ul>\n</blockquote>\n</li>\n<li><p>Override the defaults at runtime:</p>\n<blockquote>\n<ul>\n<li><p>Log type (intended to be mixed with extra fields):</p>\n<blockquote>\n<pre><span class=\"err\">\u2026</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">(</span><span class=\"s1\">'GET / HTTP/1.1'</span><span class=\"p\">,</span> <span class=\"n\">log_type</span><span class=\"o\">=</span><span class=\"s1\">'HTTP'</span><span class=\"p\">}</span>\n<span class=\"err\">\u2026</span>\n</pre>\n</blockquote>\n</li>\n</ul>\n</blockquote>\n</li>\n<li><p>Extra fields:</p>\n<blockquote>\n<pre><span class=\"err\">\u2026</span>\n<span class=\"n\">LOGGER</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">(</span><span class=\"s1\">'this is my debug message'</span><span class=\"p\">,</span> <span class=\"n\">extra</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'some_key'</span><span class=\"p\">:</span> <span class=\"s1\">'important_value'</span><span class=\"p\">})</span>\n<span class=\"err\">\u2026</span>\n</pre>\n</blockquote>\n</li>\n</ol>\n</div>\n<div id=\"tests\">\n<h3>Tests</h3>\n<p>Tests can be run via <tt>make</tt>:</p>\n<pre>make lint\nmake <span class=\"nb\">test</span>\n</pre>\n</div>\n<div id=\"authors\">\n<h3>Authors</h3>\n<ul>\n<li>Ryan Richard &lt;<a href=\"mailto:ryan%40kumoru.io\">ryan<span>@</span>kumoru<span>.</span>io</a>&gt;</li>\n</ul>\n</div>\n</div>\n\n          </div>"}, "last_serial": 1999651, "releases": {"0.0.2": [{"comment_text": "", "digests": {"md5": "e22a96ec66d9b1ca6920fb6c1b018eb0", "sha256": "be674184222de6b3c28a76fcebf72e96b45c6e81e4a9e80c310fd67d0e323a63"}, "downloads": -1, "filename": "logformatjson-0.0.2.tar.gz", "has_sig": true, "md5_digest": "e22a96ec66d9b1ca6920fb6c1b018eb0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4220, "upload_time": "2016-02-19T21:13:18", "upload_time_iso_8601": "2016-02-19T21:13:18.725008Z", "url": "https://files.pythonhosted.org/packages/f8/1e/703401e26324dc0a795dc08d79fb0624618d494a7bfe235273d9747155fb/logformatjson-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "e468d789dbf8a1744757f3d4ba178b7a", "sha256": "019b16e6c92c5fd2b38a1eed0ac86176bdf614e342aa832e3e2b9221883697fc"}, "downloads": -1, "filename": "logformatjson-0.0.3.tar.gz", "has_sig": true, "md5_digest": "e468d789dbf8a1744757f3d4ba178b7a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4217, "upload_time": "2016-02-19T21:21:32", "upload_time_iso_8601": "2016-02-19T21:21:32.682166Z", "url": "https://files.pythonhosted.org/packages/03/ad/a2c3af6686ec99c3a640152eedb8cfea476db61293e7aeb6ea509f9c6d0c/logformatjson-0.0.3.tar.gz", "yanked": false}], "0.1.0": [{"comment_text": "", "digests": {"md5": "f82f1d0fd4fc40baa161e4a45a8db052", "sha256": "7b28849f862e2ad08017d73267fb1208d60ef3e10cc60ce858e47a7bc3265483"}, "downloads": -1, "filename": "logformatjson-0.1.0.tar.gz", "has_sig": true, "md5_digest": "f82f1d0fd4fc40baa161e4a45a8db052", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4723, "upload_time": "2016-03-10T16:28:00", "upload_time_iso_8601": "2016-03-10T16:28:00.418173Z", "url": "https://files.pythonhosted.org/packages/11/e9/40a8d955b069a3c70b6257eb4ff69e98bee6cde23fe50108aabcfdc112aa/logformatjson-0.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "f82f1d0fd4fc40baa161e4a45a8db052", "sha256": "7b28849f862e2ad08017d73267fb1208d60ef3e10cc60ce858e47a7bc3265483"}, "downloads": -1, "filename": "logformatjson-0.1.0.tar.gz", "has_sig": true, "md5_digest": "f82f1d0fd4fc40baa161e4a45a8db052", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4723, "upload_time": "2016-03-10T16:28:00", "upload_time_iso_8601": "2016-03-10T16:28:00.418173Z", "url": "https://files.pythonhosted.org/packages/11/e9/40a8d955b069a3c70b6257eb4ff69e98bee6cde23fe50108aabcfdc112aa/logformatjson-0.1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:44:20 2020"}