{"info": {"author": "Igor Nehoroshev", "author_email": "mail@neigor.me", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Environment :: Web Environment", "Intended Audience :: Developers", "License :: Public Domain", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# starlette-early-data\n\nMiddleware and decorator for processing TLSv1.3 early data requests in Starlette\n\n[Package on PyPI](https://pypi.org/project/starlette-early-data/)\n\nInstall: `pip install starlette-early-data`\n\n## What this package can do:\n- Detect if request is early data and mark it (`request.state.early_data = True`)\n- Deny all early data requests (pass `deny_all=True` to `add_middleware`)\n- Deny early data requests to specific endpoints (use decorator `@deny_early_data`)\n\nExample (`test.py`):\n\n```python\nimport uvicorn\n\nfrom starlette.applications import Starlette\nfrom starlette.requests import Request\nfrom starlette.responses import PlainTextResponse\n\nfrom starlette_early_data import EarlyDataMiddleware, deny_early_data\n\napp = Starlette()\napp.add_middleware(EarlyDataMiddleware, deny_all=False)\n\n\n@app.route(\"/\")\nasync def home(request: Request) -> PlainTextResponse:\n    return PlainTextResponse(\"Always OK if deny_all=False\")\n\n\n@app.route(\"/security_risk\")\n@deny_early_data\nasync def security_risk(request: Request) -> PlainTextResponse:\n    return PlainTextResponse(\"Security action done after handshake\")\n\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"0.0.0.0\", port=8080)\n```\n\nSend request to `http://127.0.0.1:8080/security_risk` with header `Early-Data=1` and you will get 425.\n\nRequest to `http://127.0.0.1:8080/` with the same header will only return 425 if you pass `deny_all=True` to `app.add_middleware(...)`\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/HarrySky/starlette-early-data", "keywords": "", "license": "Unlicense", "maintainer": "", "maintainer_email": "", "name": "starlette-early-data", "package_url": "https://pypi.org/project/starlette-early-data/", "platform": "", "project_url": "https://pypi.org/project/starlette-early-data/", "project_urls": {"Homepage": "https://github.com/HarrySky/starlette-early-data"}, "release_url": "https://pypi.org/project/starlette-early-data/1.0.0/", "requires_dist": ["starlette (>=0.12.11)", "mypy ; extra == 'lint'", "autoflake ; extra == 'lint'", "black ; extra == 'lint'", "isort ; extra == 'lint'", "asynctest ; extra == 'test'", "httpx ; extra == 'test'"], "requires_python": ">=3.6", "summary": "Middleware and decorator for processing TLSv1.3 early data requests in Starlette", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>starlette-early-data</h1>\n<p>Middleware and decorator for processing TLSv1.3 early data requests in Starlette</p>\n<p><a href=\"https://pypi.org/project/starlette-early-data/\" rel=\"nofollow\">Package on PyPI</a></p>\n<p>Install: <code>pip install starlette-early-data</code></p>\n<h2>What this package can do:</h2>\n<ul>\n<li>Detect if request is early data and mark it (<code>request.state.early_data = True</code>)</li>\n<li>Deny all early data requests (pass <code>deny_all=True</code> to <code>add_middleware</code>)</li>\n<li>Deny early data requests to specific endpoints (use decorator <code>@deny_early_data</code>)</li>\n</ul>\n<p>Example (<code>test.py</code>):</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">uvicorn</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.applications</span> <span class=\"kn\">import</span> <span class=\"n\">Starlette</span>\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.requests</span> <span class=\"kn\">import</span> <span class=\"n\">Request</span>\n<span class=\"kn\">from</span> <span class=\"nn\">starlette.responses</span> <span class=\"kn\">import</span> <span class=\"n\">PlainTextResponse</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">starlette_early_data</span> <span class=\"kn\">import</span> <span class=\"n\">EarlyDataMiddleware</span><span class=\"p\">,</span> <span class=\"n\">deny_early_data</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Starlette</span><span class=\"p\">()</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">add_middleware</span><span class=\"p\">(</span><span class=\"n\">EarlyDataMiddleware</span><span class=\"p\">,</span> <span class=\"n\">deny_all</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">)</span>\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">home</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">:</span> <span class=\"n\">Request</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">PlainTextResponse</span><span class=\"p\">:</span>\n    <span class=\"k\">return</span> <span class=\"n\">PlainTextResponse</span><span class=\"p\">(</span><span class=\"s2\">\"Always OK if deny_all=False\"</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/security_risk\"</span><span class=\"p\">)</span>\n<span class=\"nd\">@deny_early_data</span>\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">security_risk</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">:</span> <span class=\"n\">Request</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">PlainTextResponse</span><span class=\"p\">:</span>\n    <span class=\"k\">return</span> <span class=\"n\">PlainTextResponse</span><span class=\"p\">(</span><span class=\"s2\">\"Security action done after handshake\"</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">uvicorn</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">host</span><span class=\"o\">=</span><span class=\"s2\">\"0.0.0.0\"</span><span class=\"p\">,</span> <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"mi\">8080</span><span class=\"p\">)</span>\n</pre>\n<p>Send request to <code>http://127.0.0.1:8080/security_risk</code> with header <code>Early-Data=1</code> and you will get 425.</p>\n<p>Request to <code>http://127.0.0.1:8080/</code> with the same header will only return 425 if you pass <code>deny_all=True</code> to <code>app.add_middleware(...)</code></p>\n\n          </div>"}, "last_serial": 6118992, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "bf1f2c094647828d81b195a852f5448c", "sha256": "08072488864b6f7bb1f98a7af6794d118e7593de1a460d67ccd04c191bd6fd1a"}, "downloads": -1, "filename": "starlette_early_data-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "bf1f2c094647828d81b195a852f5448c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 4523, "upload_time": "2019-11-09T14:27:02", "upload_time_iso_8601": "2019-11-09T14:27:02.711178Z", "url": "https://files.pythonhosted.org/packages/fa/2f/7781f77b71f993ec9f216362c189fdd9e274d4703cf0db80a3af818bde12/starlette_early_data-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5933cf28262fa443ac89d04196ccbc56", "sha256": "a089fe7fb42780ce99df935a05f64dece220e4b274c21b492af12383a722aeb8"}, "downloads": -1, "filename": "starlette-early-data-0.2.0.tar.gz", "has_sig": false, "md5_digest": "5933cf28262fa443ac89d04196ccbc56", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 3244, "upload_time": "2019-11-09T14:27:05", "upload_time_iso_8601": "2019-11-09T14:27:05.082343Z", "url": "https://files.pythonhosted.org/packages/cf/0b/f67f848f17d43bcfeff04f9d1ba83436f35e173c74e0809fbbe0395db3f5/starlette-early-data-0.2.0.tar.gz", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "05a77bfa521e83d3a71ff65ed01c57b7", "sha256": "f076ad1442024064bbdd68eea1290078f03cb98aec38319b8839893ca065ef73"}, "downloads": -1, "filename": "starlette_early_data-0.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "05a77bfa521e83d3a71ff65ed01c57b7", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 4572, "upload_time": "2019-11-09T15:29:36", "upload_time_iso_8601": "2019-11-09T15:29:36.071451Z", "url": "https://files.pythonhosted.org/packages/af/38/45c187f11742026eee31c39d7ac698c04fdfe595905ff5d492ac4910d8ad/starlette_early_data-0.2.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b2ea62da437a42e872ff3163ea8e9148", "sha256": "cc7df09aefcfbb77d999eeeaef25b05c6b67b8599ce0eb4d8b11334f66871f03"}, "downloads": -1, "filename": "starlette-early-data-0.2.1.tar.gz", "has_sig": false, "md5_digest": "b2ea62da437a42e872ff3163ea8e9148", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 3307, "upload_time": "2019-11-09T15:29:37", "upload_time_iso_8601": "2019-11-09T15:29:37.614779Z", "url": "https://files.pythonhosted.org/packages/e7/b8/628322548267615fdb7822684d54e1553044166a065d2bcaa641587481dd/starlette-early-data-0.2.1.tar.gz", "yanked": false}], "0.2.2": [{"comment_text": "", "digests": {"md5": "9a4084e9123c5dd26e5f7d50b3b60c66", "sha256": "5ae4a3df501d42867e0daeebe5b7eb252ae74780ee70a83c08c07d7d066aa09f"}, "downloads": -1, "filename": "starlette_early_data-0.2.2-py3-none-any.whl", "has_sig": false, "md5_digest": "9a4084e9123c5dd26e5f7d50b3b60c66", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 4573, "upload_time": "2019-11-09T15:34:46", "upload_time_iso_8601": "2019-11-09T15:34:46.243744Z", "url": "https://files.pythonhosted.org/packages/8c/e5/536135d1bc8ddb086d20c951001b8a0a83328bafdd483224c69d79b8aa77/starlette_early_data-0.2.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "86d4ba06d532048255666b4f30436686", "sha256": "2e86ce0b9eb32236eebee30e1c3f679f022517b907efd911ec270c128ca7d6e7"}, "downloads": -1, "filename": "starlette-early-data-0.2.2.tar.gz", "has_sig": false, "md5_digest": "86d4ba06d532048255666b4f30436686", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 3302, "upload_time": "2019-11-09T15:34:47", "upload_time_iso_8601": "2019-11-09T15:34:47.890788Z", "url": "https://files.pythonhosted.org/packages/79/6a/418a6e9a137ad4620f7f08dad7721d2d14a1e926793c20e5273e64665931/starlette-early-data-0.2.2.tar.gz", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "a1fd90edadc813b79dccbfb563e905a7", "sha256": "1f2698e200d00a432ba02f1e54ef6a2f7535dfde6479aa19e6da3047f33811b9"}, "downloads": -1, "filename": "starlette_early_data-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "a1fd90edadc813b79dccbfb563e905a7", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 4678, "upload_time": "2019-11-11T18:56:57", "upload_time_iso_8601": "2019-11-11T18:56:57.018458Z", "url": "https://files.pythonhosted.org/packages/17/86/983d2f73a7fe029015f64a05502107703954596f57b0bde653d3bf17f49c/starlette_early_data-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6fa664c5d77c3b516e2ef7410bad9728", "sha256": "22d9af2866c480705bf7619f1dbe82d6d734e908b507949e33c0e47075dae5da"}, "downloads": -1, "filename": "starlette-early-data-1.0.0.tar.gz", "has_sig": false, "md5_digest": "6fa664c5d77c3b516e2ef7410bad9728", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 3444, "upload_time": "2019-11-11T18:56:58", "upload_time_iso_8601": "2019-11-11T18:56:58.734786Z", "url": "https://files.pythonhosted.org/packages/6e/32/d4bf4f37f47b533f822d50ad1e2961273e2aa6f4662798bfedfb8a113363/starlette-early-data-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "a1fd90edadc813b79dccbfb563e905a7", "sha256": "1f2698e200d00a432ba02f1e54ef6a2f7535dfde6479aa19e6da3047f33811b9"}, "downloads": -1, "filename": "starlette_early_data-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "a1fd90edadc813b79dccbfb563e905a7", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 4678, "upload_time": "2019-11-11T18:56:57", "upload_time_iso_8601": "2019-11-11T18:56:57.018458Z", "url": "https://files.pythonhosted.org/packages/17/86/983d2f73a7fe029015f64a05502107703954596f57b0bde653d3bf17f49c/starlette_early_data-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6fa664c5d77c3b516e2ef7410bad9728", "sha256": "22d9af2866c480705bf7619f1dbe82d6d734e908b507949e33c0e47075dae5da"}, "downloads": -1, "filename": "starlette-early-data-1.0.0.tar.gz", "has_sig": false, "md5_digest": "6fa664c5d77c3b516e2ef7410bad9728", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 3444, "upload_time": "2019-11-11T18:56:58", "upload_time_iso_8601": "2019-11-11T18:56:58.734786Z", "url": "https://files.pythonhosted.org/packages/6e/32/d4bf4f37f47b533f822d50ad1e2961273e2aa6f4662798bfedfb8a113363/starlette-early-data-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:02:36 2020"}