{"info": {"author": "Nguy\u1ec5n H\u1ed3ng Qu\u00e2n", "author_email": "ng.hong.quan@gmail.com", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: 3 :: Only", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "==============\nsingle-version\n==============\n\n.. image:: https://madewithlove.now.sh/vn?heart=true&colorA=%23ffcd00&colorB=%23da251d\n.. image:: https://badgen.net/pypi/v/single-version\n\nUtility to let you have a single source of version in your code base.\n\nThis utility targets modern Python projects which have layout generated by `Poetry`_, with a *pyproject.toml* file in place of *setup.py*. With this layout, the project initially has two places to maintain version string: one in *pyproject.toml* file and one in some *\\*.py* file (normally *__init__.py*):\n\n.. code-block:: toml\n\n    # pyproject.toml\n    [tool.poetry]\n    name = \"your-package\"\n    version = \"0.1.0\"\n\n.. code-block:: python\n\n    # your_package/__init__.py\n    __version__ = \"0.1.0\"\n\nThis duplicity often leads to inconsistency when you, the author, forget to update both.\n\n*single-version* is born to solve that headache circumstance. By convention, it chooses the *pyproject.toml* file as original source of version string. Your project's ``__version__`` variable then is computed from it. When your package is already deployed and installed to some system, the version string will be retrieved from that Python environment (the *pyproject.toml* is not included in distribution file).\n\nYears ago, to retrieve version for an installed package, ones often used `pkg_resources`_, which has well-known issue of causing slow import. Learning from that mistake, *single-version* use |importlib.metadata|_, which becomes standard from Python 3.8, instead.\n\n\nUsage\n-----\n\nAdd ``single_version`` as your project dependency:\n\n.. code-block:: sh\n\n    poetry add single-version\n\n\nAssume that your package source tree is like this::\n\n    .\n    \u251c\u2500\u2500 awesome_name\n    \u2502  \u2514\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 pyproject.toml\n    \u251c\u2500\u2500 README.rst\n    \u2514\u2500\u2500 tests/\n\nwhere the ``__version__`` variable is defined in `awesome_name/__init__.py` file. The file content can be like this:\n\n.. code-block:: python\n\n    from pathlib import Path\n\n    from single_version import get_version\n\n\n    __version__ = get_version('awesome_name', Path(__file__).parent.parent)\n\n\nAPI Reference\n-------------\n\n\n*def* **get_version** (package_name: *str*, looked_path: *Path*) -> *str*\n\n- ``package_name``:  Your package's name (same as in *pyproject.toml* file).\n\n- ``looked_path`` (of ``pathlib.Path`` type): Folder where your project's *pyproject.toml* resides.\n\n\n.. _Poetry: https://python-poetry.org/\n.. _pkg_resources: https://setuptools.readthedocs.io/en/latest/pkg_resources.html\n.. |importlib.metadata| replace:: ``importlib.metadata``\n.. _importlib.metadata: https://docs.python.org/3.8/library/importlib.metadata.html\n", "description_content_type": "text/x-rst", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/hongquan/single-version.git", "keywords": "", "license": "MIT", "maintainer": "Nguy\u1ec5n H\u1ed3ng Qu\u00e2n", "maintainer_email": "ng.hong.quan@gmail.com", "name": "single-version", "package_url": "https://pypi.org/project/single-version/", "platform": "", "project_url": "https://pypi.org/project/single-version/", "project_urls": {"Homepage": "https://github.com/hongquan/single-version.git", "Repository": "https://github.com/hongquan/single-version.git"}, "release_url": "https://pypi.org/project/single-version/1.2/", "requires_dist": ["importlib_metadata (>=1.6,<2.0); python_version < \"3.8\"", "first (>=2.0,<3.0)"], "requires_python": ">=3.6,<4.0", "summary": "Small utility to define version string for Poetry-style Python project.", "version": "1.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <img alt=\"https://madewithlove.now.sh/vn?heart=true&amp;colorA=%23ffcd00&amp;colorB=%23da251d\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/9b6739c1e583f4f15dd55e9d69b846658c156695/68747470733a2f2f6d616465776974686c6f76652e6e6f772e73682f766e3f68656172743d7472756526636f6c6f72413d25323366666364303026636f6c6f72423d253233646132353164\">\n<img alt=\"https://badgen.net/pypi/v/single-version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/026deb3a0139b949fd17a35e77d00137be8020d9/68747470733a2f2f62616467656e2e6e65742f707970692f762f73696e676c652d76657273696f6e\">\n<p>Utility to let you have a single source of version in your code base.</p>\n<p>This utility targets modern Python projects which have layout generated by <a href=\"https://python-poetry.org/\" rel=\"nofollow\">Poetry</a>, with a <em>pyproject.toml</em> file in place of <em>setup.py</em>. With this layout, the project initially has two places to maintain version string: one in <em>pyproject.toml</em> file and one in some <em>*.py</em> file (normally <em>__init__.py</em>):</p>\n<pre><span class=\"c1\"># pyproject.toml</span>\n<span class=\"k\">[tool.poetry]</span>\n<span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s\">\"your-package\"</span>\n<span class=\"n\">version</span> <span class=\"o\">=</span> <span class=\"s\">\"0.1.0\"</span>\n</pre>\n<pre><span class=\"c1\"># your_package/__init__.py</span>\n<span class=\"n\">__version__</span> <span class=\"o\">=</span> <span class=\"s2\">\"0.1.0\"</span>\n</pre>\n<p>This duplicity often leads to inconsistency when you, the author, forget to update both.</p>\n<p><em>single-version</em> is born to solve that headache circumstance. By convention, it chooses the <em>pyproject.toml</em> file as original source of version string. Your project\u2019s <tt>__version__</tt> variable then is computed from it. When your package is already deployed and installed to some system, the version string will be retrieved from that Python environment (the <em>pyproject.toml</em> is not included in distribution file).</p>\n<p>Years ago, to retrieve version for an installed package, ones often used <a href=\"https://setuptools.readthedocs.io/en/latest/pkg_resources.html\" rel=\"nofollow\">pkg_resources</a>, which has well-known issue of causing slow import. Learning from that mistake, <em>single-version</em> use <a href=\"https://docs.python.org/3.8/library/importlib.metadata.html\" rel=\"nofollow\"><tt>importlib.metadata</tt></a>, which becomes standard from Python 3.8, instead.</p>\n<div id=\"usage\">\n<h2>Usage</h2>\n<p>Add <tt>single_version</tt> as your project dependency:</p>\n<pre>poetry add single-version\n</pre>\n<p>Assume that your package source tree is like this:</p>\n<pre>.\n\u251c\u2500\u2500 awesome_name\n\u2502  \u2514\u2500\u2500 __init__.py\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 README.rst\n\u2514\u2500\u2500 tests/\n</pre>\n<p>where the <tt>__version__</tt> variable is defined in <cite>awesome_name/__init__.py</cite> file. The file content can be like this:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pathlib</span> <span class=\"kn\">import</span> <span class=\"n\">Path</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">single_version</span> <span class=\"kn\">import</span> <span class=\"n\">get_version</span>\n\n\n<span class=\"n\">__version__</span> <span class=\"o\">=</span> <span class=\"n\">get_version</span><span class=\"p\">(</span><span class=\"s1\">'awesome_name'</span><span class=\"p\">,</span> <span class=\"n\">Path</span><span class=\"p\">(</span><span class=\"vm\">__file__</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">parent</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"api-reference\">\n<h2>API Reference</h2>\n<p><em>def</em> <strong>get_version</strong> (package_name: <em>str</em>, looked_path: <em>Path</em>) -&gt; <em>str</em></p>\n<ul>\n<li><tt>package_name</tt>:  Your package\u2019s name (same as in <em>pyproject.toml</em> file).</li>\n<li><tt>looked_path</tt> (of <tt>pathlib.Path</tt> type): Folder where your project\u2019s <em>pyproject.toml</em> resides.</li>\n</ul>\n</div>\n\n          </div>"}, "last_serial": 7057492, "releases": {"1.0": [{"comment_text": "", "digests": {"md5": "0daf73a5b00c4e098af88462e18aec6d", "sha256": "d983cf6c93e6af8ff9ef81e29b32d9f3a9e9133407b4bb5f15dad56c78e01d6d"}, "downloads": -1, "filename": "single_version-1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "0daf73a5b00c4e098af88462e18aec6d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 2169, "upload_time": "2020-01-31T17:22:18", "upload_time_iso_8601": "2020-01-31T17:22:18.540890Z", "url": "https://files.pythonhosted.org/packages/6c/7b/b3a571836177d43390e2da8521c4bafdec1423cc7bc76e9896a8b5d91c4d/single_version-1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "7d2620080cd0f738cf2a6d3a83dbbb40", "sha256": "306a81b25a8b34457c607d15708c80217645f0213375cd5b7d71ddb57aa7306e"}, "downloads": -1, "filename": "single-version-1.0.tar.gz", "has_sig": false, "md5_digest": "7d2620080cd0f738cf2a6d3a83dbbb40", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 1893, "upload_time": "2020-01-31T17:22:16", "upload_time_iso_8601": "2020-01-31T17:22:16.319732Z", "url": "https://files.pythonhosted.org/packages/6d/96/52c644da4c2926f7de88fd75d2e3213da3a0445a45ddd33c06f23380284b/single-version-1.0.tar.gz", "yanked": false}], "1.1": [{"comment_text": "", "digests": {"md5": "1961fb5487668a37b0b74de8dab1e608", "sha256": "c3587b1fa60216431419c3751a853a277d9b9aa68d69b5f94a3f1dac15d72a38"}, "downloads": -1, "filename": "single_version-1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "1961fb5487668a37b0b74de8dab1e608", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 3124, "upload_time": "2020-01-31T17:25:13", "upload_time_iso_8601": "2020-01-31T17:25:13.452328Z", "url": "https://files.pythonhosted.org/packages/57/f0/45669790cbced144b54127186fc027b2d728f491831959a0171a31db271e/single_version-1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "08cfcff978c5f661d732b378cb93ccdd", "sha256": "8c22c95fa756b97cf045dff9ecb6f24a7c33e82f5f9e27ae06d61b58fa405f67"}, "downloads": -1, "filename": "single-version-1.1.tar.gz", "has_sig": false, "md5_digest": "08cfcff978c5f661d732b378cb93ccdd", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 3059, "upload_time": "2020-01-31T17:25:12", "upload_time_iso_8601": "2020-01-31T17:25:12.198522Z", "url": "https://files.pythonhosted.org/packages/81/c7/283a36159765cb81a0ad517aeac5524f47ab815b448742f1a4fcf3f0240d/single-version-1.1.tar.gz", "yanked": false}], "1.2": [{"comment_text": "", "digests": {"md5": "59239394c8a273ec9e1a097abfddefcb", "sha256": "0ddb3ffd6d500a916533b87855371e59f46d2fc3c7c80ed6dd23dc9ffff30d6f"}, "downloads": -1, "filename": "single_version-1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "59239394c8a273ec9e1a097abfddefcb", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 3352, "upload_time": "2020-04-20T04:32:57", "upload_time_iso_8601": "2020-04-20T04:32:57.947012Z", "url": "https://files.pythonhosted.org/packages/62/bc/22a58440b3a7626895d000bb13375376b0428f661ecb7da996c28cc9268f/single_version-1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2ed7f2b9596b19259a9fb20c1329a3f9", "sha256": "5adaba13735292f9456c5d286f3ab47034af87fc28c42990a37a41f33f1a60cf"}, "downloads": -1, "filename": "single-version-1.2.tar.gz", "has_sig": false, "md5_digest": "2ed7f2b9596b19259a9fb20c1329a3f9", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 3369, "upload_time": "2020-04-20T04:32:56", "upload_time_iso_8601": "2020-04-20T04:32:56.548580Z", "url": "https://files.pythonhosted.org/packages/a9/29/dca56ac99e4b1e66d9e2bc8c827a913eb17308bfeb66b9eb63ec6266f56c/single-version-1.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "59239394c8a273ec9e1a097abfddefcb", "sha256": "0ddb3ffd6d500a916533b87855371e59f46d2fc3c7c80ed6dd23dc9ffff30d6f"}, "downloads": -1, "filename": "single_version-1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "59239394c8a273ec9e1a097abfddefcb", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 3352, "upload_time": "2020-04-20T04:32:57", "upload_time_iso_8601": "2020-04-20T04:32:57.947012Z", "url": "https://files.pythonhosted.org/packages/62/bc/22a58440b3a7626895d000bb13375376b0428f661ecb7da996c28cc9268f/single_version-1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2ed7f2b9596b19259a9fb20c1329a3f9", "sha256": "5adaba13735292f9456c5d286f3ab47034af87fc28c42990a37a41f33f1a60cf"}, "downloads": -1, "filename": "single-version-1.2.tar.gz", "has_sig": false, "md5_digest": "2ed7f2b9596b19259a9fb20c1329a3f9", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 3369, "upload_time": "2020-04-20T04:32:56", "upload_time_iso_8601": "2020-04-20T04:32:56.548580Z", "url": "https://files.pythonhosted.org/packages/a9/29/dca56ac99e4b1e66d9e2bc8c827a913eb17308bfeb66b9eb63ec6266f56c/single-version-1.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:09:29 2020"}