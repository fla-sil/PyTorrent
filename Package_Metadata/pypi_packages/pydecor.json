{"info": {"author": "Matthew Planchard", "author_email": "msplanchard@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Operating System :: POSIX :: Linux", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: 3 :: Only", "Programming Language :: Python :: Implementation :: PyPy"], "description": "PyDecor\n=======\n\n.. image:: https://travis-ci.org/mplanchard/pydecor.svg?branch=master\n   :target: https://travis-ci.org/mplanchard/pydecor\n\n.. image:: https://readthedocs.org/projects/pydecor/badge/?version=latest\n    :target: https://pydecor.readthedocs.io/\n\nEasy-peasy Python decorators!\n\n* GitHub: https://github.com/mplanchard/pydecor\n* PyPI: https://pypi.python.org/pypi/pydecor\n* Docs: https://pydecor.readthedocs.io/\n* Contact: ``msplanchard`` ``@`` ``gmail`` or @msplanchard on Twitter\n\n\nSummary\n-------\n\nDecorators are great, but they're hard to write, especially if you want\nto include arguments to your decorators, or use your decorators on\nclass methods as well as functions. I know that, no matter how many I write,\nI still find myself looking up the syntax every time. And that's just for\nsimple function decorators. Getting decorators to work consistently at the\nclass and method level is a whole 'nother barrel of worms.\n\nPyDecor aims to make function decoration easy and straightforward, so that\ndevelopers can stop worrying about closures and syntax in triply nested\nfunctions and instead get down to decorating!\n\n\n.. contents:: Table of Contents\n\n\nQuickstart\n----------\n\nInstall ``pydecor``::\n\n  pip install pydecor\n\nUse one of the ready-to-wear decorators:\n\n.. code:: python\n\n    # Memoize a function\n\n    from pydecor import memoize\n\n\n    @memoize()\n    def fibonacci(n):\n        \"\"\"Compute the given number of the fibonacci sequence\"\"\"\n        if n < 2:\n            return n\n        return fibonacci(n - 2) + fibonacci(n - 1)\n\n    print(fibonacci(150))\n\n\n.. code:: python\n\n    # Intercept an error and raise a different one\n\n    from flask import Flask\n    from pydecor import intercept\n    from werkzeug.exceptions import InternalServerError\n\n\n    app = Flask(__name__)\n\n\n    @app.route('/')\n    @intercept(catch=Exception, reraise=InternalServerError,\n               err_msg='The server encountered an error rendering \"some_view\"')\n    def some_view():\n        \"\"\"The root view\"\"\"\n        assert False\n        return 'Asserted False successfully!'\n\n\n    client = app.test_client()\n    response = client.get('/')\n\n    assert response.status_code == 500\n    assert 'some_view'.encode() in resp.data\n\n\nUse a generic decorator to run your own functions ``@before``, ``@after``,\nor ``@instead`` of another function, like in the following example,\nwhich sets a User-Agent header on a Flask response:\n\n.. code:: python\n\n    from flask import Flask, make_response\n    from pydecor import Decorated, after\n\n\n    app = Flask(__name__)\n\n   # `Decorated` instances are passed to your functions and contain\n   # information about the wrapped function, including its `args`,\n   # `kwargs`, and `result`, if it's been called.\n\n    def set_user_agent(decorated: Decorated):\n        \"\"\"Sets the user-agent header on a result from a view\"\"\"\n        resp = make_response(decorated.result)\n        resp.headers.set('User-Agent', 'my_applicatoin')\n        return resp\n\n\n    @app.route('/')\n    @after(set_user_agent)\n    def index_view():\n        return 'Hello, world!'\n\n\n    client = app.test_client()\n    response = client.get('/')\n    assert response.headers.get('User-Agent') == 'my_application'\n\n\nOr make your own decorator with ``construct_decorator``\n\n.. code:: python\n\n    from flask import reques\n    from pydecor import Decorated, construct_decorator\n    from werkzeug.exceptions import Unauthorized\n\n\n    def check_auth(_decorated: Decorated, request):\n        \"\"\"Theoretically checks auth.\n\n        It goes without saying, but this is example code. You should\n        not actually check auth this way!\n        \"\"\"\n        if request.host != 'localhost':\n            raise Unauthorized('locals only!')\n\n\n    authed = construct_decorator(before=check_auth)\n\n\n    app = Flask(__name__)\n\n\n    @app.route('/')\n    # Any keyword arguments provided to any of the generic decorators are\n    # passed directly to your callable.\n    @authed(request=request)\n    def some_view():\n        \"\"\"An authenticated view\"\"\"\n        return 'This is sensitive data!'\n\n\nWhy PyDecor?\n------------\n\n* **It's easy!**\n\n  With PyDecor, you can go from this:\n\n  .. code:: python\n\n    from functools import wraps\n    from flask import request\n    from werkzeug.exceptions import Unauthorized\n    from my_pkg.auth import authorize_request\n\n    def auth_decorator(request=None):\n        \"\"\"Check the passed request for authentication\"\"\"\n\n        def decorator(decorated):\n\n            @wraps(decorated)\n            def wrapper(*args, **kwargs):\n                if not authorize_request(request):\n                  raise Unauthorized('Not authorized!')\n                return decorated(*args, **kwargs)\n            return wrapper\n\n        return decorated\n\n    @auth_decorator(request=requst)\n    def some_view():\n        return 'Hello, World!'\n\n  to this:\n\n  .. code:: python\n\n    from flask import request\n    from pydecor import before\n    from werkzeug.exceptions import Unauthorized\n    from my_pkg.auth import authorize_request\n\n    def check_auth(_decorated, request=request):\n        \"\"\"Ensure the request is authorized\"\"\"\n        if not authorize_request(request):\n          raise Unauthorized('Not authorized!')\n\n    @before(check_auth, request=request)\n    def some_view():\n        return 'Hello, world!'\n\n  Not only is it less code, but you don't have to remember decorator\n  syntax or mess with nested functions. Full disclosure, I had to look\n  up a decorator sample to be sure I got the first example's syntax right,\n  and I just spent two weeks writing a decorator library.\n\n* **It's fast!**\n\n  PyDecor aims to make your life easier, not slower. The decoration machinery\n  is designed to be as efficient as is reasonable, and contributions to\n  speed things up are always welcome.\n\n* **Implicit Method Decoration!**\n\n  Getting a decorator to \"roll down\" to methods when applied to a class is\n  a complicated business, but all of PyDecor's decorators provide it for\n  free, so rather than writing:\n\n  .. code:: python\n\n    from pydecor import log_call\n\n    class FullyLoggedClass(object):\n\n        @log_call(level='debug')\n        def some_function(self, *args, **kwargs):\n            return args, kwargs\n\n        @log_call(level='debug')\n        def another_function(self, *args, **kwargs):\n            return None\n\n        ...\n\n  You can just write:\n\n  .. code:: python\n\n    from pydecor import log_call\n\n    @log_call(level='debug')\n    class FullyLoggedClass(object):\n\n        def some_function(self, *args, **kwargs):\n            return args, kwargs\n\n        def another_function(self, *args, **kwargs):\n            return None\n\n        ...\n\n  PyDecor ignores special methods (like ``__init__``) so as not to interfere\n  with deep Python magic. By default, it works on any methods of a class,\n  including instance, class and static methods. It also ensures that class\n  attributes are preserved after decoration, so your class references\n  continue to behave as expected.\n\n* **Consistent Method Decoration!**\n\n  Whether you're decorating a class, an instance method, a class method, or\n  a static method, you can use the same passed function. ``self`` and ``cls``\n  variables are stripped out of the method parameters passed to the provided\n  callable, so your functions don't need to care about where they're used.\n\n* **Lots of Tests!**\n\n  Seriously. Don't believe me? Just look. We've got the best tests. Just\n  phenomenal.\n\n\nInstallation\n------------\n\n**`pydecor` 2.0 and forward supports only Python 3.6+!**\n\nIf you need support for an older Python, use the most recent 1.x release.\n\nTo install `pydecor`, simply run::\n\n  pip install -U pydecor\n\nTo install the current development release::\n\n  pip install --pre -U pydecor\n\nYou can also install from source to get the absolute most recent\ncode, which may or may not be functional::\n\n  git clone https://github.com/mplanchard/pydecor\n  pip install ./pydecor\n\n\n\nDetails\n-------\n\nProvided Decorators\n*******************\n\nThis package provides generic decorators, which can be used with any\nfunction to provide extra utility to decorated resources, as well\nas pr\u00eate-\u00e0-porter (ready-to-wear) decorators for immediate use.\n\nWhile the information below is enough to get you started, I highly\nrecommend checking out the `decorator module docs`_ to see all the\noptions and details for the various decorators!\n\nGenerics\n~~~~~~~~\n\n* ``@before`` - run a callable before the decorated function executes\n\n  * called with an instance of `Decorated` and any provided kwargs\n\n* ``@after`` - run a callable after the decorated function executes\n\n  * called with an instance of `Decorated` and any provided kwargs\n\n* ``@instead`` - run a callable in place of the decorated function\n\n  * called with an instance of `Decorated` and any provided kwargs\n\n* ``@decorate`` - specify multiple callables to be run before, after, and/or\n  instead of the decorated function\n\n  * callables passed to ``decorate``'s ``before``, ``after``, or ``instead``\n    keyword arguments will be called with the same default function signature\n    as described for the individual decorators, above. Extras will be\n    passed to all provided callables.\n\n* ``construct_decorator`` - specify functions to be run ``before``, ``after``,\n  or ``instead`` of decorated functions. Returns a reusable decorator.\n\nThe callable passed to a generic decorator is expected to handle at least one\npositional argument, which will be an instance of `Decorated`. `Decorated`\nobjects provide the following interface:\n\n**Attributes:**\n\n* `args`: a tuple of any positional arguments with which the decorated\n  callable was called\n* `kwargs`: a dict of any keyword arguments with which the decorated\n  callable was called\n* `wrapped`: a reference to the decorated callable\n* `result`: when the _wrapped_ function has been called, its return value is\n  stored here\n\n**Methods**\n\n* `__call__(*args, **kwargs)`: a shortcut to\n  `decorated.wrapped(*args, **kwargs)`, calling an instance of `Decorated`\n  calls the underlying wrapped callable. The result of this call (or a\n  direct call to `decorated.wrapped()`) will set the `result` attribute.\n\nEvery generic decorator may take any number of keyword arguments, which will be\npassed directly into the provided callable, so, running the code below prints\n\"red\":\n\n.. code:: python\n\n    from pydecor import before\n\n    def before_func(_decorated, label=None):\n        print(label)\n\n    @before(before_func, label='red')\n    def red_function():\n        pass\n\n    red_function()\n\nEvery generic decorator takes the following keyword arguments:\n\n* ``implicit_method_decoration`` - if True, decorating a class implies\n  decorating all of its methods. **Caution:** you should probably leave this\n  on unless you know what you are doing.\n* ``instance_methods_only`` - if True, only instance methods (not class or\n  static methods) will be automatically decorated when\n  ``implicit_method_decoration`` is True\n\nThe ``construct_decorator`` function can be used to combine ``@before``,\n``@after``, and ``@instead`` calls into one decorator, without having to\nworry about unintended stacking effects. Let's make a\ndecorator that announces when we're starting an exiting a function:\n\n.. code:: python\n\n    from pydecor import construct_decorator\n\n    def before_func(decorated):\n        print('Starting decorated function '\n              '\"{}\"'.format(decorated.wrapped.__name__))\n\n    def after_func(decorated):\n        print('\"{}\" gave result \"{}\"'.format(\n            decorated.wrapped.__name__, decorated.result\n        ))\n\n    my_decorator = construct_decorator(before=before_func, after=after_func)\n\n    @my_decorator()\n    def this_function_returns_nothing():\n        return 'nothing'\n\nAnd the output?\n\n.. code::\n\n    Starting decorated function \"this_function_returns_nothing\"\n    \"this_function_returns_nothing\" gave result \"nothing\"\n\n\nMaybe a more realistic example would be useful. Let's say we want to add\nheaders to a Flask response.\n\n.. code:: python\n\n\n    from flask import Flask, Response, make_response\n    from pydecor import construct_decorator\n\n\n    def _set_app_json_header(decorated):\n        # Ensure the response is a Response object, even if a tuple was\n        # returned by the view function.\n        response = make_response(decorated.result)\n        response.headers.set('Content-Type', 'application/json')\n        return response\n\n\n    application_json = construct_decorator(after=_set_app_json_header)\n\n\n    # Now you can decorate any Flask view, and your headers will be set.\n\n    app = Flask(__name__)\n\n    # Note that you must decorate \"before\" (closer to) the function than the\n    # app.route() decoration, because the route decorator must be called on\n    # the \"finalized\" version of your function\n\n    @app.route('/')\n    @application_json()\n    def root_view():\n        return 'Hello, world!'\n\n    client = app.test_client()\n    response = app.get('/')\n\n    print(response.headers)\n\n\nThe output?\n\n..code::\n\n    Content-Type: application/json\n    Content-Length: 13\n\n\nPr\u00eate-\u00e0-porter (ready-to-wear)\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n* ``export`` - add the decorated class or function to its module's `__all__`\n  list, exposing it as a \"public\" reference.\n* ``intercept`` - catch the specified exception and optionally re-raise and/or\n  call a provided callback to handle the exception\n* ``log_call`` - automatically log the decorated function's call signature and\n  results\n* ``memoize`` - memoize a function's call and return values for re-use. Can\n  use any cache in ``pydecor.caches``, which all have options for automatic\n  pruning to keep the memoization cache from growing too large.\n\nCaches\n******\n\nThree caches are provided with ``pydecor``. These are designed to be passed\nto the ``@memoization`` decorator if you want to use something other than\nthe default ``LRUCache``, but they are perfectly functional for use elsewhere.\n\nAll caches implement the standard dictionary interface.\n\n\nLRUCache\n~~~~~~~~\n\nA least-recently-used cache. Both getting and setting of key/value pairs\nresults in their having been considered most-recently-used. When the cache\nreaches the specified ``max_size``, least-recently-used items are discarded.\n\nFIFOCache\n~~~~~~~~~\n\nA first-in, first-out cache. When the cache reaches the specified ``max_size``,\nthe first item that was inserted is discarded, then the second, and so on.\n\nTimedCache\n~~~~~~~~~~\n\nA cache whose entries expire. If a ``max_age`` is specified, any entries older\nthan the ``max_age`` (in seconds) will be considered invalid, and will be\nremoved upon access.\n\n\nStacking\n********\n\nGeneric and ready-to-wear decorators may be stacked! You can stack multiple\nof the same decorator, or you can mix and match. Some gotchas are listed\nbelow.\n\nGenerally, stacking works just as you might expect, but some care must be\ntaken when using the ``@instead`` decorator, or ``@intercept``, which\nuses ``@instead`` under the hood.\n\nJust remember that ``@instead`` replaces everything that comes before. So,\nas long as ``@instead`` calls the decorated function, it's okay to stack it.\nIn these cases, it will be called *before* any decorators specified below\nit, and those decorators will be executed when it calls the decorated function.\n``@intercept`` behaves this way, too.\n\nIf an ``@instead`` decorator does *not* call the decorated function and\ninstead replaces it entirely, it **must** be specified first (at the bottom\nof the stacked decorator pile), otherwise the decorators below it will not\nexecute.\n\nFor ``@before`` and ``@after``, it doesn't matter in what order the decorators\nare specified. ``@before`` is always called first, and ``@after`` last.\n\n\nClass Decoration\n****************\n\nClass decoration is difficult, but PyDecor aims to make it as easy and\nintuitive as possible!\n\nBy default, decorating a class applies that decorator to all of that class'\nmethods (instance, class, and static). The decoration applies to class and\nstatic methods whether they are referenced via an instance or via a class\nreference. \"Extras\" specified at the class level persist across calls to\ndifferent methods, allowing for things like a class level memoization\ndictionary (there's a very basic test in the test suite\nthat demonstrates this pattern).\n\nIf you'd prefer that the decorator not apply to class and static methods,\nset the ``instance_methods_only=True`` when decorating the class.\n\nIf you want to decorate the class itself, and *not* its methods, keep in\nmind that the decorator will be triggered when the class is instantiated,\nand that, if the decorator replaces or alters the return, that return will\nreplace the instantiated class. With those caveats in mind, setting\n``implicit_method_decoration=False`` when decorating a class enables that\nfunctionality.\n\n.. note::\n\n    Class decoration, and in particular the decoration of class and static\n    methods, is accomplished through some pretty deep, complicated magic.\n    The test suite has a lot of tests trying to make sure that everything\n    works as expected, but please report any bugs you find so that I\n    can resolve them!\n\n\nMethod Decoration\n*****************\n\nDecorators can be applied to static, class, or instance methods directly, as\nwell. If combined with ``@staticmethod`` or ``@classmethod`` decorators,\nthose decorators should always be at the \"top\" of the decorator stack\n(furthest from the function).\n\nWhen decorating instance methods, ``self`` is removed from the parameters\npassed to the provided callable.\n\nWhen decorating class methods, ``cls`` is removed from the parameters passed\nto the provided callable.\n\nCurrently, the class and instance references *do not* have to be named\n``\"cls\"`` and ``\"self\"``, respectively, in order to be removed. However,\nthis is not guaranteed for future releases, so try to keep your naming\nstandard if you can (just FYI, ``\"self\"`` is the more likely of the two to\nwind up being required).\n\nExamples\n--------\n\nBelow are some examples for the generic and standard decorators. Please\ncheck out the API Docs for more information, and also check out the\nconvenience decorators, which are all implemented using the\n``before``, ``after``, and ``instead`` decorators from this library.\n\nUpdate a Function's Args or Kwargs\n**********************************\n\nFunctions passed to ``@before`` can either return None, in which case nothing\nhappens to the decorated functions parameters, or they can return a tuple\nof args (as a tuple) and kwargs (as a dict), in which case those parameters\nare used in the decorated function. In this example, we sillify a very\nserious function.\n\n.. note::\n    Because kwargs are mutable, they can be updated even if the function\n    passed to `before` doesn't return anything.\n\n.. code:: python\n\n    from pydecor import before\n\n    def spamify_func(decorated):\n        \"\"\"Mess with the function arguments\"\"\"\n        args = tuple(['spam' for _ in decorated.args])\n        kwargs = {k: 'spam' for k in decorated.kwargs}\n        return args, kwargs\n\n\n    @before(spamify_func)\n    def serious_function(serious_string, serious_kwarg='serious'):\n        \"\"\"A very serious function\"\"\"\n        print('A serious arg: {}'.format(serious_string))\n        print('A serious kwarg: {}'.format(serious_kwarg))\n\n    serious_function('Politics', serious_kwarg='Religion')\n\nThe output?\n\n.. code::\n\n    A serious arg: spam\n    A serious kwarg: spam\n\nDo Something with a Function's Return Value\n*******************************************\n\nFunctions passed to ``@after`` receive the decorated function's return value\nas part of the `Decorated` instance. If ``@after`` returns None, the return\nvalue is sent back unchanged. However, if ``@after`` returns something,\nits return value is sent back as the return value of the function.\n\nIn this example, we ensure that a function's return value has been thoroughly\nspammified.\n\n.. code:: python\n\n    from pydecor import after\n\n    def spamify_return(decorated):\n        \"\"\"Spamify the result of a function\"\"\"\n        return 'spam-spam-spam-spam-{}-spam-spam-spam-spam'.format(decorated.result)\n\n\n    @after(spamify_return)\n    def unspammed_function():\n        \"\"\"Return a non-spammy value\"\"\"\n        return 'beef'\n\n    print(unspammed_function())\n\nThe output?\n\n.. code::\n\n    spam-spam-spam-spam-beef-spam-spam-spam-spam\n\n\nDo Something Instead of a Function\n**********************************\n\nFunctions passed to ``@instead`` also provide wrapped context via the\n`Decorated` object. But, if the `instead` callable does not call the\nwrapped function, it won't get called at all. Maybe you want to skip\na function when a certain condition is True, but you don't want to use\n``pytest.skipif``, because ``pytest`` can't be a dependency of your\nproduction code for whatever reason.\n\n\n.. code:: python\n\n    from pydecor import instead\n\n    def skip(decorated, when=False):\n        if when:\n            pass\n        else:\n            # Calling `decorated` calls the wrapped function.\n            return decorated(*decorated.args, **decorated.kwargs)\n\n\n    @instead(skip, when=True)\n    def uncalled_function():\n        print(\"You won't see me (you won't see me)\")\n\n\n    uncalled_function()\n\nThe output?\n\n(There is no output, because the function was skipped)\n\n\nAutomatically Log Function Calls and Results\n********************************************\n\nMaybe you want to make sure your functions get logged without having to\nbother with the logging boilerplate each time. ``@log_call`` tries to\nautomatically get a logging instance corresponding to the module\nin which the decoration occurs (in the same way as if you made a call\nto ``logging.getLogger(__name__)``, or you can pass it your own, fancy,\ncustom, spoiler-bedecked logger instance.\n\n.. code:: python\n\n    from logging import getLogger, StreamHandler\n    from sys import stdout\n\n    from pydecor import log_call\n\n\n    # We're just getting a logger here so we can see the output. This isn't\n    # actually necessary for @log_call to work!\n    log = getLogger(__name__)\n    log.setLevel('DEBUG')\n    log.addHandler(StreamHandler(stdout))\n\n\n    @log_call()\n    def get_lucky(*args, **kwargs):\n        \"\"\"We're up all night 'till the sun.\"\"\"\n        return \"We're up all night for good fun.\"\n\n\n    get_lucky('Too far', 'to give up', who_we='are')\n\n\nAnd the output?\n\n.. code::\n\n    get_lucky(*('Too far', 'to give up'), **{'who_we': 'are'}) -> \"We're up all night for good fun\"\n\n\nIntercept an Exception and Re-raise a Custom One\n************************************************\n\nAre you a put-upon library developer tired of constantly having to re-raise\ncustom exceptions so that users of your library can have one nice try/except\nlooking for your base exception? Let's make that easier:\n\n.. code:: python\n\n    from pydecor import intercept\n\n\n    class BetterException(Exception):\n        \"\"\"Much better than all those other exceptions\"\"\"\n\n\n    @intercept(catch=RuntimeError, reraise=BetterException)\n    def sometimes_i_error(val):\n        \"\"\"Sometimes, this function raises an exception\"\"\"\n        if val > 5:\n            raise RuntimeError('This value is too big!')\n\n\n    for i in range(7):\n        sometimes_i_error(i)\n\n\nThe output?\n\n.. code::\n\n    Traceback (most recent call last):\n      File \"/Users/Nautilus/Library/Preferences/PyCharm2017.1/scratches/scratch_1.py\", line 88, in <module>\n        sometimes_i_error(i)\n      File \"/Users/Nautilus/Documents/Programming/pydecor/pydecor/decorators.py\", line 389, in wrapper\n        return fn(**fkwargs)\n      File \"/Users/Nautilus/Documents/Programming/pydecor/pydecor/functions.py\", line 58, in intercept\n        raise_from(new_exc, context)\n      File \"<string>\", line 2, in raise_from\n    __main__.BetterException: This value is too big!\n\n\nIntercept an Exception, Do Something, and Re-raise the Original\n***************************************************************\n\nMaybe you don't *want* to raise a custom exception. Maybe the original\none was just fine. All you want to do is print a special message before\nre-raising the original exception. PyDecor has you covered:\n\n.. code:: python\n\n    from pydecor import intercept\n\n\n    def print_exception(exc):\n        \"\"\"Make sure stdout knows about our exceptions\"\"\"\n        print('Houston, we have a problem: {}'.format(exc))\n\n\n    @intercept(catch=Exception, handler=print_exception, reraise=True)\n    def assert_false():\n        \"\"\"All I do is assert that False is True\"\"\"\n        assert False, 'Turns out, False is not True'\n\n\n    assert_false()\n\nAnd the output:\n\n.. code::\n\n    Houston, we have a problem: Turns out, False is not True\n    Traceback (most recent call last):\n      File \"/Users/Nautilus/Library/Preferences/PyCharm2017.1/scratches/scratch_1.py\", line 105, in <module>\n        assert_false()\n      File \"/Users/Nautilus/Documents/Programming/pydecor/pydecor/decorators.py\", line 389, in wrapper\n        return fn(**fkwargs)\n      File \"/Users/Nautilus/Documents/Programming/pydecor/pydecor/functions.py\", line 49, in intercept\n        return decorated(*decorated_args, **decorated_kwargs)\n      File \"/Users/Nautilus/Library/Preferences/PyCharm2017.1/scratches/scratch_1.py\", line 102, in assert_false\n        assert False, 'Turns out, False is not True'\n    AssertionError: Turns out, False is not True\n\n\nIntercept an Exception, Handle, and Be Done with It\n***************************************************\n\nSometimes an exception isn't the end of the world, and it doesn't need to\nbubble up to the top of your application. In these cases, maybe just handle\nit and don't re-raise:\n\n.. code:: python\n\n    from pydecor import intercept\n\n\n    def let_us_know_it_happened(exc):\n        \"\"\"Just let us know an exception happened (if we are reading stdout)\"\"\"\n        print('This non-critical exception happened: {}'.format(exc))\n\n\n    @intercept(catch=ValueError, handler=let_us_know_it_happened)\n    def resilient_function(val):\n        \"\"\"I am so resilient!\"\"\"\n        val = int(val)\n        print('If I get here, I have an integer: {}'.format(val))\n\n\n    resilient_function('50')\n    resilient_function('foo')\n\nOutput:\n\n.. code::\n\n    If I get here, I have an integer: 50\n    This non-critical exception happened: invalid literal for int() with base 10: 'foo'\n\nNote that the function does *not* continue running after the exception is\nhandled. Use this for short-circuiting under certain conditions rather\nthan for instituting a ``try/except:pass`` block. Maybe one day I'll figure\nout how to make this work like that, but as it stands, the decorator surrounds\nthe entire function, so it does not provide that fine-grained level of control.\n\n\nRoadmap\n-------\n\n2.?\n***\n\nMore Pr\u00eate-\u00e0-porter Decorators\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n* ``skipif`` - similar to py.test's decorator, skip the function if a\n  provided condition is True\n\nLet me know if you've got any idea for other decorators that would\nbe nice to have!\n\n\nType Annotations\n~~~~~~~~~~~~~~~~\n\nNow that we've dropped support for Python 2, we can use type annotations\nto properly annotate function inputs and return values and make them\navailable to library authors.\n\nContributing\n------------\n\nContributions are welcome! If you find a bug or if something doesn't\nwork the way you think it should, please `raise an issue <issues_>`_.\nIf you know how to fix the bug, please `open a PR! <prs_>`_\n\nI absolutely welcome any level of contribution. If you think the docs\ncould be better, or if you've found a typo, please open up a PR to improve\nand/or fix them.\n\nContributor Conduct\n*******************\n\nThere is a ``CODE_OF_CONDUCT.md`` file with details, based on one of GitHub's\ntemplates, but the upshot is that I expect everyone who contributes to this\nproject to do their best to be helpful, friendly, and patient. Discrimination\nof any kind will not be tolerated and will be promptly reported to GitHub.\n\nOn a personal note, Open Source survives because of people who are willing to\ncontribute their time and effort for free. The least we can do is treat them\nwith respect.\n\nTests\n*****\n\nTests can be run with::\n\n   make test\n\nThis will use whatever your local `python3` happens to be. If you have\nother pythons available, you can run::\n\n   make tox\n\nto try to run locally for all supported Python versions.\n\nIf you have docker installed, you can run::\n\n   make test-docker-{version}  # e.g. make test-docker-3.6\n\nto pull down an appropriate Docker image and run tests inside of it. You can\nalso run::\n\n   make test-docker\n\nto do this for all supported versions of Python.\n\nPRs that cause tests to fail will not be merged until tests pass.\n\nAny new functionality is expected to come with appropriate tests.\nIf you have any questions, feel free to reach out to me via email at\n``msplanchard`` ``@`` ``gmail`` or on GH via Issues.\n\nAutoformatting\n**************\n\nThis project uses black_ for autoformatting. I recommend setting your editor\nup to format on save for this project, but you can also run::\n\n   make fmt\n\nto format everything.\n\nLinting\n*******\n\nLinting can be run with::\n\n   make lint\n\nCurrently, linting verifies that there are:\n\n* No flake8 errors\n* No mypy errors\n* No pylint errors\n* No files that need be formatted\n\nYou should ensure that `make lint` returns 0 before opening a PR.\n\nDocs\n****\n\nDocs are autogenerated via Sphinx. You can build them locally by running::\n\n   make docs\n\nYou can then open `docs/_build/html/index.html` in your web browser of\nchoice to see how the documentation will look with your changes.\n\nDeployment\n**********\n\nDeployment is handled through pushing tags. Any tag pushed to GH causes\na push to PyPI if the current version is not yet present there.\n\nPushing the appropriate tag is made easier through the use of::\n\n   VERSION=1.0.0 make distribute\n\nwhere `VERSION` obviously should be the current version. This will verify\nthe specified version matches the package's current version, check to be\nsure that the most recent master is being distributed, prompt for a message,\nand create and push a signed tag of the format `v{version}`.\n\n\nCredits and Links\n-----------------\n\n* This project was started using my generic `project template`_\n* Tests are run with pytest_ and tox_\n* Documentation built with sphinx_\n* Coverage information collected with coverage_\n* Pickling of objects provided via dill_\n\n.. _black: https://github.com/psf/black\n.. _`project template`: https://github.com/mplanchard/python_skeleton\n.. _pytest:\n.. _`py.test`: https://docs.pytest.org/en/latest/\n.. _tox: http://tox.readthedocs.org/\n.. _sphinx: http://www.sphinx-doc.org/en/stable/\n.. _coverage: https://coverage.readthedocs.io/en/coverage-4.4.1/\n.. _`mock backport`: https://mock.readthedocs.io/en/latest/#\n.. _`pep 484`: https://www.python.org/dev/peps/pep-0484/\n.. _six: https://pythonhosted.org/six/\n.. _`typing backport`: https://pypi.org/project/typing/\n.. _docs: https://pydecor.readthedocs.io/en/latest/\n.. _`decorator module docs`:\n    https://pydecor.readthedocs.io/en/latest/pydecor.decorators.html\n.. _issues: https://github.com/mplanchard/pydecor/issues\n.. _PRs: https://github.com/mplanchard/pydecor/pulls\n.. _dill: https://pypi.python.org/pypi/dill\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/mplanchard/pydecor", "keywords": "decorators,python3", "license": "", "maintainer": "", "maintainer_email": "", "name": "pydecor", "package_url": "https://pypi.org/project/pydecor/", "platform": "", "project_url": "https://pypi.org/project/pydecor/", "project_urls": {"Homepage": "https://github.com/mplanchard/pydecor"}, "release_url": "https://pypi.org/project/pydecor/2.0.0/", "requires_dist": ["dill", "six", "typing ; python_version < \"3.5\"", "coverage ; extra == 'dev'", "pytest ; extra == 'dev'", "pytest-cov ; extra == 'dev'", "tox ; extra == 'dev'", "wheel ; extra == 'dev'", "flake8 ; (implementation_name == \"cpython\") and extra == 'dev'", "ipdb ; (implementation_name == \"cpython\") and extra == 'dev'", "mypy ; (implementation_name == \"cpython\") and extra == 'dev'", "pylint ; (implementation_name == \"cpython\") and extra == 'dev'", "mock ; (python_version < \"3.0\") and extra == 'dev'", "black ; (python_version > \"3.5\" and implementation_name == \"cpython\") and extra == 'dev'"], "requires_python": ">=3.6", "summary": "Easy peasy Python decorators", "version": "2.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://travis-ci.org/mplanchard/pydecor\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/mplanchard/pydecor.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1c54afe7d6e70ca83d02668c3d78ab82a006afe3/68747470733a2f2f7472617669732d63692e6f72672f6d706c616e63686172642f70796465636f722e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://pydecor.readthedocs.io/\" rel=\"nofollow\"><img alt=\"https://readthedocs.org/projects/pydecor/badge/?version=latest\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ac9ee763159611d0614e2be6090ac59d093e8000/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f70796465636f722f62616467652f3f76657273696f6e3d6c6174657374\"></a>\n<p>Easy-peasy Python decorators!</p>\n<ul>\n<li>GitHub: <a href=\"https://github.com/mplanchard/pydecor\" rel=\"nofollow\">https://github.com/mplanchard/pydecor</a></li>\n<li>PyPI: <a href=\"https://pypi.python.org/pypi/pydecor\" rel=\"nofollow\">https://pypi.python.org/pypi/pydecor</a></li>\n<li>Docs: <a href=\"https://pydecor.readthedocs.io/\" rel=\"nofollow\">https://pydecor.readthedocs.io/</a></li>\n<li>Contact: <tt>msplanchard</tt> <tt>@</tt> <tt>gmail</tt> or @msplanchard on Twitter</li>\n</ul>\n<div id=\"summary\">\n<h2><a href=\"#id3\" rel=\"nofollow\">Summary</a></h2>\n<p>Decorators are great, but they\u2019re hard to write, especially if you want\nto include arguments to your decorators, or use your decorators on\nclass methods as well as functions. I know that, no matter how many I write,\nI still find myself looking up the syntax every time. And that\u2019s just for\nsimple function decorators. Getting decorators to work consistently at the\nclass and method level is a whole \u2018nother barrel of worms.</p>\n<p>PyDecor aims to make function decoration easy and straightforward, so that\ndevelopers can stop worrying about closures and syntax in triply nested\nfunctions and instead get down to decorating!</p>\n<div id=\"table-of-contents\">\n<p>Table of Contents</p>\n<ul>\n<li><a href=\"#summary\" id=\"id3\" rel=\"nofollow\">Summary</a></li>\n<li><a href=\"#quickstart\" id=\"id4\" rel=\"nofollow\">Quickstart</a></li>\n<li><a href=\"#why-pydecor\" id=\"id5\" rel=\"nofollow\">Why PyDecor?</a></li>\n<li><a href=\"#installation\" id=\"id6\" rel=\"nofollow\">Installation</a></li>\n<li><a href=\"#details\" id=\"id7\" rel=\"nofollow\">Details</a><ul>\n<li><a href=\"#provided-decorators\" id=\"id8\" rel=\"nofollow\">Provided Decorators</a><ul>\n<li><a href=\"#generics\" id=\"id9\" rel=\"nofollow\">Generics</a></li>\n<li><a href=\"#prete-a-porter-ready-to-wear\" id=\"id10\" rel=\"nofollow\">Pr\u00eate-\u00e0-porter (ready-to-wear)</a></li>\n</ul>\n</li>\n<li><a href=\"#caches\" id=\"id11\" rel=\"nofollow\">Caches</a><ul>\n<li><a href=\"#lrucache\" id=\"id12\" rel=\"nofollow\">LRUCache</a></li>\n<li><a href=\"#fifocache\" id=\"id13\" rel=\"nofollow\">FIFOCache</a></li>\n<li><a href=\"#timedcache\" id=\"id14\" rel=\"nofollow\">TimedCache</a></li>\n</ul>\n</li>\n<li><a href=\"#stacking\" id=\"id15\" rel=\"nofollow\">Stacking</a></li>\n<li><a href=\"#class-decoration\" id=\"id16\" rel=\"nofollow\">Class Decoration</a></li>\n<li><a href=\"#method-decoration\" id=\"id17\" rel=\"nofollow\">Method Decoration</a></li>\n</ul>\n</li>\n<li><a href=\"#examples\" id=\"id18\" rel=\"nofollow\">Examples</a><ul>\n<li><a href=\"#update-a-function-s-args-or-kwargs\" id=\"id19\" rel=\"nofollow\">Update a Function\u2019s Args or Kwargs</a></li>\n<li><a href=\"#do-something-with-a-function-s-return-value\" id=\"id20\" rel=\"nofollow\">Do Something with a Function\u2019s Return Value</a></li>\n<li><a href=\"#do-something-instead-of-a-function\" id=\"id21\" rel=\"nofollow\">Do Something Instead of a Function</a></li>\n<li><a href=\"#automatically-log-function-calls-and-results\" id=\"id22\" rel=\"nofollow\">Automatically Log Function Calls and Results</a></li>\n<li><a href=\"#intercept-an-exception-and-re-raise-a-custom-one\" id=\"id23\" rel=\"nofollow\">Intercept an Exception and Re-raise a Custom One</a></li>\n<li><a href=\"#intercept-an-exception-do-something-and-re-raise-the-original\" id=\"id24\" rel=\"nofollow\">Intercept an Exception, Do Something, and Re-raise the Original</a></li>\n<li><a href=\"#intercept-an-exception-handle-and-be-done-with-it\" id=\"id25\" rel=\"nofollow\">Intercept an Exception, Handle, and Be Done with It</a></li>\n</ul>\n</li>\n<li><a href=\"#roadmap\" id=\"id26\" rel=\"nofollow\">Roadmap</a><ul>\n<li><a href=\"#more-prete-a-porter-decorators\" id=\"id27\" rel=\"nofollow\">More Pr\u00eate-\u00e0-porter Decorators</a></li>\n<li><a href=\"#type-annotations\" id=\"id28\" rel=\"nofollow\">Type Annotations</a></li>\n</ul>\n</li>\n<li><a href=\"#contributing\" id=\"id29\" rel=\"nofollow\">Contributing</a><ul>\n<li><a href=\"#contributor-conduct\" id=\"id30\" rel=\"nofollow\">Contributor Conduct</a></li>\n<li><a href=\"#tests\" id=\"id31\" rel=\"nofollow\">Tests</a></li>\n<li><a href=\"#autoformatting\" id=\"id32\" rel=\"nofollow\">Autoformatting</a></li>\n<li><a href=\"#linting\" id=\"id33\" rel=\"nofollow\">Linting</a></li>\n<li><a href=\"#docs\" id=\"id34\" rel=\"nofollow\">Docs</a></li>\n<li><a href=\"#deployment\" id=\"id35\" rel=\"nofollow\">Deployment</a></li>\n</ul>\n</li>\n<li><a href=\"#credits-and-links\" id=\"id36\" rel=\"nofollow\">Credits and Links</a></li>\n</ul>\n</div>\n</div>\n<div id=\"quickstart\">\n<h2><a href=\"#id4\" rel=\"nofollow\">Quickstart</a></h2>\n<p>Install <tt>pydecor</tt>:</p>\n<pre>pip install pydecor\n</pre>\n<p>Use one of the ready-to-wear decorators:</p>\n<pre><span class=\"c1\"># Memoize a function</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">memoize</span>\n\n\n<span class=\"nd\">@memoize</span><span class=\"p\">()</span>\n<span class=\"k\">def</span> <span class=\"nf\">fibonacci</span><span class=\"p\">(</span><span class=\"n\">n</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Compute the given number of the fibonacci sequence\"\"\"</span>\n    <span class=\"k\">if</span> <span class=\"n\">n</span> <span class=\"o\">&lt;</span> <span class=\"mi\">2</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"n\">n</span>\n    <span class=\"k\">return</span> <span class=\"n\">fibonacci</span><span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"o\">-</span> <span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"n\">fibonacci</span><span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">fibonacci</span><span class=\"p\">(</span><span class=\"mi\">150</span><span class=\"p\">))</span>\n</pre>\n<pre><span class=\"c1\"># Intercept an error and raise a different one</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">Flask</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">intercept</span>\n<span class=\"kn\">from</span> <span class=\"nn\">werkzeug.exceptions</span> <span class=\"kn\">import</span> <span class=\"n\">InternalServerError</span>\n\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n<span class=\"nd\">@intercept</span><span class=\"p\">(</span><span class=\"n\">catch</span><span class=\"o\">=</span><span class=\"ne\">Exception</span><span class=\"p\">,</span> <span class=\"n\">reraise</span><span class=\"o\">=</span><span class=\"n\">InternalServerError</span><span class=\"p\">,</span>\n           <span class=\"n\">err_msg</span><span class=\"o\">=</span><span class=\"s1\">'The server encountered an error rendering \"some_view\"'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">some_view</span><span class=\"p\">():</span>\n    <span class=\"sd\">\"\"\"The root view\"\"\"</span>\n    <span class=\"k\">assert</span> <span class=\"kc\">False</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'Asserted False successfully!'</span>\n\n\n<span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">test_client</span><span class=\"p\">()</span>\n<span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n\n<span class=\"k\">assert</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">status_code</span> <span class=\"o\">==</span> <span class=\"mi\">500</span>\n<span class=\"k\">assert</span> <span class=\"s1\">'some_view'</span><span class=\"o\">.</span><span class=\"n\">encode</span><span class=\"p\">()</span> <span class=\"ow\">in</span> <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">data</span>\n</pre>\n<p>Use a generic decorator to run your own functions <tt>@before</tt>, <tt>@after</tt>,\nor <tt>@instead</tt> of another function, like in the following example,\nwhich sets a User-Agent header on a Flask response:</p>\n<pre> <span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">Flask</span><span class=\"p\">,</span> <span class=\"n\">make_response</span>\n <span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">Decorated</span><span class=\"p\">,</span> <span class=\"n\">after</span>\n\n\n <span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># `Decorated` instances are passed to your functions and contain</span>\n<span class=\"c1\"># information about the wrapped function, including its `args`,</span>\n<span class=\"c1\"># `kwargs`, and `result`, if it's been called.</span>\n\n <span class=\"k\">def</span> <span class=\"nf\">set_user_agent</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"p\">:</span> <span class=\"n\">Decorated</span><span class=\"p\">):</span>\n     <span class=\"sd\">\"\"\"Sets the user-agent header on a result from a view\"\"\"</span>\n     <span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"n\">make_response</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">result</span><span class=\"p\">)</span>\n     <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">headers</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"s1\">'User-Agent'</span><span class=\"p\">,</span> <span class=\"s1\">'my_applicatoin'</span><span class=\"p\">)</span>\n     <span class=\"k\">return</span> <span class=\"n\">resp</span>\n\n\n <span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n <span class=\"nd\">@after</span><span class=\"p\">(</span><span class=\"n\">set_user_agent</span><span class=\"p\">)</span>\n <span class=\"k\">def</span> <span class=\"nf\">index_view</span><span class=\"p\">():</span>\n     <span class=\"k\">return</span> <span class=\"s1\">'Hello, world!'</span>\n\n\n <span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">test_client</span><span class=\"p\">()</span>\n <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n <span class=\"k\">assert</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">headers</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'User-Agent'</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">'my_application'</span>\n</pre>\n<p>Or make your own decorator with <tt>construct_decorator</tt></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">reques</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">Decorated</span><span class=\"p\">,</span> <span class=\"n\">construct_decorator</span>\n<span class=\"kn\">from</span> <span class=\"nn\">werkzeug.exceptions</span> <span class=\"kn\">import</span> <span class=\"n\">Unauthorized</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">check_auth</span><span class=\"p\">(</span><span class=\"n\">_decorated</span><span class=\"p\">:</span> <span class=\"n\">Decorated</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Theoretically checks auth.\n\n    It goes without saying, but this is example code. You should\n    not actually check auth this way!\n    \"\"\"</span>\n    <span class=\"k\">if</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">host</span> <span class=\"o\">!=</span> <span class=\"s1\">'localhost'</span><span class=\"p\">:</span>\n        <span class=\"k\">raise</span> <span class=\"n\">Unauthorized</span><span class=\"p\">(</span><span class=\"s1\">'locals only!'</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">authed</span> <span class=\"o\">=</span> <span class=\"n\">construct_decorator</span><span class=\"p\">(</span><span class=\"n\">before</span><span class=\"o\">=</span><span class=\"n\">check_auth</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n<span class=\"c1\"># Any keyword arguments provided to any of the generic decorators are</span>\n<span class=\"c1\"># passed directly to your callable.</span>\n<span class=\"nd\">@authed</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">=</span><span class=\"n\">request</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">some_view</span><span class=\"p\">():</span>\n    <span class=\"sd\">\"\"\"An authenticated view\"\"\"</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'This is sensitive data!'</span>\n</pre>\n</div>\n<div id=\"why-pydecor\">\n<h2><a href=\"#id5\" rel=\"nofollow\">Why PyDecor?</a></h2>\n<ul>\n<li><p><strong>It\u2019s easy!</strong></p>\n<p>With PyDecor, you can go from this:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">functools</span> <span class=\"kn\">import</span> <span class=\"n\">wraps</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">request</span>\n<span class=\"kn\">from</span> <span class=\"nn\">werkzeug.exceptions</span> <span class=\"kn\">import</span> <span class=\"n\">Unauthorized</span>\n<span class=\"kn\">from</span> <span class=\"nn\">my_pkg.auth</span> <span class=\"kn\">import</span> <span class=\"n\">authorize_request</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">auth_decorator</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Check the passed request for authentication\"\"\"</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">decorator</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"p\">):</span>\n\n        <span class=\"nd\">@wraps</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"p\">)</span>\n        <span class=\"k\">def</span> <span class=\"nf\">wrapper</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n            <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">authorize_request</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n              <span class=\"k\">raise</span> <span class=\"n\">Unauthorized</span><span class=\"p\">(</span><span class=\"s1\">'Not authorized!'</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"n\">decorated</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">wrapper</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">decorated</span>\n\n<span class=\"nd\">@auth_decorator</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">=</span><span class=\"n\">requst</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">some_view</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'Hello, World!'</span>\n</pre>\n<p>to this:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">request</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">before</span>\n<span class=\"kn\">from</span> <span class=\"nn\">werkzeug.exceptions</span> <span class=\"kn\">import</span> <span class=\"n\">Unauthorized</span>\n<span class=\"kn\">from</span> <span class=\"nn\">my_pkg.auth</span> <span class=\"kn\">import</span> <span class=\"n\">authorize_request</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">check_auth</span><span class=\"p\">(</span><span class=\"n\">_decorated</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"o\">=</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Ensure the request is authorized\"\"\"</span>\n    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">authorize_request</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n      <span class=\"k\">raise</span> <span class=\"n\">Unauthorized</span><span class=\"p\">(</span><span class=\"s1\">'Not authorized!'</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@before</span><span class=\"p\">(</span><span class=\"n\">check_auth</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"o\">=</span><span class=\"n\">request</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">some_view</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'Hello, world!'</span>\n</pre>\n<p>Not only is it less code, but you don\u2019t have to remember decorator\nsyntax or mess with nested functions. Full disclosure, I had to look\nup a decorator sample to be sure I got the first example\u2019s syntax right,\nand I just spent two weeks writing a decorator library.</p>\n</li>\n<li><p><strong>It\u2019s fast!</strong></p>\n<p>PyDecor aims to make your life easier, not slower. The decoration machinery\nis designed to be as efficient as is reasonable, and contributions to\nspeed things up are always welcome.</p>\n</li>\n<li><p><strong>Implicit Method Decoration!</strong></p>\n<p>Getting a decorator to \u201croll down\u201d to methods when applied to a class is\na complicated business, but all of PyDecor\u2019s decorators provide it for\nfree, so rather than writing:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">log_call</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">FullyLoggedClass</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n\n    <span class=\"nd\">@log_call</span><span class=\"p\">(</span><span class=\"n\">level</span><span class=\"o\">=</span><span class=\"s1\">'debug'</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">some_function</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">kwargs</span>\n\n    <span class=\"nd\">@log_call</span><span class=\"p\">(</span><span class=\"n\">level</span><span class=\"o\">=</span><span class=\"s1\">'debug'</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">another_function</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"kc\">None</span>\n\n    <span class=\"o\">...</span>\n</pre>\n<p>You can just write:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">log_call</span>\n\n<span class=\"nd\">@log_call</span><span class=\"p\">(</span><span class=\"n\">level</span><span class=\"o\">=</span><span class=\"s1\">'debug'</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">FullyLoggedClass</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">some_function</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">kwargs</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">another_function</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"kc\">None</span>\n\n    <span class=\"o\">...</span>\n</pre>\n<p>PyDecor ignores special methods (like <tt>__init__</tt>) so as not to interfere\nwith deep Python magic. By default, it works on any methods of a class,\nincluding instance, class and static methods. It also ensures that class\nattributes are preserved after decoration, so your class references\ncontinue to behave as expected.</p>\n</li>\n<li><p><strong>Consistent Method Decoration!</strong></p>\n<p>Whether you\u2019re decorating a class, an instance method, a class method, or\na static method, you can use the same passed function. <tt>self</tt> and <tt>cls</tt>\nvariables are stripped out of the method parameters passed to the provided\ncallable, so your functions don\u2019t need to care about where they\u2019re used.</p>\n</li>\n<li><p><strong>Lots of Tests!</strong></p>\n<p>Seriously. Don\u2019t believe me? Just look. We\u2019ve got the best tests. Just\nphenomenal.</p>\n</li>\n</ul>\n</div>\n<div id=\"installation\">\n<h2><a href=\"#id6\" rel=\"nofollow\">Installation</a></h2>\n<p><strong>`pydecor` 2.0 and forward supports only Python 3.6+!</strong></p>\n<p>If you need support for an older Python, use the most recent 1.x release.</p>\n<p>To install <cite>pydecor</cite>, simply run:</p>\n<pre>pip install -U pydecor\n</pre>\n<p>To install the current development release:</p>\n<pre>pip install --pre -U pydecor\n</pre>\n<p>You can also install from source to get the absolute most recent\ncode, which may or may not be functional:</p>\n<pre>git clone https://github.com/mplanchard/pydecor\npip install ./pydecor\n</pre>\n</div>\n<div id=\"details\">\n<h2><a href=\"#id7\" rel=\"nofollow\">Details</a></h2>\n<div id=\"provided-decorators\">\n<h3><a href=\"#id8\" rel=\"nofollow\">Provided Decorators</a></h3>\n<p>This package provides generic decorators, which can be used with any\nfunction to provide extra utility to decorated resources, as well\nas pr\u00eate-\u00e0-porter (ready-to-wear) decorators for immediate use.</p>\n<p>While the information below is enough to get you started, I highly\nrecommend checking out the <a href=\"https://pydecor.readthedocs.io/en/latest/pydecor.decorators.html\" rel=\"nofollow\">decorator module docs</a> to see all the\noptions and details for the various decorators!</p>\n<div id=\"generics\">\n<h4><a href=\"#id9\" rel=\"nofollow\">Generics</a></h4>\n<ul>\n<li><tt>@before</tt> - run a callable before the decorated function executes<ul>\n<li>called with an instance of <cite>Decorated</cite> and any provided kwargs</li>\n</ul>\n</li>\n<li><tt>@after</tt> - run a callable after the decorated function executes<ul>\n<li>called with an instance of <cite>Decorated</cite> and any provided kwargs</li>\n</ul>\n</li>\n<li><tt>@instead</tt> - run a callable in place of the decorated function<ul>\n<li>called with an instance of <cite>Decorated</cite> and any provided kwargs</li>\n</ul>\n</li>\n<li><tt>@decorate</tt> - specify multiple callables to be run before, after, and/or\ninstead of the decorated function<ul>\n<li>callables passed to <tt>decorate</tt>\u2019s <tt>before</tt>, <tt>after</tt>, or <tt>instead</tt>\nkeyword arguments will be called with the same default function signature\nas described for the individual decorators, above. Extras will be\npassed to all provided callables.</li>\n</ul>\n</li>\n<li><tt>construct_decorator</tt> - specify functions to be run <tt>before</tt>, <tt>after</tt>,\nor <tt>instead</tt> of decorated functions. Returns a reusable decorator.</li>\n</ul>\n<p>The callable passed to a generic decorator is expected to handle at least one\npositional argument, which will be an instance of <cite>Decorated</cite>. <cite>Decorated</cite>\nobjects provide the following interface:</p>\n<p><strong>Attributes:</strong></p>\n<ul>\n<li><cite>args</cite>: a tuple of any positional arguments with which the decorated\ncallable was called</li>\n<li><cite>kwargs</cite>: a dict of any keyword arguments with which the decorated\ncallable was called</li>\n<li><cite>wrapped</cite>: a reference to the decorated callable</li>\n<li><cite>result</cite>: when the _wrapped_ function has been called, its return value is\nstored here</li>\n</ul>\n<p><strong>Methods</strong></p>\n<ul>\n<li><cite>__call__(*args, **kwargs)</cite>: a shortcut to\n<cite>decorated.wrapped(*args, **kwargs)</cite>, calling an instance of <cite>Decorated</cite>\ncalls the underlying wrapped callable. The result of this call (or a\ndirect call to <cite>decorated.wrapped()</cite>) will set the <cite>result</cite> attribute.</li>\n</ul>\n<p>Every generic decorator may take any number of keyword arguments, which will be\npassed directly into the provided callable, so, running the code below prints\n\u201cred\u201d:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">before</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">before_func</span><span class=\"p\">(</span><span class=\"n\">_decorated</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">label</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@before</span><span class=\"p\">(</span><span class=\"n\">before_func</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"s1\">'red'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">red_function</span><span class=\"p\">():</span>\n    <span class=\"k\">pass</span>\n\n<span class=\"n\">red_function</span><span class=\"p\">()</span>\n</pre>\n<p>Every generic decorator takes the following keyword arguments:</p>\n<ul>\n<li><tt>implicit_method_decoration</tt> - if True, decorating a class implies\ndecorating all of its methods. <strong>Caution:</strong> you should probably leave this\non unless you know what you are doing.</li>\n<li><tt>instance_methods_only</tt> - if True, only instance methods (not class or\nstatic methods) will be automatically decorated when\n<tt>implicit_method_decoration</tt> is True</li>\n</ul>\n<p>The <tt>construct_decorator</tt> function can be used to combine <tt>@before</tt>,\n<tt>@after</tt>, and <tt>@instead</tt> calls into one decorator, without having to\nworry about unintended stacking effects. Let\u2019s make a\ndecorator that announces when we\u2019re starting an exiting a function:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">construct_decorator</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">before_func</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Starting decorated function '</span>\n          <span class=\"s1\">'\"</span><span class=\"si\">{}</span><span class=\"s1\">\"'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">wrapped</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"p\">))</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">after_func</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'\"</span><span class=\"si\">{}</span><span class=\"s1\">\" gave result \"</span><span class=\"si\">{}</span><span class=\"s1\">\"'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span>\n        <span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">wrapped</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"p\">,</span> <span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">result</span>\n    <span class=\"p\">))</span>\n\n<span class=\"n\">my_decorator</span> <span class=\"o\">=</span> <span class=\"n\">construct_decorator</span><span class=\"p\">(</span><span class=\"n\">before</span><span class=\"o\">=</span><span class=\"n\">before_func</span><span class=\"p\">,</span> <span class=\"n\">after</span><span class=\"o\">=</span><span class=\"n\">after_func</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@my_decorator</span><span class=\"p\">()</span>\n<span class=\"k\">def</span> <span class=\"nf\">this_function_returns_nothing</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'nothing'</span>\n</pre>\n<p>And the output?</p>\n<pre>Starting decorated function \"this_function_returns_nothing\"\n\"this_function_returns_nothing\" gave result \"nothing\"\n</pre>\n<p>Maybe a more realistic example would be useful. Let\u2019s say we want to add\nheaders to a Flask response.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">Flask</span><span class=\"p\">,</span> <span class=\"n\">Response</span><span class=\"p\">,</span> <span class=\"n\">make_response</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">construct_decorator</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">_set_app_json_header</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"p\">):</span>\n    <span class=\"c1\"># Ensure the response is a Response object, even if a tuple was</span>\n    <span class=\"c1\"># returned by the view function.</span>\n    <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">make_response</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">result</span><span class=\"p\">)</span>\n    <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">headers</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"s1\">'Content-Type'</span><span class=\"p\">,</span> <span class=\"s1\">'application/json'</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">response</span>\n\n\n<span class=\"n\">application_json</span> <span class=\"o\">=</span> <span class=\"n\">construct_decorator</span><span class=\"p\">(</span><span class=\"n\">after</span><span class=\"o\">=</span><span class=\"n\">_set_app_json_header</span><span class=\"p\">)</span>\n\n\n<span class=\"c1\"># Now you can decorate any Flask view, and your headers will be set.</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Note that you must decorate \"before\" (closer to) the function than the</span>\n<span class=\"c1\"># app.route() decoration, because the route decorator must be called on</span>\n<span class=\"c1\"># the \"finalized\" version of your function</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n<span class=\"nd\">@application_json</span><span class=\"p\">()</span>\n<span class=\"k\">def</span> <span class=\"nf\">root_view</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'Hello, world!'</span>\n\n<span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">test_client</span><span class=\"p\">()</span>\n<span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">headers</span><span class=\"p\">)</span>\n</pre>\n<p>The output?</p>\n<p>..code:</p>\n<pre>Content-Type: application/json\nContent-Length: 13\n</pre>\n</div>\n<div id=\"prete-a-porter-ready-to-wear\">\n<h4><a href=\"#id10\" rel=\"nofollow\">Pr\u00eate-\u00e0-porter (ready-to-wear)</a></h4>\n<ul>\n<li><tt>export</tt> - add the decorated class or function to its module\u2019s <cite>__all__</cite>\nlist, exposing it as a \u201cpublic\u201d reference.</li>\n<li><tt>intercept</tt> - catch the specified exception and optionally re-raise and/or\ncall a provided callback to handle the exception</li>\n<li><tt>log_call</tt> - automatically log the decorated function\u2019s call signature and\nresults</li>\n<li><tt>memoize</tt> - memoize a function\u2019s call and return values for re-use. Can\nuse any cache in <tt>pydecor.caches</tt>, which all have options for automatic\npruning to keep the memoization cache from growing too large.</li>\n</ul>\n</div>\n</div>\n<div id=\"caches\">\n<h3><a href=\"#id11\" rel=\"nofollow\">Caches</a></h3>\n<p>Three caches are provided with <tt>pydecor</tt>. These are designed to be passed\nto the <tt>@memoization</tt> decorator if you want to use something other than\nthe default <tt>LRUCache</tt>, but they are perfectly functional for use elsewhere.</p>\n<p>All caches implement the standard dictionary interface.</p>\n<div id=\"lrucache\">\n<h4><a href=\"#id12\" rel=\"nofollow\">LRUCache</a></h4>\n<p>A least-recently-used cache. Both getting and setting of key/value pairs\nresults in their having been considered most-recently-used. When the cache\nreaches the specified <tt>max_size</tt>, least-recently-used items are discarded.</p>\n</div>\n<div id=\"fifocache\">\n<h4><a href=\"#id13\" rel=\"nofollow\">FIFOCache</a></h4>\n<p>A first-in, first-out cache. When the cache reaches the specified <tt>max_size</tt>,\nthe first item that was inserted is discarded, then the second, and so on.</p>\n</div>\n<div id=\"timedcache\">\n<h4><a href=\"#id14\" rel=\"nofollow\">TimedCache</a></h4>\n<p>A cache whose entries expire. If a <tt>max_age</tt> is specified, any entries older\nthan the <tt>max_age</tt> (in seconds) will be considered invalid, and will be\nremoved upon access.</p>\n</div>\n</div>\n<div id=\"stacking\">\n<h3><a href=\"#id15\" rel=\"nofollow\">Stacking</a></h3>\n<p>Generic and ready-to-wear decorators may be stacked! You can stack multiple\nof the same decorator, or you can mix and match. Some gotchas are listed\nbelow.</p>\n<p>Generally, stacking works just as you might expect, but some care must be\ntaken when using the <tt>@instead</tt> decorator, or <tt>@intercept</tt>, which\nuses <tt>@instead</tt> under the hood.</p>\n<p>Just remember that <tt>@instead</tt> replaces everything that comes before. So,\nas long as <tt>@instead</tt> calls the decorated function, it\u2019s okay to stack it.\nIn these cases, it will be called <em>before</em> any decorators specified below\nit, and those decorators will be executed when it calls the decorated function.\n<tt>@intercept</tt> behaves this way, too.</p>\n<p>If an <tt>@instead</tt> decorator does <em>not</em> call the decorated function and\ninstead replaces it entirely, it <strong>must</strong> be specified first (at the bottom\nof the stacked decorator pile), otherwise the decorators below it will not\nexecute.</p>\n<p>For <tt>@before</tt> and <tt>@after</tt>, it doesn\u2019t matter in what order the decorators\nare specified. <tt>@before</tt> is always called first, and <tt>@after</tt> last.</p>\n</div>\n<div id=\"class-decoration\">\n<h3><a href=\"#id16\" rel=\"nofollow\">Class Decoration</a></h3>\n<p>Class decoration is difficult, but PyDecor aims to make it as easy and\nintuitive as possible!</p>\n<p>By default, decorating a class applies that decorator to all of that class\u2019\nmethods (instance, class, and static). The decoration applies to class and\nstatic methods whether they are referenced via an instance or via a class\nreference. \u201cExtras\u201d specified at the class level persist across calls to\ndifferent methods, allowing for things like a class level memoization\ndictionary (there\u2019s a very basic test in the test suite\nthat demonstrates this pattern).</p>\n<p>If you\u2019d prefer that the decorator not apply to class and static methods,\nset the <tt>instance_methods_only=True</tt> when decorating the class.</p>\n<p>If you want to decorate the class itself, and <em>not</em> its methods, keep in\nmind that the decorator will be triggered when the class is instantiated,\nand that, if the decorator replaces or alters the return, that return will\nreplace the instantiated class. With those caveats in mind, setting\n<tt>implicit_method_decoration=False</tt> when decorating a class enables that\nfunctionality.</p>\n<div>\n<p>Note</p>\n<p>Class decoration, and in particular the decoration of class and static\nmethods, is accomplished through some pretty deep, complicated magic.\nThe test suite has a lot of tests trying to make sure that everything\nworks as expected, but please report any bugs you find so that I\ncan resolve them!</p>\n</div>\n</div>\n<div id=\"method-decoration\">\n<h3><a href=\"#id17\" rel=\"nofollow\">Method Decoration</a></h3>\n<p>Decorators can be applied to static, class, or instance methods directly, as\nwell. If combined with <tt>@staticmethod</tt> or <tt>@classmethod</tt> decorators,\nthose decorators should always be at the \u201ctop\u201d of the decorator stack\n(furthest from the function).</p>\n<p>When decorating instance methods, <tt>self</tt> is removed from the parameters\npassed to the provided callable.</p>\n<p>When decorating class methods, <tt>cls</tt> is removed from the parameters passed\nto the provided callable.</p>\n<p>Currently, the class and instance references <em>do not</em> have to be named\n<tt>\"cls\"</tt> and <tt>\"self\"</tt>, respectively, in order to be removed. However,\nthis is not guaranteed for future releases, so try to keep your naming\nstandard if you can (just FYI, <tt>\"self\"</tt> is the more likely of the two to\nwind up being required).</p>\n</div>\n</div>\n<div id=\"examples\">\n<h2><a href=\"#id18\" rel=\"nofollow\">Examples</a></h2>\n<p>Below are some examples for the generic and standard decorators. Please\ncheck out the API Docs for more information, and also check out the\nconvenience decorators, which are all implemented using the\n<tt>before</tt>, <tt>after</tt>, and <tt>instead</tt> decorators from this library.</p>\n<div id=\"update-a-function-s-args-or-kwargs\">\n<h3><a href=\"#id19\" rel=\"nofollow\">Update a Function\u2019s Args or Kwargs</a></h3>\n<p>Functions passed to <tt>@before</tt> can either return None, in which case nothing\nhappens to the decorated functions parameters, or they can return a tuple\nof args (as a tuple) and kwargs (as a dict), in which case those parameters\nare used in the decorated function. In this example, we sillify a very\nserious function.</p>\n<div>\n<p>Note</p>\n<p>Because kwargs are mutable, they can be updated even if the function\npassed to <cite>before</cite> doesn\u2019t return anything.</p>\n</div>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">before</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">spamify_func</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Mess with the function arguments\"\"\"</span>\n    <span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"nb\">tuple</span><span class=\"p\">([</span><span class=\"s1\">'spam'</span> <span class=\"k\">for</span> <span class=\"n\">_</span> <span class=\"ow\">in</span> <span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">])</span>\n    <span class=\"n\">kwargs</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"n\">k</span><span class=\"p\">:</span> <span class=\"s1\">'spam'</span> <span class=\"k\">for</span> <span class=\"n\">k</span> <span class=\"ow\">in</span> <span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">}</span>\n    <span class=\"k\">return</span> <span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">kwargs</span>\n\n\n<span class=\"nd\">@before</span><span class=\"p\">(</span><span class=\"n\">spamify_func</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">serious_function</span><span class=\"p\">(</span><span class=\"n\">serious_string</span><span class=\"p\">,</span> <span class=\"n\">serious_kwarg</span><span class=\"o\">=</span><span class=\"s1\">'serious'</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"A very serious function\"\"\"</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'A serious arg: </span><span class=\"si\">{}</span><span class=\"s1\">'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">serious_string</span><span class=\"p\">))</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'A serious kwarg: </span><span class=\"si\">{}</span><span class=\"s1\">'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">serious_kwarg</span><span class=\"p\">))</span>\n\n<span class=\"n\">serious_function</span><span class=\"p\">(</span><span class=\"s1\">'Politics'</span><span class=\"p\">,</span> <span class=\"n\">serious_kwarg</span><span class=\"o\">=</span><span class=\"s1\">'Religion'</span><span class=\"p\">)</span>\n</pre>\n<p>The output?</p>\n<pre>A serious arg: spam\nA serious kwarg: spam\n</pre>\n</div>\n<div id=\"do-something-with-a-function-s-return-value\">\n<h3><a href=\"#id20\" rel=\"nofollow\">Do Something with a Function\u2019s Return Value</a></h3>\n<p>Functions passed to <tt>@after</tt> receive the decorated function\u2019s return value\nas part of the <cite>Decorated</cite> instance. If <tt>@after</tt> returns None, the return\nvalue is sent back unchanged. However, if <tt>@after</tt> returns something,\nits return value is sent back as the return value of the function.</p>\n<p>In this example, we ensure that a function\u2019s return value has been thoroughly\nspammified.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">after</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">spamify_return</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Spamify the result of a function\"\"\"</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'spam-spam-spam-spam-</span><span class=\"si\">{}</span><span class=\"s1\">-spam-spam-spam-spam'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">result</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@after</span><span class=\"p\">(</span><span class=\"n\">spamify_return</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">unspammed_function</span><span class=\"p\">():</span>\n    <span class=\"sd\">\"\"\"Return a non-spammy value\"\"\"</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'beef'</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">unspammed_function</span><span class=\"p\">())</span>\n</pre>\n<p>The output?</p>\n<pre>spam-spam-spam-spam-beef-spam-spam-spam-spam\n</pre>\n</div>\n<div id=\"do-something-instead-of-a-function\">\n<h3><a href=\"#id21\" rel=\"nofollow\">Do Something Instead of a Function</a></h3>\n<p>Functions passed to <tt>@instead</tt> also provide wrapped context via the\n<cite>Decorated</cite> object. But, if the <cite>instead</cite> callable does not call the\nwrapped function, it won\u2019t get called at all. Maybe you want to skip\na function when a certain condition is True, but you don\u2019t want to use\n<tt>pytest.skipif</tt>, because <tt>pytest</tt> can\u2019t be a dependency of your\nproduction code for whatever reason.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">instead</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">skip</span><span class=\"p\">(</span><span class=\"n\">decorated</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">when</span><span class=\"p\">:</span>\n        <span class=\"k\">pass</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"c1\"># Calling `decorated` calls the wrapped function.</span>\n        <span class=\"k\">return</span> <span class=\"n\">decorated</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">decorated</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n\n\n<span class=\"nd\">@instead</span><span class=\"p\">(</span><span class=\"n\">skip</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">uncalled_function</span><span class=\"p\">():</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"You won't see me (you won't see me)\"</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">uncalled_function</span><span class=\"p\">()</span>\n</pre>\n<p>The output?</p>\n<p>(There is no output, because the function was skipped)</p>\n</div>\n<div id=\"automatically-log-function-calls-and-results\">\n<h3><a href=\"#id22\" rel=\"nofollow\">Automatically Log Function Calls and Results</a></h3>\n<p>Maybe you want to make sure your functions get logged without having to\nbother with the logging boilerplate each time. <tt>@log_call</tt> tries to\nautomatically get a logging instance corresponding to the module\nin which the decoration occurs (in the same way as if you made a call\nto <tt>logging.getLogger(__name__)</tt>, or you can pass it your own, fancy,\ncustom, spoiler-bedecked logger instance.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">logging</span> <span class=\"kn\">import</span> <span class=\"n\">getLogger</span><span class=\"p\">,</span> <span class=\"n\">StreamHandler</span>\n<span class=\"kn\">from</span> <span class=\"nn\">sys</span> <span class=\"kn\">import</span> <span class=\"n\">stdout</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">log_call</span>\n\n\n<span class=\"c1\"># We're just getting a logger here so we can see the output. This isn't</span>\n<span class=\"c1\"># actually necessary for @log_call to work!</span>\n<span class=\"n\">log</span> <span class=\"o\">=</span> <span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n<span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">setLevel</span><span class=\"p\">(</span><span class=\"s1\">'DEBUG'</span><span class=\"p\">)</span>\n<span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">addHandler</span><span class=\"p\">(</span><span class=\"n\">StreamHandler</span><span class=\"p\">(</span><span class=\"n\">stdout</span><span class=\"p\">))</span>\n\n\n<span class=\"nd\">@log_call</span><span class=\"p\">()</span>\n<span class=\"k\">def</span> <span class=\"nf\">get_lucky</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"We're up all night 'till the sun.\"\"\"</span>\n    <span class=\"k\">return</span> <span class=\"s2\">\"We're up all night for good fun.\"</span>\n\n\n<span class=\"n\">get_lucky</span><span class=\"p\">(</span><span class=\"s1\">'Too far'</span><span class=\"p\">,</span> <span class=\"s1\">'to give up'</span><span class=\"p\">,</span> <span class=\"n\">who_we</span><span class=\"o\">=</span><span class=\"s1\">'are'</span><span class=\"p\">)</span>\n</pre>\n<p>And the output?</p>\n<pre>get_lucky(*('Too far', 'to give up'), **{'who_we': 'are'}) -&gt; \"We're up all night for good fun\"\n</pre>\n</div>\n<div id=\"intercept-an-exception-and-re-raise-a-custom-one\">\n<h3><a href=\"#id23\" rel=\"nofollow\">Intercept an Exception and Re-raise a Custom One</a></h3>\n<p>Are you a put-upon library developer tired of constantly having to re-raise\ncustom exceptions so that users of your library can have one nice try/except\nlooking for your base exception? Let\u2019s make that easier:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">intercept</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">BetterException</span><span class=\"p\">(</span><span class=\"ne\">Exception</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Much better than all those other exceptions\"\"\"</span>\n\n\n<span class=\"nd\">@intercept</span><span class=\"p\">(</span><span class=\"n\">catch</span><span class=\"o\">=</span><span class=\"ne\">RuntimeError</span><span class=\"p\">,</span> <span class=\"n\">reraise</span><span class=\"o\">=</span><span class=\"n\">BetterException</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">sometimes_i_error</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Sometimes, this function raises an exception\"\"\"</span>\n    <span class=\"k\">if</span> <span class=\"n\">val</span> <span class=\"o\">&gt;</span> <span class=\"mi\">5</span><span class=\"p\">:</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">RuntimeError</span><span class=\"p\">(</span><span class=\"s1\">'This value is too big!'</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">7</span><span class=\"p\">):</span>\n    <span class=\"n\">sometimes_i_error</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"p\">)</span>\n</pre>\n<p>The output?</p>\n<pre>Traceback (most recent call last):\n  File \"/Users/Nautilus/Library/Preferences/PyCharm2017.1/scratches/scratch_1.py\", line 88, in &lt;module&gt;\n    sometimes_i_error(i)\n  File \"/Users/Nautilus/Documents/Programming/pydecor/pydecor/decorators.py\", line 389, in wrapper\n    return fn(**fkwargs)\n  File \"/Users/Nautilus/Documents/Programming/pydecor/pydecor/functions.py\", line 58, in intercept\n    raise_from(new_exc, context)\n  File \"&lt;string&gt;\", line 2, in raise_from\n__main__.BetterException: This value is too big!\n</pre>\n</div>\n<div id=\"intercept-an-exception-do-something-and-re-raise-the-original\">\n<h3><a href=\"#id24\" rel=\"nofollow\">Intercept an Exception, Do Something, and Re-raise the Original</a></h3>\n<p>Maybe you don\u2019t <em>want</em> to raise a custom exception. Maybe the original\none was just fine. All you want to do is print a special message before\nre-raising the original exception. PyDecor has you covered:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">intercept</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">print_exception</span><span class=\"p\">(</span><span class=\"n\">exc</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Make sure stdout knows about our exceptions\"\"\"</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Houston, we have a problem: </span><span class=\"si\">{}</span><span class=\"s1\">'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">exc</span><span class=\"p\">))</span>\n\n\n<span class=\"nd\">@intercept</span><span class=\"p\">(</span><span class=\"n\">catch</span><span class=\"o\">=</span><span class=\"ne\">Exception</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"o\">=</span><span class=\"n\">print_exception</span><span class=\"p\">,</span> <span class=\"n\">reraise</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">assert_false</span><span class=\"p\">():</span>\n    <span class=\"sd\">\"\"\"All I do is assert that False is True\"\"\"</span>\n    <span class=\"k\">assert</span> <span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"s1\">'Turns out, False is not True'</span>\n\n\n<span class=\"n\">assert_false</span><span class=\"p\">()</span>\n</pre>\n<p>And the output:</p>\n<pre>Houston, we have a problem: Turns out, False is not True\nTraceback (most recent call last):\n  File \"/Users/Nautilus/Library/Preferences/PyCharm2017.1/scratches/scratch_1.py\", line 105, in &lt;module&gt;\n    assert_false()\n  File \"/Users/Nautilus/Documents/Programming/pydecor/pydecor/decorators.py\", line 389, in wrapper\n    return fn(**fkwargs)\n  File \"/Users/Nautilus/Documents/Programming/pydecor/pydecor/functions.py\", line 49, in intercept\n    return decorated(*decorated_args, **decorated_kwargs)\n  File \"/Users/Nautilus/Library/Preferences/PyCharm2017.1/scratches/scratch_1.py\", line 102, in assert_false\n    assert False, 'Turns out, False is not True'\nAssertionError: Turns out, False is not True\n</pre>\n</div>\n<div id=\"intercept-an-exception-handle-and-be-done-with-it\">\n<h3><a href=\"#id25\" rel=\"nofollow\">Intercept an Exception, Handle, and Be Done with It</a></h3>\n<p>Sometimes an exception isn\u2019t the end of the world, and it doesn\u2019t need to\nbubble up to the top of your application. In these cases, maybe just handle\nit and don\u2019t re-raise:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pydecor</span> <span class=\"kn\">import</span> <span class=\"n\">intercept</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">let_us_know_it_happened</span><span class=\"p\">(</span><span class=\"n\">exc</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"Just let us know an exception happened (if we are reading stdout)\"\"\"</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'This non-critical exception happened: </span><span class=\"si\">{}</span><span class=\"s1\">'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">exc</span><span class=\"p\">))</span>\n\n\n<span class=\"nd\">@intercept</span><span class=\"p\">(</span><span class=\"n\">catch</span><span class=\"o\">=</span><span class=\"ne\">ValueError</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"o\">=</span><span class=\"n\">let_us_know_it_happened</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">resilient_function</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"I am so resilient!\"\"\"</span>\n    <span class=\"n\">val</span> <span class=\"o\">=</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'If I get here, I have an integer: </span><span class=\"si\">{}</span><span class=\"s1\">'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">))</span>\n\n\n<span class=\"n\">resilient_function</span><span class=\"p\">(</span><span class=\"s1\">'50'</span><span class=\"p\">)</span>\n<span class=\"n\">resilient_function</span><span class=\"p\">(</span><span class=\"s1\">'foo'</span><span class=\"p\">)</span>\n</pre>\n<p>Output:</p>\n<pre>If I get here, I have an integer: 50\nThis non-critical exception happened: invalid literal for int() with base 10: 'foo'\n</pre>\n<p>Note that the function does <em>not</em> continue running after the exception is\nhandled. Use this for short-circuiting under certain conditions rather\nthan for instituting a <tt>try/except:pass</tt> block. Maybe one day I\u2019ll figure\nout how to make this work like that, but as it stands, the decorator surrounds\nthe entire function, so it does not provide that fine-grained level of control.</p>\n</div>\n</div>\n<div id=\"roadmap\">\n<h2><a href=\"#id26\" rel=\"nofollow\">Roadmap</a></h2>\n<h2 id=\"id1\"><span class=\"section-subtitle\">2.?</span></h2>\n<div id=\"more-prete-a-porter-decorators\">\n<h3><a href=\"#id27\" rel=\"nofollow\">More Pr\u00eate-\u00e0-porter Decorators</a></h3>\n<ul>\n<li><tt>skipif</tt> - similar to py.test\u2019s decorator, skip the function if a\nprovided condition is True</li>\n</ul>\n<p>Let me know if you\u2019ve got any idea for other decorators that would\nbe nice to have!</p>\n</div>\n<div id=\"type-annotations\">\n<h3><a href=\"#id28\" rel=\"nofollow\">Type Annotations</a></h3>\n<p>Now that we\u2019ve dropped support for Python 2, we can use type annotations\nto properly annotate function inputs and return values and make them\navailable to library authors.</p>\n</div>\n</div>\n<div id=\"contributing\">\n<h2><a href=\"#id29\" rel=\"nofollow\">Contributing</a></h2>\n<p>Contributions are welcome! If you find a bug or if something doesn\u2019t\nwork the way you think it should, please <a href=\"https://github.com/mplanchard/pydecor/issues\" rel=\"nofollow\">raise an issue</a>.\nIf you know how to fix the bug, please <a href=\"https://github.com/mplanchard/pydecor/pulls\" rel=\"nofollow\">open a PR!</a></p>\n<p>I absolutely welcome any level of contribution. If you think the docs\ncould be better, or if you\u2019ve found a typo, please open up a PR to improve\nand/or fix them.</p>\n<div id=\"contributor-conduct\">\n<h3><a href=\"#id30\" rel=\"nofollow\">Contributor Conduct</a></h3>\n<p>There is a <tt>CODE_OF_CONDUCT.md</tt> file with details, based on one of GitHub\u2019s\ntemplates, but the upshot is that I expect everyone who contributes to this\nproject to do their best to be helpful, friendly, and patient. Discrimination\nof any kind will not be tolerated and will be promptly reported to GitHub.</p>\n<p>On a personal note, Open Source survives because of people who are willing to\ncontribute their time and effort for free. The least we can do is treat them\nwith respect.</p>\n</div>\n<div id=\"tests\">\n<h3><a href=\"#id31\" rel=\"nofollow\">Tests</a></h3>\n<p>Tests can be run with:</p>\n<pre>make test\n</pre>\n<p>This will use whatever your local <cite>python3</cite> happens to be. If you have\nother pythons available, you can run:</p>\n<pre>make tox\n</pre>\n<p>to try to run locally for all supported Python versions.</p>\n<p>If you have docker installed, you can run:</p>\n<pre>make test-docker-{version}  # e.g. make test-docker-3.6\n</pre>\n<p>to pull down an appropriate Docker image and run tests inside of it. You can\nalso run:</p>\n<pre>make test-docker\n</pre>\n<p>to do this for all supported versions of Python.</p>\n<p>PRs that cause tests to fail will not be merged until tests pass.</p>\n<p>Any new functionality is expected to come with appropriate tests.\nIf you have any questions, feel free to reach out to me via email at\n<tt>msplanchard</tt> <tt>@</tt> <tt>gmail</tt> or on GH via Issues.</p>\n</div>\n<div id=\"autoformatting\">\n<h3><a href=\"#id32\" rel=\"nofollow\">Autoformatting</a></h3>\n<p>This project uses <a href=\"https://github.com/psf/black\" rel=\"nofollow\">black</a> for autoformatting. I recommend setting your editor\nup to format on save for this project, but you can also run:</p>\n<pre>make fmt\n</pre>\n<p>to format everything.</p>\n</div>\n<div id=\"linting\">\n<h3><a href=\"#id33\" rel=\"nofollow\">Linting</a></h3>\n<p>Linting can be run with:</p>\n<pre>make lint\n</pre>\n<p>Currently, linting verifies that there are:</p>\n<ul>\n<li>No flake8 errors</li>\n<li>No mypy errors</li>\n<li>No pylint errors</li>\n<li>No files that need be formatted</li>\n</ul>\n<p>You should ensure that <cite>make lint</cite> returns 0 before opening a PR.</p>\n</div>\n<div id=\"docs\">\n<h3><a href=\"#id34\" rel=\"nofollow\">Docs</a></h3>\n<p>Docs are autogenerated via Sphinx. You can build them locally by running:</p>\n<pre>make docs\n</pre>\n<p>You can then open <cite>docs/_build/html/index.html</cite> in your web browser of\nchoice to see how the documentation will look with your changes.</p>\n</div>\n<div id=\"deployment\">\n<h3><a href=\"#id35\" rel=\"nofollow\">Deployment</a></h3>\n<p>Deployment is handled through pushing tags. Any tag pushed to GH causes\na push to PyPI if the current version is not yet present there.</p>\n<p>Pushing the appropriate tag is made easier through the use of:</p>\n<pre>VERSION=1.0.0 make distribute\n</pre>\n<p>where <cite>VERSION</cite> obviously should be the current version. This will verify\nthe specified version matches the package\u2019s current version, check to be\nsure that the most recent master is being distributed, prompt for a message,\nand create and push a signed tag of the format <cite>v{version}</cite>.</p>\n</div>\n</div>\n<div id=\"credits-and-links\">\n<h2><a href=\"#id36\" rel=\"nofollow\">Credits and Links</a></h2>\n<ul>\n<li>This project was started using my generic <a href=\"https://github.com/mplanchard/python_skeleton\" rel=\"nofollow\">project template</a></li>\n<li>Tests are run with <a href=\"https://docs.pytest.org/en/latest/\" rel=\"nofollow\">pytest</a> and <a href=\"http://tox.readthedocs.org/\" rel=\"nofollow\">tox</a></li>\n<li>Documentation built with <a href=\"http://www.sphinx-doc.org/en/stable/\" rel=\"nofollow\">sphinx</a></li>\n<li>Coverage information collected with <a href=\"https://coverage.readthedocs.io/en/coverage-4.4.1/\" rel=\"nofollow\">coverage</a></li>\n<li>Pickling of objects provided via <a href=\"https://pypi.python.org/pypi/dill\" rel=\"nofollow\">dill</a></li>\n</ul>\n</div>\n\n          </div>"}, "last_serial": 6442508, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "0ee0756a362f7b39f8a8b10ace52c70a", "sha256": "9a8ffc49159bf83cb129e95599b406355b4c59850910d8b827b4ea54432aafab"}, "downloads": -1, "filename": "pydecor-0.1.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "0ee0756a362f7b39f8a8b10ace52c70a", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 28147, "upload_time": "2017-06-13T00:22:05", "upload_time_iso_8601": "2017-06-13T00:22:05.279513Z", "url": "https://files.pythonhosted.org/packages/05/20/51646422c59ac04e6c76cb1012687e8ad8ef98571689621b1dbcd9a77425/pydecor-0.1.0-py2.py3-none-any.whl", "yanked": false}], "0.1.0.dev1": [{"comment_text": "", "digests": {"md5": "1c90280fa266518eebf65da8a80ec0eb", "sha256": "2ff6addcdcd39fc6f412232f324e31a0f71fa8eb85d9e84b04651ea9d2ebb1d5"}, "downloads": -1, "filename": "pydecor-0.1.0.dev1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "1c90280fa266518eebf65da8a80ec0eb", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 3706, "upload_time": "2017-06-01T01:13:23", "upload_time_iso_8601": "2017-06-01T01:13:23.619274Z", "url": "https://files.pythonhosted.org/packages/e6/95/f74fd8366f605b6b28f0c2cde723202693bddee938001fe43a9121c30e96/pydecor-0.1.0.dev1-py2.py3-none-any.whl", "yanked": false}], "0.1.0.dev2": [{"comment_text": "", "digests": {"md5": "617d97ce5495fa983abb553cfcf34bea", "sha256": "6a7a88ea1f30921ef2f2d9c1961e87d5326c870494d7448b5a2e8a528e5ad12e"}, "downloads": -1, "filename": "pydecor-0.1.0.dev2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "617d97ce5495fa983abb553cfcf34bea", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 4098, "upload_time": "2017-06-01T03:15:39", "upload_time_iso_8601": "2017-06-01T03:15:39.083368Z", "url": "https://files.pythonhosted.org/packages/5e/a2/1c5aad2c5bf175be1f5d5b7271e969259c9c1f1b54e30a5719be513559ff/pydecor-0.1.0.dev2-py2.py3-none-any.whl", "yanked": false}], "0.1.0.dev3": [{"comment_text": "", "digests": {"md5": "fe67d6828ff2efe7a5b96492f88adfbc", "sha256": "3233127d6f4f96285deaa6b2e551bd07261566acc75131f0298a7b4ef21d0a0b"}, "downloads": -1, "filename": "pydecor-0.1.0.dev3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "fe67d6828ff2efe7a5b96492f88adfbc", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 6867, "upload_time": "2017-06-07T13:52:15", "upload_time_iso_8601": "2017-06-07T13:52:15.326196Z", "url": "https://files.pythonhosted.org/packages/be/1f/8ed7e83df54b414c4064f34e8dbc4a6498f7686ea2580a1f9587aacca2b7/pydecor-0.1.0.dev3-py2.py3-none-any.whl", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "fc04944ff7c5104f7a84ae4623fcaee7", "sha256": "3a4b54d6df633ec35ddb5a2ca39c4053fb945e1f24ec932a7923be143b3b7c6a"}, "downloads": -1, "filename": "pydecor-1.0.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "fc04944ff7c5104f7a84ae4623fcaee7", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 28195, "upload_time": "2017-06-13T00:57:16", "upload_time_iso_8601": "2017-06-13T00:57:16.395373Z", "url": "https://files.pythonhosted.org/packages/c8/f8/0a903dec046380b048da5319dd697d68bfe98676c8707c8ed4159ce37206/pydecor-1.0.0-py2.py3-none-any.whl", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "6317ee3d5ea33402618fd04ca5ca1a1d", "sha256": "faf9a06c94f5afcd5eda3589bbc3bfafbe31f3e80f9032f77c1107e5bd3e2359"}, "downloads": -1, "filename": "pydecor-1.1.0.tar.gz", "has_sig": false, "md5_digest": "6317ee3d5ea33402618fd04ca5ca1a1d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 30419, "upload_time": "2017-09-04T04:26:40", "upload_time_iso_8601": "2017-09-04T04:26:40.336683Z", "url": "https://files.pythonhosted.org/packages/22/55/16ac4f2a0086e98305800f828540d6d3d1134eb945ff4b99127d3771b1b1/pydecor-1.1.0.tar.gz", "yanked": false}], "1.1.1": [{"comment_text": "", "digests": {"md5": "2ed0070e74d4b87f336b64bd31ee0831", "sha256": "bb21d29a4a0eba75650db6c0ac55cef2f18d5aff645b7cad8df3e65e110349d3"}, "downloads": -1, "filename": "pydecor-1.1.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "2ed0070e74d4b87f336b64bd31ee0831", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 53265, "upload_time": "2017-09-04T04:46:29", "upload_time_iso_8601": "2017-09-04T04:46:29.950623Z", "url": "https://files.pythonhosted.org/packages/50/4b/88b6651da2bf43312ab07a5b67b647953551f6b3d00dd9eed3d5780daa56/pydecor-1.1.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "879ddd166ec72671d3a81c2987498a2c", "sha256": "cdbd0ba8d638b436436094c574d4a211da51ca0177884725e1296ca90f784eb3"}, "downloads": -1, "filename": "pydecor-1.1.1.tar.gz", "has_sig": false, "md5_digest": "879ddd166ec72671d3a81c2987498a2c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 51258, "upload_time": "2017-09-04T04:46:33", "upload_time_iso_8601": "2017-09-04T04:46:33.081064Z", "url": "https://files.pythonhosted.org/packages/11/ba/7ef22682ef1900c002612343b019175eb15e09ac478ee7c2d062e866c098/pydecor-1.1.1.tar.gz", "yanked": false}], "1.1.2": [{"comment_text": "", "digests": {"md5": "bbfaf067e6b739267dc86cb8577c7bbd", "sha256": "b1cf4e9861bf379d1ab4215a33dc28fa355031c3b9456766c4bf3eae1407e613"}, "downloads": -1, "filename": "pydecor-1.1.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "bbfaf067e6b739267dc86cb8577c7bbd", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 53269, "upload_time": "2017-09-04T05:00:21", "upload_time_iso_8601": "2017-09-04T05:00:21.536950Z", "url": "https://files.pythonhosted.org/packages/f9/a8/578bac5d7f564fa4e3de44a44c581c302460d8e8f0a44eb036e05d97ff92/pydecor-1.1.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "06bbcd7fc700dda2617f3a0e6539aa63", "sha256": "29d342dc600c76754c7ec5d6803ac826e832fa67a6682bd3b15de04435d240c4"}, "downloads": -1, "filename": "pydecor-1.1.2.tar.gz", "has_sig": false, "md5_digest": "06bbcd7fc700dda2617f3a0e6539aa63", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 51259, "upload_time": "2017-09-04T05:00:22", "upload_time_iso_8601": "2017-09-04T05:00:22.869552Z", "url": "https://files.pythonhosted.org/packages/38/01/a51926001deabffce54d8a622181b178d06674919c2f4cd995c69d3f071a/pydecor-1.1.2.tar.gz", "yanked": false}], "1.1.3": [{"comment_text": "", "digests": {"md5": "6b42e23b0357c3ff782d59dc6aa7b72b", "sha256": "7e470328e9ba1a4645b1b2e31f71c8aa4c8f7565fac632d8394603cafc35e9e1"}, "downloads": -1, "filename": "pydecor-1.1.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "6b42e23b0357c3ff782d59dc6aa7b72b", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 53337, "upload_time": "2017-09-04T05:28:43", "upload_time_iso_8601": "2017-09-04T05:28:43.331034Z", "url": "https://files.pythonhosted.org/packages/b0/4b/55e6dd57b785e510c9cd91d2d096140138320a7430ed921cf934183b673c/pydecor-1.1.3-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "a42f0e62de2456f72430dfadeed9f1aa", "sha256": "a5756873384572fdc4398bf1a6c94c8df4d10418fabf0247fac6d086b022b13e"}, "downloads": -1, "filename": "pydecor-1.1.3.tar.gz", "has_sig": false, "md5_digest": "a42f0e62de2456f72430dfadeed9f1aa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 51393, "upload_time": "2017-09-04T05:28:45", "upload_time_iso_8601": "2017-09-04T05:28:45.078994Z", "url": "https://files.pythonhosted.org/packages/b7/24/004b671a5e0a85a3e1a0801a48caaf0e9ce201d7694faa3dbdf798115009/pydecor-1.1.3.tar.gz", "yanked": false}], "2.0.0": [{"comment_text": "", "digests": {"md5": "3be0d763fc1326480021a98dbe970892", "sha256": "ce0a87fa3e78c1da875b81148e4a351fcf6e70ec3cc700272b8196f5683aaf9a"}, "downloads": -1, "filename": "pydecor-2.0.0-py3-none-any.whl", "has_sig": true, "md5_digest": "3be0d763fc1326480021a98dbe970892", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 26973, "upload_time": "2020-01-13T04:59:25", "upload_time_iso_8601": "2020-01-13T04:59:25.585571Z", "url": "https://files.pythonhosted.org/packages/63/66/b1d3c9b23d0bd6d902bb88edbf7ddb20057f15aa38bf60d7c63d5ad877cf/pydecor-2.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f7cd5c21cf0da983395c9db1e1a3d630", "sha256": "e57827f0b969e14ed4edd4be28f4fbe05f96d7e688beca386a9653fd6e39de56"}, "downloads": -1, "filename": "pydecor-2.0.0.tar.gz", "has_sig": true, "md5_digest": "f7cd5c21cf0da983395c9db1e1a3d630", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 43799, "upload_time": "2020-01-13T04:59:28", "upload_time_iso_8601": "2020-01-13T04:59:28.494810Z", "url": "https://files.pythonhosted.org/packages/35/33/8ed4c58ea2b171fef1930b5ce42ed91476ddf29c4eb665194f3d568d014a/pydecor-2.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "3be0d763fc1326480021a98dbe970892", "sha256": "ce0a87fa3e78c1da875b81148e4a351fcf6e70ec3cc700272b8196f5683aaf9a"}, "downloads": -1, "filename": "pydecor-2.0.0-py3-none-any.whl", "has_sig": true, "md5_digest": "3be0d763fc1326480021a98dbe970892", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 26973, "upload_time": "2020-01-13T04:59:25", "upload_time_iso_8601": "2020-01-13T04:59:25.585571Z", "url": "https://files.pythonhosted.org/packages/63/66/b1d3c9b23d0bd6d902bb88edbf7ddb20057f15aa38bf60d7c63d5ad877cf/pydecor-2.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f7cd5c21cf0da983395c9db1e1a3d630", "sha256": "e57827f0b969e14ed4edd4be28f4fbe05f96d7e688beca386a9653fd6e39de56"}, "downloads": -1, "filename": "pydecor-2.0.0.tar.gz", "has_sig": true, "md5_digest": "f7cd5c21cf0da983395c9db1e1a3d630", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 43799, "upload_time": "2020-01-13T04:59:28", "upload_time_iso_8601": "2020-01-13T04:59:28.494810Z", "url": "https://files.pythonhosted.org/packages/35/33/8ed4c58ea2b171fef1930b5ce42ed91476ddf29c4eb665194f3d568d014a/pydecor-2.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:07:12 2020"}