{"info": {"author": "Robinhood Markets, Inc.", "author_email": "open-source@robinhood.com", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Natural Language :: English", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3 :: Only"], "description": "# Airflow Prometheus Exporter\n\n[![Build Status](https://travis-ci.org/robinhood/airflow-prometheus-exporter.svg?branch=master)](https://travis-ci.org/robinhood/airflow-prometheus-exporter)\n\nThe Airflow Prometheus Exporter exposes various metrics about the Scheduler, DAGs and Tasks which helps improve the observability of an Airflow cluster.\n\nThe exporter is based on this [prometheus exporter for Airflow](https://github.com/epoch8/airflow-exporter).\n\n## Requirements\n\nThe plugin has been tested with:\n\n- Airflow >= 1.10.4\n- Python 3.6+\n\nThe scheduler metrics assume that there is a DAG named `canary_dag`. In our setup, the `canary_dag` is a DAG which has a tasks which perform very simple actions such as establishing database connections. This DAG is used to test the uptime of the Airflow scheduler itself.\n\n## Installation\n\nThe exporter can be installed as an Airflow Plugin using:\n\n```pip install airflow-prometheus-exporter```\n\nThis should ideally be installed in your Airflow virtualenv.\n\n## Metrics\n\nMetrics will be available at\n\n`http://<your_airflow_host_and_port>/admin/metrics/`\n\n### Task Specific Metrics\n\n#### `airflow_task_status`\n\nNumber of tasks with a specific status.\n\nAll the possible states are listed [here](https://github.com/apache/airflow/blob/master/airflow/utils/state.py#L46).\n\n#### `airflow_task_duration`\n\nDuration of successful tasks in seconds.\n\n#### `airflow_task_fail_count`\n\nNumber of times a particular task has failed.\n\n#### `airflow_xcom_param`\n\nvalue of configurable parameter in xcom table\n\nxcom fields is deserialized as a dictionary and if key is found for a paticular task-id, the value is reported as a guage\n\nAdd task / key combinations in config.yaml:\n\n```bash\nxcom_params:\n  -\n    task_id: abc\n    key: count\n  -\n    task_id: def\n    key: errors\n\n```\n\n\na task_id of 'all' will match against all airflow tasks:\n\n```\nxcom_params:\n -\n    task_id: all\n    key: count\n```\n\n\n\n### Dag Specific Metrics\n\n#### `airflow_dag_status`\n\nNumber of DAGs with a specific status.\n\nAll the possible states are listed [here](https://github.com/apache/airflow/blob/master/airflow/utils/state.py#L59)\n\n#### `airflow_dag_run_duration`\nDuration of successful DagRun in seconds.\n\n### Scheduler Metrics\n\n#### `airflow_dag_scheduler_delay`\n\nScheduling delay for a DAG Run in seconds. This metric assumes there is a `canary_dag`.\n\nThe scheduling delay is measured as the delay between when a DAG is marked as `SCHEDULED` and when it actually starts `RUNNING`.\n\n#### `airflow_task_scheduler_delay`\n\nScheduling delay for a Task in seconds. This metric assumes there is a `canary_dag`.\n\n#### `airflow_num_queued_tasks`\n\nNumber of tasks in the `QUEUED` state at any given instance.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/robinhood/airflow_prometheus_exporter", "keywords": "airflow_prometheus_exporter", "license": "BSD 3-Clause", "maintainer": "", "maintainer_email": "", "name": "airflow-prometheus-exporter", "package_url": "https://pypi.org/project/airflow-prometheus-exporter/", "platform": "", "project_url": "https://pypi.org/project/airflow-prometheus-exporter/", "project_urls": {"Homepage": "https://github.com/robinhood/airflow_prometheus_exporter"}, "release_url": "https://pypi.org/project/airflow-prometheus-exporter/1.0.8/", "requires_dist": ["apache-airflow (>=1.10.4)", "prometheus-client (>=0.4.2)", "bumpversion ; extra == 'dev'", "tox ; extra == 'dev'", "twine ; extra == 'dev'"], "requires_python": "", "summary": "Prometheus Exporter for Airflow Metrics", "version": "1.0.8", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Airflow Prometheus Exporter</h1>\n<p><a href=\"https://travis-ci.org/robinhood/airflow-prometheus-exporter\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ec155719ea8ef846c247bec3674f95cd902016e0/68747470733a2f2f7472617669732d63692e6f72672f726f62696e686f6f642f616972666c6f772d70726f6d6574686575732d6578706f727465722e7376673f6272616e63683d6d6173746572\"></a></p>\n<p>The Airflow Prometheus Exporter exposes various metrics about the Scheduler, DAGs and Tasks which helps improve the observability of an Airflow cluster.</p>\n<p>The exporter is based on this <a href=\"https://github.com/epoch8/airflow-exporter\" rel=\"nofollow\">prometheus exporter for Airflow</a>.</p>\n<h2>Requirements</h2>\n<p>The plugin has been tested with:</p>\n<ul>\n<li>Airflow &gt;= 1.10.4</li>\n<li>Python 3.6+</li>\n</ul>\n<p>The scheduler metrics assume that there is a DAG named <code>canary_dag</code>. In our setup, the <code>canary_dag</code> is a DAG which has a tasks which perform very simple actions such as establishing database connections. This DAG is used to test the uptime of the Airflow scheduler itself.</p>\n<h2>Installation</h2>\n<p>The exporter can be installed as an Airflow Plugin using:</p>\n<p><code>pip install airflow-prometheus-exporter</code></p>\n<p>This should ideally be installed in your Airflow virtualenv.</p>\n<h2>Metrics</h2>\n<p>Metrics will be available at</p>\n<p><code>http://&lt;your_airflow_host_and_port&gt;/admin/metrics/</code></p>\n<h3>Task Specific Metrics</h3>\n<h4><code>airflow_task_status</code></h4>\n<p>Number of tasks with a specific status.</p>\n<p>All the possible states are listed <a href=\"https://github.com/apache/airflow/blob/master/airflow/utils/state.py#L46\" rel=\"nofollow\">here</a>.</p>\n<h4><code>airflow_task_duration</code></h4>\n<p>Duration of successful tasks in seconds.</p>\n<h4><code>airflow_task_fail_count</code></h4>\n<p>Number of times a particular task has failed.</p>\n<h4><code>airflow_xcom_param</code></h4>\n<p>value of configurable parameter in xcom table</p>\n<p>xcom fields is deserialized as a dictionary and if key is found for a paticular task-id, the value is reported as a guage</p>\n<p>Add task / key combinations in config.yaml:</p>\n<pre>xcom_params:\n  -\n    task_id: abc\n    key: count\n  -\n    task_id: def\n    key: errors\n</pre>\n<p>a task_id of 'all' will match against all airflow tasks:</p>\n<pre><code>xcom_params:\n -\n    task_id: all\n    key: count\n</code></pre>\n<h3>Dag Specific Metrics</h3>\n<h4><code>airflow_dag_status</code></h4>\n<p>Number of DAGs with a specific status.</p>\n<p>All the possible states are listed <a href=\"https://github.com/apache/airflow/blob/master/airflow/utils/state.py#L59\" rel=\"nofollow\">here</a></p>\n<h4><code>airflow_dag_run_duration</code></h4>\n<p>Duration of successful DagRun in seconds.</p>\n<h3>Scheduler Metrics</h3>\n<h4><code>airflow_dag_scheduler_delay</code></h4>\n<p>Scheduling delay for a DAG Run in seconds. This metric assumes there is a <code>canary_dag</code>.</p>\n<p>The scheduling delay is measured as the delay between when a DAG is marked as <code>SCHEDULED</code> and when it actually starts <code>RUNNING</code>.</p>\n<h4><code>airflow_task_scheduler_delay</code></h4>\n<p>Scheduling delay for a Task in seconds. This metric assumes there is a <code>canary_dag</code>.</p>\n<h4><code>airflow_num_queued_tasks</code></h4>\n<p>Number of tasks in the <code>QUEUED</code> state at any given instance.</p>\n\n          </div>"}, "last_serial": 6788969, "releases": {"1.0.1": [{"comment_text": "", "digests": {"md5": "a015866b3304340ec02ca0dafb50b6f6", "sha256": "cc72652014169631eddf9f297c7b3d3e410d9f90e53a1287fc31bc2802484c19"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.1.tar.gz", "has_sig": false, "md5_digest": "a015866b3304340ec02ca0dafb50b6f6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4632, "upload_time": "2019-08-09T01:17:32", "upload_time_iso_8601": "2019-08-09T01:17:32.022749Z", "url": "https://files.pythonhosted.org/packages/87/94/72f51219f2f622e3cd49380b4838524eed5a10c6bb8c4e74d5703dd78048/airflow_prometheus_exporter-1.0.1.tar.gz", "yanked": false}], "1.0.2": [{"comment_text": "", "digests": {"md5": "d68a02144e1e5df550cfb873552625d7", "sha256": "93920ca8fa218da16c4b4b984a0fd0f8ca24fde93910feb382913e6866721af7"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "d68a02144e1e5df550cfb873552625d7", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 6824, "upload_time": "2019-09-04T18:39:20", "upload_time_iso_8601": "2019-09-04T18:39:20.394694Z", "url": "https://files.pythonhosted.org/packages/f1/94/650261aa4081c58412c2ff8feb213dcacab6713fda7321e4af8c88bf4924/airflow_prometheus_exporter-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d434370a465ca88e7a4bb1e70f51ded3", "sha256": "1147fd3f6728cfd45b9f870cd084f135a4afa80d6c3f8d44d15c3959dccaf816"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.2.tar.gz", "has_sig": false, "md5_digest": "d434370a465ca88e7a4bb1e70f51ded3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4643, "upload_time": "2019-09-04T18:39:21", "upload_time_iso_8601": "2019-09-04T18:39:21.882434Z", "url": "https://files.pythonhosted.org/packages/79/27/12a354e3957bb00045f2d3aafcc045ece42856b63c6370fc983c5676342e/airflow_prometheus_exporter-1.0.2.tar.gz", "yanked": false}], "1.0.3": [{"comment_text": "", "digests": {"md5": "9172c9e0a530f478e3c038342e7208e9", "sha256": "5d811f58d3a0ff8f33b83526f369af27282b3370f94a9c86153c4a1ac67292d5"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "9172c9e0a530f478e3c038342e7208e9", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 6944, "upload_time": "2019-09-05T16:06:35", "upload_time_iso_8601": "2019-09-05T16:06:35.853135Z", "url": "https://files.pythonhosted.org/packages/3d/1d/62a474d0248da6ebbabec08d011b3f1a05ef66cd42e1b8f1a41bfc59dd76/airflow_prometheus_exporter-1.0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2b9547f78b24405ff14f8c86a00164d0", "sha256": "1faf4e15c832347f84ff81a495ab78d85598d389fa6393e8f26a5e33a553f980"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.3.tar.gz", "has_sig": false, "md5_digest": "2b9547f78b24405ff14f8c86a00164d0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4756, "upload_time": "2019-09-05T16:06:37", "upload_time_iso_8601": "2019-09-05T16:06:37.444191Z", "url": "https://files.pythonhosted.org/packages/18/21/a1e432742b539cc55b8f6eabf8969a6183ef67d5abec1acbfd7e9562233d/airflow_prometheus_exporter-1.0.3.tar.gz", "yanked": false}], "1.0.4": [{"comment_text": "", "digests": {"md5": "10c42d5f92f79912d8a3182df3527a7d", "sha256": "b7427b09844500d8377ff8fe320ceb2780bc5ffba488e5bfacf354fd75655152"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.4-py3-none-any.whl", "has_sig": false, "md5_digest": "10c42d5f92f79912d8a3182df3527a7d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 6889, "upload_time": "2019-09-24T16:44:53", "upload_time_iso_8601": "2019-09-24T16:44:53.164855Z", "url": "https://files.pythonhosted.org/packages/f5/a7/6df7adf40147e35d267b42114296eb94f80f2be90e213df694b01ac2111f/airflow_prometheus_exporter-1.0.4-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6be5a9dd19966410ee521bad4e80e89b", "sha256": "afd019548fd042be2af630d93d89c49c1fab85d1fafcaea5ca5467e8e71f8921"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.4.tar.gz", "has_sig": false, "md5_digest": "6be5a9dd19966410ee521bad4e80e89b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4700, "upload_time": "2019-09-24T16:44:54", "upload_time_iso_8601": "2019-09-24T16:44:54.309711Z", "url": "https://files.pythonhosted.org/packages/ae/9e/45c5d475fefa0bfb0f84fa1774a64ae86c2252ed976935e063ee68b1cb96/airflow_prometheus_exporter-1.0.4.tar.gz", "yanked": false}], "1.0.5": [{"comment_text": "", "digests": {"md5": "cd9e05c63407f7bdb86388a6cb829a93", "sha256": "4162053c175a890c244a336295792a99f440be033c55838c8908688cd3df3a0a"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.5-py3-none-any.whl", "has_sig": false, "md5_digest": "cd9e05c63407f7bdb86388a6cb829a93", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8143, "upload_time": "2019-12-30T18:05:20", "upload_time_iso_8601": "2019-12-30T18:05:20.393164Z", "url": "https://files.pythonhosted.org/packages/fb/2f/3d05ac9fa08392074677f770293be73ccd9819767651525db23d73375bb3/airflow_prometheus_exporter-1.0.5-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6659b88be42ea15e8e893a1c622aa656", "sha256": "34ec1e446292cdb48d678f6fa7a395475fcf240327cd42cb27d21cef326f8810"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.5.tar.gz", "has_sig": false, "md5_digest": "6659b88be42ea15e8e893a1c622aa656", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5820, "upload_time": "2019-12-30T18:05:21", "upload_time_iso_8601": "2019-12-30T18:05:21.882803Z", "url": "https://files.pythonhosted.org/packages/ac/82/d42a3c42cbacfbb09fb02368cefe9809d12c9833dff6a59049f0b60fd1ba/airflow_prometheus_exporter-1.0.5.tar.gz", "yanked": false}], "1.0.6": [{"comment_text": "", "digests": {"md5": "46ad85e6286200ca213b942d416fd228", "sha256": "9c8f731d98fb908bb72497ea08cfabf34b801dae64f40cc490637fed4a0a83f3"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.6-py3-none-any.whl", "has_sig": false, "md5_digest": "46ad85e6286200ca213b942d416fd228", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8474, "upload_time": "2020-01-02T17:41:44", "upload_time_iso_8601": "2020-01-02T17:41:44.905378Z", "url": "https://files.pythonhosted.org/packages/c8/b2/951b2ce53a60ece3842077652424e06afa3925de91f5c470df527dbccc56/airflow_prometheus_exporter-1.0.6-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "fad73bb3b7613c99b72c219688ce2cb1", "sha256": "8922f5cd240b10684a4f9bfb5796f0b16752377129600722a5f53630161961f4"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.6.tar.gz", "has_sig": false, "md5_digest": "fad73bb3b7613c99b72c219688ce2cb1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6045, "upload_time": "2020-01-02T17:41:46", "upload_time_iso_8601": "2020-01-02T17:41:46.164829Z", "url": "https://files.pythonhosted.org/packages/0c/6b/c1960cfc493a625024cf679d4b4ef380db7c43978afdd95279ae879a0ab6/airflow_prometheus_exporter-1.0.6.tar.gz", "yanked": false}], "1.0.7": [{"comment_text": "", "digests": {"md5": "bfc2eebd86b41a671e96606242895d68", "sha256": "421bd8346ccb47be7cac4c2799982a8dc55dac11b27f1094558495e2b4a88e01"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.7-py3-none-any.whl", "has_sig": false, "md5_digest": "bfc2eebd86b41a671e96606242895d68", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8659, "upload_time": "2020-01-22T19:56:41", "upload_time_iso_8601": "2020-01-22T19:56:41.254986Z", "url": "https://files.pythonhosted.org/packages/47/91/9e2fb5587184fc7d1e0a351778d24d55026807cf439173bfd254e11f5a17/airflow_prometheus_exporter-1.0.7-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "3d5cf2fb3991d25c0e33f825b3e55d0c", "sha256": "90ee04f4767923f932cdf192feb6ab6058daa63825ad4a99302752a588130eff"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.7.tar.gz", "has_sig": false, "md5_digest": "3d5cf2fb3991d25c0e33f825b3e55d0c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6256, "upload_time": "2020-01-22T19:56:42", "upload_time_iso_8601": "2020-01-22T19:56:42.404442Z", "url": "https://files.pythonhosted.org/packages/07/71/153e84c1ff9651c4e37c1816cc2b59592f51f1f738be4ca42d75b06acfca/airflow_prometheus_exporter-1.0.7.tar.gz", "yanked": false}], "1.0.8": [{"comment_text": "", "digests": {"md5": "b3f4bcaebe20c89b15a71cf03550c34f", "sha256": "154f238177a866d03d2c0581e0a6ef939b2032a83db4910f80b384c5d5d8ec82"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.8-py3-none-any.whl", "has_sig": false, "md5_digest": "b3f4bcaebe20c89b15a71cf03550c34f", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8658, "upload_time": "2020-03-11T01:03:35", "upload_time_iso_8601": "2020-03-11T01:03:35.920906Z", "url": "https://files.pythonhosted.org/packages/d0/50/ecd869b1e06130cc8abf78f59cd6b58fd43ef65e42a695a59be3d2b0bc47/airflow_prometheus_exporter-1.0.8-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "49c4897af3bd928c31eddee0ffd20b94", "sha256": "ac6f41c0c23e00e9f8c12a97330fd91220ddc84485460882f18c0df02d3d696f"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.8.tar.gz", "has_sig": false, "md5_digest": "49c4897af3bd928c31eddee0ffd20b94", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6250, "upload_time": "2020-03-11T01:03:37", "upload_time_iso_8601": "2020-03-11T01:03:37.187352Z", "url": "https://files.pythonhosted.org/packages/2b/6a/ba5031cd8b10f9ed8cdc6915c2ec2366770a74268f7f8af367e412bb9040/airflow_prometheus_exporter-1.0.8.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "b3f4bcaebe20c89b15a71cf03550c34f", "sha256": "154f238177a866d03d2c0581e0a6ef939b2032a83db4910f80b384c5d5d8ec82"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.8-py3-none-any.whl", "has_sig": false, "md5_digest": "b3f4bcaebe20c89b15a71cf03550c34f", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8658, "upload_time": "2020-03-11T01:03:35", "upload_time_iso_8601": "2020-03-11T01:03:35.920906Z", "url": "https://files.pythonhosted.org/packages/d0/50/ecd869b1e06130cc8abf78f59cd6b58fd43ef65e42a695a59be3d2b0bc47/airflow_prometheus_exporter-1.0.8-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "49c4897af3bd928c31eddee0ffd20b94", "sha256": "ac6f41c0c23e00e9f8c12a97330fd91220ddc84485460882f18c0df02d3d696f"}, "downloads": -1, "filename": "airflow_prometheus_exporter-1.0.8.tar.gz", "has_sig": false, "md5_digest": "49c4897af3bd928c31eddee0ffd20b94", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6250, "upload_time": "2020-03-11T01:03:37", "upload_time_iso_8601": "2020-03-11T01:03:37.187352Z", "url": "https://files.pythonhosted.org/packages/2b/6a/ba5031cd8b10f9ed8cdc6915c2ec2366770a74268f7f8af367e412bb9040/airflow_prometheus_exporter-1.0.8.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:20:29 2020"}