{"info": {"author": "Tim Paine", "author_email": "t.paine154@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Framework :: Jupyter", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# nbcelltests\nCell-by-cell testing for production Jupyter notebooks in JupyterLab\n\n[![Build Status](https://dev.azure.com/tpaine154/jupyter/_apis/build/status/timkpaine.nbcelltests?branchName=master)](https://dev.azure.com/tpaine154/jupyter/_build/latest?definitionId=15&branchName=master)\n[![Coverage](https://img.shields.io/azure-devops/coverage/tpaine154/jupyter/15)](https://dev.azure.com/tpaine154/jupyter/_build?definitionId=15&_a=summary)\n[![Docs](https://img.shields.io/readthedocs/nbcelltests.svg)](https://nbcelltests.readthedocs.io)\n[![PyPI](https://img.shields.io/pypi/l/nbcelltests.svg)](https://pypi.python.org/pypi/nbcelltests)\n[![PyPI](https://img.shields.io/pypi/v/nbcelltests.svg)](https://pypi.python.org/pypi/nbcelltests)\n[![npm](https://img.shields.io/npm/v/nbcelltests.svg)](https://www.npmjs.com/package/nbcelltests)\n\n\n# Overview\n`Celltests` is designed for writing tests for linearly executed notebooks. Its primary use is for unit testing reports. \n\n### \"Linearly executed notebooks?\"\nWhen converting notebooks into html/pdf/email reports, they are executed top-to-bottom one time, and are expected to contain as little code as reasonably possible, focusing primarily on the plotting and markdown bits. Libraries for this type of thing include [Papermill](https://github.com/nteract/papermill), [JupyterLab Emails](https://github.com/timkpaine/jupyterlab_email), etc. \n\n### Doesn't this already exist?\n[Nbval](https://github.com/computationalmodelling/nbval) is a great product and I recommend using it for notebook regression tests. But it only allows for testing for unexpected failures or simple output equality tests.\n\n### So why do I want this again?\nThis doesn't necessarily help you if your data sources go down, but its likely you'll notice this anyway. Where this comes in handy is:\n\n- when the environment (e.g. package versions) are changing in your system\n- when you play around in the notebook (e.g. nonlinear execution) but aren't sure if your reports will still generate\n- when your software lifecycle systems have a hard time dealing with notebooks (can't lint/audit them as code unless integrated nbdime/nbconvert to script, tough to test, tough to ensure what works today works tomorrow)\n\n### So what does this do?\nGiven a notebook, you can write mocks and assertions for individual cells. You can then generate a testing script for this notebook, allowing you to hook it into your testing system and thereby provide unittests of your report. \n\n## Writing tests\nWhen you write tests for a cell, we create a new method on a `unittest` class corresponding to the index of your cell, and including the cumulative tests for all previous cells (to mimic what has happened so far in the notebook's linear execution). You can write whatever mocking and asserts you like, and can call `%cell` to inject the contents of the cell into your test. \n![](https://raw.githubusercontent.com/timkpaine/nbcelltests/master/docs/demo.gif)\nThe tests themselves are stored in the cell metadata, similar to celltags, slide information, etc. \n\n## Running tests\nYou can run the tests offline from an `.ipynb` file, or you can execute them from the browser and view the results of `pytest-html`'s html plugin.\n![](https://raw.githubusercontent.com/timkpaine/nbcelltests/master/docs/demo2.gif)\n\n## Extra Tests\n- Max number of lines per cell\n- Max number of cells per notebook\n- Max number of function definitions per notebook\n- Max number of class definitions per notebook\n- Percentage of cells tested\n\n## Example\nIn the committed `Untitled.ipynb` notebook, but modified so that cell 0 has its import statement copied 10 times (to trigger test and lint failures):\n\n\n### Tests\n```bash\nUntitled_test.py::TestExtension::test_cell0 PASSED                                                                                     [  8%]\nUntitled_test.py::TestExtension::test_cell1 PASSED                                                                                     [ 16%]\nUntitled_test.py::TestExtension::test_cell2 PASSED                                                                                     [ 25%]\nUntitled_test.py::TestExtension::test_cell3 PASSED                                                                                     [ 33%]\nUntitled_test.py::TestExtension::test_cell_coverage PASSED                                                                             [ 41%]\nUntitled_test.py::TestExtension::test_cells_per_notebook PASSED                                                                        [ 50%]\nUntitled_test.py::TestExtension::test_class_definition_count PASSED                                                                    [ 58%]\nUntitled_test.py::TestExtension::test_function_definition_count PASSED                                                                 [ 66%]\nUntitled_test.py::TestExtension::test_lines_per_cell_0 FAILED                                                                          [ 75%]\nUntitled_test.py::TestExtension::test_lines_per_cell_1 PASSED                                                                          [ 83%]\nUntitled_test.py::TestExtension::test_lines_per_cell_2 PASSED                                                                          [ 91%]\nUntitled_test.py::TestExtension::test_lines_per_cell_3 PASSED                                                                          [100%]\n```\n### Lint\n```bash\nChecking lines in cell 0:   FAILED\nChecking lines in cell 1:   PASSED\nChecking lines in cell 2:   PASSED\nChecking lines in cell 3:   PASSED\nChecking cells per notebook <= 10:  PASSED\nChecking functions per notebook <= 10:  PASSED\nChecking classes per notebook <= 10:    PASSED\nChecking cell test coverage >= 50:  PASSED\n```\n\nNB: In jupyterlab, notebooks will be lint checked using the version of\npython that is running jupyter lab itself. A notebook intended to be\nrun with a Python 2 kernel could therefore generate syntax errors\nduring lint checking.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/timkpaine/nbcelltests", "keywords": "jupyter jupyterlab", "license": "Apache 2.0", "maintainer": "", "maintainer_email": "", "name": "nbcelltests", "package_url": "https://pypi.org/project/nbcelltests/", "platform": "", "project_url": "https://pypi.org/project/nbcelltests/", "project_urls": {"Homepage": "https://github.com/timkpaine/nbcelltests"}, "release_url": "https://pypi.org/project/nbcelltests/0.1.3/", "requires_dist": ["jupyterlab (>=1.0.0)", "nbval (>=0.9.1)", "nbconvert", "pytest (>=4.4.0)", "pytest-html (>=1.20.0)", "flake8", "bump2version ; extra == 'dev'", "autopep8 ; extra == 'dev'", "pytest-cov (>=2.6.1) ; extra == 'dev'", "mock ; extra == 'dev'"], "requires_python": "", "summary": "Cell-by-cell tests for JupyterLab", "version": "0.1.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>nbcelltests</h1>\n<p>Cell-by-cell testing for production Jupyter notebooks in JupyterLab</p>\n<p><a href=\"https://dev.azure.com/tpaine154/jupyter/_build/latest?definitionId=15&amp;branchName=master\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f822d7f775c2e9bfa82f3ea019b770d6397e71fe/68747470733a2f2f6465762e617a7572652e636f6d2f747061696e653135342f6a7570797465722f5f617069732f6275696c642f7374617475732f74696d6b7061696e652e6e6263656c6c74657374733f6272616e63684e616d653d6d6173746572\"></a>\n<a href=\"https://dev.azure.com/tpaine154/jupyter/_build?definitionId=15&amp;_a=summary\" rel=\"nofollow\"><img alt=\"Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2cb33641dad991ef08148bd088f21f91874c5db5/68747470733a2f2f696d672e736869656c64732e696f2f617a7572652d6465766f70732f636f7665726167652f747061696e653135342f6a7570797465722f3135\"></a>\n<a href=\"https://nbcelltests.readthedocs.io\" rel=\"nofollow\"><img alt=\"Docs\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/50de6dc5ae8d8be1826331bbc98a66f37d4487ff/68747470733a2f2f696d672e736869656c64732e696f2f72656164746865646f63732f6e6263656c6c74657374732e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/nbcelltests\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8e4738392249ae1b681061264c202dd203e758a3/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f6e6263656c6c74657374732e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/nbcelltests\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b3198620bda1cca3d197cfcd93166c15cc3b7317/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6e6263656c6c74657374732e737667\"></a>\n<a href=\"https://www.npmjs.com/package/nbcelltests\" rel=\"nofollow\"><img alt=\"npm\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3449963e0fdff2777310f56596aef65aae754482/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f6e6263656c6c74657374732e737667\"></a></p>\n<h1>Overview</h1>\n<p><code>Celltests</code> is designed for writing tests for linearly executed notebooks. Its primary use is for unit testing reports.</p>\n<h3>\"Linearly executed notebooks?\"</h3>\n<p>When converting notebooks into html/pdf/email reports, they are executed top-to-bottom one time, and are expected to contain as little code as reasonably possible, focusing primarily on the plotting and markdown bits. Libraries for this type of thing include <a href=\"https://github.com/nteract/papermill\" rel=\"nofollow\">Papermill</a>, <a href=\"https://github.com/timkpaine/jupyterlab_email\" rel=\"nofollow\">JupyterLab Emails</a>, etc.</p>\n<h3>Doesn't this already exist?</h3>\n<p><a href=\"https://github.com/computationalmodelling/nbval\" rel=\"nofollow\">Nbval</a> is a great product and I recommend using it for notebook regression tests. But it only allows for testing for unexpected failures or simple output equality tests.</p>\n<h3>So why do I want this again?</h3>\n<p>This doesn't necessarily help you if your data sources go down, but its likely you'll notice this anyway. Where this comes in handy is:</p>\n<ul>\n<li>when the environment (e.g. package versions) are changing in your system</li>\n<li>when you play around in the notebook (e.g. nonlinear execution) but aren't sure if your reports will still generate</li>\n<li>when your software lifecycle systems have a hard time dealing with notebooks (can't lint/audit them as code unless integrated nbdime/nbconvert to script, tough to test, tough to ensure what works today works tomorrow)</li>\n</ul>\n<h3>So what does this do?</h3>\n<p>Given a notebook, you can write mocks and assertions for individual cells. You can then generate a testing script for this notebook, allowing you to hook it into your testing system and thereby provide unittests of your report.</p>\n<h2>Writing tests</h2>\n<p>When you write tests for a cell, we create a new method on a <code>unittest</code> class corresponding to the index of your cell, and including the cumulative tests for all previous cells (to mimic what has happened so far in the notebook's linear execution). You can write whatever mocking and asserts you like, and can call <code>%cell</code> to inject the contents of the cell into your test.\n<img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e2522cd505f81f938d2cc73af8638533ccac7639/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f74696d6b7061696e652f6e6263656c6c74657374732f6d61737465722f646f63732f64656d6f2e676966\">\nThe tests themselves are stored in the cell metadata, similar to celltags, slide information, etc.</p>\n<h2>Running tests</h2>\n<p>You can run the tests offline from an <code>.ipynb</code> file, or you can execute them from the browser and view the results of <code>pytest-html</code>'s html plugin.\n<img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4cede414284f863d280d8dc618fc655f8129324e/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f74696d6b7061696e652f6e6263656c6c74657374732f6d61737465722f646f63732f64656d6f322e676966\"></p>\n<h2>Extra Tests</h2>\n<ul>\n<li>Max number of lines per cell</li>\n<li>Max number of cells per notebook</li>\n<li>Max number of function definitions per notebook</li>\n<li>Max number of class definitions per notebook</li>\n<li>Percentage of cells tested</li>\n</ul>\n<h2>Example</h2>\n<p>In the committed <code>Untitled.ipynb</code> notebook, but modified so that cell 0 has its import statement copied 10 times (to trigger test and lint failures):</p>\n<h3>Tests</h3>\n<pre>Untitled_test.py::TestExtension::test_cell0 PASSED                                                                                     <span class=\"o\">[</span>  <span class=\"m\">8</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_cell1 PASSED                                                                                     <span class=\"o\">[</span> <span class=\"m\">16</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_cell2 PASSED                                                                                     <span class=\"o\">[</span> <span class=\"m\">25</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_cell3 PASSED                                                                                     <span class=\"o\">[</span> <span class=\"m\">33</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_cell_coverage PASSED                                                                             <span class=\"o\">[</span> <span class=\"m\">41</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_cells_per_notebook PASSED                                                                        <span class=\"o\">[</span> <span class=\"m\">50</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_class_definition_count PASSED                                                                    <span class=\"o\">[</span> <span class=\"m\">58</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_function_definition_count PASSED                                                                 <span class=\"o\">[</span> <span class=\"m\">66</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_lines_per_cell_0 FAILED                                                                          <span class=\"o\">[</span> <span class=\"m\">75</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_lines_per_cell_1 PASSED                                                                          <span class=\"o\">[</span> <span class=\"m\">83</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_lines_per_cell_2 PASSED                                                                          <span class=\"o\">[</span> <span class=\"m\">91</span>%<span class=\"o\">]</span>\nUntitled_test.py::TestExtension::test_lines_per_cell_3 PASSED                                                                          <span class=\"o\">[</span><span class=\"m\">100</span>%<span class=\"o\">]</span>\n</pre>\n<h3>Lint</h3>\n<pre>Checking lines in cell <span class=\"m\">0</span>:   FAILED\nChecking lines in cell <span class=\"m\">1</span>:   PASSED\nChecking lines in cell <span class=\"m\">2</span>:   PASSED\nChecking lines in cell <span class=\"m\">3</span>:   PASSED\nChecking cells per notebook &lt;<span class=\"o\">=</span> <span class=\"m\">10</span>:  PASSED\nChecking functions per notebook &lt;<span class=\"o\">=</span> <span class=\"m\">10</span>:  PASSED\nChecking classes per notebook &lt;<span class=\"o\">=</span> <span class=\"m\">10</span>:    PASSED\nChecking cell <span class=\"nb\">test</span> coverage &gt;<span class=\"o\">=</span> <span class=\"m\">50</span>:  PASSED\n</pre>\n<p>NB: In jupyterlab, notebooks will be lint checked using the version of\npython that is running jupyter lab itself. A notebook intended to be\nrun with a Python 2 kernel could therefore generate syntax errors\nduring lint checking.</p>\n\n          </div>"}, "last_serial": 6795524, "releases": {"0.1.3": [{"comment_text": "", "digests": {"md5": "cf9f7faf3802217910d9ea7581c0be1d", "sha256": "b8d7cc4cc9dfebb19f203ea2132b38ae15eb5a865ac0f46c065d9d0d8074db5f"}, "downloads": -1, "filename": "nbcelltests-0.1.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "cf9f7faf3802217910d9ea7581c0be1d", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 28480, "upload_time": "2020-03-11T20:58:12", "upload_time_iso_8601": "2020-03-11T20:58:12.903958Z", "url": "https://files.pythonhosted.org/packages/2d/95/f015c53964ea7c25a5b1bdeb66b9eaac7a49767981c9f040c1bd85afdef6/nbcelltests-0.1.3-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "eeac0800be80ec2f3712e06a368d1ab4", "sha256": "904656317adb86faba5cb5640195e79ea5022eab2ab2852a53975b5346f3659d"}, "downloads": -1, "filename": "nbcelltests-0.1.3.tar.gz", "has_sig": false, "md5_digest": "eeac0800be80ec2f3712e06a368d1ab4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2918417, "upload_time": "2020-03-11T20:58:17", "upload_time_iso_8601": "2020-03-11T20:58:17.825052Z", "url": "https://files.pythonhosted.org/packages/61/08/f6ea35cad6e61b34eaadf48d094e7ffbee3a8234b3dc28f4cb36ccf65751/nbcelltests-0.1.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "cf9f7faf3802217910d9ea7581c0be1d", "sha256": "b8d7cc4cc9dfebb19f203ea2132b38ae15eb5a865ac0f46c065d9d0d8074db5f"}, "downloads": -1, "filename": "nbcelltests-0.1.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "cf9f7faf3802217910d9ea7581c0be1d", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 28480, "upload_time": "2020-03-11T20:58:12", "upload_time_iso_8601": "2020-03-11T20:58:12.903958Z", "url": "https://files.pythonhosted.org/packages/2d/95/f015c53964ea7c25a5b1bdeb66b9eaac7a49767981c9f040c1bd85afdef6/nbcelltests-0.1.3-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "eeac0800be80ec2f3712e06a368d1ab4", "sha256": "904656317adb86faba5cb5640195e79ea5022eab2ab2852a53975b5346f3659d"}, "downloads": -1, "filename": "nbcelltests-0.1.3.tar.gz", "has_sig": false, "md5_digest": "eeac0800be80ec2f3712e06a368d1ab4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2918417, "upload_time": "2020-03-11T20:58:17", "upload_time_iso_8601": "2020-03-11T20:58:17.825052Z", "url": "https://files.pythonhosted.org/packages/61/08/f6ea35cad6e61b34eaadf48d094e7ffbee3a8234b3dc28f4cb36ccf65751/nbcelltests-0.1.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:46:59 2020"}