{"info": {"author": "Jim Fulton (forked by Chris McDonough)", "author_email": "chrism@plope.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Framework :: Buildout", "Intended Audience :: Developers", "License :: OSI Approved :: Zope Public License", "Topic :: Software Development :: Build Tools", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "********************************\nBuildout Egg-Installation Recipe\n********************************\n\n.. contents::\n\nThe egg-installation recipe is a customization of zc.recipe.egg that\nallows for by-default installs of dependent scripts.  This uses\ncode by James Gardner from http://pypi.python.org/pypi/pylons_sandbox\nto perform the dependent-script installation.\n\n\n\n\nTo do\n*****\n\n- Some way to freeze the egg-versions used.  This includes some way to\n  record which versions were selected dynamially and then a way to\n  require that the recorded versions be used in a later run.\n\nChange History\n**************\n\n0.3 (2009-03-31)\n================\n\n- Update for compatibility with zc.buildout 1.2.1\n\n0.2 (2008-05-25)\n================\n\n- Remove bogus dependency on virtualenv.\n\n0.1 (2008-02-29)\n================\n\n- Fork of zc.recipe.egg 1.0.0 which will install dependent scripts by \n  default.  Use \"dependent_scripts = false\" in the recipe to turn this\n  behavior off.\n\n\nDetailed Documentation\n**********************\n\nInstallation of distributions as eggs\n=====================================\n\nThe repoze.recipe.egg:eggs recipe can be used to install various types if\ndistutils distributions as eggs.  It takes a number of options:\n\neggs\n    A list of eggs to install given as one or more setuptools\n    requirement strings.  Each string must be given on a separate\n    line.\n\nfind-links\n   A list of URLs, files, or directories to search for distributions.\n\nindex\n   The URL of an index server, or almost any other valid URL. :)\n\n   If not specified, the Python Package Index,\n   http://cheeseshop.python.org/pypi, is used.  You can specify an\n   alternate index with this option.  If you use the links option and\n   if the links point to the needed distributions, then the index can\n   be anything and will be largely ignored.  In the examples, here,\n   we'll just point to an empty directory on our link server.  This\n   will make our examples run a little bit faster.\n\npython\n   The name of a section to get the Python executable from.\n   If not specified, then the buildout python option is used.  The\n   Python executable is found in the executable option of the named\n   section.\n\nWe have a link server that has a number of distributions:\n\n    >>> print get(link_server),\n    <html><body>\n    <a href=\"demo-0.1-py2.3.egg\">demo-0.1-py2.3.egg</a><br>\n    <a href=\"demo-0.2-py2.3.egg\">demo-0.2-py2.3.egg</a><br>\n    <a href=\"demo-0.3-py2.3.egg\">demo-0.3-py2.3.egg</a><br>\n    <a href=\"demo-0.4c1-py2.3.egg\">demo-0.4c1-py2.3.egg</a><br>\n    <a href=\"demoneeded-1.0.zip\">demoneeded-1.0.zip</a><br>\n    <a href=\"demoneeded-1.1.zip\">demoneeded-1.1.zip</a><br>\n    <a href=\"demoneeded-1.2c1.zip\">demoneeded-1.2c1.zip</a><br>\n    <a href=\"extdemo-1.4.zip\">extdemo-1.4.zip</a><br>\n    <a href=\"index/\">index/</a><br>\n    <a href=\"other-1.0-py2.3.egg\">other-1.0-py2.3.egg</a><br>\n    </body></html>\n\nWe have a sample buildout.  Let's update it's configuration file to\ninstall the demo package.\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg:eggs\n    ... eggs = demo<0.3\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... \"\"\" % dict(server=link_server))\n\nIn this example, we limited ourselves to revisions before 0.3. We also\nspecified where to find distributions using the find-links option.\n\nLet's run the buildout:\n\n    >>> import os\n    >>> print system(buildout),\n    Installing demo.\n    Getting distribution for 'demo<0.3'.\n    Got demo 0.2.\n    Getting distribution for 'demoneeded'.\n    Got demoneeded 1.2c1.\n\nNow, if we look at the buildout eggs directory:\n\n    >>> ls(sample_buildout, 'eggs')\n    -  demo-0.2-py2.3.egg\n    -  demoneeded-1.2c1-py2.3.egg\n    -  setuptools-0.6-py2.3.egg\n    -  zc.buildout-1.0-py2.3.egg\n\nWe see that we got an egg for demo that met the requirement, as well\nas the egg for demoneeded, which demo requires.  (We also see an egg\nlink for the recipe in the develop-eggs directory.  This egg link was\nactually created as part of the sample buildout setup. Normally, when\nusing the recipe, you'll get a regular egg installation.)\n\nScript generation\n-----------------\n\nThe demo egg defined a script, but we didn't get one installed:\n\n    >>> ls(sample_buildout, 'bin')\n    -  buildout\n\nIf we want scripts provided by eggs to be installed, we should use the \nscripts recipe:\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg:scripts\n    ... eggs = demo<0.3\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... \"\"\" % dict(server=link_server))\n\n    >>> print system(buildout),\n    Uninstalling demo.\n    Installing demo.\n    Generated script '/sample-buildout/bin/demo'.\n\nNow we also see the script defined by the dmo script:\n\n    >>> ls(sample_buildout, 'bin')\n    -  buildout\n    -  demo\n\nThe scripts recipe defines some additional options:\n\nentry-points\n   A list of entry-point identifiers of the form name=module#attrs,\n   name is a script name, module is a module name, and a attrs is a\n   (possibly dotted) name of an object wihin the module.  This option\n   is useful when working with distributions that don't declare entry\n   points, such as distributions not written to work with setuptools.\n\nscripts\n   Control which scripts are generated.  The value should be a list of\n   zero or more tokens.  Each token is either a name, or a name\n   followed by an '=' and a new name.  Only the named scripts are\n   generated.  If no tokens are given, then script generation is\n   disabled.  If the option isn't given at all, then all scripts\n   defined by the named eggs will be generated.\n\ninterpreter\n   The name of a script to generate that allows access to a Python\n   interpreter that has the path set based on the eggs installed.\n\nextra-paths\n   Extra paths to include in a generates script.\n\ninitialization\n   Specify some Python initialization code.  This is very limited.  In\n   particular, be aware that leading whitespace is stripped from the\n   code given.\n\narguments\n   Specify some arguments to be passed to entry points as Python source.\n\nLet's add an interpreter option:\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... eggs = demo<0.3\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... interpreter = py-demo\n    ... \"\"\" % dict(server=link_server))\n\nNote that we ommitted the entry point name from the recipe\nspecification. We were able to do this because the scripts recipe if\nthe default entry point for the repoze.recipe.egg egg.\n\n   >>> print system(buildout),\n   Uninstalling demo.\n   Installing demo.\n   Generated script '/sample-buildout/bin/demo'.\n   Generated interpreter '/sample-buildout/bin/py-demo'.\n\nNow we also get a py-demo script for giving us a Python prompt with\nthe path for demo and any eggs it depends on included in sys.path.\nThis is useful for debugging and testing.\n\n    >>> ls(sample_buildout, 'bin')\n    -  buildout\n    -  demo\n    -  py-demo\n\nIf we run the demo script, it prints out some minimal data:\n\n    >>> print system(join(sample_buildout, 'bin', 'demo')),\n    2 2\n\nThe value it prints out happens to be some values defined in the\nmodules installed.\n\nWe can also run the py-demo script.  Here we'll just print out\nthe bits if the path added to reflect the eggs:\n\n    >>> print system(join(sample_buildout, 'bin', 'py-demo'),\n    ... \"\"\"import os, sys\n    ... for p in sys.path:\n    ...     if 'demo' in p:\n    ...         print os.path.basename(p)\n    ...\n    ... \"\"\").replace('>>> ', '').replace('... ', ''),\n    ... # doctest: +ELLIPSIS +NORMALIZE_WHITESPACE\n    demo-0.2-py2.4.egg\n    demoneeded-1.2c1-py2.4.egg\n\nEgg updating\n------------\n\nThe recipe normally gets the most recent distribution that satisfies the\nspecification.  It won't do this is the buildout is either in\nnon-newest mode or in offline mode.  To see how this works, we'll\nremove the restriction on demo:\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... \"\"\" % dict(server=link_server))\n\nand run the buildout in non-newest mode:\n\n    >>> print system(buildout+' -N'),\n    Uninstalling demo.\n    Installing demo.\n    Generated script '/sample-buildout/bin/demo'.\n\nNote that we removed the eggs option, and the eggs defaulted to the\npart name. Because we removed the eggs option, the demo was\nreinstalled.\n\nWe'll also run the buildout in off-line mode:\n\n    >>> print system(buildout+' -o'),\n    Updating demo.\n\nWe didn't get an update for demo:\n\n    >>> ls(sample_buildout, 'eggs')\n    -  demo-0.2-py2.3.egg\n    -  demoneeded-1.2c1-py2.3.egg\n    -  setuptools-0.6-py2.3.egg\n    -  zc.buildout-1.0-py2.3.egg\n\nIf we run the buildout on the default online and newest modes, \nwe'll get an update for demo:\n\n    >>> print system(buildout),\n    Updating demo.\n    Getting distribution for 'demo'.\n    Got demo 0.4c1.\n    Generated script '/sample-buildout/bin/demo'.\n\nThen we'll get a new demo egg:\n\n    >>> ls(sample_buildout, 'eggs')\n    -  demo-0.2-py2.3.egg\n    -  demo-0.4c1-py2.3.egg\n    -  demoneeded-1.2c1-py2.3.egg\n    -  setuptools-0.6-py2.4.egg\n    -  zc.buildout-1.0-py2.4.egg\n\nThe script is updated too:\n\n    >>> print system(join(sample_buildout, 'bin', 'demo')),\n    4 2\n\nControlling script generation\n-----------------------------\n\nYou can control which scripts get generated using the scripts option.\nFor example, to suppress scripts, use the scripts option without any\narguments:\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... scripts =\n    ... \"\"\" % dict(server=link_server))\n\n\n    >>> print system(buildout),\n    Uninstalling demo.\n    Installing demo.\n\n    >>> ls(sample_buildout, 'bin')\n    -  buildout\n\nYou can also control the name used for scripts:\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... scripts = demo=foo\n    ... \"\"\" % dict(server=link_server))\n\n    >>> print system(buildout),\n    Uninstalling demo.\n    Installing demo.\n    Generated script '/sample-buildout/bin/foo'.\n\n    >>> ls(sample_buildout, 'bin')\n    -  buildout\n    -  foo\n\nSpecifying extra script paths\n-----------------------------\n\nIf we need to include extra paths in a script, we can use the\nextra-paths option:\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... scripts = demo=foo\n    ... extra-paths =\n    ...    /foo/bar\n    ...    /spam/eggs\n    ... \"\"\" % dict(server=link_server))\n\n    >>> print system(buildout),\n    Uninstalling demo.\n    Installing demo.\n    Generated script '/sample-buildout/bin/foo'.\n\nLet's look at the script that was generated:\n\n    >>> cat(sample_buildout, 'bin', 'foo') # doctest: +NORMALIZE_WHITESPACE\n    #!/usr/local/bin/python2.4\n    <BLANKLINE>\n    import sys\n    sys.path[0:0] = [\n      '/sample-buildout/eggs/demo-0.4c1-py2.4.egg',\n      '/sample-buildout/eggs/demoneeded-1.2c1-py2.4.egg',\n      '/foo/bar',\n      '/spam/eggs',\n      ]\n    <BLANKLINE>\n    import eggrecipedemo\n    <BLANKLINE>\n    if __name__ == '__main__':\n        eggrecipedemo.main()\n\nSpecifying initialialization code and arguments\n-----------------------------------------------\n\nSometimes, we ned to do more than just calling entry points.  We can\nuse the initialialization and arguments options to specify extra code\nto be included in generated scripts:\n\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... scripts = demo=foo\n    ... extra-paths =\n    ...    /foo/bar\n    ...    /spam/eggs\n    ... initialization = a = (1, 2\n    ...                       3, 4)\n    ... arguments = a, 2\n    ... \"\"\" % dict(server=link_server))\n\n    >>> print system(buildout),\n    Uninstalling demo.\n    Installing demo.\n    Generated script '/sample-buildout/bin/foo'.\n\n    >>> cat(sample_buildout, 'bin', 'foo') # doctest: +NORMALIZE_WHITESPACE\n    #!/usr/local/bin/python2.4\n    <BLANKLINE>\n    import sys\n    sys.path[0:0] = [\n      '/sample-buildout/eggs/demo-0.4c1-py2.4.egg',\n      '/sample-buildout/eggs/demoneeded-1.2c1-py2.4.egg',\n      '/foo/bar',\n      '/spam/eggs',\n      ]\n    <BLANKLINE>\n    a = (1, 2\n    3, 4)\n    <BLANKLINE>\n    import eggrecipedemo\n    <BLANKLINE>\n    if __name__ == '__main__':\n        eggrecipedemo.main(a, 2)\n\nHere we see that the initialization code we specified was added after\nsetting the path.  Note, as mentioennd above, that leading whitespace\nhas been stripped.  Similarly, the argument code we specified was\nadded in the entry point call (to main).\n\nSpecifying entry points\n-----------------------\n\nScripts can be generated for entry points declared explicitly.  We can\ndeclare entry points using the entry-points option:\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... extra-paths =\n    ...    /foo/bar\n    ...    /spam/eggs\n    ... entry-points = alt=eggrecipedemo:alt other=foo.bar:a.b.c\n    ... \"\"\" % dict(server=link_server))\n\n    >>> print system(buildout),\n    Uninstalling demo.\n    Installing demo.\n    Generated script '/sample-buildout/bin/demo'.\n    Generated script '/sample-buildout/bin/alt'.\n    Generated script '/sample-buildout/bin/other'.\n\n    >>> ls(sample_buildout, 'bin')\n    -  alt\n    -  buildout\n    -  demo\n    -  other\n\n    >>> cat(sample_buildout, 'bin', 'other')\n    #!/usr/local/bin/python2.4\n    <BLANKLINE>\n    import sys\n    sys.path[0:0] = [\n      '/sample-buildout/eggs/demo-0.4c1-py2.4.egg',\n      '/sample-buildout/eggs/demoneeded-1.2c1-py2.4.egg',\n      '/foo/bar',\n      '/spam/eggs',\n      ]\n    <BLANKLINE>\n    import foo.bar\n    <BLANKLINE>\n    if __name__ == '__main__':\n        foo.bar.a.b.c()\n\nOffline mode\n------------\n\nIf the buildout offline option is set to \"true\", then no attempt will\nbe made to contact an index server:\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ... offline = true\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... index = eek!\n    ... scripts = demo=foo\n    ... \"\"\" % dict(server=link_server))\n\n    >>> print system(buildout),\n    Uninstalling demo.\n    Installing demo.\n    Generated script '/sample-buildout/bin/foo'.\n\nControlling which Python to use\n-------------------------------\n\nThe following assumes that you have Python 2.3 installed.\n\nWe can specify the python to use by specifying the name of a section\nto read the Python executable from.  The default is the section\ndefined by the python buildout option.\n\nWe have a link server:\n\n    >>> print get(link_server),\n    <html><body>\n    <a href=\"demo-0.1-py2.3.egg\">demo-0.1-py2.3.egg</a><br>\n    <a href=\"demo-0.2-py2.3.egg\">demo-0.2-py2.3.egg</a><br>\n    <a href=\"demo-0.3-py2.3.egg\">demo-0.3-py2.3.egg</a><br>\n    <a href=\"demo-0.4c1-py2.3.egg\">demo-0.4c1-py2.3.egg</a><br>\n    <a href=\"demoneeded-1.0.zip\">demoneeded-1.0.zip</a><br>\n    <a href=\"demoneeded-1.1.zip\">demoneeded-1.1.zip</a><br>\n    <a href=\"demoneeded-1.2c1.zip\">demoneeded-1.2c1.zip</a><br>\n    <a href=\"extdemo-1.4.zip\">extdemo-1.4.zip</a><br>\n    <a href=\"index/\">index/</a><br>\n    <a href=\"other-1.0-py2.3.egg\">other-1.0-py2.3.egg</a><br>\n    </body></html>\n\nWe have a sample buildout.  Let's update it's configuration file to\ninstall the demo package using Python 2.3. \n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = demo\n    ... eggs-directory = eggs\n    ... index = http://www.python.org/pypi/\n    ...\n    ... [python2.3]\n    ... executable = %(python23)s\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... eggs = demo <0.3\n    ... find-links = %(server)s\n    ... python = python2.3\n    ... interpreter = py-demo\n    ... \"\"\" % dict(server=link_server, python23=python2_3_executable))\n\nNow, if we run the buildout:\n\n   >>> import os\n   >>> os.chdir(sample_buildout)\n   >>> buildout = os.path.join(sample_buildout, 'bin', 'buildout')\n   >>> print system(buildout),\n   Installing demo.\n   Getting distribution for 'demo<0.3'.\n   Got demo 0.2.\n   Getting distribution for 'demoneeded'.\n   Getting distribution for 'setuptools'.\n   Got setuptools 0.6.\n   Got demoneeded 1.2c1.\n   Generated script '/sample-buildout/bin/demo'.\n   Generated interpreter '/sample-buildout/bin/py-demo'.\n\nwe'll get the Python 2.3 eggs for demo and demoneeded:\n\n    >>> ls(sample_buildout, 'eggs')\n    -  demo-0.2-py2.3.egg\n    -  demoneeded-1.2c1-py2.3.egg\n    d  setuptools-0.6-py2.3.egg\n    d  setuptools-0.6-py2.4.egg\n    -  zc.buildout-1.0-py2.4.egg\n \nAnd the generated scripts invoke Python 2.3:\n\n    >>> import sys\n    >>> if sys.platform == 'win32':\n    ...    script_name = 'demo-script.py'\n    ... else:\n    ...    script_name = 'demo'\n    >>> f = open(os.path.join(sample_buildout, 'bin', script_name))\n    >>> f.readline().strip() == '#!' + python2_3_executable\n    True\n    >>> print f.read(), # doctest: +NORMALIZE_WHITESPACE\n    <BLANKLINE>\n    import sys\n    sys.path[0:0] = [\n      '/sample-buildout/eggs/demo-0.2-py2.3.egg',\n      '/sample-buildout/eggs/demoneeded-1.2c1-py2.3.egg',\n      ]\n    <BLANKLINE>\n    import eggrecipedemo\n    <BLANKLINE>\n    if __name__ == '__main__':\n        eggrecipedemo.main()\n\n    >>> if sys.platform == 'win32':\n    ...     f = open(os.path.join(sample_buildout, 'bin', 'py-demo-script.py'))\n    ... else:\n    ...     f = open(os.path.join(sample_buildout, 'bin', 'py-demo'))\n    >>> f.readline().strip() == '#!' + python2_3_executable\n    True\n    >>> print f.read(), # doctest: +NORMALIZE_WHITESPACE\n    import sys\n    <BLANKLINE>\n    sys.path[0:0] = [\n      '/sample-buildout/eggs/demo-0.2-py2.3.egg',\n      '/sample-buildout/eggs/demoneeded-1.2c1-py2.3.egg',\n      ]\n    <BLANKLINE>\n    _interactive = True\n    if len(sys.argv) > 1:\n        import getopt\n        _options, _args = getopt.getopt(sys.argv[1:], 'ic:')\n        _interactive = False\n        for (_opt, _val) in _options:\n            if _opt == '-i':\n                _interactive = True\n            elif _opt == '-c':\n                exec _val\n    <BLANKLINE>\n        if _args:\n            sys.argv[:] = _args\n            execfile(sys.argv[0])\n    <BLANKLINE>\n    if _interactive:\n        import code\n        code.interact(banner=\"\", local=globals())\n\n    >>> f.close()\n\nCreating eggs with extensions neededing custom build settings\n=============================================================\n\nSometimes, It's necessary to provide extra control over how an egg is\ncreated.  This is commonly true for eggs with extension modules that\nneed to access libraries or include files.\n\nThe repoze.recipe.egg:custom recipe can be used to define an egg with\ncustom build parameters.  The currently defined parameters are:\n\ninclude-dirs\n   A new-line separated list of directories to search for include\n   files.\n\nlibrary-dirs\n   A new-line separated list of directories to search for libraries\n   to link with.\n\nrpath\n   A new-line separated list of directories to search for dynamic libraries\n   at run time.\n\ndefine\n   A comma-separated list of names of C preprocessor variables to\n   define.\n\nundef\n   A comman separated list of names of C preprocessor variables to\n   undefine.\n\nlibraries\n   The name of an additional library to link with.  Due to limitations\n   in distutils and desprite the option name, only a single library\n   can be specified.\n\nlink-objects\n   The name of an link object to link afainst.  Due to limitations\n   in distutils and desprite the option name, only a single link object\n   can be specified.\n\ndebug\n   Compile/link with debugging information\n\nforce\n   Forcibly build everything (ignore file timestamps)\n\ncompiler\n   Specify the compiler type\n\nswig\n   The path to the swig executable\n\nswig-cpp           \n   Make SWIG create C++ files (default is C)\n\nswig-opts\n   List of SWIG command line options\n\nIn addition, the following options can be used to specify the egg:\n\negg\n    An specification for the egg to be created, to install given as a\n    setuptools requirement string.  This defaults to the part name.\n\nfind-links\n   A list of URLs, files, or directories to search for distributions.\n\nindex\n   The URL of an index server, or almost any other valid URL. :)\n\n   If not specified, the Python Package Index,\n   http://cheeseshop.python.org/pypi, is used.  You can specify an\n   alternate index with this option.  If you use the links option and\n   if the links point to the needed distributions, then the index can\n   be anything and will be largely ignored.  In the examples, here,\n   we'll just point to an empty directory on our link server.  This \n   will make our examples run a little bit faster.\n\npython\n   The name of a section to get the Python executable from.\n   If not specified, then the buildout python option is used.  The\n   Python executable is found in the executable option of the named\n   section. \n\nTo illustrate this, we'll define a buildout that builds an egg for a\npackage that has a simple extension module::\n\n  #include <Python.h>\n  #include <extdemo.h>\n\n  static PyMethodDef methods[] = {};\n\n  PyMODINIT_FUNC\n  initextdemo(void)\n  {\n      PyObject *m;\n      m = Py_InitModule3(\"extdemo\", methods, \"\");\n  #ifdef TWO\n      PyModule_AddObject(m, \"val\", PyInt_FromLong(2));\n  #else\n      PyModule_AddObject(m, \"val\", PyInt_FromLong(EXTDEMO));\n  #endif\n  }\n\nThe extension depends on a system-dependnt include file, extdemo.h,\nthat defines a constant, EXTDEMO, that is exposed by the extension.\n\nThe extension module is available as a source distribution,\nextdemo-1.4.tar.gz, on a distribution server.\n\nWe have a sample buildout that we'll add an include directory to with\nthe necessary include file:\n\n    >>> mkdir('include')\n    >>> write('include', 'extdemo.h',\n    ... \"\"\"\n    ... #define EXTDEMO 42\n    ... \"\"\")\n\nWe'll also update the buildout configuration file to define a part for\nthe egg:\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... parts = extdemo\n    ...\n    ... [extdemo]\n    ... recipe = repoze.recipe.egg:custom\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... include-dirs = include\n    ... \"\"\" % dict(server=link_server))\n\n    >>> print system(buildout),\n    Installing extdemo.\n    zip_safe flag not set; analyzing archive contents...\n\nWe got the zip_safe warning because the source distribution we used\nwasn't setuptools based and thus didn't set the option.\n\nThe egg is created in the develop-eggs directory *not* the eggs\ndirectory because it depends on buildout-specific parameters and the\neggs directory can be shared across multiple buildouts.\n\n    >>> ls(sample_buildout, 'develop-eggs')\n    d  extdemo-1.4-py2.4-unix-i686.egg\n    -  repoze.recipe.egg.egg-link\n\nNote that no scripts or dependencies are installed.  To install\ndependencies or scripts for a custom egg, define another part and use\nthe repoze.recipe.egg recipe, listing the custom egg as one of the eggs to\nbe installed.  The repoze.recipe.egg recipe will use the installed egg.\n\nLet's define a script that uses out ext demo:\n\n    >>> mkdir('demo')\n    >>> write('demo', 'demo.py',\n    ... \"\"\"\n    ... import extdemo\n    ... def main():\n    ...     print extdemo.val\n    ... \"\"\")\n\n    >>> write('demo', 'setup.py',\n    ... \"\"\"\n    ... from setuptools import setup\n    ... setup(name='demo')\n    ... \"\"\")\n\n\n    >>> write('buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... develop = demo\n    ... parts = extdemo demo\n    ...\n    ... [extdemo]\n    ... recipe = repoze.recipe.egg:custom\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... include-dirs = include\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... eggs = demo \n    ...        extdemo\n    ... entry-points = demo=demo:main\n    ... \"\"\" % dict(server=link_server))\n\n    >>> print system(buildout),\n    Develop: '/sample-buildout/demo'\n    Updating extdemo.\n    Installing demo.\n    Generated script '/sample-buildout/bin/demo'.\n\nWhen we run the script, we'll 42 printed:\n\n    >>> print system(join('bin', 'demo')),\n    42\n\nUpdating\n--------\n\nThe custom recipe will normally check for new source distributions\nthat meet the given specification.  This can be suppressed using the\nbuildout non-newest and offline modes.  We'll generate a new source\ndistribution for extdemo:\n\n    >>> update_extdemo()\n\nIf we run the buildout in non-newest or offline modes:\n\n    >>> print system(buildout+' -N'),\n    Develop: '/sample-buildout/demo'\n    Updating extdemo.\n    Updating demo.\n\n    >>> print system(buildout+' -o'),\n    Develop: '/sample-buildout/demo'\n    Updating extdemo.\n    Updating demo.\n\nWe won't get an update.\n\n    >>> ls(sample_buildout, 'develop-eggs')\n    -  demo.egg-link\n    d  extdemo-1.4-py2.4-unix-i686.egg\n    -  repoze.recipe.egg.egg-link\n\nBut if we run the buildout in the default on-line and newest modes, we\nwill:\n\n    >>> print system(buildout),\n    Develop: '/sample-buildout/demo'\n    Updating extdemo.\n    zip_safe flag not set; analyzing archive contents...\n    Updating demo.\n    Generated script '/sample-buildout/bin/demo'.\n\n    >>> ls(sample_buildout, 'develop-eggs')\n    -  demo.egg-link\n    d  extdemo-1.4-py2.4-linux-i686.egg\n    d  extdemo-1.5-py2.4-linux-i686.egg\n    -  repoze.recipe.egg.egg-link\n\nControlling the version used\n----------------------------\n\nWe can specify a specific version using the egg option:\n\n    >>> write('buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... develop = demo\n    ... parts = extdemo demo\n    ...\n    ... [extdemo]\n    ... recipe = repoze.recipe.egg:custom\n    ... egg = extdemo ==1.4\n    ... find-links = %(server)s\n    ... index = %(server)s/index\n    ... include-dirs = include\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... eggs = demo \n    ...        extdemo ==1.4\n    ... entry-points = demo=demo:main\n    ... \"\"\" % dict(server=link_server))\n\n    >>> print system(buildout+' -D'),\n    Develop: '/sample-buildout/demo'\n    Uninstalling demo.\n    Uninstalling extdemo.\n    Installing extdemo.\n    zip_safe flag not set; analyzing archive contents...\n    Installing demo.\n    Generated script '/sample-buildout/bin/demo'.\n\n    >>> ls(sample_buildout, 'develop-eggs')\n    -  demo.egg-link\n    d  extdemo-1.4-py2.4-linux-i686.egg\n    -  repoze.recipe.egg.egg-link\n\nControlling develop-egg generation\n==================================\n\nIf you want to provide custom build options for a develop egg, you can\nuse the develop recipe.  The recipe has the following options:\n\npath\n   The path to a setup script or directory containing a startup\n   script. This is required.\n\ninclude-dirs\n   A new-line separated list of directories to search for include\n   files.\n\nlibrary-dirs\n   A new-line separated list of directories to search for libraries\n   to link with.\n\nrpath\n   A new-line separated list of directories to search for dynamic libraries\n   at run time.\n\ndefine\n   A comma-separated list of names of C preprocessor variables to\n   define.\n\nundef\n   A comman separated list of names of C preprocessor variables to\n   undefine.\n\nlibraries\n   The name of an additional library to link with.  Due to limitations\n   in distutils and desprite the option name, only a single library\n   can be specified.\n\nlink-objects\n   The name of an link object to link afainst.  Due to limitations\n   in distutils and desprite the option name, only a single link object\n   can be specified.\n\ndebug\n   Compile/link with debugging information\n\nforce\n   Forcibly build everything (ignore file timestamps)\n\ncompiler\n   Specify the compiler type\n\nswig\n   The path to the swig executable\n\nswig-cpp           \n   Make SWIG create C++ files (default is C)\n\nswig-opts\n   List of SWIG command line options\n\npython\n   The name of a section to get the Python executable from.\n   If not specified, then the buildout python option is used.  The\n   Python executable is found in the executable option of the named\n   section. \n\nTo illustrate this, we'll use a directory containing the extdemo\nexample from the earlier section:\n\n    >>> ls(extdemo)\n    -  MANIFEST\n    -  MANIFEST.in\n    -  README\n    -  extdemo.c\n    -  setup.py\n\n    >>> write('buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... develop = demo\n    ... parts = extdemo demo\n    ...\n    ... [extdemo]\n    ... setup = %(extdemo)s\n    ... recipe = repoze.recipe.egg:develop\n    ... include-dirs = include\n    ... define = TWO\n    ...\n    ... [demo]\n    ... recipe = repoze.recipe.egg\n    ... eggs = demo \n    ...        extdemo\n    ... entry-points = demo=demo:main\n    ... \"\"\" % dict(extdemo=extdemo))\n\nNote that we added a define option to cause the preprocessor variable\nTWO to be defined.  This will cause the module-variable, 'val', to be\nset with a value of 2.\n\n    >>> print system(buildout),\n    Develop: '/sample-buildout/demo'\n    Uninstalling demo.\n    Uninstalling extdemo.\n    Installing extdemo.\n    Installing demo.\n    Generated script '/sample-buildout/bin/demo'.\n\nOur develop-eggs now includes an egg link for extdemo:\n\n    >>> ls('develop-eggs')\n    -  demo.egg-link\n    -  extdemo.egg-link\n    -  repoze.recipe.egg.egg-link\n\nand the extdemo now has a built extension:\n\n    >>> ls(extdemo)\n    -  MANIFEST\n    -  MANIFEST.in\n    -  README\n    d  build\n    -  extdemo.c\n    d  extdemo.egg-info\n    -  extdemo.so\n    -  setup.py\n\nBecause develop eggs take precedence over non-develop eggs, the demo\nscript will use the new develop egg:\n\n    >>> print system(join('bin', 'demo')),\n    2\n\nEgg Recipe API for other Recipes\n================================\n\nIt is common for recipes to accept a collection of egg specifications\nand generate scripts based on the resulting working sets.  The egg\nrecipe provides an API that other recipes can use.\n\nA recipe can reuse the egg recipe, supporting the eggs, find-links,\nindex, extra-paths, and python options.  This is done by creating an\negg recipe instance in a recipes's contructor.  In the recipe's\ninstall script, the egg-recipe instance's working_set method is used\nto collect the requested eggs and working set.\n\nTo illustrate, we create a sample recipe that is a very thin layer\naround the egg recipe:\n\n    >>> mkdir(sample_buildout, 'sample')\n    >>> write(sample_buildout, 'sample', 'sample.py', \n    ... \"\"\"\n    ... import logging, os\n    ... import repoze.recipe.egg\n    ...\n    ... class Sample:\n    ...\n    ...     def __init__(self, buildout, name, options):\n    ...         self.egg = repoze.recipe.egg.Scripts(buildout, name, options)\n    ...         self.name = name\n    ...         self.options = options\n    ...\n    ...     def install(self):\n    ...         extras = self.options['extras'].split()\n    ...         requirements, ws = self.egg.working_set(extras)\n    ...         print 'Part:', self.name\n    ...         print 'Egg requirements:'\n    ...         for r in requirements:\n    ...             print r\n    ...         print 'Working set:'\n    ...         for d in ws:\n    ...             print d\n    ...         print 'extra paths:', self.egg.extra_paths\n    ...         return ()\n    ...\n    ...     update = install\n    ... \"\"\")\n\nHere we instantiated the egg recipe in the constructor, saving it in\nan attribute.  This also initialized the options dictionary.\n\nIn our install method, we called the working_set method on the\ninstance we saved.  The working_set method takes an optional sequence\nof extra requirements to be included in the working set.\n\n    >>> write(sample_buildout, 'sample', 'setup.py',\n    ... \"\"\"\n    ... from setuptools import setup\n    ... \n    ... setup(\n    ...     name = \"sample\",\n    ...     entry_points = {'zc.buildout': ['default = sample:Sample']},\n    ...     install_requires = 'repoze.recipe.egg',\n    ...     )\n    ... \"\"\")\n\n\n    >>> write(sample_buildout, 'sample', 'README.txt', \" \")\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... develop = sample\n    ... parts = sample-part\n    ...\n    ... [sample-part]\n    ... recipe = sample\n    ... eggs = demo<0.3\n    ... find-links = %(server)s\n    ... index = %(server)sindex\n    ... extras = other\n    ... \"\"\" % dict(server=link_server))\n\n    >>> import os\n    >>> os.chdir(sample_buildout)\n    >>> buildout = os.path.join(sample_buildout, 'bin', 'buildout')\n    >>> print system(buildout + ' -q'),\n    Part: sample-part\n    Egg requirements:\n    demo<0.3\n    Working set:\n    demo 0.2\n    other 1.0\n    demoneeded 1.2c1\n    extra paths: []\n\nWe can see that the options were augmented with additionl data\ncomputed by the egg recipe by looking at .installed.cfg:\n\n    >>> cat(sample_buildout, '.installed.cfg')\n    [buildout]\n    installed_develop_eggs = /sample-buildout/develop-eggs/sample.egg-link\n    parts = sample-part\n    <BLANKLINE>\n    [sample-part]\n    __buildout_installed__ = \n    __buildout_signature__ = sample-6aWMvV2EJ9Ijq+bR8ugArQ==\n            repoze.recipe.egg-cAsnudgkduAa/Fd+WJIM6Q==\n            setuptools-0.6-py2.4.egg\n            zc.buildout-+rYeCcmFuD1K/aB77XTj5A==\n    _b = /sample-buildout/bin\n    _d = /sample-buildout/develop-eggs\n    _e = /sample-buildout/eggs\n    bin-directory = /sample-buildout/bin\n    develop-eggs-directory = /sample-buildout/develop-eggs\n    eggs = demo<0.3\n    eggs-directory = /sample-buildout/eggs\n    executable = /usr/local/bin/python2.3\n    extras = other\n    find-links = http://localhost:27071/\n    index = http://localhost:27071/index\n    recipe = sample\n\nIf we use the extra-paths option:\n\n\n    >>> write(sample_buildout, 'buildout.cfg',\n    ... \"\"\"\n    ... [buildout]\n    ... develop = sample\n    ... parts = sample-part\n    ...\n    ... [sample-part]\n    ... recipe = sample\n    ... eggs = demo<0.3\n    ... find-links = %(server)s\n    ... index = %(server)sindex\n    ... extras = other\n    ... extra-paths = /foo/bar\n    ...               /spam/eggs\n    ... \"\"\" % dict(server=link_server))\n\nThen we'll see that reflected in the extra_paths attribute in the egg\nrecipe instance:\n\n    >>> print system(buildout + ' -q'),\n    Part: sample-part\n    Egg requirements:\n    demo<0.3\n    Working set:\n    demo 0.2\n    other 1.0\n    demoneeded 1.2c1\n    extra paths: ['/foo/bar', '/spam/eggs']\n\n\nDownload\n*********", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://svn.repoze.org/repoze.recipe.egg/trunk/", "keywords": "development build", "license": "ZPL 2.1", "maintainer": null, "maintainer_email": null, "name": "repoze.recipe.egg", "package_url": "https://pypi.org/project/repoze.recipe.egg/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/repoze.recipe.egg/", "project_urls": {"Download": "UNKNOWN", "Homepage": "http://svn.repoze.org/repoze.recipe.egg/trunk/"}, "release_url": "https://pypi.org/project/repoze.recipe.egg/0.3/", "requires_dist": null, "requires_python": null, "summary": "Recipe for installing Python package distributions as eggs", "version": "0.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"contents\">\n<p>Contents</p>\n<ul>\n<li><a href=\"#to-do\" id=\"id4\" rel=\"nofollow\">To do</a></li>\n<li><a href=\"#change-history\" id=\"id5\" rel=\"nofollow\">Change History</a><ul>\n<li><a href=\"#id1\" id=\"id6\" rel=\"nofollow\">0.3 (2009-03-31)</a></li>\n<li><a href=\"#id2\" id=\"id7\" rel=\"nofollow\">0.2 (2008-05-25)</a></li>\n<li><a href=\"#id3\" id=\"id8\" rel=\"nofollow\">0.1 (2008-02-29)</a></li>\n</ul>\n</li>\n<li><a href=\"#detailed-documentation\" id=\"id9\" rel=\"nofollow\">Detailed Documentation</a><ul>\n<li><a href=\"#installation-of-distributions-as-eggs\" id=\"id10\" rel=\"nofollow\">Installation of distributions as eggs</a><ul>\n<li><a href=\"#script-generation\" id=\"id11\" rel=\"nofollow\">Script generation</a></li>\n<li><a href=\"#egg-updating\" id=\"id12\" rel=\"nofollow\">Egg updating</a></li>\n<li><a href=\"#controlling-script-generation\" id=\"id13\" rel=\"nofollow\">Controlling script generation</a></li>\n<li><a href=\"#specifying-extra-script-paths\" id=\"id14\" rel=\"nofollow\">Specifying extra script paths</a></li>\n<li><a href=\"#specifying-initialialization-code-and-arguments\" id=\"id15\" rel=\"nofollow\">Specifying initialialization code and arguments</a></li>\n<li><a href=\"#specifying-entry-points\" id=\"id16\" rel=\"nofollow\">Specifying entry points</a></li>\n<li><a href=\"#offline-mode\" id=\"id17\" rel=\"nofollow\">Offline mode</a></li>\n<li><a href=\"#controlling-which-python-to-use\" id=\"id18\" rel=\"nofollow\">Controlling which Python to use</a></li>\n</ul>\n</li>\n<li><a href=\"#creating-eggs-with-extensions-neededing-custom-build-settings\" id=\"id19\" rel=\"nofollow\">Creating eggs with extensions neededing custom build settings</a><ul>\n<li><a href=\"#updating\" id=\"id20\" rel=\"nofollow\">Updating</a></li>\n<li><a href=\"#controlling-the-version-used\" id=\"id21\" rel=\"nofollow\">Controlling the version used</a></li>\n</ul>\n</li>\n<li><a href=\"#controlling-develop-egg-generation\" id=\"id22\" rel=\"nofollow\">Controlling develop-egg generation</a></li>\n<li><a href=\"#egg-recipe-api-for-other-recipes\" id=\"id23\" rel=\"nofollow\">Egg Recipe API for other Recipes</a></li>\n</ul>\n</li>\n<li><a href=\"#download\" id=\"id24\" rel=\"nofollow\">Download</a></li>\n</ul>\n</div>\n<p>The egg-installation recipe is a customization of zc.recipe.egg that\nallows for by-default installs of dependent scripts.  This uses\ncode by James Gardner from <a href=\"http://pypi.python.org/pypi/pylons_sandbox\" rel=\"nofollow\">http://pypi.python.org/pypi/pylons_sandbox</a>\nto perform the dependent-script installation.</p>\n<div id=\"to-do\">\n<h2><a href=\"#id4\" rel=\"nofollow\">To do</a></h2>\n<ul>\n<li>Some way to freeze the egg-versions used.  This includes some way to\nrecord which versions were selected dynamially and then a way to\nrequire that the recorded versions be used in a later run.</li>\n</ul>\n</div>\n<div id=\"change-history\">\n<h2><a href=\"#id5\" rel=\"nofollow\">Change History</a></h2>\n<div id=\"id1\">\n<h3><a href=\"#id6\" rel=\"nofollow\">0.3 (2009-03-31)</a></h3>\n<ul>\n<li>Update for compatibility with zc.buildout 1.2.1</li>\n</ul>\n</div>\n<div id=\"id2\">\n<h3><a href=\"#id7\" rel=\"nofollow\">0.2 (2008-05-25)</a></h3>\n<ul>\n<li>Remove bogus dependency on virtualenv.</li>\n</ul>\n</div>\n<div id=\"id3\">\n<h3><a href=\"#id8\" rel=\"nofollow\">0.1 (2008-02-29)</a></h3>\n<ul>\n<li>Fork of zc.recipe.egg 1.0.0 which will install dependent scripts by\ndefault.  Use \u201cdependent_scripts = false\u201d in the recipe to turn this\nbehavior off.</li>\n</ul>\n</div>\n</div>\n<div id=\"detailed-documentation\">\n<h2><a href=\"#id9\" rel=\"nofollow\">Detailed Documentation</a></h2>\n<div id=\"installation-of-distributions-as-eggs\">\n<h3><a href=\"#id10\" rel=\"nofollow\">Installation of distributions as eggs</a></h3>\n<p>The repoze.recipe.egg:eggs recipe can be used to install various types if\ndistutils distributions as eggs.  It takes a number of options:</p>\n<dl>\n<dt>eggs</dt>\n<dd>A list of eggs to install given as one or more setuptools\nrequirement strings.  Each string must be given on a separate\nline.</dd>\n<dt>find-links</dt>\n<dd>A list of URLs, files, or directories to search for distributions.</dd>\n<dt>index</dt>\n<dd><p>The URL of an index server, or almost any other valid URL. :)</p>\n<p>If not specified, the Python Package Index,\n<a href=\"http://cheeseshop.python.org/pypi\" rel=\"nofollow\">http://cheeseshop.python.org/pypi</a>, is used.  You can specify an\nalternate index with this option.  If you use the links option and\nif the links point to the needed distributions, then the index can\nbe anything and will be largely ignored.  In the examples, here,\nwe\u2019ll just point to an empty directory on our link server.  This\nwill make our examples run a little bit faster.</p>\n</dd>\n<dt>python</dt>\n<dd>The name of a section to get the Python executable from.\nIf not specified, then the buildout python option is used.  The\nPython executable is found in the executable option of the named\nsection.</dd>\n</dl>\n<p>We have a link server that has a number of distributions:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print get(link_server),\n&lt;html&gt;&lt;body&gt;\n&lt;a href=\"demo-0.1-py2.3.egg\"&gt;demo-0.1-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demo-0.2-py2.3.egg\"&gt;demo-0.2-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demo-0.3-py2.3.egg\"&gt;demo-0.3-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demo-0.4c1-py2.3.egg\"&gt;demo-0.4c1-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demoneeded-1.0.zip\"&gt;demoneeded-1.0.zip&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demoneeded-1.1.zip\"&gt;demoneeded-1.1.zip&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demoneeded-1.2c1.zip\"&gt;demoneeded-1.2c1.zip&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"extdemo-1.4.zip\"&gt;extdemo-1.4.zip&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"index/\"&gt;index/&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"other-1.0-py2.3.egg\"&gt;other-1.0-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;/body&gt;&lt;/html&gt;\n</pre>\n</blockquote>\n<p>We have a sample buildout.  Let\u2019s update it\u2019s configuration file to\ninstall the demo package.</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n...\n... [demo]\n... recipe = repoze.recipe.egg:eggs\n... eggs = demo&lt;0.3\n... find-links = %(server)s\n... index = %(server)s/index\n... \"\"\" % dict(server=link_server))\n</pre>\n</blockquote>\n<p>In this example, we limited ourselves to revisions before 0.3. We also\nspecified where to find distributions using the find-links option.</p>\n<p>Let\u2019s run the buildout:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; import os\n&gt;&gt;&gt; print system(buildout),\nInstalling demo.\nGetting distribution for 'demo&lt;0.3'.\nGot demo 0.2.\nGetting distribution for 'demoneeded'.\nGot demoneeded 1.2c1.\n</pre>\n</blockquote>\n<p>Now, if we look at the buildout eggs directory:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'eggs')\n-  demo-0.2-py2.3.egg\n-  demoneeded-1.2c1-py2.3.egg\n-  setuptools-0.6-py2.3.egg\n-  zc.buildout-1.0-py2.3.egg\n</pre>\n</blockquote>\n<p>We see that we got an egg for demo that met the requirement, as well\nas the egg for demoneeded, which demo requires.  (We also see an egg\nlink for the recipe in the develop-eggs directory.  This egg link was\nactually created as part of the sample buildout setup. Normally, when\nusing the recipe, you\u2019ll get a regular egg installation.)</p>\n<div id=\"script-generation\">\n<h4><a href=\"#id11\" rel=\"nofollow\">Script generation</a></h4>\n<p>The demo egg defined a script, but we didn\u2019t get one installed:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'bin')\n-  buildout\n</pre>\n</blockquote>\n<p>If we want scripts provided by eggs to be installed, we should use the\nscripts recipe:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n...\n... [demo]\n... recipe = repoze.recipe.egg:scripts\n... eggs = demo&lt;0.3\n... find-links = %(server)s\n... index = %(server)s/index\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout),\nUninstalling demo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/demo'.\n</pre>\n</blockquote>\n<p>Now we also see the script defined by the dmo script:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'bin')\n-  buildout\n-  demo\n</pre>\n</blockquote>\n<p>The scripts recipe defines some additional options:</p>\n<dl>\n<dt>entry-points</dt>\n<dd>A list of entry-point identifiers of the form name=module#attrs,\nname is a script name, module is a module name, and a attrs is a\n(possibly dotted) name of an object wihin the module.  This option\nis useful when working with distributions that don\u2019t declare entry\npoints, such as distributions not written to work with setuptools.</dd>\n<dt>scripts</dt>\n<dd>Control which scripts are generated.  The value should be a list of\nzero or more tokens.  Each token is either a name, or a name\nfollowed by an \u2018=\u2019 and a new name.  Only the named scripts are\ngenerated.  If no tokens are given, then script generation is\ndisabled.  If the option isn\u2019t given at all, then all scripts\ndefined by the named eggs will be generated.</dd>\n<dt>interpreter</dt>\n<dd>The name of a script to generate that allows access to a Python\ninterpreter that has the path set based on the eggs installed.</dd>\n<dt>extra-paths</dt>\n<dd>Extra paths to include in a generates script.</dd>\n<dt>initialization</dt>\n<dd>Specify some Python initialization code.  This is very limited.  In\nparticular, be aware that leading whitespace is stripped from the\ncode given.</dd>\n<dt>arguments</dt>\n<dd>Specify some arguments to be passed to entry points as Python source.</dd>\n</dl>\n<p>Let\u2019s add an interpreter option:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... eggs = demo&lt;0.3\n... find-links = %(server)s\n... index = %(server)s/index\n... interpreter = py-demo\n... \"\"\" % dict(server=link_server))\n</pre>\n</blockquote>\n<p>Note that we ommitted the entry point name from the recipe\nspecification. We were able to do this because the scripts recipe if\nthe default entry point for the repoze.recipe.egg egg.</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(buildout),\nUninstalling demo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/demo'.\nGenerated interpreter '/sample-buildout/bin/py-demo'.\n</pre>\n</blockquote>\n<p>Now we also get a py-demo script for giving us a Python prompt with\nthe path for demo and any eggs it depends on included in sys.path.\nThis is useful for debugging and testing.</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'bin')\n-  buildout\n-  demo\n-  py-demo\n</pre>\n</blockquote>\n<p>If we run the demo script, it prints out some minimal data:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(join(sample_buildout, 'bin', 'demo')),\n2 2\n</pre>\n</blockquote>\n<p>The value it prints out happens to be some values defined in the\nmodules installed.</p>\n<p>We can also run the py-demo script.  Here we\u2019ll just print out\nthe bits if the path added to reflect the eggs:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(join(sample_buildout, 'bin', 'py-demo'),\n... \"\"\"import os, sys\n... for p in sys.path:\n...     if 'demo' in p:\n...         print os.path.basename(p)\n...\n... \"\"\").replace('&gt;&gt;&gt; ', '').replace('... ', ''),\n... # doctest: +ELLIPSIS +NORMALIZE_WHITESPACE\ndemo-0.2-py2.4.egg\ndemoneeded-1.2c1-py2.4.egg\n</pre>\n</blockquote>\n</div>\n<div id=\"egg-updating\">\n<h4><a href=\"#id12\" rel=\"nofollow\">Egg updating</a></h4>\n<p>The recipe normally gets the most recent distribution that satisfies the\nspecification.  It won\u2019t do this is the buildout is either in\nnon-newest mode or in offline mode.  To see how this works, we\u2019ll\nremove the restriction on demo:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... find-links = %(server)s\n... index = %(server)s/index\n... \"\"\" % dict(server=link_server))\n</pre>\n</blockquote>\n<p>and run the buildout in non-newest mode:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(buildout+' -N'),\nUninstalling demo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/demo'.\n</pre>\n</blockquote>\n<p>Note that we removed the eggs option, and the eggs defaulted to the\npart name. Because we removed the eggs option, the demo was\nreinstalled.</p>\n<p>We\u2019ll also run the buildout in off-line mode:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(buildout+' -o'),\nUpdating demo.\n</pre>\n</blockquote>\n<p>We didn\u2019t get an update for demo:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'eggs')\n-  demo-0.2-py2.3.egg\n-  demoneeded-1.2c1-py2.3.egg\n-  setuptools-0.6-py2.3.egg\n-  zc.buildout-1.0-py2.3.egg\n</pre>\n</blockquote>\n<p>If we run the buildout on the default online and newest modes,\nwe\u2019ll get an update for demo:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(buildout),\nUpdating demo.\nGetting distribution for 'demo'.\nGot demo 0.4c1.\nGenerated script '/sample-buildout/bin/demo'.\n</pre>\n</blockquote>\n<p>Then we\u2019ll get a new demo egg:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'eggs')\n-  demo-0.2-py2.3.egg\n-  demo-0.4c1-py2.3.egg\n-  demoneeded-1.2c1-py2.3.egg\n-  setuptools-0.6-py2.4.egg\n-  zc.buildout-1.0-py2.4.egg\n</pre>\n</blockquote>\n<p>The script is updated too:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(join(sample_buildout, 'bin', 'demo')),\n4 2\n</pre>\n</blockquote>\n</div>\n<div id=\"controlling-script-generation\">\n<h4><a href=\"#id13\" rel=\"nofollow\">Controlling script generation</a></h4>\n<p>You can control which scripts get generated using the scripts option.\nFor example, to suppress scripts, use the scripts option without any\narguments:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... find-links = %(server)s\n... index = %(server)s/index\n... scripts =\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout),\nUninstalling demo.\nInstalling demo.\n</pre>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'bin')\n-  buildout\n</pre>\n</blockquote>\n<p>You can also control the name used for scripts:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... find-links = %(server)s\n... index = %(server)s/index\n... scripts = demo=foo\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout),\nUninstalling demo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/foo'.\n</pre>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'bin')\n-  buildout\n-  foo\n</pre>\n</blockquote>\n</div>\n<div id=\"specifying-extra-script-paths\">\n<h4><a href=\"#id14\" rel=\"nofollow\">Specifying extra script paths</a></h4>\n<p>If we need to include extra paths in a script, we can use the\nextra-paths option:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... find-links = %(server)s\n... index = %(server)s/index\n... scripts = demo=foo\n... extra-paths =\n...    /foo/bar\n...    /spam/eggs\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout),\nUninstalling demo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/foo'.\n</pre>\n</blockquote>\n<p>Let\u2019s look at the script that was generated:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; cat(sample_buildout, 'bin', 'foo') # doctest: +NORMALIZE_WHITESPACE\n#!/usr/local/bin/python2.4\n&lt;BLANKLINE&gt;\nimport sys\nsys.path[0:0] = [\n  '/sample-buildout/eggs/demo-0.4c1-py2.4.egg',\n  '/sample-buildout/eggs/demoneeded-1.2c1-py2.4.egg',\n  '/foo/bar',\n  '/spam/eggs',\n  ]\n&lt;BLANKLINE&gt;\nimport eggrecipedemo\n&lt;BLANKLINE&gt;\nif __name__ == '__main__':\n    eggrecipedemo.main()\n</pre>\n</blockquote>\n</div>\n<div id=\"specifying-initialialization-code-and-arguments\">\n<h4><a href=\"#id15\" rel=\"nofollow\">Specifying initialialization code and arguments</a></h4>\n<p>Sometimes, we ned to do more than just calling entry points.  We can\nuse the initialialization and arguments options to specify extra code\nto be included in generated scripts:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... find-links = %(server)s\n... index = %(server)s/index\n... scripts = demo=foo\n... extra-paths =\n...    /foo/bar\n...    /spam/eggs\n... initialization = a = (1, 2\n...                       3, 4)\n... arguments = a, 2\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout),\nUninstalling demo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/foo'.\n</pre>\n<pre>&gt;&gt;&gt; cat(sample_buildout, 'bin', 'foo') # doctest: +NORMALIZE_WHITESPACE\n#!/usr/local/bin/python2.4\n&lt;BLANKLINE&gt;\nimport sys\nsys.path[0:0] = [\n  '/sample-buildout/eggs/demo-0.4c1-py2.4.egg',\n  '/sample-buildout/eggs/demoneeded-1.2c1-py2.4.egg',\n  '/foo/bar',\n  '/spam/eggs',\n  ]\n&lt;BLANKLINE&gt;\na = (1, 2\n3, 4)\n&lt;BLANKLINE&gt;\nimport eggrecipedemo\n&lt;BLANKLINE&gt;\nif __name__ == '__main__':\n    eggrecipedemo.main(a, 2)\n</pre>\n</blockquote>\n<p>Here we see that the initialization code we specified was added after\nsetting the path.  Note, as mentioennd above, that leading whitespace\nhas been stripped.  Similarly, the argument code we specified was\nadded in the entry point call (to main).</p>\n</div>\n<div id=\"specifying-entry-points\">\n<h4><a href=\"#id16\" rel=\"nofollow\">Specifying entry points</a></h4>\n<p>Scripts can be generated for entry points declared explicitly.  We can\ndeclare entry points using the entry-points option:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... find-links = %(server)s\n... index = %(server)s/index\n... extra-paths =\n...    /foo/bar\n...    /spam/eggs\n... entry-points = alt=eggrecipedemo:alt other=foo.bar:a.b.c\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout),\nUninstalling demo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/demo'.\nGenerated script '/sample-buildout/bin/alt'.\nGenerated script '/sample-buildout/bin/other'.\n</pre>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'bin')\n-  alt\n-  buildout\n-  demo\n-  other\n</pre>\n<pre>&gt;&gt;&gt; cat(sample_buildout, 'bin', 'other')\n#!/usr/local/bin/python2.4\n&lt;BLANKLINE&gt;\nimport sys\nsys.path[0:0] = [\n  '/sample-buildout/eggs/demo-0.4c1-py2.4.egg',\n  '/sample-buildout/eggs/demoneeded-1.2c1-py2.4.egg',\n  '/foo/bar',\n  '/spam/eggs',\n  ]\n&lt;BLANKLINE&gt;\nimport foo.bar\n&lt;BLANKLINE&gt;\nif __name__ == '__main__':\n    foo.bar.a.b.c()\n</pre>\n</blockquote>\n</div>\n<div id=\"offline-mode\">\n<h4><a href=\"#id17\" rel=\"nofollow\">Offline mode</a></h4>\n<p>If the buildout offline option is set to \u201ctrue\u201d, then no attempt will\nbe made to contact an index server:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n... offline = true\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... index = eek!\n... scripts = demo=foo\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout),\nUninstalling demo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/foo'.\n</pre>\n</blockquote>\n</div>\n<div id=\"controlling-which-python-to-use\">\n<h4><a href=\"#id18\" rel=\"nofollow\">Controlling which Python to use</a></h4>\n<p>The following assumes that you have Python 2.3 installed.</p>\n<p>We can specify the python to use by specifying the name of a section\nto read the Python executable from.  The default is the section\ndefined by the python buildout option.</p>\n<p>We have a link server:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print get(link_server),\n&lt;html&gt;&lt;body&gt;\n&lt;a href=\"demo-0.1-py2.3.egg\"&gt;demo-0.1-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demo-0.2-py2.3.egg\"&gt;demo-0.2-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demo-0.3-py2.3.egg\"&gt;demo-0.3-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demo-0.4c1-py2.3.egg\"&gt;demo-0.4c1-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demoneeded-1.0.zip\"&gt;demoneeded-1.0.zip&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demoneeded-1.1.zip\"&gt;demoneeded-1.1.zip&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"demoneeded-1.2c1.zip\"&gt;demoneeded-1.2c1.zip&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"extdemo-1.4.zip\"&gt;extdemo-1.4.zip&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"index/\"&gt;index/&lt;/a&gt;&lt;br&gt;\n&lt;a href=\"other-1.0-py2.3.egg\"&gt;other-1.0-py2.3.egg&lt;/a&gt;&lt;br&gt;\n&lt;/body&gt;&lt;/html&gt;\n</pre>\n</blockquote>\n<p>We have a sample buildout.  Let\u2019s update it\u2019s configuration file to\ninstall the demo package using Python 2.3.</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = demo\n... eggs-directory = eggs\n... index = http://www.python.org/pypi/\n...\n... [python2.3]\n... executable = %(python23)s\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... eggs = demo &lt;0.3\n... find-links = %(server)s\n... python = python2.3\n... interpreter = py-demo\n... \"\"\" % dict(server=link_server, python23=python2_3_executable))\n</pre>\n</blockquote>\n<p>Now, if we run the buildout:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.chdir(sample_buildout)\n&gt;&gt;&gt; buildout = os.path.join(sample_buildout, 'bin', 'buildout')\n&gt;&gt;&gt; print system(buildout),\nInstalling demo.\nGetting distribution for 'demo&lt;0.3'.\nGot demo 0.2.\nGetting distribution for 'demoneeded'.\nGetting distribution for 'setuptools'.\nGot setuptools 0.6.\nGot demoneeded 1.2c1.\nGenerated script '/sample-buildout/bin/demo'.\nGenerated interpreter '/sample-buildout/bin/py-demo'.\n</pre>\n</blockquote>\n<p>we\u2019ll get the Python 2.3 eggs for demo and demoneeded:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'eggs')\n-  demo-0.2-py2.3.egg\n-  demoneeded-1.2c1-py2.3.egg\nd  setuptools-0.6-py2.3.egg\nd  setuptools-0.6-py2.4.egg\n-  zc.buildout-1.0-py2.4.egg\n</pre>\n</blockquote>\n<p>And the generated scripts invoke Python 2.3:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; if sys.platform == 'win32':\n...    script_name = 'demo-script.py'\n... else:\n...    script_name = 'demo'\n&gt;&gt;&gt; f = open(os.path.join(sample_buildout, 'bin', script_name))\n&gt;&gt;&gt; f.readline().strip() == '#!' + python2_3_executable\nTrue\n&gt;&gt;&gt; print f.read(), # doctest: +NORMALIZE_WHITESPACE\n&lt;BLANKLINE&gt;\nimport sys\nsys.path[0:0] = [\n  '/sample-buildout/eggs/demo-0.2-py2.3.egg',\n  '/sample-buildout/eggs/demoneeded-1.2c1-py2.3.egg',\n  ]\n&lt;BLANKLINE&gt;\nimport eggrecipedemo\n&lt;BLANKLINE&gt;\nif __name__ == '__main__':\n    eggrecipedemo.main()\n</pre>\n<pre>&gt;&gt;&gt; if sys.platform == 'win32':\n...     f = open(os.path.join(sample_buildout, 'bin', 'py-demo-script.py'))\n... else:\n...     f = open(os.path.join(sample_buildout, 'bin', 'py-demo'))\n&gt;&gt;&gt; f.readline().strip() == '#!' + python2_3_executable\nTrue\n&gt;&gt;&gt; print f.read(), # doctest: +NORMALIZE_WHITESPACE\nimport sys\n&lt;BLANKLINE&gt;\nsys.path[0:0] = [\n  '/sample-buildout/eggs/demo-0.2-py2.3.egg',\n  '/sample-buildout/eggs/demoneeded-1.2c1-py2.3.egg',\n  ]\n&lt;BLANKLINE&gt;\n_interactive = True\nif len(sys.argv) &gt; 1:\n    import getopt\n    _options, _args = getopt.getopt(sys.argv[1:], 'ic:')\n    _interactive = False\n    for (_opt, _val) in _options:\n        if _opt == '-i':\n            _interactive = True\n        elif _opt == '-c':\n            exec _val\n&lt;BLANKLINE&gt;\n    if _args:\n        sys.argv[:] = _args\n        execfile(sys.argv[0])\n&lt;BLANKLINE&gt;\nif _interactive:\n    import code\n    code.interact(banner=\"\", local=globals())\n</pre>\n<pre>&gt;&gt;&gt; f.close()\n</pre>\n</blockquote>\n</div>\n</div>\n<div id=\"creating-eggs-with-extensions-neededing-custom-build-settings\">\n<h3><a href=\"#id19\" rel=\"nofollow\">Creating eggs with extensions neededing custom build settings</a></h3>\n<p>Sometimes, It\u2019s necessary to provide extra control over how an egg is\ncreated.  This is commonly true for eggs with extension modules that\nneed to access libraries or include files.</p>\n<p>The repoze.recipe.egg:custom recipe can be used to define an egg with\ncustom build parameters.  The currently defined parameters are:</p>\n<dl>\n<dt>include-dirs</dt>\n<dd>A new-line separated list of directories to search for include\nfiles.</dd>\n<dt>library-dirs</dt>\n<dd>A new-line separated list of directories to search for libraries\nto link with.</dd>\n<dt>rpath</dt>\n<dd>A new-line separated list of directories to search for dynamic libraries\nat run time.</dd>\n<dt>define</dt>\n<dd>A comma-separated list of names of C preprocessor variables to\ndefine.</dd>\n<dt>undef</dt>\n<dd>A comman separated list of names of C preprocessor variables to\nundefine.</dd>\n<dt>libraries</dt>\n<dd>The name of an additional library to link with.  Due to limitations\nin distutils and desprite the option name, only a single library\ncan be specified.</dd>\n<dt>link-objects</dt>\n<dd>The name of an link object to link afainst.  Due to limitations\nin distutils and desprite the option name, only a single link object\ncan be specified.</dd>\n<dt>debug</dt>\n<dd>Compile/link with debugging information</dd>\n<dt>force</dt>\n<dd>Forcibly build everything (ignore file timestamps)</dd>\n<dt>compiler</dt>\n<dd>Specify the compiler type</dd>\n<dt>swig</dt>\n<dd>The path to the swig executable</dd>\n<dt>swig-cpp</dt>\n<dd>Make SWIG create C++ files (default is C)</dd>\n<dt>swig-opts</dt>\n<dd>List of SWIG command line options</dd>\n</dl>\n<p>In addition, the following options can be used to specify the egg:</p>\n<dl>\n<dt>egg</dt>\n<dd>An specification for the egg to be created, to install given as a\nsetuptools requirement string.  This defaults to the part name.</dd>\n<dt>find-links</dt>\n<dd>A list of URLs, files, or directories to search for distributions.</dd>\n<dt>index</dt>\n<dd><p>The URL of an index server, or almost any other valid URL. :)</p>\n<p>If not specified, the Python Package Index,\n<a href=\"http://cheeseshop.python.org/pypi\" rel=\"nofollow\">http://cheeseshop.python.org/pypi</a>, is used.  You can specify an\nalternate index with this option.  If you use the links option and\nif the links point to the needed distributions, then the index can\nbe anything and will be largely ignored.  In the examples, here,\nwe\u2019ll just point to an empty directory on our link server.  This\nwill make our examples run a little bit faster.</p>\n</dd>\n<dt>python</dt>\n<dd>The name of a section to get the Python executable from.\nIf not specified, then the buildout python option is used.  The\nPython executable is found in the executable option of the named\nsection.</dd>\n</dl>\n<p>To illustrate this, we\u2019ll define a buildout that builds an egg for a\npackage that has a simple extension module:</p>\n<pre>#include &lt;Python.h&gt;\n#include &lt;extdemo.h&gt;\n\nstatic PyMethodDef methods[] = {};\n\nPyMODINIT_FUNC\ninitextdemo(void)\n{\n    PyObject *m;\n    m = Py_InitModule3(\"extdemo\", methods, \"\");\n#ifdef TWO\n    PyModule_AddObject(m, \"val\", PyInt_FromLong(2));\n#else\n    PyModule_AddObject(m, \"val\", PyInt_FromLong(EXTDEMO));\n#endif\n}\n</pre>\n<p>The extension depends on a system-dependnt include file, extdemo.h,\nthat defines a constant, EXTDEMO, that is exposed by the extension.</p>\n<p>The extension module is available as a source distribution,\nextdemo-1.4.tar.gz, on a distribution server.</p>\n<p>We have a sample buildout that we\u2019ll add an include directory to with\nthe necessary include file:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; mkdir('include')\n&gt;&gt;&gt; write('include', 'extdemo.h',\n... \"\"\"\n... #define EXTDEMO 42\n... \"\"\")\n</pre>\n</blockquote>\n<p>We\u2019ll also update the buildout configuration file to define a part for\nthe egg:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... parts = extdemo\n...\n... [extdemo]\n... recipe = repoze.recipe.egg:custom\n... find-links = %(server)s\n... index = %(server)s/index\n... include-dirs = include\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout),\nInstalling extdemo.\nzip_safe flag not set; analyzing archive contents...\n</pre>\n</blockquote>\n<p>We got the zip_safe warning because the source distribution we used\nwasn\u2019t setuptools based and thus didn\u2019t set the option.</p>\n<p>The egg is created in the develop-eggs directory <em>not</em> the eggs\ndirectory because it depends on buildout-specific parameters and the\neggs directory can be shared across multiple buildouts.</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'develop-eggs')\nd  extdemo-1.4-py2.4-unix-i686.egg\n-  repoze.recipe.egg.egg-link\n</pre>\n</blockquote>\n<p>Note that no scripts or dependencies are installed.  To install\ndependencies or scripts for a custom egg, define another part and use\nthe repoze.recipe.egg recipe, listing the custom egg as one of the eggs to\nbe installed.  The repoze.recipe.egg recipe will use the installed egg.</p>\n<p>Let\u2019s define a script that uses out ext demo:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; mkdir('demo')\n&gt;&gt;&gt; write('demo', 'demo.py',\n... \"\"\"\n... import extdemo\n... def main():\n...     print extdemo.val\n... \"\"\")\n</pre>\n<pre>&gt;&gt;&gt; write('demo', 'setup.py',\n... \"\"\"\n... from setuptools import setup\n... setup(name='demo')\n... \"\"\")\n</pre>\n<pre>&gt;&gt;&gt; write('buildout.cfg',\n... \"\"\"\n... [buildout]\n... develop = demo\n... parts = extdemo demo\n...\n... [extdemo]\n... recipe = repoze.recipe.egg:custom\n... find-links = %(server)s\n... index = %(server)s/index\n... include-dirs = include\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... eggs = demo\n...        extdemo\n... entry-points = demo=demo:main\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout),\nDevelop: '/sample-buildout/demo'\nUpdating extdemo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/demo'.\n</pre>\n</blockquote>\n<p>When we run the script, we\u2019ll 42 printed:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(join('bin', 'demo')),\n42\n</pre>\n</blockquote>\n<div id=\"updating\">\n<h4><a href=\"#id20\" rel=\"nofollow\">Updating</a></h4>\n<p>The custom recipe will normally check for new source distributions\nthat meet the given specification.  This can be suppressed using the\nbuildout non-newest and offline modes.  We\u2019ll generate a new source\ndistribution for extdemo:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; update_extdemo()\n</pre>\n</blockquote>\n<p>If we run the buildout in non-newest or offline modes:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(buildout+' -N'),\nDevelop: '/sample-buildout/demo'\nUpdating extdemo.\nUpdating demo.\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout+' -o'),\nDevelop: '/sample-buildout/demo'\nUpdating extdemo.\nUpdating demo.\n</pre>\n</blockquote>\n<p>We won\u2019t get an update.</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'develop-eggs')\n-  demo.egg-link\nd  extdemo-1.4-py2.4-unix-i686.egg\n-  repoze.recipe.egg.egg-link\n</pre>\n</blockquote>\n<p>But if we run the buildout in the default on-line and newest modes, we\nwill:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(buildout),\nDevelop: '/sample-buildout/demo'\nUpdating extdemo.\nzip_safe flag not set; analyzing archive contents...\nUpdating demo.\nGenerated script '/sample-buildout/bin/demo'.\n</pre>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'develop-eggs')\n-  demo.egg-link\nd  extdemo-1.4-py2.4-linux-i686.egg\nd  extdemo-1.5-py2.4-linux-i686.egg\n-  repoze.recipe.egg.egg-link\n</pre>\n</blockquote>\n</div>\n<div id=\"controlling-the-version-used\">\n<h4><a href=\"#id21\" rel=\"nofollow\">Controlling the version used</a></h4>\n<p>We can specify a specific version using the egg option:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write('buildout.cfg',\n... \"\"\"\n... [buildout]\n... develop = demo\n... parts = extdemo demo\n...\n... [extdemo]\n... recipe = repoze.recipe.egg:custom\n... egg = extdemo ==1.4\n... find-links = %(server)s\n... index = %(server)s/index\n... include-dirs = include\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... eggs = demo\n...        extdemo ==1.4\n... entry-points = demo=demo:main\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; print system(buildout+' -D'),\nDevelop: '/sample-buildout/demo'\nUninstalling demo.\nUninstalling extdemo.\nInstalling extdemo.\nzip_safe flag not set; analyzing archive contents...\nInstalling demo.\nGenerated script '/sample-buildout/bin/demo'.\n</pre>\n<pre>&gt;&gt;&gt; ls(sample_buildout, 'develop-eggs')\n-  demo.egg-link\nd  extdemo-1.4-py2.4-linux-i686.egg\n-  repoze.recipe.egg.egg-link\n</pre>\n</blockquote>\n</div>\n</div>\n<div id=\"controlling-develop-egg-generation\">\n<h3><a href=\"#id22\" rel=\"nofollow\">Controlling develop-egg generation</a></h3>\n<p>If you want to provide custom build options for a develop egg, you can\nuse the develop recipe.  The recipe has the following options:</p>\n<dl>\n<dt>path</dt>\n<dd>The path to a setup script or directory containing a startup\nscript. This is required.</dd>\n<dt>include-dirs</dt>\n<dd>A new-line separated list of directories to search for include\nfiles.</dd>\n<dt>library-dirs</dt>\n<dd>A new-line separated list of directories to search for libraries\nto link with.</dd>\n<dt>rpath</dt>\n<dd>A new-line separated list of directories to search for dynamic libraries\nat run time.</dd>\n<dt>define</dt>\n<dd>A comma-separated list of names of C preprocessor variables to\ndefine.</dd>\n<dt>undef</dt>\n<dd>A comman separated list of names of C preprocessor variables to\nundefine.</dd>\n<dt>libraries</dt>\n<dd>The name of an additional library to link with.  Due to limitations\nin distutils and desprite the option name, only a single library\ncan be specified.</dd>\n<dt>link-objects</dt>\n<dd>The name of an link object to link afainst.  Due to limitations\nin distutils and desprite the option name, only a single link object\ncan be specified.</dd>\n<dt>debug</dt>\n<dd>Compile/link with debugging information</dd>\n<dt>force</dt>\n<dd>Forcibly build everything (ignore file timestamps)</dd>\n<dt>compiler</dt>\n<dd>Specify the compiler type</dd>\n<dt>swig</dt>\n<dd>The path to the swig executable</dd>\n<dt>swig-cpp</dt>\n<dd>Make SWIG create C++ files (default is C)</dd>\n<dt>swig-opts</dt>\n<dd>List of SWIG command line options</dd>\n<dt>python</dt>\n<dd>The name of a section to get the Python executable from.\nIf not specified, then the buildout python option is used.  The\nPython executable is found in the executable option of the named\nsection.</dd>\n</dl>\n<p>To illustrate this, we\u2019ll use a directory containing the extdemo\nexample from the earlier section:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(extdemo)\n-  MANIFEST\n-  MANIFEST.in\n-  README\n-  extdemo.c\n-  setup.py\n</pre>\n<pre>&gt;&gt;&gt; write('buildout.cfg',\n... \"\"\"\n... [buildout]\n... develop = demo\n... parts = extdemo demo\n...\n... [extdemo]\n... setup = %(extdemo)s\n... recipe = repoze.recipe.egg:develop\n... include-dirs = include\n... define = TWO\n...\n... [demo]\n... recipe = repoze.recipe.egg\n... eggs = demo\n...        extdemo\n... entry-points = demo=demo:main\n... \"\"\" % dict(extdemo=extdemo))\n</pre>\n</blockquote>\n<p>Note that we added a define option to cause the preprocessor variable\nTWO to be defined.  This will cause the module-variable, \u2018val\u2019, to be\nset with a value of 2.</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(buildout),\nDevelop: '/sample-buildout/demo'\nUninstalling demo.\nUninstalling extdemo.\nInstalling extdemo.\nInstalling demo.\nGenerated script '/sample-buildout/bin/demo'.\n</pre>\n</blockquote>\n<p>Our develop-eggs now includes an egg link for extdemo:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls('develop-eggs')\n-  demo.egg-link\n-  extdemo.egg-link\n-  repoze.recipe.egg.egg-link\n</pre>\n</blockquote>\n<p>and the extdemo now has a built extension:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; ls(extdemo)\n-  MANIFEST\n-  MANIFEST.in\n-  README\nd  build\n-  extdemo.c\nd  extdemo.egg-info\n-  extdemo.so\n-  setup.py\n</pre>\n</blockquote>\n<p>Because develop eggs take precedence over non-develop eggs, the demo\nscript will use the new develop egg:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(join('bin', 'demo')),\n2\n</pre>\n</blockquote>\n</div>\n<div id=\"egg-recipe-api-for-other-recipes\">\n<h3><a href=\"#id23\" rel=\"nofollow\">Egg Recipe API for other Recipes</a></h3>\n<p>It is common for recipes to accept a collection of egg specifications\nand generate scripts based on the resulting working sets.  The egg\nrecipe provides an API that other recipes can use.</p>\n<p>A recipe can reuse the egg recipe, supporting the eggs, find-links,\nindex, extra-paths, and python options.  This is done by creating an\negg recipe instance in a recipes\u2019s contructor.  In the recipe\u2019s\ninstall script, the egg-recipe instance\u2019s working_set method is used\nto collect the requested eggs and working set.</p>\n<p>To illustrate, we create a sample recipe that is a very thin layer\naround the egg recipe:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; mkdir(sample_buildout, 'sample')\n&gt;&gt;&gt; write(sample_buildout, 'sample', 'sample.py',\n... \"\"\"\n... import logging, os\n... import repoze.recipe.egg\n...\n... class Sample:\n...\n...     def __init__(self, buildout, name, options):\n...         self.egg = repoze.recipe.egg.Scripts(buildout, name, options)\n...         self.name = name\n...         self.options = options\n...\n...     def install(self):\n...         extras = self.options['extras'].split()\n...         requirements, ws = self.egg.working_set(extras)\n...         print 'Part:', self.name\n...         print 'Egg requirements:'\n...         for r in requirements:\n...             print r\n...         print 'Working set:'\n...         for d in ws:\n...             print d\n...         print 'extra paths:', self.egg.extra_paths\n...         return ()\n...\n...     update = install\n... \"\"\")\n</pre>\n</blockquote>\n<p>Here we instantiated the egg recipe in the constructor, saving it in\nan attribute.  This also initialized the options dictionary.</p>\n<p>In our install method, we called the working_set method on the\ninstance we saved.  The working_set method takes an optional sequence\nof extra requirements to be included in the working set.</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'sample', 'setup.py',\n... \"\"\"\n... from setuptools import setup\n...\n... setup(\n...     name = \"sample\",\n...     entry_points = {'zc.buildout': ['default = sample:Sample']},\n...     install_requires = 'repoze.recipe.egg',\n...     )\n... \"\"\")\n</pre>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'sample', 'README.txt', \" \")\n</pre>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... develop = sample\n... parts = sample-part\n...\n... [sample-part]\n... recipe = sample\n... eggs = demo&lt;0.3\n... find-links = %(server)s\n... index = %(server)sindex\n... extras = other\n... \"\"\" % dict(server=link_server))\n</pre>\n<pre>&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.chdir(sample_buildout)\n&gt;&gt;&gt; buildout = os.path.join(sample_buildout, 'bin', 'buildout')\n&gt;&gt;&gt; print system(buildout + ' -q'),\nPart: sample-part\nEgg requirements:\ndemo&lt;0.3\nWorking set:\ndemo 0.2\nother 1.0\ndemoneeded 1.2c1\nextra paths: []\n</pre>\n</blockquote>\n<p>We can see that the options were augmented with additionl data\ncomputed by the egg recipe by looking at .installed.cfg:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; cat(sample_buildout, '.installed.cfg')\n[buildout]\ninstalled_develop_eggs = /sample-buildout/develop-eggs/sample.egg-link\nparts = sample-part\n&lt;BLANKLINE&gt;\n[sample-part]\n__buildout_installed__ =\n__buildout_signature__ = sample-6aWMvV2EJ9Ijq+bR8ugArQ==\n        repoze.recipe.egg-cAsnudgkduAa/Fd+WJIM6Q==\n        setuptools-0.6-py2.4.egg\n        zc.buildout-+rYeCcmFuD1K/aB77XTj5A==\n_b = /sample-buildout/bin\n_d = /sample-buildout/develop-eggs\n_e = /sample-buildout/eggs\nbin-directory = /sample-buildout/bin\ndevelop-eggs-directory = /sample-buildout/develop-eggs\neggs = demo&lt;0.3\neggs-directory = /sample-buildout/eggs\nexecutable = /usr/local/bin/python2.3\nextras = other\nfind-links = http://localhost:27071/\nindex = http://localhost:27071/index\nrecipe = sample\n</pre>\n</blockquote>\n<p>If we use the extra-paths option:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg',\n... \"\"\"\n... [buildout]\n... develop = sample\n... parts = sample-part\n...\n... [sample-part]\n... recipe = sample\n... eggs = demo&lt;0.3\n... find-links = %(server)s\n... index = %(server)sindex\n... extras = other\n... extra-paths = /foo/bar\n...               /spam/eggs\n... \"\"\" % dict(server=link_server))\n</pre>\n</blockquote>\n<p>Then we\u2019ll see that reflected in the extra_paths attribute in the egg\nrecipe instance:</p>\n<blockquote>\n<pre>&gt;&gt;&gt; print system(buildout + ' -q'),\nPart: sample-part\nEgg requirements:\ndemo&lt;0.3\nWorking set:\ndemo 0.2\nother 1.0\ndemoneeded 1.2c1\nextra paths: ['/foo/bar', '/spam/eggs']\n</pre>\n</blockquote>\n</div>\n</div>\n<div id=\"download\">\n<h2><a href=\"#id24\" rel=\"nofollow\">Download</a></h2>\n</div>\n\n          </div>"}, "last_serial": 798824, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "6208746c330f2524e97670241b73b05f", "sha256": "8b78d3164504c8dd2b694d8bd58850487af9179145ddc1d2db4a90e5fdc09467"}, "downloads": -1, "filename": "repoze.recipe.egg-0.1.tar.gz", "has_sig": false, "md5_digest": "6208746c330f2524e97670241b73b05f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 26089, "upload_time": "2008-03-03T15:04:06", "upload_time_iso_8601": "2008-03-03T15:04:06Z", "url": "https://files.pythonhosted.org/packages/3b/6a/aa94a260d0837c94561eb0669a25fc8e4b819977ed74753cdfaa8cd159a7/repoze.recipe.egg-0.1.tar.gz", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "8b5f3bb56fde427243f2647388e56505", "sha256": "8b6e9de1e8c8a9c7ef59cd8246244300b7c13e22d81b49d092ca9888204fd1c1"}, "downloads": -1, "filename": "repoze.recipe.egg-0.2.tar.gz", "has_sig": false, "md5_digest": "8b5f3bb56fde427243f2647388e56505", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 26196, "upload_time": "2009-02-14T19:56:54", "upload_time_iso_8601": "2009-02-14T19:56:54.296508Z", "url": "https://files.pythonhosted.org/packages/85/e0/73a36aee22f9565a7a48f1ee4d1a9de3ad922d382bb5b755e45995a9aa1e/repoze.recipe.egg-0.2.tar.gz", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "2d98a59562f7f647453e8b0e4a51da69", "sha256": "91a874502f9b8499d09fbb36930df1322ea300157c6e535f5f59d72d144fa3a2"}, "downloads": -1, "filename": "repoze.recipe.egg-0.3.tar.gz", "has_sig": false, "md5_digest": "2d98a59562f7f647453e8b0e4a51da69", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 26455, "upload_time": "2009-04-01T03:07:59", "upload_time_iso_8601": "2009-04-01T03:07:59.010142Z", "url": "https://files.pythonhosted.org/packages/a9/33/9f9b442990d5935e92369efe93b03b6b8adea1018cbc781d5a1cc84883b7/repoze.recipe.egg-0.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "2d98a59562f7f647453e8b0e4a51da69", "sha256": "91a874502f9b8499d09fbb36930df1322ea300157c6e535f5f59d72d144fa3a2"}, "downloads": -1, "filename": "repoze.recipe.egg-0.3.tar.gz", "has_sig": false, "md5_digest": "2d98a59562f7f647453e8b0e4a51da69", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 26455, "upload_time": "2009-04-01T03:07:59", "upload_time_iso_8601": "2009-04-01T03:07:59.010142Z", "url": "https://files.pythonhosted.org/packages/a9/33/9f9b442990d5935e92369efe93b03b6b8adea1018cbc781d5a1cc84883b7/repoze.recipe.egg-0.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:04:25 2020"}