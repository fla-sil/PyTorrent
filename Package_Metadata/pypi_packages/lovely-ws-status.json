{"info": {"author": "Lovely Systems", "author_email": "office@lovelysystems.com", "bugtrack_url": null, "classifiers": ["Framework :: Pyramid", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7"], "description": "=========================\nLovely Webservices Status\n=========================\n\n.. image:: https://img.shields.io/pypi/v/lovely-ws-status.svg\n    :target: https://pypi.org/project/lovely-ws-status/\n\n.. image:: https://img.shields.io/pypi/pyversions/lovely-ws-status.svg\n    :target: https://pypi.org/project/lovely-ws-status/\n\n.. image:: https://travis-ci.org/lovelysystems/lovely-ws-status.svg?branch=master\n    :target: https://travis-ci.org/lovelysystems/lovely-ws-status\n\nThis package provides service status utilities for Pyramid applications.\nRegister your own status handlers and see the service status of all registered\nhandlers in the ``svc_status`` Pyramid view.\n\n\nStatus Handler\n==============\n\nA status handler can be any method or class that checks any part of your\napplication stack. This can be for example a check that your database\nconnection is still working, or checking some external service. The status\nhandler must return a dict with a state property which can have the value\n``OK``, ``YELLOW`` or ``RED``. Additional properties like ``detail`` can be\noptionally added, but will only be displayed in the JSON SVC status view.\n\n\nAs Callable\n-----------\n\nCreate a status handler as a python function::\n\n    >>> from lovely.ws.status import OK\n    >>> def statusHandler():\n    ...     # Do whatever you need to do to check the status\n    ...     return {\n    ...         'state': OK\n    ...     }\n\nRegister the status handler::\n\n    >>> from lovely.ws.status import addStatusHandler\n    >>> addStatusHandler('DatabaseConnection', statusHandler)\n\nStatus handlers can also be classes, just provide a ``__call__`` method::\n\n    >>> from lovely.ws.status import RED\n    >>> class StatusHandler(object):\n    ...     def __call__(self):\n    ...         # Do whatever you need to do to check the status\n    ...         return {\n    ...             'state': RED,\n    ...             'detail': 'Service not available',\n    ...         }\n    >>> statusHandler2 = StatusHandler()\n    >>> addStatusHandler('UserService', statusHandler2)\n\n\nMixin Class\n-----------\n\nTo simplify the implementation of status providers there is a mixin class\nwhich handles the state and provides logging on status changes::\n\n    >>> from lovely.ws.status import YELLOW, GREEN\n    >>> from lovely.ws.status.statehandler import StateHandlerMixin\n    >>> class MyHandler(StateHandlerMixin):\n    ...     def __init__(self):\n    ...         self.setState(YELLOW)\n    >>> myHandler = MyHandler()\n    >>> addStatusHandler('myHandler', myHandler)\n\nNow just use ``setState`` to change the state. ``setState`` allows to set any\nadditional property on the state::\n\n    >>> myHandler.setState(GREEN, detail='running')\n\n\nSVC Status View\n===============\n\nThere's a Pyramid view that can be added to your project which creates an\nendpoint to see the live service status provided by all registered status\nhandlers.\n\nFor the view to get registered, you need to configure this module in your application\nby adding these two lines in your app factory::\n\n    config.include('lovely.ws.status.svcstatus')\n    config.scan('lovely.ws.status.svcstatus')\n\nCalling the ``/svc_status`` endpoint will return a CSV response with an output\nlike this::\n\n    DatabaseConnection OK\n    UserService RED\n\nIt's also possible to receive the response in JSON format by calling the\n``svc_status`` endpoint with accept header ``application/json`` or by calling\nthe ``svc_status.json`` endpoint. Additional properties like the detail will\nonly be shown in the JSON formatted output. The output will look like this::\n\n    {\n        \"DatabaseConnection\": {\n            \"state\": \"OK\"\n        },\n        \"UserService\":{\n            \"state\": \"OK\",\n            \"detail\": \"Service not available\"\n        }\n    }\n\nCalling the ``svc_status.prometheus`` endpoint returns the service status as\na prometheus template. The output will look like this::\n\n    # HELP svc_status Status 0->OK, 1->YELLOW, 2->RED\n    # TYPE svc_status untyped\n    svc_status{name=\"DatabaseConnection\"} 0\n    # HELP svc_status Status 0->OK, 1->YELLOW, 2->RED\n    # TYPE svc_status untyped\n    svc_status{name=\"UserService\"} 2\n\nMore information can be found in the `SVC status test suite\n<tests/lovely/ws/status/svcstatus.rst>`_.\n\n\nProbe Status View\n=================\n\nThis view allows to check if the service is available and to decommission the\nservice. The view returns status 200 and the body ``OK`` by default.\n\nThe probe status view can be included into a Pyramid project in the\n``server.py`` file by adding these two lines in your app factory::\n\n    config.include('lovely.ws.status.probestatus')\n    config.scan('lovely.ws.status.probestatus')\n\nDecommissioning can be used to make the service unavailable for load balancers\nbefore the service is shut down.\n\nMore information can be found in the `probe status test suite\n<tests/lovely/ws/status/probestatus.rst>`_.\n\n\nDevelopment\n===========\n\nInformation on how to contribute can be found in the `DEVELOPMENT.rst\n<DEVELOPMENT.rst>`_ file.\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/lovelysystems/lovely-ws-status", "keywords": "pyramid service status monitoring prometheus", "license": "Apache License 2.0", "maintainer": "", "maintainer_email": "", "name": "lovely-ws-status", "package_url": "https://pypi.org/project/lovely-ws-status/", "platform": "", "project_url": "https://pypi.org/project/lovely-ws-status/", "project_urls": {"Homepage": "https://github.com/lovelysystems/lovely-ws-status"}, "release_url": "https://pypi.org/project/lovely-ws-status/1.0.0/", "requires_dist": null, "requires_python": "", "summary": "Service Status Utilities for Pyramid Apps", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://pypi.org/project/lovely-ws-status/\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/v/lovely-ws-status.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8c510f4c857550241dfab80af2ea1fd22a5fb2a5/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6c6f76656c792d77732d7374617475732e737667\"></a>\n<a href=\"https://pypi.org/project/lovely-ws-status/\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/pyversions/lovely-ws-status.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5f5eff36dc023186685d4de8798227d9ec263d67/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f6c6f76656c792d77732d7374617475732e737667\"></a>\n<a href=\"https://travis-ci.org/lovelysystems/lovely-ws-status\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/lovelysystems/lovely-ws-status.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/99cb9ddf89e17fc3de242801482708c7aac1a300/68747470733a2f2f7472617669732d63692e6f72672f6c6f76656c7973797374656d732f6c6f76656c792d77732d7374617475732e7376673f6272616e63683d6d6173746572\"></a>\n<p>This package provides service status utilities for Pyramid applications.\nRegister your own status handlers and see the service status of all registered\nhandlers in the <tt>svc_status</tt> Pyramid view.</p>\n<div id=\"status-handler\">\n<h2>Status Handler</h2>\n<p>A status handler can be any method or class that checks any part of your\napplication stack. This can be for example a check that your database\nconnection is still working, or checking some external service. The status\nhandler must return a dict with a state property which can have the value\n<tt>OK</tt>, <tt>YELLOW</tt> or <tt>RED</tt>. Additional properties like <tt>detail</tt> can be\noptionally added, but will only be displayed in the JSON SVC status view.</p>\n<div id=\"as-callable\">\n<h3>As Callable</h3>\n<p>Create a status handler as a python function:</p>\n<pre>&gt;&gt;&gt; from lovely.ws.status import OK\n&gt;&gt;&gt; def statusHandler():\n...     # Do whatever you need to do to check the status\n...     return {\n...         'state': OK\n...     }\n</pre>\n<p>Register the status handler:</p>\n<pre>&gt;&gt;&gt; from lovely.ws.status import addStatusHandler\n&gt;&gt;&gt; addStatusHandler('DatabaseConnection', statusHandler)\n</pre>\n<p>Status handlers can also be classes, just provide a <tt>__call__</tt> method:</p>\n<pre>&gt;&gt;&gt; from lovely.ws.status import RED\n&gt;&gt;&gt; class StatusHandler(object):\n...     def __call__(self):\n...         # Do whatever you need to do to check the status\n...         return {\n...             'state': RED,\n...             'detail': 'Service not available',\n...         }\n&gt;&gt;&gt; statusHandler2 = StatusHandler()\n&gt;&gt;&gt; addStatusHandler('UserService', statusHandler2)\n</pre>\n</div>\n<div id=\"mixin-class\">\n<h3>Mixin Class</h3>\n<p>To simplify the implementation of status providers there is a mixin class\nwhich handles the state and provides logging on status changes:</p>\n<pre>&gt;&gt;&gt; from lovely.ws.status import YELLOW, GREEN\n&gt;&gt;&gt; from lovely.ws.status.statehandler import StateHandlerMixin\n&gt;&gt;&gt; class MyHandler(StateHandlerMixin):\n...     def __init__(self):\n...         self.setState(YELLOW)\n&gt;&gt;&gt; myHandler = MyHandler()\n&gt;&gt;&gt; addStatusHandler('myHandler', myHandler)\n</pre>\n<p>Now just use <tt>setState</tt> to change the state. <tt>setState</tt> allows to set any\nadditional property on the state:</p>\n<pre>&gt;&gt;&gt; myHandler.setState(GREEN, detail='running')\n</pre>\n</div>\n</div>\n<div id=\"svc-status-view\">\n<h2>SVC Status View</h2>\n<p>There\u2019s a Pyramid view that can be added to your project which creates an\nendpoint to see the live service status provided by all registered status\nhandlers.</p>\n<p>For the view to get registered, you need to configure this module in your application\nby adding these two lines in your app factory:</p>\n<pre>config.include('lovely.ws.status.svcstatus')\nconfig.scan('lovely.ws.status.svcstatus')\n</pre>\n<p>Calling the <tt>/svc_status</tt> endpoint will return a CSV response with an output\nlike this:</p>\n<pre>DatabaseConnection OK\nUserService RED\n</pre>\n<p>It\u2019s also possible to receive the response in JSON format by calling the\n<tt>svc_status</tt> endpoint with accept header <tt>application/json</tt> or by calling\nthe <tt>svc_status.json</tt> endpoint. Additional properties like the detail will\nonly be shown in the JSON formatted output. The output will look like this:</p>\n<pre>{\n    \"DatabaseConnection\": {\n        \"state\": \"OK\"\n    },\n    \"UserService\":{\n        \"state\": \"OK\",\n        \"detail\": \"Service not available\"\n    }\n}\n</pre>\n<p>Calling the <tt>svc_status.prometheus</tt> endpoint returns the service status as\na prometheus template. The output will look like this:</p>\n<pre># HELP svc_status Status 0-&gt;OK, 1-&gt;YELLOW, 2-&gt;RED\n# TYPE svc_status untyped\nsvc_status{name=\"DatabaseConnection\"} 0\n# HELP svc_status Status 0-&gt;OK, 1-&gt;YELLOW, 2-&gt;RED\n# TYPE svc_status untyped\nsvc_status{name=\"UserService\"} 2\n</pre>\n<p>More information can be found in the <a href=\"tests/lovely/ws/status/svcstatus.rst\" rel=\"nofollow\">SVC status test suite</a>.</p>\n</div>\n<div id=\"probe-status-view\">\n<h2>Probe Status View</h2>\n<p>This view allows to check if the service is available and to decommission the\nservice. The view returns status 200 and the body <tt>OK</tt> by default.</p>\n<p>The probe status view can be included into a Pyramid project in the\n<tt>server.py</tt> file by adding these two lines in your app factory:</p>\n<pre>config.include('lovely.ws.status.probestatus')\nconfig.scan('lovely.ws.status.probestatus')\n</pre>\n<p>Decommissioning can be used to make the service unavailable for load balancers\nbefore the service is shut down.</p>\n<p>More information can be found in the <a href=\"tests/lovely/ws/status/probestatus.rst\" rel=\"nofollow\">probe status test suite</a>.</p>\n</div>\n<div id=\"development\">\n<h2>Development</h2>\n<p>Information on how to contribute can be found in the <a href=\"DEVELOPMENT.rst\" rel=\"nofollow\">DEVELOPMENT.rst</a> file.</p>\n</div>\n\n          </div>"}, "last_serial": 4158612, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "3ceab913fc7e327995b4b1efb8d0e1f9", "sha256": "ff5e610c6ce3951654448bd3f033866676bb67f4bfdb4bbed6f56bc98c98c257"}, "downloads": -1, "filename": "lovely-ws-status-1.0.0.tar.gz", "has_sig": false, "md5_digest": "3ceab913fc7e327995b4b1efb8d0e1f9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10202, "upload_time": "2018-08-10T22:53:16", "upload_time_iso_8601": "2018-08-10T22:53:16.933781Z", "url": "https://files.pythonhosted.org/packages/4d/47/692a023401c541ebfb469c25bb155977e124ea9160dc0e830355a3f2d03b/lovely-ws-status-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "3ceab913fc7e327995b4b1efb8d0e1f9", "sha256": "ff5e610c6ce3951654448bd3f033866676bb67f4bfdb4bbed6f56bc98c98c257"}, "downloads": -1, "filename": "lovely-ws-status-1.0.0.tar.gz", "has_sig": false, "md5_digest": "3ceab913fc7e327995b4b1efb8d0e1f9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10202, "upload_time": "2018-08-10T22:53:16", "upload_time_iso_8601": "2018-08-10T22:53:16.933781Z", "url": "https://files.pythonhosted.org/packages/4d/47/692a023401c541ebfb469c25bb155977e124ea9160dc0e830355a3f2d03b/lovely-ws-status-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:43:40 2020"}