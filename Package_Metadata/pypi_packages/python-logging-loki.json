{"info": {"author": "Andrey Maslov", "author_email": "greyzmeem@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Internet :: WWW/HTTP", "Topic :: Software Development :: Libraries :: Python Modules", "Topic :: System :: Logging"], "description": "python-logging-loki\n===================\n\n[![PyPI version](https://img.shields.io/pypi/v/python-logging-loki.svg)](https://pypi.org/project/python-logging-loki/)\n[![Python version](https://img.shields.io/badge/python-3.6%20%7C%203.7%20%7C%203.8-blue.svg)](https://www.python.org/)\n[![License](https://img.shields.io/pypi/l/python-logging-loki.svg)](https://opensource.org/licenses/MIT)\n[![Build Status](https://travis-ci.org/GreyZmeem/python-logging-loki.svg?branch=master)](https://travis-ci.org/GreyZmeem/python-logging-loki)\n\nPython logging handler for Loki.  \nhttps://grafana.com/loki\n\nInstallation\n============\n```bash\npip install python-logging-loki\n```\n\nUsage\n=====\n\n```python\nimport logging\nimport logging_loki\n\n\nhandler = logging_loki.LokiHandler(\n    url=\"https://my-loki-instance/loki/api/v1/push\", \n    tags={\"application\": \"my-app\"},\n    auth=(\"username\", \"password\"),\n    version=\"1\",\n)\n\nlogger = logging.getLogger(\"my-logger\")\nlogger.addHandler(handler)\nlogger.error(\n    \"Something happened\", \n    extra={\"tags\": {\"service\": \"my-service\"}},\n)\n```\n\nExample above will send `Something happened` message along with these labels:\n- Default labels from handler\n- Message level as `serverity`\n- Logger's name as `logger` \n- Labels from `tags` item of `extra` dict\n\nThe given example is blocking (i.e. each call will wait for the message to be sent).  \nBut you can use the built-in `QueueHandler` and` QueueListener` to send messages in a separate thread.  \n\n```python\nimport logging.handlers\nimport logging_loki\nfrom multiprocessing import Queue\n\n\nqueue = Queue(-1)\nhandler = logging.handlers.QueueHandler(queue)\nhandler_loki = logging_loki.LokiHandler(\n    url=\"https://my-loki-instance/loki/api/v1/push\", \n    tags={\"application\": \"my-app\"},\n    auth=(\"username\", \"password\"),\n    version=\"1\",\n)\nlogging.handlers.QueueListener(queue, handler_loki)\n\nlogger = logging.getLogger(\"my-logger\")\nlogger.addHandler(handler)\nlogger.error(...)\n```\n\nOr you can use `LokiQueueHandler` shortcut, which will automatically create listener and handler.\n\n```python\nimport logging.handlers\nimport logging_loki\nfrom multiprocessing import Queue\n\n\nhandler = logging_loki.LokiQueueHandler(\n    Queue(-1),\n    url=\"https://my-loki-instance/loki/api/v1/push\", \n    tags={\"application\": \"my-app\"},\n    auth=(\"username\", \"password\"),\n    version=\"1\",\n)\n\nlogger = logging.getLogger(\"my-logger\")\nlogger.addHandler(handler)\nlogger.error(...)\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/greyzmeem/python-logging-loki", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "python-logging-loki", "package_url": "https://pypi.org/project/python-logging-loki/", "platform": "", "project_url": "https://pypi.org/project/python-logging-loki/", "project_urls": {"Homepage": "https://github.com/greyzmeem/python-logging-loki"}, "release_url": "https://pypi.org/project/python-logging-loki/0.3.1/", "requires_dist": ["rfc3339 (>=6.1)", "requests"], "requires_python": ">=3.6", "summary": "Python logging handler for Grafana Loki.", "version": "0.3.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>python-logging-loki</h1>\n<p><a href=\"https://pypi.org/project/python-logging-loki/\" rel=\"nofollow\"><img alt=\"PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ebbb040652217d64fbc13c7d0b8750f721a89b38/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f707974686f6e2d6c6f6767696e672d6c6f6b692e737667\"></a>\n<a href=\"https://www.python.org/\" rel=\"nofollow\"><img alt=\"Python version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e93434e60561c68404232b58ce916917e8a3e2d7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d332e36253230253743253230332e37253230253743253230332e382d626c75652e737667\"></a>\n<a href=\"https://opensource.org/licenses/MIT\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ff9dca9b3696b3d979f25856ff55daa660d4f102/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f707974686f6e2d6c6f6767696e672d6c6f6b692e737667\"></a>\n<a href=\"https://travis-ci.org/GreyZmeem/python-logging-loki\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f67d18cb399aa59d2f080e22f309405085616308/68747470733a2f2f7472617669732d63692e6f72672f477265795a6d65656d2f707974686f6e2d6c6f6767696e672d6c6f6b692e7376673f6272616e63683d6d6173746572\"></a></p>\n<p>Python logging handler for Loki.<br>\n<a href=\"https://grafana.com/loki\" rel=\"nofollow\">https://grafana.com/loki</a></p>\n<h1>Installation</h1>\n<pre>pip install python-logging-loki\n</pre>\n<h1>Usage</h1>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"kn\">import</span> <span class=\"nn\">logging_loki</span>\n\n\n<span class=\"n\">handler</span> <span class=\"o\">=</span> <span class=\"n\">logging_loki</span><span class=\"o\">.</span><span class=\"n\">LokiHandler</span><span class=\"p\">(</span>\n    <span class=\"n\">url</span><span class=\"o\">=</span><span class=\"s2\">\"https://my-loki-instance/loki/api/v1/push\"</span><span class=\"p\">,</span> \n    <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"application\"</span><span class=\"p\">:</span> <span class=\"s2\">\"my-app\"</span><span class=\"p\">},</span>\n    <span class=\"n\">auth</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"s2\">\"username\"</span><span class=\"p\">,</span> <span class=\"s2\">\"password\"</span><span class=\"p\">),</span>\n    <span class=\"n\">version</span><span class=\"o\">=</span><span class=\"s2\">\"1\"</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n\n<span class=\"n\">logger</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"s2\">\"my-logger\"</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">addHandler</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">error</span><span class=\"p\">(</span>\n    <span class=\"s2\">\"Something happened\"</span><span class=\"p\">,</span> \n    <span class=\"n\">extra</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"tags\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"service\"</span><span class=\"p\">:</span> <span class=\"s2\">\"my-service\"</span><span class=\"p\">}},</span>\n<span class=\"p\">)</span>\n</pre>\n<p>Example above will send <code>Something happened</code> message along with these labels:</p>\n<ul>\n<li>Default labels from handler</li>\n<li>Message level as <code>serverity</code></li>\n<li>Logger's name as <code>logger</code></li>\n<li>Labels from <code>tags</code> item of <code>extra</code> dict</li>\n</ul>\n<p>The given example is blocking (i.e. each call will wait for the message to be sent).<br>\nBut you can use the built-in <code>QueueHandler</code> and<code>QueueListener</code> to send messages in a separate thread.</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging.handlers</span>\n<span class=\"kn\">import</span> <span class=\"nn\">logging_loki</span>\n<span class=\"kn\">from</span> <span class=\"nn\">multiprocessing</span> <span class=\"kn\">import</span> <span class=\"n\">Queue</span>\n\n\n<span class=\"n\">queue</span> <span class=\"o\">=</span> <span class=\"n\">Queue</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">handler</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">handlers</span><span class=\"o\">.</span><span class=\"n\">QueueHandler</span><span class=\"p\">(</span><span class=\"n\">queue</span><span class=\"p\">)</span>\n<span class=\"n\">handler_loki</span> <span class=\"o\">=</span> <span class=\"n\">logging_loki</span><span class=\"o\">.</span><span class=\"n\">LokiHandler</span><span class=\"p\">(</span>\n    <span class=\"n\">url</span><span class=\"o\">=</span><span class=\"s2\">\"https://my-loki-instance/loki/api/v1/push\"</span><span class=\"p\">,</span> \n    <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"application\"</span><span class=\"p\">:</span> <span class=\"s2\">\"my-app\"</span><span class=\"p\">},</span>\n    <span class=\"n\">auth</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"s2\">\"username\"</span><span class=\"p\">,</span> <span class=\"s2\">\"password\"</span><span class=\"p\">),</span>\n    <span class=\"n\">version</span><span class=\"o\">=</span><span class=\"s2\">\"1\"</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n<span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">handlers</span><span class=\"o\">.</span><span class=\"n\">QueueListener</span><span class=\"p\">(</span><span class=\"n\">queue</span><span class=\"p\">,</span> <span class=\"n\">handler_loki</span><span class=\"p\">)</span>\n\n<span class=\"n\">logger</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"s2\">\"my-logger\"</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">addHandler</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">error</span><span class=\"p\">(</span><span class=\"o\">...</span><span class=\"p\">)</span>\n</pre>\n<p>Or you can use <code>LokiQueueHandler</code> shortcut, which will automatically create listener and handler.</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging.handlers</span>\n<span class=\"kn\">import</span> <span class=\"nn\">logging_loki</span>\n<span class=\"kn\">from</span> <span class=\"nn\">multiprocessing</span> <span class=\"kn\">import</span> <span class=\"n\">Queue</span>\n\n\n<span class=\"n\">handler</span> <span class=\"o\">=</span> <span class=\"n\">logging_loki</span><span class=\"o\">.</span><span class=\"n\">LokiQueueHandler</span><span class=\"p\">(</span>\n    <span class=\"n\">Queue</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">),</span>\n    <span class=\"n\">url</span><span class=\"o\">=</span><span class=\"s2\">\"https://my-loki-instance/loki/api/v1/push\"</span><span class=\"p\">,</span> \n    <span class=\"n\">tags</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"application\"</span><span class=\"p\">:</span> <span class=\"s2\">\"my-app\"</span><span class=\"p\">},</span>\n    <span class=\"n\">auth</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"s2\">\"username\"</span><span class=\"p\">,</span> <span class=\"s2\">\"password\"</span><span class=\"p\">),</span>\n    <span class=\"n\">version</span><span class=\"o\">=</span><span class=\"s2\">\"1\"</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n\n<span class=\"n\">logger</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"s2\">\"my-logger\"</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">addHandler</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n<span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">error</span><span class=\"p\">(</span><span class=\"o\">...</span><span class=\"p\">)</span>\n</pre>\n\n          </div>"}, "last_serial": 6216118, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "a879e4acb90cab5a6d706a64ac7ef70e", "sha256": "d014411db34f00380e3d191be3c5e3ad67420d0c8d13189250d8a9042656069f"}, "downloads": -1, "filename": "python_logging_loki-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "a879e4acb90cab5a6d706a64ac7ef70e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 4566, "upload_time": "2019-02-20T14:58:59", "upload_time_iso_8601": "2019-02-20T14:58:59.709108Z", "url": "https://files.pythonhosted.org/packages/2f/19/520f706008c4903a5527143e0f3c4dd39872a98074889607014d80b3b65e/python_logging_loki-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "7ea13140cb91ab77b6642a80d6a5896d", "sha256": "8c5850b065e6a0bfbb24bf98d6e5c73d3bab44a28ef934521d3b0c8c217c7aef"}, "downloads": -1, "filename": "python-logging-loki-0.1.0.tar.gz", "has_sig": false, "md5_digest": "7ea13140cb91ab77b6642a80d6a5896d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 3320, "upload_time": "2019-02-20T14:59:01", "upload_time_iso_8601": "2019-02-20T14:59:01.649697Z", "url": "https://files.pythonhosted.org/packages/b5/cb/cbde9911204ea944785a3e752c6a4ec7506bb590c378b726b317c95b2d76/python-logging-loki-0.1.0.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "fc5ffdda7dc87accb25efdf9ec63f97e", "sha256": "5f4e5052420204e33ce7c54a9380f3f53eb9cd502f31ea69ae9d0ec7f793a111"}, "downloads": -1, "filename": "python_logging_loki-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "fc5ffdda7dc87accb25efdf9ec63f97e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 4584, "upload_time": "2019-08-30T11:54:41", "upload_time_iso_8601": "2019-08-30T11:54:41.259760Z", "url": "https://files.pythonhosted.org/packages/04/32/0467fe047765ef408083e7bed88c4a15c5598fc4e622305c1c4b67b12c8b/python_logging_loki-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "08b6e5d6932ec4f5cc79ce60e95e0b4b", "sha256": "9dee4a51d265894314eacae55a501a8eadaff2b07b4c482ef365190ec1954c2d"}, "downloads": -1, "filename": "python-logging-loki-0.2.0.tar.gz", "has_sig": false, "md5_digest": "08b6e5d6932ec4f5cc79ce60e95e0b4b", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 3475, "upload_time": "2019-08-30T11:54:42", "upload_time_iso_8601": "2019-08-30T11:54:42.449505Z", "url": "https://files.pythonhosted.org/packages/02/99/e47f7bab601579e8c5fef4da894ebb46f3cac5613ea2170113e9392ca5bf/python-logging-loki-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "35feab9e91c9c888638f311dad17ee9c", "sha256": "623a379950a6ff91080f11bfa0a22a791c0f1f30756ba2ab4765eea61a261af4"}, "downloads": -1, "filename": "python_logging_loki-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "35feab9e91c9c888638f311dad17ee9c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 6968, "upload_time": "2019-11-04T19:58:59", "upload_time_iso_8601": "2019-11-04T19:58:59.550165Z", "url": "https://files.pythonhosted.org/packages/d4/a3/34240f1c188948378870cae40bb78c4dcb34a8fa8d79e007bd1e5709283f/python_logging_loki-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "69f153a65cafdcfa1901d39ab22bdf3f", "sha256": "02c9f7fe7e02dc7d24833627231a165927630d82ebb524002f90efa44608a8cf"}, "downloads": -1, "filename": "python-logging-loki-0.3.0.tar.gz", "has_sig": false, "md5_digest": "69f153a65cafdcfa1901d39ab22bdf3f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5169, "upload_time": "2019-11-04T19:59:01", "upload_time_iso_8601": "2019-11-04T19:59:01.264470Z", "url": "https://files.pythonhosted.org/packages/d6/ca/132bb7dbccd4746d35f796806955ea3586ff78a7084c4b460432f1565fec/python-logging-loki-0.3.0.tar.gz", "yanked": false}], "0.3.1": [{"comment_text": "", "digests": {"md5": "d128186e7a931d5142d2b343ad8681d7", "sha256": "8a9131db037fbea3d390089c4c32dbe7ed233944905079615a9fb6f669b0f4e6"}, "downloads": -1, "filename": "python_logging_loki-0.3.1-py3-none-any.whl", "has_sig": false, "md5_digest": "d128186e7a931d5142d2b343ad8681d7", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 7004, "upload_time": "2019-11-28T22:34:36", "upload_time_iso_8601": "2019-11-28T22:34:36.635229Z", "url": "https://files.pythonhosted.org/packages/e9/ca/1f5660fbda815ed04839d657cab77605337e32c224c03c780cd383c7bcd6/python_logging_loki-0.3.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9fd79fa39b6dd6ec5816e6dc63c21b37", "sha256": "b83610c8a3adc99fbab072493b91dfb25ced69be4874fefe3ab457b391adbf60"}, "downloads": -1, "filename": "python-logging-loki-0.3.1.tar.gz", "has_sig": false, "md5_digest": "9fd79fa39b6dd6ec5816e6dc63c21b37", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5214, "upload_time": "2019-11-28T22:34:38", "upload_time_iso_8601": "2019-11-28T22:34:38.273654Z", "url": "https://files.pythonhosted.org/packages/39/e2/b1ca91524530e5c7d73e70c4a2df952e5b7f1519977c7c51b3966b0332a8/python-logging-loki-0.3.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d128186e7a931d5142d2b343ad8681d7", "sha256": "8a9131db037fbea3d390089c4c32dbe7ed233944905079615a9fb6f669b0f4e6"}, "downloads": -1, "filename": "python_logging_loki-0.3.1-py3-none-any.whl", "has_sig": false, "md5_digest": "d128186e7a931d5142d2b343ad8681d7", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 7004, "upload_time": "2019-11-28T22:34:36", "upload_time_iso_8601": "2019-11-28T22:34:36.635229Z", "url": "https://files.pythonhosted.org/packages/e9/ca/1f5660fbda815ed04839d657cab77605337e32c224c03c780cd383c7bcd6/python_logging_loki-0.3.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9fd79fa39b6dd6ec5816e6dc63c21b37", "sha256": "b83610c8a3adc99fbab072493b91dfb25ced69be4874fefe3ab457b391adbf60"}, "downloads": -1, "filename": "python-logging-loki-0.3.1.tar.gz", "has_sig": false, "md5_digest": "9fd79fa39b6dd6ec5816e6dc63c21b37", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5214, "upload_time": "2019-11-28T22:34:38", "upload_time_iso_8601": "2019-11-28T22:34:38.273654Z", "url": "https://files.pythonhosted.org/packages/39/e2/b1ca91524530e5c7d73e70c4a2df952e5b7f1519977c7c51b3966b0332a8/python-logging-loki-0.3.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:16:44 2020"}