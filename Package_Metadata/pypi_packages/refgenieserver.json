{"info": {"author": "Michal Stolarczyk, Vince Reuter, Nathan Sheffield", "author_email": "", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "License :: OSI Approved :: BSD License", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Topic :: Scientific/Engineering :: Bio-Informatics"], "description": "[![Build Status](https://travis-ci.org/databio/refgenieserver.svg?branch=master)](https://travis-ci.org/databio/refgenieserver)\n\n# refgenieserver\n\nThis folder contains code for an API to provide reference genomes. `refgenieserver` can do 2 things: `archive` an existing refgenie folder, and then `serve` it. \n\n## How to `serve`\n\n### Building container\n\nIn the same directory as the `Dockerfile`:\n\n```\ndocker build -t refgenieserverim .\n```\n\n### Running container for development:\n\nMount a directory of files to serve at `/genomes`:\n\n```\ndocker run --rm -p 80:80 --name refgenieservercon \\\n  -v $(pwd)/files:/genomes \\\n  refgenieserverim refgenieserver serve -c refgenie.yaml \n```\n\n### Running container for production:\nRun the container from the image you just built:\n\n```\ndocker run --rm -d -p 80:80 \\\n  -v /path/to/genomes_archive:/genomes \\\n  --name refgenieservercon \\\n  refgenieserverim refgenieserver serve -c /genomes/genome_config.yaml \n```\n\nMake sure the `genome_config.yaml` filename matches what you've named your configuration file! We use `-d` to detach so it's in background. You shouldn't need to mount the app (`-v /path/to/refgenieserver:/app`) because in this case we're running it directly. Terminate container when finished:\n\n```\ndocker stop refgenieservercon\n```\n\n\n### Interacting with the API web server\n\nNavigate to [http://localhost/](http://localhost/) to see the server in action.\n\nYou can see the automatic docs and interactive swagger openAPI interface at [http://localhost/docs](http://localhost/docs). That will also tell you all the endpoints, etc.\n\n\n### Monitoring for errors\n\nAttach to container to see debug output:\n\n```\ndocker attach refgenieservercon\n```\n\nGrab errors:\n\n```\ndocker events | grep -oP \"(?<=die )[^ ]+\"\n```\n\nView those error codes:\n\n```\ndocker logs <error_code>\n```\n\nEnter an interactive shell to explore the container contents:\n\n```\ndocker exec -it refgenieservercon sh\n```\n\n## How to `archive`\n\nRefgenieserver can also archive your assets, creating the directory for asset archives needed to `serve`.\n\nFirst, make sure the config has a `genome_archive` key that points to the directory where you want to store the servable archives (`genome_archive` is __not__ added automatically by [`refgenie init`](http://refgenie.databio.org/en/latest/usage/#refgenie-init-help)). Your first time you will need to manually add this to tell refgenieserver where to store the archives.\n\nThen run: \n```\nrefgenieserver archive -c CONFIG\n````\nIt just requires a `-c` argument or `$REFGENIE` environment variable.\n\nThis command will:\n- create the `genome_archive` directory and structure that can be used to serve the assets\n- create a server config file in that directory, which includes a couple of extra asset attributes, like `archive_digest` and `archive_size`. \n\nIn case you already have some of the assets archived and just want to add a new one, use:\n\n```\nrefgenieserver archive -c CONFIG GENOME/ASSET:TAG\n```\n\nIn case you want to remove an unwanted archive, add an `-r` flag:\n\n```\nrefgenieserver archive -c CONFIG -r GENOME/ASSET:TAG\n```\n\n## How to test the `refgenie` suite of software\n\nThe `refgenie` universe includes [`refgenie`](http://refgenie.databio.org/en/latest/), [`refgenconf`](http://refgenie.databio.org/en/latest/overview/#3-the-refgenconf-python-package), and [`refgenieserver`](https://github.com/databio/refgenieserver/).\n\nThe [`test_refgenie.sh`](https://github.com/databio/refgenieserver/blob/staging/test_refgenie.sh) script will test the integration of all three tools to ensure everything is functioning, particularly following any changes or updates to one, two, or all three tools.\n\nUse it simply as follows:\n```\n/path/to/test_refgenie.sh\n```\n\nThe script also requires Python's [virtual environment module](https://docs.python.org/3/tutorial/venv.html), [Docker](https://www.docker.com/), and [Bulker](https://bulker.databio.org/en/latest/) to successfully test all components.", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://refgenie.databio.org/", "keywords": "project,bioinformatics,sequencing,ngs,workflow,GUI,genomes,server", "license": "BSD2", "maintainer": "", "maintainer_email": "", "name": "refgenieserver", "package_url": "https://pypi.org/project/refgenieserver/", "platform": "", "project_url": "https://pypi.org/project/refgenieserver/", "project_urls": {"Homepage": "https://refgenie.databio.org/"}, "release_url": "https://pypi.org/project/refgenieserver/0.4.4/", "requires_dist": null, "requires_python": "", "summary": "This server provides both a web interface and a RESTful API. Users may explore and download archived indexes from the web interface or develop tools that programmatically query the API.", "version": "0.4.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://travis-ci.org/databio/refgenieserver\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4dbdd221084c698a9f9d3d73fc807de5862ceaee/68747470733a2f2f7472617669732d63692e6f72672f6461746162696f2f72656667656e69657365727665722e7376673f6272616e63683d6d6173746572\"></a></p>\n<h1>refgenieserver</h1>\n<p>This folder contains code for an API to provide reference genomes. <code>refgenieserver</code> can do 2 things: <code>archive</code> an existing refgenie folder, and then <code>serve</code> it.</p>\n<h2>How to <code>serve</code></h2>\n<h3>Building container</h3>\n<p>In the same directory as the <code>Dockerfile</code>:</p>\n<pre><code>docker build -t refgenieserverim .\n</code></pre>\n<h3>Running container for development:</h3>\n<p>Mount a directory of files to serve at <code>/genomes</code>:</p>\n<pre><code>docker run --rm -p 80:80 --name refgenieservercon \\\n  -v $(pwd)/files:/genomes \\\n  refgenieserverim refgenieserver serve -c refgenie.yaml \n</code></pre>\n<h3>Running container for production:</h3>\n<p>Run the container from the image you just built:</p>\n<pre><code>docker run --rm -d -p 80:80 \\\n  -v /path/to/genomes_archive:/genomes \\\n  --name refgenieservercon \\\n  refgenieserverim refgenieserver serve -c /genomes/genome_config.yaml \n</code></pre>\n<p>Make sure the <code>genome_config.yaml</code> filename matches what you've named your configuration file! We use <code>-d</code> to detach so it's in background. You shouldn't need to mount the app (<code>-v /path/to/refgenieserver:/app</code>) because in this case we're running it directly. Terminate container when finished:</p>\n<pre><code>docker stop refgenieservercon\n</code></pre>\n<h3>Interacting with the API web server</h3>\n<p>Navigate to <a href=\"http://localhost/\" rel=\"nofollow\">http://localhost/</a> to see the server in action.</p>\n<p>You can see the automatic docs and interactive swagger openAPI interface at <a href=\"http://localhost/docs\" rel=\"nofollow\">http://localhost/docs</a>. That will also tell you all the endpoints, etc.</p>\n<h3>Monitoring for errors</h3>\n<p>Attach to container to see debug output:</p>\n<pre><code>docker attach refgenieservercon\n</code></pre>\n<p>Grab errors:</p>\n<pre><code>docker events | grep -oP \"(?&lt;=die )[^ ]+\"\n</code></pre>\n<p>View those error codes:</p>\n<pre><code>docker logs &lt;error_code&gt;\n</code></pre>\n<p>Enter an interactive shell to explore the container contents:</p>\n<pre><code>docker exec -it refgenieservercon sh\n</code></pre>\n<h2>How to <code>archive</code></h2>\n<p>Refgenieserver can also archive your assets, creating the directory for asset archives needed to <code>serve</code>.</p>\n<p>First, make sure the config has a <code>genome_archive</code> key that points to the directory where you want to store the servable archives (<code>genome_archive</code> is <strong>not</strong> added automatically by <a href=\"http://refgenie.databio.org/en/latest/usage/#refgenie-init-help\" rel=\"nofollow\"><code>refgenie init</code></a>). Your first time you will need to manually add this to tell refgenieserver where to store the archives.</p>\n<p>Then run:</p>\n<pre><code>refgenieserver archive -c CONFIG\n</code></pre>\n<p>It just requires a <code>-c</code> argument or <code>$REFGENIE</code> environment variable.</p>\n<p>This command will:</p>\n<ul>\n<li>create the <code>genome_archive</code> directory and structure that can be used to serve the assets</li>\n<li>create a server config file in that directory, which includes a couple of extra asset attributes, like <code>archive_digest</code> and <code>archive_size</code>.</li>\n</ul>\n<p>In case you already have some of the assets archived and just want to add a new one, use:</p>\n<pre><code>refgenieserver archive -c CONFIG GENOME/ASSET:TAG\n</code></pre>\n<p>In case you want to remove an unwanted archive, add an <code>-r</code> flag:</p>\n<pre><code>refgenieserver archive -c CONFIG -r GENOME/ASSET:TAG\n</code></pre>\n<h2>How to test the <code>refgenie</code> suite of software</h2>\n<p>The <code>refgenie</code> universe includes <a href=\"http://refgenie.databio.org/en/latest/\" rel=\"nofollow\"><code>refgenie</code></a>, <a href=\"http://refgenie.databio.org/en/latest/overview/#3-the-refgenconf-python-package\" rel=\"nofollow\"><code>refgenconf</code></a>, and <a href=\"https://github.com/databio/refgenieserver/\" rel=\"nofollow\"><code>refgenieserver</code></a>.</p>\n<p>The <a href=\"https://github.com/databio/refgenieserver/blob/staging/test_refgenie.sh\" rel=\"nofollow\"><code>test_refgenie.sh</code></a> script will test the integration of all three tools to ensure everything is functioning, particularly following any changes or updates to one, two, or all three tools.</p>\n<p>Use it simply as follows:</p>\n<pre><code>/path/to/test_refgenie.sh\n</code></pre>\n<p>The script also requires Python's <a href=\"https://docs.python.org/3/tutorial/venv.html\" rel=\"nofollow\">virtual environment module</a>, <a href=\"https://www.docker.com/\" rel=\"nofollow\">Docker</a>, and <a href=\"https://bulker.databio.org/en/latest/\" rel=\"nofollow\">Bulker</a> to successfully test all components.</p>\n\n          </div>"}, "last_serial": 6831606, "releases": {"0.3.0": [{"comment_text": "", "digests": {"md5": "a317823b4d00ab4b102541c1afa6861c", "sha256": "05f2efd1947f59e7e2ffc36e8369f086d3b7bdfa8b6e88be93bf596cbe16d077"}, "downloads": -1, "filename": "refgenieserver-0.3.0.tar.gz", "has_sig": false, "md5_digest": "a317823b4d00ab4b102541c1afa6861c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11240, "upload_time": "2019-10-21T19:49:21", "upload_time_iso_8601": "2019-10-21T19:49:21.070737Z", "url": "https://files.pythonhosted.org/packages/09/46/02a9542db37be54545d37dcc8727e813a2e864986760cb6890faff256df3/refgenieserver-0.3.0.tar.gz", "yanked": false}], "0.3.1": [{"comment_text": "", "digests": {"md5": "d5ca1cc3147b80e0affd3ff6ef402393", "sha256": "1df8b8233ac38495376bb3c782dee2543c47483eed59d4ebbcea5704d68f772f"}, "downloads": -1, "filename": "refgenieserver-0.3.1.tar.gz", "has_sig": false, "md5_digest": "d5ca1cc3147b80e0affd3ff6ef402393", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9977, "upload_time": "2019-10-22T18:16:08", "upload_time_iso_8601": "2019-10-22T18:16:08.264692Z", "url": "https://files.pythonhosted.org/packages/72/25/8843c525222d9529096fe92100f213812fa96935ebd08d1a441b45aa2d7b/refgenieserver-0.3.1.tar.gz", "yanked": false}], "0.3.2": [{"comment_text": "", "digests": {"md5": "5674c9bf3f1e5733ed04937eaaf0107b", "sha256": "91e3c597c72fe3608add1225926f2982e25a0e5503243400d717d1a3e483a69d"}, "downloads": -1, "filename": "refgenieserver-0.3.2.tar.gz", "has_sig": false, "md5_digest": "5674c9bf3f1e5733ed04937eaaf0107b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10024, "upload_time": "2019-10-23T16:36:11", "upload_time_iso_8601": "2019-10-23T16:36:11.249830Z", "url": "https://files.pythonhosted.org/packages/c3/3e/c013539317e35d22a5201129ddb21df0394e45cf079fdf5a017108fe73c0/refgenieserver-0.3.2.tar.gz", "yanked": false}], "0.3.3": [{"comment_text": "", "digests": {"md5": "937b43ef36b67c8dc6bde3fd45ae0c09", "sha256": "4e0ae4e43dec99f244dca6f7a2713a151837b143056d636c12761bf771e91143"}, "downloads": -1, "filename": "refgenieserver-0.3.3.tar.gz", "has_sig": false, "md5_digest": "937b43ef36b67c8dc6bde3fd45ae0c09", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 29057, "upload_time": "2019-10-24T15:46:13", "upload_time_iso_8601": "2019-10-24T15:46:13.090611Z", "url": "https://files.pythonhosted.org/packages/4d/f7/1792f4f491ec1e83edaf517592c37d3d58798ca20113a558f5afdd01d0d1/refgenieserver-0.3.3.tar.gz", "yanked": false}], "0.3.4": [{"comment_text": "", "digests": {"md5": "80eaccf0ac2c0001566ad7222a21d1f9", "sha256": "fe0d7a11bbcfc6d7dee51e97486e6ef5502d118e303e4f7412e53341ffdffdc9"}, "downloads": -1, "filename": "refgenieserver-0.3.4.tar.gz", "has_sig": false, "md5_digest": "80eaccf0ac2c0001566ad7222a21d1f9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 30073, "upload_time": "2019-11-06T18:42:59", "upload_time_iso_8601": "2019-11-06T18:42:59.015863Z", "url": "https://files.pythonhosted.org/packages/19/78/eb77dac3da942d10feb1f2433f71b85da27b9a58ec6a416c29a44839bf12/refgenieserver-0.3.4.tar.gz", "yanked": false}], "0.4.0": [{"comment_text": "", "digests": {"md5": "bd3737b3a83a1c1138de3a3f841b12de", "sha256": "9bcf9731babfc187da437808a4d39ca358b76fd0b515a97ec67c888a37bfb568"}, "downloads": -1, "filename": "refgenieserver-0.4.0.tar.gz", "has_sig": false, "md5_digest": "bd3737b3a83a1c1138de3a3f841b12de", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31064, "upload_time": "2019-12-06T20:00:25", "upload_time_iso_8601": "2019-12-06T20:00:25.806740Z", "url": "https://files.pythonhosted.org/packages/20/bb/a6e2d7ea88e0d885a9451c437ebada09acb2e45eba02fe7819471f81d22f/refgenieserver-0.4.0.tar.gz", "yanked": false}], "0.4.1": [{"comment_text": "", "digests": {"md5": "45189279c5ee68dfe34db08a282ea10d", "sha256": "eade6d6d3190b44bc997dca8ffa18bf56a8d23fa124f10af3cd7f9297463bbe9"}, "downloads": -1, "filename": "refgenieserver-0.4.1.tar.gz", "has_sig": false, "md5_digest": "45189279c5ee68dfe34db08a282ea10d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31303, "upload_time": "2019-12-13T21:05:40", "upload_time_iso_8601": "2019-12-13T21:05:40.349260Z", "url": "https://files.pythonhosted.org/packages/3d/0a/b596e307d57f6c71289bf0793d88cd8c776748e556eb1822519321e734f4/refgenieserver-0.4.1.tar.gz", "yanked": false}], "0.4.2": [{"comment_text": "", "digests": {"md5": "6b31b6123fc4b16b959e6b28fe42afea", "sha256": "e1bda93ca482b9d20c04c2b9015145c99c13f7f7fee053ce91122c00f5bd526b"}, "downloads": -1, "filename": "refgenieserver-0.4.2.tar.gz", "has_sig": false, "md5_digest": "6b31b6123fc4b16b959e6b28fe42afea", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31316, "upload_time": "2020-01-08T12:56:27", "upload_time_iso_8601": "2020-01-08T12:56:27.192066Z", "url": "https://files.pythonhosted.org/packages/57/10/d8d245ea36c7bb6777f343b4ac0af96c1a376c5125a7819c89c8bfe22b6d/refgenieserver-0.4.2.tar.gz", "yanked": false}], "0.4.3": [{"comment_text": "", "digests": {"md5": "9e967b7f200d069221dcf2a5dec50180", "sha256": "0cf9f5ef2155dbb1114f20417f8471128bc74a1f57b4b4d5a58ba5665e206a1e"}, "downloads": -1, "filename": "refgenieserver-0.4.3.tar.gz", "has_sig": false, "md5_digest": "9e967b7f200d069221dcf2a5dec50180", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 40846, "upload_time": "2020-01-16T20:59:23", "upload_time_iso_8601": "2020-01-16T20:59:23.936456Z", "url": "https://files.pythonhosted.org/packages/c9/13/b176648a656b44fe15fee49b629ff855538be400c0d7bcc5d82375d9d22d/refgenieserver-0.4.3.tar.gz", "yanked": false}], "0.4.4": [{"comment_text": "", "digests": {"md5": "5e7ec0fe586c1a4cb7c1b2e6048424f2", "sha256": "34a9ed17e87fbea03c19a4087198b18041d0ed965693116ebbb54eca28a59e43"}, "downloads": -1, "filename": "refgenieserver-0.4.4.tar.gz", "has_sig": false, "md5_digest": "5e7ec0fe586c1a4cb7c1b2e6048424f2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 41007, "upload_time": "2020-03-17T21:20:50", "upload_time_iso_8601": "2020-03-17T21:20:50.980595Z", "url": "https://files.pythonhosted.org/packages/db/34/15b0969cee9e16d568fe0e310ed64075f8eb7e8829e15e9be7a4fce154fd/refgenieserver-0.4.4.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "5e7ec0fe586c1a4cb7c1b2e6048424f2", "sha256": "34a9ed17e87fbea03c19a4087198b18041d0ed965693116ebbb54eca28a59e43"}, "downloads": -1, "filename": "refgenieserver-0.4.4.tar.gz", "has_sig": false, "md5_digest": "5e7ec0fe586c1a4cb7c1b2e6048424f2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 41007, "upload_time": "2020-03-17T21:20:50", "upload_time_iso_8601": "2020-03-17T21:20:50.980595Z", "url": "https://files.pythonhosted.org/packages/db/34/15b0969cee9e16d568fe0e310ed64075f8eb7e8829e15e9be7a4fce154fd/refgenieserver-0.4.4.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:05:25 2020"}