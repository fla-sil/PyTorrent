{"info": {"author": "Mustapha Benali, Anton Stonor", "author_email": "mustapha@headnet.dk", "bugtrack_url": null, "classifiers": ["Framework :: Buildout", "Intended Audience :: Developers", "License :: OSI Approved :: Zope Public License", "Topic :: Software Development :: Build Tools", "Topic :: Software Development :: Libraries :: Python Modules"], "description": ".. contents::\r\n\r\n- Code repository: https://svn.plone.org/svn/collective/buildout/collective.recipe.updateplone\r\n\r\nProblem\r\n===========\r\n\r\nAfter executing your buildout to deploy your Plone project you have to start\r\nthe zope instance and then go on the ZMI to create/update the plone sites,\r\ninstall/reinstall some products, run some GS profiles or sometimes run some \r\nscripts or migrate to new Plone version. This is boring!\r\n\r\n\r\nSolution\r\n========\r\n\r\ncollective.recipe.updateplone is a buildout recipe that you can use to create\r\nor update plone sites. It automatizes the following tasks:\r\n\r\n * Backup database\r\n * pack database\r\n * create plone sites if it do not exist\r\n * install or reinstall products with the quickinstaller\r\n * uninstall products with the quickinstaller\r\n * run GS profiles\r\n * run Plone migration (portal_migration.upgrade)\r\n\r\n \r\nDetailed Documentation\r\n**********************\r\n\r\n\r\nSupported options\r\n=================\r\n\r\nThe recipe supports the following options:\r\n\r\nplone-site\r\n    A list of plone site to update or to create if they do not exist.\r\n    Each item of the list consist of the zope instance name that contains \r\n    (will contain) the plone site, a dot and the name of the plone site. \r\n    ex: ``instance1.site1``\r\n\r\nmigrate-plone\r\n    If true, the recipe will upgrade your plone site by running \r\n    portal_migration.upgrade(). This is only useful if you are migrating to\r\n    a new version of plone. This option defaults to false.\r\n\r\nuninstall\r\n    A list of packages/products to uninstall with the quickinstaller if they\r\n    are already installed\r\n\r\ninstall\r\n    A list of packages/products to install with the quickinstaller or to\r\n    reinstall if they are already installed.\r\n\r\nrun-script\r\n    A list of scripts to call/run. Each item of the list consist of a path to\r\n    the script to run. The path has to start with ``portal/``. \r\n    ex: portal/migrate_all\r\n\r\nrun-profile\r\n    A list of GS profile Ids to be run. Each id has to be given as it accepted\r\n    by setup tool. ie: profile-ProductName:default\r\n\r\nbackup-db\r\n    If true, the recipe will backup Data.fs before processing. Defaults to false.\r\n\r\npack-db\r\n    If true, the recipe will pack Data.fs before processing. Defaults to false\r\n\r\nadmin-name\r\n    The name of the zope instance admin. The same as defined in the ``user``\r\n    option of your zope instance. Defaults to 'admin'\r\n\r\nrun-once\r\n    If true the recipe will only run once. If you run the buildout many times\r\n    the recipe will only run the first time. It does this by writing a file to\r\n    the var directory. If you want to run the recipe again you have to delete\r\n    the file from the var directory or set this option to false. The file name\r\n    is the same as the section name with cfg extension. This option Defaults \r\n    to True.\r\n\r\nExample usage\r\n=============\r\n\r\nWe'll start by creating a buildout that uses the recipe. Let's create\r\na freash zope instance and create 2 plone sites inside it. We will also \r\ninstall RichDocument and NuPlone into these sites::\r\n\r\n    >>> write(sample_buildout, 'buildout.cfg', \"\"\"\r\n    ... [buildout]\r\n    ... parts = \r\n    ...     zope2\r\n    ...     instance1\r\n    ...     plone\r\n    ...     update-plone\r\n    ... index = http://pypi.python.org/simple\r\n    ... find-links =\r\n    ...     http://download.zope.org/distribution/\r\n    ...     http://effbot.org/downloads\r\n    ... eggs =\r\n    ...     elementtree\r\n    ...     PILwoTK\r\n    ... \r\n    ... [zope2]\r\n    ... recipe = plone.recipe.zope2install \r\n    ... url = ${plone:zope2-url}\r\n    ... \r\n    ... [plone]\r\n    ... recipe = plone.recipe.plone\r\n    ... \r\n    ... [instance1]\r\n    ... recipe = plone.recipe.zope2instance\r\n    ... zope2-location = ${zope2:location}\r\n    ... user = admin:admin\r\n    ... deprecation-warnings = false\r\n    ... eggs = \r\n    ...     ${buildout:eggs}\r\n    ...     ${plone:eggs}\r\n    ...     Products.RichDocument\r\n    ... zcml =\r\n    ...     Products.RichDocument\r\n    ... products =\r\n    ...     ${plone:products} \r\n    ... \r\n    ... [update-plone]\r\n    ... recipe = collective.recipe.updateplone\r\n    ... backup-db = true\r\n    ... pack-db = true\r\n    ... plone-site = \r\n    ...     instance1.site1\r\n    ...     instance1.site2\r\n    ... install =\r\n    ...     Marshall\r\n    ... uninstall =\r\n    ... run-profile =\r\n    ...     profile-Products.RichDocument:default\r\n    ...     profile-Products.NuPlone:nuplone\r\n    ... run-script =\r\n    ... \"\"\")\r\n\r\nRunning the buildout gives us::\r\n\r\n    >>> print system(buildout) # doctest:+ELLIPSIS\r\n    Getting distribution for 'plone.recipe.plone'.\r\n    ...\r\n    Installing update-plone.\r\n    *** collective.recipe.updateplone: Starting to pack Database...\r\n    *** collective.recipe.updateplone: Database packed...\r\n    *** collective.recipe.updateplone: Adding plone site: site1\r\n    *** collective.recipe.updateplone: Added plone site: site1\r\n    *** collective.recipe.updateplone: Adding plone site: site2\r\n    *** collective.recipe.updateplone: Added plone site: site2\r\n    *** collective.recipe.updateplone: site1->Nothing to uninstall\r\n    *** collective.recipe.updateplone: site1->Installing: ['Marshall']\r\n    *** collective.recipe.updateplone: site1->Installed: ['Marshall']\r\n    *** collective.recipe.updateplone: site1->Running profile profile-Products.RichDocument:default\r\n    *** collective.recipe.updateplone: site1->Ran profile profile-Products.RichDocument:default\r\n    *** collective.recipe.updateplone: site1->Running profile profile-Products.NuPlone:nuplone\r\n    *** collective.recipe.updateplone: site1->Ran profile profile-Products.NuPlone:nuplone\r\n    *** collective.recipe.updateplone: site2->Nothing to uninstall\r\n    *** collective.recipe.updateplone: site2->Installing: ['Marshall']\r\n    *** collective.recipe.updateplone: site2->Installed: ['Marshall']\r\n    *** collective.recipe.updateplone: site2->Running profile profile-Products.RichDocument:default\r\n    *** collective.recipe.updateplone: site2->Ran profile profile-Products.RichDocument:default\r\n    *** collective.recipe.updateplone: site2->Running profile profile-Products.NuPlone:nuplone\r\n    *** collective.recipe.updateplone: site2->Ran profile profile-Products.NuPlone:nuplone\r\n    ...\r\n    <BLANKLINE>\r\n\r\n\r\n\r\n\r\n\r\nContributors\r\n************\r\n\r\n- Anton Stonor, Author\r\n- Mustapha Benali, Author\r\n- Danilo G. Botelho, Contributor\r\n- Sidnei da Silva, Contributor\r\n\r\nChange history\r\n**************\r\n\r\n0.3 (2009-02-07)\r\n================\r\n\r\n - Fixed recipe to correctly work on paths containing spaces on Windows. [sidnei]\r\n - Fixed recipe to locate the ZEO Service script correctly on Windows. [sidnei]\r\n - Use newer API for running GenericSetup profiles, if it's available. [sidnei]\r\n\r\n0.2 (2009-02-01)\r\n================\r\n\r\n - Fixed recipe to correctly run instance executable on Windows\r\n   [danilogbotelho]\r\n\r\n\r\n0.1 (2008-07-22)\r\n================\r\n\r\n - Created recipe with ZopeSkel [Mustapha Benali].\r\n - Fixed recipe to correctly run instance executable on Windows [Danilo G. Botelho].\r\n\r\nDownload\r\n********", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://pypi.python.org/pypi/collective.recipe.updateplone", "keywords": "buildout recipe update plone", "license": "ZPL", "maintainer": "", "maintainer_email": "", "name": "collective.recipe.updateplone", "package_url": "https://pypi.org/project/collective.recipe.updateplone/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/collective.recipe.updateplone/", "project_urls": {"Download": "UNKNOWN", "Homepage": "http://pypi.python.org/pypi/collective.recipe.updateplone"}, "release_url": "https://pypi.org/project/collective.recipe.updateplone/0.3/", "requires_dist": null, "requires_python": null, "summary": "A buildout recipe to update plone sites", "version": "0.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"contents\">\n<p>Contents</p>\n<ul>\n<li><a href=\"#problem\" id=\"id4\" rel=\"nofollow\">Problem</a></li>\n<li><a href=\"#solution\" id=\"id5\" rel=\"nofollow\">Solution</a><ul>\n<li><a href=\"#detailed-documentation\" id=\"id6\" rel=\"nofollow\">Detailed Documentation</a></li>\n</ul>\n</li>\n<li><a href=\"#supported-options\" id=\"id7\" rel=\"nofollow\">Supported options</a></li>\n<li><a href=\"#example-usage\" id=\"id8\" rel=\"nofollow\">Example usage</a><ul>\n<li><a href=\"#contributors\" id=\"id9\" rel=\"nofollow\">Contributors</a></li>\n<li><a href=\"#change-history\" id=\"id10\" rel=\"nofollow\">Change history</a></li>\n</ul>\n</li>\n<li><a href=\"#id1\" id=\"id11\" rel=\"nofollow\">0.3 (2009-02-07)</a></li>\n<li><a href=\"#id2\" id=\"id12\" rel=\"nofollow\">0.2 (2009-02-01)</a></li>\n<li><a href=\"#id3\" id=\"id13\" rel=\"nofollow\">0.1 (2008-07-22)</a><ul>\n<li><a href=\"#download\" id=\"id14\" rel=\"nofollow\">Download</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<ul>\n<li>Code repository: <a href=\"https://svn.plone.org/svn/collective/buildout/collective.recipe.updateplone\" rel=\"nofollow\">https://svn.plone.org/svn/collective/buildout/collective.recipe.updateplone</a></li>\n</ul>\n<div id=\"problem\">\n<h2><a href=\"#id4\" rel=\"nofollow\">Problem</a></h2>\n<p>After executing your buildout to deploy your Plone project you have to start\nthe zope instance and then go on the ZMI to create/update the plone sites,\ninstall/reinstall some products, run some GS profiles or sometimes run some\nscripts or migrate to new Plone version. This is boring!</p>\n</div>\n<div id=\"solution\">\n<h2><a href=\"#id5\" rel=\"nofollow\">Solution</a></h2>\n<p>collective.recipe.updateplone is a buildout recipe that you can use to create\nor update plone sites. It automatizes the following tasks:</p>\n<blockquote>\n<ul>\n<li>Backup database</li>\n<li>pack database</li>\n<li>create plone sites if it do not exist</li>\n<li>install or reinstall products with the quickinstaller</li>\n<li>uninstall products with the quickinstaller</li>\n<li>run GS profiles</li>\n<li>run Plone migration (portal_migration.upgrade)</li>\n</ul>\n</blockquote>\n<div id=\"detailed-documentation\">\n<h3><a href=\"#id6\" rel=\"nofollow\">Detailed Documentation</a></h3>\n</div>\n</div>\n<div id=\"supported-options\">\n<h2><a href=\"#id7\" rel=\"nofollow\">Supported options</a></h2>\n<p>The recipe supports the following options:</p>\n<dl>\n<dt>plone-site</dt>\n<dd>A list of plone site to update or to create if they do not exist.\nEach item of the list consist of the zope instance name that contains\n(will contain) the plone site, a dot and the name of the plone site.\nex: <tt>instance1.site1</tt></dd>\n<dt>migrate-plone</dt>\n<dd>If true, the recipe will upgrade your plone site by running\nportal_migration.upgrade(). This is only useful if you are migrating to\na new version of plone. This option defaults to false.</dd>\n<dt>uninstall</dt>\n<dd>A list of packages/products to uninstall with the quickinstaller if they\nare already installed</dd>\n<dt>install</dt>\n<dd>A list of packages/products to install with the quickinstaller or to\nreinstall if they are already installed.</dd>\n<dt>run-script</dt>\n<dd>A list of scripts to call/run. Each item of the list consist of a path to\nthe script to run. The path has to start with <tt>portal/</tt>.\nex: portal/migrate_all</dd>\n<dt>run-profile</dt>\n<dd>A list of GS profile Ids to be run. Each id has to be given as it accepted\nby setup tool. ie: profile-ProductName:default</dd>\n<dt>backup-db</dt>\n<dd>If true, the recipe will backup Data.fs before processing. Defaults to false.</dd>\n<dt>pack-db</dt>\n<dd>If true, the recipe will pack Data.fs before processing. Defaults to false</dd>\n<dt>admin-name</dt>\n<dd>The name of the zope instance admin. The same as defined in the <tt>user</tt>\noption of your zope instance. Defaults to \u2018admin\u2019</dd>\n<dt>run-once</dt>\n<dd>If true the recipe will only run once. If you run the buildout many times\nthe recipe will only run the first time. It does this by writing a file to\nthe var directory. If you want to run the recipe again you have to delete\nthe file from the var directory or set this option to false. The file name\nis the same as the section name with cfg extension. This option Defaults\nto True.</dd>\n</dl>\n</div>\n<div id=\"example-usage\">\n<h2><a href=\"#id8\" rel=\"nofollow\">Example usage</a></h2>\n<p>We\u2019ll start by creating a buildout that uses the recipe. Let\u2019s create\na freash zope instance and create 2 plone sites inside it. We will also\ninstall RichDocument and NuPlone into these sites:</p>\n<pre>&gt;&gt;&gt; write(sample_buildout, 'buildout.cfg', \"\"\"\n... [buildout]\n... parts =\n...     zope2\n...     instance1\n...     plone\n...     update-plone\n... index = http://pypi.python.org/simple\n... find-links =\n...     http://download.zope.org/distribution/\n...     http://effbot.org/downloads\n... eggs =\n...     elementtree\n...     PILwoTK\n...\n... [zope2]\n... recipe = plone.recipe.zope2install\n... url = ${plone:zope2-url}\n...\n... [plone]\n... recipe = plone.recipe.plone\n...\n... [instance1]\n... recipe = plone.recipe.zope2instance\n... zope2-location = ${zope2:location}\n... user = admin:admin\n... deprecation-warnings = false\n... eggs =\n...     ${buildout:eggs}\n...     ${plone:eggs}\n...     Products.RichDocument\n... zcml =\n...     Products.RichDocument\n... products =\n...     ${plone:products}\n...\n... [update-plone]\n... recipe = collective.recipe.updateplone\n... backup-db = true\n... pack-db = true\n... plone-site =\n...     instance1.site1\n...     instance1.site2\n... install =\n...     Marshall\n... uninstall =\n... run-profile =\n...     profile-Products.RichDocument:default\n...     profile-Products.NuPlone:nuplone\n... run-script =\n... \"\"\")\n</pre>\n<p>Running the buildout gives us:</p>\n<pre>&gt;&gt;&gt; print system(buildout) # doctest:+ELLIPSIS\nGetting distribution for 'plone.recipe.plone'.\n...\nInstalling update-plone.\n*** collective.recipe.updateplone: Starting to pack Database...\n*** collective.recipe.updateplone: Database packed...\n*** collective.recipe.updateplone: Adding plone site: site1\n*** collective.recipe.updateplone: Added plone site: site1\n*** collective.recipe.updateplone: Adding plone site: site2\n*** collective.recipe.updateplone: Added plone site: site2\n*** collective.recipe.updateplone: site1-&gt;Nothing to uninstall\n*** collective.recipe.updateplone: site1-&gt;Installing: ['Marshall']\n*** collective.recipe.updateplone: site1-&gt;Installed: ['Marshall']\n*** collective.recipe.updateplone: site1-&gt;Running profile profile-Products.RichDocument:default\n*** collective.recipe.updateplone: site1-&gt;Ran profile profile-Products.RichDocument:default\n*** collective.recipe.updateplone: site1-&gt;Running profile profile-Products.NuPlone:nuplone\n*** collective.recipe.updateplone: site1-&gt;Ran profile profile-Products.NuPlone:nuplone\n*** collective.recipe.updateplone: site2-&gt;Nothing to uninstall\n*** collective.recipe.updateplone: site2-&gt;Installing: ['Marshall']\n*** collective.recipe.updateplone: site2-&gt;Installed: ['Marshall']\n*** collective.recipe.updateplone: site2-&gt;Running profile profile-Products.RichDocument:default\n*** collective.recipe.updateplone: site2-&gt;Ran profile profile-Products.RichDocument:default\n*** collective.recipe.updateplone: site2-&gt;Running profile profile-Products.NuPlone:nuplone\n*** collective.recipe.updateplone: site2-&gt;Ran profile profile-Products.NuPlone:nuplone\n...\n&lt;BLANKLINE&gt;\n</pre>\n<div id=\"contributors\">\n<h3><a href=\"#id9\" rel=\"nofollow\">Contributors</a></h3>\n<ul>\n<li>Anton Stonor, Author</li>\n<li>Mustapha Benali, Author</li>\n<li>Danilo G. Botelho, Contributor</li>\n<li>Sidnei da Silva, Contributor</li>\n</ul>\n</div>\n<div id=\"change-history\">\n<h3><a href=\"#id10\" rel=\"nofollow\">Change history</a></h3>\n</div>\n</div>\n<div id=\"id1\">\n<h2><a href=\"#id11\" rel=\"nofollow\">0.3 (2009-02-07)</a></h2>\n<blockquote>\n<ul>\n<li>Fixed recipe to correctly work on paths containing spaces on Windows. [sidnei]</li>\n<li>Fixed recipe to locate the ZEO Service script correctly on Windows. [sidnei]</li>\n<li>Use newer API for running GenericSetup profiles, if it\u2019s available. [sidnei]</li>\n</ul>\n</blockquote>\n</div>\n<div id=\"id2\">\n<h2><a href=\"#id12\" rel=\"nofollow\">0.2 (2009-02-01)</a></h2>\n<blockquote>\n<ul>\n<li>Fixed recipe to correctly run instance executable on Windows\n[danilogbotelho]</li>\n</ul>\n</blockquote>\n</div>\n<div id=\"id3\">\n<h2><a href=\"#id13\" rel=\"nofollow\">0.1 (2008-07-22)</a></h2>\n<blockquote>\n<ul>\n<li>Created recipe with ZopeSkel [Mustapha Benali].</li>\n<li>Fixed recipe to correctly run instance executable on Windows [Danilo G. Botelho].</li>\n</ul>\n</blockquote>\n<div id=\"download\">\n<h3><a href=\"#id14\" rel=\"nofollow\">Download</a></h3>\n</div>\n</div>\n\n          </div>"}, "last_serial": 744802, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "04624645b22f9bf5d4174d883a6b667f", "sha256": "d80149aad7d220beaa2d09a7b9203dfae8b750802c613ad22911339c1f945d84"}, "downloads": -1, "filename": "collective.recipe.updateplone-0.1.tar.gz", "has_sig": false, "md5_digest": "04624645b22f9bf5d4174d883a6b667f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9162, "upload_time": "2008-10-02T18:05:04", "upload_time_iso_8601": "2008-10-02T18:05:04Z", "url": "https://files.pythonhosted.org/packages/13/75/596f611e8df8252a8a86192fa202d7404ef7be3038f5243d687356e0b63e/collective.recipe.updateplone-0.1.tar.gz", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "3473fd04eb83f0919896dc2aa2676f9e", "sha256": "dee050680aca2217361223f92d5f6e37100984952c99e8c18f80ef60b178aa25"}, "downloads": -1, "filename": "collective.recipe.updateplone-0.2.tar.gz", "has_sig": true, "md5_digest": "3473fd04eb83f0919896dc2aa2676f9e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10401, "upload_time": "2009-02-01T11:28:31", "upload_time_iso_8601": "2009-02-01T11:28:31Z", "url": "https://files.pythonhosted.org/packages/98/86/ccd2e010b5ce2dcbde0ac666fae601f77d3824474b1fa39684ffea652f57/collective.recipe.updateplone-0.2.tar.gz", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "c203e7a616a411010c99272ae5d95061", "sha256": "d08d1aaed675d9826d7fb4bf5f5c12f2ad1d794df2772eb0711d77bd23aeced7"}, "downloads": -1, "filename": "collective.recipe.updateplone-0.3.tar.gz", "has_sig": true, "md5_digest": "c203e7a616a411010c99272ae5d95061", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11004, "upload_time": "2009-02-07T16:10:27", "upload_time_iso_8601": "2009-02-07T16:10:27Z", "url": "https://files.pythonhosted.org/packages/9f/c0/e5182633e27a8e3a8e86c38a31139ce44c1c1271a417585d73621074d2c6/collective.recipe.updateplone-0.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "c203e7a616a411010c99272ae5d95061", "sha256": "d08d1aaed675d9826d7fb4bf5f5c12f2ad1d794df2772eb0711d77bd23aeced7"}, "downloads": -1, "filename": "collective.recipe.updateplone-0.3.tar.gz", "has_sig": true, "md5_digest": "c203e7a616a411010c99272ae5d95061", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11004, "upload_time": "2009-02-07T16:10:27", "upload_time_iso_8601": "2009-02-07T16:10:27Z", "url": "https://files.pythonhosted.org/packages/9f/c0/e5182633e27a8e3a8e86c38a31139ce44c1c1271a417585d73621074d2c6/collective.recipe.updateplone-0.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:44:54 2020"}