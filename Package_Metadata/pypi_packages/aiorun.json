{"info": {"author": "Caleb Hattingh", "author_email": "caleb.hattingh@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: Apache Software License", "Natural Language :: English", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": ".. image:: https://github.com/cjrh/aiorun/workflows/Python%20application/badge.svg\n    :target: https://github.com/cjrh/aiorun/actions\n\n.. image:: https://coveralls.io/repos/github/cjrh/aiorun/badge.svg?branch=master\n    :target: https://coveralls.io/github/cjrh/aiorun?branch=master\n\n.. image:: https://img.shields.io/pypi/pyversions/aiorun.svg\n    :target: https://pypi.python.org/pypi/aiorun\n\n.. image:: https://img.shields.io/github/tag/cjrh/aiorun.svg\n    :target: https://img.shields.io/github/tag/cjrh/aiorun.svg\n\n.. image:: https://img.shields.io/badge/install-pip%20install%20aiorun-ff69b4.svg\n    :target: https://img.shields.io/badge/install-pip%20install%20aiorun-ff69b4.svg\n\n.. image:: https://img.shields.io/pypi/v/aiorun.svg\n    :target: https://pypi.org/project/aiorun/\n\n.. image:: https://img.shields.io/badge/calver-YYYY.MM.MINOR-22bfda.svg\n    :alt: This project uses calendar-based versioning scheme\n    :target: http://calver.org/\n\n.. image:: https://pepy.tech/badge/aiorun\n    :alt: Downloads\n    :target: https://pepy.tech/project/aiorun\n\n.. image:: https://img.shields.io/badge/code%20style-black-000000.svg\n    :alt: This project uses the \"black\" style formatter for Python code\n    :target: https://github.com/python/black\n\n\n.. contents:: Table of Contents\n\n\ud83c\udfc3 aiorun\n======================\n\nHere's the big idea (how you use it):\n\n.. code-block:: python\n\n   import asyncio\n   from aiorun import run\n\n   async def main():\n       # Put your application code here\n       await asyncio.sleep(1.0)\n\n   if __name__ == '__main__':\n       run(main())\n\nThis package provides a ``run()`` function as the starting point\nof your ``asyncio``-based application. The ``run()`` function will\nrun forever. If you want to shut down when ``main()`` completes, just\ncall ``loop.stop()`` inside it: that will initiate shutdown.\n\n.. warning::\n\n    Note that `aiorun.run(coro)` will run **forever**, unlike the standard\n    library's ``asyncio.run()`` helper. You can call `aiorun.run()`\n    without a coroutine parameter, and it will still run forever.\n\n    This is surprising to many people, because they sometimes expect that\n    unhandled exceptions should abort the program, with an exception and\n    a traceback. If you want this behaviour, please see the section on\n    *error handling* further down.\n\n\n\ud83e\udd14 Why?\n----------------\n\nThe ``run()`` function will handle **everything** that normally needs\nto be done during the shutdown sequence of the application.  All you\nneed to do is write your coroutines and run them.\n\nSo what the heck does ``run()`` do exactly?? It does these standard,\nidiomatic actions for asyncio apps:\n\n- creates a ``Task`` for the given coroutine (schedules it on the\n  event loop),\n- calls ``loop.run_forever()``,\n- adds default (and smart) signal handlers for both ``SIGINT``\n  and ``SIGTERM`` that will stop the loop;\n- and *when* the loop stops (either by signal or called directly), then it will...\n- ...gather all outstanding tasks,\n- cancel them using ``task.cancel()``,\n- resume running the loop until all those tasks are done,\n- wait for the *executor* to complete shutdown, and\n- finally close the loop.\n\nAll of this stuff is boilerplate that you will never have to write\nagain. So, if you use ``aiorun`` this is what **you** need to remember:\n\n- Spawn all your work from a single, starting coroutine\n- When a shutdown signal is received, **all** currently-pending tasks\n  will have ``CancelledError`` raised internally. It's up to you whether\n  you want to handle this inside each coroutine with\n  a ``try/except`` or not.\n- If you want to protect coros from cancellation, see `shutdown_waits_for()`\n  further down.\n- Try to have executor jobs be shortish, since the shutdown process will wait\n  for them to finish. If you need a long-running thread or process tasks, use\n  a dedicated thread/subprocess and set ``daemon=True`` instead.\n\nThere's not much else to know for general use. `aiorun` has a few special\ntools that you might need in unusual circumstances. These are discussed\nnext.\n\n\ud83d\udda5\ufe0f What about TCP server startup?\n-----------------------------------\n\nYou will see in many examples online that for servers, startup happens in\nseveral ``run_until_complete()`` phases before the primary ``run_forever()``\nwhich is the \"main\" running part of the program. How do we handle that with\n*aiorun*?\n\nLet's recreate the `echo client & server <https://docs.python.org/3/library/asyncio-stream.html#tcp-echo-client-using-streams>`_\nexamples from the Standard Library documentation:\n\n**Client:**\n\n.. code-block:: python\n\n    # echo_client.py\n    import asyncio\n    from aiorun import run\n\n    async def tcp_echo_client(message):\n        # Same as original!\n        reader, writer = await asyncio.open_connection('127.0.0.1', 8888)\n        print('Send: %r' % message)\n        writer.write(message.encode())\n        data = await reader.read(100)\n        print('Received: %r' % data.decode())\n        print('Close the socket')\n        writer.close()\n        asyncio.get_event_loop().stop()  # Exit after one msg like original\n\n    message = 'Hello World!'\n    run(tcp_echo_client(message))\n\n**Server:**\n\n.. code-block:: python\n\n    import asyncio\n    from aiorun import run\n\n    async def handle_echo(reader, writer):\n        # Same as original!\n        data = await reader.read(100)\n        message = data.decode()\n        addr = writer.get_extra_info('peername')\n        print(\"Received %r from %r\" % (message, addr))\n        print(\"Send: %r\" % message)\n        writer.write(data)\n        await writer.drain()\n        print(\"Close the client socket\")\n        writer.close()\n\n    async def main():\n        server = await asyncio.start_server(handle_echo, '127.0.0.1', 8888)\n        print('Serving on {}'.format(server.sockets[0].getsockname()))\n        async with server:\n            await server.serve_forever()\n\n    run(main())\n\nIt works the same as the original examples, except you see this\nwhen you hit ``CTRL-C`` on the server instance:\n\n.. code-block:: bash\n\n    $ python echo_server.py\n    Running forever.\n    Serving on ('127.0.0.1', 8888)\n    Received 'Hello World!' from ('127.0.0.1', 57198)\n    Send: 'Hello World!'\n    Close the client socket\n    ^CStopping the loop\n    Entering shutdown phase.\n    Cancelling pending tasks.\n    Cancelling task:  <Task pending coro=[...snip...]>\n    Running pending tasks till complete\n    Waiting for executor shutdown.\n    Leaving. Bye!\n\nTask gathering, cancellation, and executor shutdown all happen\nautomatically.\n\n\ud83d\udc1b Error Handling\n------------------\n\nUnlike the standard library's ``asyncio.run()`` method, ``aiorun.run``\nwill run forever, and does not stop on unhandled exceptions. This is partly\nbecause we predate the standard library method, during the time in which\n``run_forever()`` was actually the recommended API for servers, and partly\nbecause it can *make sense* for long-lived servers to be resilient to\nunhandled exceptions.  For example, if 99% of your API works fine, but the\none new endpoint you just added has a bug: do you really want that one new\nendpoint to crash-loop your deployed service?\n\nNevertheless, not all usages of ``aiorun`` are long-lived servers, so some\nusers would prefer that ``aiorun.run()`` crash on an unhandled exception,\njust like any normal Python program.  For this, we have an extra parameter\nthat enables it:\n\n.. code-block:: python\n\n   # stop_demo.py\n   from aiorun import run\n\n   async def main():\n       raise Exception('ouch')\n\n   if __name__ == '__main__':\n       run(main(), stop_on_unhandled_errors=True)\n\nThis produces the following output:\n\n.. code-block::\n\n    $ python stop_demo.py\n    Unhandled exception; stopping loop.\n    Traceback (most recent call last):\n      File \"/opt/project/examples/stop_unhandled.py\", line 9, in <module>\n        run(main(), stop_on_unhandled_errors=True)\n      File \"/opt/project/aiorun.py\", line 294, in run\n        raise pending_exception_to_raise\n      File \"/opt/project/aiorun.py\", line 206, in new_coro\n        await coro\n      File \"/opt/project/examples/stop_unhandled.py\", line 5, in main\n        raise Exception(\"ouch\")\n    Exception: ouch\n\nError handling scenarios can get very complex, and I suggest that you\ntry to keep your error handling as simple as possible. Nevertheless, sometimes\npeople have special needs that require some complexity, so let's look at a\nfew scenarios where error-handling considerations can be more challenging.\n\n``aiorun.run()`` can also be started without an initial coroutine, in which\ncase any other created tasks still run as normal; in this case exceptions\nstill abort the program if the parameter is supplied:\n\n.. code-block:: python\n\n    import asyncio\n    from aiorun import run\n\n\n    async def job():\n        raise Exception(\"ouch\")\n\n\n    if __name__ == \"__main__\":\n        loop = asyncio.new_event_loop()\n        asyncio.set_event_loop(loop)\n        loop.create_task(job())\n\n        run(loop=loop, stop_on_unhandled_errors=True)\n\nThe output is the same as the previous program. In this second example,\nwe made a our own loop instance and passed that to ``run()``. It is also possible\nto configure your exception handler on the loop, but if you do this the\n``stop_on_unhandled_errors`` parameter is no longer allowed:\n\n.. code-block:: python\n\n    import asyncio\n    from aiorun import run\n\n\n    async def job():\n        raise Exception(\"ouch\")\n\n\n    if __name__ == \"__main__\":\n        loop = asyncio.new_event_loop()\n        asyncio.set_event_loop(loop)\n        loop.create_task(job())\n        loop.set_exception_handler(lambda loop, context: \"Error\")\n\n        run(loop=loop, stop_on_unhandled_errors=True)\n\nBut this is not allowed:\n\n.. code-block::\n\n    Traceback (most recent call last):\n      File \"/opt/project/examples/stop_unhandled_illegal.py\", line 15, in <module>\n        run(loop=loop, stop_on_unhandled_errors=True)\n      File \"/opt/project/aiorun.py\", line 171, in run\n        raise Exception(\n    Exception: If you provide a loop instance, and you've configured a\n    custom exception handler on it, then the 'stop_on_unhandled_errors'\n    parameter is unavailable (all exceptions will be handled).\n    /usr/local/lib/python3.8/asyncio/base_events.py:633:\n        RuntimeWarning: coroutine 'job' was never awaited\n\nRemember that the parameter ``stop_on_unhandled_errors`` is just a convenience. If you're\ngoing to go to the trouble of making your own loop instance anyway, you can\nstop the loop yourself inside your own exception handler just fine, and\nthen you no longer need to set ``stop_on_unhandled_errors``:\n\n.. code-block:: python\n\n    # custom_stop.py\n    import asyncio\n    from aiorun import run\n\n\n    async def job():\n        raise Exception(\"ouch\")\n\n\n    async def other_job():\n        try:\n            await asyncio.sleep(10)\n        except asyncio.CancelledError:\n            print(\"other_job was cancelled!\")\n\n\n    if __name__ == \"__main__\":\n        loop = asyncio.new_event_loop()\n        asyncio.set_event_loop(loop)\n        loop.create_task(job())\n        loop.create_task(other_job())\n\n        def handler(loop, context):\n            # https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.call_exception_handler\n            print(f'Stopping loop due to error: {context[\"exception\"]} ')\n            loop.stop()\n\n        loop.set_exception_handler(handler=handler)\n\n        run(loop=loop)\n\nIn this example, we schedule two jobs on the loop. One of them raises an\nexception, and you can see in the output that the other job was still\ncancelled during shutdown as expected (which is what you expect ``aiorun``\nto do!):\n\n.. code-block::\n\n    $ python custom_stop.py\n    Stopping loop due to error: ouch\n    other_job was cancelled!\n\nNote however that in this situation the exception is being *handled* by\nyour custom exception handler, and does not bubble up out of the ``run()``\nlike you saw in earlier examples. If you want to do something with that\nexception, like reraise it or something, you need to capture it inside your\ncustom exception handler and then do something with it, like add it to a list\nthat you check after ``run()`` completes, and then reraise there or something\nsimilar.\n\n\ud83d\udca8 Do you like `uvloop <https://github.com/magicstack/uvloop>`_?\n------------------------------------------------------------------\n\n.. code-block:: python\n\n   import asyncio\n   from aiorun import run\n\n   async def main():\n       <snip>\n\n   if __name__ == '__main__':\n       run(main(), use_uvloop=True)\n\nNote that you have to ``pip install uvloop`` yourself.\n\n\ud83d\udee1\ufe0f Smart shield for shutdown\n---------------------------------\n\nIt's unusual, but sometimes you're going to want a coroutine to not get\ninterrupted by cancellation *during the shutdown sequence*. You'll look in\nthe official docs and find ``asyncio.shield()``.\n\nUnfortunately, ``shield()`` doesn't work in shutdown scenarios because\nthe protection offered by ``shield()`` only applies if the specific coroutine\n*inside which* the ``shield()`` is used, gets cancelled directly.\n\nLet me explain: if you do a conventional shutdown sequence (like ``aiorun``\nis doing internally), this is the sequence of steps:\n\n- ``tasks = all_tasks()``, followed by\n- ``[t.cancel() for t in tasks]``, and then\n- ``run_until_complete(gather(*tasks))``\n\nThe way ``shield()`` works internally is it creates a *secret, inner*\ntask\u2014which also gets included in the ``all_tasks()`` call above! Thus\nit also receives a cancellation exception just like everything else.\n\nTherefore, we have an alternative version of ``shield()`` that works better for\nus: ``shutdown_waits_for()``. If you've got a coroutine that must **not** be\ncancelled during the shutdown sequence, just wrap it in\n``shutdown_waits_for()``!\n\nHere's an example:\n\n.. code-block:: python\n\n    import asyncio\n    from aiorun import run, shutdown_waits_for\n\n    async def corofn():\n        await asyncio.sleep(60)\n        print('done!')\n\n    async def main():\n        try:\n            await shutdown_waits_for(corofn())\n        except asyncio.CancelledError\n            print('oh noes!')\n\n    run(main())\n\nIf you hit ``CTRL-C`` *before* 60 seconds has passed, you will see\n``oh noes!`` printed immediately, and then after 60 seconds (since start),\n``done!`` is printed, and thereafter the program exits.\n\nBehind the scenes, ``all_tasks()`` would have been cancelled by ``CTRL-C``,\n*except* ones wrapped in ``shutdown_waits_for()`` calls.  In this respect, it\nis loosely similar to ``asyncio.shield()``, but with special applicability\nto our shutdown scenario in ``aiorun()``.\n\nBe careful with this: the coroutine should still finish up at some point.\nThe main use case for this is short-lived tasks that you don't want to\nwrite explicit cancellation handling.\n\nOh, and you can use ``shutdown_waits_for()`` as if it were ``asyncio.shield()``\ntoo. For that use-case it works the same.  If you're using ``aiorun``, there\nis no reason to use ``shield()``.\n\n\ud83d\ude4f Windows Support\n-------------------------\n\n``aiorun`` also supports Windows! Kinda. Sorta. The root problem with Windows,\nfor a thing like ``aiorun`` is that Windows doesn't support *signal handling*\nthe way Linux or Mac OS X does. Like, at all.\n\nFor Linux, ``aiorun`` does \"the right thing\" out of the box for the\n``SIGINT`` and ``SIGTERM`` signals; i.e., it will catch them and initiate\na safe shutdown process as described earlier. However, on *Windows*, these\nsignals don't work.\n\nThere are two signals that work on Windows: the ``CTRL-C`` signal (happens\nwhen you press, unsurprisingly, ``CTRL-C``, and the ``CTRL-BREAK`` signal\nwhich happens when you...well, you get the picture.\n\nThe good news is that, for ``aiorun``, both of these will work. Yay! The bad\nnews is that for them to work, you have to run your code in a Console\nwindow. Boo!\n\nFortunately, it turns out that you can run an asyncio-based process *not*\nattached to a Console window, e.g. as a service or a subprocess, *and* have\nit also receive a signal to safely shut down in a controlled way. It turns\nout that it is possible to send a ``CTRL-BREAK`` signal to another process,\nwith no console window involved, but only as long as that process was created\nin a particular way and---here is the drop---this targetted process is a\nchild process of the one sending the signal. Yeah, I know, it's a downer.\n\nThere is an example of how to do this in the tests:\n\n.. code-block:: python3\n\n    import subprocess as sp\n\n    proc = sp.Popen(\n        ['python', 'app.py'],\n        stdout=sp.PIPE,\n        stderr=sp.STDOUT,\n        creationflags=sp.CREATE_NEW_PROCESS_GROUP\n    )\n    print(proc.pid)\n\nNotice how we print out the process id (``pid``). Then you can send that\nprocess the signal from a completely different process, once you know\nthe ``pid``:\n\n.. code-block:: python3\n\n    import os, signal\n\n    os.kill(pid, signal.CTRL_BREAK_EVENT)\n\n(Remember, ``os.kill()`` doesn't actually kill, it only sends a signal)\n\n``aiorun`` supports this use-case above, although I'll be pretty surprised\nif anyone actually uses it to manage microservices (does anyone do this?)\n\nSo to summarize: ``aiorun`` will do a controlled shutdown if either\n``CTRL-C`` or ``CTRL-BREAK`` is entered via keyboard in a Console window\nwith a running instance, or if the ``CTRL-BREAK`` signal is sent to\na *subprocess* that was created with the ``CREATE_NEW_PROCESS_GROUP``\nflag set. `Here <https://stackoverflow.com/a/35792192>`_ is a much more\ndetailed explanation of these issues.\n\nFinally, ``uvloop`` is not yet supported on Windows so that won't work\neither.\n\nAt the very least, ``aiorun`` will, well, *run* on Windows \u00af\\\\_(\u30c4)_/\u00af\n", "description_content_type": "text/x-rst", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/cjrh/aiorun", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "aiorun", "package_url": "https://pypi.org/project/aiorun/", "platform": "", "project_url": "https://pypi.org/project/aiorun/", "project_urls": {"Homepage": "https://github.com/cjrh/aiorun"}, "release_url": "https://pypi.org/project/aiorun/2020.2.1/", "requires_dist": ["typing; python_version < '3.5'", "pytest ; extra == \"dev\"", "pytest-cov ; extra == \"dev\""], "requires_python": ">=3.5", "summary": "Boilerplate for asyncio applications", "version": "2020.2.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://github.com/cjrh/aiorun/actions\" rel=\"nofollow\"><img alt=\"https://github.com/cjrh/aiorun/workflows/Python%20application/badge.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0e3c5c08433dfe8b285d4bfb3e40a355727059c0/68747470733a2f2f6769746875622e636f6d2f636a72682f61696f72756e2f776f726b666c6f77732f507974686f6e2532306170706c69636174696f6e2f62616467652e737667\"></a>\n<a href=\"https://coveralls.io/github/cjrh/aiorun?branch=master\" rel=\"nofollow\"><img alt=\"https://coveralls.io/repos/github/cjrh/aiorun/badge.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e0ebe2c964babe31c205392cc3a5cb5b0458862e/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f636a72682f61696f72756e2f62616467652e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://pypi.python.org/pypi/aiorun\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/pyversions/aiorun.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/9c23afb64e2f48e8cd914c343881d0f94fdf1a10/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f61696f72756e2e737667\"></a>\n<a href=\"https://img.shields.io/github/tag/cjrh/aiorun.svg\" rel=\"nofollow\"><img alt=\"https://img.shields.io/github/tag/cjrh/aiorun.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3229eb16a2c6581b2f41a73cc264c7c470bda802/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f7461672f636a72682f61696f72756e2e737667\"></a>\n<a href=\"https://img.shields.io/badge/install-pip%20install%20aiorun-ff69b4.svg\" rel=\"nofollow\"><img alt=\"https://img.shields.io/badge/install-pip%20install%20aiorun-ff69b4.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c03639125a4b7ae358292aa8364a510587111a53/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f696e7374616c6c2d706970253230696e7374616c6c25323061696f72756e2d6666363962342e737667\"></a>\n<a href=\"https://pypi.org/project/aiorun/\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/v/aiorun.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/334d9deffdc06b59a29f64db22c4579de8fb8b0a/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f61696f72756e2e737667\"></a>\n<a href=\"http://calver.org/\" rel=\"nofollow\"><img alt=\"This project uses calendar-based versioning scheme\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/957cdcd66ebe5225fea6bbf83a04bc66a232ab1c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f63616c7665722d595959592e4d4d2e4d494e4f522d3232626664612e737667\"></a>\n<a href=\"https://pepy.tech/project/aiorun\" rel=\"nofollow\"><img alt=\"Downloads\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fa29f9d0efd0d028e69796caec35ad0798e013ba/68747470733a2f2f706570792e746563682f62616467652f61696f72756e\"></a>\n<a href=\"https://github.com/python/black\" rel=\"nofollow\"><img alt='This project uses the \"black\" style formatter for Python code' src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fbfdc7754183ecf079bc71ddeabaf88f6cbc5c00/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667\"></a>\n<div id=\"table-of-contents\">\n<p>Table of Contents</p>\n<ul>\n<li><a href=\"#aiorun\" id=\"id1\" rel=\"nofollow\">\ud83c\udfc3 aiorun</a><ul>\n<li><a href=\"#why\" id=\"id2\" rel=\"nofollow\">\ud83e\udd14 Why?</a></li>\n<li><a href=\"#what-about-tcp-server-startup\" id=\"id3\" rel=\"nofollow\">\ud83d\udda5\ufe0f What about TCP server startup?</a></li>\n<li><a href=\"#error-handling\" id=\"id4\" rel=\"nofollow\">\ud83d\udc1b Error Handling</a></li>\n<li><a href=\"#do-you-like-uvloop\" id=\"id5\" rel=\"nofollow\">\ud83d\udca8 Do you like uvloop?</a></li>\n<li><a href=\"#smart-shield-for-shutdown\" id=\"id6\" rel=\"nofollow\">\ud83d\udee1\ufe0f Smart shield for shutdown</a></li>\n<li><a href=\"#windows-support\" id=\"id7\" rel=\"nofollow\">\ud83d\ude4f Windows Support</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<div id=\"aiorun\">\n<h2><a href=\"#id1\" rel=\"nofollow\">\ud83c\udfc3 aiorun</a></h2>\n<p>Here\u2019s the big idea (how you use it):</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiorun</span> <span class=\"kn\">import</span> <span class=\"n\">run</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"c1\"># Put your application code here</span>\n    <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">)</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n</pre>\n<p>This package provides a <tt>run()</tt> function as the starting point\nof your <tt>asyncio</tt>-based application. The <tt>run()</tt> function will\nrun forever. If you want to shut down when <tt>main()</tt> completes, just\ncall <tt>loop.stop()</tt> inside it: that will initiate shutdown.</p>\n<div>\n<p>Warning</p>\n<p>Note that <cite>aiorun.run(coro)</cite> will run <strong>forever</strong>, unlike the standard\nlibrary\u2019s <tt>asyncio.run()</tt> helper. You can call <cite>aiorun.run()</cite>\nwithout a coroutine parameter, and it will still run forever.</p>\n<p>This is surprising to many people, because they sometimes expect that\nunhandled exceptions should abort the program, with an exception and\na traceback. If you want this behaviour, please see the section on\n<em>error handling</em> further down.</p>\n</div>\n<div id=\"why\">\n<h3><a href=\"#id2\" rel=\"nofollow\">\ud83e\udd14 Why?</a></h3>\n<p>The <tt>run()</tt> function will handle <strong>everything</strong> that normally needs\nto be done during the shutdown sequence of the application.  All you\nneed to do is write your coroutines and run them.</p>\n<p>So what the heck does <tt>run()</tt> do exactly?? It does these standard,\nidiomatic actions for asyncio apps:</p>\n<ul>\n<li>creates a <tt>Task</tt> for the given coroutine (schedules it on the\nevent loop),</li>\n<li>calls <tt>loop.run_forever()</tt>,</li>\n<li>adds default (and smart) signal handlers for both <tt>SIGINT</tt>\nand <tt>SIGTERM</tt> that will stop the loop;</li>\n<li>and <em>when</em> the loop stops (either by signal or called directly), then it will\u2026</li>\n<li>\u2026gather all outstanding tasks,</li>\n<li>cancel them using <tt>task.cancel()</tt>,</li>\n<li>resume running the loop until all those tasks are done,</li>\n<li>wait for the <em>executor</em> to complete shutdown, and</li>\n<li>finally close the loop.</li>\n</ul>\n<p>All of this stuff is boilerplate that you will never have to write\nagain. So, if you use <tt>aiorun</tt> this is what <strong>you</strong> need to remember:</p>\n<ul>\n<li>Spawn all your work from a single, starting coroutine</li>\n<li>When a shutdown signal is received, <strong>all</strong> currently-pending tasks\nwill have <tt>CancelledError</tt> raised internally. It\u2019s up to you whether\nyou want to handle this inside each coroutine with\na <tt>try/except</tt> or not.</li>\n<li>If you want to protect coros from cancellation, see <cite>shutdown_waits_for()</cite>\nfurther down.</li>\n<li>Try to have executor jobs be shortish, since the shutdown process will wait\nfor them to finish. If you need a long-running thread or process tasks, use\na dedicated thread/subprocess and set <tt>daemon=True</tt> instead.</li>\n</ul>\n<p>There\u2019s not much else to know for general use. <cite>aiorun</cite> has a few special\ntools that you might need in unusual circumstances. These are discussed\nnext.</p>\n</div>\n<div id=\"what-about-tcp-server-startup\">\n<h3><a href=\"#id3\" rel=\"nofollow\">\ud83d\udda5\ufe0f What about TCP server startup?</a></h3>\n<p>You will see in many examples online that for servers, startup happens in\nseveral <tt>run_until_complete()</tt> phases before the primary <tt>run_forever()</tt>\nwhich is the \u201cmain\u201d running part of the program. How do we handle that with\n<em>aiorun</em>?</p>\n<p>Let\u2019s recreate the <a href=\"https://docs.python.org/3/library/asyncio-stream.html#tcp-echo-client-using-streams\" rel=\"nofollow\">echo client &amp; server</a>\nexamples from the Standard Library documentation:</p>\n<p><strong>Client:</strong></p>\n<pre><span class=\"c1\"># echo_client.py</span>\n<span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiorun</span> <span class=\"kn\">import</span> <span class=\"n\">run</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">tcp_echo_client</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">):</span>\n    <span class=\"c1\"># Same as original!</span>\n    <span class=\"n\">reader</span><span class=\"p\">,</span> <span class=\"n\">writer</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">open_connection</span><span class=\"p\">(</span><span class=\"s1\">'127.0.0.1'</span><span class=\"p\">,</span> <span class=\"mi\">8888</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Send: </span><span class=\"si\">%r</span><span class=\"s1\">'</span> <span class=\"o\">%</span> <span class=\"n\">message</span><span class=\"p\">)</span>\n    <span class=\"n\">writer</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"o\">.</span><span class=\"n\">encode</span><span class=\"p\">())</span>\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">reader</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Received: </span><span class=\"si\">%r</span><span class=\"s1\">'</span> <span class=\"o\">%</span> <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">())</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Close the socket'</span><span class=\"p\">)</span>\n    <span class=\"n\">writer</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n    <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">get_event_loop</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">stop</span><span class=\"p\">()</span>  <span class=\"c1\"># Exit after one msg like original</span>\n\n<span class=\"n\">message</span> <span class=\"o\">=</span> <span class=\"s1\">'Hello World!'</span>\n<span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">tcp_echo_client</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">))</span>\n</pre>\n<p><strong>Server:</strong></p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiorun</span> <span class=\"kn\">import</span> <span class=\"n\">run</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">handle_echo</span><span class=\"p\">(</span><span class=\"n\">reader</span><span class=\"p\">,</span> <span class=\"n\">writer</span><span class=\"p\">):</span>\n    <span class=\"c1\"># Same as original!</span>\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">reader</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"n\">message</span> <span class=\"o\">=</span> <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">()</span>\n    <span class=\"n\">addr</span> <span class=\"o\">=</span> <span class=\"n\">writer</span><span class=\"o\">.</span><span class=\"n\">get_extra_info</span><span class=\"p\">(</span><span class=\"s1\">'peername'</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Received </span><span class=\"si\">%r</span><span class=\"s2\"> from </span><span class=\"si\">%r</span><span class=\"s2\">\"</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">,</span> <span class=\"n\">addr</span><span class=\"p\">))</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Send: </span><span class=\"si\">%r</span><span class=\"s2\">\"</span> <span class=\"o\">%</span> <span class=\"n\">message</span><span class=\"p\">)</span>\n    <span class=\"n\">writer</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span>\n    <span class=\"k\">await</span> <span class=\"n\">writer</span><span class=\"o\">.</span><span class=\"n\">drain</span><span class=\"p\">()</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Close the client socket\"</span><span class=\"p\">)</span>\n    <span class=\"n\">writer</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"n\">server</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">start_server</span><span class=\"p\">(</span><span class=\"n\">handle_echo</span><span class=\"p\">,</span> <span class=\"s1\">'127.0.0.1'</span><span class=\"p\">,</span> <span class=\"mi\">8888</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Serving on </span><span class=\"si\">{}</span><span class=\"s1\">'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">sockets</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">getsockname</span><span class=\"p\">()))</span>\n    <span class=\"k\">async</span> <span class=\"k\">with</span> <span class=\"n\">server</span><span class=\"p\">:</span>\n        <span class=\"k\">await</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">serve_forever</span><span class=\"p\">()</span>\n\n<span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n</pre>\n<p>It works the same as the original examples, except you see this\nwhen you hit <tt><span class=\"pre\">CTRL-C</span></tt> on the server instance:</p>\n<pre>$ python echo_server.py\nRunning forever.\nServing on <span class=\"o\">(</span><span class=\"s1\">'127.0.0.1'</span>, <span class=\"m\">8888</span><span class=\"o\">)</span>\nReceived <span class=\"s1\">'Hello World!'</span> from <span class=\"o\">(</span><span class=\"s1\">'127.0.0.1'</span>, <span class=\"m\">57198</span><span class=\"o\">)</span>\nSend: <span class=\"s1\">'Hello World!'</span>\nClose the client socket\n^CStopping the loop\nEntering shutdown phase.\nCancelling pending tasks.\nCancelling task:  &lt;Task pending <span class=\"nv\">coro</span><span class=\"o\">=[</span>...snip...<span class=\"o\">]</span>&gt;\nRunning pending tasks till <span class=\"nb\">complete</span>\nWaiting <span class=\"k\">for</span> executor shutdown.\nLeaving. Bye!\n</pre>\n<p>Task gathering, cancellation, and executor shutdown all happen\nautomatically.</p>\n</div>\n<div id=\"error-handling\">\n<h3><a href=\"#id4\" rel=\"nofollow\">\ud83d\udc1b Error Handling</a></h3>\n<p>Unlike the standard library\u2019s <tt>asyncio.run()</tt> method, <tt>aiorun.run</tt>\nwill run forever, and does not stop on unhandled exceptions. This is partly\nbecause we predate the standard library method, during the time in which\n<tt>run_forever()</tt> was actually the recommended API for servers, and partly\nbecause it can <em>make sense</em> for long-lived servers to be resilient to\nunhandled exceptions.  For example, if 99% of your API works fine, but the\none new endpoint you just added has a bug: do you really want that one new\nendpoint to crash-loop your deployed service?</p>\n<p>Nevertheless, not all usages of <tt>aiorun</tt> are long-lived servers, so some\nusers would prefer that <tt>aiorun.run()</tt> crash on an unhandled exception,\njust like any normal Python program.  For this, we have an extra parameter\nthat enables it:</p>\n<pre><span class=\"c1\"># stop_demo.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiorun</span> <span class=\"kn\">import</span> <span class=\"n\">run</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"k\">raise</span> <span class=\"ne\">Exception</span><span class=\"p\">(</span><span class=\"s1\">'ouch'</span><span class=\"p\">)</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(),</span> <span class=\"n\">stop_on_unhandled_errors</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>This produces the following output:</p>\n<pre>$ python stop_demo.py\nUnhandled exception; stopping loop.\nTraceback (most recent call last):\n  File \"/opt/project/examples/stop_unhandled.py\", line 9, in &lt;module&gt;\n    run(main(), stop_on_unhandled_errors=True)\n  File \"/opt/project/aiorun.py\", line 294, in run\n    raise pending_exception_to_raise\n  File \"/opt/project/aiorun.py\", line 206, in new_coro\n    await coro\n  File \"/opt/project/examples/stop_unhandled.py\", line 5, in main\n    raise Exception(\"ouch\")\nException: ouch\n</pre>\n<p>Error handling scenarios can get very complex, and I suggest that you\ntry to keep your error handling as simple as possible. Nevertheless, sometimes\npeople have special needs that require some complexity, so let\u2019s look at a\nfew scenarios where error-handling considerations can be more challenging.</p>\n<p><tt>aiorun.run()</tt> can also be started without an initial coroutine, in which\ncase any other created tasks still run as normal; in this case exceptions\nstill abort the program if the parameter is supplied:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiorun</span> <span class=\"kn\">import</span> <span class=\"n\">run</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">job</span><span class=\"p\">():</span>\n    <span class=\"k\">raise</span> <span class=\"ne\">Exception</span><span class=\"p\">(</span><span class=\"s2\">\"ouch\"</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">new_event_loop</span><span class=\"p\">()</span>\n    <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">set_event_loop</span><span class=\"p\">(</span><span class=\"n\">loop</span><span class=\"p\">)</span>\n    <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">create_task</span><span class=\"p\">(</span><span class=\"n\">job</span><span class=\"p\">())</span>\n\n    <span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">loop</span><span class=\"o\">=</span><span class=\"n\">loop</span><span class=\"p\">,</span> <span class=\"n\">stop_on_unhandled_errors</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>The output is the same as the previous program. In this second example,\nwe made a our own loop instance and passed that to <tt>run()</tt>. It is also possible\nto configure your exception handler on the loop, but if you do this the\n<tt>stop_on_unhandled_errors</tt> parameter is no longer allowed:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiorun</span> <span class=\"kn\">import</span> <span class=\"n\">run</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">job</span><span class=\"p\">():</span>\n    <span class=\"k\">raise</span> <span class=\"ne\">Exception</span><span class=\"p\">(</span><span class=\"s2\">\"ouch\"</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">new_event_loop</span><span class=\"p\">()</span>\n    <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">set_event_loop</span><span class=\"p\">(</span><span class=\"n\">loop</span><span class=\"p\">)</span>\n    <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">create_task</span><span class=\"p\">(</span><span class=\"n\">job</span><span class=\"p\">())</span>\n    <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">set_exception_handler</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">loop</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">:</span> <span class=\"s2\">\"Error\"</span><span class=\"p\">)</span>\n\n    <span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">loop</span><span class=\"o\">=</span><span class=\"n\">loop</span><span class=\"p\">,</span> <span class=\"n\">stop_on_unhandled_errors</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>But this is not allowed:</p>\n<pre>Traceback (most recent call last):\n  File \"/opt/project/examples/stop_unhandled_illegal.py\", line 15, in &lt;module&gt;\n    run(loop=loop, stop_on_unhandled_errors=True)\n  File \"/opt/project/aiorun.py\", line 171, in run\n    raise Exception(\nException: If you provide a loop instance, and you've configured a\ncustom exception handler on it, then the 'stop_on_unhandled_errors'\nparameter is unavailable (all exceptions will be handled).\n/usr/local/lib/python3.8/asyncio/base_events.py:633:\n    RuntimeWarning: coroutine 'job' was never awaited\n</pre>\n<p>Remember that the parameter <tt>stop_on_unhandled_errors</tt> is just a convenience. If you\u2019re\ngoing to go to the trouble of making your own loop instance anyway, you can\nstop the loop yourself inside your own exception handler just fine, and\nthen you no longer need to set <tt>stop_on_unhandled_errors</tt>:</p>\n<pre><span class=\"c1\"># custom_stop.py</span>\n<span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiorun</span> <span class=\"kn\">import</span> <span class=\"n\">run</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">job</span><span class=\"p\">():</span>\n    <span class=\"k\">raise</span> <span class=\"ne\">Exception</span><span class=\"p\">(</span><span class=\"s2\">\"ouch\"</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">other_job</span><span class=\"p\">():</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">CancelledError</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"other_job was cancelled!\"</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">new_event_loop</span><span class=\"p\">()</span>\n    <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">set_event_loop</span><span class=\"p\">(</span><span class=\"n\">loop</span><span class=\"p\">)</span>\n    <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">create_task</span><span class=\"p\">(</span><span class=\"n\">job</span><span class=\"p\">())</span>\n    <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">create_task</span><span class=\"p\">(</span><span class=\"n\">other_job</span><span class=\"p\">())</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">handler</span><span class=\"p\">(</span><span class=\"n\">loop</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"c1\"># https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.call_exception_handler</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">'Stopping loop due to error: </span><span class=\"si\">{</span><span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s2\">\"exception\"</span><span class=\"p\">]</span><span class=\"si\">}</span><span class=\"s1\"> '</span><span class=\"p\">)</span>\n        <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">stop</span><span class=\"p\">()</span>\n\n    <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">set_exception_handler</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"o\">=</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n\n    <span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">loop</span><span class=\"o\">=</span><span class=\"n\">loop</span><span class=\"p\">)</span>\n</pre>\n<p>In this example, we schedule two jobs on the loop. One of them raises an\nexception, and you can see in the output that the other job was still\ncancelled during shutdown as expected (which is what you expect <tt>aiorun</tt>\nto do!):</p>\n<pre>$ python custom_stop.py\nStopping loop due to error: ouch\nother_job was cancelled!\n</pre>\n<p>Note however that in this situation the exception is being <em>handled</em> by\nyour custom exception handler, and does not bubble up out of the <tt>run()</tt>\nlike you saw in earlier examples. If you want to do something with that\nexception, like reraise it or something, you need to capture it inside your\ncustom exception handler and then do something with it, like add it to a list\nthat you check after <tt>run()</tt> completes, and then reraise there or something\nsimilar.</p>\n</div>\n<div id=\"do-you-like-uvloop\">\n<h3>\ud83d\udca8 Do you like <a href=\"https://github.com/magicstack/uvloop\" rel=\"nofollow\">uvloop</a>?</h3>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiorun</span> <span class=\"kn\">import</span> <span class=\"n\">run</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">snip</span><span class=\"o\">&gt;</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(),</span> <span class=\"n\">use_uvloop</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>Note that you have to <tt>pip install uvloop</tt> yourself.</p>\n</div>\n<div id=\"smart-shield-for-shutdown\">\n<h3><a href=\"#id6\" rel=\"nofollow\">\ud83d\udee1\ufe0f Smart shield for shutdown</a></h3>\n<p>It\u2019s unusual, but sometimes you\u2019re going to want a coroutine to not get\ninterrupted by cancellation <em>during the shutdown sequence</em>. You\u2019ll look in\nthe official docs and find <tt>asyncio.shield()</tt>.</p>\n<p>Unfortunately, <tt>shield()</tt> doesn\u2019t work in shutdown scenarios because\nthe protection offered by <tt>shield()</tt> only applies if the specific coroutine\n<em>inside which</em> the <tt>shield()</tt> is used, gets cancelled directly.</p>\n<p>Let me explain: if you do a conventional shutdown sequence (like <tt>aiorun</tt>\nis doing internally), this is the sequence of steps:</p>\n<ul>\n<li><tt>tasks = all_tasks()</tt>, followed by</li>\n<li><tt>[t.cancel() for t in tasks]</tt>, and then</li>\n<li><tt><span class=\"pre\">run_until_complete(gather(*tasks))</span></tt></li>\n</ul>\n<p>The way <tt>shield()</tt> works internally is it creates a <em>secret, inner</em>\ntask\u2014which also gets included in the <tt>all_tasks()</tt> call above! Thus\nit also receives a cancellation exception just like everything else.</p>\n<p>Therefore, we have an alternative version of <tt>shield()</tt> that works better for\nus: <tt>shutdown_waits_for()</tt>. If you\u2019ve got a coroutine that must <strong>not</strong> be\ncancelled during the shutdown sequence, just wrap it in\n<tt>shutdown_waits_for()</tt>!</p>\n<p>Here\u2019s an example:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiorun</span> <span class=\"kn\">import</span> <span class=\"n\">run</span><span class=\"p\">,</span> <span class=\"n\">shutdown_waits_for</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">corofn</span><span class=\"p\">():</span>\n    <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">60</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'done!'</span><span class=\"p\">)</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">await</span> <span class=\"n\">shutdown_waits_for</span><span class=\"p\">(</span><span class=\"n\">corofn</span><span class=\"p\">())</span>\n    <span class=\"k\">except</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">CancelledError</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'oh noes!'</span><span class=\"p\">)</span>\n\n<span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n</pre>\n<p>If you hit <tt><span class=\"pre\">CTRL-C</span></tt> <em>before</em> 60 seconds has passed, you will see\n<tt>oh noes!</tt> printed immediately, and then after 60 seconds (since start),\n<tt>done!</tt> is printed, and thereafter the program exits.</p>\n<p>Behind the scenes, <tt>all_tasks()</tt> would have been cancelled by <tt><span class=\"pre\">CTRL-C</span></tt>,\n<em>except</em> ones wrapped in <tt>shutdown_waits_for()</tt> calls.  In this respect, it\nis loosely similar to <tt>asyncio.shield()</tt>, but with special applicability\nto our shutdown scenario in <tt>aiorun()</tt>.</p>\n<p>Be careful with this: the coroutine should still finish up at some point.\nThe main use case for this is short-lived tasks that you don\u2019t want to\nwrite explicit cancellation handling.</p>\n<p>Oh, and you can use <tt>shutdown_waits_for()</tt> as if it were <tt>asyncio.shield()</tt>\ntoo. For that use-case it works the same.  If you\u2019re using <tt>aiorun</tt>, there\nis no reason to use <tt>shield()</tt>.</p>\n</div>\n<div id=\"windows-support\">\n<h3><a href=\"#id7\" rel=\"nofollow\">\ud83d\ude4f Windows Support</a></h3>\n<p><tt>aiorun</tt> also supports Windows! Kinda. Sorta. The root problem with Windows,\nfor a thing like <tt>aiorun</tt> is that Windows doesn\u2019t support <em>signal handling</em>\nthe way Linux or Mac OS X does. Like, at all.</p>\n<p>For Linux, <tt>aiorun</tt> does \u201cthe right thing\u201d out of the box for the\n<tt>SIGINT</tt> and <tt>SIGTERM</tt> signals; i.e., it will catch them and initiate\na safe shutdown process as described earlier. However, on <em>Windows</em>, these\nsignals don\u2019t work.</p>\n<p>There are two signals that work on Windows: the <tt><span class=\"pre\">CTRL-C</span></tt> signal (happens\nwhen you press, unsurprisingly, <tt><span class=\"pre\">CTRL-C</span></tt>, and the <tt><span class=\"pre\">CTRL-BREAK</span></tt> signal\nwhich happens when you\u2026well, you get the picture.</p>\n<p>The good news is that, for <tt>aiorun</tt>, both of these will work. Yay! The bad\nnews is that for them to work, you have to run your code in a Console\nwindow. Boo!</p>\n<p>Fortunately, it turns out that you can run an asyncio-based process <em>not</em>\nattached to a Console window, e.g. as a service or a subprocess, <em>and</em> have\nit also receive a signal to safely shut down in a controlled way. It turns\nout that it is possible to send a <tt><span class=\"pre\">CTRL-BREAK</span></tt> signal to another process,\nwith no console window involved, but only as long as that process was created\nin a particular way and\u2014here is the drop\u2014this targetted process is a\nchild process of the one sending the signal. Yeah, I know, it\u2019s a downer.</p>\n<p>There is an example of how to do this in the tests:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">subprocess</span> <span class=\"k\">as</span> <span class=\"nn\">sp</span>\n\n<span class=\"n\">proc</span> <span class=\"o\">=</span> <span class=\"n\">sp</span><span class=\"o\">.</span><span class=\"n\">Popen</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"s1\">'python'</span><span class=\"p\">,</span> <span class=\"s1\">'app.py'</span><span class=\"p\">],</span>\n    <span class=\"n\">stdout</span><span class=\"o\">=</span><span class=\"n\">sp</span><span class=\"o\">.</span><span class=\"n\">PIPE</span><span class=\"p\">,</span>\n    <span class=\"n\">stderr</span><span class=\"o\">=</span><span class=\"n\">sp</span><span class=\"o\">.</span><span class=\"n\">STDOUT</span><span class=\"p\">,</span>\n    <span class=\"n\">creationflags</span><span class=\"o\">=</span><span class=\"n\">sp</span><span class=\"o\">.</span><span class=\"n\">CREATE_NEW_PROCESS_GROUP</span>\n<span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">proc</span><span class=\"o\">.</span><span class=\"n\">pid</span><span class=\"p\">)</span>\n</pre>\n<p>Notice how we print out the process id (<tt>pid</tt>). Then you can send that\nprocess the signal from a completely different process, once you know\nthe <tt>pid</tt>:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">os</span><span class=\"o\">,</span> <span class=\"nn\">signal</span>\n\n<span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">kill</span><span class=\"p\">(</span><span class=\"n\">pid</span><span class=\"p\">,</span> <span class=\"n\">signal</span><span class=\"o\">.</span><span class=\"n\">CTRL_BREAK_EVENT</span><span class=\"p\">)</span>\n</pre>\n<p>(Remember, <tt>os.kill()</tt> doesn\u2019t actually kill, it only sends a signal)</p>\n<p><tt>aiorun</tt> supports this use-case above, although I\u2019ll be pretty surprised\nif anyone actually uses it to manage microservices (does anyone do this?)</p>\n<p>So to summarize: <tt>aiorun</tt> will do a controlled shutdown if either\n<tt><span class=\"pre\">CTRL-C</span></tt> or <tt><span class=\"pre\">CTRL-BREAK</span></tt> is entered via keyboard in a Console window\nwith a running instance, or if the <tt><span class=\"pre\">CTRL-BREAK</span></tt> signal is sent to\na <em>subprocess</em> that was created with the <tt>CREATE_NEW_PROCESS_GROUP</tt>\nflag set. <a href=\"https://stackoverflow.com/a/35792192\" rel=\"nofollow\">Here</a> is a much more\ndetailed explanation of these issues.</p>\n<p>Finally, <tt>uvloop</tt> is not yet supported on Windows so that won\u2019t work\neither.</p>\n<p>At the very least, <tt>aiorun</tt> will, well, <em>run</em> on Windows \u00af\\_(\u30c4)_/\u00af</p>\n</div>\n</div>\n\n          </div>"}, "last_serial": 6622728, "releases": {"2017.10.1": [{"comment_text": "", "digests": {"md5": "f5190ad7182477256f38315a4d675be3", "sha256": "095894c711bf65e509f2da8de95843dade8e4f56e000c4df2dde0a6e263c5665"}, "downloads": -1, "filename": "aiorun-2017.10.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "f5190ad7182477256f38315a4d675be3", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 15550, "upload_time": "2017-10-20T12:02:10", "upload_time_iso_8601": "2017-10-20T12:02:10.946432Z", "url": "https://files.pythonhosted.org/packages/40/d5/75516116e00712c40931accbbaacc4455cb15a89b63fb31e731119b20b78/aiorun-2017.10.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6a9d0c3b4c6a370ea91c109ab6a24e51", "sha256": "baf61bdb8d3cc85641805bc4c9dc6a0f0e53ac253e4128ed1ed3288ee3258608"}, "downloads": -1, "filename": "aiorun-2017.10.1.tar.gz", "has_sig": false, "md5_digest": "6a9d0c3b4c6a370ea91c109ab6a24e51", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7946, "upload_time": "2017-10-20T12:02:20", "upload_time_iso_8601": "2017-10-20T12:02:20.792853Z", "url": "https://files.pythonhosted.org/packages/9a/2c/ea01f0cc5e1943738d3bc051b966adb2727c4e238b9130e44b63d40ccecd/aiorun-2017.10.1.tar.gz", "yanked": false}], "2017.10.2": [{"comment_text": "", "digests": {"md5": "e8f26108f11abcbee68fb83c580f18b3", "sha256": "c7e572d7064cd2c82a9e71b86922429b191058cced71ca0fde2248e1066a7fe1"}, "downloads": -1, "filename": "aiorun-2017.10.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "e8f26108f11abcbee68fb83c580f18b3", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 15623, "upload_time": "2017-10-24T11:05:39", "upload_time_iso_8601": "2017-10-24T11:05:39.367292Z", "url": "https://files.pythonhosted.org/packages/14/f2/af1e52afdc68b0abf7d36096a5a645ba8af7b57edb6d5de6a6024c9f19bb/aiorun-2017.10.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "513bbce8cc9de87f146193a345e6a2e2", "sha256": "7f7cb189aa9d279974b8501e78f84fb7281e12201f5e419269c7594039b0c8c1"}, "downloads": -1, "filename": "aiorun-2017.10.2.tar.gz", "has_sig": false, "md5_digest": "513bbce8cc9de87f146193a345e6a2e2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7965, "upload_time": "2017-10-24T11:05:42", "upload_time_iso_8601": "2017-10-24T11:05:42.536554Z", "url": "https://files.pythonhosted.org/packages/d3/7d/ef30df9a0d34e2b1639d83df1b08de2d74a5e7fb3131fffaf01c7c2ac1da/aiorun-2017.10.2.tar.gz", "yanked": false}], "2017.10.3": [{"comment_text": "", "digests": {"md5": "4a5ea418e1929f765c15d3988ddb78e1", "sha256": "fea610c9b9454f42ad30c06388d23ada58332edc6eb55e9016eba55685c58822"}, "downloads": -1, "filename": "aiorun-2017.10.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "4a5ea418e1929f765c15d3988ddb78e1", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 15592, "upload_time": "2017-10-25T08:22:15", "upload_time_iso_8601": "2017-10-25T08:22:15.396681Z", "url": "https://files.pythonhosted.org/packages/eb/d9/b7baa5f3fbf9c8f1cc52201d517fcd6d31ae766cad64a94080de998bcd04/aiorun-2017.10.3-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "543ea29512981b881344067bdc6d99e5", "sha256": "f1fd3ac3599b9c4ff94927ecf4aa1fe9aaa300bf1479a9f89560c51e289f76f7"}, "downloads": -1, "filename": "aiorun-2017.10.3.tar.gz", "has_sig": false, "md5_digest": "543ea29512981b881344067bdc6d99e5", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8004, "upload_time": "2017-10-25T08:22:22", "upload_time_iso_8601": "2017-10-25T08:22:22.754709Z", "url": "https://files.pythonhosted.org/packages/98/a0/f1b24f31067c335cf68d2685c74d6cc9b184b51b7c8179266395ba68c667/aiorun-2017.10.3.tar.gz", "yanked": false}], "2017.10.4": [{"comment_text": "", "digests": {"md5": "3490278e4c131e793382ee87d3c1f1e9", "sha256": "d5ccd244848ac0d10260c833db8c9a8f1dd2e77418f72b9d858318ce26a8d743"}, "downloads": -1, "filename": "aiorun-2017.10.4-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "3490278e4c131e793382ee87d3c1f1e9", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 21196, "upload_time": "2017-10-27T09:57:40", "upload_time_iso_8601": "2017-10-27T09:57:40.037536Z", "url": "https://files.pythonhosted.org/packages/31/a2/e621a9676497bfc9f20419153eb1ed3c3d723e716157544077a4f863d562/aiorun-2017.10.4-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "7ab56a7ccab0005eadffeabe538d392c", "sha256": "fecfb6f038770233fd1f0b1bac47c9bcc900473bb30ac92a99684409e75a37b9"}, "downloads": -1, "filename": "aiorun-2017.10.4.tar.gz", "has_sig": false, "md5_digest": "7ab56a7ccab0005eadffeabe538d392c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11513, "upload_time": "2017-10-27T09:57:44", "upload_time_iso_8601": "2017-10-27T09:57:44.476237Z", "url": "https://files.pythonhosted.org/packages/80/50/ab7071b373d3c1c2da2de74b31d0dd0093b2e56413695f4a2d9c1dab9cbd/aiorun-2017.10.4.tar.gz", "yanked": false}], "2017.10.5": [{"comment_text": "", "digests": {"md5": "d595bae27d986aec4d37abf6a52c5932", "sha256": "7ca9a2d4661f568d16d2fb0828d491215b6ba39e57b595e0782373bc1e575ebc"}, "downloads": -1, "filename": "aiorun-2017.10.5-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "d595bae27d986aec4d37abf6a52c5932", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 21576, "upload_time": "2017-10-28T20:58:58", "upload_time_iso_8601": "2017-10-28T20:58:58.900455Z", "url": "https://files.pythonhosted.org/packages/53/ca/cdd1ab460e74fe8d56e70e18c9a7ddd78da62e6fd5bf5d7d386d8f545456/aiorun-2017.10.5-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "473339dd34460eb5ca82bb2e6c956f1a", "sha256": "992c180466b72ab2414d590584ce002c1568647775e5a641b7cac63d506c6e3d"}, "downloads": -1, "filename": "aiorun-2017.10.5.tar.gz", "has_sig": false, "md5_digest": "473339dd34460eb5ca82bb2e6c956f1a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11651, "upload_time": "2017-10-28T20:59:02", "upload_time_iso_8601": "2017-10-28T20:59:02.648776Z", "url": "https://files.pythonhosted.org/packages/9d/86/3bebab774ee1e6cb2ce65f514100e887bc01545a7cc19b232b5c989134f6/aiorun-2017.10.5.tar.gz", "yanked": false}], "2017.11.1": [{"comment_text": "", "digests": {"md5": "a42d8d52a8a6702bd4a2a1d64b4ef613", "sha256": "6be190a96fae6c3f9f6223b35c53b1eef0acfa94fb4d9bf5356fd6a49c06ad06"}, "downloads": -1, "filename": "aiorun-2017.11.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "a42d8d52a8a6702bd4a2a1d64b4ef613", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 21808, "upload_time": "2017-11-04T23:35:41", "upload_time_iso_8601": "2017-11-04T23:35:41.183768Z", "url": "https://files.pythonhosted.org/packages/0a/1e/de347bc5b1c1840e1288326d0611cd814d2eadaa3997e56d5e7396331f9e/aiorun-2017.11.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6464c9eeda9120f3a4a466a2645f7804", "sha256": "44c78c4a647696b910d3806c482307471daf455bdef058e5cdaf8049b0fa543a"}, "downloads": -1, "filename": "aiorun-2017.11.1.tar.gz", "has_sig": false, "md5_digest": "6464c9eeda9120f3a4a466a2645f7804", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11779, "upload_time": "2017-11-04T23:35:45", "upload_time_iso_8601": "2017-11-04T23:35:45.152442Z", "url": "https://files.pythonhosted.org/packages/05/28/c8488396940ecb9d395b47cf3e7d3509c9e0e7ab02b12a741b07d47a8872/aiorun-2017.11.1.tar.gz", "yanked": false}], "2017.11.2": [{"comment_text": "", "digests": {"md5": "3a92ca394096e1b8cc45ca30b22ae15a", "sha256": "108f46ef3e0f90bdcda1d8e659e2d777b7e161fb52c962d6813d2844c2b6ebd2"}, "downloads": -1, "filename": "aiorun-2017.11.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "3a92ca394096e1b8cc45ca30b22ae15a", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 22328, "upload_time": "2017-11-08T03:04:56", "upload_time_iso_8601": "2017-11-08T03:04:56.560649Z", "url": "https://files.pythonhosted.org/packages/7c/0b/8d1279f6a0c2913baee82900228cf721ce9da5ae0bd1d55ab9db24cf97d5/aiorun-2017.11.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "20a2fd59a9cc5fed21c9f8ae6417988b", "sha256": "8ea3bfc7e9b7374773e8f8ffb502d5abacb4e57b30a28082ca31615296eb6270"}, "downloads": -1, "filename": "aiorun-2017.11.2.tar.gz", "has_sig": false, "md5_digest": "20a2fd59a9cc5fed21c9f8ae6417988b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12128, "upload_time": "2017-11-08T03:04:59", "upload_time_iso_8601": "2017-11-08T03:04:59.418807Z", "url": "https://files.pythonhosted.org/packages/d9/eb/d8225a35f7cc56bcd23dc73bb7422fa66426a146cc4dd2cde161eda5a4ee/aiorun-2017.11.2.tar.gz", "yanked": false}], "2017.11.4": [{"comment_text": "", "digests": {"md5": "12c569270a10673c18d84ac1987b0db4", "sha256": "70839d66809fd9bd57b439302912713cc2e8adf049cbc0cf9771e21ce4e38076"}, "downloads": -1, "filename": "aiorun-2017.11.4-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "12c569270a10673c18d84ac1987b0db4", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 24172, "upload_time": "2017-11-14T22:23:02", "upload_time_iso_8601": "2017-11-14T22:23:02.909122Z", "url": "https://files.pythonhosted.org/packages/6e/c6/6b43ceb9802f86f1f453c8a636981363968e53f2a346dfa6df0fdf2c1df9/aiorun-2017.11.4-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "fed9c4df0912e5aab72ef77cef4973a1", "sha256": "30b263202750210fcdd324597f67ac9c71af0291ce229fac254697040a827dca"}, "downloads": -1, "filename": "aiorun-2017.11.4.tar.gz", "has_sig": false, "md5_digest": "fed9c4df0912e5aab72ef77cef4973a1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12776, "upload_time": "2017-11-14T22:23:05", "upload_time_iso_8601": "2017-11-14T22:23:05.596686Z", "url": "https://files.pythonhosted.org/packages/d2/2d/15907a39f4d45341717efd94274d20202a2f06575ece1127e12377fa6401/aiorun-2017.11.4.tar.gz", "yanked": false}], "2017.11.5": [{"comment_text": "", "digests": {"md5": "fffcb5fb955538ad324a040212ff5de1", "sha256": "28ec96a9336109e7bb6cce88ffd7f5cdb94546ae613e0c8bc669cbd1c66981ff"}, "downloads": -1, "filename": "aiorun-2017.11.5-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "fffcb5fb955538ad324a040212ff5de1", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 25050, "upload_time": "2017-11-15T01:08:57", "upload_time_iso_8601": "2017-11-15T01:08:57.124445Z", "url": "https://files.pythonhosted.org/packages/ca/8f/685d7484fee18a9761eeabd3f6e6352f7e2214730878e44afe8bcbeb7dcf/aiorun-2017.11.5-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b591489c1cd33f043e93b98116c1136b", "sha256": "3108894c0762c899510f40cfe45f797b02553eebf453b46f2de23a578518e0a8"}, "downloads": -1, "filename": "aiorun-2017.11.5.tar.gz", "has_sig": false, "md5_digest": "b591489c1cd33f043e93b98116c1136b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 13799, "upload_time": "2017-11-15T01:09:00", "upload_time_iso_8601": "2017-11-15T01:09:00.147565Z", "url": "https://files.pythonhosted.org/packages/e4/09/388d7cbdc3eed0ceb8a69c907ea37bdbdd1b270cdd408063dc1842947564/aiorun-2017.11.5.tar.gz", "yanked": false}], "2017.11.6": [{"comment_text": "", "digests": {"md5": "391cc271557b95603a91fd3e7b9cd55f", "sha256": "a7100573b83bdf31135f4dddefea0a2be42c6172887ba6b0adbcdc9b8aafdb56"}, "downloads": -1, "filename": "aiorun-2017.11.6-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "391cc271557b95603a91fd3e7b9cd55f", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 24774, "upload_time": "2017-11-28T22:35:47", "upload_time_iso_8601": "2017-11-28T22:35:47.305905Z", "url": "https://files.pythonhosted.org/packages/de/71/6550f287ff10c27b77782f8b18123b99e1ff896b7e3daa68696fca9f7f98/aiorun-2017.11.6-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "245c458f544bfc65beb75a4c2793c6fd", "sha256": "373c3cbd3afe350174e8d971d9b8cd25839b915126575f22da9cd09dddc4b63b"}, "downloads": -1, "filename": "aiorun-2017.11.6.tar.gz", "has_sig": false, "md5_digest": "245c458f544bfc65beb75a4c2793c6fd", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14187, "upload_time": "2017-11-28T22:35:50", "upload_time_iso_8601": "2017-11-28T22:35:50.965715Z", "url": "https://files.pythonhosted.org/packages/5d/5b/3fef8c22e9b399fac7520460216816db027d4ece8e7eb67085b64dc29a95/aiorun-2017.11.6.tar.gz", "yanked": false}], "2018.3.1": [{"comment_text": "", "digests": {"md5": "d6c8e98c441d2fc0557275fbd410f85a", "sha256": "429640979c450cb81c169f13147ba0cdf54074e791c423b6fc1be4c8724402bd"}, "downloads": -1, "filename": "aiorun-2018.3.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "d6c8e98c441d2fc0557275fbd410f85a", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 24771, "upload_time": "2018-03-26T01:31:33", "upload_time_iso_8601": "2018-03-26T01:31:33.248999Z", "url": "https://files.pythonhosted.org/packages/2c/cd/2d5b2a8ec5c61b61dfc351cd09f7e2d2256311a8e3634b9845281622cba9/aiorun-2018.3.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "cb235a98799131321858e899da30a7a4", "sha256": "4e5622651de5e2bfe1ac167bc3d53ff41630e4af497d9639e88553558524bfb4"}, "downloads": -1, "filename": "aiorun-2018.3.1.tar.gz", "has_sig": false, "md5_digest": "cb235a98799131321858e899da30a7a4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14200, "upload_time": "2018-03-26T01:31:35", "upload_time_iso_8601": "2018-03-26T01:31:35.429429Z", "url": "https://files.pythonhosted.org/packages/fe/5b/da518d9cd2a4c9062e71cf2aae47e37e0d5a302ce3ab349c7c0db718bfd6/aiorun-2018.3.1.tar.gz", "yanked": false}], "2018.4.1": [{"comment_text": "", "digests": {"md5": "5f457484594f8401d3505095d1e67fd6", "sha256": "3d5129248ce824e235a680b543eded32efc4603b491f4823242734e96230703d"}, "downloads": -1, "filename": "aiorun-2018.4.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "5f457484594f8401d3505095d1e67fd6", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 24994, "upload_time": "2018-04-20T06:11:55", "upload_time_iso_8601": "2018-04-20T06:11:55.825444Z", "url": "https://files.pythonhosted.org/packages/03/e2/ad8cc44a3a7209f9472f2869bd47948b238696052cd301c1a81370d3b769/aiorun-2018.4.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8f22a2983967af66d6163fb862a7b5ee", "sha256": "4714329c02c59befabdf327c38a6e39509a69f2c1ab45f379d73d60a3f29e0f1"}, "downloads": -1, "filename": "aiorun-2018.4.1.tar.gz", "has_sig": false, "md5_digest": "8f22a2983967af66d6163fb862a7b5ee", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14433, "upload_time": "2018-04-20T06:12:00", "upload_time_iso_8601": "2018-04-20T06:12:00.079356Z", "url": "https://files.pythonhosted.org/packages/c9/d2/d7c46c6c1841c170421f30d15e2e8841feb3874e87152a6bd414523ce809/aiorun-2018.4.1.tar.gz", "yanked": false}], "2018.8.1": [{"comment_text": "", "digests": {"md5": "f72ec6644677af43bb79ac8d3252f592", "sha256": "4a2c6755254671090c89b13cbb0824f33f79f61ee9fa49fe15718c5ee99118dd"}, "downloads": -1, "filename": "aiorun-2018.8.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "f72ec6644677af43bb79ac8d3252f592", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 24976, "upload_time": "2018-08-07T05:57:19", "upload_time_iso_8601": "2018-08-07T05:57:19.481309Z", "url": "https://files.pythonhosted.org/packages/0e/1f/22968ffadfc5b209413899cd04a4dc72a72b95fcba400538263a10c4110d/aiorun-2018.8.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "cffe24fd35e842e4c176399677db545c", "sha256": "cf92656b9a95d9a1c24bd2a28ce5e549fd6a850d2cbcb73fa4b9916d452f5525"}, "downloads": -1, "filename": "aiorun-2018.8.1.tar.gz", "has_sig": false, "md5_digest": "cffe24fd35e842e4c176399677db545c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14545, "upload_time": "2018-08-07T05:57:22", "upload_time_iso_8601": "2018-08-07T05:57:22.145454Z", "url": "https://files.pythonhosted.org/packages/77/9a/4d3a3d264495f77fb08bb2156ec5d7fc89157405b7466424390ee30a7850/aiorun-2018.8.1.tar.gz", "yanked": false}], "2018.9.1": [{"comment_text": "", "digests": {"md5": "58d69adf1800e007eb2ea7094bb5c3f0", "sha256": "1e1180e09ab7753c51473eb1402a1bba73ff06e3f0421964af7dd90bdb0d08be"}, "downloads": -1, "filename": "aiorun-2018.9.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "58d69adf1800e007eb2ea7094bb5c3f0", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 24996, "upload_time": "2018-09-10T04:32:26", "upload_time_iso_8601": "2018-09-10T04:32:26.473225Z", "url": "https://files.pythonhosted.org/packages/e7/5f/f00aa011452206e8a34caff15ce22de01adabaa667b874d80d355deb641d/aiorun-2018.9.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "fd3234208ad8ce090050d4b336554695", "sha256": "535ab7d2864c7dfcf262a5bac5b8eef944eecc5f4ddd46168875863462c3f576"}, "downloads": -1, "filename": "aiorun-2018.9.1.tar.gz", "has_sig": false, "md5_digest": "fd3234208ad8ce090050d4b336554695", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14560, "upload_time": "2018-09-10T04:32:29", "upload_time_iso_8601": "2018-09-10T04:32:29.455390Z", "url": "https://files.pythonhosted.org/packages/d7/38/2be882ef5438bb708281b08552b988027964651b49ab0fbce8ccdddf7661/aiorun-2018.9.1.tar.gz", "yanked": false}], "2019.11.1": [{"comment_text": "", "digests": {"md5": "43be90028399fef79c2f897fd9e483ce", "sha256": "625074ae213796bea07637e238f472f0947c4485a305f0c9d11c40c4b6cd47b6"}, "downloads": -1, "filename": "aiorun-2019.11.1-py3-none-any.whl", "has_sig": false, "md5_digest": "43be90028399fef79c2f897fd9e483ce", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 29661, "upload_time": "2019-11-17T05:28:02", "upload_time_iso_8601": "2019-11-17T05:28:02.124445Z", "url": "https://files.pythonhosted.org/packages/ef/a6/0217d6419e44475e2c5d3a08389e6db2c124fbad1be7c611088d571d56e6/aiorun-2019.11.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8ca4933148da48267c1f543ab8bd0317", "sha256": "27e10f0e7a45faa816fed85a516b0a19074723e4a07d8d024ed56977075b919a"}, "downloads": -1, "filename": "aiorun-2019.11.1.tar.gz", "has_sig": false, "md5_digest": "8ca4933148da48267c1f543ab8bd0317", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 18914, "upload_time": "2019-11-17T05:28:05", "upload_time_iso_8601": "2019-11-17T05:28:05.285754Z", "url": "https://files.pythonhosted.org/packages/fa/49/dcbb553a580264f7ac583927a265659406ef4b0419913d7bc03f096feb42/aiorun-2019.11.1.tar.gz", "yanked": false}], "2019.3.1": [{"comment_text": "", "digests": {"md5": "3b40c481dfb4a443be2de85105bca8d3", "sha256": "cc08ece87a51268b0064e1330f06d7ed3e4dcf0a316d07cd4388560b02d90153"}, "downloads": -1, "filename": "aiorun-2019.3.1-py3-none-any.whl", "has_sig": false, "md5_digest": "3b40c481dfb4a443be2de85105bca8d3", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 25294, "upload_time": "2019-03-29T14:31:35", "upload_time_iso_8601": "2019-03-29T14:31:35.249528Z", "url": "https://files.pythonhosted.org/packages/80/5f/8641d235e416d8588d6ab6ab0f75678af09d2a938a10719de8abeb7db1fa/aiorun-2019.3.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "57c920f3fe9985327efc755f455cc5f4", "sha256": "607c8bff92d35b688aca3e1d5c9267b48df5c87d3fec09f35c1b6401c4ec01f1"}, "downloads": -1, "filename": "aiorun-2019.3.1.tar.gz", "has_sig": false, "md5_digest": "57c920f3fe9985327efc755f455cc5f4", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 14923, "upload_time": "2019-03-29T14:31:44", "upload_time_iso_8601": "2019-03-29T14:31:44.514467Z", "url": "https://files.pythonhosted.org/packages/a1/b9/ac2a773d867662a25428137954e0f869b07e868d35c6fae2f412abeafb69/aiorun-2019.3.1.tar.gz", "yanked": false}], "2019.4.1": [{"comment_text": "", "digests": {"md5": "c4ee9dc4dd2e09199d9c405a4ca4be46", "sha256": "4b831cc6fcae3275fbe24fd9ae4647f87ceb12171dfcfe0d79c984814bbaedb1"}, "downloads": -1, "filename": "aiorun-2019.4.1-py3-none-any.whl", "has_sig": false, "md5_digest": "c4ee9dc4dd2e09199d9c405a4ca4be46", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 28210, "upload_time": "2019-04-11T10:35:42", "upload_time_iso_8601": "2019-04-11T10:35:42.310725Z", "url": "https://files.pythonhosted.org/packages/c0/c1/ba5f1ce8d9bc3ac3a17969414ba5e0935ef4c440420705a368f3677b5892/aiorun-2019.4.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "e9fb0cb3bc6fc43e719d5841be2bceb4", "sha256": "5da1ebc219b2c3c52bd92ffbe412f1debc936836a0ea048a62835b7be2f60436"}, "downloads": -1, "filename": "aiorun-2019.4.1.tar.gz", "has_sig": false, "md5_digest": "e9fb0cb3bc6fc43e719d5841be2bceb4", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 17509, "upload_time": "2019-04-11T10:35:53", "upload_time_iso_8601": "2019-04-11T10:35:53.200389Z", "url": "https://files.pythonhosted.org/packages/d7/d1/38d43147c81bf0f324d27d8821ee60045dbb57372b76b8e40129ee758f1d/aiorun-2019.4.1.tar.gz", "yanked": false}], "2020.1.1": [{"comment_text": "", "digests": {"md5": "8ae6ca56f38b28f21a1ecb220384de01", "sha256": "17ae78587d29bf41bf1128973ff110e3c3500b9065a957aa9bc290d2795e5901"}, "downloads": -1, "filename": "aiorun-2020.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "8ae6ca56f38b28f21a1ecb220384de01", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 14272, "upload_time": "2020-01-14T12:13:39", "upload_time_iso_8601": "2020-01-14T12:13:39.894231Z", "url": "https://files.pythonhosted.org/packages/a2/6a/bbd3820e9a59b4c6505e5a544b7d8a1b44207fd2ea8e0ee59b42384c45b2/aiorun-2020.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "86d8685519314100c76d9650a5cac6ca", "sha256": "bae49504e8a52eef4403d394b276ada560cb9d6b8c69eb45ee025a721a4b6836"}, "downloads": -1, "filename": "aiorun-2020.1.1.tar.gz", "has_sig": false, "md5_digest": "86d8685519314100c76d9650a5cac6ca", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 19024, "upload_time": "2020-01-14T12:13:42", "upload_time_iso_8601": "2020-01-14T12:13:42.631477Z", "url": "https://files.pythonhosted.org/packages/e5/1a/7b4efdb1dd79f72d0c3da3502be73abe5476a28048d3a6ac3753b2c05208/aiorun-2020.1.1.tar.gz", "yanked": false}], "2020.1.2": [{"comment_text": "", "digests": {"md5": "59239a49c45413b39b0f96996e41df4d", "sha256": "56aa0b0ba8ac8bf3a605bdae838a656a4d6402e11b0734fc5b774da7d4335006"}, "downloads": -1, "filename": "aiorun-2020.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "59239a49c45413b39b0f96996e41df4d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 16112, "upload_time": "2020-01-19T07:30:27", "upload_time_iso_8601": "2020-01-19T07:30:27.214038Z", "url": "https://files.pythonhosted.org/packages/88/1e/eceba60dd571e72ece69e14c177dc0f37daa8d6afd7fc326efaa53a10f58/aiorun-2020.1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5e8cee9b1fa99a1878cc69f1958dfa3a", "sha256": "5bae05f192f65214668284ecae0545a7fdf60172f6feb072eb2ce84d12d240f6"}, "downloads": -1, "filename": "aiorun-2020.1.2.tar.gz", "has_sig": false, "md5_digest": "5e8cee9b1fa99a1878cc69f1958dfa3a", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 21519, "upload_time": "2020-01-19T07:30:30", "upload_time_iso_8601": "2020-01-19T07:30:30.170065Z", "url": "https://files.pythonhosted.org/packages/19/68/880beb00267d2bcb73447d4489b5424b6092f539cdcb636f7f8297868922/aiorun-2020.1.2.tar.gz", "yanked": false}], "2020.1.3": [{"comment_text": "", "digests": {"md5": "3ee39a07f97339bbf7544bb848653e1b", "sha256": "ff0fb1e6ee922733c8b1e2aa4c1ddd17f89eac3aac682cbe9f501052d1a4891a"}, "downloads": -1, "filename": "aiorun-2020.1.3-py3-none-any.whl", "has_sig": false, "md5_digest": "3ee39a07f97339bbf7544bb848653e1b", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 16110, "upload_time": "2020-01-19T07:57:34", "upload_time_iso_8601": "2020-01-19T07:57:34.884897Z", "url": "https://files.pythonhosted.org/packages/a2/41/60a3fab80225dd131fd217c2fb4468fa85c6227424736acf94876ece8571/aiorun-2020.1.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "ea2e13f1b80645efa151cc0abd0d1f86", "sha256": "2104eabee235b4eee2b597cb6c45285e02284c713689d24857d9aefeeff52240"}, "downloads": -1, "filename": "aiorun-2020.1.3.tar.gz", "has_sig": false, "md5_digest": "ea2e13f1b80645efa151cc0abd0d1f86", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 21561, "upload_time": "2020-01-19T07:57:37", "upload_time_iso_8601": "2020-01-19T07:57:37.719903Z", "url": "https://files.pythonhosted.org/packages/d8/02/a4fe12504a7e9e3e8b10fa247eea806f3afaf9d883119b1bdc22284e9c90/aiorun-2020.1.3.tar.gz", "yanked": false}], "2020.2.1": [{"comment_text": "", "digests": {"md5": "68a88a69d4b38a59fd7ec26b91e885dc", "sha256": "7e9f5960b919efb6e5c147a3e75cf8a693f0d8245c12361d1e4e08c9b2d1b15e"}, "downloads": -1, "filename": "aiorun-2020.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "68a88a69d4b38a59fd7ec26b91e885dc", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 16111, "upload_time": "2020-02-13T11:31:45", "upload_time_iso_8601": "2020-02-13T11:31:45.984863Z", "url": "https://files.pythonhosted.org/packages/f7/8c/6bdfb0551a595b7781d620085e5fdec36b50282d52e7d3d0a73ac707c5b5/aiorun-2020.2.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "26edbb0f2a9ad52a1c493782f22aeee1", "sha256": "2c0410edb7d26c27ef38653078ad6d3ee6985b77f379254210c2dd703f7d76d6"}, "downloads": -1, "filename": "aiorun-2020.2.1.tar.gz", "has_sig": false, "md5_digest": "26edbb0f2a9ad52a1c493782f22aeee1", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 21818, "upload_time": "2020-02-13T11:31:48", "upload_time_iso_8601": "2020-02-13T11:31:48.893240Z", "url": "https://files.pythonhosted.org/packages/e2/d2/d3871f331abe0b65c45556f91d6443305ae403009f11aceeddffa9bd1b6c/aiorun-2020.2.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "68a88a69d4b38a59fd7ec26b91e885dc", "sha256": "7e9f5960b919efb6e5c147a3e75cf8a693f0d8245c12361d1e4e08c9b2d1b15e"}, "downloads": -1, "filename": "aiorun-2020.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "68a88a69d4b38a59fd7ec26b91e885dc", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 16111, "upload_time": "2020-02-13T11:31:45", "upload_time_iso_8601": "2020-02-13T11:31:45.984863Z", "url": "https://files.pythonhosted.org/packages/f7/8c/6bdfb0551a595b7781d620085e5fdec36b50282d52e7d3d0a73ac707c5b5/aiorun-2020.2.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "26edbb0f2a9ad52a1c493782f22aeee1", "sha256": "2c0410edb7d26c27ef38653078ad6d3ee6985b77f379254210c2dd703f7d76d6"}, "downloads": -1, "filename": "aiorun-2020.2.1.tar.gz", "has_sig": false, "md5_digest": "26edbb0f2a9ad52a1c493782f22aeee1", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 21818, "upload_time": "2020-02-13T11:31:48", "upload_time_iso_8601": "2020-02-13T11:31:48.893240Z", "url": "https://files.pythonhosted.org/packages/e2/d2/d3871f331abe0b65c45556f91d6443305ae403009f11aceeddffa9bd1b6c/aiorun-2020.2.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:20:48 2020"}