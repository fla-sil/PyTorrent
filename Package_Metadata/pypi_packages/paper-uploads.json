{"info": {"author": "Mihail Mishakin", "author_email": "x896321475@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Framework :: Django", "Framework :: Django :: 2.1", "Framework :: Django :: 2.2", "Framework :: Django :: 3.0", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3 :: Only", "Topic :: Internet :: WWW/HTTP"], "description": "# paper-uploads\n\n[![PyPI-Server](https://badge.fury.io/py/paper-uploads.svg)](https://pypi.org/project/paper-uploads/)\n\n![](http://joxi.net/gmvnGZBtqKOOjm.png)\n\n\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u044f \u0434\u043b\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u043e\u0432.\n\n## Requirements\n* Python 3.5+\n* Django 2.1+\n* [paper-admin](https://github.com/dldevinc/paper-admin)\n* [variations](https://github.com/dldevinc/variations)\n\n## Features\n* \u041a\u0430\u0436\u0434\u044b\u0439 \u0444\u0430\u0439\u043b \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u0441\u0432\u043e\u0435\u0439 \u043c\u043e\u0434\u0435\u043b\u044c\u044e, \u0447\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \n\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043c\u0435\u0442\u0430\u0434\u0430\u043d\u043d\u044b\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, alt \u0438 title \u0434\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f.\n* \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e.\n* \u041f\u043e\u043b\u044f \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u044b\u043c\u0438 \n\u043e\u0442 `OneToOneField` \u0438 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 `<input type=\"file\">`. \u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u044f \n\u044d\u0442\u043e\u043c\u0443, \u043f\u0440\u0438 \u043e\u0448\u0438\u0431\u043a\u0430\u0445 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u043d\u0435 \u0441\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f.\n* \u0421\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 [django-storages](https://github.com/jschneier/django-storages).\n* \u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 [Cloudinary](https://cloudinary.com/documentation/cloudinary_references).\n* \u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0440\u0435\u0437\u0430\u0442\u044c \u043d\u0430 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439.\n\u041a\u0430\u0436\u0434\u0430\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f \u0433\u0438\u0431\u043a\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f. \u041c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440\u044b, \n\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0436\u0430\u0442\u0438\u044f, \u0444\u043e\u0440\u043c\u0430\u0442, \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \n[pilkit](https://github.com/matthewwithanm/pilkit)-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u044b, \n\u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u0435 \u043b\u0438\u0446 \u0438 \u0434\u0440\u0443\u0433\u043e\u0435. \u0421\u043c. \n[variations](https://github.com/dldevinc/variations).\n* \u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 [django-rq](https://github.com/rq/django-rq)\n\u0434\u043b\u044f \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0439 \u043d\u0430\u0440\u0435\u0437\u043a\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u043d\u0430 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.\n* \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u043c\u0438 \u0443\u0442\u0438\u043b\u0438\u0442\u0430\u043c\u0438. \n\u0422\u0430\u043a\u0438\u043c\u0438 \u043a\u0430\u043a `mozjpeg` \u0438 `pngquant`.\n* \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0444\u0430\u0439\u043b\u043e\u0432. \u0412 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0433\u0430\u043b\u0435\u0440\u0435\u0439 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0441 \n\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432.\n\n## Installation\n```python\nINSTALLED_APPS = [\n    # ...\n    'paper_uploads',\n    # ...\n]\n\nPAPER_UPLOADS = {\n    'VARIATION_DEFAULTS': {\n        'jpeg': dict(\n            quality=80,\n            progressive=True,\n        ),\n        'webp': dict(\n            quality=75,\n        )\n    },\n    'POSTPROCESS': {\n        'jpeg': {\n            'command': 'jpeg-recompress',\n            'arguments': '--quality high \"{file}\" \"{file}\"',\n        },\n        'png': {\n            'command': 'pngquant',\n            'arguments': '--force --skip-if-larger --output \"{file}\" \"{file}\"'\n        },\n        'svg': {\n            'command': 'svgo',\n            'arguments': '--precision=4 --disable=convertPathData \"{file}\"',\n        },   \n    }\n}\n```\n\n## FileField\n\u041f\u043e\u043b\u0435 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430.\n\n\u041d\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u043b\u043e\u0436\u0438\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e [\u0432\u0430\u043b\u0438\u0434\u0430\u0442\u043e\u0440\u043e\u0432](#Validation).\n```python\nfrom django.db import models\nfrom django.utils.translation import ugettext_lazy as _\nfrom paper_uploads.models import *\nfrom paper_uploads.validators import *\n\n\nclass Page(models.Model):\n    report = FileField(_('file'), blank=True, validators=[\n        SizeValidator(10*1024*1024)    # up to 10Mb    \n    ])\n```\n\n\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043c\u043e\u0434\u0435\u043b\u0438 `UploadedFile`. \n\u041f\u043e\u043c\u0438\u043c\u043e \u0441\u0430\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430, \u0445\u0440\u0430\u043d\u044f\u0449\u0435\u0433\u043e\u0441\u044f \u0432 \u043f\u043e\u043b\u0435 `file`, \u043c\u043e\u0434\u0435\u043b\u044c \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \n\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u043e\u043b\u044f:\n* `name` - \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430 \u0431\u0435\u0437 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0438 \u0441\u0443\u0444\u0444\u0438\u043a\u0441\u0430, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e `FileStorage`.\n\u041f\u0440\u0438\u043c\u0435\u0440: `my_document`.\n* `display_name`- \u0443\u0434\u043e\u0431\u043e\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0434\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435.\n\u041f\u0440\u0438\u043c\u0435\u0440: `\u041e\u0442\u0447\u0451\u0442 \u0437\u0430 2019 \u0433\u043e\u0434`.\n* `extension` - \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0432 \u043d\u0438\u0436\u043d\u0435\u043c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0435. \u041f\u0440\u0438\u043c\u0435\u0440: `doc`.\n* `size` - \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u0432 \u0431\u0430\u0439\u0442\u0430\u0445.\n* `hash` - SHA-1 \u0445\u044d\u0448 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430.\n* `created_at` - \u0434\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u043c\u043e\u0434\u0435\u043b\u0438.\n* `uploaded_at` - \u0434\u0430\u0442\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430.\n* `modified_at` - \u0434\u0430\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438.\n\n\u041c\u043e\u0434\u0435\u043b\u0438 \u0444\u0430\u0439\u043b\u043e\u0432 (`UploadedFile`, `UploadedImage` \u0438 \u043c\u043e\u0434\u0435\u043b\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439) \n\u043f\u0440\u043e\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0430\u0442\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0438 \u043c\u0435\u0442\u043e\u0434\u044b \u0444\u0430\u0439\u043b\u0430 \u043d\u0430 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043c\u043e\u0434\u0435\u043b\u0438:\n* `url`\n* `path`\n* `open`\n* `close`\n* `closed`\n* `read`\n* `seek`\n* `tell`\n\n\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0432\u043c\u0435\u0441\u0442\u043e `Page.report.file.url` \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \n`Page.report.url`.\n\n## ImageField\n\u041f\u043e\u043b\u0435 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439. \n\n\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043d\u0430\u0440\u0435\u0437\u043a\u0443 \u043d\u0430 \u043d\u0435\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439. \n\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u0437\u0430\u0434\u0430\u044e\u0442\u0441\u044f \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435 `variations`. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \n\u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u043c\u043e\u0434\u0443\u043b\u0435 [variations](https://github.com/dldevinc/variations).\n\n\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u0432 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0431\u0435\u0437 \n\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439. \u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u044b\u0445 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u0438\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445, \n\u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043d\u043e\u0432\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0440\u0435\u0437\u043a\u0443 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u044b \n[recreate_variations](#recreate_variations).\n\n```python\nfrom django.db import models\nfrom django.utils.translation import ugettext_lazy as _\nfrom paper_uploads.models import *\n\n\nclass Page(models.Model):\n    image = ImageField(_('single image'), blank=True)\n    versatile_image = ImageField(_('image with variations'),\n        blank=True,\n        variations=dict(\n            desktop=dict(\n                size=(1600, 0),\n                clip=False,\n                jpeg=dict(\n                    quality=80,\n                    progressive=True\n                ),\n            ),\n            tablet=dict(\n                size=(1024, 0),\n                clip=False,\n                jpeg=dict(\n                    quality=75,\n                ),\n            ),\n            mobile=dict(\n                size=(640, 0),\n                clip=False,\n            )\n        )\n    )\n```\n\n\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043c\u043e\u0434\u0435\u043b\u0438 `UploadedImage`. \n\u041f\u043e\u043c\u0438\u043c\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0445\u0440\u0430\u043d\u044f\u0449\u0435\u0433\u043e\u0441\u044f \u0432 \u043f\u043e\u043b\u0435 `file`, \n\u043c\u043e\u0434\u0435\u043b\u044c \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u043e\u043b\u044f:\n* `name` - \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430 \u0431\u0435\u0437 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0438 \u0441\u0443\u0444\u0444\u0438\u043a\u0441\u0430, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e `FileStorage`.\n\u041f\u0440\u0438\u043c\u0435\u0440: `summer_photo`.\n* `extension` - \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0432 \u043d\u0438\u0436\u043d\u0435\u043c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0435. \u041f\u0440\u0438\u043c\u0435\u0440: `jpg`.\n* `title` - \u0442\u0435\u043a\u0441\u0442 \u0430\u0442\u0442\u0440\u0438\u0431\u0443\u0442\u0430 `title` \u0434\u043b\u044f \u0442\u044d\u0433\u0430 `<img>`.\n* `description` - \u0442\u0435\u043a\u0441\u0442 \u0430\u0442\u0442\u0440\u0438\u0431\u0443\u0442\u0430 `alt` \u0434\u043b\u044f \u0442\u044d\u0433\u0430 `<img>`.\n* `width` - \u0448\u0438\u0440\u0438\u043d\u0430 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u043f\u0438\u043a\u0441\u0435\u043b\u044f\u0445.\n* `height` - \u0432\u044b\u0441\u043e\u0442\u0430 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u043f\u0438\u043a\u0441\u0435\u043b\u044f\u0445.\n* `size` - \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u0432 \u0431\u0430\u0439\u0442\u0430\u0445.\n* `hash` - SHA-1 \u0445\u044d\u0448 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430.\n* `created_at` - \u0434\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u043c\u043e\u0434\u0435\u043b\u0438.\n* `uploaded_at` - \u0434\u0430\u0442\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430.\n* `modified_at` - \u0434\u0430\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438.\n\n\u041a \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f\u043c \u043c\u043e\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f \u043f\u0440\u044f\u043c\u043e \u0438\u0437 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 `UploadedImage`:\n```python\npage.versatile_image.desktop.url\n```\n\n## Collections\n\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u2014 \u044d\u0442\u043e \u043c\u043e\u0434\u0435\u043b\u044c, \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u0443\u044e\u0449\u0430\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u0434\u0440\u0443\u0433\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \n(\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438). \u0412 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \n\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u043e\u0442\u043e-\u0433\u0430\u043b\u0435\u0440\u0435\u044e \u0438\u043b\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u0439\u043b\u043e\u0432.\n\n\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043b\u0430\u0441\u0441, \u0443\u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \n\u043e\u0442 `Collection` \u0438 \u043e\u0431\u044a\u044f\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0432\u0445\u043e\u0434\u0438\u0442\u044c \n\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043f\u043e\u0434\u043e\u0431\u0435\u043d \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u043f\u043e\u043b\u0435\u0439:\n\n```python\nfrom paper_uploads.models import *\n\n\nclass PageFiles(Collection):\n    svg = ItemField(SVGItem)\n    image = ItemField(ImageItem)\n    file = ItemField(FileItem)\n``` \n\n\u041f\u0441\u0435\u0432\u0434\u043e-\u043f\u043e\u043b\u0435 `ItemField` \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043c\u043e\u0434\u0435\u043b\u044c \n\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u043a \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u0438\u043c\u0435\u043d\u0435\u043c, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \n\u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 (\u0432 \u043f\u043e\u043b\u0435 `item_type`) \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u043e\u043c. \n\u041f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0438\u043c\u0435\u043d \u043f\u0441\u0435\u0432\u0434\u043e-\u043f\u043e\u043b\u0435\u0439 \u0438\u043b\u0438 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u044b\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \n\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u043c, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \n\u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0411\u0414.\n\n\u0412\u043c\u0435\u0441\u0442\u0435 \u0441 \u043c\u043e\u0434\u0435\u043b\u044c\u044e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430, \u0432 \u043f\u043e\u043b\u0435 `ItemField` \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \n[\u0432\u0430\u043b\u0438\u0434\u0430\u0442\u043e\u0440\u044b](#Validators) \u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \n(\u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435 `options`), \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u044b \u0434\u043b\u044f \n\u0431\u043e\u043b\u0435\u0435 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438.\n\n\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: \n\u043f\u0435\u0440\u0432\u044b\u0439 \u043a\u043b\u0430\u0441\u0441, \u0447\u0435\u0439 \u043c\u0435\u0442\u043e\u0434 `file_supported()` \u0432\u0435\u0440\u043d\u0435\u0442 `True`, \n\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442 \u043c\u043e\u0434\u0435\u043b\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 `FileItem` \u0434\u043e\u043b\u0436\u0435\u043d \n\u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c, \u0442.\u043a. \u043e\u043d \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043b\u044e\u0431\u044b\u0435 \u0444\u0430\u0439\u043b\u044b.\n\n\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u0443\u044e \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043a \u043c\u043e\u0434\u0435\u043b\u044f\u043c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \n`CollectionField`:\n\n```python\nfrom django.db import models\nfrom paper_uploads.models import *\n\n\nclass PageFiles(Collection):\n    svg = ItemField(SVGItem)\n    image = ItemField(ImageItem)\n    file = ItemField(FileItem)\n\n\nclass Page(models.Model):\n    files = CollectionField(PageFiles)\n```\n\n---\n\n\u0412 \u0441\u043e\u0441\u0442\u0430\u0432 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0432\u0445\u043e\u0434\u044f\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u043b\u0430\u0441\u0441\u044b \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432:\n* `FileItem`. \u041c\u043e\u0436\u0435\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043b\u044e\u0431\u043e\u0439 \u0444\u0430\u0439\u043b. \u0418\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u0438 \n\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u044d\u0442\u043e\u0442 \u0442\u0438\u043f \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c.\n* `SVGItem`. \u0424\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e \u0438\u0434\u0435\u043d\u0438\u0447\u0435\u043d `FileItem`, \u043d\u043e \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435 \u0432\u043c\u0435\u0441\u0442\u043e \n\u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u043e\u0439 \u0438\u043a\u043e\u043d\u043a\u0438 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0430\u043c\u043e SVG-\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435.\n* `ImageItem`. \u0414\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u043d\u0430\u0440\u0435\u0437\u043a\u0438 \n\u043d\u0430 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.\n\n\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0432\u0443\u043c\u044f \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438:\n1) \u0432 \u0447\u043b\u0435\u043d\u0435 \u043a\u043b\u0430\u0441\u0441\u0430 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 `VARIATIONS`:\n\n    ```python\n    from paper_uploads.models import *\n\n    class PageGallery(Collection):\n        VARIATIONS = dict(\n            mobile=dict(\n                size=(640, 0),\n                clip=False            \n            )        \n        )       \n        image = ItemField(ImageItem)\n    ```\n\n2) \u0432 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 \u043f\u043e\u043b\u044f `ItemField` \u043f\u043e \u043a\u043b\u044e\u0447\u0443 `variations`:\n\n    ```python\n    from paper_uploads.models import *\n\n    class PageGallery(Collection):\n        image = ItemField(ImageItem, options={\n            'variations': dict(\n                mobile=dict(\n                    size=(640, 0),\n                    clip=False            \n                )        \n            )       \n        })\n    ```\n\n\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0432\u044b\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c (\u0447\u0435\u0440\u0435\u0437 `VARIATIONS` \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438), \n\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0432\u0441\u0435\u043c\u0438 \u043a\u043b\u0430\u0441\u0441\u0430\u043c\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432-\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.\n\u041d\u043e, \u0435\u0441\u043b\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u0442 \u0441\u0432\u043e\u0438 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 (\u0432\u0442\u043e\u0440\u044b\u043c \u043c\u0435\u0442\u043e\u0434\u043e\u043c), \u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u0438\u043c\u0435\u043d\u043d\u043e \u0438\u0445.\n\n### ImageCollection\n\n\u0414\u043b\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044b\u0445 \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \n\"\u0438\u0437 \u043a\u043e\u0440\u043e\u0431\u043a\u0438\" \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u043b\u044f \u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f `ImageCollection`.\n\u041a \u043d\u0435\u0439 \u0443\u0436\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u043a\u043b\u0430\u0441\u0441 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432-\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439.\n\n```python\nfrom paper_uploads.models import *\n\n\nclass PageGallery(ImageCollection):\n    VARIATIONS = dict(\n        wide=dict(\n            size=(1600, 0),\n            clip=False,\n        ),\n        desktop=dict(\n            size=(1280, 0),\n            clip=False,\n        ),\n        tablet=dict(\n            size=(960, 0),\n            clip=False,\n        ),\n        mobile=dict(\n            size=(640, 0),\n        )\n    )\n```\n\n---\n\n\u041d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442 `Collection` \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\n[proxy-\u043c\u043e\u0434\u0435\u043b\u044c](https://docs.djangoproject.com/en/2.2/topics/db/models/#proxy-models).\n\u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e \n\u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 \u0411\u0414, \u043d\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a \u043c\u043e\u0434\u0435\u043b\u0438 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \n\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u043e\u043b\u0435\u0439. \n\n\u0427\u0442\u043e\u0431\u044b \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 \u043d\u0435 \u0441\u043c\u0435\u0448\u0438\u0432\u0430\u043b\u0438\u0441\u044c \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \n\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 `objects` \u0432 \u043a\u043b\u0430\u0441\u0441\u0435 `Collection` \u0431\u044b\u043b \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0434\u043b\u044f \u0442\u043e\u0433\u043e, \n\u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0432\u043e \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 `ContentType` \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \n\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430\u0434 \u0442\u0435\u043c\u0438 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u043c\u0438, \u043a\u043b\u0430\u0441\u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u043c\u0443.\n\n```python\n# \u0412\u0435\u0440\u043d\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u043a\u043b\u0430\u0441\u0441\u0430 MyCollection\nMyCollection.objects.all()\n\n# \u0412\u0435\u0440\u043d\u0435\u0442 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e \u0432\u0441\u0435 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439, \u0432\u0441\u0435\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432\nMyCollection._base_manager.all()\n```\n\n## Programmatically upload files\n```python\nfrom paper_uploads.models import *\n\n\n# file / image\nwith open('file.doc', 'rb') as fp:\n    file = UploadedFile()\n    file.attach_file(fp)\n    file.save()\n\n\n# gallery\ngallery = PageGallery.objects.create()\nwith open('image.jpg', 'rb') as fp:\n    item = ImageItem()\n    item.attach_to(gallery)\n    item.attach_file(fp)\n    item.save()\n```\n\n## Management Commands\n#### check_uploads\n\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \n\u0438 \u0432\u044b\u0432\u043e\u0434\u0438\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442. \n\n\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u043c\u044b\u0445 \u0442\u0435\u0441\u0442\u043e\u0432:\n* \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435\n* \u0434\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439\n* \u043c\u043e\u0434\u0435\u043b\u044c-\u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 (\u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0430\u044f \u0432 `owner_app_label` \n\u0438 `owner_model_name`) \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442\n* \u0432 \u043c\u043e\u0434\u0435\u043b\u0438-\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u043b\u0435 `owner_fieldname`\n* \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0435\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043c\u043e\u0434\u0435\u043b\u0438-\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \n\u0441\u043e \u0441\u0441\u044b\u043b\u043a\u043e\u0439 \u043d\u0430 \u0444\u0430\u0439\u043b\n* \u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 \u0443\u043a\u0430\u0437\u0430\u043d \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0438 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \n`item_type`\n* \u043c\u043e\u0434\u0435\u043b\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \n\u0434\u043b\u044f `item_type`\n\n\u041f\u0440\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0438 \u043a\u043b\u044e\u0447\u0430 `--fix-missing` \u0432\u0441\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0431\u0443\u0434\u0443\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u0430\u043d\u044b \n\u0438\u0437 \u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u043e\u0432.\n\n```shell\npython3 manage.py check_uploads --fix-missing\n```\n\n#### clean_uploads\n\u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u043c\u0443\u0441\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0411\u0414 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \n\u043d\u0435\u0442 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430) \u0438 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0438\u0445 \u0443\u0434\u0430\u043b\u0438\u0442\u044c.\n\n\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0444\u043e\u0440\u043c\u044b \n\u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435. \u0418\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e, \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0444\u0430\u0439\u043b \n\u0431\u0443\u0434\u0435\u0442 \u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \"\u0441\u0438\u0440\u043e\u0442\u043e\u0439\". \u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0442\u0430\u043a\u0438\u0435 \u0444\u0430\u0439\u043b\u044b \u043d\u0435 \u0443\u0434\u0430\u043b\u044f\u043b\u0438\u0441\u044c, \n\u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0444\u0438\u043b\u044c\u0442\u0440, \u043e\u0442\u0441\u0435\u0438\u0432\u0430\u044e\u0449\u0438\u0439 \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b, \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \n\u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 30 \u043c\u0438\u043d\u0443\u0442. \u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438\n(\u0432 \u043c\u0438\u043d\u0443\u0442\u0430\u0445) \u043c\u043e\u0436\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u043a\u043b\u044e\u0447 `--min-age`.  \n\n```shell\npython3 manage.py clean_uploads --min-age=10\n```\n\n#### recreate_variations\n\u041f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u0430\u0435\u0442 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439.\n\n\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0432 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435:\n```shell\npython3 manage.py recreate_variations --interactive\n```\n\n\u0412\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u0432\u044b\u0437\u043e\u0432 \u0438 \u0432 \u043d\u0435\u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \n\u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0432\u0438\u0434\u0430 \n`AppLabel.ModelName` \u0438 \u0438\u043c\u044f \u043f\u043e\u043b\u044f, \u0441\u0441\u044b\u043b\u0430\u044e\u0449\u0435\u0433\u043e\u0441\u044f \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435.\n\n```shell\npython3 manage.py recreate_variations 'app.Page' 'image'\n```\n\n\u0415\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u0430\u0442\u044c \u043d\u0435 \u0432\u0441\u0435 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435, \n\u0442\u043e \u0438\u0445 \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 `--variations`.\n\n```shell\npython3 manage.py recreate_variations 'app.Page' 'image' --variations big small\n```\n\n\u0422\u0430\u043a\u0436\u0435, \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0434, \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445\n\u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u043e\u0432 `UploadedImage` \u0438\u043b\u0438 `ImageItem`:\n```python\n# \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u043a\u0430 `big` \u0438 `medium` \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043f\u043e\u043b\u044f ImageField\npage.image.recut(['big', 'medium'])\n\n# \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u043a\u0430 \u0432\u0441\u0435\u0445 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u0433\u0430\u043b\u0435\u0440\u0435\u0438\nfor image in page.gallery.get_items('image'):\n    image.recut()\n```\n\n## Validators\n\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u043d\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \n\u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u0430\u043b\u0438\u0434\u0430\u0442\u043e\u0440\u044b:\n* `SizeValidator` - \u0437\u0430\u0434\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \n\u0444\u0430\u0439\u043b\u0430 \u0432 \u0431\u0430\u0439\u0442\u0430\u0445.\n* `ExtensionValidator` - \u0437\u0430\u0434\u0430\u0435\u0442 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432.\n* `MimetypeValidator` - \u0437\u0430\u0434\u0430\u0435\u0442 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 MIME \u0442\u0438\u043f\u044b \u0444\u0430\u0439\u043b\u043e\u0432.\n* `ImageMinSizeValidator` - \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \n\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0445 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439.\n* `ImageMaxSizeValidator` - \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \n\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0445 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439.\n\n```python\nfrom django.db import models\nfrom django.utils.translation import ugettext_lazy as _\nfrom paper_uploads.models import * \nfrom paper_uploads.validators import *\n\nclass Page(models.Model):\n    image = ImageField(_('image'), blank=True, validators=[\n        SizeValidator(10 * 1024 * 1024),   # max 10Mb\n        ImageMaxSizeValidator(800, 800)    # max dimensions 800x800\n    ])\n\n\nclass PageGallery(Collection):\n    file = ItemField(FileItem, validators=[\n        SizeValidator(10 * 1024 * 1024), \n    ])\n```\n\n## Postprocessing\n\n\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 `paper-uploads` \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \n\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434 \u043d\u0430\u0434 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u043c\u0438 \u0444\u0430\u0439\u043b\u0430\u043c\u0438. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \n\u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0432\u043e\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430. \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \n\u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b\u0445\u043e\u0434\u044f\u0442 \u0437\u0430 \u0440\u0430\u043c\u043a\u0438 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 Python.\n\n**\u041f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e\n\u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 `django.core.files.storage.FileSystemStorage`**.\n\n\u041f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0430 \u043d\u0430 \u0434\u0432\u0435 \u0433\u0440\u0443\u043f\u043f\u044b: \n* \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\n* \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b\n\n### Options\n\u041a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0444\u043e\u0440\u043c\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0432\u0438\u0434\u0435 \u0441\u043b\u043e\u0432\u0430\u0440\u044f. \n\n\u041a\u043b\u044e\u0447\u043e\u043c \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u0444\u0430\u0439\u043b\u0430. \u0414\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \n\u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0438\u043c\u0435\u043d\u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u043f\u0440\u0438\u043d\u044f\u0442\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0435 \u0432 \n\u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435 [Pillow](https://pillow.readthedocs.io/en/stable/handbook/image-file-formats.html).\n\u0412 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u044d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c `jpeg`, \u0430 \u043d\u0435 `jpg`.\n\u0414\u043b\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432, \u0438\u043c\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u2014 \u044d\u0442\u043e \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430.\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u043b\u043e\u0432\u0430\u0440\u044c, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c *\u0434\u043e\u043b\u0436\u0435\u043d* \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \n\u043a\u043b\u044e\u0447 `command`, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u043f\u0443\u0442\u044c \u043a \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u043e\u043c\u0443 \u0444\u0430\u0439\u043b\u0443. \n\u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e, \u0432 \u043a\u043b\u044e\u0447\u0435 `arguments` \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \n\u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u044b. \u0412 \u0441\u0442\u0440\u043e\u043a\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \n\u0448\u0430\u0431\u043b\u043e\u043d\u043d\u0443\u044e \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e `{file}`, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u0430 \u043d\u0430 \n\u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u044b\u0439 \u043f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.\n\n\u041a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e - \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435\n`POSTPROCESS` \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438:\n```python\nPAPER_UPLOADS = {\n    'POSTPROCESS': {\n        'jpeg': {\n            'command': 'jpeg-recompress',\n            'arguments': '--quality high \"{file}\" \"{file}\"',\n        },\n        'png': {\n            'command': 'pngquant',\n            'arguments': '--force --skip-if-larger --output \"{file}\" \"{file}\"'\n        },\n    }\n}\n```\n\n\u0414\u043b\u044f \u043e\u0442\u043c\u0435\u043d\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 `False`\n\u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 `postprocess` \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.\n\n### Image postprocessing\n\n\u041f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043a \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f\u043c. \u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \n\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0431\u0435\u0437 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043e\u0441\u0442\u0430\u044e\u0442\u0441\u044f \u043d\u0435\u0442\u0440\u043e\u043d\u0443\u0442\u044b\u043c\u0438.\n\n\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438.\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043b\u044e\u0431\u0443\u044e \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443:\n```python\nclass Page(models.Model):\n    image = ImageField(_('image'), blank=True,\n        variations=dict(\n            desktop=dict(\n                # ...\n                postprocess=False,\n            )\n        )\n    )\n```\n\n\u0418\u043b\u0438 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e:\n```python\nclass Page(models.Model):\n    image = ImageField(_('image'), blank=True,\n        variations=dict(\n            desktop=dict(\n                # ...\n                postprocess=dict(\n                    jpeg=False,     # disable\n                    webp={          # override\n                        'command': 'echo',\n                        'arguments': '\"{file}\"',\n                    }                \n                )\n            )\n        )\n    )\n```\n\n**NOTE**: \u043d\u0435 \u043f\u0443\u0442\u0430\u0439\u0442\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 `postprocess`\n\u0441 `pilkit`-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430\u043c\u0438, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u043c\u0438 \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 `postprocessors`.\n\n\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u0445 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u043c\u043e\u0436\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \n\u043f\u0441\u0435\u0432\u0434\u043e-\u043f\u043e\u043b\u0435 `ItemField`:\n```python\nclass PageFiles(Collection):\n    image = ItemField(ImageItem, postprocess={\n        'jpeg': {\n            'command': 'jpegtran',     \n            'arguments': '\"{file}\"', \n        }              \n    })\n    file = ItemField(FileItem)\n```\n\n### Common postprocessing\n\n\u0414\u043b\u044f \u0444\u0430\u0439\u043b\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435 \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c, \u0442\u043e\u0436\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \n\u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \"\u0444\u043e\u0440\u043c\u0430\u0442\u043e\u043c\" \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \n\u0444\u0430\u0439\u043b\u0430.\n\n\u0412 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u0433\u0434\u0435 \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043a \n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f\u043c, \u0434\u043b\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0430\u043c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b.\n\u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0435\u0441\u0442\u044c \u0440\u0438\u0441\u043a **\u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f** \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430.\n\n**NOTE**: \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 [django-rq](https://github.com/rq/django-rq)\n\u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438.\n\u0418\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e, \u043f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435, \u0432\u0438\u0434\u0436\u0435\u0442 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \n\u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 **\u0434\u043e** \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438.\n\n\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 `postprocess` \n\u043f\u043e\u043b\u044f `FileField`:\n```python\nclass Page(models.Model):\n    file = FileField(_('file'), postprocess={\n        'svg': {\n            'command': 'svgo',        \n            'arguments': '--precision=4 \"{file}\"',        \n        }           \n    })\n```\n\n\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u0445 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u043c\u043e\u0436\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \n\u043f\u0441\u0435\u0432\u0434\u043e-\u043f\u043e\u043b\u0435 `ItemField`:\n```python\nclass PageFiles(Collection):\n    svg = ItemField(SVGItem, postprocess={\n        'svg': {\n            'command': 'svgo',     \n            'arguments': '--precision=4 \"{file}\"', \n        }              \n    })\n    file = ItemField(FileItem)\n```\n\n## Variation versions\n\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c, \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043d\u0443\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c \u0432 \u0442\u0440\u0435\u0445 \n\u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430\u0445: `desktop`, `tablet` \u0438 `mobile`. \u0415\u0441\u043b\u0438 \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \nRetina \u0434\u0438\u0441\u043f\u043b\u0435\u0438, \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c, \u0434\u0432\u0435 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \n\u0434\u043b\u044f \u0440\u0430\u0437\u043c\u0435\u0440\u0430 `2x`. \u0415\u0441\u043b\u0438 \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u0435\u0449\u0451 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442 `WebP` \u0441\n\u043e\u0431\u0440\u0430\u0442\u043d\u043e\u0439 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c\u044e, \u0442\u043e \u043e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u0443\u043c\u043d\u043e\u0436\u0430\u0435\u0442\u0441\u044f \u043d\u0430 2 \n\u0438 \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0435\u0442 10.\n\n\u041f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 Retina-\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u043e\u0442\u043b\u0438\u0447\u0430\u044e\u0442\u0441\u044f \u043e\u0442 \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u043d\u044b\u043c \n\u043d\u0430 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0439 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c, \u0430 `WebP`-\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u2014 \u043f\u0440\u0438\u043d\u0443\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \n\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0435\u0439 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442 `WebP`, \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u044d\u0442\u0438 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \n\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438. \n\n\u0414\u043b\u044f \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0438\u043c\u0435\u044e\u0449\u0435\u0439 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u0435\u0440\u0441\u0438\u0439, \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \n\u0430\u043b\u0438\u0430\u0441\u044b \u044d\u0442\u0438\u0445 \u0432\u0435\u0440\u0441\u0438\u0439 \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 `versions`. \u041a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0443\u044f \u044d\u0442\u0438 \u0430\u043b\u0438\u0430\u0441\u044b \n\u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0431\u043e\u0439, \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u0441\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 *\u043d\u0435\u044f\u0432\u043d\u044b\u0435* \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.\n\n```python\nclass Page(models.Model):\n    image = ImageField(_('image'), blank=True,\n        variations=dict(\n            desktop=dict(\n                # ...\n                versions={'webp', '2x', '3x'}\n            )\n        )\n    )\n```\n\n\u041f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0439 \u0432\u044b\u0448\u0435 \u043a\u043e\u0434 \u0441\u043e\u0437\u0434\u0430\u0441\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438:\n* `desktop` - \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f\n* `desktop_webp` - `WebP`-\u0432\u0435\u0440\u0441\u0438\u044f \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438\n* `desktop_2x` - Retina 2x\n* `desktop_webp_2x` - `WebP`-\u0432\u0435\u0440\u0441\u0438\u044f Retina 2x\n* `desktop_3x` - Retina 3x\n* `desktop_webp_3x` - `WebP`-\u0432\u0435\u0440\u0441\u0438\u044f Retina 3x\n\n**NOTE**: \u0421\u0443\u0444\u0444\u0438\u043a\u0441 \u0434\u043b\u044f Retina \u0432\u0441\u0435\u0433\u0434\u0430 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u043e\u0441\u043b\u0435 \u0441\u0443\u0444\u0444\u0438\u043a\u0441\u0430 `WebP`.\n\n\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0430\u043b\u0438\u0430\u0441\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439: `webp`, `2x`, `3x`, `4x`.\n\u041a\u0430\u0436\u0434\u0430\u044f \u043d\u0435\u044f\u0432\u043d\u0430\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043b\u043d\u043e\u0446\u0435\u043d\u043d\u043e\u0439 \u0438 \u043e\u0431\u043b\u0430\u0434\u0430\u0435\u0442 \n\u0442\u043e\u0447\u043d\u043e \u0442\u0430\u043a\u0438\u043c\u0438 \u0436\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438, \u0447\u0442\u043e \u0438 \u043b\u044e\u0431\u0430\u044f \u0434\u0440\u0443\u0433\u0430\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f. \n\n\u0415\u0441\u043b\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0442\u043e \u043f\u0440\u0438\u0434\u0451\u0442\u0441\u044f \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044e \u044f\u0432\u043d\u043e \u2014 \u043e\u043d\u0430 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0448\u0435\u0442 \n\u043e\u0434\u043d\u043e\u0438\u043c\u0435\u043d\u043d\u0443\u044e \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044e.\n\n```python\nclass Page(models.Model):\n    image = ImageField(_('image'), blank=True,\n        variations=dict(\n            desktop=dict(\n                size=(800, 600),\n                versions={'webp', '2x', '3x'}\n            ),\n            desktop_2x=dict(\n                size=(1600, 1200),\n                jpeg=dict(\n                    quality=72                \n                )      \n            )   \n        )\n    )\n```\n\n## Cloudinary\n\u0412\u043e \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u043c \u043c\u043e\u0434\u0443\u043b\u0435 `paper_uploads.cloudinary` \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u043f\u043e\u043b\u044f \u0438 \u043a\u043b\u0430\u0441\u0441\u044b, \n\u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0449\u0438\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0432 \u043e\u0431\u043b\u0430\u0447\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 Cloudinary. \n\u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0438 \u043d\u0430\u0440\u0435\u0437\u043a\u0430 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043d\u0435 \u0438\u043c\u0435\u044e\u0442 \u0441\u043c\u044b\u0441\u043b\u0430, \n\u0438 \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b.\n\n### Installation\n1) `pip install cloudinary`\n2) \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c `paper_uploads.cloudinary` \u0438 `cloudinary` \u0432 `INSTALLED_APPS`.\n    ```python\n    INSTALLED_APPS = [\n        # ...\n        'paper_uploads',\n        'paper_uploads.cloudinary',\n        'cloudinary',\n        # ...\n    ]\n    ```\n3) \u0417\u0430\u0434\u0430\u0442\u044c [\u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438](https://github.com/cloudinary/pycloudinary#configuration) Cloudinary\n    ```python\n    CLOUDINARY = {\n       'cloud_name': 'mycloud',\n       'api_key': '012345678901234',\n       'api_secret': 'g1rtyOCvm4tDIfCPFFuh4u1W0PC'\n    }\n    ```\n\n### Model fields\n```python\nfrom paper_uploads.cloudinary.models import *\n\nclass Page(models.Model):\n    file = CloudinaryFileField(_('file'), blank=True)\n    media = CloudinaryMediaField(_('media'), blank=True)\n    image = CloudinaryImageField(_('image'), blank=True)\n```\n\n### Collections\n\u0412 \u043c\u043e\u0434\u0443\u043b\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u043e \u0442\u0440\u0438 \u043a\u043b\u0430\u0441\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438: \n`CloudinaryFileItem`, `CloudinaryImageItem` \u0438 \n`CloudinaryMediaItem` (\u0434\u043b\u044f \u0430\u0443\u0434\u0438\u043e \u0438 \u0432\u0438\u0434\u0435\u043e).\n\n**NOTE**: \u0412 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 `PIL`, Cloudinary \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \n\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 SVG-\u0444\u0430\u0439\u043b\u043e\u0432 \u043a\u0430\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0434\u043b\u044f SVG-\u0444\u0430\u0439\u043b\u043e\u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \n\u043a\u043b\u0430\u0441\u0441 \u043d\u0435 \u043d\u0443\u0436\u0435\u043d.\n\n\u041a\u043b\u0430\u0441\u0441\u044b \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 Cloudinary \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0442\u0430\u043a\u0436\u0435 \u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u044b\u0435:\n```python\nfrom paper_uploads.models import *\nfrom paper_uploads.cloudinary.models import *\n\n\nclass PageFiles(Collection):\n    image = ItemField(CloudinaryImageItem)\n    file = ItemField(CloudinaryFileItem)\n\n\nclass Page(models.Model):\n    files = CollectionField(PageFiles)\n```\n\n\u0422\u0430\u043a\u0436\u0435, \u043a\u0430\u043a \u0438 \u0434\u043b\u044f \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439, \u0434\u043b\u044f Cloudinary \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u043e \n\u0434\u0432\u0430 \u043a\u043b\u0430\u0441\u0441\u0430 \u0433\u043e\u0442\u043e\u0432\u044b\u0445 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439: `CloudinaryCollection` \n\u0438 `CloudinaryImageCollection`. `CloudinaryCollection` \u043c\u043e\u0436\u0435\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \n\u043b\u044e\u0431\u044b\u0435 \u0444\u0430\u0439\u043b\u044b, \u0430 `CloudinaryImageCollection` \u2014 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f.\n\n```python\nfrom paper_uploads.models import *\nfrom paper_uploads.cloudinary.models import *\n\n\nclass PageFiles(CloudinaryCollection):\n    pass\n\n\nclass PageGallery(CloudinaryImageCollection):\n    pass\n\n\nclass Page(models.Model):\n    files = CollectionField(PageFiles)\n    gallery = CollectionField(PageGallery)\n```\n\n### Usage\n\u0412 \u0448\u0430\u0431\u043b\u043e\u043d\u0430\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d Jinja2-\u0430\u043d\u0430\u043b\u043e\u0433 \u0448\u0430\u0431\u043b\u043e\u043d\u043d\u043e\u0433\u043e \u0442\u044d\u0433\u0430 `cloudinary_url`,\n\u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0432 \u0441\u043e\u0441\u0442\u0430\u0432 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 [cloudinary](https://github.com/cloudinary/pycloudinary).\n```jinja2\n<img src={% cloudinary_url page.image width=1024 crop=fill %}>\n```\n\n\u0422\u0430\u043a\u0436\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043e\u0434\u043d\u043e\u0438\u043c\u0435\u043d\u043d\u0430\u044f \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f:\n```jinja2\n<img src={{ cloudinary_url(page.image, width=1024, crop='fill') }}>\n```\n\n## Settings\n\u0412\u0441\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435 `PAPER_UPLOADS`.\n\n```python\nPAPER_UPLOADS = {\n    'RQ_ENABLED': True,\n    'VARIATION_DEFAULTS': {\n        'jpeg': dict(\n            quality=80,\n            progressive=True,\n        ),\n        'webp': dict(\n            quality=75,\n        )\n    },\n    'POSTPROCESS': {\n        'jpeg': {\n            'command': 'jpeg-recompress',\n            'arguments': '--quality high \"{file}\" \"{file}\"',\n        },\n        'png': {\n            'command': 'pngquant',\n            'arguments': '--force --skip-if-larger --output \"{file}\" \"{file}\"'\n        },\n        'svg': {\n            'command': 'svgo',\n            'arguments': '--precision=4 \"{file}\"',\n        },   \n    }\n}\n```\n\n### STORAGE\n\u041f\u0443\u0442\u044c \u043a \u043a\u043b\u0430\u0441\u0441\u0443 [\u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 Django](https://docs.djangoproject.com/en/2.2/ref/files/storage/).\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `django.core.files.storage.FileSystemStorage`\n\n### STORAGE_OPTIONS\n\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430.\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `{}`\n\n### FILES_UPLOAD_TO\n\u041f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b \u0438\u0437 FileField.\n\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043b\u044f \u0434\u0430\u0442\u044b \u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 (\u0441\u043c. [upload_to](https://docs.djangoproject.com/en/2.2/ref/models/fields/#django.db.models.FileField.upload_to)). \n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `files/%Y-%m-%d`\n\n### IMAGES_UPLOAD_TO\n\u041f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b \u0438\u0437 ImageField.\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `images/%Y-%m-%d`\n\n### COLLECTION_FILES_UPLOAD_TO\n\u041f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439.\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `collections/files/%Y-%m-%d`\n\n### COLLECTION_IMAGES_UPLOAD_TO\n\u041f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439.\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `collections/images/%Y-%m-%d`\n\n### COLLECTION_ITEM_PREVIEW_WIDTH, COLLECTION_ITEM_PREVIEW_HEIGTH\n\u0420\u0430\u0437\u043c\u0435\u0440\u044b \u043f\u0440\u0435\u0432\u044c\u044e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435.\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `144` x `108`\n\n### COLLECTION_IMAGE_ITEM_PREVIEW_VARIATIONS\n\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0435 \u043a \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043b\u0430\u0441\u0441\u0443 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 \n\u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0435\u0432\u044c\u044e \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435. \u0420\u0430\u0437\u043c\u0435\u0440\u044b \u0444\u0430\u0439\u043b\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u044b \n\u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0441 `COLLECTION_ITEM_PREVIEW_WIDTH` \u0438 \n`COLLECTION_ITEM_PREVIEW_HEIGTH`.\n\n### RQ_ENABLED\n\u0412\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0430\u0440\u0435\u0437\u043a\u0443 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u043d\u0430 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438.\n\u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0435\u0442\u0430 [django-rq](https://github.com/rq/django-rq).\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `False`\n\n### RQ_QUEUE_NAME\n\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043f\u043e\u043c\u0435\u0449\u0430\u044e\u0442\u0441\u044f \u0437\u0430\u0434\u0430\u0447\u0438 \u043f\u043e \u043d\u0430\u0440\u0435\u0437\u043a\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a. \n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `default`\n\n### VARIATION_DEFAULTS\n\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.\n\n\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u043e\u0432\u0430\u0440\u0435, \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b \u043a \u043a\u0430\u0436\u0434\u043e\u0439 \n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0435\u0441\u043b\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f \u0438\u0445 \u044f\u0432\u043d\u043e \u043d\u0435 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442.\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `{}`\n\n### POSTPROCESS\n\u0421\u043b\u043e\u0432\u0430\u0440\u044c, \u0437\u0430\u0434\u0430\u044e\u0449\u0438\u0439 shell-\u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c\u044b\u0435 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \n\u0444\u0430\u0439\u043b\u043e\u0432. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443.\n\n\u041a\u043b\u044e\u0447\u0430\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u043e\u0432 \u0444\u0430\u0439\u043b\u043e\u0432.\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: `jpeg`, `png`, `gif`, `webp`, `svg`.\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: `{}`\n\n### CLOUDINARY\n\u0421\u043b\u043e\u0432\u0430\u0440\u044c, \u0437\u0430\u0434\u0430\u044e\u0449\u0438\u0439 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 [\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438](https://cloudinary.com/documentation/image_upload_api_reference#required_parameters)\n\u0434\u043b\u044f cloudinary.\n\n\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: \n```python\n{\n    'use_filename': True,\n    'unique_filename': True,\n    'overwrite': True,\n}\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/dldevinc/paper-uploads", "keywords": "", "license": "BSD", "maintainer": "Mihail Mishakin", "maintainer_email": "x896321475@gmail.com", "name": "paper-uploads", "package_url": "https://pypi.org/project/paper-uploads/", "platform": "OS Independent", "project_url": "https://pypi.org/project/paper-uploads/", "project_urls": {"Homepage": "https://github.com/dldevinc/paper-uploads"}, "release_url": "https://pypi.org/project/paper-uploads/0.3.0/", "requires_dist": ["Django (<3.1,>=2.1)", "variations (>=0.0.15)", "filetype", "python-magic", "django-polymorphic", "django-rq (>=2.1) ; extra == 'all'", "cloudinary ; extra == 'all'", "face-recognition ; extra == 'all'", "cloudinary ; extra == 'cloudinary'", "face-recognition ; extra == 'facedetection'", "django-rq (>=2.1) ; extra == 'rq'", "django ; extra == 'testing'", "requests ; extra == 'testing'", "paper-admin (>=0.0.8) ; extra == 'testing'", "django-rq (>=2.1) ; extra == 'testing'", "cloudinary ; extra == 'testing'", "face-recognition ; extra == 'testing'", "python-dotenv ; extra == 'testing'", "pytest ; extra == 'testing'", "pytest-django ; extra == 'testing'", "pytest-env ; extra == 'testing'", "pytest-cov ; extra == 'testing'", "pytest-xdist ; extra == 'testing'"], "requires_python": ">=3.5", "summary": "A django app that provides suggestions while you type into the field.", "version": "0.3.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>paper-uploads</h1>\n<p><a href=\"https://pypi.org/project/paper-uploads/\" rel=\"nofollow\"><img alt=\"PyPI-Server\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ccd3b3601472dca12626e0bce757ba967b9b2574/68747470733a2f2f62616467652e667572792e696f2f70792f70617065722d75706c6f6164732e737667\"></a></p>\n<p><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/69073302d939a31716cc0cd2da0ef3b4a309f774/687474703a2f2f6a6f78692e6e65742f676d766e475a4274714b4f4f6a6d2e706e67\"></p>\n<p>\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u044f \u0434\u043b\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u043e\u0432.</p>\n<h2>Requirements</h2>\n<ul>\n<li>Python 3.5+</li>\n<li>Django 2.1+</li>\n<li><a href=\"https://github.com/dldevinc/paper-admin\" rel=\"nofollow\">paper-admin</a></li>\n<li><a href=\"https://github.com/dldevinc/variations\" rel=\"nofollow\">variations</a></li>\n</ul>\n<h2>Features</h2>\n<ul>\n<li>\u041a\u0430\u0436\u0434\u044b\u0439 \u0444\u0430\u0439\u043b \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u0441\u0432\u043e\u0435\u0439 \u043c\u043e\u0434\u0435\u043b\u044c\u044e, \u0447\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442\n\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043c\u0435\u0442\u0430\u0434\u0430\u043d\u043d\u044b\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, alt \u0438 title \u0434\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f.</li>\n<li>\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e.</li>\n<li>\u041f\u043e\u043b\u044f \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u044b\u043c\u0438\n\u043e\u0442 <code>OneToOneField</code> \u0438 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 <code>&lt;input type=\"file\"&gt;</code>. \u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u044f\n\u044d\u0442\u043e\u043c\u0443, \u043f\u0440\u0438 \u043e\u0448\u0438\u0431\u043a\u0430\u0445 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u043d\u0435 \u0441\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f.</li>\n<li>\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 <a href=\"https://github.com/jschneier/django-storages\" rel=\"nofollow\">django-storages</a>.</li>\n<li>\u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 <a href=\"https://cloudinary.com/documentation/cloudinary_references\" rel=\"nofollow\">Cloudinary</a>.</li>\n<li>\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0440\u0435\u0437\u0430\u0442\u044c \u043d\u0430 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439.\n\u041a\u0430\u0436\u0434\u0430\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f \u0433\u0438\u0431\u043a\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f. \u041c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440\u044b,\n\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0436\u0430\u0442\u0438\u044f, \u0444\u043e\u0440\u043c\u0430\u0442, \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435\n<a href=\"https://github.com/matthewwithanm/pilkit\" rel=\"nofollow\">pilkit</a>-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u044b,\n\u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u0435 \u043b\u0438\u0446 \u0438 \u0434\u0440\u0443\u0433\u043e\u0435. \u0421\u043c.\n<a href=\"https://github.com/dldevinc/variations\" rel=\"nofollow\">variations</a>.</li>\n<li>\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 <a href=\"https://github.com/rq/django-rq\" rel=\"nofollow\">django-rq</a>\n\u0434\u043b\u044f \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0439 \u043d\u0430\u0440\u0435\u0437\u043a\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u043d\u0430 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.</li>\n<li>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u043c\u0438 \u0443\u0442\u0438\u043b\u0438\u0442\u0430\u043c\u0438.\n\u0422\u0430\u043a\u0438\u043c\u0438 \u043a\u0430\u043a <code>mozjpeg</code> \u0438 <code>pngquant</code>.</li>\n<li>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0444\u0430\u0439\u043b\u043e\u0432. \u0412 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0433\u0430\u043b\u0435\u0440\u0435\u0439 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0441\n\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432.</li>\n</ul>\n<h2>Installation</h2>\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"s1\">'paper_uploads'</span><span class=\"p\">,</span>\n    <span class=\"c1\"># ...</span>\n<span class=\"p\">]</span>\n\n<span class=\"n\">PAPER_UPLOADS</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s1\">'VARIATION_DEFAULTS'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'jpeg'</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">quality</span><span class=\"o\">=</span><span class=\"mi\">80</span><span class=\"p\">,</span>\n            <span class=\"n\">progressive</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"p\">),</span>\n        <span class=\"s1\">'webp'</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">quality</span><span class=\"o\">=</span><span class=\"mi\">75</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">},</span>\n    <span class=\"s1\">'POSTPROCESS'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'jpeg'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'jpeg-recompress'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--quality high \"</span><span class=\"si\">{file}</span><span class=\"s1\">\" \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span><span class=\"p\">,</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'png'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'pngquant'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--force --skip-if-larger --output \"</span><span class=\"si\">{file}</span><span class=\"s1\">\" \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'svg'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'svgo'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--precision=4 --disable=convertPathData \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span><span class=\"p\">,</span>\n        <span class=\"p\">},</span>   \n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre>\n<h2>FileField</h2>\n<p>\u041f\u043e\u043b\u0435 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430.</p>\n<p>\u041d\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u043b\u043e\u0436\u0438\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e <a href=\"#Validation\" rel=\"nofollow\">\u0432\u0430\u043b\u0438\u0434\u0430\u0442\u043e\u0440\u043e\u0432</a>.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.utils.translation</span> <span class=\"kn\">import</span> <span class=\"n\">ugettext_lazy</span> <span class=\"k\">as</span> <span class=\"n\">_</span>\n<span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.validators</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">report</span> <span class=\"o\">=</span> <span class=\"n\">FileField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'file'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">validators</span><span class=\"o\">=</span><span class=\"p\">[</span>\n        <span class=\"n\">SizeValidator</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"o\">*</span><span class=\"mi\">1024</span><span class=\"o\">*</span><span class=\"mi\">1024</span><span class=\"p\">)</span>    <span class=\"c1\"># up to 10Mb    </span>\n    <span class=\"p\">])</span>\n</pre>\n<p>\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043c\u043e\u0434\u0435\u043b\u0438 <code>UploadedFile</code>.\n\u041f\u043e\u043c\u0438\u043c\u043e \u0441\u0430\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430, \u0445\u0440\u0430\u043d\u044f\u0449\u0435\u0433\u043e\u0441\u044f \u0432 \u043f\u043e\u043b\u0435 <code>file</code>, \u043c\u043e\u0434\u0435\u043b\u044c \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\n\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u043e\u043b\u044f:</p>\n<ul>\n<li><code>name</code> - \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430 \u0431\u0435\u0437 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0438 \u0441\u0443\u0444\u0444\u0438\u043a\u0441\u0430, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e <code>FileStorage</code>.\n\u041f\u0440\u0438\u043c\u0435\u0440: <code>my_document</code>.</li>\n<li><code>display_name</code>- \u0443\u0434\u043e\u0431\u043e\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0434\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435.\n\u041f\u0440\u0438\u043c\u0435\u0440: <code>\u041e\u0442\u0447\u0451\u0442 \u0437\u0430 2019 \u0433\u043e\u0434</code>.</li>\n<li><code>extension</code> - \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0432 \u043d\u0438\u0436\u043d\u0435\u043c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0435. \u041f\u0440\u0438\u043c\u0435\u0440: <code>doc</code>.</li>\n<li><code>size</code> - \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u0432 \u0431\u0430\u0439\u0442\u0430\u0445.</li>\n<li><code>hash</code> - SHA-1 \u0445\u044d\u0448 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430.</li>\n<li><code>created_at</code> - \u0434\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u043c\u043e\u0434\u0435\u043b\u0438.</li>\n<li><code>uploaded_at</code> - \u0434\u0430\u0442\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430.</li>\n<li><code>modified_at</code> - \u0434\u0430\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438.</li>\n</ul>\n<p>\u041c\u043e\u0434\u0435\u043b\u0438 \u0444\u0430\u0439\u043b\u043e\u0432 (<code>UploadedFile</code>, <code>UploadedImage</code> \u0438 \u043c\u043e\u0434\u0435\u043b\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439)\n\u043f\u0440\u043e\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0430\u0442\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0438 \u043c\u0435\u0442\u043e\u0434\u044b \u0444\u0430\u0439\u043b\u0430 \u043d\u0430 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043c\u043e\u0434\u0435\u043b\u0438:</p>\n<ul>\n<li><code>url</code></li>\n<li><code>path</code></li>\n<li><code>open</code></li>\n<li><code>close</code></li>\n<li><code>closed</code></li>\n<li><code>read</code></li>\n<li><code>seek</code></li>\n<li><code>tell</code></li>\n</ul>\n<p>\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0432\u043c\u0435\u0441\u0442\u043e <code>Page.report.file.url</code> \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\n<code>Page.report.url</code>.</p>\n<h2>ImageField</h2>\n<p>\u041f\u043e\u043b\u0435 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439.</p>\n<p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043d\u0430\u0440\u0435\u0437\u043a\u0443 \u043d\u0430 \u043d\u0435\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439.\n\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u0437\u0430\u0434\u0430\u044e\u0442\u0441\u044f \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435 <code>variations</code>. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439\n\u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u043c\u043e\u0434\u0443\u043b\u0435 <a href=\"https://github.com/dldevinc/variations\" rel=\"nofollow\">variations</a>.</p>\n<p>\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u0432 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0431\u0435\u0437\n\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439. \u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u044b\u0445 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u0438\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445,\n\u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043d\u043e\u0432\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0440\u0435\u0437\u043a\u0443 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u044b\n<a href=\"#recreate_variations\" rel=\"nofollow\">recreate_variations</a>.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.utils.translation</span> <span class=\"kn\">import</span> <span class=\"n\">ugettext_lazy</span> <span class=\"k\">as</span> <span class=\"n\">_</span>\n<span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ImageField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'single image'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">versatile_image</span> <span class=\"o\">=</span> <span class=\"n\">ImageField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'image with variations'</span><span class=\"p\">),</span>\n        <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"n\">variations</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">desktop</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">1600</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n                <span class=\"n\">clip</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>\n                <span class=\"n\">jpeg</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                    <span class=\"n\">quality</span><span class=\"o\">=</span><span class=\"mi\">80</span><span class=\"p\">,</span>\n                    <span class=\"n\">progressive</span><span class=\"o\">=</span><span class=\"kc\">True</span>\n                <span class=\"p\">),</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">tablet</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">1024</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n                <span class=\"n\">clip</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>\n                <span class=\"n\">jpeg</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                    <span class=\"n\">quality</span><span class=\"o\">=</span><span class=\"mi\">75</span><span class=\"p\">,</span>\n                <span class=\"p\">),</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">mobile</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">640</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n                <span class=\"n\">clip</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>\n            <span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n</pre>\n<p>\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043c\u043e\u0434\u0435\u043b\u0438 <code>UploadedImage</code>.\n\u041f\u043e\u043c\u0438\u043c\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0445\u0440\u0430\u043d\u044f\u0449\u0435\u0433\u043e\u0441\u044f \u0432 \u043f\u043e\u043b\u0435 <code>file</code>,\n\u043c\u043e\u0434\u0435\u043b\u044c \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u043e\u043b\u044f:</p>\n<ul>\n<li><code>name</code> - \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430 \u0431\u0435\u0437 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0438 \u0441\u0443\u0444\u0444\u0438\u043a\u0441\u0430, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e <code>FileStorage</code>.\n\u041f\u0440\u0438\u043c\u0435\u0440: <code>summer_photo</code>.</li>\n<li><code>extension</code> - \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0432 \u043d\u0438\u0436\u043d\u0435\u043c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0435. \u041f\u0440\u0438\u043c\u0435\u0440: <code>jpg</code>.</li>\n<li><code>title</code> - \u0442\u0435\u043a\u0441\u0442 \u0430\u0442\u0442\u0440\u0438\u0431\u0443\u0442\u0430 <code>title</code> \u0434\u043b\u044f \u0442\u044d\u0433\u0430 <code>&lt;img&gt;</code>.</li>\n<li><code>description</code> - \u0442\u0435\u043a\u0441\u0442 \u0430\u0442\u0442\u0440\u0438\u0431\u0443\u0442\u0430 <code>alt</code> \u0434\u043b\u044f \u0442\u044d\u0433\u0430 <code>&lt;img&gt;</code>.</li>\n<li><code>width</code> - \u0448\u0438\u0440\u0438\u043d\u0430 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u043f\u0438\u043a\u0441\u0435\u043b\u044f\u0445.</li>\n<li><code>height</code> - \u0432\u044b\u0441\u043e\u0442\u0430 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u043f\u0438\u043a\u0441\u0435\u043b\u044f\u0445.</li>\n<li><code>size</code> - \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u0432 \u0431\u0430\u0439\u0442\u0430\u0445.</li>\n<li><code>hash</code> - SHA-1 \u0445\u044d\u0448 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430.</li>\n<li><code>created_at</code> - \u0434\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u043c\u043e\u0434\u0435\u043b\u0438.</li>\n<li><code>uploaded_at</code> - \u0434\u0430\u0442\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430.</li>\n<li><code>modified_at</code> - \u0434\u0430\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438.</li>\n</ul>\n<p>\u041a \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f\u043c \u043c\u043e\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f \u043f\u0440\u044f\u043c\u043e \u0438\u0437 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 <code>UploadedImage</code>:</p>\n<pre><span class=\"n\">page</span><span class=\"o\">.</span><span class=\"n\">versatile_image</span><span class=\"o\">.</span><span class=\"n\">desktop</span><span class=\"o\">.</span><span class=\"n\">url</span>\n</pre>\n<h2>Collections</h2>\n<p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u2014 \u044d\u0442\u043e \u043c\u043e\u0434\u0435\u043b\u044c, \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u0443\u044e\u0449\u0430\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u0434\u0440\u0443\u0433\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439\n(\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438). \u0412 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e\n\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u043e\u0442\u043e-\u0433\u0430\u043b\u0435\u0440\u0435\u044e \u0438\u043b\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u0439\u043b\u043e\u0432.</p>\n<p>\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043b\u0430\u0441\u0441, \u0443\u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u043d\u044b\u0439\n\u043e\u0442 <code>Collection</code> \u0438 \u043e\u0431\u044a\u044f\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0432\u0445\u043e\u0434\u0438\u0442\u044c\n\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e. \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043f\u043e\u0434\u043e\u0431\u0435\u043d \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u043f\u043e\u043b\u0435\u0439:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">PageFiles</span><span class=\"p\">(</span><span class=\"n\">Collection</span><span class=\"p\">):</span>\n    <span class=\"n\">svg</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">SVGItem</span><span class=\"p\">)</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">ImageItem</span><span class=\"p\">)</span>\n    <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">FileItem</span><span class=\"p\">)</span>\n</pre>\n<p>\u041f\u0441\u0435\u0432\u0434\u043e-\u043f\u043e\u043b\u0435 <code>ItemField</code> \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043c\u043e\u0434\u0435\u043b\u044c\n\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u043a \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u0438\u043c\u0435\u043d\u0435\u043c, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f\n\u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 (\u0432 \u043f\u043e\u043b\u0435 <code>item_type</code>) \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u043e\u043c.\n\u041f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0438\u043c\u0435\u043d \u043f\u0441\u0435\u0432\u0434\u043e-\u043f\u043e\u043b\u0435\u0439 \u0438\u043b\u0438 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u044b\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432\n\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u043c, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e\n\u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0411\u0414.</p>\n<p>\u0412\u043c\u0435\u0441\u0442\u0435 \u0441 \u043c\u043e\u0434\u0435\u043b\u044c\u044e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430, \u0432 \u043f\u043e\u043b\u0435 <code>ItemField</code> \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c\n<a href=\"#Validators\" rel=\"nofollow\">\u0432\u0430\u043b\u0438\u0434\u0430\u0442\u043e\u0440\u044b</a> \u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\n(\u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435 <code>options</code>), \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u044b \u0434\u043b\u044f\n\u0431\u043e\u043b\u0435\u0435 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438.</p>\n<p>\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:\n\u043f\u0435\u0440\u0432\u044b\u0439 \u043a\u043b\u0430\u0441\u0441, \u0447\u0435\u0439 \u043c\u0435\u0442\u043e\u0434 <code>file_supported()</code> \u0432\u0435\u0440\u043d\u0435\u0442 <code>True</code>,\n\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442 \u043c\u043e\u0434\u0435\u043b\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 <code>FileItem</code> \u0434\u043e\u043b\u0436\u0435\u043d\n\u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c, \u0442.\u043a. \u043e\u043d \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043b\u044e\u0431\u044b\u0435 \u0444\u0430\u0439\u043b\u044b.</p>\n<p>\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u0443\u044e \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043a \u043c\u043e\u0434\u0435\u043b\u044f\u043c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e\n<code>CollectionField</code>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n<span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">PageFiles</span><span class=\"p\">(</span><span class=\"n\">Collection</span><span class=\"p\">):</span>\n    <span class=\"n\">svg</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">SVGItem</span><span class=\"p\">)</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">ImageItem</span><span class=\"p\">)</span>\n    <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">FileItem</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">files</span> <span class=\"o\">=</span> <span class=\"n\">CollectionField</span><span class=\"p\">(</span><span class=\"n\">PageFiles</span><span class=\"p\">)</span>\n</pre>\n<hr>\n<p>\u0412 \u0441\u043e\u0441\u0442\u0430\u0432 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0432\u0445\u043e\u0434\u044f\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u043b\u0430\u0441\u0441\u044b \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432:</p>\n<ul>\n<li><code>FileItem</code>. \u041c\u043e\u0436\u0435\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043b\u044e\u0431\u043e\u0439 \u0444\u0430\u0439\u043b. \u0418\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u0438\n\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u044d\u0442\u043e\u0442 \u0442\u0438\u043f \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c.</li>\n<li><code>SVGItem</code>. \u0424\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e \u0438\u0434\u0435\u043d\u0438\u0447\u0435\u043d <code>FileItem</code>, \u043d\u043e \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435 \u0432\u043c\u0435\u0441\u0442\u043e\n\u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u043e\u0439 \u0438\u043a\u043e\u043d\u043a\u0438 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0430\u043c\u043e SVG-\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435.</li>\n<li><code>ImageItem</code>. \u0414\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u043d\u0430\u0440\u0435\u0437\u043a\u0438\n\u043d\u0430 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.</li>\n</ul>\n<p>\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0432\u0443\u043c\u044f \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438:</p>\n<ol>\n<li>\n<p>\u0432 \u0447\u043b\u0435\u043d\u0435 \u043a\u043b\u0430\u0441\u0441\u0430 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 <code>VARIATIONS</code>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">PageGallery</span><span class=\"p\">(</span><span class=\"n\">Collection</span><span class=\"p\">):</span>\n    <span class=\"n\">VARIATIONS</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">(</span>\n        <span class=\"n\">mobile</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">640</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n            <span class=\"n\">clip</span><span class=\"o\">=</span><span class=\"kc\">False</span>            \n        <span class=\"p\">)</span>        \n    <span class=\"p\">)</span>       \n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">ImageItem</span><span class=\"p\">)</span>\n</pre>\n</li>\n<li>\n<p>\u0432 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 \u043f\u043e\u043b\u044f <code>ItemField</code> \u043f\u043e \u043a\u043b\u044e\u0447\u0443 <code>variations</code>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">PageGallery</span><span class=\"p\">(</span><span class=\"n\">Collection</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">ImageItem</span><span class=\"p\">,</span> <span class=\"n\">options</span><span class=\"o\">=</span><span class=\"p\">{</span>\n        <span class=\"s1\">'variations'</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">mobile</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">640</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n                <span class=\"n\">clip</span><span class=\"o\">=</span><span class=\"kc\">False</span>            \n            <span class=\"p\">)</span>        \n        <span class=\"p\">)</span>       \n    <span class=\"p\">})</span>\n</pre>\n</li>\n</ol>\n<p>\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0432\u044b\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c (\u0447\u0435\u0440\u0435\u0437 <code>VARIATIONS</code> \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438),\n\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0432\u0441\u0435\u043c\u0438 \u043a\u043b\u0430\u0441\u0441\u0430\u043c\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432-\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.\n\u041d\u043e, \u0435\u0441\u043b\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u0442 \u0441\u0432\u043e\u0438 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435\n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 (\u0432\u0442\u043e\u0440\u044b\u043c \u043c\u0435\u0442\u043e\u0434\u043e\u043c), \u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u0438\u043c\u0435\u043d\u043d\u043e \u0438\u0445.</p>\n<h3>ImageCollection</h3>\n<p>\u0414\u043b\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044b\u0445 \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439,\n\"\u0438\u0437 \u043a\u043e\u0440\u043e\u0431\u043a\u0438\" \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u043b\u044f \u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f <code>ImageCollection</code>.\n\u041a \u043d\u0435\u0439 \u0443\u0436\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u043a\u043b\u0430\u0441\u0441 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432-\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">PageGallery</span><span class=\"p\">(</span><span class=\"n\">ImageCollection</span><span class=\"p\">):</span>\n    <span class=\"n\">VARIATIONS</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">(</span>\n        <span class=\"n\">wide</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">1600</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n            <span class=\"n\">clip</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>\n        <span class=\"p\">),</span>\n        <span class=\"n\">desktop</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">1280</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n            <span class=\"n\">clip</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>\n        <span class=\"p\">),</span>\n        <span class=\"n\">tablet</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">960</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n            <span class=\"n\">clip</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>\n        <span class=\"p\">),</span>\n        <span class=\"n\">mobile</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">640</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n</pre>\n<hr>\n<p>\u041d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442 <code>Collection</code> \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\n<a href=\"https://docs.djangoproject.com/en/2.2/topics/db/models/#proxy-models\" rel=\"nofollow\">proxy-\u043c\u043e\u0434\u0435\u043b\u044c</a>.\n\u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e\n\u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 \u0411\u0414, \u043d\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a \u043c\u043e\u0434\u0435\u043b\u0438 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438\n\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u043e\u043b\u0435\u0439.</p>\n<p>\u0427\u0442\u043e\u0431\u044b \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 \u043d\u0435 \u0441\u043c\u0435\u0448\u0438\u0432\u0430\u043b\u0438\u0441\u044c \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432,\n\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 <code>objects</code> \u0432 \u043a\u043b\u0430\u0441\u0441\u0435 <code>Collection</code> \u0431\u044b\u043b \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0434\u043b\u044f \u0442\u043e\u0433\u043e,\n\u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0432\u043e \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 <code>ContentType</code> \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438\n\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430\u0434 \u0442\u0435\u043c\u0438 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u043c\u0438, \u043a\u043b\u0430\u0441\u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u043c\u0443.</p>\n<pre><span class=\"c1\"># \u0412\u0435\u0440\u043d\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u043a\u043b\u0430\u0441\u0441\u0430 MyCollection</span>\n<span class=\"n\">MyCollection</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># \u0412\u0435\u0440\u043d\u0435\u0442 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e \u0432\u0441\u0435 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439, \u0432\u0441\u0435\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432</span>\n<span class=\"n\">MyCollection</span><span class=\"o\">.</span><span class=\"n\">_base_manager</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\n</pre>\n<h2>Programmatically upload files</h2>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n\n<span class=\"c1\"># file / image</span>\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">'file.doc'</span><span class=\"p\">,</span> <span class=\"s1\">'rb'</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">fp</span><span class=\"p\">:</span>\n    <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">UploadedFile</span><span class=\"p\">()</span>\n    <span class=\"n\">file</span><span class=\"o\">.</span><span class=\"n\">attach_file</span><span class=\"p\">(</span><span class=\"n\">fp</span><span class=\"p\">)</span>\n    <span class=\"n\">file</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n\n\n<span class=\"c1\"># gallery</span>\n<span class=\"n\">gallery</span> <span class=\"o\">=</span> <span class=\"n\">PageGallery</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">()</span>\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">'image.jpg'</span><span class=\"p\">,</span> <span class=\"s1\">'rb'</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">fp</span><span class=\"p\">:</span>\n    <span class=\"n\">item</span> <span class=\"o\">=</span> <span class=\"n\">ImageItem</span><span class=\"p\">()</span>\n    <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">attach_to</span><span class=\"p\">(</span><span class=\"n\">gallery</span><span class=\"p\">)</span>\n    <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">attach_file</span><span class=\"p\">(</span><span class=\"n\">fp</span><span class=\"p\">)</span>\n    <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre>\n<h2>Management Commands</h2>\n<h4>check_uploads</h4>\n<p>\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432\n\u0438 \u0432\u044b\u0432\u043e\u0434\u0438\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.</p>\n<p>\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u043c\u044b\u0445 \u0442\u0435\u0441\u0442\u043e\u0432:</p>\n<ul>\n<li>\u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435</li>\n<li>\u0434\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439</li>\n<li>\u043c\u043e\u0434\u0435\u043b\u044c-\u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 (\u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0430\u044f \u0432 <code>owner_app_label</code>\n\u0438 <code>owner_model_name</code>) \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442</li>\n<li>\u0432 \u043c\u043e\u0434\u0435\u043b\u0438-\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u043b\u0435 <code>owner_fieldname</code></li>\n<li>\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0435\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043c\u043e\u0434\u0435\u043b\u0438-\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430\n\u0441\u043e \u0441\u0441\u044b\u043b\u043a\u043e\u0439 \u043d\u0430 \u0444\u0430\u0439\u043b</li>\n<li>\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 \u0443\u043a\u0430\u0437\u0430\u043d \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0438 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439\n<code>item_type</code></li>\n<li>\u043c\u043e\u0434\u0435\u043b\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439\n\u0434\u043b\u044f <code>item_type</code></li>\n</ul>\n<p>\u041f\u0440\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0438 \u043a\u043b\u044e\u0447\u0430 <code>--fix-missing</code> \u0432\u0441\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435\n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0431\u0443\u0434\u0443\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u0430\u043d\u044b\n\u0438\u0437 \u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u043e\u0432.</p>\n<pre>python3 manage.py check_uploads --fix-missing\n</pre>\n<h4>clean_uploads</h4>\n<p>\u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u043c\u0443\u0441\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0411\u0414 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445\n\u043d\u0435\u0442 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430) \u0438 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0438\u0445 \u0443\u0434\u0430\u043b\u0438\u0442\u044c.</p>\n<p>\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0444\u043e\u0440\u043c\u044b\n\u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435. \u0418\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e, \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0444\u0430\u0439\u043b\n\u0431\u0443\u0434\u0435\u0442 \u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \"\u0441\u0438\u0440\u043e\u0442\u043e\u0439\". \u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0442\u0430\u043a\u0438\u0435 \u0444\u0430\u0439\u043b\u044b \u043d\u0435 \u0443\u0434\u0430\u043b\u044f\u043b\u0438\u0441\u044c,\n\u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0444\u0438\u043b\u044c\u0442\u0440, \u043e\u0442\u0441\u0435\u0438\u0432\u0430\u044e\u0449\u0438\u0439 \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b, \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435\n\u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 30 \u043c\u0438\u043d\u0443\u0442. \u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438\n(\u0432 \u043c\u0438\u043d\u0443\u0442\u0430\u0445) \u043c\u043e\u0436\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u043a\u043b\u044e\u0447 <code>--min-age</code>.</p>\n<pre>python3 manage.py clean_uploads --min-age<span class=\"o\">=</span><span class=\"m\">10</span>\n</pre>\n<h4>recreate_variations</h4>\n<p>\u041f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u0430\u0435\u0442 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439.</p>\n<p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0432 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435:</p>\n<pre>python3 manage.py recreate_variations --interactive\n</pre>\n<p>\u0412\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u0432\u044b\u0437\u043e\u0432 \u0438 \u0432 \u043d\u0435\u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e\n\u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0432\u0438\u0434\u0430\n<code>AppLabel.ModelName</code> \u0438 \u0438\u043c\u044f \u043f\u043e\u043b\u044f, \u0441\u0441\u044b\u043b\u0430\u044e\u0449\u0435\u0433\u043e\u0441\u044f \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435.</p>\n<pre>python3 manage.py recreate_variations <span class=\"s1\">'app.Page'</span> <span class=\"s1\">'image'</span>\n</pre>\n<p>\u0415\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u0430\u0442\u044c \u043d\u0435 \u0432\u0441\u0435 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435,\n\u0442\u043e \u0438\u0445 \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 <code>--variations</code>.</p>\n<pre>python3 manage.py recreate_variations <span class=\"s1\">'app.Page'</span> <span class=\"s1\">'image'</span> --variations big small\n</pre>\n<p>\u0422\u0430\u043a\u0436\u0435, \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0434, \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445\n\u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u043e\u0432 <code>UploadedImage</code> \u0438\u043b\u0438 <code>ImageItem</code>:</p>\n<pre><span class=\"c1\"># \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u043a\u0430 `big` \u0438 `medium` \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043f\u043e\u043b\u044f ImageField</span>\n<span class=\"n\">page</span><span class=\"o\">.</span><span class=\"n\">image</span><span class=\"o\">.</span><span class=\"n\">recut</span><span class=\"p\">([</span><span class=\"s1\">'big'</span><span class=\"p\">,</span> <span class=\"s1\">'medium'</span><span class=\"p\">])</span>\n\n<span class=\"c1\"># \u043f\u0435\u0440\u0435\u043d\u0430\u0440\u0435\u0437\u043a\u0430 \u0432\u0441\u0435\u0445 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u0433\u0430\u043b\u0435\u0440\u0435\u0438</span>\n<span class=\"k\">for</span> <span class=\"n\">image</span> <span class=\"ow\">in</span> <span class=\"n\">page</span><span class=\"o\">.</span><span class=\"n\">gallery</span><span class=\"o\">.</span><span class=\"n\">get_items</span><span class=\"p\">(</span><span class=\"s1\">'image'</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span><span class=\"o\">.</span><span class=\"n\">recut</span><span class=\"p\">()</span>\n</pre>\n<h2>Validators</h2>\n<p>\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u043d\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f\n\u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u0430\u043b\u0438\u0434\u0430\u0442\u043e\u0440\u044b:</p>\n<ul>\n<li><code>SizeValidator</code> - \u0437\u0430\u0434\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440\n\u0444\u0430\u0439\u043b\u0430 \u0432 \u0431\u0430\u0439\u0442\u0430\u0445.</li>\n<li><code>ExtensionValidator</code> - \u0437\u0430\u0434\u0430\u0435\u0442 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432.</li>\n<li><code>MimetypeValidator</code> - \u0437\u0430\u0434\u0430\u0435\u0442 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 MIME \u0442\u0438\u043f\u044b \u0444\u0430\u0439\u043b\u043e\u0432.</li>\n<li><code>ImageMinSizeValidator</code> - \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440\n\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0445 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439.</li>\n<li><code>ImageMaxSizeValidator</code> - \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440\n\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0445 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439.</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.utils.translation</span> <span class=\"kn\">import</span> <span class=\"n\">ugettext_lazy</span> <span class=\"k\">as</span> <span class=\"n\">_</span>\n<span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span> \n<span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.validators</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ImageField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'image'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">validators</span><span class=\"o\">=</span><span class=\"p\">[</span>\n        <span class=\"n\">SizeValidator</span><span class=\"p\">(</span><span class=\"mi\">10</span> <span class=\"o\">*</span> <span class=\"mi\">1024</span> <span class=\"o\">*</span> <span class=\"mi\">1024</span><span class=\"p\">),</span>   <span class=\"c1\"># max 10Mb</span>\n        <span class=\"n\">ImageMaxSizeValidator</span><span class=\"p\">(</span><span class=\"mi\">800</span><span class=\"p\">,</span> <span class=\"mi\">800</span><span class=\"p\">)</span>    <span class=\"c1\"># max dimensions 800x800</span>\n    <span class=\"p\">])</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">PageGallery</span><span class=\"p\">(</span><span class=\"n\">Collection</span><span class=\"p\">):</span>\n    <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">FileItem</span><span class=\"p\">,</span> <span class=\"n\">validators</span><span class=\"o\">=</span><span class=\"p\">[</span>\n        <span class=\"n\">SizeValidator</span><span class=\"p\">(</span><span class=\"mi\">10</span> <span class=\"o\">*</span> <span class=\"mi\">1024</span> <span class=\"o\">*</span> <span class=\"mi\">1024</span><span class=\"p\">),</span> \n    <span class=\"p\">])</span>\n</pre>\n<h2>Postprocessing</h2>\n<p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 <code>paper-uploads</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f\n\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434 \u043d\u0430\u0434 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u043c\u0438 \u0444\u0430\u0439\u043b\u0430\u043c\u0438. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e\n\u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0432\u043e\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430. \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438\n\u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b\u0445\u043e\u0434\u044f\u0442 \u0437\u0430 \u0440\u0430\u043c\u043a\u0438 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 Python.</p>\n<p><strong>\u041f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e\n\u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 <code>django.core.files.storage.FileSystemStorage</code></strong>.</p>\n<p>\u041f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0430 \u043d\u0430 \u0434\u0432\u0435 \u0433\u0440\u0443\u043f\u043f\u044b:</p>\n<ul>\n<li>\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f</li>\n<li>\u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b</li>\n</ul>\n<h3>Options</h3>\n<p>\u041a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0444\u043e\u0440\u043c\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0432\u0438\u0434\u0435 \u0441\u043b\u043e\u0432\u0430\u0440\u044f.</p>\n<p>\u041a\u043b\u044e\u0447\u043e\u043c \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u0444\u0430\u0439\u043b\u0430. \u0414\u043b\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439\n\u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0438\u043c\u0435\u043d\u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u043f\u0440\u0438\u043d\u044f\u0442\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0435 \u0432\n\u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435 <a href=\"https://pillow.readthedocs.io/en/stable/handbook/image-file-formats.html\" rel=\"nofollow\">Pillow</a>.\n\u0412 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u044d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c <code>jpeg</code>, \u0430 \u043d\u0435 <code>jpg</code>.\n\u0414\u043b\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432, \u0438\u043c\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u2014 \u044d\u0442\u043e \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u043b\u043e\u0432\u0430\u0440\u044c, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c <em>\u0434\u043e\u043b\u0436\u0435\u043d</em> \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c\n\u043a\u043b\u044e\u0447 <code>command</code>, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u043f\u0443\u0442\u044c \u043a \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u043e\u043c\u0443 \u0444\u0430\u0439\u043b\u0443.\n\u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e, \u0432 \u043a\u043b\u044e\u0447\u0435 <code>arguments</code> \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435\n\u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u044b. \u0412 \u0441\u0442\u0440\u043e\u043a\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\n\u0448\u0430\u0431\u043b\u043e\u043d\u043d\u0443\u044e \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e <code>{file}</code>, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u0430 \u043d\u0430\n\u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u044b\u0439 \u043f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.</p>\n<p>\u041a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e - \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435\n<code>POSTPROCESS</code> \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438:</p>\n<pre><span class=\"n\">PAPER_UPLOADS</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s1\">'POSTPROCESS'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'jpeg'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'jpeg-recompress'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--quality high \"</span><span class=\"si\">{file}</span><span class=\"s1\">\" \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span><span class=\"p\">,</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'png'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'pngquant'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--force --skip-if-larger --output \"</span><span class=\"si\">{file}</span><span class=\"s1\">\" \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span>\n        <span class=\"p\">},</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre>\n<p>\u0414\u043b\u044f \u043e\u0442\u043c\u0435\u043d\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>False</code>\n\u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 <code>postprocess</code> \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.</p>\n<h3>Image postprocessing</h3>\n<p>\u041f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043a \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f\u043c. \u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439\n\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0431\u0435\u0437 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043e\u0441\u0442\u0430\u044e\u0442\u0441\u044f \u043d\u0435\u0442\u0440\u043e\u043d\u0443\u0442\u044b\u043c\u0438.</p>\n<p>\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438.\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043b\u044e\u0431\u0443\u044e \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ImageField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'image'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"n\">variations</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">desktop</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                <span class=\"c1\"># ...</span>\n                <span class=\"n\">postprocess</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>\n            <span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n</pre>\n<p>\u0418\u043b\u0438 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ImageField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'image'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"n\">variations</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">desktop</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                <span class=\"c1\"># ...</span>\n                <span class=\"n\">postprocess</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                    <span class=\"n\">jpeg</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>     <span class=\"c1\"># disable</span>\n                    <span class=\"n\">webp</span><span class=\"o\">=</span><span class=\"p\">{</span>          <span class=\"c1\"># override</span>\n                        <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'echo'</span><span class=\"p\">,</span>\n                        <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'\"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span><span class=\"p\">,</span>\n                    <span class=\"p\">}</span>                \n                <span class=\"p\">)</span>\n            <span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n</pre>\n<p><strong>NOTE</strong>: \u043d\u0435 \u043f\u0443\u0442\u0430\u0439\u0442\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 <code>postprocess</code>\n\u0441 <code>pilkit</code>-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430\u043c\u0438, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u043c\u0438 \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 <code>postprocessors</code>.</p>\n<p>\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u0445 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u043c\u043e\u0436\u043d\u043e \u0447\u0435\u0440\u0435\u0437\n\u043f\u0441\u0435\u0432\u0434\u043e-\u043f\u043e\u043b\u0435 <code>ItemField</code>:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">PageFiles</span><span class=\"p\">(</span><span class=\"n\">Collection</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">ImageItem</span><span class=\"p\">,</span> <span class=\"n\">postprocess</span><span class=\"o\">=</span><span class=\"p\">{</span>\n        <span class=\"s1\">'jpeg'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'jpegtran'</span><span class=\"p\">,</span>     \n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'\"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span><span class=\"p\">,</span> \n        <span class=\"p\">}</span>              \n    <span class=\"p\">})</span>\n    <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">FileItem</span><span class=\"p\">)</span>\n</pre>\n<h3>Common postprocessing</h3>\n<p>\u0414\u043b\u044f \u0444\u0430\u0439\u043b\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435 \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c, \u0442\u043e\u0436\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\n\u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \"\u0444\u043e\u0440\u043c\u0430\u0442\u043e\u043c\" \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\n\u0444\u0430\u0439\u043b\u0430.</p>\n<p>\u0412 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u0433\u0434\u0435 \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043a\n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f\u043c, \u0434\u043b\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0430\u043c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b.\n\u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0435\u0441\u0442\u044c \u0440\u0438\u0441\u043a <strong>\u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e\u0433\u043e \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f</strong> \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430.</p>\n<p><strong>NOTE</strong>: \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 <a href=\"https://github.com/rq/django-rq\" rel=\"nofollow\">django-rq</a>\n\u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438.\n\u0418\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e, \u043f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435, \u0432\u0438\u0434\u0436\u0435\u0442 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\n\u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 <strong>\u0434\u043e</strong> \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438.</p>\n<p>\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 <code>postprocess</code>\n\u043f\u043e\u043b\u044f <code>FileField</code>:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">FileField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'file'</span><span class=\"p\">),</span> <span class=\"n\">postprocess</span><span class=\"o\">=</span><span class=\"p\">{</span>\n        <span class=\"s1\">'svg'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'svgo'</span><span class=\"p\">,</span>        \n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--precision=4 \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span><span class=\"p\">,</span>        \n        <span class=\"p\">}</span>           \n    <span class=\"p\">})</span>\n</pre>\n<p>\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u0445 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u043c\u043e\u0436\u043d\u043e \u0447\u0435\u0440\u0435\u0437\n\u043f\u0441\u0435\u0432\u0434\u043e-\u043f\u043e\u043b\u0435 <code>ItemField</code>:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">PageFiles</span><span class=\"p\">(</span><span class=\"n\">Collection</span><span class=\"p\">):</span>\n    <span class=\"n\">svg</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">SVGItem</span><span class=\"p\">,</span> <span class=\"n\">postprocess</span><span class=\"o\">=</span><span class=\"p\">{</span>\n        <span class=\"s1\">'svg'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'svgo'</span><span class=\"p\">,</span>     \n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--precision=4 \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span><span class=\"p\">,</span> \n        <span class=\"p\">}</span>              \n    <span class=\"p\">})</span>\n    <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">FileItem</span><span class=\"p\">)</span>\n</pre>\n<h2>Variation versions</h2>\n<p>\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c, \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043d\u0443\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c \u0432 \u0442\u0440\u0435\u0445\n\u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430\u0445: <code>desktop</code>, <code>tablet</code> \u0438 <code>mobile</code>. \u0415\u0441\u043b\u0438 \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c\nRetina \u0434\u0438\u0441\u043f\u043b\u0435\u0438, \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c, \u0434\u0432\u0435 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438\n\u0434\u043b\u044f \u0440\u0430\u0437\u043c\u0435\u0440\u0430 <code>2x</code>. \u0415\u0441\u043b\u0438 \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u0435\u0449\u0451 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442 <code>WebP</code> \u0441\n\u043e\u0431\u0440\u0430\u0442\u043d\u043e\u0439 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c\u044e, \u0442\u043e \u043e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u0443\u043c\u043d\u043e\u0436\u0430\u0435\u0442\u0441\u044f \u043d\u0430 2\n\u0438 \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0435\u0442 10.</p>\n<p>\u041f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 Retina-\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u043e\u0442\u043b\u0438\u0447\u0430\u044e\u0442\u0441\u044f \u043e\u0442 \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u043d\u044b\u043c\n\u043d\u0430 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0439 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c, \u0430 <code>WebP</code>-\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u2014 \u043f\u0440\u0438\u043d\u0443\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439\n\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0435\u0439 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442 <code>WebP</code>, \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u044d\u0442\u0438 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438\n\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438.</p>\n<p>\u0414\u043b\u044f \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0438\u043c\u0435\u044e\u0449\u0435\u0439 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u0435\u0440\u0441\u0438\u0439, \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c\n\u0430\u043b\u0438\u0430\u0441\u044b \u044d\u0442\u0438\u0445 \u0432\u0435\u0440\u0441\u0438\u0439 \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 <code>versions</code>. \u041a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0443\u044f \u044d\u0442\u0438 \u0430\u043b\u0438\u0430\u0441\u044b\n\u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0431\u043e\u0439, \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u0441\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 <em>\u043d\u0435\u044f\u0432\u043d\u044b\u0435</em> \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438.</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ImageField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'image'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"n\">variations</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">desktop</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                <span class=\"c1\"># ...</span>\n                <span class=\"n\">versions</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'webp'</span><span class=\"p\">,</span> <span class=\"s1\">'2x'</span><span class=\"p\">,</span> <span class=\"s1\">'3x'</span><span class=\"p\">}</span>\n            <span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n</pre>\n<p>\u041f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0439 \u0432\u044b\u0448\u0435 \u043a\u043e\u0434 \u0441\u043e\u0437\u0434\u0430\u0441\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438:</p>\n<ul>\n<li><code>desktop</code> - \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f</li>\n<li><code>desktop_webp</code> - <code>WebP</code>-\u0432\u0435\u0440\u0441\u0438\u044f \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438</li>\n<li><code>desktop_2x</code> - Retina 2x</li>\n<li><code>desktop_webp_2x</code> - <code>WebP</code>-\u0432\u0435\u0440\u0441\u0438\u044f Retina 2x</li>\n<li><code>desktop_3x</code> - Retina 3x</li>\n<li><code>desktop_webp_3x</code> - <code>WebP</code>-\u0432\u0435\u0440\u0441\u0438\u044f Retina 3x</li>\n</ul>\n<p><strong>NOTE</strong>: \u0421\u0443\u0444\u0444\u0438\u043a\u0441 \u0434\u043b\u044f Retina \u0432\u0441\u0435\u0433\u0434\u0430 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u043e\u0441\u043b\u0435 \u0441\u0443\u0444\u0444\u0438\u043a\u0441\u0430 <code>WebP</code>.</p>\n<p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0430\u043b\u0438\u0430\u0441\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439: <code>webp</code>, <code>2x</code>, <code>3x</code>, <code>4x</code>.\n\u041a\u0430\u0436\u0434\u0430\u044f \u043d\u0435\u044f\u0432\u043d\u0430\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043b\u043d\u043e\u0446\u0435\u043d\u043d\u043e\u0439 \u0438 \u043e\u0431\u043b\u0430\u0434\u0430\u0435\u0442\n\u0442\u043e\u0447\u043d\u043e \u0442\u0430\u043a\u0438\u043c\u0438 \u0436\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438, \u0447\u0442\u043e \u0438 \u043b\u044e\u0431\u0430\u044f \u0434\u0440\u0443\u0433\u0430\u044f \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f.</p>\n<p>\u0415\u0441\u043b\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439\n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0442\u043e \u043f\u0440\u0438\u0434\u0451\u0442\u0441\u044f \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044e \u044f\u0432\u043d\u043e \u2014 \u043e\u043d\u0430 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0448\u0435\u0442\n\u043e\u0434\u043d\u043e\u0438\u043c\u0435\u043d\u043d\u0443\u044e \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044e.</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ImageField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'image'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"n\">variations</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">desktop</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">800</span><span class=\"p\">,</span> <span class=\"mi\">600</span><span class=\"p\">),</span>\n                <span class=\"n\">versions</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'webp'</span><span class=\"p\">,</span> <span class=\"s1\">'2x'</span><span class=\"p\">,</span> <span class=\"s1\">'3x'</span><span class=\"p\">}</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">desktop_2x</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">1600</span><span class=\"p\">,</span> <span class=\"mi\">1200</span><span class=\"p\">),</span>\n                <span class=\"n\">jpeg</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span>\n                    <span class=\"n\">quality</span><span class=\"o\">=</span><span class=\"mi\">72</span>                \n                <span class=\"p\">)</span>      \n            <span class=\"p\">)</span>   \n        <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n</pre>\n<h2>Cloudinary</h2>\n<p>\u0412\u043e \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u043c \u043c\u043e\u0434\u0443\u043b\u0435 <code>paper_uploads.cloudinary</code> \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u043f\u043e\u043b\u044f \u0438 \u043a\u043b\u0430\u0441\u0441\u044b,\n\u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0449\u0438\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0432 \u043e\u0431\u043b\u0430\u0447\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 Cloudinary.\n\u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u043e\u0441\u0442\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0438 \u043d\u0430\u0440\u0435\u0437\u043a\u0430 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043d\u0435 \u0438\u043c\u0435\u044e\u0442 \u0441\u043c\u044b\u0441\u043b\u0430,\n\u0438 \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b.</p>\n<h3>Installation</h3>\n<ol>\n<li><code>pip install cloudinary</code></li>\n<li>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c <code>paper_uploads.cloudinary</code> \u0438 <code>cloudinary</code> \u0432 <code>INSTALLED_APPS</code>.\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"s1\">'paper_uploads'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'paper_uploads.cloudinary'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'cloudinary'</span><span class=\"p\">,</span>\n    <span class=\"c1\"># ...</span>\n<span class=\"p\">]</span>\n</pre>\n</li>\n<li>\u0417\u0430\u0434\u0430\u0442\u044c <a href=\"https://github.com/cloudinary/pycloudinary#configuration\" rel=\"nofollow\">\u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438</a> Cloudinary\n<pre><span class=\"n\">CLOUDINARY</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n   <span class=\"s1\">'cloud_name'</span><span class=\"p\">:</span> <span class=\"s1\">'mycloud'</span><span class=\"p\">,</span>\n   <span class=\"s1\">'api_key'</span><span class=\"p\">:</span> <span class=\"s1\">'012345678901234'</span><span class=\"p\">,</span>\n   <span class=\"s1\">'api_secret'</span><span class=\"p\">:</span> <span class=\"s1\">'g1rtyOCvm4tDIfCPFFuh4u1W0PC'</span>\n<span class=\"p\">}</span>\n</pre>\n</li>\n</ol>\n<h3>Model fields</h3>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.cloudinary.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">CloudinaryFileField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'file'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">media</span> <span class=\"o\">=</span> <span class=\"n\">CloudinaryMediaField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'media'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">CloudinaryImageField</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'image'</span><span class=\"p\">),</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<h3>Collections</h3>\n<p>\u0412 \u043c\u043e\u0434\u0443\u043b\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u043e \u0442\u0440\u0438 \u043a\u043b\u0430\u0441\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438:\n<code>CloudinaryFileItem</code>, <code>CloudinaryImageItem</code> \u0438\n<code>CloudinaryMediaItem</code> (\u0434\u043b\u044f \u0430\u0443\u0434\u0438\u043e \u0438 \u0432\u0438\u0434\u0435\u043e).</p>\n<p><strong>NOTE</strong>: \u0412 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 <code>PIL</code>, Cloudinary \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\n\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 SVG-\u0444\u0430\u0439\u043b\u043e\u0432 \u043a\u0430\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0434\u043b\u044f SVG-\u0444\u0430\u0439\u043b\u043e\u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439\n\u043a\u043b\u0430\u0441\u0441 \u043d\u0435 \u043d\u0443\u0436\u0435\u043d.</p>\n<p>\u041a\u043b\u0430\u0441\u0441\u044b \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 Cloudinary \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0442\u0430\u043a\u0436\u0435 \u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u044b\u0435:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.cloudinary.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">PageFiles</span><span class=\"p\">(</span><span class=\"n\">Collection</span><span class=\"p\">):</span>\n    <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">CloudinaryImageItem</span><span class=\"p\">)</span>\n    <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">ItemField</span><span class=\"p\">(</span><span class=\"n\">CloudinaryFileItem</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">files</span> <span class=\"o\">=</span> <span class=\"n\">CollectionField</span><span class=\"p\">(</span><span class=\"n\">PageFiles</span><span class=\"p\">)</span>\n</pre>\n<p>\u0422\u0430\u043a\u0436\u0435, \u043a\u0430\u043a \u0438 \u0434\u043b\u044f \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439, \u0434\u043b\u044f Cloudinary \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u043e\n\u0434\u0432\u0430 \u043a\u043b\u0430\u0441\u0441\u0430 \u0433\u043e\u0442\u043e\u0432\u044b\u0445 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439: <code>CloudinaryCollection</code>\n\u0438 <code>CloudinaryImageCollection</code>. <code>CloudinaryCollection</code> \u043c\u043e\u0436\u0435\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\n\u043b\u044e\u0431\u044b\u0435 \u0444\u0430\u0439\u043b\u044b, \u0430 <code>CloudinaryImageCollection</code> \u2014 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">from</span> <span class=\"nn\">paper_uploads.cloudinary.models</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">PageFiles</span><span class=\"p\">(</span><span class=\"n\">CloudinaryCollection</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">PageGallery</span><span class=\"p\">(</span><span class=\"n\">CloudinaryImageCollection</span><span class=\"p\">):</span>\n    <span class=\"k\">pass</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Page</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">files</span> <span class=\"o\">=</span> <span class=\"n\">CollectionField</span><span class=\"p\">(</span><span class=\"n\">PageFiles</span><span class=\"p\">)</span>\n    <span class=\"n\">gallery</span> <span class=\"o\">=</span> <span class=\"n\">CollectionField</span><span class=\"p\">(</span><span class=\"n\">PageGallery</span><span class=\"p\">)</span>\n</pre>\n<h3>Usage</h3>\n<p>\u0412 \u0448\u0430\u0431\u043b\u043e\u043d\u0430\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d Jinja2-\u0430\u043d\u0430\u043b\u043e\u0433 \u0448\u0430\u0431\u043b\u043e\u043d\u043d\u043e\u0433\u043e \u0442\u044d\u0433\u0430 <code>cloudinary_url</code>,\n\u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0432 \u0441\u043e\u0441\u0442\u0430\u0432 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 <a href=\"https://github.com/cloudinary/pycloudinary\" rel=\"nofollow\">cloudinary</a>.</p>\n<pre>&lt;img src={% cloudinary_url page.image width=1024 crop=fill %}&gt;\n</pre>\n<p>\u0422\u0430\u043a\u0436\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043e\u0434\u043d\u043e\u0438\u043c\u0435\u043d\u043d\u0430\u044f \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f:</p>\n<pre>&lt;img src={{ cloudinary_url(page.image, width=1024, crop='fill') }}&gt;\n</pre>\n<h2>Settings</h2>\n<p>\u0412\u0441\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435 <code>PAPER_UPLOADS</code>.</p>\n<pre><span class=\"n\">PAPER_UPLOADS</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s1\">'RQ_ENABLED'</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">,</span>\n    <span class=\"s1\">'VARIATION_DEFAULTS'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'jpeg'</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">quality</span><span class=\"o\">=</span><span class=\"mi\">80</span><span class=\"p\">,</span>\n            <span class=\"n\">progressive</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"p\">),</span>\n        <span class=\"s1\">'webp'</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">(</span>\n            <span class=\"n\">quality</span><span class=\"o\">=</span><span class=\"mi\">75</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n    <span class=\"p\">},</span>\n    <span class=\"s1\">'POSTPROCESS'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'jpeg'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'jpeg-recompress'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--quality high \"</span><span class=\"si\">{file}</span><span class=\"s1\">\" \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span><span class=\"p\">,</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'png'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'pngquant'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--force --skip-if-larger --output \"</span><span class=\"si\">{file}</span><span class=\"s1\">\" \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span>\n        <span class=\"p\">},</span>\n        <span class=\"s1\">'svg'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'command'</span><span class=\"p\">:</span> <span class=\"s1\">'svgo'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'arguments'</span><span class=\"p\">:</span> <span class=\"s1\">'--precision=4 \"</span><span class=\"si\">{file}</span><span class=\"s1\">\"'</span><span class=\"p\">,</span>\n        <span class=\"p\">},</span>   \n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre>\n<h3>STORAGE</h3>\n<p>\u041f\u0443\u0442\u044c \u043a \u043a\u043b\u0430\u0441\u0441\u0443 <a href=\"https://docs.djangoproject.com/en/2.2/ref/files/storage/\" rel=\"nofollow\">\u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 Django</a>.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>django.core.files.storage.FileSystemStorage</code></p>\n<h3>STORAGE_OPTIONS</h3>\n<p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>{}</code></p>\n<h3>FILES_UPLOAD_TO</h3>\n<p>\u041f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b \u0438\u0437 FileField.\n\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043b\u044f \u0434\u0430\u0442\u044b \u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 (\u0441\u043c. <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/fields/#django.db.models.FileField.upload_to\" rel=\"nofollow\">upload_to</a>).</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>files/%Y-%m-%d</code></p>\n<h3>IMAGES_UPLOAD_TO</h3>\n<p>\u041f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b \u0438\u0437 ImageField.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>images/%Y-%m-%d</code></p>\n<h3>COLLECTION_FILES_UPLOAD_TO</h3>\n<p>\u041f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>collections/files/%Y-%m-%d</code></p>\n<h3>COLLECTION_IMAGES_UPLOAD_TO</h3>\n<p>\u041f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>collections/images/%Y-%m-%d</code></p>\n<h3>COLLECTION_ITEM_PREVIEW_WIDTH, COLLECTION_ITEM_PREVIEW_HEIGTH</h3>\n<p>\u0420\u0430\u0437\u043c\u0435\u0440\u044b \u043f\u0440\u0435\u0432\u044c\u044e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>144</code> x <code>108</code></p>\n<h3>COLLECTION_IMAGE_ITEM_PREVIEW_VARIATIONS</h3>\n<p>\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0435 \u043a \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043b\u0430\u0441\u0441\u0443 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439\n\u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0435\u0432\u044c\u044e \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435. \u0420\u0430\u0437\u043c\u0435\u0440\u044b \u0444\u0430\u0439\u043b\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u044b\n\u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0441 <code>COLLECTION_ITEM_PREVIEW_WIDTH</code> \u0438\n<code>COLLECTION_ITEM_PREVIEW_HEIGTH</code>.</p>\n<h3>RQ_ENABLED</h3>\n<p>\u0412\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0430\u0440\u0435\u0437\u043a\u0443 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u043d\u0430 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438.\n\u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0435\u0442\u0430 <a href=\"https://github.com/rq/django-rq\" rel=\"nofollow\">django-rq</a>.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>False</code></p>\n<h3>RQ_QUEUE_NAME</h3>\n<p>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043f\u043e\u043c\u0435\u0449\u0430\u044e\u0442\u0441\u044f \u0437\u0430\u0434\u0430\u0447\u0438 \u043f\u043e \u043d\u0430\u0440\u0435\u0437\u043a\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>default</code></p>\n<h3>VARIATION_DEFAULTS</h3>\n<p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.</p>\n<p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u043e\u0432\u0430\u0440\u0435, \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b \u043a \u043a\u0430\u0436\u0434\u043e\u0439\n\u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438, \u0435\u0441\u043b\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f \u0438\u0445 \u044f\u0432\u043d\u043e \u043d\u0435 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>{}</code></p>\n<h3>POSTPROCESS</h3>\n<p>\u0421\u043b\u043e\u0432\u0430\u0440\u044c, \u0437\u0430\u0434\u0430\u044e\u0449\u0438\u0439 shell-\u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c\u044b\u0435 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438\n\u0444\u0430\u0439\u043b\u043e\u0432. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443.</p>\n<p>\u041a\u043b\u044e\u0447\u0430\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u043e\u0432 \u0444\u0430\u0439\u043b\u043e\u0432.\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: <code>jpeg</code>, <code>png</code>, <code>gif</code>, <code>webp</code>, <code>svg</code>.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>{}</code></p>\n<h3>CLOUDINARY</h3>\n<p>\u0421\u043b\u043e\u0432\u0430\u0440\u044c, \u0437\u0430\u0434\u0430\u044e\u0449\u0438\u0439 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 <a href=\"https://cloudinary.com/documentation/image_upload_api_reference#required_parameters\" rel=\"nofollow\">\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438</a>\n\u0434\u043b\u044f cloudinary.</p>\n<p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e:</p>\n<pre><span class=\"p\">{</span>\n    <span class=\"s1\">'use_filename'</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">,</span>\n    <span class=\"s1\">'unique_filename'</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">,</span>\n    <span class=\"s1\">'overwrite'</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n</pre>\n\n          </div>"}, "last_serial": 6938017, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "8ba76c1d0d7044f746dca725d752cd34", "sha256": "44d482e1b2b15226da9ada3d3898ffd02027124bd693873211c2faa1d0e9fc6c"}, "downloads": -1, "filename": "paper_uploads-0.2.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "8ba76c1d0d7044f746dca725d752cd34", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 381342, "upload_time": "2019-12-20T21:03:57", "upload_time_iso_8601": "2019-12-20T21:03:57.336135Z", "url": "https://files.pythonhosted.org/packages/41/b0/bfa81ab94fd99d431ca8d61b84f07cdf5e464a83c441b20869c1472f7c08/paper_uploads-0.2.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9a411a48b95b7c6b8d4e760c78f2897d", "sha256": "1aea466239f774ca2d5f5430ae04fa9737f21fb3ef9172e12fb7dcba66b6187d"}, "downloads": -1, "filename": "paper-uploads-0.2.0.tar.gz", "has_sig": false, "md5_digest": "9a411a48b95b7c6b8d4e760c78f2897d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 68949, "upload_time": "2019-12-20T21:04:00", "upload_time_iso_8601": "2019-12-20T21:04:00.709129Z", "url": "https://files.pythonhosted.org/packages/3b/18/f71392aad2f56b93641cacfb50efdee3099ba8279c9fe0bc5c93dcfac9e1/paper-uploads-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "afafec1c63a1c2c0bbc1e8abea4e6c48", "sha256": "0c8fbd4a996b2eb4015abbc9dc98fbb7965a4e6e84b6cccc6d8d27f0578203e7"}, "downloads": -1, "filename": "paper_uploads-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "afafec1c63a1c2c0bbc1e8abea4e6c48", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 416993, "upload_time": "2020-04-02T19:01:48", "upload_time_iso_8601": "2020-04-02T19:01:48.653482Z", "url": "https://files.pythonhosted.org/packages/12/dd/c9a7d66af35a1120e4d7966c0d641d89a0a37ac2a1869d1b29824b3ff936/paper_uploads-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c046df5b30e20a05bdb895dd8a3ce439", "sha256": "f5b88db4b8364debf9b8ab57f778ea1dfa28b587546635b7da40d0b14999dbe6"}, "downloads": -1, "filename": "paper-uploads-0.3.0.tar.gz", "has_sig": false, "md5_digest": "c046df5b30e20a05bdb895dd8a3ce439", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 337768, "upload_time": "2020-04-02T19:01:51", "upload_time_iso_8601": "2020-04-02T19:01:51.733809Z", "url": "https://files.pythonhosted.org/packages/43/a0/0b4ec53cda1d040df082f319c39ea89e33e654d837cacbdc4ea66aa1c6e9/paper-uploads-0.3.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "afafec1c63a1c2c0bbc1e8abea4e6c48", "sha256": "0c8fbd4a996b2eb4015abbc9dc98fbb7965a4e6e84b6cccc6d8d27f0578203e7"}, "downloads": -1, "filename": "paper_uploads-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "afafec1c63a1c2c0bbc1e8abea4e6c48", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 416993, "upload_time": "2020-04-02T19:01:48", "upload_time_iso_8601": "2020-04-02T19:01:48.653482Z", "url": "https://files.pythonhosted.org/packages/12/dd/c9a7d66af35a1120e4d7966c0d641d89a0a37ac2a1869d1b29824b3ff936/paper_uploads-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c046df5b30e20a05bdb895dd8a3ce439", "sha256": "f5b88db4b8364debf9b8ab57f778ea1dfa28b587546635b7da40d0b14999dbe6"}, "downloads": -1, "filename": "paper-uploads-0.3.0.tar.gz", "has_sig": false, "md5_digest": "c046df5b30e20a05bdb895dd8a3ce439", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 337768, "upload_time": "2020-04-02T19:01:51", "upload_time_iso_8601": "2020-04-02T19:01:51.733809Z", "url": "https://files.pythonhosted.org/packages/43/a0/0b4ec53cda1d040df082f319c39ea89e33e654d837cacbdc4ea66aa1c6e9/paper-uploads-0.3.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:58:46 2020"}