{"info": {"author": "Jahongir Rahmonov", "author_email": "jrahmonov2@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: Implementation :: CPython", "Programming Language :: Python :: Implementation :: PyPy"], "description": "\n<p align=\"center\">\n    <img src=\"https://github.com/rahmonov/alcazar/blob/master/alcazar.jpg?raw=True\">\n</p>\n\n---\n\n![purpose](https://img.shields.io/badge/purpose-learning-green.svg)\n[![travis](https://travis-ci.org/rahmonov/alcazar.svg?branch=master)](https://travis-ci.org/rahmonov/alcazar)\n\n# Alcazar\n\nAlcazar is a Python Web Framework built for learning purposes. The plan is to learn how frameworks are built by implementing their features,\nwriting blog posts about them and keeping the codebase as simple as possible.\n\nIt is a WSGI framework and can be used with any WSGI application server such as Gunicorn.\n\n## Inspiration\n\nI was inspired to make a web framework after reading [Florimond Monca](https://twitter.com/FlorimondManca)'s [blog post](https://blog.florimondmanca.com/how-i-built-a-web-framework-and-became-an-open-source-maintainer)\nabout how he built a web framework and became an open source maintainer. He wrote about how thrilling the experience has been for him so I decided I would give it a try as well.\nThank you, [Florimond](https://github.com/florimondmanca) and of course [Kenneth Reitz](https://twitter.com/kennethreitz) who in turn inspired Florimond to write a framework with\nhis own framework [Responder](https://github.com/kennethreitz/responder). Go check out both [Bocadillo by Florimond Monca](https://github.com/bocadilloproject/bocadillo) and [Responder by Kenneth Reitz](https://github.com/kennethreitz/responder).\nIf you like them, show some love by staring their repos.\n\n## Blog posts\n\n- [Part I: Intro, API, request handlers, routing (both simple and parameterized)](http://rahmonov.me/posts/write-python-framework-part-one/)\n- [Part II: class based handlers, route overlap check, unit tests](http://rahmonov.me/posts/write-python-framework-part-two/)\n- [Part III: templates support, test client, django way of adding routes](http://rahmonov.me/posts/write-python-framework-part-three/)\n- [Part IV: custom exception handler, support for static files, middleware](http://rahmonov.me/posts/write-python-framework-part-four/)\n\n## Quick Start\n\nInstall it:\n\n```bash\npip install alcazar-web-framework\n```\n\nBasic Usage:\n\n```python\n# app.py\nfrom alcazar import Alcazar\n\napp = Alcazar()\n\n\n@app.route(\"/\")\ndef home(req, resp):\n    resp.text = \"Hello, this is a home page.\"\n\n\n@app.route(\"/about\")\ndef about_page(req, resp):\n    resp.text = \"Hello, this is an about page.\"\n\n\n@app.route(\"/{age:d}\")\ndef tell_age(req, resp, age):\n    resp.text = f\"Your age is {age}\"\n\n\n@app.route(\"/{name:l}\")\nclass GreetingHandler:\n    def get(self, req, resp, name):\n        resp.text = f\"Hello, {name}\"\n\n\n@app.route(\"/show/template\")\ndef handler_with_template(req, resp):\n    resp.html = app.template(\"example.html\", context={\"title\": \"Awesome Framework\", \"body\": \"welcome to the future!\"})\n\n\n@app.route(\"/json\")\ndef json_handler(req, resp):\n    resp.json = {\"this\": \"is JSON\"}\n\n\n@app.route(\"/custom\")\ndef custom_response(req, resp):\n    resp.body = b'any other body'\n    resp.content_type = \"text/plain\"\n```\n\nStart:\n\n```bash\ngunicorn app:app\n```\n\n## Handlers\n\nIf you use class based handlers, only the methods that you implement will be allowed:\n\n```python\n@app.route(\"/{name:l}\")\nclass GreetingHandler:\n    def get(self, req, resp, name):\n        resp.text = f\"Hello, {name}\"\n```\n\nThis handler will only allow `GET` requests. That is, `POST` and others will be rejected. The same thing can be done with\nfunction based handlers in the following way:\n\n```python\n@app.route(\"/\", methods=[\"get\"])\ndef home(req, resp):\n    resp.text = \"Hello, this is a home page.\"\n```\n\nNote that if you specify `methods` for class based handlers, they will be ignored.\n\n## Unit Tests\n\nThe recommended way of writing unit tests is with [pytest](https://docs.pytest.org/en/latest/). There are two built in fixtures\nthat you may want to use when writing unit tests with Alcazar. The first one is `app` which is an instance of the main `Alcazar` class:\n\n```python\ndef test_route_overlap_throws_exception(app):\n    @app.route(\"/\")\n    def home(req, resp):\n        resp.text = \"Welcome Home.\"\n\n    with pytest.raises(AssertionError):\n        @app.route(\"/\")\n        def home2(req, resp):\n            resp.text = \"Welcome Home2.\"\n```\n\nThe other one is `client` that you can use to send HTTP requests to your handlers. It is based on the famous [requests](http://docs.python-requests.org/en/master/) and it should feel very familiar:\n\n```python\ndef test_parameterized_route(app, client):\n    @app.route(\"/{name}\")\n    def hello(req, resp, name):\n        resp.text = f\"hey {name}\"\n\n    assert client.get(url(\"/matthew\")).text == \"hey matthew\"\n```\n\nNote that there is a `url()` function used. It is used to generate the absolute url of the request given a relative url. Import it before usage:\n\n```python\nfrom alcazar.utils.tests import url\n```\n\n## Templates\n\nThe default folder for templates is `templates`. You can change it when initializing the main `Alcazar()` class:\n\n```python\napp = Alcazar(templates_dir=\"templates_dir_name\")\n```\n\nThen you can use HTML files in that folder like so in a handler:\n\n```python\n@app.route(\"/show/template\")\ndef handler_with_template(req, resp):\n    resp.html = app.template(\"example.html\", context={\"title\": \"Awesome Framework\", \"body\": \"welcome to the future!\"})\n```\n\n## Static Files\n\nJust like templates, the default folder for static files is `static` and you can override it:\n\n```python\napp = Alcazar(static_dir=\"static_dir_name\")\n```\n\nThen you can use the files inside this folder in HTML files:\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <title>{{title}}</title>\n\n  <link href=\"/static/main.css\" rel=\"stylesheet\" type=\"text/css\">\n</head>\n\n<body>\n    <h1>{{body}}</h1>\n    <p>This is a paragraph</p>\n</body>\n</html>\n```\n\n## Custom Exception Handler\n\nSometimes, depending on the exception raised, you may want to do a certain action. For such cases, you can register an exception handler:\n\n```python\ndef on_exception(req, resp, exception):\n    if isinstance(exception, HTTPError):\n        if exception.status == 404:\n            resp.text = \"Unfortunately the thing you were looking for was not found\"\n        else:\n            resp.text = str(exception)\n    else:\n        # unexpected exceptions\n        if app.debug:\n            debug_exception_handler(req, resp, exception)\n        else:\n            print(\"These unexpected exceptions should be logged.\")\n\napp = Alcazar(debug=False)\napp.add_exception_handler(on_exception)\n```\n\nThis exception handler will catch 404 HTTPErrors and change the text to `\"Unfortunately the thing you were looking for was not found\"`. For other HTTPErrors, it will simply\nshow the exception message. If the raised exception is not an HTTPError and if `debug` is set to True, it will show the exception and its traceback. Otherwise, it will log it.\n\n## Middleware\n\nYou can create custom middleware classes by inheriting from the `alcazar.middleware.Middleware` class and override its two methods\nthat are called before and after each request:\n\n```python\nfrom alcazar import Alcazar\nfrom alcazar.middleware import Middleware\n\napp = Alcazar()\n\n\nclass SimpleCustomMiddleware(Middleware):\n    def process_request(self, req):\n        print(\"Before dispatch\", req.url)\n\n    def process_response(self, req, res):\n        print(\"After dispatch\", req.url)\n\n\napp.add_middleware(SimpleCustomMiddleware)\n```\n\n## Features\n\n- WSGI compatible\n- Basic and parameterized routing\n- Class based handlers\n- Test Client\n- Support for templates\n- Support for static files\n- Custom exception handler\n- Middleware\n\n## Note\n\nIt is extremely raw and will hopefully keep improving. If you are interested in knowing how a particular feature is implemented in other\nframeworks, please open an issue and we will hopefully implement and explain it in a blog post.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/rahmonov/alcazar", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "alcazar-web-framework", "package_url": "https://pypi.org/project/alcazar-web-framework/", "platform": "", "project_url": "https://pypi.org/project/alcazar-web-framework/", "project_urls": {"Homepage": "https://github.com/rahmonov/alcazar"}, "release_url": "https://pypi.org/project/alcazar-web-framework/0.0.2/", "requires_dist": ["Jinja2 (==2.10)", "requests-wsgi-adapter (==0.4.0)", "parse (==1.11.1)", "requests (==2.21.0)", "WebOb (==1.8.5)", "whitenoise (==4.1.2)"], "requires_python": ">=3.6.0", "summary": "Python Web Framework built for learning purposes.", "version": "0.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p align=\"center\">\n    <img src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/697d9744634d5bf2080ef66f0e0b642e5b44c08c/68747470733a2f2f6769746875622e636f6d2f7261686d6f6e6f762f616c63617a61722f626c6f622f6d61737465722f616c63617a61722e6a70673f7261773d54727565\">\n</p>\n<hr>\n<p><img alt=\"purpose\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ecc4fbe0ecba552b3f912f14745221a472c6b300/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707572706f73652d6c6561726e696e672d677265656e2e737667\">\n<a href=\"https://travis-ci.org/rahmonov/alcazar\" rel=\"nofollow\"><img alt=\"travis\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f513cfda5bdc86a45df83888166f815f415713a1/68747470733a2f2f7472617669732d63692e6f72672f7261686d6f6e6f762f616c63617a61722e7376673f6272616e63683d6d6173746572\"></a></p>\n<h1>Alcazar</h1>\n<p>Alcazar is a Python Web Framework built for learning purposes. The plan is to learn how frameworks are built by implementing their features,\nwriting blog posts about them and keeping the codebase as simple as possible.</p>\n<p>It is a WSGI framework and can be used with any WSGI application server such as Gunicorn.</p>\n<h2>Inspiration</h2>\n<p>I was inspired to make a web framework after reading <a href=\"https://twitter.com/FlorimondManca\" rel=\"nofollow\">Florimond Monca</a>'s <a href=\"https://blog.florimondmanca.com/how-i-built-a-web-framework-and-became-an-open-source-maintainer\" rel=\"nofollow\">blog post</a>\nabout how he built a web framework and became an open source maintainer. He wrote about how thrilling the experience has been for him so I decided I would give it a try as well.\nThank you, <a href=\"https://github.com/florimondmanca\" rel=\"nofollow\">Florimond</a> and of course <a href=\"https://twitter.com/kennethreitz\" rel=\"nofollow\">Kenneth Reitz</a> who in turn inspired Florimond to write a framework with\nhis own framework <a href=\"https://github.com/kennethreitz/responder\" rel=\"nofollow\">Responder</a>. Go check out both <a href=\"https://github.com/bocadilloproject/bocadillo\" rel=\"nofollow\">Bocadillo by Florimond Monca</a> and <a href=\"https://github.com/kennethreitz/responder\" rel=\"nofollow\">Responder by Kenneth Reitz</a>.\nIf you like them, show some love by staring their repos.</p>\n<h2>Blog posts</h2>\n<ul>\n<li><a href=\"http://rahmonov.me/posts/write-python-framework-part-one/\" rel=\"nofollow\">Part I: Intro, API, request handlers, routing (both simple and parameterized)</a></li>\n<li><a href=\"http://rahmonov.me/posts/write-python-framework-part-two/\" rel=\"nofollow\">Part II: class based handlers, route overlap check, unit tests</a></li>\n<li><a href=\"http://rahmonov.me/posts/write-python-framework-part-three/\" rel=\"nofollow\">Part III: templates support, test client, django way of adding routes</a></li>\n<li><a href=\"http://rahmonov.me/posts/write-python-framework-part-four/\" rel=\"nofollow\">Part IV: custom exception handler, support for static files, middleware</a></li>\n</ul>\n<h2>Quick Start</h2>\n<p>Install it:</p>\n<pre>pip install alcazar-web-framework\n</pre>\n<p>Basic Usage:</p>\n<pre><span class=\"c1\"># app.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">alcazar</span> <span class=\"kn\">import</span> <span class=\"n\">Alcazar</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Alcazar</span><span class=\"p\">()</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">home</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">):</span>\n    <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s2\">\"Hello, this is a home page.\"</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/about\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">about_page</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">):</span>\n    <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s2\">\"Hello, this is an about page.\"</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/</span><span class=\"si\">{age:d}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">tell_age</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">,</span> <span class=\"n\">age</span><span class=\"p\">):</span>\n    <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"sa\">f</span><span class=\"s2\">\"Your age is </span><span class=\"si\">{</span><span class=\"n\">age</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/{name:l}\"</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">GreetingHandler</span><span class=\"p\">:</span>\n    <span class=\"k\">def</span> <span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">):</span>\n        <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"sa\">f</span><span class=\"s2\">\"Hello, </span><span class=\"si\">{</span><span class=\"n\">name</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/show/template\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">handler_with_template</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">):</span>\n    <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">html</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">template</span><span class=\"p\">(</span><span class=\"s2\">\"example.html\"</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"title\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Awesome Framework\"</span><span class=\"p\">,</span> <span class=\"s2\">\"body\"</span><span class=\"p\">:</span> <span class=\"s2\">\"welcome to the future!\"</span><span class=\"p\">})</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/json\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">json_handler</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">):</span>\n    <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">json</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"this\"</span><span class=\"p\">:</span> <span class=\"s2\">\"is JSON\"</span><span class=\"p\">}</span>\n\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/custom\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">custom_response</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">):</span>\n    <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">body</span> <span class=\"o\">=</span> <span class=\"sa\">b</span><span class=\"s1\">'any other body'</span>\n    <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">content_type</span> <span class=\"o\">=</span> <span class=\"s2\">\"text/plain\"</span>\n</pre>\n<p>Start:</p>\n<pre>gunicorn app:app\n</pre>\n<h2>Handlers</h2>\n<p>If you use class based handlers, only the methods that you implement will be allowed:</p>\n<pre><span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/{name:l}\"</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">GreetingHandler</span><span class=\"p\">:</span>\n    <span class=\"k\">def</span> <span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">):</span>\n        <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"sa\">f</span><span class=\"s2\">\"Hello, </span><span class=\"si\">{</span><span class=\"n\">name</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n</pre>\n<p>This handler will only allow <code>GET</code> requests. That is, <code>POST</code> and others will be rejected. The same thing can be done with\nfunction based handlers in the following way:</p>\n<pre><span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">,</span> <span class=\"n\">methods</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">\"get\"</span><span class=\"p\">])</span>\n<span class=\"k\">def</span> <span class=\"nf\">home</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">):</span>\n    <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s2\">\"Hello, this is a home page.\"</span>\n</pre>\n<p>Note that if you specify <code>methods</code> for class based handlers, they will be ignored.</p>\n<h2>Unit Tests</h2>\n<p>The recommended way of writing unit tests is with <a href=\"https://docs.pytest.org/en/latest/\" rel=\"nofollow\">pytest</a>. There are two built in fixtures\nthat you may want to use when writing unit tests with Alcazar. The first one is <code>app</code> which is an instance of the main <code>Alcazar</code> class:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">test_route_overlap_throws_exception</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">):</span>\n    <span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">home</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">):</span>\n        <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s2\">\"Welcome Home.\"</span>\n\n    <span class=\"k\">with</span> <span class=\"n\">pytest</span><span class=\"o\">.</span><span class=\"n\">raises</span><span class=\"p\">(</span><span class=\"ne\">AssertionError</span><span class=\"p\">):</span>\n        <span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">)</span>\n        <span class=\"k\">def</span> <span class=\"nf\">home2</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">):</span>\n            <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s2\">\"Welcome Home2.\"</span>\n</pre>\n<p>The other one is <code>client</code> that you can use to send HTTP requests to your handlers. It is based on the famous <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow\">requests</a> and it should feel very familiar:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">test_parameterized_route</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">client</span><span class=\"p\">):</span>\n    <span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/</span><span class=\"si\">{name}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">hello</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">):</span>\n        <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"sa\">f</span><span class=\"s2\">\"hey </span><span class=\"si\">{</span><span class=\"n\">name</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n\n    <span class=\"k\">assert</span> <span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">(</span><span class=\"s2\">\"/matthew\"</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">==</span> <span class=\"s2\">\"hey matthew\"</span>\n</pre>\n<p>Note that there is a <code>url()</code> function used. It is used to generate the absolute url of the request given a relative url. Import it before usage:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">alcazar.utils.tests</span> <span class=\"kn\">import</span> <span class=\"n\">url</span>\n</pre>\n<h2>Templates</h2>\n<p>The default folder for templates is <code>templates</code>. You can change it when initializing the main <code>Alcazar()</code> class:</p>\n<pre><span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Alcazar</span><span class=\"p\">(</span><span class=\"n\">templates_dir</span><span class=\"o\">=</span><span class=\"s2\">\"templates_dir_name\"</span><span class=\"p\">)</span>\n</pre>\n<p>Then you can use HTML files in that folder like so in a handler:</p>\n<pre><span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"/show/template\"</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">handler_with_template</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">):</span>\n    <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">html</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">template</span><span class=\"p\">(</span><span class=\"s2\">\"example.html\"</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"title\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Awesome Framework\"</span><span class=\"p\">,</span> <span class=\"s2\">\"body\"</span><span class=\"p\">:</span> <span class=\"s2\">\"welcome to the future!\"</span><span class=\"p\">})</span>\n</pre>\n<h2>Static Files</h2>\n<p>Just like templates, the default folder for static files is <code>static</code> and you can override it:</p>\n<pre><span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Alcazar</span><span class=\"p\">(</span><span class=\"n\">static_dir</span><span class=\"o\">=</span><span class=\"s2\">\"static_dir_name\"</span><span class=\"p\">)</span>\n</pre>\n<p>Then you can use the files inside this folder in HTML files:</p>\n<pre><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span> <span class=\"na\">lang</span><span class=\"o\">=</span><span class=\"s\">\"en\"</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">meta</span> <span class=\"na\">charset</span><span class=\"o\">=</span><span class=\"s\">\"UTF-8\"</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>{{title}}<span class=\"p\">&lt;/</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>\n\n  <span class=\"p\">&lt;</span><span class=\"nt\">link</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"/static/main.css\"</span> <span class=\"na\">rel</span><span class=\"o\">=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text/css\"</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>{{body}}<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>This is a paragraph<span class=\"p\">&lt;/</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</pre>\n<h2>Custom Exception Handler</h2>\n<p>Sometimes, depending on the exception raised, you may want to do a certain action. For such cases, you can register an exception handler:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">on_exception</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">,</span> <span class=\"n\">exception</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">exception</span><span class=\"p\">,</span> <span class=\"n\">HTTPError</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"n\">exception</span><span class=\"o\">.</span><span class=\"n\">status</span> <span class=\"o\">==</span> <span class=\"mi\">404</span><span class=\"p\">:</span>\n            <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s2\">\"Unfortunately the thing you were looking for was not found\"</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">resp</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">exception</span><span class=\"p\">)</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"c1\"># unexpected exceptions</span>\n        <span class=\"k\">if</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">:</span>\n            <span class=\"n\">debug_exception_handler</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">,</span> <span class=\"n\">exception</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"These unexpected exceptions should be logged.\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Alcazar</span><span class=\"p\">(</span><span class=\"n\">debug</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">add_exception_handler</span><span class=\"p\">(</span><span class=\"n\">on_exception</span><span class=\"p\">)</span>\n</pre>\n<p>This exception handler will catch 404 HTTPErrors and change the text to <code>\"Unfortunately the thing you were looking for was not found\"</code>. For other HTTPErrors, it will simply\nshow the exception message. If the raised exception is not an HTTPError and if <code>debug</code> is set to True, it will show the exception and its traceback. Otherwise, it will log it.</p>\n<h2>Middleware</h2>\n<p>You can create custom middleware classes by inheriting from the <code>alcazar.middleware.Middleware</code> class and override its two methods\nthat are called before and after each request:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">alcazar</span> <span class=\"kn\">import</span> <span class=\"n\">Alcazar</span>\n<span class=\"kn\">from</span> <span class=\"nn\">alcazar.middleware</span> <span class=\"kn\">import</span> <span class=\"n\">Middleware</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Alcazar</span><span class=\"p\">()</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">SimpleCustomMiddleware</span><span class=\"p\">(</span><span class=\"n\">Middleware</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">process_request</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">req</span><span class=\"p\">):</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Before dispatch\"</span><span class=\"p\">,</span> <span class=\"n\">req</span><span class=\"o\">.</span><span class=\"n\">url</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">process_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"n\">res</span><span class=\"p\">):</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"After dispatch\"</span><span class=\"p\">,</span> <span class=\"n\">req</span><span class=\"o\">.</span><span class=\"n\">url</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">add_middleware</span><span class=\"p\">(</span><span class=\"n\">SimpleCustomMiddleware</span><span class=\"p\">)</span>\n</pre>\n<h2>Features</h2>\n<ul>\n<li>WSGI compatible</li>\n<li>Basic and parameterized routing</li>\n<li>Class based handlers</li>\n<li>Test Client</li>\n<li>Support for templates</li>\n<li>Support for static files</li>\n<li>Custom exception handler</li>\n<li>Middleware</li>\n</ul>\n<h2>Note</h2>\n<p>It is extremely raw and will hopefully keep improving. If you are interested in knowing how a particular feature is implemented in other\nframeworks, please open an issue and we will hopefully implement and explain it in a blog post.</p>\n\n          </div>"}, "last_serial": 5117251, "releases": {"0.0.2": [{"comment_text": "", "digests": {"md5": "100b8d298982cf5d10d088cd44762dc9", "sha256": "bdab8928063d1421c6bd41077e9eb54f62a610a870e2211164c735afe05252e6"}, "downloads": -1, "filename": "alcazar_web_framework-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "100b8d298982cf5d10d088cd44762dc9", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 9571, "upload_time": "2019-04-09T07:03:39", "upload_time_iso_8601": "2019-04-09T07:03:39.562803Z", "url": "https://files.pythonhosted.org/packages/ce/ae/25f103ebad24d637ef0af8c9510c4711a3e918e675bc810d550437230a29/alcazar_web_framework-0.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9699aeed803da998af468ff3bf29308f", "sha256": "327775c040fdc674f776ced0466d05a38a7f741dd47c2650fc25176e93c897e1"}, "downloads": -1, "filename": "alcazar-web-framework-0.0.2.tar.gz", "has_sig": false, "md5_digest": "9699aeed803da998af468ff3bf29308f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 9556, "upload_time": "2019-04-09T07:03:41", "upload_time_iso_8601": "2019-04-09T07:03:41.337608Z", "url": "https://files.pythonhosted.org/packages/8f/7a/ff3696446a1ba8144368e5186c9b323ba027be4c3a29d9ecd20a8efef629/alcazar-web-framework-0.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "100b8d298982cf5d10d088cd44762dc9", "sha256": "bdab8928063d1421c6bd41077e9eb54f62a610a870e2211164c735afe05252e6"}, "downloads": -1, "filename": "alcazar_web_framework-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "100b8d298982cf5d10d088cd44762dc9", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 9571, "upload_time": "2019-04-09T07:03:39", "upload_time_iso_8601": "2019-04-09T07:03:39.562803Z", "url": "https://files.pythonhosted.org/packages/ce/ae/25f103ebad24d637ef0af8c9510c4711a3e918e675bc810d550437230a29/alcazar_web_framework-0.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9699aeed803da998af468ff3bf29308f", "sha256": "327775c040fdc674f776ced0466d05a38a7f741dd47c2650fc25176e93c897e1"}, "downloads": -1, "filename": "alcazar-web-framework-0.0.2.tar.gz", "has_sig": false, "md5_digest": "9699aeed803da998af468ff3bf29308f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 9556, "upload_time": "2019-04-09T07:03:41", "upload_time_iso_8601": "2019-04-09T07:03:41.337608Z", "url": "https://files.pythonhosted.org/packages/8f/7a/ff3696446a1ba8144368e5186c9b323ba027be4c3a29d9ecd20a8efef629/alcazar-web-framework-0.0.2.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:20:03 2020"}