{"info": {"author": "Teemu Husso", "author_email": "teemu.husso@gmail.com", "bugtrack_url": null, "classifiers": [], "description": "# patch-requests\n\nSimple patching of `requests` calls.\n\nExample from tests.py:\n\n```Python\nimport unittest\nimport requests\nfrom patch_requests import patch_requests\n\nclass TestPatcher(unittest.TestCase):\n    def test_multiple_requests(self):\n        with patch_requests([\n                ('get', (200, {1: 1})),\n                ('post', (201, {2: 2})),\n                ('GET', (404, '<html><p><br/>')),\n                ('patch', (500, b'\\\\')),\n                ]) as p:\n            response = requests.get('http://example.com')\n            self.assertEqual(response.status_code, 200)\n            self.assertEqual(response.json(), {1: 1})\n\n            s = requests.Session()\n\n            response = s.post('http://www.example.com')\n            self.assertEqual(response.status_code, 201)\n            self.assertEqual(response.json(), {2: 2})\n\n            response = s.get('http://')\n            self.assertEqual(response.status_code, 404)\n            self.assertEqual(response.text, '<html><p><br/>')\n\n            s.close()\n\n            response = requests.patch('')\n            self.assertEqual(response.status_code, 500)\n            self.assertEqual(response.content, b'\\\\')\n\n        self.assertEqual(\n            p.mocks['get'].call_args_list[0][0], ('http://example.com',))\n        self.assertEqual(\n            p.mocks['post'].call_args_list[0][0], ('http://www.example.com',))\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/Raekkeri/patch-requests", "keywords": "requests,tests,mock,patch", "license": "", "maintainer": "", "maintainer_email": "", "name": "patch-requests", "package_url": "https://pypi.org/project/patch-requests/", "platform": "", "project_url": "https://pypi.org/project/patch-requests/", "project_urls": {"Homepage": "https://github.com/Raekkeri/patch-requests"}, "release_url": "https://pypi.org/project/patch-requests/0.2.0/", "requires_dist": ["setuptools"], "requires_python": "", "summary": "Simple patching of `requests` calls", "version": "0.2.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>patch-requests</h1>\n<p>Simple patching of <code>requests</code> calls.</p>\n<p>Example from tests.py:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">unittest</span>\n<span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n<span class=\"kn\">from</span> <span class=\"nn\">patch_requests</span> <span class=\"kn\">import</span> <span class=\"n\">patch_requests</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">TestPatcher</span><span class=\"p\">(</span><span class=\"n\">unittest</span><span class=\"o\">.</span><span class=\"n\">TestCase</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">test_multiple_requests</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">with</span> <span class=\"n\">patch_requests</span><span class=\"p\">([</span>\n                <span class=\"p\">(</span><span class=\"s1\">'get'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"mi\">1</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">})),</span>\n                <span class=\"p\">(</span><span class=\"s1\">'post'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">201</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"mi\">2</span><span class=\"p\">:</span> <span class=\"mi\">2</span><span class=\"p\">})),</span>\n                <span class=\"p\">(</span><span class=\"s1\">'GET'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">404</span><span class=\"p\">,</span> <span class=\"s1\">'&lt;html&gt;&lt;p&gt;&lt;br/&gt;'</span><span class=\"p\">)),</span>\n                <span class=\"p\">(</span><span class=\"s1\">'patch'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">500</span><span class=\"p\">,</span> <span class=\"sa\">b</span><span class=\"s1\">'</span><span class=\"se\">\\\\</span><span class=\"s1\">'</span><span class=\"p\">)),</span>\n                <span class=\"p\">])</span> <span class=\"k\">as</span> <span class=\"n\">p</span><span class=\"p\">:</span>\n            <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'http://example.com'</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">status_code</span><span class=\"p\">,</span> <span class=\"mi\">200</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">json</span><span class=\"p\">(),</span> <span class=\"p\">{</span><span class=\"mi\">1</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">})</span>\n\n            <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"o\">.</span><span class=\"n\">Session</span><span class=\"p\">()</span>\n\n            <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">post</span><span class=\"p\">(</span><span class=\"s1\">'http://www.example.com'</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">status_code</span><span class=\"p\">,</span> <span class=\"mi\">201</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">json</span><span class=\"p\">(),</span> <span class=\"p\">{</span><span class=\"mi\">2</span><span class=\"p\">:</span> <span class=\"mi\">2</span><span class=\"p\">})</span>\n\n            <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'http://'</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">status_code</span><span class=\"p\">,</span> <span class=\"mi\">404</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">text</span><span class=\"p\">,</span> <span class=\"s1\">'&lt;html&gt;&lt;p&gt;&lt;br/&gt;'</span><span class=\"p\">)</span>\n\n            <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n\n            <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"o\">.</span><span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">''</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">status_code</span><span class=\"p\">,</span> <span class=\"mi\">500</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">content</span><span class=\"p\">,</span> <span class=\"sa\">b</span><span class=\"s1\">'</span><span class=\"se\">\\\\</span><span class=\"s1\">'</span><span class=\"p\">)</span>\n\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span>\n            <span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">mocks</span><span class=\"p\">[</span><span class=\"s1\">'get'</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">call_args_list</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"s1\">'http://example.com'</span><span class=\"p\">,))</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span>\n            <span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">mocks</span><span class=\"p\">[</span><span class=\"s1\">'post'</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">call_args_list</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"p\">(</span><span class=\"s1\">'http://www.example.com'</span><span class=\"p\">,))</span>\n</pre>\n\n          </div>"}, "last_serial": 6147840, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "8eb6c976433a9647bb3f6e125b81cd84", "sha256": "fe536d9a6ab9473484edf3961f9539e502cb7c5f2aa0708060a24c707d93e610"}, "downloads": -1, "filename": "patch_requests-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8eb6c976433a9647bb3f6e125b81cd84", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 3489, "upload_time": "2019-11-16T18:36:20", "upload_time_iso_8601": "2019-11-16T18:36:20.152036Z", "url": "https://files.pythonhosted.org/packages/4b/4b/1f173e02d5f1309c2a432a944ad05afcbf7797b828e1759afbad52d0cf10/patch_requests-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "37a7fcdbbf21bc74de9821a85ea0e39a", "sha256": "25f24152b084fbfc76842e0d8c81d5f501bcb37a0dbd8756bb0cf0c522b74fbc"}, "downloads": -1, "filename": "patch-requests-0.2.0.tar.gz", "has_sig": false, "md5_digest": "37a7fcdbbf21bc74de9821a85ea0e39a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2451, "upload_time": "2019-11-16T18:36:22", "upload_time_iso_8601": "2019-11-16T18:36:22.666783Z", "url": "https://files.pythonhosted.org/packages/1e/82/dab96b2bc683a42773cdc6e80e539f39541e31b433cfffc4d8e7578fae83/patch-requests-0.2.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "8eb6c976433a9647bb3f6e125b81cd84", "sha256": "fe536d9a6ab9473484edf3961f9539e502cb7c5f2aa0708060a24c707d93e610"}, "downloads": -1, "filename": "patch_requests-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8eb6c976433a9647bb3f6e125b81cd84", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 3489, "upload_time": "2019-11-16T18:36:20", "upload_time_iso_8601": "2019-11-16T18:36:20.152036Z", "url": "https://files.pythonhosted.org/packages/4b/4b/1f173e02d5f1309c2a432a944ad05afcbf7797b828e1759afbad52d0cf10/patch_requests-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "37a7fcdbbf21bc74de9821a85ea0e39a", "sha256": "25f24152b084fbfc76842e0d8c81d5f501bcb37a0dbd8756bb0cf0c522b74fbc"}, "downloads": -1, "filename": "patch-requests-0.2.0.tar.gz", "has_sig": false, "md5_digest": "37a7fcdbbf21bc74de9821a85ea0e39a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2451, "upload_time": "2019-11-16T18:36:22", "upload_time_iso_8601": "2019-11-16T18:36:22.666783Z", "url": "https://files.pythonhosted.org/packages/1e/82/dab96b2bc683a42773cdc6e80e539f39541e31b433cfffc4d8e7578fae83/patch-requests-0.2.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:57:56 2020"}