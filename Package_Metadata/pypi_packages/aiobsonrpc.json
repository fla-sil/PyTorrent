{"info": {"author": "DarHarry", "author_email": "harryx520@qq.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3.6"], "description": "# aiobsonrpc\n\n[bsonrpc](https://github.com/seprich/py-bson-rpc) for asyncio. \n\nPython 3.5+\n\n## Getting Started\n\n### Installing\n\n```\npip install aiobsonrpc\n```\n\n### Example\n\nServer\n\n```python\nimport asyncio\nimport aiobsonrpc\n\n\n@aiobsonrpc.service_class\nclass EchoService(object):\n    @aiobsonrpc.aio_rpc_request\n    async def echo(self, _, data):\n        await asyncio.sleep(1)\n        return data\n\n\nasync def on_connected(reader, writer):\n    aiobsonrpc.JSONRpc(reader, writer, services=EchoService())\n\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n\n    server = asyncio.start_server(on_connected, '0.0.0.0', 6789, loop=loop)\n    loop.create_task(server)\n\n    loop.run_forever()\n```\n\nClient\n\n```python\nimport asyncio\nimport aiobsonrpc\n\n\nasync def do_connect():\n    reader, writer = await asyncio.open_connection('localhost', 6789, loop=loop)\n    rpc = aiobsonrpc.JSONRpc(reader, writer)\n    peer = rpc.get_peer_proxy(timeout=5)\n    result = await peer.echo(123)\n    print(result)  # 123\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(do_connect())\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/HarryHEi/aiobsonrpc", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "aiobsonrpc", "package_url": "https://pypi.org/project/aiobsonrpc/", "platform": "", "project_url": "https://pypi.org/project/aiobsonrpc/", "project_urls": {"Homepage": "https://github.com/HarryHEi/aiobsonrpc"}, "release_url": "https://pypi.org/project/aiobsonrpc/0.0.4/", "requires_dist": null, "requires_python": "", "summary": "A Python library for JSON-RPC 2.0", "version": "0.0.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>aiobsonrpc</h1>\n<p><a href=\"https://github.com/seprich/py-bson-rpc\" rel=\"nofollow\">bsonrpc</a> for asyncio.</p>\n<p>Python 3.5+</p>\n<h2>Getting Started</h2>\n<h3>Installing</h3>\n<pre><code>pip install aiobsonrpc\n</code></pre>\n<h3>Example</h3>\n<p>Server</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">import</span> <span class=\"nn\">aiobsonrpc</span>\n\n\n<span class=\"nd\">@aiobsonrpc</span><span class=\"o\">.</span><span class=\"n\">service_class</span>\n<span class=\"k\">class</span> <span class=\"nc\">EchoService</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n    <span class=\"nd\">@aiobsonrpc</span><span class=\"o\">.</span><span class=\"n\">aio_rpc_request</span>\n    <span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">echo</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">):</span>\n        <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">data</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">on_connected</span><span class=\"p\">(</span><span class=\"n\">reader</span><span class=\"p\">,</span> <span class=\"n\">writer</span><span class=\"p\">):</span>\n    <span class=\"n\">aiobsonrpc</span><span class=\"o\">.</span><span class=\"n\">JSONRpc</span><span class=\"p\">(</span><span class=\"n\">reader</span><span class=\"p\">,</span> <span class=\"n\">writer</span><span class=\"p\">,</span> <span class=\"n\">services</span><span class=\"o\">=</span><span class=\"n\">EchoService</span><span class=\"p\">())</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">get_event_loop</span><span class=\"p\">()</span>\n\n    <span class=\"n\">server</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">start_server</span><span class=\"p\">(</span><span class=\"n\">on_connected</span><span class=\"p\">,</span> <span class=\"s1\">'0.0.0.0'</span><span class=\"p\">,</span> <span class=\"mi\">6789</span><span class=\"p\">,</span> <span class=\"n\">loop</span><span class=\"o\">=</span><span class=\"n\">loop</span><span class=\"p\">)</span>\n    <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">create_task</span><span class=\"p\">(</span><span class=\"n\">server</span><span class=\"p\">)</span>\n\n    <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">run_forever</span><span class=\"p\">()</span>\n</pre>\n<p>Client</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">import</span> <span class=\"nn\">aiobsonrpc</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">do_connect</span><span class=\"p\">():</span>\n    <span class=\"n\">reader</span><span class=\"p\">,</span> <span class=\"n\">writer</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">open_connection</span><span class=\"p\">(</span><span class=\"s1\">'localhost'</span><span class=\"p\">,</span> <span class=\"mi\">6789</span><span class=\"p\">,</span> <span class=\"n\">loop</span><span class=\"o\">=</span><span class=\"n\">loop</span><span class=\"p\">)</span>\n    <span class=\"n\">rpc</span> <span class=\"o\">=</span> <span class=\"n\">aiobsonrpc</span><span class=\"o\">.</span><span class=\"n\">JSONRpc</span><span class=\"p\">(</span><span class=\"n\">reader</span><span class=\"p\">,</span> <span class=\"n\">writer</span><span class=\"p\">)</span>\n    <span class=\"n\">peer</span> <span class=\"o\">=</span> <span class=\"n\">rpc</span><span class=\"o\">.</span><span class=\"n\">get_peer_proxy</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n    <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">peer</span><span class=\"o\">.</span><span class=\"n\">echo</span><span class=\"p\">(</span><span class=\"mi\">123</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>  <span class=\"c1\"># 123</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">get_event_loop</span><span class=\"p\">()</span>\n    <span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">run_until_complete</span><span class=\"p\">(</span><span class=\"n\">do_connect</span><span class=\"p\">())</span>\n</pre>\n\n          </div>"}, "last_serial": 5384824, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "eeb6edb3c133dd8023edf7c379650f9e", "sha256": "7feb656dd854fc9eb3f213da00c80854bd21d4e91e49c5f0b10d4652d32b8187"}, "downloads": -1, "filename": "aiobsonrpc-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "eeb6edb3c133dd8023edf7c379650f9e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 12154, "upload_time": "2018-12-07T03:40:55", "upload_time_iso_8601": "2018-12-07T03:40:55.390833Z", "url": "https://files.pythonhosted.org/packages/eb/be/b435f9849c85e0f5f669006bae1d09f138cf976501245df3f03a38cf7606/aiobsonrpc-0.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1a9f2b3ff686ca29e5533fa5f135b3a6", "sha256": "433d6303648d79864b74d3041a718c5dba781059e1a8e904f1f7ce40d145297f"}, "downloads": -1, "filename": "aiobsonrpc-0.0.1.tar.gz", "has_sig": false, "md5_digest": "1a9f2b3ff686ca29e5533fa5f135b3a6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8229, "upload_time": "2018-12-07T03:40:58", "upload_time_iso_8601": "2018-12-07T03:40:58.495995Z", "url": "https://files.pythonhosted.org/packages/b8/ec/49ca1ff6954265cc08292bd384631d1978a81050e977c82cbc90561b7183/aiobsonrpc-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "808e6dcfba4e557941387e735234087b", "sha256": "0f43054475cc31bd5f7e59a928c141b82889d89ee792b7823f2fc9ea6af0c89e"}, "downloads": -1, "filename": "aiobsonrpc-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "808e6dcfba4e557941387e735234087b", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 12153, "upload_time": "2018-12-07T03:40:57", "upload_time_iso_8601": "2018-12-07T03:40:57.229362Z", "url": "https://files.pythonhosted.org/packages/8e/55/2a871af572730b38e085e3e446bd361af098dc271d458fb002e670e59e6f/aiobsonrpc-0.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "888ce72ef9061f4ec7bd5528682c16ff", "sha256": "0923727d314550e81f84f7980493f61d4f9bd79c05ae2a3c7bb198244dd3c87c"}, "downloads": -1, "filename": "aiobsonrpc-0.0.2.tar.gz", "has_sig": false, "md5_digest": "888ce72ef9061f4ec7bd5528682c16ff", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8227, "upload_time": "2018-12-07T03:40:59", "upload_time_iso_8601": "2018-12-07T03:40:59.533612Z", "url": "https://files.pythonhosted.org/packages/31/a2/cfd706d2263fa106ac9f733ef15694ecc5993361e8cbc534caca7887d124/aiobsonrpc-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "9afb4c56108ddff5cf0fe41deb988513", "sha256": "21174cd63da384b51bab3704a267fd0ff4ed14da9341fff2300ea26ee9106e0f"}, "downloads": -1, "filename": "aiobsonrpc-0.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "9afb4c56108ddff5cf0fe41deb988513", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 12128, "upload_time": "2019-05-20T06:51:40", "upload_time_iso_8601": "2019-05-20T06:51:40.323118Z", "url": "https://files.pythonhosted.org/packages/30/27/9db30ccf39bc2a9add09f76996abf282a986e436fc859066b277b71fe15f/aiobsonrpc-0.0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1047922d23147e932ca2794d27de1811", "sha256": "5c6e679bc9134897a361e1e715cd3373dd9eb556309a7fd3338e8f56c90b8cf0"}, "downloads": -1, "filename": "aiobsonrpc-0.0.3.tar.gz", "has_sig": false, "md5_digest": "1047922d23147e932ca2794d27de1811", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8325, "upload_time": "2019-05-20T06:51:41", "upload_time_iso_8601": "2019-05-20T06:51:41.654839Z", "url": "https://files.pythonhosted.org/packages/64/1b/3ef47bf430799b6e787ef28a3769ac2eacd8936552dd61fc0dc67409930d/aiobsonrpc-0.0.3.tar.gz", "yanked": false}], "0.0.4": [{"comment_text": "", "digests": {"md5": "4e64b1eaeaddc00589db01a4a8574cde", "sha256": "f4c2a0051151f82aee11c9d7b6fc25fd926d1387942a4c803b3534f397f6cdae"}, "downloads": -1, "filename": "aiobsonrpc-0.0.4-py3-none-any.whl", "has_sig": false, "md5_digest": "4e64b1eaeaddc00589db01a4a8574cde", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 12155, "upload_time": "2019-06-11T06:16:34", "upload_time_iso_8601": "2019-06-11T06:16:34.155649Z", "url": "https://files.pythonhosted.org/packages/3f/6a/dbfe6dd4b1c487db7460c81b241c6e2c84489c0ca4dc30b24d71534bec29/aiobsonrpc-0.0.4-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8b9382e95762d90952ae8108d7ea83a0", "sha256": "e592ff652f5c421ff22ee24773432635d429c2af96026c2002c95525e7bdfc6a"}, "downloads": -1, "filename": "aiobsonrpc-0.0.4.tar.gz", "has_sig": false, "md5_digest": "8b9382e95762d90952ae8108d7ea83a0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8344, "upload_time": "2019-06-11T06:16:35", "upload_time_iso_8601": "2019-06-11T06:16:35.590647Z", "url": "https://files.pythonhosted.org/packages/f3/e4/64a4890f5c18d125260357306a7fb6b939ea70f13e8e249ab4db9ec95ff3/aiobsonrpc-0.0.4.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4e64b1eaeaddc00589db01a4a8574cde", "sha256": "f4c2a0051151f82aee11c9d7b6fc25fd926d1387942a4c803b3534f397f6cdae"}, "downloads": -1, "filename": "aiobsonrpc-0.0.4-py3-none-any.whl", "has_sig": false, "md5_digest": "4e64b1eaeaddc00589db01a4a8574cde", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 12155, "upload_time": "2019-06-11T06:16:34", "upload_time_iso_8601": "2019-06-11T06:16:34.155649Z", "url": "https://files.pythonhosted.org/packages/3f/6a/dbfe6dd4b1c487db7460c81b241c6e2c84489c0ca4dc30b24d71534bec29/aiobsonrpc-0.0.4-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8b9382e95762d90952ae8108d7ea83a0", "sha256": "e592ff652f5c421ff22ee24773432635d429c2af96026c2002c95525e7bdfc6a"}, "downloads": -1, "filename": "aiobsonrpc-0.0.4.tar.gz", "has_sig": false, "md5_digest": "8b9382e95762d90952ae8108d7ea83a0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8344, "upload_time": "2019-06-11T06:16:35", "upload_time_iso_8601": "2019-06-11T06:16:35.590647Z", "url": "https://files.pythonhosted.org/packages/f3/e4/64a4890f5c18d125260357306a7fb6b939ea70f13e8e249ab4db9ec95ff3/aiobsonrpc-0.0.4.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:21:45 2020"}