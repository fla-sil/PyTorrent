{"info": {"author": "Jason Edelman", "author_email": "jedelman8@gmail.com", "bugtrack_url": null, "classifiers": [], "description": "\n# Multi-vendor Ansible Modules for Network Automation\n\nYou need to perform **two** steps to start using these modules.\n\n1. Ensure this repository is in your Ansible module search path\n2. Install Dependencies \n\n\n## Ensure Modules are you in your search path\n\nFirst, understand what your search path is:\n\n```\nntc@ntc:~/projects$ ansible --version\nansible 2.1.1.0\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = ???\n```\n\nIf you already have a search path configured, clone the repo (see options below) while you are in your search path.\n\nIf you have a \"default\" or No search path shown, open the config file that is shown in the output above, here that is `/etc/ansible/ansible.cfg`.  In that file, you'll see these first few lines:\n\n```\n[defaults]\n\n# some basic default values...\n\ninventory      = /etc/ansible/hosts\nlibrary        = /home/ntc/projects/\n```\n\nAdd a path for `library` - this will become your search path.  Validate it with `ansible --version` after you make the change.\n\nWhen you clone, do not forget to use `--recursive `!\n\n**Option 1:**\n\n```\ngit clone https://github.com/networktocode/ntc-ansible --recursive\n```\n\n**Option 2:**\n\n```\ngit clone https://github.com/networktocode/ntc-ansible\ncd ntc-ansible\ngit submodule update --init --recursive\n```\n\nNote: if you want to use **ntc_show_command** for parsing with ntc-templates, you navigate to that directory after the clone and run the setup.py file, e.g. `sudo python setup.py install`.\n\n\nAs a quick test and sanity use `ansible-doc` on one of the modules before trying to use them in a playbook.  For example, try this:\n\n```\n$ ansible-doc ntc_file_copy\n```\n\nIf that works, Ansible can find the modules and you can proceed to installing the deps below.\n\n\n## Install Dependencies\n\n**Option 1:**\n\n```\npip install ntc-ansible\n```\n\n**Option 2:**\n\n_If you already cloned it above, you can just run the third statement below._\n\n```\ngit clone https://github.com/networktocode/ntc-ansible\ncd ntc-ansible\nsudo python setup.py install\n```\n\n\nAdditionally, you'll need `lxml` can install like this on Ubuntu:\n\n```\nsudo apt-get install zlib1g-dev libxml2-dev libxslt-dev python-dev\n```\n\nEvery so often `terminal` is not installed and it may need to be installed manually:\n\n```\npip install terminal\n```\n\n\n## Modules\n\n  * **ntc_show_command** - gets structured data from devices that don't have an API.  This module uses SSH to connect to devices.  Supports as many device types as netmiko supports.\n  * **ntc_config_command** - sends commands to devices that don't have an API.  This module uses SSH to connect to devices.  Supports as many device types as netmiko supports.\n  * **ntc_save_config** - saves the running config and optionally copies it to the Ansible control host for an offline backup.  Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.\n  * **ntc_file_copy** - copies a file from the Ansible control host to a network device. Uses SSH for IOS, NX-API for Nexus, and eAPI for Arista.\n  * **ntc_reboot** - reboots a network device. Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.\n  * **ntc_get_facts** - gathers facts from a network device.  Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.\n  * **ntc_rollback** - performs two major functions.  (1) Creates a checkpoint file or backup running config on box. (2) Rolls back to the previously created checkpoint/backup config.  Use case is to create the checkpoint/backup as the first task in a playbook and then rollback to it _if_ needed using block/rescue, i.e. try/except in Ansible. Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.\n  * **ntc_install_os** - installs a new operating system or just sets boot options.  Depends on platform.  Does not issue a \"reload\" command, but the device may perform an automatic reboot.  Common workflow is to use ntc_file_copy, ntc_install_os, and then ntc_reboot (if needed) for upgrades.  Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.\n\n## Common Issues\n\n#### Gather Facts\n\nStarting in Ansible 2.1 there is a name space conflict when gathering facts. The below message will indicate the issues:\n\n```\nTASK [Gathering Facts] *************************************************************************\n*Using module file /home/bdowling/src/ansible-modules/ntc-ansible/setup.cfg*\nfatal: [rtr02]: FAILED! => {\n    \"failed\": true, \n    \"msg\": \"module (setup) is missing interpreter line\"\n}\n\nmsg: module (setup) is missing interpreter line\n\nPLAY RECAP *************************************************************************************\nrtr02              : ok=0    changed=0    unreachable=0    failed=1   \n```\n\nYou can solve this by either changing the `gather_facts` to no, or removing the 3 `setup.XX` files.\n\nGather Facts Example: \n```\n- hosts: test\n  connection: local\n  gather_facts: no\n```\n\nRemove Files Example:\n```\nrm ./setup.cfg\nrm ./setup.py\nrm ./ntc-templates/setup.py\n```\nSee https://github.com/ansible/ansible/issues/20702 and https://github.com/ansible/ansible/pull/20717 for further details.\n\n#### This module requires TextFSM\n\nMost often seen in virtual enviroments as per ansible's interpretation of which python binary you are using is not as expected. You can tell that you have reached this issue if you correctly have textfsm installed, but receive the following warning:\n\n```\nFAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"This module requires TextFSM\"}\n```\nTo fix this add the following to your inventory or similar to your `group_vars/all.yml`\n\n```\n[vars:all]\nansible_python_interpreter=\"/usr/bin/env python\"\n```\nsee https://github.com/ansible/ansible/issues/6345#issuecomment-181999529 for further details. \n\n## Examples\n\nSee [Examples](examples.md)\n\n## Background\n\n**ntc_show_command** and **ntc_config_command** were the first two modules written out of this group.  These two use netmiko for transport - this means if netmiko supports a given platform, these modules can be used.\n\nAll other modules support Nexus using pyntc, Arista using pyeapi, IOS using netmiko, and Juniper using PyEZ.\n\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "https://github.com/networktocode/ntc-ansible/tarball/0.1.0", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/networktocode/ntc-ansible", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "ntc-ansible", "package_url": "https://pypi.org/project/ntc-ansible/", "platform": "", "project_url": "https://pypi.org/project/ntc-ansible/", "project_urls": {"Download": "https://github.com/networktocode/ntc-ansible/tarball/0.1.0", "Homepage": "https://github.com/networktocode/ntc-ansible"}, "release_url": "https://pypi.org/project/ntc-ansible/0.9.2/", "requires_dist": ["pynxos", "pyntc", "netmiko"], "requires_python": "", "summary": "Dependencies for NTC Ansible modules", "version": "0.9.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Multi-vendor Ansible Modules for Network Automation</h1>\n<p>You need to perform <strong>two</strong> steps to start using these modules.</p>\n<ol>\n<li>Ensure this repository is in your Ansible module search path</li>\n<li>Install Dependencies</li>\n</ol>\n<h2>Ensure Modules are you in your search path</h2>\n<p>First, understand what your search path is:</p>\n<pre><code>ntc@ntc:~/projects$ ansible --version\nansible 2.1.1.0\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = ???\n</code></pre>\n<p>If you already have a search path configured, clone the repo (see options below) while you are in your search path.</p>\n<p>If you have a \"default\" or No search path shown, open the config file that is shown in the output above, here that is <code>/etc/ansible/ansible.cfg</code>.  In that file, you'll see these first few lines:</p>\n<pre><code>[defaults]\n\n# some basic default values...\n\ninventory      = /etc/ansible/hosts\nlibrary        = /home/ntc/projects/\n</code></pre>\n<p>Add a path for <code>library</code> - this will become your search path.  Validate it with <code>ansible --version</code> after you make the change.</p>\n<p>When you clone, do not forget to use <code>--recursive</code>!</p>\n<p><strong>Option 1:</strong></p>\n<pre><code>git clone https://github.com/networktocode/ntc-ansible --recursive\n</code></pre>\n<p><strong>Option 2:</strong></p>\n<pre><code>git clone https://github.com/networktocode/ntc-ansible\ncd ntc-ansible\ngit submodule update --init --recursive\n</code></pre>\n<p>Note: if you want to use <strong>ntc_show_command</strong> for parsing with ntc-templates, you navigate to that directory after the clone and run the setup.py file, e.g. <code>sudo python setup.py install</code>.</p>\n<p>As a quick test and sanity use <code>ansible-doc</code> on one of the modules before trying to use them in a playbook.  For example, try this:</p>\n<pre><code>$ ansible-doc ntc_file_copy\n</code></pre>\n<p>If that works, Ansible can find the modules and you can proceed to installing the deps below.</p>\n<h2>Install Dependencies</h2>\n<p><strong>Option 1:</strong></p>\n<pre><code>pip install ntc-ansible\n</code></pre>\n<p><strong>Option 2:</strong></p>\n<p><em>If you already cloned it above, you can just run the third statement below.</em></p>\n<pre><code>git clone https://github.com/networktocode/ntc-ansible\ncd ntc-ansible\nsudo python setup.py install\n</code></pre>\n<p>Additionally, you'll need <code>lxml</code> can install like this on Ubuntu:</p>\n<pre><code>sudo apt-get install zlib1g-dev libxml2-dev libxslt-dev python-dev\n</code></pre>\n<p>Every so often <code>terminal</code> is not installed and it may need to be installed manually:</p>\n<pre><code>pip install terminal\n</code></pre>\n<h2>Modules</h2>\n<ul>\n<li><strong>ntc_show_command</strong> - gets structured data from devices that don't have an API.  This module uses SSH to connect to devices.  Supports as many device types as netmiko supports.</li>\n<li><strong>ntc_config_command</strong> - sends commands to devices that don't have an API.  This module uses SSH to connect to devices.  Supports as many device types as netmiko supports.</li>\n<li><strong>ntc_save_config</strong> - saves the running config and optionally copies it to the Ansible control host for an offline backup.  Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.</li>\n<li><strong>ntc_file_copy</strong> - copies a file from the Ansible control host to a network device. Uses SSH for IOS, NX-API for Nexus, and eAPI for Arista.</li>\n<li><strong>ntc_reboot</strong> - reboots a network device. Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.</li>\n<li><strong>ntc_get_facts</strong> - gathers facts from a network device.  Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.</li>\n<li><strong>ntc_rollback</strong> - performs two major functions.  (1) Creates a checkpoint file or backup running config on box. (2) Rolls back to the previously created checkpoint/backup config.  Use case is to create the checkpoint/backup as the first task in a playbook and then rollback to it <em>if</em> needed using block/rescue, i.e. try/except in Ansible. Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.</li>\n<li><strong>ntc_install_os</strong> - installs a new operating system or just sets boot options.  Depends on platform.  Does not issue a \"reload\" command, but the device may perform an automatic reboot.  Common workflow is to use ntc_file_copy, ntc_install_os, and then ntc_reboot (if needed) for upgrades.  Uses SSH/netmiko for IOS, NX-API for Nexus, and eAPI for Arista.</li>\n</ul>\n<h2>Common Issues</h2>\n<h4>Gather Facts</h4>\n<p>Starting in Ansible 2.1 there is a name space conflict when gathering facts. The below message will indicate the issues:</p>\n<pre><code>TASK [Gathering Facts] *************************************************************************\n*Using module file /home/bdowling/src/ansible-modules/ntc-ansible/setup.cfg*\nfatal: [rtr02]: FAILED! =&gt; {\n    \"failed\": true, \n    \"msg\": \"module (setup) is missing interpreter line\"\n}\n\nmsg: module (setup) is missing interpreter line\n\nPLAY RECAP *************************************************************************************\nrtr02              : ok=0    changed=0    unreachable=0    failed=1   \n</code></pre>\n<p>You can solve this by either changing the <code>gather_facts</code> to no, or removing the 3 <code>setup.XX</code> files.</p>\n<p>Gather Facts Example:</p>\n<pre><code>- hosts: test\n  connection: local\n  gather_facts: no\n</code></pre>\n<p>Remove Files Example:</p>\n<pre><code>rm ./setup.cfg\nrm ./setup.py\nrm ./ntc-templates/setup.py\n</code></pre>\n<p>See <a href=\"https://github.com/ansible/ansible/issues/20702\" rel=\"nofollow\">https://github.com/ansible/ansible/issues/20702</a> and <a href=\"https://github.com/ansible/ansible/pull/20717\" rel=\"nofollow\">https://github.com/ansible/ansible/pull/20717</a> for further details.</p>\n<h4>This module requires TextFSM</h4>\n<p>Most often seen in virtual enviroments as per ansible's interpretation of which python binary you are using is not as expected. You can tell that you have reached this issue if you correctly have textfsm installed, but receive the following warning:</p>\n<pre><code>FAILED! =&gt; {\"changed\": false, \"failed\": true, \"msg\": \"This module requires TextFSM\"}\n</code></pre>\n<p>To fix this add the following to your inventory or similar to your <code>group_vars/all.yml</code></p>\n<pre><code>[vars:all]\nansible_python_interpreter=\"/usr/bin/env python\"\n</code></pre>\n<p>see <a href=\"https://github.com/ansible/ansible/issues/6345#issuecomment-181999529\" rel=\"nofollow\">https://github.com/ansible/ansible/issues/6345#issuecomment-181999529</a> for further details.</p>\n<h2>Examples</h2>\n<p>See <a href=\"examples.md\" rel=\"nofollow\">Examples</a></p>\n<h2>Background</h2>\n<p><strong>ntc_show_command</strong> and <strong>ntc_config_command</strong> were the first two modules written out of this group.  These two use netmiko for transport - this means if netmiko supports a given platform, these modules can be used.</p>\n<p>All other modules support Nexus using pyntc, Arista using pyeapi, IOS using netmiko, and Juniper using PyEZ.</p>\n\n          </div>"}, "last_serial": 6013377, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "9f539b255cb9b335030ae43dc411a081", "sha256": "f4927903ed416bc4e5f92545d1e33700790187ebebb64c1dfc7b183af820b09a"}, "downloads": -1, "filename": "ntc_ansible-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "9f539b255cb9b335030ae43dc411a081", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 1726, "upload_time": "2019-10-21T15:45:38", "upload_time_iso_8601": "2019-10-21T15:45:38.085250Z", "url": "https://files.pythonhosted.org/packages/38/53/0b50c2898e352855b434cfedd9727c78d1d1e2a3a7660a5eec8d1516b9be/ntc_ansible-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5cdab748bf5e41cbacee2f012d25b5da", "sha256": "6617e4a54260d812d36cdd66768d40c2a1b7d88f34e125465253271094158a63"}, "downloads": -1, "filename": "ntc-ansible-0.1.0.tar.gz", "has_sig": false, "md5_digest": "5cdab748bf5e41cbacee2f012d25b5da", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2572, "upload_time": "2016-01-19T17:10:44", "upload_time_iso_8601": "2016-01-19T17:10:44.554852Z", "url": "https://files.pythonhosted.org/packages/9f/9f/01dc56080aff7acdd0d14b2642dacec0fce967826950094b172824dca3b2/ntc-ansible-0.1.0.tar.gz", "yanked": false}], "0.9.1": [{"comment_text": "", "digests": {"md5": "3b812476de2447c8fca24d71f2eb9590", "sha256": "10ea574ff27f0b699dcb7a35877e366d2832f1849aa149e65d92cd3882d5e282"}, "downloads": -1, "filename": "ntc_ansible-0.9.1-py3-none-any.whl", "has_sig": false, "md5_digest": "3b812476de2447c8fca24d71f2eb9590", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 4084, "upload_time": "2019-10-21T15:45:40", "upload_time_iso_8601": "2019-10-21T15:45:40.137102Z", "url": "https://files.pythonhosted.org/packages/55/8a/1e5277c5b133f45271747cf7b2cdf8706261d5b7ce0ffc75f3e46a64f08d/ntc_ansible-0.9.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "daec945257d50c8bac67223ff05986aa", "sha256": "81ddce32a0cdebeb09e2f54844733c62a46bfb5d7e74fa14cc4369d038cd0905"}, "downloads": -1, "filename": "ntc-ansible-0.9.1.tar.gz", "has_sig": false, "md5_digest": "daec945257d50c8bac67223ff05986aa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3919, "upload_time": "2019-10-21T15:45:41", "upload_time_iso_8601": "2019-10-21T15:45:41.634778Z", "url": "https://files.pythonhosted.org/packages/bf/a3/62c21dadd1a4063ccfe292b65e6174788d4eaeb7f5afc63632f3eb22bce0/ntc-ansible-0.9.1.tar.gz", "yanked": false}], "0.9.2": [{"comment_text": "", "digests": {"md5": "662bf8b9a407f521cd6ca0e95a71ad3a", "sha256": "8b57ce906267eb64a6994a40bf465e27089de3b81aaf2422fcc6c8840eae35f4"}, "downloads": -1, "filename": "ntc_ansible-0.9.2-py3-none-any.whl", "has_sig": false, "md5_digest": "662bf8b9a407f521cd6ca0e95a71ad3a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 4084, "upload_time": "2019-10-22T15:07:03", "upload_time_iso_8601": "2019-10-22T15:07:03.763405Z", "url": "https://files.pythonhosted.org/packages/bd/34/343dd76d35c2f7217671bac2661c078563917de4483a9b3c29558d250076/ntc_ansible-0.9.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "a95966d7c6baa9cf861b85ba6f89143f", "sha256": "b28e3063a9cccbb1817101f9fa97aa981df65511944830fe3f9797467f060afb"}, "downloads": -1, "filename": "ntc-ansible-0.9.2.tar.gz", "has_sig": false, "md5_digest": "a95966d7c6baa9cf861b85ba6f89143f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3950, "upload_time": "2019-10-22T15:07:04", "upload_time_iso_8601": "2019-10-22T15:07:04.777038Z", "url": "https://files.pythonhosted.org/packages/7b/c2/2f12847984ca7447349e32d744e7c38de997ebdc34a941d725757aad1467/ntc-ansible-0.9.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "662bf8b9a407f521cd6ca0e95a71ad3a", "sha256": "8b57ce906267eb64a6994a40bf465e27089de3b81aaf2422fcc6c8840eae35f4"}, "downloads": -1, "filename": "ntc_ansible-0.9.2-py3-none-any.whl", "has_sig": false, "md5_digest": "662bf8b9a407f521cd6ca0e95a71ad3a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 4084, "upload_time": "2019-10-22T15:07:03", "upload_time_iso_8601": "2019-10-22T15:07:03.763405Z", "url": "https://files.pythonhosted.org/packages/bd/34/343dd76d35c2f7217671bac2661c078563917de4483a9b3c29558d250076/ntc_ansible-0.9.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "a95966d7c6baa9cf861b85ba6f89143f", "sha256": "b28e3063a9cccbb1817101f9fa97aa981df65511944830fe3f9797467f060afb"}, "downloads": -1, "filename": "ntc-ansible-0.9.2.tar.gz", "has_sig": false, "md5_digest": "a95966d7c6baa9cf861b85ba6f89143f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3950, "upload_time": "2019-10-22T15:07:04", "upload_time_iso_8601": "2019-10-22T15:07:04.777038Z", "url": "https://files.pythonhosted.org/packages/7b/c2/2f12847984ca7447349e32d744e7c38de997ebdc34a941d725757aad1467/ntc-ansible-0.9.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:44:23 2020"}