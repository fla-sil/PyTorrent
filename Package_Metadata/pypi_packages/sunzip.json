{"info": {"author": "JunWeiSong,KunYuChen", "author_email": "sungboss2004@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: GNU Lesser General Public License v3 (LGPLv3)", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# SUNZIP\n\n[![forthebadge made-with-python](http://ForTheBadge.com/images/badges/made-with-python.svg)](https://www.python.org/)\n\n---\n![PyPI](https://img.shields.io/pypi/pyversions/sunzip.svg)\n![Wheel](https://img.shields.io/pypi/wheel/sunzip.svg)\n![Downloads](https://img.shields.io/pypi/dm/sunzip.svg)\n![version](https://img.shields.io/pypi/v/sunzip.svg)\n[![travis-ci](https://travis-ci.org/twbgc/sunzip.svg?branch=master)](https://travis-ci.org/twbgc/sunzip)\n[![codecov](https://codecov.io/gh/twbgc/sunzip/branch/master/graph/badge.svg)](https://codecov.io/gh/twbgc/sunzip)\n\n## Introduction\n\n### Why are we doing this?\n\nAccording to [Cara Marie](https://youtu.be/IXkX2ojrKZQ?t=331), an archive bomb a.k.a. A zip bomb is often employed to disable antivirus software, in order to create an opening for more traditional viruses. In addition, various kinds of pitfalls may occur during decompression.\n\n### [Description for decompression pitfalls on zipfile doc](https://docs.python.org/3.8/library/zipfile.html)\n\n### What is zip bomb?\nIt often appeared as a relatively small size zip file. And the unzipped file will be much larger than the zipped one.\nThis would probably cause a problem when your disk volume or memory is relatively small than the unzipped one.\n\n### How do we defense zip bomb?\n\n* Defense Layer 1 - checks perform on the server side.\n\n```\n    1. Check if it's a nested zip file. (i.e. 42.zip)\n    2. Check if the compression ratio (Uncompressed Content/Compressed Content) \n       is greater than the threshold?\n    3. Check if the file format is expected for context.\n    4. Upload file size does not exceed the maximum limit. \n```\n\n* Defense Layer 2 - limit the number of resources available to the process and its children.\n\n```\n    1. Check if CPU time is greater than the threshold.\n    2. Check if the extracted part in memory is oversized. (memory usage)\n```\n\n* Defense Layer 3 - filetype-specific mitigations.\n\n  Filetype: Archives\n```\n    1. Restrict output file size and number of extracted files \n       to ensure the total doesn't exceed the maximum limit.\n```\n\n### How do we set thresholds?\n\n  ```\n  Defense Layer 1:\n    Uncompressed content size:  200 MB (vt)\n    Compression ratio:          https://youtu.be/IXkX2ojrKZQ?t=553\n\n  Defense Layer 2:\n    CPU time:                   2 seconds(vt)\n    Memoery oversized:\n\n  Defense Layer 3:\n    Output file size:\n    Number of extracted files:\n  ```\n\n### Useful resources\n\n  ```\n  Bomb Codes\n  https://bomb.codes/\n\n  Mitigation Summary\n  https://youtu.be/IXkX2ojrKZQ?t=1296\n\n  Defense layers\n  https://bomb.codes/mitigations\n  ```\n\n\n## Install\n\n\n```bash\n$ pip3 install sunzip\n```\n\n```bash\n# for development use \"development mode\"\n# https://packaging.python.org/tutorials/installing-packages/\n$ pip3 install -e <directory to project root>\n```\n\n\n## Usage\n\n```bash\n# for command line usage see the help\n$ sunzip-cli -h\n```\nYou can find the arguments defined at the top of [cli.py](./sunzip/cli.py)\n\n```python=\nimport sunzip\n\nf = sunzip.Sunzip(\"archive.zip\")\n```\n\n\n**Customize your resource limit.**\n\n*Maximum compression ratio threshold*\n```python=\nf.threshold = 50\n```\n*Maximum CPU time (second)*\n```python=\nf.cpu = 1\n```\n*Maximum memory usage (byte)*\n```python=\nf.memory = 1024\n```\n*Maximum file size (byte)*\n```python=\nf.filesize = 1024\n```\n\nIf there is no setting, the default value will be used.\n\n`extract()` would perform a series of the above checks before decompression. If all pass, the zip file will be decompressed.\n\n```python=\nimport sunzip\n\nf = sunzip.Sunzip(\"archive.zip\")\n\nf.extract()\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/twbgc/sunzip", "keywords": "secure unzip,zipbomb", "license": "MIT Licence", "maintainer": "", "maintainer_email": "", "name": "sunzip", "package_url": "https://pypi.org/project/sunzip/", "platform": "", "project_url": "https://pypi.org/project/sunzip/", "project_urls": {"Homepage": "https://github.com/twbgc/sunzip"}, "release_url": "https://pypi.org/project/sunzip/0.0.3/", "requires_dist": null, "requires_python": "", "summary": "Provide secure unzip against zip bomb.", "version": "0.0.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>SUNZIP</h1>\n<p><a href=\"https://www.python.org/\" rel=\"nofollow\"><img alt=\"forthebadge made-with-python\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c389fc25d835c23e3f833bf61244db7530f53e46/687474703a2f2f466f7254686542616467652e636f6d2f696d616765732f6261646765732f6d6164652d776974682d707974686f6e2e737667\"></a></p>\n<hr>\n<p><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0ddd9fa6d3558ea5c8c44403cb41f13e17e45019/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f73756e7a69702e737667\">\n<img alt=\"Wheel\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5497e84cd6ecd61e0d40d284dc16c2a6dd8082ea/68747470733a2f2f696d672e736869656c64732e696f2f707970692f776865656c2f73756e7a69702e737667\">\n<img alt=\"Downloads\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/bd8ebea702c2006b29862296ebddb6bfa1871b53/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f73756e7a69702e737667\">\n<img alt=\"version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/07826bd545a35ce3cdb315a03e182d1761c6d653/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f73756e7a69702e737667\">\n<a href=\"https://travis-ci.org/twbgc/sunzip\" rel=\"nofollow\"><img alt=\"travis-ci\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8812a0ab7fbd22ed558eafc3b304ce956a7760e4/68747470733a2f2f7472617669732d63692e6f72672f74776267632f73756e7a69702e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/gh/twbgc/sunzip\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a0d13dbd6ee09a326a17f9cf1afed43535d4ff70/68747470733a2f2f636f6465636f762e696f2f67682f74776267632f73756e7a69702f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a></p>\n<h2>Introduction</h2>\n<h3>Why are we doing this?</h3>\n<p>According to <a href=\"https://youtu.be/IXkX2ojrKZQ?t=331\" rel=\"nofollow\">Cara Marie</a>, an archive bomb a.k.a. A zip bomb is often employed to disable antivirus software, in order to create an opening for more traditional viruses. In addition, various kinds of pitfalls may occur during decompression.</p>\n<h3><a href=\"https://docs.python.org/3.8/library/zipfile.html\" rel=\"nofollow\">Description for decompression pitfalls on zipfile doc</a></h3>\n<h3>What is zip bomb?</h3>\n<p>It often appeared as a relatively small size zip file. And the unzipped file will be much larger than the zipped one.\nThis would probably cause a problem when your disk volume or memory is relatively small than the unzipped one.</p>\n<h3>How do we defense zip bomb?</h3>\n<ul>\n<li>Defense Layer 1 - checks perform on the server side.</li>\n</ul>\n<pre><code>    1. Check if it's a nested zip file. (i.e. 42.zip)\n    2. Check if the compression ratio (Uncompressed Content/Compressed Content) \n       is greater than the threshold?\n    3. Check if the file format is expected for context.\n    4. Upload file size does not exceed the maximum limit. \n</code></pre>\n<ul>\n<li>Defense Layer 2 - limit the number of resources available to the process and its children.</li>\n</ul>\n<pre><code>    1. Check if CPU time is greater than the threshold.\n    2. Check if the extracted part in memory is oversized. (memory usage)\n</code></pre>\n<ul>\n<li>\n<p>Defense Layer 3 - filetype-specific mitigations.</p>\n<p>Filetype: Archives</p>\n</li>\n</ul>\n<pre><code>    1. Restrict output file size and number of extracted files \n       to ensure the total doesn't exceed the maximum limit.\n</code></pre>\n<h3>How do we set thresholds?</h3>\n<pre><code>Defense Layer 1:\n  Uncompressed content size:  200 MB (vt)\n  Compression ratio:          https://youtu.be/IXkX2ojrKZQ?t=553\n\nDefense Layer 2:\n  CPU time:                   2 seconds(vt)\n  Memoery oversized:\n\nDefense Layer 3:\n  Output file size:\n  Number of extracted files:\n</code></pre>\n<h3>Useful resources</h3>\n<pre><code>Bomb Codes\nhttps://bomb.codes/\n\nMitigation Summary\nhttps://youtu.be/IXkX2ojrKZQ?t=1296\n\nDefense layers\nhttps://bomb.codes/mitigations\n</code></pre>\n<h2>Install</h2>\n<pre>$ pip3 install sunzip\n</pre>\n<pre><span class=\"c1\"># for development use \"development mode\"</span>\n<span class=\"c1\"># https://packaging.python.org/tutorials/installing-packages/</span>\n$ pip3 install -e &lt;directory to project root&gt;\n</pre>\n<h2>Usage</h2>\n<pre><span class=\"c1\"># for command line usage see the help</span>\n$ sunzip-cli -h\n</pre>\n<p>You can find the arguments defined at the top of <a href=\"./sunzip/cli.py\" rel=\"nofollow\">cli.py</a></p>\n<pre>import sunzip\n\nf = sunzip.Sunzip(\"archive.zip\")\n</pre>\n<p><strong>Customize your resource limit.</strong></p>\n<p><em>Maximum compression ratio threshold</em></p>\n<pre>f.threshold = 50\n</pre>\n<p><em>Maximum CPU time (second)</em></p>\n<pre>f.cpu = 1\n</pre>\n<p><em>Maximum memory usage (byte)</em></p>\n<pre>f.memory = 1024\n</pre>\n<p><em>Maximum file size (byte)</em></p>\n<pre>f.filesize = 1024\n</pre>\n<p>If there is no setting, the default value will be used.</p>\n<p><code>extract()</code> would perform a series of the above checks before decompression. If all pass, the zip file will be decompressed.</p>\n<pre>import sunzip\n\nf = sunzip.Sunzip(\"archive.zip\")\n\nf.extract()\n</pre>\n\n          </div>"}, "last_serial": 7038118, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "a68497e8111c4630886eefec87287c7a", "sha256": "8a9f8845270dc3a1be128bac3da8f966dfd9690f8fec703eea398fb9548d3f89"}, "downloads": -1, "filename": "sunzip-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "a68497e8111c4630886eefec87287c7a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 4496, "upload_time": "2019-06-12T09:33:40", "upload_time_iso_8601": "2019-06-12T09:33:40.224875Z", "url": "https://files.pythonhosted.org/packages/05/8f/0bbda2699b62068cf5459429191f00867ce38093cbd046572dd9ceb99be3/sunzip-0.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "671955da17317290bdf2e46b396f748e", "sha256": "5eaf7a4ac4abbd8a9cc39e12e56271b10737be132f2da701ca65fc3f41abd4b6"}, "downloads": -1, "filename": "sunzip-0.0.1.tar.gz", "has_sig": false, "md5_digest": "671955da17317290bdf2e46b396f748e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4489, "upload_time": "2019-06-12T09:33:42", "upload_time_iso_8601": "2019-06-12T09:33:42.433306Z", "url": "https://files.pythonhosted.org/packages/24/07/5da29b65ba17eecd84df883d6bc0cd97c041aa51359a025fd863d9a45782/sunzip-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "800b69317c5c280660959a8e113b7335", "sha256": "7e7ffad9af184b43efa9349d3b3b4df8dbef1eaaa73e20b9a53a65370f62b1ed"}, "downloads": -1, "filename": "sunzip-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "800b69317c5c280660959a8e113b7335", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 4316, "upload_time": "2020-04-06T01:16:48", "upload_time_iso_8601": "2020-04-06T01:16:48.461121Z", "url": "https://files.pythonhosted.org/packages/56/fa/751bbed9f4e28b138ba1022b002e427d09f035e9370a2dcb7b45f2c9f129/sunzip-0.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "18b1f6370bca12373b70bbe47398ef3e", "sha256": "383e5048091d51be443d1d2e4835c968a8e7faa676b9d9a97414ef7cbfef8db6"}, "downloads": -1, "filename": "sunzip-0.0.2.tar.gz", "has_sig": false, "md5_digest": "18b1f6370bca12373b70bbe47398ef3e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4175, "upload_time": "2020-04-06T01:16:49", "upload_time_iso_8601": "2020-04-06T01:16:49.497830Z", "url": "https://files.pythonhosted.org/packages/e5/f6/a36f19b83b8a17136e973d8158dc5899ffcb8c4f14c55c313612cd76c377/sunzip-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "a10159ab651989bdacb541a0c5c75006", "sha256": "7d234d84fca75c31492efd8c30e27f4a4c81de117ba07537af56866ea952c36b"}, "downloads": -1, "filename": "sunzip-0.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "a10159ab651989bdacb541a0c5c75006", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5409, "upload_time": "2020-04-06T06:13:35", "upload_time_iso_8601": "2020-04-06T06:13:35.081960Z", "url": "https://files.pythonhosted.org/packages/73/6a/5967820f02e2c05225892295df13893ea8752429d14082bb05e62bbfcd33/sunzip-0.0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "4ee02943f811c8d9d6a88ad5887ef3c8", "sha256": "1d3581b63dcb746e07ac608b26a15112c2c77d01a75470a7bb828c162c4c08d2"}, "downloads": -1, "filename": "sunzip-0.0.3.tar.gz", "has_sig": false, "md5_digest": "4ee02943f811c8d9d6a88ad5887ef3c8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4949, "upload_time": "2020-04-06T06:13:36", "upload_time_iso_8601": "2020-04-06T06:13:36.115524Z", "url": "https://files.pythonhosted.org/packages/7c/67/958473a15234fb23e60d5a2bbc47f55cba4ef379ff28c3ca51dd9268fa30/sunzip-0.0.3.tar.gz", "yanked": false}], "0.1.0a1": [{"comment_text": "", "digests": {"md5": "44392f7b9055e2143f31b1379d2a8c2e", "sha256": "51804a0dd047b35e18464aab5695fdef5982061f84fbaf2b325c401051436a06"}, "downloads": -1, "filename": "sunzip-0.1.0a1-py3-none-any.whl", "has_sig": false, "md5_digest": "44392f7b9055e2143f31b1379d2a8c2e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5431, "upload_time": "2020-04-17T07:10:59", "upload_time_iso_8601": "2020-04-17T07:10:59.215677Z", "url": "https://files.pythonhosted.org/packages/4a/75/fd06f8c410911cc9067406c3f4d8c1e4e89e13597694ca8a58163fd11c12/sunzip-0.1.0a1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f039d61e10213647f6650f4f007b6837", "sha256": "175748a99e1d72b58ee05c6fd6d4e4735f5b2769022a849e9583b01806643739"}, "downloads": -1, "filename": "sunzip-0.1.0a1.tar.gz", "has_sig": false, "md5_digest": "f039d61e10213647f6650f4f007b6837", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5150, "upload_time": "2020-04-17T07:11:00", "upload_time_iso_8601": "2020-04-17T07:11:00.647671Z", "url": "https://files.pythonhosted.org/packages/42/e5/0fb6564d134f32654052ed4144ca690a9873a48338bf22e2da915b91b218/sunzip-0.1.0a1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "a10159ab651989bdacb541a0c5c75006", "sha256": "7d234d84fca75c31492efd8c30e27f4a4c81de117ba07537af56866ea952c36b"}, "downloads": -1, "filename": "sunzip-0.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "a10159ab651989bdacb541a0c5c75006", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5409, "upload_time": "2020-04-06T06:13:35", "upload_time_iso_8601": "2020-04-06T06:13:35.081960Z", "url": "https://files.pythonhosted.org/packages/73/6a/5967820f02e2c05225892295df13893ea8752429d14082bb05e62bbfcd33/sunzip-0.0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "4ee02943f811c8d9d6a88ad5887ef3c8", "sha256": "1d3581b63dcb746e07ac608b26a15112c2c77d01a75470a7bb828c162c4c08d2"}, "downloads": -1, "filename": "sunzip-0.0.3.tar.gz", "has_sig": false, "md5_digest": "4ee02943f811c8d9d6a88ad5887ef3c8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4949, "upload_time": "2020-04-06T06:13:36", "upload_time_iso_8601": "2020-04-06T06:13:36.115524Z", "url": "https://files.pythonhosted.org/packages/7c/67/958473a15234fb23e60d5a2bbc47f55cba4ef379ff28c3ca51dd9268fa30/sunzip-0.0.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:00:19 2020"}