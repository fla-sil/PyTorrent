{"info": {"author": "Pierre Tardy", "author_email": "tardyp@gmail.com", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Programming Language :: Python", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "Yamlconfig\r\n==========\r\n\r\nTools for loading and validating yaml config files.\r\n\r\npackage is shipped with 2 entry points scripts:\r\n\r\n* yamlvalidate: This tool can validate a yaml file against its spec.\r\n\r\n    The spec file can be either automatically found given the filename or given as parameter with ``--meta``\r\n\r\n* yaml2rst: This tool automatically creates a rst documentation of the types defined in a directory.\r\n\r\n\r\nYamlConfig module\r\n=================\r\n\r\nA common problem for the complex CI system developer is to separate\r\nits configuration logic from its configuration data.\r\n\r\n- Logic is the configuration of the builder, what does it build,\r\n  what are the buildsteps, etc\r\n- Data is the parameter you want to easily change in the day to day\r\n  maintainance work. What are the slaves, and their capabilities?\r\n  What branches are needed to be tracked? under what conditions? etc\r\n\r\nYamlConfig helps to resolve this problem by providing tools to create\r\nand describe a set of yaml files that are used as input for your master.cfg\r\n\r\nOriginally made for buildbot configuration, the spec format it defines can\r\nbe used to describe any kind of json compatible data.\r\n\r\n\r\nEach parsed yaml file can be given a ``.meta.yaml`` file that acts as a\r\nschema file describing what is allowed in the file, and potencially how to\r\npresent it in an edition UI.\r\n\r\n.. _Meta-File-Format:\r\n\r\n``.meta.yaml`` file Format\r\n---------------------------\r\n\r\nthe meta yaml file is a yaml file made of nested dicts, describing the type\r\nof data the type checker is waiting for.\r\n\r\nRoot Node\r\n`````````\r\nthe meta yaml file must describe the ``root`` type, which will snowball\r\nall the nested type checks\r\n\r\n.. code-block:: yaml\r\n\r\n    root:\r\n      type: dict\r\n      kids:\r\n         param1:\r\n         type: int\r\n         param2:\r\n         type: string\r\n\r\nwill match:\r\n\r\n.. code-block:: yaml\r\n\r\n    param1: 1\r\n    param2: stringvalue\r\n\r\nimports Node\r\n`````````````\r\n\r\nThe meta yaml file can use types described in another file. For that, it will import\r\na list of ``.types.yaml`` files.\r\n\r\nA ``.types.yaml`` is a yaml file defining a map of named types. ex:\r\n\r\n.. code-block:: yaml\r\n\r\n    foo:\r\n        type: string\r\n        values: [bar]\r\n\r\ncan be used in a ``myconfig.meta.yaml``:\r\n\r\n.. code-block:: yaml\r\n\r\n    imports:\r\n        - foo.type.yaml\r\n    root:\r\n        type: dict\r\n        kids:\r\n            foo:\r\n                type: listoffoos\r\n\r\nBase types\r\n``````````\r\nbase types are:\r\n\r\nint\r\n  an integer\r\n\r\nstring\r\n  a string\r\n\r\nboolean\r\n  a true/false boolean\r\n\r\nfloat\r\n  a floating point number\r\n\r\nCompound types\r\n``````````````\r\nA value of compound type is composed of several subtypes values or key/value:\r\n\r\ndict\r\n  an associative array that has a defined list of childrens key\r\n\r\nmap\r\n  an associative array that has an arbitrary list childrens keys\r\n\r\nlist\r\n  a list of arbitrary values\r\n\r\nset\r\n  a list that ensure member unicity (you cannot have several time the same value)\r\n\r\nSpecifying types of values\r\n``````````````````````````\r\nFor ``map``, ``list``, ``set``, it is possible to specify what type is expected\r\nas the values. The syntax is:\r\n\r\n.. code-block:: yaml\r\n\r\n   type: <compound_type>of<type>s\r\n\r\nfor example, following types are valid\r\n\r\n.. code-block:: yaml\r\n\r\n   type: mapofstrings\r\n   type: listofints\r\n   type: listofsetsofints\r\n\r\nUser defined types\r\n``````````````````\r\nYou can specify a meta.yaml file defining the map of types, you can reuse inside your\r\nmain meta.yaml file. e.g:\r\n\r\n.. code-block:: yaml\r\n\r\n    location:\r\n        type: string\r\n        values: [l1,l2,l3,l4,l5,l6]\r\n\r\nThis defines a ``location`` type, which is a string with 6 possible values.\r\n\r\ntypes modifers\r\n``````````````\r\nEach type can be associated with a number of modifiers, that will extend the number\r\nof specification you describe for it:\r\n\r\nvalues:\r\n   a set of possible values that the attribute can take\r\n\r\nname:\r\n   the name of the attribute as displayed in the UI\r\n\r\ndefault:\r\n   The value the attribute takes if it is not defined explicitly\r\n\r\nforbidden:\r\n   a python expression checking whether this attribute should not be defined in\r\n   a particular configuration\r\n\r\nrequired:\r\n   a python expression checking whether this attribute must be defined in\r\n   a particular configuration\r\n\r\nmaybenull:\r\n   a python expression checking whether this attribute must be defined in\r\n   a particular configuration\r\n\r\n\r\nMore complex example\r\n--------------------\r\n\r\nThe ``meta.yaml``:\r\n\r\n.. code-block:: yaml\r\n\r\n  root:\r\n    type: dict\r\n    kids:\r\n       slaves:\r\n          type: listofdicts\r\n          name: Build Slaves\r\n          kids:\r\n            caps:\r\n              type: dict\r\n              name: Capabilities\r\n              kids:\r\n                  builder:\r\n                      name: Used by builder\r\n                      type: setofstrings\r\n                      values: [ autolint, build ]\r\n                      required: true\r\n                  location:\r\n                      type: location\r\n                      required: true\r\n                  speed:\r\n                      type: string\r\n                      default: fast\r\n                      values: [fast,slow]\r\n            slaves:\r\n              type: setofstrings\r\n\r\nmatches a yaml file like:\r\n\r\n.. code-block:: yaml\r\n\r\n  slaves:\r\n  -       caps:\r\n                  builder: [build]\r\n                  location: l4\r\n          slaves: [buildbot1build]\r\n  -       caps:\r\n                  builder: [autolint, build]\r\n                  location: l1\r\n                  speed: fast\r\n          slaves: [build3build, build4build, build5build]", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://github.com/tardyp/yamltypes", "keywords": "yaml,schema", "license": "BSD", "maintainer": "", "maintainer_email": "", "name": "yamltypes", "package_url": "https://pypi.org/project/yamltypes/", "platform": "Any", "project_url": "https://pypi.org/project/yamltypes/", "project_urls": {"Download": "UNKNOWN", "Homepage": "http://github.com/tardyp/yamltypes"}, "release_url": "https://pypi.org/project/yamltypes/1.0/", "requires_dist": null, "requires_python": null, "summary": "tools for validating, documenting, and editing json and yaml data", "version": "1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"yamlconfig\">\n<h2>Yamlconfig</h2>\n<p>Tools for loading and validating yaml config files.</p>\n<p>package is shipped with 2 entry points scripts:</p>\n<ul>\n<li><p>yamlvalidate: This tool can validate a yaml file against its spec.</p>\n<blockquote>\n<p>The spec file can be either automatically found given the filename or given as parameter with <tt><span class=\"pre\">--meta</span></tt></p>\n</blockquote>\n</li>\n<li><p>yaml2rst: This tool automatically creates a rst documentation of the types defined in a directory.</p>\n</li>\n</ul>\n</div>\n<div id=\"yamlconfig-module\">\n<h2>YamlConfig module</h2>\n<p>A common problem for the complex CI system developer is to separate\nits configuration logic from its configuration data.</p>\n<ul>\n<li>Logic is the configuration of the builder, what does it build,\nwhat are the buildsteps, etc</li>\n<li>Data is the parameter you want to easily change in the day to day\nmaintainance work. What are the slaves, and their capabilities?\nWhat branches are needed to be tracked? under what conditions? etc</li>\n</ul>\n<p>YamlConfig helps to resolve this problem by providing tools to create\nand describe a set of yaml files that are used as input for your master.cfg</p>\n<p>Originally made for buildbot configuration, the spec format it defines can\nbe used to describe any kind of json compatible data.</p>\n<p>Each parsed yaml file can be given a <tt>.meta.yaml</tt> file that acts as a\nschema file describing what is allowed in the file, and potencially how to\npresent it in an edition UI.</p>\n<div id=\"meta-yaml-file-format\">\n<span id=\"meta-file-format\"></span><h3><tt>.meta.yaml</tt> file Format</h3>\n<p>the meta yaml file is a yaml file made of nested dicts, describing the type\nof data the type checker is waiting for.</p>\n<div id=\"root-node\">\n<h4>Root Node</h4>\n<p>the meta yaml file must describe the <tt>root</tt> type, which will snowball\nall the nested type checks</p>\n<pre><span class=\"nt\">root</span><span class=\"p\">:</span>\n  <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">dict</span>\n  <span class=\"nt\">kids</span><span class=\"p\">:</span>\n     <span class=\"nt\">param1</span><span class=\"p\">:</span>\n     <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">int</span>\n     <span class=\"nt\">param2</span><span class=\"p\">:</span>\n     <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">string</span>\n</pre>\n<p>will match:</p>\n<pre><span class=\"nt\">param1</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">1</span>\n<span class=\"nt\">param2</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">stringvalue</span>\n</pre>\n</div>\n<div id=\"imports-node\">\n<h4>imports Node</h4>\n<p>The meta yaml file can use types described in another file. For that, it will import\na list of <tt>.types.yaml</tt> files.</p>\n<p>A <tt>.types.yaml</tt> is a yaml file defining a map of named types. ex:</p>\n<pre><span class=\"nt\">foo</span><span class=\"p\">:</span>\n    <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">string</span>\n    <span class=\"nt\">values</span><span class=\"p\">:</span> <span class=\"p-Indicator\">[</span><span class=\"nv\">bar</span><span class=\"p-Indicator\">]</span>\n</pre>\n<p>can be used in a <tt>myconfig.meta.yaml</tt>:</p>\n<pre><span class=\"nt\">imports</span><span class=\"p\">:</span>\n    <span class=\"p-Indicator\">-</span> <span class=\"l-Scalar-Plain\">foo.type.yaml</span>\n<span class=\"nt\">root</span><span class=\"p\">:</span>\n    <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">dict</span>\n    <span class=\"nt\">kids</span><span class=\"p\">:</span>\n        <span class=\"nt\">foo</span><span class=\"p\">:</span>\n            <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">listoffoos</span>\n</pre>\n</div>\n<div id=\"base-types\">\n<h4>Base types</h4>\n<p>base types are:</p>\n<dl>\n<dt>int</dt>\n<dd>an integer</dd>\n<dt>string</dt>\n<dd>a string</dd>\n<dt>boolean</dt>\n<dd>a true/false boolean</dd>\n<dt>float</dt>\n<dd>a floating point number</dd>\n</dl>\n</div>\n<div id=\"compound-types\">\n<h4>Compound types</h4>\n<p>A value of compound type is composed of several subtypes values or key/value:</p>\n<dl>\n<dt>dict</dt>\n<dd>an associative array that has a defined list of childrens key</dd>\n<dt>map</dt>\n<dd>an associative array that has an arbitrary list childrens keys</dd>\n<dt>list</dt>\n<dd>a list of arbitrary values</dd>\n<dt>set</dt>\n<dd>a list that ensure member unicity (you cannot have several time the same value)</dd>\n</dl>\n</div>\n<div id=\"specifying-types-of-values\">\n<h4>Specifying types of values</h4>\n<p>For <tt>map</tt>, <tt>list</tt>, <tt>set</tt>, it is possible to specify what type is expected\nas the values. The syntax is:</p>\n<pre><span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">&lt;compound_type&gt;of&lt;type&gt;s</span>\n</pre>\n<p>for example, following types are valid</p>\n<pre><span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">mapofstrings</span>\n<span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">listofints</span>\n<span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">listofsetsofints</span>\n</pre>\n</div>\n<div id=\"user-defined-types\">\n<h4>User defined types</h4>\n<p>You can specify a meta.yaml file defining the map of types, you can reuse inside your\nmain meta.yaml file. e.g:</p>\n<pre><span class=\"nt\">location</span><span class=\"p\">:</span>\n    <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">string</span>\n    <span class=\"nt\">values</span><span class=\"p\">:</span> <span class=\"p-Indicator\">[</span><span class=\"nv\">l1</span><span class=\"p-Indicator\">,</span><span class=\"nv\">l2</span><span class=\"p-Indicator\">,</span><span class=\"nv\">l3</span><span class=\"p-Indicator\">,</span><span class=\"nv\">l4</span><span class=\"p-Indicator\">,</span><span class=\"nv\">l5</span><span class=\"p-Indicator\">,</span><span class=\"nv\">l6</span><span class=\"p-Indicator\">]</span>\n</pre>\n<p>This defines a <tt>location</tt> type, which is a string with 6 possible values.</p>\n</div>\n<div id=\"types-modifers\">\n<h4>types modifers</h4>\n<p>Each type can be associated with a number of modifiers, that will extend the number\nof specification you describe for it:</p>\n<dl>\n<dt>values:</dt>\n<dd>a set of possible values that the attribute can take</dd>\n<dt>name:</dt>\n<dd>the name of the attribute as displayed in the UI</dd>\n<dt>default:</dt>\n<dd>The value the attribute takes if it is not defined explicitly</dd>\n<dt>forbidden:</dt>\n<dd>a python expression checking whether this attribute should not be defined in\na particular configuration</dd>\n<dt>required:</dt>\n<dd>a python expression checking whether this attribute must be defined in\na particular configuration</dd>\n<dt>maybenull:</dt>\n<dd>a python expression checking whether this attribute must be defined in\na particular configuration</dd>\n</dl>\n</div>\n</div>\n<div id=\"more-complex-example\">\n<h3>More complex example</h3>\n<p>The <tt>meta.yaml</tt>:</p>\n<pre><span class=\"nt\">root</span><span class=\"p\">:</span>\n  <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">dict</span>\n  <span class=\"nt\">kids</span><span class=\"p\">:</span>\n     <span class=\"nt\">slaves</span><span class=\"p\">:</span>\n        <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">listofdicts</span>\n        <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">Build Slaves</span>\n        <span class=\"nt\">kids</span><span class=\"p\">:</span>\n          <span class=\"nt\">caps</span><span class=\"p\">:</span>\n            <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">dict</span>\n            <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">Capabilities</span>\n            <span class=\"nt\">kids</span><span class=\"p\">:</span>\n                <span class=\"nt\">builder</span><span class=\"p\">:</span>\n                    <span class=\"nt\">name</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">Used by builder</span>\n                    <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">setofstrings</span>\n                    <span class=\"nt\">values</span><span class=\"p\">:</span> <span class=\"p-Indicator\">[</span> <span class=\"nv\">autolint</span><span class=\"p-Indicator\">,</span> <span class=\"nv\">build</span> <span class=\"p-Indicator\">]</span>\n                    <span class=\"nt\">required</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">true</span>\n                <span class=\"nt\">location</span><span class=\"p\">:</span>\n                    <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">location</span>\n                    <span class=\"nt\">required</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">true</span>\n                <span class=\"nt\">speed</span><span class=\"p\">:</span>\n                    <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">string</span>\n                    <span class=\"nt\">default</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">fast</span>\n                    <span class=\"nt\">values</span><span class=\"p\">:</span> <span class=\"p-Indicator\">[</span><span class=\"nv\">fast</span><span class=\"p-Indicator\">,</span><span class=\"nv\">slow</span><span class=\"p-Indicator\">]</span>\n          <span class=\"nt\">slaves</span><span class=\"p\">:</span>\n            <span class=\"nt\">type</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">setofstrings</span>\n</pre>\n<p>matches a yaml file like:</p>\n<pre><span class=\"nt\">slaves</span><span class=\"p\">:</span>\n<span class=\"p-Indicator\">-</span>       <span class=\"nt\">caps</span><span class=\"p\">:</span>\n                <span class=\"nt\">builder</span><span class=\"p\">:</span> <span class=\"p-Indicator\">[</span><span class=\"nv\">build</span><span class=\"p-Indicator\">]</span>\n                <span class=\"nt\">location</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">l4</span>\n        <span class=\"nt\">slaves</span><span class=\"p\">:</span> <span class=\"p-Indicator\">[</span><span class=\"nv\">buildbot1build</span><span class=\"p-Indicator\">]</span>\n<span class=\"p-Indicator\">-</span>       <span class=\"nt\">caps</span><span class=\"p\">:</span>\n                <span class=\"nt\">builder</span><span class=\"p\">:</span> <span class=\"p-Indicator\">[</span><span class=\"nv\">autolint</span><span class=\"p-Indicator\">,</span> <span class=\"nv\">build</span><span class=\"p-Indicator\">]</span>\n                <span class=\"nt\">location</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">l1</span>\n                <span class=\"nt\">speed</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">fast</span>\n        <span class=\"nt\">slaves</span><span class=\"p\">:</span> <span class=\"p-Indicator\">[</span><span class=\"nv\">build3build</span><span class=\"p-Indicator\">,</span> <span class=\"nv\">build4build</span><span class=\"p-Indicator\">,</span> <span class=\"nv\">build5build</span><span class=\"p-Indicator\">]</span>\n</pre>\n</div>\n</div>\n\n          </div>"}, "last_serial": 1392080, "releases": {"1.0": [{"comment_text": "", "digests": {"md5": "d1f30b7727ec1a3d989ea6516a118356", "sha256": "703f7216032104211a8ab9e92a62774e54941295eecd2503dade01e0849ff816"}, "downloads": -1, "filename": "yamltypes-1.0.tar.gz", "has_sig": false, "md5_digest": "d1f30b7727ec1a3d989ea6516a118356", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 18240, "upload_time": "2015-01-22T16:39:35", "upload_time_iso_8601": "2015-01-22T16:39:35.192725Z", "url": "https://files.pythonhosted.org/packages/cc/86/5d196339fd16cecbe701f721438e5fe23b6591e4c9760e6ac92a8e598b01/yamltypes-1.0.tar.gz", "yanked": false}, {"comment_text": "", "digests": {"md5": "efd7772d84cf3e89bad6e8e53463396e", "sha256": "6e39a36ef6adff0ed3a198c9d8268c87a162160bf1a614061ce8ccac730801fc"}, "downloads": -1, "filename": "yamltypes-1.0.zip", "has_sig": false, "md5_digest": "efd7772d84cf3e89bad6e8e53463396e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23120, "upload_time": "2015-01-22T16:39:37", "upload_time_iso_8601": "2015-01-22T16:39:37.522989Z", "url": "https://files.pythonhosted.org/packages/ae/81/a4db307aa6e769860326db8ac1b88d8d63506429ce54244a6223e33f93ca/yamltypes-1.0.zip", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d1f30b7727ec1a3d989ea6516a118356", "sha256": "703f7216032104211a8ab9e92a62774e54941295eecd2503dade01e0849ff816"}, "downloads": -1, "filename": "yamltypes-1.0.tar.gz", "has_sig": false, "md5_digest": "d1f30b7727ec1a3d989ea6516a118356", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 18240, "upload_time": "2015-01-22T16:39:35", "upload_time_iso_8601": "2015-01-22T16:39:35.192725Z", "url": "https://files.pythonhosted.org/packages/cc/86/5d196339fd16cecbe701f721438e5fe23b6591e4c9760e6ac92a8e598b01/yamltypes-1.0.tar.gz", "yanked": false}, {"comment_text": "", "digests": {"md5": "efd7772d84cf3e89bad6e8e53463396e", "sha256": "6e39a36ef6adff0ed3a198c9d8268c87a162160bf1a614061ce8ccac730801fc"}, "downloads": -1, "filename": "yamltypes-1.0.zip", "has_sig": false, "md5_digest": "efd7772d84cf3e89bad6e8e53463396e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23120, "upload_time": "2015-01-22T16:39:37", "upload_time_iso_8601": "2015-01-22T16:39:37.522989Z", "url": "https://files.pythonhosted.org/packages/ae/81/a4db307aa6e769860326db8ac1b88d8d63506429ce54244a6223e33f93ca/yamltypes-1.0.zip", "yanked": false}], "timestamp": "Fri May  8 03:23:15 2020"}