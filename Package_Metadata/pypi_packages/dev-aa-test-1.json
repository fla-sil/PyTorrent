{"info": {"author": "Alex", "author_email": "alexpanggada@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: GNU General Public License v3 (GPLv3)", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Database"], "description": "# HyFive\n\n## What Is HyFive?\n\nHyFive is a [Hy](https://github.com/hylang/hy) library that provides a Lispy functional interface by wrapping Python's popular data libraries, such as [Pandas](https://pandas.pydata.org/) and [Matplotlib](https://matplotlib.org).\n\n## HyFive vs. Vanilla Pandas\n\nPandas `DataFrame` has its own quirks. It ranges from not having a `filter` method to having a different definiton of `join` to that of SQL. This is evident from the bewildering comparison between [Pandas and SQL](https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/comparison_with_sql.html). HyFive aims to provide a Lispy interface that is as close as possible to that of [Spark's](https://spark.apache.org/) [SQL and DataFrame](https://spark.apache.org/docs/latest/sql-programming-guide.html).\n\nFrom a functional programming perspective, Pandas interfaces are oddly difficult to compose unlike Spark SQL's method-chaining convention. Due to this difficulty, Pandas often perversely incentivises short names for dataframes in favour of creating intermediate variables, which litters the namespace.\n\nHyFive utilises Hy's threading macros to mimic Spark DataFrame's method chaining convention, whilst staying with the familiar Pandas dataframe. Consider the following HyFive snippet:\n\n```hy\n(setv DATAFRAME\n  (-> NAME-REGISTRY\n      (hf.with-column \"variant\"\n        (let [mod-res-id (hf.mod \"resident_id\" 3)]\n          (hf.cond-col [(hf.eq? mod-res-id 1) (hf.lit \"a\")]\n                       [(hf.eq? mod-res-id 2) (hf.lit \"b\")]\n                       [:else                 (hf.lit \"c\")])))\n      (hf.filter (hf.is-in \"variant\" [\"a\" \"b\"]))\n      (hf.join AGE-REGISTRY :on \"resident_id\")\n      (hf.group-by \"variant\")\n      (hf.agg {\"min_age\"  (hf.min \"age\")\n               \"mean_age\" (hf.mean \"age\")\n               \"std_age\"  (hf.std \"age\")\n               \"max_age\"  (hf.max \"age\")})\n      (hf.order-by \"min_age\" :desc True)))\n```\n\nHere, we carry out simple operations of adding a column, filtering rows, joining tables, aggregating groups and sorting rows. Apart from the Lispy `cond`, these operations would have a one-to-one translation to Spark dataframe or SQL.\n\nIn contrast, one would have to work a bit harder in pure Pandas:\n\n```python\nmod_res_id = NAME_REGISTRY.resident_id % 3\nvariant = np.where(mod_res_id == 1, 'a', np.where(mod_res_id == 2, 'b', 'c'))\nselect_ix = np.isin(variant, ['a', 'b'])\ndataframe = (NAME_REGISTRY\n                .assign(variant=variant)\n                [select_ix]\n                .merge(AGE_REGISTRY, on='resident_id')\n                .groupby('variant')\n                .apply(lambda df: pd.Series({\n                    'min_age': df.age.min(),\n                    'mean_age': df.age.mean(),\n                    'std_age': df.age.std(),\n                    'max_age': df.age.max()\n                }))\n                .reset_index()\n                .sort_values(by='min_age', ascending=False)\n                .reset_index(drop=True))\n```\n\nThe Pandas version is less readable and we lose the one-to-one translation to Spark dataframe or SQL.\n\n## Trying HyFive\n\nClone the repository, and on the root directory of the enter the following command on terminal:\n\n```bash\n./run build-docker\n```\n\nRun the unit tests with the following command:\n\n```bash\n./run unit-tests .\n````\n\nInvoke the Hy REPL by running:\n\n```bash\n./run repl\n```\n\nAnd finally, import HyFive using:\n\n```hy\n(import [hyfive :as hf])\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://gitlab.com/arithmox/hyfive", "keywords": "", "license": "gpl-3.0", "maintainer": "", "maintainer_email": "", "name": "dev-aa-test-1", "package_url": "https://pypi.org/project/dev-aa-test-1/", "platform": "", "project_url": "https://pypi.org/project/dev-aa-test-1/", "project_urls": {"Homepage": "https://gitlab.com/arithmox/hyfive"}, "release_url": "https://pypi.org/project/dev-aa-test-1/0.1.0/", "requires_dist": ["cytoolz (>=0.10.0)", "dask-ml (>=1.0.0)", "dask (>=2.3.0)", "hy (>=0.17.0)", "hypothesis (>=4.32.3)", "ipython (>=7.7.0)", "matplotlib (>=3.1.1)", "pandas (>=0.25.0)", "pdbpp (>=0.10.0)", "pytest-cov (>=2.7.1)", "pytest (>=5.0.1)", "scikit-learn (>=0.21.3)", "scipy (>=1.3.1)"], "requires_python": "", "summary": "A Hy library that provides a Lispy functional                interface by wrapping Python's popular data libraries,                 such as Pandas and Matplotlib.", "version": "0.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>HyFive</h1>\n<h2>What Is HyFive?</h2>\n<p>HyFive is a <a href=\"https://github.com/hylang/hy\" rel=\"nofollow\">Hy</a> library that provides a Lispy functional interface by wrapping Python's popular data libraries, such as <a href=\"https://pandas.pydata.org/\" rel=\"nofollow\">Pandas</a> and <a href=\"https://matplotlib.org\" rel=\"nofollow\">Matplotlib</a>.</p>\n<h2>HyFive vs. Vanilla Pandas</h2>\n<p>Pandas <code>DataFrame</code> has its own quirks. It ranges from not having a <code>filter</code> method to having a different definiton of <code>join</code> to that of SQL. This is evident from the bewildering comparison between <a href=\"https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/comparison_with_sql.html\" rel=\"nofollow\">Pandas and SQL</a>. HyFive aims to provide a Lispy interface that is as close as possible to that of <a href=\"https://spark.apache.org/\" rel=\"nofollow\">Spark's</a> <a href=\"https://spark.apache.org/docs/latest/sql-programming-guide.html\" rel=\"nofollow\">SQL and DataFrame</a>.</p>\n<p>From a functional programming perspective, Pandas interfaces are oddly difficult to compose unlike Spark SQL's method-chaining convention. Due to this difficulty, Pandas often perversely incentivises short names for dataframes in favour of creating intermediate variables, which litters the namespace.</p>\n<p>HyFive utilises Hy's threading macros to mimic Spark DataFrame's method chaining convention, whilst staying with the familiar Pandas dataframe. Consider the following HyFive snippet:</p>\n<pre><span class=\"o\">(</span><span class=\"n\">setv</span> <span class=\"n\">DATAFRAME</span>\n  <span class=\"o\">(-&gt;</span> <span class=\"n\">NAME</span><span class=\"o\">-</span><span class=\"n\">REGISTRY</span>\n      <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">with</span><span class=\"o\">-</span><span class=\"n\">column</span> <span class=\"s\">\"variant\"</span>\n        <span class=\"o\">(</span><span class=\"n\">let</span> <span class=\"o\">[</span><span class=\"n\">mod</span><span class=\"o\">-</span><span class=\"n\">res</span><span class=\"o\">-</span><span class=\"n\">id</span> <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">mod</span> <span class=\"s\">\"resident_id\"</span> <span class=\"mi\">3</span><span class=\"o\">)]</span>\n          <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">cond</span><span class=\"o\">-</span><span class=\"n\">col</span> <span class=\"o\">[(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">eq</span><span class=\"o\">?</span> <span class=\"n\">mod</span><span class=\"o\">-</span><span class=\"n\">res</span><span class=\"o\">-</span><span class=\"n\">id</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">lit</span> <span class=\"s\">\"a\"</span><span class=\"o\">)]</span>\n                       <span class=\"o\">[(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">eq</span><span class=\"o\">?</span> <span class=\"n\">mod</span><span class=\"o\">-</span><span class=\"n\">res</span><span class=\"o\">-</span><span class=\"n\">id</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">lit</span> <span class=\"s\">\"b\"</span><span class=\"o\">)]</span>\n                       <span class=\"o\">[:</span><span class=\"k\">else</span>                 <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">lit</span> <span class=\"s\">\"c\"</span><span class=\"o\">)])))</span>\n      <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">filter</span> <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">is</span><span class=\"o\">-</span><span class=\"n\">in</span> <span class=\"s\">\"variant\"</span> <span class=\"o\">[</span><span class=\"s\">\"a\"</span> <span class=\"s\">\"b\"</span><span class=\"o\">]))</span>\n      <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">join</span> <span class=\"n\">AGE</span><span class=\"o\">-</span><span class=\"n\">REGISTRY</span> <span class=\"o\">:</span><span class=\"n\">on</span> <span class=\"s\">\"resident_id\"</span><span class=\"o\">)</span>\n      <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">group</span><span class=\"o\">-</span><span class=\"n\">by</span> <span class=\"s\">\"variant\"</span><span class=\"o\">)</span>\n      <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">agg</span> <span class=\"o\">{</span><span class=\"s\">\"min_age\"</span>  <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">min</span> <span class=\"s\">\"age\"</span><span class=\"o\">)</span>\n               <span class=\"s\">\"mean_age\"</span> <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">mean</span> <span class=\"s\">\"age\"</span><span class=\"o\">)</span>\n               <span class=\"s\">\"std_age\"</span>  <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">std</span> <span class=\"s\">\"age\"</span><span class=\"o\">)</span>\n               <span class=\"s\">\"max_age\"</span>  <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">max</span> <span class=\"s\">\"age\"</span><span class=\"o\">)})</span>\n      <span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"o\">.</span><span class=\"na\">order</span><span class=\"o\">-</span><span class=\"n\">by</span> <span class=\"s\">\"min_age\"</span> <span class=\"o\">:</span><span class=\"n\">desc</span> <span class=\"n\">True</span><span class=\"o\">)))</span>\n</pre>\n<p>Here, we carry out simple operations of adding a column, filtering rows, joining tables, aggregating groups and sorting rows. Apart from the Lispy <code>cond</code>, these operations would have a one-to-one translation to Spark dataframe or SQL.</p>\n<p>In contrast, one would have to work a bit harder in pure Pandas:</p>\n<pre><span class=\"n\">mod_res_id</span> <span class=\"o\">=</span> <span class=\"n\">NAME_REGISTRY</span><span class=\"o\">.</span><span class=\"n\">resident_id</span> <span class=\"o\">%</span> <span class=\"mi\">3</span>\n<span class=\"n\">variant</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">where</span><span class=\"p\">(</span><span class=\"n\">mod_res_id</span> <span class=\"o\">==</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">'a'</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">where</span><span class=\"p\">(</span><span class=\"n\">mod_res_id</span> <span class=\"o\">==</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">'b'</span><span class=\"p\">,</span> <span class=\"s1\">'c'</span><span class=\"p\">))</span>\n<span class=\"n\">select_ix</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">isin</span><span class=\"p\">(</span><span class=\"n\">variant</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">'a'</span><span class=\"p\">,</span> <span class=\"s1\">'b'</span><span class=\"p\">])</span>\n<span class=\"n\">dataframe</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">NAME_REGISTRY</span>\n                <span class=\"o\">.</span><span class=\"n\">assign</span><span class=\"p\">(</span><span class=\"n\">variant</span><span class=\"o\">=</span><span class=\"n\">variant</span><span class=\"p\">)</span>\n                <span class=\"p\">[</span><span class=\"n\">select_ix</span><span class=\"p\">]</span>\n                <span class=\"o\">.</span><span class=\"n\">merge</span><span class=\"p\">(</span><span class=\"n\">AGE_REGISTRY</span><span class=\"p\">,</span> <span class=\"n\">on</span><span class=\"o\">=</span><span class=\"s1\">'resident_id'</span><span class=\"p\">)</span>\n                <span class=\"o\">.</span><span class=\"n\">groupby</span><span class=\"p\">(</span><span class=\"s1\">'variant'</span><span class=\"p\">)</span>\n                <span class=\"o\">.</span><span class=\"n\">apply</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">df</span><span class=\"p\">:</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">Series</span><span class=\"p\">({</span>\n                    <span class=\"s1\">'min_age'</span><span class=\"p\">:</span> <span class=\"n\">df</span><span class=\"o\">.</span><span class=\"n\">age</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">(),</span>\n                    <span class=\"s1\">'mean_age'</span><span class=\"p\">:</span> <span class=\"n\">df</span><span class=\"o\">.</span><span class=\"n\">age</span><span class=\"o\">.</span><span class=\"n\">mean</span><span class=\"p\">(),</span>\n                    <span class=\"s1\">'std_age'</span><span class=\"p\">:</span> <span class=\"n\">df</span><span class=\"o\">.</span><span class=\"n\">age</span><span class=\"o\">.</span><span class=\"n\">std</span><span class=\"p\">(),</span>\n                    <span class=\"s1\">'max_age'</span><span class=\"p\">:</span> <span class=\"n\">df</span><span class=\"o\">.</span><span class=\"n\">age</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()</span>\n                <span class=\"p\">}))</span>\n                <span class=\"o\">.</span><span class=\"n\">reset_index</span><span class=\"p\">()</span>\n                <span class=\"o\">.</span><span class=\"n\">sort_values</span><span class=\"p\">(</span><span class=\"n\">by</span><span class=\"o\">=</span><span class=\"s1\">'min_age'</span><span class=\"p\">,</span> <span class=\"n\">ascending</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n                <span class=\"o\">.</span><span class=\"n\">reset_index</span><span class=\"p\">(</span><span class=\"n\">drop</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">))</span>\n</pre>\n<p>The Pandas version is less readable and we lose the one-to-one translation to Spark dataframe or SQL.</p>\n<h2>Trying HyFive</h2>\n<p>Clone the repository, and on the root directory of the enter the following command on terminal:</p>\n<pre>./run build-docker\n</pre>\n<p>Run the unit tests with the following command:</p>\n<pre>./run unit-tests .\n</pre>\n<p>Invoke the Hy REPL by running:</p>\n<pre>./run repl\n</pre>\n<p>And finally, import HyFive using:</p>\n<pre><span class=\"o\">(</span><span class=\"kn\">import</span> <span class=\"err\">[</span><span class=\"nn\">hyfive</span> <span class=\"o\">:</span><span class=\"n\">as</span> <span class=\"n\">hf</span><span class=\"o\">])</span>\n</pre>\n\n          </div>"}, "last_serial": 5894865, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "6ac1139eef94e447e9f80cbc7c960311", "sha256": "f8392ec91235294e8a2313596272cb933dece755407ec4171b1fc52bb1a7526a"}, "downloads": -1, "filename": "dev_aa_test_1-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "6ac1139eef94e447e9f80cbc7c960311", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 15252, "upload_time": "2019-09-27T08:32:24", "upload_time_iso_8601": "2019-09-27T08:32:24.382776Z", "url": "https://files.pythonhosted.org/packages/9e/90/485c927696913c0ce887399628f3b2ad4ca96a5f7772b63ab8d4c3df932a/dev_aa_test_1-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f2100288ab145b62a8d904cbad873911", "sha256": "b61643d0a3f7e3053a6e2476678cfedf375680cd5df8d5554b094999beb976fd"}, "downloads": -1, "filename": "dev_aa_test_1-0.1.0.tar.gz", "has_sig": false, "md5_digest": "f2100288ab145b62a8d904cbad873911", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3124, "upload_time": "2019-09-27T08:32:29", "upload_time_iso_8601": "2019-09-27T08:32:29.225542Z", "url": "https://files.pythonhosted.org/packages/f3/95/c6bc0e56a4ba7c362a6dd8d3bfc61a8020ef868ef585a2f86da6be58df73/dev_aa_test_1-0.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "6ac1139eef94e447e9f80cbc7c960311", "sha256": "f8392ec91235294e8a2313596272cb933dece755407ec4171b1fc52bb1a7526a"}, "downloads": -1, "filename": "dev_aa_test_1-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "6ac1139eef94e447e9f80cbc7c960311", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 15252, "upload_time": "2019-09-27T08:32:24", "upload_time_iso_8601": "2019-09-27T08:32:24.382776Z", "url": "https://files.pythonhosted.org/packages/9e/90/485c927696913c0ce887399628f3b2ad4ca96a5f7772b63ab8d4c3df932a/dev_aa_test_1-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f2100288ab145b62a8d904cbad873911", "sha256": "b61643d0a3f7e3053a6e2476678cfedf375680cd5df8d5554b094999beb976fd"}, "downloads": -1, "filename": "dev_aa_test_1-0.1.0.tar.gz", "has_sig": false, "md5_digest": "f2100288ab145b62a8d904cbad873911", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3124, "upload_time": "2019-09-27T08:32:29", "upload_time_iso_8601": "2019-09-27T08:32:29.225542Z", "url": "https://files.pythonhosted.org/packages/f3/95/c6bc0e56a4ba7c362a6dd8d3bfc61a8020ef868ef585a2f86da6be58df73/dev_aa_test_1-0.1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:38:55 2020"}