{"info": {"author": "Denis Pompilio (jawa)", "author_email": "dpompilio@vente-privee.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Environment :: Web Environment", "License :: OSI Approved :: MIT License", "Operating System :: POSIX :: BSD", "Operating System :: POSIX :: Linux", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Topic :: Utilities"], "description": "[![PythonSupport][1]][1l][![License][2]][2l]\n\n# python-powerdns -- PowerDNS web api python client and interface\n\n**Contact:** Denis 'jawa' Pompilio <dpompilio@vente-privee.com>\n\n**Sources:** https://github.com/vente-privee/python-powerdns\n\n## About\n\nThis package provides intuitive and easy to use python client and interface\nfor the PowerDNS web API.\n\n## Installation\n\n```bash\npython setup.py install\n```\nor\n```bash\npip install python-powerdns\n```\n\n## Helpers\n\n**pdns-zone-creator**\n```bash\nusage: pdns-create-zone [-h] -A API -K APIKEY -z ZONE -o ORIGIN -c ZONE -d DNS\n                        [-t TIMERS]\n\nPowerDNS zone creator\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -A API, --api API     PowerDNS api (eg. https://api.domain.tld/api/v1\n  -K APIKEY, --key APIKEY\n                        PowerDNS api key\n  -z ZONE, --zone ZONE  Zone name (canonical)\n  -o ORIGIN, --origin ORIGIN\n                        Zone origin (for SOA)\n  -c ZONE, --contact ZONE\n                        Zone contact (for SOA)\n  -d DNS, --dns DNS     Zone nameservers comma separated\n  -t TIMERS, --timers TIMERS\n                        Zone timers (eg. '28800 7200 604800 86400')\n```\n```bash\n./bin/pdns-create-zone -A \"https://api.domain.tld/api/v1\" -K \"xxxxxxxxx\" \\\n                       -z \"myzone.domain.tld.\" \\\n                       -o \"ns01.domain.tld.\" -c \"admin.domain.tld.\" \\\n                       -d \"nsd01.domain.tld.,nsd02.domain.tld.\"\npowerdns.interface INFO: listing available PowerDNS servers\npowerdns.interface INFO: getting available servers from API\npowerdns.client INFO: request: GET https://api.domain.tld/api/v1/servers\npowerdns.client INFO: request response code: 200\npowerdns.interface INFO: 1 server(s) listed\npowerdns.interface INFO: creation of zone: myzone.domain.tld.\npowerdns.client INFO: request: POST https://api.domain.tld/api/v1/servers/localhost/zones\npowerdns.client INFO: request response code: 201\npowerdns.interface INFO: zone myzone.domain.tld. successfully created\n```\n\n## Exemples\n\nBasic initialization:\n```python\nimport powerdns\n\nPDNS_API = \"https://my.pdns.api.domain.tld/api/v1\"\nPDNS_KEY = \"mysupersecretbase64key\"\n\napi_client = powerdns.PDNSApiClient(api_endpoint=PDNS_API, api_key=PDNS_KEY)\napi = powerdns.PDNSEndpoint(api_client)\n```\n\nCreation and deletion of zones:\n```python\nfrom datetime import date\n\n# Creating new zone on first PowerDNS server\nserial = date.today().strftime(\"%Y%m%d00\")\nsoa = \"ns0.domain.tld. admin.domain.tld. %s 28800 7200 604800 86400\" % serial\nsoa_r = powerdns.RRSet(name='test.python-powerdns.domain.tld.',\n                       rtype=\"SOA\",\n                       records=[(soa, False)],\n                       ttl=86400)\nzone = api.servers[0].create_zone(name=\"test.python-powerdns.domain.tld.\",\n                                  kind=\"Native\",\n                                  rrsets=[soa_r],\n                                  nameservers=[\"ns1.domain.tld.\",\n                                               \"ns2.domain.tld.\"])\n\n# Getting new zone info\nprint(zone)\nprint(zone.details)\n\n# Deleting newly created zone\napi.servers[0].delete_zone(zone.name)\n```\n\nCreation and deletion of DNS records:\n```python\nzone = api.server[0].get_zone(\"test.python-powerdns.domain.tld.\")\n\nzone.create_records([\n    powerdns.RRSet('a', 'A', [('1.1.1.1', False)]),\n    powerdns.RRSet('b', 'A', ['1.1.1.2', '1.1.1.3']),\n    powerdns.RRSet('c', 'A', [('1.1.1.4', False)]),\n    powerdns.RRSet('d', 'CNAME', ['a'])\n])\n\nzone.delete_record([\n    powerdns.RRSet('a', 'A', [('1.1.1.1', False)]),\n    powerdns.RRSet('d', 'CNAME', ['a'])\n])\n```\n\nBackup and restoration of zones:\n```python\n# Backup every zone of every PowerDNS server\nfor server in api.servers:\n    backup_dir = \"backups/%s\" % server.id\n    for zone in server.zones:\n        zone.backup(backup_dir)\n\n# Restore a single zone on first PowerDNS server\nzone_file = \"backups/pdns-server-01/my.domain.tld.json\"\napi.servers[0].restore_zone(zone_file)\n```\n\n## License\n\nMIT LICENSE *(see LICENSE file)*\n\n## Miscellaneous\n\n```\n    \u255a\u2299 \u2299\u255d\n  \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n\u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n  \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n   \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n```\n\n[1]: https://img.shields.io/badge/python-2.7,3.4+-blue.svg\n[1l]: https://github.com/vente-privee/python-powerdns\n[2]: https://img.shields.io/badge/license-MIT-blue.svg\n[2l]: https://github.com/vente-privee/python-powerdns", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/vente-privee/python-powerdns", "keywords": "dns,powerdns,api", "license": "MIT", "maintainer": "Denis Pompilio (jawa)", "maintainer_email": "dpompilio@vente-privee.com", "name": "python-powerdns", "package_url": "https://pypi.org/project/python-powerdns/", "platform": "UNIX", "project_url": "https://pypi.org/project/python-powerdns/", "project_urls": {"Homepage": "https://github.com/vente-privee/python-powerdns"}, "release_url": "https://pypi.org/project/python-powerdns/0.2.1/", "requires_dist": null, "requires_python": "", "summary": "PowerDNS web api python client and interface", "version": "0.2.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://github.com/vente-privee/python-powerdns\" rel=\"nofollow\"><img alt=\"PythonSupport\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/92f421c20af64718f42c965fb7cc2e0033d37328/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d322e372c332e342b2d626c75652e737667\"></a><a href=\"https://github.com/vente-privee/python-powerdns\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c88fab50b4a1dc0cd91faeb7ba5654d56e380260/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e737667\"></a></p>\n<h1>python-powerdns -- PowerDNS web api python client and interface</h1>\n<p><strong>Contact:</strong> Denis 'jawa' Pompilio <a href=\"mailto:dpompilio@vente-privee.com\">dpompilio@vente-privee.com</a></p>\n<p><strong>Sources:</strong> <a href=\"https://github.com/vente-privee/python-powerdns\" rel=\"nofollow\">https://github.com/vente-privee/python-powerdns</a></p>\n<h2>About</h2>\n<p>This package provides intuitive and easy to use python client and interface\nfor the PowerDNS web API.</p>\n<h2>Installation</h2>\n<pre>python setup.py install\n</pre>\n<p>or</p>\n<pre>pip install python-powerdns\n</pre>\n<h2>Helpers</h2>\n<p><strong>pdns-zone-creator</strong></p>\n<pre>usage: pdns-create-zone <span class=\"o\">[</span>-h<span class=\"o\">]</span> -A API -K APIKEY -z ZONE -o ORIGIN -c ZONE -d DNS\n                        <span class=\"o\">[</span>-t TIMERS<span class=\"o\">]</span>\n\nPowerDNS zone creator\n\noptional arguments:\n  -h, --help            show this <span class=\"nb\">help</span> message and <span class=\"nb\">exit</span>\n  -A API, --api API     PowerDNS api <span class=\"o\">(</span>eg. https://api.domain.tld/api/v1\n  -K APIKEY, --key APIKEY\n                        PowerDNS api key\n  -z ZONE, --zone ZONE  Zone name <span class=\"o\">(</span>canonical<span class=\"o\">)</span>\n  -o ORIGIN, --origin ORIGIN\n                        Zone origin <span class=\"o\">(</span><span class=\"k\">for</span> SOA<span class=\"o\">)</span>\n  -c ZONE, --contact ZONE\n                        Zone contact <span class=\"o\">(</span><span class=\"k\">for</span> SOA<span class=\"o\">)</span>\n  -d DNS, --dns DNS     Zone nameservers comma separated\n  -t TIMERS, --timers TIMERS\n                        Zone timers <span class=\"o\">(</span>eg. <span class=\"s1\">'28800 7200 604800 86400'</span><span class=\"o\">)</span>\n</pre>\n<pre>./bin/pdns-create-zone -A <span class=\"s2\">\"https://api.domain.tld/api/v1\"</span> -K <span class=\"s2\">\"xxxxxxxxx\"</span> <span class=\"se\">\\</span>\n                       -z <span class=\"s2\">\"myzone.domain.tld.\"</span> <span class=\"se\">\\</span>\n                       -o <span class=\"s2\">\"ns01.domain.tld.\"</span> -c <span class=\"s2\">\"admin.domain.tld.\"</span> <span class=\"se\">\\</span>\n                       -d <span class=\"s2\">\"nsd01.domain.tld.,nsd02.domain.tld.\"</span>\npowerdns.interface INFO: listing available PowerDNS servers\npowerdns.interface INFO: getting available servers from API\npowerdns.client INFO: request: GET https://api.domain.tld/api/v1/servers\npowerdns.client INFO: request response code: <span class=\"m\">200</span>\npowerdns.interface INFO: <span class=\"m\">1</span> server<span class=\"o\">(</span>s<span class=\"o\">)</span> listed\npowerdns.interface INFO: creation of zone: myzone.domain.tld.\npowerdns.client INFO: request: POST https://api.domain.tld/api/v1/servers/localhost/zones\npowerdns.client INFO: request response code: <span class=\"m\">201</span>\npowerdns.interface INFO: zone myzone.domain.tld. successfully created\n</pre>\n<h2>Exemples</h2>\n<p>Basic initialization:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">powerdns</span>\n\n<span class=\"n\">PDNS_API</span> <span class=\"o\">=</span> <span class=\"s2\">\"https://my.pdns.api.domain.tld/api/v1\"</span>\n<span class=\"n\">PDNS_KEY</span> <span class=\"o\">=</span> <span class=\"s2\">\"mysupersecretbase64key\"</span>\n\n<span class=\"n\">api_client</span> <span class=\"o\">=</span> <span class=\"n\">powerdns</span><span class=\"o\">.</span><span class=\"n\">PDNSApiClient</span><span class=\"p\">(</span><span class=\"n\">api_endpoint</span><span class=\"o\">=</span><span class=\"n\">PDNS_API</span><span class=\"p\">,</span> <span class=\"n\">api_key</span><span class=\"o\">=</span><span class=\"n\">PDNS_KEY</span><span class=\"p\">)</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">powerdns</span><span class=\"o\">.</span><span class=\"n\">PDNSEndpoint</span><span class=\"p\">(</span><span class=\"n\">api_client</span><span class=\"p\">)</span>\n</pre>\n<p>Creation and deletion of zones:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">date</span>\n\n<span class=\"c1\"># Creating new zone on first PowerDNS server</span>\n<span class=\"n\">serial</span> <span class=\"o\">=</span> <span class=\"n\">date</span><span class=\"o\">.</span><span class=\"n\">today</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s2\">\"%Y%m</span><span class=\"si\">%d</span><span class=\"s2\">00\"</span><span class=\"p\">)</span>\n<span class=\"n\">soa</span> <span class=\"o\">=</span> <span class=\"s2\">\"ns0.domain.tld. admin.domain.tld. </span><span class=\"si\">%s</span><span class=\"s2\"> 28800 7200 604800 86400\"</span> <span class=\"o\">%</span> <span class=\"n\">serial</span>\n<span class=\"n\">soa_r</span> <span class=\"o\">=</span> <span class=\"n\">powerdns</span><span class=\"o\">.</span><span class=\"n\">RRSet</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'test.python-powerdns.domain.tld.'</span><span class=\"p\">,</span>\n                       <span class=\"n\">rtype</span><span class=\"o\">=</span><span class=\"s2\">\"SOA\"</span><span class=\"p\">,</span>\n                       <span class=\"n\">records</span><span class=\"o\">=</span><span class=\"p\">[(</span><span class=\"n\">soa</span><span class=\"p\">,</span> <span class=\"kc\">False</span><span class=\"p\">)],</span>\n                       <span class=\"n\">ttl</span><span class=\"o\">=</span><span class=\"mi\">86400</span><span class=\"p\">)</span>\n<span class=\"n\">zone</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">servers</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">create_zone</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"test.python-powerdns.domain.tld.\"</span><span class=\"p\">,</span>\n                                  <span class=\"n\">kind</span><span class=\"o\">=</span><span class=\"s2\">\"Native\"</span><span class=\"p\">,</span>\n                                  <span class=\"n\">rrsets</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">soa_r</span><span class=\"p\">],</span>\n                                  <span class=\"n\">nameservers</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">\"ns1.domain.tld.\"</span><span class=\"p\">,</span>\n                                               <span class=\"s2\">\"ns2.domain.tld.\"</span><span class=\"p\">])</span>\n\n<span class=\"c1\"># Getting new zone info</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">zone</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">zone</span><span class=\"o\">.</span><span class=\"n\">details</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Deleting newly created zone</span>\n<span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">servers</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">delete_zone</span><span class=\"p\">(</span><span class=\"n\">zone</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">)</span>\n</pre>\n<p>Creation and deletion of DNS records:</p>\n<pre><span class=\"n\">zone</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">server</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">get_zone</span><span class=\"p\">(</span><span class=\"s2\">\"test.python-powerdns.domain.tld.\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">zone</span><span class=\"o\">.</span><span class=\"n\">create_records</span><span class=\"p\">([</span>\n    <span class=\"n\">powerdns</span><span class=\"o\">.</span><span class=\"n\">RRSet</span><span class=\"p\">(</span><span class=\"s1\">'a'</span><span class=\"p\">,</span> <span class=\"s1\">'A'</span><span class=\"p\">,</span> <span class=\"p\">[(</span><span class=\"s1\">'1.1.1.1'</span><span class=\"p\">,</span> <span class=\"kc\">False</span><span class=\"p\">)]),</span>\n    <span class=\"n\">powerdns</span><span class=\"o\">.</span><span class=\"n\">RRSet</span><span class=\"p\">(</span><span class=\"s1\">'b'</span><span class=\"p\">,</span> <span class=\"s1\">'A'</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">'1.1.1.2'</span><span class=\"p\">,</span> <span class=\"s1\">'1.1.1.3'</span><span class=\"p\">]),</span>\n    <span class=\"n\">powerdns</span><span class=\"o\">.</span><span class=\"n\">RRSet</span><span class=\"p\">(</span><span class=\"s1\">'c'</span><span class=\"p\">,</span> <span class=\"s1\">'A'</span><span class=\"p\">,</span> <span class=\"p\">[(</span><span class=\"s1\">'1.1.1.4'</span><span class=\"p\">,</span> <span class=\"kc\">False</span><span class=\"p\">)]),</span>\n    <span class=\"n\">powerdns</span><span class=\"o\">.</span><span class=\"n\">RRSet</span><span class=\"p\">(</span><span class=\"s1\">'d'</span><span class=\"p\">,</span> <span class=\"s1\">'CNAME'</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">'a'</span><span class=\"p\">])</span>\n<span class=\"p\">])</span>\n\n<span class=\"n\">zone</span><span class=\"o\">.</span><span class=\"n\">delete_record</span><span class=\"p\">([</span>\n    <span class=\"n\">powerdns</span><span class=\"o\">.</span><span class=\"n\">RRSet</span><span class=\"p\">(</span><span class=\"s1\">'a'</span><span class=\"p\">,</span> <span class=\"s1\">'A'</span><span class=\"p\">,</span> <span class=\"p\">[(</span><span class=\"s1\">'1.1.1.1'</span><span class=\"p\">,</span> <span class=\"kc\">False</span><span class=\"p\">)]),</span>\n    <span class=\"n\">powerdns</span><span class=\"o\">.</span><span class=\"n\">RRSet</span><span class=\"p\">(</span><span class=\"s1\">'d'</span><span class=\"p\">,</span> <span class=\"s1\">'CNAME'</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">'a'</span><span class=\"p\">])</span>\n<span class=\"p\">])</span>\n</pre>\n<p>Backup and restoration of zones:</p>\n<pre><span class=\"c1\"># Backup every zone of every PowerDNS server</span>\n<span class=\"k\">for</span> <span class=\"n\">server</span> <span class=\"ow\">in</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">servers</span><span class=\"p\">:</span>\n    <span class=\"n\">backup_dir</span> <span class=\"o\">=</span> <span class=\"s2\">\"backups/</span><span class=\"si\">%s</span><span class=\"s2\">\"</span> <span class=\"o\">%</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">id</span>\n    <span class=\"k\">for</span> <span class=\"n\">zone</span> <span class=\"ow\">in</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">zones</span><span class=\"p\">:</span>\n        <span class=\"n\">zone</span><span class=\"o\">.</span><span class=\"n\">backup</span><span class=\"p\">(</span><span class=\"n\">backup_dir</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Restore a single zone on first PowerDNS server</span>\n<span class=\"n\">zone_file</span> <span class=\"o\">=</span> <span class=\"s2\">\"backups/pdns-server-01/my.domain.tld.json\"</span>\n<span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">servers</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">restore_zone</span><span class=\"p\">(</span><span class=\"n\">zone_file</span><span class=\"p\">)</span>\n</pre>\n<h2>License</h2>\n<p>MIT LICENSE <em>(see LICENSE file)</em></p>\n<h2>Miscellaneous</h2>\n<pre><code>    \u255a\u2299 \u2299\u255d\n  \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n\u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n  \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n   \u255a\u2550(\u2588\u2588\u2588)\u2550\u255d\n</code></pre>\n\n          </div>"}, "last_serial": 3977422, "releases": {"0.2.1": [{"comment_text": "", "digests": {"md5": "14baf9c7393d17433d2fc8ca8aa13490", "sha256": "e0e9ea2e8a53da7b1b241ee7089d69400cff8106094e86c4470c066ce6ed3d14"}, "downloads": -1, "filename": "python-powerdns-0.2.1.tar.gz", "has_sig": true, "md5_digest": "14baf9c7393d17433d2fc8ca8aa13490", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11463, "upload_time": "2018-06-19T13:22:37", "upload_time_iso_8601": "2018-06-19T13:22:37.253785Z", "url": "https://files.pythonhosted.org/packages/bf/8c/f2c900d58e6d1124b2fbafc6651c65da79d1d46cce35ff1f79116b982b91/python-powerdns-0.2.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "14baf9c7393d17433d2fc8ca8aa13490", "sha256": "e0e9ea2e8a53da7b1b241ee7089d69400cff8106094e86c4470c066ce6ed3d14"}, "downloads": -1, "filename": "python-powerdns-0.2.1.tar.gz", "has_sig": true, "md5_digest": "14baf9c7393d17433d2fc8ca8aa13490", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11463, "upload_time": "2018-06-19T13:22:37", "upload_time_iso_8601": "2018-06-19T13:22:37.253785Z", "url": "https://files.pythonhosted.org/packages/bf/8c/f2c900d58e6d1124b2fbafc6651c65da79d1d46cce35ff1f79116b982b91/python-powerdns-0.2.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:15:56 2020"}