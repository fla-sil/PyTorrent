{"info": {"author": "Daniel Poland", "author_email": "dan@crispy.dev", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# slacktools-commands\nA simple framework for working with Slack slash-commands (https://api.slack.com/interactivity/slash-commands).\n\nRegister you custom `Command` class with the \n`ComandFactory` and when you receive a command request from Slack simply grab the command instance from the\nfactory and execute it.\n\n### Install\n\n`pip install slacktools-commands`\n\n### Basic Usage\n\nDefine your command:\n```python\nfrom commands import register_command, Command, CommandValidationError\n\nfrom myproject import get_status, post_status\n\n\n@register_command(\"/status\")\nclass StatusCommand(Command):\n    def _validate(self):\n        if not get_status(id=self.payload.text):\n            raise CommandValidationError(\"Not a valid id.\")\n\n    def _execute(self):\n        post_status(id=self.payload.text)\n\n``` \n\nHandle the Slack command request:\n```python\nfrom rest_framework.views import APIView\nfrom rest_framework.response import Response\n\nfrom commands import CommandFactory\n\nclass CommandsView(APIView):\n    def post(self, request):\n        command = CommandFactory.make_commmand(request.data)\n        command.execute()\n        return Response()\n```\n\n### Action Commands\nAction commands allow you execute many different actions from a single Slack command. The text following\nthe command is used to determine which action should be performed. The text is split by spaces, the first character\nset determines the action and the remain character sets are passed to the action as options/parameters.\n\n#### Example\nThe below class definitions will handle the following command: `/status service api`\n```python\nfrom commands import ActionCommand, Action, CommandValidationError, register_command\n\nfrom myproject import post_status_msg\n\n\nclass ServiceStatus(Action):\n    def validate(self):\n        if len(self.options) == 0:\n            CommandValidationError(self.payload, \"Missing service name\")\n\n    def execute(self):\n        post_status_msg(self.options[0])\n\n\n@register_command(\"/status\")\nclass StatusCommand(ActionCommand):\n    ACTIONS = {\n        \"service\": ServiceStatus\n    }\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/danpoland/slacktools-commands", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "slacktools-commands", "package_url": "https://pypi.org/project/slacktools-commands/", "platform": "", "project_url": "https://pypi.org/project/slacktools-commands/", "project_urls": {"Homepage": "https://github.com/danpoland/slacktools-commands"}, "release_url": "https://pypi.org/project/slacktools-commands/1.0.0/", "requires_dist": null, "requires_python": ">=3.6", "summary": "", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>slacktools-commands</h1>\n<p>A simple framework for working with Slack slash-commands (<a href=\"https://api.slack.com/interactivity/slash-commands\" rel=\"nofollow\">https://api.slack.com/interactivity/slash-commands</a>).</p>\n<p>Register you custom <code>Command</code> class with the\n<code>ComandFactory</code> and when you receive a command request from Slack simply grab the command instance from the\nfactory and execute it.</p>\n<h3>Install</h3>\n<p><code>pip install slacktools-commands</code></p>\n<h3>Basic Usage</h3>\n<p>Define your command:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">commands</span> <span class=\"kn\">import</span> <span class=\"n\">register_command</span><span class=\"p\">,</span> <span class=\"n\">Command</span><span class=\"p\">,</span> <span class=\"n\">CommandValidationError</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">myproject</span> <span class=\"kn\">import</span> <span class=\"n\">get_status</span><span class=\"p\">,</span> <span class=\"n\">post_status</span>\n\n\n<span class=\"nd\">@register_command</span><span class=\"p\">(</span><span class=\"s2\">\"/status\"</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">StatusCommand</span><span class=\"p\">(</span><span class=\"n\">Command</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">_validate</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">get_status</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">payload</span><span class=\"o\">.</span><span class=\"n\">text</span><span class=\"p\">):</span>\n            <span class=\"k\">raise</span> <span class=\"n\">CommandValidationError</span><span class=\"p\">(</span><span class=\"s2\">\"Not a valid id.\"</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">_execute</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">post_status</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">payload</span><span class=\"o\">.</span><span class=\"n\">text</span><span class=\"p\">)</span>\n</pre>\n<p>Handle the Slack command request:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">rest_framework.views</span> <span class=\"kn\">import</span> <span class=\"n\">APIView</span>\n<span class=\"kn\">from</span> <span class=\"nn\">rest_framework.response</span> <span class=\"kn\">import</span> <span class=\"n\">Response</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">commands</span> <span class=\"kn\">import</span> <span class=\"n\">CommandFactory</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">CommandsView</span><span class=\"p\">(</span><span class=\"n\">APIView</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">post</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>\n        <span class=\"n\">command</span> <span class=\"o\">=</span> <span class=\"n\">CommandFactory</span><span class=\"o\">.</span><span class=\"n\">make_commmand</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">)</span>\n        <span class=\"n\">command</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"n\">Response</span><span class=\"p\">()</span>\n</pre>\n<h3>Action Commands</h3>\n<p>Action commands allow you execute many different actions from a single Slack command. The text following\nthe command is used to determine which action should be performed. The text is split by spaces, the first character\nset determines the action and the remain character sets are passed to the action as options/parameters.</p>\n<h4>Example</h4>\n<p>The below class definitions will handle the following command: <code>/status service api</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">commands</span> <span class=\"kn\">import</span> <span class=\"n\">ActionCommand</span><span class=\"p\">,</span> <span class=\"n\">Action</span><span class=\"p\">,</span> <span class=\"n\">CommandValidationError</span><span class=\"p\">,</span> <span class=\"n\">register_command</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">myproject</span> <span class=\"kn\">import</span> <span class=\"n\">post_status_msg</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">ServiceStatus</span><span class=\"p\">(</span><span class=\"n\">Action</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">validate</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">options</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n            <span class=\"n\">CommandValidationError</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">payload</span><span class=\"p\">,</span> <span class=\"s2\">\"Missing service name\"</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">execute</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">post_status_msg</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">options</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n\n\n<span class=\"nd\">@register_command</span><span class=\"p\">(</span><span class=\"s2\">\"/status\"</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">StatusCommand</span><span class=\"p\">(</span><span class=\"n\">ActionCommand</span><span class=\"p\">):</span>\n    <span class=\"n\">ACTIONS</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"service\"</span><span class=\"p\">:</span> <span class=\"n\">ServiceStatus</span>\n    <span class=\"p\">}</span>\n</pre>\n\n          </div>"}, "last_serial": 6744890, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "a4b961cc4a1e136172679ec0d124a920", "sha256": "5e204d0cb373f84e2676264f044a7927348bd6c8f80e527ac132962349262501"}, "downloads": -1, "filename": "slacktools_commands-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "a4b961cc4a1e136172679ec0d124a920", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 9003, "upload_time": "2020-03-04T02:17:35", "upload_time_iso_8601": "2020-03-04T02:17:35.227859Z", "url": "https://files.pythonhosted.org/packages/c5/74/c8562059294f9191dc243946b51008ba2610b9df137b5355434b6d2dbdb7/slacktools_commands-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "20c7f625c161c72b61a7a6dd19e846f2", "sha256": "c6248e9363eb4c555cdcb7e46c0e42dee3bba646e67f084e51082b1463efe589"}, "downloads": -1, "filename": "slacktools-commands-1.0.0.tar.gz", "has_sig": false, "md5_digest": "20c7f625c161c72b61a7a6dd19e846f2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5955, "upload_time": "2020-03-04T02:17:37", "upload_time_iso_8601": "2020-03-04T02:17:37.626512Z", "url": "https://files.pythonhosted.org/packages/31/01/c0b70cb46d1d63be1e8b1fb4fc8994d8921f1cc45b32cff9bab6d76a4e1c/slacktools-commands-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "a4b961cc4a1e136172679ec0d124a920", "sha256": "5e204d0cb373f84e2676264f044a7927348bd6c8f80e527ac132962349262501"}, "downloads": -1, "filename": "slacktools_commands-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "a4b961cc4a1e136172679ec0d124a920", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 9003, "upload_time": "2020-03-04T02:17:35", "upload_time_iso_8601": "2020-03-04T02:17:35.227859Z", "url": "https://files.pythonhosted.org/packages/c5/74/c8562059294f9191dc243946b51008ba2610b9df137b5355434b6d2dbdb7/slacktools_commands-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "20c7f625c161c72b61a7a6dd19e846f2", "sha256": "c6248e9363eb4c555cdcb7e46c0e42dee3bba646e67f084e51082b1463efe589"}, "downloads": -1, "filename": "slacktools-commands-1.0.0.tar.gz", "has_sig": false, "md5_digest": "20c7f625c161c72b61a7a6dd19e846f2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5955, "upload_time": "2020-03-04T02:17:37", "upload_time_iso_8601": "2020-03-04T02:17:37.626512Z", "url": "https://files.pythonhosted.org/packages/31/01/c0b70cb46d1d63be1e8b1fb4fc8994d8921f1cc45b32cff9bab6d76a4e1c/slacktools-commands-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:08:37 2020"}