{"info": {"author": "Sector Labs", "author_email": "open-source@sectorlabs.ro", "bugtrack_url": null, "classifiers": ["Environment :: Web Environment", "Framework :: Django", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3.5"], "description": "# Django Database Connection Retrier\n\n[![License](https://img.shields.io/:license-mit-blue.svg)](http://doge.mit-license.org)\n[![PyPi](https://badge.fury.io/py/django-db-connection-retrier.svg)](https://pypi.python.org/pypi/django-db-connection-retrier)\n[![CircleCI](https://circleci.com/gh/SectorLabs/django-db-connection-retrier/tree/master.svg?style=svg&circle-token=8177e64d426308c93d38af49a1cca1df4225bc67)](https://circleci.com/gh/SectorLabs/django-db-connection-retrier/tree/master)\n\nAutomatically try to re-establish Django database connections when they fail due to DNS errors.\n\n---\n\nWhen the Django app (`dbconnectionretrier`) loads, a hook is installed in Django's [`BaseDatabaseWrapper.ensure_connection`](https://github.com/django/django/blob/master/django/db/backends/base/base.py#L216) that catches `django.db.OperationalError`. If the error raised is a DNS error, the connction attempt is retried synchronously **three times**.\n\n---\n\nTested on Django 2.0-2.3 and Python 3.7 and 3.8. Might work with other versions of Django and Python.\n\n## Installation\n1. Install the package from PyPi:\n\n        $ pip install django-db-connection-retrier\n\n2. Add `dbconnectionretrier` to your `INSTALLED_APPS`:\n\n        INSTALLED_APPS = [\n            'dbconnectionretrier',\n            ...\n        ]\n\n## Manual usage\nAdding `dbconnectionretrier` to `INSTALLED_APPS` enables automatic connection retrying. Want more granular control over patching?\n\n### Globally\n```\nfrom dbconnectionretrier.patch import patch_ensure_connection\n\n# after this line executes, connection retrying is enabled\npatch = patch_ensure_connection()\n\n# after this line, the connection retrying is disabled\npatch.rollback()\n```\n\n### Context manager\n```\nfrom dbconnectionretrier.patch import patch_ensure_connection_contextual\n\nwith patch_ensure_connection_contextual():\n    # all code inside this block benefits from connection retrying\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/SectorLabs/django-db-connection-retrier", "keywords": "django,postgres,extra,hstore,ltree", "license": "MIT License", "maintainer": "", "maintainer_email": "", "name": "django-db-connection-retrier", "package_url": "https://pypi.org/project/django-db-connection-retrier/", "platform": "", "project_url": "https://pypi.org/project/django-db-connection-retrier/", "project_urls": {"Homepage": "https://github.com/SectorLabs/django-db-connection-retrier"}, "release_url": "https://pypi.org/project/django-db-connection-retrier/1.0b1/", "requires_dist": null, "requires_python": "", "summary": "Automatically ty re-establishing the Django database connection when it gets lost.", "version": "1.0b1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Django Database Connection Retrier</h1>\n<p><a href=\"http://doge.mit-license.org\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/79b662d9661997db2063f8bc369ceb28643d92e2/68747470733a2f2f696d672e736869656c64732e696f2f3a6c6963656e73652d6d69742d626c75652e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/django-db-connection-retrier\" rel=\"nofollow\"><img alt=\"PyPi\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c50902367a5ab22a5ec3efab3fd2e9c1ea1b5250/68747470733a2f2f62616467652e667572792e696f2f70792f646a616e676f2d64622d636f6e6e656374696f6e2d726574726965722e737667\"></a>\n<a href=\"https://circleci.com/gh/SectorLabs/django-db-connection-retrier/tree/master\" rel=\"nofollow\"><img alt=\"CircleCI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e31c3a3337cd6d2fbfb4ae810675399d6117e22e/68747470733a2f2f636972636c6563692e636f6d2f67682f536563746f724c6162732f646a616e676f2d64622d636f6e6e656374696f6e2d726574726965722f747265652f6d61737465722e7376673f7374796c653d73766726636972636c652d746f6b656e3d38313737653634643432363330386339336433386166343961316363613164663432323562633637\"></a></p>\n<p>Automatically try to re-establish Django database connections when they fail due to DNS errors.</p>\n<hr>\n<p>When the Django app (<code>dbconnectionretrier</code>) loads, a hook is installed in Django's <a href=\"https://github.com/django/django/blob/master/django/db/backends/base/base.py#L216\" rel=\"nofollow\"><code>BaseDatabaseWrapper.ensure_connection</code></a> that catches <code>django.db.OperationalError</code>. If the error raised is a DNS error, the connction attempt is retried synchronously <strong>three times</strong>.</p>\n<hr>\n<p>Tested on Django 2.0-2.3 and Python 3.7 and 3.8. Might work with other versions of Django and Python.</p>\n<h2>Installation</h2>\n<ol>\n<li>\n<p>Install the package from PyPi:</p>\n<pre><code> $ pip install django-db-connection-retrier\n</code></pre>\n</li>\n<li>\n<p>Add <code>dbconnectionretrier</code> to your <code>INSTALLED_APPS</code>:</p>\n<pre><code> INSTALLED_APPS = [\n     'dbconnectionretrier',\n     ...\n ]\n</code></pre>\n</li>\n</ol>\n<h2>Manual usage</h2>\n<p>Adding <code>dbconnectionretrier</code> to <code>INSTALLED_APPS</code> enables automatic connection retrying. Want more granular control over patching?</p>\n<h3>Globally</h3>\n<pre><code>from dbconnectionretrier.patch import patch_ensure_connection\n\n# after this line executes, connection retrying is enabled\npatch = patch_ensure_connection()\n\n# after this line, the connection retrying is disabled\npatch.rollback()\n</code></pre>\n<h3>Context manager</h3>\n<pre><code>from dbconnectionretrier.patch import patch_ensure_connection_contextual\n\nwith patch_ensure_connection_contextual():\n    # all code inside this block benefits from connection retrying\n</code></pre>\n\n          </div>"}, "last_serial": 5839761, "releases": {"1.0a2": [{"comment_text": "", "digests": {"md5": "91f53afe7cda2ef33ca7b6cf0206f499", "sha256": "79afa9c647799f6dc39afcabb6edf7364f8989c86c2ff27ab79d5efbd04c7b70"}, "downloads": -1, "filename": "django-db-connection-retrier-1.0a2.tar.gz", "has_sig": false, "md5_digest": "91f53afe7cda2ef33ca7b6cf0206f499", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3959, "upload_time": "2019-09-17T05:55:34", "upload_time_iso_8601": "2019-09-17T05:55:34.020149Z", "url": "https://files.pythonhosted.org/packages/2b/0a/8605e66bed691398a68575618179037a19238d4a75ec1f2b93ce1d4637be/django-db-connection-retrier-1.0a2.tar.gz", "yanked": false}], "1.0b1": [{"comment_text": "", "digests": {"md5": "b0fcb78d23237efd31bcfc7794c024ab", "sha256": "e0281970b9338eb30210a8a7dff004a12b80e5bba826870e9fee9f092bd7a9d9"}, "downloads": -1, "filename": "django-db-connection-retrier-1.0b1.tar.gz", "has_sig": false, "md5_digest": "b0fcb78d23237efd31bcfc7794c024ab", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3960, "upload_time": "2019-09-17T06:06:32", "upload_time_iso_8601": "2019-09-17T06:06:32.646258Z", "url": "https://files.pythonhosted.org/packages/6e/76/57a89c1b6ff0b4fd24ec3172505b8fd0ce0911571c1159ee21b56ee746a9/django-db-connection-retrier-1.0b1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "b0fcb78d23237efd31bcfc7794c024ab", "sha256": "e0281970b9338eb30210a8a7dff004a12b80e5bba826870e9fee9f092bd7a9d9"}, "downloads": -1, "filename": "django-db-connection-retrier-1.0b1.tar.gz", "has_sig": false, "md5_digest": "b0fcb78d23237efd31bcfc7794c024ab", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3960, "upload_time": "2019-09-17T06:06:32", "upload_time_iso_8601": "2019-09-17T06:06:32.646258Z", "url": "https://files.pythonhosted.org/packages/6e/76/57a89c1b6ff0b4fd24ec3172505b8fd0ce0911571c1159ee21b56ee746a9/django-db-connection-retrier-1.0b1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:36:40 2020"}