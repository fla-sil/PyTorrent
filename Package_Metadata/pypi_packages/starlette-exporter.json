{"info": {"author": "Stephen Hillier", "author_email": "stephenhillier@gmail.com", "bugtrack_url": null, "classifiers": [], "description": "# starlette_exporter\nPrometheus exporter for Starlette and FastAPI.\n\nThe middleware collects basic metrics:\n\n* Counter: starlette_requests_total\n* Histogram: starlette_request_duration_seconds\n\nMetrics include labels for the HTTP method, the path, and the response status code.\n\n```\nstarlette_requests_total{method=\"GET\",path=\"/\",status_code=\"200\"} 1.0\nstarlette_request_duration_seconds_bucket{le=\"0.01\",method=\"GET\",path=\"/\",status_code=\"200\"} 1.0\n```\n\nUse the HTTP handler `handle_metrics` at path `/metrics` to expose a metrics endpoint to Prometheus.\n\n## Usage\n\n```sh\npip install starlette_exporter\n```\n\n### Starlette\n\n```python\n        from starlette.applications import Starlette\n        from starlette_exporter import PrometheusMiddleware, handle_metrics\n\n        app = Starlette()\n        app.add_middleware(PrometheusMiddleware)\n        app.add_route(\"/metrics\", handle_metrics)\n\n        ...\n```\n\n### FastAPI\n\n```python\n        from fastapi import FastAPI\n        from starlette_exporter import PrometheusMiddleware, handle_metrics\n\n        app = FastAPI()\n        app.add_middleware(PrometheusMiddleware)\n        app.add_route(\"/metrics\", handle_metrics)\n\n        ...\n```\n\n## Options\n\n`group_paths`: setting this to `True` will populate the path label using named parameters (if any) in the router path, e.g. `/api/v1/items/{item_id}`.  This will group requests together by endpoint (regardless of the value of `item_id`). This option may come with a performance hit for larger routers. Default is `False`, which will result in separate metrics for different URLs (e.g., `/api/v1/items/42`, `/api/v1/items/43`, etc.).\n\nExample: \n```python\napp.add_middleware(PrometheusMiddleware, group_paths=True)\n```\n\n## Developing\n\n```sh\ngit clone https://github.com/stephenhillier/starlette_exporter\ncd starlette_exporter\npytest tests\n```\n\n## License\n\nCode released under the [Apache License, Version 2.0](./LICENSE).\n\n\n## Dependencies\n\nhttps://github.com/prometheus/client_python\n\nhttps://github.com/encode/starlette\n\n## Credits\n\nStarlette - https://github.com/encode/starlette\n\nFastAPI - https://github.com/tiangolo/fastapi\n\nFlask exporter - https://github.com/rycus86/prometheus_flask_exporter\n\nAlternate Starlette exporter - https://github.com/perdy/starlette-prometheus\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/stephenhillier/starlette_exporter", "keywords": "", "license": "Apache License 2.0", "maintainer": "", "maintainer_email": "", "name": "starlette-exporter", "package_url": "https://pypi.org/project/starlette-exporter/", "platform": "", "project_url": "https://pypi.org/project/starlette-exporter/", "project_urls": {"Homepage": "https://github.com/stephenhillier/starlette_exporter"}, "release_url": "https://pypi.org/project/starlette-exporter/0.3.0/", "requires_dist": ["prometheus-client", "starlette"], "requires_python": "", "summary": "Prometheus metrics exporter for Starlette applications.", "version": "0.3.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>starlette_exporter</h1>\n<p>Prometheus exporter for Starlette and FastAPI.</p>\n<p>The middleware collects basic metrics:</p>\n<ul>\n<li>Counter: starlette_requests_total</li>\n<li>Histogram: starlette_request_duration_seconds</li>\n</ul>\n<p>Metrics include labels for the HTTP method, the path, and the response status code.</p>\n<pre><code>starlette_requests_total{method=\"GET\",path=\"/\",status_code=\"200\"} 1.0\nstarlette_request_duration_seconds_bucket{le=\"0.01\",method=\"GET\",path=\"/\",status_code=\"200\"} 1.0\n</code></pre>\n<p>Use the HTTP handler <code>handle_metrics</code> at path <code>/metrics</code> to expose a metrics endpoint to Prometheus.</p>\n<h2>Usage</h2>\n<pre>pip install starlette_exporter\n</pre>\n<h3>Starlette</h3>\n<pre>        <span class=\"kn\">from</span> <span class=\"nn\">starlette.applications</span> <span class=\"kn\">import</span> <span class=\"n\">Starlette</span>\n        <span class=\"kn\">from</span> <span class=\"nn\">starlette_exporter</span> <span class=\"kn\">import</span> <span class=\"n\">PrometheusMiddleware</span><span class=\"p\">,</span> <span class=\"n\">handle_metrics</span>\n\n        <span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Starlette</span><span class=\"p\">()</span>\n        <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">add_middleware</span><span class=\"p\">(</span><span class=\"n\">PrometheusMiddleware</span><span class=\"p\">)</span>\n        <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">add_route</span><span class=\"p\">(</span><span class=\"s2\">\"/metrics\"</span><span class=\"p\">,</span> <span class=\"n\">handle_metrics</span><span class=\"p\">)</span>\n\n        <span class=\"o\">...</span>\n</pre>\n<h3>FastAPI</h3>\n<pre>        <span class=\"kn\">from</span> <span class=\"nn\">fastapi</span> <span class=\"kn\">import</span> <span class=\"n\">FastAPI</span>\n        <span class=\"kn\">from</span> <span class=\"nn\">starlette_exporter</span> <span class=\"kn\">import</span> <span class=\"n\">PrometheusMiddleware</span><span class=\"p\">,</span> <span class=\"n\">handle_metrics</span>\n\n        <span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">FastAPI</span><span class=\"p\">()</span>\n        <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">add_middleware</span><span class=\"p\">(</span><span class=\"n\">PrometheusMiddleware</span><span class=\"p\">)</span>\n        <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">add_route</span><span class=\"p\">(</span><span class=\"s2\">\"/metrics\"</span><span class=\"p\">,</span> <span class=\"n\">handle_metrics</span><span class=\"p\">)</span>\n\n        <span class=\"o\">...</span>\n</pre>\n<h2>Options</h2>\n<p><code>group_paths</code>: setting this to <code>True</code> will populate the path label using named parameters (if any) in the router path, e.g. <code>/api/v1/items/{item_id}</code>.  This will group requests together by endpoint (regardless of the value of <code>item_id</code>). This option may come with a performance hit for larger routers. Default is <code>False</code>, which will result in separate metrics for different URLs (e.g., <code>/api/v1/items/42</code>, <code>/api/v1/items/43</code>, etc.).</p>\n<p>Example:</p>\n<pre><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">add_middleware</span><span class=\"p\">(</span><span class=\"n\">PrometheusMiddleware</span><span class=\"p\">,</span> <span class=\"n\">group_paths</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<h2>Developing</h2>\n<pre>git clone https://github.com/stephenhillier/starlette_exporter\n<span class=\"nb\">cd</span> starlette_exporter\npytest tests\n</pre>\n<h2>License</h2>\n<p>Code released under the <a href=\"./LICENSE\" rel=\"nofollow\">Apache License, Version 2.0</a>.</p>\n<h2>Dependencies</h2>\n<p><a href=\"https://github.com/prometheus/client_python\" rel=\"nofollow\">https://github.com/prometheus/client_python</a></p>\n<p><a href=\"https://github.com/encode/starlette\" rel=\"nofollow\">https://github.com/encode/starlette</a></p>\n<h2>Credits</h2>\n<p>Starlette - <a href=\"https://github.com/encode/starlette\" rel=\"nofollow\">https://github.com/encode/starlette</a></p>\n<p>FastAPI - <a href=\"https://github.com/tiangolo/fastapi\" rel=\"nofollow\">https://github.com/tiangolo/fastapi</a></p>\n<p>Flask exporter - <a href=\"https://github.com/rycus86/prometheus_flask_exporter\" rel=\"nofollow\">https://github.com/rycus86/prometheus_flask_exporter</a></p>\n<p>Alternate Starlette exporter - <a href=\"https://github.com/perdy/starlette-prometheus\" rel=\"nofollow\">https://github.com/perdy/starlette-prometheus</a></p>\n\n          </div>"}, "last_serial": 7073310, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "fc78f85630755e47d159612befd64dda", "sha256": "07c1f82f68071e8cc22b0ef761efb296f6c9f61a43dd727667422a7096d9b58b"}, "downloads": -1, "filename": "starlette_exporter-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "fc78f85630755e47d159612befd64dda", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7397, "upload_time": "2019-10-28T01:20:37", "upload_time_iso_8601": "2019-10-28T01:20:37.091677Z", "url": "https://files.pythonhosted.org/packages/d2/14/796ed199a385456fd512bb51f6db62daf8c5bd681103bb9e78f362651536/starlette_exporter-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5a87fa49c5bd2b10bd12eb588ee06bd1", "sha256": "71b15b59f61249e4e8825a3427be98ba3b8525d3c7317913ff2c15d2b99bdf70"}, "downloads": -1, "filename": "starlette_exporter-0.1.0.tar.gz", "has_sig": false, "md5_digest": "5a87fa49c5bd2b10bd12eb588ee06bd1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2619, "upload_time": "2019-10-28T01:20:39", "upload_time_iso_8601": "2019-10-28T01:20:39.458766Z", "url": "https://files.pythonhosted.org/packages/c1/60/9313bd728c28ed7b1ab812b79e116431d2e64850f29e2c9a227addb456dc/starlette_exporter-0.1.0.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "524f754c229505d998f1bd98d5f919b2", "sha256": "2fc999d986e820e97e5e86208479ff7da820eaf7ea78513bac8255c8bab175a1"}, "downloads": -1, "filename": "starlette_exporter-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "524f754c229505d998f1bd98d5f919b2", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7784, "upload_time": "2020-04-06T21:30:00", "upload_time_iso_8601": "2020-04-06T21:30:00.868149Z", "url": "https://files.pythonhosted.org/packages/14/42/500c8a219022ecd4a39ff7fd9bca9b87eb72dc4cbf4ce6ca1a90ffdc6f8d/starlette_exporter-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5119e33070a16781bfe314db28b612de", "sha256": "f5862cddba1591b2b0ec1c33e4237bf4b34383632c402c60e7752cb55d509c8e"}, "downloads": -1, "filename": "starlette_exporter-0.2.0.tar.gz", "has_sig": false, "md5_digest": "5119e33070a16781bfe314db28b612de", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3258, "upload_time": "2020-04-06T21:30:01", "upload_time_iso_8601": "2020-04-06T21:30:01.678588Z", "url": "https://files.pythonhosted.org/packages/b2/11/0168b8dfc4700cdf5b75c62cde3055489a755acb78dab849b4b77ab4334b/starlette_exporter-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "b864f88e7e9a81491a40be3a52ba818e", "sha256": "c602fd95af422d9d96e2d1e1b8fb595b36c183e6c9fae82088324498c7165f28"}, "downloads": -1, "filename": "starlette_exporter-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "b864f88e7e9a81491a40be3a52ba818e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7828, "upload_time": "2020-04-22T04:11:04", "upload_time_iso_8601": "2020-04-22T04:11:04.843225Z", "url": "https://files.pythonhosted.org/packages/06/6c/2e9c6787628d6fafc3a1e4a86589782b483412928bb74a7ae3acbab8e1d0/starlette_exporter-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "7ca882d2604318fd56d100c770b9113a", "sha256": "4da9726eac1c9a19efb7fda19d550c3e9e77e7898a9097e40d926d521e74cec5"}, "downloads": -1, "filename": "starlette_exporter-0.3.0.tar.gz", "has_sig": false, "md5_digest": "7ca882d2604318fd56d100c770b9113a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3280, "upload_time": "2020-04-22T04:11:06", "upload_time_iso_8601": "2020-04-22T04:11:06.503117Z", "url": "https://files.pythonhosted.org/packages/49/c6/11eaa670dc40b16810ee0073fe1cb807ef35ff63356c1201832f4e8c772d/starlette_exporter-0.3.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "b864f88e7e9a81491a40be3a52ba818e", "sha256": "c602fd95af422d9d96e2d1e1b8fb595b36c183e6c9fae82088324498c7165f28"}, "downloads": -1, "filename": "starlette_exporter-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "b864f88e7e9a81491a40be3a52ba818e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7828, "upload_time": "2020-04-22T04:11:04", "upload_time_iso_8601": "2020-04-22T04:11:04.843225Z", "url": "https://files.pythonhosted.org/packages/06/6c/2e9c6787628d6fafc3a1e4a86589782b483412928bb74a7ae3acbab8e1d0/starlette_exporter-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "7ca882d2604318fd56d100c770b9113a", "sha256": "4da9726eac1c9a19efb7fda19d550c3e9e77e7898a9097e40d926d521e74cec5"}, "downloads": -1, "filename": "starlette_exporter-0.3.0.tar.gz", "has_sig": false, "md5_digest": "7ca882d2604318fd56d100c770b9113a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3280, "upload_time": "2020-04-22T04:11:06", "upload_time_iso_8601": "2020-04-22T04:11:06.503117Z", "url": "https://files.pythonhosted.org/packages/49/c6/11eaa670dc40b16810ee0073fe1cb807ef35ff63356c1201832f4e8c772d/starlette_exporter-0.3.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:02:36 2020"}