{"info": {"author": "Felix Fennell", "author_email": "felnne@bas.ac.uk", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Framework :: Flask", "Intended Audience :: Science/Research", "License :: Other/Proprietary License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.8"], "description": "# MAGIC Web Map Inventory\n\nInventory of geospatial layers and web maps provided by the BAS Mapping and Geographic Information Centre (MAGIC),\nvisualised in Airtable.\n\n* [view the inventory in Airtable (Internal)](https://airtable.com/tblr6gwKOLQelMXDv/viwp8xVwcRRJnoIo0?blocks=hide)\n\nSee the [Data model](#data-model) section for more information about what this inventory holds.\n\n**Note:** This project is designed for internal use within MAGIC, but is offered to anyone with similar needs.\n\n## Usage\n\nThis project runs in a container. See the [Setup](#setup) section for setup instructions.\n\nIf running on the BAS central workstations:\n\n```shell\n$ ssh geoweb@bslws01.nerc-bas.ac.uk\n$ web-map-inventory [task]\n```\n\nConfiguration, logs and data output are stored in `/users/geoweb/.config/web-map-inventory/`.\n\nIf any errors occur they will be reported to Sentry and relevant individials alerted by email.\n\n### Commands\n\n#### `version`\n\nReports the current application version.\n\n#### `data fetch`\n\nFetches information about servers, namespaces, repositories, styles, layers and layer groups from servers defined in a\ndata sources file. Fetched information is saved to an output data file.\n\nOptions:\n\n* `-s`, `--data-sources-file-path`:\n    * path to a data sources file\n    * default: `data/sources.json`\n* `-d`, `--data-output-file-path`:\n    * path to a data sources file\n    * default: `data/data.json`\n\n**Note:** Currently this task results in new IDs being generated for each resource, even if it already exists. This will\nlead to resources being removed and re-added unnecessarily but will always remain internally consistent.\n\n#### `data validate`\n\nValidates protocols offered by servers defined in a data sources file (by default `data/sources.json`).\n\nOptions:\n\n* `-s`, `--data-sources-file-path`:\n    * path to a data sources file\n    * default: `data/sources.json`\n* `-i`, `--data-source-identifier`:\n    * identifier of a server in the data sources file\n    * use special value `all` to select all data sources\n* `-p`, `--validation-protocol`:\n    * protocol to validate\n    * default: `wms`\n\n**Note:** Currently this task is limited to the WMS (OGC Web Map Service) protocol.\n\n#### `airtable status`\n\nChecks local items against Airtable to check whether they are up-to-date (current), outdated, missing or orphaned.\n\n#### `airtable sync`\n\nCreates, updates or removes items in Airtable to match local items.\n\n#### `airtable reset`\n\nRemoves all data from Airtable.\n\n### Managing data sources\n\nEach data source is represented as an object in the `server` list in `data/sources.json` [1]. The structure of each\nsource depends on its type. For more general information, see the [Data sources](#data-sources) section.\n\n[1] This file is either in the runtime path created during [Setup](#setup) or `~/.config/web-map-inventory/` on the BAS\ncentral servers).\n\n#### Adding new data sources\n\n**Note:** See [Supported data sources](#supported-data-sources) for currently supported data sources.\n\nOnce added use the [`data fetch` task](#data-fetch).\n\n#### Adding a *GeoServer* data source\n\n| Property   | Required | Data Type | Allowed Values                                                      | Example Value                | Description                          | Notes                         |\n| ---------- | -------- | --------- | ------------------------------------------------------------------- | ---------------------------- | ------------------------------------ | ----------------------------- |\n| `id`       | Yes      | String    | A *ULID* (Universally Unique Lexicographically Sortable Identifier) | `01DRS53XAJNH0TNBW5161B6EWJ` | Unique identifier for server/source  | See below for how to generate |\n| `label`    | Yes      | String    | Any combination of *a-Z*, *A-Z*, *0-9*, *-*, *_*                    | `a-1_A`                      | Using a short, well-known identifier | -                             |\n| `hostname` | Yes      | String    | Any valid hostname                                                  | `example.com`                | -                                    | -                             |\n| `type`     | Yes      | String    | `geoserver`                                                         | *See allowed value*          | -                                    | -                             |\n| `port`     | Yes      | String    | Any valid port number                                               | `8080`                       | -                                    | Usually `80` or `8080`        |\n| `api-path` | Yes      | String    | `/geoserver/rest`                                                   | *See allowed value*          | Defined by GeoServer                 | -                             |\n| `wms-path` | Yes      | String    | `/geoserver/ows?service=wms&version=1.3.0&request=GetCapabilities`  | *See allowed value*          | Defined by GeoServer                 | -                             |\n| `wfs-path` | Yes      | String    | `/geoserver/ows?service=wfs&version=2.0.0&request=GetCapabilities`  | *See allowed value*          | Defined by GeoServer                 | -                             |\n| `username` | Yes      | String    | Any valid GeoServer username                                        | `admin`                      | Usually the GeoServer admin user     | -                             |\n| `password` | Yes      | String    | Password for GeoServer user                                         | `password`                   | Usually the GeoServer admin user     | -                             |\n\n**Note:** Use [ulidgenerator.com](http://ulidgenerator.com) to generate ULIDs manually.\n\nExample:\n\n```json\n{\n  \"id\": \"xxx\",\n  \"label\": \"example\",\n  \"hostname\": \"example.com\",\n  \"type\": \"geoserver\",\n  \"port\": \"80\",\n  \"api-path\": \"/geoserver/rest\",\n  \"wms-path\": \"/geoserver/ows?service=wms&version=1.3.0&request=GetCapabilities\",\n  \"wfs-path\": \"/geoserver/ows?service=wfs&version=2.0.0&request=GetCapabilities\",\n  \"username\": \"admin\",\n  \"password\": \"password\"\n}\n```\n\n## Implementation\n\nFlask application using the [airtable-python-wrapper](https://airtable-python-wrapper.readthedocs.io) library to\ninteract with the Airtable API.\n\n### Airtable\n\nData is synced to the\n[MAGIC Maps and Layers Inventory](https://airtable.com/tblCoGkVssEe6cs0B/viwjb9FAq2FLx5BL9?blocks=hide) Base in the\n[BAS MAGIC](https://airtable.com/wspXVL8SsiS5hPhob/workspace/billing) Workspace.\n\n### Data model\n\nThis project, an inventory, consists of information held in geospatial services. The data model is intended to be\ngeneric to support different data sources and technologies.\n\nThis data model consists of:\n\n* **Servers**: Represent a source of geospatial information, such as an instance of a technology or a whole platform\n* **Namespaces**: Represent a logical grouping of resources within a server/endpoint\n* **Repositories**: Represent a data source that backs one or more layers\n* **Styles**: Represent a definition for how data in a layer should be represented/presented\n* **Layers**: Represent a logical unit of geospatial information\n* **Layer Groups**: Represent a logical grouping of one or more layers that should be treated as a single, indivisible\n  unit\n\n![Data model visualisation](https://raw.githubusercontent.com/antarctica/web-map-inventory/master/assets/img/data-model.png)\n\nA [JSON Schema](bas_web_map_inventory/resources/json_schemas/data-schema.json) describes this schema. It is used \ninternally for validating data prior to use but is also published for use by others if needed as:\n[data-schema-v1.json](https://metadata-standards.data.bas.ac.uk/bas-web-map-inventory-configuration-schemas/data-resources-schema-v1.json).\n\n### Data sources\n\nData sources are *servers* in the project [Data model](#data-model) and define connection details for APIs and services\neach server type provides for fetching information about components they contain (e.g. listing *layers*).\n\nA data sources file, `data/sources.json`, is used for recording these details. An example is available in\n`data/sources.example.json`. See the [Adding a data source](#adding-new-data-sources) section for more information.\n\nA JSON Schema, `bas_web_map_inventory/resources/json_schemas/data-sources-schema.json`, validates this file.\n\n#### Supported data sources\n\n* GeoServer\n    * Using a combination of its admin API and WMS/WFS OGC endpoints\n\n### Configuration\n\nConfiguration options are set within `bas_web_map_inventory/config.py`.\n\nAll [Options](#configuration-options) are defined in a `Config` base class, with per-environment sub-classes overriding\nand extending these options as needed. The active configuration is set using the `FLASK_ENV` environment variable.\n\nMost options can be [Set using environment variables or files](#setting-configuration-options).\n\n#### Configuration options\n\n| Option                    | Required | Environments | Data Type (Cast) | Source      |  Allowed Values                                                                                                     | Default Value                                                              | Example Value                                                | Description                                                                                                     | Notes                      |\n| ------------------------- | -------- | ------------ | ---------------- | ----------- | ------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- | ------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------- | -------------------------- |\n| `FLASK_APP`               | Yes      | All          | String           | `.flaskenv` | Valid [`FLASK_APP`](https://flask.palletsprojects.com/en/1.1.x/cli/#application-discovery) value                    | `manage.py`                                                                | *See default value*                                          | See [Flask documentation](https://flask.palletsprojects.com/en/1.1.x/cli/#application-discovery)                | -                          |\n| `APP_ENABLE_SENTRY`       | No       | All          | Boolean          | `.flaskenv` | `True`/`False`                                                                                                      | `False` (for *development*/*testing*), `True` (for *staging*/*production*) | `True`                                                       | Feature flag for [Error reporting](#error-reporting)                                                            | -                          |\n| `APP_ENABLE_FILE_LOGGING` | No       | All          | Boolean          | `.flaskenv` | `True`/`False`                                                                                                      | `False`                                                                    | `False`                                                      | Feature flag for writing [Application Logs](#logging) to a file in addition to standard out                     | -                          |\n| `SENTEY_DSN`              | Yes      | Yes          | String           | `.flaskenv` | [Sentry DSN](https://docs.sentry.io/error-reporting/quickstart/?platform=python#configure-the-sdk) for this project | `https://c69a62ee2262460f9bc79c4048ba764f@sentry.io/1832548`               | *See default value*                                          | Sentry [Data Source Name](https://docs.sentry.io/error-reporting/quickstart/?platform=python#configure-the-sdk) | This value is not a secret |\n| `APP_LOG_FILE_PATH`       | No       | All          | String           | `.flaskenv` | Valid file path                                                                                                     | `/var/log/app/app.log`                                                     | `/var/log/app/app.log`                                       | Path to application log file, if enabled                                                                        | -                          |\n| `AIRTABLE_API_KEY`        | Yes      | All          | String           | `.env`      | Valid [AirTable API key](https://support.airtable.com/hc/en-us/articles/219046777-How-do-I-get-my-API-key-)         | -                                                                          | `keyxxxxxxxxxxxxxx`                                          | AirTable API Key                                                                                                | -                          |\n| `AIRTABLE_BASE_ID`        | Yes      | All          | String           | `.env`      | Valid [AirTable Base ID](https://airtable.com/api)                                                                  | -                                                                          | `appxxxxxxxxxxxxxx`                                          | ID of the AirTable Base to populate/use                                                                         | -                          |\n\nOptions are set as strings and then cast to the data type listed above. See\n[Environment variables](#setting-configuration-options) for information about an options 'Source'.\n\nFlask also has a number of\n[builtin configuration options](https://flask.palletsprojects.com/en/1.1.x/config/#builtin-configuration-values).\n\n#### Setting configuration options\n\nVariable configuration options can be set using environment variables or environment files:\n\n| Source                   | Priority | Purpose                     | Notes                                   |\n| ------------------------ | -------- | --------------------------- | --------------------------------------- |\n| OS environment variables | 1st      | General/Runtime             | -                                       |\n| `.env`                   | 2nd      | Secret/private variables    | Generate by copying `.env.example`      |\n| `.flaskenv`              | 3rd      | Non-secret/public variables | Generate by copying `.flaskenv.example` |\n\n**Note:** these sources are a\n[Flask convention](https://flask.palletsprojects.com/en/1.1.x/cli/#environment-variables-from-dotenv).\n\n### Error tracking\n\nErrors in this service are tracked with Sentry:\n\n* [Sentry dashboard](https://sentry.io/antarctica/web-map-inventory/)\n* [GitLab dashboard](https://gitlab.data.bas.ac.uk/MAGIC/web-map-inventory/error_tracking)\n\nError tracking will be enabled or disabled depending on the environment. It can be manually controlled by setting the\n`APP_ENABLE_SENTRY` variable in `.flaskenv`.\n\n### Logging\n\nLogs for this service are written to *stdout* and a log file, `/var/log/app/app.py`, depending on the environment.\n\nFile based logging can be manually controlled by setting the `APP_ENABLE_FILE_LOGGING` and `APP_LOG_FILE_PATH` \nvariables in `.flaskenv`.\n\n**Note:** If `APP_LOG_FILE_PATH` is changed, the user the container runs as must be granted suitable write permissions.\n\n### XML Catalogue\n\nAn [XML Catalog](https://en.wikipedia.org/wiki/XML_catalog) is used to cache XML files locally (typically XSD's for\nschemas). This drastically speeds up XML parsing and removes a dependency on remote endpoints.\n\nXML files in the catalogue are typically stored in `bas_web_map_inventory/resources/xml_schemas/`.\n\nDifferent catalogue files are used for different container variants due to differences in the applications location:\n\n* `:latest`: `./support/xml-schemas/catalogue.xml`\n* `/deploy`: `provisioning/docker/catalog.xml`\n\nIn either case, the catalogue is available within the container at the conventional path, `/etc/xml/catalog`, and will\nbe used automatically by most XML libraries and tools (such as `lxml` and `xmllint`).\n\n## Setup\n\nThe application for this project runs as a Docker container.\n\nOnce setup, see the [Data sources](#managing-data-sources) and [Usage](#usage) sections for how to use and run the\napplication.\n\n**Note:** This project can run locally or on the BAS central workstations using Podman. You will need\naccess to the private BAS Docker Registry (part of [gitlab.data.bas.ac.uk](https://gitlab.data.bas.ac.uk)) and for IT to enable Podman in your user account. Unless noted, `docker` commands listed here can be replaced with `podman`.\n\n```shell\n$ docker login docker-registry.data.bas.ac.uk\n$ docker pull docker-registry.data.bas.ac.uk/magic/web-map-inventory/deploy:stable\n```\n\n**Note:** [Other image tags](https://gitlab.data.bas.ac.uk/MAGIC/web-map-inventory/container_registry) are available if\nyou want to run pre-release versions, or a specific, previous, version.\n\nBefore you can run the container, you will need to create a runtime directory that will live outside of the container.\nYou will need to create the required [Configuration files](#configuration). Any generated output will also be saved\nhere.\n\n```shell\n$ mkdir -p ~/.config/web-map-inventory\n```\n\n### Optional wrapper script\n\nIf using podman, a wrapper script, `support/container-wrapper/podman-wrapper.sh`, is available to make running the\ncontainer easier.\n\nTo use, copy this script and enable it to be executed:\n\n```shell\n$ mkdir ~/bin\n# copy `support/container-wrapper/podman-wrapper.sh` as `~/bin/web-map-inventory`\n$ chmod +x ~/bin/web-map-inventory\n```\n\nThen ensure `~/bin` is part of the user's path (use `echo $PATH` to check), if it isn't edit the user's shell to include\nit (these instructions assume the bash shell and the absolute path to the user's home directory is `/home/foo`):\n\n```shell\n$ vi ~/.bash_rc\n# add `export PATH=\"/home/foo/bin:$PATH\" then save the file and reload the user's shell\n```\n\nYou should now be able to run `web-map-inventory` to run the container.\n\n### Terraform\n\nTerraform is used to provision resources required to allow JSON Schemas for data resources and data sources to be \naccessed externally.\n\nAccess to the [BAS AWS account](https://gitlab.data.bas.ac.uk/WSF/bas-aws) is needed to provisioning these resources.\n\n**Note:** This provisioning should have already been performed (and applies globally). If changes are made to this \nprovisioning it only needs to be applied once.\n\n```shell\n# start terraform inside a docker container\n$ cd provisioning/terraform\n$ docker-compose run terraform\n# setup terraform\n$ terraform init\n# apply changes\n$ terraform validate\n$ terraform fmt\n$ terraform apply\n# exit container\n$ exit\n$ docker-compose down\n```\n\n#### Terraform remote state\n\nState information for this project is stored remotely using a \n[Backend](https://www.terraform.io/docs/backends/index.html).\n\nSpecifically the [AWS S3](https://www.terraform.io/docs/backends/types/s3.html) backend as part of the \n[BAS Terraform Remote State](https://gitlab.data.bas.ac.uk/WSF/terraform-remote-state) project.\n\nRemote state storage will be automatically initialised when running `terraform init`. Any changes to remote state will\nbe automatically saved to the remote backend, there is no need to push or pull changes.\n\n##### Remote state authentication\n\nPermission to read and/or write remote state information for this project is restricted to authorised users. Contact\nthe [BAS Web & Applications Team](mailto:servicedesk@bas.ac.uk) to request access.\n\nSee the [BAS Terraform Remote State](https://gitlab.data.bas.ac.uk/WSF/terraform-remote-state) project for how these\npermissions to remote state are enforced.\n\n## Development\n\n```shell\n$ git clone https://gitlab.data.bas.ac.uk/MAGIC/web-map-inventory\n$ cd map-layer-index\n```\n\n### Development environment\n\nThe `:latest` container image is used for developing this project. It can run locally using Docker and Docker Compose:\n\n```shell\n$ docker login docker-registry.data.bas.ac.uk\n$ docker-compose pull app\n```\n\nThen create/configure required [Configuration files](#configuration):\n\n```shell\n$ cp .env.example .env\n$ cp .flaskenv.example .flaskenv\n$ cp data/sources.example.json data/sources.json\n```\n\nTo run/test application commands:\n\n```shell\n$ docker-compose run app flask [task]\n```\n\n[1] You will need access to the private BAS Docker Registry (part of\n[gitlab.data.bas.ac.uk](https://gitlab.data.bas.ac.uk)) to pull this image. If you don't, you can build the relevant\nimage/tag locally instead.\n\n### Code Style\n\nPEP-8 style and formatting guidelines must be used for this project, with the exception of the 80 character line limit.\n\n[Black](https://github.com/psf/black) is used to ensure compliance, configured in `pyproject.toml`.\n\nBlack can be [integrated](https://black.readthedocs.io/en/stable/editor_integration.html#pycharm-intellij-idea) with a \nrange of editors, such as PyCharm, to perform formatting automatically.\n\nTo apply formatting manually:\n\n```shell\n$ docker-compose run app black bas_web_map_inventory/\n```\n\nTo check compliance manually:\n\n```shell\n$ docker-compose run app black --check bas_web_map_inventory/\n```\n\nChecks are ran automatically in [Continuous Integration](#continuous-integration).\n\n### Python version\n\nWhen upgrading to a new version of Python, ensure the following are also checked and updated where needed:\n\n* `Dockerfile`:\n    * base stage image (e.g. `FROM python:3.X-alpine as base` to `FROM python:3.Y-alpine as base`)\n    * pre-compiled wheels (e.g. `https://.../linux_x86_64/cp3Xm/lxml-4.5.0-cp3X-cp3X-linux_x86_64.whl` to\n     `http://.../linux_x86_64/cp3Ym/lxml-4.5.0-cp3Y-cp3Y-linux_x86_64.whl`)\n* `provisioning/docker/Dockerfile`:\n    * base stage image (e.g. `FROM python:3.X-alpine as base` to `FROM python:3.Y-alpine as base`)\n    * pre-compiled wheels (e.g. `http://.../linux_x86_64/cp3Xm/lxml-4.5.0-cp3X-cp3X-linux_x86_64.whl` to\n     `http://.../linux_x86_64/cp3Ym/lxml-4.5.0-cp3Y-cp3Y-linux_x86_64.whl`)\n* `provisioning/docker/catalog.xml`:\n    * update the path to the Python package (e.g. `file://.../lib/python3.X/site-packages/...` to \n      `file://.../lib/python3.Y/site-packages/...`)\n* `pyproject.toml`\n    * `[tool.poetry.dependencies]`\n        * `python` (e.g. `python = \"^3.X\"` to `python = \"^3.Y\"`)\n    * `[tool.black]`\n        * `target-version` (e.g. `target-version = ['py3X']` to `target-version = ['py3Y']`)\n\n### Dependencies\n\nPython dependencies for this project are managed with [Poetry](https://python-poetry.org) in `pyproject.toml`.\n\nThe development container image installs both runtime and development dependencies. Deployment images only install\nruntime dependencies.\n\nNon-code files, such as static files, can also be included in the [Python package](#python-package) using the\n`include` key in `pyproject.toml`.\n\nTo add a new (development) dependency:\n\n```shell\n$ docker-compose run app ash\n$ poetry add [dependency] (--dev)\n```\n\nThen rebuild the development container and push to GitLab (GitLab will rebuild other images automatically as needed):\n\n```shell\n$ docker-compose build app\n$ docker-compose push app\n```\n\n### Static security scanning\n\nTo ensure the security of this API, source code is checked against [Bandit](https://github.com/PyCQA/bandit) for issues\nsuch as not sanitising user inputs or using weak cryptography. Bandit is configured in `.bandit`.\n\n**Warning:** Bandit is a static analysis tool and can't check for issues that are only be detectable when running the\napplication. As with all security tools, Bandit is an aid for spotting common mistakes, not a guarantee of secure code.\n\nTo run checks manually:\n\n```shell\n$ docker-compose run app bandit -r .\n```\n\nChecks are ran automatically in [Continuous Integration](#continuous-integration).\n\n### Logging\n\nUse the Flask default logger. For example:\n\n```python\napp.logger.info('Log message')\n```\n\nWhen outside of a route/command use `current_app`:\n\n```python\nfrom flask import current_app\n\ncurrent_app.logger.info('Log message')\n```\n\n### File paths\n\nUse Python's [`pathlib`](https://docs.python.org/3.6/library/pathlib.html) library for managing file paths.\n\nWhere displaying a file path to the user ensure it is always absolute to aid in debugging:\n\n```python\nfrom pathlib import Path\n\nfoo_path = Path(\"foo.txt\")\nprint(f\"foo_path is: {str(foo_path.absolute())}\")\n```\n\n### JSON Schemas\n\nJSON Schema's can be developed using [jsonschemavalidator.net](https://www.jsonschemavalidator.net).\n\n### XML Catalogue additions\n\nIf new functionality is added that depends on XML files, such as XSDs, it is *strongly* recommended to add them to the\n[XML catalogue](#xml-catalogue), especially where they are used in tests.\n\nOnce added, you will need to rebuild and push the project Docker image (see the [Dependencies](#dependencies) section\nfor more information).\n\n### Editor support\n\n#### PyCharm\n\nA run/debug configuration, *App*, is included in the project.\n\n### Testing\n\nAll code in the `bas_web_map_inventory` module must be covered by tests, defined in `tests/`. This project uses\n[PyTest](https://docs.pytest.org/en/latest/) which should be ran in a random order using\n[pytest-random-order](https://pypi.org/project/pytest-random-order/).\n\nTo run tests manually from the command line:\n\n```shell\n$ docker-compose run app -e FLASK_ENV=testing app pytest --random-order\n```\n\nTo run tests manually using PyCharm, use the included *App (Integration)* run/debug configuration.\n\nTests are ran automatically in [Continuous Integration](#continuous-integration).\n\n#### Test coverage\n\n[pytest-cov](https://pypi.org/project/pytest-cov/) is used to measure test coverage.\n\nTo prevent noise, `.coveragerc` is used to omit empty `__init__.py` files from reports.\n\nTo measure coverage manually:\n\n```shell\n$ docker-compose run -e FLASK_ENV=testing app pytest --cov=bas_web_map_inventory --cov-fail-under=100 --cov-report=html .\n```\n\n[Continuous Integration](#continuous-integration) will check coverage automatically and fail if less than 100%.\n\n#### Continuous Integration\n\nAll commits will trigger a Continuous Integration process using GitLab's CI/CD platform, configured in `.gitlab-ci.yml`.\n\n## Deployment\n\n### Python package\n\nThis project is distributed as a Python package, hosted in [PyPi](https://pypi.org/project/bas-web-map-inventory).\n\nSource and binary packages are built and published automatically using\n[Poetry](https://python-poetry.org/docs/cli/#publish) in [Continuous Delivery](#continuous-deployment).\n\nPackage versions are determined automatically using the `support/python-packaging/parse_version.py` script.\n\n### Docker image\n\nThe project [Python package](#python-package) is available as a Docker/OCI image, hosted in the private BAS Docker\nRegistry (part of [gitlab.data.bas.ac.uk](https://gitlab.data.bas.ac.uk)).\n\n[Continuous Delivery](#continuous-deployment) will automatically:\n\n* build a `/deploy:latest` image for commits to the *master* branch\n* build a `/deploy:release-stable` and `/deploy:release-[release]` image for tags\n* deploy new images to the BAS central workstations (by running `podman pull [image]` from the workstations)\n\n### Continuous Deployment\n\nAll commits will trigger a Continuous Deployment process using GitLab's CI/CD platform, configured in `.gitlab-ci.yml`.\n\n## Release procedure\n\nFor all releases:\n\n1. create a release branch\n2. close release in `CHANGELOG.md`\n3. push changes, merge the release branch into `master` and tag with version\n\n## Feedback\n\nThe maintainer of this project is the BAS Mapping and Geographic Information Centre (MAGIC), they can be contacted at:\n[servicedesk@bas.ac.uk](mailto:servicedesk@bas.ac.uk).\n\n## Issue tracking\n\nThis project uses issue tracking, see the\n[Issue tracker](https://gitlab.data.bas.ac.uk/MAGIC/web-map-inventory/issues) for more information.\n\n**Note:** Read & write access to this issue tracker is restricted. Contact the project maintainer to request access.\n\n## License\n\n\u00a9 UK Research and Innovation (UKRI), 2019 - 2020, British Antarctic Survey.\n\nYou may use and re-use this software and associated documentation files free of charge in any format or medium, under\nthe terms of the Open Government Licence v3.0.\n\nYou may obtain a copy of the Open Government Licence at http://www.nationalarchives.gov.uk/doc/open-government-licence/\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/antarctica/web-map-inventory", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "bas-web-map-inventory", "package_url": "https://pypi.org/project/bas-web-map-inventory/", "platform": "", "project_url": "https://pypi.org/project/bas-web-map-inventory/", "project_urls": {"Homepage": "https://github.com/antarctica/web-map-inventory", "Repository": "https://github.com/antarctica/web-map-inventory"}, "release_url": "https://pypi.org/project/bas-web-map-inventory/0.3.1/", "requires_dist": ["airtable-python-wrapper (>=0.12.0,<0.13.0)", "Flask (>=1.1.1,<2.0.0)", "geoserver-restconfig (==1.0.2)", "inquirer (>=2.6.3,<3.0.0)", "jsonschema (>=3.2.0,<4.0.0)", "lxml (==4.5.0)", "OWSlib (>=0.19.0,<0.20.0)", "python-dotenv (>=0.10.3,<0.11.0)", "sentry-sdk[flask] (>=0.13.5,<0.14.0)", "str2bool (>=1.1,<2.0)", "ulid-py (>=0.0.12,<0.0.13)", "pyproj (==2.6.0)"], "requires_python": ">=3.8,<4.0", "summary": "Inventory of geospatial layers and web maps provided by the BAS Mapping and Geographic Information Centre (MAGIC), visualised in Airtable.", "version": "0.3.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>MAGIC Web Map Inventory</h1>\n<p>Inventory of geospatial layers and web maps provided by the BAS Mapping and Geographic Information Centre (MAGIC),\nvisualised in Airtable.</p>\n<ul>\n<li><a href=\"https://airtable.com/tblr6gwKOLQelMXDv/viwp8xVwcRRJnoIo0?blocks=hide\" rel=\"nofollow\">view the inventory in Airtable (Internal)</a></li>\n</ul>\n<p>See the <a href=\"#data-model\" rel=\"nofollow\">Data model</a> section for more information about what this inventory holds.</p>\n<p><strong>Note:</strong> This project is designed for internal use within MAGIC, but is offered to anyone with similar needs.</p>\n<h2>Usage</h2>\n<p>This project runs in a container. See the <a href=\"#setup\" rel=\"nofollow\">Setup</a> section for setup instructions.</p>\n<p>If running on the BAS central workstations:</p>\n<pre>$ ssh geoweb@bslws01.nerc-bas.ac.uk\n$ web-map-inventory <span class=\"o\">[</span>task<span class=\"o\">]</span>\n</pre>\n<p>Configuration, logs and data output are stored in <code>/users/geoweb/.config/web-map-inventory/</code>.</p>\n<p>If any errors occur they will be reported to Sentry and relevant individials alerted by email.</p>\n<h3>Commands</h3>\n<h4><code>version</code></h4>\n<p>Reports the current application version.</p>\n<h4><code>data fetch</code></h4>\n<p>Fetches information about servers, namespaces, repositories, styles, layers and layer groups from servers defined in a\ndata sources file. Fetched information is saved to an output data file.</p>\n<p>Options:</p>\n<ul>\n<li><code>-s</code>, <code>--data-sources-file-path</code>:\n<ul>\n<li>path to a data sources file</li>\n<li>default: <code>data/sources.json</code></li>\n</ul>\n</li>\n<li><code>-d</code>, <code>--data-output-file-path</code>:\n<ul>\n<li>path to a data sources file</li>\n<li>default: <code>data/data.json</code></li>\n</ul>\n</li>\n</ul>\n<p><strong>Note:</strong> Currently this task results in new IDs being generated for each resource, even if it already exists. This will\nlead to resources being removed and re-added unnecessarily but will always remain internally consistent.</p>\n<h4><code>data validate</code></h4>\n<p>Validates protocols offered by servers defined in a data sources file (by default <code>data/sources.json</code>).</p>\n<p>Options:</p>\n<ul>\n<li><code>-s</code>, <code>--data-sources-file-path</code>:\n<ul>\n<li>path to a data sources file</li>\n<li>default: <code>data/sources.json</code></li>\n</ul>\n</li>\n<li><code>-i</code>, <code>--data-source-identifier</code>:\n<ul>\n<li>identifier of a server in the data sources file</li>\n<li>use special value <code>all</code> to select all data sources</li>\n</ul>\n</li>\n<li><code>-p</code>, <code>--validation-protocol</code>:\n<ul>\n<li>protocol to validate</li>\n<li>default: <code>wms</code></li>\n</ul>\n</li>\n</ul>\n<p><strong>Note:</strong> Currently this task is limited to the WMS (OGC Web Map Service) protocol.</p>\n<h4><code>airtable status</code></h4>\n<p>Checks local items against Airtable to check whether they are up-to-date (current), outdated, missing or orphaned.</p>\n<h4><code>airtable sync</code></h4>\n<p>Creates, updates or removes items in Airtable to match local items.</p>\n<h4><code>airtable reset</code></h4>\n<p>Removes all data from Airtable.</p>\n<h3>Managing data sources</h3>\n<p>Each data source is represented as an object in the <code>server</code> list in <code>data/sources.json</code> [1]. The structure of each\nsource depends on its type. For more general information, see the <a href=\"#data-sources\" rel=\"nofollow\">Data sources</a> section.</p>\n<p>[1] This file is either in the runtime path created during <a href=\"#setup\" rel=\"nofollow\">Setup</a> or <code>~/.config/web-map-inventory/</code> on the BAS\ncentral servers).</p>\n<h4>Adding new data sources</h4>\n<p><strong>Note:</strong> See <a href=\"#supported-data-sources\" rel=\"nofollow\">Supported data sources</a> for currently supported data sources.</p>\n<p>Once added use the <a href=\"#data-fetch\" rel=\"nofollow\"><code>data fetch</code> task</a>.</p>\n<h4>Adding a <em>GeoServer</em> data source</h4>\n<table>\n<thead>\n<tr>\n<th>Property</th>\n<th>Required</th>\n<th>Data Type</th>\n<th>Allowed Values</th>\n<th>Example Value</th>\n<th>Description</th>\n<th>Notes</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>id</code></td>\n<td>Yes</td>\n<td>String</td>\n<td>A <em>ULID</em> (Universally Unique Lexicographically Sortable Identifier)</td>\n<td><code>01DRS53XAJNH0TNBW5161B6EWJ</code></td>\n<td>Unique identifier for server/source</td>\n<td>See below for how to generate</td>\n</tr>\n<tr>\n<td><code>label</code></td>\n<td>Yes</td>\n<td>String</td>\n<td>Any combination of <em>a-Z</em>, <em>A-Z</em>, <em>0-9</em>, <em>-</em>, <em>_</em></td>\n<td><code>a-1_A</code></td>\n<td>Using a short, well-known identifier</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>hostname</code></td>\n<td>Yes</td>\n<td>String</td>\n<td>Any valid hostname</td>\n<td><code>example.com</code></td>\n<td>-</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>type</code></td>\n<td>Yes</td>\n<td>String</td>\n<td><code>geoserver</code></td>\n<td><em>See allowed value</em></td>\n<td>-</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>port</code></td>\n<td>Yes</td>\n<td>String</td>\n<td>Any valid port number</td>\n<td><code>8080</code></td>\n<td>-</td>\n<td>Usually <code>80</code> or <code>8080</code></td>\n</tr>\n<tr>\n<td><code>api-path</code></td>\n<td>Yes</td>\n<td>String</td>\n<td><code>/geoserver/rest</code></td>\n<td><em>See allowed value</em></td>\n<td>Defined by GeoServer</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>wms-path</code></td>\n<td>Yes</td>\n<td>String</td>\n<td><code>/geoserver/ows?service=wms&amp;version=1.3.0&amp;request=GetCapabilities</code></td>\n<td><em>See allowed value</em></td>\n<td>Defined by GeoServer</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>wfs-path</code></td>\n<td>Yes</td>\n<td>String</td>\n<td><code>/geoserver/ows?service=wfs&amp;version=2.0.0&amp;request=GetCapabilities</code></td>\n<td><em>See allowed value</em></td>\n<td>Defined by GeoServer</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>username</code></td>\n<td>Yes</td>\n<td>String</td>\n<td>Any valid GeoServer username</td>\n<td><code>admin</code></td>\n<td>Usually the GeoServer admin user</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>password</code></td>\n<td>Yes</td>\n<td>String</td>\n<td>Password for GeoServer user</td>\n<td><code>password</code></td>\n<td>Usually the GeoServer admin user</td>\n<td>-</td>\n</tr></tbody></table>\n<p><strong>Note:</strong> Use <a href=\"http://ulidgenerator.com\" rel=\"nofollow\">ulidgenerator.com</a> to generate ULIDs manually.</p>\n<p>Example:</p>\n<pre><span class=\"p\">{</span>\n  <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"xxx\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"label\"</span><span class=\"p\">:</span> <span class=\"s2\">\"example\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"hostname\"</span><span class=\"p\">:</span> <span class=\"s2\">\"example.com\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"type\"</span><span class=\"p\">:</span> <span class=\"s2\">\"geoserver\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"port\"</span><span class=\"p\">:</span> <span class=\"s2\">\"80\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"api-path\"</span><span class=\"p\">:</span> <span class=\"s2\">\"/geoserver/rest\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"wms-path\"</span><span class=\"p\">:</span> <span class=\"s2\">\"/geoserver/ows?service=wms&amp;version=1.3.0&amp;request=GetCapabilities\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"wfs-path\"</span><span class=\"p\">:</span> <span class=\"s2\">\"/geoserver/ows?service=wfs&amp;version=2.0.0&amp;request=GetCapabilities\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"username\"</span><span class=\"p\">:</span> <span class=\"s2\">\"admin\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"password\"</span><span class=\"p\">:</span> <span class=\"s2\">\"password\"</span>\n<span class=\"p\">}</span>\n</pre>\n<h2>Implementation</h2>\n<p>Flask application using the <a href=\"https://airtable-python-wrapper.readthedocs.io\" rel=\"nofollow\">airtable-python-wrapper</a> library to\ninteract with the Airtable API.</p>\n<h3>Airtable</h3>\n<p>Data is synced to the\n<a href=\"https://airtable.com/tblCoGkVssEe6cs0B/viwjb9FAq2FLx5BL9?blocks=hide\" rel=\"nofollow\">MAGIC Maps and Layers Inventory</a> Base in the\n<a href=\"https://airtable.com/wspXVL8SsiS5hPhob/workspace/billing\" rel=\"nofollow\">BAS MAGIC</a> Workspace.</p>\n<h3>Data model</h3>\n<p>This project, an inventory, consists of information held in geospatial services. The data model is intended to be\ngeneric to support different data sources and technologies.</p>\n<p>This data model consists of:</p>\n<ul>\n<li><strong>Servers</strong>: Represent a source of geospatial information, such as an instance of a technology or a whole platform</li>\n<li><strong>Namespaces</strong>: Represent a logical grouping of resources within a server/endpoint</li>\n<li><strong>Repositories</strong>: Represent a data source that backs one or more layers</li>\n<li><strong>Styles</strong>: Represent a definition for how data in a layer should be represented/presented</li>\n<li><strong>Layers</strong>: Represent a logical unit of geospatial information</li>\n<li><strong>Layer Groups</strong>: Represent a logical grouping of one or more layers that should be treated as a single, indivisible\nunit</li>\n</ul>\n<p><img alt=\"Data model visualisation\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b2df80db70153104dc2235354bd31d2c9b306c74/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f616e74617263746963612f7765622d6d61702d696e76656e746f72792f6d61737465722f6173736574732f696d672f646174612d6d6f64656c2e706e67\"></p>\n<p>A <a href=\"bas_web_map_inventory/resources/json_schemas/data-schema.json\" rel=\"nofollow\">JSON Schema</a> describes this schema. It is used\ninternally for validating data prior to use but is also published for use by others if needed as:\n<a href=\"https://metadata-standards.data.bas.ac.uk/bas-web-map-inventory-configuration-schemas/data-resources-schema-v1.json\" rel=\"nofollow\">data-schema-v1.json</a>.</p>\n<h3>Data sources</h3>\n<p>Data sources are <em>servers</em> in the project <a href=\"#data-model\" rel=\"nofollow\">Data model</a> and define connection details for APIs and services\neach server type provides for fetching information about components they contain (e.g. listing <em>layers</em>).</p>\n<p>A data sources file, <code>data/sources.json</code>, is used for recording these details. An example is available in\n<code>data/sources.example.json</code>. See the <a href=\"#adding-new-data-sources\" rel=\"nofollow\">Adding a data source</a> section for more information.</p>\n<p>A JSON Schema, <code>bas_web_map_inventory/resources/json_schemas/data-sources-schema.json</code>, validates this file.</p>\n<h4>Supported data sources</h4>\n<ul>\n<li>GeoServer\n<ul>\n<li>Using a combination of its admin API and WMS/WFS OGC endpoints</li>\n</ul>\n</li>\n</ul>\n<h3>Configuration</h3>\n<p>Configuration options are set within <code>bas_web_map_inventory/config.py</code>.</p>\n<p>All <a href=\"#configuration-options\" rel=\"nofollow\">Options</a> are defined in a <code>Config</code> base class, with per-environment sub-classes overriding\nand extending these options as needed. The active configuration is set using the <code>FLASK_ENV</code> environment variable.</p>\n<p>Most options can be <a href=\"#setting-configuration-options\" rel=\"nofollow\">Set using environment variables or files</a>.</p>\n<h4>Configuration options</h4>\n<table>\n<thead>\n<tr>\n<th>Option</th>\n<th>Required</th>\n<th>Environments</th>\n<th>Data Type (Cast)</th>\n<th>Source</th>\n<th>Allowed Values</th>\n<th>Default Value</th>\n<th>Example Value</th>\n<th>Description</th>\n<th>Notes</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>FLASK_APP</code></td>\n<td>Yes</td>\n<td>All</td>\n<td>String</td>\n<td><code>.flaskenv</code></td>\n<td>Valid <a href=\"https://flask.palletsprojects.com/en/1.1.x/cli/#application-discovery\" rel=\"nofollow\"><code>FLASK_APP</code></a> value</td>\n<td><code>manage.py</code></td>\n<td><em>See default value</em></td>\n<td>See <a href=\"https://flask.palletsprojects.com/en/1.1.x/cli/#application-discovery\" rel=\"nofollow\">Flask documentation</a></td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>APP_ENABLE_SENTRY</code></td>\n<td>No</td>\n<td>All</td>\n<td>Boolean</td>\n<td><code>.flaskenv</code></td>\n<td><code>True</code>/<code>False</code></td>\n<td><code>False</code> (for <em>development</em>/<em>testing</em>), <code>True</code> (for <em>staging</em>/<em>production</em>)</td>\n<td><code>True</code></td>\n<td>Feature flag for <a href=\"#error-reporting\" rel=\"nofollow\">Error reporting</a></td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>APP_ENABLE_FILE_LOGGING</code></td>\n<td>No</td>\n<td>All</td>\n<td>Boolean</td>\n<td><code>.flaskenv</code></td>\n<td><code>True</code>/<code>False</code></td>\n<td><code>False</code></td>\n<td><code>False</code></td>\n<td>Feature flag for writing <a href=\"#logging\" rel=\"nofollow\">Application Logs</a> to a file in addition to standard out</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>SENTEY_DSN</code></td>\n<td>Yes</td>\n<td>Yes</td>\n<td>String</td>\n<td><code>.flaskenv</code></td>\n<td><a href=\"https://docs.sentry.io/error-reporting/quickstart/?platform=python#configure-the-sdk\" rel=\"nofollow\">Sentry DSN</a> for this project</td>\n<td><code>https://c69a62ee2262460f9bc79c4048ba764f@sentry.io/1832548</code></td>\n<td><em>See default value</em></td>\n<td>Sentry <a href=\"https://docs.sentry.io/error-reporting/quickstart/?platform=python#configure-the-sdk\" rel=\"nofollow\">Data Source Name</a></td>\n<td>This value is not a secret</td>\n</tr>\n<tr>\n<td><code>APP_LOG_FILE_PATH</code></td>\n<td>No</td>\n<td>All</td>\n<td>String</td>\n<td><code>.flaskenv</code></td>\n<td>Valid file path</td>\n<td><code>/var/log/app/app.log</code></td>\n<td><code>/var/log/app/app.log</code></td>\n<td>Path to application log file, if enabled</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>AIRTABLE_API_KEY</code></td>\n<td>Yes</td>\n<td>All</td>\n<td>String</td>\n<td><code>.env</code></td>\n<td>Valid <a href=\"https://support.airtable.com/hc/en-us/articles/219046777-How-do-I-get-my-API-key-\" rel=\"nofollow\">AirTable API key</a></td>\n<td>-</td>\n<td><code>keyxxxxxxxxxxxxxx</code></td>\n<td>AirTable API Key</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>AIRTABLE_BASE_ID</code></td>\n<td>Yes</td>\n<td>All</td>\n<td>String</td>\n<td><code>.env</code></td>\n<td>Valid <a href=\"https://airtable.com/api\" rel=\"nofollow\">AirTable Base ID</a></td>\n<td>-</td>\n<td><code>appxxxxxxxxxxxxxx</code></td>\n<td>ID of the AirTable Base to populate/use</td>\n<td>-</td>\n</tr></tbody></table>\n<p>Options are set as strings and then cast to the data type listed above. See\n<a href=\"#setting-configuration-options\" rel=\"nofollow\">Environment variables</a> for information about an options 'Source'.</p>\n<p>Flask also has a number of\n<a href=\"https://flask.palletsprojects.com/en/1.1.x/config/#builtin-configuration-values\" rel=\"nofollow\">builtin configuration options</a>.</p>\n<h4>Setting configuration options</h4>\n<p>Variable configuration options can be set using environment variables or environment files:</p>\n<table>\n<thead>\n<tr>\n<th>Source</th>\n<th>Priority</th>\n<th>Purpose</th>\n<th>Notes</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>OS environment variables</td>\n<td>1st</td>\n<td>General/Runtime</td>\n<td>-</td>\n</tr>\n<tr>\n<td><code>.env</code></td>\n<td>2nd</td>\n<td>Secret/private variables</td>\n<td>Generate by copying <code>.env.example</code></td>\n</tr>\n<tr>\n<td><code>.flaskenv</code></td>\n<td>3rd</td>\n<td>Non-secret/public variables</td>\n<td>Generate by copying <code>.flaskenv.example</code></td>\n</tr></tbody></table>\n<p><strong>Note:</strong> these sources are a\n<a href=\"https://flask.palletsprojects.com/en/1.1.x/cli/#environment-variables-from-dotenv\" rel=\"nofollow\">Flask convention</a>.</p>\n<h3>Error tracking</h3>\n<p>Errors in this service are tracked with Sentry:</p>\n<ul>\n<li><a href=\"https://sentry.io/antarctica/web-map-inventory/\" rel=\"nofollow\">Sentry dashboard</a></li>\n<li><a href=\"https://gitlab.data.bas.ac.uk/MAGIC/web-map-inventory/error_tracking\" rel=\"nofollow\">GitLab dashboard</a></li>\n</ul>\n<p>Error tracking will be enabled or disabled depending on the environment. It can be manually controlled by setting the\n<code>APP_ENABLE_SENTRY</code> variable in <code>.flaskenv</code>.</p>\n<h3>Logging</h3>\n<p>Logs for this service are written to <em>stdout</em> and a log file, <code>/var/log/app/app.py</code>, depending on the environment.</p>\n<p>File based logging can be manually controlled by setting the <code>APP_ENABLE_FILE_LOGGING</code> and <code>APP_LOG_FILE_PATH</code>\nvariables in <code>.flaskenv</code>.</p>\n<p><strong>Note:</strong> If <code>APP_LOG_FILE_PATH</code> is changed, the user the container runs as must be granted suitable write permissions.</p>\n<h3>XML Catalogue</h3>\n<p>An <a href=\"https://en.wikipedia.org/wiki/XML_catalog\" rel=\"nofollow\">XML Catalog</a> is used to cache XML files locally (typically XSD's for\nschemas). This drastically speeds up XML parsing and removes a dependency on remote endpoints.</p>\n<p>XML files in the catalogue are typically stored in <code>bas_web_map_inventory/resources/xml_schemas/</code>.</p>\n<p>Different catalogue files are used for different container variants due to differences in the applications location:</p>\n<ul>\n<li><code>:latest</code>: <code>./support/xml-schemas/catalogue.xml</code></li>\n<li><code>/deploy</code>: <code>provisioning/docker/catalog.xml</code></li>\n</ul>\n<p>In either case, the catalogue is available within the container at the conventional path, <code>/etc/xml/catalog</code>, and will\nbe used automatically by most XML libraries and tools (such as <code>lxml</code> and <code>xmllint</code>).</p>\n<h2>Setup</h2>\n<p>The application for this project runs as a Docker container.</p>\n<p>Once setup, see the <a href=\"#managing-data-sources\" rel=\"nofollow\">Data sources</a> and <a href=\"#usage\" rel=\"nofollow\">Usage</a> sections for how to use and run the\napplication.</p>\n<p><strong>Note:</strong> This project can run locally or on the BAS central workstations using Podman. You will need\naccess to the private BAS Docker Registry (part of <a href=\"https://gitlab.data.bas.ac.uk\" rel=\"nofollow\">gitlab.data.bas.ac.uk</a>) and for IT to enable Podman in your user account. Unless noted, <code>docker</code> commands listed here can be replaced with <code>podman</code>.</p>\n<pre>$ docker login docker-registry.data.bas.ac.uk\n$ docker pull docker-registry.data.bas.ac.uk/magic/web-map-inventory/deploy:stable\n</pre>\n<p><strong>Note:</strong> <a href=\"https://gitlab.data.bas.ac.uk/MAGIC/web-map-inventory/container_registry\" rel=\"nofollow\">Other image tags</a> are available if\nyou want to run pre-release versions, or a specific, previous, version.</p>\n<p>Before you can run the container, you will need to create a runtime directory that will live outside of the container.\nYou will need to create the required <a href=\"#configuration\" rel=\"nofollow\">Configuration files</a>. Any generated output will also be saved\nhere.</p>\n<pre>$ mkdir -p ~/.config/web-map-inventory\n</pre>\n<h3>Optional wrapper script</h3>\n<p>If using podman, a wrapper script, <code>support/container-wrapper/podman-wrapper.sh</code>, is available to make running the\ncontainer easier.</p>\n<p>To use, copy this script and enable it to be executed:</p>\n<pre>$ mkdir ~/bin\n<span class=\"c1\"># copy `support/container-wrapper/podman-wrapper.sh` as `~/bin/web-map-inventory`</span>\n$ chmod +x ~/bin/web-map-inventory\n</pre>\n<p>Then ensure <code>~/bin</code> is part of the user's path (use <code>echo $PATH</code> to check), if it isn't edit the user's shell to include\nit (these instructions assume the bash shell and the absolute path to the user's home directory is <code>/home/foo</code>):</p>\n<pre>$ vi ~/.bash_rc\n<span class=\"c1\"># add `export PATH=\"/home/foo/bin:$PATH\" then save the file and reload the user's shell</span>\n</pre>\n<p>You should now be able to run <code>web-map-inventory</code> to run the container.</p>\n<h3>Terraform</h3>\n<p>Terraform is used to provision resources required to allow JSON Schemas for data resources and data sources to be\naccessed externally.</p>\n<p>Access to the <a href=\"https://gitlab.data.bas.ac.uk/WSF/bas-aws\" rel=\"nofollow\">BAS AWS account</a> is needed to provisioning these resources.</p>\n<p><strong>Note:</strong> This provisioning should have already been performed (and applies globally). If changes are made to this\nprovisioning it only needs to be applied once.</p>\n<pre><span class=\"c1\"># start terraform inside a docker container</span>\n$ <span class=\"nb\">cd</span> provisioning/terraform\n$ docker-compose run terraform\n<span class=\"c1\"># setup terraform</span>\n$ terraform init\n<span class=\"c1\"># apply changes</span>\n$ terraform validate\n$ terraform fmt\n$ terraform apply\n<span class=\"c1\"># exit container</span>\n$ <span class=\"nb\">exit</span>\n$ docker-compose down\n</pre>\n<h4>Terraform remote state</h4>\n<p>State information for this project is stored remotely using a\n<a href=\"https://www.terraform.io/docs/backends/index.html\" rel=\"nofollow\">Backend</a>.</p>\n<p>Specifically the <a href=\"https://www.terraform.io/docs/backends/types/s3.html\" rel=\"nofollow\">AWS S3</a> backend as part of the\n<a href=\"https://gitlab.data.bas.ac.uk/WSF/terraform-remote-state\" rel=\"nofollow\">BAS Terraform Remote State</a> project.</p>\n<p>Remote state storage will be automatically initialised when running <code>terraform init</code>. Any changes to remote state will\nbe automatically saved to the remote backend, there is no need to push or pull changes.</p>\n<h5>Remote state authentication</h5>\n<p>Permission to read and/or write remote state information for this project is restricted to authorised users. Contact\nthe <a href=\"mailto:servicedesk@bas.ac.uk\">BAS Web &amp; Applications Team</a> to request access.</p>\n<p>See the <a href=\"https://gitlab.data.bas.ac.uk/WSF/terraform-remote-state\" rel=\"nofollow\">BAS Terraform Remote State</a> project for how these\npermissions to remote state are enforced.</p>\n<h2>Development</h2>\n<pre>$ git clone https://gitlab.data.bas.ac.uk/MAGIC/web-map-inventory\n$ <span class=\"nb\">cd</span> map-layer-index\n</pre>\n<h3>Development environment</h3>\n<p>The <code>:latest</code> container image is used for developing this project. It can run locally using Docker and Docker Compose:</p>\n<pre>$ docker login docker-registry.data.bas.ac.uk\n$ docker-compose pull app\n</pre>\n<p>Then create/configure required <a href=\"#configuration\" rel=\"nofollow\">Configuration files</a>:</p>\n<pre>$ cp .env.example .env\n$ cp .flaskenv.example .flaskenv\n$ cp data/sources.example.json data/sources.json\n</pre>\n<p>To run/test application commands:</p>\n<pre>$ docker-compose run app flask <span class=\"o\">[</span>task<span class=\"o\">]</span>\n</pre>\n<p>[1] You will need access to the private BAS Docker Registry (part of\n<a href=\"https://gitlab.data.bas.ac.uk\" rel=\"nofollow\">gitlab.data.bas.ac.uk</a>) to pull this image. If you don't, you can build the relevant\nimage/tag locally instead.</p>\n<h3>Code Style</h3>\n<p>PEP-8 style and formatting guidelines must be used for this project, with the exception of the 80 character line limit.</p>\n<p><a href=\"https://github.com/psf/black\" rel=\"nofollow\">Black</a> is used to ensure compliance, configured in <code>pyproject.toml</code>.</p>\n<p>Black can be <a href=\"https://black.readthedocs.io/en/stable/editor_integration.html#pycharm-intellij-idea\" rel=\"nofollow\">integrated</a> with a\nrange of editors, such as PyCharm, to perform formatting automatically.</p>\n<p>To apply formatting manually:</p>\n<pre>$ docker-compose run app black bas_web_map_inventory/\n</pre>\n<p>To check compliance manually:</p>\n<pre>$ docker-compose run app black --check bas_web_map_inventory/\n</pre>\n<p>Checks are ran automatically in <a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>.</p>\n<h3>Python version</h3>\n<p>When upgrading to a new version of Python, ensure the following are also checked and updated where needed:</p>\n<ul>\n<li><code>Dockerfile</code>:\n<ul>\n<li>base stage image (e.g. <code>FROM python:3.X-alpine as base</code> to <code>FROM python:3.Y-alpine as base</code>)</li>\n<li>pre-compiled wheels (e.g. <code>https://.../linux_x86_64/cp3Xm/lxml-4.5.0-cp3X-cp3X-linux_x86_64.whl</code> to\n<code>http://.../linux_x86_64/cp3Ym/lxml-4.5.0-cp3Y-cp3Y-linux_x86_64.whl</code>)</li>\n</ul>\n</li>\n<li><code>provisioning/docker/Dockerfile</code>:\n<ul>\n<li>base stage image (e.g. <code>FROM python:3.X-alpine as base</code> to <code>FROM python:3.Y-alpine as base</code>)</li>\n<li>pre-compiled wheels (e.g. <code>http://.../linux_x86_64/cp3Xm/lxml-4.5.0-cp3X-cp3X-linux_x86_64.whl</code> to\n<code>http://.../linux_x86_64/cp3Ym/lxml-4.5.0-cp3Y-cp3Y-linux_x86_64.whl</code>)</li>\n</ul>\n</li>\n<li><code>provisioning/docker/catalog.xml</code>:\n<ul>\n<li>update the path to the Python package (e.g. <code>file://.../lib/python3.X/site-packages/...</code> to\n<code>file://.../lib/python3.Y/site-packages/...</code>)</li>\n</ul>\n</li>\n<li><code>pyproject.toml</code>\n<ul>\n<li><code>[tool.poetry.dependencies]</code>\n<ul>\n<li><code>python</code> (e.g. <code>python = \"^3.X\"</code> to <code>python = \"^3.Y\"</code>)</li>\n</ul>\n</li>\n<li><code>[tool.black]</code>\n<ul>\n<li><code>target-version</code> (e.g. <code>target-version = ['py3X']</code> to <code>target-version = ['py3Y']</code>)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3>Dependencies</h3>\n<p>Python dependencies for this project are managed with <a href=\"https://python-poetry.org\" rel=\"nofollow\">Poetry</a> in <code>pyproject.toml</code>.</p>\n<p>The development container image installs both runtime and development dependencies. Deployment images only install\nruntime dependencies.</p>\n<p>Non-code files, such as static files, can also be included in the <a href=\"#python-package\" rel=\"nofollow\">Python package</a> using the\n<code>include</code> key in <code>pyproject.toml</code>.</p>\n<p>To add a new (development) dependency:</p>\n<pre>$ docker-compose run app ash\n$ poetry add <span class=\"o\">[</span>dependency<span class=\"o\">]</span> <span class=\"o\">(</span>--dev<span class=\"o\">)</span>\n</pre>\n<p>Then rebuild the development container and push to GitLab (GitLab will rebuild other images automatically as needed):</p>\n<pre>$ docker-compose build app\n$ docker-compose push app\n</pre>\n<h3>Static security scanning</h3>\n<p>To ensure the security of this API, source code is checked against <a href=\"https://github.com/PyCQA/bandit\" rel=\"nofollow\">Bandit</a> for issues\nsuch as not sanitising user inputs or using weak cryptography. Bandit is configured in <code>.bandit</code>.</p>\n<p><strong>Warning:</strong> Bandit is a static analysis tool and can't check for issues that are only be detectable when running the\napplication. As with all security tools, Bandit is an aid for spotting common mistakes, not a guarantee of secure code.</p>\n<p>To run checks manually:</p>\n<pre>$ docker-compose run app bandit -r .\n</pre>\n<p>Checks are ran automatically in <a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>.</p>\n<h3>Logging</h3>\n<p>Use the Flask default logger. For example:</p>\n<pre><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"s1\">'Log message'</span><span class=\"p\">)</span>\n</pre>\n<p>When outside of a route/command use <code>current_app</code>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">current_app</span>\n\n<span class=\"n\">current_app</span><span class=\"o\">.</span><span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"s1\">'Log message'</span><span class=\"p\">)</span>\n</pre>\n<h3>File paths</h3>\n<p>Use Python's <a href=\"https://docs.python.org/3.6/library/pathlib.html\" rel=\"nofollow\"><code>pathlib</code></a> library for managing file paths.</p>\n<p>Where displaying a file path to the user ensure it is always absolute to aid in debugging:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pathlib</span> <span class=\"kn\">import</span> <span class=\"n\">Path</span>\n\n<span class=\"n\">foo_path</span> <span class=\"o\">=</span> <span class=\"n\">Path</span><span class=\"p\">(</span><span class=\"s2\">\"foo.txt\"</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"foo_path is: </span><span class=\"si\">{</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">foo_path</span><span class=\"o\">.</span><span class=\"n\">absolute</span><span class=\"p\">())</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n</pre>\n<h3>JSON Schemas</h3>\n<p>JSON Schema's can be developed using <a href=\"https://www.jsonschemavalidator.net\" rel=\"nofollow\">jsonschemavalidator.net</a>.</p>\n<h3>XML Catalogue additions</h3>\n<p>If new functionality is added that depends on XML files, such as XSDs, it is <em>strongly</em> recommended to add them to the\n<a href=\"#xml-catalogue\" rel=\"nofollow\">XML catalogue</a>, especially where they are used in tests.</p>\n<p>Once added, you will need to rebuild and push the project Docker image (see the <a href=\"#dependencies\" rel=\"nofollow\">Dependencies</a> section\nfor more information).</p>\n<h3>Editor support</h3>\n<h4>PyCharm</h4>\n<p>A run/debug configuration, <em>App</em>, is included in the project.</p>\n<h3>Testing</h3>\n<p>All code in the <code>bas_web_map_inventory</code> module must be covered by tests, defined in <code>tests/</code>. This project uses\n<a href=\"https://docs.pytest.org/en/latest/\" rel=\"nofollow\">PyTest</a> which should be ran in a random order using\n<a href=\"https://pypi.org/project/pytest-random-order/\" rel=\"nofollow\">pytest-random-order</a>.</p>\n<p>To run tests manually from the command line:</p>\n<pre>$ docker-compose run app -e <span class=\"nv\">FLASK_ENV</span><span class=\"o\">=</span>testing app pytest --random-order\n</pre>\n<p>To run tests manually using PyCharm, use the included <em>App (Integration)</em> run/debug configuration.</p>\n<p>Tests are ran automatically in <a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>.</p>\n<h4>Test coverage</h4>\n<p><a href=\"https://pypi.org/project/pytest-cov/\" rel=\"nofollow\">pytest-cov</a> is used to measure test coverage.</p>\n<p>To prevent noise, <code>.coveragerc</code> is used to omit empty <code>__init__.py</code> files from reports.</p>\n<p>To measure coverage manually:</p>\n<pre>$ docker-compose run -e <span class=\"nv\">FLASK_ENV</span><span class=\"o\">=</span>testing app pytest --cov<span class=\"o\">=</span>bas_web_map_inventory --cov-fail-under<span class=\"o\">=</span><span class=\"m\">100</span> --cov-report<span class=\"o\">=</span>html .\n</pre>\n<p><a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a> will check coverage automatically and fail if less than 100%.</p>\n<h4>Continuous Integration</h4>\n<p>All commits will trigger a Continuous Integration process using GitLab's CI/CD platform, configured in <code>.gitlab-ci.yml</code>.</p>\n<h2>Deployment</h2>\n<h3>Python package</h3>\n<p>This project is distributed as a Python package, hosted in <a href=\"https://pypi.org/project/bas-web-map-inventory\" rel=\"nofollow\">PyPi</a>.</p>\n<p>Source and binary packages are built and published automatically using\n<a href=\"https://python-poetry.org/docs/cli/#publish\" rel=\"nofollow\">Poetry</a> in <a href=\"#continuous-deployment\" rel=\"nofollow\">Continuous Delivery</a>.</p>\n<p>Package versions are determined automatically using the <code>support/python-packaging/parse_version.py</code> script.</p>\n<h3>Docker image</h3>\n<p>The project <a href=\"#python-package\" rel=\"nofollow\">Python package</a> is available as a Docker/OCI image, hosted in the private BAS Docker\nRegistry (part of <a href=\"https://gitlab.data.bas.ac.uk\" rel=\"nofollow\">gitlab.data.bas.ac.uk</a>).</p>\n<p><a href=\"#continuous-deployment\" rel=\"nofollow\">Continuous Delivery</a> will automatically:</p>\n<ul>\n<li>build a <code>/deploy:latest</code> image for commits to the <em>master</em> branch</li>\n<li>build a <code>/deploy:release-stable</code> and <code>/deploy:release-[release]</code> image for tags</li>\n<li>deploy new images to the BAS central workstations (by running <code>podman pull [image]</code> from the workstations)</li>\n</ul>\n<h3>Continuous Deployment</h3>\n<p>All commits will trigger a Continuous Deployment process using GitLab's CI/CD platform, configured in <code>.gitlab-ci.yml</code>.</p>\n<h2>Release procedure</h2>\n<p>For all releases:</p>\n<ol>\n<li>create a release branch</li>\n<li>close release in <code>CHANGELOG.md</code></li>\n<li>push changes, merge the release branch into <code>master</code> and tag with version</li>\n</ol>\n<h2>Feedback</h2>\n<p>The maintainer of this project is the BAS Mapping and Geographic Information Centre (MAGIC), they can be contacted at:\n<a href=\"mailto:servicedesk@bas.ac.uk\">servicedesk@bas.ac.uk</a>.</p>\n<h2>Issue tracking</h2>\n<p>This project uses issue tracking, see the\n<a href=\"https://gitlab.data.bas.ac.uk/MAGIC/web-map-inventory/issues\" rel=\"nofollow\">Issue tracker</a> for more information.</p>\n<p><strong>Note:</strong> Read &amp; write access to this issue tracker is restricted. Contact the project maintainer to request access.</p>\n<h2>License</h2>\n<p>\u00a9 UK Research and Innovation (UKRI), 2019 - 2020, British Antarctic Survey.</p>\n<p>You may use and re-use this software and associated documentation files free of charge in any format or medium, under\nthe terms of the Open Government Licence v3.0.</p>\n<p>You may obtain a copy of the Open Government Licence at <a href=\"http://www.nationalarchives.gov.uk/doc/open-government-licence/\" rel=\"nofollow\">http://www.nationalarchives.gov.uk/doc/open-government-licence/</a></p>\n\n          </div>"}, "last_serial": 7126946, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "a5ee34da788a9285ffdfdc3cbe1ff448", "sha256": "a64dc3e93f623997a0c804a14613d146ff035b8ccb275e72da04cea7ffb89744"}, "downloads": -1, "filename": "bas_web_map_inventory-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "a5ee34da788a9285ffdfdc3cbe1ff448", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 44036, "upload_time": "2020-01-02T09:45:54", "upload_time_iso_8601": "2020-01-02T09:45:54.027832Z", "url": "https://files.pythonhosted.org/packages/56/4c/0facce312709ca77b9acdb80a73d801195c9b845b8707d9dfccb26bba77c/bas_web_map_inventory-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "aed536de607af65723a3381e86c1dd62", "sha256": "ee6a6df4f2c28ee22e927f63c81d16b9721acb3c67f0a2cb04237c4b1cb45a52"}, "downloads": -1, "filename": "bas-web-map-inventory-0.2.0.tar.gz", "has_sig": false, "md5_digest": "aed536de607af65723a3381e86c1dd62", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 60804, "upload_time": "2020-01-02T09:45:51", "upload_time_iso_8601": "2020-01-02T09:45:51.302214Z", "url": "https://files.pythonhosted.org/packages/99/a1/eb438ca157810e2aa48ed6a143e5ce86a74a9034f006ab6631be7b412b9f/bas-web-map-inventory-0.2.0.tar.gz", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "21bec5751f2ffaf64fc61d1ed1047bb0", "sha256": "42e74e26bbae19ba86e3f03eb68655b9a0bc801deb1eb75d0b557e311be6f239"}, "downloads": -1, "filename": "bas_web_map_inventory-0.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "21bec5751f2ffaf64fc61d1ed1047bb0", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 44035, "upload_time": "2020-01-02T09:52:54", "upload_time_iso_8601": "2020-01-02T09:52:54.033350Z", "url": "https://files.pythonhosted.org/packages/2f/a8/e09504adcdfc83999e068f45b50911d36ce250e30353006145909c4401e4/bas_web_map_inventory-0.2.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f07e5e49b26137542fec85d3cc7260ab", "sha256": "76569d3304e096cffac0a92cc8d3513238314b33a792b1a9380ff3da990bf5a4"}, "downloads": -1, "filename": "bas-web-map-inventory-0.2.1.tar.gz", "has_sig": false, "md5_digest": "f07e5e49b26137542fec85d3cc7260ab", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 60813, "upload_time": "2020-01-02T09:52:52", "upload_time_iso_8601": "2020-01-02T09:52:52.185053Z", "url": "https://files.pythonhosted.org/packages/bd/50/d816b4bd4a99fa11273c2ee41907473df507aa428a7d0eeb1d9ce71194e9/bas-web-map-inventory-0.2.1.tar.gz", "yanked": false}], "0.2.2": [{"comment_text": "", "digests": {"md5": "307e86afe4bce69c81848bb50c4e2d98", "sha256": "1d9beed8d2a588a15bb6809813ed4ce1ac26f1521f5f36b56da43bd2c5676c5b"}, "downloads": -1, "filename": "bas_web_map_inventory-0.2.2-py3-none-any.whl", "has_sig": false, "md5_digest": "307e86afe4bce69c81848bb50c4e2d98", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 44692, "upload_time": "2020-02-12T15:57:52", "upload_time_iso_8601": "2020-02-12T15:57:52.320147Z", "url": "https://files.pythonhosted.org/packages/ce/a4/443423c9cde8f1deedaf3423e68bdbe193ca8c7d646713835176003cff2b/bas_web_map_inventory-0.2.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "fb0931b0c89670065773c12cb7a18a89", "sha256": "b13246ce31e7d17f0e5f58a517672dd0f4d01a886bbfbac3d9a6a6c67526c1f3"}, "downloads": -1, "filename": "bas-web-map-inventory-0.2.2.tar.gz", "has_sig": false, "md5_digest": "fb0931b0c89670065773c12cb7a18a89", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 62118, "upload_time": "2020-02-12T15:57:50", "upload_time_iso_8601": "2020-02-12T15:57:50.894008Z", "url": "https://files.pythonhosted.org/packages/e1/29/c424763fb5e1ef971f389d344c12f84685650fbbdcaface7530341f120d6/bas-web-map-inventory-0.2.2.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "64df690315e93ecca5182c1cb366d3dd", "sha256": "e492ae86bfe1770954875a361574decdf058e053c5f0b1601cbce563cb20fe85"}, "downloads": -1, "filename": "bas_web_map_inventory-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "64df690315e93ecca5182c1cb366d3dd", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.8,<4.0", "size": 47111, "upload_time": "2020-04-22T16:36:33", "upload_time_iso_8601": "2020-04-22T16:36:33.266584Z", "url": "https://files.pythonhosted.org/packages/c6/a3/0e817b0a1a173e2a54e249bc2e19f64fce9157315c2cb5ff54a8b21eabfc/bas_web_map_inventory-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9cb0e0f42298cd775f2eb714060c38c6", "sha256": "706c1a8d9c0b4e2750c0cc6c84aa7075fe21b24d2e7619b3cbca492f4affb246"}, "downloads": -1, "filename": "bas-web-map-inventory-0.3.0.tar.gz", "has_sig": false, "md5_digest": "9cb0e0f42298cd775f2eb714060c38c6", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.8,<4.0", "size": 65528, "upload_time": "2020-04-22T16:36:31", "upload_time_iso_8601": "2020-04-22T16:36:31.421220Z", "url": "https://files.pythonhosted.org/packages/2d/be/79228868bf2a43c24f48c2a7d7b51ca65ba91b8c396cfbfe4eade7c290b2/bas-web-map-inventory-0.3.0.tar.gz", "yanked": false}], "0.3.1": [{"comment_text": "", "digests": {"md5": "f6b9ec497e5821523ee5d3d6f428743b", "sha256": "c40542cbd8d4f2bcfe7cc503aa9190eef842af674bdb26540ef876540a9b4474"}, "downloads": -1, "filename": "bas_web_map_inventory-0.3.1-py3-none-any.whl", "has_sig": false, "md5_digest": "f6b9ec497e5821523ee5d3d6f428743b", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.8,<4.0", "size": 47569, "upload_time": "2020-04-29T08:26:01", "upload_time_iso_8601": "2020-04-29T08:26:01.228546Z", "url": "https://files.pythonhosted.org/packages/33/32/c97bc1c030e6680a743b59f7c74a0d3ca8e6f4540cb02581aa6c6773bdb1/bas_web_map_inventory-0.3.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "62732a24f85f3a913a5ff2b8a42255dd", "sha256": "b593ba548efa685fad9b7bd494e2f88bfb7a86d016a136c75eb0de4e073dc792"}, "downloads": -1, "filename": "bas-web-map-inventory-0.3.1.tar.gz", "has_sig": false, "md5_digest": "62732a24f85f3a913a5ff2b8a42255dd", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.8,<4.0", "size": 66084, "upload_time": "2020-04-29T08:25:59", "upload_time_iso_8601": "2020-04-29T08:25:59.732732Z", "url": "https://files.pythonhosted.org/packages/c8/4b/c24d2604f8b3bf8f24d0ed9a406d99868e36f2e9cb21ef1ac9f3ff1b383e/bas-web-map-inventory-0.3.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "f6b9ec497e5821523ee5d3d6f428743b", "sha256": "c40542cbd8d4f2bcfe7cc503aa9190eef842af674bdb26540ef876540a9b4474"}, "downloads": -1, "filename": "bas_web_map_inventory-0.3.1-py3-none-any.whl", "has_sig": false, "md5_digest": "f6b9ec497e5821523ee5d3d6f428743b", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.8,<4.0", "size": 47569, "upload_time": "2020-04-29T08:26:01", "upload_time_iso_8601": "2020-04-29T08:26:01.228546Z", "url": "https://files.pythonhosted.org/packages/33/32/c97bc1c030e6680a743b59f7c74a0d3ca8e6f4540cb02581aa6c6773bdb1/bas_web_map_inventory-0.3.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "62732a24f85f3a913a5ff2b8a42255dd", "sha256": "b593ba548efa685fad9b7bd494e2f88bfb7a86d016a136c75eb0de4e073dc792"}, "downloads": -1, "filename": "bas-web-map-inventory-0.3.1.tar.gz", "has_sig": false, "md5_digest": "62732a24f85f3a913a5ff2b8a42255dd", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.8,<4.0", "size": 66084, "upload_time": "2020-04-29T08:25:59", "upload_time_iso_8601": "2020-04-29T08:25:59.732732Z", "url": "https://files.pythonhosted.org/packages/c8/4b/c24d2604f8b3bf8f24d0ed9a406d99868e36f2e9cb21ef1ac9f3ff1b383e/bas-web-map-inventory-0.3.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:14:45 2020"}