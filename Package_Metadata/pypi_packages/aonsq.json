{"info": {"author": "SCys", "author_email": "me@iscys.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "License :: OSI Approved :: Apache Software License", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Software Development :: Libraries"], "description": "# aonsq\n\nan other async nsq client library\n\n## Example\n\n```python\nimport orjson\nimport asyncio\nfrom datetime import datetime, timezone\nfrom loguru import logger\n\nfrom aonsq import NSQMessage, NSQ\n\nasync def msg_handler(msg: NSQMessage) -> bool:\n    logger.debug(f\"msg: {msg.id}\")\n    return True\n\n\nasync def test():\n    mq = NSQ(host=\"127.0.0.1\", port=4071)\n    await mq.connect()\n    await mq.sub(\"demo\", \"test\", msg_handler)\n\n    while True:\n        for j in range(1000):\n            await mq.pub(\"demo\", orjson.dumps({\"id\": j, \"ts_created\": datetime.now(timezone.utc)}))\n\n        await asyncio.sleep(1)\n\ntry:\n    asyncio.get_event_loop().run_until_complete(test())\nexcept KeyboardInterrupt:\n    pass\n```\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/SCys/aonsq", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "aonsq", "package_url": "https://pypi.org/project/aonsq/", "platform": "", "project_url": "https://pypi.org/project/aonsq/", "project_urls": {"Homepage": "https://github.com/SCys/aonsq"}, "release_url": "https://pypi.org/project/aonsq/0.0.2/", "requires_dist": ["aiohttp (>=3.5.4)", "loguru (>=0.3.2)", "orjson (>=2.0.7)"], "requires_python": ">=3.6", "summary": "an other async nsq client library", "version": "0.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>aonsq</h1>\n<p>an other async nsq client library</p>\n<h2>Example</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">orjson</span>\n<span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span><span class=\"p\">,</span> <span class=\"n\">timezone</span>\n<span class=\"kn\">from</span> <span class=\"nn\">loguru</span> <span class=\"kn\">import</span> <span class=\"n\">logger</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">aonsq</span> <span class=\"kn\">import</span> <span class=\"n\">NSQMessage</span><span class=\"p\">,</span> <span class=\"n\">NSQ</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">msg_handler</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"p\">:</span> <span class=\"n\">NSQMessage</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">bool</span><span class=\"p\">:</span>\n    <span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"msg: </span><span class=\"si\">{</span><span class=\"n\">msg</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"kc\">True</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">test</span><span class=\"p\">():</span>\n    <span class=\"n\">mq</span> <span class=\"o\">=</span> <span class=\"n\">NSQ</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"o\">=</span><span class=\"s2\">\"127.0.0.1\"</span><span class=\"p\">,</span> <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"mi\">4071</span><span class=\"p\">)</span>\n    <span class=\"k\">await</span> <span class=\"n\">mq</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"p\">()</span>\n    <span class=\"k\">await</span> <span class=\"n\">mq</span><span class=\"o\">.</span><span class=\"n\">sub</span><span class=\"p\">(</span><span class=\"s2\">\"demo\"</span><span class=\"p\">,</span> <span class=\"s2\">\"test\"</span><span class=\"p\">,</span> <span class=\"n\">msg_handler</span><span class=\"p\">)</span>\n\n    <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n        <span class=\"k\">for</span> <span class=\"n\">j</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">1000</span><span class=\"p\">):</span>\n            <span class=\"k\">await</span> <span class=\"n\">mq</span><span class=\"o\">.</span><span class=\"n\">pub</span><span class=\"p\">(</span><span class=\"s2\">\"demo\"</span><span class=\"p\">,</span> <span class=\"n\">orjson</span><span class=\"o\">.</span><span class=\"n\">dumps</span><span class=\"p\">({</span><span class=\"s2\">\"id\"</span><span class=\"p\">:</span> <span class=\"n\">j</span><span class=\"p\">,</span> <span class=\"s2\">\"ts_created\"</span><span class=\"p\">:</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">(</span><span class=\"n\">timezone</span><span class=\"o\">.</span><span class=\"n\">utc</span><span class=\"p\">)}))</span>\n\n        <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n<span class=\"k\">try</span><span class=\"p\">:</span>\n    <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">get_event_loop</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">run_until_complete</span><span class=\"p\">(</span><span class=\"n\">test</span><span class=\"p\">())</span>\n<span class=\"k\">except</span> <span class=\"ne\">KeyboardInterrupt</span><span class=\"p\">:</span>\n    <span class=\"k\">pass</span>\n</pre>\n\n          </div>"}, "last_serial": 5963548, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "e7f1c2f622e91d072d831d4cbfe42c65", "sha256": "79ad6889c7b469d8519bdf1da8b0f784b7a80793d444cab44a34543d2bcd742c"}, "downloads": -1, "filename": "aonsq-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "e7f1c2f622e91d072d831d4cbfe42c65", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 8588, "upload_time": "2019-10-06T07:38:20", "upload_time_iso_8601": "2019-10-06T07:38:20.959996Z", "url": "https://files.pythonhosted.org/packages/ea/73/177d10099184b71588d8ba9466efbbfb01435b151cb0b4a8aa6fc8ece29a/aonsq-0.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d2bb0419f229c2e703c1a929c82c7946", "sha256": "e353f5735bb043b1984b6d81fd8932dd6c8dbb961bbec00bf5e58292dff82f31"}, "downloads": -1, "filename": "aonsq-0.0.1.tar.gz", "has_sig": false, "md5_digest": "d2bb0419f229c2e703c1a929c82c7946", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 4086, "upload_time": "2019-10-06T07:38:23", "upload_time_iso_8601": "2019-10-06T07:38:23.947639Z", "url": "https://files.pythonhosted.org/packages/28/83/12cc231987cdef4d52994761b1500da810acb8fea451c58906a9458371b6/aonsq-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "ce98f28f979294aef83b7b2a1b0ab02a", "sha256": "e5bfbeb0bc69943301f685a20bbca5d409d2f3ef5cf452011dc2d86b6ad97870"}, "downloads": -1, "filename": "aonsq-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "ce98f28f979294aef83b7b2a1b0ab02a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 8681, "upload_time": "2019-10-12T08:40:57", "upload_time_iso_8601": "2019-10-12T08:40:57.770854Z", "url": "https://files.pythonhosted.org/packages/de/e6/5bf010638873c83f8d994e4a7dcb28180af8e22c2f3961d12ba838012cc3/aonsq-0.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6163fe9d6ad0e25502c4f201fed35245", "sha256": "80152296638fc0dce91aec966c8b84e3d904b1075f72e8e6c503182057df7651"}, "downloads": -1, "filename": "aonsq-0.0.2.tar.gz", "has_sig": false, "md5_digest": "6163fe9d6ad0e25502c4f201fed35245", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 4169, "upload_time": "2019-10-12T08:40:59", "upload_time_iso_8601": "2019-10-12T08:40:59.416984Z", "url": "https://files.pythonhosted.org/packages/27/a0/29ed96d3e6cf6812354325f51bf1b29b14d9f0935ac4dc6db4342237bf68/aonsq-0.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "ce98f28f979294aef83b7b2a1b0ab02a", "sha256": "e5bfbeb0bc69943301f685a20bbca5d409d2f3ef5cf452011dc2d86b6ad97870"}, "downloads": -1, "filename": "aonsq-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "ce98f28f979294aef83b7b2a1b0ab02a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 8681, "upload_time": "2019-10-12T08:40:57", "upload_time_iso_8601": "2019-10-12T08:40:57.770854Z", "url": "https://files.pythonhosted.org/packages/de/e6/5bf010638873c83f8d994e4a7dcb28180af8e22c2f3961d12ba838012cc3/aonsq-0.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6163fe9d6ad0e25502c4f201fed35245", "sha256": "80152296638fc0dce91aec966c8b84e3d904b1075f72e8e6c503182057df7651"}, "downloads": -1, "filename": "aonsq-0.0.2.tar.gz", "has_sig": false, "md5_digest": "6163fe9d6ad0e25502c4f201fed35245", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 4169, "upload_time": "2019-10-12T08:40:59", "upload_time_iso_8601": "2019-10-12T08:40:59.416984Z", "url": "https://files.pythonhosted.org/packages/27/a0/29ed96d3e6cf6812354325f51bf1b29b14d9f0935ac4dc6db4342237bf68/aonsq-0.0.2.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:17:54 2020"}