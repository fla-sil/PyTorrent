{"info": {"author": "Danila Vershinin", "author_email": "info@getpagespeed.com", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "Intended Audience :: System Administrators", "Operating System :: OS Independent", "Topic :: Software Development"], "description": "# cloudflareddns \n\n[![Build Status](https://travis-ci.org/dvershinin/cloudflareddns.svg?branch=master)](https://travis-ci.org/dvershinin/cloudflareddns)\n[![PyPI version](https://badge.fury.io/py/cloudflareddns.svg)](https://badge.fury.io/py/cloudflareddns)\n\nA tiny command line utility for implementing DDNS with Cloudflare.\n\n* Supports virtually any server that is capable of running Python\n* Synology DiskStations supported\n* Quick to install using `yum/dnf` or `pip`\n\n## Synopsis\n\nUpdate DNS A record for `foo.example.com` to `1.2.3.4`\n\n```bash\ncloudflareddns --hostname foo.example.com --ip 1.2.3.4\n```\n\nLikewise, for an AAAA record:\n\n```bash\ncloudflareddns --hostname foo.example.com --ip 2001:0db8:85a3:0000:0000:8a2e:0370:7334\n```\n\nGet all options by simply running `cloudflareddns -h`:\n\n```\nusage: cloudflareddns [-h] [--email EMAIL] [--key KEY] [--hostname HOSTNAME]\n                      [--ip IP] [--ttl TTL] [--verbose] [--version]\n\nUpdate DDNS in Cloudflare.\n\noptional arguments:\n  -h, --help           show this help message and exit\n  --email EMAIL        Cloudflare account email (omit if using API tokens)\n  --key KEY            Cloudflare API key or token\n  --hostname HOSTNAME  Hostname to set IP for\n  --ip IP              The IP address\n  --ttl TTL            TTL in seconds\n  --verbose\n  --version            show program's version number and exit\n```\n\nWhen invoked without any options, `cloudflareddns` will try to point the\nFQDN (aka `<hostname>.<domain-name>` of the machine it runs on to its public IP address (auto-detected).\n\n### Install and use with Synology DiskStations\n\nYou can configure a Synology DiskStation with CloudFlare DDNS.\n\n**It's worth noting that if your Synology DSM is recent enough, you can simply use Synology's own DDNS service, then create a `CNAME` record at your domain that points to it. The downside to this solution, however, is extra DNS lookup required to resolve domain to IP.**\n\nAlternative solution is to use `cloudflaredns` which ships with the necessary CLI interface for Synology compatibility: `cloudflareddns-syno`.\n\n#### Step 1. Access Synology via SSH\n\n* Login to your DSM\n* Go to Control Panel > Terminal & SNMP > Enable SSH service\n* Use your client or commandline to access Synology. If you don't have any, I recommend you try out Putty for Windows.\n* Use your Synology admin account to connect.\n\n#### Step 2. Install `cloudflareddns`\n\nIf you're not a lazy man, checkout [instructions on installing using virtualenv](SAFE-INSTALL.md) for this step.\nFor quick setup instead:\n\n    curl https://bootstrap.pypa.io/get-pip.py | python\n    pip install cloudflareddns\n\nRun the following command to add new DDNS provider:\n\n```\ncat >> /etc/ddns_provider.conf << 'EOF'\n[USER_Cloudflare]\n        modulepath=/bin/cloudflareddns-syno\n        queryurl=https://www.cloudflare.com/\nEOF\n```\n\n#### Step 3. Get Cloudflare parameters\n\nIt is recommended to use a Cloudflare API *token*.\nCheck the [wiki page](https://github.com/dvershinin/cloudflareddns/wiki/Token-Authentication) \nfor instructions on how to get an API token with the most secure permissions.\n\nAlternatively, you can get Cloudflare global API key in your account settings.\n\n#### Step 4. Setup DDNS\n\n* Login to your DSM\n* Go to Control Panel > External Access > DDNS > Add\n* Select Cloudflare as service provider\n* Enter your domain as hostname\n* If using token authentication: enter `x` in the Username/Email, and API token as Password/Key.\nThe requirement to put `x` is due to Synology GUI's constraints not allowing for an empty field   \n* If using global API key: enter your Cloudflare account as Username/Email, and API key as Password/Key\n\n### Installation for CentOS/RHEL 7+\n\n    sudo yum install https://extras.getpagespeed.com/release-el$(rpm -E %{rhel})-latest.rpm\n    sudo yum install cloudflareddns\n\n### Installation for other systems\n\nInstalling with `pip` is easiest:\n\n    pip install cloudflareddns\n\n### Usage in Python scripts\n\n```python\nfrom cloudflareddns import cloudflareddns\nhostname = 'foo.example.com'\nip = '1.2.3.4'\nif cloudflareddns.updateRecord(hostname, ip):\n  print('Record is OK')\n  ...\n```\n\nRequires using environment variables (see tips below).\n\n### Specifying Cloudflare credentials\n\nIn non-Synology systems, you can store Cloudflare credentials in either environment \nvariables or a configuration file.\n\n#### Via configuration file\n\nCreate `~/.cloudflare/cloudflare.cfg` and put:\n\n```ini\n[CloudFlare]\nemail = user@example.com # Do not set if using an API Token\ntoken = xxxxxxxxxxxxxxxxxxxxxxxxxxx\n```\n\n#### Via environment variables\n\nYou can put your Cloudflare credentials into the `~/.bashrc` file:\n\n```bash\nexport CF_API_EMAIL=\"user@example.com\" # Do not set if using an API Token\nexport CF_API_KEY=\"xxxxxx\"\n```\n\nDon't forget to `source ~/.bashrc` if you have just put credentials in there.\nThe `cloudflareddns` will pick those up, so no need to pass `--email` or `--key` every time.\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/dvershinin/cloudflareddns", "keywords": "", "license": "BSD", "maintainer": "", "maintainer_email": "", "name": "cloudflareddns", "package_url": "https://pypi.org/project/cloudflareddns/", "platform": "", "project_url": "https://pypi.org/project/cloudflareddns/", "project_urls": {"Homepage": "https://github.com/dvershinin/cloudflareddns"}, "release_url": "https://pypi.org/project/cloudflareddns/0.0.6/", "requires_dist": ["requests", "tldextract", "cloudflare (>=2.3.1)", "requests ; extra == 'tests'", "tldextract ; extra == 'tests'", "cloudflare (>=2.3.1) ; extra == 'tests'", "pytest ; extra == 'tests'", "flake8 ; extra == 'tests'", "faker ; extra == 'tests'"], "requires_python": "", "summary": "A CLI tool to use Cloudflare as a DDNS provider", "version": "0.0.6", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>cloudflareddns</h1>\n<p><a href=\"https://travis-ci.org/dvershinin/cloudflareddns\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3c744fdacc52d0cde0a77b2e906f460c592115d1/68747470733a2f2f7472617669732d63692e6f72672f647665727368696e696e2f636c6f7564666c61726564646e732e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://badge.fury.io/py/cloudflareddns\" rel=\"nofollow\"><img alt=\"PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a7c742fe7b389b13c4f9e60d411ce2f47a3e7eba/68747470733a2f2f62616467652e667572792e696f2f70792f636c6f7564666c61726564646e732e737667\"></a></p>\n<p>A tiny command line utility for implementing DDNS with Cloudflare.</p>\n<ul>\n<li>Supports virtually any server that is capable of running Python</li>\n<li>Synology DiskStations supported</li>\n<li>Quick to install using <code>yum/dnf</code> or <code>pip</code></li>\n</ul>\n<h2>Synopsis</h2>\n<p>Update DNS A record for <code>foo.example.com</code> to <code>1.2.3.4</code></p>\n<pre>cloudflareddns --hostname foo.example.com --ip <span class=\"m\">1</span>.2.3.4\n</pre>\n<p>Likewise, for an AAAA record:</p>\n<pre>cloudflareddns --hostname foo.example.com --ip <span class=\"m\">2001</span>:0db8:85a3:0000:0000:8a2e:0370:7334\n</pre>\n<p>Get all options by simply running <code>cloudflareddns -h</code>:</p>\n<pre><code>usage: cloudflareddns [-h] [--email EMAIL] [--key KEY] [--hostname HOSTNAME]\n                      [--ip IP] [--ttl TTL] [--verbose] [--version]\n\nUpdate DDNS in Cloudflare.\n\noptional arguments:\n  -h, --help           show this help message and exit\n  --email EMAIL        Cloudflare account email (omit if using API tokens)\n  --key KEY            Cloudflare API key or token\n  --hostname HOSTNAME  Hostname to set IP for\n  --ip IP              The IP address\n  --ttl TTL            TTL in seconds\n  --verbose\n  --version            show program's version number and exit\n</code></pre>\n<p>When invoked without any options, <code>cloudflareddns</code> will try to point the\nFQDN (aka <code>&lt;hostname&gt;.&lt;domain-name&gt;</code> of the machine it runs on to its public IP address (auto-detected).</p>\n<h3>Install and use with Synology DiskStations</h3>\n<p>You can configure a Synology DiskStation with CloudFlare DDNS.</p>\n<p><strong>It's worth noting that if your Synology DSM is recent enough, you can simply use Synology's own DDNS service, then create a <code>CNAME</code> record at your domain that points to it. The downside to this solution, however, is extra DNS lookup required to resolve domain to IP.</strong></p>\n<p>Alternative solution is to use <code>cloudflaredns</code> which ships with the necessary CLI interface for Synology compatibility: <code>cloudflareddns-syno</code>.</p>\n<h4>Step 1. Access Synology via SSH</h4>\n<ul>\n<li>Login to your DSM</li>\n<li>Go to Control Panel &gt; Terminal &amp; SNMP &gt; Enable SSH service</li>\n<li>Use your client or commandline to access Synology. If you don't have any, I recommend you try out Putty for Windows.</li>\n<li>Use your Synology admin account to connect.</li>\n</ul>\n<h4>Step 2. Install <code>cloudflareddns</code></h4>\n<p>If you're not a lazy man, checkout <a href=\"SAFE-INSTALL.md\" rel=\"nofollow\">instructions on installing using virtualenv</a> for this step.\nFor quick setup instead:</p>\n<pre><code>curl https://bootstrap.pypa.io/get-pip.py | python\npip install cloudflareddns\n</code></pre>\n<p>Run the following command to add new DDNS provider:</p>\n<pre><code>cat &gt;&gt; /etc/ddns_provider.conf &lt;&lt; 'EOF'\n[USER_Cloudflare]\n        modulepath=/bin/cloudflareddns-syno\n        queryurl=https://www.cloudflare.com/\nEOF\n</code></pre>\n<h4>Step 3. Get Cloudflare parameters</h4>\n<p>It is recommended to use a Cloudflare API <em>token</em>.\nCheck the <a href=\"https://github.com/dvershinin/cloudflareddns/wiki/Token-Authentication\" rel=\"nofollow\">wiki page</a>\nfor instructions on how to get an API token with the most secure permissions.</p>\n<p>Alternatively, you can get Cloudflare global API key in your account settings.</p>\n<h4>Step 4. Setup DDNS</h4>\n<ul>\n<li>Login to your DSM</li>\n<li>Go to Control Panel &gt; External Access &gt; DDNS &gt; Add</li>\n<li>Select Cloudflare as service provider</li>\n<li>Enter your domain as hostname</li>\n<li>If using token authentication: enter <code>x</code> in the Username/Email, and API token as Password/Key.\nThe requirement to put <code>x</code> is due to Synology GUI's constraints not allowing for an empty field</li>\n<li>If using global API key: enter your Cloudflare account as Username/Email, and API key as Password/Key</li>\n</ul>\n<h3>Installation for CentOS/RHEL 7+</h3>\n<pre><code>sudo yum install https://extras.getpagespeed.com/release-el$(rpm -E %{rhel})-latest.rpm\nsudo yum install cloudflareddns\n</code></pre>\n<h3>Installation for other systems</h3>\n<p>Installing with <code>pip</code> is easiest:</p>\n<pre><code>pip install cloudflareddns\n</code></pre>\n<h3>Usage in Python scripts</h3>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">cloudflareddns</span> <span class=\"kn\">import</span> <span class=\"n\">cloudflareddns</span>\n<span class=\"n\">hostname</span> <span class=\"o\">=</span> <span class=\"s1\">'foo.example.com'</span>\n<span class=\"n\">ip</span> <span class=\"o\">=</span> <span class=\"s1\">'1.2.3.4'</span>\n<span class=\"k\">if</span> <span class=\"n\">cloudflareddns</span><span class=\"o\">.</span><span class=\"n\">updateRecord</span><span class=\"p\">(</span><span class=\"n\">hostname</span><span class=\"p\">,</span> <span class=\"n\">ip</span><span class=\"p\">):</span>\n  <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Record is OK'</span><span class=\"p\">)</span>\n  <span class=\"o\">...</span>\n</pre>\n<p>Requires using environment variables (see tips below).</p>\n<h3>Specifying Cloudflare credentials</h3>\n<p>In non-Synology systems, you can store Cloudflare credentials in either environment\nvariables or a configuration file.</p>\n<h4>Via configuration file</h4>\n<p>Create <code>~/.cloudflare/cloudflare.cfg</code> and put:</p>\n<pre><span class=\"k\">[CloudFlare]</span>\n<span class=\"na\">email</span> <span class=\"o\">=</span> <span class=\"s\">user@example.com # Do not set if using an API Token</span>\n<span class=\"na\">token</span> <span class=\"o\">=</span> <span class=\"s\">xxxxxxxxxxxxxxxxxxxxxxxxxxx</span>\n</pre>\n<h4>Via environment variables</h4>\n<p>You can put your Cloudflare credentials into the <code>~/.bashrc</code> file:</p>\n<pre><span class=\"nb\">export</span> <span class=\"nv\">CF_API_EMAIL</span><span class=\"o\">=</span><span class=\"s2\">\"user@example.com\"</span> <span class=\"c1\"># Do not set if using an API Token</span>\n<span class=\"nb\">export</span> <span class=\"nv\">CF_API_KEY</span><span class=\"o\">=</span><span class=\"s2\">\"xxxxxx\"</span>\n</pre>\n<p>Don't forget to <code>source ~/.bashrc</code> if you have just put credentials in there.\nThe <code>cloudflareddns</code> will pick those up, so no need to pass <code>--email</code> or <code>--key</code> every time.</p>\n\n          </div>"}, "last_serial": 6383489, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "63bfe4025156d405ce0a03af069571d6", "sha256": "9cf0b804f6c0e4a7a6b7359f4081c93f10ff3566bd1c81493766841cecbd8416"}, "downloads": -1, "filename": "cloudflareddns-0.0.1.tar.gz", "has_sig": false, "md5_digest": "63bfe4025156d405ce0a03af069571d6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5373, "upload_time": "2019-06-13T13:19:13", "upload_time_iso_8601": "2019-06-13T13:19:13.270467Z", "url": "https://files.pythonhosted.org/packages/36/ce/68f63eb87c2c5c3b16d452eaf0e8f2a217d71a4ee23650368ad92fdd40fc/cloudflareddns-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "a3b815eb9150088d3d1d20ce625ae86c", "sha256": "47db8a870223a832536b350b81a652c09bcfb49813bdaabda0a489bc87bd3a60"}, "downloads": -1, "filename": "cloudflareddns-0.0.2.tar.gz", "has_sig": false, "md5_digest": "a3b815eb9150088d3d1d20ce625ae86c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5392, "upload_time": "2019-06-13T13:56:51", "upload_time_iso_8601": "2019-06-13T13:56:51.564996Z", "url": "https://files.pythonhosted.org/packages/f8/9f/2570a3fd76c728bae679003bb9cd0d355418a7c1fa40af4c68eadf021aaa/cloudflareddns-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "47c32e95414a9e6f9b09e9bc0ac511ef", "sha256": "9359c65550c184cea32511fa4621eb1a052c1b750152457880dd286ef715e82d"}, "downloads": -1, "filename": "cloudflareddns-0.0.3.tar.gz", "has_sig": false, "md5_digest": "47c32e95414a9e6f9b09e9bc0ac511ef", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6244, "upload_time": "2019-11-23T07:04:57", "upload_time_iso_8601": "2019-11-23T07:04:57.872861Z", "url": "https://files.pythonhosted.org/packages/0b/14/b996a6348dc15109061522ce0313fbc58aa77e51493dbc2803b34b50aeae/cloudflareddns-0.0.3.tar.gz", "yanked": false}], "0.0.4": [{"comment_text": "", "digests": {"md5": "7533a5e492900f828e2a7fa090939e3b", "sha256": "07fad2414080972f04e917f8ee278f8d95be52a17612037b00d225d3ad3d8a95"}, "downloads": -1, "filename": "cloudflareddns-0.0.4.tar.gz", "has_sig": false, "md5_digest": "7533a5e492900f828e2a7fa090939e3b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6241, "upload_time": "2019-11-23T07:10:30", "upload_time_iso_8601": "2019-11-23T07:10:30.910947Z", "url": "https://files.pythonhosted.org/packages/aa/f9/b02503a09d922ee2b4aed814634640900c135b92531aa3bb1cedbcbd8339/cloudflareddns-0.0.4.tar.gz", "yanked": false}], "0.0.6": [{"comment_text": "", "digests": {"md5": "f0142ec44622d7216879bd3e2819930c", "sha256": "7f64c0d861a121acd84972951b41d1cd4fc1352501d2277305a5a0ba320a43b9"}, "downloads": -1, "filename": "cloudflareddns-0.0.6-py3-none-any.whl", "has_sig": false, "md5_digest": "f0142ec44622d7216879bd3e2819930c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8091, "upload_time": "2020-01-01T22:10:18", "upload_time_iso_8601": "2020-01-01T22:10:18.850373Z", "url": "https://files.pythonhosted.org/packages/f6/11/7286bbff7a818654c4ec111264df43e0d48f6180bae9148c895c636841fb/cloudflareddns-0.0.6-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1eeb3b6054f46f021b63c1c23d56249b", "sha256": "9b7e65b2eb73b7909080156cb3ec6887aed5a33060579703c14d798af6f74d3a"}, "downloads": -1, "filename": "cloudflareddns-0.0.6.tar.gz", "has_sig": false, "md5_digest": "1eeb3b6054f46f021b63c1c23d56249b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8455, "upload_time": "2020-01-01T22:10:20", "upload_time_iso_8601": "2020-01-01T22:10:20.066613Z", "url": "https://files.pythonhosted.org/packages/cb/a1/b6ab12498bea121c5863f39d84dacb1805518441e599790da3b6f9760d00/cloudflareddns-0.0.6.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "f0142ec44622d7216879bd3e2819930c", "sha256": "7f64c0d861a121acd84972951b41d1cd4fc1352501d2277305a5a0ba320a43b9"}, "downloads": -1, "filename": "cloudflareddns-0.0.6-py3-none-any.whl", "has_sig": false, "md5_digest": "f0142ec44622d7216879bd3e2819930c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8091, "upload_time": "2020-01-01T22:10:18", "upload_time_iso_8601": "2020-01-01T22:10:18.850373Z", "url": "https://files.pythonhosted.org/packages/f6/11/7286bbff7a818654c4ec111264df43e0d48f6180bae9148c895c636841fb/cloudflareddns-0.0.6-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1eeb3b6054f46f021b63c1c23d56249b", "sha256": "9b7e65b2eb73b7909080156cb3ec6887aed5a33060579703c14d798af6f74d3a"}, "downloads": -1, "filename": "cloudflareddns-0.0.6.tar.gz", "has_sig": false, "md5_digest": "1eeb3b6054f46f021b63c1c23d56249b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8455, "upload_time": "2020-01-01T22:10:20", "upload_time_iso_8601": "2020-01-01T22:10:20.066613Z", "url": "https://files.pythonhosted.org/packages/cb/a1/b6ab12498bea121c5863f39d84dacb1805518441e599790da3b6f9760d00/cloudflareddns-0.0.6.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:18:51 2020"}