{"info": {"author": "Andreas Bergem", "author_email": "bergem.andreas@gmail.com", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Operating System :: OS Independent", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Scientific/Engineering", "Topic :: Scientific/Engineering :: Image Recognition", "Typing :: Typed"], "description": "# Simple wrapper for opencv-python\n[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/ambv/black)\n[![Checked with mypy](http://www.mypy-lang.org/static/mypy_badge.svg)](http://mypy-lang.org/)\n[![Python version](https://img.shields.io/pypi/pyversions/opencv_wrapper.svg)](https://pypi.org/project/opencv-wrapper/)\n[![Pypi version](https://img.shields.io/pypi/v/opencv_wrapper.svg?color=blue)](https://pypi.org/project/opencv-wrapper/)\n[![Pypi version](https://img.shields.io/github/license/anbergem/opencv_wrapper.svg)](https://pypi.org/project/opencv-wrapper/)\n[![](https://tokei.rs/b1/github/anbergem/opencv_wrapper)](https://github.com/Aaronepower/tokei)\n[![Documentation Status](https://readthedocs.org/projects/opencv-wrapper/badge/?version=latest)](https://opencv-wrapper.readthedocs.io/en/latest/?badge=latest)\n[![Build Status](https://travis-ci.com/anbergem/opencv_wrapper.svg?branch=master)](https://travis-ci.com/anbergem/opencv_wrapper)\n\nOpenCV Wrapper is a simpler wrapper for the `opencv-python` package. As the mentioned package only gives access to OpenCV functions, in a C++ style, it can be tedious to write. There is also no support for the OpenCV classes like Rect, Point etc. OpenCV Wrapper attempts to fix that.\n\nThe package is at an early state, and contributions are welcome! The contents of the package\nhave been a demand-and-supply model, where functionality is added as new tedious things in\n`opencv-python` are found. Do not hesitate to file an issue, requesting new functionality or \nenhancement proposals! \n\n## Installation\nGetting started is easy, using pip or pipenv! \n```bash\npip(env) install opencv-wrapper\n```\nThis also installs the dependencies `opencv-python` and `numpy`, if not already present.\n\n## Examples\n### Reading videos\nThis code speaks for itself.\n\nVanilla OpenCV:\n```python\nimport cv2 as cv\nvideo = cv.VideoCapture(\"path/to/file\")\nif not video.isOpened():\n    raise ValueError(\"Could not open video\")\n\nwhile True:\n    ok, frame = video.read()\n    if not ok:\n        break\n    cv.imshow(\"Frame\", frame)\n    if cv.waitKey(0) & 0xFF == ord('q'):\n        break \nvideo.release()\n``` \n\nopencv_wrapper:\n```python\nimport cv2 as cv\nimport opencv_wrapper as cvw\nwith cvw.load_video(\"path/to/file\") as video:\n   for frame in cvw.read_frames(video, start, stop, step):\n       cv.imshow(\"Frame\", frame)\n       if cvw.wait_key(0) == ord('q'):\n            break \n```\n\n### Rotate A Color Wheel\nSay we have the following color wheel image, which we want to rotate.\n\n![alt text](https://raw.githubusercontent.com/anbergem/opencv_wrapper/master/images/color_wheel.png)\n\nWe of course want to rotate it at it's center, which is not in the center\nof the image. A possible solution using OpenCV would be \n\n```python\nimport cv2 as cv\nimport random\n\nimg = cv.imread(\"resources/color_wheel_invert.png\")\ngray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)\n_, otsu = cv.threshold(gray, 250, 255, cv.THRESH_BINARY_INV)\n_, contours, _ = cv.findContours(otsu, cv.RETR_EXTERNAL, cv.CHAIN_APPROX_SIMPLE)\ncontour = contours[0]\nrect = cv.boundingRect(contour)  # Gives a tuple (x, y, w, h)\nx, y, w, h = rect\n\ncolor = [random.randint(0, 255) for _ in range(3)]\n\ndegrees = 60\ncenter = (x + w / 2), (y + h / 2)\nrotation_matrix = cv.getRotationMatrix2D(center, degrees, 1)\nrotated_image = cv.warpAffine(img, rotation_matrix, gray.shape[::-1])\n\ncv.rectangle(rotated_image, (x, y), (x + w, y + h), color)\n\ncv.imshow(\"Image\", rotated_image)\ncv.waitKey(0)\n```\nWe first convert the image to gray scale. The color wheel in gray scale does not \ncontain any values of pure white. We can therefore threshold the image at a high\nthreshold, to segment the color wheel. \n\nWe then find contours in the image (which in this case only will be one contour), and\nfind the bounding rectangle enclosing the contour. From this rectangle we can find the center\npoint by the means of the top left corner, the height and width. We use this to create\na rotation matrix, and call the affine warp function. Lastly, we draw a rectangle around\nthe found contour. This is just for viewing pruposes.\n\nWe get the following result.\n\n![alt text](https://raw.githubusercontent.com/anbergem/opencv_wrapper/master/images/opencv.png)\n\nAlthough a perfectly fine solution, we cannot help but rotate the whole image.\nHere is a solution using opencv_wrapper.\n\nopencv_wrapper:\n```python\nimport cv2 as cv\nimport opencv_wrapper as cvw\n\nimg = cv.imread(\"resources/color_wheel_invert.png\")\ngray = cvw.bgr2gray(img)\notsu = cvw.threshold_binary(gray, 250, inverse=True)\ncontours = cvw.find_external_contours(otsu)\ncontour = contours[0]\nrect = contour.bounding_rect  # Gives a Rect object\ndegrees = 60\n\ncenter = rect.center  # Gives a Point object\ntop_left = rect.tl  # Gives a Point object\nnew_center = center - top_left \nimg[rect.slice] = cvw.rotate_image(\n    img[rect.slice], new_center, degrees, unit=cvw.AngleUnit.DEGREES\n)\ncvw.rectangle(img, rect, cvw.Color.RANDOM)\n\ncv.imshow(\"Image\", img)\ncvw.wait_key(0)\n```\nWe again follow the same approach. However, with the Contour class, we can\nsimply call the bounding rect property. This yields a Rect object, which\nhas a center property. Convenient. \n\nWhere we before were left with no (obvious) choice but to rotate the whole image,\nwe can now simply slice the image at the rectangle, only rotating the figure itself.\nFor this exact purpose, it doesn't make much difference, but it is a demonstration.\nWe find the new center from which to rotate, and simply call the rotate image function. \nWe can here choose whether to use degrees or radians. Lastly we draw a rectangle with\na random color.\n\nWe get the following result.\n\n![alt text](https://raw.githubusercontent.com/anbergem/opencv_wrapper/master/images/helper.png)\n\nNot only is this a tad less tedious to write, but we are also easily able to \nrotate only the relevant part of the circle by slicing\u00b9. The contour, rectangle\nand point objects are also an ease to work with. \n\n### Other Area of Ease\nWhile not providing examples, there are many other parts of the OpenCV \nthat become an ease to work with, when using opencv_wrapper. Areas include\n\n* Morphology \n* Image normalization\n* Color conversion\n* Thresholding\n* Image smoothing\n\n\u00b9Disclosure: The slicing is not that hard to accomplish, from `x, y, w, h`. \nWe can create it like this\n```python\nour_slice = (slice(y, y+h), slice(x, x+w))\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/anbergem/opencv_wrapper", "keywords": "OpenCV", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "opencv-wrapper", "package_url": "https://pypi.org/project/opencv-wrapper/", "platform": "", "project_url": "https://pypi.org/project/opencv-wrapper/", "project_urls": {"Homepage": "https://github.com/anbergem/opencv_wrapper"}, "release_url": "https://pypi.org/project/opencv-wrapper/0.2.3/", "requires_dist": null, "requires_python": ">=3.6", "summary": "A Python wrapper for OpenCV.", "version": "0.2.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Simple wrapper for opencv-python</h1>\n<p><a href=\"https://github.com/ambv/black\" rel=\"nofollow\"><img alt=\"Code style: black\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fbfdc7754183ecf079bc71ddeabaf88f6cbc5c00/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667\"></a>\n<a href=\"http://mypy-lang.org/\" rel=\"nofollow\"><img alt=\"Checked with mypy\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d0db8f5dcbf5f340f278004d5db3d16b4cdf33ba/687474703a2f2f7777772e6d7970792d6c616e672e6f72672f7374617469632f6d7970795f62616467652e737667\"></a>\n<a href=\"https://pypi.org/project/opencv-wrapper/\" rel=\"nofollow\"><img alt=\"Python version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ecbe38af8bb9658c521efd2b5220179bfa4d7b45/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f6f70656e63765f777261707065722e737667\"></a>\n<a href=\"https://pypi.org/project/opencv-wrapper/\" rel=\"nofollow\"><img alt=\"Pypi version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/981949fa8a6c80c554f9569cd16cb4ff0953eda0/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6f70656e63765f777261707065722e7376673f636f6c6f723d626c7565\"></a>\n<a href=\"https://pypi.org/project/opencv-wrapper/\" rel=\"nofollow\"><img alt=\"Pypi version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6a5149b2c21232514879ee6ee31a0d32ada28e21/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f616e62657267656d2f6f70656e63765f777261707065722e737667\"></a>\n<a href=\"https://github.com/Aaronepower/tokei\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e2615aa9dd28acbf11c6ff3ea6579f11cb3b6d32/68747470733a2f2f746f6b65692e72732f62312f6769746875622f616e62657267656d2f6f70656e63765f77726170706572\"></a>\n<a href=\"https://opencv-wrapper.readthedocs.io/en/latest/?badge=latest\" rel=\"nofollow\"><img alt=\"Documentation Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a243fea5781bc28a9d5a5ae609406d9299021490/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f6f70656e63762d777261707065722f62616467652f3f76657273696f6e3d6c6174657374\"></a>\n<a href=\"https://travis-ci.com/anbergem/opencv_wrapper\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d4092bc0303973944688cec757b663d2f136754d/68747470733a2f2f7472617669732d63692e636f6d2f616e62657267656d2f6f70656e63765f777261707065722e7376673f6272616e63683d6d6173746572\"></a></p>\n<p>OpenCV Wrapper is a simpler wrapper for the <code>opencv-python</code> package. As the mentioned package only gives access to OpenCV functions, in a C++ style, it can be tedious to write. There is also no support for the OpenCV classes like Rect, Point etc. OpenCV Wrapper attempts to fix that.</p>\n<p>The package is at an early state, and contributions are welcome! The contents of the package\nhave been a demand-and-supply model, where functionality is added as new tedious things in\n<code>opencv-python</code> are found. Do not hesitate to file an issue, requesting new functionality or\nenhancement proposals!</p>\n<h2>Installation</h2>\n<p>Getting started is easy, using pip or pipenv!</p>\n<pre>pip<span class=\"o\">(</span>env<span class=\"o\">)</span> install opencv-wrapper\n</pre>\n<p>This also installs the dependencies <code>opencv-python</code> and <code>numpy</code>, if not already present.</p>\n<h2>Examples</h2>\n<h3>Reading videos</h3>\n<p>This code speaks for itself.</p>\n<p>Vanilla OpenCV:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">cv2</span> <span class=\"k\">as</span> <span class=\"nn\">cv</span>\n<span class=\"n\">video</span> <span class=\"o\">=</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">VideoCapture</span><span class=\"p\">(</span><span class=\"s2\">\"path/to/file\"</span><span class=\"p\">)</span>\n<span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">video</span><span class=\"o\">.</span><span class=\"n\">isOpened</span><span class=\"p\">():</span>\n    <span class=\"k\">raise</span> <span class=\"ne\">ValueError</span><span class=\"p\">(</span><span class=\"s2\">\"Could not open video\"</span><span class=\"p\">)</span>\n\n<span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n    <span class=\"n\">ok</span><span class=\"p\">,</span> <span class=\"n\">frame</span> <span class=\"o\">=</span> <span class=\"n\">video</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">()</span>\n    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">ok</span><span class=\"p\">:</span>\n        <span class=\"k\">break</span>\n    <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">imshow</span><span class=\"p\">(</span><span class=\"s2\">\"Frame\"</span><span class=\"p\">,</span> <span class=\"n\">frame</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">waitKey</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"o\">&amp;</span> <span class=\"mh\">0xFF</span> <span class=\"o\">==</span> <span class=\"nb\">ord</span><span class=\"p\">(</span><span class=\"s1\">'q'</span><span class=\"p\">):</span>\n        <span class=\"k\">break</span> \n<span class=\"n\">video</span><span class=\"o\">.</span><span class=\"n\">release</span><span class=\"p\">()</span>\n</pre>\n<p>opencv_wrapper:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">cv2</span> <span class=\"k\">as</span> <span class=\"nn\">cv</span>\n<span class=\"kn\">import</span> <span class=\"nn\">opencv_wrapper</span> <span class=\"k\">as</span> <span class=\"nn\">cvw</span>\n<span class=\"k\">with</span> <span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">load_video</span><span class=\"p\">(</span><span class=\"s2\">\"path/to/file\"</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">video</span><span class=\"p\">:</span>\n   <span class=\"k\">for</span> <span class=\"n\">frame</span> <span class=\"ow\">in</span> <span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">read_frames</span><span class=\"p\">(</span><span class=\"n\">video</span><span class=\"p\">,</span> <span class=\"n\">start</span><span class=\"p\">,</span> <span class=\"n\">stop</span><span class=\"p\">,</span> <span class=\"n\">step</span><span class=\"p\">):</span>\n       <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">imshow</span><span class=\"p\">(</span><span class=\"s2\">\"Frame\"</span><span class=\"p\">,</span> <span class=\"n\">frame</span><span class=\"p\">)</span>\n       <span class=\"k\">if</span> <span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">wait_key</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"nb\">ord</span><span class=\"p\">(</span><span class=\"s1\">'q'</span><span class=\"p\">):</span>\n            <span class=\"k\">break</span> \n</pre>\n<h3>Rotate A Color Wheel</h3>\n<p>Say we have the following color wheel image, which we want to rotate.</p>\n<p><img alt=\"alt text\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f98b12de992619e6f75bb7cc22f2019496797f0f/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f616e62657267656d2f6f70656e63765f777261707065722f6d61737465722f696d616765732f636f6c6f725f776865656c2e706e67\"></p>\n<p>We of course want to rotate it at it's center, which is not in the center\nof the image. A possible solution using OpenCV would be</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">cv2</span> <span class=\"k\">as</span> <span class=\"nn\">cv</span>\n<span class=\"kn\">import</span> <span class=\"nn\">random</span>\n\n<span class=\"n\">img</span> <span class=\"o\">=</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">imread</span><span class=\"p\">(</span><span class=\"s2\">\"resources/color_wheel_invert.png\"</span><span class=\"p\">)</span>\n<span class=\"n\">gray</span> <span class=\"o\">=</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">cvtColor</span><span class=\"p\">(</span><span class=\"n\">img</span><span class=\"p\">,</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">COLOR_BGR2GRAY</span><span class=\"p\">)</span>\n<span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">otsu</span> <span class=\"o\">=</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">threshold</span><span class=\"p\">(</span><span class=\"n\">gray</span><span class=\"p\">,</span> <span class=\"mi\">250</span><span class=\"p\">,</span> <span class=\"mi\">255</span><span class=\"p\">,</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">THRESH_BINARY_INV</span><span class=\"p\">)</span>\n<span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">contours</span><span class=\"p\">,</span> <span class=\"n\">_</span> <span class=\"o\">=</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">findContours</span><span class=\"p\">(</span><span class=\"n\">otsu</span><span class=\"p\">,</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">RETR_EXTERNAL</span><span class=\"p\">,</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">CHAIN_APPROX_SIMPLE</span><span class=\"p\">)</span>\n<span class=\"n\">contour</span> <span class=\"o\">=</span> <span class=\"n\">contours</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"n\">rect</span> <span class=\"o\">=</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">boundingRect</span><span class=\"p\">(</span><span class=\"n\">contour</span><span class=\"p\">)</span>  <span class=\"c1\"># Gives a tuple (x, y, w, h)</span>\n<span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">w</span><span class=\"p\">,</span> <span class=\"n\">h</span> <span class=\"o\">=</span> <span class=\"n\">rect</span>\n\n<span class=\"n\">color</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">random</span><span class=\"o\">.</span><span class=\"n\">randint</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">255</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">_</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)]</span>\n\n<span class=\"n\">degrees</span> <span class=\"o\">=</span> <span class=\"mi\">60</span>\n<span class=\"n\">center</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"n\">w</span> <span class=\"o\">/</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">y</span> <span class=\"o\">+</span> <span class=\"n\">h</span> <span class=\"o\">/</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"n\">rotation_matrix</span> <span class=\"o\">=</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">getRotationMatrix2D</span><span class=\"p\">(</span><span class=\"n\">center</span><span class=\"p\">,</span> <span class=\"n\">degrees</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">rotated_image</span> <span class=\"o\">=</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">warpAffine</span><span class=\"p\">(</span><span class=\"n\">img</span><span class=\"p\">,</span> <span class=\"n\">rotation_matrix</span><span class=\"p\">,</span> <span class=\"n\">gray</span><span class=\"o\">.</span><span class=\"n\">shape</span><span class=\"p\">[::</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">])</span>\n\n<span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">rectangle</span><span class=\"p\">(</span><span class=\"n\">rotated_image</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"n\">w</span><span class=\"p\">,</span> <span class=\"n\">y</span> <span class=\"o\">+</span> <span class=\"n\">h</span><span class=\"p\">),</span> <span class=\"n\">color</span><span class=\"p\">)</span>\n\n<span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">imshow</span><span class=\"p\">(</span><span class=\"s2\">\"Image\"</span><span class=\"p\">,</span> <span class=\"n\">rotated_image</span><span class=\"p\">)</span>\n<span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">waitKey</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n</pre>\n<p>We first convert the image to gray scale. The color wheel in gray scale does not\ncontain any values of pure white. We can therefore threshold the image at a high\nthreshold, to segment the color wheel.</p>\n<p>We then find contours in the image (which in this case only will be one contour), and\nfind the bounding rectangle enclosing the contour. From this rectangle we can find the center\npoint by the means of the top left corner, the height and width. We use this to create\na rotation matrix, and call the affine warp function. Lastly, we draw a rectangle around\nthe found contour. This is just for viewing pruposes.</p>\n<p>We get the following result.</p>\n<p><img alt=\"alt text\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e8f1c8a33b0878a6164b3f20a1ad53a7ba08bbbd/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f616e62657267656d2f6f70656e63765f777261707065722f6d61737465722f696d616765732f6f70656e63762e706e67\"></p>\n<p>Although a perfectly fine solution, we cannot help but rotate the whole image.\nHere is a solution using opencv_wrapper.</p>\n<p>opencv_wrapper:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">cv2</span> <span class=\"k\">as</span> <span class=\"nn\">cv</span>\n<span class=\"kn\">import</span> <span class=\"nn\">opencv_wrapper</span> <span class=\"k\">as</span> <span class=\"nn\">cvw</span>\n\n<span class=\"n\">img</span> <span class=\"o\">=</span> <span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">imread</span><span class=\"p\">(</span><span class=\"s2\">\"resources/color_wheel_invert.png\"</span><span class=\"p\">)</span>\n<span class=\"n\">gray</span> <span class=\"o\">=</span> <span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">bgr2gray</span><span class=\"p\">(</span><span class=\"n\">img</span><span class=\"p\">)</span>\n<span class=\"n\">otsu</span> <span class=\"o\">=</span> <span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">threshold_binary</span><span class=\"p\">(</span><span class=\"n\">gray</span><span class=\"p\">,</span> <span class=\"mi\">250</span><span class=\"p\">,</span> <span class=\"n\">inverse</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"n\">contours</span> <span class=\"o\">=</span> <span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">find_external_contours</span><span class=\"p\">(</span><span class=\"n\">otsu</span><span class=\"p\">)</span>\n<span class=\"n\">contour</span> <span class=\"o\">=</span> <span class=\"n\">contours</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"n\">rect</span> <span class=\"o\">=</span> <span class=\"n\">contour</span><span class=\"o\">.</span><span class=\"n\">bounding_rect</span>  <span class=\"c1\"># Gives a Rect object</span>\n<span class=\"n\">degrees</span> <span class=\"o\">=</span> <span class=\"mi\">60</span>\n\n<span class=\"n\">center</span> <span class=\"o\">=</span> <span class=\"n\">rect</span><span class=\"o\">.</span><span class=\"n\">center</span>  <span class=\"c1\"># Gives a Point object</span>\n<span class=\"n\">top_left</span> <span class=\"o\">=</span> <span class=\"n\">rect</span><span class=\"o\">.</span><span class=\"n\">tl</span>  <span class=\"c1\"># Gives a Point object</span>\n<span class=\"n\">new_center</span> <span class=\"o\">=</span> <span class=\"n\">center</span> <span class=\"o\">-</span> <span class=\"n\">top_left</span> \n<span class=\"n\">img</span><span class=\"p\">[</span><span class=\"n\">rect</span><span class=\"o\">.</span><span class=\"n\">slice</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">rotate_image</span><span class=\"p\">(</span>\n    <span class=\"n\">img</span><span class=\"p\">[</span><span class=\"n\">rect</span><span class=\"o\">.</span><span class=\"n\">slice</span><span class=\"p\">],</span> <span class=\"n\">new_center</span><span class=\"p\">,</span> <span class=\"n\">degrees</span><span class=\"p\">,</span> <span class=\"n\">unit</span><span class=\"o\">=</span><span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">AngleUnit</span><span class=\"o\">.</span><span class=\"n\">DEGREES</span>\n<span class=\"p\">)</span>\n<span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">rectangle</span><span class=\"p\">(</span><span class=\"n\">img</span><span class=\"p\">,</span> <span class=\"n\">rect</span><span class=\"p\">,</span> <span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">Color</span><span class=\"o\">.</span><span class=\"n\">RANDOM</span><span class=\"p\">)</span>\n\n<span class=\"n\">cv</span><span class=\"o\">.</span><span class=\"n\">imshow</span><span class=\"p\">(</span><span class=\"s2\">\"Image\"</span><span class=\"p\">,</span> <span class=\"n\">img</span><span class=\"p\">)</span>\n<span class=\"n\">cvw</span><span class=\"o\">.</span><span class=\"n\">wait_key</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n</pre>\n<p>We again follow the same approach. However, with the Contour class, we can\nsimply call the bounding rect property. This yields a Rect object, which\nhas a center property. Convenient.</p>\n<p>Where we before were left with no (obvious) choice but to rotate the whole image,\nwe can now simply slice the image at the rectangle, only rotating the figure itself.\nFor this exact purpose, it doesn't make much difference, but it is a demonstration.\nWe find the new center from which to rotate, and simply call the rotate image function.\nWe can here choose whether to use degrees or radians. Lastly we draw a rectangle with\na random color.</p>\n<p>We get the following result.</p>\n<p><img alt=\"alt text\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f625d0f69a2b70f03e032894394c09069de11a3b/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f616e62657267656d2f6f70656e63765f777261707065722f6d61737465722f696d616765732f68656c7065722e706e67\"></p>\n<p>Not only is this a tad less tedious to write, but we are also easily able to\nrotate only the relevant part of the circle by slicing\u00b9. The contour, rectangle\nand point objects are also an ease to work with.</p>\n<h3>Other Area of Ease</h3>\n<p>While not providing examples, there are many other parts of the OpenCV\nthat become an ease to work with, when using opencv_wrapper. Areas include</p>\n<ul>\n<li>Morphology</li>\n<li>Image normalization</li>\n<li>Color conversion</li>\n<li>Thresholding</li>\n<li>Image smoothing</li>\n</ul>\n<p>\u00b9Disclosure: The slicing is not that hard to accomplish, from <code>x, y, w, h</code>.\nWe can create it like this</p>\n<pre><span class=\"n\">our_slice</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nb\">slice</span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"p\">,</span> <span class=\"n\">y</span><span class=\"o\">+</span><span class=\"n\">h</span><span class=\"p\">),</span> <span class=\"nb\">slice</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"o\">+</span><span class=\"n\">w</span><span class=\"p\">))</span>\n</pre>\n\n          </div>"}, "last_serial": 5691451, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "dbb1d0190f4eed6011345ed5ce056d94", "sha256": "3767891d272dbf68973abac9a8b865d7f7e61651b4242a067b4d2626f6886099"}, "downloads": -1, "filename": "opencv-wrapper-0.1.0.tar.gz", "has_sig": false, "md5_digest": "dbb1d0190f4eed6011345ed5ce056d94", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 15782, "upload_time": "2019-03-26T10:19:56", "upload_time_iso_8601": "2019-03-26T10:19:56.335540Z", "url": "https://files.pythonhosted.org/packages/52/a1/e3290501f401af8689d0300d8fd42dc87fd58e6e9758a35c3b9713c2165f/opencv-wrapper-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "378fcf928321b814471870f22a79939f", "sha256": "116ac7d3ad1ed62c46553eb1f7ac3cc3902d5cfc56e72b7e564be34d476016f5"}, "downloads": -1, "filename": "opencv-wrapper-0.1.1.tar.gz", "has_sig": false, "md5_digest": "378fcf928321b814471870f22a79939f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 16022, "upload_time": "2019-03-26T15:08:44", "upload_time_iso_8601": "2019-03-26T15:08:44.659153Z", "url": "https://files.pythonhosted.org/packages/65/23/2695ed8ebf0413be4191b383a284871b771dcd3a1f601bea0b10d166ae14/opencv-wrapper-0.1.1.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "280005777405d21fce27b1a89c58e6f2", "sha256": "977b6590a2811e35785f9ed940958e4830463a05a159ea5fec4321a8e96ebad3"}, "downloads": -1, "filename": "opencv-wrapper-0.2.0.tar.gz", "has_sig": false, "md5_digest": "280005777405d21fce27b1a89c58e6f2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 17950, "upload_time": "2019-04-05T07:23:01", "upload_time_iso_8601": "2019-04-05T07:23:01.781404Z", "url": "https://files.pythonhosted.org/packages/47/ec/71c299e0e04faea0c4e8c392b2e145727b267f1cabd72645e7acd89e8a28/opencv-wrapper-0.2.0.tar.gz", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "823195e8928aa199ac550d0ffe547dcf", "sha256": "312cc5be03fd2f300fdd8d3e76dc347c6d2f5c29094a08bc09200b35e57c87d9"}, "downloads": -1, "filename": "opencv-wrapper-0.2.1.tar.gz", "has_sig": false, "md5_digest": "823195e8928aa199ac550d0ffe547dcf", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 18149, "upload_time": "2019-04-05T11:54:55", "upload_time_iso_8601": "2019-04-05T11:54:55.964063Z", "url": "https://files.pythonhosted.org/packages/62/51/bc89309ecaf08f7d8cebeb5d85ba1c6e46bab4912de0264066fae9794bf9/opencv-wrapper-0.2.1.tar.gz", "yanked": false}], "0.2.2": [{"comment_text": "", "digests": {"md5": "3c9e5b479e8cde12cadb7fc4a298987a", "sha256": "d06d1c168fe54fa5370286828884a879b10b5651041711f52d4d554cf5101058"}, "downloads": -1, "filename": "opencv-wrapper-0.2.2.tar.gz", "has_sig": false, "md5_digest": "3c9e5b479e8cde12cadb7fc4a298987a", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 18177, "upload_time": "2019-04-29T10:45:38", "upload_time_iso_8601": "2019-04-29T10:45:38.690783Z", "url": "https://files.pythonhosted.org/packages/2c/0f/74399962fc2be87ca4a52e6c01c6aba2733e31d659f57db64e0b717e2d71/opencv-wrapper-0.2.2.tar.gz", "yanked": false}], "0.2.3": [{"comment_text": "", "digests": {"md5": "7c5378f535cbd82caa2ad65e94d6fc4d", "sha256": "37598c7f3427df3992233f0bdfb3a9aaccd23199d272a490e2373e87063632d4"}, "downloads": -1, "filename": "opencv-wrapper-0.2.3.tar.gz", "has_sig": false, "md5_digest": "7c5378f535cbd82caa2ad65e94d6fc4d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 18697, "upload_time": "2019-08-17T10:58:33", "upload_time_iso_8601": "2019-08-17T10:58:33.898909Z", "url": "https://files.pythonhosted.org/packages/a6/35/07177ec8074623831493c793643b6ec8c444fbc0d7f73a9dfdba486ce65a/opencv-wrapper-0.2.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "7c5378f535cbd82caa2ad65e94d6fc4d", "sha256": "37598c7f3427df3992233f0bdfb3a9aaccd23199d272a490e2373e87063632d4"}, "downloads": -1, "filename": "opencv-wrapper-0.2.3.tar.gz", "has_sig": false, "md5_digest": "7c5378f535cbd82caa2ad65e94d6fc4d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 18697, "upload_time": "2019-08-17T10:58:33", "upload_time_iso_8601": "2019-08-17T10:58:33.898909Z", "url": "https://files.pythonhosted.org/packages/a6/35/07177ec8074623831493c793643b6ec8c444fbc0d7f73a9dfdba486ce65a/opencv-wrapper-0.2.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:03:10 2020"}