{"info": {"author": "MrMrRobat", "author_email": "appkiller16@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Environment :: Console", "Framework :: AsyncIO", "Intended Audience :: Developers", "Intended Audience :: System Administrators", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3.7", "Topic :: Software Development :: Libraries :: Application Frameworks"], "description": "# aiopolly\n[![Python 3.7](https://img.shields.io/badge/Python%203.7-blue.svg)](https://python.org) \n[![PyPi Package Version](https://img.shields.io/pypi/v/aiopolly.svg)](https://pypi.python.org/pypi/aiopolly)\n[![Amazon Polly API](https://img.shields.io/badge/-Amazon%20Polly%20API-orange.svg?logo=amazon&labelColor=gray)](https://docs.aws.amazon.com/en_us/polly/latest/dg/what-is.html)\n\naiopolly is an asynchronous library for [Amazon Polly API](https://docs.aws.amazon.com/en_us/polly/latest/dg/API_Reference.html) which is written with [asyncio](https://docs.python.org/3/library/asyncio.html) and [aiohttp](https://github.com/aio-libs/aiohttp) and uses [pydantic](https://github.com/samuelcolvin/pydantic) models\n\n# Features\n- Asynchronous\n- Respects PEP-8 (no camelCase args and vars)\n- Provides easy way to work with SSML tags and lexicons\n- Has mapped and classified AWS API exceptions\n- Has audio convert support and built-in async opus converter\n\n# Installation\n```bash\n$ pip install aiopolly\n```\n\n# Getting started\nTo work with AWS Polly you need AWS account, IAM User and it's credentials, [here's the instructions](https://docs.aws.amazon.com/en_us/polly/latest/dg/setting-up.html) how to get it\n\nThen you can init this class using one of two methods:\n\n1) Provide your access and secret keys directly:\n    ```python\n   from aiopolly import Polly\n\n   polly = Polly(access_key='your_access_key', secret_key='your_secret_key')\n    ```\n\n\n2) Create a ~/.aws/credentials file with following data:\n    ```\n    [default]\n        aws_access_key_id = your_access_key\n        aws_secret_access_key = your_secret_key\n    ```\n    And init class without any auth params:\n    ```python\n   from aiopolly import Polly\n\n   polly = Polly()\n    ```\n\n\n# Examples\n\n## Many voices\n```python\nimport asyncio\nimport time\n\nfrom aiopolly import Polly, types\n\n\nasync def main():\n    time_start = time.time()\n    # Initializing AWS Polly client with default output_format\n    polly = Polly(output_format=types.AudioFormat.mp3)\n\n    voices = await polly.describe_voices()\n\n    text = 'Whatever you can do I can override it, got a million ways to synthesize it'\n\n    # Asynchronously synthesizing text with all available voices\n    synthesized = await voices.synthesize_speech(text, language_code=types.LanguageCode.en_US)\n\n    # Asynchronously saving each synthesized audio on disk\n    await asyncio.gather(\n        *(speech.save_on_disc(directory='examples') for speech in synthesized)\n    )\n\n    # Counting how many characters were synthesized\n    characters_synthesized = sum(speech.request_characters for speech in synthesized)\n\n    print(f'{characters_synthesized} characters are synthesized on {len(synthesized)}speech'\n          f'and saved on disc in {time.time() - time_start} seconds!')\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\n## Managing lexicons\n```python\nimport asyncio\n\nfrom aiopolly import Polly\nfrom aiopolly.types import Alphabet, AudioFormat, LanguageCode, VoiceID\nfrom aiopolly.utils.lexicon import new_lexicon, new_lexeme\n\nasync def main():\n    # Creating a new Polly instance with default output format 'mp3'\n    polly = Polly(output_format=AudioFormat.mp3)\n\n    text = 'Python is a beautiful programming language which is commonly used for web backend and ML. ' \\\n           'It also has cool style guides listed in PEP-8, and many community libraries like aiopolly or aiogram.'\n\n    # Creating new lexemes\n    python_lexemes = [\n        new_lexeme(grapheme='PEP', alias='Python Enhancement Proposals'),\n        new_lexeme(grapheme='ML', alias='Machine Learning'),\n        new_lexeme(grapheme='aiopolly', phoneme='e\u026a\u02c8a\u026ao\u028a\u02c8p\u0251li'),\n        new_lexeme(grapheme='aiogram', phoneme='e\u026a\u02c8a\u026ao\u028a\u02ccgr\u00e6m')\n    ]\n\n    # Creating a new lexicon with 'ipa' alphabet and 'en_US' language code\n    lexicon = new_lexicon(alphabet=Alphabet.ipa, lang=LanguageCode.en_US, lexemes=python_lexemes)\n\n    # Putting lexicon on Amazon server\n    lexicon_name = 'PythonML'\n    await polly.put_lexicon(lexicon_name=lexicon_name, content=lexicon)\n\n    # Synthesizing speech with lexicon we just created \n    # (we don't need to specify required param \"output_format\", as we using it by default)\n    speech = await polly.synthesize_speech(text, voice_id=VoiceID.Matthew, lexicon_names=[lexicon_name])\n\n    # Saving speech on disk with default name\n    await speech.save_on_disc()\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\n## Using SSML Text\naiopolly got built-in ssml-text factory which you can use to manage your ssml text:\n```python\nimport asyncio\n\nfrom aiopolly import Polly\nfrom aiopolly.types import AudioFormat, VoiceID, TextType\nfrom aiopolly.utils.ssml import ssml_text, prosody\nfrom aiopolly.utils.ssml.params import Volume, Pitch, Rate\n\nsuper_fast = prosody(f'''\\\nUh, sama lamaa duma lamaa you assuming I'm a human\\\nWhat I gotta do to get it through to you I'm superhuman\\\nInnovative and I'm made of rubber\\\nSo that anything you say is ricocheting off of me and it'll glue to you\\\nI'm devastating more than ever demonstrating\\\nHow to give a motherfuckin' audience a feeling like it's levitating\\\nNever fading and I know that the haters are forever waiting\\\nFor the day that they can say I fell off they'd be  celebrating\\\n'Cause I know the way to get 'em motivated\n''',\n    rate=Rate.x_fast, volume=Volume.x_loud, pitch=Pitch.high\n)\n\n\nasync def main():\n    # Creating a new Polly instance with default output format 'mp3'\n    polly = Polly(output_format=AudioFormat.mp3)\n\n    text = ssml_text(super_fast)\n\n    speech = await polly.synthesize_speech(text, voice_id=VoiceID.Matthew, text_type=TextType.ssml)\n\n    await speech.save_on_disc(directory='speech')\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\n## Using default params\nYou can init Polly client with any default params.\nThose will be used when same params in API methods remain empty.\n```python\nfrom aiopolly import Polly, types\n\npolly = Polly(\n    voice_id=types.VoiceID.Joanna,\n    output_format=types.AudioFormat.ogg_vorbis,\n    sample_rate='16000',\n    speech_mark_types=['ssml'],\n    text_type=types.TextType.ssml,\n    language_code=types.LanguageCode.en_US,\n    lexicon_names=['myLexicon', 'alsoMyLexicon'],\n    output_s3_key_prefix='s3_key_prefix',\n    output_s3_bucket_name='s3_bucket_name',\n    include_additional_language_codes=True,\n    **{'other_default_param': 'value'}\n)\n```\n\n## Using built-in OpusConverter\nFor this to work you need ffmpeg and libopus installed on your system\n\n```python\nimport asyncio\n\nfrom aiopolly import Polly\nfrom aiopolly.types import AudioFormat, TextType, VoiceID\nfrom aiopolly.utils.converter import OpusConverter\nfrom aiopolly.utils.ssml import ssml_text, pause, Strength\n\n\nasync def main():\n    # Creating instance if OpusConverter\n    converter = OpusConverter(auto_convert=True, keep_original=True)\n\n    polly = Polly(output_format=AudioFormat.mp3, converter=converter)\n\n    text = ssml_text(f'''\nsendVoice\n\nUse this method to send audio files, if you want Telegram clients to display the file as a playable voice message. \nFor this to work, your audio must be in an {pause(Strength.none)}.ogg file encoded with OPUS \n(other formats may be sent as Audio or Document)\n''')\n\n    # Synthesizing speech as usual, it will be converted automatically\n    speech = await polly.synthesize_speech(text, voice_id=VoiceID.Matthew, text_type=TextType.ssml)\n\n\n    # Saving speech on disk with default name\n    await speech.save_on_disc(directory='speech')\n    await speech.save_on_disc(directory='speech', converted=False)\n\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n```\n\n# To-Do:\n- Test Synthesis tasks (not tested yet)\n- Write tests\n- Get rid of botocore (built-in request signer needed)\n- Work on converter API?\n- More docs?\n\n\n###### Inspired by Alex Root Junior's [aiogram](https://github.com/aiogram/aiogram)\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/MrMrRobat/aiopolly\u02d9", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "aiopolly", "package_url": "https://pypi.org/project/aiopolly/", "platform": "", "project_url": "https://pypi.org/project/aiopolly/", "project_urls": {"Homepage": "https://github.com/MrMrRobat/aiopolly\u02d9"}, "release_url": "https://pypi.org/project/aiopolly/0.1.1/", "requires_dist": ["aiofiles (==0.4.0)", "aiohttp (>=3.5.4)", "botocore (>=1.12.0)", "certifi (>=2019.3.9)", "pydantic (>=0.27)"], "requires_python": "", "summary": "Asynchronous wrapper for AWS Polly API", "version": "0.1.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>aiopolly</h1>\n<p><a href=\"https://python.org\" rel=\"nofollow\"><img alt=\"Python 3.7\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/17571f47ba620a21d3d8b6cc4400372172d7def8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f507974686f6e253230332e372d626c75652e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/aiopolly\" rel=\"nofollow\"><img alt=\"PyPi Package Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/92533158fe620d26f2ba212067bbecaf8c5941ce/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f61696f706f6c6c792e737667\"></a>\n<a href=\"https://docs.aws.amazon.com/en_us/polly/latest/dg/what-is.html\" rel=\"nofollow\"><img alt=\"Amazon Polly API\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b9b580b92e80c56c301c41d0879f211b698a214e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d416d617a6f6e253230506f6c6c792532304150492d6f72616e67652e7376673f6c6f676f3d616d617a6f6e266c6162656c436f6c6f723d67726179\"></a></p>\n<p>aiopolly is an asynchronous library for <a href=\"https://docs.aws.amazon.com/en_us/polly/latest/dg/API_Reference.html\" rel=\"nofollow\">Amazon Polly API</a> which is written with <a href=\"https://docs.python.org/3/library/asyncio.html\" rel=\"nofollow\">asyncio</a> and <a href=\"https://github.com/aio-libs/aiohttp\" rel=\"nofollow\">aiohttp</a> and uses <a href=\"https://github.com/samuelcolvin/pydantic\" rel=\"nofollow\">pydantic</a> models</p>\n<h1>Features</h1>\n<ul>\n<li>Asynchronous</li>\n<li>Respects PEP-8 (no camelCase args and vars)</li>\n<li>Provides easy way to work with SSML tags and lexicons</li>\n<li>Has mapped and classified AWS API exceptions</li>\n<li>Has audio convert support and built-in async opus converter</li>\n</ul>\n<h1>Installation</h1>\n<pre>$ pip install aiopolly\n</pre>\n<h1>Getting started</h1>\n<p>To work with AWS Polly you need AWS account, IAM User and it's credentials, <a href=\"https://docs.aws.amazon.com/en_us/polly/latest/dg/setting-up.html\" rel=\"nofollow\">here's the instructions</a> how to get it</p>\n<p>Then you can init this class using one of two methods:</p>\n<ol>\n<li>\n<p>Provide your access and secret keys directly:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">aiopolly</span> <span class=\"kn\">import</span> <span class=\"n\">Polly</span>\n\n<span class=\"n\">polly</span> <span class=\"o\">=</span> <span class=\"n\">Polly</span><span class=\"p\">(</span><span class=\"n\">access_key</span><span class=\"o\">=</span><span class=\"s1\">'your_access_key'</span><span class=\"p\">,</span> <span class=\"n\">secret_key</span><span class=\"o\">=</span><span class=\"s1\">'your_secret_key'</span><span class=\"p\">)</span>\n</pre>\n</li>\n<li>\n<p>Create a ~/.aws/credentials file with following data:</p>\n<pre><code>[default]\n    aws_access_key_id = your_access_key\n    aws_secret_access_key = your_secret_key\n</code></pre>\n<p>And init class without any auth params:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">aiopolly</span> <span class=\"kn\">import</span> <span class=\"n\">Polly</span>\n\n<span class=\"n\">polly</span> <span class=\"o\">=</span> <span class=\"n\">Polly</span><span class=\"p\">()</span>\n</pre>\n</li>\n</ol>\n<h1>Examples</h1>\n<h2>Many voices</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n<span class=\"kn\">import</span> <span class=\"nn\">time</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly</span> <span class=\"kn\">import</span> <span class=\"n\">Polly</span><span class=\"p\">,</span> <span class=\"n\">types</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"n\">time_start</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span>\n    <span class=\"c1\"># Initializing AWS Polly client with default output_format</span>\n    <span class=\"n\">polly</span> <span class=\"o\">=</span> <span class=\"n\">Polly</span><span class=\"p\">(</span><span class=\"n\">output_format</span><span class=\"o\">=</span><span class=\"n\">types</span><span class=\"o\">.</span><span class=\"n\">AudioFormat</span><span class=\"o\">.</span><span class=\"n\">mp3</span><span class=\"p\">)</span>\n\n    <span class=\"n\">voices</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">polly</span><span class=\"o\">.</span><span class=\"n\">describe_voices</span><span class=\"p\">()</span>\n\n    <span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s1\">'Whatever you can do I can override it, got a million ways to synthesize it'</span>\n\n    <span class=\"c1\"># Asynchronously synthesizing text with all available voices</span>\n    <span class=\"n\">synthesized</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">voices</span><span class=\"o\">.</span><span class=\"n\">synthesize_speech</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">,</span> <span class=\"n\">language_code</span><span class=\"o\">=</span><span class=\"n\">types</span><span class=\"o\">.</span><span class=\"n\">LanguageCode</span><span class=\"o\">.</span><span class=\"n\">en_US</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># Asynchronously saving each synthesized audio on disk</span>\n    <span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">gather</span><span class=\"p\">(</span>\n        <span class=\"o\">*</span><span class=\"p\">(</span><span class=\"n\">speech</span><span class=\"o\">.</span><span class=\"n\">save_on_disc</span><span class=\"p\">(</span><span class=\"n\">directory</span><span class=\"o\">=</span><span class=\"s1\">'examples'</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">speech</span> <span class=\"ow\">in</span> <span class=\"n\">synthesized</span><span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"c1\"># Counting how many characters were synthesized</span>\n    <span class=\"n\">characters_synthesized</span> <span class=\"o\">=</span> <span class=\"nb\">sum</span><span class=\"p\">(</span><span class=\"n\">speech</span><span class=\"o\">.</span><span class=\"n\">request_characters</span> <span class=\"k\">for</span> <span class=\"n\">speech</span> <span class=\"ow\">in</span> <span class=\"n\">synthesized</span><span class=\"p\">)</span>\n\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">'</span><span class=\"si\">{</span><span class=\"n\">characters_synthesized</span><span class=\"si\">}</span><span class=\"s1\"> characters are synthesized on </span><span class=\"si\">{</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">synthesized</span><span class=\"p\">)</span><span class=\"si\">}</span><span class=\"s1\">speech'</span>\n          <span class=\"sa\">f</span><span class=\"s1\">'and saved on disc in </span><span class=\"si\">{</span><span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"n\">time_start</span><span class=\"si\">}</span><span class=\"s1\"> seconds!'</span><span class=\"p\">)</span>\n\n<span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">get_event_loop</span><span class=\"p\">()</span>\n<span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">run_until_complete</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n</pre>\n<h2>Managing lexicons</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly</span> <span class=\"kn\">import</span> <span class=\"n\">Polly</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly.types</span> <span class=\"kn\">import</span> <span class=\"n\">Alphabet</span><span class=\"p\">,</span> <span class=\"n\">AudioFormat</span><span class=\"p\">,</span> <span class=\"n\">LanguageCode</span><span class=\"p\">,</span> <span class=\"n\">VoiceID</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly.utils.lexicon</span> <span class=\"kn\">import</span> <span class=\"n\">new_lexicon</span><span class=\"p\">,</span> <span class=\"n\">new_lexeme</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"c1\"># Creating a new Polly instance with default output format 'mp3'</span>\n    <span class=\"n\">polly</span> <span class=\"o\">=</span> <span class=\"n\">Polly</span><span class=\"p\">(</span><span class=\"n\">output_format</span><span class=\"o\">=</span><span class=\"n\">AudioFormat</span><span class=\"o\">.</span><span class=\"n\">mp3</span><span class=\"p\">)</span>\n\n    <span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s1\">'Python is a beautiful programming language which is commonly used for web backend and ML. '</span> \\\n           <span class=\"s1\">'It also has cool style guides listed in PEP-8, and many community libraries like aiopolly or aiogram.'</span>\n\n    <span class=\"c1\"># Creating new lexemes</span>\n    <span class=\"n\">python_lexemes</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n        <span class=\"n\">new_lexeme</span><span class=\"p\">(</span><span class=\"n\">grapheme</span><span class=\"o\">=</span><span class=\"s1\">'PEP'</span><span class=\"p\">,</span> <span class=\"n\">alias</span><span class=\"o\">=</span><span class=\"s1\">'Python Enhancement Proposals'</span><span class=\"p\">),</span>\n        <span class=\"n\">new_lexeme</span><span class=\"p\">(</span><span class=\"n\">grapheme</span><span class=\"o\">=</span><span class=\"s1\">'ML'</span><span class=\"p\">,</span> <span class=\"n\">alias</span><span class=\"o\">=</span><span class=\"s1\">'Machine Learning'</span><span class=\"p\">),</span>\n        <span class=\"n\">new_lexeme</span><span class=\"p\">(</span><span class=\"n\">grapheme</span><span class=\"o\">=</span><span class=\"s1\">'aiopolly'</span><span class=\"p\">,</span> <span class=\"n\">phoneme</span><span class=\"o\">=</span><span class=\"s1\">'e\u026a\u02c8a\u026ao\u028a\u02c8p\u0251li'</span><span class=\"p\">),</span>\n        <span class=\"n\">new_lexeme</span><span class=\"p\">(</span><span class=\"n\">grapheme</span><span class=\"o\">=</span><span class=\"s1\">'aiogram'</span><span class=\"p\">,</span> <span class=\"n\">phoneme</span><span class=\"o\">=</span><span class=\"s1\">'e\u026a\u02c8a\u026ao\u028a\u02ccgr\u00e6m'</span><span class=\"p\">)</span>\n    <span class=\"p\">]</span>\n\n    <span class=\"c1\"># Creating a new lexicon with 'ipa' alphabet and 'en_US' language code</span>\n    <span class=\"n\">lexicon</span> <span class=\"o\">=</span> <span class=\"n\">new_lexicon</span><span class=\"p\">(</span><span class=\"n\">alphabet</span><span class=\"o\">=</span><span class=\"n\">Alphabet</span><span class=\"o\">.</span><span class=\"n\">ipa</span><span class=\"p\">,</span> <span class=\"n\">lang</span><span class=\"o\">=</span><span class=\"n\">LanguageCode</span><span class=\"o\">.</span><span class=\"n\">en_US</span><span class=\"p\">,</span> <span class=\"n\">lexemes</span><span class=\"o\">=</span><span class=\"n\">python_lexemes</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># Putting lexicon on Amazon server</span>\n    <span class=\"n\">lexicon_name</span> <span class=\"o\">=</span> <span class=\"s1\">'PythonML'</span>\n    <span class=\"k\">await</span> <span class=\"n\">polly</span><span class=\"o\">.</span><span class=\"n\">put_lexicon</span><span class=\"p\">(</span><span class=\"n\">lexicon_name</span><span class=\"o\">=</span><span class=\"n\">lexicon_name</span><span class=\"p\">,</span> <span class=\"n\">content</span><span class=\"o\">=</span><span class=\"n\">lexicon</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># Synthesizing speech with lexicon we just created </span>\n    <span class=\"c1\"># (we don't need to specify required param \"output_format\", as we using it by default)</span>\n    <span class=\"n\">speech</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">polly</span><span class=\"o\">.</span><span class=\"n\">synthesize_speech</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">,</span> <span class=\"n\">voice_id</span><span class=\"o\">=</span><span class=\"n\">VoiceID</span><span class=\"o\">.</span><span class=\"n\">Matthew</span><span class=\"p\">,</span> <span class=\"n\">lexicon_names</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">lexicon_name</span><span class=\"p\">])</span>\n\n    <span class=\"c1\"># Saving speech on disk with default name</span>\n    <span class=\"k\">await</span> <span class=\"n\">speech</span><span class=\"o\">.</span><span class=\"n\">save_on_disc</span><span class=\"p\">()</span>\n\n<span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">get_event_loop</span><span class=\"p\">()</span>\n<span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">run_until_complete</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n</pre>\n<h2>Using SSML Text</h2>\n<p>aiopolly got built-in ssml-text factory which you can use to manage your ssml text:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly</span> <span class=\"kn\">import</span> <span class=\"n\">Polly</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly.types</span> <span class=\"kn\">import</span> <span class=\"n\">AudioFormat</span><span class=\"p\">,</span> <span class=\"n\">VoiceID</span><span class=\"p\">,</span> <span class=\"n\">TextType</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly.utils.ssml</span> <span class=\"kn\">import</span> <span class=\"n\">ssml_text</span><span class=\"p\">,</span> <span class=\"n\">prosody</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly.utils.ssml.params</span> <span class=\"kn\">import</span> <span class=\"n\">Volume</span><span class=\"p\">,</span> <span class=\"n\">Pitch</span><span class=\"p\">,</span> <span class=\"n\">Rate</span>\n\n<span class=\"n\">super_fast</span> <span class=\"o\">=</span> <span class=\"n\">prosody</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">'''</span><span class=\"se\">\\</span>\n<span class=\"s1\">Uh, sama lamaa duma lamaa you assuming I'm a human</span><span class=\"se\">\\</span>\n<span class=\"s1\">What I gotta do to get it through to you I'm superhuman</span><span class=\"se\">\\</span>\n<span class=\"s1\">Innovative and I'm made of rubber</span><span class=\"se\">\\</span>\n<span class=\"s1\">So that anything you say is ricocheting off of me and it'll glue to you</span><span class=\"se\">\\</span>\n<span class=\"s1\">I'm devastating more than ever demonstrating</span><span class=\"se\">\\</span>\n<span class=\"s1\">How to give a motherfuckin' audience a feeling like it's levitating</span><span class=\"se\">\\</span>\n<span class=\"s1\">Never fading and I know that the haters are forever waiting</span><span class=\"se\">\\</span>\n<span class=\"s1\">For the day that they can say I fell off they'd be  celebrating</span><span class=\"se\">\\</span>\n<span class=\"s1\">'Cause I know the way to get 'em motivated</span>\n<span class=\"s1\">'''</span><span class=\"p\">,</span>\n    <span class=\"n\">rate</span><span class=\"o\">=</span><span class=\"n\">Rate</span><span class=\"o\">.</span><span class=\"n\">x_fast</span><span class=\"p\">,</span> <span class=\"n\">volume</span><span class=\"o\">=</span><span class=\"n\">Volume</span><span class=\"o\">.</span><span class=\"n\">x_loud</span><span class=\"p\">,</span> <span class=\"n\">pitch</span><span class=\"o\">=</span><span class=\"n\">Pitch</span><span class=\"o\">.</span><span class=\"n\">high</span>\n<span class=\"p\">)</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"c1\"># Creating a new Polly instance with default output format 'mp3'</span>\n    <span class=\"n\">polly</span> <span class=\"o\">=</span> <span class=\"n\">Polly</span><span class=\"p\">(</span><span class=\"n\">output_format</span><span class=\"o\">=</span><span class=\"n\">AudioFormat</span><span class=\"o\">.</span><span class=\"n\">mp3</span><span class=\"p\">)</span>\n\n    <span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"n\">ssml_text</span><span class=\"p\">(</span><span class=\"n\">super_fast</span><span class=\"p\">)</span>\n\n    <span class=\"n\">speech</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">polly</span><span class=\"o\">.</span><span class=\"n\">synthesize_speech</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">,</span> <span class=\"n\">voice_id</span><span class=\"o\">=</span><span class=\"n\">VoiceID</span><span class=\"o\">.</span><span class=\"n\">Matthew</span><span class=\"p\">,</span> <span class=\"n\">text_type</span><span class=\"o\">=</span><span class=\"n\">TextType</span><span class=\"o\">.</span><span class=\"n\">ssml</span><span class=\"p\">)</span>\n\n    <span class=\"k\">await</span> <span class=\"n\">speech</span><span class=\"o\">.</span><span class=\"n\">save_on_disc</span><span class=\"p\">(</span><span class=\"n\">directory</span><span class=\"o\">=</span><span class=\"s1\">'speech'</span><span class=\"p\">)</span>\n\n<span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">get_event_loop</span><span class=\"p\">()</span>\n<span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">run_until_complete</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n</pre>\n<h2>Using default params</h2>\n<p>You can init Polly client with any default params.\nThose will be used when same params in API methods remain empty.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">aiopolly</span> <span class=\"kn\">import</span> <span class=\"n\">Polly</span><span class=\"p\">,</span> <span class=\"n\">types</span>\n\n<span class=\"n\">polly</span> <span class=\"o\">=</span> <span class=\"n\">Polly</span><span class=\"p\">(</span>\n    <span class=\"n\">voice_id</span><span class=\"o\">=</span><span class=\"n\">types</span><span class=\"o\">.</span><span class=\"n\">VoiceID</span><span class=\"o\">.</span><span class=\"n\">Joanna</span><span class=\"p\">,</span>\n    <span class=\"n\">output_format</span><span class=\"o\">=</span><span class=\"n\">types</span><span class=\"o\">.</span><span class=\"n\">AudioFormat</span><span class=\"o\">.</span><span class=\"n\">ogg_vorbis</span><span class=\"p\">,</span>\n    <span class=\"n\">sample_rate</span><span class=\"o\">=</span><span class=\"s1\">'16000'</span><span class=\"p\">,</span>\n    <span class=\"n\">speech_mark_types</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'ssml'</span><span class=\"p\">],</span>\n    <span class=\"n\">text_type</span><span class=\"o\">=</span><span class=\"n\">types</span><span class=\"o\">.</span><span class=\"n\">TextType</span><span class=\"o\">.</span><span class=\"n\">ssml</span><span class=\"p\">,</span>\n    <span class=\"n\">language_code</span><span class=\"o\">=</span><span class=\"n\">types</span><span class=\"o\">.</span><span class=\"n\">LanguageCode</span><span class=\"o\">.</span><span class=\"n\">en_US</span><span class=\"p\">,</span>\n    <span class=\"n\">lexicon_names</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'myLexicon'</span><span class=\"p\">,</span> <span class=\"s1\">'alsoMyLexicon'</span><span class=\"p\">],</span>\n    <span class=\"n\">output_s3_key_prefix</span><span class=\"o\">=</span><span class=\"s1\">'s3_key_prefix'</span><span class=\"p\">,</span>\n    <span class=\"n\">output_s3_bucket_name</span><span class=\"o\">=</span><span class=\"s1\">'s3_bucket_name'</span><span class=\"p\">,</span>\n    <span class=\"n\">include_additional_language_codes</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n    <span class=\"o\">**</span><span class=\"p\">{</span><span class=\"s1\">'other_default_param'</span><span class=\"p\">:</span> <span class=\"s1\">'value'</span><span class=\"p\">}</span>\n<span class=\"p\">)</span>\n</pre>\n<h2>Using built-in OpusConverter</h2>\n<p>For this to work you need ffmpeg and libopus installed on your system</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">asyncio</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly</span> <span class=\"kn\">import</span> <span class=\"n\">Polly</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly.types</span> <span class=\"kn\">import</span> <span class=\"n\">AudioFormat</span><span class=\"p\">,</span> <span class=\"n\">TextType</span><span class=\"p\">,</span> <span class=\"n\">VoiceID</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly.utils.converter</span> <span class=\"kn\">import</span> <span class=\"n\">OpusConverter</span>\n<span class=\"kn\">from</span> <span class=\"nn\">aiopolly.utils.ssml</span> <span class=\"kn\">import</span> <span class=\"n\">ssml_text</span><span class=\"p\">,</span> <span class=\"n\">pause</span><span class=\"p\">,</span> <span class=\"n\">Strength</span>\n\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"c1\"># Creating instance if OpusConverter</span>\n    <span class=\"n\">converter</span> <span class=\"o\">=</span> <span class=\"n\">OpusConverter</span><span class=\"p\">(</span><span class=\"n\">auto_convert</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">keep_original</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n    <span class=\"n\">polly</span> <span class=\"o\">=</span> <span class=\"n\">Polly</span><span class=\"p\">(</span><span class=\"n\">output_format</span><span class=\"o\">=</span><span class=\"n\">AudioFormat</span><span class=\"o\">.</span><span class=\"n\">mp3</span><span class=\"p\">,</span> <span class=\"n\">converter</span><span class=\"o\">=</span><span class=\"n\">converter</span><span class=\"p\">)</span>\n\n    <span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"n\">ssml_text</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">'''</span>\n<span class=\"s1\">sendVoice</span>\n\n<span class=\"s1\">Use this method to send audio files, if you want Telegram clients to display the file as a playable voice message. </span>\n<span class=\"s1\">For this to work, your audio must be in an </span><span class=\"si\">{</span><span class=\"n\">pause</span><span class=\"p\">(</span><span class=\"n\">Strength</span><span class=\"o\">.</span><span class=\"n\">none</span><span class=\"p\">)</span><span class=\"si\">}</span><span class=\"s1\">.ogg file encoded with OPUS </span>\n<span class=\"s1\">(other formats may be sent as Audio or Document)</span>\n<span class=\"s1\">'''</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># Synthesizing speech as usual, it will be converted automatically</span>\n    <span class=\"n\">speech</span> <span class=\"o\">=</span> <span class=\"k\">await</span> <span class=\"n\">polly</span><span class=\"o\">.</span><span class=\"n\">synthesize_speech</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">,</span> <span class=\"n\">voice_id</span><span class=\"o\">=</span><span class=\"n\">VoiceID</span><span class=\"o\">.</span><span class=\"n\">Matthew</span><span class=\"p\">,</span> <span class=\"n\">text_type</span><span class=\"o\">=</span><span class=\"n\">TextType</span><span class=\"o\">.</span><span class=\"n\">ssml</span><span class=\"p\">)</span>\n\n\n    <span class=\"c1\"># Saving speech on disk with default name</span>\n    <span class=\"k\">await</span> <span class=\"n\">speech</span><span class=\"o\">.</span><span class=\"n\">save_on_disc</span><span class=\"p\">(</span><span class=\"n\">directory</span><span class=\"o\">=</span><span class=\"s1\">'speech'</span><span class=\"p\">)</span>\n    <span class=\"k\">await</span> <span class=\"n\">speech</span><span class=\"o\">.</span><span class=\"n\">save_on_disc</span><span class=\"p\">(</span><span class=\"n\">directory</span><span class=\"o\">=</span><span class=\"s1\">'speech'</span><span class=\"p\">,</span> <span class=\"n\">converted</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">loop</span> <span class=\"o\">=</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">get_event_loop</span><span class=\"p\">()</span>\n<span class=\"n\">loop</span><span class=\"o\">.</span><span class=\"n\">run_until_complete</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n</pre>\n<h1>To-Do:</h1>\n<ul>\n<li>Test Synthesis tasks (not tested yet)</li>\n<li>Write tests</li>\n<li>Get rid of botocore (built-in request signer needed)</li>\n<li>Work on converter API?</li>\n<li>More docs?</li>\n</ul>\n<h6>Inspired by Alex Root Junior's <a href=\"https://github.com/aiogram/aiogram\" rel=\"nofollow\">aiogram</a></h6>\n\n          </div>"}, "last_serial": 5393517, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "13e22564677a21d5a551206e76e7b38a", "sha256": "bd56149ad8d2a809cc3e0530536923f3058741ff799933589c4818f7ac4fbd9f"}, "downloads": -1, "filename": "aiopolly-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "13e22564677a21d5a551206e76e7b38a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 35313, "upload_time": "2019-06-12T15:07:49", "upload_time_iso_8601": "2019-06-12T15:07:49.981692Z", "url": "https://files.pythonhosted.org/packages/5a/e8/7979de87633fbb9ac6d994fda910ebbaa80e115ecd7d2b89e41b8aa7f0eb/aiopolly-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "060b8bb5f7f3125a263cf72757dfc712", "sha256": "5ad7697268c6b0cdcfb84124bcae07c34ca2b6eda0228ee9d3f1994341291be2"}, "downloads": -1, "filename": "aiopolly-0.1.0.tar.gz", "has_sig": false, "md5_digest": "060b8bb5f7f3125a263cf72757dfc712", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 29171, "upload_time": "2019-06-12T15:07:52", "upload_time_iso_8601": "2019-06-12T15:07:52.742133Z", "url": "https://files.pythonhosted.org/packages/df/d7/8c3c9ecf3c9f6fcaec49be8f749093bc9dde691320c920b8a8f27aabdbd3/aiopolly-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "88aa48e3aa1afe89c9432ae5dfcf592c", "sha256": "d82338cb9acf2d70de9836be28fc188cf19d42711d19c10b439704770db7cec5"}, "downloads": -1, "filename": "aiopolly-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "88aa48e3aa1afe89c9432ae5dfcf592c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 34843, "upload_time": "2019-06-12T23:35:05", "upload_time_iso_8601": "2019-06-12T23:35:05.363660Z", "url": "https://files.pythonhosted.org/packages/6f/ec/2ca800582a7c34ba78dbdc1d8ea60fd3de4a4985a2fdd793d3707ead56af/aiopolly-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1455daf68432a884894059c6d8b80439", "sha256": "f1d2cc3bdfd9db5b15576fe795477393da548e1d61973a82b88e512f02358187"}, "downloads": -1, "filename": "aiopolly-0.1.1.tar.gz", "has_sig": false, "md5_digest": "1455daf68432a884894059c6d8b80439", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 30156, "upload_time": "2019-06-12T23:35:07", "upload_time_iso_8601": "2019-06-12T23:35:07.389779Z", "url": "https://files.pythonhosted.org/packages/5c/1c/4d076afec85a8c790eafdb2d9b5a8060b85ad316ea9829f6ed827ad0192d/aiopolly-0.1.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "88aa48e3aa1afe89c9432ae5dfcf592c", "sha256": "d82338cb9acf2d70de9836be28fc188cf19d42711d19c10b439704770db7cec5"}, "downloads": -1, "filename": "aiopolly-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "88aa48e3aa1afe89c9432ae5dfcf592c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 34843, "upload_time": "2019-06-12T23:35:05", "upload_time_iso_8601": "2019-06-12T23:35:05.363660Z", "url": "https://files.pythonhosted.org/packages/6f/ec/2ca800582a7c34ba78dbdc1d8ea60fd3de4a4985a2fdd793d3707ead56af/aiopolly-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1455daf68432a884894059c6d8b80439", "sha256": "f1d2cc3bdfd9db5b15576fe795477393da548e1d61973a82b88e512f02358187"}, "downloads": -1, "filename": "aiopolly-0.1.1.tar.gz", "has_sig": false, "md5_digest": "1455daf68432a884894059c6d8b80439", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 30156, "upload_time": "2019-06-12T23:35:07", "upload_time_iso_8601": "2019-06-12T23:35:07.389779Z", "url": "https://files.pythonhosted.org/packages/5c/1c/4d076afec85a8c790eafdb2d9b5a8060b85ad316ea9829f6ed827ad0192d/aiopolly-0.1.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:20:56 2020"}