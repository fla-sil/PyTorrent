{"info": {"author": "abidibo", "author_email": "abidibo@gmail.com", "bugtrack_url": null, "classifiers": ["Environment :: Web Environment", "Framework :: Django", "Intended Audience :: Developers", "Intended Audience :: System Administrators", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2.5", "Programming Language :: Python :: 2.6", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.2", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.5", "Topic :: Software Development", "Topic :: Software Development :: User Interfaces"], "description": "# django-baton\n\n[![Downloads](https://pepy.tech/badge/django-baton)](https://pepy.tech/project/django-baton)\n\nA cool, modern and responsive django admin application, based on bootstrap 4.3.1\n\nDocumentation: [readthedocs](http://django-baton.readthedocs.io/)\n\n![Screenshot](screenshots/index-analytics-lg.jpg)\n\n## Table of contents\n\n- [Features](#features)\n- [Installation](#installation)\n- [Configuration](#configuration)\n    - [Menu](#configuration-menu)\n    - [Analytics](#configuration-analytics)\n- [Signals](#signals)\n- [Text Input Filters](#text-input-filters)\n- [Form Tabs](#form-tabs)\n- [Customization](#customization)\n- [Contributing](#contributing)\n- [Screenshots](#screenshots)\n\n## <a name=\"features\"></a>Features\n\nTested with django 1.10.5, 1.11.1, 2.0, 2.1 and 2.2\n\nThis application was written with one concept in mind: overwrite as few django templates as possible.\nEverything is styled through css, and when an help is needed, js is armed.\n\n- Based on bootstrap 4.3.1 and FontAwesome Free 5.8.1\n- Fully responsive\n- Custom and flexible sidebar menu\n- Text input filters facility\n- Form tabs out of the box\n- Lazy load of current uploaded images\n- Optional index page filled with google analytics widgets\n- Customization available recompiling the js app provided\n- it translations provided\n\nIt requires the following python packages in order to manage the google analytics index:\n\n- google-api-python-client\n- oauth2client==1.5.2\n\nAt the moment __baton__ defines only 3 custom templates:\n\n- `admin/base_site.html`, needed in order to inject the js application (which includes also css and graphics, compiled with [webpack](https://webpack.github.io/));\n- `admin/delete_confirmation.html`, needed because of a bug (IMO) in the template, in particular the `extra_head` block does not contain the parent content, hence it must be overridden (FIXED IN django 1.11, remains until baton will support django 1.10);\n- `admin/delete_selected_confirmation.html`, same as above.\n\nBaton is based on the following frontend technologies:\n\n- bootstrap 4.3.1\n- FontAwesome 5.8.1 (solid and brands)\n\nFlexbox is used here and there to accomplish responsiveness. jQuery is used for DOM manipulations.\n\nAll js, fonts and css are compiled, and produce a single js file which is included in the base_site template.\n\nA custom menu is provided, the menu is rendered through js, and data are fetched in json format through ajax request.\n\n## <a name=\"installation\"></a>Installation\n\nInstall the last stable release\n\n    pip install django-baton\n\nor clone the repo inside your project\n\n    git clone https://github.com/otto-torino/django-baton.git\n\nAdd `baton` and `baton.autodiscover` to your `INSTALLED_APPS`:\n\n    INSTALLED_APPS = (\n        # ...\n        'baton',\n        'django.contrib.admin',\n        # ...\n        'baton.autodiscover',\n    )\n\nReplace django.contrib.admin in your project urls, and add baton urls:\n\n    # from django.contrib import admin\n    from baton.autodiscover import admin\n\n    urlpatterns = [\n        url(r'^admin/', include(admin.site.urls)),\n        # ...\n        url(r'^baton/', include('baton.urls')),\n    ]\n\n### Django 2\n\nThe first two steps are the same, but in your project urls you should now use path:\n\n    from baton.autodiscover import admin\n    from django.urls import path, include\n\n    urlpatterns = [\n        path('admin/', admin.site.urls),\n        path('baton/', include('baton.urls')),\n\n    ]\n\nIf you get a \"__No crypto library available__\" when using the google analytics index, then install this package:\n\n    $ pip install PyOpenSSL\n\n### Why two installed apps?\n\nWell, the first `baton` has to be placed before the `django.contrib.admin` app, because it overrides 3 templates and resets all css.\nThe `baton.autodiscover` entry is needed as the last installed app in order to register all applications for the admin.\nI decided to create a custom `AdminSite` class, in order to allow the customization of some variables the django way (`site_header`, `index_title`, ...). I think this is a good approach,\nbetter than customizing this vars overwriting the orignal templates. The problem is that when creating a custom AdminSite, you should register manually all the apps. I didn't like\nthis, so I wrote this `autodiscover` module, which automatically registers all the apps already registered with the django default AdminSite. In order to do this, all the apps must be already registered, so it comes as the last installed app.\n\n## <a name=\"configuration\"></a>Configuration\n\nThe configuration dictionary must be defined inside your settings:\n\n    BATON = {\n        'SITE_HEADER': 'Baton',\n        'SITE_TITLE': 'Baton',\n        'INDEX_TITLE': 'Site administration',\n        'SUPPORT_HREF': 'https://github.com/otto-torino/django-baton/issues',\n        'COPYRIGHT': 'copyright \u00c2\u00a9 2017 <a href=\"https://www.otto.to.it\">Otto srl</a>', # noqa\n        'POWERED_BY': '<a href=\"https://www.otto.to.it\">Otto srl</a>',\n        'CONFIRM_UNSAVED_CHANGES': True,\n        'SHOW_MULTIPART_UPLOADING': True,\n        'ENABLE_IMAGES_PREVIEW': True,\n        'MENU': (\n            { 'type': 'title', 'label': 'main', 'apps': ('auth', ) },\n            {\n                'type': 'app',\n                'name': 'auth',\n                'label': 'Authentication',\n                'icon': 'fa fa-lock',\n                'models': (\n                    {\n                        'name': 'user',\n                        'label': 'Users'\n                    },\n                    {\n                        'name': 'group',\n                        'label': 'Groups'\n                    },\n                )\n            },\n            { 'type': 'title', 'label': 'Contents', 'apps': ('flatpages', ) },\n            { 'type': 'model', 'label': 'Pages', 'name': 'flatpage', 'app': 'flatpages' },\n            { 'type': 'free', 'label': 'Custom Link', 'url': 'http://www.google.it', 'perms': ('flatpages.add_flatpage', 'auth.change_user') },\n            { 'type': 'free', 'label': 'My parent voice', 'children': [\n                { 'type': 'model', 'label': 'A Model', 'name': 'mymodelname', 'app': 'myapp' },\n                { 'type': 'free', 'label': 'Another custom link', 'url': 'http://www.google.it' },\n            ] },\n        ),\n        'ANALYTICS': {\n            'CREDENTIALS': os.path.join(BASE_DIR, 'credentials.json'),\n            'VIEW_ID': '12345678',\n        }\n    }\n\n- `SITE_HEADER`, `COPYRIGHT` and `POWERED_BY` are marked as safe, so you can include also img tags and links, for example.\n- `SUPPORT_HREF` is the content of an href attribute, then you can use also a `mailto:info@blabla.com`\n- `CONFIRM_UNSAVED_CHANGES`: if set to `True` a confirmation modal appears when leaving a change form or add form with unsaved changes.\nThe check of a dirty form relies on the jQuery serialize method, so it's not 100% safe. Disabled inputs, particular widgets (ckeditor) can not be detected.\nDefault value is `True`.\n- `SHOW_MULTIPART_UPLOADING`: if set to `True` an overlay with a spinner appears when submitting a `multipart/form-data` form.\n- `ENABLE_IMAGES_PREVIEW`: if set to `True` a preview is displayed above all input file fields which contain images. You can control how the preview is displayed overriding the class `.baton-image-preview`. By default previews are 100px height and with a box shadow on over event.\n\nLet's see the `MENU` and `ANALYTICS` configurations in detail.\n\n### <a name=\"configuration-menu\"></a>MENU\n\nCurrently four kind of voices are supported: _title_, _app_, _model_ and _free_.\n\nTitle and free voices can have children, children follow the following rules:\n\n- children voices children are ignored (do not place an app voice as child)\n\nFirst of all, if you don't define a MENU key in the configuration dictionary, the default MENU is shown.\nIf you define a MENU key, then the custom menu is built and shown.\n\n#### Title\n\nLike __MAIN__ and __CONTENTS__ in the screenshot, it represents a menu section. You should set a label and optionally an apps or perms key, used for visualization purposes.\n\nIf the title voice should act as a section title for a group of apps, you'd want to specify these apps, because if the user can't operate over them, then the voice is not shown.\nAt the same time you can define some perms (OR condition), something like:\n\n    { 'type': 'title', 'label': 'main', 'perms': ('auth.add_user', ) },\n\n#### App\n\nYou must specify the _type_ and _name_ keys, optionally an icon key (you can use FontAwesome classes which are included by default) and a _models_ key.\nIf you don't define the _models_ key then the default app models are listed under your app, otherwise only the specified models are listed (in the order you provide).\n\n#### Model\n\nYou must specify the _type_, _name_ and _app_ keys, optionally an icon key (you can use FontAwesome classes which are included by default).\n\n#### Free\n\nYou can specify free voices, you must define an _url_ and if you want some visibility permissions (OR clause)\n\n### <a name=\"configuration-analytics\"></a>ANALYTICS\n\nYou can create a cool index page displaying some statistics widgets consuming the google analytics api, just by defining the `ANALYTICS` setting.\n\nIt requires two keys:\n\n- `CREDENTIALS`: it is the path to the credentials json file\n- `VIEW_ID`: id of the view from which display data\n\nYou can add contents before and after the analytics dashboard by extending the `baton/analytics.html` template and filling the `baton_before_analytics` and `baton_after_analytics` blocks.\n\n#### How to generate a credentials json file\n\nFollow the steps in the Google Identity Platform documentation to [create a service account](https://developers.google.com/identity/protocols/OAuth2ServiceAccount#creatinganaccount) from the [Google Developer Console](https://console.developers.google.com/).\n\nOnce the service account is created, you can click the Generate New JSON Key button to create and download the key and add it to your project.\n\nAdd the service account as a user in Google Analytics. The service account you created in the previous step has an email address that you can add to any of the Google Analytics views you'd like to request data from. It's generally best to only grant the service account read-only access.\n\n## <a name=\"signals\"></a>Signals\n\nBaton provides a dispatcher that can be used to register function that will be called when some events occurr.\nAt this moment Baton emits four types of events:\n\n- `onNavbarReady`: dispatched when the navbar is fully rendered\n- `onMenuReady`: dispatched when the menu is fully rendered (probably the last event fired, since the menu contents are retrieves async)\n- `onTabsReady`: dispatched when the changeform tabs are fully rendered\n- `onMenuError`: dispatched if the request sent to retrieve menu contents fails\n- `onReady`: dispatched when Baton js has finished its sync job\n\nIn order to use them just override the baton `admin/base_site.html` template and register your listeners **before** calling `Baton.init`, i.e.\n\n    <!-- ... -->\n    <script>\n        {% baton_config 'CONFIRM_UNSAVED_CHANGES' as confirm_unsaved_changes %}\n        {% baton_config 'SHOW_MULTIPART_UPLOADING' as show_multipart_uploading %}\n        (function ($, undefined) {\n            $(window).on('load', function () {\n                // init listeners\n                Baton.Dispatcher.register('onReady', function () { console.log('BATON IS READY') })\n                Baton.Dispatcher.register('onMenuReady', function () { console.log('BATON MENU IS READY') })\n                Baton.Dispatcher.register('onNavbarReady', function () { console.log('BATON NAVBAR IS READY') })\n                // end listeners\n                Baton.init({\n                    api: {\n                        app_list: '{% url 'baton-app-list-json' %}'\n                    },\n                    confirmUnsavedChanges: {% if confirm_unsaved_changes %}true{% else%}false{% endif %},\n                    showMultipartUploading: {% if show_multipart_uploading %}true{% else%}false{% endif %}\n                });\n            })\n        })(jQuery, undefined)\n    </script>\n    <!-- ... -->\n\n## <a name=\"text-input-filters\"></a>Text Input Filters\n\nTaken from this [medium article](https://medium.com/@hakibenita/how-to-add-a-text-filter-to-django-admin-5d1db93772d8)\n\nBaton defines a custom InputFilter class that you can use to create text input filters and use them as any other `list_filters`, for example\n\n``` python\n\n# your app admin\n\nfrom baton.admin import InputFilter\n\nclass IdFilter(InputFilter):\n    parameter_name = 'id'\n    title = 'id'\n \n    def queryset(self, request, queryset):\n        if self.value() is not None:\n            search_term = self.value()\n            return queryset.filter(\n                id=search_term\n            )\n\n\nclass MyModelAdmin(admin.ModelAdmin):\n    list_filters = (\n        'my_field',\n        IdFilter,\n        'my_other_field',\n    )\n\n```\n\n## <a name=\"form-tabs\"></a>Form tabs\n\nHow much I loved django-suit form tabs? Too much. So, this was a feature I couldn't live without.\n\nThere are three types of tabs:\n\n- **fieldset tab**: a tab containing a fieldset\n- **inline tab**: a tab containing an inline\n- **group tab**: a tab which can contain fieldsets and inlines in the order you specify\n\nTabs' titles are retrieved automatically, for fieldset and inline tabs are the fieldset title and the inline related verbose name plural.\nFor group tabs the first title is taken (either of an inline or fieldset section).\n\nUsing group tabs you can mix inlines with fields, just by splitting fields into fieldsets and arranging them in your preferred order.\n\nLet's see how to define tabs in your admin forms (everyting is done through js, no templatetags, no templates overriden):\n\n    class AttributeInline(admin.StackedInline):\n        model = Attribute\n        extra = 1\n\n    class FeatureInline(admin.StackedInline):\n        model = Feature\n        extra = 1\n\n    class ItemAdmin(admin.ModelAdmin):\n        list_display = ('label', 'description', 'main_feature', )\n        inlines = [AttributeInline, FeatureInline, ]\n\n        fieldsets = (\n            ('Main', {\n                'fields': ('label', ),\n                'classes': ('baton-tabs-init', 'baton-tab-inline-attribute', 'baton-tab-fs-content', 'baton-tab-group-fs-tech--inline-feature', ),\n                'description': 'This is a description text'\n\n            }),\n            ('Content', {\n                'fields': ('text', ),\n                'classes': ('tab-fs-content', ),\n                'description': 'This is another description text'\n\n            }),\n            ('Tech', {\n                'fields': ('main_feature', ),\n                'classes': ('tab-fs-tech', ),\n                'description': 'This is another description text'\n\n            }),\n        )\n\nAs you can see these are the rules:\n\n- Inline classes remain the same, no action needed\n- In the first fieldset define a `baton-tabs-init` class which enables tabs\n- For every InLine you want to put in a separate tab, add a class `baton-tab-inline-MODELNAME` or `baton-tab-inline-RELATEDNAME` if you've specified a related name in the model foreign key field\n- For every fieldset you want to put in a separate tab, add a class `baton-tab-fs-CUSTOMNAME`, and add a class `tab-fs-CUSTOMNAME` on the fieldset\n- For every group you want to put in a separate tab, add a class `baton-tab-group-ITEMS`, where items can be inlines (`inline-RELATEDNAME`) and/or fieldsets (`fs-CUSTOMNAME`) separated by a double hypen `--`. Also add a class `tab-fs-CUSTOMNAME` on the fieldset items.\n- Tabs order respects the defined classes order\n\nOther features:\n\n- when some field has an error, the first tab containing errors is opened automatically\n- you can open a tab on page load just by adding an hash to the url, i.e. `#inline-feature`, `#fs-content`, `#group-fs-tech--inline-feature`\n\n## <a name=\"customization\"></a>Customization\n\nIt's easy to heavily customize the appeareance of __baton__. All the stuff is compiled from a modern js app which resides in `baton/static/baton/app`.\n\nYou just need to change the [sass variables values](https://github.com/otto-torino/django-baton/blob/master/baton/static/baton/app/src/styles/_variables.scss) (and you can overwrite also bootstrap variables), re-compile, get the compiled js file, place it in the static folder of your main app,\nand place your main app (ROOTAPP) before __baton__ in the `INSTALLED_APPS`.\n\nSo:\n\n    $ git clone https://github.com/otto-torino/django-baton.git\n    $ cd django-baton/baton/static/baton/app/\n    $ npm install\n    $ vim src/styles/_variables.scss\n    $ npm run compile\n    $ cp dist/baton.min.js ROOTAPP/static/baton/app/dist/\n\nIf you want to test live your changes it's easy, just start the webpack dev server:\n\n    $ cd django-baton/baton/static/baton/app/\n    $ npm run dev\n\nAnd the inside the `base_site.html` template make these changes:\n\n    <!-- <script src=\"{% static 'baton/app/dist/baton.min.js' %}\"></script> comment the compiled src and uncomment the webpack served src -->\n    <script src=\"http://localhost:8080/dist/baton.min.js\"></script>\n\nNow while you make your changes to the js app (css included), webpack will update the bundle automatically, so just refresh the page and you'll see your changes.\n\n## <a name=\"contributing\"></a>Contributing\n\nI'll soon add more stuff here, but at the moment what is really important, is to follow the eslint rules specified in the `.eslintrc` file (https://github.com/otto-torino/django-baton/blob/master/baton/static/baton/app/.eslintrc) for the js part, and be compliant with the standard sasslint rules for the sass part. I follow PEP8 standard for the few lines of python code.\n\n## <a name=\"screenshots\"></a>Screenshots\n\n![Screenshot](screenshots/mobile_mix.jpg)\n\n![Screenshot](screenshots/more1.png)\n\n![Screenshot](screenshots/changelist_user-lg.jpg)\n\n![Screenshot](screenshots/tabs-lg.jpg)\n\n![Screenshot](screenshots/more2.png)\n\n![Screenshot](screenshots/more3.png)\n\n![Screenshot](screenshots/more4.png)\n\n![Screenshot](screenshots/more5.png)\n\n![Screenshot](screenshots/more6.png)", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://github.com/otto-torino/django-baton", "keywords": "", "license": "MIT License", "maintainer": "", "maintainer_email": "", "name": "django-baton-v2", "package_url": "https://pypi.org/project/django-baton-v2/", "platform": "", "project_url": "https://pypi.org/project/django-baton-v2/", "project_urls": {"Homepage": "http://github.com/otto-torino/django-baton"}, "release_url": "https://pypi.org/project/django-baton-v2/1.5.10/", "requires_dist": null, "requires_python": "", "summary": "A cool, modern and responsive django admin application", "version": "1.5.10", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>django-baton</h1>\n<p><a href=\"https://pepy.tech/project/django-baton\" rel=\"nofollow\"><img alt=\"Downloads\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/278e9eb6c16f759119169418b0e43024af8fffef/68747470733a2f2f706570792e746563682f62616467652f646a616e676f2d6261746f6e\"></a></p>\n<p>A cool, modern and responsive django admin application, based on bootstrap 4.3.1</p>\n<p>Documentation: <a href=\"http://django-baton.readthedocs.io/\" rel=\"nofollow\">readthedocs</a></p>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/089e41c5c720d3253fe6d603a0941409e8520872/73637265656e73686f74732f696e6465782d616e616c79746963732d6c672e6a7067\"></p>\n<h2>Table of contents</h2>\n<ul>\n<li><a href=\"#features\" rel=\"nofollow\">Features</a></li>\n<li><a href=\"#installation\" rel=\"nofollow\">Installation</a></li>\n<li><a href=\"#configuration\" rel=\"nofollow\">Configuration</a>\n<ul>\n<li><a href=\"#configuration-menu\" rel=\"nofollow\">Menu</a></li>\n<li><a href=\"#configuration-analytics\" rel=\"nofollow\">Analytics</a></li>\n</ul>\n</li>\n<li><a href=\"#signals\" rel=\"nofollow\">Signals</a></li>\n<li><a href=\"#text-input-filters\" rel=\"nofollow\">Text Input Filters</a></li>\n<li><a href=\"#form-tabs\" rel=\"nofollow\">Form Tabs</a></li>\n<li><a href=\"#customization\" rel=\"nofollow\">Customization</a></li>\n<li><a href=\"#contributing\" rel=\"nofollow\">Contributing</a></li>\n<li><a href=\"#screenshots\" rel=\"nofollow\">Screenshots</a></li>\n</ul>\n<h2><a></a>Features</h2>\n<p>Tested with django 1.10.5, 1.11.1, 2.0, 2.1 and 2.2</p>\n<p>This application was written with one concept in mind: overwrite as few django templates as possible.\nEverything is styled through css, and when an help is needed, js is armed.</p>\n<ul>\n<li>Based on bootstrap 4.3.1 and FontAwesome Free 5.8.1</li>\n<li>Fully responsive</li>\n<li>Custom and flexible sidebar menu</li>\n<li>Text input filters facility</li>\n<li>Form tabs out of the box</li>\n<li>Lazy load of current uploaded images</li>\n<li>Optional index page filled with google analytics widgets</li>\n<li>Customization available recompiling the js app provided</li>\n<li>it translations provided</li>\n</ul>\n<p>It requires the following python packages in order to manage the google analytics index:</p>\n<ul>\n<li>google-api-python-client</li>\n<li>oauth2client==1.5.2</li>\n</ul>\n<p>At the moment <strong>baton</strong> defines only 3 custom templates:</p>\n<ul>\n<li><code>admin/base_site.html</code>, needed in order to inject the js application (which includes also css and graphics, compiled with <a href=\"https://webpack.github.io/\" rel=\"nofollow\">webpack</a>);</li>\n<li><code>admin/delete_confirmation.html</code>, needed because of a bug (IMO) in the template, in particular the <code>extra_head</code> block does not contain the parent content, hence it must be overridden (FIXED IN django 1.11, remains until baton will support django 1.10);</li>\n<li><code>admin/delete_selected_confirmation.html</code>, same as above.</li>\n</ul>\n<p>Baton is based on the following frontend technologies:</p>\n<ul>\n<li>bootstrap 4.3.1</li>\n<li>FontAwesome 5.8.1 (solid and brands)</li>\n</ul>\n<p>Flexbox is used here and there to accomplish responsiveness. jQuery is used for DOM manipulations.</p>\n<p>All js, fonts and css are compiled, and produce a single js file which is included in the base_site template.</p>\n<p>A custom menu is provided, the menu is rendered through js, and data are fetched in json format through ajax request.</p>\n<h2><a></a>Installation</h2>\n<p>Install the last stable release</p>\n<pre><code>pip install django-baton\n</code></pre>\n<p>or clone the repo inside your project</p>\n<pre><code>git clone https://github.com/otto-torino/django-baton.git\n</code></pre>\n<p>Add <code>baton</code> and <code>baton.autodiscover</code> to your <code>INSTALLED_APPS</code>:</p>\n<pre><code>INSTALLED_APPS = (\n    # ...\n    'baton',\n    'django.contrib.admin',\n    # ...\n    'baton.autodiscover',\n)\n</code></pre>\n<p>Replace django.contrib.admin in your project urls, and add baton urls:</p>\n<pre><code># from django.contrib import admin\nfrom baton.autodiscover import admin\n\nurlpatterns = [\n    url(r'^admin/', include(admin.site.urls)),\n    # ...\n    url(r'^baton/', include('baton.urls')),\n]\n</code></pre>\n<h3>Django 2</h3>\n<p>The first two steps are the same, but in your project urls you should now use path:</p>\n<pre><code>from baton.autodiscover import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('baton/', include('baton.urls')),\n\n]\n</code></pre>\n<p>If you get a \"<strong>No crypto library available</strong>\" when using the google analytics index, then install this package:</p>\n<pre><code>$ pip install PyOpenSSL\n</code></pre>\n<h3>Why two installed apps?</h3>\n<p>Well, the first <code>baton</code> has to be placed before the <code>django.contrib.admin</code> app, because it overrides 3 templates and resets all css.\nThe <code>baton.autodiscover</code> entry is needed as the last installed app in order to register all applications for the admin.\nI decided to create a custom <code>AdminSite</code> class, in order to allow the customization of some variables the django way (<code>site_header</code>, <code>index_title</code>, ...). I think this is a good approach,\nbetter than customizing this vars overwriting the orignal templates. The problem is that when creating a custom AdminSite, you should register manually all the apps. I didn't like\nthis, so I wrote this <code>autodiscover</code> module, which automatically registers all the apps already registered with the django default AdminSite. In order to do this, all the apps must be already registered, so it comes as the last installed app.</p>\n<h2><a></a>Configuration</h2>\n<p>The configuration dictionary must be defined inside your settings:</p>\n<pre><code>BATON = {\n    'SITE_HEADER': 'Baton',\n    'SITE_TITLE': 'Baton',\n    'INDEX_TITLE': 'Site administration',\n    'SUPPORT_HREF': 'https://github.com/otto-torino/django-baton/issues',\n    'COPYRIGHT': 'copyright \u00c2\u00a9 2017 &lt;a href=\"https://www.otto.to.it\"&gt;Otto srl&lt;/a&gt;', # noqa\n    'POWERED_BY': '&lt;a href=\"https://www.otto.to.it\"&gt;Otto srl&lt;/a&gt;',\n    'CONFIRM_UNSAVED_CHANGES': True,\n    'SHOW_MULTIPART_UPLOADING': True,\n    'ENABLE_IMAGES_PREVIEW': True,\n    'MENU': (\n        { 'type': 'title', 'label': 'main', 'apps': ('auth', ) },\n        {\n            'type': 'app',\n            'name': 'auth',\n            'label': 'Authentication',\n            'icon': 'fa fa-lock',\n            'models': (\n                {\n                    'name': 'user',\n                    'label': 'Users'\n                },\n                {\n                    'name': 'group',\n                    'label': 'Groups'\n                },\n            )\n        },\n        { 'type': 'title', 'label': 'Contents', 'apps': ('flatpages', ) },\n        { 'type': 'model', 'label': 'Pages', 'name': 'flatpage', 'app': 'flatpages' },\n        { 'type': 'free', 'label': 'Custom Link', 'url': 'http://www.google.it', 'perms': ('flatpages.add_flatpage', 'auth.change_user') },\n        { 'type': 'free', 'label': 'My parent voice', 'children': [\n            { 'type': 'model', 'label': 'A Model', 'name': 'mymodelname', 'app': 'myapp' },\n            { 'type': 'free', 'label': 'Another custom link', 'url': 'http://www.google.it' },\n        ] },\n    ),\n    'ANALYTICS': {\n        'CREDENTIALS': os.path.join(BASE_DIR, 'credentials.json'),\n        'VIEW_ID': '12345678',\n    }\n}\n</code></pre>\n<ul>\n<li><code>SITE_HEADER</code>, <code>COPYRIGHT</code> and <code>POWERED_BY</code> are marked as safe, so you can include also img tags and links, for example.</li>\n<li><code>SUPPORT_HREF</code> is the content of an href attribute, then you can use also a <code>mailto:info@blabla.com</code></li>\n<li><code>CONFIRM_UNSAVED_CHANGES</code>: if set to <code>True</code> a confirmation modal appears when leaving a change form or add form with unsaved changes.\nThe check of a dirty form relies on the jQuery serialize method, so it's not 100% safe. Disabled inputs, particular widgets (ckeditor) can not be detected.\nDefault value is <code>True</code>.</li>\n<li><code>SHOW_MULTIPART_UPLOADING</code>: if set to <code>True</code> an overlay with a spinner appears when submitting a <code>multipart/form-data</code> form.</li>\n<li><code>ENABLE_IMAGES_PREVIEW</code>: if set to <code>True</code> a preview is displayed above all input file fields which contain images. You can control how the preview is displayed overriding the class <code>.baton-image-preview</code>. By default previews are 100px height and with a box shadow on over event.</li>\n</ul>\n<p>Let's see the <code>MENU</code> and <code>ANALYTICS</code> configurations in detail.</p>\n<h3><a></a>MENU</h3>\n<p>Currently four kind of voices are supported: <em>title</em>, <em>app</em>, <em>model</em> and <em>free</em>.</p>\n<p>Title and free voices can have children, children follow the following rules:</p>\n<ul>\n<li>children voices children are ignored (do not place an app voice as child)</li>\n</ul>\n<p>First of all, if you don't define a MENU key in the configuration dictionary, the default MENU is shown.\nIf you define a MENU key, then the custom menu is built and shown.</p>\n<h4>Title</h4>\n<p>Like <strong>MAIN</strong> and <strong>CONTENTS</strong> in the screenshot, it represents a menu section. You should set a label and optionally an apps or perms key, used for visualization purposes.</p>\n<p>If the title voice should act as a section title for a group of apps, you'd want to specify these apps, because if the user can't operate over them, then the voice is not shown.\nAt the same time you can define some perms (OR condition), something like:</p>\n<pre><code>{ 'type': 'title', 'label': 'main', 'perms': ('auth.add_user', ) },\n</code></pre>\n<h4>App</h4>\n<p>You must specify the <em>type</em> and <em>name</em> keys, optionally an icon key (you can use FontAwesome classes which are included by default) and a <em>models</em> key.\nIf you don't define the <em>models</em> key then the default app models are listed under your app, otherwise only the specified models are listed (in the order you provide).</p>\n<h4>Model</h4>\n<p>You must specify the <em>type</em>, <em>name</em> and <em>app</em> keys, optionally an icon key (you can use FontAwesome classes which are included by default).</p>\n<h4>Free</h4>\n<p>You can specify free voices, you must define an <em>url</em> and if you want some visibility permissions (OR clause)</p>\n<h3><a></a>ANALYTICS</h3>\n<p>You can create a cool index page displaying some statistics widgets consuming the google analytics api, just by defining the <code>ANALYTICS</code> setting.</p>\n<p>It requires two keys:</p>\n<ul>\n<li><code>CREDENTIALS</code>: it is the path to the credentials json file</li>\n<li><code>VIEW_ID</code>: id of the view from which display data</li>\n</ul>\n<p>You can add contents before and after the analytics dashboard by extending the <code>baton/analytics.html</code> template and filling the <code>baton_before_analytics</code> and <code>baton_after_analytics</code> blocks.</p>\n<h4>How to generate a credentials json file</h4>\n<p>Follow the steps in the Google Identity Platform documentation to <a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount#creatinganaccount\" rel=\"nofollow\">create a service account</a> from the <a href=\"https://console.developers.google.com/\" rel=\"nofollow\">Google Developer Console</a>.</p>\n<p>Once the service account is created, you can click the Generate New JSON Key button to create and download the key and add it to your project.</p>\n<p>Add the service account as a user in Google Analytics. The service account you created in the previous step has an email address that you can add to any of the Google Analytics views you'd like to request data from. It's generally best to only grant the service account read-only access.</p>\n<h2><a></a>Signals</h2>\n<p>Baton provides a dispatcher that can be used to register function that will be called when some events occurr.\nAt this moment Baton emits four types of events:</p>\n<ul>\n<li><code>onNavbarReady</code>: dispatched when the navbar is fully rendered</li>\n<li><code>onMenuReady</code>: dispatched when the menu is fully rendered (probably the last event fired, since the menu contents are retrieves async)</li>\n<li><code>onTabsReady</code>: dispatched when the changeform tabs are fully rendered</li>\n<li><code>onMenuError</code>: dispatched if the request sent to retrieve menu contents fails</li>\n<li><code>onReady</code>: dispatched when Baton js has finished its sync job</li>\n</ul>\n<p>In order to use them just override the baton <code>admin/base_site.html</code> template and register your listeners <strong>before</strong> calling <code>Baton.init</code>, i.e.</p>\n<pre><code>&lt;!-- ... --&gt;\n&lt;script&gt;\n    {% baton_config 'CONFIRM_UNSAVED_CHANGES' as confirm_unsaved_changes %}\n    {% baton_config 'SHOW_MULTIPART_UPLOADING' as show_multipart_uploading %}\n    (function ($, undefined) {\n        $(window).on('load', function () {\n            // init listeners\n            Baton.Dispatcher.register('onReady', function () { console.log('BATON IS READY') })\n            Baton.Dispatcher.register('onMenuReady', function () { console.log('BATON MENU IS READY') })\n            Baton.Dispatcher.register('onNavbarReady', function () { console.log('BATON NAVBAR IS READY') })\n            // end listeners\n            Baton.init({\n                api: {\n                    app_list: '{% url 'baton-app-list-json' %}'\n                },\n                confirmUnsavedChanges: {% if confirm_unsaved_changes %}true{% else%}false{% endif %},\n                showMultipartUploading: {% if show_multipart_uploading %}true{% else%}false{% endif %}\n            });\n        })\n    })(jQuery, undefined)\n&lt;/script&gt;\n&lt;!-- ... --&gt;\n</code></pre>\n<h2><a></a>Text Input Filters</h2>\n<p>Taken from this <a href=\"https://medium.com/@hakibenita/how-to-add-a-text-filter-to-django-admin-5d1db93772d8\" rel=\"nofollow\">medium article</a></p>\n<p>Baton defines a custom InputFilter class that you can use to create text input filters and use them as any other <code>list_filters</code>, for example</p>\n<pre><span class=\"c1\"># your app admin</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">baton.admin</span> <span class=\"kn\">import</span> <span class=\"n\">InputFilter</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">IdFilter</span><span class=\"p\">(</span><span class=\"n\">InputFilter</span><span class=\"p\">):</span>\n    <span class=\"n\">parameter_name</span> <span class=\"o\">=</span> <span class=\"s1\">'id'</span>\n    <span class=\"n\">title</span> <span class=\"o\">=</span> <span class=\"s1\">'id'</span>\n \n    <span class=\"k\">def</span> <span class=\"nf\">queryset</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">queryset</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">value</span><span class=\"p\">()</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">search_term</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">value</span><span class=\"p\">()</span>\n            <span class=\"k\">return</span> <span class=\"n\">queryset</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span>\n                <span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"n\">search_term</span>\n            <span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">MyModelAdmin</span><span class=\"p\">(</span><span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">ModelAdmin</span><span class=\"p\">):</span>\n    <span class=\"n\">list_filters</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n        <span class=\"s1\">'my_field'</span><span class=\"p\">,</span>\n        <span class=\"n\">IdFilter</span><span class=\"p\">,</span>\n        <span class=\"s1\">'my_other_field'</span><span class=\"p\">,</span>\n    <span class=\"p\">)</span>\n</pre>\n<h2><a></a>Form tabs</h2>\n<p>How much I loved django-suit form tabs? Too much. So, this was a feature I couldn't live without.</p>\n<p>There are three types of tabs:</p>\n<ul>\n<li><strong>fieldset tab</strong>: a tab containing a fieldset</li>\n<li><strong>inline tab</strong>: a tab containing an inline</li>\n<li><strong>group tab</strong>: a tab which can contain fieldsets and inlines in the order you specify</li>\n</ul>\n<p>Tabs' titles are retrieved automatically, for fieldset and inline tabs are the fieldset title and the inline related verbose name plural.\nFor group tabs the first title is taken (either of an inline or fieldset section).</p>\n<p>Using group tabs you can mix inlines with fields, just by splitting fields into fieldsets and arranging them in your preferred order.</p>\n<p>Let's see how to define tabs in your admin forms (everyting is done through js, no templatetags, no templates overriden):</p>\n<pre><code>class AttributeInline(admin.StackedInline):\n    model = Attribute\n    extra = 1\n\nclass FeatureInline(admin.StackedInline):\n    model = Feature\n    extra = 1\n\nclass ItemAdmin(admin.ModelAdmin):\n    list_display = ('label', 'description', 'main_feature', )\n    inlines = [AttributeInline, FeatureInline, ]\n\n    fieldsets = (\n        ('Main', {\n            'fields': ('label', ),\n            'classes': ('baton-tabs-init', 'baton-tab-inline-attribute', 'baton-tab-fs-content', 'baton-tab-group-fs-tech--inline-feature', ),\n            'description': 'This is a description text'\n\n        }),\n        ('Content', {\n            'fields': ('text', ),\n            'classes': ('tab-fs-content', ),\n            'description': 'This is another description text'\n\n        }),\n        ('Tech', {\n            'fields': ('main_feature', ),\n            'classes': ('tab-fs-tech', ),\n            'description': 'This is another description text'\n\n        }),\n    )\n</code></pre>\n<p>As you can see these are the rules:</p>\n<ul>\n<li>Inline classes remain the same, no action needed</li>\n<li>In the first fieldset define a <code>baton-tabs-init</code> class which enables tabs</li>\n<li>For every InLine you want to put in a separate tab, add a class <code>baton-tab-inline-MODELNAME</code> or <code>baton-tab-inline-RELATEDNAME</code> if you've specified a related name in the model foreign key field</li>\n<li>For every fieldset you want to put in a separate tab, add a class <code>baton-tab-fs-CUSTOMNAME</code>, and add a class <code>tab-fs-CUSTOMNAME</code> on the fieldset</li>\n<li>For every group you want to put in a separate tab, add a class <code>baton-tab-group-ITEMS</code>, where items can be inlines (<code>inline-RELATEDNAME</code>) and/or fieldsets (<code>fs-CUSTOMNAME</code>) separated by a double hypen <code>--</code>. Also add a class <code>tab-fs-CUSTOMNAME</code> on the fieldset items.</li>\n<li>Tabs order respects the defined classes order</li>\n</ul>\n<p>Other features:</p>\n<ul>\n<li>when some field has an error, the first tab containing errors is opened automatically</li>\n<li>you can open a tab on page load just by adding an hash to the url, i.e. <code>#inline-feature</code>, <code>#fs-content</code>, <code>#group-fs-tech--inline-feature</code></li>\n</ul>\n<h2><a></a>Customization</h2>\n<p>It's easy to heavily customize the appeareance of <strong>baton</strong>. All the stuff is compiled from a modern js app which resides in <code>baton/static/baton/app</code>.</p>\n<p>You just need to change the <a href=\"https://github.com/otto-torino/django-baton/blob/master/baton/static/baton/app/src/styles/_variables.scss\" rel=\"nofollow\">sass variables values</a> (and you can overwrite also bootstrap variables), re-compile, get the compiled js file, place it in the static folder of your main app,\nand place your main app (ROOTAPP) before <strong>baton</strong> in the <code>INSTALLED_APPS</code>.</p>\n<p>So:</p>\n<pre><code>$ git clone https://github.com/otto-torino/django-baton.git\n$ cd django-baton/baton/static/baton/app/\n$ npm install\n$ vim src/styles/_variables.scss\n$ npm run compile\n$ cp dist/baton.min.js ROOTAPP/static/baton/app/dist/\n</code></pre>\n<p>If you want to test live your changes it's easy, just start the webpack dev server:</p>\n<pre><code>$ cd django-baton/baton/static/baton/app/\n$ npm run dev\n</code></pre>\n<p>And the inside the <code>base_site.html</code> template make these changes:</p>\n<pre><code>&lt;!-- &lt;script src=\"{% static 'baton/app/dist/baton.min.js' %}\"&gt;&lt;/script&gt; comment the compiled src and uncomment the webpack served src --&gt;\n&lt;script src=\"http://localhost:8080/dist/baton.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n<p>Now while you make your changes to the js app (css included), webpack will update the bundle automatically, so just refresh the page and you'll see your changes.</p>\n<h2><a></a>Contributing</h2>\n<p>I'll soon add more stuff here, but at the moment what is really important, is to follow the eslint rules specified in the <code>.eslintrc</code> file (<a href=\"https://github.com/otto-torino/django-baton/blob/master/baton/static/baton/app/.eslintrc\" rel=\"nofollow\">https://github.com/otto-torino/django-baton/blob/master/baton/static/baton/app/.eslintrc</a>) for the js part, and be compliant with the standard sasslint rules for the sass part. I follow PEP8 standard for the few lines of python code.</p>\n<h2><a></a>Screenshots</h2>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d0b61430e802cbd1c57b25a314c4e5cc0cf897d8/73637265656e73686f74732f6d6f62696c655f6d69782e6a7067\"></p>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a89380895f8fb9037c77d6edbd43ab141aa43690/73637265656e73686f74732f6d6f7265312e706e67\"></p>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b76fd883ae6f7a727268d1a8a185af79a6abe2a1/73637265656e73686f74732f6368616e67656c6973745f757365722d6c672e6a7067\"></p>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/27c9eb2660aa25e2f0c9ce263a8acf382254485a/73637265656e73686f74732f746162732d6c672e6a7067\"></p>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d2ee7d8b8e9b302471b0b9ea489cba0acc46eb6a/73637265656e73686f74732f6d6f7265322e706e67\"></p>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/06275275a3381a7f35737cbfb3c67e271fb2d115/73637265656e73686f74732f6d6f7265332e706e67\"></p>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/cce1dec2b186dc97384bfc86f4d5f8809c5b7635/73637265656e73686f74732f6d6f7265342e706e67\"></p>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/249c9cc87820fc9b73b2b1a017959f6ef98e270c/73637265656e73686f74732f6d6f7265352e706e67\"></p>\n<p><img alt=\"Screenshot\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0a13169474985add64da7c81381f1447b850b42c/73637265656e73686f74732f6d6f7265362e706e67\"></p>\n\n          </div>"}, "last_serial": 6616020, "releases": {"1.5.10": [{"comment_text": "", "digests": {"md5": "b1ebbf339b11c193fb32c4bc8d7eccba", "sha256": "8c98fbfc2c60a9290fdccc94c4885c9e9841622cf57284757f1eb9fbb22f90b6"}, "downloads": -1, "filename": "django-baton-v2-1.5.10.tar.gz", "has_sig": false, "md5_digest": "b1ebbf339b11c193fb32c4bc8d7eccba", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3874615, "upload_time": "2020-02-12T12:44:18", "upload_time_iso_8601": "2020-02-12T12:44:18.301767Z", "url": "https://files.pythonhosted.org/packages/fc/8c/2b5635976c49ee165b6f9bdfe0030984f25418a470682e8f7faae0807117/django-baton-v2-1.5.10.tar.gz", "yanked": false}], "1.5.7": [{"comment_text": "", "digests": {"md5": "16e5512c194aaa6980e762e29089ee3e", "sha256": "ad6f39ae58345e7f97ea226f29e52c7392d6a5cfa2171faf20627183184fe753"}, "downloads": -1, "filename": "django-baton-v2-1.5.7.tar.gz", "has_sig": false, "md5_digest": "16e5512c194aaa6980e762e29089ee3e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3789934, "upload_time": "2020-02-06T14:38:21", "upload_time_iso_8601": "2020-02-06T14:38:21.187305Z", "url": "https://files.pythonhosted.org/packages/fa/ab/d1a30e6e9c2ded39f0bae1f5342c60bf27a84bc5c1dc4640ed22ee140f87/django-baton-v2-1.5.7.tar.gz", "yanked": false}], "1.5.8": [{"comment_text": "", "digests": {"md5": "333c770686418814092d5f9f37ad6519", "sha256": "357ac72773bb6c1291c454c0547a03482c40d70a821b46e94ab143c0c205ac03"}, "downloads": -1, "filename": "django-baton-v2-1.5.8.tar.gz", "has_sig": false, "md5_digest": "333c770686418814092d5f9f37ad6519", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3874579, "upload_time": "2020-02-12T12:36:43", "upload_time_iso_8601": "2020-02-12T12:36:43.992675Z", "url": "https://files.pythonhosted.org/packages/70/a8/5e6199b3a292e720e16cfd3656d44832d8f60638054a0094932d9e258656/django-baton-v2-1.5.8.tar.gz", "yanked": false}], "1.5.9": [{"comment_text": "", "digests": {"md5": "9ae67d7a306fae5e9cc994a1ca2c84e8", "sha256": "bbe10fb7c8a0d6e84edf4af2b7202aa95e8712a64d18d4ed9079f5b58c4edec6"}, "downloads": -1, "filename": "django-baton-v2-1.5.9.tar.gz", "has_sig": false, "md5_digest": "9ae67d7a306fae5e9cc994a1ca2c84e8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3874560, "upload_time": "2020-02-12T12:40:28", "upload_time_iso_8601": "2020-02-12T12:40:28.764436Z", "url": "https://files.pythonhosted.org/packages/06/a1/1bc051b850f8e9c9e6cf894fec35fb9d70a1815ac173b01d823bdce53b92/django-baton-v2-1.5.9.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "b1ebbf339b11c193fb32c4bc8d7eccba", "sha256": "8c98fbfc2c60a9290fdccc94c4885c9e9841622cf57284757f1eb9fbb22f90b6"}, "downloads": -1, "filename": "django-baton-v2-1.5.10.tar.gz", "has_sig": false, "md5_digest": "b1ebbf339b11c193fb32c4bc8d7eccba", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3874615, "upload_time": "2020-02-12T12:44:18", "upload_time_iso_8601": "2020-02-12T12:44:18.301767Z", "url": "https://files.pythonhosted.org/packages/fc/8c/2b5635976c49ee165b6f9bdfe0030984f25418a470682e8f7faae0807117/django-baton-v2-1.5.10.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:37:27 2020"}