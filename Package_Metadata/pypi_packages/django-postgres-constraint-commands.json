{"info": {"author": "", "author_email": "", "bugtrack_url": null, "classifiers": ["Framework :: Django", "License :: Public Domain", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "<!--\nhttps://pypi.org/project/readme-generator/\nhttps://pypi.org/project/python-readme-generator/\n-->\n\n[![](https://img.shields.io/pypi/pyversions/django-postgres-constraint-commands.svg?longCache=True)](https://pypi.org/project/django-postgres-constraint-commands/)\n[![](https://img.shields.io/badge/License-Unlicense-blue.svg?longCache=True)](https://unlicense.org/)\n\n#### Installation\n```bash\n$ [sudo] pip install django-postgres-constraint-commands\n```\n\n#### Pros\ndesigned for Django projects with a large number of models:\n\n+   no need `makemigrations` and `migrate`\n+   no migration conflicts\n+   integrity checks - drop and create constraints again\n+   define tables with raw SQL (optional)\n\n#### How it works\ndefine models foreign and unique keys, run command\n\n#### Settings\n```python\nINSTALLED_APPS = [\n    ...\n    'django_postgres_constraint_commands',\n    ...\n]\n```\n\n#### Examples\ndev\n```bash\n$ python manage.py add_constraints # manage.py add_constraints app1 app2 ...\n$ python manage.py drop_constraints # manage.py drop_constraints app1 app2 ...\n```\n\nprod\n```bash\n$ ssh user@hostname sudo docker run --env-file .env image python manage.py add_constraints\n$ ssh user@hostname sudo docker run --env-file .env image python manage.py drop_constraints\n```\n\n`models.py`\n\n```python\nclass Model1(models.Model):\n    name = models.TextField(unique=True)\n    obj = models.ForeignKey('Obj',related_name='+',on_delete=models.SET_NULL)\n\n    class Meta:\n        db_table = '<db_table>'\n        managed=False\n\nclass Model2(models.Model):\n    user = models.ForeignKey('User',related_name='+',on_delete=models.SET_NULL)\n    obj = models.ForeignKey('Obj',related_name='+',on_delete=models.SET_NULL)\n\n    class Meta:\n        db_table = '<db_table>'\n        managed=False\n        unique_together = [('user', 'obj',)]\n```\n\n<p align=\"center\">\n    <a href=\"https://pypi.org/project/python-readme-generator/\">python-readme-generator</a>\n</p>", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/andrewp-as-is/django-postgres-constraint-commands.py", "keywords": "django,postgres,constraints", "license": "Unlicense", "maintainer": "", "maintainer_email": "", "name": "django-postgres-constraint-commands", "package_url": "https://pypi.org/project/django-postgres-constraint-commands/", "platform": "", "project_url": "https://pypi.org/project/django-postgres-constraint-commands/", "project_urls": {"Homepage": "https://github.com/andrewp-as-is/django-postgres-constraint-commands.py"}, "release_url": "https://pypi.org/project/django-postgres-constraint-commands/2020.4.19/", "requires_dist": null, "requires_python": "", "summary": "add/drop postgres constraints based on django models", "version": "2020.4.19", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://pypi.org/project/django-postgres-constraint-commands/\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/db809593a4d8ef65f730772c2d1ce1fc5f0c0ec5/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f646a616e676f2d706f7374677265732d636f6e73747261696e742d636f6d6d616e64732e7376673f6c6f6e6743616368653d54727565\"></a>\n<a href=\"https://unlicense.org/\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f4e8a8f9c20068b8993eef25e402898571038660/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d556e6c6963656e73652d626c75652e7376673f6c6f6e6743616368653d54727565\"></a></p>\n<h4>Installation</h4>\n<pre>$ <span class=\"o\">[</span>sudo<span class=\"o\">]</span> pip install django-postgres-constraint-commands\n</pre>\n<h4>Pros</h4>\n<p>designed for Django projects with a large number of models:</p>\n<ul>\n<li>no need <code>makemigrations</code> and <code>migrate</code></li>\n<li>no migration conflicts</li>\n<li>integrity checks - drop and create constraints again</li>\n<li>define tables with raw SQL (optional)</li>\n</ul>\n<h4>How it works</h4>\n<p>define models foreign and unique keys, run command</p>\n<h4>Settings</h4>\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"o\">...</span>\n    <span class=\"s1\">'django_postgres_constraint_commands'</span><span class=\"p\">,</span>\n    <span class=\"o\">...</span>\n<span class=\"p\">]</span>\n</pre>\n<h4>Examples</h4>\n<p>dev</p>\n<pre>$ python manage.py add_constraints <span class=\"c1\"># manage.py add_constraints app1 app2 ...</span>\n$ python manage.py drop_constraints <span class=\"c1\"># manage.py drop_constraints app1 app2 ...</span>\n</pre>\n<p>prod</p>\n<pre>$ ssh user@hostname sudo docker run --env-file .env image python manage.py add_constraints\n$ ssh user@hostname sudo docker run --env-file .env image python manage.py drop_constraints\n</pre>\n<p><code>models.py</code></p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Model1</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">TextField</span><span class=\"p\">(</span><span class=\"n\">unique</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">obj</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"s1\">'Obj'</span><span class=\"p\">,</span><span class=\"n\">related_name</span><span class=\"o\">=</span><span class=\"s1\">'+'</span><span class=\"p\">,</span><span class=\"n\">on_delete</span><span class=\"o\">=</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">SET_NULL</span><span class=\"p\">)</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">db_table</span> <span class=\"o\">=</span> <span class=\"s1\">'&lt;db_table&gt;'</span>\n        <span class=\"n\">managed</span><span class=\"o\">=</span><span class=\"kc\">False</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Model2</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"s1\">'User'</span><span class=\"p\">,</span><span class=\"n\">related_name</span><span class=\"o\">=</span><span class=\"s1\">'+'</span><span class=\"p\">,</span><span class=\"n\">on_delete</span><span class=\"o\">=</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">SET_NULL</span><span class=\"p\">)</span>\n    <span class=\"n\">obj</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"s1\">'Obj'</span><span class=\"p\">,</span><span class=\"n\">related_name</span><span class=\"o\">=</span><span class=\"s1\">'+'</span><span class=\"p\">,</span><span class=\"n\">on_delete</span><span class=\"o\">=</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">SET_NULL</span><span class=\"p\">)</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">db_table</span> <span class=\"o\">=</span> <span class=\"s1\">'&lt;db_table&gt;'</span>\n        <span class=\"n\">managed</span><span class=\"o\">=</span><span class=\"kc\">False</span>\n        <span class=\"n\">unique_together</span> <span class=\"o\">=</span> <span class=\"p\">[(</span><span class=\"s1\">'user'</span><span class=\"p\">,</span> <span class=\"s1\">'obj'</span><span class=\"p\">,)]</span>\n</pre>\n<p align=\"center\">\n    <a href=\"https://pypi.org/project/python-readme-generator/\" rel=\"nofollow\">python-readme-generator</a>\n</p>\n\n          </div>"}, "last_serial": 7050193, "releases": {"2020.4.16": [{"comment_text": "", "digests": {"md5": "5acaf55fc83eb39df4fa05ce15a0a910", "sha256": "8db67724945e178659f3c2a2f29810c99669d89481cc77b90caf266d011639d9"}, "downloads": -1, "filename": "django-postgres-constraint-commands-2020.4.16.tar.gz", "has_sig": false, "md5_digest": "5acaf55fc83eb39df4fa05ce15a0a910", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3839, "upload_time": "2020-04-17T20:14:16", "upload_time_iso_8601": "2020-04-17T20:14:16.607238Z", "url": "https://files.pythonhosted.org/packages/76/a5/4c81291dac6686c53098a4cf80ae7bb63419fd662b8a2c74fd104238d0df/django-postgres-constraint-commands-2020.4.16.tar.gz", "yanked": false}], "2020.4.19": [{"comment_text": "", "digests": {"md5": "8bd5a3398072e3fdbe74aa0c2b5134e0", "sha256": "8a8b3a7909d7233b2d6140f41fb4fc7a081af17d06f2d9efc80a623014c6cbe8"}, "downloads": -1, "filename": "django-postgres-constraint-commands-2020.4.19.tar.gz", "has_sig": false, "md5_digest": "8bd5a3398072e3fdbe74aa0c2b5134e0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4159, "upload_time": "2020-04-18T21:21:56", "upload_time_iso_8601": "2020-04-18T21:21:56.239969Z", "url": "https://files.pythonhosted.org/packages/6a/48/abcb58d5d6dd95019fc56d201202f145a8f1fdb50e22799feaf4711559ff/django-postgres-constraint-commands-2020.4.19.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "8bd5a3398072e3fdbe74aa0c2b5134e0", "sha256": "8a8b3a7909d7233b2d6140f41fb4fc7a081af17d06f2d9efc80a623014c6cbe8"}, "downloads": -1, "filename": "django-postgres-constraint-commands-2020.4.19.tar.gz", "has_sig": false, "md5_digest": "8bd5a3398072e3fdbe74aa0c2b5134e0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4159, "upload_time": "2020-04-18T21:21:56", "upload_time_iso_8601": "2020-04-18T21:21:56.239969Z", "url": "https://files.pythonhosted.org/packages/6a/48/abcb58d5d6dd95019fc56d201202f145a8f1fdb50e22799feaf4711559ff/django-postgres-constraint-commands-2020.4.19.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:54:51 2020"}