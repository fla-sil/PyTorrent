{"info": {"author": "OSSO B.V.", "author_email": "dev+osso-docktool@osso.nl", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "Intended Audience :: End Users/Desktop", "Intended Audience :: System Administrators", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Topic :: System :: Filesystems", "Topic :: Utilities"], "description": "osso-docktool :: HDD administration and maintenance\n===================================================\n\n*osso-docktool* provides tools to register disks to the OSSO dashboard, to\nprint labels and wipe disks.\n\nRequirements::\n\n    apt install --no-install-recommends pwgen smartmontools  # for smartctl\n\nExample usage (as root)::\n\n    osso-docktool sdb\n\nExample setup (as root)::\n\n    pip3 install https://downloads.osso.nl/docktool/osso-docktool-latest.tar.gz\n\n    install -dm0700 /etc/osso-docktool\n    install /usr/local/share/doc/osso-docktool/local_settings.py.template \\\n            /etc/osso-docktool/local_settings.py\n\n    ${EDITOR:-vi} /etc/osso-docktool/local_settings.py\n    # ^-- fix hostnames, fix tokens\n    #     get 1 shared token from:\n    #     https://account.example.com/admin/usertoken/token/\n\nExample automation:\n\n``/etc/sudoers`` (amend, using visudo)::\n\n    osso ALL=NOPASSWD: /usr/local/sbin/spawn-root-dbus\n\n``/usr/local/sbin/spawn-root-dbus`` (0700)::\n\n    #!/bin/sh\n\n    # Quick hack to wait for Xauth file to arrive..\n    sleep 10\n\n    /bin/mkdir -p /run/user/0\n    exec /usr/bin/env -i \\\n    DISPLAY=:0 TERM=xterm \\\n    LC_ALL=en_US.UTF-8 \\\n    XAUTHORITY=/run/user/1000/gdm/Xauthority \\\n    /usr/bin/dbus-daemon --session --address=\"unix:path=/run/user/0/bus\"\n\n``/usr/local/sbin/inv-connect.sh`` (0700)::\n\n    #!/bin/sh\n    logger \"Inventory disk $1 inserted\"\n\n    DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/0/bus \\\n    DISPLAY=:0 \\\n    LC_ALL=en_US.UTF-8 \\\n    TERM=xterm-256color \\\n    XAUTHORITY=/run/user/1000/gdm/Xauthority \\\n    gnome-terminal -- /usr/local/bin/osso-docktool \"$1\" || sleep 60\n\n``/usr/local/sbin/inv-disconnect.sh`` (0700)::\n\n    #!/bin/sh\n    exec logger \"Inventory USB disk removed\"\n\n``/etc/udev/rules.d/10-osso-docktool.rules``::\n\n    KERNEL==\"sd[b-z]\", SUBSYSTEM==\"block\", SUBSYSTEMS==\"scsi\", ACTION==\"add\", PROGRAM=\"/usr/local/sbin/inv-connect.sh %k\"\n    SUBSYSTEM==\"block\", SUBSYSTEMS==\"usb\", NAME=\"invdisk\", SYMLINK+=\"invdisk%n\", ACTION==\"remove\",RUN+=\"/usr/local/sbin/inv-disconnect.sh\"\n\nMake sure there is a root dbus-daemon child of our user-systemd.\n\n``.config/systemd/user/spawn-root-dbus.service``::\n\n    [Unit]\n    Description=Auto-start root-dbus\n    After=graphical.target\n\n    [Service]\n    ExecStart=/usr/bin/sudo /usr/local/sbin/spawn-root-dbus\n    Restart=always\n\n    [Install]\n    WantedBy=default.target\n\nEnable it::\n\n    systemd --user daemon-reload\n    systemd --user start spawn-root-dbus.service\n    systemd --user enable spawn-root-dbus.service", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://git.osso.nl/osso-io/docktool", "keywords": "", "license": "Undecided", "maintainer": "", "maintainer_email": "", "name": "osso-docktool", "package_url": "https://pypi.org/project/osso-docktool/", "platform": "", "project_url": "https://pypi.org/project/osso-docktool/", "project_urls": {"Homepage": "https://git.osso.nl/osso-io/docktool"}, "release_url": "https://pypi.org/project/osso-docktool/0.4/", "requires_dist": null, "requires_python": "", "summary": "HDD administration and maintenance", "version": "0.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><em>osso-docktool</em> provides tools to register disks to the OSSO dashboard, to\nprint labels and wipe disks.</p>\n<p>Requirements:</p>\n<pre>apt install --no-install-recommends pwgen smartmontools  # for smartctl\n</pre>\n<p>Example usage (as root):</p>\n<pre>osso-docktool sdb\n</pre>\n<p>Example setup (as root):</p>\n<pre>pip3 install https://downloads.osso.nl/docktool/osso-docktool-latest.tar.gz\n\ninstall -dm0700 /etc/osso-docktool\ninstall /usr/local/share/doc/osso-docktool/local_settings.py.template \\\n        /etc/osso-docktool/local_settings.py\n\n${EDITOR:-vi} /etc/osso-docktool/local_settings.py\n# ^-- fix hostnames, fix tokens\n#     get 1 shared token from:\n#     https://account.example.com/admin/usertoken/token/\n</pre>\n<p>Example automation:</p>\n<p><tt>/etc/sudoers</tt> (amend, using visudo):</p>\n<pre>osso ALL=NOPASSWD: /usr/local/sbin/spawn-root-dbus\n</pre>\n<p><tt><span class=\"pre\">/usr/local/sbin/spawn-root-dbus</span></tt> (0700):</p>\n<pre>#!/bin/sh\n\n# Quick hack to wait for Xauth file to arrive..\nsleep 10\n\n/bin/mkdir -p /run/user/0\nexec /usr/bin/env -i \\\nDISPLAY=:0 TERM=xterm \\\nLC_ALL=en_US.UTF-8 \\\nXAUTHORITY=/run/user/1000/gdm/Xauthority \\\n/usr/bin/dbus-daemon --session --address=\"unix:path=/run/user/0/bus\"\n</pre>\n<p><tt><span class=\"pre\">/usr/local/sbin/inv-connect.sh</span></tt> (0700):</p>\n<pre>#!/bin/sh\nlogger \"Inventory disk $1 inserted\"\n\nDBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/0/bus \\\nDISPLAY=:0 \\\nLC_ALL=en_US.UTF-8 \\\nTERM=xterm-256color \\\nXAUTHORITY=/run/user/1000/gdm/Xauthority \\\ngnome-terminal -- /usr/local/bin/osso-docktool \"$1\" || sleep 60\n</pre>\n<p><tt><span class=\"pre\">/usr/local/sbin/inv-disconnect.sh</span></tt> (0700):</p>\n<pre>#!/bin/sh\nexec logger \"Inventory USB disk removed\"\n</pre>\n<p><tt><span class=\"pre\">/etc/udev/rules.d/10-osso-docktool.rules</span></tt>:</p>\n<pre>KERNEL==\"sd[b-z]\", SUBSYSTEM==\"block\", SUBSYSTEMS==\"scsi\", ACTION==\"add\", PROGRAM=\"/usr/local/sbin/inv-connect.sh %k\"\nSUBSYSTEM==\"block\", SUBSYSTEMS==\"usb\", NAME=\"invdisk\", SYMLINK+=\"invdisk%n\", ACTION==\"remove\",RUN+=\"/usr/local/sbin/inv-disconnect.sh\"\n</pre>\n<p>Make sure there is a root dbus-daemon child of our user-systemd.</p>\n<p><tt><span class=\"pre\">.config/systemd/user/spawn-root-dbus.service</span></tt>:</p>\n<pre>[Unit]\nDescription=Auto-start root-dbus\nAfter=graphical.target\n\n[Service]\nExecStart=/usr/bin/sudo /usr/local/sbin/spawn-root-dbus\nRestart=always\n\n[Install]\nWantedBy=default.target\n</pre>\n<p>Enable it:</p>\n<pre>systemd --user daemon-reload\nsystemd --user start spawn-root-dbus.service\nsystemd --user enable spawn-root-dbus.service\n</pre>\n\n          </div>"}, "last_serial": 6472537, "releases": {"0.4": [{"comment_text": "", "digests": {"md5": "412c15a1c0f115177da3a3e40e688447", "sha256": "247108d4c6a0464aa2aec3cca9763677918ea2bfa239be26a33f3aa2036cab8c"}, "downloads": -1, "filename": "osso-docktool-0.4.tar.gz", "has_sig": false, "md5_digest": "412c15a1c0f115177da3a3e40e688447", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12675, "upload_time": "2019-02-25T15:19:52", "upload_time_iso_8601": "2019-02-25T15:19:52.612668Z", "url": "https://files.pythonhosted.org/packages/96/ab/24bd510ba2c97cb523618deb571415baf8386407e987aeb8a9a3ad3c725a/osso-docktool-0.4.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "412c15a1c0f115177da3a3e40e688447", "sha256": "247108d4c6a0464aa2aec3cca9763677918ea2bfa239be26a33f3aa2036cab8c"}, "downloads": -1, "filename": "osso-docktool-0.4.tar.gz", "has_sig": false, "md5_digest": "412c15a1c0f115177da3a3e40e688447", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12675, "upload_time": "2019-02-25T15:19:52", "upload_time_iso_8601": "2019-02-25T15:19:52.612668Z", "url": "https://files.pythonhosted.org/packages/96/ab/24bd510ba2c97cb523618deb571415baf8386407e987aeb8a9a3ad3c725a/osso-docktool-0.4.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:00:58 2020"}