{"info": {"author": "Atsushi Odagiri", "author_email": "aodagx@gmail.com", "bugtrack_url": null, "classifiers": ["Framework :: Pyramid", "Programming Language :: Python", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.3"], "description": ".. contents::\n\n.. image:: https://travis-ci.org/rebeccaframework/rebecca.repository.png?branch=master\n   :target: https://travis-ci.org/rebeccaframework/rebecca.repository\n\nrebecca.repository\n===========================\n\nAn implementation of repository pattern for SQLAlchemy.\n\n\nGetting Started\n-------------------------------\n\ninstall by pip::\n\n  $ pip install rebecca.repository\n\n\nRepository for SQLAlchemy\n-------------------------------------------\n\nbasic repository\n+++++++++++++++++++++++++++++++++++++++++++++\n\nImplement your model by SQLAlchemy::\n\n  from sqlalchemy import Column, Integer, Unicode\n  from sqlalchemy.ext.declarative import declarative_base\n\n  Base = declarative_base()\n  DBSession = scoped_session(sessionmaker())\n\n  class Person(Base):\n      __tablename__ = \"person\"\n      id = Column(Integer, primary_key=True)\n      name = Column(Unicode(255))\n      age = Column(Integer, default=0)\n      job = Column(Unicode(255))\n\nGet repository::\n\n  from rebecca.repository.sqla import SQLARepository\n\n  person_repository = SQALRepository(Person, Person.id, DBSession())\n\nthis repository for Person model.\nTo get person, use Person.id as key.\n\n\nconditional repository\n+++++++++++++++++++++++++++++++++++++++++++\n\nrepository can configure to set condition::\n\n  person_repository = SQALRepository(Person, Person.id, DBSession(), condition=Person.age>30)\n\n\nrepository factory\n+++++++++++++++++++++++++++++++++++++++++++\n\nIf you pass the parameters during request time, use factory.\n\n::\n\n  class JobPersonRepository(SQLARepository):\n      def __init__(self, db_session, job):\n          super(JobPersonRepository, self).__init__(Person, Person.id, dbsession,\n                                                    condition=Person.job==job)\n\n\nThe parameter ``job`` will be passed from request attribute.\n\nTo register repository factory, add_repository_factory directive::\n\n  config.add_repository_factory(JobPersonRepository, \"job-person\", args=(DBSession,))\n\nor repository_factory_config decorator::\n\n  @repository_factory_config(\"job-person\", args=(DBSession,))\n  class JobPersonRepository(SQLARepository):\n      ....\n\n\nTo create repository from registered factory, call create_repository API::\n\n  job = request.matchdict[\"job\"]\n  repository = create_repository(\"person\", args=(job,))\n\nRepository for Filesystem\n----------------------------------------------\n\n``rebecca.repository.fs.FileSystemRepository`` is repository for FileSystem::\n\n    >>> repository = FileSystemRepository(directory=\"/path/to/data\")\n    >>> item = repository.new_item(\"new-item\")\n    >>> item.data = b\"testing-binary-data\"\n    >>> import transaction\n    >>> transaction.commit()\n\n``FileSystemRepository.new_item`` is create new file system entry.\n``item.data`` is binary data that saved in the file.\nThat's transactional with `transaction <https://pypi.python.org/pypi/transaction>`_ .\n\n.. note::\n\n    ``FileSystemRepository`` uses `repoze.filesafe <https://pypi.python.org/pypi/repoze.filesafe>`_ that not supports py3k yet.\n\n\nrepository interface\n---------------------------------------\n\ncreate object for demonstration::\n\n  person1 = Person(name=u\"person1\")\n  DBSession.add(person1)\n  DBSession.flush() # to generate person.id\n\n\nA repository has dict like interface::\n\n  person_repository[person.id]\n  person_repository.get(person.id)\n\nand utility methods::\n\n  person_repository.get_many([1, 2, 3])\n  new_person = person_repository.new_item()\n\npyramid integration\n----------------------------------------------\n\nrebecca.repository provides directive for pyramid registry.::\n\n  config.include('rebecca.repository')\n  config.add_repository(person_repository, 'person')\n\nor using repository_config decorator::\n\n  @repository_config(name=\"person\", args=(DBSession,))\n  class PersonRepository(SQLARepository):\n      def __init__(self, dbsession):\n          super(PersonRepository, self).__init__(Person, Person.id, dbsession)\n\nTo get registered repositories, use get_repository::\n\n  get_repository(request, 'person')\n\nContributors\n============\n\n- Atsushi Odagiri, Original Author\n\nChangelog\n=========\n\n0.4 (2013-09-22)\n----------------------------\n\n- file repository(yet)\n\n0.3 (2013-08-29)\n--------------------------\n\n- added repository factory API\n- added get_many method\n\n0.2 (2013-08-25)\n-----------------------\n\n- added pyramid config directive and venusian decorator\n\n0.1.1 (2013-08-24)\n-----------------------\n\n- fix packaging bug\n\n0.1 (2013-08-24)\n-----------------------\n\n- first release", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/rebeccaframework/rebecca.repository", "keywords": "", "license": "MIT", "maintainer": null, "maintainer_email": null, "name": "rebecca.repository", "package_url": "https://pypi.org/project/rebecca.repository/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/rebecca.repository/", "project_urls": {"Download": "UNKNOWN", "Homepage": "https://github.com/rebeccaframework/rebecca.repository"}, "release_url": "https://pypi.org/project/rebecca.repository/0.4/", "requires_dist": null, "requires_python": null, "summary": "helper utility for repository pattern of PofEAA", "version": "0.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"contents\">\n<p>Contents</p>\n<ul>\n<li><a href=\"#rebecca-repository\" id=\"id6\" rel=\"nofollow\">rebecca.repository</a><ul>\n<li><a href=\"#getting-started\" id=\"id7\" rel=\"nofollow\">Getting Started</a></li>\n<li><a href=\"#repository-for-sqlalchemy\" id=\"id8\" rel=\"nofollow\">Repository for SQLAlchemy</a><ul>\n<li><a href=\"#basic-repository\" id=\"id9\" rel=\"nofollow\">basic repository</a></li>\n<li><a href=\"#conditional-repository\" id=\"id10\" rel=\"nofollow\">conditional repository</a></li>\n<li><a href=\"#repository-factory\" id=\"id11\" rel=\"nofollow\">repository factory</a></li>\n</ul>\n</li>\n<li><a href=\"#repository-for-filesystem\" id=\"id12\" rel=\"nofollow\">Repository for Filesystem</a></li>\n<li><a href=\"#repository-interface\" id=\"id13\" rel=\"nofollow\">repository interface</a></li>\n<li><a href=\"#pyramid-integration\" id=\"id14\" rel=\"nofollow\">pyramid integration</a></li>\n</ul>\n</li>\n<li><a href=\"#contributors\" id=\"id15\" rel=\"nofollow\">Contributors</a></li>\n<li><a href=\"#changelog\" id=\"id16\" rel=\"nofollow\">Changelog</a><ul>\n<li><a href=\"#id1\" id=\"id17\" rel=\"nofollow\">0.4 (2013-09-22)</a></li>\n<li><a href=\"#id2\" id=\"id18\" rel=\"nofollow\">0.3 (2013-08-29)</a></li>\n<li><a href=\"#id3\" id=\"id19\" rel=\"nofollow\">0.2 (2013-08-25)</a></li>\n<li><a href=\"#id4\" id=\"id20\" rel=\"nofollow\">0.1.1 (2013-08-24)</a></li>\n<li><a href=\"#id5\" id=\"id21\" rel=\"nofollow\">0.1 (2013-08-24)</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<a href=\"https://travis-ci.org/rebeccaframework/rebecca.repository\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/rebeccaframework/rebecca.repository.png?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/45a040bb2bd76daac01e266b3ee89404795020f4/68747470733a2f2f7472617669732d63692e6f72672f726562656363616672616d65776f726b2f726562656363612e7265706f7369746f72792e706e673f6272616e63683d6d6173746572\"></a>\n<div id=\"rebecca-repository\">\n<h2><a href=\"#id6\" rel=\"nofollow\">rebecca.repository</a></h2>\n<p>An implementation of repository pattern for SQLAlchemy.</p>\n<div id=\"getting-started\">\n<h3><a href=\"#id7\" rel=\"nofollow\">Getting Started</a></h3>\n<p>install by pip:</p>\n<pre>$ pip install rebecca.repository\n</pre>\n</div>\n<div id=\"repository-for-sqlalchemy\">\n<h3><a href=\"#id8\" rel=\"nofollow\">Repository for SQLAlchemy</a></h3>\n<div id=\"basic-repository\">\n<h4><a href=\"#id9\" rel=\"nofollow\">basic repository</a></h4>\n<p>Implement your model by SQLAlchemy:</p>\n<pre>from sqlalchemy import Column, Integer, Unicode\nfrom sqlalchemy.ext.declarative import declarative_base\n\nBase = declarative_base()\nDBSession = scoped_session(sessionmaker())\n\nclass Person(Base):\n    __tablename__ = \"person\"\n    id = Column(Integer, primary_key=True)\n    name = Column(Unicode(255))\n    age = Column(Integer, default=0)\n    job = Column(Unicode(255))\n</pre>\n<p>Get repository:</p>\n<pre>from rebecca.repository.sqla import SQLARepository\n\nperson_repository = SQALRepository(Person, Person.id, DBSession())\n</pre>\n<p>this repository for Person model.\nTo get person, use Person.id as key.</p>\n</div>\n<div id=\"conditional-repository\">\n<h4><a href=\"#id10\" rel=\"nofollow\">conditional repository</a></h4>\n<p>repository can configure to set condition:</p>\n<pre>person_repository = SQALRepository(Person, Person.id, DBSession(), condition=Person.age&gt;30)\n</pre>\n</div>\n<div id=\"repository-factory\">\n<h4><a href=\"#id11\" rel=\"nofollow\">repository factory</a></h4>\n<p>If you pass the parameters during request time, use factory.</p>\n<pre>class JobPersonRepository(SQLARepository):\n    def __init__(self, db_session, job):\n        super(JobPersonRepository, self).__init__(Person, Person.id, dbsession,\n                                                  condition=Person.job==job)\n</pre>\n<p>The parameter <tt>job</tt> will be passed from request attribute.</p>\n<p>To register repository factory, add_repository_factory directive:</p>\n<pre>config.add_repository_factory(JobPersonRepository, \"job-person\", args=(DBSession,))\n</pre>\n<p>or repository_factory_config decorator:</p>\n<pre>@repository_factory_config(\"job-person\", args=(DBSession,))\nclass JobPersonRepository(SQLARepository):\n    ....\n</pre>\n<p>To create repository from registered factory, call create_repository API:</p>\n<pre>job = request.matchdict[\"job\"]\nrepository = create_repository(\"person\", args=(job,))\n</pre>\n</div>\n</div>\n<div id=\"repository-for-filesystem\">\n<h3><a href=\"#id12\" rel=\"nofollow\">Repository for Filesystem</a></h3>\n<p><tt>rebecca.repository.fs.FileSystemRepository</tt> is repository for FileSystem:</p>\n<pre>&gt;&gt;&gt; repository = FileSystemRepository(directory=\"/path/to/data\")\n&gt;&gt;&gt; item = repository.new_item(\"new-item\")\n&gt;&gt;&gt; item.data = b\"testing-binary-data\"\n&gt;&gt;&gt; import transaction\n&gt;&gt;&gt; transaction.commit()\n</pre>\n<p><tt>FileSystemRepository.new_item</tt> is create new file system entry.\n<tt>item.data</tt> is binary data that saved in the file.\nThat\u2019s transactional with <a href=\"https://pypi.python.org/pypi/transaction\" rel=\"nofollow\">transaction</a> .</p>\n<div>\n<p>Note</p>\n<p><tt>FileSystemRepository</tt> uses <a href=\"https://pypi.python.org/pypi/repoze.filesafe\" rel=\"nofollow\">repoze.filesafe</a> that not supports py3k yet.</p>\n</div>\n</div>\n<div id=\"repository-interface\">\n<h3><a href=\"#id13\" rel=\"nofollow\">repository interface</a></h3>\n<p>create object for demonstration:</p>\n<pre>person1 = Person(name=u\"person1\")\nDBSession.add(person1)\nDBSession.flush() # to generate person.id\n</pre>\n<p>A repository has dict like interface:</p>\n<pre>person_repository[person.id]\nperson_repository.get(person.id)\n</pre>\n<p>and utility methods:</p>\n<pre>person_repository.get_many([1, 2, 3])\nnew_person = person_repository.new_item()\n</pre>\n</div>\n<div id=\"pyramid-integration\">\n<h3><a href=\"#id14\" rel=\"nofollow\">pyramid integration</a></h3>\n<p>rebecca.repository provides directive for pyramid registry.:</p>\n<pre>config.include('rebecca.repository')\nconfig.add_repository(person_repository, 'person')\n</pre>\n<p>or using repository_config decorator:</p>\n<pre>@repository_config(name=\"person\", args=(DBSession,))\nclass PersonRepository(SQLARepository):\n    def __init__(self, dbsession):\n        super(PersonRepository, self).__init__(Person, Person.id, dbsession)\n</pre>\n<p>To get registered repositories, use get_repository:</p>\n<pre>get_repository(request, 'person')\n</pre>\n</div>\n</div>\n<div id=\"contributors\">\n<h2><a href=\"#id15\" rel=\"nofollow\">Contributors</a></h2>\n<ul>\n<li>Atsushi Odagiri, Original Author</li>\n</ul>\n</div>\n<div id=\"changelog\">\n<h2><a href=\"#id16\" rel=\"nofollow\">Changelog</a></h2>\n<div id=\"id1\">\n<h3><a href=\"#id17\" rel=\"nofollow\">0.4 (2013-09-22)</a></h3>\n<ul>\n<li>file repository(yet)</li>\n</ul>\n</div>\n<div id=\"id2\">\n<h3><a href=\"#id18\" rel=\"nofollow\">0.3 (2013-08-29)</a></h3>\n<ul>\n<li>added repository factory API</li>\n<li>added get_many method</li>\n</ul>\n</div>\n<div id=\"id3\">\n<h3><a href=\"#id19\" rel=\"nofollow\">0.2 (2013-08-25)</a></h3>\n<ul>\n<li>added pyramid config directive and venusian decorator</li>\n</ul>\n</div>\n<div id=\"id4\">\n<h3><a href=\"#id20\" rel=\"nofollow\">0.1.1 (2013-08-24)</a></h3>\n<ul>\n<li>fix packaging bug</li>\n</ul>\n</div>\n<div id=\"id5\">\n<h3><a href=\"#id21\" rel=\"nofollow\">0.1 (2013-08-24)</a></h3>\n<ul>\n<li>first release</li>\n</ul>\n</div>\n</div>\n\n          </div>"}, "last_serial": 871040, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "f57dd0dbe03c661b6bff8a5e0b8eadde", "sha256": "8a22a2c57ac35e29a688af25dfaf2006393a92006bb33706ea2a7bca2d02c8cd"}, "downloads": -1, "filename": "rebecca.repository-0.1.zip", "has_sig": false, "md5_digest": "f57dd0dbe03c661b6bff8a5e0b8eadde", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7046, "upload_time": "2013-08-24T08:04:00", "upload_time_iso_8601": "2013-08-24T08:04:00.330353Z", "url": "https://files.pythonhosted.org/packages/c6/86/8f5d545ae7f2f9b5737283d6b45f70ba3f4ea60011f17440e8a98dd5fbb2/rebecca.repository-0.1.zip", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "2b02783504a1bff6903bc615c322bb46", "sha256": "730dcdafc295610f14aee89d8d1d36607312b06acc5b42af55ba8557cac27727"}, "downloads": -1, "filename": "rebecca.repository-0.1.1.zip", "has_sig": false, "md5_digest": "2b02783504a1bff6903bc615c322bb46", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7926, "upload_time": "2013-08-24T08:18:16", "upload_time_iso_8601": "2013-08-24T08:18:16.793915Z", "url": "https://files.pythonhosted.org/packages/32/ba/8c2e86e7d625366ce72bd4279406512ff2267283219771bc8a4910f5a6cc/rebecca.repository-0.1.1.zip", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "7e09a019ba03f32665270356c8b67ddf", "sha256": "aa59b54d7c42dac748958aeeea22ab9f6448a3e9aab5e2966f2b8c98c6996922"}, "downloads": -1, "filename": "rebecca.repository-0.2.zip", "has_sig": false, "md5_digest": "7e09a019ba03f32665270356c8b67ddf", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9672, "upload_time": "2013-08-25T08:27:47", "upload_time_iso_8601": "2013-08-25T08:27:47.475378Z", "url": "https://files.pythonhosted.org/packages/d6/d3/19d8406aa69f4a8fdb9d223db2ab589f0e58dcf336702393085dca3b5e4d/rebecca.repository-0.2.zip", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "1cc127a2aa262b48598695c946d49c19", "sha256": "169aa5444288ad5c7cf4937c6ec944f9cd3073e258220cd3e50f74c605a45ba9"}, "downloads": -1, "filename": "rebecca.repository-0.3.zip", "has_sig": false, "md5_digest": "1cc127a2aa262b48598695c946d49c19", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10828, "upload_time": "2013-08-28T16:55:37", "upload_time_iso_8601": "2013-08-28T16:55:37.138398Z", "url": "https://files.pythonhosted.org/packages/b7/83/b5a080fc8e502f3dbb29e39f0353f329808312a239d7d3835a0fed86d86e/rebecca.repository-0.3.zip", "yanked": false}], "0.4": [{"comment_text": "", "digests": {"md5": "bbb57efc8fa3060d69f09dcd49341b38", "sha256": "5f17f9d561dbfd674a1bad72e367de5ae1719061bb4f8ab886d40f37a24e6488"}, "downloads": -1, "filename": "rebecca.repository-0.4-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "bbb57efc8fa3060d69f09dcd49341b38", "packagetype": "bdist_wheel", "python_version": "2.7", "requires_python": null, "size": 9182, "upload_time": "2013-09-22T14:22:44", "upload_time_iso_8601": "2013-09-22T14:22:44.682127Z", "url": "https://files.pythonhosted.org/packages/48/2b/83477fd74c641d8619038f3c168b63fa7025be9ef9ff43a30b2e2e29caea/rebecca.repository-0.4-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c265ee4ae82b85b177bee560aba738e4", "sha256": "b50a1e1f08c6220f78fd3dd00024a6ed802993c23e141fc4859d0aed2d23b48b"}, "downloads": -1, "filename": "rebecca.repository-0.4.zip", "has_sig": false, "md5_digest": "c265ee4ae82b85b177bee560aba738e4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12411, "upload_time": "2013-09-22T14:22:42", "upload_time_iso_8601": "2013-09-22T14:22:42.526567Z", "url": "https://files.pythonhosted.org/packages/11/1b/13e4b2bb993f5c4ebc2e054b0c799433238dcb1a1aedeacfa4e43b640427/rebecca.repository-0.4.zip", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "bbb57efc8fa3060d69f09dcd49341b38", "sha256": "5f17f9d561dbfd674a1bad72e367de5ae1719061bb4f8ab886d40f37a24e6488"}, "downloads": -1, "filename": "rebecca.repository-0.4-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "bbb57efc8fa3060d69f09dcd49341b38", "packagetype": "bdist_wheel", "python_version": "2.7", "requires_python": null, "size": 9182, "upload_time": "2013-09-22T14:22:44", "upload_time_iso_8601": "2013-09-22T14:22:44.682127Z", "url": "https://files.pythonhosted.org/packages/48/2b/83477fd74c641d8619038f3c168b63fa7025be9ef9ff43a30b2e2e29caea/rebecca.repository-0.4-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c265ee4ae82b85b177bee560aba738e4", "sha256": "b50a1e1f08c6220f78fd3dd00024a6ed802993c23e141fc4859d0aed2d23b48b"}, "downloads": -1, "filename": "rebecca.repository-0.4.zip", "has_sig": false, "md5_digest": "c265ee4ae82b85b177bee560aba738e4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12411, "upload_time": "2013-09-22T14:22:42", "upload_time_iso_8601": "2013-09-22T14:22:42.526567Z", "url": "https://files.pythonhosted.org/packages/11/1b/13e4b2bb993f5c4ebc2e054b0c799433238dcb1a1aedeacfa4e43b640427/rebecca.repository-0.4.zip", "yanked": false}], "timestamp": "Fri May  8 03:06:17 2020"}