{"info": {"author": "Yves Serrano", "author_email": "ys@taywa.ch", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Environment :: Web Environment", "Framework :: Django", "Framework :: Django :: 1.11", "Framework :: Django :: 2.0", "Framework :: Django :: 2.1", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "# django-oscar-saferpay\n\n*Saferpay dashboard for django-oscar*\n\nThis package is a [django-oscar](http://oscarcommerce.com) dashboard component for saferpay.  \nFirst follow the install instructions for django-saferpay ([pypi](https://pypi.org/project/django-saferpay/), [github](https://github.com/taywa/django-saferpay))\n.\n\nInstall with `pip install django-oscar-saferpay`.\n\nUpdate your `settings.py`:\n\n```python\nINSTALLED_APPS = [\n    ...\n    'saferpay_oscar',\n]\n```\n\nin your project `urls.py`:\n\n```python\nfrom saferpay_oscar.dashboard.app import application as saferpay_dashboard_application\n...\n        url(r'^dashboard/saferpay/', saferpay_dashboard_application.urls),\n...\n```\n\nadd a new payment method to oscar in `settings.py`:\n\n```python\n...\nOSCAR_PAYMENT_METHODS = (\n    ('saferpay', _('Creditcard (Visa, Mastercard, etc..)')),  # all your activated saferpay methods\n)\n...\n```\n\n## Example implementation\n\nHere is an example implementation not meant for for copy & paste. A oscar shop can be setup\ntotally different.\n\n### Update your checkout `myshop/checkout/app.py`\n\n```python\n\nfrom django.conf.urls import url\nfrom oscar.apps.checkout import app\nfrom myshop.checkout import views\n\n\nclass CheckoutApplication(app.CheckoutApplication):\n    shipping_address_view = views.ShippingAddressView\n    shipping_method_view = views.ShippingMethodView\n    payment_details_view = views.PaymentDetailsView\n    payment_method_view = views.PaymentMethodView\n    preview_view = views.PreviewView  # normally just in PaymentDetailsView, custom to this use-case\n    payment_capture_view = views.PaymentCapture  # new view not in oscar\n    thankyou_view = views.ThankYouView\n    payment_failed_view = views.PaymentFailed  # new view not in oscar\n\n    def get_urls(self):\n        urls = [\n            url(r'^$', self.index_view.as_view(), name='index'),\n\n            # Shipping/user address views\n            url(r'shipping-address/$', self.shipping_address_view.as_view(), name='shipping-address'),\n            url(r'user-address/edit/(?P<pk>\\d+)/$', self.user_address_update_view.as_view(), name='user-address-update'),\n            url(r'user-address/delete/(?P<pk>\\d+)/$', self.user_address_delete_view.as_view(), name='user-address-delete'),\n\n            # Shipping method views\n            url(r'shipping-method/$', self.shipping_method_view.as_view(), name='shipping-method'),\n\n            # Payment views\n            url(r'payment-details/$', self.payment_details_view.as_view(), name='payment-details'),\n            url(r'payment-method/$', self.payment_method_view.as_view(), name='payment-method'),\n            url(r'payment-failed/$', self.payment_failed_view.as_view(), name='payment-failed'),\n\n            # Preview and thankyou\n            url(r'preview/$', self.preview_view.as_view(), name='preview'),\n            url(r'payment-capture/$', self.payment_capture_view.as_view(), name='payment-capture'),\n            url(r'thank-you/$', self.thankyou_view.as_view(), name='thank-you'),\n        ]\n        return self.post_process_urls(urls)\n\napplication = CheckoutApplication()\n```\n\n### Update your views\n\nAdd it to your custom extended oscar checkout app views.\n\nin `myshop/checkout/views.py`:\n\n```python\n...\nfrom saferpay.gateway import SaferpayService\nfrom saferpay import execptions as sp_execptions\n...\n\ndef billing_address_for_saferpay(billing_address):\n    data = {}\n    data['FirstName'] = billing_address.first_name\n    data['LastName'] = billing_address.last_name\n    data['Street'] = billing_address.line1\n    if billing_address.line2:\n        data['Street2'] = billing_address.line2\n    data['Zip'] = billing_address.postcode\n    data['City'] = billing_address.city\n    return data\n\n#\u00a0in your PaymentDetailsView in handle_payment()\nclass PaymentDetailsView(OrderPlacementMixin, generic.TemplateView):\n    ...\n\n    def handle_payment(self, order_number, total, **kwargs):\n        payment_method = self.checkout_session._get('payment', 'payment_method')\n        # invoice\n        if payment_method == 'invoice':\n            pass\n            # nothing to do for invoice, no money collected\n\n        # saferpay\n        elif payment_method == 'saferpay\n            language_code = translation.get_language()[0:2]\n            saferpay_service = SaferpayService(\n                order_id=order_number, amount=total.incl_tax, currency=total.currency,\n                language_code=language_code\n            )\n            billing_address = self.get_billing_address(\n                shipping_address=self.get_shipping_address(self.request.basket)\n            )\n            billing_address_data = billing_address_for_saferpay(billing_address)\n            payload = saferpay_service.payload_init(billing_address=billing_address_data)\n\n            # redirects to payment page\n            try:\n                token = saferpay_service.paymentpage_init(payload)\n                self.checkout_session._set('payment', 'saferpay_token', token)\n                raise RedirectRequired(saferpay_service.paymentpage_redirect().url)\n            except sp_execptions.GatewayError as e:\n                self.restore_frozen_basket()\n                return redirect(reverse_lazy('checkout:payment-failed'))\n\n# new class\nclass PaymentCapture(views.PaymentDetailsView):\n    success_url = reverse_lazy('checkout:thank-you')\n    pre_conditions = []\n\n    def load_frozen_basket(self, basket_id):\n        # Lookup the frozen basket that this txn corresponds to\n        try:\n            basket = Basket.objects.get(id=basket_id, status=Basket.FROZEN)\n        except Basket.DoesNotExist:\n            return None\n\n        if Selector:\n            basket.strategy = Selector().strategy(self.request)\n\n        Applicator().apply(basket, self.request.user, request=self.request)\n\n        return basket\n\n    def get(self, request, *args, **kwargs):\n        token = self.checkout_session._get('payment', 'saferpay_token')\n        saferpay_service = SaferpayService.init_from_transaction(token=token)\n        try:\n            status = saferpay_service.paymentpage_assert()\n        except (\n            sp_execptions.GatewayError, sp_execptions.TransactionDeclined,\n            sp_execptions.UnableToTakePayment, sp_execptions.PaymentError\n        ) as e:\n            self.restore_frozen_basket()\n            return redirect(reverse_lazy('checkout:payment-failed'))\n        if status == 'CAPTURED':\n            source_type, is_created = models.SourceType.objects.get_or_create(\n                name='saferpay')\n            source = source_type.sources.model(\n                source_type=source_type,\n                amount_allocated=saferpay_service.amount,\n                currency=saferpay_service.currency\n            )\n            self.add_payment_source(source)\n            self.add_payment_event('CAPTURED', saferpay_service.amount)\n\n            post_payment.send_robust(sender=self, view=self)\n\n            # If all is ok with payment, try and place order\n            logger.info(\"Order #%s: payment successful, placing order\", saferpay_service.order_id)\n\n            try:\n                basket_id = self.checkout_session.get_submitted_basket_id()\n                basket = self.load_frozen_basket(basket_id)\n                shipping_address = self.get_shipping_address(basket)\n                billing_address = self.get_billing_address(shipping_address=shipping_address)\n                shipping_method = self.get_shipping_method(\n                    basket=basket, shipping_address=shipping_address\n                )\n                shipping_charge = shipping_method.calculate(basket)\n                order_total = Price(\n                    saferpay_service.currency, saferpay_service.amount, saferpay_service.amount\n                )\n                order_kwargs = self.checkout_session._get('payment', 'order_kwargs')\n                order_number = saferpay_service.order_id\n                return self.handle_order_placement(\n                    order_number, self.request.user,\n                    basket, shipping_address, shipping_method, shipping_charge,\n                    billing_address, order_total, **order_kwargs\n                )\n            except UnableToPlaceOrder as e:\n                # It's possible that something will go wrong while trying to\n                # actually place an order.\n                msg = six.text_type(e)\n                logger.error(\"Order #%s: unable to place order - %s\",\n                             order_number, msg, exc_info=True)\n                self.restore_frozen_basket()\n                return self.render_preview(\n                    self.request, error=msg\n                )\n\n# updated to add payment_method\nclass ThankYouView(CheckoutSessionMixin, views.ThankYouView):\n    def get_context_data(self, **kwargs):\n        ctx = super().get_context_data()\n        ctx['payment_method'] = self.checkout_session._get('payment', 'payment_method')\n        ctx.update(kwargs)\n        return ctx\n\n# new class, redirect to preview on payment failure\nclass PaymentFailed(OrderPlacementMixin, View):\n    def get(self, request, *args, **kwargs):\n        self.restore_frozen_basket()\n        error_txt = _(\"The payment was not successful, please try again or use a different payment method.\")\n        messages.error(\n            request,\n            error_txt\n        )\n        return redirect(reverse_lazy('checkout:preview'))\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/taywa/django-oscar-saferpay", "keywords": "saferpay,payment", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "django-oscar-saferpay", "package_url": "https://pypi.org/project/django-oscar-saferpay/", "platform": "", "project_url": "https://pypi.org/project/django-oscar-saferpay/", "project_urls": {"Homepage": "https://github.com/taywa/django-oscar-saferpay"}, "release_url": "https://pypi.org/project/django-oscar-saferpay/0.1.0/", "requires_dist": null, "requires_python": "", "summary": "Saferpay payment dashboard for django-oscar.", "version": "0.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>django-oscar-saferpay</h1>\n<p><em>Saferpay dashboard for django-oscar</em></p>\n<p>This package is a <a href=\"http://oscarcommerce.com\" rel=\"nofollow\">django-oscar</a> dashboard component for saferpay.<br>\nFirst follow the install instructions for django-saferpay (<a href=\"https://pypi.org/project/django-saferpay/\" rel=\"nofollow\">pypi</a>, <a href=\"https://github.com/taywa/django-saferpay\" rel=\"nofollow\">github</a>)\n.</p>\n<p>Install with <code>pip install django-oscar-saferpay</code>.</p>\n<p>Update your <code>settings.py</code>:</p>\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"o\">...</span>\n    <span class=\"s1\">'saferpay_oscar'</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n</pre>\n<p>in your project <code>urls.py</code>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">saferpay_oscar.dashboard.app</span> <span class=\"kn\">import</span> <span class=\"n\">application</span> <span class=\"k\">as</span> <span class=\"n\">saferpay_dashboard_application</span>\n<span class=\"o\">...</span>\n        <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'^dashboard/saferpay/'</span><span class=\"p\">,</span> <span class=\"n\">saferpay_dashboard_application</span><span class=\"o\">.</span><span class=\"n\">urls</span><span class=\"p\">),</span>\n<span class=\"o\">...</span>\n</pre>\n<p>add a new payment method to oscar in <code>settings.py</code>:</p>\n<pre><span class=\"o\">...</span>\n<span class=\"n\">OSCAR_PAYMENT_METHODS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"p\">(</span><span class=\"s1\">'saferpay'</span><span class=\"p\">,</span> <span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s1\">'Creditcard (Visa, Mastercard, etc..)'</span><span class=\"p\">)),</span>  <span class=\"c1\"># all your activated saferpay methods</span>\n<span class=\"p\">)</span>\n<span class=\"o\">...</span>\n</pre>\n<h2>Example implementation</h2>\n<p>Here is an example implementation not meant for for copy &amp; paste. A oscar shop can be setup\ntotally different.</p>\n<h3>Update your checkout <code>myshop/checkout/app.py</code></h3>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.conf.urls</span> <span class=\"kn\">import</span> <span class=\"n\">url</span>\n<span class=\"kn\">from</span> <span class=\"nn\">oscar.apps.checkout</span> <span class=\"kn\">import</span> <span class=\"n\">app</span>\n<span class=\"kn\">from</span> <span class=\"nn\">myshop.checkout</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">CheckoutApplication</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">CheckoutApplication</span><span class=\"p\">):</span>\n    <span class=\"n\">shipping_address_view</span> <span class=\"o\">=</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">ShippingAddressView</span>\n    <span class=\"n\">shipping_method_view</span> <span class=\"o\">=</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">ShippingMethodView</span>\n    <span class=\"n\">payment_details_view</span> <span class=\"o\">=</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">PaymentDetailsView</span>\n    <span class=\"n\">payment_method_view</span> <span class=\"o\">=</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">PaymentMethodView</span>\n    <span class=\"n\">preview_view</span> <span class=\"o\">=</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">PreviewView</span>  <span class=\"c1\"># normally just in PaymentDetailsView, custom to this use-case</span>\n    <span class=\"n\">payment_capture_view</span> <span class=\"o\">=</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">PaymentCapture</span>  <span class=\"c1\"># new view not in oscar</span>\n    <span class=\"n\">thankyou_view</span> <span class=\"o\">=</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">ThankYouView</span>\n    <span class=\"n\">payment_failed_view</span> <span class=\"o\">=</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">PaymentFailed</span>  <span class=\"c1\"># new view not in oscar</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get_urls</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">urls</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'^$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">index_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'index'</span><span class=\"p\">),</span>\n\n            <span class=\"c1\"># Shipping/user address views</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'shipping-address/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shipping_address_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'shipping-address'</span><span class=\"p\">),</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'user-address/edit/(?P&lt;pk&gt;\\d+)/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">user_address_update_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'user-address-update'</span><span class=\"p\">),</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'user-address/delete/(?P&lt;pk&gt;\\d+)/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">user_address_delete_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'user-address-delete'</span><span class=\"p\">),</span>\n\n            <span class=\"c1\"># Shipping method views</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'shipping-method/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shipping_method_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'shipping-method'</span><span class=\"p\">),</span>\n\n            <span class=\"c1\"># Payment views</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'payment-details/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">payment_details_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'payment-details'</span><span class=\"p\">),</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'payment-method/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">payment_method_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'payment-method'</span><span class=\"p\">),</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'payment-failed/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">payment_failed_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'payment-failed'</span><span class=\"p\">),</span>\n\n            <span class=\"c1\"># Preview and thankyou</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'preview/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">preview_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'preview'</span><span class=\"p\">),</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'payment-capture/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">payment_capture_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'payment-capture'</span><span class=\"p\">),</span>\n            <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'thank-you/$'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">thankyou_view</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'thank-you'</span><span class=\"p\">),</span>\n        <span class=\"p\">]</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">post_process_urls</span><span class=\"p\">(</span><span class=\"n\">urls</span><span class=\"p\">)</span>\n\n<span class=\"n\">application</span> <span class=\"o\">=</span> <span class=\"n\">CheckoutApplication</span><span class=\"p\">()</span>\n</pre>\n<h3>Update your views</h3>\n<p>Add it to your custom extended oscar checkout app views.</p>\n<p>in <code>myshop/checkout/views.py</code>:</p>\n<pre><span class=\"o\">...</span>\n<span class=\"kn\">from</span> <span class=\"nn\">saferpay.gateway</span> <span class=\"kn\">import</span> <span class=\"n\">SaferpayService</span>\n<span class=\"kn\">from</span> <span class=\"nn\">saferpay</span> <span class=\"kn\">import</span> <span class=\"n\">execptions</span> <span class=\"k\">as</span> <span class=\"n\">sp_execptions</span>\n<span class=\"o\">...</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">billing_address_for_saferpay</span><span class=\"p\">(</span><span class=\"n\">billing_address</span><span class=\"p\">):</span>\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n    <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'FirstName'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">billing_address</span><span class=\"o\">.</span><span class=\"n\">first_name</span>\n    <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'LastName'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">billing_address</span><span class=\"o\">.</span><span class=\"n\">last_name</span>\n    <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'Street'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">billing_address</span><span class=\"o\">.</span><span class=\"n\">line1</span>\n    <span class=\"k\">if</span> <span class=\"n\">billing_address</span><span class=\"o\">.</span><span class=\"n\">line2</span><span class=\"p\">:</span>\n        <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'Street2'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">billing_address</span><span class=\"o\">.</span><span class=\"n\">line2</span>\n    <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'Zip'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">billing_address</span><span class=\"o\">.</span><span class=\"n\">postcode</span>\n    <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">'City'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">billing_address</span><span class=\"o\">.</span><span class=\"n\">city</span>\n    <span class=\"k\">return</span> <span class=\"n\">data</span>\n\n<span class=\"c1\">#\u00a0in your PaymentDetailsView in handle_payment()</span>\n<span class=\"k\">class</span> <span class=\"nc\">PaymentDetailsView</span><span class=\"p\">(</span><span class=\"n\">OrderPlacementMixin</span><span class=\"p\">,</span> <span class=\"n\">generic</span><span class=\"o\">.</span><span class=\"n\">TemplateView</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">handle_payment</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">order_number</span><span class=\"p\">,</span> <span class=\"n\">total</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"n\">payment_method</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">checkout_session</span><span class=\"o\">.</span><span class=\"n\">_get</span><span class=\"p\">(</span><span class=\"s1\">'payment'</span><span class=\"p\">,</span> <span class=\"s1\">'payment_method'</span><span class=\"p\">)</span>\n        <span class=\"c1\"># invoice</span>\n        <span class=\"k\">if</span> <span class=\"n\">payment_method</span> <span class=\"o\">==</span> <span class=\"s1\">'invoice'</span><span class=\"p\">:</span>\n            <span class=\"k\">pass</span>\n            <span class=\"c1\"># nothing to do for invoice, no money collected</span>\n\n        <span class=\"c1\"># saferpay</span>\n        <span class=\"k\">elif</span> <span class=\"n\">payment_method</span> <span class=\"o\">==</span> <span class=\"s1\">'saferpay</span>\n            <span class=\"n\">language_code</span> <span class=\"o\">=</span> <span class=\"n\">translation</span><span class=\"o\">.</span><span class=\"n\">get_language</span><span class=\"p\">()[</span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n            <span class=\"n\">saferpay_service</span> <span class=\"o\">=</span> <span class=\"n\">SaferpayService</span><span class=\"p\">(</span>\n                <span class=\"n\">order_id</span><span class=\"o\">=</span><span class=\"n\">order_number</span><span class=\"p\">,</span> <span class=\"n\">amount</span><span class=\"o\">=</span><span class=\"n\">total</span><span class=\"o\">.</span><span class=\"n\">incl_tax</span><span class=\"p\">,</span> <span class=\"n\">currency</span><span class=\"o\">=</span><span class=\"n\">total</span><span class=\"o\">.</span><span class=\"n\">currency</span><span class=\"p\">,</span>\n                <span class=\"n\">language_code</span><span class=\"o\">=</span><span class=\"n\">language_code</span>\n            <span class=\"p\">)</span>\n            <span class=\"n\">billing_address</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get_billing_address</span><span class=\"p\">(</span>\n                <span class=\"n\">shipping_address</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get_shipping_address</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">basket</span><span class=\"p\">)</span>\n            <span class=\"p\">)</span>\n            <span class=\"n\">billing_address_data</span> <span class=\"o\">=</span> <span class=\"n\">billing_address_for_saferpay</span><span class=\"p\">(</span><span class=\"n\">billing_address</span><span class=\"p\">)</span>\n            <span class=\"n\">payload</span> <span class=\"o\">=</span> <span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">payload_init</span><span class=\"p\">(</span><span class=\"n\">billing_address</span><span class=\"o\">=</span><span class=\"n\">billing_address_data</span><span class=\"p\">)</span>\n\n            <span class=\"c1\"># redirects to payment page</span>\n            <span class=\"k\">try</span><span class=\"p\">:</span>\n                <span class=\"n\">token</span> <span class=\"o\">=</span> <span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">paymentpage_init</span><span class=\"p\">(</span><span class=\"n\">payload</span><span class=\"p\">)</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">checkout_session</span><span class=\"o\">.</span><span class=\"n\">_set</span><span class=\"p\">(</span><span class=\"s1\">'payment'</span><span class=\"p\">,</span> <span class=\"s1\">'saferpay_token'</span><span class=\"p\">,</span> <span class=\"n\">token</span><span class=\"p\">)</span>\n                <span class=\"k\">raise</span> <span class=\"n\">RedirectRequired</span><span class=\"p\">(</span><span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">paymentpage_redirect</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">url</span><span class=\"p\">)</span>\n            <span class=\"k\">except</span> <span class=\"n\">sp_execptions</span><span class=\"o\">.</span><span class=\"n\">GatewayError</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">restore_frozen_basket</span><span class=\"p\">()</span>\n                <span class=\"k\">return</span> <span class=\"n\">redirect</span><span class=\"p\">(</span><span class=\"n\">reverse_lazy</span><span class=\"p\">(</span><span class=\"s1\">'checkout:payment-failed'</span><span class=\"p\">))</span>\n\n<span class=\"c1\"># new class</span>\n<span class=\"k\">class</span> <span class=\"nc\">PaymentCapture</span><span class=\"p\">(</span><span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">PaymentDetailsView</span><span class=\"p\">):</span>\n    <span class=\"n\">success_url</span> <span class=\"o\">=</span> <span class=\"n\">reverse_lazy</span><span class=\"p\">(</span><span class=\"s1\">'checkout:thank-you'</span><span class=\"p\">)</span>\n    <span class=\"n\">pre_conditions</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">load_frozen_basket</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">basket_id</span><span class=\"p\">):</span>\n        <span class=\"c1\"># Lookup the frozen basket that this txn corresponds to</span>\n        <span class=\"k\">try</span><span class=\"p\">:</span>\n            <span class=\"n\">basket</span> <span class=\"o\">=</span> <span class=\"n\">Basket</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"n\">basket_id</span><span class=\"p\">,</span> <span class=\"n\">status</span><span class=\"o\">=</span><span class=\"n\">Basket</span><span class=\"o\">.</span><span class=\"n\">FROZEN</span><span class=\"p\">)</span>\n        <span class=\"k\">except</span> <span class=\"n\">Basket</span><span class=\"o\">.</span><span class=\"n\">DoesNotExist</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"kc\">None</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">Selector</span><span class=\"p\">:</span>\n            <span class=\"n\">basket</span><span class=\"o\">.</span><span class=\"n\">strategy</span> <span class=\"o\">=</span> <span class=\"n\">Selector</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">strategy</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"p\">)</span>\n\n        <span class=\"n\">Applicator</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">apply</span><span class=\"p\">(</span><span class=\"n\">basket</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"p\">)</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">basket</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"n\">token</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">checkout_session</span><span class=\"o\">.</span><span class=\"n\">_get</span><span class=\"p\">(</span><span class=\"s1\">'payment'</span><span class=\"p\">,</span> <span class=\"s1\">'saferpay_token'</span><span class=\"p\">)</span>\n        <span class=\"n\">saferpay_service</span> <span class=\"o\">=</span> <span class=\"n\">SaferpayService</span><span class=\"o\">.</span><span class=\"n\">init_from_transaction</span><span class=\"p\">(</span><span class=\"n\">token</span><span class=\"o\">=</span><span class=\"n\">token</span><span class=\"p\">)</span>\n        <span class=\"k\">try</span><span class=\"p\">:</span>\n            <span class=\"n\">status</span> <span class=\"o\">=</span> <span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">paymentpage_assert</span><span class=\"p\">()</span>\n        <span class=\"k\">except</span> <span class=\"p\">(</span>\n            <span class=\"n\">sp_execptions</span><span class=\"o\">.</span><span class=\"n\">GatewayError</span><span class=\"p\">,</span> <span class=\"n\">sp_execptions</span><span class=\"o\">.</span><span class=\"n\">TransactionDeclined</span><span class=\"p\">,</span>\n            <span class=\"n\">sp_execptions</span><span class=\"o\">.</span><span class=\"n\">UnableToTakePayment</span><span class=\"p\">,</span> <span class=\"n\">sp_execptions</span><span class=\"o\">.</span><span class=\"n\">PaymentError</span>\n        <span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">restore_frozen_basket</span><span class=\"p\">()</span>\n            <span class=\"k\">return</span> <span class=\"n\">redirect</span><span class=\"p\">(</span><span class=\"n\">reverse_lazy</span><span class=\"p\">(</span><span class=\"s1\">'checkout:payment-failed'</span><span class=\"p\">))</span>\n        <span class=\"k\">if</span> <span class=\"n\">status</span> <span class=\"o\">==</span> <span class=\"s1\">'CAPTURED'</span><span class=\"p\">:</span>\n            <span class=\"n\">source_type</span><span class=\"p\">,</span> <span class=\"n\">is_created</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">SourceType</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get_or_create</span><span class=\"p\">(</span>\n                <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'saferpay'</span><span class=\"p\">)</span>\n            <span class=\"n\">source</span> <span class=\"o\">=</span> <span class=\"n\">source_type</span><span class=\"o\">.</span><span class=\"n\">sources</span><span class=\"o\">.</span><span class=\"n\">model</span><span class=\"p\">(</span>\n                <span class=\"n\">source_type</span><span class=\"o\">=</span><span class=\"n\">source_type</span><span class=\"p\">,</span>\n                <span class=\"n\">amount_allocated</span><span class=\"o\">=</span><span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">amount</span><span class=\"p\">,</span>\n                <span class=\"n\">currency</span><span class=\"o\">=</span><span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">currency</span>\n            <span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_payment_source</span><span class=\"p\">(</span><span class=\"n\">source</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_payment_event</span><span class=\"p\">(</span><span class=\"s1\">'CAPTURED'</span><span class=\"p\">,</span> <span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">amount</span><span class=\"p\">)</span>\n\n            <span class=\"n\">post_payment</span><span class=\"o\">.</span><span class=\"n\">send_robust</span><span class=\"p\">(</span><span class=\"n\">sender</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">view</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"p\">)</span>\n\n            <span class=\"c1\"># If all is ok with payment, try and place order</span>\n            <span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"s2\">\"Order #</span><span class=\"si\">%s</span><span class=\"s2\">: payment successful, placing order\"</span><span class=\"p\">,</span> <span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">order_id</span><span class=\"p\">)</span>\n\n            <span class=\"k\">try</span><span class=\"p\">:</span>\n                <span class=\"n\">basket_id</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">checkout_session</span><span class=\"o\">.</span><span class=\"n\">get_submitted_basket_id</span><span class=\"p\">()</span>\n                <span class=\"n\">basket</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">load_frozen_basket</span><span class=\"p\">(</span><span class=\"n\">basket_id</span><span class=\"p\">)</span>\n                <span class=\"n\">shipping_address</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get_shipping_address</span><span class=\"p\">(</span><span class=\"n\">basket</span><span class=\"p\">)</span>\n                <span class=\"n\">billing_address</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get_billing_address</span><span class=\"p\">(</span><span class=\"n\">shipping_address</span><span class=\"o\">=</span><span class=\"n\">shipping_address</span><span class=\"p\">)</span>\n                <span class=\"n\">shipping_method</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get_shipping_method</span><span class=\"p\">(</span>\n                    <span class=\"n\">basket</span><span class=\"o\">=</span><span class=\"n\">basket</span><span class=\"p\">,</span> <span class=\"n\">shipping_address</span><span class=\"o\">=</span><span class=\"n\">shipping_address</span>\n                <span class=\"p\">)</span>\n                <span class=\"n\">shipping_charge</span> <span class=\"o\">=</span> <span class=\"n\">shipping_method</span><span class=\"o\">.</span><span class=\"n\">calculate</span><span class=\"p\">(</span><span class=\"n\">basket</span><span class=\"p\">)</span>\n                <span class=\"n\">order_total</span> <span class=\"o\">=</span> <span class=\"n\">Price</span><span class=\"p\">(</span>\n                    <span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">currency</span><span class=\"p\">,</span> <span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">amount</span><span class=\"p\">,</span> <span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">amount</span>\n                <span class=\"p\">)</span>\n                <span class=\"n\">order_kwargs</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">checkout_session</span><span class=\"o\">.</span><span class=\"n\">_get</span><span class=\"p\">(</span><span class=\"s1\">'payment'</span><span class=\"p\">,</span> <span class=\"s1\">'order_kwargs'</span><span class=\"p\">)</span>\n                <span class=\"n\">order_number</span> <span class=\"o\">=</span> <span class=\"n\">saferpay_service</span><span class=\"o\">.</span><span class=\"n\">order_id</span>\n                <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">handle_order_placement</span><span class=\"p\">(</span>\n                    <span class=\"n\">order_number</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"p\">,</span>\n                    <span class=\"n\">basket</span><span class=\"p\">,</span> <span class=\"n\">shipping_address</span><span class=\"p\">,</span> <span class=\"n\">shipping_method</span><span class=\"p\">,</span> <span class=\"n\">shipping_charge</span><span class=\"p\">,</span>\n                    <span class=\"n\">billing_address</span><span class=\"p\">,</span> <span class=\"n\">order_total</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">order_kwargs</span>\n                <span class=\"p\">)</span>\n            <span class=\"k\">except</span> <span class=\"n\">UnableToPlaceOrder</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n                <span class=\"c1\"># It's possible that something will go wrong while trying to</span>\n                <span class=\"c1\"># actually place an order.</span>\n                <span class=\"n\">msg</span> <span class=\"o\">=</span> <span class=\"n\">six</span><span class=\"o\">.</span><span class=\"n\">text_type</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span>\n                <span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">error</span><span class=\"p\">(</span><span class=\"s2\">\"Order #</span><span class=\"si\">%s</span><span class=\"s2\">: unable to place order - </span><span class=\"si\">%s</span><span class=\"s2\">\"</span><span class=\"p\">,</span>\n                             <span class=\"n\">order_number</span><span class=\"p\">,</span> <span class=\"n\">msg</span><span class=\"p\">,</span> <span class=\"n\">exc_info</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">restore_frozen_basket</span><span class=\"p\">()</span>\n                <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">render_preview</span><span class=\"p\">(</span>\n                    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">error</span><span class=\"o\">=</span><span class=\"n\">msg</span>\n                <span class=\"p\">)</span>\n\n<span class=\"c1\"># updated to add payment_method</span>\n<span class=\"k\">class</span> <span class=\"nc\">ThankYouView</span><span class=\"p\">(</span><span class=\"n\">CheckoutSessionMixin</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">ThankYouView</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">get_context_data</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"n\">ctx</span> <span class=\"o\">=</span> <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">get_context_data</span><span class=\"p\">()</span>\n        <span class=\"n\">ctx</span><span class=\"p\">[</span><span class=\"s1\">'payment_method'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">checkout_session</span><span class=\"o\">.</span><span class=\"n\">_get</span><span class=\"p\">(</span><span class=\"s1\">'payment'</span><span class=\"p\">,</span> <span class=\"s1\">'payment_method'</span><span class=\"p\">)</span>\n        <span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">ctx</span>\n\n<span class=\"c1\"># new class, redirect to preview on payment failure</span>\n<span class=\"k\">class</span> <span class=\"nc\">PaymentFailed</span><span class=\"p\">(</span><span class=\"n\">OrderPlacementMixin</span><span class=\"p\">,</span> <span class=\"n\">View</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">restore_frozen_basket</span><span class=\"p\">()</span>\n        <span class=\"n\">error_txt</span> <span class=\"o\">=</span> <span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s2\">\"The payment was not successful, please try again or use a different payment method.\"</span><span class=\"p\">)</span>\n        <span class=\"n\">messages</span><span class=\"o\">.</span><span class=\"n\">error</span><span class=\"p\">(</span>\n            <span class=\"n\">request</span><span class=\"p\">,</span>\n            <span class=\"n\">error_txt</span>\n        <span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">redirect</span><span class=\"p\">(</span><span class=\"n\">reverse_lazy</span><span class=\"p\">(</span><span class=\"s1\">'checkout:preview'</span><span class=\"p\">))</span>\n</pre>\n\n          </div>"}, "last_serial": 4803259, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "abe1d1b52bdb6797de47b12faece62cc", "sha256": "0ed59afb5163d091b6b34e55ffdb6349895ae4f7c3a1437fae93c61ad8e4bd3c"}, "downloads": -1, "filename": "django-oscar-saferpay-0.1.0.tar.gz", "has_sig": false, "md5_digest": "abe1d1b52bdb6797de47b12faece62cc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6334, "upload_time": "2019-02-10T20:48:12", "upload_time_iso_8601": "2019-02-10T20:48:12.540815Z", "url": "https://files.pythonhosted.org/packages/2a/b2/877b4d05dc83ca51643e4f86d879c8d3bff4d538b89f77e99410a5ae7f45/django-oscar-saferpay-0.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "abe1d1b52bdb6797de47b12faece62cc", "sha256": "0ed59afb5163d091b6b34e55ffdb6349895ae4f7c3a1437fae93c61ad8e4bd3c"}, "downloads": -1, "filename": "django-oscar-saferpay-0.1.0.tar.gz", "has_sig": false, "md5_digest": "abe1d1b52bdb6797de47b12faece62cc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6334, "upload_time": "2019-02-10T20:48:12", "upload_time_iso_8601": "2019-02-10T20:48:12.540815Z", "url": "https://files.pythonhosted.org/packages/2a/b2/877b4d05dc83ca51643e4f86d879c8d3bff4d538b89f77e99410a5ae7f45/django-oscar-saferpay-0.1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:55:23 2020"}