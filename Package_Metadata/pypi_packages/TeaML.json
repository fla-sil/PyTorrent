{"info": {"author": "DiegoSong, TianjinMouth", "author_email": "ssyshenn@gmail.com, tjszgaosan@sina.cn", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: Apache Software License", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: Implementation :: CPython", "Programming Language :: Python :: Implementation :: PyPy"], "description": "[![Contributions welcome](https://img.shields.io/badge/contributions-welcome-brightgreen.svg)](CONTRIBUTING.md)\n[![GitHub top language](https://img.shields.io/github/languages/top/TianjinMouth/Tea)](https://img.shields.io/github/languages/top/TianjinMouth/TeaML)\n[![GitHub Issues](https://img.shields.io/github/issues/TianjinMouth/Tea.svg)](https://github.com/TianjinMouth/TeaML/issues)\n[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://github.com/TianjinMouth/TeaML/blob/master/LICENSE)\n\n# **TeaML - Automated Modeling in Financial Domain**\n\n\ud83c\udf89\ud83c\udf89\ud83c\udf89 We are proud to announce that we design an automatic modeling robot based on `financial risk control field`! \ud83c\udf89\ud83c\udf89\ud83c\udf89\n\n## Table of Contents\n- [Overview](#overview)\n- [Our Goal](#our-goal)\n- [Performance](#performance)\n- [Quick start](#quick-start)\n- [Support](#support)\n\n## \ud83d\udce3 Overview\n\nTeaML is a simple and design friendly automatic modeling learning framework.\nIt can automatically model from beginning to end, and in the end, it will also help you output a model report about the model.\n\n- **Human-friendly**. TeaML's code is straightforward, well documented and tested, which makes it very easy to understand and modify.\n- **Built-in financial risk control field**. TeaML built-in financial risk control field, it fits well with the use in the field of financial risk control, including WOE, and is very suitable for this scenario.\n- **Flexible**. TeaML provides a variety of variable selection methods, each of which can be self-defined. You can also assemble these algorithms in different order. \n- **Final Report**. TeaML can provide you with a final version of the model report, so that you can find the details in your model. \n\n## \u2728 Our Goal\n\n- **Automation** In the near future, we will update and add some fantastic algorithms, including but not limited to variable generation (VariableCluster is already in experimental function).\n- **Common Use** All algorithmic engineers, including model analysts, can use it to increase efficiency as long as you have some algorithmic knowledge.\n- **Wonderful thing** We hope that there will be many wonderful things to add. At present, there is no optimization algorithm and parallel strategy in this version. We will try to add these things in later iterations, maybe not too long.\n\n## \u23f3 Performance\n\n| Task                                        | Strategy | Dataset                   | Score            | Detail                                                                                                             |\n| ------------------------------------------- | -------- | ------------------------- | ---------------- | -------------------------- |\n| Predicting the Delay Rate of Financial Risk |   TeaML  | Financial Risk Data       | **0.6894** (AUC) | WOE(Monotonic) + STEPWISE |\n| Predicting the Delay Rate of Financial Risk | LightGBM | Financial Risk Data       | **0.6773** (AUC) |         LightGBM          |\n\n\n## \ud83d\udcdd Quick start\n\n### Requirements and Installation\n\n\nThe project is based on **Python 3.7**, **Python 3.6** may also work, but it is not fully tested to ensure that all functions are normal.\n\nIf you haven't installed **lightgbm**, you need to install the package yourself.\n\n```bash\npip install TeaML\n```\n\n### Example Usage\n\nLet's run a simple version.\n\n```python\nfrom TeaML.utils.tea_encoder import *\nfrom TeaML.utils.tea_filter import *\nfrom TeaML.utils.tea_utils import *\nfrom TeaML.utils.auto_bin_woe import *\nimport TeaML\n\ndata = pd.read_csv(\"TeaML/examples.csv\")\n\n# encoder\nct = TeaBadRateEncoder(num=1)\nme = TeaMeanEncoder(categorical_features=['city'])\nt = TeaOneHotEncoder()\nencoder = [me]\n\n# woe & feature selection\nwoe = TeaML.WOE(bins=10, bad_rate_merge=True, bad_rate_sim_threshold=0.05, psi_threshold=0.1, iv_threshold=None)\niv = FilterIV(200, 100)\nvif = FilterVif(50)\nmod = FilterModel('lr', 70)\nnova = FilterANOVA(40, 30)\ncoline = FilterCoLine({'penalty': 'l2', 'C': 0.01, 'fit_intercept': True})\nfshap = FilterSHAP(70)\noutlier = OutlierTransform()\nfiltercor = FilterCorr(20)\nstepwise = FilterStepWise(method='p_value')\nmethod = [woe, stepwise]\n\n# main\ntea = TeaML.Tea(['core_lend_request_id', 'lend_customer_id', 'customer_sex',\n               'data_center_id', 'trace_back_time', 'mobile', 'user_id', 'id_no', 'task_id', 'id',\n               'id_district_name', 'id_province_name', 'id_city_name', 'pass_time'],\n              'is_overdue_M0',\n              datetime_feature='pass_time',\n              split_method='oot',\n              file_path='report.xlsx')\ntea.wash(data, null_drop_rate=0.8, most_common_drop_rate=0.9)\ntea.cook(encoder)\ntea.select(method)\ntea.drink(LogisticRegression(penalty='l2', C=1, class_weight='balanced'))\ntea.sleep(woe.bins)\n\n\n'''\nPreliminary screening...\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00<00:00, 29.19it/s]\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00<00:00, 50.03it/s]\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00<00:00, 55.00it/s]\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00<00:00, 104.02it/s]\n  0%|          | 0/19 [00:00<?, ?it/s]\ncal bin ks, train...\ncal bin ks, oot...\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00<00:00, 21.33it/s]\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 100/100 [00:00<00:00, 116.78it/s]\n  0%|          | 0/19 [00:00<?, ?it/s]\nTrain AUC: 0.6107958854166341\nTest AUC: 0.6083763215945612\nOOT AUC: 0.6050562520208106\nTrain KS: 0.1719605325145203\nTest KS: 0.17401800497420833\nOOT KS: 0.1616794283922675\n--------------------------------------------------- \n\ncal bin ks, train...\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00<00:00, 97.39it/s]\n 36%|\u2588\u2588\u2588\u258b      | 4/19 [00:00<00:00, 37.62it/s]\ncal bin ks, oot...\n\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00<00:00, 25.66it/s]\nAdd  P                              with p-value 1.14745e-22\nAdd  F                              with p-value 3.38993e-15\nAdd  I                              with p-value 5.18381e-10\nAdd  J                              with p-value 2.8625e-09\nAdd  M                              with p-value 6.66696e-07\nAdd  Q                              with p-value 3.18125e-09\nAdd  B                              with p-value 1.14541e-06\nAdd  D                              with p-value 1.21802e-05\nAdd  K                              with p-value 2.70815e-05\nAdd  C                              with p-value 0.000118247\nAdd  A                              with p-value 0.000214666\nAdd  L                              with p-value 0.000169921\nAdd  H                              with p-value 0.00139263\nAdd  N                              with p-value 0.000488745\n\n   feature_name  feature_coef\n5             Q      2.332818\n10            A      2.203708\n12            H      1.391547\n7             D      1.385142\n2             I      1.192397\n13            N      1.181320\n0             P      0.926443\n8             K      0.914186\n1             F      0.898581\n3             J      0.868826\n6             B      0.864311\n4             M      0.851936\n11            L      0.842446\n9             C      0.704460\nFinish \ud83c\udf75 \n\n'''\n```\n\n#### What's the encoder in tea.cook()\uff1f\n\nThis is a module for automatic processing of discrete variables in robots.\n\nWe offer you three ways to deal with categorical variables\n\n```python\nct = TeaBadRateEncoder(num=1)\nme = TeaMeanEncoder(categorical_features=['city'])\nt = TeaOneHotEncoder()\nencoder = [me]\n```\n\n\n```TeaBadRateEncoder:  Replace categorical variables with bad_rate of each bin```\n\n```TeaMeanEncoder:  MeanEncoder```\n\n```TeaOneHotEncoder: Such as Onehot```\n\n\n\n#### What's the method in tea.cook()\n\nThis is a module for automatic selection of variables in robots.\n\nWhat you fill in in the TeaML's method is orderly.\n\nFor example, the following represents a monotone woe transformation of all variables, followed by a step-by-step regression based on p-value.\n\n```python\nwoe = TeaML.WOE(bins=10, bad_rate_merge=True, bad_rate_sim_threshold=0.05, psi_threshold=0.1, iv_threshold=None)\niv = FilterIV(200, 100)\nvif = FilterVif(50)\nmod = FilterModel('lr', 70)\nnova = FilterANOVA(40, 30)\ncoline = FilterCoLine({'penalty': 'l2', 'C': 0.01, 'fit_intercept': True})\nfshap = FilterSHAP(70)\noutlier = OutlierTransform()\nfiltercor = FilterCorr(20)\nstepwise = FilterStepWise(method='p_value')\nmethod = [woe, stepwise]\n```\n\n## \ud83d\udca1 Support\n\nWe support all people to make suggestions, because this is support and encouragement for our project.\n\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/TianjinMouth/TeaML", "keywords": "", "license": "Apache License 2.0", "maintainer": "", "maintainer_email": "", "name": "TeaML", "package_url": "https://pypi.org/project/TeaML/", "platform": "", "project_url": "https://pypi.org/project/TeaML/", "project_urls": {"Homepage": "https://github.com/TianjinMouth/TeaML"}, "release_url": "https://pypi.org/project/TeaML/0.2.0/", "requires_dist": ["pandas (==0.24.2)", "numpy (==1.16.3)", "openpyxl (==2.6.2)", "setuptools (==41.0.1)", "scipy (==1.2.1)", "statsmodels (==0.9.0)", "tqdm (==4.34.0)", "shap (==0.28.5)", "scikit-learn (==0.20.2)"], "requires_python": ">3.6", "summary": "Automated Modeling in Financial Domain. TeaML is a simple and design friendly automatic modeling learning framework.", "version": "0.2.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"CONTRIBUTING.md\" rel=\"nofollow\"><img alt=\"Contributions welcome\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/220aa3f89f789ec18b3b3c9096a2a11ab994fd90/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f6e747269627574696f6e732d77656c636f6d652d627269676874677265656e2e737667\"></a>\n<a href=\"https://img.shields.io/github/languages/top/TianjinMouth/TeaML\" rel=\"nofollow\"><img alt=\"GitHub top language\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0d57e23e98444bba28470d19d8e5c8bbc3156ef2/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c616e6775616765732f746f702f5469616e6a696e4d6f7574682f546561\"></a>\n<a href=\"https://github.com/TianjinMouth/TeaML/issues\" rel=\"nofollow\"><img alt=\"GitHub Issues\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/69648b3e862791404d87f57d64b126f31cf8f2cb/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f5469616e6a696e4d6f7574682f5465612e737667\"></a>\n<a href=\"https://github.com/TianjinMouth/TeaML/blob/master/LICENSE\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b97ca76cf5d8fd16c7bc4731270e0bbe53df7aa1/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d417061636865253230322e302d626c75652e737667\"></a></p>\n<h1><strong>TeaML - Automated Modeling in Financial Domain</strong></h1>\n<p>\ud83c\udf89\ud83c\udf89\ud83c\udf89 We are proud to announce that we design an automatic modeling robot based on <code>financial risk control field</code>! \ud83c\udf89\ud83c\udf89\ud83c\udf89</p>\n<h2>Table of Contents</h2>\n<ul>\n<li><a href=\"#overview\" rel=\"nofollow\">Overview</a></li>\n<li><a href=\"#our-goal\" rel=\"nofollow\">Our Goal</a></li>\n<li><a href=\"#performance\" rel=\"nofollow\">Performance</a></li>\n<li><a href=\"#quick-start\" rel=\"nofollow\">Quick start</a></li>\n<li><a href=\"#support\" rel=\"nofollow\">Support</a></li>\n</ul>\n<h2>\ud83d\udce3 Overview</h2>\n<p>TeaML is a simple and design friendly automatic modeling learning framework.\nIt can automatically model from beginning to end, and in the end, it will also help you output a model report about the model.</p>\n<ul>\n<li><strong>Human-friendly</strong>. TeaML's code is straightforward, well documented and tested, which makes it very easy to understand and modify.</li>\n<li><strong>Built-in financial risk control field</strong>. TeaML built-in financial risk control field, it fits well with the use in the field of financial risk control, including WOE, and is very suitable for this scenario.</li>\n<li><strong>Flexible</strong>. TeaML provides a variety of variable selection methods, each of which can be self-defined. You can also assemble these algorithms in different order.</li>\n<li><strong>Final Report</strong>. TeaML can provide you with a final version of the model report, so that you can find the details in your model.</li>\n</ul>\n<h2>\u2728 Our Goal</h2>\n<ul>\n<li><strong>Automation</strong> In the near future, we will update and add some fantastic algorithms, including but not limited to variable generation (VariableCluster is already in experimental function).</li>\n<li><strong>Common Use</strong> All algorithmic engineers, including model analysts, can use it to increase efficiency as long as you have some algorithmic knowledge.</li>\n<li><strong>Wonderful thing</strong> We hope that there will be many wonderful things to add. At present, there is no optimization algorithm and parallel strategy in this version. We will try to add these things in later iterations, maybe not too long.</li>\n</ul>\n<h2>\u23f3 Performance</h2>\n<table>\n<thead>\n<tr>\n<th>Task</th>\n<th>Strategy</th>\n<th>Dataset</th>\n<th>Score</th>\n<th>Detail</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Predicting the Delay Rate of Financial Risk</td>\n<td>TeaML</td>\n<td>Financial Risk Data</td>\n<td><strong>0.6894</strong> (AUC)</td>\n<td>WOE(Monotonic) + STEPWISE</td>\n</tr>\n<tr>\n<td>Predicting the Delay Rate of Financial Risk</td>\n<td>LightGBM</td>\n<td>Financial Risk Data</td>\n<td><strong>0.6773</strong> (AUC)</td>\n<td>LightGBM</td>\n</tr></tbody></table>\n<h2>\ud83d\udcdd Quick start</h2>\n<h3>Requirements and Installation</h3>\n<p>The project is based on <strong>Python 3.7</strong>, <strong>Python 3.6</strong> may also work, but it is not fully tested to ensure that all functions are normal.</p>\n<p>If you haven't installed <strong>lightgbm</strong>, you need to install the package yourself.</p>\n<pre>pip install TeaML\n</pre>\n<h3>Example Usage</h3>\n<p>Let's run a simple version.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">TeaML.utils.tea_encoder</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">from</span> <span class=\"nn\">TeaML.utils.tea_filter</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">from</span> <span class=\"nn\">TeaML.utils.tea_utils</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">from</span> <span class=\"nn\">TeaML.utils.auto_bin_woe</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">import</span> <span class=\"nn\">TeaML</span>\n\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">read_csv</span><span class=\"p\">(</span><span class=\"s2\">\"TeaML/examples.csv\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># encoder</span>\n<span class=\"n\">ct</span> <span class=\"o\">=</span> <span class=\"n\">TeaBadRateEncoder</span><span class=\"p\">(</span><span class=\"n\">num</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">me</span> <span class=\"o\">=</span> <span class=\"n\">TeaMeanEncoder</span><span class=\"p\">(</span><span class=\"n\">categorical_features</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'city'</span><span class=\"p\">])</span>\n<span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"n\">TeaOneHotEncoder</span><span class=\"p\">()</span>\n<span class=\"n\">encoder</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">me</span><span class=\"p\">]</span>\n\n<span class=\"c1\"># woe &amp; feature selection</span>\n<span class=\"n\">woe</span> <span class=\"o\">=</span> <span class=\"n\">TeaML</span><span class=\"o\">.</span><span class=\"n\">WOE</span><span class=\"p\">(</span><span class=\"n\">bins</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">bad_rate_merge</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">bad_rate_sim_threshold</span><span class=\"o\">=</span><span class=\"mf\">0.05</span><span class=\"p\">,</span> <span class=\"n\">psi_threshold</span><span class=\"o\">=</span><span class=\"mf\">0.1</span><span class=\"p\">,</span> <span class=\"n\">iv_threshold</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"n\">iv</span> <span class=\"o\">=</span> <span class=\"n\">FilterIV</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">)</span>\n<span class=\"n\">vif</span> <span class=\"o\">=</span> <span class=\"n\">FilterVif</span><span class=\"p\">(</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n<span class=\"n\">mod</span> <span class=\"o\">=</span> <span class=\"n\">FilterModel</span><span class=\"p\">(</span><span class=\"s1\">'lr'</span><span class=\"p\">,</span> <span class=\"mi\">70</span><span class=\"p\">)</span>\n<span class=\"n\">nova</span> <span class=\"o\">=</span> <span class=\"n\">FilterANOVA</span><span class=\"p\">(</span><span class=\"mi\">40</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">)</span>\n<span class=\"n\">coline</span> <span class=\"o\">=</span> <span class=\"n\">FilterCoLine</span><span class=\"p\">({</span><span class=\"s1\">'penalty'</span><span class=\"p\">:</span> <span class=\"s1\">'l2'</span><span class=\"p\">,</span> <span class=\"s1\">'C'</span><span class=\"p\">:</span> <span class=\"mf\">0.01</span><span class=\"p\">,</span> <span class=\"s1\">'fit_intercept'</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">})</span>\n<span class=\"n\">fshap</span> <span class=\"o\">=</span> <span class=\"n\">FilterSHAP</span><span class=\"p\">(</span><span class=\"mi\">70</span><span class=\"p\">)</span>\n<span class=\"n\">outlier</span> <span class=\"o\">=</span> <span class=\"n\">OutlierTransform</span><span class=\"p\">()</span>\n<span class=\"n\">filtercor</span> <span class=\"o\">=</span> <span class=\"n\">FilterCorr</span><span class=\"p\">(</span><span class=\"mi\">20</span><span class=\"p\">)</span>\n<span class=\"n\">stepwise</span> <span class=\"o\">=</span> <span class=\"n\">FilterStepWise</span><span class=\"p\">(</span><span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s1\">'p_value'</span><span class=\"p\">)</span>\n<span class=\"n\">method</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">woe</span><span class=\"p\">,</span> <span class=\"n\">stepwise</span><span class=\"p\">]</span>\n\n<span class=\"c1\"># main</span>\n<span class=\"n\">tea</span> <span class=\"o\">=</span> <span class=\"n\">TeaML</span><span class=\"o\">.</span><span class=\"n\">Tea</span><span class=\"p\">([</span><span class=\"s1\">'core_lend_request_id'</span><span class=\"p\">,</span> <span class=\"s1\">'lend_customer_id'</span><span class=\"p\">,</span> <span class=\"s1\">'customer_sex'</span><span class=\"p\">,</span>\n               <span class=\"s1\">'data_center_id'</span><span class=\"p\">,</span> <span class=\"s1\">'trace_back_time'</span><span class=\"p\">,</span> <span class=\"s1\">'mobile'</span><span class=\"p\">,</span> <span class=\"s1\">'user_id'</span><span class=\"p\">,</span> <span class=\"s1\">'id_no'</span><span class=\"p\">,</span> <span class=\"s1\">'task_id'</span><span class=\"p\">,</span> <span class=\"s1\">'id'</span><span class=\"p\">,</span>\n               <span class=\"s1\">'id_district_name'</span><span class=\"p\">,</span> <span class=\"s1\">'id_province_name'</span><span class=\"p\">,</span> <span class=\"s1\">'id_city_name'</span><span class=\"p\">,</span> <span class=\"s1\">'pass_time'</span><span class=\"p\">],</span>\n              <span class=\"s1\">'is_overdue_M0'</span><span class=\"p\">,</span>\n              <span class=\"n\">datetime_feature</span><span class=\"o\">=</span><span class=\"s1\">'pass_time'</span><span class=\"p\">,</span>\n              <span class=\"n\">split_method</span><span class=\"o\">=</span><span class=\"s1\">'oot'</span><span class=\"p\">,</span>\n              <span class=\"n\">file_path</span><span class=\"o\">=</span><span class=\"s1\">'report.xlsx'</span><span class=\"p\">)</span>\n<span class=\"n\">tea</span><span class=\"o\">.</span><span class=\"n\">wash</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">null_drop_rate</span><span class=\"o\">=</span><span class=\"mf\">0.8</span><span class=\"p\">,</span> <span class=\"n\">most_common_drop_rate</span><span class=\"o\">=</span><span class=\"mf\">0.9</span><span class=\"p\">)</span>\n<span class=\"n\">tea</span><span class=\"o\">.</span><span class=\"n\">cook</span><span class=\"p\">(</span><span class=\"n\">encoder</span><span class=\"p\">)</span>\n<span class=\"n\">tea</span><span class=\"o\">.</span><span class=\"n\">select</span><span class=\"p\">(</span><span class=\"n\">method</span><span class=\"p\">)</span>\n<span class=\"n\">tea</span><span class=\"o\">.</span><span class=\"n\">drink</span><span class=\"p\">(</span><span class=\"n\">LogisticRegression</span><span class=\"p\">(</span><span class=\"n\">penalty</span><span class=\"o\">=</span><span class=\"s1\">'l2'</span><span class=\"p\">,</span> <span class=\"n\">C</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">class_weight</span><span class=\"o\">=</span><span class=\"s1\">'balanced'</span><span class=\"p\">))</span>\n<span class=\"n\">tea</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"n\">woe</span><span class=\"o\">.</span><span class=\"n\">bins</span><span class=\"p\">)</span>\n\n\n<span class=\"sd\">'''</span>\n<span class=\"sd\">Preliminary screening...</span>\n<span class=\"sd\">100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00&lt;00:00, 29.19it/s]</span>\n<span class=\"sd\">100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00&lt;00:00, 50.03it/s]</span>\n<span class=\"sd\">100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00&lt;00:00, 55.00it/s]</span>\n<span class=\"sd\">100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00&lt;00:00, 104.02it/s]</span>\n<span class=\"sd\">  0%|          | 0/19 [00:00&lt;?, ?it/s]</span>\n<span class=\"sd\">cal bin ks, train...</span>\n<span class=\"sd\">cal bin ks, oot...</span>\n<span class=\"sd\">100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00&lt;00:00, 21.33it/s]</span>\n<span class=\"sd\">100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 100/100 [00:00&lt;00:00, 116.78it/s]</span>\n<span class=\"sd\">  0%|          | 0/19 [00:00&lt;?, ?it/s]</span>\n<span class=\"sd\">Train AUC: 0.6107958854166341</span>\n<span class=\"sd\">Test AUC: 0.6083763215945612</span>\n<span class=\"sd\">OOT AUC: 0.6050562520208106</span>\n<span class=\"sd\">Train KS: 0.1719605325145203</span>\n<span class=\"sd\">Test KS: 0.17401800497420833</span>\n<span class=\"sd\">OOT KS: 0.1616794283922675</span>\n<span class=\"sd\">--------------------------------------------------- </span>\n\n<span class=\"sd\">cal bin ks, train...</span>\n<span class=\"sd\">100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00&lt;00:00, 97.39it/s]</span>\n<span class=\"sd\"> 36%|\u2588\u2588\u2588\u258b      | 4/19 [00:00&lt;00:00, 37.62it/s]</span>\n<span class=\"sd\">cal bin ks, oot...</span>\n\n<span class=\"sd\">100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 19/19 [00:00&lt;00:00, 25.66it/s]</span>\n<span class=\"sd\">Add  P                              with p-value 1.14745e-22</span>\n<span class=\"sd\">Add  F                              with p-value 3.38993e-15</span>\n<span class=\"sd\">Add  I                              with p-value 5.18381e-10</span>\n<span class=\"sd\">Add  J                              with p-value 2.8625e-09</span>\n<span class=\"sd\">Add  M                              with p-value 6.66696e-07</span>\n<span class=\"sd\">Add  Q                              with p-value 3.18125e-09</span>\n<span class=\"sd\">Add  B                              with p-value 1.14541e-06</span>\n<span class=\"sd\">Add  D                              with p-value 1.21802e-05</span>\n<span class=\"sd\">Add  K                              with p-value 2.70815e-05</span>\n<span class=\"sd\">Add  C                              with p-value 0.000118247</span>\n<span class=\"sd\">Add  A                              with p-value 0.000214666</span>\n<span class=\"sd\">Add  L                              with p-value 0.000169921</span>\n<span class=\"sd\">Add  H                              with p-value 0.00139263</span>\n<span class=\"sd\">Add  N                              with p-value 0.000488745</span>\n\n<span class=\"sd\">   feature_name  feature_coef</span>\n<span class=\"sd\">5             Q      2.332818</span>\n<span class=\"sd\">10            A      2.203708</span>\n<span class=\"sd\">12            H      1.391547</span>\n<span class=\"sd\">7             D      1.385142</span>\n<span class=\"sd\">2             I      1.192397</span>\n<span class=\"sd\">13            N      1.181320</span>\n<span class=\"sd\">0             P      0.926443</span>\n<span class=\"sd\">8             K      0.914186</span>\n<span class=\"sd\">1             F      0.898581</span>\n<span class=\"sd\">3             J      0.868826</span>\n<span class=\"sd\">6             B      0.864311</span>\n<span class=\"sd\">4             M      0.851936</span>\n<span class=\"sd\">11            L      0.842446</span>\n<span class=\"sd\">9             C      0.704460</span>\n<span class=\"sd\">Finish \ud83c\udf75 </span>\n\n<span class=\"sd\">'''</span>\n</pre>\n<h4>What's the encoder in tea.cook()\uff1f</h4>\n<p>This is a module for automatic processing of discrete variables in robots.</p>\n<p>We offer you three ways to deal with categorical variables</p>\n<pre><span class=\"n\">ct</span> <span class=\"o\">=</span> <span class=\"n\">TeaBadRateEncoder</span><span class=\"p\">(</span><span class=\"n\">num</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">me</span> <span class=\"o\">=</span> <span class=\"n\">TeaMeanEncoder</span><span class=\"p\">(</span><span class=\"n\">categorical_features</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'city'</span><span class=\"p\">])</span>\n<span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"n\">TeaOneHotEncoder</span><span class=\"p\">()</span>\n<span class=\"n\">encoder</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">me</span><span class=\"p\">]</span>\n</pre>\n<p><code>TeaBadRateEncoder: Replace categorical variables with bad_rate of each bin</code></p>\n<p><code>TeaMeanEncoder: MeanEncoder</code></p>\n<p><code>TeaOneHotEncoder: Such as Onehot</code></p>\n<h4>What's the method in tea.cook()</h4>\n<p>This is a module for automatic selection of variables in robots.</p>\n<p>What you fill in in the TeaML's method is orderly.</p>\n<p>For example, the following represents a monotone woe transformation of all variables, followed by a step-by-step regression based on p-value.</p>\n<pre><span class=\"n\">woe</span> <span class=\"o\">=</span> <span class=\"n\">TeaML</span><span class=\"o\">.</span><span class=\"n\">WOE</span><span class=\"p\">(</span><span class=\"n\">bins</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"n\">bad_rate_merge</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">bad_rate_sim_threshold</span><span class=\"o\">=</span><span class=\"mf\">0.05</span><span class=\"p\">,</span> <span class=\"n\">psi_threshold</span><span class=\"o\">=</span><span class=\"mf\">0.1</span><span class=\"p\">,</span> <span class=\"n\">iv_threshold</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"n\">iv</span> <span class=\"o\">=</span> <span class=\"n\">FilterIV</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">)</span>\n<span class=\"n\">vif</span> <span class=\"o\">=</span> <span class=\"n\">FilterVif</span><span class=\"p\">(</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n<span class=\"n\">mod</span> <span class=\"o\">=</span> <span class=\"n\">FilterModel</span><span class=\"p\">(</span><span class=\"s1\">'lr'</span><span class=\"p\">,</span> <span class=\"mi\">70</span><span class=\"p\">)</span>\n<span class=\"n\">nova</span> <span class=\"o\">=</span> <span class=\"n\">FilterANOVA</span><span class=\"p\">(</span><span class=\"mi\">40</span><span class=\"p\">,</span> <span class=\"mi\">30</span><span class=\"p\">)</span>\n<span class=\"n\">coline</span> <span class=\"o\">=</span> <span class=\"n\">FilterCoLine</span><span class=\"p\">({</span><span class=\"s1\">'penalty'</span><span class=\"p\">:</span> <span class=\"s1\">'l2'</span><span class=\"p\">,</span> <span class=\"s1\">'C'</span><span class=\"p\">:</span> <span class=\"mf\">0.01</span><span class=\"p\">,</span> <span class=\"s1\">'fit_intercept'</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">})</span>\n<span class=\"n\">fshap</span> <span class=\"o\">=</span> <span class=\"n\">FilterSHAP</span><span class=\"p\">(</span><span class=\"mi\">70</span><span class=\"p\">)</span>\n<span class=\"n\">outlier</span> <span class=\"o\">=</span> <span class=\"n\">OutlierTransform</span><span class=\"p\">()</span>\n<span class=\"n\">filtercor</span> <span class=\"o\">=</span> <span class=\"n\">FilterCorr</span><span class=\"p\">(</span><span class=\"mi\">20</span><span class=\"p\">)</span>\n<span class=\"n\">stepwise</span> <span class=\"o\">=</span> <span class=\"n\">FilterStepWise</span><span class=\"p\">(</span><span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s1\">'p_value'</span><span class=\"p\">)</span>\n<span class=\"n\">method</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">woe</span><span class=\"p\">,</span> <span class=\"n\">stepwise</span><span class=\"p\">]</span>\n</pre>\n<h2>\ud83d\udca1 Support</h2>\n<p>We support all people to make suggestions, because this is support and encouragement for our project.</p>\n\n          </div>"}, "last_serial": 6073684, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "d344f70be99ad200dbbb338a3bf7aebc", "sha256": "020fc7308f7adf959a94a31fb1d406e36b345f8972c52e232ff19a9354f2545e"}, "downloads": -1, "filename": "TeaML-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "d344f70be99ad200dbbb338a3bf7aebc", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">3.6", "size": 8792028, "upload_time": "2019-10-08T05:33:53", "upload_time_iso_8601": "2019-10-08T05:33:53.821233Z", "url": "https://files.pythonhosted.org/packages/97/31/e37020ce0826731983ac402f9c82fd3c9167756c3cb227bccb6bb36c7b8f/TeaML-0.1.0-py3-none-any.whl", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "5ddc8bfcdeab3597bc68b7c127882f66", "sha256": "b638142278573c16acaacf5e2d47e42a25c452d31d121d32372ac4f6d6f1696c"}, "downloads": -1, "filename": "TeaML-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "5ddc8bfcdeab3597bc68b7c127882f66", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">3.6", "size": 8792198, "upload_time": "2019-11-04T08:25:10", "upload_time_iso_8601": "2019-11-04T08:25:10.135564Z", "url": "https://files.pythonhosted.org/packages/a6/25/53344b7317ae138da1698c9bdacca8ca1a5b9250e9800e28cc39cee0232c/TeaML-0.2.0-py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "5ddc8bfcdeab3597bc68b7c127882f66", "sha256": "b638142278573c16acaacf5e2d47e42a25c452d31d121d32372ac4f6d6f1696c"}, "downloads": -1, "filename": "TeaML-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "5ddc8bfcdeab3597bc68b7c127882f66", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">3.6", "size": 8792198, "upload_time": "2019-11-04T08:25:10", "upload_time_iso_8601": "2019-11-04T08:25:10.135564Z", "url": "https://files.pythonhosted.org/packages/a6/25/53344b7317ae138da1698c9bdacca8ca1a5b9250e9800e28cc39cee0232c/TeaML-0.2.0-py3-none-any.whl", "yanked": false}], "timestamp": "Fri May  8 02:57:06 2020"}