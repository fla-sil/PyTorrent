{"info": {"author": "Andrew Walker", "author_email": "walker.ab@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 2 - Pre-Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Operating System :: POSIX :: Linux", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Topic :: Software Development :: Code Generators"], "description": "=====\nClast\n=====\n\nClast is a Python wrapper of the unstable interface of the Clang AST Matchers\nlibrary. \n\nExisting tools in this space make good use of libclang to build rapid\nprototypes for exploring the Clang AST, however, several important tools\n(for example code rewriting) are not available from libclang. \n\n|license| |build| \n\nUsage\n=====\n\nDynTypedMatcher\n---------------\n\nExample of creating a dynamically typed AST node matcher using the dynamic\nparser and dumping the node.\n\n.. code:: python\n\n\timport sys\n\tfrom clast import *\n\n\tclass MyMatchCallback(MatchCallback):\n\t    def __init__(self, *args, **kwargs):\n\t\tsuper(MyMatchCallback, self).__init__()\n\n\t    def run(self, result):\n\t\tcls = result.GetNode('cls').get(CXXRecordDecl)\n\t\tcls.dump()\n\n\tif __name__ == \"__main__\":\n\t    callback = MyMatchCallback()\n\t    m = parseMatcherExpression('cxxRecordDecl().bind(\"cls\")')\n\t    finder = MatchFinder()\n\t    finder.addDynamicMatcher(m, callback)\n\t    matchString('class X;', finder, '-std=c++11', 'input.cpp')\n\nInstallation\n============\n\nTo install Clast, you'll need to:\n\n1. Install a c++11 compliant compiler\n2. Install a compatible version of Clang and LLVM \n3. Set some environment variables\n4. Install the pybind11 package\n5. Install Clast\n\nUbuntu 14.04 (Trusty)\n---------------------\n\nTo compile under Ubuntu 14.04 (Trusty), you'll need to get an updated version of LLVM:\n\n.. code:: console\n\n    wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add -\n    echo \"deb http://llvm.org/apt/trusty/ llvm-toolchain-trusty-3.8 main\" | sudo tee -a /etc/apt/sources.list\n    sudo apt-get update -qq\n    sudo apt-get install -y clang-3.8 libclang-common-3.8-dev libclang-3.8-dev llvm-3.8-dev liblldb-3.8-dev python-clang-3.8\n\nThen, set your environment variables:\n\n.. code:: console\n\n    export LLVM_HOME=/usr/lib/llvm-3.8\n    export LD_LIBRARY_PATH=$LLVM_HOME/lib\n\nFinally, install pybind11 and Clast. It is strongly recommended that clast be\ninstalled with the verbose flag on to show compilation progress\n\n.. code:: console\n\n    pip install pybind11\n    pip install -v clast\n\nUpdating the Bindings\n---------------------\n\nGiven the breadth of the Clang AST matchers API, it isn't feasible to attempt\nto maintain hand rolled bindings, instead Clast bootstraps itself using the\nlibclang library, and generates the pybind11 wrappers as required.\n\nIn cases where the bindings are stale, or do not compile correctly, you can try\nto rebuild the them using the included clastgen.py script.  \n\nIt is hoped that future revisions of Clast will rapidly become self-hosting\n(one version of Clast will be able to build successive versions).\n\n\nLimitations\n===========\n\n- Clast does not support all versions of Clang - focus is on the stable and development\n  branches of the Clang compiler (currently 3.8 and 3.9).\n- Clast relies on the C++ reference counting scheme to collect memory in\n  preference to using the Python reference counting.  This is in part a\n  technical limitation of the Clang AST Nodes having private destructors, but is also in\n  part by design because Clast scripts are intended to facilitate prototyping, not act\n  as a replacement for the AST Matchers API. \n- Clast installs are quite slow and memory intensive, ensure that you have at least 2Gb or RAM\n  free, compile times are on the order of 30 seconds.\n- Clast has not been tested on Windows - it's likely that small changes would allow it to function\n  on that platform.\n- Clast will not compile if you do not have the development headers for Clang and LLVM installed.\n- Out of the box, Clast will fail to link if LLVM has not been configured to\n  generate a shared library.  Future work may include overcoming this issue.\n- Clast is known to not work correctly if Clang and LLVM have been compiled\n  with the -fno-rtti option.  This means that (at least some) of the Ubuntu\n  binaries from `llvm.org`_ cannot be used with Clast.\n- Clast disables pybinds C++14 support - future work will involve improving tests to use platforms \n  that ship with C++14 compilers and standard libraries by default.  This will help reduce the \n  size of binaries produced.\n- Compiling Clang bindings is on the order of 10 times slower with\n  optimisations enabled.  By default Clast builds bindings with optimisations\n  disabled - this is considered an acceptable, given that the primary goal of\n  the project is to facilitate rapid prototying. Furthermore, Clast code should\n  be easy to translate to equivalent C++ constructs if performance does become\n  and issue.\n- Some issues have been observed with older Python releases, it is strongly\n  recommended that you use an up-to-date version of Python (2.7.11)\n\nAcknowledgements\n================\n\nThis project builds on the excellent work of the LLVM team and the University of\nIllinois at Urbana-Champaign, but is in no way affiliated with either.\n\nSome parts of clasts setup.py were derived from the BSD licensed pybind\n`python_example`_, Copyright (c) 2016 the Pybind Development Team, All rights\nreserved. \n\nThe need for a tool to make the Clang AST matchers library available from\nPython was inspired by Christian Schafmeister's work on `clasp`_\n\n.. _pybind11: https://github.com/pybind/pybind11\n.. _llvm.org: https://llvm.org\n.. _clasp: https://github.com/drmeister/clasp\n.. _python_example: https://github.com/pybind/python_example\n\n.. |license| image:: https://img.shields.io/badge/license-MIT-blue.svg\n   :target: https://raw.githubusercontent.com/andrewwalker/glud/master/LICENSE\n   :alt: MIT License\n\n.. |build| image:: https://travis-ci.org/AndrewWalker/clast.svg?branch=master\n   :target: https://travis-ci.org/AndrewWalker/clast\n   :alt: Continuous Integration", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://github.com/AndrewWalker/clast", "keywords": null, "license": "MIT", "maintainer": null, "maintainer_email": null, "name": "clast", "package_url": "https://pypi.org/project/clast/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/clast/", "project_urls": {"Download": "UNKNOWN", "Homepage": "http://github.com/AndrewWalker/clast"}, "release_url": "https://pypi.org/project/clast/0.0.1rc0/", "requires_dist": null, "requires_python": null, "summary": "Python bindings for the unstable interface of the Clang AST Matchers library", "version": "0.0.1rc0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>Clast is a Python wrapper of the unstable interface of the Clang AST Matchers\nlibrary.</p>\n<p>Existing tools in this space make good use of libclang to build rapid\nprototypes for exploring the Clang AST, however, several important tools\n(for example code rewriting) are not available from libclang.</p>\n<p><a href=\"https://raw.githubusercontent.com/andrewwalker/glud/master/LICENSE\" rel=\"nofollow\"><img alt=\"MIT License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c88fab50b4a1dc0cd91faeb7ba5654d56e380260/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e737667\"></a> <a href=\"https://travis-ci.org/AndrewWalker/clast\" rel=\"nofollow\"><img alt=\"Continuous Integration\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7b6d298ba272a43bbe807b1e0325f105dc6a3754/68747470733a2f2f7472617669732d63692e6f72672f416e6472657757616c6b65722f636c6173742e7376673f6272616e63683d6d6173746572\"></a></p>\n<div id=\"usage\">\n<h2>Usage</h2>\n<h2 id=\"dyntypedmatcher\"><span class=\"section-subtitle\">DynTypedMatcher</span></h2>\n<p>Example of creating a dynamically typed AST node matcher using the dynamic\nparser and dumping the node.</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n<span class=\"kn\">from</span> <span class=\"nn\">clast</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyMatchCallback</span><span class=\"p\">(</span><span class=\"n\">MatchCallback</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">MyMatchCallback</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">run</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">result</span><span class=\"p\">):</span>\n        <span class=\"bp\">cls</span> <span class=\"o\">=</span> <span class=\"n\">result</span><span class=\"o\">.</span><span class=\"n\">GetNode</span><span class=\"p\">(</span><span class=\"s1\">'cls'</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">CXXRecordDecl</span><span class=\"p\">)</span>\n        <span class=\"bp\">cls</span><span class=\"o\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">callback</span> <span class=\"o\">=</span> <span class=\"n\">MyMatchCallback</span><span class=\"p\">()</span>\n    <span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">parseMatcherExpression</span><span class=\"p\">(</span><span class=\"s1\">'cxxRecordDecl().bind(\"cls\")'</span><span class=\"p\">)</span>\n    <span class=\"n\">finder</span> <span class=\"o\">=</span> <span class=\"n\">MatchFinder</span><span class=\"p\">()</span>\n    <span class=\"n\">finder</span><span class=\"o\">.</span><span class=\"n\">addDynamicMatcher</span><span class=\"p\">(</span><span class=\"n\">m</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"p\">)</span>\n    <span class=\"n\">matchString</span><span class=\"p\">(</span><span class=\"s1\">'class X;'</span><span class=\"p\">,</span> <span class=\"n\">finder</span><span class=\"p\">,</span> <span class=\"s1\">'-std=c++11'</span><span class=\"p\">,</span> <span class=\"s1\">'input.cpp'</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p>To install Clast, you\u2019ll need to:</p>\n<ol>\n<li>Install a c++11 compliant compiler</li>\n<li>Install a compatible version of Clang and LLVM</li>\n<li>Set some environment variables</li>\n<li>Install the pybind11 package</li>\n<li>Install Clast</li>\n</ol>\n<div id=\"ubuntu-14-04-trusty\">\n<h3>Ubuntu 14.04 (Trusty)</h3>\n<p>To compile under Ubuntu 14.04 (Trusty), you\u2019ll need to get an updated version of LLVM:</p>\n<pre><span class=\"go\">wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add -\necho \"deb http://llvm.org/apt/trusty/ llvm-toolchain-trusty-3.8 main\" | sudo tee -a /etc/apt/sources.list\nsudo apt-get update -qq\nsudo apt-get install -y clang-3.8 libclang-common-3.8-dev libclang-3.8-dev llvm-3.8-dev liblldb-3.8-dev python-clang-3.8</span>\n</pre>\n<p>Then, set your environment variables:</p>\n<pre><span class=\"go\">export LLVM_HOME=/usr/lib/llvm-3.8\nexport LD_LIBRARY_PATH=$LLVM_HOME/lib</span>\n</pre>\n<p>Finally, install pybind11 and Clast. It is strongly recommended that clast be\ninstalled with the verbose flag on to show compilation progress</p>\n<pre><span class=\"go\">pip install pybind11\npip install -v clast</span>\n</pre>\n</div>\n<div id=\"updating-the-bindings\">\n<h3>Updating the Bindings</h3>\n<p>Given the breadth of the Clang AST matchers API, it isn\u2019t feasible to attempt\nto maintain hand rolled bindings, instead Clast bootstraps itself using the\nlibclang library, and generates the pybind11 wrappers as required.</p>\n<p>In cases where the bindings are stale, or do not compile correctly, you can try\nto rebuild the them using the included clastgen.py script.</p>\n<p>It is hoped that future revisions of Clast will rapidly become self-hosting\n(one version of Clast will be able to build successive versions).</p>\n</div>\n</div>\n<div id=\"limitations\">\n<h2>Limitations</h2>\n<ul>\n<li>Clast does not support all versions of Clang - focus is on the stable and development\nbranches of the Clang compiler (currently 3.8 and 3.9).</li>\n<li>Clast relies on the C++ reference counting scheme to collect memory in\npreference to using the Python reference counting.  This is in part a\ntechnical limitation of the Clang AST Nodes having private destructors, but is also in\npart by design because Clast scripts are intended to facilitate prototyping, not act\nas a replacement for the AST Matchers API.</li>\n<li>Clast installs are quite slow and memory intensive, ensure that you have at least 2Gb or RAM\nfree, compile times are on the order of 30 seconds.</li>\n<li>Clast has not been tested on Windows - it\u2019s likely that small changes would allow it to function\non that platform.</li>\n<li>Clast will not compile if you do not have the development headers for Clang and LLVM installed.</li>\n<li>Out of the box, Clast will fail to link if LLVM has not been configured to\ngenerate a shared library.  Future work may include overcoming this issue.</li>\n<li>Clast is known to not work correctly if Clang and LLVM have been compiled\nwith the -fno-rtti option.  This means that (at least some) of the Ubuntu\nbinaries from <a href=\"https://llvm.org\" rel=\"nofollow\">llvm.org</a> cannot be used with Clast.</li>\n<li>Clast disables pybinds C++14 support - future work will involve improving tests to use platforms\nthat ship with C++14 compilers and standard libraries by default.  This will help reduce the\nsize of binaries produced.</li>\n<li>Compiling Clang bindings is on the order of 10 times slower with\noptimisations enabled.  By default Clast builds bindings with optimisations\ndisabled - this is considered an acceptable, given that the primary goal of\nthe project is to facilitate rapid prototying. Furthermore, Clast code should\nbe easy to translate to equivalent C++ constructs if performance does become\nand issue.</li>\n<li>Some issues have been observed with older Python releases, it is strongly\nrecommended that you use an up-to-date version of Python (2.7.11)</li>\n</ul>\n</div>\n<div id=\"acknowledgements\">\n<h2>Acknowledgements</h2>\n<p>This project builds on the excellent work of the LLVM team and the University of\nIllinois at Urbana-Champaign, but is in no way affiliated with either.</p>\n<p>Some parts of clasts setup.py were derived from the BSD licensed pybind\n<a href=\"https://github.com/pybind/python_example\" rel=\"nofollow\">python_example</a>, Copyright (c) 2016 the Pybind Development Team, All rights\nreserved.</p>\n<p>The need for a tool to make the Clang AST matchers library available from\nPython was inspired by Christian Schafmeister\u2019s work on <a href=\"https://github.com/drmeister/clasp\" rel=\"nofollow\">clasp</a></p>\n</div>\n\n          </div>"}, "last_serial": 2216228, "releases": {"0.0.1rc0": [{"comment_text": "", "digests": {"md5": "3322eb1faa6ce7b939978e927fbfd185", "sha256": "f0267456ea443adc23711191ff85c68a7f316cdf58863ec53d22e7b1ceb501ca"}, "downloads": -1, "filename": "clast-0.0.1rc0.tar.gz", "has_sig": false, "md5_digest": "3322eb1faa6ce7b939978e927fbfd185", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 315029, "upload_time": "2016-07-12T09:22:57", "upload_time_iso_8601": "2016-07-12T09:22:57.789444Z", "url": "https://files.pythonhosted.org/packages/49/66/331d79dc6882565a55e3d48eda93e6ae0c5fd64c62d17ba21b114b4161e9/clast-0.0.1rc0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "3322eb1faa6ce7b939978e927fbfd185", "sha256": "f0267456ea443adc23711191ff85c68a7f316cdf58863ec53d22e7b1ceb501ca"}, "downloads": -1, "filename": "clast-0.0.1rc0.tar.gz", "has_sig": false, "md5_digest": "3322eb1faa6ce7b939978e927fbfd185", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 315029, "upload_time": "2016-07-12T09:22:57", "upload_time_iso_8601": "2016-07-12T09:22:57.789444Z", "url": "https://files.pythonhosted.org/packages/49/66/331d79dc6882565a55e3d48eda93e6ae0c5fd64c62d17ba21b114b4161e9/clast-0.0.1rc0.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:19:07 2020"}