{"info": {"author": "Simon Willison", "author_email": "", "bugtrack_url": null, "classifiers": [], "description": "# datasette-atom\n\n[![PyPI](https://img.shields.io/pypi/v/datasette-atom.svg)](https://pypi.org/project/datasette-atom/)\n[![CircleCI](https://circleci.com/gh/simonw/datasette-atom.svg?style=svg)](https://circleci.com/gh/simonw/datasette-atom)\n[![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](https://github.com/simonw/datasette-atom/blob/master/LICENSE)\n\nDatasette plugin that adds support for generating [Atom feeds](https://validator.w3.org/feed/docs/atom.html) with the results of a SQL query.\n\n## Installation\n\nInstall this plugin in the same environment as Datasette to enable the `.atom` output extension.\n\n    $ pip install datasette-atom\n\n## Usage\n\nTo create an Atom feed you need to define a custom SQL query that returns a required set of columns:\n\n* `atom_id` - a unique ID for each row. [This article](https://web.archive.org/web/20080211143232/http://diveintomark.org/archives/2004/05/28/howto-atom-id) has suggestions about ways to create these IDs.\n* `atom_title` - a title for that row.\n* `atom_updated` - an [RFC 3339](http://www.faqs.org/rfcs/rfc3339.html) timestamp representing the last time the entry was modified in a significant way. This can usually be the time that the row was created.\n\nThe following columns are optional:\n\n* `atom_content` - content that should be shown in the feed. This will be treated as a regular string, so any embedded HTML tags will be escaped when they are displayed.\n* `atom_content_html` - content that should be shown in the feed. This will be treated as an HTML string, and will be sanitized using [Bleach](https://github.com/mozilla/bleach) to ensure it does not have any malicious code in it before being returned as part of a `<content type=\"html\">` Atom element. If both are provided, this will be used in place of `atom_content`.\n* `atom_link` - a URL that should be used as the link that the feed entry points to.\n* `atom_author_name` - the name of the author of the entry. If you provide this you can also provide `atom_author_uri` and `atom_author_email` with a URL and e-mail address for that author.\n\nA query that returns these columns can then be returned as an Atom feed by adding the `.atom` extension.\n\n## Example\n\nHere is an example SQL query which generates an Atom feed for new entries on [www.niche-museums.com](https://www.niche-museums.com/):\n\n```sql\nselect\n  'tag:niche-museums.com,' || substr(created, 0, 11) || ':' || id as atom_id,\n  name as atom_title,\n  created as atom_updated,\n  'https://www.niche-museums.com/browse/museums/' || id as atom_link,\n  coalesce(\n    '<img src=\"' || photo_url || '?w=800&amp;h=400&amp;fit=crop&amp;auto=compress\">',\n    ''\n  ) || '<p>' || description || '</p>' as atom_content_html\nfrom\n  museums\norder by\n  created desc\nlimit\n  15\n```\n\nYou can try this query by [pasting it in here](https://www.niche-museums.com/browse) - then click the `.atom` link to see it as an Atom feed.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/simonw/datasette-atom", "keywords": "", "license": "Apache License, Version 2.0", "maintainer": "", "maintainer_email": "", "name": "datasette-atom", "package_url": "https://pypi.org/project/datasette-atom/", "platform": "", "project_url": "https://pypi.org/project/datasette-atom/", "project_urls": {"Homepage": "https://github.com/simonw/datasette-atom"}, "release_url": "https://pypi.org/project/datasette-atom/0.5/", "requires_dist": ["datasette", "feedgen", "bleach", "pytest ; extra == 'test'", "pytest-asyncio ; extra == 'test'", "httpx ; extra == 'test'"], "requires_python": "", "summary": "Datasette plugin that adds a .atom output format", "version": "0.5", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>datasette-atom</h1>\n<p><a href=\"https://pypi.org/project/datasette-atom/\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/9f19588e921d16e01720877768bec66f0068858f/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6461746173657474652d61746f6d2e737667\"></a>\n<a href=\"https://circleci.com/gh/simonw/datasette-atom\" rel=\"nofollow\"><img alt=\"CircleCI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5b4da35ab3522188c9f96ad27c9e2f86c35da949/68747470733a2f2f636972636c6563692e636f6d2f67682f73696d6f6e772f6461746173657474652d61746f6d2e7376673f7374796c653d737667\"></a>\n<a href=\"https://github.com/simonw/datasette-atom/blob/master/LICENSE\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/bad0ad2a7195b40874e3a10488118122d89489fd/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d417061636865253230322e302d626c75652e737667\"></a></p>\n<p>Datasette plugin that adds support for generating <a href=\"https://validator.w3.org/feed/docs/atom.html\" rel=\"nofollow\">Atom feeds</a> with the results of a SQL query.</p>\n<h2>Installation</h2>\n<p>Install this plugin in the same environment as Datasette to enable the <code>.atom</code> output extension.</p>\n<pre><code>$ pip install datasette-atom\n</code></pre>\n<h2>Usage</h2>\n<p>To create an Atom feed you need to define a custom SQL query that returns a required set of columns:</p>\n<ul>\n<li><code>atom_id</code> - a unique ID for each row. <a href=\"https://web.archive.org/web/20080211143232/http://diveintomark.org/archives/2004/05/28/howto-atom-id\" rel=\"nofollow\">This article</a> has suggestions about ways to create these IDs.</li>\n<li><code>atom_title</code> - a title for that row.</li>\n<li><code>atom_updated</code> - an <a href=\"http://www.faqs.org/rfcs/rfc3339.html\" rel=\"nofollow\">RFC 3339</a> timestamp representing the last time the entry was modified in a significant way. This can usually be the time that the row was created.</li>\n</ul>\n<p>The following columns are optional:</p>\n<ul>\n<li><code>atom_content</code> - content that should be shown in the feed. This will be treated as a regular string, so any embedded HTML tags will be escaped when they are displayed.</li>\n<li><code>atom_content_html</code> - content that should be shown in the feed. This will be treated as an HTML string, and will be sanitized using <a href=\"https://github.com/mozilla/bleach\" rel=\"nofollow\">Bleach</a> to ensure it does not have any malicious code in it before being returned as part of a <code>&lt;content type=\"html\"&gt;</code> Atom element. If both are provided, this will be used in place of <code>atom_content</code>.</li>\n<li><code>atom_link</code> - a URL that should be used as the link that the feed entry points to.</li>\n<li><code>atom_author_name</code> - the name of the author of the entry. If you provide this you can also provide <code>atom_author_uri</code> and <code>atom_author_email</code> with a URL and e-mail address for that author.</li>\n</ul>\n<p>A query that returns these columns can then be returned as an Atom feed by adding the <code>.atom</code> extension.</p>\n<h2>Example</h2>\n<p>Here is an example SQL query which generates an Atom feed for new entries on <a href=\"https://www.niche-museums.com/\" rel=\"nofollow\">www.niche-museums.com</a>:</p>\n<pre><span class=\"k\">select</span>\n  <span class=\"s1\">'tag:niche-museums.com,'</span> <span class=\"o\">||</span> <span class=\"n\">substr</span><span class=\"p\">(</span><span class=\"n\">created</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">11</span><span class=\"p\">)</span> <span class=\"o\">||</span> <span class=\"s1\">':'</span> <span class=\"o\">||</span> <span class=\"n\">id</span> <span class=\"k\">as</span> <span class=\"n\">atom_id</span><span class=\"p\">,</span>\n  <span class=\"n\">name</span> <span class=\"k\">as</span> <span class=\"n\">atom_title</span><span class=\"p\">,</span>\n  <span class=\"n\">created</span> <span class=\"k\">as</span> <span class=\"n\">atom_updated</span><span class=\"p\">,</span>\n  <span class=\"s1\">'https://www.niche-museums.com/browse/museums/'</span> <span class=\"o\">||</span> <span class=\"n\">id</span> <span class=\"k\">as</span> <span class=\"n\">atom_link</span><span class=\"p\">,</span>\n  <span class=\"n\">coalesce</span><span class=\"p\">(</span>\n    <span class=\"s1\">'&lt;img src=\"'</span> <span class=\"o\">||</span> <span class=\"n\">photo_url</span> <span class=\"o\">||</span> <span class=\"s1\">'?w=800&amp;amp;h=400&amp;amp;fit=crop&amp;amp;auto=compress\"&gt;'</span><span class=\"p\">,</span>\n    <span class=\"s1\">''</span>\n  <span class=\"p\">)</span> <span class=\"o\">||</span> <span class=\"s1\">'&lt;p&gt;'</span> <span class=\"o\">||</span> <span class=\"n\">description</span> <span class=\"o\">||</span> <span class=\"s1\">'&lt;/p&gt;'</span> <span class=\"k\">as</span> <span class=\"n\">atom_content_html</span>\n<span class=\"k\">from</span>\n  <span class=\"n\">museums</span>\n<span class=\"k\">order</span> <span class=\"k\">by</span>\n  <span class=\"n\">created</span> <span class=\"k\">desc</span>\n<span class=\"k\">limit</span>\n  <span class=\"mi\">15</span>\n</pre>\n<p>You can try this query by <a href=\"https://www.niche-museums.com/browse\" rel=\"nofollow\">pasting it in here</a> - then click the <code>.atom</code> link to see it as an Atom feed.</p>\n\n          </div>"}, "last_serial": 7138535, "releases": {"0.1a0": [{"comment_text": "", "digests": {"md5": "46f2b1e8cff89a7a03dc3b7ffc155a9f", "sha256": "ebf4001ac8501b19845ad685f2ba57a93f75082d1d93195ce1f67b7a659d8076"}, "downloads": -1, "filename": "datasette_atom-0.1a0-py3-none-any.whl", "has_sig": false, "md5_digest": "46f2b1e8cff89a7a03dc3b7ffc155a9f", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 6849, "upload_time": "2019-09-17T15:42:29", "upload_time_iso_8601": "2019-09-17T15:42:29.997477Z", "url": "https://files.pythonhosted.org/packages/b1/2e/1b143ad52bd92d2babaf6c3acc7002ad84127c18745bd8f4a72f974b056d/datasette_atom-0.1a0-py3-none-any.whl", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "dee12357da984c5bc751bc46c5b0ae73", "sha256": "7877b0271f70978ceeb57dbed13957542be40982e86557bfd80a495d7f79a87d"}, "downloads": -1, "filename": "datasette_atom-0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "dee12357da984c5bc751bc46c5b0ae73", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7623, "upload_time": "2019-11-30T06:26:04", "upload_time_iso_8601": "2019-11-30T06:26:04.841160Z", "url": "https://files.pythonhosted.org/packages/76/15/47a9661b0648075045a13183b7c12458466a7d6459ca137cef9b05ce9dc7/datasette_atom-0.2-py3-none-any.whl", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "b028cf0f70e67642143bc53a71c34c08", "sha256": "c4fff0754a8ee5c543b38a1722af8879034e0b122a71b196537a4687d5b83a71"}, "downloads": -1, "filename": "datasette_atom-0.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "b028cf0f70e67642143bc53a71c34c08", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7654, "upload_time": "2019-11-30T06:45:41", "upload_time_iso_8601": "2019-11-30T06:45:41.558763Z", "url": "https://files.pythonhosted.org/packages/ab/1c/46aed59d17b6d1a565ecc40fc8e285beef83f73178aae11c04239b421864/datasette_atom-0.2.1-py3-none-any.whl", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "b78284f5d05d769124a1915c155adabc", "sha256": "bc123556748ca9d16d47369d493c92cf1fab0b1ae54aacaf6f8e236bce8118f6"}, "downloads": -1, "filename": "datasette_atom-0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "b78284f5d05d769124a1915c155adabc", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7925, "upload_time": "2019-11-30T23:26:37", "upload_time_iso_8601": "2019-11-30T23:26:37.034527Z", "url": "https://files.pythonhosted.org/packages/cf/9f/4d0633b36d3bf7989b2ffa451a4f6f8f849af464e13b43e44a2c2d2bbb26/datasette_atom-0.3-py3-none-any.whl", "yanked": false}], "0.4": [{"comment_text": "", "digests": {"md5": "1b0587760c42263e2047bc2c834e237c", "sha256": "1bb7a5a3900e2587377fac6ca8de97d3c9c74b0cba120bf3b6fb023b5e690771"}, "downloads": -1, "filename": "datasette_atom-0.4-py3-none-any.whl", "has_sig": false, "md5_digest": "1b0587760c42263e2047bc2c834e237c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7931, "upload_time": "2019-12-03T00:34:46", "upload_time_iso_8601": "2019-12-03T00:34:46.394267Z", "url": "https://files.pythonhosted.org/packages/f3/77/2df2013cd988cb1521c60093d68187bbf94b8fb8d2166affa0fc65f7ad88/datasette_atom-0.4-py3-none-any.whl", "yanked": false}], "0.4.1": [{"comment_text": "", "digests": {"md5": "c922dd12ff3d7716e7de5fe9d337a92d", "sha256": "ca2e9dab90bb6364f941d59c8ca53476570da5b8fef7f1427e56a383aa73a33d"}, "downloads": -1, "filename": "datasette_atom-0.4.1-py3-none-any.whl", "has_sig": false, "md5_digest": "c922dd12ff3d7716e7de5fe9d337a92d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 7931, "upload_time": "2020-02-28T07:47:30", "upload_time_iso_8601": "2020-02-28T07:47:30.226146Z", "url": "https://files.pythonhosted.org/packages/33/77/6781193a978552e6424f5a18b5ce05b9a0e99dea7f35698ea319056890c1/datasette_atom-0.4.1-py3-none-any.whl", "yanked": false}], "0.5": [{"comment_text": "", "digests": {"md5": "b378b9505827ce1a4160f9de2ab984ae", "sha256": "2299def3ea211795b4ef13bd72cfc7f491fba52ccaa96e18a10df4430ac68850"}, "downloads": -1, "filename": "datasette_atom-0.5-py3-none-any.whl", "has_sig": false, "md5_digest": "b378b9505827ce1a4160f9de2ab984ae", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8084, "upload_time": "2020-04-30T16:12:54", "upload_time_iso_8601": "2020-04-30T16:12:54.131123Z", "url": "https://files.pythonhosted.org/packages/53/80/613cab327150940f00f549dac1730acd8e663ff0d2247c27eb1534e34dd5/datasette_atom-0.5-py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "b378b9505827ce1a4160f9de2ab984ae", "sha256": "2299def3ea211795b4ef13bd72cfc7f491fba52ccaa96e18a10df4430ac68850"}, "downloads": -1, "filename": "datasette_atom-0.5-py3-none-any.whl", "has_sig": false, "md5_digest": "b378b9505827ce1a4160f9de2ab984ae", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8084, "upload_time": "2020-04-30T16:12:54", "upload_time_iso_8601": "2020-04-30T16:12:54.131123Z", "url": "https://files.pythonhosted.org/packages/53/80/613cab327150940f00f549dac1730acd8e663ff0d2247c27eb1534e34dd5/datasette_atom-0.5-py3-none-any.whl", "yanked": false}], "timestamp": "Fri May  8 00:40:12 2020"}