{"info": {"author": "Ehlo Onion", "author_email": "onionmx@lists.immerda.ch", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: GNU General Public License v3 (GPLv3)", "Natural Language :: English", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6"], "description": "OnionRouter\n===========\n\n\n.. image:: https://img.shields.io/pypi/v/onionrouter.svg\n        :target: https://pypi.python.org/pypi/onionrouter\n\n.. image:: https://img.shields.io/travis/ehloonion/onionrouter.svg\n        :target: https://travis-ci.org/ehloonion/onionrouter\n\n.. image:: https://readthedocs.org/projects/onionrouter/badge/?version=latest\n        :target: https://onionrouter.readthedocs.io/en/latest/?badge=latest\n        :alt: Documentation Status\n\n.. image:: https://pyup.io/repos/github/ehloonion/onionrouter/shield.svg\n     :target: https://pyup.io/repos/github/ehloonion/onionrouter/\n     :alt: Updates\n\n\nPython Onion Routed Mail Deliveries\n\n* Free software: GNU General Public License v3\n* Documentation: https://onionrouter.readthedocs.io.\n\nWhat is this ?\n--------------\n\nThis python script implements dynamic SRV lookups to be fed to postfix as TCP transport map replies. More information on mail delivery over onion services can be found at https://github.com/ehloonion/onionmx.\n\nAn alternative implementation in Go can be found at https://git.autistici.org/ale/postfix-onion-transport\n\n\nFeatures\n--------\n* Interactive/Client/Daemon/Debug modes\n* Configurable SRV lookup string\n* Domain whitelisting\n* Lazy rerouting using static mappings\n\nHow to run\n----------\n\nThere are two ways to install onionrouter, automatically using pip or cloning the repository and manually installing the needed packages on Debian. Currently onionrouter has only been tested on Debian Jessie.\n\nUsing pip\n^^^^^^^^^\n.. code-block:: console\n\n   $ sudo pip install onionrouter\n\nTest functionality\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n.. code-block:: console\n\n    $ onionrouter --help\n\nManual installation on Debian Jessie\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nClone repository\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n.. code-block:: console\n\n   $ git clone https://github.com/ehloonion/onionrouter.git\n\nInstall Debian packages\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\nonionrouter has only been tested on Debian Jessie. Install the following packages:\n\n.. code-block:: console\n\n   $ sudo apt install python-dnspython python-yaml\n\nTest functionality\n\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n.. code-block:: console\n\n   $ cd onionrouter\n   $ ./onionrouter_run --help\n\nConfiguration and other options\n-------------------------------\n* Copy or update the onionrouter.ini file and with your settings (reference file is in onionrouter/configs folder if you cloned the git repo or in /etc/onionrouter/ if you installed the package)\n* Edit the configuration file\n    * Under the **DOMAIN** section replace the value of the **hostname** key with your local domain to be whitelisted from lookups. To add multiple local domains, separate them with comma ','\n    * Under the **RESOLVER** section put in the **resolver_ip** field your preferred resolver (default is 127.0.0.1). To use multiple resolvers, separate them with comma ','\n    * Under the **RESOLVER** section put in the **resolver_port** field the port that your resolver listens to (default is 53)\n\nonionrouter by default queries the destination domain for a specific SRV record, *_onion-mx._tcp.* and if it finds a .onion address in the reply it gives it back to postfix to be used by the smtptor service defined in master.cf. If no valid SRV record is found the mail is passed to smtp service. This gives us dynamic SRV lookups that lead to SMTP over onion addresses!\n\n* To change the SRV record the scripts looks for, edit the config file mentioned above and change under the **DNS** section the **srv_record** field with the SRV record you have setup (default is _onion-mx._tcp.)\n* To change the service that will be used when a .onion address is found, edit the config file mentioned above and change under the **REROUTE** section the **onion_transport** field with the service you want to be used (default is smtptor)\n* To *blacklist/ignore* domains in case you have a custom routing rule, or a black list of domains, add those domains under the **IGNORED** section in the **domains** field. For multiple domains, separate them with comma ','.\n\nExecution options\n-----------------\nonionrouter by default runs in server mode and acts as a daemon waiting for connections.\n\nDaemon mode can be configured with the following options:\n\n* **--port PORT** or **-p PORT** to define port for daemon to listen (default 23000)\n* **--host HOST** or **-l HOST** to define host for daemon to listen (default 127.0.0.1)\n\nOther options are supported as well:\n\n* **--mappings MAPPINGS** to define absolute path to static mappings folder (everything inside will be parsed as a yaml file) or yaml file\n* **--config CONFIG** to define the absolute path to config folder (must contain a onionrouter.ini file inside) or config file\n* **--client** or **-c** to connect to the daemon and interact with. Use the host and port options to define the options for the connection to the daemon\n* **--debug** or **-d** to start the daemon in debug mode. In this mode, daemon will also print (besides replying) the queries and answers Use the host and port options to define the options for the daemon\n* **--interactive** or **-i** to run onionrouter in interactive input mode for debugging or testing purposes without daemon\n\nHow to run\n----------\nCurrently onionrouter runs in the foreground, so you need to either run it via a systemd unit file or through some other daemonizing method (eg screen/tmux/etc). An example systemd unit is included in the *contrib* directory, modify it to your liking.\n\n.. code-block:: console\n\n   $ ./onionrouter_run --config /srv/onionrouter/onionrouter/configs/onionrouter.ini --mappings /srv/onionrouter/onionrouter/configs/map.yml -p 23002 --debug\n\n\n=======\nHistory\n=======\n\n0.1.0 (2017-03-14)\n------------------\n\n* First release on PyPI.\n\n0.4.0 (2017-03-20)\n------------------\n\n* Beta release on PyPI.\n\n0.4.1 (2017-05-13)\n------------------\n\n* Fix \"[Errno 98] Address already in use\" error when restarting the daemon\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/ehloonion/onionrouter", "keywords": "onionrouter", "license": "GNU General Public License v3", "maintainer": "", "maintainer_email": "", "name": "onionrouter", "package_url": "https://pypi.org/project/onionrouter/", "platform": "", "project_url": "https://pypi.org/project/onionrouter/", "project_urls": {"Homepage": "https://github.com/ehloonion/onionrouter"}, "release_url": "https://pypi.org/project/onionrouter/0.5.2/", "requires_dist": ["PyYAML (==4.2b1)", "dnspython"], "requires_python": "", "summary": "Python Onion Routed Mail Deliveries", "version": "0.5.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            OnionRouter<br>===========<br><br><br>.. image:: https://img.shields.io/pypi/v/onionrouter.svg<br>        :target: https://pypi.python.org/pypi/onionrouter<br><br>.. image:: https://img.shields.io/travis/ehloonion/onionrouter.svg<br>        :target: https://travis-ci.org/ehloonion/onionrouter<br><br>.. image:: https://readthedocs.org/projects/onionrouter/badge/?version=latest<br>        :target: https://onionrouter.readthedocs.io/en/latest/?badge=latest<br>        :alt: Documentation Status<br><br>.. image:: https://pyup.io/repos/github/ehloonion/onionrouter/shield.svg<br>     :target: https://pyup.io/repos/github/ehloonion/onionrouter/<br>     :alt: Updates<br><br><br>Python Onion Routed Mail Deliveries<br><br>* Free software: GNU General Public License v3<br>* Documentation: https://onionrouter.readthedocs.io.<br><br>What is this ?<br>--------------<br><br>This python script implements dynamic SRV lookups to be fed to postfix as TCP transport map replies. More information on mail delivery over onion services can be found at https://github.com/ehloonion/onionmx.<br><br>An alternative implementation in Go can be found at https://git.autistici.org/ale/postfix-onion-transport<br><br><br>Features<br>--------<br>* Interactive/Client/Daemon/Debug modes<br>* Configurable SRV lookup string<br>* Domain whitelisting<br>* Lazy rerouting using static mappings<br><br>How to run<br>----------<br><br>There are two ways to install onionrouter, automatically using pip or cloning the repository and manually installing the needed packages on Debian. Currently onionrouter has only been tested on Debian Jessie.<br><br>Using pip<br>^^^^^^^^^<br>.. code-block:: console<br><br>   $ sudo pip install onionrouter<br><br>Test functionality<br>\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"<br>.. code-block:: console<br><br>    $ onionrouter --help<br><br>Manual installation on Debian Jessie<br>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br><br>Clone repository<br>\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"<br>.. code-block:: console<br><br>   $ git clone https://github.com/ehloonion/onionrouter.git<br><br>Install Debian packages<br>\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"<br>onionrouter has only been tested on Debian Jessie. Install the following packages:<br><br>.. code-block:: console<br><br>   $ sudo apt install python-dnspython python-yaml<br><br>Test functionality<br>\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"<br>.. code-block:: console<br><br>   $ cd onionrouter<br>   $ ./onionrouter_run --help<br><br>Configuration and other options<br>-------------------------------<br>* Copy or update the onionrouter.ini file and with your settings (reference file is in onionrouter/configs folder if you cloned the git repo or in /etc/onionrouter/ if you installed the package)<br>* Edit the configuration file<br>    * Under the **DOMAIN** section replace the value of the **hostname** key with your local domain to be whitelisted from lookups. To add multiple local domains, separate them with comma ','<br>    * Under the **RESOLVER** section put in the **resolver_ip** field your preferred resolver (default is 127.0.0.1). To use multiple resolvers, separate them with comma ','<br>    * Under the **RESOLVER** section put in the **resolver_port** field the port that your resolver listens to (default is 53)<br><br>onionrouter by default queries the destination domain for a specific SRV record, *_onion-mx._tcp.* and if it finds a .onion address in the reply it gives it back to postfix to be used by the smtptor service defined in master.cf. If no valid SRV record is found the mail is passed to smtp service. This gives us dynamic SRV lookups that lead to SMTP over onion addresses!<br><br>* To change the SRV record the scripts looks for, edit the config file mentioned above and change under the **DNS** section the **srv_record** field with the SRV record you have setup (default is _onion-mx._tcp.)<br>* To change the service that will be used when a .onion address is found, edit the config file mentioned above and change under the **REROUTE** section the **onion_transport** field with the service you want to be used (default is smtptor)<br>* To *blacklist/ignore* domains in case you have a custom routing rule, or a black list of domains, add those domains under the **IGNORED** section in the **domains** field. For multiple domains, separate them with comma ','.<br><br>Execution options<br>-----------------<br>onionrouter by default runs in server mode and acts as a daemon waiting for connections.<br><br>Daemon mode can be configured with the following options:<br><br>* **--port PORT** or **-p PORT** to define port for daemon to listen (default 23000)<br>* **--host HOST** or **-l HOST** to define host for daemon to listen (default 127.0.0.1)<br><br>Other options are supported as well:<br><br>* **--mappings MAPPINGS** to define absolute path to static mappings folder (everything inside will be parsed as a yaml file) or yaml file<br>* **--config CONFIG** to define the absolute path to config folder (must contain a onionrouter.ini file inside) or config file<br>* **--client** or **-c** to connect to the daemon and interact with. Use the host and port options to define the options for the connection to the daemon<br>* **--debug** or **-d** to start the daemon in debug mode. In this mode, daemon will also print (besides replying) the queries and answers Use the host and port options to define the options for the daemon<br>* **--interactive** or **-i** to run onionrouter in interactive input mode for debugging or testing purposes without daemon<br><br>How to run<br>----------<br>Currently onionrouter runs in the foreground, so you need to either run it via a systemd unit file or through some other daemonizing method (eg screen/tmux/etc). An example systemd unit is included in the *contrib* directory, modify it to your liking.<br><br>.. code-block:: console<br><br>   $ ./onionrouter_run --config /srv/onionrouter/onionrouter/configs/onionrouter.ini --mappings /srv/onionrouter/onionrouter/configs/map.yml -p 23002 --debug<br><br><br>=======<br>History<br>=======<br><br>0.1.0 (2017-03-14)<br>------------------<br><br>* First release on PyPI.<br><br>0.4.0 (2017-03-20)<br>------------------<br><br>* Beta release on PyPI.<br><br>0.4.1 (2017-05-13)<br>------------------<br><br>* Fix \"[Errno 98] Address already in use\" error when restarting the daemon<br><br><br>\n          </div>"}, "last_serial": 4668322, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "afd3b39f50b9499b6170f5804b864aee", "sha256": "1cd03a026d7b3a9a6b14b6d7f50669588ab3a714d3ae3ff4c02495f745bd35bf"}, "downloads": -1, "filename": "onionrouter-0.2.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "afd3b39f50b9499b6170f5804b864aee", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 10069, "upload_time": "2017-03-19T22:16:04", "upload_time_iso_8601": "2017-03-19T22:16:04.190612Z", "url": "https://files.pythonhosted.org/packages/41/78/f840834943335d53f1a9ace38e0203e50cb7099ae5e648e5b51fc54c0dc2/onionrouter-0.2.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "86a41324a4caf8f95f5934f83c85532c", "sha256": "054cb32c10c961386df69ac2d6ecf8da14fe2ac8dd47dcb9d3f6f89f45152fbe"}, "downloads": -1, "filename": "onionrouter-0.2.0.tar.gz", "has_sig": false, "md5_digest": "86a41324a4caf8f95f5934f83c85532c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16479, "upload_time": "2017-03-19T22:16:07", "upload_time_iso_8601": "2017-03-19T22:16:07.057004Z", "url": "https://files.pythonhosted.org/packages/68/41/a2610deca1f39671b6b7e468b672c275e4584bdddaba92f6df5dc881b208/onionrouter-0.2.0.tar.gz", "yanked": false}], "0.3.2": [{"comment_text": "", "digests": {"md5": "cdb5927ee276154c6f037385be19838d", "sha256": "0445509391610a5a7831235efc33d177b47d68f34aac94f3d119d467a70d0be3"}, "downloads": -1, "filename": "onionrouter-0.3.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "cdb5927ee276154c6f037385be19838d", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 10085, "upload_time": "2017-03-20T12:47:31", "upload_time_iso_8601": "2017-03-20T12:47:31.722787Z", "url": "https://files.pythonhosted.org/packages/11/dd/f7806136e309387199d2ef75ca1bdd01a208448009174e3a3a8a291711b2/onionrouter-0.3.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d3f1c4c5f4199b7efd8035e9313d3106", "sha256": "ae8134d626fe95394e3e50e2d85df821fc484f30761696443fb50ac8873f7832"}, "downloads": -1, "filename": "onionrouter-0.3.2.tar.gz", "has_sig": false, "md5_digest": "d3f1c4c5f4199b7efd8035e9313d3106", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 15943, "upload_time": "2017-03-20T12:47:33", "upload_time_iso_8601": "2017-03-20T12:47:33.034590Z", "url": "https://files.pythonhosted.org/packages/8c/90/f06bda89b1030cf00df4e5d63aab5d2d3cf4ca22bdb78a9b55103a806a27/onionrouter-0.3.2.tar.gz", "yanked": false}], "0.4.0": [{"comment_text": "", "digests": {"md5": "26372a9428396b8c3e61707b0864beef", "sha256": "f6c2ca7a147c69bf90d4aa3419c50dcd9918caaf5893fe9e09a3beac928e1f55"}, "downloads": -1, "filename": "onionrouter-0.4.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "26372a9428396b8c3e61707b0864beef", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 12356, "upload_time": "2017-03-22T13:21:01", "upload_time_iso_8601": "2017-03-22T13:21:01.940672Z", "url": "https://files.pythonhosted.org/packages/56/da/3fe9fcbed659b73ca765f885aaf22491c8719dc051e9f4fa0abab94f7684/onionrouter-0.4.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c84d8ed9312afa04ac9e69faace4abb9", "sha256": "f76916ac305eeb8a0d40d251feb6a7aa423d231203b975c23fa017d9db73e866"}, "downloads": -1, "filename": "onionrouter-0.4.0.tar.gz", "has_sig": false, "md5_digest": "c84d8ed9312afa04ac9e69faace4abb9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23256, "upload_time": "2017-03-22T13:21:03", "upload_time_iso_8601": "2017-03-22T13:21:03.313172Z", "url": "https://files.pythonhosted.org/packages/f1/63/3f410db22c7574f80c245e4a83d1a75ab341d0b4bff06f8b7c83a3c98828/onionrouter-0.4.0.tar.gz", "yanked": false}], "0.5.0": [{"comment_text": "", "digests": {"md5": "f6eb673cb8ddcfd606fc237a703c0ede", "sha256": "ae0dbb01ec4f447270e1565f5142c8b2a6ee0b526b08c5870c45f30da5bf0bad"}, "downloads": -1, "filename": "onionrouter-0.5.0.tar.gz", "has_sig": false, "md5_digest": "f6eb673cb8ddcfd606fc237a703c0ede", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23161, "upload_time": "2017-10-23T08:15:25", "upload_time_iso_8601": "2017-10-23T08:15:25.182365Z", "url": "https://files.pythonhosted.org/packages/51/6a/dd90b50df27174a2461d8dc02238f838c39537fb1ee6185306f0c5f96a28/onionrouter-0.5.0.tar.gz", "yanked": false}], "0.5.2": [{"comment_text": "", "digests": {"md5": "8f19753b24cb66c8be45bd107db57434", "sha256": "12bed2ea377782aa7015cf54d3c61b0d4228d2f8f36a2a4d76bd8468a40dd8d2"}, "downloads": -1, "filename": "onionrouter-0.5.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "8f19753b24cb66c8be45bd107db57434", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 15645, "upload_time": "2019-01-07T11:54:21", "upload_time_iso_8601": "2019-01-07T11:54:21.381450Z", "url": "https://files.pythonhosted.org/packages/4f/fe/7f9a8b8c41086903fdd2e071b154bdf95bd5bc1b6ad167acb2db0ddfdc5e/onionrouter-0.5.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "23644c1e523e9174da3d73841f37bbb0", "sha256": "8596eb30742c5864e184287b13f50dd4fb2c87ff1766dc7a7aba681286cd16a1"}, "downloads": -1, "filename": "onionrouter-0.5.2.tar.gz", "has_sig": false, "md5_digest": "23644c1e523e9174da3d73841f37bbb0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23497, "upload_time": "2019-01-07T11:54:22", "upload_time_iso_8601": "2019-01-07T11:54:22.909018Z", "url": "https://files.pythonhosted.org/packages/a7/bf/6f5e885ec87f50bbdc7796570fa56ace1f7da83a286a958ab2207cfbc657/onionrouter-0.5.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "8f19753b24cb66c8be45bd107db57434", "sha256": "12bed2ea377782aa7015cf54d3c61b0d4228d2f8f36a2a4d76bd8468a40dd8d2"}, "downloads": -1, "filename": "onionrouter-0.5.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "8f19753b24cb66c8be45bd107db57434", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 15645, "upload_time": "2019-01-07T11:54:21", "upload_time_iso_8601": "2019-01-07T11:54:21.381450Z", "url": "https://files.pythonhosted.org/packages/4f/fe/7f9a8b8c41086903fdd2e071b154bdf95bd5bc1b6ad167acb2db0ddfdc5e/onionrouter-0.5.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "23644c1e523e9174da3d73841f37bbb0", "sha256": "8596eb30742c5864e184287b13f50dd4fb2c87ff1766dc7a7aba681286cd16a1"}, "downloads": -1, "filename": "onionrouter-0.5.2.tar.gz", "has_sig": false, "md5_digest": "23644c1e523e9174da3d73841f37bbb0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 23497, "upload_time": "2019-01-07T11:54:22", "upload_time_iso_8601": "2019-01-07T11:54:22.909018Z", "url": "https://files.pythonhosted.org/packages/a7/bf/6f5e885ec87f50bbdc7796570fa56ace1f7da83a286a958ab2207cfbc657/onionrouter-0.5.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:03:55 2020"}