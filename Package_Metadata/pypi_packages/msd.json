{"info": {"author": "David Marin", "author_email": "dave@spendright.org", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "License :: OSI Approved :: Apache Software License", "Natural Language :: English", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5"], "description": "Merge Scraper Data (for great justice!)\n=======================================\n\nThere are a lot of consumer campaigns out there on the Internet. Consumer\ncampaigns supported by perfectly lovely organizations, organized around\ncauses you wholeheartedly support, that would change the world if enough\npeople followed through on them.\n\nBut it's hard to put them into practice. And it's *really* hard to put more\nthan one campaign at a time into practice. Different campaigns have different\nscoring systems, different names for the same company, and, when they have\nthem at all, different apps that don't talk to each other.\n\n``msd`` takes messy data from a bunch of different consumer campaigns, and\nputs it into a single unified format.\n\n``msd`` currently powers `SpendRight <http://spendright.org/search>`__\n(``msd``'s creator) and the `thinkContext <http://thinkcontext.org>`__ browser\nextension.\n\n\nUsing the data\n==============\n\nIf you're not there already, check out\n`msd's morph.io page <https://morph.io/spendright/msd>`__, where you can\nview and download data merged from SpendRight's scrapers.\n\nKeep in mind that the original consumer campaigns are generally copyrighted by\nthe non-profits that created them, and they have all sorts of different\nterms/licensing agreements. It's up to you to decide whether to ask\nthem for permission now, or forgiveness later.\n\n(This mostly applies to the ``claim`` and ``rating`` tables; facts about\ncompanies and brands are almost certainly fair game.)\n\n\nInstallation\n============\n\nIt's on PyPI: ``pip install msd``\n\n\nUsage\n=====\n\n``msd db1.sqlite [db2.sqlite ...]``\n\nThis produces a file named ``msd.sqlite`` (you can change this with the ``-o``\nswitch).\n\n``msd`` can also take YAML files as input. The YAML files should encode a\nmap from table name to list of rows (which are maps from column name to value).\nFor example::\n\n  campaign:\n  - author: Greenpeace International\n    campaign_id: greenpeace_palm_oil\n  rating:\n  - campaign_id: greenpeace_palm_oil\n    company: Colgate-Palmolive\n    judgment: -1\n  - campaign_id: greenpeace_palm_oil\n    company: Danone\n    judgment: 0\n\nIf you don't have the library installed (e.g. for development), you\ncan use ``python -m msd.cmd`` in place of ``msd``.\n\n\nData format\n===========\n\n``msd`` uses a SQLite data format, both for input and output.\n\nThe input and output format are almost identical; differences are noted\nin *italics*.\n\nKeys\n----\n\nEvery campaign in the input data should have a ``campaign_id``\nthat would work as a Python identifier (for example ``wwf_palm_oil``).\n\nThere isn't a ``company_id`` field though; we just use the shortest name\nthat a company is commonly referred to by.``msd`` is smart\nenough to know that, for example, The Coca-Cola Company can be called\n``Coca-Cola`` but that we can't refer to The Learning Company as simply\n\"Learning\".\n\nSimilarly, there isn't a ``brand_id`` field, ``msd`` just figures out the\nproper name for the brand (minus the \u2122, etc.), and puts it into the ``brand``\nfield; the \"key\" for any given brand is ``company`` and ``brand`` together.\n\nThere also aren't (product) category keys; we just put the name of the\ncategory (e.g. ``Chocolate``) into the ``category`` field.\n\nFinally, the initial data sources each get a ``scraper_id``, which is one\nor more identifiers, separated by dots (e.g. ``sr.campaign.wwf_palm_oil``).\nThese serve only to help you track down problems in your input data.\n\n*Every table in the input data may have a* ``scraper_id`` *field to help\nidentify which code gathered that data. The stem\nof whatever input file data came from will be prepended to form the*\n``scraper_id`` *in the output.*\n\n*For example, a* ``scraper_id`` *of*\n``wwf_palm_oil`` *from an input file named* ``sr.campaign.sqlite``\n*would become* ``sr.campaign.wwf_palm_oil`` *in the output data.*\n\nMessy input data\n----------------\n\n``msd`` *can accept very, very messy input data. The goal is for you to be\nable as little effort as possible into writing scrapers.*\n\nno primary keys\n^^^^^^^^^^^^^^^\n\n*For starters, the input data need not have primary keys, or any keys at\nall. The first thing we do is shovel all the input data into a single\n\"scratch\" table anyways.*\n\n*It's totally fine to have two rows that* would *have the same keys in the\noutput data;* ``msd`` *will merge them for you.*\n\nmissing/extra fields\n^^^^^^^^^^^^^^^^^^^^\n\n*It's totally fine for the input data to be missing fields, or have\nfields set to* ``NULL`` *that are supposed to have a value (in the worst case,\nif you omit a required value,* ``msd`` *will just ignore that row.*\n\n*It's fine to have extra fields;* ``msd`` *will just ignore them.*\n\ndifferent names for companies and brands\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n*It's fine to use different names for the same company\nor brand;* ``msd`` *will figure this out and merge them as appropriate.*\n\ngeneral text cleanliness\n^^^^^^^^^^^^^^^^^^^^^^^^\n\n*For every text field,* ``msd`` *does the following things for you:*\n\n- *converts all whitespace (tabs, double spaces, etc.) to a single space*\n- *strips leading and trailing whitespace*\n- *converts \"smart quotes\", ligatures, and other silliness to the plain\n  equivalent*\n- *normalizes all unicode into NFKD form (this basically means there aren't\n  multiple ways to represent the same accented character).*\n\nbrand name cleaning\n^^^^^^^^^^^^^^^^^^^\n\n*In addition, you can be* even lazier *with the* ``brand`` *field.* ``msd``\n*automatically finds \u2122, \u00ae, etc., puts it elsewhere for safekeeping (see\nthe* ``tm`` *field, below), and ignores anything after it.*\n\n*For example, if you throw something like*\n``INVOKANA\u2122 (canagliflozin) USPI`` *into the* ``brand`` *field, it'll know\nthat the brand is named* ``INVOKANA`` *and is supposed to have a \u2122 after it.*\n\ncategory name cleaning\n^^^^^^^^^^^^^^^^^^^^^^\n\n``msd`` *formats category names in a consistent way. For example,*\n``food & beverages`` *in the input data would become* ``Food and Beverages``\n*in the output data.*\n\nrating cleanup\n^^^^^^^^^^^^^^\n\n``msd`` can do limited cleanup of ratings, including inferring ``judgment``\nfrom ``grade``. See ``rating`` table for details.\n\ninferred rows\n^^^^^^^^^^^^^\n\n``msd`` *will infer that companies and brands exist. For example, if you\ninclude a rating for a company in the* ``rating`` *table, a corresponding\nentry will be automatically created for you in the* ``company`` *table.*\n\nand that's not all...\n^^^^^^^^^^^^^^^^^^^^^\n\nNope, that's pretty much everything. Here are the table definitions:\n\n\nTable definitions\n-----------------\n\nbrand: facts about brands\n^^^^^^^^^^^^^^^^^^^^^^^^^\n\n**Primary Key**: ``company``, ``brand``\n\n**brand**: canonical name for the brand (e.g. ``Dove``)\n\n**company**: canonical name for the company (e.g. ``Unilever``)\n\n**facebook_url**: optional link to official Facebook page for the brand. (If\nthere's only a page for the company, put that in ``company.facebook_url``).\nSo consumers can say nice/brutally honest things on their Facebook page.\n\n**is_former**: 0 or 1. If 1, this brand no longer exists (e.g. Sanyo) or was\nsold to another company (e.g. LU is no longer owned by Groupe Danone). Set\nthis to 1 in your input data to knock out out-of-date brand information from\nout-of-date consumer campaigns.\n\n**is_licensed**: 0 or 1. If 1, this brand actually belongs to another company\n(e.g. The Coca-Cola Company markets products under the Evian brand).\nGenerally a good idea to put the responsiblity for a brand on its actual\nowner.\n\n**is_prescription**: 0 or 1. If 1, this brand is available by prescription\nonly (so you probably can't buy it on, like, Amazon.com).\n\n**logo_url**: 0 or 1. Optional link to an image of this brand's logo (need not\nbe on the brand's website).\n\n**tm**: empty string, ``\u2122``, ``\u00ae`` or ``\u2120``. The thing that companies like to\nappear directly after the brand name.\n\n**twitter_handle**: optional handle for the brand's Twitter account, including\nthe ``@`` (e.g. ``@BrownCowYogurt``). So consumers can congratulate them/call\nthem out on Twitter.\n\n**url**: optional link to official web site/page for this brand. It's okay\nif this is just a sub-page of the company's official website.\n\n\ncampaign: consumer campaigns\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nIn practice, introducing consumer campaigns to users is one of the\nmost important parts of any tool you build; you'll probably want to just use\nthis table as a starting point, and include some content of your own.\n\n**Primary Key**: ``campaign_id``\n\n**author**: optional free-form name of the organization behind the campaign\n(e.g. ``Greenpeace International``).\n\n**author_url**: optional link to author's website\n\n**campaign**: free-form name of the campaign (e.g.\n``Guide to Greener Electronics``)\n\n**campaign_id**: unique identifier for this campaign (e.g.\n``greenpeace_electronics``.) Up to you to pick something that makes sense\nand doesn't collide with other campaign IDs.\n\n**contributors**: optional free-form description of other contributors\nto the consumer campaign (e.g.\n``International Labor Rights Forum, Baptist World Aid``).\n\n**copyright**: optional copyright notice. Usually starts with ``\u00a9`` (e.g.\n``\u00a9 2006-2014 Climate Counts. All Rights Reserved.``).\n\n**date**: optional date this campaign was created, in ``YYYY-MM-DD``,\n``YYYY-MM``, or ``YYYY`` format. A string, not a number. Sometimes the\nbest available data is a couple years old, and consumers deserve to know!\n\n**donate_url**: optional link to a page where you can donate back to the\ncampaign/author. Try to include this somewhere in whatever you build; create a\nvirtuous cycle and help these consumer campaigns become financially\nself-sustaining!\n\n**email**: optional contact email for the campaign (e.g.\n``feedback@free2work.org``)\n\n**facebook_url**: optional link to official Facebook page for the campaign,\nso consumers can get involved in the movement!\n\n**goal**: very brief (40 characters or less) description of what someone\nhelps accomplish by being involved in this campaign (e.g.\n``stop forced labor in Uzbekistan``). Best to start this with a lowercase\nletter unless the first word is a proper noun.\n\n**twitter_handle**: optional handle for the campaign's Twitter account, so\nthat consumers can follow/reference them on Twitter. Including the ``@``\n(e.g. ``@WWF``).\n\n**url**: optional link to campaign's web site, so consumers can learn more\nand get involved.\n\n\ncategory: product categories for companies and brands\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n``msd`` doesn't build an organized category tree like, say, online retailers\nhave; these are more like hints. See the ``subcategory`` table for details.\n\n**Primary Key**: ``company``, ``brand``, ``category``\n\n**brand**: canonical name for the brand. Empty string if we're categorizing\na company\n\n**category**: free-form name for category (e.g. ``Food and Beverages``).\n\n**company**: canonical name for the company\n\n**is_implied**: 0 or 1. If 1, this category was only implied by a subcategory\nrelationship (see ``subcategory`` table). *Ignored in the input data.*\n\n\nclaim: bullet points to support ratings\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n**Primary Key**: ``campaign_id``, ``company``, ``brand``, ``scope``, ``claim``\n\n(``claim`` is free-form, so this is more like a non-unique key)\n\n**brand**: canonical name for the brand. Empty string if this is a claim\nabout a company.\n\n**campaign_id**: unique identifier of campaign making this claim (see\n``campaign.campaign_id``)\n\n**claim**: free-form claim. Should be small enough to fit in a bullet point,\nand be able to stand on its own (spell out obscure acronyms and other context).\nBest to start this with a lowercase letter unless the first word is a\nproper noun.\n\n**company**: canonical name for the company\n\n**date**: optional date this claim was made, in ``YYYY-MM-DD``,\n``YYYY-MM``, or ``YYYY`` format. A string, not a number.\n\n**judgment**: -1, 0, or 1. Does the claim say something good (``1``), mixed\n(``0``), or bad (``-1``) about the company or brand? Need not match the\ncampaign's rating. If a claim is totally neutral (e.g.\n``manufactures large appliances``) it doesn't belong in this table at all!\n\n**scope**: optional free-form limitation on which products this applies to\n(e.g. ``Fair Trade``). Usually an empty string, to mean no limitation or that\nit's only *not* some scope elsewhere in the data (don't set this to\n``Non-Certified``).\n\n**url**: optional link to web page/PDF document etc. where this claim was made.\nSome people like to see the supporting data!\n\n\ncompany: facts about companies\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n**Primary Key**: ``company``\n\n**company**: canonical name for the company (e.g. ``Disney``)\n\n**company_full**: full, official name of the company (e.g.\n``The Walt Disney Company``).\n\n**email**: contact/feedback email for the company (e.g.\n``consumer.relations@adidas.com``).\n\n**facebook_url**: optional link to official Facebook page for the company.\n\n**feedback_url**: optional link to a page where consumers can submit\nfeedback to the company (some companies don't like to do this by email).\n\n**hq_company**: optional name of the country where this company is\nheadquartered (e.g. ``USA``).\n\n**logo_url**: 0 or 1. Optional link to an image of this company's logo (need\nnot be on the company's website).\n\n**phone**: optional phone number for customer feedback/complaints (a string,\nnot a number)\n\n**twitter_handle**: optional handle for the company's Twitter account,\nincluding the ``@`` (e.g. ``@Stonyfield``).\n\n**url**: optional link to official web site/page for this company.\n\n\ncompany_name: canoncial, full, and alternate names for companies\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n**Primary Key**: ``company``, ``company_name``\n\n**company**: canonical name for the company (e.g. ``Disney``)\n\n**company_name**: a name for the company. can be the canonical\nname, the full name (see ``company.company_full``) or something else\n(e.g. ``Walt Disney``).\n\n**is_alias**: 0 or 1. If 1, this is a name that somebody used somewhere\nbut isn't really a recognizable name for the company (e.g. \"AEO\" for\nAmerican Eagle Outfitters or \"LGE\" for \"LG Electronics\"). *Set this your\ninput data to knock out weird company aliases.*\n\n**is_full**: 0 or 1. If 1, this is the full name for the company,\nwhich also appears in ``company.company_full``. (There isn't an\n``is_canonical`` field; just check if ``company = company_name``.)\n\n\nrating: campaigns' judgments of brands and companies\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nThis is where the magic happens.\n\n**brand**: canonical name for the brand. Empty string if this is a rating of\na company.\n\n**campaign_id**: unique identifier of campaign this rating comes from (see\n``campaign.campaign_id``)\n\n**company**: canonical name for the company\n\n**date**: optional date this rating was last updated, in ``YYYY-MM-DD``,\n``YYYY-MM``, or ``YYYY`` format. A string, not a number.\n\n**description**: free-form, brief description of the rating (e.g.\n``Soaring``, ``Cannot Recommend``).\n\n**grade**: optional letter grade (e.g. ``A+``, ``C-``, ``F``). Some campaigns\nuse ``E`` instead of ``F``.\n\n**judgment**: -1, 0, or 1. Should consumers support (``1``), consider\n(``0``), or avoid (``-1``) the company or brand? Some campaigns will give\neverything a ``1`` (e.g. certifiers) or everything a ``-1`` (e.g. boycott\ncampaigns).\n\n``msd`` *can infer* ``judgment`` *from* ``grade``, *but otherwise you need\nto set it yourself in the input data.*\n\n*Red for avoid, yellow for consider, and green for support is a de-facto\nstandard among consumer campaigns. If all else fails, contact the campaign's\nauthor and ask.*\n\n**max_score**: if ``score`` is set, the highest score possible on the rating\nscale (a number).\n\n**min_score**: if ``score`` is set, the lowest score possible on the rating\nscale (a number). *If* ``score`` *is set but* ``min_score`` *is not,* ``msd``\n*will assume* ``min_score`` *is zero.*\n\n**num_ranked**: if ``rank`` is set, the number of things ranked (an integer)\n\n**rank**: if campaign ranks companies/brands, where this one ranks\n(this is an integer, and the best ranking is `1`, not `0`).\n\n**scope**: optional free-form limitation on which products this applies to\n(e.g. ``Fair Trade``). Usually an empty string, to mean no limitation or that\nit's only *not* some scope elsewhere in the data (don't set this to\n``Non-Certified``).\n\n**score**: optional numerical score (e.g. ``57.5``).\n\n**url**: optional link to web page/PDF document etc. where this rating was\nmade. Some people like to see the supporting data!\n\n\nscraper: when data was last gathered\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n**Primary Key**: ``scraper_id``\n\n**last_scraped**: when this data was last gathered, as a UTC ISO timestamp\n(for example, ``2015-08-03T20:55:36.795227Z``).\n\n**scraper_id**: unique identifier for the scraper that gathered this data\n\n\nscraper_brand_map: names of brands in the input data\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nThis is mostly useful for debugging your output data.\n\n``msd`` *ignores this table if it appears in the input data*\n\n**Primary Key**: ``scraper_id``, ``scraper_company``, ``scraper_brand``\n\n**Other Indexes**: (``company``, ``brand``)\n\n**brand**: canonical name for the brand. (This should never be empty;\nthat's what ``scraper_company_map`` is for.)\n\n**company**: canonical name for the company\n\n**scraper_brand**: name used for the brand in the input data\n\n**scraper_company**: name used for the company in the input data\n\n**scraper_id**: unique identifier for the scraper that used this\nbrand and company name\n\n\nscraper_category_map: names of categories in the intput data\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nThis is mostly useful for debugging your output data.\n\n``msd`` *ignores this table if it appears in the input data*\n\n**Primary Key**: ``scraper_id``, ``category``, ``scraper_brand``\n\n**Other Indexes**: (``category``)\n\n**category**: canonical name for a category (e.g. ``Food and Beverages``)\n\n**scraper_brand**: name used for the brand in the input data (e.g.\n`` food &  beverages``).\n\n**scraper_id**: unique identifier for the scraper that used this\ncategory name\n\n\nscraper_company_map: names of companies in the input data\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nThis is mostly useful for debugging your output data.\n\n``msd`` *ignores this table if it appears in the input data*\n\n**Primary Key**: ``scraper_id``, ``scraper_company``\n\n**Other Indexes**: (``company``)\n\n**company**: canonical name for the company\n\n**scraper_brand**: name used for the brand in the input data\n\n**scraper_id**: unique identifier for the scraper that used this\ncompany name\n\n\nsubcategory: product category relationships\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n``msd`` doesn't attempt to build a proper category tree; it's really just\na directed graph of category relationships: if something is in category\nA (``subcategory``) it must also be in category B (``category``).\n\n``msd`` *automatically infers implied relationships: if A is a subcategory\nof B and B is a subcategory of C, A is a subcategory of C.*\n\n**category**: canonical name for a category\n\n**is_implied**: 0 or 1. If 1, this relationship was inferred by ``msd``.\n*Ignored in the input data.*\n\n**subcategory**: canonical name for a subcategory of ``category``\n\n\nurl: hook for scraping URLs in the scraper data\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n*This table only exists in the input data, and is only used to fill fields\nin the output data that would otherwise be empty.*\n\nThis allows us to build generic scrapers that can grab Twitter handles,\nFacebook URLs, etc. directly from a company or brand's official page. See\nSpendRight's `scrape-urls <https://github.com/spendright/scrape-urls>`__\nfor an example.\n\n**facebook_url**: optional facebook page for a company/brand\n\n**last_scraped**: when the company/brand's page was scraped, as a UTC\niso timestamp (e.g. ``2015-08-03T20:55:36.795227Z``). *Not currently used.*\n\n**twitter_handle**: optional twitter handle for a company/brand, including\nthe leading ``@``.\n\n**url**: url this data was scraped from\n\n\nWriting your own scrapers\n=========================\n\nIf you want to write something in Python, check out SpendRight's\n`scrape-campaigns <https://github.com/spendright/scrape-campaigns>`__\nproject, and submit a pull request (look in ``scrapers/``) for examples.\n\nIf you'd rather write in another language, consider setting up your own\nscraper on `morph.io <https://morph.io/>`__, which can also handle scrapers\nin Ruby, PHP, Perl, and Node.js. See the\n`morph.io Documentation <https://morph.io/documentation>`__ for details.\nAnd let us know, so we can point\n`msd's morph.io page <https://morph.io/spendright/msd>`__ at it.\n\n\nWorking on msd\n==============\n\n``msd`` is pretty straightforward. Here's a brief overview of how it works:\n\n1. ``msd`` starts in ``msd/cmd.py`` (look for ``msd.cmd.run()``).\n2. It first dumps all the input data into a temporary \"scratch\" DB\n   (``msd-scratch.sqlite``) with the correct columns and useful indexes (look\n   for ``msd.scratch.build_scratch_db()``).\n3. Then it creates the output database (``msd.sqlite``) and fills it table by\n   table (look for ``msd.fill_output_db()``).\n\nAlso, table definitions live in ``msd/table.py``.\n\n\nUsing msd as a library\n======================\n\n``msd`` isn't really a library, but there's some useful stuff in ``msd``\n(for example, ``msd/company.py`` knows how to strip all the various versions\nof \"Inc.\" off company names).\n\nIf you want to call some of this stuff from another project, please let us\nknow so that we can work out a sane, stable interface for you!", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "http://github.com/spendright/msd", "keywords": null, "license": "Apache", "maintainer": null, "maintainer_email": null, "name": "msd", "package_url": "https://pypi.org/project/msd/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/msd/", "project_urls": {"Download": "UNKNOWN", "Homepage": "http://github.com/spendright/msd"}, "release_url": "https://pypi.org/project/msd/0.1.5/", "requires_dist": null, "requires_python": null, "summary": "Merge SpendRight scraper data", "version": "0.1.5", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"merge-scraper-data-for-great-justice\">\n<h2>Merge Scraper Data (for great justice!)</h2>\n<p>There are a lot of consumer campaigns out there on the Internet. Consumer\ncampaigns supported by perfectly lovely organizations, organized around\ncauses you wholeheartedly support, that would change the world if enough\npeople followed through on them.</p>\n<p>But it\u2019s hard to put them into practice. And it\u2019s <em>really</em> hard to put more\nthan one campaign at a time into practice. Different campaigns have different\nscoring systems, different names for the same company, and, when they have\nthem at all, different apps that don\u2019t talk to each other.</p>\n<p><tt>msd</tt> takes messy data from a bunch of different consumer campaigns, and\nputs it into a single unified format.</p>\n<p><tt>msd</tt> currently powers <a href=\"http://spendright.org/search\" rel=\"nofollow\">SpendRight</a>\n(<tt>msd</tt>\u2019s creator) and the <a href=\"http://thinkcontext.org\" rel=\"nofollow\">thinkContext</a> browser\nextension.</p>\n</div>\n<div id=\"using-the-data\">\n<h2>Using the data</h2>\n<p>If you\u2019re not there already, check out\n<a href=\"https://morph.io/spendright/msd\" rel=\"nofollow\">msd\u2019s morph.io page</a>, where you can\nview and download data merged from SpendRight\u2019s scrapers.</p>\n<p>Keep in mind that the original consumer campaigns are generally copyrighted by\nthe non-profits that created them, and they have all sorts of different\nterms/licensing agreements. It\u2019s up to you to decide whether to ask\nthem for permission now, or forgiveness later.</p>\n<p>(This mostly applies to the <tt>claim</tt> and <tt>rating</tt> tables; facts about\ncompanies and brands are almost certainly fair game.)</p>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p>It\u2019s on PyPI: <tt>pip install msd</tt></p>\n</div>\n<div id=\"usage\">\n<h2>Usage</h2>\n<p><tt>msd db1.sqlite [db2.sqlite <span class=\"pre\">...]</span></tt></p>\n<p>This produces a file named <tt>msd.sqlite</tt> (you can change this with the <tt><span class=\"pre\">-o</span></tt>\nswitch).</p>\n<p><tt>msd</tt> can also take YAML files as input. The YAML files should encode a\nmap from table name to list of rows (which are maps from column name to value).\nFor example:</p>\n<pre>campaign:\n- author: Greenpeace International\n  campaign_id: greenpeace_palm_oil\nrating:\n- campaign_id: greenpeace_palm_oil\n  company: Colgate-Palmolive\n  judgment: -1\n- campaign_id: greenpeace_palm_oil\n  company: Danone\n  judgment: 0\n</pre>\n<p>If you don\u2019t have the library installed (e.g. for development), you\ncan use <tt>python <span class=\"pre\">-m</span> msd.cmd</tt> in place of <tt>msd</tt>.</p>\n</div>\n<div id=\"data-format\">\n<h2>Data format</h2>\n<p><tt>msd</tt> uses a SQLite data format, both for input and output.</p>\n<p>The input and output format are almost identical; differences are noted\nin <em>italics</em>.</p>\n<div id=\"keys\">\n<h3>Keys</h3>\n<p>Every campaign in the input data should have a <tt>campaign_id</tt>\nthat would work as a Python identifier (for example <tt>wwf_palm_oil</tt>).</p>\n<p>There isn\u2019t a <tt>company_id</tt> field though; we just use the shortest name\nthat a company is commonly referred to by.``msd`` is smart\nenough to know that, for example, The Coca-Cola Company can be called\n<tt><span class=\"pre\">Coca-Cola</span></tt> but that we can\u2019t refer to The Learning Company as simply\n\u201cLearning\u201d.</p>\n<p>Similarly, there isn\u2019t a <tt>brand_id</tt> field, <tt>msd</tt> just figures out the\nproper name for the brand (minus the \u2122, etc.), and puts it into the <tt>brand</tt>\nfield; the \u201ckey\u201d for any given brand is <tt>company</tt> and <tt>brand</tt> together.</p>\n<p>There also aren\u2019t (product) category keys; we just put the name of the\ncategory (e.g. <tt>Chocolate</tt>) into the <tt>category</tt> field.</p>\n<p>Finally, the initial data sources each get a <tt>scraper_id</tt>, which is one\nor more identifiers, separated by dots (e.g. <tt>sr.campaign.wwf_palm_oil</tt>).\nThese serve only to help you track down problems in your input data.</p>\n<p><em>Every table in the input data may have a</em> <tt>scraper_id</tt> <em>field to help\nidentify which code gathered that data. The stem\nof whatever input file data came from will be prepended to form the</em>\n<tt>scraper_id</tt> <em>in the output.</em></p>\n<p><em>For example, a</em> <tt>scraper_id</tt> <em>of</em>\n<tt>wwf_palm_oil</tt> <em>from an input file named</em> <tt>sr.campaign.sqlite</tt>\n<em>would become</em> <tt>sr.campaign.wwf_palm_oil</tt> <em>in the output data.</em></p>\n</div>\n<div id=\"messy-input-data\">\n<h3>Messy input data</h3>\n<p><tt>msd</tt> <em>can accept very, very messy input data. The goal is for you to be\nable as little effort as possible into writing scrapers.</em></p>\n<div id=\"no-primary-keys\">\n<h4>no primary keys</h4>\n<p><em>For starters, the input data need not have primary keys, or any keys at\nall. The first thing we do is shovel all the input data into a single\n\u201cscratch\u201d table anyways.</em></p>\n<p><em>It\u2019s totally fine to have two rows that</em> would <em>have the same keys in the\noutput data;</em> <tt>msd</tt> <em>will merge them for you.</em></p>\n</div>\n<div id=\"missing-extra-fields\">\n<h4>missing/extra fields</h4>\n<p><em>It\u2019s totally fine for the input data to be missing fields, or have\nfields set to</em> <tt>NULL</tt> <em>that are supposed to have a value (in the worst case,\nif you omit a required value,</em> <tt>msd</tt> <em>will just ignore that row.</em></p>\n<p><em>It\u2019s fine to have extra fields;</em> <tt>msd</tt> <em>will just ignore them.</em></p>\n</div>\n<div id=\"different-names-for-companies-and-brands\">\n<h4>different names for companies and brands</h4>\n<p><em>It\u2019s fine to use different names for the same company\nor brand;</em> <tt>msd</tt> <em>will figure this out and merge them as appropriate.</em></p>\n</div>\n<div id=\"general-text-cleanliness\">\n<h4>general text cleanliness</h4>\n<p><em>For every text field,</em> <tt>msd</tt> <em>does the following things for you:</em></p>\n<ul>\n<li><em>converts all whitespace (tabs, double spaces, etc.) to a single space</em></li>\n<li><em>strips leading and trailing whitespace</em></li>\n<li><em>converts \u201csmart quotes\u201d, ligatures, and other silliness to the plain\nequivalent</em></li>\n<li><em>normalizes all unicode into NFKD form (this basically means there aren\u2019t\nmultiple ways to represent the same accented character).</em></li>\n</ul>\n</div>\n<div id=\"brand-name-cleaning\">\n<h4>brand name cleaning</h4>\n<p><em>In addition, you can be</em> even lazier <em>with the</em> <tt>brand</tt> <em>field.</em> <tt>msd</tt>\n<em>automatically finds \u2122, \u00ae, etc., puts it elsewhere for safekeeping (see\nthe</em> <tt>tm</tt> <em>field, below), and ignores anything after it.</em></p>\n<p><em>For example, if you throw something like</em>\n<tt>INVOKANA\u2122 (canagliflozin) USPI</tt> <em>into the</em> <tt>brand</tt> <em>field, it\u2019ll know\nthat the brand is named</em> <tt>INVOKANA</tt> <em>and is supposed to have a \u2122 after it.</em></p>\n</div>\n<div id=\"category-name-cleaning\">\n<h4>category name cleaning</h4>\n<p><tt>msd</tt> <em>formats category names in a consistent way. For example,</em>\n<tt>food &amp; beverages</tt> <em>in the input data would become</em> <tt>Food and Beverages</tt>\n<em>in the output data.</em></p>\n</div>\n<div id=\"rating-cleanup\">\n<h4>rating cleanup</h4>\n<p><tt>msd</tt> can do limited cleanup of ratings, including inferring <tt>judgment</tt>\nfrom <tt>grade</tt>. See <tt>rating</tt> table for details.</p>\n</div>\n<div id=\"inferred-rows\">\n<h4>inferred rows</h4>\n<p><tt>msd</tt> <em>will infer that companies and brands exist. For example, if you\ninclude a rating for a company in the</em> <tt>rating</tt> <em>table, a corresponding\nentry will be automatically created for you in the</em> <tt>company</tt> <em>table.</em></p>\n</div>\n<div id=\"and-that-s-not-all\">\n<h4>and that\u2019s not all\u2026</h4>\n<p>Nope, that\u2019s pretty much everything. Here are the table definitions:</p>\n</div>\n</div>\n<div id=\"table-definitions\">\n<h3>Table definitions</h3>\n<div id=\"brand-facts-about-brands\">\n<h4>brand: facts about brands</h4>\n<p><strong>Primary Key</strong>: <tt>company</tt>, <tt>brand</tt></p>\n<p><strong>brand</strong>: canonical name for the brand (e.g. <tt>Dove</tt>)</p>\n<p><strong>company</strong>: canonical name for the company (e.g. <tt>Unilever</tt>)</p>\n<p><strong>facebook_url</strong>: optional link to official Facebook page for the brand. (If\nthere\u2019s only a page for the company, put that in <tt>company.facebook_url</tt>).\nSo consumers can say nice/brutally honest things on their Facebook page.</p>\n<p><strong>is_former</strong>: 0 or 1. If 1, this brand no longer exists (e.g. Sanyo) or was\nsold to another company (e.g. LU is no longer owned by Groupe Danone). Set\nthis to 1 in your input data to knock out out-of-date brand information from\nout-of-date consumer campaigns.</p>\n<p><strong>is_licensed</strong>: 0 or 1. If 1, this brand actually belongs to another company\n(e.g. The Coca-Cola Company markets products under the Evian brand).\nGenerally a good idea to put the responsiblity for a brand on its actual\nowner.</p>\n<p><strong>is_prescription</strong>: 0 or 1. If 1, this brand is available by prescription\nonly (so you probably can\u2019t buy it on, like, Amazon.com).</p>\n<p><strong>logo_url</strong>: 0 or 1. Optional link to an image of this brand\u2019s logo (need not\nbe on the brand\u2019s website).</p>\n<p><strong>tm</strong>: empty string, <tt>\u2122</tt>, <tt>\u00ae</tt> or <tt>\u2120</tt>. The thing that companies like to\nappear directly after the brand name.</p>\n<p><strong>twitter_handle</strong>: optional handle for the brand\u2019s Twitter account, including\nthe <tt>@</tt> (e.g. <tt>@BrownCowYogurt</tt>). So consumers can congratulate them/call\nthem out on Twitter.</p>\n<p><strong>url</strong>: optional link to official web site/page for this brand. It\u2019s okay\nif this is just a sub-page of the company\u2019s official website.</p>\n</div>\n<div id=\"campaign-consumer-campaigns\">\n<h4>campaign: consumer campaigns</h4>\n<p>In practice, introducing consumer campaigns to users is one of the\nmost important parts of any tool you build; you\u2019ll probably want to just use\nthis table as a starting point, and include some content of your own.</p>\n<p><strong>Primary Key</strong>: <tt>campaign_id</tt></p>\n<p><strong>author</strong>: optional free-form name of the organization behind the campaign\n(e.g. <tt>Greenpeace International</tt>).</p>\n<p><strong>author_url</strong>: optional link to author\u2019s website</p>\n<p><strong>campaign</strong>: free-form name of the campaign (e.g.\n<tt>Guide to Greener Electronics</tt>)</p>\n<p><strong>campaign_id</strong>: unique identifier for this campaign (e.g.\n<tt>greenpeace_electronics</tt>.) Up to you to pick something that makes sense\nand doesn\u2019t collide with other campaign IDs.</p>\n<p><strong>contributors</strong>: optional free-form description of other contributors\nto the consumer campaign (e.g.\n<tt>International Labor Rights Forum, Baptist World Aid</tt>).</p>\n<p><strong>copyright</strong>: optional copyright notice. Usually starts with <tt>\u00a9</tt> (e.g.\n<tt>\u00a9 <span class=\"pre\">2006-2014</span> Climate Counts. All Rights Reserved.</tt>).</p>\n<p><strong>date</strong>: optional date this campaign was created, in <tt><span class=\"pre\">YYYY-MM-DD</span></tt>,\n<tt><span class=\"pre\">YYYY-MM</span></tt>, or <tt>YYYY</tt> format. A string, not a number. Sometimes the\nbest available data is a couple years old, and consumers deserve to know!</p>\n<p><strong>donate_url</strong>: optional link to a page where you can donate back to the\ncampaign/author. Try to include this somewhere in whatever you build; create a\nvirtuous cycle and help these consumer campaigns become financially\nself-sustaining!</p>\n<p><strong>email</strong>: optional contact email for the campaign (e.g.\n<tt>feedback@free2work.org</tt>)</p>\n<p><strong>facebook_url</strong>: optional link to official Facebook page for the campaign,\nso consumers can get involved in the movement!</p>\n<p><strong>goal</strong>: very brief (40 characters or less) description of what someone\nhelps accomplish by being involved in this campaign (e.g.\n<tt>stop forced labor in Uzbekistan</tt>). Best to start this with a lowercase\nletter unless the first word is a proper noun.</p>\n<p><strong>twitter_handle</strong>: optional handle for the campaign\u2019s Twitter account, so\nthat consumers can follow/reference them on Twitter. Including the <tt>@</tt>\n(e.g. <tt>@WWF</tt>).</p>\n<p><strong>url</strong>: optional link to campaign\u2019s web site, so consumers can learn more\nand get involved.</p>\n</div>\n<div id=\"category-product-categories-for-companies-and-brands\">\n<h4>category: product categories for companies and brands</h4>\n<p><tt>msd</tt> doesn\u2019t build an organized category tree like, say, online retailers\nhave; these are more like hints. See the <tt>subcategory</tt> table for details.</p>\n<p><strong>Primary Key</strong>: <tt>company</tt>, <tt>brand</tt>, <tt>category</tt></p>\n<p><strong>brand</strong>: canonical name for the brand. Empty string if we\u2019re categorizing\na company</p>\n<p><strong>category</strong>: free-form name for category (e.g. <tt>Food and Beverages</tt>).</p>\n<p><strong>company</strong>: canonical name for the company</p>\n<p><strong>is_implied</strong>: 0 or 1. If 1, this category was only implied by a subcategory\nrelationship (see <tt>subcategory</tt> table). <em>Ignored in the input data.</em></p>\n</div>\n<div id=\"claim-bullet-points-to-support-ratings\">\n<h4>claim: bullet points to support ratings</h4>\n<p><strong>Primary Key</strong>: <tt>campaign_id</tt>, <tt>company</tt>, <tt>brand</tt>, <tt>scope</tt>, <tt>claim</tt></p>\n<p>(<tt>claim</tt> is free-form, so this is more like a non-unique key)</p>\n<p><strong>brand</strong>: canonical name for the brand. Empty string if this is a claim\nabout a company.</p>\n<p><strong>campaign_id</strong>: unique identifier of campaign making this claim (see\n<tt>campaign.campaign_id</tt>)</p>\n<p><strong>claim</strong>: free-form claim. Should be small enough to fit in a bullet point,\nand be able to stand on its own (spell out obscure acronyms and other context).\nBest to start this with a lowercase letter unless the first word is a\nproper noun.</p>\n<p><strong>company</strong>: canonical name for the company</p>\n<p><strong>date</strong>: optional date this claim was made, in <tt><span class=\"pre\">YYYY-MM-DD</span></tt>,\n<tt><span class=\"pre\">YYYY-MM</span></tt>, or <tt>YYYY</tt> format. A string, not a number.</p>\n<p><strong>judgment</strong>: -1, 0, or 1. Does the claim say something good (<tt>1</tt>), mixed\n(<tt>0</tt>), or bad (<tt><span class=\"pre\">-1</span></tt>) about the company or brand? Need not match the\ncampaign\u2019s rating. If a claim is totally neutral (e.g.\n<tt>manufactures large appliances</tt>) it doesn\u2019t belong in this table at all!</p>\n<p><strong>scope</strong>: optional free-form limitation on which products this applies to\n(e.g. <tt>Fair Trade</tt>). Usually an empty string, to mean no limitation or that\nit\u2019s only <em>not</em> some scope elsewhere in the data (don\u2019t set this to\n<tt><span class=\"pre\">Non-Certified</span></tt>).</p>\n<p><strong>url</strong>: optional link to web page/PDF document etc. where this claim was made.\nSome people like to see the supporting data!</p>\n</div>\n<div id=\"company-facts-about-companies\">\n<h4>company: facts about companies</h4>\n<p><strong>Primary Key</strong>: <tt>company</tt></p>\n<p><strong>company</strong>: canonical name for the company (e.g. <tt>Disney</tt>)</p>\n<p><strong>company_full</strong>: full, official name of the company (e.g.\n<tt>The Walt Disney Company</tt>).</p>\n<p><strong>email</strong>: contact/feedback email for the company (e.g.\n<tt>consumer.relations@adidas.com</tt>).</p>\n<p><strong>facebook_url</strong>: optional link to official Facebook page for the company.</p>\n<p><strong>feedback_url</strong>: optional link to a page where consumers can submit\nfeedback to the company (some companies don\u2019t like to do this by email).</p>\n<p><strong>hq_company</strong>: optional name of the country where this company is\nheadquartered (e.g. <tt>USA</tt>).</p>\n<p><strong>logo_url</strong>: 0 or 1. Optional link to an image of this company\u2019s logo (need\nnot be on the company\u2019s website).</p>\n<p><strong>phone</strong>: optional phone number for customer feedback/complaints (a string,\nnot a number)</p>\n<p><strong>twitter_handle</strong>: optional handle for the company\u2019s Twitter account,\nincluding the <tt>@</tt> (e.g. <tt>@Stonyfield</tt>).</p>\n<p><strong>url</strong>: optional link to official web site/page for this company.</p>\n</div>\n<div id=\"company-name-canoncial-full-and-alternate-names-for-companies\">\n<h4>company_name: canoncial, full, and alternate names for companies</h4>\n<p><strong>Primary Key</strong>: <tt>company</tt>, <tt>company_name</tt></p>\n<p><strong>company</strong>: canonical name for the company (e.g. <tt>Disney</tt>)</p>\n<p><strong>company_name</strong>: a name for the company. can be the canonical\nname, the full name (see <tt>company.company_full</tt>) or something else\n(e.g. <tt>Walt Disney</tt>).</p>\n<p><strong>is_alias</strong>: 0 or 1. If 1, this is a name that somebody used somewhere\nbut isn\u2019t really a recognizable name for the company (e.g. \u201cAEO\u201d for\nAmerican Eagle Outfitters or \u201cLGE\u201d for \u201cLG Electronics\u201d). <em>Set this your\ninput data to knock out weird company aliases.</em></p>\n<p><strong>is_full</strong>: 0 or 1. If 1, this is the full name for the company,\nwhich also appears in <tt>company.company_full</tt>. (There isn\u2019t an\n<tt>is_canonical</tt> field; just check if <tt>company = company_name</tt>.)</p>\n</div>\n<div id=\"rating-campaigns-judgments-of-brands-and-companies\">\n<h4>rating: campaigns\u2019 judgments of brands and companies</h4>\n<p>This is where the magic happens.</p>\n<p><strong>brand</strong>: canonical name for the brand. Empty string if this is a rating of\na company.</p>\n<p><strong>campaign_id</strong>: unique identifier of campaign this rating comes from (see\n<tt>campaign.campaign_id</tt>)</p>\n<p><strong>company</strong>: canonical name for the company</p>\n<p><strong>date</strong>: optional date this rating was last updated, in <tt><span class=\"pre\">YYYY-MM-DD</span></tt>,\n<tt><span class=\"pre\">YYYY-MM</span></tt>, or <tt>YYYY</tt> format. A string, not a number.</p>\n<p><strong>description</strong>: free-form, brief description of the rating (e.g.\n<tt>Soaring</tt>, <tt>Cannot Recommend</tt>).</p>\n<p><strong>grade</strong>: optional letter grade (e.g. <tt>A+</tt>, <tt>C-</tt>, <tt>F</tt>). Some campaigns\nuse <tt>E</tt> instead of <tt>F</tt>.</p>\n<p><strong>judgment</strong>: -1, 0, or 1. Should consumers support (<tt>1</tt>), consider\n(<tt>0</tt>), or avoid (<tt><span class=\"pre\">-1</span></tt>) the company or brand? Some campaigns will give\neverything a <tt>1</tt> (e.g. certifiers) or everything a <tt><span class=\"pre\">-1</span></tt> (e.g. boycott\ncampaigns).</p>\n<p><tt>msd</tt> <em>can infer</em> <tt>judgment</tt> <em>from</em> <tt>grade</tt>, <em>but otherwise you need\nto set it yourself in the input data.</em></p>\n<p><em>Red for avoid, yellow for consider, and green for support is a de-facto\nstandard among consumer campaigns. If all else fails, contact the campaign\u2019s\nauthor and ask.</em></p>\n<p><strong>max_score</strong>: if <tt>score</tt> is set, the highest score possible on the rating\nscale (a number).</p>\n<p><strong>min_score</strong>: if <tt>score</tt> is set, the lowest score possible on the rating\nscale (a number). <em>If</em> <tt>score</tt> <em>is set but</em> <tt>min_score</tt> <em>is not,</em> <tt>msd</tt>\n<em>will assume</em> <tt>min_score</tt> <em>is zero.</em></p>\n<p><strong>num_ranked</strong>: if <tt>rank</tt> is set, the number of things ranked (an integer)</p>\n<p><strong>rank</strong>: if campaign ranks companies/brands, where this one ranks\n(this is an integer, and the best ranking is <cite>1</cite>, not <cite>0</cite>).</p>\n<p><strong>scope</strong>: optional free-form limitation on which products this applies to\n(e.g. <tt>Fair Trade</tt>). Usually an empty string, to mean no limitation or that\nit\u2019s only <em>not</em> some scope elsewhere in the data (don\u2019t set this to\n<tt><span class=\"pre\">Non-Certified</span></tt>).</p>\n<p><strong>score</strong>: optional numerical score (e.g. <tt>57.5</tt>).</p>\n<p><strong>url</strong>: optional link to web page/PDF document etc. where this rating was\nmade. Some people like to see the supporting data!</p>\n</div>\n<div id=\"scraper-when-data-was-last-gathered\">\n<h4>scraper: when data was last gathered</h4>\n<p><strong>Primary Key</strong>: <tt>scraper_id</tt></p>\n<p><strong>last_scraped</strong>: when this data was last gathered, as a UTC ISO timestamp\n(for example, <tt><span class=\"pre\">2015-08-03T20:55:36.795227Z</span></tt>).</p>\n<p><strong>scraper_id</strong>: unique identifier for the scraper that gathered this data</p>\n</div>\n<div id=\"scraper-brand-map-names-of-brands-in-the-input-data\">\n<h4>scraper_brand_map: names of brands in the input data</h4>\n<p>This is mostly useful for debugging your output data.</p>\n<p><tt>msd</tt> <em>ignores this table if it appears in the input data</em></p>\n<p><strong>Primary Key</strong>: <tt>scraper_id</tt>, <tt>scraper_company</tt>, <tt>scraper_brand</tt></p>\n<p><strong>Other Indexes</strong>: (<tt>company</tt>, <tt>brand</tt>)</p>\n<p><strong>brand</strong>: canonical name for the brand. (This should never be empty;\nthat\u2019s what <tt>scraper_company_map</tt> is for.)</p>\n<p><strong>company</strong>: canonical name for the company</p>\n<p><strong>scraper_brand</strong>: name used for the brand in the input data</p>\n<p><strong>scraper_company</strong>: name used for the company in the input data</p>\n<p><strong>scraper_id</strong>: unique identifier for the scraper that used this\nbrand and company name</p>\n</div>\n<div id=\"scraper-category-map-names-of-categories-in-the-intput-data\">\n<h4>scraper_category_map: names of categories in the intput data</h4>\n<p>This is mostly useful for debugging your output data.</p>\n<p><tt>msd</tt> <em>ignores this table if it appears in the input data</em></p>\n<p><strong>Primary Key</strong>: <tt>scraper_id</tt>, <tt>category</tt>, <tt>scraper_brand</tt></p>\n<p><strong>Other Indexes</strong>: (<tt>category</tt>)</p>\n<p><strong>category</strong>: canonical name for a category (e.g. <tt>Food and Beverages</tt>)</p>\n<p><strong>scraper_brand</strong>: name used for the brand in the input data (e.g.\n`` food &amp;  beverages``).</p>\n<p><strong>scraper_id</strong>: unique identifier for the scraper that used this\ncategory name</p>\n</div>\n<div id=\"scraper-company-map-names-of-companies-in-the-input-data\">\n<h4>scraper_company_map: names of companies in the input data</h4>\n<p>This is mostly useful for debugging your output data.</p>\n<p><tt>msd</tt> <em>ignores this table if it appears in the input data</em></p>\n<p><strong>Primary Key</strong>: <tt>scraper_id</tt>, <tt>scraper_company</tt></p>\n<p><strong>Other Indexes</strong>: (<tt>company</tt>)</p>\n<p><strong>company</strong>: canonical name for the company</p>\n<p><strong>scraper_brand</strong>: name used for the brand in the input data</p>\n<p><strong>scraper_id</strong>: unique identifier for the scraper that used this\ncompany name</p>\n</div>\n<div id=\"subcategory-product-category-relationships\">\n<h4>subcategory: product category relationships</h4>\n<p><tt>msd</tt> doesn\u2019t attempt to build a proper category tree; it\u2019s really just\na directed graph of category relationships: if something is in category\nA (<tt>subcategory</tt>) it must also be in category B (<tt>category</tt>).</p>\n<p><tt>msd</tt> <em>automatically infers implied relationships: if A is a subcategory\nof B and B is a subcategory of C, A is a subcategory of C.</em></p>\n<p><strong>category</strong>: canonical name for a category</p>\n<p><strong>is_implied</strong>: 0 or 1. If 1, this relationship was inferred by <tt>msd</tt>.\n<em>Ignored in the input data.</em></p>\n<p><strong>subcategory</strong>: canonical name for a subcategory of <tt>category</tt></p>\n</div>\n<div id=\"url-hook-for-scraping-urls-in-the-scraper-data\">\n<h4>url: hook for scraping URLs in the scraper data</h4>\n<p><em>This table only exists in the input data, and is only used to fill fields\nin the output data that would otherwise be empty.</em></p>\n<p>This allows us to build generic scrapers that can grab Twitter handles,\nFacebook URLs, etc. directly from a company or brand\u2019s official page. See\nSpendRight\u2019s <a href=\"https://github.com/spendright/scrape-urls\" rel=\"nofollow\">scrape-urls</a>\nfor an example.</p>\n<p><strong>facebook_url</strong>: optional facebook page for a company/brand</p>\n<p><strong>last_scraped</strong>: when the company/brand\u2019s page was scraped, as a UTC\niso timestamp (e.g. <tt><span class=\"pre\">2015-08-03T20:55:36.795227Z</span></tt>). <em>Not currently used.</em></p>\n<p><strong>twitter_handle</strong>: optional twitter handle for a company/brand, including\nthe leading <tt>@</tt>.</p>\n<p><strong>url</strong>: url this data was scraped from</p>\n</div>\n</div>\n</div>\n<div id=\"writing-your-own-scrapers\">\n<h2>Writing your own scrapers</h2>\n<p>If you want to write something in Python, check out SpendRight\u2019s\n<a href=\"https://github.com/spendright/scrape-campaigns\" rel=\"nofollow\">scrape-campaigns</a>\nproject, and submit a pull request (look in <tt>scrapers/</tt>) for examples.</p>\n<p>If you\u2019d rather write in another language, consider setting up your own\nscraper on <a href=\"https://morph.io/\" rel=\"nofollow\">morph.io</a>, which can also handle scrapers\nin Ruby, PHP, Perl, and Node.js. See the\n<a href=\"https://morph.io/documentation\" rel=\"nofollow\">morph.io Documentation</a> for details.\nAnd let us know, so we can point\n<a href=\"https://morph.io/spendright/msd\" rel=\"nofollow\">msd\u2019s morph.io page</a> at it.</p>\n</div>\n<div id=\"working-on-msd\">\n<h2>Working on msd</h2>\n<p><tt>msd</tt> is pretty straightforward. Here\u2019s a brief overview of how it works:</p>\n<ol>\n<li><tt>msd</tt> starts in <tt>msd/cmd.py</tt> (look for <tt>msd.cmd.run()</tt>).</li>\n<li>It first dumps all the input data into a temporary \u201cscratch\u201d DB\n(<tt><span class=\"pre\">msd-scratch.sqlite</span></tt>) with the correct columns and useful indexes (look\nfor <tt>msd.scratch.build_scratch_db()</tt>).</li>\n<li>Then it creates the output database (<tt>msd.sqlite</tt>) and fills it table by\ntable (look for <tt>msd.fill_output_db()</tt>).</li>\n</ol>\n<p>Also, table definitions live in <tt>msd/table.py</tt>.</p>\n</div>\n<div id=\"using-msd-as-a-library\">\n<h2>Using msd as a library</h2>\n<p><tt>msd</tt> isn\u2019t really a library, but there\u2019s some useful stuff in <tt>msd</tt>\n(for example, <tt>msd/company.py</tt> knows how to strip all the various versions\nof \u201cInc.\u201d off company names).</p>\n<p>If you want to call some of this stuff from another project, please let us\nknow so that we can work out a sane, stable interface for you!</p>\n</div>\n\n          </div>"}, "last_serial": 2122729, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "bc9d24c10c56d2f10b185da117c4e062", "sha256": "a8e4d929481e3b928747c655f5b97313847372074fe87ea1bb7fe2dc261ef78d"}, "downloads": -1, "filename": "msd-0.1.0.tar.gz", "has_sig": false, "md5_digest": "bc9d24c10c56d2f10b185da117c4e062", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 26976, "upload_time": "2015-09-14T18:59:20", "upload_time_iso_8601": "2015-09-14T18:59:20.866998Z", "url": "https://files.pythonhosted.org/packages/db/40/995e3b9eea4455a76ae1d3ada765d9a3d3c4d910646efb96f5077ca893b8/msd-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "52ff0a037936ba20b7d53143556f372b", "sha256": "293a2909a0dfe98d7c009970b9fb2a16cc53022a0eb11c1e2474607f1e71e3c8"}, "downloads": -1, "filename": "msd-0.1.1.tar.gz", "has_sig": false, "md5_digest": "52ff0a037936ba20b7d53143556f372b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27059, "upload_time": "2015-09-14T19:43:06", "upload_time_iso_8601": "2015-09-14T19:43:06.565085Z", "url": "https://files.pythonhosted.org/packages/50/9a/26f78b715e955b19fe9ec1741a3ec66467f3530cd0b50262fb3446b4d272/msd-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "9ae385f1d0a88e3c6e9a4e2c5fb4ae7a", "sha256": "a475ee7bc7e6411bb79533352b5f07f1179768b211ba8cf840a15638fb352fee"}, "downloads": -1, "filename": "msd-0.1.2.tar.gz", "has_sig": false, "md5_digest": "9ae385f1d0a88e3c6e9a4e2c5fb4ae7a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27056, "upload_time": "2015-09-19T05:20:54", "upload_time_iso_8601": "2015-09-19T05:20:54.353692Z", "url": "https://files.pythonhosted.org/packages/6d/7d/a1a80179815d6f2fa3c0d2c8c5136fda273842f30f9859b1ecae8b560b1d/msd-0.1.2.tar.gz", "yanked": false}], "0.1.3": [{"comment_text": "", "digests": {"md5": "c440b3b1e8c089e9ac2d4fff6bd854b7", "sha256": "78ba0efbaa9d496501696ea523c846648a710b7b2cad7fefcbd37e2869375044"}, "downloads": -1, "filename": "msd-0.1.3.tar.gz", "has_sig": false, "md5_digest": "c440b3b1e8c089e9ac2d4fff6bd854b7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27210, "upload_time": "2016-02-09T00:32:17", "upload_time_iso_8601": "2016-02-09T00:32:17.520737Z", "url": "https://files.pythonhosted.org/packages/0f/c3/784c2511bbc1394ea7d7a70249026944d4553d057dc940d446abe151714a/msd-0.1.3.tar.gz", "yanked": false}], "0.1.4": [{"comment_text": "", "digests": {"md5": "c30611a3c3a808e13d95d59b88978a8a", "sha256": "1880717d0e70f4503dfd4e47ffa2d32575db12d32adaabd5c5fc5bcfece3ad56"}, "downloads": -1, "filename": "msd-0.1.4.tar.gz", "has_sig": false, "md5_digest": "c30611a3c3a808e13d95d59b88978a8a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27753, "upload_time": "2016-05-11T23:06:46", "upload_time_iso_8601": "2016-05-11T23:06:46.156564Z", "url": "https://files.pythonhosted.org/packages/9a/89/86acfd3605bc7c31f44910904c8afa33c5d72642bd6b14c589ae437a698b/msd-0.1.4.tar.gz", "yanked": false}], "0.1.5": [{"comment_text": "", "digests": {"md5": "eb2d8de8e3512c2017c0ab90f1bc7b2a", "sha256": "2d6690048c4dc770cfdec20a729207e647dfced77953cde2a67215f6b8ccf12b"}, "downloads": -1, "filename": "msd-0.1.5.tar.gz", "has_sig": false, "md5_digest": "eb2d8de8e3512c2017c0ab90f1bc7b2a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27780, "upload_time": "2016-05-19T00:07:09", "upload_time_iso_8601": "2016-05-19T00:07:09.110222Z", "url": "https://files.pythonhosted.org/packages/5c/65/aea162d245319793f7bebdbbbb42fb9559e1bba1dc593d7fc0dfadd54162/msd-0.1.5.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "eb2d8de8e3512c2017c0ab90f1bc7b2a", "sha256": "2d6690048c4dc770cfdec20a729207e647dfced77953cde2a67215f6b8ccf12b"}, "downloads": -1, "filename": "msd-0.1.5.tar.gz", "has_sig": false, "md5_digest": "eb2d8de8e3512c2017c0ab90f1bc7b2a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 27780, "upload_time": "2016-05-19T00:07:09", "upload_time_iso_8601": "2016-05-19T00:07:09.110222Z", "url": "https://files.pythonhosted.org/packages/5c/65/aea162d245319793f7bebdbbbb42fb9559e1bba1dc593d7fc0dfadd54162/msd-0.1.5.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:50:55 2020"}