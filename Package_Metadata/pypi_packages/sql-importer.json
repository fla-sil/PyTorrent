{"info": {"author": "Beproud", "author_email": "righ.m9@gmail.com,crohaco@beproud.jp", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python", "Programming Language :: SQL", "Topic :: Software Development"], "description": "It enables SQL files to be imported as python modules.\n\n.. image:: https://circleci.com/gh/beproud/sql-importer.svg?style=svg\n    :target: https://circleci.com/gh/beproud/sql-importer\n\nRequirements\n============\n- Python 2.7\n- Python 3.6\n\nInstall\n=======\n\n.. code:: bash\n\n  $ pip install sql-importer\n\nUsage\n=====\n- You have to make `__init__.py` at the same directory which sql files have been placed on.\n- And write like the following to the `__init__.py`:\n\n  .. code:: python\n\n     ## if using django:\n     # from django.db import connection\n\n     import os\n     from sql_importer import init\n     init(os.path.dirname(__file__), globals(), connection, sql_type='postgresql')\n\n- That's all, you can import sql files (removed `.sql` suffix) as python modules.\n\n  - Example: `testing/sql/sum_sales.sql` exists.\n\n  .. code:: SQL\n\n    SELECT SUM(price) AS sum_sales FROM sales\n    WHERE\n      sales_from >= :'sales_from'\n      AND sales_to < :'sales_to'\n    ;\n\n  .. code:: python\n\n    from datetime import date\n    from testing import sql\n    sql.sum_sales.query(sales_from=date(2017, 5, 22), sales_to=date(2017, 12, 26))\n\n  - `sql` object has 2 methods, both method execute the sql and receive variables as keyword arguments.\n\n    :query: It returns records. it expects only what has one or more results like `select` query.\n    :execute: It returns number of records affected by the SQL.\n\n- Now `sql_type` argument allows `postgresql`.\n\n  - If you want to use the other sql_type, please make the issue on https://github.com/beproud/sql-importer .\n\nDemo\n====\n\nstart up\n--------\n\n.. code:: bash\n\n  $ git clone git@github.com:beproud/sql-importer.git\n  $ cd sql-importer\n  $ docker-compose up\n\n\npreparation\n-----------\n\n.. code:: bash\n\n  $ docker exec -it sqlimporter_app_1 /bin/bash\n  # python -m venv venv # only first time\n  # source venv/bin/activate\n\nTry\n---\n\n.. code:: bash\n\n  (venv) # ls tests/postgresql/sql\n  __init__.py  __init__.pyc  __pycache__\tclear.sql  create_table.sql  delete.sql  drop_table.sql  insert.sql  select.sql  update.sql\n\n   (venv) # python\n\n.. code:: python\n\n  >>> from tests.postgresql import sql\n  >>> sql.\n  sql.clear         sql.create_table  sql.drop_table    sql.init(         sql.os            sql.select\n  sql.connection    sql.delete        sql.host          sql.insert        sql.psycopg2      sql.update\n\n  >>> sql.create_table.execute()\n  -1\n  >>> sql.insert.execute(name='apple', price=100)\n  1\n  >>> list(sql.select.query())\n  [{'name': 'apple', 'price': 100}]\n  >>> sql.delete.execute(name='orange')\n  0\n  >>> sql.delete.execute(name='apple')\n  1\n  >>> list(sql.select.query())\n  []\n\nUnittest\n--------\n\n.. code:: bash\n\n  (venv) # tox\n\n\n- This library is tested by only latest `postgresql`.\n\nContributors\n============\n- aodag ( https://github.com/aodag )\n- crohaco ( https://github.com/righ )\n\nLinks\n=====\n- https://github.com/beproud/sql-importer\n- https://pypi.python.org/pypi/sql-importer\n", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "sql", "license": "", "maintainer": "", "maintainer_email": "", "name": "sql-importer", "package_url": "https://pypi.org/project/sql-importer/", "platform": "", "project_url": "https://pypi.org/project/sql-importer/", "project_urls": null, "release_url": "https://pypi.org/project/sql-importer/1.0.0/", "requires_dist": null, "requires_python": "", "summary": "it enables sql files to be imported as a python module.", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>It enables SQL files to be imported as python modules.</p>\n<a href=\"https://circleci.com/gh/beproud/sql-importer\" rel=\"nofollow\"><img alt=\"https://circleci.com/gh/beproud/sql-importer.svg?style=svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0c56f9e45b950c222738899e7af86ff28f23ecce/68747470733a2f2f636972636c6563692e636f6d2f67682f626570726f75642f73716c2d696d706f727465722e7376673f7374796c653d737667\"></a>\n<div id=\"requirements\">\n<h2>Requirements</h2>\n<ul>\n<li>Python 2.7</li>\n<li>Python 3.6</li>\n</ul>\n</div>\n<div id=\"install\">\n<h2>Install</h2>\n<pre>$ pip install sql-importer\n</pre>\n</div>\n<div id=\"usage\">\n<h2>Usage</h2>\n<ul>\n<li><p>You have to make <cite>__init__.py</cite> at the same directory which sql files have been placed on.</p>\n</li>\n<li><p>And write like the following to the <cite>__init__.py</cite>:</p>\n<pre><span class=\"c1\">## if using django:</span>\n<span class=\"c1\"># from django.db import connection</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">from</span> <span class=\"nn\">sql_importer</span> <span class=\"kn\">import</span> <span class=\"n\">init</span>\n<span class=\"n\">init</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">dirname</span><span class=\"p\">(</span><span class=\"vm\">__file__</span><span class=\"p\">),</span> <span class=\"nb\">globals</span><span class=\"p\">(),</span> <span class=\"n\">connection</span><span class=\"p\">,</span> <span class=\"n\">sql_type</span><span class=\"o\">=</span><span class=\"s1\">'postgresql'</span><span class=\"p\">)</span>\n</pre>\n</li>\n<li><p>That\u2019s all, you can import sql files (removed <cite>.sql</cite> suffix) as python modules.</p>\n<ul>\n<li>Example: <cite>testing/sql/sum_sales.sql</cite> exists.</li>\n</ul>\n<pre><span class=\"k\">SELECT</span> <span class=\"k\">SUM</span><span class=\"p\">(</span><span class=\"n\">price</span><span class=\"p\">)</span> <span class=\"k\">AS</span> <span class=\"n\">sum_sales</span> <span class=\"k\">FROM</span> <span class=\"n\">sales</span>\n<span class=\"k\">WHERE</span>\n  <span class=\"n\">sales_from</span> <span class=\"o\">&gt;=</span> <span class=\"p\">:</span><span class=\"s1\">'sales_from'</span>\n  <span class=\"k\">AND</span> <span class=\"n\">sales_to</span> <span class=\"o\">&lt;</span> <span class=\"p\">:</span><span class=\"s1\">'sales_to'</span>\n<span class=\"p\">;</span>\n</pre>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">date</span>\n<span class=\"kn\">from</span> <span class=\"nn\">testing</span> <span class=\"kn\">import</span> <span class=\"n\">sql</span>\n<span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">sum_sales</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"n\">sales_from</span><span class=\"o\">=</span><span class=\"n\">date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">22</span><span class=\"p\">),</span> <span class=\"n\">sales_to</span><span class=\"o\">=</span><span class=\"n\">date</span><span class=\"p\">(</span><span class=\"mi\">2017</span><span class=\"p\">,</span> <span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"mi\">26</span><span class=\"p\">))</span>\n</pre>\n<ul>\n<li><cite>sql</cite> object has 2 methods, both method execute the sql and receive variables as keyword arguments.<table>\n<col>\n<col>\n<tbody>\n<tr><th>query:</th><td>It returns records. it expects only what has one or more results like <cite>select</cite> query.</td>\n</tr>\n<tr><th>execute:</th><td>It returns number of records affected by the SQL.</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n</li>\n<li><p>Now <cite>sql_type</cite> argument allows <cite>postgresql</cite>.</p>\n<ul>\n<li>If you want to use the other sql_type, please make the issue on <a href=\"https://github.com/beproud/sql-importer\" rel=\"nofollow\">https://github.com/beproud/sql-importer</a> .</li>\n</ul>\n</li>\n</ul>\n</div>\n<div id=\"demo\">\n<h2>Demo</h2>\n<div id=\"start-up\">\n<h3>start up</h3>\n<pre>$ git clone git@github.com:beproud/sql-importer.git\n$ <span class=\"nb\">cd</span> sql-importer\n$ docker-compose up\n</pre>\n</div>\n<div id=\"preparation\">\n<h3>preparation</h3>\n<pre>$ docker <span class=\"nb\">exec</span> -it sqlimporter_app_1 /bin/bash\n<span class=\"c1\"># python -m venv venv # only first time\n# source venv/bin/activate</span>\n</pre>\n</div>\n<div id=\"try\">\n<h3>Try</h3>\n<pre><span class=\"o\">(</span>venv<span class=\"o\">)</span> <span class=\"c1\"># ls tests/postgresql/sql\n</span>__init__.py  __init__.pyc  __pycache__        clear.sql  create_table.sql  delete.sql  drop_table.sql  insert.sql  <span class=\"k\">select</span>.sql  update.sql\n\n <span class=\"o\">(</span>venv<span class=\"o\">)</span> <span class=\"c1\"># python</span>\n</pre>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">tests.postgresql</span> <span class=\"kn\">import</span> <span class=\"n\">sql</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">sql</span><span class=\"o\">.</span>\n<span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">clear</span>         <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">create_table</span>  <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">drop_table</span>    <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">init</span><span class=\"p\">(</span>         <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">os</span>            <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">select</span>\n<span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">connection</span>    <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">delete</span>        <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">host</span>          <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">insert</span>        <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">psycopg2</span>      <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">update</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">create_table</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">()</span>\n<span class=\"o\">-</span><span class=\"mi\">1</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">insert</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'apple'</span><span class=\"p\">,</span> <span class=\"n\">price</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n<span class=\"mi\">1</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">select</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">())</span>\n<span class=\"p\">[{</span><span class=\"s1\">'name'</span><span class=\"p\">:</span> <span class=\"s1\">'apple'</span><span class=\"p\">,</span> <span class=\"s1\">'price'</span><span class=\"p\">:</span> <span class=\"mi\">100</span><span class=\"p\">}]</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'orange'</span><span class=\"p\">)</span>\n<span class=\"mi\">0</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'apple'</span><span class=\"p\">)</span>\n<span class=\"mi\">1</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">sql</span><span class=\"o\">.</span><span class=\"n\">select</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">())</span>\n<span class=\"p\">[]</span>\n</pre>\n</div>\n<div id=\"unittest\">\n<h3>Unittest</h3>\n<pre><span class=\"o\">(</span>venv<span class=\"o\">)</span> <span class=\"c1\"># tox</span>\n</pre>\n<ul>\n<li>This library is tested by only latest <cite>postgresql</cite>.</li>\n</ul>\n</div>\n</div>\n<div id=\"contributors\">\n<h2>Contributors</h2>\n<ul>\n<li>aodag ( <a href=\"https://github.com/aodag\" rel=\"nofollow\">https://github.com/aodag</a> )</li>\n<li>crohaco ( <a href=\"https://github.com/righ\" rel=\"nofollow\">https://github.com/righ</a> )</li>\n</ul>\n</div>\n<div id=\"links\">\n<h2>Links</h2>\n<ul>\n<li><a href=\"https://github.com/beproud/sql-importer\" rel=\"nofollow\">https://github.com/beproud/sql-importer</a></li>\n<li><a href=\"https://pypi.python.org/pypi/sql-importer\" rel=\"nofollow\">https://pypi.python.org/pypi/sql-importer</a></li>\n</ul>\n</div>\n\n          </div>"}, "last_serial": 3559448, "releases": {"0.0.0": [{"comment_text": "", "digests": {"md5": "a20b9fbebabd550ea538cb89ef612e60", "sha256": "3262a261a13a4a9a02b879d7761069bb08c3eb29ac2a309aa1b5211fac20f587"}, "downloads": -1, "filename": "sql-importer-0.0.0.tar.gz", "has_sig": false, "md5_digest": "a20b9fbebabd550ea538cb89ef612e60", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 1006, "upload_time": "2017-12-26T03:59:07", "upload_time_iso_8601": "2017-12-26T03:59:07.142957Z", "url": "https://files.pythonhosted.org/packages/d3/d0/42dc411d49bbf5d47bfe80681a01f3d38a84078e4782bbca0a51cb46df6c/sql-importer-0.0.0.tar.gz", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "4462f71ed0326eed304fdc24b3c4e232", "sha256": "7aa705f5745d37fc39d14716c6e4600aa506a316604e5f5bed7fe92798bd5cbd"}, "downloads": -1, "filename": "sql-importer-1.0.0.tar.gz", "has_sig": false, "md5_digest": "4462f71ed0326eed304fdc24b3c4e232", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4759, "upload_time": "2018-02-07T06:45:16", "upload_time_iso_8601": "2018-02-07T06:45:16.174536Z", "url": "https://files.pythonhosted.org/packages/06/d7/5398d35a2c0db61932933a849bd86354b274b6f3f2b9c2e95ef001e79f17/sql-importer-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4462f71ed0326eed304fdc24b3c4e232", "sha256": "7aa705f5745d37fc39d14716c6e4600aa506a316604e5f5bed7fe92798bd5cbd"}, "downloads": -1, "filename": "sql-importer-1.0.0.tar.gz", "has_sig": false, "md5_digest": "4462f71ed0326eed304fdc24b3c4e232", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4759, "upload_time": "2018-02-07T06:45:16", "upload_time_iso_8601": "2018-02-07T06:45:16.174536Z", "url": "https://files.pythonhosted.org/packages/06/d7/5398d35a2c0db61932933a849bd86354b274b6f3f2b9c2e95ef001e79f17/sql-importer-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:03:44 2020"}