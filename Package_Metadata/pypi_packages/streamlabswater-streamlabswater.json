{"info": {"author": "StreamLabs", "author_email": "support@streamlabswater.com", "bugtrack_url": null, "classifiers": [], "description": "# StreamLabs Python Library\n\nThis is the official python client for the StreamLabs Developer API.\n\n## Documentation\n\nSee the [StreamLabs Developer API docs](https://developer.streamlabswater.com/docs/index.html)\n\n\nUse the package manager [pip](https://pip.pypa.io/en/stable/) to install the package\n\n```shell\n\npip3 install streamlabswater-streamlabswater\n\n```\n\n## Usage\n\nThe package needs to configured with your accounts API Key available when you  login into your [http://my.streamlabswater.com](http://my.streamlabswater.com) account.\n\n```python\n\nfrom streamlabswater import Stream\n\nstream = Stream('YOUR_STREAMLABSWATER_API_KEY')\n\n```\n\n### Get all Locations\nStart by fetching all your [locations](https://developer.streamlabswater.com/docs/get-all-locations.html)\n\n```python\n\nlocations = stream.get_locations()\n\n```\n\n### Get a Location\nA `location_id` is required to fetch details of a [location](https://developer.streamlabswater.com/docs/get-a-location.html), water usage and for updating *homeAway*.\n\n```python\n\nlocation_id = locations[0]['location_id']\n\nmy_home = stream.get_location(location_id)\n\n```\n\n### Update a Location\nCurrently you can only update the *homeAway* mode of the location\nWhen updating a location the response is always the [updated location](https://developer.streamlabswater.com/docs/update-a-location.html) details\n\n```python\n\n# Set to home\nmy_home = stream.update_location(location_id, 'home')\n\n# Set to away\nmy_home = stream.update_location(location_id, 'away')\n\n```\n\n### Subscribe to Location Alerts\nIf you choose to recieve notifications when alerts become active or end for a location, you need to provide a valid url endpoint where the StreamLabs service will send the notifications. The following methods wrap the corresponding StreamLabs api endpoints as descriped in the [Subscribe to Location Alerts section in the docs](https://developer.streamlabswater.com/docs/subscribe-to-location-alerts.html)\n\n#### Create Subscription\n```python\n\nsubscription_id = stream.subscribe_to_location_alerts(location_id, 'https://your-endpoint')['subscription_id']\n\n```\n#### Confirm subscription\nOnce you recieve the `confirmationToken` via your endpoint, update the subscription to start recieving alerts.\n\n```python\nconfirmation_token = 'CONFIRMATION_TOKEN'\n\nsubscription = stream.confirm_subscription(subscription_id, confirmation_token)\n\n# subscription['status'] should be 'confirmed'\n\n```\n\n### Get all Location Subscriptions\n\n```python\n\nsubscriptions = stream.get_location_subscriptions(location_id)\n\n```\n\n### Get a Subscription\n\n```python\n\nsubscription = stream.get_subscription(subscription_id)\n\n```\n\n### Get all Subscriptions\n\n```python\n\nall_subscriptions = stream.get_subscriptions()\n\n```\n\n### Delete a Subscription\n\n```python\n\nstream.delete_subscription(subscription_id)\n\n```\nThis method will throw an Exception if the delete fails else returns a `None`\n\n### Get a Location\u2019s Water Usage Summary\n\n\n```python\n\nwater_usage_summary = stream.get_location_water_usage_summary(location_id)\n\ntoday = water_usage_summary['today']\nthis_month = water_usage_summary['thisMonth']\nthis_year = water_usage_summary['thisYear']\nunits = water_usage_summary['units']\n\n```\n\n### Get a Location\u2019s Water Usage\n\nAt the very minimum you need to provide a `startTime` for the reading you want to retrive.\n\n```python\nfrom datetime import datetime, timezone, timedelta\n\nyesterday = datetime.now(timezone.utc) - timedelta(days=1)\nstart_time = yesterday.isoformat(timespec='seconds')\n\nusage = stream.get_location_water_usage(location_id, {'startTime': start_time})\n```\n\n## Credits\n\nThis project was heavily inspired by [streamlabswater-python](https://github.com/cpopp/streamlabswater-python)\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/streamlabswater/stream-python", "keywords": "streamlabs,streamlabswater,iot,water,sensor,smarthome,automation", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "streamlabswater-streamlabswater", "package_url": "https://pypi.org/project/streamlabswater-streamlabswater/", "platform": "", "project_url": "https://pypi.org/project/streamlabswater-streamlabswater/", "project_urls": {"Homepage": "https://github.com/streamlabswater/stream-python"}, "release_url": "https://pypi.org/project/streamlabswater-streamlabswater/0.3.2/", "requires_dist": ["requests"], "requires_python": ">=3.6", "summary": "Python library for the StreamLabs Developer API", "version": "0.3.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>StreamLabs Python Library</h1>\n<p>This is the official python client for the StreamLabs Developer API.</p>\n<h2>Documentation</h2>\n<p>See the <a href=\"https://developer.streamlabswater.com/docs/index.html\" rel=\"nofollow\">StreamLabs Developer API docs</a></p>\n<p>Use the package manager <a href=\"https://pip.pypa.io/en/stable/\" rel=\"nofollow\">pip</a> to install the package</p>\n<pre>pip3 install streamlabswater-streamlabswater\n</pre>\n<h2>Usage</h2>\n<p>The package needs to configured with your accounts API Key available when you  login into your <a href=\"http://my.streamlabswater.com\" rel=\"nofollow\">http://my.streamlabswater.com</a> account.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">streamlabswater</span> <span class=\"kn\">import</span> <span class=\"n\">Stream</span>\n\n<span class=\"n\">stream</span> <span class=\"o\">=</span> <span class=\"n\">Stream</span><span class=\"p\">(</span><span class=\"s1\">'YOUR_STREAMLABSWATER_API_KEY'</span><span class=\"p\">)</span>\n</pre>\n<h3>Get all Locations</h3>\n<p>Start by fetching all your <a href=\"https://developer.streamlabswater.com/docs/get-all-locations.html\" rel=\"nofollow\">locations</a></p>\n<pre><span class=\"n\">locations</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">get_locations</span><span class=\"p\">()</span>\n</pre>\n<h3>Get a Location</h3>\n<p>A <code>location_id</code> is required to fetch details of a <a href=\"https://developer.streamlabswater.com/docs/get-a-location.html\" rel=\"nofollow\">location</a>, water usage and for updating <em>homeAway</em>.</p>\n<pre><span class=\"n\">location_id</span> <span class=\"o\">=</span> <span class=\"n\">locations</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'location_id'</span><span class=\"p\">]</span>\n\n<span class=\"n\">my_home</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">get_location</span><span class=\"p\">(</span><span class=\"n\">location_id</span><span class=\"p\">)</span>\n</pre>\n<h3>Update a Location</h3>\n<p>Currently you can only update the <em>homeAway</em> mode of the location\nWhen updating a location the response is always the <a href=\"https://developer.streamlabswater.com/docs/update-a-location.html\" rel=\"nofollow\">updated location</a> details</p>\n<pre><span class=\"c1\"># Set to home</span>\n<span class=\"n\">my_home</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">update_location</span><span class=\"p\">(</span><span class=\"n\">location_id</span><span class=\"p\">,</span> <span class=\"s1\">'home'</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Set to away</span>\n<span class=\"n\">my_home</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">update_location</span><span class=\"p\">(</span><span class=\"n\">location_id</span><span class=\"p\">,</span> <span class=\"s1\">'away'</span><span class=\"p\">)</span>\n</pre>\n<h3>Subscribe to Location Alerts</h3>\n<p>If you choose to recieve notifications when alerts become active or end for a location, you need to provide a valid url endpoint where the StreamLabs service will send the notifications. The following methods wrap the corresponding StreamLabs api endpoints as descriped in the <a href=\"https://developer.streamlabswater.com/docs/subscribe-to-location-alerts.html\" rel=\"nofollow\">Subscribe to Location Alerts section in the docs</a></p>\n<h4>Create Subscription</h4>\n<pre><span class=\"n\">subscription_id</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">subscribe_to_location_alerts</span><span class=\"p\">(</span><span class=\"n\">location_id</span><span class=\"p\">,</span> <span class=\"s1\">'https://your-endpoint'</span><span class=\"p\">)[</span><span class=\"s1\">'subscription_id'</span><span class=\"p\">]</span>\n</pre>\n<h4>Confirm subscription</h4>\n<p>Once you recieve the <code>confirmationToken</code> via your endpoint, update the subscription to start recieving alerts.</p>\n<pre><span class=\"n\">confirmation_token</span> <span class=\"o\">=</span> <span class=\"s1\">'CONFIRMATION_TOKEN'</span>\n\n<span class=\"n\">subscription</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">confirm_subscription</span><span class=\"p\">(</span><span class=\"n\">subscription_id</span><span class=\"p\">,</span> <span class=\"n\">confirmation_token</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># subscription['status'] should be 'confirmed'</span>\n</pre>\n<h3>Get all Location Subscriptions</h3>\n<pre><span class=\"n\">subscriptions</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">get_location_subscriptions</span><span class=\"p\">(</span><span class=\"n\">location_id</span><span class=\"p\">)</span>\n</pre>\n<h3>Get a Subscription</h3>\n<pre><span class=\"n\">subscription</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">get_subscription</span><span class=\"p\">(</span><span class=\"n\">subscription_id</span><span class=\"p\">)</span>\n</pre>\n<h3>Get all Subscriptions</h3>\n<pre><span class=\"n\">all_subscriptions</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">get_subscriptions</span><span class=\"p\">()</span>\n</pre>\n<h3>Delete a Subscription</h3>\n<pre><span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">delete_subscription</span><span class=\"p\">(</span><span class=\"n\">subscription_id</span><span class=\"p\">)</span>\n</pre>\n<p>This method will throw an Exception if the delete fails else returns a <code>None</code></p>\n<h3>Get a Location\u2019s Water Usage Summary</h3>\n<pre><span class=\"n\">water_usage_summary</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">get_location_water_usage_summary</span><span class=\"p\">(</span><span class=\"n\">location_id</span><span class=\"p\">)</span>\n\n<span class=\"n\">today</span> <span class=\"o\">=</span> <span class=\"n\">water_usage_summary</span><span class=\"p\">[</span><span class=\"s1\">'today'</span><span class=\"p\">]</span>\n<span class=\"n\">this_month</span> <span class=\"o\">=</span> <span class=\"n\">water_usage_summary</span><span class=\"p\">[</span><span class=\"s1\">'thisMonth'</span><span class=\"p\">]</span>\n<span class=\"n\">this_year</span> <span class=\"o\">=</span> <span class=\"n\">water_usage_summary</span><span class=\"p\">[</span><span class=\"s1\">'thisYear'</span><span class=\"p\">]</span>\n<span class=\"n\">units</span> <span class=\"o\">=</span> <span class=\"n\">water_usage_summary</span><span class=\"p\">[</span><span class=\"s1\">'units'</span><span class=\"p\">]</span>\n</pre>\n<h3>Get a Location\u2019s Water Usage</h3>\n<p>At the very minimum you need to provide a <code>startTime</code> for the reading you want to retrive.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span><span class=\"p\">,</span> <span class=\"n\">timezone</span><span class=\"p\">,</span> <span class=\"n\">timedelta</span>\n\n<span class=\"n\">yesterday</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">(</span><span class=\"n\">timezone</span><span class=\"o\">.</span><span class=\"n\">utc</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">start_time</span> <span class=\"o\">=</span> <span class=\"n\">yesterday</span><span class=\"o\">.</span><span class=\"n\">isoformat</span><span class=\"p\">(</span><span class=\"n\">timespec</span><span class=\"o\">=</span><span class=\"s1\">'seconds'</span><span class=\"p\">)</span>\n\n<span class=\"n\">usage</span> <span class=\"o\">=</span> <span class=\"n\">stream</span><span class=\"o\">.</span><span class=\"n\">get_location_water_usage</span><span class=\"p\">(</span><span class=\"n\">location_id</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s1\">'startTime'</span><span class=\"p\">:</span> <span class=\"n\">start_time</span><span class=\"p\">})</span>\n</pre>\n<h2>Credits</h2>\n<p>This project was heavily inspired by <a href=\"https://github.com/cpopp/streamlabswater-python\" rel=\"nofollow\">streamlabswater-python</a></p>\n\n          </div>"}, "last_serial": 6088418, "releases": {"0.3.2": [{"comment_text": "", "digests": {"md5": "1ceb0e8df9b5847ae738f3cbee94f633", "sha256": "b977c3be9f104c071b604d5e06dd4f1a8c426e22c165a6c7344d53dd68eb7147"}, "downloads": -1, "filename": "streamlabswater_streamlabswater-0.3.2-py3-none-any.whl", "has_sig": false, "md5_digest": "1ceb0e8df9b5847ae738f3cbee94f633", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 5099, "upload_time": "2019-11-06T16:14:09", "upload_time_iso_8601": "2019-11-06T16:14:09.828115Z", "url": "https://files.pythonhosted.org/packages/24/d3/72c67ab6952e60d6e252cc290338dac7b80391db41bf15108c1acb8b5ca3/streamlabswater_streamlabswater-0.3.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8f41bffe564a221181bcd3d5355c4090", "sha256": "0043ee477ffa88abc27f20626611188c9a906d780fb088a0e788461359b84e32"}, "downloads": -1, "filename": "streamlabswater-streamlabswater-0.3.2.tar.gz", "has_sig": false, "md5_digest": "8f41bffe564a221181bcd3d5355c4090", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 3853, "upload_time": "2019-11-06T16:14:12", "upload_time_iso_8601": "2019-11-06T16:14:12.446778Z", "url": "https://files.pythonhosted.org/packages/7a/da/b6c768406aa97c53b630ae8b6806b0a0dc309a876dfa3213ff4e1c407206/streamlabswater-streamlabswater-0.3.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "1ceb0e8df9b5847ae738f3cbee94f633", "sha256": "b977c3be9f104c071b604d5e06dd4f1a8c426e22c165a6c7344d53dd68eb7147"}, "downloads": -1, "filename": "streamlabswater_streamlabswater-0.3.2-py3-none-any.whl", "has_sig": false, "md5_digest": "1ceb0e8df9b5847ae738f3cbee94f633", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 5099, "upload_time": "2019-11-06T16:14:09", "upload_time_iso_8601": "2019-11-06T16:14:09.828115Z", "url": "https://files.pythonhosted.org/packages/24/d3/72c67ab6952e60d6e252cc290338dac7b80391db41bf15108c1acb8b5ca3/streamlabswater_streamlabswater-0.3.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8f41bffe564a221181bcd3d5355c4090", "sha256": "0043ee477ffa88abc27f20626611188c9a906d780fb088a0e788461359b84e32"}, "downloads": -1, "filename": "streamlabswater-streamlabswater-0.3.2.tar.gz", "has_sig": false, "md5_digest": "8f41bffe564a221181bcd3d5355c4090", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 3853, "upload_time": "2019-11-06T16:14:12", "upload_time_iso_8601": "2019-11-06T16:14:12.446778Z", "url": "https://files.pythonhosted.org/packages/7a/da/b6c768406aa97c53b630ae8b6806b0a0dc309a876dfa3213ff4e1c407206/streamlabswater-streamlabswater-0.3.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:01:21 2020"}