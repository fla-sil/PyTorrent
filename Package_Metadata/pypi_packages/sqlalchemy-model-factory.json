{"info": {"author": "Dan Cardin", "author_email": "ddcardin@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: Apache Software License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "[![Actions Status](https://github.com/dancardin/sqlalchemy-model-factory/workflows/build/badge.svg)](https://github.com/dancardin/sqlalchemy-model-factory/actions) [![codecov](https://codecov.io/gh/DanCardin/sqlalchemy-model-factory/branch/master/graph/badge.svg)](https://codecov.io/gh/DanCardin/sqlalchemy-model-factory) [![Documentation Status](https://readthedocs.org/projects/sqlalchemy-model-factory/badge/?version=latest)](https://sqlalchemy-model-factory.readthedocs.io/en/latest/?badge=latest)\n\nsqlalchemy-model-factory aims to make it easy to write factory functions for sqlalchemy\nmodels, particularly for use in testing.\n\nIt should make it easy to define as many factories as you might want, with as little\nboilerplate as possible, while remaining as unopinionated as possible about the behavior\ngoing in your factories.\n\nInstallation\n------------\n\n```python\npip install sqlalchemy-model-factory\n```\n\nUsage\n-----\n\nSuppose you've defined a `Widget` model, and for example you want to test some API code\nthat queries for `Widget` instances. Couple of factory functions might look like so:\n\n```python\n# tests/test_example_which_uses_pytest\nfrom sqlalchemy_model_factory import autoincrement, register_at\nfrom . import models\n\n@register_at('widget')\ndef new_widget(name, weight, color, size, **etc):\n    \"\"\"My goal is to allow you to specify *all* the options a widget might require.\n    \"\"\"\n    return Widget(name, weight, color, size, **etc)\n\n@register_at('widget', name='default')\n@autoincrement\ndef new_default_widget(autoincrement=1):\n    \"\"\"My goal is to give you a widget with as little input as possible.\n    \"\"\"\n    # I'm gonna call the other factory function...because i can!\n    return new_widget(\n        f'default_name{autoincrement}',\n        weight=autoincrement,\n        color='rgb({0}, {0}, {0})'.format(autoincrement),\n        size=autoincrement,\n    )\n```\n\nWhat this does, is register those functions to the registry of factory functions, within\nthe \"widget\" namespace, at the `name` (defaults to `new`) location in the namespace.\n\nSo when I go to write a test, all I need to do is accept the `mf` fixture (and lets say\na `session` db connection fixture to make assertions against) and I can call all the\nfactories that have been registered.\n\n```python\ndef test_example_model(mf, session):\n    widget1 = mf.widget.new('name', 1, 'rgb(0, 0, 0)', 1)\n    widget2 = mf.widget.default()\n    widget3 = mf.widget.default()\n    widget4 = mf.widget.default()\n\n    widgets = session.query(Widget).all()\n    assert len(widgets) == 4\n    assert widgets[0].name == 'name'\n    assert widgets[1].id == widget2.id\n    assert widgets[2].name == widget3.name\n    assert widgets[3].color == 'rgb(3, 3, 3)'\n```\n\nIn a simple toy example, where you don't gain much on the calls themselves the benefits\nare primarily:\n* The instances are automatically put into the database and cleaned up after the test.\n* You can make assertions without hardcoding the values, because you get back a handle on the object.\n\nBut as the graph of models required to set up a particular scenario grows:\n* You can define factories as complex as you want\n  * They can create related objects and assign them to relationships\n  * They can be given sources of randomness or uniqueness to not violate constraints\n  * They can compose with eachother (when called normally, they're the same as the original function).\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/dancardin/sqlalchemy-model-factory", "keywords": "sqlalchemy,model,factory,pytest", "license": "Apache-2.0", "maintainer": "", "maintainer_email": "", "name": "sqlalchemy-model-factory", "package_url": "https://pypi.org/project/sqlalchemy-model-factory/", "platform": "", "project_url": "https://pypi.org/project/sqlalchemy-model-factory/", "project_urls": {"Homepage": "https://github.com/dancardin/sqlalchemy-model-factory", "Repository": "https://github.com/dancardin/sqlalchemy-model-factory"}, "release_url": "https://pypi.org/project/sqlalchemy-model-factory/0.1.2/", "requires_dist": ["sqlalchemy", "pytest (>=1.0); extra == \"pytest\"", "sphinx; extra == \"docs\"", "m2r; extra == \"docs\"", "sphinx_rtd_theme; extra == \"docs\"", "sphinx_autodoc_typehints", "sphinx-autobuild; extra == \"docs\""], "requires_python": ">=3.5", "summary": "A library to assist in generating models from a central location.", "version": "0.1.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://github.com/dancardin/sqlalchemy-model-factory/actions\" rel=\"nofollow\"><img alt=\"Actions Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1291d123f4f81353043ec638f963a075a1b7cfbd/68747470733a2f2f6769746875622e636f6d2f64616e63617264696e2f73716c616c6368656d792d6d6f64656c2d666163746f72792f776f726b666c6f77732f6275696c642f62616467652e737667\"></a> <a href=\"https://codecov.io/gh/DanCardin/sqlalchemy-model-factory\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f8922813b5ba9474b35380ff2dd6df8811cc476c/68747470733a2f2f636f6465636f762e696f2f67682f44616e43617264696e2f73716c616c6368656d792d6d6f64656c2d666163746f72792f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a> <a href=\"https://sqlalchemy-model-factory.readthedocs.io/en/latest/?badge=latest\" rel=\"nofollow\"><img alt=\"Documentation Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a7888a4833207bb579a357302e1fd7cb95a64a22/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f73716c616c6368656d792d6d6f64656c2d666163746f72792f62616467652f3f76657273696f6e3d6c6174657374\"></a></p>\n<p>sqlalchemy-model-factory aims to make it easy to write factory functions for sqlalchemy\nmodels, particularly for use in testing.</p>\n<p>It should make it easy to define as many factories as you might want, with as little\nboilerplate as possible, while remaining as unopinionated as possible about the behavior\ngoing in your factories.</p>\n<h2>Installation</h2>\n<pre><span class=\"n\">pip</span> <span class=\"n\">install</span> <span class=\"n\">sqlalchemy</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">-</span><span class=\"n\">factory</span>\n</pre>\n<h2>Usage</h2>\n<p>Suppose you've defined a <code>Widget</code> model, and for example you want to test some API code\nthat queries for <code>Widget</code> instances. Couple of factory functions might look like so:</p>\n<pre><span class=\"c1\"># tests/test_example_which_uses_pytest</span>\n<span class=\"kn\">from</span> <span class=\"nn\">sqlalchemy_model_factory</span> <span class=\"kn\">import</span> <span class=\"n\">autoincrement</span><span class=\"p\">,</span> <span class=\"n\">register_at</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n\n<span class=\"nd\">@register_at</span><span class=\"p\">(</span><span class=\"s1\">'widget'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">new_widget</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">weight</span><span class=\"p\">,</span> <span class=\"n\">color</span><span class=\"p\">,</span> <span class=\"n\">size</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">etc</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"My goal is to allow you to specify *all* the options a widget might require.</span>\n<span class=\"sd\">    \"\"\"</span>\n    <span class=\"k\">return</span> <span class=\"n\">Widget</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">weight</span><span class=\"p\">,</span> <span class=\"n\">color</span><span class=\"p\">,</span> <span class=\"n\">size</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">etc</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@register_at</span><span class=\"p\">(</span><span class=\"s1\">'widget'</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'default'</span><span class=\"p\">)</span>\n<span class=\"nd\">@autoincrement</span>\n<span class=\"k\">def</span> <span class=\"nf\">new_default_widget</span><span class=\"p\">(</span><span class=\"n\">autoincrement</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">):</span>\n    <span class=\"sd\">\"\"\"My goal is to give you a widget with as little input as possible.</span>\n<span class=\"sd\">    \"\"\"</span>\n    <span class=\"c1\"># I'm gonna call the other factory function...because i can!</span>\n    <span class=\"k\">return</span> <span class=\"n\">new_widget</span><span class=\"p\">(</span>\n        <span class=\"sa\">f</span><span class=\"s1\">'default_name</span><span class=\"si\">{</span><span class=\"n\">autoincrement</span><span class=\"si\">}</span><span class=\"s1\">'</span><span class=\"p\">,</span>\n        <span class=\"n\">weight</span><span class=\"o\">=</span><span class=\"n\">autoincrement</span><span class=\"p\">,</span>\n        <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"s1\">'rgb(</span><span class=\"si\">{0}</span><span class=\"s1\">, </span><span class=\"si\">{0}</span><span class=\"s1\">, </span><span class=\"si\">{0}</span><span class=\"s1\">)'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">autoincrement</span><span class=\"p\">),</span>\n        <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"n\">autoincrement</span><span class=\"p\">,</span>\n    <span class=\"p\">)</span>\n</pre>\n<p>What this does, is register those functions to the registry of factory functions, within\nthe \"widget\" namespace, at the <code>name</code> (defaults to <code>new</code>) location in the namespace.</p>\n<p>So when I go to write a test, all I need to do is accept the <code>mf</code> fixture (and lets say\na <code>session</code> db connection fixture to make assertions against) and I can call all the\nfactories that have been registered.</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">test_example_model</span><span class=\"p\">(</span><span class=\"n\">mf</span><span class=\"p\">,</span> <span class=\"n\">session</span><span class=\"p\">):</span>\n    <span class=\"n\">widget1</span> <span class=\"o\">=</span> <span class=\"n\">mf</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"s1\">'name'</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">'rgb(0, 0, 0)'</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n    <span class=\"n\">widget2</span> <span class=\"o\">=</span> <span class=\"n\">mf</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">default</span><span class=\"p\">()</span>\n    <span class=\"n\">widget3</span> <span class=\"o\">=</span> <span class=\"n\">mf</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">default</span><span class=\"p\">()</span>\n    <span class=\"n\">widget4</span> <span class=\"o\">=</span> <span class=\"n\">mf</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">default</span><span class=\"p\">()</span>\n\n    <span class=\"n\">widgets</span> <span class=\"o\">=</span> <span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"n\">Widget</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()</span>\n    <span class=\"k\">assert</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">widgets</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">4</span>\n    <span class=\"k\">assert</span> <span class=\"n\">widgets</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"o\">==</span> <span class=\"s1\">'name'</span>\n    <span class=\"k\">assert</span> <span class=\"n\">widgets</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">id</span> <span class=\"o\">==</span> <span class=\"n\">widget2</span><span class=\"o\">.</span><span class=\"n\">id</span>\n    <span class=\"k\">assert</span> <span class=\"n\">widgets</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"o\">==</span> <span class=\"n\">widget3</span><span class=\"o\">.</span><span class=\"n\">name</span>\n    <span class=\"k\">assert</span> <span class=\"n\">widgets</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">color</span> <span class=\"o\">==</span> <span class=\"s1\">'rgb(3, 3, 3)'</span>\n</pre>\n<p>In a simple toy example, where you don't gain much on the calls themselves the benefits\nare primarily:</p>\n<ul>\n<li>The instances are automatically put into the database and cleaned up after the test.</li>\n<li>You can make assertions without hardcoding the values, because you get back a handle on the object.</li>\n</ul>\n<p>But as the graph of models required to set up a particular scenario grows:</p>\n<ul>\n<li>You can define factories as complex as you want\n<ul>\n<li>They can create related objects and assign them to relationships</li>\n<li>They can be given sources of randomness or uniqueness to not violate constraints</li>\n<li>They can compose with eachother (when called normally, they're the same as the original function).</li>\n</ul>\n</li>\n</ul>\n\n          </div>"}, "last_serial": 6602385, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "f9d4936b80c2014ff655a2329e8aae47", "sha256": "51e52cade05c2dd52d8194d0fb920192cdb1c754477eb685aaae782e96eaecd3"}, "downloads": -1, "filename": "sqlalchemy_model_factory-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "f9d4936b80c2014ff655a2329e8aae47", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 8686, "upload_time": "2019-10-11T22:58:01", "upload_time_iso_8601": "2019-10-11T22:58:01.986797Z", "url": "https://files.pythonhosted.org/packages/f7/e5/b33f62d82a3ad5e802eb39c3e8887924d94f62eb7672c4b5a1ed782b41f6/sqlalchemy_model_factory-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "a970bc213834a051cfbefd0a4fb48c19", "sha256": "190e28847677df10d024499815c08b4e79ce8c7bd888cc9ea95abf09e090bd3a"}, "downloads": -1, "filename": "sqlalchemy-model-factory-0.1.0.tar.gz", "has_sig": false, "md5_digest": "a970bc213834a051cfbefd0a4fb48c19", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 7425, "upload_time": "2019-10-11T22:57:59", "upload_time_iso_8601": "2019-10-11T22:57:59.858779Z", "url": "https://files.pythonhosted.org/packages/62/36/6da0ff80e77b34f0e574f37843940fffce026d28ba4a77d5096bdf85aafa/sqlalchemy-model-factory-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "58f9afaf1bd45e6727886778639d3a69", "sha256": "b7e25d2092702af2464bad127da1bc086c458b3e51e09aab2a1a259cddd71bc9"}, "downloads": -1, "filename": "sqlalchemy_model_factory-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "58f9afaf1bd45e6727886778639d3a69", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 11804, "upload_time": "2019-10-12T16:27:37", "upload_time_iso_8601": "2019-10-12T16:27:37.737823Z", "url": "https://files.pythonhosted.org/packages/74/aa/56c87f3f0f63d5e5f9b06c9aa5397d0c0fe8e0b17019b15eeb84e1847f56/sqlalchemy_model_factory-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2cd0d8135e726258422d3d61d6676501", "sha256": "3dfe9834471a723c83f12738fe5a9ef81c18ff344e6338d42ba0335cea7a565f"}, "downloads": -1, "filename": "sqlalchemy-model-factory-0.1.1.tar.gz", "has_sig": false, "md5_digest": "2cd0d8135e726258422d3d61d6676501", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 9429, "upload_time": "2019-10-12T16:27:36", "upload_time_iso_8601": "2019-10-12T16:27:36.305947Z", "url": "https://files.pythonhosted.org/packages/ec/9b/1e44cc95b26362a549fc87d9b61cbeca2ed2ad57638496cb368f8da8df48/sqlalchemy-model-factory-0.1.1.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "04ab5689fcf8ab96a85ba5cb73a37590", "sha256": "71c8b1069e23a74fc4f131cdb6dd4bac8608df929f2c0ed28b525d713a66c112"}, "downloads": -1, "filename": "sqlalchemy_model_factory-0.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "04ab5689fcf8ab96a85ba5cb73a37590", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 13562, "upload_time": "2020-02-10T13:21:27", "upload_time_iso_8601": "2020-02-10T13:21:27.578041Z", "url": "https://files.pythonhosted.org/packages/15/a4/7507dc4f60f06a21417d716831a3ec1813739b1e176289a4e219d00253ac/sqlalchemy_model_factory-0.1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "05ecc7466abdf3fa03305f18565acce1", "sha256": "ebf8be2b3c76cc6b85060a3b95a48374e592e65f27a21b2e4b7fea2579ac6e65"}, "downloads": -1, "filename": "sqlalchemy-model-factory-0.1.2.tar.gz", "has_sig": false, "md5_digest": "05ecc7466abdf3fa03305f18565acce1", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 11357, "upload_time": "2020-02-10T13:21:26", "upload_time_iso_8601": "2020-02-10T13:21:26.601679Z", "url": "https://files.pythonhosted.org/packages/a1/03/7e3d2523a0e2447f3def9992952b57df621ad04f75dbb16ff5f72f0252cc/sqlalchemy-model-factory-0.1.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "04ab5689fcf8ab96a85ba5cb73a37590", "sha256": "71c8b1069e23a74fc4f131cdb6dd4bac8608df929f2c0ed28b525d713a66c112"}, "downloads": -1, "filename": "sqlalchemy_model_factory-0.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "04ab5689fcf8ab96a85ba5cb73a37590", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 13562, "upload_time": "2020-02-10T13:21:27", "upload_time_iso_8601": "2020-02-10T13:21:27.578041Z", "url": "https://files.pythonhosted.org/packages/15/a4/7507dc4f60f06a21417d716831a3ec1813739b1e176289a4e219d00253ac/sqlalchemy_model_factory-0.1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "05ecc7466abdf3fa03305f18565acce1", "sha256": "ebf8be2b3c76cc6b85060a3b95a48374e592e65f27a21b2e4b7fea2579ac6e65"}, "downloads": -1, "filename": "sqlalchemy-model-factory-0.1.2.tar.gz", "has_sig": false, "md5_digest": "05ecc7466abdf3fa03305f18565acce1", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 11357, "upload_time": "2020-02-10T13:21:26", "upload_time_iso_8601": "2020-02-10T13:21:26.601679Z", "url": "https://files.pythonhosted.org/packages/a1/03/7e3d2523a0e2447f3def9992952b57df621ad04f75dbb16ff5f72f0252cc/sqlalchemy-model-factory-0.1.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:03:55 2020"}