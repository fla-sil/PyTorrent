{"info": {"author": "AbbestiaDC", "author_email": "not.simone.scuola@outlook.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: GNU General Public License v3 (GPLv3)", "Programming Language :: Python"], "description": "# Pavlov Database\nA database connector to speed up the develop of chat bots.\nIt use mongo Database, you can host an instance locally or use the free mondo Atlas service.\n\n## Configuration of the package\nCreate the folder '/configs' in the root of the project,\ninside the folder add a file named database.cgf\n\nobligatory params:\n- MONGO_CONNECTION_STRING: connection string to the remote db,\nmust be manually created, see mongo documentation\n- DATABASE_NAME: name of database\n- USERS_TABLE_NAME: name of the table where save users obj\n- GUILDS_TABLE_NAME: name of the table where save guild obj\n```\n[connection]\nMONGO_CONNECTION_STRING = mongodb+srv://<username>:<pwsd>@<connection>.mongodb.net/test?retryWrites=true\n\n[database]\nDATABASE_NAME = test\nUSERS_TABLE_NAME = users\nGUILDS_TABLE_NAME = guilds\n\n[debug]\nDEBUG = True\n\n[cache]\nDB_SAVE_INTERVAL = 600  # time in seconds\nMAX_CACHE_ITEMS = 100  # max items saved per type, this will use ram\n\n[values]\n# Max data log retention, after the time specified the data for the stats will be deleted\n# Don't keep an high retention on high granularitis cause il will slow down a lot\nMAX_RETENTION_HOUR = 72  # user logs by hour, after 72 hours the data with that eta will be deleted\nMAX_RETENTION_DAY = 90\nMAX_RETENTION_MONTH = 120\n\n# Time spent calculation config\n# This mean that in 11 seconds you ca write a message 30 chars long.\n# Others values are calculated with proprortion (there is an anti spam meccanism)\nSAMPLE_STRING_LEN = 30\nTIME_SAMPLE_VALUE = 11\n\n# XP gain calculation config\n# This mean that you can gain 12 in a normal message (logaritmic gain)\n# 15 at max (anti spam meccanism). \n# If you send 1 char message you'll gain at least 1 xp\nXP_SAMPLE_VALUE = 12\nXP_MAX_VALUE = 15\nXP_NEXT_LEVEL = 300  # each new level have 300 xp more than his predecessor.\n\nSame as for XP\nBITS_SAMPLE_VALUE = 5\nBITS_MAX_VALUE = 2\n```\n\n## Base Usage\nThis is an example of use. \nDo not care about efficiency!\n\nYou don't have to call once and pass the db object cause is cached internally \nso it will not generate a new call to the remote db.\n```python\nfrom pvlv_database import Database\n\n# It will automatically sync the local cache with the remote DB\nguild_id = 123456789\nuser_id = 123456789\ndb = Database(guild_id, user_id)\n\ndb.user.username = 'User'\nprint(db.user.username)\n\n# use this only if really needed, the db have an auto-saving demon, change the interval in the cfg file\n# This can be called for example at the exit of the program, to manually sync un-synced data.\ndb.force_set_data() \n```\n## Usage, Updaters\nTo easily update the user stats all in one.\n - xp\n - time spent\n - bits\n - username\n - chat name \n```python\nfrom pvlv_database import Database\nfrom pvlv_database import BaseStatsUpdater\n\nguild_id = 123456789\nuser_id = 123456789\ndb = Database(guild_id, user_id)\n\n\nbsu = BaseStatsUpdater(db, timestamp)\nbsu.text(message_text)\nbsu.username(username)\nbsu.guild_name(guild_name)\nbsu.update_text()\n```\n## Efficiency\nLet's suppose that you have to interrogate multiple times the db in different modules of the code.\nTest this code by yourself.\n```python\nfrom time import time\nfrom pvlv_database import Database\n\nguild_id = 123456789\nuser_id = 123456789\n\nt1 = time()\ndb = Database(guild_id, user_id)  # first call 800/2000 ms (on MongoDB Atlas cloud)\nt2 = time()\nt = (t2 - t1) * 1000\nprint('Execution time {} ms'.format(int(t)))\n\n# other calls in different modules\nt1 = time()\ndb_1 = Database(guild_id, user_id)  # 1 ms\ndb_2 = Database(guild_id, user_id)  # 1 ms\nt2 = time()\nt = (t2 - t1) * 1000\nprint('Execution time {} ms'.format(int(t)))\n```\nThe saving demon in on another thread. So il will not affect the program speed.\nIt's not thread safe.", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/The-Pavlov-Project/Pavlov-Database", "keywords": "", "license": "LGPLv3", "maintainer": "", "maintainer_email": "", "name": "pvlv-database", "package_url": "https://pypi.org/project/pvlv-database/", "platform": "", "project_url": "https://pypi.org/project/pvlv-database/", "project_urls": {"Homepage": "https://github.com/The-Pavlov-Project/Pavlov-Database"}, "release_url": "https://pypi.org/project/pvlv-database/0.0.9/", "requires_dist": null, "requires_python": ">=3.6", "summary": "Database connector for Pavlov", "version": "0.0.9", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Pavlov Database</h1>\n<p>A database connector to speed up the develop of chat bots.\nIt use mongo Database, you can host an instance locally or use the free mondo Atlas service.</p>\n<h2>Configuration of the package</h2>\n<p>Create the folder '/configs' in the root of the project,\ninside the folder add a file named database.cgf</p>\n<p>obligatory params:</p>\n<ul>\n<li>MONGO_CONNECTION_STRING: connection string to the remote db,\nmust be manually created, see mongo documentation</li>\n<li>DATABASE_NAME: name of database</li>\n<li>USERS_TABLE_NAME: name of the table where save users obj</li>\n<li>GUILDS_TABLE_NAME: name of the table where save guild obj</li>\n</ul>\n<pre><code>[connection]\nMONGO_CONNECTION_STRING = mongodb+srv://&lt;username&gt;:&lt;pwsd&gt;@&lt;connection&gt;.mongodb.net/test?retryWrites=true\n\n[database]\nDATABASE_NAME = test\nUSERS_TABLE_NAME = users\nGUILDS_TABLE_NAME = guilds\n\n[debug]\nDEBUG = True\n\n[cache]\nDB_SAVE_INTERVAL = 600  # time in seconds\nMAX_CACHE_ITEMS = 100  # max items saved per type, this will use ram\n\n[values]\n# Max data log retention, after the time specified the data for the stats will be deleted\n# Don't keep an high retention on high granularitis cause il will slow down a lot\nMAX_RETENTION_HOUR = 72  # user logs by hour, after 72 hours the data with that eta will be deleted\nMAX_RETENTION_DAY = 90\nMAX_RETENTION_MONTH = 120\n\n# Time spent calculation config\n# This mean that in 11 seconds you ca write a message 30 chars long.\n# Others values are calculated with proprortion (there is an anti spam meccanism)\nSAMPLE_STRING_LEN = 30\nTIME_SAMPLE_VALUE = 11\n\n# XP gain calculation config\n# This mean that you can gain 12 in a normal message (logaritmic gain)\n# 15 at max (anti spam meccanism). \n# If you send 1 char message you'll gain at least 1 xp\nXP_SAMPLE_VALUE = 12\nXP_MAX_VALUE = 15\nXP_NEXT_LEVEL = 300  # each new level have 300 xp more than his predecessor.\n\nSame as for XP\nBITS_SAMPLE_VALUE = 5\nBITS_MAX_VALUE = 2\n</code></pre>\n<h2>Base Usage</h2>\n<p>This is an example of use.\nDo not care about efficiency!</p>\n<p>You don't have to call once and pass the db object cause is cached internally\nso it will not generate a new call to the remote db.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pvlv_database</span> <span class=\"kn\">import</span> <span class=\"n\">Database</span>\n\n<span class=\"c1\"># It will automatically sync the local cache with the remote DB</span>\n<span class=\"n\">guild_id</span> <span class=\"o\">=</span> <span class=\"mi\">123456789</span>\n<span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"mi\">123456789</span>\n<span class=\"n\">db</span> <span class=\"o\">=</span> <span class=\"n\">Database</span><span class=\"p\">(</span><span class=\"n\">guild_id</span><span class=\"p\">,</span> <span class=\"n\">user_id</span><span class=\"p\">)</span>\n\n<span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"s1\">'User'</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">username</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># use this only if really needed, the db have an auto-saving demon, change the interval in the cfg file</span>\n<span class=\"c1\"># This can be called for example at the exit of the program, to manually sync un-synced data.</span>\n<span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">force_set_data</span><span class=\"p\">()</span> \n</pre>\n<h2>Usage, Updaters</h2>\n<p>To easily update the user stats all in one.</p>\n<ul>\n<li>xp</li>\n<li>time spent</li>\n<li>bits</li>\n<li>username</li>\n<li>chat name</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">pvlv_database</span> <span class=\"kn\">import</span> <span class=\"n\">Database</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pvlv_database</span> <span class=\"kn\">import</span> <span class=\"n\">BaseStatsUpdater</span>\n\n<span class=\"n\">guild_id</span> <span class=\"o\">=</span> <span class=\"mi\">123456789</span>\n<span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"mi\">123456789</span>\n<span class=\"n\">db</span> <span class=\"o\">=</span> <span class=\"n\">Database</span><span class=\"p\">(</span><span class=\"n\">guild_id</span><span class=\"p\">,</span> <span class=\"n\">user_id</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">bsu</span> <span class=\"o\">=</span> <span class=\"n\">BaseStatsUpdater</span><span class=\"p\">(</span><span class=\"n\">db</span><span class=\"p\">,</span> <span class=\"n\">timestamp</span><span class=\"p\">)</span>\n<span class=\"n\">bsu</span><span class=\"o\">.</span><span class=\"n\">text</span><span class=\"p\">(</span><span class=\"n\">message_text</span><span class=\"p\">)</span>\n<span class=\"n\">bsu</span><span class=\"o\">.</span><span class=\"n\">username</span><span class=\"p\">(</span><span class=\"n\">username</span><span class=\"p\">)</span>\n<span class=\"n\">bsu</span><span class=\"o\">.</span><span class=\"n\">guild_name</span><span class=\"p\">(</span><span class=\"n\">guild_name</span><span class=\"p\">)</span>\n<span class=\"n\">bsu</span><span class=\"o\">.</span><span class=\"n\">update_text</span><span class=\"p\">()</span>\n</pre>\n<h2>Efficiency</h2>\n<p>Let's suppose that you have to interrogate multiple times the db in different modules of the code.\nTest this code by yourself.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">time</span> <span class=\"kn\">import</span> <span class=\"n\">time</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pvlv_database</span> <span class=\"kn\">import</span> <span class=\"n\">Database</span>\n\n<span class=\"n\">guild_id</span> <span class=\"o\">=</span> <span class=\"mi\">123456789</span>\n<span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"mi\">123456789</span>\n\n<span class=\"n\">t1</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"n\">db</span> <span class=\"o\">=</span> <span class=\"n\">Database</span><span class=\"p\">(</span><span class=\"n\">guild_id</span><span class=\"p\">,</span> <span class=\"n\">user_id</span><span class=\"p\">)</span>  <span class=\"c1\"># first call 800/2000 ms (on MongoDB Atlas cloud)</span>\n<span class=\"n\">t2</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">t2</span> <span class=\"o\">-</span> <span class=\"n\">t1</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">1000</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Execution time </span><span class=\"si\">{}</span><span class=\"s1\"> ms'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"p\">)))</span>\n\n<span class=\"c1\"># other calls in different modules</span>\n<span class=\"n\">t1</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"n\">db_1</span> <span class=\"o\">=</span> <span class=\"n\">Database</span><span class=\"p\">(</span><span class=\"n\">guild_id</span><span class=\"p\">,</span> <span class=\"n\">user_id</span><span class=\"p\">)</span>  <span class=\"c1\"># 1 ms</span>\n<span class=\"n\">db_2</span> <span class=\"o\">=</span> <span class=\"n\">Database</span><span class=\"p\">(</span><span class=\"n\">guild_id</span><span class=\"p\">,</span> <span class=\"n\">user_id</span><span class=\"p\">)</span>  <span class=\"c1\"># 1 ms</span>\n<span class=\"n\">t2</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"p\">()</span>\n<span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">t2</span> <span class=\"o\">-</span> <span class=\"n\">t1</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">1000</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Execution time </span><span class=\"si\">{}</span><span class=\"s1\"> ms'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"p\">)))</span>\n</pre>\n<p>The saving demon in on another thread. So il will not affect the program speed.\nIt's not thread safe.</p>\n\n          </div>"}, "last_serial": 6710422, "releases": {"0.0.7": [{"comment_text": "", "digests": {"md5": "ab8a818dc07157a60855c5b2faabff94", "sha256": "a24030a5bbadf1d1c64a09dcfbba2016d30031943d9a0ccef00bee4814bc3c4a"}, "downloads": -1, "filename": "pvlv_database-0.0.7.tar.gz", "has_sig": false, "md5_digest": "ab8a818dc07157a60855c5b2faabff94", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 12872, "upload_time": "2020-02-10T17:21:37", "upload_time_iso_8601": "2020-02-10T17:21:37.675615Z", "url": "https://files.pythonhosted.org/packages/4a/7b/549013f3ecaa83fbe9d3f5633ca92e949340b834c4b33e564f9395d9ec29/pvlv_database-0.0.7.tar.gz", "yanked": false}], "0.0.8": [{"comment_text": "", "digests": {"md5": "ca6ae4507ff0148ee88e55ed1f2cf5af", "sha256": "430aeb69de40b1f56484571d99145dc4bc7102f27404ea67a717f723e9186b56"}, "downloads": -1, "filename": "pvlv_database-0.0.8.tar.gz", "has_sig": false, "md5_digest": "ca6ae4507ff0148ee88e55ed1f2cf5af", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 13479, "upload_time": "2020-02-23T22:21:31", "upload_time_iso_8601": "2020-02-23T22:21:31.878828Z", "url": "https://files.pythonhosted.org/packages/a3/21/3e4d9fa2f4503c1aae915513290f87793af50880cefe6a8b1b96290ab593/pvlv_database-0.0.8.tar.gz", "yanked": false}], "0.0.9": [{"comment_text": "", "digests": {"md5": "c7bedb0f0292e4c18111ffcebe2696da", "sha256": "0ccc6d6ae7134a143a3640f1a86be513895ded47972ec5b41a22c4e60119edb0"}, "downloads": -1, "filename": "pvlv_database-0.0.9.tar.gz", "has_sig": false, "md5_digest": "c7bedb0f0292e4c18111ffcebe2696da", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14190, "upload_time": "2020-02-27T11:18:19", "upload_time_iso_8601": "2020-02-27T11:18:19.613880Z", "url": "https://files.pythonhosted.org/packages/2b/08/b4fc0c39635b8a5c7270485b8a6507268ec92e611c673abb3354e0d72f63/pvlv_database-0.0.9.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "c7bedb0f0292e4c18111ffcebe2696da", "sha256": "0ccc6d6ae7134a143a3640f1a86be513895ded47972ec5b41a22c4e60119edb0"}, "downloads": -1, "filename": "pvlv_database-0.0.9.tar.gz", "has_sig": false, "md5_digest": "c7bedb0f0292e4c18111ffcebe2696da", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 14190, "upload_time": "2020-02-27T11:18:19", "upload_time_iso_8601": "2020-02-27T11:18:19.613880Z", "url": "https://files.pythonhosted.org/packages/2b/08/b4fc0c39635b8a5c7270485b8a6507268ec92e611c673abb3354e0d72f63/pvlv_database-0.0.9.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:12:58 2020"}