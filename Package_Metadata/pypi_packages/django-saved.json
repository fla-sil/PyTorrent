{"info": {"author": "", "author_email": "", "bugtrack_url": null, "classifiers": [], "description": "<!--\nhttps://pypi.org/project/readme-generator/\nhttps://pypi.org/project/python-readme-generator/\n-->\n\n[![](https://img.shields.io/pypi/pyversions/django-saved.svg?longCache=True)](https://pypi.org/project/django-saved/)\n[![](https://img.shields.io/badge/License-Unlicense-blue.svg?longCache=True)](https://unlicense.org/)\n\n#### Installation\n```bash\n$ [sudo] pip install django-saved\n```\n\n#### Examples\n`settings.py`\n```python\nAUTH_USER_MODEL = 'users.User'\n```\n\n`users/models.py`\n```python\nfrom django.contrib.auth.models import AbstractUser\n\nclass User(AbstractUser):\n    ...\n```\n\n`my_app/models.py`\n```python\nfrom django_saved.models import Saved\n\nclass ProjectBookmark(Saved):\n    obj = models.ForeignKey('Project',related_name=\"+\",on_delete=models.CASCADE)\n\n    class Meta:\n        db_table = 'db_table'\n        unique_together = [('obj', 'created_by')]\n```\n\n`views.py`\n```python\nfrom django_saved.views import SavedAjaxView\nfrom my_app.models import Project, ProjectBookmark\n\nclass ProjectBookmarkAjaxView(SavedAjaxView):\n    saved_model = ProjectBookmark\n\n    def get_json_data(self,obj_id,created):\n        project = Project.objects.get(id=obj_id)\n        return {'is_bookmarked':created,'bookmarks_count':project.bookmarks_count}\n\n\nclass ProjectDetailView:\n    template_name = 'my_app/project_detail.html'\n\n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        project = Project.objects.get(name=self.kwargs['name'])\n        context['bookmark_obj'] = project\n        if self.request.user.is_authenticated:\n            try:\n                context['bookmark'] = ProjectBookmark.objects.get(obj_id=project.id,created_by=self.request.user)\n            except ProjectBookmark.DoesNotExist:\n                pass\n        return context\n```\n\n`urls.py`\n\n```python\nurlpatterns = [\n    path('bookmark/<int:obj_id>', views.ProjectBookmarkAjaxView.as_view(),name='bookmark'),\n]\n```\n\n`my_app/project_detail.html`\n```html\n<a data-id=\"{{ bookmark_obj.pk }}\" id=\"bookmark\" {% if request.user.is_authenticated %}data-href=\"{% url 'bookmark' obj_id=bookmark_obj.id %}\"{% else %}href=\"{% url 'login' %}?next={{ request.path }}\"{% endif %}>bookmark</a>\n```\n\n`bookmark.js`\n```javascript\n// your core ...\n```\n\n<p align=\"center\">\n    <a href=\"https://pypi.org/project/python-readme-generator/\">python-readme-generator</a>\n</p>", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/andrewp-as-is/django-saved.py", "keywords": "Django,saved", "license": "Unlicense", "maintainer": "", "maintainer_email": "", "name": "django-saved", "package_url": "https://pypi.org/project/django-saved/", "platform": "", "project_url": "https://pypi.org/project/django-saved/", "project_urls": {"Homepage": "https://github.com/andrewp-as-is/django-saved.py"}, "release_url": "https://pypi.org/project/django-saved/2020.4.8/", "requires_dist": null, "requires_python": "", "summary": "Django abstract model and views for saved items (bookmarks/likes/stars/watching/etc)", "version": "2020.4.8", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://pypi.org/project/django-saved/\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/358d46edc80840c273d55e5d6887c5e4958ffcf4/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f646a616e676f2d73617665642e7376673f6c6f6e6743616368653d54727565\"></a>\n<a href=\"https://unlicense.org/\" rel=\"nofollow\"><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f4e8a8f9c20068b8993eef25e402898571038660/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d556e6c6963656e73652d626c75652e7376673f6c6f6e6743616368653d54727565\"></a></p>\n<h4>Installation</h4>\n<pre>$ <span class=\"o\">[</span>sudo<span class=\"o\">]</span> pip install django-saved\n</pre>\n<h4>Examples</h4>\n<p><code>settings.py</code></p>\n<pre><span class=\"n\">AUTH_USER_MODEL</span> <span class=\"o\">=</span> <span class=\"s1\">'users.User'</span>\n</pre>\n<p><code>users/models.py</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.contrib.auth.models</span> <span class=\"kn\">import</span> <span class=\"n\">AbstractUser</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">User</span><span class=\"p\">(</span><span class=\"n\">AbstractUser</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span>\n</pre>\n<p><code>my_app/models.py</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django_saved.models</span> <span class=\"kn\">import</span> <span class=\"n\">Saved</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">ProjectBookmark</span><span class=\"p\">(</span><span class=\"n\">Saved</span><span class=\"p\">):</span>\n    <span class=\"n\">obj</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"s1\">'Project'</span><span class=\"p\">,</span><span class=\"n\">related_name</span><span class=\"o\">=</span><span class=\"s2\">\"+\"</span><span class=\"p\">,</span><span class=\"n\">on_delete</span><span class=\"o\">=</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CASCADE</span><span class=\"p\">)</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">db_table</span> <span class=\"o\">=</span> <span class=\"s1\">'db_table'</span>\n        <span class=\"n\">unique_together</span> <span class=\"o\">=</span> <span class=\"p\">[(</span><span class=\"s1\">'obj'</span><span class=\"p\">,</span> <span class=\"s1\">'created_by'</span><span class=\"p\">)]</span>\n</pre>\n<p><code>views.py</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django_saved.views</span> <span class=\"kn\">import</span> <span class=\"n\">SavedAjaxView</span>\n<span class=\"kn\">from</span> <span class=\"nn\">my_app.models</span> <span class=\"kn\">import</span> <span class=\"n\">Project</span><span class=\"p\">,</span> <span class=\"n\">ProjectBookmark</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">ProjectBookmarkAjaxView</span><span class=\"p\">(</span><span class=\"n\">SavedAjaxView</span><span class=\"p\">):</span>\n    <span class=\"n\">saved_model</span> <span class=\"o\">=</span> <span class=\"n\">ProjectBookmark</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get_json_data</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"n\">obj_id</span><span class=\"p\">,</span><span class=\"n\">created</span><span class=\"p\">):</span>\n        <span class=\"n\">project</span> <span class=\"o\">=</span> <span class=\"n\">Project</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"n\">obj_id</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s1\">'is_bookmarked'</span><span class=\"p\">:</span><span class=\"n\">created</span><span class=\"p\">,</span><span class=\"s1\">'bookmarks_count'</span><span class=\"p\">:</span><span class=\"n\">project</span><span class=\"o\">.</span><span class=\"n\">bookmarks_count</span><span class=\"p\">}</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">ProjectDetailView</span><span class=\"p\">:</span>\n    <span class=\"n\">template_name</span> <span class=\"o\">=</span> <span class=\"s1\">'my_app/project_detail.html'</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get_context_data</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"n\">context</span> <span class=\"o\">=</span> <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">get_context_data</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n        <span class=\"n\">project</span> <span class=\"o\">=</span> <span class=\"n\">Project</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">[</span><span class=\"s1\">'name'</span><span class=\"p\">])</span>\n        <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s1\">'bookmark_obj'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">project</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">is_authenticated</span><span class=\"p\">:</span>\n            <span class=\"k\">try</span><span class=\"p\">:</span>\n                <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s1\">'bookmark'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">ProjectBookmark</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">obj_id</span><span class=\"o\">=</span><span class=\"n\">project</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">,</span><span class=\"n\">created_by</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"p\">)</span>\n            <span class=\"k\">except</span> <span class=\"n\">ProjectBookmark</span><span class=\"o\">.</span><span class=\"n\">DoesNotExist</span><span class=\"p\">:</span>\n                <span class=\"k\">pass</span>\n        <span class=\"k\">return</span> <span class=\"n\">context</span>\n</pre>\n<p><code>urls.py</code></p>\n<pre><span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s1\">'bookmark/&lt;int:obj_id&gt;'</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">ProjectBookmarkAjaxView</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'bookmark'</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre>\n<p><code>my_app/project_detail.html</code></p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">a</span> <span class=\"na\">data-id</span><span class=\"o\">=</span><span class=\"s\">\"{{ bookmark_obj.pk }}\"</span> <span class=\"na\">id</span><span class=\"o\">=</span><span class=\"s\">\"bookmark\"</span> <span class=\"err\">{%</span> <span class=\"na\">if</span> <span class=\"na\">request</span><span class=\"err\">.</span><span class=\"na\">user</span><span class=\"err\">.</span><span class=\"na\">is_authenticated</span> <span class=\"err\">%}</span><span class=\"na\">data-href</span><span class=\"o\">=</span><span class=\"s\">\"{% url 'bookmark' obj_id=bookmark_obj.id %}\"</span><span class=\"err\">{%</span> <span class=\"na\">else</span> <span class=\"err\">%}</span><span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"{% url 'login' %}?next={{ request.path }}\"</span><span class=\"err\">{%</span> <span class=\"na\">endif</span> <span class=\"err\">%}</span><span class=\"p\">&gt;</span>bookmark<span class=\"p\">&lt;/</span><span class=\"nt\">a</span><span class=\"p\">&gt;</span>\n</pre>\n<p><code>bookmark.js</code></p>\n<pre><span class=\"c1\">// your core ...</span>\n</pre>\n<p align=\"center\">\n    <a href=\"https://pypi.org/project/python-readme-generator/\" rel=\"nofollow\">python-readme-generator</a>\n</p>\n\n          </div>"}, "last_serial": 6999702, "releases": {"2020.4.8": [{"comment_text": "", "digests": {"md5": "41b7fedf0ff2ef811bfc5809b60e3d07", "sha256": "e708281c15a53d3a0e45c0aabffccfa21c0608f781ce9f5ec31b859d668efe7a"}, "downloads": -1, "filename": "django-saved-2020.4.8.tar.gz", "has_sig": false, "md5_digest": "41b7fedf0ff2ef811bfc5809b60e3d07", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2351, "upload_time": "2020-04-11T14:12:01", "upload_time_iso_8601": "2020-04-11T14:12:01.876820Z", "url": "https://files.pythonhosted.org/packages/cf/7c/fe058b53f2ba43b37b3e196ba7ae31ed861abd9e9e62e83b5785686e7840/django-saved-2020.4.8.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "41b7fedf0ff2ef811bfc5809b60e3d07", "sha256": "e708281c15a53d3a0e45c0aabffccfa21c0608f781ce9f5ec31b859d668efe7a"}, "downloads": -1, "filename": "django-saved-2020.4.8.tar.gz", "has_sig": false, "md5_digest": "41b7fedf0ff2ef811bfc5809b60e3d07", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2351, "upload_time": "2020-04-11T14:12:01", "upload_time_iso_8601": "2020-04-11T14:12:01.876820Z", "url": "https://files.pythonhosted.org/packages/cf/7c/fe058b53f2ba43b37b3e196ba7ae31ed861abd9e9e62e83b5785686e7840/django-saved-2020.4.8.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:53:46 2020"}