{"info": {"author": "Kyle Pericak", "author_email": "kyle@breqwatr.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Natural Language :: English", "Programming Language :: Python :: 3"], "description": "# Breqwatr Deployment Tool\n\nThe Breqwatr deployment tool is a toolkit for deploying Breqwatr OpenStack and\nits accompanying services. The Breqwatr Deployment Tool is accessed from the\ncommand line of an Ubuntu based OS using the command `bwdt`.\n\nBWDT requires Docker, and either a removable drive provided by Breqwatr for\noffline installs or a special key and ID for configuring the tool to pull files\nand images from the upstream servers.\n\n\n## Installation\n\n### From PyPi\n\n```bash\npip install breqwatr-deployment-tool\n```\n\n### From GitHub\n\n```bash\npip install git+https://github.com/breqwatr/breqwatr-deployment-tool.git\n```\n\n### From Offline Media\n\nThe offline media will contain a file named `bwdt.tar.gz`. Unpack it to a\ndirectory off of the removable media, then install with this command:\n\n```bash\npip install --no-index --find-links <directory>  breqwatr-deployment-tool\n```\n\n---\n\n\n# Features\n\n## Help\n\n```bash\nbwdt --help\n```\n\n\n## Configuration\n\nBreqwatr deployment tool supports both offline and online installations.\n```bash\n# Online Example\nbwdt configure --key-id <key ID> --key <key> --online\n\n# Offline Example\nbwdt configure --offline --offline-path <directory of offline files>\n```\n\n\n## Docker Registry\n\n### Start Registry\nLaunch a local Docker registry container\n\n```bash\nbwdt registry start\n```\n\n### Sync Images to Registry\nSync an OpenStack image from Breqwatr's upstream online registry to a  locally\nhosted registry.\n\n```bash\nbwdt registry sync-openstack-image <registry url> <image name>\n```\n\nSync all the required images for an OpenStack deployment to a local registry.\n\n```bash\nbwdt registry sync-all-openstack-images <registry url>\n```\n\n### List Images in Registry\nList the images in a local registry and their tags\n\n```bash\nbwdt registry list-images <registry url>\n```\n\n\n## Ubuntu Apt\n\nBWDT can deploy an optional private Apt service. This allows servers to run the\n`apt-get` command to install software when they don't have an internet\nconnection.\n\nThe Breqwatr Apt container is not a complete mirror, but it does contain all\nthe required packages to deploy OpenStack along with some other useful ones.\n\nThe private Apt service also provides a mechanism to limit\nOpenStack servers to the Ubuntu packages which Breqwatr has tested, ensuring\nthe stability of Breqwatr clouds.\n\n### Start Apt Container\n\n```bash\nbwdt apt start\n```\n\n\n## Python Pip\n\nSimilar to the Apt container, BWDT can deploy a private Pip service.\n\n\n### Start Pip Container\n\n```bash\nbwdt pip start\n```\n\n\n## PXE\n\nBWDT can launch a PXE service based on DNSMasq and Nginx to enable fast,\noffline installation of Ubuntu 18.04 on remote servers.\n\n### Start PXE Container\n\n```bash\nbwdt pxe start --interface enp0s25 --dhcp-start 10.1.0.90 --dhcp-end 10.1.0.99\n```\n\n\n## Ansible\n\nThe Ansible service is used to deploy OpenStack and supporting tools.\n\n### Start Ansible Container\n\nThe `--kolla-dir` path helps to keep the files generated on the host.\n\n```bash\nmkdir -p /etc/kolla\nbwdt ansible start \\\n  --ssh-key-path <path to id_rsa> \\\n  --cloud-yml-path <path to cloud.yml> \\\n  --kolla-dir /etc/kolla\n```\n\n### Deploy Openstack\n\nThe Ansible container leverages some open source Ansible libraries which often\ntake a long time to run. For that reason, these bwdt commands print\n`docker exec` commands which need to be ran. Surrounding the commands with the\n`$()` will make them auto-execute.\n\n\n```bash\n# generate kolla config\n$(bwdt ansible openstack gen-config)\n\n# bootstrap the servers\n$(bwdt ansible openstack bootstrap)\n\n# Deploy openstacl\n$(bwdt ansible openstack deploy)\n\n# Post-deploy\n$(bwdt ansible openstack post-deploy)\n```\n\n\n\n### Arcus\n\nArcus is Breqwatr's custom web UI, API, and cloud management daemon. Among\nother uses, Arcus is a drop-in replacement of OpenStack Horizon.\n\n### Initialize the Datbase\n\n```bash\nbwdt arcus database-init --host <host> --admin-user root --admin-pass <password> --arcus-pass <password>\n```\n\n### Create the Openstack service account\n\n```bash\nbwdt arcus create-service-account --cloud-fqdn <fqdn or vip> --bootstrap-password <password of bootstrap user> --sa-password <password for arcus SA>\n```\n\n### Start the Arcus API service\n\n```bash\nbwdt arcus api start \\\n  --openstack-fqdn <fqdn or vip for openstack> \\\n  --sql-ip <database IP or FQDN> \\\n  --sql-password <db password for arcus user> \\\n  --rabbit-ip <server ip addr 1> --rabbit-ip <server 2> --rabbit-ip <server 3> \\\n  --rabbit-pass <rabbitmq openstack user password>\n```\n\n### Start the Arcus Client\n\n```bash\nbwdt arcus client start \\\n  --openstack-ip <vip or fqdn to openstack> \\\n  --glance-https \\\n  --api-ip <vip or fqdn of arcus-api> \\\n  --arcus-https \\\n  --cert-path <path to HTTPS certificate file>\n  --cert-key-path <path to HTTPS certificate private key file>\n\n```\n\n### Start the Arcus Mgr\n\nThe Arcus Mgr needs Kolla-Ansible's files to do some things like repairing\nMariadb when it goes down. Distribute those files to the control nodes first.\n\nAlso ensure the Arcus Manager has an SSH key which is authorized to each\nOpenStack server.\n\n```bash\n# From the Deployment Server\nbwdt ansible transfer-kolla-dir --server-ip <ip address>\n\n# On the OpenStack control node\nbwdt arcus mgr start \\\n  --kolla-dir <directory of Kolla files> \\\n  --openstack-ip <vip or fqdn of openstack> \\\n  --rabbit-ip <server ip addr 1> --rabbit-ip <server 2> --rabbit-ip <server 3> \\\n  --rabbit-pass <rabbitmq openstack user password> \\\n  --sql-ip <database IP address> \\\n  --sql-password <arcus user password for database> \\\n  --ssh-key-path <authorized SSH key>\n```\n\n\n---\n\n# Docker Utilities\n\n## Build Offline Installation Media\n\nTo build your own offline install media on a USB stick for a dark-site cloud:\n\n```bash\nbwdt export-offline-media <path>\n```\n\n## Download Cloud Config Template\n\nTo download a template cloud configuration for use with the Ansible container:\n\n```bash\nbwdt download cloud-yml <path>\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "https://github.com/breqwatr/breqwatr-deployment-tool/archive/1.03.tar.gz", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/breqwatr/breqwatr-deployment-tool", "keywords": "Breqwatr,Openstack,Kolla", "license": "", "maintainer": "", "maintainer_email": "", "name": "breqwatr-deployment-tool", "package_url": "https://pypi.org/project/breqwatr-deployment-tool/", "platform": "", "project_url": "https://pypi.org/project/breqwatr-deployment-tool/", "project_urls": {"Download": "https://github.com/breqwatr/breqwatr-deployment-tool/archive/1.03.tar.gz", "Homepage": "https://github.com/breqwatr/breqwatr-deployment-tool"}, "release_url": "https://pypi.org/project/breqwatr-deployment-tool/1.3/", "requires_dist": null, "requires_python": "", "summary": "Deploy and manage Breqwatr services", "version": "1.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Breqwatr Deployment Tool</h1>\n<p>The Breqwatr deployment tool is a toolkit for deploying Breqwatr OpenStack and\nits accompanying services. The Breqwatr Deployment Tool is accessed from the\ncommand line of an Ubuntu based OS using the command <code>bwdt</code>.</p>\n<p>BWDT requires Docker, and either a removable drive provided by Breqwatr for\noffline installs or a special key and ID for configuring the tool to pull files\nand images from the upstream servers.</p>\n<h2>Installation</h2>\n<h3>From PyPi</h3>\n<pre>pip install breqwatr-deployment-tool\n</pre>\n<h3>From GitHub</h3>\n<pre>pip install git+https://github.com/breqwatr/breqwatr-deployment-tool.git\n</pre>\n<h3>From Offline Media</h3>\n<p>The offline media will contain a file named <code>bwdt.tar.gz</code>. Unpack it to a\ndirectory off of the removable media, then install with this command:</p>\n<pre>pip install --no-index --find-links &lt;directory&gt;  breqwatr-deployment-tool\n</pre>\n<hr>\n<h1>Features</h1>\n<h2>Help</h2>\n<pre>bwdt --help\n</pre>\n<h2>Configuration</h2>\n<p>Breqwatr deployment tool supports both offline and online installations.</p>\n<pre><span class=\"c1\"># Online Example</span>\nbwdt configure --key-id &lt;key ID&gt; --key &lt;key&gt; --online\n\n<span class=\"c1\"># Offline Example</span>\nbwdt configure --offline --offline-path &lt;directory of offline files&gt;\n</pre>\n<h2>Docker Registry</h2>\n<h3>Start Registry</h3>\n<p>Launch a local Docker registry container</p>\n<pre>bwdt registry start\n</pre>\n<h3>Sync Images to Registry</h3>\n<p>Sync an OpenStack image from Breqwatr's upstream online registry to a  locally\nhosted registry.</p>\n<pre>bwdt registry sync-openstack-image &lt;registry url&gt; &lt;image name&gt;\n</pre>\n<p>Sync all the required images for an OpenStack deployment to a local registry.</p>\n<pre>bwdt registry sync-all-openstack-images &lt;registry url&gt;\n</pre>\n<h3>List Images in Registry</h3>\n<p>List the images in a local registry and their tags</p>\n<pre>bwdt registry list-images &lt;registry url&gt;\n</pre>\n<h2>Ubuntu Apt</h2>\n<p>BWDT can deploy an optional private Apt service. This allows servers to run the\n<code>apt-get</code> command to install software when they don't have an internet\nconnection.</p>\n<p>The Breqwatr Apt container is not a complete mirror, but it does contain all\nthe required packages to deploy OpenStack along with some other useful ones.</p>\n<p>The private Apt service also provides a mechanism to limit\nOpenStack servers to the Ubuntu packages which Breqwatr has tested, ensuring\nthe stability of Breqwatr clouds.</p>\n<h3>Start Apt Container</h3>\n<pre>bwdt apt start\n</pre>\n<h2>Python Pip</h2>\n<p>Similar to the Apt container, BWDT can deploy a private Pip service.</p>\n<h3>Start Pip Container</h3>\n<pre>bwdt pip start\n</pre>\n<h2>PXE</h2>\n<p>BWDT can launch a PXE service based on DNSMasq and Nginx to enable fast,\noffline installation of Ubuntu 18.04 on remote servers.</p>\n<h3>Start PXE Container</h3>\n<pre>bwdt pxe start --interface enp0s25 --dhcp-start <span class=\"m\">10</span>.1.0.90 --dhcp-end <span class=\"m\">10</span>.1.0.99\n</pre>\n<h2>Ansible</h2>\n<p>The Ansible service is used to deploy OpenStack and supporting tools.</p>\n<h3>Start Ansible Container</h3>\n<p>The <code>--kolla-dir</code> path helps to keep the files generated on the host.</p>\n<pre>mkdir -p /etc/kolla\nbwdt ansible start <span class=\"se\">\\</span>\n  --ssh-key-path &lt;path to id_rsa&gt; <span class=\"se\">\\</span>\n  --cloud-yml-path &lt;path to cloud.yml&gt; <span class=\"se\">\\</span>\n  --kolla-dir /etc/kolla\n</pre>\n<h3>Deploy Openstack</h3>\n<p>The Ansible container leverages some open source Ansible libraries which often\ntake a long time to run. For that reason, these bwdt commands print\n<code>docker exec</code> commands which need to be ran. Surrounding the commands with the\n<code>$()</code> will make them auto-execute.</p>\n<pre><span class=\"c1\"># generate kolla config</span>\n<span class=\"k\">$(</span>bwdt ansible openstack gen-config<span class=\"k\">)</span>\n\n<span class=\"c1\"># bootstrap the servers</span>\n<span class=\"k\">$(</span>bwdt ansible openstack bootstrap<span class=\"k\">)</span>\n\n<span class=\"c1\"># Deploy openstacl</span>\n<span class=\"k\">$(</span>bwdt ansible openstack deploy<span class=\"k\">)</span>\n\n<span class=\"c1\"># Post-deploy</span>\n<span class=\"k\">$(</span>bwdt ansible openstack post-deploy<span class=\"k\">)</span>\n</pre>\n<h3>Arcus</h3>\n<p>Arcus is Breqwatr's custom web UI, API, and cloud management daemon. Among\nother uses, Arcus is a drop-in replacement of OpenStack Horizon.</p>\n<h3>Initialize the Datbase</h3>\n<pre>bwdt arcus database-init --host &lt;host&gt; --admin-user root --admin-pass &lt;password&gt; --arcus-pass &lt;password&gt;\n</pre>\n<h3>Create the Openstack service account</h3>\n<pre>bwdt arcus create-service-account --cloud-fqdn &lt;fqdn or vip&gt; --bootstrap-password &lt;password of bootstrap user&gt; --sa-password &lt;password <span class=\"k\">for</span> arcus SA&gt;\n</pre>\n<h3>Start the Arcus API service</h3>\n<pre>bwdt arcus api start <span class=\"se\">\\</span>\n  --openstack-fqdn &lt;fqdn or vip <span class=\"k\">for</span> openstack&gt; <span class=\"se\">\\</span>\n  --sql-ip &lt;database IP or FQDN&gt; <span class=\"se\">\\</span>\n  --sql-password &lt;db password <span class=\"k\">for</span> arcus user&gt; <span class=\"se\">\\</span>\n  --rabbit-ip &lt;server ip addr <span class=\"m\">1</span>&gt; --rabbit-ip &lt;server <span class=\"m\">2</span>&gt; --rabbit-ip &lt;server <span class=\"m\">3</span>&gt; <span class=\"se\">\\</span>\n  --rabbit-pass &lt;rabbitmq openstack user password&gt;\n</pre>\n<h3>Start the Arcus Client</h3>\n<pre>bwdt arcus client start <span class=\"se\">\\</span>\n  --openstack-ip &lt;vip or fqdn to openstack&gt; <span class=\"se\">\\</span>\n  --glance-https <span class=\"se\">\\</span>\n  --api-ip &lt;vip or fqdn of arcus-api&gt; <span class=\"se\">\\</span>\n  --arcus-https <span class=\"se\">\\</span>\n  --cert-path &lt;path to HTTPS certificate file&gt;\n  --cert-key-path &lt;path to HTTPS certificate private key file&gt;\n</pre>\n<h3>Start the Arcus Mgr</h3>\n<p>The Arcus Mgr needs Kolla-Ansible's files to do some things like repairing\nMariadb when it goes down. Distribute those files to the control nodes first.</p>\n<p>Also ensure the Arcus Manager has an SSH key which is authorized to each\nOpenStack server.</p>\n<pre><span class=\"c1\"># From the Deployment Server</span>\nbwdt ansible transfer-kolla-dir --server-ip &lt;ip address&gt;\n\n<span class=\"c1\"># On the OpenStack control node</span>\nbwdt arcus mgr start <span class=\"se\">\\</span>\n  --kolla-dir &lt;directory of Kolla files&gt; <span class=\"se\">\\</span>\n  --openstack-ip &lt;vip or fqdn of openstack&gt; <span class=\"se\">\\</span>\n  --rabbit-ip &lt;server ip addr <span class=\"m\">1</span>&gt; --rabbit-ip &lt;server <span class=\"m\">2</span>&gt; --rabbit-ip &lt;server <span class=\"m\">3</span>&gt; <span class=\"se\">\\</span>\n  --rabbit-pass &lt;rabbitmq openstack user password&gt; <span class=\"se\">\\</span>\n  --sql-ip &lt;database IP address&gt; <span class=\"se\">\\</span>\n  --sql-password &lt;arcus user password <span class=\"k\">for</span> database&gt; <span class=\"se\">\\</span>\n  --ssh-key-path &lt;authorized SSH key&gt;\n</pre>\n<hr>\n<h1>Docker Utilities</h1>\n<h2>Build Offline Installation Media</h2>\n<p>To build your own offline install media on a USB stick for a dark-site cloud:</p>\n<pre>bwdt export-offline-media &lt;path&gt;\n</pre>\n<h2>Download Cloud Config Template</h2>\n<p>To download a template cloud configuration for use with the Ansible container:</p>\n<pre>bwdt download cloud-yml &lt;path&gt;\n</pre>\n\n          </div>"}, "last_serial": 6083164, "releases": {"1.0": [{"comment_text": "", "digests": {"md5": "c5f5325fb8735495cdc41b3e4640e1b4", "sha256": "914379ea9c95324b71d64776b945e307d5c71fb0ceac743fa92412ccd1426248"}, "downloads": -1, "filename": "breqwatr-deployment-tool-1.0.tar.gz", "has_sig": false, "md5_digest": "c5f5325fb8735495cdc41b3e4640e1b4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14658, "upload_time": "2019-10-02T19:50:10", "upload_time_iso_8601": "2019-10-02T19:50:10.930782Z", "url": "https://files.pythonhosted.org/packages/c8/73/be044cf5b384895ca5ccd5621add5afb343b3cc36d3b58862baa937cbdef/breqwatr-deployment-tool-1.0.tar.gz", "yanked": false}], "1.1": [{"comment_text": "", "digests": {"md5": "1ed24c5220e0dad97af7cc516b8cdd7d", "sha256": "a88b1fc362c8ef743ede85e65c0ff86a26183d8a3e798e350449d0672c510d0d"}, "downloads": -1, "filename": "breqwatr-deployment-tool-1.1.tar.gz", "has_sig": false, "md5_digest": "1ed24c5220e0dad97af7cc516b8cdd7d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14646, "upload_time": "2019-10-02T20:21:38", "upload_time_iso_8601": "2019-10-02T20:21:38.699804Z", "url": "https://files.pythonhosted.org/packages/b1/d3/596c3a182729aaa5f80271f9d573d1c382f0b466a4d2e1aedab69eb63a6b/breqwatr-deployment-tool-1.1.tar.gz", "yanked": false}], "1.2": [{"comment_text": "", "digests": {"md5": "e34f14c6d5fa73f661d7edbb0a2d6780", "sha256": "63f8f2fec6bf204dd0e3146d9b248d6a0ca5b92b719bb95bb1701eaca9f3d894"}, "downloads": -1, "filename": "breqwatr-deployment-tool-1.2.tar.gz", "has_sig": false, "md5_digest": "e34f14c6d5fa73f661d7edbb0a2d6780", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16196, "upload_time": "2019-10-06T19:41:36", "upload_time_iso_8601": "2019-10-06T19:41:36.078045Z", "url": "https://files.pythonhosted.org/packages/f5/86/6e3fd3eee7095ef105254f4cafaee53b6bd68d4006fdd42b2b2474b6e980/breqwatr-deployment-tool-1.2.tar.gz", "yanked": false}], "1.3": [{"comment_text": "", "digests": {"md5": "cb114869be9a644157ca312c8ffd5b81", "sha256": "5223271276f8ae0d4558ff3baec10213f4a02112a668f68aa2625d37688b1e09"}, "downloads": -1, "filename": "breqwatr-deployment-tool-1.3.tar.gz", "has_sig": false, "md5_digest": "cb114869be9a644157ca312c8ffd5b81", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17188, "upload_time": "2019-11-05T21:26:04", "upload_time_iso_8601": "2019-11-05T21:26:04.970857Z", "url": "https://files.pythonhosted.org/packages/ae/b8/e4edcf6a0df463c5937f20fa1043034cc252e9af3176a281a177c8735daf/breqwatr-deployment-tool-1.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "cb114869be9a644157ca312c8ffd5b81", "sha256": "5223271276f8ae0d4558ff3baec10213f4a02112a668f68aa2625d37688b1e09"}, "downloads": -1, "filename": "breqwatr-deployment-tool-1.3.tar.gz", "has_sig": false, "md5_digest": "cb114869be9a644157ca312c8ffd5b81", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17188, "upload_time": "2019-11-05T21:26:04", "upload_time_iso_8601": "2019-11-05T21:26:04.970857Z", "url": "https://files.pythonhosted.org/packages/ae/b8/e4edcf6a0df463c5937f20fa1043034cc252e9af3176a281a177c8735daf/breqwatr-deployment-tool-1.3.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:36:21 2020"}