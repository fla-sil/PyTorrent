{"info": {"author": "Pavlos Parissis", "author_email": "pavlos.parissis@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Environment :: Console", "Intended Audience :: Information Technology", "Intended Audience :: System Administrators", "Natural Language :: English", "Operating System :: POSIX", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.4", "Topic :: Utilities"], "description": ".. haproxyadmin\n.. README.rst\n\n============\nhaproxyadmin\n============\n\n    *A Python library to manage HAProxy via stats socket.*\n\n.. contents::\n\n\nIntroduction\n------------\n\n**haproxyadmin** is a Python library for interacting with `HAProxy`_\nload balancer to perform operations such as enabling/disabling servers.\nIt does that by issuing the appropriate commands over the `stats socket`_\nprovided by HAProxy. It also uses that stats socket for retrieving\nstatistics and changing settings.\n\nHAProxy is a multi-process daemon and each process can only be accessed by a\ndistinct stats socket. There isn't any shared memory for all these processes.\nThat means that if a frontend or backend is managed by more than one processes,\nyou have to find which stats socket you need to send the query/command.\nThis makes the life of a sysadmin a bit difficult as he has to keep track of\nwhich stats socket to use for a given object(frontend/backend/server).\n\n**haproxyadmin** resolves this problem by presenting objects as single entities\neven when they are managed by multiple processes. It also supports aggregation\nfor various statistics provided by HAProxy. For instance, to report the\nrequests processed by a frontend it queries all processes which manage that\nfrontend and return the sum.\n\nThe library works with Python 2.7 and Python 3.6, but for development and\ntesting Python 3.6 is used. The `Six Python 2 and 3 Compatibility Library`_\nis being used to provide the necessary wrapping over the differences between\nthese 2 major versions of Python.\n\n\n.. code-block:: python\n\n\n    >>> from haproxyadmin import haproxy\n    >>> hap = haproxy.HAProxy(socket_dir='/run/haproxy')\n    >>> frontends = hap.frontends()\n    >>> for frontend in frontends:\n    ...     print(frontend.name, frontend.requests, frontend.process_nb)\n    ...\n    frontend_proc2 0 [2]\n    haproxy 0 [4, 3, 2, 1]\n    frontend_proc1 0 [1]\n    frontend1_proc34 0 [4, 3]\n    frontend2_proc34 0 [4, 3]\n    >>>\n    >>>\n    >>> backends = hap.backends()\n    >>> for backend in backends:\n    ...    print(backend.name, backend.requests, backend.process_nb)\n    ...    servers = backend.servers()\n    ...    for server in servers:\n    ...       print(\" \", server.name, server.requests)\n    ...\n    backend_proc2 100 [2]\n      bck_proc2_srv4_proc2 25\n      bck_proc2_srv3_proc2 25\n      bck_proc2_srv1_proc2 25\n      bck_proc2_srv2_proc2 25\n    haproxy 0 [4, 3, 2, 1]\n    backend1_proc34 16 [4, 3]\n      bck1_proc34_srv1 6\n      bck_all_srv1 5\n      bck1_proc34_srv2 5\n    backend_proc1 29 [1]\n      member2_proc1 14\n      member1_proc1 15\n      bck_all_srv1 0\n    backend2_proc34 100 [4, 3]\n      bck2_proc34_srv2 97\n      bck2_proc34_srv1 2\n      bck_all_srv1 1\n    >>>\n\n\nThe documentation of the library is available at http://haproxyadmin.readthedocs.org\n\n\nFeatures\n--------\n\n- HAProxy in multi-process mode (nbproc >1)\n- UNIX stats socket, no support for querying HTTP statistics page\n- Frontend operations\n- Backend operations\n- Server operations\n- ACL operations\n- MAP operations\n- Aggregation on various statistics\n- Change global options for HAProxy\n\n\nInstallation\n------------\n\nUse pip::\n\n    pip install haproxyadmin\n\nFrom Source::\n\n   sudo python setup.py install\n\nBuild (source) RPMs::\n\n   python setup.py clean --all; python setup.py bdist_rpm\n\nBuild a source archive for manual installation::\n\n   python setup.py sdist\n\nRelease\n-------\n\n#. Bump versions in docs/source/conf.py and haproxyadmin/__init__.py\n\n#. Commit above change with::\n\n      git commit -av -m'RELEASE 0.1.3 version'\n\n#. Create a signed tag, pbr will use this for the version number::\n\n      git tag -s 0.1.3 -m 'bump release'\n\n#. Create the source distribution archive (the archive will be placed in the **dist** directory)::\n\n      python setup.py sdist\n\n#. pbr will update ChangeLog file and we want to squeeze them to the previous commit thus we run::\n\n      git commit -av --amend\n\n#. Move current tag to the last commit::\n\n      git tag -fs 0.1.3 -m 'bump release'\n\n#. Push changes::\n\n      git push;git push --tags\n\n\nDevelopment\n-----------\nI would love to hear what other people think about **haproxyadmin** and provide\nfeedback. Please post your comments, bug reports, wishes on my `issues page\n<https://github.com/unixsurfer/haproxyadmin/issues>`_.\n\nLicensing\n---------\n\nApache 2.0\n\n\nAcknowledgement\n---------------\nThis program was originally developed for Booking.com.  With approval\nfrom Booking.com, the code was generalised and published as Open Source\non github, for which the author would like to express his gratitude.\n\nContacts\n--------\n\n**Project website**: https://github.com/unixsurfer/haproxyadmin\n\n**Author**: Pavlos Parissis <pavlos.parissis@gmail.com>\n\n.. _HAProxy: http://www.haproxy.org/\n.. _stats socket: http://cbonte.github.io/haproxy-dconv/configuration-1.5.html#9.2\n.. _Six Python 2 and 3 Compatibility Library: https://pythonhosted.org/six/", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "haproxy", "license": "Apache 2.0", "maintainer": "Pavlos Parissis", "maintainer_email": "pavlos.parissis@gmail.com", "name": "haproxyadmin", "package_url": "https://pypi.org/project/haproxyadmin/", "platform": "", "project_url": "https://pypi.org/project/haproxyadmin/", "project_urls": null, "release_url": "https://pypi.org/project/haproxyadmin/0.2.3/", "requires_dist": null, "requires_python": "", "summary": "A library to work with HAProxy via the stats socket", "version": "0.2.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <blockquote>\n<em>A Python library to manage HAProxy via stats socket.</em></blockquote>\n<div id=\"contents\">\n<p>Contents</p>\n<ul>\n<li><a href=\"#introduction\" id=\"id1\" rel=\"nofollow\">Introduction</a></li>\n<li><a href=\"#features\" id=\"id2\" rel=\"nofollow\">Features</a></li>\n<li><a href=\"#installation\" id=\"id3\" rel=\"nofollow\">Installation</a></li>\n<li><a href=\"#release\" id=\"id4\" rel=\"nofollow\">Release</a></li>\n<li><a href=\"#development\" id=\"id5\" rel=\"nofollow\">Development</a></li>\n<li><a href=\"#licensing\" id=\"id6\" rel=\"nofollow\">Licensing</a></li>\n<li><a href=\"#acknowledgement\" id=\"id7\" rel=\"nofollow\">Acknowledgement</a></li>\n<li><a href=\"#contacts\" id=\"id8\" rel=\"nofollow\">Contacts</a></li>\n</ul>\n</div>\n<div id=\"introduction\">\n<h2><a href=\"#id1\" rel=\"nofollow\">Introduction</a></h2>\n<p><strong>haproxyadmin</strong> is a Python library for interacting with <a href=\"http://www.haproxy.org/\" rel=\"nofollow\">HAProxy</a>\nload balancer to perform operations such as enabling/disabling servers.\nIt does that by issuing the appropriate commands over the <a href=\"http://cbonte.github.io/haproxy-dconv/configuration-1.5.html#9.2\" rel=\"nofollow\">stats socket</a>\nprovided by HAProxy. It also uses that stats socket for retrieving\nstatistics and changing settings.</p>\n<p>HAProxy is a multi-process daemon and each process can only be accessed by a\ndistinct stats socket. There isn\u2019t any shared memory for all these processes.\nThat means that if a frontend or backend is managed by more than one processes,\nyou have to find which stats socket you need to send the query/command.\nThis makes the life of a sysadmin a bit difficult as he has to keep track of\nwhich stats socket to use for a given object(frontend/backend/server).</p>\n<p><strong>haproxyadmin</strong> resolves this problem by presenting objects as single entities\neven when they are managed by multiple processes. It also supports aggregation\nfor various statistics provided by HAProxy. For instance, to report the\nrequests processed by a frontend it queries all processes which manage that\nfrontend and return the sum.</p>\n<p>The library works with Python 2.7 and Python 3.6, but for development and\ntesting Python 3.6 is used. The <a href=\"https://pythonhosted.org/six/\" rel=\"nofollow\">Six Python 2 and 3 Compatibility Library</a>\nis being used to provide the necessary wrapping over the differences between\nthese 2 major versions of Python.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">haproxyadmin</span> <span class=\"kn\">import</span> <span class=\"n\">haproxy</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">hap</span> <span class=\"o\">=</span> <span class=\"n\">haproxy</span><span class=\"o\">.</span><span class=\"n\">HAProxy</span><span class=\"p\">(</span><span class=\"n\">socket_dir</span><span class=\"o\">=</span><span class=\"s1\">'/run/haproxy'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">frontends</span> <span class=\"o\">=</span> <span class=\"n\">hap</span><span class=\"o\">.</span><span class=\"n\">frontends</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"k\">for</span> <span class=\"n\">frontend</span> <span class=\"ow\">in</span> <span class=\"n\">frontends</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>     <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">frontend</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">frontend</span><span class=\"o\">.</span><span class=\"n\">requests</span><span class=\"p\">,</span> <span class=\"n\">frontend</span><span class=\"o\">.</span><span class=\"n\">process_nb</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">frontend_proc2</span> <span class=\"mi\">0</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"n\">haproxy</span> <span class=\"mi\">0</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]</span>\n<span class=\"n\">frontend_proc1</span> <span class=\"mi\">0</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n<span class=\"n\">frontend1_proc34</span> <span class=\"mi\">0</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">]</span>\n<span class=\"n\">frontend2_proc34</span> <span class=\"mi\">0</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">]</span>\n<span class=\"o\">&gt;&gt;&gt;</span>\n<span class=\"o\">&gt;&gt;&gt;</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">backends</span> <span class=\"o\">=</span> <span class=\"n\">hap</span><span class=\"o\">.</span><span class=\"n\">backends</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"k\">for</span> <span class=\"n\">backend</span> <span class=\"ow\">in</span> <span class=\"n\">backends</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">backend</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">backend</span><span class=\"o\">.</span><span class=\"n\">requests</span><span class=\"p\">,</span> <span class=\"n\">backend</span><span class=\"o\">.</span><span class=\"n\">process_nb</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>    <span class=\"n\">servers</span> <span class=\"o\">=</span> <span class=\"n\">backend</span><span class=\"o\">.</span><span class=\"n\">servers</span><span class=\"p\">()</span>\n<span class=\"o\">...</span>    <span class=\"k\">for</span> <span class=\"n\">server</span> <span class=\"ow\">in</span> <span class=\"n\">servers</span><span class=\"p\">:</span>\n<span class=\"o\">...</span>       <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\" \"</span><span class=\"p\">,</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">requests</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">backend_proc2</span> <span class=\"mi\">100</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n  <span class=\"n\">bck_proc2_srv4_proc2</span> <span class=\"mi\">25</span>\n  <span class=\"n\">bck_proc2_srv3_proc2</span> <span class=\"mi\">25</span>\n  <span class=\"n\">bck_proc2_srv1_proc2</span> <span class=\"mi\">25</span>\n  <span class=\"n\">bck_proc2_srv2_proc2</span> <span class=\"mi\">25</span>\n<span class=\"n\">haproxy</span> <span class=\"mi\">0</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]</span>\n<span class=\"n\">backend1_proc34</span> <span class=\"mi\">16</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">]</span>\n  <span class=\"n\">bck1_proc34_srv1</span> <span class=\"mi\">6</span>\n  <span class=\"n\">bck_all_srv1</span> <span class=\"mi\">5</span>\n  <span class=\"n\">bck1_proc34_srv2</span> <span class=\"mi\">5</span>\n<span class=\"n\">backend_proc1</span> <span class=\"mi\">29</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n  <span class=\"n\">member2_proc1</span> <span class=\"mi\">14</span>\n  <span class=\"n\">member1_proc1</span> <span class=\"mi\">15</span>\n  <span class=\"n\">bck_all_srv1</span> <span class=\"mi\">0</span>\n<span class=\"n\">backend2_proc34</span> <span class=\"mi\">100</span> <span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">]</span>\n  <span class=\"n\">bck2_proc34_srv2</span> <span class=\"mi\">97</span>\n  <span class=\"n\">bck2_proc34_srv1</span> <span class=\"mi\">2</span>\n  <span class=\"n\">bck_all_srv1</span> <span class=\"mi\">1</span>\n<span class=\"o\">&gt;&gt;&gt;</span>\n</pre>\n<p>The documentation of the library is available at <a href=\"http://haproxyadmin.readthedocs.org\" rel=\"nofollow\">http://haproxyadmin.readthedocs.org</a></p>\n</div>\n<div id=\"features\">\n<h2><a href=\"#id2\" rel=\"nofollow\">Features</a></h2>\n<ul>\n<li>HAProxy in multi-process mode (nbproc &gt;1)</li>\n<li>UNIX stats socket, no support for querying HTTP statistics page</li>\n<li>Frontend operations</li>\n<li>Backend operations</li>\n<li>Server operations</li>\n<li>ACL operations</li>\n<li>MAP operations</li>\n<li>Aggregation on various statistics</li>\n<li>Change global options for HAProxy</li>\n</ul>\n</div>\n<div id=\"installation\">\n<h2><a href=\"#id3\" rel=\"nofollow\">Installation</a></h2>\n<p>Use pip:</p>\n<pre>pip install haproxyadmin\n</pre>\n<p>From Source:</p>\n<pre>sudo python setup.py install\n</pre>\n<p>Build (source) RPMs:</p>\n<pre>python setup.py clean --all; python setup.py bdist_rpm\n</pre>\n<p>Build a source archive for manual installation:</p>\n<pre>python setup.py sdist\n</pre>\n</div>\n<div id=\"release\">\n<h2><a href=\"#id4\" rel=\"nofollow\">Release</a></h2>\n<ol>\n<li><p>Bump versions in docs/source/conf.py and haproxyadmin/__init__.py</p>\n</li>\n<li><p>Commit above change with:</p>\n<pre>git commit -av -m'RELEASE 0.1.3 version'\n</pre>\n</li>\n<li><p>Create a signed tag, pbr will use this for the version number:</p>\n<pre>git tag -s 0.1.3 -m 'bump release'\n</pre>\n</li>\n<li><p>Create the source distribution archive (the archive will be placed in the <strong>dist</strong> directory):</p>\n<pre>python setup.py sdist\n</pre>\n</li>\n<li><p>pbr will update ChangeLog file and we want to squeeze them to the previous commit thus we run:</p>\n<pre>git commit -av --amend\n</pre>\n</li>\n<li><p>Move current tag to the last commit:</p>\n<pre>git tag -fs 0.1.3 -m 'bump release'\n</pre>\n</li>\n<li><p>Push changes:</p>\n<pre>git push;git push --tags\n</pre>\n</li>\n</ol>\n</div>\n<div id=\"development\">\n<h2><a href=\"#id5\" rel=\"nofollow\">Development</a></h2>\n<p>I would love to hear what other people think about <strong>haproxyadmin</strong> and provide\nfeedback. Please post your comments, bug reports, wishes on my <a href=\"https://github.com/unixsurfer/haproxyadmin/issues\" rel=\"nofollow\">issues page</a>.</p>\n</div>\n<div id=\"licensing\">\n<h2><a href=\"#id6\" rel=\"nofollow\">Licensing</a></h2>\n<p>Apache 2.0</p>\n</div>\n<div id=\"acknowledgement\">\n<h2><a href=\"#id7\" rel=\"nofollow\">Acknowledgement</a></h2>\n<p>This program was originally developed for Booking.com.  With approval\nfrom Booking.com, the code was generalised and published as Open Source\non github, for which the author would like to express his gratitude.</p>\n</div>\n<div id=\"contacts\">\n<h2><a href=\"#id8\" rel=\"nofollow\">Contacts</a></h2>\n<p><strong>Project website</strong>: <a href=\"https://github.com/unixsurfer/haproxyadmin\" rel=\"nofollow\">https://github.com/unixsurfer/haproxyadmin</a></p>\n<p><strong>Author</strong>: Pavlos Parissis &lt;<a href=\"mailto:pavlos.parissis%40gmail.com\">pavlos<span>.</span>parissis<span>@</span>gmail<span>.</span>com</a>&gt;</p>\n</div>\n\n          </div>"}, "last_serial": 7009752, "releases": {"0.2.1": [{"comment_text": "", "digests": {"md5": "7d63931b0f0ecbebcb22c60a663d45d6", "sha256": "8121b2c12b7cdc520dab302e74411ba12688b38189e239a3c17c3c8e0453ffc4"}, "downloads": -1, "filename": "haproxyadmin-0.2.1.tar.gz", "has_sig": true, "md5_digest": "7d63931b0f0ecbebcb22c60a663d45d6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 55275, "upload_time": "2016-04-11T12:38:49", "upload_time_iso_8601": "2016-04-11T12:38:49.981858Z", "url": "https://files.pythonhosted.org/packages/f4/0b/92e53fd58820f9b2daf2a27d952f2a74d1a118c81c31f21270e94c69ed01/haproxyadmin-0.2.1.tar.gz", "yanked": false}], "0.2.2": [{"comment_text": "", "digests": {"md5": "b240ec1be1deb33bd1d8358976cf5879", "sha256": "6ca3158d50af87f59449c2bd2d9ece19d3c358326bc3fd09c0114cd537e2f46b"}, "downloads": -1, "filename": "haproxyadmin-0.2.2.tar.gz", "has_sig": false, "md5_digest": "b240ec1be1deb33bd1d8358976cf5879", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 55461, "upload_time": "2019-04-11T14:53:00", "upload_time_iso_8601": "2019-04-11T14:53:00.269549Z", "url": "https://files.pythonhosted.org/packages/12/43/75b6c063ab78b5349b0faaa3c2f4c7728d2a6af4830ee4a34fada1ae69ed/haproxyadmin-0.2.2.tar.gz", "yanked": false}], "0.2.3": [{"comment_text": "", "digests": {"md5": "63a39593f41b65db01da4c326ef169ff", "sha256": "df8db892c49aa0ad8cd552736cc762571b0915bdc5ae2a15f60789498724c435"}, "downloads": -1, "filename": "haproxyadmin-0.2.3.tar.gz", "has_sig": false, "md5_digest": "63a39593f41b65db01da4c326ef169ff", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 57435, "upload_time": "2020-04-13T12:57:04", "upload_time_iso_8601": "2020-04-13T12:57:04.726009Z", "url": "https://files.pythonhosted.org/packages/5c/88/f679a2b6327feda0570046fa02212c829456e114c6a212535e652399ded6/haproxyadmin-0.2.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "63a39593f41b65db01da4c326ef169ff", "sha256": "df8db892c49aa0ad8cd552736cc762571b0915bdc5ae2a15f60789498724c435"}, "downloads": -1, "filename": "haproxyadmin-0.2.3.tar.gz", "has_sig": false, "md5_digest": "63a39593f41b65db01da4c326ef169ff", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 57435, "upload_time": "2020-04-13T12:57:04", "upload_time_iso_8601": "2020-04-13T12:57:04.726009Z", "url": "https://files.pythonhosted.org/packages/5c/88/f679a2b6327feda0570046fa02212c829456e114c6a212535e652399ded6/haproxyadmin-0.2.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:52:29 2020"}