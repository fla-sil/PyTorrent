{"info": {"author": "David Winslow, Sebastian Benthall", "author_email": "hfutsrx@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "Intended Audience :: Science/Research", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Topic :: Scientific/Engineering :: GIS"], "description": "gsconfig\n========\n\n.. image:: https://travis-ci.org/boundlessgeo/gsconfig.svg?branch=master\n    :target: https://travis-ci.org/boundlessgeo/gsconfig\n\ngsconfig is a python library for manipulating a GeoServer instance via the GeoServer RESTConfig API. \n\nThe project is distributed under a `MIT License <LICENSE.txt>`_ .\n\nInstalling\n==========\n\n.. code-block:: shell\n\n    pip install gsconfig\n\nFor developers:\n\n.. code-block:: shell\n\n    git clone git@github.com:boundlessgeo/gsconfig.git\n    cd gsconfig\n    python setup.py develop\n\nGetting Help\n============\nThere is a brief manual at http://boundlessgeo.github.io/gsconfig/ .\nIf you have questions, please ask them on the GeoServer Users mailing list: http://geoserver.org/comm/ .\n\nPlease use the Github project at http://github.com/boundlessgeo/gsconfig for any bug reports (and pull requests are welcome, but please include tests where possible.)\n\nSample Layer Creation Code\n==========================\n\n.. code-block:: python\n\n    from geoserver.catalog import Catalog\n    cat = Catalog(\"http://localhost:8080/geoserver/\")\n    topp = cat.get_workspace(\"topp\")\n    shapefile_plus_sidecars = shapefile_and_friends(\"states\")\n    # shapefile_and_friends should look on the filesystem to find a shapefile\n    # and related files based on the base path passed in\n    #\n    # shapefile_plus_sidecars == {\n    #    'shp': 'states.shp',\n    #    'shx': 'states.shx',\n    #    'prj': 'states.prj',\n    #    'dbf': 'states.dbf'\n    # }\n    \n    # 'data' is required (there may be a 'schema' alternative later, for creating empty featuretypes)\n    # 'workspace' is optional (GeoServer's default workspace is used by... default)\n    # 'name' is required\n    ft = cat.create_featurestore(name, workspace=topp, data=shapefile_plus_sidecars)\n\nRunning Tests\n=============\n\nSince the entire purpose of this module is to interact with GeoServer, the test suite is mostly composed of `integration tests <http://en.wikipedia.org/wiki/Integration_testing>`_.  \nThese tests necessarily rely on a running copy of GeoServer, and expect that this GeoServer instance will be using the default data directory that is included with GeoServer.\nThis data is also included in the GeoServer source repository as ``/data/release/``.\nIn addition, it is expected that there will be a postgres database available at ``postgres:password@localhost:5432/db``.\nYou can test connecting to this database with the ``psql`` command line client by running ``$ psql -d db -Upostgres -h localhost -p 5432`` (you will be prompted interactively for the password.)\n\nTo override the assumed database connection parameters, the following environment variables are supported:\n\n- DATABASE\n- DBUSER\n- DBPASS\n\nIf present, psycopg will be used to verify the database connection prior to running the tests.\n\nIf provided, the following environment variables will be used to reset the data directory:\n\nGEOSERVER_HOME\n    Location of git repository to read the clean data from. If only this option is provided\n    `git clean` will be used to reset the data.\nGEOSERVER_DATA_DIR\n    Optional location of the data dir geoserver will be running with. If provided, `rsync`\n    will be used to reset the data.\nGS_VERSION\n    Optional environment variable allowing the catalog test cases to automatically download\n    and start a vanilla GeoServer WAR form the web.\n    Be sure that there are no running services on HTTP port 8080.\n\nHere are the commands that I use to reset before running the gsconfig tests:\n\n.. code-block:: shell\n\n    $ cd ~/geoserver/src/web/app/\n    $ PGUSER=postgres dropdb db\n    $ PGUSER=postgres createdb db -T template_postgis\n    $ git clean -dxff -- ../../../data/release/\n    $ git checkout -f\n    $ MAVEN_OPTS=\"-XX:PermSize=128M -Xmx1024M\" \\\n    GEOSERVER_DATA_DIR=../../../data/release \\\n    mvn jetty:run\n\nAt this point, GeoServer will be running foregrounded, but it will take a few seconds to actually begin listening for http requests.\nYou can stop it with ``CTRL-C`` (but don't do that until you've run the tests!)\nYou can run the gsconfig tests with the following command:\n\n.. code-block:: shell\n\n    $ python setup.py test\n\nInstead of restarting GeoServer after each run to reset the data, the following should allow re-running the tests:\n\n.. code-block:: shell\n\n    $ git clean -dxff -- ../../../data/release/\n    $ curl -XPOST --user admin:geoserver http://localhost:8080/geoserver/rest/reload\n\nMore Examples - Updated for GeoServer 2.4+\n==========================================\n\nLoading the GeoServer ``catalog`` using ``gsconfig`` is quite easy. The example below allows you to connect to GeoServer by specifying custom credentials.\n\n.. code-block:: python\n\n    from geoserver.catalog import Catalog\n    cat = Catalog(\"http://localhost:8080/geoserver/rest/\", \"admin\", \"geoserver\")\n\nThe code below allows you to create a FeatureType from a Shapefile\n\n.. code-block:: python\n\n    geosolutions = cat.get_workspace(\"geosolutions\")\n    import geoserver.util\n    shapefile_plus_sidecars = geoserver.util.shapefile_and_friends(\"C:/work/gsconfig/test/data/states\")\n    # shapefile_and_friends should look on the filesystem to find a shapefile\n    # and related files based on the base path passed in\n    #\n    # shapefile_plus_sidecars == {\n    #    'shp': 'states.shp',\n    #    'shx': 'states.shx',\n    #    'prj': 'states.prj',\n    #    'dbf': 'states.dbf'\n    # }\n    # 'data' is required (there may be a 'schema' alternative later, for creating empty featuretypes)\n    # 'workspace' is optional (GeoServer's default workspace is used by... default)\n    # 'name' is required\n    ft = cat.create_featurestore(\"test\", shapefile_plus_sidecars, geosolutions)\n\nIt is possible to create JDBC Virtual Layers too. The code below allow to create a new SQL View called ``my_jdbc_vt_test`` defined by a custom ``sql``.\n\n.. code-block:: python\n\n    from geoserver.catalog import Catalog\n    from geoserver.support import JDBCVirtualTable, JDBCVirtualTableGeometry, JDBCVirtualTableParam\n\n    cat = Catalog('http://localhost:8080/geoserver/rest/', 'admin', '****')\n    store = cat.get_store('postgis-geoserver')\n    geom = JDBCVirtualTableGeometry('newgeom','LineString','4326')\n    ft_name = 'my_jdbc_vt_test'\n    epsg_code = 'EPSG:4326'\n    sql = 'select ST_MakeLine(wkb_geometry ORDER BY waypoint) As newgeom, assetid, runtime from waypoints group by assetid,runtime'\n    keyColumn = None\n    parameters = None\n\n    jdbc_vt = JDBCVirtualTable(ft_name, sql, 'false', geom, keyColumn, parameters)\n    ft = cat.publish_featuretype(ft_name, store, epsg_code, jdbc_virtual_table=jdbc_vt)\n    \nThis example shows how to easily update a ``layer`` property. The same approach may be used with every ``catalog`` resource\n\n.. code-block:: python\n\n    ne_shaded = cat.get_layer(\"ne_shaded\")\n    ne_shaded.enabled=True\n    cat.save(ne_shaded)\n    cat.reload()\n\nDeleting a ``store`` from the ``catalog`` requires to purge all the associated ``layers`` first. This can be done by doing something like this:\n\n.. code-block:: python\n\n    st = cat.get_store(\"ne_shaded\")\n    cat.delete(ne_shaded)\n    cat.reload()\n    cat.delete(st)\n    cat.reload()\n\nThere are some functionalities allowing to manage the ``ImageMosaic`` coverages. It is possible to create new ImageMosaics, add granules to them,\nand also read the coverages metadata, modify the mosaic ``Dimensions`` and finally query the mosaic ``granules`` and list their properties.\n\nThe gsconfig methods map the `REST APIs for ImageMosaic <http://docs.geoserver.org/stable/en/user/rest/examples/curl.html#uploading-and-modifying-a-image-mosaic>`_\n\nIn order to create a new ImageMosaic layer, you can prepare a zip file containing the properties files for the mosaic configuration. Refer to the GeoTools ImageMosaic Plugin guide\nin order to get details on the mosaic configuration. The package contains an already configured zip file with two granules.\nYou need to update or remove the ``datastore.properties`` file before creating the mosaic otherwise you will get an exception.\n\n.. code-block:: python\n\n    from geoserver.catalog import Catalog\n    cat = Catalog(\"http://localhost:8180/geoserver/rest\")\n    cat.create_imagemosaic(\"NOAAWW3_NCOMultiGrid_WIND_test\", \"NOAAWW3_NCOMultiGrid_WIND_test.zip\")\n\nBy defualt the ``cat.create_imagemosaic`` tries to configure the layer too. If you want to create the store only, you can specify the following parameter\n\n.. code-block:: python\n\n    cat.create_imagemosaic(\"NOAAWW3_NCOMultiGrid_WIND_test\", \"NOAAWW3_NCOMultiGrid_WIND_test.zip\", \"none\")\n\nIn order to retrieve from the catalog the ImageMosaic coverage store you can do this\n\n.. code-block:: python\n\n    store = cat.get_store(\"NOAAWW3_NCOMultiGrid_WIND_test\")\n\nIt is possible to add more granules to the mosaic at runtime.\nWith the following method you can add granules already present on the machine local path.\n\n.. code-block:: python\n\n    cat.harvest_externalgranule(\"file://D:/Work/apache-tomcat-6.0.16/instances/data/data/MetOc/NOAAWW3/20131001/WIND/NOAAWW3_NCOMultiGrid__WIND_000_20131001T000000.tif\", store)\n\nThe method below allows to send granules remotely via POST to the ImageMosaic.\nThe granules will be uploaded and stored on the ImageMosaic index folder.\n\n.. code-block:: python\n\n    cat.harvest_uploadgranule(\"NOAAWW3_NCOMultiGrid__WIND_000_20131002T000000.zip\", store)\n\nTo delete an ImageMosaic store, you can follow the standard approach, by deleting the layers first.\n*ATTENTION*: at this time you need to manually cleanup the data dir from the mosaic granules and, in case you used a DB datastore, you must also drop the mosaic tables.\n\n.. code-block:: python\n\n    layer = cat.get_layer(\"NOAAWW3_NCOMultiGrid_WIND_test\")\n    cat.delete(layer)\n    cat.reload()\n    cat.delete(store)\n    cat.reload()\n\nThe method below allows you the load and update the coverage metadata of the ImageMosaic.\nYou need to do this for every coverage of the ImageMosaic of course.\n\n.. code-block:: python\n\n    coverage = cat.get_resource_by_url(\"http://localhost:8180/geoserver/rest/workspaces/natocmre/coveragestores/NOAAWW3_NCOMultiGrid_WIND_test/coverages/NOAAWW3_NCOMultiGrid_WIND_test.xml\")\n    coverage.supported_formats = ['GEOTIFF']\n    cat.save(coverage)\n\nBy default the ImageMosaic layer has not the coverage dimensions configured. It is possible using the coverage metadata to update and manage the coverage dimensions.\n*ATTENTION*: notice that the ``presentation`` parameters accepts only one among the following values {'LIST', 'DISCRETE_INTERVAL', 'CONTINUOUS_INTERVAL'}\n\n.. code-block:: python\n\n    from geoserver.support import DimensionInfo\n    timeInfo = DimensionInfo(\"time\", \"true\", \"LIST\", None, \"ISO8601\", None)\n    coverage.metadata = ({'dirName':'NOAAWW3_NCOMultiGrid_WIND_test_NOAAWW3_NCOMultiGrid_WIND_test', 'time': timeInfo})\n    cat.save(coverage)\n\nOne the ImageMosaic has been configures, it is possible to read the coverages along with their granule schema and granule info.\n\n.. code-block:: python\n\n    from geoserver.catalog import Catalog\n    cat = Catalog(\"http://localhost:8180/geoserver/rest\")\n    store = cat.get_store(\"NOAAWW3_NCOMultiGrid_WIND_test\")\n    coverages = cat.mosaic_coverages(store)\n    schema = cat.mosaic_coverage_schema(coverages['coverages']['coverage'][0]['name'], store)\n    granules = cat.mosaic_granules(coverages['coverages']['coverage'][0]['name'], store)\n\nThe granules details can be easily read by doing something like this:\n\n.. code-block:: python\n\n    granules['crs']['properties']['name']\n    granules['features']\n    granules['features'][0]['properties']['time']\n    granules['features'][0]['properties']['location']\n    granules['features'][0]['properties']['run']\n\nWhen the mosaic grows up and starts having a huge set of granules, you may need to filter the granules query through a CQL filter on the coverage schema attributes.\n\n.. code-block:: python\n\n    granules = cat.mosaic_granules(coverages['coverages']['coverage'][0]['name'], store, \"time >= '2013-10-01T03:00:00.000Z'\")\n    granules = cat.mosaic_granules(coverages['coverages']['coverage'][0]['name'], store, \"time >= '2013-10-01T03:00:00.000Z' AND run = 0\")\n    granules = cat.mosaic_granules(coverages['coverages']['coverage'][0]['name'], store, \"location LIKE '%20131002T000000.tif'\")", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/surongxiang/gsconfig", "keywords": "GeoServer REST Configuration", "license": "MIT", "maintainer": null, "maintainer_email": null, "name": "airwing_autopublish", "package_url": "https://pypi.org/project/airwing_autopublish/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/airwing_autopublish/", "project_urls": {"Download": "UNKNOWN", "Homepage": "https://github.com/surongxiang/gsconfig"}, "release_url": "https://pypi.org/project/airwing_autopublish/1.0.5/", "requires_dist": null, "requires_python": null, "summary": "GeoServer REST Configuration", "version": "1.0.5", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"gsconfig\">\n<h2>gsconfig</h2>\n<a href=\"https://travis-ci.org/boundlessgeo/gsconfig\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/boundlessgeo/gsconfig.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/cf7b3f7b09f56b0ce919c6f37278ef6b022db03d/68747470733a2f2f7472617669732d63692e6f72672f626f756e646c65737367656f2f6773636f6e6669672e7376673f6272616e63683d6d6173746572\"></a>\n<p>gsconfig is a python library for manipulating a GeoServer instance via the GeoServer RESTConfig API.</p>\n<p>The project is distributed under a <a href=\"LICENSE.txt\" rel=\"nofollow\">MIT License</a> .</p>\n</div>\n<div id=\"installing\">\n<h2>Installing</h2>\n<pre>pip install gsconfig\n</pre>\n<p>For developers:</p>\n<pre>git clone git@github.com:boundlessgeo/gsconfig.git\n<span class=\"nb\">cd</span> gsconfig\npython setup.py develop\n</pre>\n</div>\n<div id=\"getting-help\">\n<h2>Getting Help</h2>\n<p>There is a brief manual at <a href=\"http://boundlessgeo.github.io/gsconfig/\" rel=\"nofollow\">http://boundlessgeo.github.io/gsconfig/</a> .\nIf you have questions, please ask them on the GeoServer Users mailing list: <a href=\"http://geoserver.org/comm/\" rel=\"nofollow\">http://geoserver.org/comm/</a> .</p>\n<p>Please use the Github project at <a href=\"http://github.com/boundlessgeo/gsconfig\" rel=\"nofollow\">http://github.com/boundlessgeo/gsconfig</a> for any bug reports (and pull requests are welcome, but please include tests where possible.)</p>\n</div>\n<div id=\"sample-layer-creation-code\">\n<h2>Sample Layer Creation Code</h2>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">geoserver.catalog</span> <span class=\"kn\">import</span> <span class=\"n\">Catalog</span>\n<span class=\"n\">cat</span> <span class=\"o\">=</span> <span class=\"n\">Catalog</span><span class=\"p\">(</span><span class=\"s2\">\"http://localhost:8080/geoserver/\"</span><span class=\"p\">)</span>\n<span class=\"n\">topp</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">get_workspace</span><span class=\"p\">(</span><span class=\"s2\">\"topp\"</span><span class=\"p\">)</span>\n<span class=\"n\">shapefile_plus_sidecars</span> <span class=\"o\">=</span> <span class=\"n\">shapefile_and_friends</span><span class=\"p\">(</span><span class=\"s2\">\"states\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># shapefile_and_friends should look on the filesystem to find a shapefile</span>\n<span class=\"c1\"># and related files based on the base path passed in</span>\n<span class=\"c1\">#</span>\n<span class=\"c1\"># shapefile_plus_sidecars == {</span>\n<span class=\"c1\">#    'shp': 'states.shp',</span>\n<span class=\"c1\">#    'shx': 'states.shx',</span>\n<span class=\"c1\">#    'prj': 'states.prj',</span>\n<span class=\"c1\">#    'dbf': 'states.dbf'</span>\n<span class=\"c1\"># }</span>\n\n<span class=\"c1\"># 'data' is required (there may be a 'schema' alternative later, for creating empty featuretypes)</span>\n<span class=\"c1\"># 'workspace' is optional (GeoServer's default workspace is used by... default)</span>\n<span class=\"c1\"># 'name' is required</span>\n<span class=\"n\">ft</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">create_featurestore</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">workspace</span><span class=\"o\">=</span><span class=\"n\">topp</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">shapefile_plus_sidecars</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"running-tests\">\n<h2>Running Tests</h2>\n<p>Since the entire purpose of this module is to interact with GeoServer, the test suite is mostly composed of <a href=\"http://en.wikipedia.org/wiki/Integration_testing\" rel=\"nofollow\">integration tests</a>.\nThese tests necessarily rely on a running copy of GeoServer, and expect that this GeoServer instance will be using the default data directory that is included with GeoServer.\nThis data is also included in the GeoServer source repository as <tt>/data/release/</tt>.\nIn addition, it is expected that there will be a postgres database available at <tt>postgres:password@localhost:5432/db</tt>.\nYou can test connecting to this database with the <tt>psql</tt> command line client by running <tt>$ psql <span class=\"pre\">-d</span> db <span class=\"pre\">-Upostgres</span> <span class=\"pre\">-h</span> localhost <span class=\"pre\">-p</span> 5432</tt> (you will be prompted interactively for the password.)</p>\n<p>To override the assumed database connection parameters, the following environment variables are supported:</p>\n<ul>\n<li>DATABASE</li>\n<li>DBUSER</li>\n<li>DBPASS</li>\n</ul>\n<p>If present, psycopg will be used to verify the database connection prior to running the tests.</p>\n<p>If provided, the following environment variables will be used to reset the data directory:</p>\n<dl>\n<dt>GEOSERVER_HOME</dt>\n<dd>Location of git repository to read the clean data from. If only this option is provided\n<cite>git clean</cite> will be used to reset the data.</dd>\n<dt>GEOSERVER_DATA_DIR</dt>\n<dd>Optional location of the data dir geoserver will be running with. If provided, <cite>rsync</cite>\nwill be used to reset the data.</dd>\n<dt>GS_VERSION</dt>\n<dd>Optional environment variable allowing the catalog test cases to automatically download\nand start a vanilla GeoServer WAR form the web.\nBe sure that there are no running services on HTTP port 8080.</dd>\n</dl>\n<p>Here are the commands that I use to reset before running the gsconfig tests:</p>\n<pre>$ <span class=\"nb\">cd</span> ~/geoserver/src/web/app/\n$ <span class=\"nv\">PGUSER</span><span class=\"o\">=</span>postgres dropdb db\n$ <span class=\"nv\">PGUSER</span><span class=\"o\">=</span>postgres createdb db -T template_postgis\n$ git clean -dxff -- ../../../data/release/\n$ git checkout -f\n$ <span class=\"nv\">MAVEN_OPTS</span><span class=\"o\">=</span><span class=\"s2\">\"-XX:PermSize=128M -Xmx1024M\"</span> <span class=\"se\">\\\n</span><span class=\"nv\">GEOSERVER_DATA_DIR</span><span class=\"o\">=</span>../../../data/release <span class=\"se\">\\\n</span>mvn jetty:run\n</pre>\n<p>At this point, GeoServer will be running foregrounded, but it will take a few seconds to actually begin listening for http requests.\nYou can stop it with <tt><span class=\"pre\">CTRL-C</span></tt> (but don\u2019t do that until you\u2019ve run the tests!)\nYou can run the gsconfig tests with the following command:</p>\n<pre>$ python setup.py <span class=\"nb\">test</span>\n</pre>\n<p>Instead of restarting GeoServer after each run to reset the data, the following should allow re-running the tests:</p>\n<pre>$ git clean -dxff -- ../../../data/release/\n$ curl -XPOST --user admin:geoserver http://localhost:8080/geoserver/rest/reload\n</pre>\n</div>\n<div id=\"more-examples-updated-for-geoserver-2-4\">\n<h2>More Examples - Updated for GeoServer 2.4+</h2>\n<p>Loading the GeoServer <tt>catalog</tt> using <tt>gsconfig</tt> is quite easy. The example below allows you to connect to GeoServer by specifying custom credentials.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">geoserver.catalog</span> <span class=\"kn\">import</span> <span class=\"n\">Catalog</span>\n<span class=\"n\">cat</span> <span class=\"o\">=</span> <span class=\"n\">Catalog</span><span class=\"p\">(</span><span class=\"s2\">\"http://localhost:8080/geoserver/rest/\"</span><span class=\"p\">,</span> <span class=\"s2\">\"admin\"</span><span class=\"p\">,</span> <span class=\"s2\">\"geoserver\"</span><span class=\"p\">)</span>\n</pre>\n<p>The code below allows you to create a FeatureType from a Shapefile</p>\n<pre><span class=\"n\">geosolutions</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">get_workspace</span><span class=\"p\">(</span><span class=\"s2\">\"geosolutions\"</span><span class=\"p\">)</span>\n<span class=\"kn\">import</span> <span class=\"nn\">geoserver.util</span>\n<span class=\"n\">shapefile_plus_sidecars</span> <span class=\"o\">=</span> <span class=\"n\">geoserver</span><span class=\"o\">.</span><span class=\"n\">util</span><span class=\"o\">.</span><span class=\"n\">shapefile_and_friends</span><span class=\"p\">(</span><span class=\"s2\">\"C:/work/gsconfig/test/data/states\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># shapefile_and_friends should look on the filesystem to find a shapefile</span>\n<span class=\"c1\"># and related files based on the base path passed in</span>\n<span class=\"c1\">#</span>\n<span class=\"c1\"># shapefile_plus_sidecars == {</span>\n<span class=\"c1\">#    'shp': 'states.shp',</span>\n<span class=\"c1\">#    'shx': 'states.shx',</span>\n<span class=\"c1\">#    'prj': 'states.prj',</span>\n<span class=\"c1\">#    'dbf': 'states.dbf'</span>\n<span class=\"c1\"># }</span>\n<span class=\"c1\"># 'data' is required (there may be a 'schema' alternative later, for creating empty featuretypes)</span>\n<span class=\"c1\"># 'workspace' is optional (GeoServer's default workspace is used by... default)</span>\n<span class=\"c1\"># 'name' is required</span>\n<span class=\"n\">ft</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">create_featurestore</span><span class=\"p\">(</span><span class=\"s2\">\"test\"</span><span class=\"p\">,</span> <span class=\"n\">shapefile_plus_sidecars</span><span class=\"p\">,</span> <span class=\"n\">geosolutions</span><span class=\"p\">)</span>\n</pre>\n<p>It is possible to create JDBC Virtual Layers too. The code below allow to create a new SQL View called <tt>my_jdbc_vt_test</tt> defined by a custom <tt>sql</tt>.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">geoserver.catalog</span> <span class=\"kn\">import</span> <span class=\"n\">Catalog</span>\n<span class=\"kn\">from</span> <span class=\"nn\">geoserver.support</span> <span class=\"kn\">import</span> <span class=\"n\">JDBCVirtualTable</span><span class=\"p\">,</span> <span class=\"n\">JDBCVirtualTableGeometry</span><span class=\"p\">,</span> <span class=\"n\">JDBCVirtualTableParam</span>\n\n<span class=\"n\">cat</span> <span class=\"o\">=</span> <span class=\"n\">Catalog</span><span class=\"p\">(</span><span class=\"s1\">'http://localhost:8080/geoserver/rest/'</span><span class=\"p\">,</span> <span class=\"s1\">'admin'</span><span class=\"p\">,</span> <span class=\"s1\">'****'</span><span class=\"p\">)</span>\n<span class=\"n\">store</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">get_store</span><span class=\"p\">(</span><span class=\"s1\">'postgis-geoserver'</span><span class=\"p\">)</span>\n<span class=\"n\">geom</span> <span class=\"o\">=</span> <span class=\"n\">JDBCVirtualTableGeometry</span><span class=\"p\">(</span><span class=\"s1\">'newgeom'</span><span class=\"p\">,</span><span class=\"s1\">'LineString'</span><span class=\"p\">,</span><span class=\"s1\">'4326'</span><span class=\"p\">)</span>\n<span class=\"n\">ft_name</span> <span class=\"o\">=</span> <span class=\"s1\">'my_jdbc_vt_test'</span>\n<span class=\"n\">epsg_code</span> <span class=\"o\">=</span> <span class=\"s1\">'EPSG:4326'</span>\n<span class=\"n\">sql</span> <span class=\"o\">=</span> <span class=\"s1\">'select ST_MakeLine(wkb_geometry ORDER BY waypoint) As newgeom, assetid, runtime from waypoints group by assetid,runtime'</span>\n<span class=\"n\">keyColumn</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"n\">parameters</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n\n<span class=\"n\">jdbc_vt</span> <span class=\"o\">=</span> <span class=\"n\">JDBCVirtualTable</span><span class=\"p\">(</span><span class=\"n\">ft_name</span><span class=\"p\">,</span> <span class=\"n\">sql</span><span class=\"p\">,</span> <span class=\"s1\">'false'</span><span class=\"p\">,</span> <span class=\"n\">geom</span><span class=\"p\">,</span> <span class=\"n\">keyColumn</span><span class=\"p\">,</span> <span class=\"n\">parameters</span><span class=\"p\">)</span>\n<span class=\"n\">ft</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">publish_featuretype</span><span class=\"p\">(</span><span class=\"n\">ft_name</span><span class=\"p\">,</span> <span class=\"n\">store</span><span class=\"p\">,</span> <span class=\"n\">epsg_code</span><span class=\"p\">,</span> <span class=\"n\">jdbc_virtual_table</span><span class=\"o\">=</span><span class=\"n\">jdbc_vt</span><span class=\"p\">)</span>\n</pre>\n<p>This example shows how to easily update a <tt>layer</tt> property. The same approach may be used with every <tt>catalog</tt> resource</p>\n<pre><span class=\"n\">ne_shaded</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">get_layer</span><span class=\"p\">(</span><span class=\"s2\">\"ne_shaded\"</span><span class=\"p\">)</span>\n<span class=\"n\">ne_shaded</span><span class=\"o\">.</span><span class=\"n\">enabled</span><span class=\"o\">=</span><span class=\"kc\">True</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"n\">ne_shaded</span><span class=\"p\">)</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">reload</span><span class=\"p\">()</span>\n</pre>\n<p>Deleting a <tt>store</tt> from the <tt>catalog</tt> requires to purge all the associated <tt>layers</tt> first. This can be done by doing something like this:</p>\n<pre><span class=\"n\">st</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">get_store</span><span class=\"p\">(</span><span class=\"s2\">\"ne_shaded\"</span><span class=\"p\">)</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"n\">ne_shaded</span><span class=\"p\">)</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">reload</span><span class=\"p\">()</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"n\">st</span><span class=\"p\">)</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">reload</span><span class=\"p\">()</span>\n</pre>\n<p>There are some functionalities allowing to manage the <tt>ImageMosaic</tt> coverages. It is possible to create new ImageMosaics, add granules to them,\nand also read the coverages metadata, modify the mosaic <tt>Dimensions</tt> and finally query the mosaic <tt>granules</tt> and list their properties.</p>\n<p>The gsconfig methods map the <a href=\"http://docs.geoserver.org/stable/en/user/rest/examples/curl.html#uploading-and-modifying-a-image-mosaic\" rel=\"nofollow\">REST APIs for ImageMosaic</a></p>\n<p>In order to create a new ImageMosaic layer, you can prepare a zip file containing the properties files for the mosaic configuration. Refer to the GeoTools ImageMosaic Plugin guide\nin order to get details on the mosaic configuration. The package contains an already configured zip file with two granules.\nYou need to update or remove the <tt>datastore.properties</tt> file before creating the mosaic otherwise you will get an exception.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">geoserver.catalog</span> <span class=\"kn\">import</span> <span class=\"n\">Catalog</span>\n<span class=\"n\">cat</span> <span class=\"o\">=</span> <span class=\"n\">Catalog</span><span class=\"p\">(</span><span class=\"s2\">\"http://localhost:8180/geoserver/rest\"</span><span class=\"p\">)</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">create_imagemosaic</span><span class=\"p\">(</span><span class=\"s2\">\"NOAAWW3_NCOMultiGrid_WIND_test\"</span><span class=\"p\">,</span> <span class=\"s2\">\"NOAAWW3_NCOMultiGrid_WIND_test.zip\"</span><span class=\"p\">)</span>\n</pre>\n<p>By defualt the <tt>cat.create_imagemosaic</tt> tries to configure the layer too. If you want to create the store only, you can specify the following parameter</p>\n<pre><span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">create_imagemosaic</span><span class=\"p\">(</span><span class=\"s2\">\"NOAAWW3_NCOMultiGrid_WIND_test\"</span><span class=\"p\">,</span> <span class=\"s2\">\"NOAAWW3_NCOMultiGrid_WIND_test.zip\"</span><span class=\"p\">,</span> <span class=\"s2\">\"none\"</span><span class=\"p\">)</span>\n</pre>\n<p>In order to retrieve from the catalog the ImageMosaic coverage store you can do this</p>\n<pre><span class=\"n\">store</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">get_store</span><span class=\"p\">(</span><span class=\"s2\">\"NOAAWW3_NCOMultiGrid_WIND_test\"</span><span class=\"p\">)</span>\n</pre>\n<p>It is possible to add more granules to the mosaic at runtime.\nWith the following method you can add granules already present on the machine local path.</p>\n<pre><span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">harvest_externalgranule</span><span class=\"p\">(</span><span class=\"s2\">\"file://D:/Work/apache-tomcat-6.0.16/instances/data/data/MetOc/NOAAWW3/20131001/WIND/NOAAWW3_NCOMultiGrid__WIND_000_20131001T000000.tif\"</span><span class=\"p\">,</span> <span class=\"n\">store</span><span class=\"p\">)</span>\n</pre>\n<p>The method below allows to send granules remotely via POST to the ImageMosaic.\nThe granules will be uploaded and stored on the ImageMosaic index folder.</p>\n<pre><span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">harvest_uploadgranule</span><span class=\"p\">(</span><span class=\"s2\">\"NOAAWW3_NCOMultiGrid__WIND_000_20131002T000000.zip\"</span><span class=\"p\">,</span> <span class=\"n\">store</span><span class=\"p\">)</span>\n</pre>\n<p>To delete an ImageMosaic store, you can follow the standard approach, by deleting the layers first.\n<em>ATTENTION</em>: at this time you need to manually cleanup the data dir from the mosaic granules and, in case you used a DB datastore, you must also drop the mosaic tables.</p>\n<pre><span class=\"n\">layer</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">get_layer</span><span class=\"p\">(</span><span class=\"s2\">\"NOAAWW3_NCOMultiGrid_WIND_test\"</span><span class=\"p\">)</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"n\">layer</span><span class=\"p\">)</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">reload</span><span class=\"p\">()</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"n\">store</span><span class=\"p\">)</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">reload</span><span class=\"p\">()</span>\n</pre>\n<p>The method below allows you the load and update the coverage metadata of the ImageMosaic.\nYou need to do this for every coverage of the ImageMosaic of course.</p>\n<pre><span class=\"n\">coverage</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">get_resource_by_url</span><span class=\"p\">(</span><span class=\"s2\">\"http://localhost:8180/geoserver/rest/workspaces/natocmre/coveragestores/NOAAWW3_NCOMultiGrid_WIND_test/coverages/NOAAWW3_NCOMultiGrid_WIND_test.xml\"</span><span class=\"p\">)</span>\n<span class=\"n\">coverage</span><span class=\"o\">.</span><span class=\"n\">supported_formats</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'GEOTIFF'</span><span class=\"p\">]</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"n\">coverage</span><span class=\"p\">)</span>\n</pre>\n<p>By default the ImageMosaic layer has not the coverage dimensions configured. It is possible using the coverage metadata to update and manage the coverage dimensions.\n<em>ATTENTION</em>: notice that the <tt>presentation</tt> parameters accepts only one among the following values {\u2018LIST\u2019, \u2018DISCRETE_INTERVAL\u2019, \u2018CONTINUOUS_INTERVAL\u2019}</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">geoserver.support</span> <span class=\"kn\">import</span> <span class=\"n\">DimensionInfo</span>\n<span class=\"n\">timeInfo</span> <span class=\"o\">=</span> <span class=\"n\">DimensionInfo</span><span class=\"p\">(</span><span class=\"s2\">\"time\"</span><span class=\"p\">,</span> <span class=\"s2\">\"true\"</span><span class=\"p\">,</span> <span class=\"s2\">\"LIST\"</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"s2\">\"ISO8601\"</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"n\">coverage</span><span class=\"o\">.</span><span class=\"n\">metadata</span> <span class=\"o\">=</span> <span class=\"p\">({</span><span class=\"s1\">'dirName'</span><span class=\"p\">:</span><span class=\"s1\">'NOAAWW3_NCOMultiGrid_WIND_test_NOAAWW3_NCOMultiGrid_WIND_test'</span><span class=\"p\">,</span> <span class=\"s1\">'time'</span><span class=\"p\">:</span> <span class=\"n\">timeInfo</span><span class=\"p\">})</span>\n<span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"n\">coverage</span><span class=\"p\">)</span>\n</pre>\n<p>One the ImageMosaic has been configures, it is possible to read the coverages along with their granule schema and granule info.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">geoserver.catalog</span> <span class=\"kn\">import</span> <span class=\"n\">Catalog</span>\n<span class=\"n\">cat</span> <span class=\"o\">=</span> <span class=\"n\">Catalog</span><span class=\"p\">(</span><span class=\"s2\">\"http://localhost:8180/geoserver/rest\"</span><span class=\"p\">)</span>\n<span class=\"n\">store</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">get_store</span><span class=\"p\">(</span><span class=\"s2\">\"NOAAWW3_NCOMultiGrid_WIND_test\"</span><span class=\"p\">)</span>\n<span class=\"n\">coverages</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">mosaic_coverages</span><span class=\"p\">(</span><span class=\"n\">store</span><span class=\"p\">)</span>\n<span class=\"n\">schema</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">mosaic_coverage_schema</span><span class=\"p\">(</span><span class=\"n\">coverages</span><span class=\"p\">[</span><span class=\"s1\">'coverages'</span><span class=\"p\">][</span><span class=\"s1\">'coverage'</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'name'</span><span class=\"p\">],</span> <span class=\"n\">store</span><span class=\"p\">)</span>\n<span class=\"n\">granules</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">mosaic_granules</span><span class=\"p\">(</span><span class=\"n\">coverages</span><span class=\"p\">[</span><span class=\"s1\">'coverages'</span><span class=\"p\">][</span><span class=\"s1\">'coverage'</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'name'</span><span class=\"p\">],</span> <span class=\"n\">store</span><span class=\"p\">)</span>\n</pre>\n<p>The granules details can be easily read by doing something like this:</p>\n<pre><span class=\"n\">granules</span><span class=\"p\">[</span><span class=\"s1\">'crs'</span><span class=\"p\">][</span><span class=\"s1\">'properties'</span><span class=\"p\">][</span><span class=\"s1\">'name'</span><span class=\"p\">]</span>\n<span class=\"n\">granules</span><span class=\"p\">[</span><span class=\"s1\">'features'</span><span class=\"p\">]</span>\n<span class=\"n\">granules</span><span class=\"p\">[</span><span class=\"s1\">'features'</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'properties'</span><span class=\"p\">][</span><span class=\"s1\">'time'</span><span class=\"p\">]</span>\n<span class=\"n\">granules</span><span class=\"p\">[</span><span class=\"s1\">'features'</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'properties'</span><span class=\"p\">][</span><span class=\"s1\">'location'</span><span class=\"p\">]</span>\n<span class=\"n\">granules</span><span class=\"p\">[</span><span class=\"s1\">'features'</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'properties'</span><span class=\"p\">][</span><span class=\"s1\">'run'</span><span class=\"p\">]</span>\n</pre>\n<p>When the mosaic grows up and starts having a huge set of granules, you may need to filter the granules query through a CQL filter on the coverage schema attributes.</p>\n<pre><span class=\"n\">granules</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">mosaic_granules</span><span class=\"p\">(</span><span class=\"n\">coverages</span><span class=\"p\">[</span><span class=\"s1\">'coverages'</span><span class=\"p\">][</span><span class=\"s1\">'coverage'</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'name'</span><span class=\"p\">],</span> <span class=\"n\">store</span><span class=\"p\">,</span> <span class=\"s2\">\"time &gt;= '2013-10-01T03:00:00.000Z'\"</span><span class=\"p\">)</span>\n<span class=\"n\">granules</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">mosaic_granules</span><span class=\"p\">(</span><span class=\"n\">coverages</span><span class=\"p\">[</span><span class=\"s1\">'coverages'</span><span class=\"p\">][</span><span class=\"s1\">'coverage'</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'name'</span><span class=\"p\">],</span> <span class=\"n\">store</span><span class=\"p\">,</span> <span class=\"s2\">\"time &gt;= '2013-10-01T03:00:00.000Z' AND run = 0\"</span><span class=\"p\">)</span>\n<span class=\"n\">granules</span> <span class=\"o\">=</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">mosaic_granules</span><span class=\"p\">(</span><span class=\"n\">coverages</span><span class=\"p\">[</span><span class=\"s1\">'coverages'</span><span class=\"p\">][</span><span class=\"s1\">'coverage'</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"s1\">'name'</span><span class=\"p\">],</span> <span class=\"n\">store</span><span class=\"p\">,</span> <span class=\"s2\">\"location LIKE '%20131002T000000.tif'\"</span><span class=\"p\">)</span>\n</pre>\n</div>\n\n          </div>"}, "last_serial": 1864370, "releases": {"1.0.2": [], "1.0.3": [{"comment_text": "", "digests": {"md5": "457e8e3140a552279d697c74cd2bfc7a", "sha256": "d7f2194735ec22fd5ac436a2340062b98476e54fdd84378ccbfb01037c971ad4"}, "downloads": -1, "filename": "airwing_autopublish-1.0.3.tar.gz", "has_sig": false, "md5_digest": "457e8e3140a552279d697c74cd2bfc7a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 25204, "upload_time": "2015-12-07T03:48:26", "upload_time_iso_8601": "2015-12-07T03:48:26.436588Z", "url": "https://files.pythonhosted.org/packages/5d/4b/2331fa1be7758dc92dd3db707b41d06a5cee07189bcd705dcbc44559ffd7/airwing_autopublish-1.0.3.tar.gz", "yanked": false}], "1.0.4": [{"comment_text": "", "digests": {"md5": "779cf3d80c903cc9ad1d6248e27a2da3", "sha256": "3159edba4e8205ff7be5ab67a920cb54e5b40dd97d752e24753d2b1df8244dcc"}, "downloads": -1, "filename": "airwing_autopublish-1.0.4.tar.gz", "has_sig": false, "md5_digest": "779cf3d80c903cc9ad1d6248e27a2da3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24725, "upload_time": "2015-12-16T02:32:38", "upload_time_iso_8601": "2015-12-16T02:32:38.748775Z", "url": "https://files.pythonhosted.org/packages/ac/00/92593156cc12a759dc3eefa5ad08f8541d1eafcbef12f746a4988f891ac6/airwing_autopublish-1.0.4.tar.gz", "yanked": false}], "1.0.5": [{"comment_text": "", "digests": {"md5": "86e568cb8b0e597ff98450da1f3828ff", "sha256": "9597d74d0fd38d2df7190f638de2de54d016a101d2f56bccabe661e6678ebd99"}, "downloads": -1, "filename": "airwing_autopublish-1.0.5.tar.gz", "has_sig": false, "md5_digest": "86e568cb8b0e597ff98450da1f3828ff", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24723, "upload_time": "2015-12-16T03:07:49", "upload_time_iso_8601": "2015-12-16T03:07:49.896747Z", "url": "https://files.pythonhosted.org/packages/81/dd/1cd0fabae1d5a41a2008f59acd741479ca7e3ad49d9946df112917e1f550/airwing_autopublish-1.0.5.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "86e568cb8b0e597ff98450da1f3828ff", "sha256": "9597d74d0fd38d2df7190f638de2de54d016a101d2f56bccabe661e6678ebd99"}, "downloads": -1, "filename": "airwing_autopublish-1.0.5.tar.gz", "has_sig": false, "md5_digest": "86e568cb8b0e597ff98450da1f3828ff", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 24723, "upload_time": "2015-12-16T03:07:49", "upload_time_iso_8601": "2015-12-16T03:07:49.896747Z", "url": "https://files.pythonhosted.org/packages/81/dd/1cd0fabae1d5a41a2008f59acd741479ca7e3ad49d9946df112917e1f550/airwing_autopublish-1.0.5.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:20:25 2020"}