{"info": {"author": "Sebastian Rittau", "author_email": "srittau@rittau.biz", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Environment :: Console", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Topic :: Database", "Topic :: Software Development"], "description": "# dbupgrade\n\nDatabase Migration Tool\n\n[![MIT License](https://img.shields.io/pypi/l/dbupgrade.svg)](https://pypi.python.org/pypi/dbupgrade/)\n[![GitHub](https://img.shields.io/github/release/srittau/dbupgrade/all.svg)](https://github.com/srittau/dbupgrade/releases/)\n[![pypi](https://img.shields.io/pypi/v/dbupgrade.svg)](https://pypi.python.org/pypi/dbupgrade/)\n[![Travis CI](https://travis-ci.org/srittau/dbupgrade.svg?branch=master)](https://travis-ci.org/srittau/dbupgrade)\n\nUsage: `dbupgrade [OPTIONS] [-l API_LEVEL|-L] DBNAME SCHEMA DIRECTORY`\n\nUpgrade the given `SCHEMA` in the database specified as `DBNAME` with SQL\nscripts from `DIRECTORY`. `DIRECTORY` is searched for all files with the\n`.sql` suffix. These files are SQL scripts with a special header sections:\n\n```sql\n-- Schema: my-db-schema\n-- Version: 25\n-- API-Level: 3\n-- Dialect: postgres\n\nCREATE TABLE ...\n```\n\nThe following headers are required:\n\n* **Schema**  \n    Name of the schema to update.\n* **Dialect**  \n    Database dialect of this script. Use SQLalchemy's database\n    URL scheme identifier, e.g. `postgres` or `sqlite`.\n* **Version**  \n    The new version of the schema after this script was applied.\n    It is an error if two scripts have the same schema, dialect, and version.\n* **API-Level**  \n    The new API level of the schema after this script was applied.\n    For a given schema, the API level of a subsequent version must either be\n    equal or higher by one than the API level of the preceding version. For\n    example, if script version 44 has API level 3, script version 45 must\n    have API level 3 or 4.\n* **Transaction** *(optional)*  \n    Possible values are `yes` (default) and `no`. When this\n    header is yes, all statements of a single upgrade file and the\n    corresponding version upgrade statements are executed within a single\n    transaction. Otherwise each statement is executed separately. The former\n    is usually preferable so that all changes will be rolled back if a\n    script fails to apply, but the latter is required in some cases.\n\nThe database must contain a table `db_config` with three columns: `schema`,\n`version`, and `api_level`. If this table does not exist, it is created.\nThis table must contain exactly one row for the given schema. If this row\ndoes not exist, it is created with version and api_level initially set to 0.\n\nThe current version and API level of the schema are requested from the\ndatabase and all scripts with a higher version number are applied, in order.\nIf there are any version numbers missing, the script will stop after the\nlast version before the missing version.\n\nUnless the `-l` or `-L` option is supplied, only scripts that do not\nincrease the API level will be applied. If the `-l` option is given, all\nscripts up to the given API level will be applied. `-L` will apply all\nscripts without regard to the API level.\n\nEach script is executed in a seperate transaction. If a script fails, all\nchanges in that script will be rolled back and the script will stop with\nan error message and a non-zero return status.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/srittau/dbupgrade", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "dbupgrade", "package_url": "https://pypi.org/project/dbupgrade/", "platform": "", "project_url": "https://pypi.org/project/dbupgrade/", "project_urls": {"Homepage": "https://github.com/srittau/dbupgrade"}, "release_url": "https://pypi.org/project/dbupgrade/2.0.1/", "requires_dist": ["sqlalchemy (>=1.0)", "sqlparse (>=0.3.0)"], "requires_python": ">= 3.7", "summary": "Database Migration Tool", "version": "2.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>dbupgrade</h1>\n<p>Database Migration Tool</p>\n<p><a href=\"https://pypi.python.org/pypi/dbupgrade/\" rel=\"nofollow\"><img alt=\"MIT License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a984c7660ebebe37339d0eee0e67d74545cc3d48/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f6462757067726164652e737667\"></a>\n<a href=\"https://github.com/srittau/dbupgrade/releases/\" rel=\"nofollow\"><img alt=\"GitHub\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/89db55f6f4ba40706b10d38dca417e440fc2b740/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f737269747461752f6462757067726164652f616c6c2e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/dbupgrade/\" rel=\"nofollow\"><img alt=\"pypi\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/20f2c30bdc74522ceaa6060a497d65147270ac8e/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6462757067726164652e737667\"></a>\n<a href=\"https://travis-ci.org/srittau/dbupgrade\" rel=\"nofollow\"><img alt=\"Travis CI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/9e3c0997677ad31da28b342851cbd7be157e1f5c/68747470733a2f2f7472617669732d63692e6f72672f737269747461752f6462757067726164652e7376673f6272616e63683d6d6173746572\"></a></p>\n<p>Usage: <code>dbupgrade [OPTIONS] [-l API_LEVEL|-L] DBNAME SCHEMA DIRECTORY</code></p>\n<p>Upgrade the given <code>SCHEMA</code> in the database specified as <code>DBNAME</code> with SQL\nscripts from <code>DIRECTORY</code>. <code>DIRECTORY</code> is searched for all files with the\n<code>.sql</code> suffix. These files are SQL scripts with a special header sections:</p>\n<pre><span class=\"c1\">-- Schema: my-db-schema</span>\n<span class=\"c1\">-- Version: 25</span>\n<span class=\"c1\">-- API-Level: 3</span>\n<span class=\"c1\">-- Dialect: postgres</span>\n\n<span class=\"k\">CREATE</span> <span class=\"k\">TABLE</span> <span class=\"p\">...</span>\n</pre>\n<p>The following headers are required:</p>\n<ul>\n<li><strong>Schema</strong><br>\nName of the schema to update.</li>\n<li><strong>Dialect</strong><br>\nDatabase dialect of this script. Use SQLalchemy's database\nURL scheme identifier, e.g. <code>postgres</code> or <code>sqlite</code>.</li>\n<li><strong>Version</strong><br>\nThe new version of the schema after this script was applied.\nIt is an error if two scripts have the same schema, dialect, and version.</li>\n<li><strong>API-Level</strong><br>\nThe new API level of the schema after this script was applied.\nFor a given schema, the API level of a subsequent version must either be\nequal or higher by one than the API level of the preceding version. For\nexample, if script version 44 has API level 3, script version 45 must\nhave API level 3 or 4.</li>\n<li><strong>Transaction</strong> <em>(optional)</em><br>\nPossible values are <code>yes</code> (default) and <code>no</code>. When this\nheader is yes, all statements of a single upgrade file and the\ncorresponding version upgrade statements are executed within a single\ntransaction. Otherwise each statement is executed separately. The former\nis usually preferable so that all changes will be rolled back if a\nscript fails to apply, but the latter is required in some cases.</li>\n</ul>\n<p>The database must contain a table <code>db_config</code> with three columns: <code>schema</code>,\n<code>version</code>, and <code>api_level</code>. If this table does not exist, it is created.\nThis table must contain exactly one row for the given schema. If this row\ndoes not exist, it is created with version and api_level initially set to 0.</p>\n<p>The current version and API level of the schema are requested from the\ndatabase and all scripts with a higher version number are applied, in order.\nIf there are any version numbers missing, the script will stop after the\nlast version before the missing version.</p>\n<p>Unless the <code>-l</code> or <code>-L</code> option is supplied, only scripts that do not\nincrease the API level will be applied. If the <code>-l</code> option is given, all\nscripts up to the given API level will be applied. <code>-L</code> will apply all\nscripts without regard to the API level.</p>\n<p>Each script is executed in a seperate transaction. If a script fails, all\nchanges in that script will be rolled back and the script will stop with\nan error message and a non-zero return status.</p>\n\n          </div>"}, "last_serial": 6538132, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "62b26f0594957a39f99f49f68f9c97f3", "sha256": "1abe3c206bc342333864b8ad69c25d31bdc4e385d040f47b491d1c2c87ce143c"}, "downloads": -1, "filename": "dbupgrade-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "62b26f0594957a39f99f49f68f9c97f3", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 12272, "upload_time": "2018-02-14T11:09:34", "upload_time_iso_8601": "2018-02-14T11:09:34.735606Z", "url": "https://files.pythonhosted.org/packages/f8/44/195640c5ecd443583897c51202739524656672ff2b27e3cf985aa5e7389a/dbupgrade-0.1.0-py3-none-any.whl", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "798cec6862c5d75f6ed6867b9b2ff41a", "sha256": "fb951e8838142d1ccd92d257b13a137d9883a26f32554a66c2af9dbde88c9c9c"}, "downloads": -1, "filename": "dbupgrade-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "798cec6862c5d75f6ed6867b9b2ff41a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 12855, "upload_time": "2018-02-14T12:11:04", "upload_time_iso_8601": "2018-02-14T12:11:04.547965Z", "url": "https://files.pythonhosted.org/packages/28/a2/f1f14b5bc8060b9044e69d700e4cdc0c466b511c74ab2085895395ade00b/dbupgrade-0.2.0-py3-none-any.whl", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "23ee6223ee36a359626effb7ec09c3dd", "sha256": "7e81ed25fe1c7a944c925ff54fb1fd14cf4e5f710a1d84f955b7d21fcc8bc672"}, "downloads": -1, "filename": "dbupgrade-0.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "23ee6223ee36a359626effb7ec09c3dd", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 12895, "upload_time": "2018-02-22T11:36:33", "upload_time_iso_8601": "2018-02-22T11:36:33.746182Z", "url": "https://files.pythonhosted.org/packages/0f/11/5b9d22eff652931022673e79f25c7ef8c6807d0d477835e1af852c23819e/dbupgrade-0.2.1-py3-none-any.whl", "yanked": false}], "0.2.2": [{"comment_text": "", "digests": {"md5": "f300369f8227242fe8c459f30965dfb0", "sha256": "76f72d8c6fc4d4afdf270b4cfe561a8f5496ce841abe5b4ff0b8931f253e5514"}, "downloads": -1, "filename": "dbupgrade-0.2.2-py3-none-any.whl", "has_sig": false, "md5_digest": "f300369f8227242fe8c459f30965dfb0", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 10812, "upload_time": "2018-06-14T14:44:15", "upload_time_iso_8601": "2018-06-14T14:44:15.529387Z", "url": "https://files.pythonhosted.org/packages/2d/48/12f686d2056f572029f02926e53a2e7c1fe9151ae430f0e9fadfdbdf8899/dbupgrade-0.2.2-py3-none-any.whl", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "6594a0eb79fe883da53c5213ad5f105c", "sha256": "2bd08c502d2dfd1112be395d6cc7d4f71bc939f45be46272a667bc4f72ae52b4"}, "downloads": -1, "filename": "dbupgrade-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "6594a0eb79fe883da53c5213ad5f105c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">= 3.5, < 3.8", "size": 10924, "upload_time": "2018-07-16T11:26:35", "upload_time_iso_8601": "2018-07-16T11:26:35.820909Z", "url": "https://files.pythonhosted.org/packages/74/25/1090fd5cb5b6466d581bada69051276584b0510830b41031ee363f65dcbb/dbupgrade-1.0.0-py3-none-any.whl", "yanked": false}], "2.0.0": [{"comment_text": "", "digests": {"md5": "047a1c1e021379dad54977c13b974eb3", "sha256": "bceb194928a8326c6c3ec22c4e2042a0bee4ea7e6c83f14dc87649fc2fe82289"}, "downloads": -1, "filename": "dbupgrade-2.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "047a1c1e021379dad54977c13b974eb3", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">= 3.7", "size": 11750, "upload_time": "2019-08-06T16:42:08", "upload_time_iso_8601": "2019-08-06T16:42:08.222929Z", "url": "https://files.pythonhosted.org/packages/c3/ad/a7bc7dadb2cd452c64eb883d448729dad3cb1cafeb24f217d70be8fd6ddf/dbupgrade-2.0.0-py3-none-any.whl", "yanked": false}], "2.0.1": [{"comment_text": "", "digests": {"md5": "56dcede66de8b1e683d3637f9a1e146f", "sha256": "dbfa2a99ddc3a3c1fd2eee7b191b4f68bbc73469a4adaad039a9c557952b6db5"}, "downloads": -1, "filename": "dbupgrade-2.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "56dcede66de8b1e683d3637f9a1e146f", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">= 3.7", "size": 11755, "upload_time": "2020-01-29T14:19:38", "upload_time_iso_8601": "2020-01-29T14:19:38.042287Z", "url": "https://files.pythonhosted.org/packages/49/4b/2b3b11ffbf5a472c2986c13affe6b1054211da675bb7e7016999b6a8eced/dbupgrade-2.0.1-py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "56dcede66de8b1e683d3637f9a1e146f", "sha256": "dbfa2a99ddc3a3c1fd2eee7b191b4f68bbc73469a4adaad039a9c557952b6db5"}, "downloads": -1, "filename": "dbupgrade-2.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "56dcede66de8b1e683d3637f9a1e146f", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">= 3.7", "size": 11755, "upload_time": "2020-01-29T14:19:38", "upload_time_iso_8601": "2020-01-29T14:19:38.042287Z", "url": "https://files.pythonhosted.org/packages/49/4b/2b3b11ffbf5a472c2986c13affe6b1054211da675bb7e7016999b6a8eced/dbupgrade-2.0.1-py3-none-any.whl", "yanked": false}], "timestamp": "Fri May  8 00:39:51 2020"}