{"info": {"author": "Arrai Innovations", "author_email": "support@arrai.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# shy-sentry\nsentry-sdk but silent\n\n> ![Shh.](https://docs.arrai-dev.com/shy-sentry/readme/shy-sentry.png)\n>\n> Shh.\n\nExtending [getsentry/sentry-python](https://github.com/getsentry/sentry-python), this package provides the following\n customizations we found useful in multiple projects:\n* default integrations that have a silent `AtexitIntegration.callback`\n* a `Guard()` context manager / decorator which provides quite sentry feedback on errors for parts of code that cannot\n let exceptions rock all the way up to killing the process. This is intended for use in our legacy cgi scripts, where console output is undesired.\n* loading certain `sentry_sdk.init` kwargs (`dsn`, `environment`, `release`) from json by default.\n* restores `sentry_sdk.serializer.MAX_DATABAG_DEPTH` and expands `sentry_sdk.serializer.MAX_DATABAG_BREADTH` for more\n complete debugging information. This is intended for use in our legacy cgi scripts, where code complexity per function can be higher then desired in non-legacy code.\n\n## Table of contents\n\n* [Badges](#badges)\n* [Install](#install)\n* [Usage](#Usage)\n\n## Badges\n\n[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg?style=for-the-badge)](https://github.com/psf/black) [![PYPI](https://img.shields.io/pypi/v/shy-sentry?style=for-the-badge)](https://pypi.org/project/shy-sentry/)\n\n###### master\n\n![Tests](https://docs.arrai-dev.com/shy-sentry/master.python38.svg) [![Coverage](https://docs.arrai-dev.com/shy-sentry/master.python38.coverage.svg)](https://docs.arrai-dev.com/shy-sentry/htmlcov_master_python38/)\n\n![Tests](https://docs.arrai-dev.com/shy-sentry/master.python37.svg) [![Coverage](https://docs.arrai-dev.com/shy-sentry/master.python37.coverage.svg)](https://docs.arrai-dev.com/shy-sentry/htmlcov_master_python37/)\n\n![Tests](https://docs.arrai-dev.com/shy-sentry/master.python36.svg) [![Coverage](https://docs.arrai-dev.com/shy-sentry/master.python36.coverage.svg)](https://docs.arrai-dev.com/shy-sentry/htmlcov_master_python36/)\n\n![Flake8](https://docs.arrai-dev.com/shy-sentry/master.flake8.svg)\n\n###### develop\n\n![Tests](https://docs.arrai-dev.com/shy-sentry/develop.python38.svg) [![Coverage](https://docs.arrai-dev.com/shy-sentry/develop.python38.coverage.svg)](https://docs.arrai-dev.com/shy-sentry/htmlcov_develop_python38/)\n\n![Tests](https://docs.arrai-dev.com/shy-sentry/develop.python37.svg) [![Coverage](https://docs.arrai-dev.com/shy-sentry/develop.python37.coverage.svg)](https://docs.arrai-dev.com/shy-sentry/htmlcov_develop_python37/)\n\n![Tests](https://docs.arrai-dev.com/shy-sentry/develop.python36.svg) [![Coverage](https://docs.arrai-dev.com/shy-sentry/develop.python36.coverage.svg)](https://docs.arrai-dev.com/shy-sentry/htmlcov_develop_python36/)\n\n![Flake8](https://docs.arrai-dev.com/shy-sentry/develop.flake8.svg)\n\n## Install\n\n```bash\n$ pip install shy-sentry\n```\n\n## Usage\nCreate a JSON configuration file with keys, used to configure sentry sdk:\n```json\n{\n   \"SENTRY_DSN\": \"https://client_key@sentry.io/project_id\",\n   \"SENTRY_ENVIRONMENT\": \"dev\",\n   \"SENTRY_RELEASE_STRING\": \"project:branch@version\"\n}\n```\n\nThen, setup shy-sentry in the desired entry point and guard your entry point using `Guard` as a context manager or as a\n decorator.\n\n###### as context manager\n```python\nimport shy_sentry\n\n\ndef main():\n   print(1/0)\n\n\nif __name__ == \"__main__\":\n   shy_sentry.init(config_path=\"./sentry_config.json\")\n   with shy_sentry.Guard():\n       main()\n```\n\n###### as decorator\n```python\nimport shy_sentry\n\n\n@shy_sentry.Guard()\ndef main():\n   print(1/0)\n\n\nif __name__ == \"__main__\":\n   shy_sentry.init(config_path=\"./sentry_config.json\")\n   main()\n```\n\nExceptions outside of `Guard()` will get you `ZeroDivisionError` issue/event in Sentry AND a traceback in your console,\n when using default integrations.\n\n```python\nimport shy_sentry\n\n\ndef main():\n   print(1/0)\n\n\nif __name__ == \"__main__\":\n   shy_sentry.init(config_path=\"./sentry_config.json\")\n   main()\n```\n\nIf `Guard()` can't get a `sentry_sdk.client.Client` instance, it will reraise exceptions instead of ignoring them.\n\nIf there are certain exceptions you want reraised from `Guard()`, you'll need a sub-class like this:\n\n```python\nfrom shy_sentry import Guard\n\nclass MyGuard(Guard):\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        if not super().__exit__(exc_type, exc_val, exc_tb):\n            # super intends to ignore, do we want to ignore?\n            if isinstance(exc_type, OSError):\n                return True\n        return False\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/arrai-innovations/shy-sentry/", "keywords": "", "license": "LICENSE", "maintainer": "", "maintainer_email": "", "name": "shy-sentry", "package_url": "https://pypi.org/project/shy-sentry/", "platform": "", "project_url": "https://pypi.org/project/shy-sentry/", "project_urls": {"Homepage": "https://github.com/arrai-innovations/shy-sentry/"}, "release_url": "https://pypi.org/project/shy-sentry/1.2.0/", "requires_dist": ["setuptools (>=45.1.0)", "sentry-sdk (<1.0.0,>=0.14.1)"], "requires_python": "", "summary": "sentry-sdk but quite", "version": "1.2.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>shy-sentry</h1>\n<p>sentry-sdk but silent</p>\n<blockquote>\n<p><img alt=\"Shh.\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d566dcce4ac67844d5f43da40c88277713599975/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f726561646d652f7368792d73656e7472792e706e67\"></p>\n<p>Shh.</p>\n</blockquote>\n<p>Extending <a href=\"https://github.com/getsentry/sentry-python\" rel=\"nofollow\">getsentry/sentry-python</a>, this package provides the following\ncustomizations we found useful in multiple projects:</p>\n<ul>\n<li>default integrations that have a silent <code>AtexitIntegration.callback</code></li>\n<li>a <code>Guard()</code> context manager / decorator which provides quite sentry feedback on errors for parts of code that cannot\nlet exceptions rock all the way up to killing the process. This is intended for use in our legacy cgi scripts, where console output is undesired.</li>\n<li>loading certain <code>sentry_sdk.init</code> kwargs (<code>dsn</code>, <code>environment</code>, <code>release</code>) from json by default.</li>\n<li>restores <code>sentry_sdk.serializer.MAX_DATABAG_DEPTH</code> and expands <code>sentry_sdk.serializer.MAX_DATABAG_BREADTH</code> for more\ncomplete debugging information. This is intended for use in our legacy cgi scripts, where code complexity per function can be higher then desired in non-legacy code.</li>\n</ul>\n<h2>Table of contents</h2>\n<ul>\n<li><a href=\"#badges\" rel=\"nofollow\">Badges</a></li>\n<li><a href=\"#install\" rel=\"nofollow\">Install</a></li>\n<li><a href=\"#Usage\" rel=\"nofollow\">Usage</a></li>\n</ul>\n<h2>Badges</h2>\n<p><a href=\"https://github.com/psf/black\" rel=\"nofollow\"><img alt=\"Code style: black\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/f680626f3780df10c85eee832fd8768d7af28a89/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e7376673f7374796c653d666f722d7468652d6261646765\"></a> <a href=\"https://pypi.org/project/shy-sentry/\" rel=\"nofollow\"><img alt=\"PYPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3e86872d43483a7fe35cf30162b19c345667713f/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7368792d73656e7472793f7374796c653d666f722d7468652d6261646765\"></a></p>\n<h6>master</h6>\n<p><img alt=\"Tests\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2aa375195654baf73d04270e1135e369c54daee0/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f6d61737465722e707974686f6e33382e737667\"> <a href=\"https://docs.arrai-dev.com/shy-sentry/htmlcov_master_python38/\" rel=\"nofollow\"><img alt=\"Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ae69a134330f6b2e061bf29ebac1a2650f10b615/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f6d61737465722e707974686f6e33382e636f7665726167652e737667\"></a></p>\n<p><img alt=\"Tests\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5d354c4470a9d5011d07e7561b3ecc13c517f579/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f6d61737465722e707974686f6e33372e737667\"> <a href=\"https://docs.arrai-dev.com/shy-sentry/htmlcov_master_python37/\" rel=\"nofollow\"><img alt=\"Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/e3e409489ed4a12d878bd2a7c097e3f677f86337/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f6d61737465722e707974686f6e33372e636f7665726167652e737667\"></a></p>\n<p><img alt=\"Tests\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7fcbfc177af3f4e44430e187713259dde8d3eb84/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f6d61737465722e707974686f6e33362e737667\"> <a href=\"https://docs.arrai-dev.com/shy-sentry/htmlcov_master_python36/\" rel=\"nofollow\"><img alt=\"Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a98fda3ba8426cc06579f57a7d3db40f9a3a918f/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f6d61737465722e707974686f6e33362e636f7665726167652e737667\"></a></p>\n<p><img alt=\"Flake8\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1564333c8ceba294957bc881c188623989a88612/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f6d61737465722e666c616b65382e737667\"></p>\n<h6>develop</h6>\n<p><img alt=\"Tests\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/be071ce30fa60acb1bf5711a4ae0651280e13c82/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f646576656c6f702e707974686f6e33382e737667\"> <a href=\"https://docs.arrai-dev.com/shy-sentry/htmlcov_develop_python38/\" rel=\"nofollow\"><img alt=\"Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/99c3034192c00a94bf998caa52eafe957edb4b34/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f646576656c6f702e707974686f6e33382e636f7665726167652e737667\"></a></p>\n<p><img alt=\"Tests\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8b1114bf388ec0e84ecec2c57199a496216ac2ab/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f646576656c6f702e707974686f6e33372e737667\"> <a href=\"https://docs.arrai-dev.com/shy-sentry/htmlcov_develop_python37/\" rel=\"nofollow\"><img alt=\"Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/65aaec8e8981d6c3b720fb467c275aac9e36972f/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f646576656c6f702e707974686f6e33372e636f7665726167652e737667\"></a></p>\n<p><img alt=\"Tests\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6c58c0e67d83d58e07c3a47844a513789858dec0/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f646576656c6f702e707974686f6e33362e737667\"> <a href=\"https://docs.arrai-dev.com/shy-sentry/htmlcov_develop_python36/\" rel=\"nofollow\"><img alt=\"Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1ddec3fcf171f7b9dcb52c44b2a3b7328efd98a7/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f646576656c6f702e707974686f6e33362e636f7665726167652e737667\"></a></p>\n<p><img alt=\"Flake8\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/11e3c23074cda3285f5eb023fca429ce97b7b137/68747470733a2f2f646f63732e61727261692d6465762e636f6d2f7368792d73656e7472792f646576656c6f702e666c616b65382e737667\"></p>\n<h2>Install</h2>\n<pre>$ pip install shy-sentry\n</pre>\n<h2>Usage</h2>\n<p>Create a JSON configuration file with keys, used to configure sentry sdk:</p>\n<pre><span class=\"p\">{</span>\n   <span class=\"nt\">\"SENTRY_DSN\"</span><span class=\"p\">:</span> <span class=\"s2\">\"https://client_key@sentry.io/project_id\"</span><span class=\"p\">,</span>\n   <span class=\"nt\">\"SENTRY_ENVIRONMENT\"</span><span class=\"p\">:</span> <span class=\"s2\">\"dev\"</span><span class=\"p\">,</span>\n   <span class=\"nt\">\"SENTRY_RELEASE_STRING\"</span><span class=\"p\">:</span> <span class=\"s2\">\"project:branch@version\"</span>\n<span class=\"p\">}</span>\n</pre>\n<p>Then, setup shy-sentry in the desired entry point and guard your entry point using <code>Guard</code> as a context manager or as a\ndecorator.</p>\n<h6>as context manager</h6>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">shy_sentry</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n   <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n   <span class=\"n\">shy_sentry</span><span class=\"o\">.</span><span class=\"n\">init</span><span class=\"p\">(</span><span class=\"n\">config_path</span><span class=\"o\">=</span><span class=\"s2\">\"./sentry_config.json\"</span><span class=\"p\">)</span>\n   <span class=\"k\">with</span> <span class=\"n\">shy_sentry</span><span class=\"o\">.</span><span class=\"n\">Guard</span><span class=\"p\">():</span>\n       <span class=\"n\">main</span><span class=\"p\">()</span>\n</pre>\n<h6>as decorator</h6>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">shy_sentry</span>\n\n\n<span class=\"nd\">@shy_sentry</span><span class=\"o\">.</span><span class=\"n\">Guard</span><span class=\"p\">()</span>\n<span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n   <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n   <span class=\"n\">shy_sentry</span><span class=\"o\">.</span><span class=\"n\">init</span><span class=\"p\">(</span><span class=\"n\">config_path</span><span class=\"o\">=</span><span class=\"s2\">\"./sentry_config.json\"</span><span class=\"p\">)</span>\n   <span class=\"n\">main</span><span class=\"p\">()</span>\n</pre>\n<p>Exceptions outside of <code>Guard()</code> will get you <code>ZeroDivisionError</code> issue/event in Sentry AND a traceback in your console,\nwhen using default integrations.</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">shy_sentry</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n   <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n   <span class=\"n\">shy_sentry</span><span class=\"o\">.</span><span class=\"n\">init</span><span class=\"p\">(</span><span class=\"n\">config_path</span><span class=\"o\">=</span><span class=\"s2\">\"./sentry_config.json\"</span><span class=\"p\">)</span>\n   <span class=\"n\">main</span><span class=\"p\">()</span>\n</pre>\n<p>If <code>Guard()</code> can't get a <code>sentry_sdk.client.Client</code> instance, it will reraise exceptions instead of ignoring them.</p>\n<p>If there are certain exceptions you want reraised from <code>Guard()</code>, you'll need a sub-class like this:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">shy_sentry</span> <span class=\"kn\">import</span> <span class=\"n\">Guard</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyGuard</span><span class=\"p\">(</span><span class=\"n\">Guard</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__exit__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">exc_type</span><span class=\"p\">,</span> <span class=\"n\">exc_val</span><span class=\"p\">,</span> <span class=\"n\">exc_tb</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"fm\">__exit__</span><span class=\"p\">(</span><span class=\"n\">exc_type</span><span class=\"p\">,</span> <span class=\"n\">exc_val</span><span class=\"p\">,</span> <span class=\"n\">exc_tb</span><span class=\"p\">):</span>\n            <span class=\"c1\"># super intends to ignore, do we want to ignore?</span>\n            <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">exc_type</span><span class=\"p\">,</span> <span class=\"ne\">OSError</span><span class=\"p\">):</span>\n                <span class=\"k\">return</span> <span class=\"kc\">True</span>\n        <span class=\"k\">return</span> <span class=\"kc\">False</span>\n</pre>\n\n          </div>"}, "last_serial": 6677748, "releases": {"1.2.0": [{"comment_text": "", "digests": {"md5": "29c550661b10507173f749489c4d0067", "sha256": "a599e552ba3d0677842800701a0c47b2eaefbf39f0d1370e639750b54afe568f"}, "downloads": -1, "filename": "shy_sentry-1.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "29c550661b10507173f749489c4d0067", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5332, "upload_time": "2020-02-21T21:29:00", "upload_time_iso_8601": "2020-02-21T21:29:00.030779Z", "url": "https://files.pythonhosted.org/packages/3d/34/5527231776a15b388502d604c452c907f9226ae25e65908bfc22d6d9f1cd/shy_sentry-1.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d3fa8121109714a0f3ecf04fe75190ae", "sha256": "6b433aecc555ce58850eb308203969692860837809a719058dc4d0693056da87"}, "downloads": -1, "filename": "shy-sentry-1.2.0.tar.gz", "has_sig": false, "md5_digest": "d3fa8121109714a0f3ecf04fe75190ae", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4939, "upload_time": "2020-02-21T21:29:02", "upload_time_iso_8601": "2020-02-21T21:29:02.380809Z", "url": "https://files.pythonhosted.org/packages/7e/4e/f39367325498c2fff3b284b72280530b20291f5a57a04ec26b53444abe1b/shy-sentry-1.2.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "29c550661b10507173f749489c4d0067", "sha256": "a599e552ba3d0677842800701a0c47b2eaefbf39f0d1370e639750b54afe568f"}, "downloads": -1, "filename": "shy_sentry-1.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "29c550661b10507173f749489c4d0067", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5332, "upload_time": "2020-02-21T21:29:00", "upload_time_iso_8601": "2020-02-21T21:29:00.030779Z", "url": "https://files.pythonhosted.org/packages/3d/34/5527231776a15b388502d604c452c907f9226ae25e65908bfc22d6d9f1cd/shy_sentry-1.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d3fa8121109714a0f3ecf04fe75190ae", "sha256": "6b433aecc555ce58850eb308203969692860837809a719058dc4d0693056da87"}, "downloads": -1, "filename": "shy-sentry-1.2.0.tar.gz", "has_sig": false, "md5_digest": "d3fa8121109714a0f3ecf04fe75190ae", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4939, "upload_time": "2020-02-21T21:29:02", "upload_time_iso_8601": "2020-02-21T21:29:02.380809Z", "url": "https://files.pythonhosted.org/packages/7e/4e/f39367325498c2fff3b284b72280530b20291f5a57a04ec26b53444abe1b/shy-sentry-1.2.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:12:14 2020"}