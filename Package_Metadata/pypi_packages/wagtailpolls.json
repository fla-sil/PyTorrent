{"info": {"author": "Takeflight", "author_email": "liam@takeflight.com.au", "bugtrack_url": null, "classifiers": ["Environment :: Web Environment", "Framework :: Django", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Operating System :: OS Independent", "Programming Language :: Python"], "description": "===============\nwagtailpolls\n===============\n\nA plugin for Wagtail that provides polling functionality.\n\nInstalling\n==========\n\nInstall using pip::\n\n    pip install wagtailpolls\n\nIt works with Wagtail 1.3 and upwards.\n\nUsing\n=====\n\nAdd ``wagtailpolls`` to your ``INSTALLED_APPS``.\n\nEnsure you add the line ``from wagtailpolls.views.vote import vote`` to your ``urls.py`` and include the URL ``url(r'^vote/(?P<poll_pk>.*)/$', vote, name='wagtailpolls_vote')``.\n\nDefine a foreign key referring to ``wagtailpolls.Poll`` and use the ``PollChooserPanel``:\n\n.. code-block:: python\n\n    from django.db import models\n    from wagtailpolls.edit_handlers import PollChooserPanel\n    from wagtail.wagtailadmin.edit_handlers import FieldPanel\n\n    class Content(Page):\n        body = models.TextField()\n        poll = models.ForeignKey(\n            'wagtailpolls.Poll',\n            null=True,\n            blank=True,\n            on_delete=models.SET_NULL\n        )\n\n        content_panels = [\n            FieldPanel('body', classname=\"full\"),\n            PollChooserPanel('poll'),\n        ]\n\n\nThen, in your editor, ensure that you have added some polls in the polls section in wagtail admin. You will be able to select a poll from there accessable in the template as you would expect.\n\nTemplating & Display\n====================\nThere are many ways in which you may want to display your poll. ``wagtailpolls`` comes with a template tag to assist with this, as well as certain attributes accessible via templating to render each question as a form. Here is an example using all of the tools provided:\n\n.. code-block:: html\n\n    {% extends \"layouts/page.html\" %}\n    {% load wagtailpolls_tags %}\n    {% block content %}\n    <h1>{{ self.title }}</h1>\n    <br>\n    {% if self.poll %}\n    <form class='poll' method='POST' action='{% vote self.poll %}'>\n    {% csrf_token %}\n    {{self.poll.form}}\n    <br><br>\n        <input type=\"submit\" value=\"Vote\">\n    </form>\n    {% else %}\n        No polls added to this page yet!\n    {% endif %}\n    {% endblock %}\n\nAs shown, the ``{% vote %}`` template tag will need to be passed a poll instance to function correctly. You will also need to ``{% load wagtailpolls_tags %}`` at the top of the file where this template tag is used.\nThe poll can be rendered with all questions using ``.form`` at the end. ``.form_as_ul`` and all other form types will also work.\n\nIf you do select a poll for a page, no fields will display on the form and, upon voting, a message stating that there is no poll to vote on will be displayed.\n\nVoting\n======\nWhen a vote has been submitted, the server will return a ``JsonResponse`` something like:\n\n.. code-block:: json\n\n    {\"total_votes\": 11, \"total_questions\": 3, \"poll\": \"Test Poll\", \"votes\": {\"Nah\": 10, \"Yeah\": 1, \"Maybe\": 0}}\n\nWith javascript, this data can be used to create a frontend for your poll to your own liking.\n\nThe voting form also performs some validation. If the voting form is unable to obtain your IP it will return something like:\n\n.. code-block:: json\n\n    {\"poll\": \"Test Poll\", \"total_questions\": 3, \"total_votes\": 11, \"votes\": {\"Yeah\": 1, \"Maybe\": 0, \"Nah\": 10}, \"form_error\": {\"__all__\": [\"Sorry, we were not able to obtain your ip address\"]}}\n\nThere is also a ``WAGTAILPOLLS_VOTE_COOLDOWN`` which is set in your settings. This will only allow users on the same IP to vote at an interval of your choosing. If this is caught, the error will be present in the ``JsonResponse`` much like the error above.\n\nAdditionally, information will be added to the django session (basically cookies will be set) that will help make sure devices are not able to vote twice. When a vote is rejected due to this reason, the vote simply won't register with no error being returned in the ``JsonResponse``.\n\nSettings\n========\n\nThe following settings can to be set in your ``settings.py`` file.\n\n``WAGTAILPOLLS_VOTE_COOLDOWN`` `This is to be an integer representing minutes, the default is 10 minutes.`\n\n``WAGTAILPOLLS_VOTE_REQUIRE_PERMS`` `A string or list of strings representing the permissions to vote, aka. 'wagtailadmin.access_admin'`\n", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/takeflight/wagtailpolls", "keywords": "", "license": "BSD License", "maintainer": "", "maintainer_email": "", "name": "wagtailpolls", "package_url": "https://pypi.org/project/wagtailpolls/", "platform": "", "project_url": "https://pypi.org/project/wagtailpolls/", "project_urls": {"Homepage": "https://github.com/takeflight/wagtailpolls"}, "release_url": "https://pypi.org/project/wagtailpolls/0.3.0/", "requires_dist": null, "requires_python": "", "summary": "A polling plugin for the Wagtail CMS", "version": "0.3.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>A plugin for Wagtail that provides polling functionality.</p>\n<div id=\"installing\">\n<h2>Installing</h2>\n<p>Install using pip:</p>\n<pre>pip install wagtailpolls\n</pre>\n<p>It works with Wagtail 1.3 and upwards.</p>\n</div>\n<div id=\"using\">\n<h2>Using</h2>\n<p>Add <tt>wagtailpolls</tt> to your <tt>INSTALLED_APPS</tt>.</p>\n<p>Ensure you add the line <tt>from wagtailpolls.views.vote import vote</tt> to your <tt>urls.py</tt> and include the URL <tt><span class=\"pre\">url(r'^vote/(?P&lt;poll_pk&gt;.*)/$',</span> vote, <span class=\"pre\">name='wagtailpolls_vote')</span></tt>.</p>\n<p>Define a foreign key referring to <tt>wagtailpolls.Poll</tt> and use the <tt>PollChooserPanel</tt>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n<span class=\"kn\">from</span> <span class=\"nn\">wagtailpolls.edit_handlers</span> <span class=\"kn\">import</span> <span class=\"n\">PollChooserPanel</span>\n<span class=\"kn\">from</span> <span class=\"nn\">wagtail.wagtailadmin.edit_handlers</span> <span class=\"kn\">import</span> <span class=\"n\">FieldPanel</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Content</span><span class=\"p\">(</span><span class=\"n\">Page</span><span class=\"p\">):</span>\n    <span class=\"n\">body</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">TextField</span><span class=\"p\">()</span>\n    <span class=\"n\">poll</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span>\n        <span class=\"s1\">'wagtailpolls.Poll'</span><span class=\"p\">,</span>\n        <span class=\"n\">null</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"n\">on_delete</span><span class=\"o\">=</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">SET_NULL</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"n\">content_panels</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n        <span class=\"n\">FieldPanel</span><span class=\"p\">(</span><span class=\"s1\">'body'</span><span class=\"p\">,</span> <span class=\"n\">classname</span><span class=\"o\">=</span><span class=\"s2\">\"full\"</span><span class=\"p\">),</span>\n        <span class=\"n\">PollChooserPanel</span><span class=\"p\">(</span><span class=\"s1\">'poll'</span><span class=\"p\">),</span>\n    <span class=\"p\">]</span>\n</pre>\n<p>Then, in your editor, ensure that you have added some polls in the polls section in wagtail admin. You will be able to select a poll from there accessable in the template as you would expect.</p>\n</div>\n<div id=\"templating-display\">\n<h2>Templating &amp; Display</h2>\n<p>There are many ways in which you may want to display your poll. <tt>wagtailpolls</tt> comes with a template tag to assist with this, as well as certain attributes accessible via templating to render each question as a form. Here is an example using all of the tools provided:</p>\n<pre>{% extends \"layouts/page.html\" %}\n{% load wagtailpolls_tags %}\n{% block content %}\n<span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>{{ self.title }}<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">br</span><span class=\"p\">&gt;</span>\n{% if self.poll %}\n<span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">class</span><span class=\"o\">=</span><span class=\"s\">'poll'</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">'POST'</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">'{% vote self.poll %}'</span><span class=\"p\">&gt;</span>\n{% csrf_token %}\n{{self.poll.form}}\n<span class=\"p\">&lt;</span><span class=\"nt\">br</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">br</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span> <span class=\"na\">value</span><span class=\"o\">=</span><span class=\"s\">\"Vote\"</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n{% else %}\n    No polls added to this page yet!\n{% endif %}\n{% endblock %}\n</pre>\n<p>As shown, the <tt>{% vote %}</tt> template tag will need to be passed a poll instance to function correctly. You will also need to <tt>{% load wagtailpolls_tags %}</tt> at the top of the file where this template tag is used.\nThe poll can be rendered with all questions using <tt>.form</tt> at the end. <tt>.form_as_ul</tt> and all other form types will also work.</p>\n<p>If you do select a poll for a page, no fields will display on the form and, upon voting, a message stating that there is no poll to vote on will be displayed.</p>\n</div>\n<div id=\"voting\">\n<h2>Voting</h2>\n<p>When a vote has been submitted, the server will return a <tt>JsonResponse</tt> something like:</p>\n<pre><span class=\"p\">{</span><span class=\"nt\">\"total_votes\"</span><span class=\"p\">:</span> <span class=\"mi\">11</span><span class=\"p\">,</span> <span class=\"nt\">\"total_questions\"</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"nt\">\"poll\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Test Poll\"</span><span class=\"p\">,</span> <span class=\"nt\">\"votes\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"Nah\"</span><span class=\"p\">:</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"nt\">\"Yeah\"</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nt\">\"Maybe\"</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">}}</span>\n</pre>\n<p>With javascript, this data can be used to create a frontend for your poll to your own liking.</p>\n<p>The voting form also performs some validation. If the voting form is unable to obtain your IP it will return something like:</p>\n<pre><span class=\"p\">{</span><span class=\"nt\">\"poll\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Test Poll\"</span><span class=\"p\">,</span> <span class=\"nt\">\"total_questions\"</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"nt\">\"total_votes\"</span><span class=\"p\">:</span> <span class=\"mi\">11</span><span class=\"p\">,</span> <span class=\"nt\">\"votes\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"Yeah\"</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"nt\">\"Maybe\"</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nt\">\"Nah\"</span><span class=\"p\">:</span> <span class=\"mi\">10</span><span class=\"p\">},</span> <span class=\"nt\">\"form_error\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nt\">\"__all__\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"Sorry, we were not able to obtain your ip address\"</span><span class=\"p\">]}}</span>\n</pre>\n<p>There is also a <tt>WAGTAILPOLLS_VOTE_COOLDOWN</tt> which is set in your settings. This will only allow users on the same IP to vote at an interval of your choosing. If this is caught, the error will be present in the <tt>JsonResponse</tt> much like the error above.</p>\n<p>Additionally, information will be added to the django session (basically cookies will be set) that will help make sure devices are not able to vote twice. When a vote is rejected due to this reason, the vote simply won\u2019t register with no error being returned in the <tt>JsonResponse</tt>.</p>\n</div>\n<div id=\"settings\">\n<h2>Settings</h2>\n<p>The following settings can to be set in your <tt>settings.py</tt> file.</p>\n<p><tt>WAGTAILPOLLS_VOTE_COOLDOWN</tt> <cite>This is to be an integer representing minutes, the default is 10 minutes.</cite></p>\n<p><tt>WAGTAILPOLLS_VOTE_REQUIRE_PERMS</tt> <cite>A string or list of strings representing the permissions to vote, aka. \u2018wagtailadmin.access_admin\u2019</cite></p>\n</div>\n\n          </div>"}, "last_serial": 3530452, "releases": {"0.1.2": [{"comment_text": "", "digests": {"md5": "be77259243f61d7c241eaa521ed29f08", "sha256": "e8d861bb2a82c03ec1ec39c821ce883901f4ba216b9baba3304a42ba4fcbd58b"}, "downloads": -1, "filename": "wagtailpolls-0.1.2.tar.gz", "has_sig": false, "md5_digest": "be77259243f61d7c241eaa521ed29f08", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11761, "upload_time": "2015-11-27T03:22:31", "upload_time_iso_8601": "2015-11-27T03:22:31.436029Z", "url": "https://files.pythonhosted.org/packages/cd/12/52f927cac023ecca67801c202cafc211ed2aa7d60c5252332b7dfdc94d38/wagtailpolls-0.1.2.tar.gz", "yanked": false}], "0.1.3": [], "0.1.4": [{"comment_text": "", "digests": {"md5": "13f7745e7ca4b890455948223a356573", "sha256": "70ed88a6858b0bdd17da9bd8afa8789270a1f75621f2bbff44182db2c01280fc"}, "downloads": -1, "filename": "wagtailpolls-0.1.4.tar.gz", "has_sig": false, "md5_digest": "13f7745e7ca4b890455948223a356573", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 13763, "upload_time": "2016-08-31T02:40:44", "upload_time_iso_8601": "2016-08-31T02:40:44.453158Z", "url": "https://files.pythonhosted.org/packages/93/6b/0f83b6a8436b398b960cc26e83e18baf0b472a904fe1c04a94e19fc2ceaa/wagtailpolls-0.1.4.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "cdbd8a1bc661206cc58da94ed1d26a32", "sha256": "8c8d5c6d34138548a5432f3df3f47a78339d563f87ca68ef318bfc8e724dc46d"}, "downloads": -1, "filename": "wagtailpolls-0.2.0.tar.gz", "has_sig": false, "md5_digest": "cdbd8a1bc661206cc58da94ed1d26a32", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14430, "upload_time": "2016-11-07T01:25:18", "upload_time_iso_8601": "2016-11-07T01:25:18.332654Z", "url": "https://files.pythonhosted.org/packages/f0/b5/3e7e6ab04d3c05e3bc9d53ff20908e86ef78dc0ee0f9e0d4764d7257ebf3/wagtailpolls-0.2.0.tar.gz", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "236ef5ed69e45668a9db509818158ff7", "sha256": "bfa5855c6212997937049caa28ee929d9fb56beadedd686148e1a66904f43b70"}, "downloads": -1, "filename": "wagtailpolls-0.2.1.tar.gz", "has_sig": false, "md5_digest": "236ef5ed69e45668a9db509818158ff7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 18713, "upload_time": "2017-01-24T03:02:54", "upload_time_iso_8601": "2017-01-24T03:02:54.696445Z", "url": "https://files.pythonhosted.org/packages/0d/3f/74e5bb5bada45fb008901dc84e058a80663d9adc479cd0daa6655412dae7/wagtailpolls-0.2.1.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "4470141847c0604e1b76185fe27023c0", "sha256": "20695a9fe464d4f16b263e0195e8f55bb1e4b9eba38953b063da421a82b32706"}, "downloads": -1, "filename": "wagtailpolls-0.3.0.tar.gz", "has_sig": false, "md5_digest": "4470141847c0604e1b76185fe27023c0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 19128, "upload_time": "2017-05-29T06:17:43", "upload_time_iso_8601": "2017-05-29T06:17:43.684209Z", "url": "https://files.pythonhosted.org/packages/c1/92/d40b00dd8d62c43402d26b6074455adf13a02008ac0352995e2f6a33d7d4/wagtailpolls-0.3.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4470141847c0604e1b76185fe27023c0", "sha256": "20695a9fe464d4f16b263e0195e8f55bb1e4b9eba38953b063da421a82b32706"}, "downloads": -1, "filename": "wagtailpolls-0.3.0.tar.gz", "has_sig": false, "md5_digest": "4470141847c0604e1b76185fe27023c0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 19128, "upload_time": "2017-05-29T06:17:43", "upload_time_iso_8601": "2017-05-29T06:17:43.684209Z", "url": "https://files.pythonhosted.org/packages/c1/92/d40b00dd8d62c43402d26b6074455adf13a02008ac0352995e2f6a33d7d4/wagtailpolls-0.3.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:32:54 2020"}