{"info": {"author": "medSpaCy", "author_email": "medspacy.dev@gmail.com", "bugtrack_url": null, "classifiers": [], "description": "# Clinical Sectionizer\nThis package offers a component for tagging clinical section titles in docs. There are two different flavors of the sectionizer:\n- `Sectionizer`: A spaCy component which is run on a `Doc` object and adds attributes to spaCy objects. This can be added\nto an NLP pipeline and be executed as part of `nlp(text)`\n- `TextSectionizer`: A stand-alone object, independent of spaCy which takes a text and returns a list of tuples, where\neach tuple corresponds to a section in the text.\n\nThe `sectionizer` takes a list of \npatterns for section titles and searches for matches in a `doc`. When a section is found, it generates three outputs:\n1. `section_title`: The normalized name of a section, a `string`\n2. `section_header`: The span of the doc containing the header, a `Span`\n3. `section_span`: The entire span of the doc containing the section, a `Span`\n\nWhen using the spaCy `Sectionizer`, calling `sectionizer(doc)` adds the \nfollowing extensions to spaCy objects:\n\n- `Doc.sections`: A list of 3-tuples of (`name`, `header`, `section`)\n- `Token.section_span`: The `span` of the entire section which the token occurs in\n- `Token.section_header`: The `span` of the section header of the section a token occurs in\n- `Token.section_title`: The name of the section header defined by a pattern\n- `Span` attributes corresponding `section_span`, `section_header`, and `section_title` to the first token in a span\n\nWhen using `TextSectionizer`, calling `sectionizer(text)` returns a list of 3-tuples which correspond to the outputs \ndescribed above, but each as texts rather than spaCy objects: `(section_title, section_header, section_text)`\n\n# Example\nSee `notebooks/`for more detailed examples.\n\n```python\n>>> text = \"\"\"Family History:\n    Diabetes\n    \n    Past Medical History:\n    Pneumonia\n    \n    Assessment and Plan:\n    Atrial fibrillation. There is no evidence of pneumonia.\n    \"\"\"\n>>> import spacy\n>>> nlp = spacy.load(...) # Load a model which will match clinical concepts\n\n>>> from clinical_sectionizer import Sectionizer\n>>> sectionizer = nlp.add_pipe(Sectionizer(nlp))\n\n\n>>> section_patterns = [\n        {\"section_title\": \"family_history\", \"pattern\": \"Family History:\"},\n        {\"section_title\": \"past_medical_history\", \n            \"pattern\": [\n                {\"LOWER\": \"past\", \"OP\": \"?\"}, \n                {\"LOWER\": \"medical\"},\n                {\"LOWER\": \"history\"}, \n                {\"LOWER\": \":\"},\n            ]\n            \n        },\n        {\"section_title\": \"assessment_and_plan\", \"pattern\": \"Assessment and Plan:\"},\n    ]\n>>> sectionizer.add(section_patterns)\n\n>>> nlp.add_pipe(sectionizer)\n>>> doc = nlp(text)\n>>> print(nlp.ents)\n(Diabetes, Pneumonia, Atrial fibrillation, pneumonia)\n\n\n\n>>> for (section_name, section_header, section) in doc._.sections:\n        print(section_name, section_header, section, sep=\"\\n\")\n\nfamily_history\nFamily History:\nFamily History:\nDiabetes\n\npast_medical_history\nPast Medical History:\nPast Medical History:\nPneumonia\n\nassessment_and_plan\nAssessment and Plan:\nAssessment and Plan:\nAtrial fibrillation. There is no evidence of pneumonia.\n\n>>> for ent in doc.ents:\n        print(ent, ent._.section_title)\n    \nDiabetes family_history\nPneumonia past_medical_history\nAtrial fibrillation assessment_and_plan\npneumonia assessment_and_plan\n```\n\nUsing [cycontext](https://github.com/medspacy/cycontext), you can also use a visualizer which shows section headers, along with any extracted entities and \noptionally cycontext modifiers, in an NER-style visualization.\n```python\nfrom cycontext.viz import visualize_ent\nvisualize_ent(doc, sections=True, context=False)\n``` \n<p align=\"center\"><img width=\"50%\" height=\"50%\" src=\"img/viz_ent.png\" /></p>", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "clinical-sectionizer", "package_url": "https://pypi.org/project/clinical-sectionizer/", "platform": "", "project_url": "https://pypi.org/project/clinical-sectionizer/", "project_urls": null, "release_url": "https://pypi.org/project/clinical-sectionizer/0.1.0/", "requires_dist": null, "requires_python": "", "summary": "Document section detector using spaCy for clinical NLP", "version": "0.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Clinical Sectionizer</h1>\n<p>This package offers a component for tagging clinical section titles in docs. There are two different flavors of the sectionizer:</p>\n<ul>\n<li><code>Sectionizer</code>: A spaCy component which is run on a <code>Doc</code> object and adds attributes to spaCy objects. This can be added\nto an NLP pipeline and be executed as part of <code>nlp(text)</code></li>\n<li><code>TextSectionizer</code>: A stand-alone object, independent of spaCy which takes a text and returns a list of tuples, where\neach tuple corresponds to a section in the text.</li>\n</ul>\n<p>The <code>sectionizer</code> takes a list of\npatterns for section titles and searches for matches in a <code>doc</code>. When a section is found, it generates three outputs:</p>\n<ol>\n<li><code>section_title</code>: The normalized name of a section, a <code>string</code></li>\n<li><code>section_header</code>: The span of the doc containing the header, a <code>Span</code></li>\n<li><code>section_span</code>: The entire span of the doc containing the section, a <code>Span</code></li>\n</ol>\n<p>When using the spaCy <code>Sectionizer</code>, calling <code>sectionizer(doc)</code> adds the\nfollowing extensions to spaCy objects:</p>\n<ul>\n<li><code>Doc.sections</code>: A list of 3-tuples of (<code>name</code>, <code>header</code>, <code>section</code>)</li>\n<li><code>Token.section_span</code>: The <code>span</code> of the entire section which the token occurs in</li>\n<li><code>Token.section_header</code>: The <code>span</code> of the section header of the section a token occurs in</li>\n<li><code>Token.section_title</code>: The name of the section header defined by a pattern</li>\n<li><code>Span</code> attributes corresponding <code>section_span</code>, <code>section_header</code>, and <code>section_title</code> to the first token in a span</li>\n</ul>\n<p>When using <code>TextSectionizer</code>, calling <code>sectionizer(text)</code> returns a list of 3-tuples which correspond to the outputs\ndescribed above, but each as texts rather than spaCy objects: <code>(section_title, section_header, section_text)</code></p>\n<h1>Example</h1>\n<p>See <code>notebooks/</code>for more detailed examples.</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s2\">\"\"\"Family History:</span>\n<span class=\"s2\">    Diabetes</span>\n<span class=\"s2\">    </span>\n<span class=\"s2\">    Past Medical History:</span>\n<span class=\"s2\">    Pneumonia</span>\n<span class=\"s2\">    </span>\n<span class=\"s2\">    Assessment and Plan:</span>\n<span class=\"s2\">    Atrial fibrillation. There is no evidence of pneumonia.</span>\n<span class=\"s2\">    \"\"\"</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">import</span> <span class=\"nn\">spacy</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">nlp</span> <span class=\"o\">=</span> <span class=\"n\">spacy</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"o\">...</span><span class=\"p\">)</span> <span class=\"c1\"># Load a model which will match clinical concepts</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">clinical_sectionizer</span> <span class=\"kn\">import</span> <span class=\"n\">Sectionizer</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">sectionizer</span> <span class=\"o\">=</span> <span class=\"n\">nlp</span><span class=\"o\">.</span><span class=\"n\">add_pipe</span><span class=\"p\">(</span><span class=\"n\">Sectionizer</span><span class=\"p\">(</span><span class=\"n\">nlp</span><span class=\"p\">))</span>\n\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">section_patterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span><span class=\"s2\">\"section_title\"</span><span class=\"p\">:</span> <span class=\"s2\">\"family_history\"</span><span class=\"p\">,</span> <span class=\"s2\">\"pattern\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Family History:\"</span><span class=\"p\">},</span>\n        <span class=\"p\">{</span><span class=\"s2\">\"section_title\"</span><span class=\"p\">:</span> <span class=\"s2\">\"past_medical_history\"</span><span class=\"p\">,</span> \n            <span class=\"s2\">\"pattern\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                <span class=\"p\">{</span><span class=\"s2\">\"LOWER\"</span><span class=\"p\">:</span> <span class=\"s2\">\"past\"</span><span class=\"p\">,</span> <span class=\"s2\">\"OP\"</span><span class=\"p\">:</span> <span class=\"s2\">\"?\"</span><span class=\"p\">},</span> \n                <span class=\"p\">{</span><span class=\"s2\">\"LOWER\"</span><span class=\"p\">:</span> <span class=\"s2\">\"medical\"</span><span class=\"p\">},</span>\n                <span class=\"p\">{</span><span class=\"s2\">\"LOWER\"</span><span class=\"p\">:</span> <span class=\"s2\">\"history\"</span><span class=\"p\">},</span> \n                <span class=\"p\">{</span><span class=\"s2\">\"LOWER\"</span><span class=\"p\">:</span> <span class=\"s2\">\":\"</span><span class=\"p\">},</span>\n            <span class=\"p\">]</span>\n            \n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span><span class=\"s2\">\"section_title\"</span><span class=\"p\">:</span> <span class=\"s2\">\"assessment_and_plan\"</span><span class=\"p\">,</span> <span class=\"s2\">\"pattern\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Assessment and Plan:\"</span><span class=\"p\">},</span>\n    <span class=\"p\">]</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">sectionizer</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"n\">section_patterns</span><span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">nlp</span><span class=\"o\">.</span><span class=\"n\">add_pipe</span><span class=\"p\">(</span><span class=\"n\">sectionizer</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">doc</span> <span class=\"o\">=</span> <span class=\"n\">nlp</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">nlp</span><span class=\"o\">.</span><span class=\"n\">ents</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"n\">Diabetes</span><span class=\"p\">,</span> <span class=\"n\">Pneumonia</span><span class=\"p\">,</span> <span class=\"n\">Atrial</span> <span class=\"n\">fibrillation</span><span class=\"p\">,</span> <span class=\"n\">pneumonia</span><span class=\"p\">)</span>\n\n\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"n\">section_name</span><span class=\"p\">,</span> <span class=\"n\">section_header</span><span class=\"p\">,</span> <span class=\"n\">section</span><span class=\"p\">)</span> <span class=\"ow\">in</span> <span class=\"n\">doc</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"o\">.</span><span class=\"n\">sections</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">section_name</span><span class=\"p\">,</span> <span class=\"n\">section_header</span><span class=\"p\">,</span> <span class=\"n\">section</span><span class=\"p\">,</span> <span class=\"n\">sep</span><span class=\"o\">=</span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">family_history</span>\n<span class=\"n\">Family</span> <span class=\"n\">History</span><span class=\"p\">:</span>\n<span class=\"n\">Family</span> <span class=\"n\">History</span><span class=\"p\">:</span>\n<span class=\"n\">Diabetes</span>\n\n<span class=\"n\">past_medical_history</span>\n<span class=\"n\">Past</span> <span class=\"n\">Medical</span> <span class=\"n\">History</span><span class=\"p\">:</span>\n<span class=\"n\">Past</span> <span class=\"n\">Medical</span> <span class=\"n\">History</span><span class=\"p\">:</span>\n<span class=\"n\">Pneumonia</span>\n\n<span class=\"n\">assessment_and_plan</span>\n<span class=\"n\">Assessment</span> <span class=\"ow\">and</span> <span class=\"n\">Plan</span><span class=\"p\">:</span>\n<span class=\"n\">Assessment</span> <span class=\"ow\">and</span> <span class=\"n\">Plan</span><span class=\"p\">:</span>\n<span class=\"n\">Atrial</span> <span class=\"n\">fibrillation</span><span class=\"o\">.</span> <span class=\"n\">There</span> <span class=\"ow\">is</span> <span class=\"n\">no</span> <span class=\"n\">evidence</span> <span class=\"n\">of</span> <span class=\"n\">pneumonia</span><span class=\"o\">.</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"k\">for</span> <span class=\"n\">ent</span> <span class=\"ow\">in</span> <span class=\"n\">doc</span><span class=\"o\">.</span><span class=\"n\">ents</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">ent</span><span class=\"p\">,</span> <span class=\"n\">ent</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"o\">.</span><span class=\"n\">section_title</span><span class=\"p\">)</span>\n    \n<span class=\"n\">Diabetes</span> <span class=\"n\">family_history</span>\n<span class=\"n\">Pneumonia</span> <span class=\"n\">past_medical_history</span>\n<span class=\"n\">Atrial</span> <span class=\"n\">fibrillation</span> <span class=\"n\">assessment_and_plan</span>\n<span class=\"n\">pneumonia</span> <span class=\"n\">assessment_and_plan</span>\n</pre>\n<p>Using <a href=\"https://github.com/medspacy/cycontext\" rel=\"nofollow\">cycontext</a>, you can also use a visualizer which shows section headers, along with any extracted entities and\noptionally cycontext modifiers, in an NER-style visualization.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">cycontext.viz</span> <span class=\"kn\">import</span> <span class=\"n\">visualize_ent</span>\n<span class=\"n\">visualize_ent</span><span class=\"p\">(</span><span class=\"n\">doc</span><span class=\"p\">,</span> <span class=\"n\">sections</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n</pre>\n<p align=\"center\"><img height=\"50%\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/df27ddb6232a54d3d9b67901f276447dff710277/696d672f76697a5f656e742e706e67\" width=\"50%\"></p>\n\n          </div>"}, "last_serial": 6931424, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "d5e5d78c5f8543f164f2330888f73d81", "sha256": "20fb10fa15e607505faba930cad7c00f7dd6aeccc1fa71f785f0a2e5e6450b6c"}, "downloads": -1, "filename": "clinical_sectionizer-0.0.1-py3.6.egg", "has_sig": false, "md5_digest": "d5e5d78c5f8543f164f2330888f73d81", "packagetype": "bdist_egg", "python_version": "3.6", "requires_python": null, "size": 34032, "upload_time": "2020-04-01T21:28:59", "upload_time_iso_8601": "2020-04-01T21:28:59.744831Z", "url": "https://files.pythonhosted.org/packages/23/88/c3d30132e0e128d54431aaf6de713c005aab94b2e6884445befac6a2fb65/clinical_sectionizer-0.0.1-py3.6.egg", "yanked": false}, {"comment_text": "", "digests": {"md5": "b3bd9fdc9dde237682ccfae7138fe706", "sha256": "2bfca6106bf0bf1710360cd9b87451b163f507d7f0f3e323b329e965b6cd0d16"}, "downloads": -1, "filename": "clinical_sectionizer-0.0.1-py3.7.egg", "has_sig": false, "md5_digest": "b3bd9fdc9dde237682ccfae7138fe706", "packagetype": "bdist_egg", "python_version": "3.7", "requires_python": null, "size": 41024, "upload_time": "2020-04-01T21:29:02", "upload_time_iso_8601": "2020-04-01T21:29:02.242065Z", "url": "https://files.pythonhosted.org/packages/d0/c0/7dc925ee1f3f86cb52d32c95d46ab82a8567ca323aa44cd26ff8ebf1b788/clinical_sectionizer-0.0.1-py3.7.egg", "yanked": false}, {"comment_text": "", "digests": {"md5": "4a46d279a7c61c5533ead04a5bafd444", "sha256": "90c201d1ff3084655260cc879650747f2217b83b2b3d6e4bfbefcf9882258bfa"}, "downloads": -1, "filename": "clinical_sectionizer-0.0.1.tar.gz", "has_sig": false, "md5_digest": "4a46d279a7c61c5533ead04a5bafd444", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17384, "upload_time": "2020-04-01T21:29:03", "upload_time_iso_8601": "2020-04-01T21:29:03.493640Z", "url": "https://files.pythonhosted.org/packages/4b/60/7a9ac4a4f0f369664b2497cb7dca403c2778fc552c52a0103f27d83f3283/clinical_sectionizer-0.0.1.tar.gz", "yanked": false}], "0.1.0": [{"comment_text": "", "digests": {"md5": "d2b6a80f011df56cbb4721f0a9e3a487", "sha256": "bf210e1988ccb29efc0006880817b45065e760b9eb8ccd08391744e8728ca708"}, "downloads": -1, "filename": "clinical_sectionizer-0.1.0.tar.gz", "has_sig": false, "md5_digest": "d2b6a80f011df56cbb4721f0a9e3a487", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17384, "upload_time": "2020-04-01T21:33:51", "upload_time_iso_8601": "2020-04-01T21:33:51.204799Z", "url": "https://files.pythonhosted.org/packages/70/cb/9f0e705f3a522b766c4056c6ff5d722fee8a01148ac4bb320bb1294f2040/clinical_sectionizer-0.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d2b6a80f011df56cbb4721f0a9e3a487", "sha256": "bf210e1988ccb29efc0006880817b45065e760b9eb8ccd08391744e8728ca708"}, "downloads": -1, "filename": "clinical_sectionizer-0.1.0.tar.gz", "has_sig": false, "md5_digest": "d2b6a80f011df56cbb4721f0a9e3a487", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17384, "upload_time": "2020-04-01T21:33:51", "upload_time_iso_8601": "2020-04-01T21:33:51.204799Z", "url": "https://files.pythonhosted.org/packages/70/cb/9f0e705f3a522b766c4056c6ff5d722fee8a01148ac4bb320bb1294f2040/clinical_sectionizer-0.1.0.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:18:58 2020"}