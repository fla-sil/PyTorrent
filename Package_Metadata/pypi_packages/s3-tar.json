{"info": {"author": "Eddy Hintze", "author_email": "eddy@hintze.co", "bugtrack_url": null, "classifiers": ["Operating System :: OS Independent", "Programming Language :: Python :: 3", "Topic :: Software Development :: Libraries :: Python Modules", "Topic :: Utilities"], "description": "# s3-tar\n\n[![PyPI](https://img.shields.io/pypi/v/s3-tar.svg)](https://pypi.python.org/pypi/s3-tar)\n[![PyPI](https://img.shields.io/pypi/l/s3-tar.svg)](https://pypi.python.org/pypi/s3-tar)  \n\n\nCreate a `tar`/`tar.gz`/`tar.bz2` file from many s3 files and stream back into s3.   \n\n## Install\n`pip install s3-tar`\n\n\n## Usage\n\nSet the environment variable `S3_ENDPOINT_URL` to use a custom s3 host (minio/etc...)  \n\nThis will use very little RAM. As it downloads files, it streams up the tar'd pieces as it goes.  \nYou can use more or less ram by playing with the options `cache_size` & `part_size_multiplier`.  \n\n\n### Command Line\nTo see all command line options run:  \n`s3-tar -h`\n\n\n### Import\n```python\nfrom s3_tar import S3Tar\n\n# Init the job\njob = S3Tar(\n    'YOUR_BUCKET_NAME',\n    'FILE_TO_SAVE_TO.tar',  # Use `tar.gz` or `tar.bz2` to enable compression\n    # target_bucket=None,  # Default: source bucket. Can be used to save the archive into a different bucket\n    # min_file_size='50MB',  # Default: None. The min size to make each tar file [B,KB,MB,GB,TB]. If set, a number will be added to each file name\n    # save_metadata=False,  # If True, and the file has metadata, save a file with the same name using the suffix of `.metadata.json`\n    # remove_keys=False,  # If True, will delete s3 files after the tar is created\n  \n    # ADVANCED USAGE\n    # allow_dups=False,  # When False, will raise ValueError if a file will overwrite another in the tar file, set to True to ignore\n    # cache_size=5,  # Default 5. Number of files to hold in memory to be processed\n    # s3_max_retries=4,  # Default is 4. This value is passed into boto3.client's s3 botocore config as the `max_attempts`\n    # part_size_multiplier=10,  # is multiplied by 5 MB to find how large each part that gets upload should be\n    # session=boto3.session.Session(),  # For custom aws session\n)\n# Add files, can call multiple times to add files from other directories\njob.add_files(\n    'FOLDER_IN_S3/',\n    # folder='',  # If a folder is set, then all files from this directory will be added into that folder in the tar file\n    # preserve_paths=False,  # If True, it will use the dir paths relative to the input path inside the tar file\n)\n# Add a single file at a time\njob.add_file(\n    'some/file_key.json',\n    # folder='',  # If a folder is set, then the file will be added into that folder in the tar file\n)\n# Start the tar'ing job after files have been added\njob.tar()\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/xtream1101/s3-tar", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "s3-tar", "package_url": "https://pypi.org/project/s3-tar/", "platform": "", "project_url": "https://pypi.org/project/s3-tar/", "project_urls": {"Homepage": "https://github.com/xtream1101/s3-tar"}, "release_url": "https://pypi.org/project/s3-tar/0.1.11/", "requires_dist": null, "requires_python": "", "summary": "Tar (and compress) files in s3", "version": "0.1.11", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>s3-tar</h1>\n<p><a href=\"https://pypi.python.org/pypi/s3-tar\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/06ed4bf7fa8dd53679d64f1c11ddb134befe90c4/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f73332d7461722e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/s3-tar\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/9f0692a4401fefff80f74846ec615b0d938f258a/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f73332d7461722e737667\"></a></p>\n<p>Create a <code>tar</code>/<code>tar.gz</code>/<code>tar.bz2</code> file from many s3 files and stream back into s3.</p>\n<h2>Install</h2>\n<p><code>pip install s3-tar</code></p>\n<h2>Usage</h2>\n<p>Set the environment variable <code>S3_ENDPOINT_URL</code> to use a custom s3 host (minio/etc...)</p>\n<p>This will use very little RAM. As it downloads files, it streams up the tar'd pieces as it goes.<br>\nYou can use more or less ram by playing with the options <code>cache_size</code> &amp; <code>part_size_multiplier</code>.</p>\n<h3>Command Line</h3>\n<p>To see all command line options run:<br>\n<code>s3-tar -h</code></p>\n<h3>Import</h3>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">s3_tar</span> <span class=\"kn\">import</span> <span class=\"n\">S3Tar</span>\n\n<span class=\"c1\"># Init the job</span>\n<span class=\"n\">job</span> <span class=\"o\">=</span> <span class=\"n\">S3Tar</span><span class=\"p\">(</span>\n    <span class=\"s1\">'YOUR_BUCKET_NAME'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'FILE_TO_SAVE_TO.tar'</span><span class=\"p\">,</span>  <span class=\"c1\"># Use `tar.gz` or `tar.bz2` to enable compression</span>\n    <span class=\"c1\"># target_bucket=None,  # Default: source bucket. Can be used to save the archive into a different bucket</span>\n    <span class=\"c1\"># min_file_size='50MB',  # Default: None. The min size to make each tar file [B,KB,MB,GB,TB]. If set, a number will be added to each file name</span>\n    <span class=\"c1\"># save_metadata=False,  # If True, and the file has metadata, save a file with the same name using the suffix of `.metadata.json`</span>\n    <span class=\"c1\"># remove_keys=False,  # If True, will delete s3 files after the tar is created</span>\n  \n    <span class=\"c1\"># ADVANCED USAGE</span>\n    <span class=\"c1\"># allow_dups=False,  # When False, will raise ValueError if a file will overwrite another in the tar file, set to True to ignore</span>\n    <span class=\"c1\"># cache_size=5,  # Default 5. Number of files to hold in memory to be processed</span>\n    <span class=\"c1\"># s3_max_retries=4,  # Default is 4. This value is passed into boto3.client's s3 botocore config as the `max_attempts`</span>\n    <span class=\"c1\"># part_size_multiplier=10,  # is multiplied by 5 MB to find how large each part that gets upload should be</span>\n    <span class=\"c1\"># session=boto3.session.Session(),  # For custom aws session</span>\n<span class=\"p\">)</span>\n<span class=\"c1\"># Add files, can call multiple times to add files from other directories</span>\n<span class=\"n\">job</span><span class=\"o\">.</span><span class=\"n\">add_files</span><span class=\"p\">(</span>\n    <span class=\"s1\">'FOLDER_IN_S3/'</span><span class=\"p\">,</span>\n    <span class=\"c1\"># folder='',  # If a folder is set, then all files from this directory will be added into that folder in the tar file</span>\n    <span class=\"c1\"># preserve_paths=False,  # If True, it will use the dir paths relative to the input path inside the tar file</span>\n<span class=\"p\">)</span>\n<span class=\"c1\"># Add a single file at a time</span>\n<span class=\"n\">job</span><span class=\"o\">.</span><span class=\"n\">add_file</span><span class=\"p\">(</span>\n    <span class=\"s1\">'some/file_key.json'</span><span class=\"p\">,</span>\n    <span class=\"c1\"># folder='',  # If a folder is set, then the file will be added into that folder in the tar file</span>\n<span class=\"p\">)</span>\n<span class=\"c1\"># Start the tar'ing job after files have been added</span>\n<span class=\"n\">job</span><span class=\"o\">.</span><span class=\"n\">tar</span><span class=\"p\">()</span>\n</pre>\n\n          </div>"}, "last_serial": 6711302, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "eaeb8040ebbc65faef306a3e6bd49ff6", "sha256": "b500a796675ae0b0ed623f8db9511b97b3f8bb0b3cf06f093fbcb59cffd73c5e"}, "downloads": -1, "filename": "s3-tar-0.0.1.tar.gz", "has_sig": false, "md5_digest": "eaeb8040ebbc65faef306a3e6bd49ff6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4569, "upload_time": "2020-02-08T21:29:11", "upload_time_iso_8601": "2020-02-08T21:29:11.141993Z", "url": "https://files.pythonhosted.org/packages/5f/99/1e9c6892b09001dfc40891d4d1684872b0408e1370861929f1b0679ed4c9/s3-tar-0.0.1.tar.gz", "yanked": false}], "0.1.0": [{"comment_text": "", "digests": {"md5": "b2bd4b3f34de8dccd045e47e6660fba0", "sha256": "f9d9fe77c02cec919c1197524b2d91e8ea91a54450077f875f9af1081e0c4388"}, "downloads": -1, "filename": "s3-tar-0.1.0.tar.gz", "has_sig": false, "md5_digest": "b2bd4b3f34de8dccd045e47e6660fba0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4780, "upload_time": "2020-02-09T16:45:30", "upload_time_iso_8601": "2020-02-09T16:45:30.112972Z", "url": "https://files.pythonhosted.org/packages/77/3e/8878d953bdd3e2507dcc94591a5d9c69ee22e4fe07e51561e8be738be2e0/s3-tar-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "e3c4b6e1a7aa7fdc3c792f1c1d38c372", "sha256": "3b9041ab8c1949a8894e797cccd2dc5df4004ff3275ae14cc8d20efa08239ba0"}, "downloads": -1, "filename": "s3-tar-0.1.1.tar.gz", "has_sig": false, "md5_digest": "e3c4b6e1a7aa7fdc3c792f1c1d38c372", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4813, "upload_time": "2020-02-09T18:15:46", "upload_time_iso_8601": "2020-02-09T18:15:46.313163Z", "url": "https://files.pythonhosted.org/packages/e9/b9/23f9e862333fd58d108d9c7332e1700a3368733adb7cb6cf255d51097337/s3-tar-0.1.1.tar.gz", "yanked": false}], "0.1.10": [{"comment_text": "", "digests": {"md5": "926d63ca480418e4b26b6066cca4e57b", "sha256": "6fff87438c49de6b124c142086723fec6e68b75ba32eea2805cb3267af457486"}, "downloads": -1, "filename": "s3-tar-0.1.10.tar.gz", "has_sig": false, "md5_digest": "926d63ca480418e4b26b6066cca4e57b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9855, "upload_time": "2020-02-26T18:34:03", "upload_time_iso_8601": "2020-02-26T18:34:03.899240Z", "url": "https://files.pythonhosted.org/packages/45/16/4ce13bcd60b2bc4d4c105af6c7a886c4681ac80ac84224f0840e60d02524/s3-tar-0.1.10.tar.gz", "yanked": false}], "0.1.11": [{"comment_text": "", "digests": {"md5": "d64b9682fa6dd2d98341befef07c5124", "sha256": "e1e9a4b6bdaa2962284cf9db88b321c71d4d29068be39ec9c9116f2e1f24d00b"}, "downloads": -1, "filename": "s3-tar-0.1.11.tar.gz", "has_sig": false, "md5_digest": "d64b9682fa6dd2d98341befef07c5124", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10193, "upload_time": "2020-02-27T14:24:36", "upload_time_iso_8601": "2020-02-27T14:24:36.502417Z", "url": "https://files.pythonhosted.org/packages/6b/8b/b7ecce875a90e46c22595aa150c58869df40050d42cd744a0b1e81da6aaf/s3-tar-0.1.11.tar.gz", "yanked": false}], "0.1.2": [{"comment_text": "", "digests": {"md5": "d97f0a06d3f62831cd38d3095700c0ee", "sha256": "fed6ae3620ef8d4519455bb5200e202bae1072470804bc458b9209ff7bb7c8be"}, "downloads": -1, "filename": "s3-tar-0.1.2.tar.gz", "has_sig": false, "md5_digest": "d97f0a06d3f62831cd38d3095700c0ee", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4868, "upload_time": "2020-02-09T20:26:26", "upload_time_iso_8601": "2020-02-09T20:26:26.047477Z", "url": "https://files.pythonhosted.org/packages/77/d8/2a901681622498fedb4e04dab2adf71176078f7b77d3ea9d2ac523080139/s3-tar-0.1.2.tar.gz", "yanked": false}], "0.1.3": [{"comment_text": "", "digests": {"md5": "0543264288ec00cd5a75590ee5ce8f93", "sha256": "6070dfd8ed2b7b335dca547c66e549db5a50a65dcd56587ba9ee7e91ace8c03c"}, "downloads": -1, "filename": "s3-tar-0.1.3.tar.gz", "has_sig": false, "md5_digest": "0543264288ec00cd5a75590ee5ce8f93", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5815, "upload_time": "2020-02-10T03:09:00", "upload_time_iso_8601": "2020-02-10T03:09:00.031209Z", "url": "https://files.pythonhosted.org/packages/72/cf/1550ca9a88a0ea54312b8a916f8059d9f725dcb5ac833a4413816b1d3678/s3-tar-0.1.3.tar.gz", "yanked": false}], "0.1.4": [{"comment_text": "", "digests": {"md5": "055a9411cfe4d922eb5c372ac0430312", "sha256": "1f8b86ec00c8951c5fb213ffda4c80f174497ddc849bfcd7a23fe2a509101ecb"}, "downloads": -1, "filename": "s3-tar-0.1.4.tar.gz", "has_sig": false, "md5_digest": "055a9411cfe4d922eb5c372ac0430312", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6083, "upload_time": "2020-02-11T18:07:41", "upload_time_iso_8601": "2020-02-11T18:07:41.649675Z", "url": "https://files.pythonhosted.org/packages/a4/fb/41825940dd559f3cf7159c9d1d51346511624b505aae27b14b29c8d89023/s3-tar-0.1.4.tar.gz", "yanked": false}], "0.1.5": [{"comment_text": "", "digests": {"md5": "23122b12d14f559bf9eb4ec78a282236", "sha256": "93a96c2ef057aa90f3f9425fd1f89e7ad57db82b83744b2c02a19d501f10888e"}, "downloads": -1, "filename": "s3-tar-0.1.5.tar.gz", "has_sig": false, "md5_digest": "23122b12d14f559bf9eb4ec78a282236", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8399, "upload_time": "2020-02-22T19:58:48", "upload_time_iso_8601": "2020-02-22T19:58:48.179886Z", "url": "https://files.pythonhosted.org/packages/91/9b/196aabe129fbeb6644f441ca8afe32cf2feb298d1f6f6855efd0c267b9ec/s3-tar-0.1.5.tar.gz", "yanked": false}], "0.1.6": [{"comment_text": "", "digests": {"md5": "441517fa9d713f763cf3e52fb2876694", "sha256": "c1582ccf202b7a0cae53239caf8efb5fda88fd2cdfe5840322045941e0771621"}, "downloads": -1, "filename": "s3-tar-0.1.6.tar.gz", "has_sig": false, "md5_digest": "441517fa9d713f763cf3e52fb2876694", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9300, "upload_time": "2020-02-24T21:28:04", "upload_time_iso_8601": "2020-02-24T21:28:04.095793Z", "url": "https://files.pythonhosted.org/packages/69/01/e2679b411f2e7d3a7f09df153152fd04993f0baae6647bfe1394678dad31/s3-tar-0.1.6.tar.gz", "yanked": false}], "0.1.7": [{"comment_text": "", "digests": {"md5": "bb5db0634846348ca7d4a45c1473f1d2", "sha256": "bd091933a20db45a81fad9808042b9250409d097c80d5d652baa10d1ff203a9e"}, "downloads": -1, "filename": "s3-tar-0.1.7.tar.gz", "has_sig": false, "md5_digest": "bb5db0634846348ca7d4a45c1473f1d2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9396, "upload_time": "2020-02-25T03:31:07", "upload_time_iso_8601": "2020-02-25T03:31:07.073999Z", "url": "https://files.pythonhosted.org/packages/b1/79/f315e0ef4866e1beeb7108c7359f272fbdbde9a56a1cea45bde552c26e69/s3-tar-0.1.7.tar.gz", "yanked": false}], "0.1.8": [{"comment_text": "", "digests": {"md5": "82727f0aa6852d148f4661c770d2984f", "sha256": "e9bd1d92e1be06f711203521d5531883b4a7381652ca361f56128bd445628a49"}, "downloads": -1, "filename": "s3-tar-0.1.8.tar.gz", "has_sig": false, "md5_digest": "82727f0aa6852d148f4661c770d2984f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9408, "upload_time": "2020-02-25T13:18:25", "upload_time_iso_8601": "2020-02-25T13:18:25.318184Z", "url": "https://files.pythonhosted.org/packages/a9/23/9c07041681ae1dcf486d4479dd457227161cb2c40673609fbff420e83ac0/s3-tar-0.1.8.tar.gz", "yanked": false}], "0.1.9": [{"comment_text": "", "digests": {"md5": "b5820c1099de5f037ed9164bf8db2862", "sha256": "3219dca3f9a879aaeeedeaed6719f883d7e6a4e87527ea6dd25a94640df54968"}, "downloads": -1, "filename": "s3-tar-0.1.9.tar.gz", "has_sig": false, "md5_digest": "b5820c1099de5f037ed9164bf8db2862", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9410, "upload_time": "2020-02-25T13:45:09", "upload_time_iso_8601": "2020-02-25T13:45:09.610207Z", "url": "https://files.pythonhosted.org/packages/a3/79/89e168d3e86048d5d9f8d88166a1cd4200d04ff9d4a1e4696d967bdc8e81/s3-tar-0.1.9.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d64b9682fa6dd2d98341befef07c5124", "sha256": "e1e9a4b6bdaa2962284cf9db88b321c71d4d29068be39ec9c9116f2e1f24d00b"}, "downloads": -1, "filename": "s3-tar-0.1.11.tar.gz", "has_sig": false, "md5_digest": "d64b9682fa6dd2d98341befef07c5124", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10193, "upload_time": "2020-02-27T14:24:36", "upload_time_iso_8601": "2020-02-27T14:24:36.502417Z", "url": "https://files.pythonhosted.org/packages/6b/8b/b7ecce875a90e46c22595aa150c58869df40050d42cd744a0b1e81da6aaf/s3-tar-0.1.11.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:59:34 2020"}