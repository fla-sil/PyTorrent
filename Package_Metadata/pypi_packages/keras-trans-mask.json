{"info": {"author": "CyberZHG", "author_email": "CyberZHG@users.noreply.github.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.6"], "description": "# Keras Transfer Masking\n\n[![Travis](https://travis-ci.org/CyberZHG/keras-trans-mask.svg)](https://travis-ci.org/CyberZHG/keras-trans-mask)\n[![Coverage](https://coveralls.io/repos/github/CyberZHG/keras-trans-mask/badge.svg?branch=master)](https://coveralls.io/github/CyberZHG/keras-trans-mask)\n\nRemove and restore masks for layers that do not support masking. Note that the result may be incorrect in most cases.\n\n## Install\n\n```bash\npip install keras-trans-mask\n```\n\n## Usage\n\n`Conv1D` does not support masking. By removing the mask you'll get a \"nearly correct\" output:\n\n```python\nimport keras\nfrom keras_trans_mask import RemoveMask, RestoreMask\n\ninput_layer = keras.layers.Input(shape=(None,))\nembed_layer = keras.layers.Embedding(\n    input_dim=10,\n    output_dim=15,\n    mask_zero=True,\n)(input_layer)\nremoved_layer = RemoveMask()(embed_layer)  # Remove mask from embeddings\nconv_layer = keras.layers.Conv1D(\n    filters=32,\n    kernel_size=3,\n    padding='same',\n)(removed_layer)\nrestored_layer = RestoreMask()([conv_layer, embed_layer])  # Restore mask from embeddings\nlstm_layer = keras.layers.LSTM(units=5)(restored_layer)\ndense_layer = keras.layers.Dense(units=2, activation='softmax')(lstm_layer)\nmodel = keras.models.Model(inputs=input_layer, outputs=dense_layer)\nmodel.compile(optimizer='adam', loss='sparse_categorical_crossentropy')\nmodel.summary()\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/CyberZHG/keras-trans-mask", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "keras-trans-mask", "package_url": "https://pypi.org/project/keras-trans-mask/", "platform": "", "project_url": "https://pypi.org/project/keras-trans-mask/", "project_urls": {"Homepage": "https://github.com/CyberZHG/keras-trans-mask"}, "release_url": "https://pypi.org/project/keras-trans-mask/0.3.0/", "requires_dist": null, "requires_python": "", "summary": "Transfer masking in Keras", "version": "0.3.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Keras Transfer Masking</h1>\n<p><a href=\"https://travis-ci.org/CyberZHG/keras-trans-mask\" rel=\"nofollow\"><img alt=\"Travis\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1fffc208288cd9bab73935cf06217a26b3147cb3/68747470733a2f2f7472617669732d63692e6f72672f43796265725a48472f6b657261732d7472616e732d6d61736b2e737667\"></a>\n<a href=\"https://coveralls.io/github/CyberZHG/keras-trans-mask\" rel=\"nofollow\"><img alt=\"Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5c30278337a4c5c4ceccbc9471f4f8fcc0acb158/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f43796265725a48472f6b657261732d7472616e732d6d61736b2f62616467652e7376673f6272616e63683d6d6173746572\"></a></p>\n<p>Remove and restore masks for layers that do not support masking. Note that the result may be incorrect in most cases.</p>\n<h2>Install</h2>\n<pre>pip install keras-trans-mask\n</pre>\n<h2>Usage</h2>\n<p><code>Conv1D</code> does not support masking. By removing the mask you'll get a \"nearly correct\" output:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">keras</span>\n<span class=\"kn\">from</span> <span class=\"nn\">keras_trans_mask</span> <span class=\"kn\">import</span> <span class=\"n\">RemoveMask</span><span class=\"p\">,</span> <span class=\"n\">RestoreMask</span>\n\n<span class=\"n\">input_layer</span> <span class=\"o\">=</span> <span class=\"n\">keras</span><span class=\"o\">.</span><span class=\"n\">layers</span><span class=\"o\">.</span><span class=\"n\">Input</span><span class=\"p\">(</span><span class=\"n\">shape</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">,))</span>\n<span class=\"n\">embed_layer</span> <span class=\"o\">=</span> <span class=\"n\">keras</span><span class=\"o\">.</span><span class=\"n\">layers</span><span class=\"o\">.</span><span class=\"n\">Embedding</span><span class=\"p\">(</span>\n    <span class=\"n\">input_dim</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">,</span>\n    <span class=\"n\">output_dim</span><span class=\"o\">=</span><span class=\"mi\">15</span><span class=\"p\">,</span>\n    <span class=\"n\">mask_zero</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n<span class=\"p\">)(</span><span class=\"n\">input_layer</span><span class=\"p\">)</span>\n<span class=\"n\">removed_layer</span> <span class=\"o\">=</span> <span class=\"n\">RemoveMask</span><span class=\"p\">()(</span><span class=\"n\">embed_layer</span><span class=\"p\">)</span>  <span class=\"c1\"># Remove mask from embeddings</span>\n<span class=\"n\">conv_layer</span> <span class=\"o\">=</span> <span class=\"n\">keras</span><span class=\"o\">.</span><span class=\"n\">layers</span><span class=\"o\">.</span><span class=\"n\">Conv1D</span><span class=\"p\">(</span>\n    <span class=\"n\">filters</span><span class=\"o\">=</span><span class=\"mi\">32</span><span class=\"p\">,</span>\n    <span class=\"n\">kernel_size</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">,</span>\n    <span class=\"n\">padding</span><span class=\"o\">=</span><span class=\"s1\">'same'</span><span class=\"p\">,</span>\n<span class=\"p\">)(</span><span class=\"n\">removed_layer</span><span class=\"p\">)</span>\n<span class=\"n\">restored_layer</span> <span class=\"o\">=</span> <span class=\"n\">RestoreMask</span><span class=\"p\">()([</span><span class=\"n\">conv_layer</span><span class=\"p\">,</span> <span class=\"n\">embed_layer</span><span class=\"p\">])</span>  <span class=\"c1\"># Restore mask from embeddings</span>\n<span class=\"n\">lstm_layer</span> <span class=\"o\">=</span> <span class=\"n\">keras</span><span class=\"o\">.</span><span class=\"n\">layers</span><span class=\"o\">.</span><span class=\"n\">LSTM</span><span class=\"p\">(</span><span class=\"n\">units</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">)(</span><span class=\"n\">restored_layer</span><span class=\"p\">)</span>\n<span class=\"n\">dense_layer</span> <span class=\"o\">=</span> <span class=\"n\">keras</span><span class=\"o\">.</span><span class=\"n\">layers</span><span class=\"o\">.</span><span class=\"n\">Dense</span><span class=\"p\">(</span><span class=\"n\">units</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">activation</span><span class=\"o\">=</span><span class=\"s1\">'softmax'</span><span class=\"p\">)(</span><span class=\"n\">lstm_layer</span><span class=\"p\">)</span>\n<span class=\"n\">model</span> <span class=\"o\">=</span> <span class=\"n\">keras</span><span class=\"o\">.</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">(</span><span class=\"n\">inputs</span><span class=\"o\">=</span><span class=\"n\">input_layer</span><span class=\"p\">,</span> <span class=\"n\">outputs</span><span class=\"o\">=</span><span class=\"n\">dense_layer</span><span class=\"p\">)</span>\n<span class=\"n\">model</span><span class=\"o\">.</span><span class=\"n\">compile</span><span class=\"p\">(</span><span class=\"n\">optimizer</span><span class=\"o\">=</span><span class=\"s1\">'adam'</span><span class=\"p\">,</span> <span class=\"n\">loss</span><span class=\"o\">=</span><span class=\"s1\">'sparse_categorical_crossentropy'</span><span class=\"p\">)</span>\n<span class=\"n\">model</span><span class=\"o\">.</span><span class=\"n\">summary</span><span class=\"p\">()</span>\n</pre>\n\n          </div>"}, "last_serial": 5603988, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "b4ecba0851069430ee766492969668b0", "sha256": "3a57d662b9a841acdfb8ce9ca88dfecb88696e097b17436897b43787f2f57691"}, "downloads": -1, "filename": "keras-trans-mask-0.2.0.tar.gz", "has_sig": false, "md5_digest": "b4ecba0851069430ee766492969668b0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2954, "upload_time": "2019-07-30T04:13:52", "upload_time_iso_8601": "2019-07-30T04:13:52.630200Z", "url": "https://files.pythonhosted.org/packages/30/0f/3ef6b484773952aba2f2ff782e07e8de2db14146fe28987279f91dfc1e96/keras-trans-mask-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "11b394cbc70a342ae3958d262279779c", "sha256": "07a8b240bb83497d86b4b5ee16e318acde3344a680b8cc93bb382d5233d44b32"}, "downloads": -1, "filename": "keras-trans-mask-0.3.0.tar.gz", "has_sig": false, "md5_digest": "11b394cbc70a342ae3958d262279779c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3139, "upload_time": "2019-07-30T04:55:44", "upload_time_iso_8601": "2019-07-30T04:55:44.379535Z", "url": "https://files.pythonhosted.org/packages/69/7e/ab721f17aeb089144c52d26355ff5d27f63611c54bd3e3065829488e8d08/keras-trans-mask-0.3.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "11b394cbc70a342ae3958d262279779c", "sha256": "07a8b240bb83497d86b4b5ee16e318acde3344a680b8cc93bb382d5233d44b32"}, "downloads": -1, "filename": "keras-trans-mask-0.3.0.tar.gz", "has_sig": false, "md5_digest": "11b394cbc70a342ae3958d262279779c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3139, "upload_time": "2019-07-30T04:55:44", "upload_time_iso_8601": "2019-07-30T04:55:44.379535Z", "url": "https://files.pythonhosted.org/packages/69/7e/ab721f17aeb089144c52d26355ff5d27f63611c54bd3e3065829488e8d08/keras-trans-mask-0.3.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:50:08 2020"}