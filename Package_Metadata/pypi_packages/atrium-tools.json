{"info": {"author": "Chris Arnault", "author_email": "arnault@lal.in2p3.fr", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: CEA CNRS Inria Logiciel Libre License, version 2.1 (CeCILL-2.1)", "Programming Language :: Python :: 3.7"], "description": "Ce package rassemble un ensemble d'outils permettant de communiquer avec, ou agir sur, la base documentaire Atrium\nen utilisant l'interface APIREST entre le serveur Nuxeo et des applications clientes\n\nDeux composantes principales:\n\n- **atrium_shell**: application cliente offrant plusieurs actions de navigation vers la base Atrium\n- **nuxeolib**: la librairie de base impl\u00e9mentant l'APIREST selon le protocole d\u00e9crit dans la documentation Nuxeo,\n  ainsi que plusieurs utilitaires bas\u00e9s sur les conventions Atrium.\n\n\nInstallation\n============\n\nInstallation de base\n--------------------\n\nIci, nous allons exploiter le m\u00e9canisme standard du monde Python: **pip** pour installer ce package Python.\n\nLe package **atrium_tools** a \u00e9t\u00e9 configur\u00e9 au format standard des packages Python, et a \u00e9t\u00e9 d\u00e9pos\u00e9 dans le\nd\u00e9p\u00f4t officiel **PyPi**.\n\nLe seul mode d'installation propos\u00e9 ici est bas\u00e9 sur les environnements virtuels de Python. Nous supposons \nque Python (version >= 3) est install\u00e9 dans votre syst\u00e8me\n\n    > python -V\n    > python -m venv atrium\n\n    > source atrium/bin/activate (*sous Unix*)\n    > atrium \\Scripts\\activate (*sous Windows*)\n\n    > pip install atrium-tools\n    > python -m atrium_shell.atrium_shell login=<myatriumaccount> -ls\n\nPour mettre \u00e0 jour la version du package:\n\n    > pip install --upgrade atrium-tools\n\nIl est possible de questionner l'installation actuelle:\n\n    > pip show atrium-tools\n\n\nOu bien de d\u00e9sinstaller le package:\n\n    > pip uninstall -y atrium-tools\n\nEt de d\u00e9sactiver l'environ `atrium` Python\n\n    > deactivate\n\nL'application atrium_shell\n==========================\n\nIntroduction\n------------\n\nCette application permet d'interroger la base Atrium un peu comme la commande **ls** en unix ou **dir** en windows.\n\nAuthentification\n----------------\n\nPour acc\u00e9der au serveur Nuxeo, une authentification est n\u00e9cessaire. Deux m\u00e9thodes d'authentification sont possibles:\n\n- en utilisant le param\u00e8tre ``login=xxx`` sur la ligne de commande. Ensuite, le mot de passe\n  sera demand\u00e9 en interrogation cach\u00e9e\n\n- en utilisant le fichier **.netrc** (https://sites.google.com/site/diezone/ftp---file-transfert-protocol/ftp---le-fichier-netrc)\n\nIl est ainsi possible de sp\u00e9cifier le couple `<user id>/<mdp>` dans le fichier Unix/Windows standard `$HOME/.netrc`\nCe fichier doit obligatoirement \u00eatre prot\u00e9g\u00e9 ainsi:\n\n    > ls -al ../.netrc\n    -rw------- 1 arnault SI 399 Apr  8 17:10 ../.netrc\n\nAutrement dit, seul l'utilisateur doit avoir acc\u00e8s \u00e0 ce document\n\nCe fichier texte contient des lignes au format suivant:\n\n    machine atrium.in2p3.fr login <identifiant> password <motdepasse>\n\nSi le fichier `~/.netrc` existe et que la variable d'environnement `HOME` est d\u00e9finie, \nalors il ne sera pas n\u00e9cessaire d'utiliser l'argument `login=xxx` \net la connexion Atrium sera \u00e9tablie automatiquement avec l'identifant d\u00e9crit dans le ficher `~/.netrc` \n\n\nArguments\n---------\n\n    login = str      : Compte Atrium (le mot de passe sera demand\u00e9)\n\n    cd    =  str[/]  : Dossier courant \n                       Par exemple cd=/Laboratoires/IPNO\n\n    user   = str[]   : Specification alternative pour le dossier au lieu de cd\n                       exemple: arnault@lal.in2p3.fr\n\n\n    cp      = str[]  : document \u00e0 copier\n    set_acl = str[]  : acl \u00e0 installer sur le dossier sp\u00e9cifi\u00e9 (<permission>,<group/user>)\n    rm_acl  = str[]  : acl \u00e0 supprimer du le dossier sp\u00e9cifi\u00e9 (<permission>,<group/user>)\n    subs_acl = str[] : acl \u00e0 supprimer du le dossier sp\u00e9cifi\u00e9 (<permission1>,<group1/user1>,<permission2>,<group2/user2>)\n\n    permission:\n        Publisher\n        Approver\n        Validator\n        Reader\n        PublisherSection\n        LocalAdmin\n        Writer\n\n    to      = str[]  : document destination (cp, set_acl, rm_acl, subs_acl)\n\n    depth  =  int[0] : Profondeur dans l'arborescence. Par d\u00e9faut la valeur 0 indique le seul premier niveau\n\n    -ls              : Listing des documents \u00e0 partir d'un espace donn\u00e9\n    -csv             : Production d'un fichier CSV d\u00e9crivant l'arborescence des documents \n    -draw            : Production d'un graphique d\u00e9crivant l'arborescence des documents \n    -rights          : Controle l'affichage des droits\n\nQuelques pr\u00e9cisions:\n\n* La cible de d\u00e9part peut \u00eatre sp\u00e9cifi\u00e9e:\n    * soit avec `cd` pour un espace institutionnel\n    * soit avec `user` pour un espace personnel, en sp\u00e9cifiant l'intitul\u00e9 du compte Atrium\n* L'option `set_acl` s'applique uniquement au dossier sp\u00e9cifi\u00e9 avec `to=<dossier>`\n* L'option `rm_acl` s'applique r\u00e9cursivement \u00e0 tous les dossiers enfants \u00e0 partir du dossier `to=<dossier`\n* L'option `subs_acl` s'applique r\u00e9cursivement \u00e0 tous les dossiers enfants \u00e0 partir du dossier `to=<dossier`\n* Dans l'option `subs_acl` on peut substituer une groupe/user ind\u00e9pendemment de la permission en utilisant \"%\" pour la permission\n* Les options `ls`, `csv`, `draw` exploitent l'option `depth=n`\n\nUtilisation\n-----------\n\nQuelques exemples d'utilisation (*dans les exemples ci-dessous on suppose que \nl'authentification est r\u00e9alis\u00e9e via le fichier .netrc*):\n\n    >>> python -m atrium_shell.atrium_shell -ls cd=/Laboratoires/LAL/ATLAS\n    //Atrium/Laboratoires/LAL/ATLAS\n      ATLAS/PIXELS\n      ATLAS/CALORIM\u00c9TRIE Argon Liquide [Block]\n      ATLAS/HGTD (High Granularity Timing Detector)\n\n\n    >>> python -m atrium_shell.atrium_shell -ls cd=/Laboratoires/LAL/ATLAS depth=1\n    //Atrium/Laboratoires/LAL/ATLAS\n      ATLAS/PIXELS\n        ATLAS/PIXELS/M\u00e9canique [Block]\n        ATLAS/PIXELS/Om\u00e9gapix [Block]\n        ATLAS/PIXELS/FEi4 [Block]\n        ATLAS/PIXELS/Doping_Profile [Block]\n        ATLAS/PIXELS/RD53 [Block]\n        ATLAS/PIXELS/Interconnexion [Block]\n        ATLAS/PIXELS/Acquisition [Block]\n        ATLAS/PIXELS/atlas_synchro [Block]\n        ATLAS/PIXELS/Salle Blanche PIXELS\n      ATLAS/CALORIM\u00c9TRIE Argon Liquide [Block]\n        ATLAS/CALORIM\u00c9TRIE Argon Liquide/Banc de tests robotis\u00e9\n      ATLAS/HGTD (High Granularity Timing Detector)\n        ATLAS/HGTD (High Granularity Timing Detector)/Ing\u00e9nierie M\u00e9canique\n        ATLAS/HGTD (High Granularity Timing Detector)/Recrutement-AI bac+2\n\n\n\nNuxeolib\n=========\n\nCe module contient tous les appels de bas niveau vers l'APIREST de Nuxeo, et permet de d\u00e9velopper des applications\nutilitaires acc\u00e9dant \u00e0 la base de donn\u00e9es Atrium.\n\n\n- checkout(ref)\n- checkin(ref, version='minor', comment='')\n- checkoutin(ref, version='minor', comment='')\n- create_tree_snapshot(ref, version='minor')\n- create_version(ref, increment='Minor', save_document=True)\n- set_property(ref, xpath, value)\n- delete(ref)\n- get_children(ref)\n- get_parent(ref)\n- get_versions(ref)\n- lock(ref)\n- unlock(ref)\n- move(ref, target, name=None)\n- publish(ref, target)\n- copy(ref, target, name=None)\n- add_permission(ref, permission, user, acl='local')\n- get_relations(ref)\n- delete_relation(source, destination)\n- create_relation(ref, destination)\n- query(query, language=None)\n- get_blob(ref)\n- get_blobs(ref)\n- attach_blob(ref, blob)\n-\n\n- open_batch()\n- close_batch(batch_id)\n- upload_files(input_names=None, batch_id=None)\n- change_title(uid, title)\n- get_document(name)\n\n    get the uid of a document from its path\n\n- create_document_with_properties(path,\n                                  name,\n                                  doc_type,\n                                  properties=None,\n                                  files=None,\n                                  from_uid=None)\n\n\n         We create a document in one single operation:\n          - mandatory args are: path, name, doc_type\n          - properties can be added(dc:title, uid:minor_version, dc:description, ...)\n          - files: joint files.\n\n\n- update_document_with_properties(uid,\n                                  title,\n                                  doc_type,\n                                  properties=None,\n                                  files=None)\n\n        this function is similar to the create function, but for updating an existing document.\n\n\n\n- read_document(doc_id)\n\n        read the properties of an existing document\n\n\n- get_acls(doc_id)\n- delete_document(doc_id)\n- change_document_state(uid, state=u'')\n- read_user(name)\n\n        read the properties of an user account\n\n\n- create_user(user,\n              first_name=None,\n              last_name=None,\n              email='a@b.c',\n              password='user',\n              company=None)\n\n             Basic creation function the required properties are:\n               identifier (generally it's the email\n               first name\n               name\n               email\n               password\n\n\n- update_user(user,\n              first_name=None,\n              last_name=None,\n              email=None,\n              password=None,\n              company=None,\n              is_inactive=None)\n- delete_user(user)\n- get_users(query=u'*', data=False, max_results=None)\n\n          query all users using a wildcard expression\n          this internally get a multipage request and assembles the pages\n\n\n- get_directory(domain)\n\n        query a vocabulary\n\n\n- add_directory_entry(directory, entry)\n- get_groups(pattern)\n- create_group(group)\n- get_group(group)\n- add_user_to_group(group, user)\n- add_subgroup_to_group(group, subgroup)\n- delete_group(group)\n-\n-\n\n- init_session(host=u'local', login='', password='', auth='')\n\n    Initialise the session according to the host modes: local, dev, prod\n\n- connect(host, login, auth='')\n\n    on top of the init_session function permit to enter the hidden password\n\n- get_login()\n\n    retreive the actual login\n\n- purge_document(session, path, title='', edms='')\n\n    Deep suppression of a given document (including from the Corbeille)\n\n- init_objets_from_string(lignes, constructor, key, output_dict)\n\n\n\n- init_objets(file_name, constructor, key, output_dict)\n\n    Read a CSV file , building a dictionary of objects\n\n    - we assume that the input file obeys the following format:\n      + the first line contains the object field list\n      + fields are separated by ';'\n      + empty lines are ignored\n      + lines starting with '#' are ignored\n    - every line generates one object using the specified constructor\n    - the specified key is the key to the dictionary\n\n- set_atrium_functional_domain(session, user, domain, role)\n\n    call the SetAtriumFunctionalDomain primitive\n\n- set_atrium_is_inactive(session, user, is_inactive=True)\n\n    call the SetAtriumIsInactive primitive\n\n- test_atrium_is_inactive(session, user)\n\n    test if atrium_is_inactive\n\n- get_fds(session, cat=\"Laboratoire\")\n\n    Reading all functional domains for Laboratoires|Projets|Activites declared in the Atrium base :\n\n     we get all primary spaces of type Laboratoire|Projet|Activite then whe read the FunctionalDomain metadata\n     this approach is needed since the FunctionalDomain vocabulary does not differenciate\n        Laboratoires | Projets | Activit\u00e9s\n\n- test_user_role(session, user, fd)\n\n    test if this user has a role for this functional domain\n\n     return 2 values:\n     bool = True if the user exists\n     role or None = granted role.\n\n- get_user_workspace(host, session, email)\n\n    Get the user personal space to build the Atrium perma-link\n\n- build_account_creation_mail(email, prenom, nom, pwd, racine, url, role='Reader')\n\n    Construct a mail contents after the account creation\n     - this mail give\n      + the password\n      + the perma-link to the personal space\n\n- build_logging_creation_mail(email, prenom, nom, racine, role='Reader')\n\n    Construct a mail contents after the account creation\n     - this mail give\n      + the password\n      + the perma-link to the personal space\n\n- sendmail(sender, to, message)\n\n    Sending a email to one single destination\n    the message itself has to be constructed using the MIMEText facility.\n\n- get_random_password()\n\n    Utility to create a random password\n\n- create_user(host, session, nom, prenom, email, racine)\n\n    creation of a user account\n     - specify the host mode (local|dev|prod)\n     - give name and first name\n     - email is the account identifier\n     - specify the functional domain (IE. laboratory)\n\nInstallation en tant que d\u00e9veloppeur, du package **atrium_tools**\n-----------------------------------------------------------------\n\nOn peut installer ce package \u00e0 partir de **GitLab**, par exemple en t\u00e9l\u00e9chargeant et installant l'archive au format ZIP.\nMais il est aussi possible de *cloner* directement le projet \u00e0 partir de **GitLab** si on souhaite contribuer\nau d\u00e9veloppement.\n\nCe logiciel est enti\u00e8rement bas\u00e9 sur le langage Python. Il est d\u00e9velopp\u00e9 en compatibilit\u00e9 avec la\nversion >=3.6 du langage Python.\nDonc il est indispensable qu'une version >= 3.6 du langage Python soit install\u00e9e sur votre machine\n\nEnsuite pour installer la suite logicielle voici les deux m\u00e9thodes:\n\n1. en clonant le d\u00e9p\u00f4t Git::\n\n    > mkdir myworkspace\n    > cd myworkspace\n    > git clone git@gitlab.in2p3.fr:atrium/atrium_tools.git\n\npetit rappel pour modifier un \u00e9l\u00e9ment en git::\n\n    > [edit]...\n    > git status\n    > git commit -am \"porquoi cette modification\"\n    > git push\n\n\n2. en r\u00e9cup\u00e9rant une archive ZIP \u00e0 partir de GitLab::\n\n    \u00e0 partir du site GitLab https://gitlab.in2p3.fr/atrium/atrium_tools\n    installer et d\u00e9zipper l'archive\n\n\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://atrium.in2p3.fr/", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "atrium-tools", "package_url": "https://pypi.org/project/atrium-tools/", "platform": "", "project_url": "https://pypi.org/project/atrium-tools/", "project_urls": {"Homepage": "https://atrium.in2p3.fr/"}, "release_url": "https://pypi.org/project/atrium-tools/4.3.3/", "requires_dist": null, "requires_python": "", "summary": "Atrium utilities", "version": "4.3.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>Ce package rassemble un ensemble d'outils permettant de communiquer avec, ou agir sur, la base documentaire Atrium\nen utilisant l'interface APIREST entre le serveur Nuxeo et des applications clientes</p>\n<p>Deux composantes principales:</p>\n<ul>\n<li><strong>atrium_shell</strong>: application cliente offrant plusieurs actions de navigation vers la base Atrium</li>\n<li><strong>nuxeolib</strong>: la librairie de base impl\u00e9mentant l'APIREST selon le protocole d\u00e9crit dans la documentation Nuxeo,\nainsi que plusieurs utilitaires bas\u00e9s sur les conventions Atrium.</li>\n</ul>\n<h1>Installation</h1>\n<h2>Installation de base</h2>\n<p>Ici, nous allons exploiter le m\u00e9canisme standard du monde Python: <strong>pip</strong> pour installer ce package Python.</p>\n<p>Le package <strong>atrium_tools</strong> a \u00e9t\u00e9 configur\u00e9 au format standard des packages Python, et a \u00e9t\u00e9 d\u00e9pos\u00e9 dans le\nd\u00e9p\u00f4t officiel <strong>PyPi</strong>.</p>\n<p>Le seul mode d'installation propos\u00e9 ici est bas\u00e9 sur les environnements virtuels de Python. Nous supposons\nque Python (version &gt;= 3) est install\u00e9 dans votre syst\u00e8me</p>\n<pre><code>&gt; python -V\n&gt; python -m venv atrium\n\n&gt; source atrium/bin/activate (*sous Unix*)\n&gt; atrium \\Scripts\\activate (*sous Windows*)\n\n&gt; pip install atrium-tools\n&gt; python -m atrium_shell.atrium_shell login=&lt;myatriumaccount&gt; -ls\n</code></pre>\n<p>Pour mettre \u00e0 jour la version du package:</p>\n<pre><code>&gt; pip install --upgrade atrium-tools\n</code></pre>\n<p>Il est possible de questionner l'installation actuelle:</p>\n<pre><code>&gt; pip show atrium-tools\n</code></pre>\n<p>Ou bien de d\u00e9sinstaller le package:</p>\n<pre><code>&gt; pip uninstall -y atrium-tools\n</code></pre>\n<p>Et de d\u00e9sactiver l'environ <code>atrium</code> Python</p>\n<pre><code>&gt; deactivate\n</code></pre>\n<h1>L'application atrium_shell</h1>\n<h2>Introduction</h2>\n<p>Cette application permet d'interroger la base Atrium un peu comme la commande <strong>ls</strong> en unix ou <strong>dir</strong> en windows.</p>\n<h2>Authentification</h2>\n<p>Pour acc\u00e9der au serveur Nuxeo, une authentification est n\u00e9cessaire. Deux m\u00e9thodes d'authentification sont possibles:</p>\n<ul>\n<li>\n<p>en utilisant le param\u00e8tre <code>login=xxx</code> sur la ligne de commande. Ensuite, le mot de passe\nsera demand\u00e9 en interrogation cach\u00e9e</p>\n</li>\n<li>\n<p>en utilisant le fichier <strong>.netrc</strong> (<a href=\"https://sites.google.com/site/diezone/ftp---file-transfert-protocol/ftp---le-fichier-netrc\" rel=\"nofollow\">https://sites.google.com/site/diezone/ftp---file-transfert-protocol/ftp---le-fichier-netrc</a>)</p>\n</li>\n</ul>\n<p>Il est ainsi possible de sp\u00e9cifier le couple <code>&lt;user id&gt;/&lt;mdp&gt;</code> dans le fichier Unix/Windows standard <code>$HOME/.netrc</code>\nCe fichier doit obligatoirement \u00eatre prot\u00e9g\u00e9 ainsi:</p>\n<pre><code>&gt; ls -al ../.netrc\n-rw------- 1 arnault SI 399 Apr  8 17:10 ../.netrc\n</code></pre>\n<p>Autrement dit, seul l'utilisateur doit avoir acc\u00e8s \u00e0 ce document</p>\n<p>Ce fichier texte contient des lignes au format suivant:</p>\n<pre><code>machine atrium.in2p3.fr login &lt;identifiant&gt; password &lt;motdepasse&gt;\n</code></pre>\n<p>Si le fichier <code>~/.netrc</code> existe et que la variable d'environnement <code>HOME</code> est d\u00e9finie,\nalors il ne sera pas n\u00e9cessaire d'utiliser l'argument <code>login=xxx</code>\net la connexion Atrium sera \u00e9tablie automatiquement avec l'identifant d\u00e9crit dans le ficher <code>~/.netrc</code></p>\n<h2>Arguments</h2>\n<pre><code>login = str      : Compte Atrium (le mot de passe sera demand\u00e9)\n\ncd    =  str[/]  : Dossier courant \n                   Par exemple cd=/Laboratoires/IPNO\n\nuser   = str[]   : Specification alternative pour le dossier au lieu de cd\n                   exemple: arnault@lal.in2p3.fr\n\n\ncp      = str[]  : document \u00e0 copier\nset_acl = str[]  : acl \u00e0 installer sur le dossier sp\u00e9cifi\u00e9 (&lt;permission&gt;,&lt;group/user&gt;)\nrm_acl  = str[]  : acl \u00e0 supprimer du le dossier sp\u00e9cifi\u00e9 (&lt;permission&gt;,&lt;group/user&gt;)\nsubs_acl = str[] : acl \u00e0 supprimer du le dossier sp\u00e9cifi\u00e9 (&lt;permission1&gt;,&lt;group1/user1&gt;,&lt;permission2&gt;,&lt;group2/user2&gt;)\n\npermission:\n    Publisher\n    Approver\n    Validator\n    Reader\n    PublisherSection\n    LocalAdmin\n    Writer\n\nto      = str[]  : document destination (cp, set_acl, rm_acl, subs_acl)\n\ndepth  =  int[0] : Profondeur dans l'arborescence. Par d\u00e9faut la valeur 0 indique le seul premier niveau\n\n-ls              : Listing des documents \u00e0 partir d'un espace donn\u00e9\n-csv             : Production d'un fichier CSV d\u00e9crivant l'arborescence des documents \n-draw            : Production d'un graphique d\u00e9crivant l'arborescence des documents \n-rights          : Controle l'affichage des droits\n</code></pre>\n<p>Quelques pr\u00e9cisions:</p>\n<ul>\n<li>La cible de d\u00e9part peut \u00eatre sp\u00e9cifi\u00e9e:\n<ul>\n<li>soit avec <code>cd</code> pour un espace institutionnel</li>\n<li>soit avec <code>user</code> pour un espace personnel, en sp\u00e9cifiant l'intitul\u00e9 du compte Atrium</li>\n</ul>\n</li>\n<li>L'option <code>set_acl</code> s'applique uniquement au dossier sp\u00e9cifi\u00e9 avec <code>to=&lt;dossier&gt;</code></li>\n<li>L'option <code>rm_acl</code> s'applique r\u00e9cursivement \u00e0 tous les dossiers enfants \u00e0 partir du dossier <code>to=&lt;dossier</code></li>\n<li>L'option <code>subs_acl</code> s'applique r\u00e9cursivement \u00e0 tous les dossiers enfants \u00e0 partir du dossier <code>to=&lt;dossier</code></li>\n<li>Dans l'option <code>subs_acl</code> on peut substituer une groupe/user ind\u00e9pendemment de la permission en utilisant \"%\" pour la permission</li>\n<li>Les options <code>ls</code>, <code>csv</code>, <code>draw</code> exploitent l'option <code>depth=n</code></li>\n</ul>\n<h2>Utilisation</h2>\n<p>Quelques exemples d'utilisation (<em>dans les exemples ci-dessous on suppose que\nl'authentification est r\u00e9alis\u00e9e via le fichier .netrc</em>):</p>\n<pre><code>&gt;&gt;&gt; python -m atrium_shell.atrium_shell -ls cd=/Laboratoires/LAL/ATLAS\n//Atrium/Laboratoires/LAL/ATLAS\n  ATLAS/PIXELS\n  ATLAS/CALORIM\u00c9TRIE Argon Liquide [Block]\n  ATLAS/HGTD (High Granularity Timing Detector)\n\n\n&gt;&gt;&gt; python -m atrium_shell.atrium_shell -ls cd=/Laboratoires/LAL/ATLAS depth=1\n//Atrium/Laboratoires/LAL/ATLAS\n  ATLAS/PIXELS\n    ATLAS/PIXELS/M\u00e9canique [Block]\n    ATLAS/PIXELS/Om\u00e9gapix [Block]\n    ATLAS/PIXELS/FEi4 [Block]\n    ATLAS/PIXELS/Doping_Profile [Block]\n    ATLAS/PIXELS/RD53 [Block]\n    ATLAS/PIXELS/Interconnexion [Block]\n    ATLAS/PIXELS/Acquisition [Block]\n    ATLAS/PIXELS/atlas_synchro [Block]\n    ATLAS/PIXELS/Salle Blanche PIXELS\n  ATLAS/CALORIM\u00c9TRIE Argon Liquide [Block]\n    ATLAS/CALORIM\u00c9TRIE Argon Liquide/Banc de tests robotis\u00e9\n  ATLAS/HGTD (High Granularity Timing Detector)\n    ATLAS/HGTD (High Granularity Timing Detector)/Ing\u00e9nierie M\u00e9canique\n    ATLAS/HGTD (High Granularity Timing Detector)/Recrutement-AI bac+2\n</code></pre>\n<h1>Nuxeolib</h1>\n<p>Ce module contient tous les appels de bas niveau vers l'APIREST de Nuxeo, et permet de d\u00e9velopper des applications\nutilitaires acc\u00e9dant \u00e0 la base de donn\u00e9es Atrium.</p>\n<ul>\n<li>\n<p>checkout(ref)</p>\n</li>\n<li>\n<p>checkin(ref, version='minor', comment='')</p>\n</li>\n<li>\n<p>checkoutin(ref, version='minor', comment='')</p>\n</li>\n<li>\n<p>create_tree_snapshot(ref, version='minor')</p>\n</li>\n<li>\n<p>create_version(ref, increment='Minor', save_document=True)</p>\n</li>\n<li>\n<p>set_property(ref, xpath, value)</p>\n</li>\n<li>\n<p>delete(ref)</p>\n</li>\n<li>\n<p>get_children(ref)</p>\n</li>\n<li>\n<p>get_parent(ref)</p>\n</li>\n<li>\n<p>get_versions(ref)</p>\n</li>\n<li>\n<p>lock(ref)</p>\n</li>\n<li>\n<p>unlock(ref)</p>\n</li>\n<li>\n<p>move(ref, target, name=None)</p>\n</li>\n<li>\n<p>publish(ref, target)</p>\n</li>\n<li>\n<p>copy(ref, target, name=None)</p>\n</li>\n<li>\n<p>add_permission(ref, permission, user, acl='local')</p>\n</li>\n<li>\n<p>get_relations(ref)</p>\n</li>\n<li>\n<p>delete_relation(source, destination)</p>\n</li>\n<li>\n<p>create_relation(ref, destination)</p>\n</li>\n<li>\n<p>query(query, language=None)</p>\n</li>\n<li>\n<p>get_blob(ref)</p>\n</li>\n<li>\n<p>get_blobs(ref)</p>\n</li>\n<li>\n<p>attach_blob(ref, blob)</p>\n</li>\n<li>\n<li>\n<p>open_batch()</p>\n</li>\n<li>\n<p>close_batch(batch_id)</p>\n</li>\n<li>\n<p>upload_files(input_names=None, batch_id=None)</p>\n</li>\n<li>\n<p>change_title(uid, title)</p>\n</li>\n<li>\n<p>get_document(name)</p>\n<p>get the uid of a document from its path</p>\n</li>\n<li>\n<p>create_document_with_properties(path,\nname,\ndoc_type,\nproperties=None,\nfiles=None,\nfrom_uid=None)</p>\n<pre><code>   We create a document in one single operation:\n    - mandatory args are: path, name, doc_type\n    - properties can be added(dc:title, uid:minor_version, dc:description, ...)\n    - files: joint files.\n</code></pre>\n</li>\n<li>\n<p>update_document_with_properties(uid,\ntitle,\ndoc_type,\nproperties=None,\nfiles=None)</p>\n<pre><code>  this function is similar to the create function, but for updating an existing document.\n</code></pre>\n</li>\n<li>\n<p>read_document(doc_id)</p>\n<pre><code>  read the properties of an existing document\n</code></pre>\n</li>\n<li>\n<p>get_acls(doc_id)</p>\n</li>\n<li>\n<p>delete_document(doc_id)</p>\n</li>\n<li>\n<p>change_document_state(uid, state=u'')</p>\n</li>\n<li>\n<p>read_user(name)</p>\n<pre><code>  read the properties of an user account\n</code></pre>\n</li>\n<li>\n<p>create_user(user,\nfirst_name=None,\nlast_name=None,\nemail='<a href=\"mailto:a@b.c\">a@b.c</a>',\npassword='user',\ncompany=None)</p>\n<pre><code>       Basic creation function the required properties are:\n         identifier (generally it's the email\n         first name\n         name\n         email\n         password\n</code></pre>\n</li>\n<li>\n<p>update_user(user,\nfirst_name=None,\nlast_name=None,\nemail=None,\npassword=None,\ncompany=None,\nis_inactive=None)</p>\n</li>\n<li>\n<p>delete_user(user)</p>\n</li>\n<li>\n<p>get_users(query=u'*', data=False, max_results=None)</p>\n<pre><code>    query all users using a wildcard expression\n    this internally get a multipage request and assembles the pages\n</code></pre>\n</li>\n<li>\n<p>get_directory(domain)</p>\n<pre><code>  query a vocabulary\n</code></pre>\n</li>\n<li>\n<p>add_directory_entry(directory, entry)</p>\n</li>\n<li>\n<p>get_groups(pattern)</p>\n</li>\n<li>\n<p>create_group(group)</p>\n</li>\n<li>\n<p>get_group(group)</p>\n</li>\n<li>\n<p>add_user_to_group(group, user)</p>\n</li>\n<li>\n<p>add_subgroup_to_group(group, subgroup)</p>\n</li>\n<li>\n<p>delete_group(group)</p>\n</li>\n<li>\n<li>\n<li>\n<p>init_session(host=u'local', login='', password='', auth='')</p>\n<p>Initialise the session according to the host modes: local, dev, prod</p>\n</li>\n<li>\n<p>connect(host, login, auth='')</p>\n<p>on top of the init_session function permit to enter the hidden password</p>\n</li>\n<li>\n<p>get_login()</p>\n<p>retreive the actual login</p>\n</li>\n<li>\n<p>purge_document(session, path, title='', edms='')</p>\n<p>Deep suppression of a given document (including from the Corbeille)</p>\n</li>\n<li>\n<p>init_objets_from_string(lignes, constructor, key, output_dict)</p>\n</li>\n<li>\n<p>init_objets(file_name, constructor, key, output_dict)</p>\n<p>Read a CSV file , building a dictionary of objects</p>\n<ul>\n<li>we assume that the input file obeys the following format:\n<ul>\n<li>the first line contains the object field list</li>\n<li>fields are separated by ';'</li>\n<li>empty lines are ignored</li>\n<li>lines starting with '#' are ignored</li>\n</ul>\n</li>\n<li>every line generates one object using the specified constructor</li>\n<li>the specified key is the key to the dictionary</li>\n</ul>\n</li>\n<li>\n<p>set_atrium_functional_domain(session, user, domain, role)</p>\n<p>call the SetAtriumFunctionalDomain primitive</p>\n</li>\n<li>\n<p>set_atrium_is_inactive(session, user, is_inactive=True)</p>\n<p>call the SetAtriumIsInactive primitive</p>\n</li>\n<li>\n<p>test_atrium_is_inactive(session, user)</p>\n<p>test if atrium_is_inactive</p>\n</li>\n<li>\n<p>get_fds(session, cat=\"Laboratoire\")</p>\n<p>Reading all functional domains for Laboratoires|Projets|Activites declared in the Atrium base :</p>\n<p>we get all primary spaces of type Laboratoire|Projet|Activite then whe read the FunctionalDomain metadata\nthis approach is needed since the FunctionalDomain vocabulary does not differenciate\nLaboratoires | Projets | Activit\u00e9s</p>\n</li>\n<li>\n<p>test_user_role(session, user, fd)</p>\n<p>test if this user has a role for this functional domain</p>\n<p>return 2 values:\nbool = True if the user exists\nrole or None = granted role.</p>\n</li>\n<li>\n<p>get_user_workspace(host, session, email)</p>\n<p>Get the user personal space to build the Atrium perma-link</p>\n</li>\n<li>\n<p>build_account_creation_mail(email, prenom, nom, pwd, racine, url, role='Reader')</p>\n<p>Construct a mail contents after the account creation</p>\n<ul>\n<li>this mail give</li>\n</ul>\n<ul>\n<li>the password</li>\n<li>the perma-link to the personal space</li>\n</ul>\n</li>\n<li>\n<p>build_logging_creation_mail(email, prenom, nom, racine, role='Reader')</p>\n<p>Construct a mail contents after the account creation</p>\n<ul>\n<li>this mail give</li>\n</ul>\n<ul>\n<li>the password</li>\n<li>the perma-link to the personal space</li>\n</ul>\n</li>\n<li>\n<p>sendmail(sender, to, message)</p>\n<p>Sending a email to one single destination\nthe message itself has to be constructed using the MIMEText facility.</p>\n</li>\n<li>\n<p>get_random_password()</p>\n<p>Utility to create a random password</p>\n</li>\n<li>\n<p>create_user(host, session, nom, prenom, email, racine)</p>\n<p>creation of a user account</p>\n<ul>\n<li>specify the host mode (local|dev|prod)</li>\n<li>give name and first name</li>\n<li>email is the account identifier</li>\n<li>specify the functional domain (IE. laboratory)</li>\n</ul>\n</li>\n</ul>\n<h2>Installation en tant que d\u00e9veloppeur, du package <strong>atrium_tools</strong></h2>\n<p>On peut installer ce package \u00e0 partir de <strong>GitLab</strong>, par exemple en t\u00e9l\u00e9chargeant et installant l'archive au format ZIP.\nMais il est aussi possible de <em>cloner</em> directement le projet \u00e0 partir de <strong>GitLab</strong> si on souhaite contribuer\nau d\u00e9veloppement.</p>\n<p>Ce logiciel est enti\u00e8rement bas\u00e9 sur le langage Python. Il est d\u00e9velopp\u00e9 en compatibilit\u00e9 avec la\nversion &gt;=3.6 du langage Python.\nDonc il est indispensable qu'une version &gt;= 3.6 du langage Python soit install\u00e9e sur votre machine</p>\n<p>Ensuite pour installer la suite logicielle voici les deux m\u00e9thodes:</p>\n<ol>\n<li>\n<p>en clonant le d\u00e9p\u00f4t Git::</p>\n<blockquote>\n<p>mkdir myworkspace\ncd myworkspace\ngit clone <a href=\"mailto:git@gitlab.in2p3.fr\">git@gitlab.in2p3.fr</a>:atrium/atrium_tools.git</p>\n</blockquote>\n</li>\n</ol>\n<p>petit rappel pour modifier un \u00e9l\u00e9ment en git::</p>\n<pre><code>&gt; [edit]...\n&gt; git status\n&gt; git commit -am \"porquoi cette modification\"\n&gt; git push\n</code></pre>\n<ol>\n<li>\n<p>en r\u00e9cup\u00e9rant une archive ZIP \u00e0 partir de GitLab::</p>\n<p>\u00e0 partir du site GitLab <a href=\"https://gitlab.in2p3.fr/atrium/atrium_tools\" rel=\"nofollow\">https://gitlab.in2p3.fr/atrium/atrium_tools</a>\ninstaller et d\u00e9zipper l'archive</p>\n</li>\n</ol>\n\n          </div>"}, "last_serial": 5634811, "releases": {"4.3.3": [{"comment_text": "", "digests": {"md5": "1e97e5849135ada84aab9592099d7758", "sha256": "aebbd1d2f9e9595091a286c180f55e995d14844259a716dbc58be7b3220e4670"}, "downloads": -1, "filename": "atrium_tools-4.3.3-py3-none-any.whl", "has_sig": false, "md5_digest": "1e97e5849135ada84aab9592099d7758", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 36082, "upload_time": "2019-08-05T15:01:32", "upload_time_iso_8601": "2019-08-05T15:01:32.971729Z", "url": "https://files.pythonhosted.org/packages/e2/1b/3fb8e5d1a6bfce1c825f4f19c47f945bbb0f731178ee6c1030956d869d5d/atrium_tools-4.3.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5aef65f437b5b63b91020bcc4112b913", "sha256": "d062a464eaa9a7d0066bb77d7ba59cc04aef5d14fe948c1acec9089d4a1215e0"}, "downloads": -1, "filename": "atrium_tools-4.3.3.tar.gz", "has_sig": false, "md5_digest": "5aef65f437b5b63b91020bcc4112b913", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 37580, "upload_time": "2019-08-05T15:01:34", "upload_time_iso_8601": "2019-08-05T15:01:34.551369Z", "url": "https://files.pythonhosted.org/packages/ab/84/c3c7a3d3212bb5da6aea3a0f7070e2b7d4d1ad0f5cd64159c7b18a476ce3/atrium_tools-4.3.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "1e97e5849135ada84aab9592099d7758", "sha256": "aebbd1d2f9e9595091a286c180f55e995d14844259a716dbc58be7b3220e4670"}, "downloads": -1, "filename": "atrium_tools-4.3.3-py3-none-any.whl", "has_sig": false, "md5_digest": "1e97e5849135ada84aab9592099d7758", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 36082, "upload_time": "2019-08-05T15:01:32", "upload_time_iso_8601": "2019-08-05T15:01:32.971729Z", "url": "https://files.pythonhosted.org/packages/e2/1b/3fb8e5d1a6bfce1c825f4f19c47f945bbb0f731178ee6c1030956d869d5d/atrium_tools-4.3.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5aef65f437b5b63b91020bcc4112b913", "sha256": "d062a464eaa9a7d0066bb77d7ba59cc04aef5d14fe948c1acec9089d4a1215e0"}, "downloads": -1, "filename": "atrium_tools-4.3.3.tar.gz", "has_sig": false, "md5_digest": "5aef65f437b5b63b91020bcc4112b913", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 37580, "upload_time": "2019-08-05T15:01:34", "upload_time_iso_8601": "2019-08-05T15:01:34.551369Z", "url": "https://files.pythonhosted.org/packages/ab/84/c3c7a3d3212bb5da6aea3a0f7070e2b7d4d1ad0f5cd64159c7b18a476ce3/atrium_tools-4.3.3.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:16:31 2020"}