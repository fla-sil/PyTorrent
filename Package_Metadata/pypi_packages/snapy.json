{"info": {"author": "Justin Boylan-Toomey", "author_email": "justin.boylan-toomey@outlook.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# SnaPy\n[![Build Status](https://travis-ci.com/justinnbt/SnaPy.svg?branch=master)](https://travis-ci.com/justinnbt/SnaPy)\n[![PyPI version](https://badge.fury.io/py/snapy.svg)](https://badge.fury.io/py/snapy)\n[![Downloads](https://pepy.tech/badge/snapy)](https://pepy.tech/project/snapy)\n[![Python Version](https://img.shields.io/badge/python-3.6%20%7C%203.7-blue.svg)](https://pypi.org/project/snapy/)\n[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](https://opensource.org/licenses/MIT)\n<br>\nPython library for detecting near duplicate texts in a corpus at scale using Locality Sensitive Hashing.<br>\nAs described in Mining Massive Datasets http://infolab.stanford.edu/~ullman/mmds/ch3.pdf.\n\n## Installation\nInstall SnaPy using: `pip install snapy`<br>\nInstall mmh3 library needed for Minhash using: `pip install mmh3`\n\n## Quickstart Example\n``` python\nfrom snapy import MinHash, LSH\n\ncontent = [\n    'Jupiter is primarily composed of hydrogen with a quarter of its mass '\n    'being helium',\n    'Jupiter moving out of the inner Solar System would have allowed the '\n    'formation of inner planets.',\n    'A helium atom has about four times as much mass as a hydrogen atom, so '\n    'the composition changes when described as the proportion of mass '\n    'contributed by different atoms.',\n    'Jupiter is primarily composed of hydrogen and a quarter of its mass '\n    'being helium',\n    'A helium atom has about four times as much mass as a hydrogen atom and '\n    'the composition changes when described as a proportion of mass '\n    'contributed by different atoms.',\n    'Theoretical models indicate that if Jupiter had much more mass than it '\n    'does at present, it would shrink.',\n    'This process causes Jupiter to shrink by about 2 cm each year.',\n    'Jupiter is mostly composed of hydrogen with a quarter of its mass '\n    'being helium',\n    'The Great Red Spot is large enough to accommodate Earth within its '\n    'boundaries.'\n]\n\nlabels = [1, 2, 3, 4, 5, 6, 7, 8, 9]\nseed = 3\n\n\n# Create MinHash object.\nminhash = MinHash(content, n_gram=9, permutations=100, hash_bits=64, seed=3)\n\n\n# Create LSH model.\nlsh = LSH(minhash, labels, no_of_bands=50)\n\n\n# Query to find near duplicates for text 1.\nprint(lsh.query(1, min_jaccard=0.5))\n>>> [8, 4]\n\n\n# Generate minhash signature and add new texts to LSH model.\nnew_text = [\n    'Jupiter is primarily composed of hydrogen with a quarter of its mass being \n    'helium',\n    'Jupiter moving out of the inner Solar System would have allowed the '\n    'formation of inner planets.',\n]\n\nnew_labels = ['doc1', 'doc2']\n\nnew_minhash = MinHash(new_text, n_gram=9, permutations=100, hash_bits=64, seed=3)\n\nlsh.update(new_minhash, new_labels)\n\n\n# Check contents of documents.\nprint(lsh.contains())\n>>> [1, 2, 3, 4, 5, 6, 7, 8, 9, 'doc1', 'doc2']\n\n\n# Remove text and label from model.\nlsh.remove(5)\nprint(lsh.contains())\n>>> [1, 2, 3, 4, 6, 7, 8, 9, 'doc1', 'doc2']\n\n\n# Return adjacency list for all similar texts.\nadjacency_list = lsh.adjacency_list(min_jaccard=0.55)\nprint(adjacency_list)\n>>> {\n        1: ['doc1', 4],\n        2: ['doc2'], \n        3: [], \n        4: [1, 'doc1'], \n        6: [], \n        7: [], \n        8: [], \n        9: [], \n        'doc1': [1, 4], \n        'doc2': [2]\n    }\n\n\n# Returns edge list for use creating a weighted graph.\nedge_list = lsh.edge_list(min_jaccard=0.5, jaccard_weighted=True)\nprint(edge_list)\n>>> [\n        ('doc2', 2, 1.0), \n        ('doc1', 1, 1.0), \n        ('doc1', 8, 0.5), \n        ('doc1', 4, 0.58), \n        (8, 1, 0.5), \n        (4, 1, 0.58)\n    ]\n\n```\n## API Guide\n\n### MinHash\nCreates a MinHash object that contains matrix of Minhash Signatures for each text.\n\n#### MinHash Parameters\n```MinHash(text, n_gram=9, n_gram_type='char', permutations=100, hash_bits=64, seed=None)```<br><br>\n<b>text: {list or ndarray}</b><br>\nIterable containing strings of text for each text in a corpus.<br><br>\n<b>n_gram: int, optional, default: 9</b><br>\nSize of each overlapping text shingle to break text into prior to hashing. Shingle size should be carefully selected dependant on average text length as too low a shingle size will yield false similarities, whereas too high a shingle size will fail to return similar documents.<br><br>\n<b>n_gram_type: str, optional, default: 'char'</b><br>\nType of n gram to use for shingles, must be 'char' to split text into character shingles or 'term' to split text into overlapping sequences of words.<br><br>\n<b>permutations: int, optional, default: 100</b><br>\nNumber of randomly sampled hash values to use for generating each texts minhash signature. Intuitively the larger the number of permutations, the more accurate the estimated Jaccard similarity between the texts but longer the algorithm will take to run.<br><br>\n<b>hash_bits: int, optional, default: 64</b><br>\nHash value size to be used to generate minhash signatures from shingles, must be 32, 64 or 128 bit. Hash value size should be chosen based on text length and a trade off between performance and accuracy. Lower hash values risk false hash collisions leading to false similarities between documents for larger corpora of texts.<br><br>\n<b>method: str, optional, default: 'multi_hash'</b><br>\nMethod for random sampling via hashing, must be 'multi_hash' or 'k_smallest_values'. If multi_hash selected texts are hashed once per permutation and the minimum hash value selected each time to construct a signature. If k_smallest_values selected each text is hashed once and k smallest values selected for k permutations. This method is much faster than multi_hash but far less stable.<br><br>\n<b>seed: int, optional, default: None</b><br>\nSeed from which to generate random hash function, necessary for reproducibility or to allow updating of the LSH model with new minhash values later.<br><br>\n\n#### MinHash Properties\n<b>n_gram: int</b><br>\n```.n_gram```<br>\nReturns size of each overlapping text shingle used to create minhash signatures.<br><br>\n<b>n_gram_type: int</b><br>\n```.n_gram_type```<br>\nReturns type of n-gram used for text shingling.<br><br>\n<b>permutations: int</b><br>\n```.permutations```<br>\nReturns number of permutations used to create signatures.<br><br>\n<b>hash_bits: int</b><br>\n```.hash_bits```<br>\nReturns hash value size used to create signatures.<br><br>\n<b>method: str</b><br>\n```.method```<br>\nReturns hashing method used in minhash function.<br><br>\n<b>seed: int</b><br>\n```.seed```<br>\nReturns seed value used to generate random hashes in minhash function.<br><br>\n<b>signatures: ndarray</b><br>\n```.signatures```<br>\nReturns matrix of text signatures generated by minhash function.<br>\nn = text row, m = selected permutations.<br><br>\n\n### LSH\nCreates an LSH model of text similarity that can be used to return similar texts based on estimated Jaccard similarity.\n\n#### LSH Parameters\n```LSH(minhash=None, labels=None, no_of_bands=None)```<br><br>\n<b>minhash, optional, default: None</b><br>\nMinhash object containing minhash signatures returned by MinHash class.<br><br>\n<b>labels: {list or ndarray}, optional, default: None</b><br>\nList, array or Pandas series containing unique labels for each text in minhash object signature. This should be provided in the same order as texts passed to the MinHash class. Example labels include filepaths and database ids.<br><br>\n<b>no_of_bands: int, optional, default: permutations // 2</b><br>\nNumber of bands to break minhash signature into before hashing into buckets. A smaller number of bands will result in a stricter algorithm, requiring larger possibly leading to false negatives missing some similar texts, whereas a higher number may lead to false similarities. <br><br>\n\n#### LSH Methods\n<b>update</b><br>\nUpdates model from a MinHash object containing signatures generated from new texts and their corresponding labels.<br>\n```.update(minhash, new_labels)```<br>\n<b>minhash:</b> MinHash object containing signatures of new texts, parameters must match any previous MinHash objects.<br>\n<b>new_labels:</b> List, array or Pandas series containing text labels.<br><br>\n<b>query</b><br>\nTakes a label and returns the labels of any similar texts.<br>\n```.query(label, min_jaccard=None, sensitivity=1)```<br>\n<b>label:</b> Label of text to return list of similar texts for.<br>\n<b>min_jaccard:</b> Jaccard similarity threshold texts have to exceed to be returned as similar.<br>\n<b>sensitivity:</b> Number of buckets texts must share to be returned as similar.<br><br>\n<b>remove</b><br>\nRemove file label and minhash signature from model.<br>\n```.def remove(label):```<br>\n<b>label:</b> Label of text to remove from LSH model.<br><br>\n<b>contains</b><br>\nReturns list of labels contained in the model.<br>\n```.contains()```<br><br>\n<b>adjacency_list</b><br>\nReturns an adjacency list that can be used to create a text similarity graph.<br>\n```.adjacency_list(min_jaccard=None, sensitivity=1)```<br>\n<b>min_jaccard:</b> Jaccard similarity threshold texts have to exceed to be returned as similar.<br>\n<b>sensitivity:</b> Number of buckets texts must share to be returned as similar.<br><br>\n<b>edge_list</b><br>\nReturns a list of edges as tuples of similar pairs, that can be used to create a text similarity graph.<br>\n```.edge_list(min_jaccard=None, jaccard_weighted=False, sensitivity=1)```<br>\n<b>min_jaccard:</b> Jaccard similarity threshold texts have to exceed to be returned as a pair of similar texts.<br>\n<b>jaccard_weighted:</b> Return a list of edges as 3 tuples including text similarity pairs and estimated Jaccard similarity score.<br>\n<b>sensitivity:</b> Number of buckets texts must share to be returned as similar.<br><br>\n\n#### LSH Properties\n<b>no_of_bands: int</b><br>\n```.no_of_bands```<br>\nNumber of bands used in LSH model.<br><br>\n<b>permutations: int</b><br>\n```.permutations```<br>\nNumber of permutations used to create minhash signatures used in LSH model.<br><br>\n\n## Contributing\nContributions are very welcome, message us or just submit a pull request!\n\n## Authors\nJustin Boylan-Toomey\n\n## License\nMIT License\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/justinnbt/SnaPy", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "snapy", "package_url": "https://pypi.org/project/snapy/", "platform": "", "project_url": "https://pypi.org/project/snapy/", "project_urls": {"Homepage": "https://github.com/justinnbt/SnaPy"}, "release_url": "https://pypi.org/project/snapy/1.0.2/", "requires_dist": ["numpy"], "requires_python": "", "summary": "SnaPy is a Python library for detecting near duplicate texts using Minhash and Locality Sensitive Hashing.", "version": "1.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>SnaPy</h1>\n<p><a href=\"https://travis-ci.com/justinnbt/SnaPy\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/48376ebc0ff6d1558f35e65f6187420287d4308f/68747470733a2f2f7472617669732d63692e636f6d2f6a757374696e6e62742f536e6150792e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://badge.fury.io/py/snapy\" rel=\"nofollow\"><img alt=\"PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1877bcb514981fe5a147866d385be7cd00b2e4ed/68747470733a2f2f62616467652e667572792e696f2f70792f736e6170792e737667\"></a>\n<a href=\"https://pepy.tech/project/snapy\" rel=\"nofollow\"><img alt=\"Downloads\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/bbf17e7efe9bc895637d13105c335d9fde896a91/68747470733a2f2f706570792e746563682f62616467652f736e617079\"></a>\n<a href=\"https://pypi.org/project/snapy/\" rel=\"nofollow\"><img alt=\"Python Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a2390055e2fdf2bcda0b376a926e961a950c060e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d332e36253230253743253230332e372d626c75652e737667\"></a>\n<a href=\"https://opensource.org/licenses/MIT\" rel=\"nofollow\"><img alt=\"License: MIT\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/5aab1d039acf22567ba072834df6bce204ac48ad/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d677265656e2e737667\"></a>\n<br>\nPython library for detecting near duplicate texts in a corpus at scale using Locality Sensitive Hashing.<br>\nAs described in Mining Massive Datasets <a href=\"http://infolab.stanford.edu/%7Eullman/mmds/ch3.pdf\" rel=\"nofollow\">http://infolab.stanford.edu/~ullman/mmds/ch3.pdf</a>.</p>\n<h2>Installation</h2>\n<p>Install SnaPy using: <code>pip install snapy</code><br>\nInstall mmh3 library needed for Minhash using: <code>pip install mmh3</code></p>\n<h2>Quickstart Example</h2>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">snapy</span> <span class=\"kn\">import</span> <span class=\"n\">MinHash</span><span class=\"p\">,</span> <span class=\"n\">LSH</span>\n\n<span class=\"n\">content</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"s1\">'Jupiter is primarily composed of hydrogen with a quarter of its mass '</span>\n    <span class=\"s1\">'being helium'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'Jupiter moving out of the inner Solar System would have allowed the '</span>\n    <span class=\"s1\">'formation of inner planets.'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'A helium atom has about four times as much mass as a hydrogen atom, so '</span>\n    <span class=\"s1\">'the composition changes when described as the proportion of mass '</span>\n    <span class=\"s1\">'contributed by different atoms.'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'Jupiter is primarily composed of hydrogen and a quarter of its mass '</span>\n    <span class=\"s1\">'being helium'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'A helium atom has about four times as much mass as a hydrogen atom and '</span>\n    <span class=\"s1\">'the composition changes when described as a proportion of mass '</span>\n    <span class=\"s1\">'contributed by different atoms.'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'Theoretical models indicate that if Jupiter had much more mass than it '</span>\n    <span class=\"s1\">'does at present, it would shrink.'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'This process causes Jupiter to shrink by about 2 cm each year.'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'Jupiter is mostly composed of hydrogen with a quarter of its mass '</span>\n    <span class=\"s1\">'being helium'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'The Great Red Spot is large enough to accommodate Earth within its '</span>\n    <span class=\"s1\">'boundaries.'</span>\n<span class=\"p\">]</span>\n\n<span class=\"n\">labels</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">7</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">9</span><span class=\"p\">]</span>\n<span class=\"n\">seed</span> <span class=\"o\">=</span> <span class=\"mi\">3</span>\n\n\n<span class=\"c1\"># Create MinHash object.</span>\n<span class=\"n\">minhash</span> <span class=\"o\">=</span> <span class=\"n\">MinHash</span><span class=\"p\">(</span><span class=\"n\">content</span><span class=\"p\">,</span> <span class=\"n\">n_gram</span><span class=\"o\">=</span><span class=\"mi\">9</span><span class=\"p\">,</span> <span class=\"n\">permutations</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"n\">hash_bits</span><span class=\"o\">=</span><span class=\"mi\">64</span><span class=\"p\">,</span> <span class=\"n\">seed</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n\n\n<span class=\"c1\"># Create LSH model.</span>\n<span class=\"n\">lsh</span> <span class=\"o\">=</span> <span class=\"n\">LSH</span><span class=\"p\">(</span><span class=\"n\">minhash</span><span class=\"p\">,</span> <span class=\"n\">labels</span><span class=\"p\">,</span> <span class=\"n\">no_of_bands</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n\n\n<span class=\"c1\"># Query to find near duplicates for text 1.</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">lsh</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">min_jaccard</span><span class=\"o\">=</span><span class=\"mf\">0.5</span><span class=\"p\">))</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"p\">[</span><span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">]</span>\n\n\n<span class=\"c1\"># Generate minhash signature and add new texts to LSH model.</span>\n<span class=\"n\">new_text</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"s1\">'Jupiter is primarily composed of hydrogen with a quarter of its mass being </span>\n    <span class=\"s1\">'helium'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'Jupiter moving out of the inner Solar System would have allowed the '</span>\n    <span class=\"s1\">'formation of inner planets.'</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n\n<span class=\"n\">new_labels</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'doc1'</span><span class=\"p\">,</span> <span class=\"s1\">'doc2'</span><span class=\"p\">]</span>\n\n<span class=\"n\">new_minhash</span> <span class=\"o\">=</span> <span class=\"n\">MinHash</span><span class=\"p\">(</span><span class=\"n\">new_text</span><span class=\"p\">,</span> <span class=\"n\">n_gram</span><span class=\"o\">=</span><span class=\"mi\">9</span><span class=\"p\">,</span> <span class=\"n\">permutations</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"n\">hash_bits</span><span class=\"o\">=</span><span class=\"mi\">64</span><span class=\"p\">,</span> <span class=\"n\">seed</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n\n<span class=\"n\">lsh</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"n\">new_minhash</span><span class=\"p\">,</span> <span class=\"n\">new_labels</span><span class=\"p\">)</span>\n\n\n<span class=\"c1\"># Check contents of documents.</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">lsh</span><span class=\"o\">.</span><span class=\"n\">contains</span><span class=\"p\">())</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">7</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">9</span><span class=\"p\">,</span> <span class=\"s1\">'doc1'</span><span class=\"p\">,</span> <span class=\"s1\">'doc2'</span><span class=\"p\">]</span>\n\n\n<span class=\"c1\"># Remove text and label from model.</span>\n<span class=\"n\">lsh</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">lsh</span><span class=\"o\">.</span><span class=\"n\">contains</span><span class=\"p\">())</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"mi\">7</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">9</span><span class=\"p\">,</span> <span class=\"s1\">'doc1'</span><span class=\"p\">,</span> <span class=\"s1\">'doc2'</span><span class=\"p\">]</span>\n\n\n<span class=\"c1\"># Return adjacency list for all similar texts.</span>\n<span class=\"n\">adjacency_list</span> <span class=\"o\">=</span> <span class=\"n\">lsh</span><span class=\"o\">.</span><span class=\"n\">adjacency_list</span><span class=\"p\">(</span><span class=\"n\">min_jaccard</span><span class=\"o\">=</span><span class=\"mf\">0.55</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">adjacency_list</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"p\">{</span>\n        <span class=\"mi\">1</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'doc1'</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">],</span>\n        <span class=\"mi\">2</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'doc2'</span><span class=\"p\">],</span> \n        <span class=\"mi\">3</span><span class=\"p\">:</span> <span class=\"p\">[],</span> \n        <span class=\"mi\">4</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">'doc1'</span><span class=\"p\">],</span> \n        <span class=\"mi\">6</span><span class=\"p\">:</span> <span class=\"p\">[],</span> \n        <span class=\"mi\">7</span><span class=\"p\">:</span> <span class=\"p\">[],</span> \n        <span class=\"mi\">8</span><span class=\"p\">:</span> <span class=\"p\">[],</span> \n        <span class=\"mi\">9</span><span class=\"p\">:</span> <span class=\"p\">[],</span> \n        <span class=\"s1\">'doc1'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">],</span> \n        <span class=\"s1\">'doc2'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n\n\n<span class=\"c1\"># Returns edge list for use creating a weighted graph.</span>\n<span class=\"n\">edge_list</span> <span class=\"o\">=</span> <span class=\"n\">lsh</span><span class=\"o\">.</span><span class=\"n\">edge_list</span><span class=\"p\">(</span><span class=\"n\">min_jaccard</span><span class=\"o\">=</span><span class=\"mf\">0.5</span><span class=\"p\">,</span> <span class=\"n\">jaccard_weighted</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">edge_list</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"p\">[</span>\n        <span class=\"p\">(</span><span class=\"s1\">'doc2'</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mf\">1.0</span><span class=\"p\">),</span> \n        <span class=\"p\">(</span><span class=\"s1\">'doc1'</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mf\">1.0</span><span class=\"p\">),</span> \n        <span class=\"p\">(</span><span class=\"s1\">'doc1'</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mf\">0.5</span><span class=\"p\">),</span> \n        <span class=\"p\">(</span><span class=\"s1\">'doc1'</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mf\">0.58</span><span class=\"p\">),</span> \n        <span class=\"p\">(</span><span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mf\">0.5</span><span class=\"p\">),</span> \n        <span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mf\">0.58</span><span class=\"p\">)</span>\n    <span class=\"p\">]</span>\n</pre>\n<h2>API Guide</h2>\n<h3>MinHash</h3>\n<p>Creates a MinHash object that contains matrix of Minhash Signatures for each text.</p>\n<h4>MinHash Parameters</h4>\n<p><code>MinHash(text, n_gram=9, n_gram_type='char', permutations=100, hash_bits=64, seed=None)</code><br><br>\n<b>text: {list or ndarray}</b><br>\nIterable containing strings of text for each text in a corpus.<br><br>\n<b>n_gram: int, optional, default: 9</b><br>\nSize of each overlapping text shingle to break text into prior to hashing. Shingle size should be carefully selected dependant on average text length as too low a shingle size will yield false similarities, whereas too high a shingle size will fail to return similar documents.<br><br>\n<b>n_gram_type: str, optional, default: 'char'</b><br>\nType of n gram to use for shingles, must be 'char' to split text into character shingles or 'term' to split text into overlapping sequences of words.<br><br>\n<b>permutations: int, optional, default: 100</b><br>\nNumber of randomly sampled hash values to use for generating each texts minhash signature. Intuitively the larger the number of permutations, the more accurate the estimated Jaccard similarity between the texts but longer the algorithm will take to run.<br><br>\n<b>hash_bits: int, optional, default: 64</b><br>\nHash value size to be used to generate minhash signatures from shingles, must be 32, 64 or 128 bit. Hash value size should be chosen based on text length and a trade off between performance and accuracy. Lower hash values risk false hash collisions leading to false similarities between documents for larger corpora of texts.<br><br>\n<b>method: str, optional, default: 'multi_hash'</b><br>\nMethod for random sampling via hashing, must be 'multi_hash' or 'k_smallest_values'. If multi_hash selected texts are hashed once per permutation and the minimum hash value selected each time to construct a signature. If k_smallest_values selected each text is hashed once and k smallest values selected for k permutations. This method is much faster than multi_hash but far less stable.<br><br>\n<b>seed: int, optional, default: None</b><br>\nSeed from which to generate random hash function, necessary for reproducibility or to allow updating of the LSH model with new minhash values later.<br><br></p>\n<h4>MinHash Properties</h4>\n<p><b>n_gram: int</b><br>\n<code>.n_gram</code><br>\nReturns size of each overlapping text shingle used to create minhash signatures.<br><br>\n<b>n_gram_type: int</b><br>\n<code>.n_gram_type</code><br>\nReturns type of n-gram used for text shingling.<br><br>\n<b>permutations: int</b><br>\n<code>.permutations</code><br>\nReturns number of permutations used to create signatures.<br><br>\n<b>hash_bits: int</b><br>\n<code>.hash_bits</code><br>\nReturns hash value size used to create signatures.<br><br>\n<b>method: str</b><br>\n<code>.method</code><br>\nReturns hashing method used in minhash function.<br><br>\n<b>seed: int</b><br>\n<code>.seed</code><br>\nReturns seed value used to generate random hashes in minhash function.<br><br>\n<b>signatures: ndarray</b><br>\n<code>.signatures</code><br>\nReturns matrix of text signatures generated by minhash function.<br>\nn = text row, m = selected permutations.<br><br></p>\n<h3>LSH</h3>\n<p>Creates an LSH model of text similarity that can be used to return similar texts based on estimated Jaccard similarity.</p>\n<h4>LSH Parameters</h4>\n<p><code>LSH(minhash=None, labels=None, no_of_bands=None)</code><br><br>\n<b>minhash, optional, default: None</b><br>\nMinhash object containing minhash signatures returned by MinHash class.<br><br>\n<b>labels: {list or ndarray}, optional, default: None</b><br>\nList, array or Pandas series containing unique labels for each text in minhash object signature. This should be provided in the same order as texts passed to the MinHash class. Example labels include filepaths and database ids.<br><br>\n<b>no_of_bands: int, optional, default: permutations // 2</b><br>\nNumber of bands to break minhash signature into before hashing into buckets. A smaller number of bands will result in a stricter algorithm, requiring larger possibly leading to false negatives missing some similar texts, whereas a higher number may lead to false similarities. <br><br></p>\n<h4>LSH Methods</h4>\n<p><b>update</b><br>\nUpdates model from a MinHash object containing signatures generated from new texts and their corresponding labels.<br>\n<code>.update(minhash, new_labels)</code><br>\n<b>minhash:</b> MinHash object containing signatures of new texts, parameters must match any previous MinHash objects.<br>\n<b>new_labels:</b> List, array or Pandas series containing text labels.<br><br>\n<b>query</b><br>\nTakes a label and returns the labels of any similar texts.<br>\n<code>.query(label, min_jaccard=None, sensitivity=1)</code><br>\n<b>label:</b> Label of text to return list of similar texts for.<br>\n<b>min_jaccard:</b> Jaccard similarity threshold texts have to exceed to be returned as similar.<br>\n<b>sensitivity:</b> Number of buckets texts must share to be returned as similar.<br><br>\n<b>remove</b><br>\nRemove file label and minhash signature from model.<br>\n<code>.def remove(label):</code><br>\n<b>label:</b> Label of text to remove from LSH model.<br><br>\n<b>contains</b><br>\nReturns list of labels contained in the model.<br>\n<code>.contains()</code><br><br>\n<b>adjacency_list</b><br>\nReturns an adjacency list that can be used to create a text similarity graph.<br>\n<code>.adjacency_list(min_jaccard=None, sensitivity=1)</code><br>\n<b>min_jaccard:</b> Jaccard similarity threshold texts have to exceed to be returned as similar.<br>\n<b>sensitivity:</b> Number of buckets texts must share to be returned as similar.<br><br>\n<b>edge_list</b><br>\nReturns a list of edges as tuples of similar pairs, that can be used to create a text similarity graph.<br>\n<code>.edge_list(min_jaccard=None, jaccard_weighted=False, sensitivity=1)</code><br>\n<b>min_jaccard:</b> Jaccard similarity threshold texts have to exceed to be returned as a pair of similar texts.<br>\n<b>jaccard_weighted:</b> Return a list of edges as 3 tuples including text similarity pairs and estimated Jaccard similarity score.<br>\n<b>sensitivity:</b> Number of buckets texts must share to be returned as similar.<br><br></p>\n<h4>LSH Properties</h4>\n<p><b>no_of_bands: int</b><br>\n<code>.no_of_bands</code><br>\nNumber of bands used in LSH model.<br><br>\n<b>permutations: int</b><br>\n<code>.permutations</code><br>\nNumber of permutations used to create minhash signatures used in LSH model.<br><br></p>\n<h2>Contributing</h2>\n<p>Contributions are very welcome, message us or just submit a pull request!</p>\n<h2>Authors</h2>\n<p>Justin Boylan-Toomey</p>\n<h2>License</h2>\n<p>MIT License</p>\n\n          </div>"}, "last_serial": 5730004, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "04ada167ca22e445cb968496602e2788", "sha256": "d90edce4fdcba047a3500a19325a0c087e30c959c014d245313b1670376ed08e"}, "downloads": -1, "filename": "snapy-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "04ada167ca22e445cb968496602e2788", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 6935, "upload_time": "2019-06-16T11:50:06", "upload_time_iso_8601": "2019-06-16T11:50:06.522566Z", "url": "https://files.pythonhosted.org/packages/f7/e6/d4acdc34d5e2e4b5245208acfff394ee6bab5644f199ef1994e1ac8e1b2c/snapy-0.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "0576f22f9d14921ea2cd9154e35b970c", "sha256": "f1136cc9f57e222607673cef708b0c6af3ecf8c55f8e9c7af4efc65bfb7e5973"}, "downloads": -1, "filename": "snapy-0.0.1.tar.gz", "has_sig": false, "md5_digest": "0576f22f9d14921ea2cd9154e35b970c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5369, "upload_time": "2019-06-16T11:50:09", "upload_time_iso_8601": "2019-06-16T11:50:09.087688Z", "url": "https://files.pythonhosted.org/packages/2c/22/9f42282603498eaea5822f9fee6d7ef5e08d7c1247a3554fc034eaefad40/snapy-0.0.1.tar.gz", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "80d27144498111132537c0c4b8e5fa60", "sha256": "9d53f61fdbfa7ffa64a2b3e41cf12f64ef75de252c3b33bc8c7048013e57253a"}, "downloads": -1, "filename": "snapy-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "80d27144498111132537c0c4b8e5fa60", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9915, "upload_time": "2019-08-26T01:18:46", "upload_time_iso_8601": "2019-08-26T01:18:46.713632Z", "url": "https://files.pythonhosted.org/packages/0a/ae/ee899304bb89356d7c1d2638228af417d534e69a4a948b04e6852b6f42a2/snapy-1.0.0-py3-none-any.whl", "yanked": false}], "1.0.1": [{"comment_text": "", "digests": {"md5": "c0ca3b78414471a1c2a10828c6a42644", "sha256": "91dc6c883be8a6f53a8fb5d2c8f88b624e3daab8038dabd2e32b8cc145aba9d0"}, "downloads": -1, "filename": "snapy-1.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "c0ca3b78414471a1c2a10828c6a42644", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9913, "upload_time": "2019-08-26T09:51:06", "upload_time_iso_8601": "2019-08-26T09:51:06.335621Z", "url": "https://files.pythonhosted.org/packages/32/ee/1d9c5fbb990644ac609bf6e012e1aeb6790f09ab242fa99cd7c064d9003c/snapy-1.0.1-py3-none-any.whl", "yanked": false}], "1.0.2": [{"comment_text": "", "digests": {"md5": "f486ca3ba9678476da87bdccba2c7cfd", "sha256": "c33e28d6e6e98b5e56ba0acf38c898f3d21aa160c2d205d81222ef9b378fd2ea"}, "downloads": -1, "filename": "snapy-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "f486ca3ba9678476da87bdccba2c7cfd", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9921, "upload_time": "2019-08-26T10:07:31", "upload_time_iso_8601": "2019-08-26T10:07:31.301116Z", "url": "https://files.pythonhosted.org/packages/68/59/cdf153f7a391593060a3fcd06f13f8127dc79f675d99ef576b69f49365a0/snapy-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "23cb7c5bc023ad8e660dd7bd0ef9f86d", "sha256": "d318641933689fdfccf5c9ba9c932ccf45a0157b07719d6b3ad892f7f893dbfa"}, "downloads": -1, "filename": "snapy-1.0.2.tar.gz", "has_sig": false, "md5_digest": "23cb7c5bc023ad8e660dd7bd0ef9f86d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11516, "upload_time": "2019-08-26T10:07:32", "upload_time_iso_8601": "2019-08-26T10:07:32.575095Z", "url": "https://files.pythonhosted.org/packages/67/1c/cd2f7ced008ad664c84dfd904b56d9f3c9b1b08e505df9b7e0dc5f61cf0d/snapy-1.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "f486ca3ba9678476da87bdccba2c7cfd", "sha256": "c33e28d6e6e98b5e56ba0acf38c898f3d21aa160c2d205d81222ef9b378fd2ea"}, "downloads": -1, "filename": "snapy-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "f486ca3ba9678476da87bdccba2c7cfd", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9921, "upload_time": "2019-08-26T10:07:31", "upload_time_iso_8601": "2019-08-26T10:07:31.301116Z", "url": "https://files.pythonhosted.org/packages/68/59/cdf153f7a391593060a3fcd06f13f8127dc79f675d99ef576b69f49365a0/snapy-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "23cb7c5bc023ad8e660dd7bd0ef9f86d", "sha256": "d318641933689fdfccf5c9ba9c932ccf45a0157b07719d6b3ad892f7f893dbfa"}, "downloads": -1, "filename": "snapy-1.0.2.tar.gz", "has_sig": false, "md5_digest": "23cb7c5bc023ad8e660dd7bd0ef9f86d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11516, "upload_time": "2019-08-26T10:07:32", "upload_time_iso_8601": "2019-08-26T10:07:32.575095Z", "url": "https://files.pythonhosted.org/packages/67/1c/cd2f7ced008ad664c84dfd904b56d9f3c9b1b08e505df9b7e0dc5f61cf0d/snapy-1.0.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:07:31 2020"}