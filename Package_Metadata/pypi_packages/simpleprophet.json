{"info": {"author": "Mozilla", "author_email": "", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: Mozilla Public License 2.0 (MPL 2.0)", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# simpleprophet KPI forecasting models and tools\n\nThis directory contains the simpleprophet forecast models and accompanying tools.  The simpleprophet models prioritize simplicity and stability, adding complexity and \"bendiness\" only when it significantly improves model performance on a holdback period.\n\n## Setup\n\nYou will need a python environment with `fbprophet` and a few other\ndependencies installed. We provide a Docker image that can be pulled from GCR\nand run interactively like:\n\n```bash\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/creds.json\ndocker run -it \\\n  -e GOOGLE_APPLICATION_CREDENTIALS=/tmp/keys/key.json \\\n  -v $GOOGLE_APPLICATION_CREDENTIALS:/tmp/keys/key.json:ro \\\n  --entrypoint python \\\n  gcr.io/moz-fx-data-forecasting/simpleprophet\n```\n\nOr you can make code updates and build the image locally:\n\n```bash\ndocker build . --tag simpleprophet\ndocker run -it \\\n  -e GOOGLE_APPLICATION_CREDENTIALS=/tmp/keys/key.json \\\n  -v $GOOGLE_APPLICATION_CREDENTIALS:/tmp/keys/key.json:ro \\\n  --entrypoint python \\\n  simpleprophet\n```\n\nIf you want to produce a local environment outside docker, you can create an\nappropriate Conda environment via `conda env create -f environment.yml`.\nTo create an environment outside Conda, see the\n[`fbprophet` installation instructions](https://facebook.github.io/prophet/docs/installation.html)\nand then use `pip install -r requirements.txt` to install remaining dependencies.\n\n## Usage\n\nThe functions for running the forecasting pipeline are in ```pipeline.py```.  The ```update_table``` function can be run daily to add rows to the output table as necessary to incorporate newly available metrics data.  The ```replace_table``` function will clear the output table and regenerate it from scratch.\n\nFor model-building the code in ```modeling.py``` may be useful.  It includes a function to evaluate a model on a holdout set and provide some useful visualizations.\n\nThe ```validations.py``` file contains code that produces plots to evaluate model performance and validate the model behavior over time is reasonable.  It can also be used to compare multiple models.\n\n## Modeling Strategy\n\nThe ```models.py``` file contains the production model specifications.  The models were developed by Jesse McCrosky using the fbprophet framework.  The guiding modeling philosophy was to be guided by simplicity and intuitive fit, while informing the modeling process using conventional types of quantitative evidence.\n\nThe evaluation of a forecast is fundamentally multi-dimensional.  As well as the competing objectives of stability, accuracy, and non-bias, each of these objectives can be evaluated on multiple time horizons.  This complexity makes a pure machine learning optimization approach extremely complex.\n\nAs an alternative, I chose to fit the models somewhat intuitively.  Parameter sets were explored iteratively and each iteration was evaluated visually to see if the model components (seasonality and trend) seemed to fit the observed actuals.  Once a reasonable parameter space was defined, the modeling process proceeded to evaluate holdout set metrics and other quantitative evaluations on a set of models.  Simpler models were preferred and complexity was only added when clearly justified by the quantitative evidence.\n\nA few relevant model characteristics:\n\n - Due to the \"smoothed\" nature of MAU as a metric, yearly seasonality was adequate to capture all holiday effects except for Easter, which was included as a model component.\n - We select a start date for the training data based on the point where the metric appears to have reached a somewhat steady state in its development - the first weeks of most metrics are quite atypically and their use for training would not be helpful.\n - Similarly, some product metrics have \"anomalies\" - periods during which the metric value was highly atypical, usually due to a data problem.  These periods were excluded from training data.\n - The appropriate start dates and anomaly periods were determined through manual examination of metric plots.\n\n## Deploying\n\nTo deploy to PyPI, admins on the repo can make a new release following semver\n(0.1.0, for example), which will trigger a CircleCI build that publishes\na new package to PyPI with that tag name as the version.\n\n---\n\nFor more information, contact jmccrosky@mozilla.com\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/mozilla/forecasting", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "simpleprophet", "package_url": "https://pypi.org/project/simpleprophet/", "platform": "", "project_url": "https://pypi.org/project/simpleprophet/", "project_urls": {"Homepage": "https://github.com/mozilla/forecasting"}, "release_url": "https://pypi.org/project/simpleprophet/1.2/", "requires_dist": ["fbprophet (>=0.5)", "google-cloud-bigquery (>=1.20.0)", "plotly (>=4.0)"], "requires_python": ">=3.5", "summary": "Mozilla simpleprophet forecast framework.", "version": "1.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>simpleprophet KPI forecasting models and tools</h1>\n<p>This directory contains the simpleprophet forecast models and accompanying tools.  The simpleprophet models prioritize simplicity and stability, adding complexity and \"bendiness\" only when it significantly improves model performance on a holdback period.</p>\n<h2>Setup</h2>\n<p>You will need a python environment with <code>fbprophet</code> and a few other\ndependencies installed. We provide a Docker image that can be pulled from GCR\nand run interactively like:</p>\n<pre><span class=\"nv\">GOOGLE_APPLICATION_CREDENTIALS</span><span class=\"o\">=</span>/path/to/creds.json\ndocker run -it <span class=\"se\">\\</span>\n  -e <span class=\"nv\">GOOGLE_APPLICATION_CREDENTIALS</span><span class=\"o\">=</span>/tmp/keys/key.json <span class=\"se\">\\</span>\n  -v <span class=\"nv\">$GOOGLE_APPLICATION_CREDENTIALS</span>:/tmp/keys/key.json:ro <span class=\"se\">\\</span>\n  --entrypoint python <span class=\"se\">\\</span>\n  gcr.io/moz-fx-data-forecasting/simpleprophet\n</pre>\n<p>Or you can make code updates and build the image locally:</p>\n<pre>docker build . --tag simpleprophet\ndocker run -it <span class=\"se\">\\</span>\n  -e <span class=\"nv\">GOOGLE_APPLICATION_CREDENTIALS</span><span class=\"o\">=</span>/tmp/keys/key.json <span class=\"se\">\\</span>\n  -v <span class=\"nv\">$GOOGLE_APPLICATION_CREDENTIALS</span>:/tmp/keys/key.json:ro <span class=\"se\">\\</span>\n  --entrypoint python <span class=\"se\">\\</span>\n  simpleprophet\n</pre>\n<p>If you want to produce a local environment outside docker, you can create an\nappropriate Conda environment via <code>conda env create -f environment.yml</code>.\nTo create an environment outside Conda, see the\n<a href=\"https://facebook.github.io/prophet/docs/installation.html\" rel=\"nofollow\"><code>fbprophet</code> installation instructions</a>\nand then use <code>pip install -r requirements.txt</code> to install remaining dependencies.</p>\n<h2>Usage</h2>\n<p>The functions for running the forecasting pipeline are in <code>pipeline.py</code>.  The <code>update_table</code> function can be run daily to add rows to the output table as necessary to incorporate newly available metrics data.  The <code>replace_table</code> function will clear the output table and regenerate it from scratch.</p>\n<p>For model-building the code in <code>modeling.py</code> may be useful.  It includes a function to evaluate a model on a holdout set and provide some useful visualizations.</p>\n<p>The <code>validations.py</code> file contains code that produces plots to evaluate model performance and validate the model behavior over time is reasonable.  It can also be used to compare multiple models.</p>\n<h2>Modeling Strategy</h2>\n<p>The <code>models.py</code> file contains the production model specifications.  The models were developed by Jesse McCrosky using the fbprophet framework.  The guiding modeling philosophy was to be guided by simplicity and intuitive fit, while informing the modeling process using conventional types of quantitative evidence.</p>\n<p>The evaluation of a forecast is fundamentally multi-dimensional.  As well as the competing objectives of stability, accuracy, and non-bias, each of these objectives can be evaluated on multiple time horizons.  This complexity makes a pure machine learning optimization approach extremely complex.</p>\n<p>As an alternative, I chose to fit the models somewhat intuitively.  Parameter sets were explored iteratively and each iteration was evaluated visually to see if the model components (seasonality and trend) seemed to fit the observed actuals.  Once a reasonable parameter space was defined, the modeling process proceeded to evaluate holdout set metrics and other quantitative evaluations on a set of models.  Simpler models were preferred and complexity was only added when clearly justified by the quantitative evidence.</p>\n<p>A few relevant model characteristics:</p>\n<ul>\n<li>Due to the \"smoothed\" nature of MAU as a metric, yearly seasonality was adequate to capture all holiday effects except for Easter, which was included as a model component.</li>\n<li>We select a start date for the training data based on the point where the metric appears to have reached a somewhat steady state in its development - the first weeks of most metrics are quite atypically and their use for training would not be helpful.</li>\n<li>Similarly, some product metrics have \"anomalies\" - periods during which the metric value was highly atypical, usually due to a data problem.  These periods were excluded from training data.</li>\n<li>The appropriate start dates and anomaly periods were determined through manual examination of metric plots.</li>\n</ul>\n<h2>Deploying</h2>\n<p>To deploy to PyPI, admins on the repo can make a new release following semver\n(0.1.0, for example), which will trigger a CircleCI build that publishes\na new package to PyPI with that tag name as the version.</p>\n<hr>\n<p>For more information, contact <a href=\"mailto:jmccrosky@mozilla.com\">jmccrosky@mozilla.com</a></p>\n\n          </div>"}, "last_serial": 6549455, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "04ed451d72da1e3474f6319617f25e36", "sha256": "3fd2c3d82656f96fe1e1a7a887d24a055cbb00a24c6e1ed58186cad96657f537"}, "downloads": -1, "filename": "simpleprophet-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "04ed451d72da1e3474f6319617f25e36", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 13012, "upload_time": "2019-12-04T21:10:09", "upload_time_iso_8601": "2019-12-04T21:10:09.143097Z", "url": "https://files.pythonhosted.org/packages/64/6c/1538c2ae44994d2d61ec36602151cc28567ebaf95faae98d5c1d3fa3bed9/simpleprophet-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "40f9a4b51b90ef535dc164e31c34406b", "sha256": "53b6840f1abcdeb4ffa2a68ac90a2a0a71d860d1263030810530145a4080906e"}, "downloads": -1, "filename": "simpleprophet-0.1.0.tar.gz", "has_sig": false, "md5_digest": "40f9a4b51b90ef535dc164e31c34406b", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 12210, "upload_time": "2019-12-04T21:10:11", "upload_time_iso_8601": "2019-12-04T21:10:11.439712Z", "url": "https://files.pythonhosted.org/packages/5c/a8/c45f5fc3110ef0c4e4decd91ad232ace7fe0bf8fbe82501f9691c45ca307/simpleprophet-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "89f50a224d3f39946501b4a4696fd452", "sha256": "2792909de709d9c7a3a34804d8779e4a62aa3fe4fdc001e740cc3c1a74e73dcc"}, "downloads": -1, "filename": "simpleprophet-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "89f50a224d3f39946501b4a4696fd452", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 13680, "upload_time": "2019-12-11T19:58:41", "upload_time_iso_8601": "2019-12-11T19:58:41.733477Z", "url": "https://files.pythonhosted.org/packages/b7/a0/d8e8c1d5df1ce7eda79a1786e80a630242c66000f3f0f76fd0b4aa0a194b/simpleprophet-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "dd5b8b7bda1fbd7246c1c94ec90e0b15", "sha256": "1b7020fdd71c8114b3f53ba562866877d52cbdcb1e819834c27c0ddd1f50ecf7"}, "downloads": -1, "filename": "simpleprophet-0.1.1.tar.gz", "has_sig": false, "md5_digest": "dd5b8b7bda1fbd7246c1c94ec90e0b15", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 14130, "upload_time": "2019-12-11T19:58:42", "upload_time_iso_8601": "2019-12-11T19:58:42.986779Z", "url": "https://files.pythonhosted.org/packages/1a/14/b36289f6b8d3ccdd66e18d19be48036b2cf4791fcd9457ef5bb3a56366f5/simpleprophet-0.1.1.tar.gz", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "7f73dfcd5cf45cb605593a41db7bd28c", "sha256": "5f54d7fc6f4d2ab33fe2ed52053a849d6fd0d03e5667e6712910c46cf34dacb1"}, "downloads": -1, "filename": "simpleprophet-0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "7f73dfcd5cf45cb605593a41db7bd28c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 13918, "upload_time": "2019-12-16T08:57:29", "upload_time_iso_8601": "2019-12-16T08:57:29.943029Z", "url": "https://files.pythonhosted.org/packages/ee/16/5c09835d9984d18b0b2c8dcd184ef357ca6f568127e5c0022ff99dd242fe/simpleprophet-0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1eb1ed77aad839c6a57494422f64460c", "sha256": "a52a6d3459cb2119569967344add21391bcec0aac2c294b45af85df5e34a8404"}, "downloads": -1, "filename": "simpleprophet-0.2.tar.gz", "has_sig": false, "md5_digest": "1eb1ed77aad839c6a57494422f64460c", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 14375, "upload_time": "2019-12-16T08:57:31", "upload_time_iso_8601": "2019-12-16T08:57:31.000274Z", "url": "https://files.pythonhosted.org/packages/21/d6/3a5ba13503d5879d8ceaabc72c2b5703e4628cc5a2775ee149ade6940262/simpleprophet-0.2.tar.gz", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "a674a498eb5059ab121b05132e64bd90", "sha256": "691b7708f3bfe8d38168316435d5d1463f543426de0867b0d4badb03dd0f709f"}, "downloads": -1, "filename": "simpleprophet-0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "a674a498eb5059ab121b05132e64bd90", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 14088, "upload_time": "2019-12-27T08:27:42", "upload_time_iso_8601": "2019-12-27T08:27:42.812755Z", "url": "https://files.pythonhosted.org/packages/43/06/746edf0a60ba83e7a66c0faf9d2c38df7e62983656bf3ff2dcad244e0f44/simpleprophet-0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6fc1ae2eaa5dca3788513f120136ca8b", "sha256": "1660663263ae2270379f30e673fb6f0e64b596481e55fb8b23205f5389632cc2"}, "downloads": -1, "filename": "simpleprophet-0.3.tar.gz", "has_sig": false, "md5_digest": "6fc1ae2eaa5dca3788513f120136ca8b", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 14548, "upload_time": "2019-12-27T08:27:44", "upload_time_iso_8601": "2019-12-27T08:27:44.120599Z", "url": "https://files.pythonhosted.org/packages/bb/9c/046746eef4b7ea1f647a9f5ef0fc73495f950b4d043c02dbd0c15cf343bf/simpleprophet-0.3.tar.gz", "yanked": false}], "1.0": [{"comment_text": "", "digests": {"md5": "5f57af5b8fca7fc4568bb990e3daebc4", "sha256": "433eed0c338fb9bee783ade374967408202b653db35499dfc92c77c8b52835a5"}, "downloads": -1, "filename": "simpleprophet-1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "5f57af5b8fca7fc4568bb990e3daebc4", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 14203, "upload_time": "2019-12-30T08:42:30", "upload_time_iso_8601": "2019-12-30T08:42:30.523985Z", "url": "https://files.pythonhosted.org/packages/1a/13/4880bba5427c7e5830002b15bb79c5a0dbb039cb34a2380758d922834f7d/simpleprophet-1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "6da89f9e534f7721052f75b6c93ff607", "sha256": "fe30551da63075845d01c7a4544728c31afad4d7c19f1684a023702b2f51abdb"}, "downloads": -1, "filename": "simpleprophet-1.0.tar.gz", "has_sig": false, "md5_digest": "6da89f9e534f7721052f75b6c93ff607", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 14643, "upload_time": "2019-12-30T08:42:31", "upload_time_iso_8601": "2019-12-30T08:42:31.772856Z", "url": "https://files.pythonhosted.org/packages/1d/50/c58bb50cbfb88aa2f5d2a62749012ac932a230034d2032fb19aa8d087dc6/simpleprophet-1.0.tar.gz", "yanked": false}], "1.1": [{"comment_text": "", "digests": {"md5": "a06c1e8c9bd8671ced3b6a5032a37b75", "sha256": "e7dd5710396374229bc5c5e126c14e93f68a4e296fc307cff381471f2914f5fc"}, "downloads": -1, "filename": "simpleprophet-1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "a06c1e8c9bd8671ced3b6a5032a37b75", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 14220, "upload_time": "2020-01-10T09:54:36", "upload_time_iso_8601": "2020-01-10T09:54:36.157766Z", "url": "https://files.pythonhosted.org/packages/57/32/aa87e523d98b24d9c86a2f41f9563186ba388c2000a8cbbb381d1c79cb1e/simpleprophet-1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "99fae15be82d148225e6522cd52c263b", "sha256": "e2d7cbe351d872c4493b6ab079f08465e18197c36d98ffb2372759d2e2941266"}, "downloads": -1, "filename": "simpleprophet-1.1.tar.gz", "has_sig": false, "md5_digest": "99fae15be82d148225e6522cd52c263b", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 14652, "upload_time": "2020-01-10T09:54:37", "upload_time_iso_8601": "2020-01-10T09:54:37.408168Z", "url": "https://files.pythonhosted.org/packages/17/e8/93d35ab93c336c77113748d27b5dde921be0412e062709301450dcc69512/simpleprophet-1.1.tar.gz", "yanked": false}], "1.2": [{"comment_text": "", "digests": {"md5": "6feeb020e95ffafe59a123be28fb5902", "sha256": "9829deccf940bd6dcbeaa46417918877df8afcdb9f677706f9b9cd0651c9ac37"}, "downloads": -1, "filename": "simpleprophet-1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "6feeb020e95ffafe59a123be28fb5902", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 14834, "upload_time": "2020-01-31T13:56:12", "upload_time_iso_8601": "2020-01-31T13:56:12.724141Z", "url": "https://files.pythonhosted.org/packages/3e/f2/4f3b48ce26c3ea3a93ab9ba36d6bb58ee1f041c99fb886686198d1a26994/simpleprophet-1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b6b49d8449df8bdc84004d92a68ba1f5", "sha256": "769ff2ce2b5b03097c6c8de3cc6efe3f241a4839e5549ce3257ede39274d910d"}, "downloads": -1, "filename": "simpleprophet-1.2.tar.gz", "has_sig": false, "md5_digest": "b6b49d8449df8bdc84004d92a68ba1f5", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 15295, "upload_time": "2020-01-31T13:56:13", "upload_time_iso_8601": "2020-01-31T13:56:13.704977Z", "url": "https://files.pythonhosted.org/packages/88/67/5cda69e2eda5b686ac347b2360cb1d8912cba1e6fa20a41f9aace3bdbf49/simpleprophet-1.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "6feeb020e95ffafe59a123be28fb5902", "sha256": "9829deccf940bd6dcbeaa46417918877df8afcdb9f677706f9b9cd0651c9ac37"}, "downloads": -1, "filename": "simpleprophet-1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "6feeb020e95ffafe59a123be28fb5902", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.5", "size": 14834, "upload_time": "2020-01-31T13:56:12", "upload_time_iso_8601": "2020-01-31T13:56:12.724141Z", "url": "https://files.pythonhosted.org/packages/3e/f2/4f3b48ce26c3ea3a93ab9ba36d6bb58ee1f041c99fb886686198d1a26994/simpleprophet-1.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "b6b49d8449df8bdc84004d92a68ba1f5", "sha256": "769ff2ce2b5b03097c6c8de3cc6efe3f241a4839e5549ce3257ede39274d910d"}, "downloads": -1, "filename": "simpleprophet-1.2.tar.gz", "has_sig": false, "md5_digest": "b6b49d8449df8bdc84004d92a68ba1f5", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 15295, "upload_time": "2020-01-31T13:56:13", "upload_time_iso_8601": "2020-01-31T13:56:13.704977Z", "url": "https://files.pythonhosted.org/packages/88/67/5cda69e2eda5b686ac347b2360cb1d8912cba1e6fa20a41f9aace3bdbf49/simpleprophet-1.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:10:21 2020"}