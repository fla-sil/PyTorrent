{"info": {"author": "Shen Li", "author_email": "dustet@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# Django Simple Task\n[![Github Actions](https://github.com/ericls/django-simple-task/workflows/Build/badge.svg)](https://github.com/ericls/django-simple-task/actions)\n[![Code Coverage](https://codecov.io/gh/ericls/django-simple-task/branch/master/graph/badge.svg)](https://codecov.io/gh/ericls/django-simple-task)\n[![Python Version](https://img.shields.io/pypi/pyversions/django-simple-task.svg)](https://pypi.org/project/django-simple-task/)\n[![PyPI Package](https://img.shields.io/pypi/v/django-simple-task.svg)](https://pypi.org/project/django-simple-task/)\n[![License](https://img.shields.io/pypi/l/django-simple-task.svg)](https://github.com/ericls/django-simple-task/blob/master/LICENSE)\n\n`django-simple-task` runs background tasks in Django 3 without requiring other services and workers. It runs them in the same event loop as your ASGI application. It is not resilient as a proper task runner such as Celery, but works for some simple tasks and has less overall overheads.\n\n## Guide\n\nInstall the package:\n```bash\npip install django-simple-task\n```\n\nAdded it to installed apps:\n```python\n# settings.py\nINSTALLED_APPS = [\n\t...\n\t'django_simple_task'\n]\n```\nApply ASGI middleware :\n```python\n# asgi.py\nfrom django_simple_task import django_simple_task_middlware\napplication = django_simple_task_middlware(application)\n```\n\nCall a background task in Django view:\n```python\nfrom django_simple_task import defer\n\ndef task1():\n\ttime.sleep(1)\n\tprint(\"task1 done\")\n\nasync def task2():\n\tawait asyncio.sleep(1)\n\tprint(\"task2 done\")\n\ndef view(requests):\n\tdefer(task1)\n\tdefer(task2)\n\treturn HttpResponse(b\"My View\")\n```\n\nIt is required to run Django with ASGI server. [Official Doc](https://docs.djangoproject.com/en/3.0/howto/deployment/asgi/)\n\n## Configurations\n\nConcurrency level can be controlled by adding `DJANGO_SIMPLE_TASK_WORKERS` to settings. Defaults to `1`.", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/ericls/django-simple-task", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "django-simple-task", "package_url": "https://pypi.org/project/django-simple-task/", "platform": "", "project_url": "https://pypi.org/project/django-simple-task/", "project_urls": {"Homepage": "https://github.com/ericls/django-simple-task", "Repository": "https://github.com/ericls/django-simple-task"}, "release_url": "https://pypi.org/project/django-simple-task/0.1.1/", "requires_dist": ["asgiref (>=3.2.3,<4.0.0)"], "requires_python": ">=3.7,<4", "summary": "Task runner for Django 3 without requiring other services", "version": "0.1.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Django Simple Task</h1>\n<p><a href=\"https://github.com/ericls/django-simple-task/actions\" rel=\"nofollow\"><img alt=\"Github Actions\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/cc014e17976ab2a04bbf12a266e4da23f095f5d9/68747470733a2f2f6769746875622e636f6d2f657269636c732f646a616e676f2d73696d706c652d7461736b2f776f726b666c6f77732f4275696c642f62616467652e737667\"></a>\n<a href=\"https://codecov.io/gh/ericls/django-simple-task\" rel=\"nofollow\"><img alt=\"Code Coverage\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/301f4e26c661429cdc50ac0e35e081f98d3ae997/68747470733a2f2f636f6465636f762e696f2f67682f657269636c732f646a616e676f2d73696d706c652d7461736b2f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a>\n<a href=\"https://pypi.org/project/django-simple-task/\" rel=\"nofollow\"><img alt=\"Python Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/88a4243f9464a0e45e52a6cadc51d86368bbdd16/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f646a616e676f2d73696d706c652d7461736b2e737667\"></a>\n<a href=\"https://pypi.org/project/django-simple-task/\" rel=\"nofollow\"><img alt=\"PyPI Package\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/4212ad8cfedef3e9b916a1dae322fd7e498fc343/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f646a616e676f2d73696d706c652d7461736b2e737667\"></a>\n<a href=\"https://github.com/ericls/django-simple-task/blob/master/LICENSE\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fed5cfc7719c525260a9c453609b7ba132199508/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f646a616e676f2d73696d706c652d7461736b2e737667\"></a></p>\n<p><code>django-simple-task</code> runs background tasks in Django 3 without requiring other services and workers. It runs them in the same event loop as your ASGI application. It is not resilient as a proper task runner such as Celery, but works for some simple tasks and has less overall overheads.</p>\n<h2>Guide</h2>\n<p>Install the package:</p>\n<pre>pip install django-simple-task\n</pre>\n<p>Added it to installed apps:</p>\n<pre><span class=\"c1\"># settings.py</span>\n<span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n\t<span class=\"o\">...</span>\n\t<span class=\"s1\">'django_simple_task'</span>\n<span class=\"p\">]</span>\n</pre>\n<p>Apply ASGI middleware :</p>\n<pre><span class=\"c1\"># asgi.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django_simple_task</span> <span class=\"kn\">import</span> <span class=\"n\">django_simple_task_middlware</span>\n<span class=\"n\">application</span> <span class=\"o\">=</span> <span class=\"n\">django_simple_task_middlware</span><span class=\"p\">(</span><span class=\"n\">application</span><span class=\"p\">)</span>\n</pre>\n<p>Call a background task in Django view:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django_simple_task</span> <span class=\"kn\">import</span> <span class=\"n\">defer</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">task1</span><span class=\"p\">():</span>\n\t<span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\t<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"task1 done\"</span><span class=\"p\">)</span>\n\n<span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">task2</span><span class=\"p\">():</span>\n\t<span class=\"k\">await</span> <span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\t<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"task2 done\"</span><span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">view</span><span class=\"p\">(</span><span class=\"n\">requests</span><span class=\"p\">):</span>\n\t<span class=\"n\">defer</span><span class=\"p\">(</span><span class=\"n\">task1</span><span class=\"p\">)</span>\n\t<span class=\"n\">defer</span><span class=\"p\">(</span><span class=\"n\">task2</span><span class=\"p\">)</span>\n\t<span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"sa\">b</span><span class=\"s2\">\"My View\"</span><span class=\"p\">)</span>\n</pre>\n<p>It is required to run Django with ASGI server. <a href=\"https://docs.djangoproject.com/en/3.0/howto/deployment/asgi/\" rel=\"nofollow\">Official Doc</a></p>\n<h2>Configurations</h2>\n<p>Concurrency level can be controlled by adding <code>DJANGO_SIMPLE_TASK_WORKERS</code> to settings. Defaults to <code>1</code>.</p>\n\n          </div>"}, "last_serial": 6372197, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "56d6f976bc9052baa84ba52cac23a77c", "sha256": "0ae1e5653aca19a15c07b56263c8d33c69e134f510dcd16749bcaf44a74fdf42"}, "downloads": -1, "filename": "django_simple_task-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "56d6f976bc9052baa84ba52cac23a77c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7,<4", "size": 5013, "upload_time": "2019-12-29T17:24:42", "upload_time_iso_8601": "2019-12-29T17:24:42.687775Z", "url": "https://files.pythonhosted.org/packages/7d/68/4b2d23bc1efff42c77c90fc863acd9049a6b3847e89a2e10586e9e94f289/django_simple_task-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "171aa6e814476818142fad9e56830f55", "sha256": "69d970ba3f71d0aeb9b91adcb6141d44a482a1b092f330b1be50e1a0a9f5c617"}, "downloads": -1, "filename": "django-simple-task-0.1.0.tar.gz", "has_sig": false, "md5_digest": "171aa6e814476818142fad9e56830f55", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7,<4", "size": 4111, "upload_time": "2019-12-29T17:24:40", "upload_time_iso_8601": "2019-12-29T17:24:40.411693Z", "url": "https://files.pythonhosted.org/packages/e1/d8/474f033f90d228d6202a6a4fe2d46bcf717f58932e5bd05de731c1f8c321/django-simple-task-0.1.0.tar.gz", "yanked": false}], "0.1.1": [{"comment_text": "", "digests": {"md5": "2924404b87f30a955e029f4537be3719", "sha256": "ece167863bc39614d1b578a5f507065bd4fa38cf6f24236a5792a8010d7969a1"}, "downloads": -1, "filename": "django_simple_task-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "2924404b87f30a955e029f4537be3719", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7,<4", "size": 5063, "upload_time": "2019-12-29T17:31:26", "upload_time_iso_8601": "2019-12-29T17:31:26.739648Z", "url": "https://files.pythonhosted.org/packages/1f/5d/1ea071ed3947009cdf067f36d3c28b9390dfb57a87f9a266110287487178/django_simple_task-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "0f0dac9f6c36a5fe2e423034847b8995", "sha256": "9f89c4b68cc6ae1fe6171de9d68a4478a5af028de9989b1df7a2563eae039252"}, "downloads": -1, "filename": "django-simple-task-0.1.1.tar.gz", "has_sig": false, "md5_digest": "0f0dac9f6c36a5fe2e423034847b8995", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7,<4", "size": 4202, "upload_time": "2019-12-29T17:31:25", "upload_time_iso_8601": "2019-12-29T17:31:25.240779Z", "url": "https://files.pythonhosted.org/packages/ea/7a/1df32a05235d353224ffc62188200dcad638bd569e85bf589bf1aaeed27a/django-simple-task-0.1.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "2924404b87f30a955e029f4537be3719", "sha256": "ece167863bc39614d1b578a5f507065bd4fa38cf6f24236a5792a8010d7969a1"}, "downloads": -1, "filename": "django_simple_task-0.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "2924404b87f30a955e029f4537be3719", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7,<4", "size": 5063, "upload_time": "2019-12-29T17:31:26", "upload_time_iso_8601": "2019-12-29T17:31:26.739648Z", "url": "https://files.pythonhosted.org/packages/1f/5d/1ea071ed3947009cdf067f36d3c28b9390dfb57a87f9a266110287487178/django_simple_task-0.1.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "0f0dac9f6c36a5fe2e423034847b8995", "sha256": "9f89c4b68cc6ae1fe6171de9d68a4478a5af028de9989b1df7a2563eae039252"}, "downloads": -1, "filename": "django-simple-task-0.1.1.tar.gz", "has_sig": false, "md5_digest": "0f0dac9f6c36a5fe2e423034847b8995", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7,<4", "size": 4202, "upload_time": "2019-12-29T17:31:25", "upload_time_iso_8601": "2019-12-29T17:31:25.240779Z", "url": "https://files.pythonhosted.org/packages/ea/7a/1df32a05235d353224ffc62188200dcad638bd569e85bf589bf1aaeed27a/django-simple-task-0.1.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:53:19 2020"}