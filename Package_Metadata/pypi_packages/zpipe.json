{"info": {"author": "zlyuan", "author_email": "1277260932@qq.com", "bugtrack_url": null, "classifiers": ["Environment :: Web Environment", "Intended Audience :: Developers", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# \u5d4c\u5165\u5f0f\u7ba1\u9053\u6a21\u5757, \u7c7b\u4f3c\u4e8elogstash\n\n### \u4f7f\u7528\u65b9\u6cd5\u7c7b\u4f3clogstash, \u914d\u7f6e\u5316\u64cd\u4f5c\n\n###  \u5b89\u88c5\n```\npip install zpipe\n```\n\n### \u914d\u7f6e\u7ba1\u9053\u6846\u67b6\n> \u521b\u5efa\u4e00\u4e2a\u76ee\u5f55, \u8fd9\u4e2a\u76ee\u5f55\u4f5c\u4e3a\u4f60\u7684\u7ba1\u9053\u7ec4\u7ec7\u4e3b\u8def\u5f84\n\n```\nmkdir /home/mypipe\nmkdir /home/mypipe/pipe_config\nmkdir /home/mypipe/plugin\n```\n\n> \u521b\u5efa\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\n\n```\ntouch /etc/zpipe/config.json\n# win\u7cfb\u7edf: \"c:/zpipe/config.json\"\n# \u5176\u4ed6\u7cfb\u7edf: \"/etc/zpipe/config.json\"\n# \u53ef\u4ee5\u4f7f\u7528\u73af\u5883\u53d8\u91cf ZPIPE_CONFIG \u6307\u5b9a\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u8def\u5f84, \u4f18\u5148\u7ea7\u6700\u9ad8\n```\n\n> \u4fee\u6539\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u4e3a\u4f60\u7684\u8bbe\u7f6e\n\n```json\n{\n  \"pipe_config_path\": \"/home/mypipe/pipe_config\",\n  \"plugin_path\": \"/home/mypipe/plugin\"\n}\n```\n\n+ pipe\\_config\\_path \u8868\u793a\u7ba1\u9053\u914d\u7f6e\u6587\u4ef6\u8def\u5f84, \u53ef\u4ee5\u662f\u6587\u4ef6\u6216\u6587\u4ef6\u5939, \u6bcf\u4e2a\u914d\u7f6e\u6587\u4ef6\u662f\u4e00\u4e2ajson\u6587\u4ef6, \u6700\u540e\u6846\u67b6\u4f1a\u5c06\u6240\u6709json\u5408\u5e76\u4e3a\u4e00\u4e2a\u66f4\u5927\u7684json\n+ plugin\\_path \u8868\u793a\u63d2\u4ef6\u8def\u5f84, \u53ea\u80fd\u662f\u6587\u4ef6\u5939\n+ \u8def\u5f84\u53ef\u4ee5\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84(\u76f8\u5bf9\u4e8e\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84), \u591a\u8def\u5f84\u7528\u5206\u53f7 [;] \u9694\u5f00\n\n# \u5927\u529f\u544a\u6210, \u7ec8\u4e8e\u53ef\u4ee5\u5f00\u59cb\u5236\u4f5c\u7ba1\u9053\u4e86\n\n### \u4e00\u4e2a\u7b80\u5355\u7684\u7ba1\u9053\n+ \u5728\u7ba1\u9053\u914d\u7f6e\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6 my\\_pipe.py, \u5199\u5165\u5982\u4e0b\u5185\u5bb9\n\n```json\n{\n  \"test\": {\n    \"output\": \"log\"\n  }\n}\n```\n+ \u65b0\u5efa\u4e00\u4e2apy\u6587\u4ef6, \u5199\u5165\u5982\u4e0b\u5185\u5bb9\n\n```python\nfrom zpipe import pipe_server\n\na = pipe_server()\npipe = a.get_pipe('test')\nresult = pipe.process(\"\u6d4b\u8bd5\u6d88\u606f\")\n```\n\n> \u8fd0\u884c\u5b83, \u968f\u540e\u4f60\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u770b\u5230\u6253\u5370\u51fa\u6765\u7684\u6d88\u606f\n\n\n### \u8fd9\u4e2a\u7ba1\u9053\u505a\u4e86\u4ec0\u4e48\n```\n{\n  \"test\": {           #\u5b9a\u4e49\u7ba1\u9053\u540d\n    \"output\": \"log\"   #\u5b9a\u4e49\u8f93\u51fa\u63d2\u4ef6\n  }\n}\n```\n\n```python\nfrom zpipe import pipe_server      #\u5bfc\u5165\u6846\u67b6\u670d\u52a1\n\na = pipe_server()                  #\u521b\u5efa\u6846\u67b6\u670d\u52a1\u7684\u5b9e\u4f8b\npipe = a.get_pipe('test')          #\u83b7\u53d6\u7ba1\u9053\u5b9e\u4f8b\nresult = pipe.process(\"\u6d4b\u8bd5\u6d88\u606f\")   #\u5411\u7ba1\u9053\u53d1\u9001\u6570\u636e\u5e76\u83b7\u53d6\u7ba1\u9053\u7ed3\u679c\n```\n\n### \u7ba1\u9053\u914d\u7f6e\u8be6\u89e3\n> \u5bf9\u63d2\u4ef6\u8bbe\u7f6e\u53c2\u6570, \u6267\u884c\u987a\u5e8f\u4e3a pipe > codec > filter.codec > filter > output.codec > output\n\n```json\n{\n  \"\u7ba1\u90531\": {\n    \"codec\": {\n      \"name\": \"\u89e3\u7801\u5668\u540d\",\n      \"\u53c2\u6570\u540d\": \"\u53c2\u6570\u503c\"\n    },\n    \"filter\": {\n      \"name\": \"\u8fc7\u6ee4\u5668\u540d\",\n      \"\u53c2\u6570\u540d\": \"\u53c2\u6570\u503c\",\n      \"codec\": {\n        \"name\": \"\u89e3\u7801\u5668\u540d\",\n        \"\u53c2\u6570\u540d\": \"\u53c2\u6570\u503c\"\n      }\n    },\n    \"output\": {\n      \"name\": \"\u8f93\u51fa\u63d2\u4ef6\u540d\",\n      \"\u53c2\u6570\u540d\": \"\u53c2\u6570\u503c\",\n      \"codec\": {\n        \"name\": \"\u89e3\u7801\u5668\u540d\",\n        \"\u53c2\u6570\u540d\": \"\u53c2\u6570\u503c\"\n      }\n    },\n    \"\u53c2\u6570\u540d\": \"\u53c2\u6570\u503c\"\n  },\n  \"\u7ba1\u90532\":{\n  }\n}\n```\n\n> \u5982\u679c\u4e0d\u8bbe\u7f6e\u53c2\u6570\u53ef\u4ee5\u7b80\u5316\u914d\u7f6e\n\n```json\n{\n  \"\u7ba1\u9053\u540d\": {\n    \"codec\": \"\u89e3\u7801\u5668\u540d\",\n    \"filter\": \"\u8fc7\u6ee4\u5668\u540d\",\n    \"output\": \"\u8f93\u51fa\u63d2\u4ef6\u540d\",\n    \"\u53c2\u6570\u540d\": \"\u53c2\u6570\u503c\"\n  }\n}\n```\n\n### \u81ea\u5236\u63d2\u4ef6, \u7b80\u5355\u63d2\u4ef6\u5b9e\u4f8b\n\n``` python\n# \u81ea\u5236\u63d2\u4ef6\u5fc5\u987b\u9075\u5faa\u4ee5\u4e0b\u89c4\u5219\n# \u63d2\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u5fc5\u987b\u6dfb\u52a0\u5230\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u7684plugin_path\u91cc\n# \u63d2\u4ef6\u7c7b\u578b\u76ee\u524d\u53ea\u6709\u4e09\u79cd['codec', 'filter', 'output']\n# \u63d2\u4ef6\u6587\u4ef6\u540d\u5fc5\u987b\u4e3a\u89c4\u5219:[zpipe_\u63d2\u4ef6\u7c7b\u578b_\u63d2\u4ef6\u540d.py]\n# \u63d2\u4ef6\u7c7b\u540d\u5fc5\u987b\u548c\u63d2\u4ef6\u6587\u4ef6\u540d\u76f8\u540c\u5e76\u4e14\u7ee7\u627f\u4e8e[zpipe.plugin_base]\n\n# zpipe_output_test.py\n\nfrom zpipe import plugin_base\n\nclass zpipe_output_test(plugin_base):\n    def plugin_init(self, **kw):\n        '''\n        \u63d2\u4ef6\u521d\u59cb\u5316\n        :param kw: \u8fd9\u91cc\u63a5\u6536\u7ba1\u9053\u5b9a\u4e49\u7684\u63d2\u4ef6\u53c2\u6570\n        '''\n        pass\n\n    def plugin_distroy(self):\n        '''\n        \u63d2\u4ef6\u9500\u6bc1\u65f6\n        '''\n        pass\n\n    def process(self, data):\n        '''\n        \u63d2\u4ef6\u8fc7\u7a0b\n        :param data: \u6536\u5230\u7684\u6570\u636e\n        :return: \u7ed3\u679c\u4f1a\u987a\u5e8f\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u63d2\u4ef6, \u5982\u679c\u662f\u6700\u540e\u4e00\u4e2a\u63d2\u4ef6\u5219\u4f1a\u8fd4\u56de\u7ed9\u7ba1\u9053\u7684\u8c03\u7528\u8005\n        '''\n        print('\u6536\u5230\u6570\u636e', data)\n        return data\n\n```\n\n### \u5185\u7f6ecodec\u63d2\u4ef6\n\n+ raw\n> \u53ea\u9700\u8981\u8c03\u7528\u8005\u53d1\u9001\u7684\u6570\u636e, \u5ffd\u7565\u7ba1\u9053\u63a5\u6536\u6570\u636e\u65f6\u5bf9\u6570\u636e\u7684\u6253\u5305, \u6ca1\u6709\u4efb\u4f55\u53c2\u6570\n\n+ dict\n> \u5c06\u8c03\u7528\u8005\u53d1\u9001\u7684\u6570\u636e\u8ba4\u4e3a\u662f\u4e00\u4e2adict, \u5e76\u5c06\u5b83\u66f4\u65b0\u5230\u6570\u636e\u7684\u9876\u5c42\n\n+ json\n> \u5c06\u8c03\u7528\u8005\u53d1\u9001\u7684\u6570\u636e\u8ba4\u4e3a\u53ef\u4ee5\u88abjson.loads\u51fd\u6570\u52a0\u8f7d, \u7ed3\u679c\u4e3adict, \u5e76\u5c06\u5b83\u66f4\u65b0\u5230\u6570\u636e\u7684\u9876\u5c42, \u53c2\u6570\u914d\u7f6e\u53c2\u8003json.loads\n\n+ msgpack\n> \u5c06\u8c03\u7528\u8005\u53d1\u9001\u7684\u6570\u636e\u8ba4\u4e3a\u53ef\u4ee5\u88abmsgpack.loads\u51fd\u6570\u52a0\u8f7d, \u7ed3\u679c\u5982\u679c\u4e3adict, \u4f1a\u5c06\u5b83\u66f4\u65b0\u5230\u6570\u636e\u7684\u9876\u5c42, \u53c2\u6570\u914d\u7f6e\u53c2\u8003msgpack.loads\n\n### \u5185\u7f6efilter\u63d2\u4ef6\n\n+ default\n\n\u53c2\u6570\u540d|\u53c2\u6570\u7c7b\u578b|\u9ed8\u8ba4\u503c|\u8bf4\u660e\n---|:--:|---|---\nremove|str or list||\u79fb\u9664\u6307\u5b9a\u7684\u6570\u636e, \u5141\u8bb8\u94fe\u5f0f\u8868\u8fbe\u6570\u636e\u4f4d\u7f6e,\u5982 \"a.b.c\" \u8868\u793a del data\\[a]\\[b]\\[c]\n\n### \u5185\u7f6eoutput\u63d2\u4ef6\n\n+ log\n> \u65e5\u5fd7\u8f93\u51fa\u63d2\u4ef6\n\n\u53c2\u6570\u540d|\u53c2\u6570\u7c7b\u578b|\u9ed8\u8ba4\u503c|\u8bf4\u660e\n---|:--:|---|---\nlog\\_name|str|zpipe\\_output\\_log|\u65e5\u5fd7\u540d\nwrite\\_stream|bool|True|\u662f\u5426\u8f93\u51fa\u5230\u6d41(\u63a7\u5236\u53f0)\nwrite\\_file|bool|False|\u662f\u5426\u8f93\u51fa\u5230\u6587\u4ef6\nfile\\_dir|str|.|\u8f93\u51fa\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84, \u5141\u8bb8\u76f8\u5bf9\u8def\u5f84(\u76f8\u5bf9\u4e8e\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84)\nlevel|str|debug|\u65e5\u5fd7\u53ef\u89c1\u7b49\u7ea7(debug,info,warn,error,fatal)\ninterval|int|1|\u95f4\u9694\u591a\u5c11\u5929\u65b0\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\nbackupCount|int|2|\u4fdd\u7559\u591a\u5c11\u4e2a\u5386\u53f2\u65e5\u5fd7\u6587\u4ef6\ninfo_level|str|\u65e5\u5fd7\u6d88\u606f\u7b49\u7ea7(debug,info,warn,error,fatal), \u5141\u8bb8\u4ece\u6d88\u606f\u5185\u63d0\u53d6, \u5982 \"raw.\\_\\_level\\_\\_\"\n\n\n### \u66f4\u65b0\u65e5\u5fd7\n\u53d1\u5e03\u65f6\u95f4|\u7248\u672c|\u53d1\u5e03\u8bf4\u660e\n--|:--:|---\n19-04-12 | 0.0.1 | \u53d1\u5e03\u7b2c\u4e00\u7248, \u6240\u6709\u529f\u80fd\u5747\u5df2\u5b9e\u73b0, \u4f46\u662f\u63d2\u4ef6\u5f88\u5c11, \u5141\u8bb8\u7528\u6237\u81ea\u5b9a\u4e49\u63d2\u4ef6, \u63d2\u4ef6\u5f00\u53d1\u7b80\u5355\n\n- - -\n\u672c\u9879\u76ee\u4ec5\u4f9b\u6240\u6709\u4eba\u5b66\u4e60\u4ea4\u6d41\u4f7f\u7528, \u7981\u6b62\u7528\u4e8e\u5546\u4e1a\u7528\u9014\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://pypi.org/project/zpipe/", "keywords": "", "license": "GNU GENERAL PUBLIC LICENSE", "maintainer": "", "maintainer_email": "", "name": "zpipe", "package_url": "https://pypi.org/project/zpipe/", "platform": "all", "project_url": "https://pypi.org/project/zpipe/", "project_urls": {"Homepage": "https://pypi.org/project/zpipe/"}, "release_url": "https://pypi.org/project/zpipe/0.0.1/", "requires_dist": ["msgpack (>=0.6.1)", "zlogger"], "requires_python": "", "summary": "\u5d4c\u5165\u5f0f\u7ba1\u9053\u6a21\u5757, \u7c7b\u4f3c\u4e8elogstash", "version": "0.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>\u5d4c\u5165\u5f0f\u7ba1\u9053\u6a21\u5757, \u7c7b\u4f3c\u4e8elogstash</h1>\n<h3>\u4f7f\u7528\u65b9\u6cd5\u7c7b\u4f3clogstash, \u914d\u7f6e\u5316\u64cd\u4f5c</h3>\n<h3>\u5b89\u88c5</h3>\n<pre><code>pip install zpipe\n</code></pre>\n<h3>\u914d\u7f6e\u7ba1\u9053\u6846\u67b6</h3>\n<blockquote>\n<p>\u521b\u5efa\u4e00\u4e2a\u76ee\u5f55, \u8fd9\u4e2a\u76ee\u5f55\u4f5c\u4e3a\u4f60\u7684\u7ba1\u9053\u7ec4\u7ec7\u4e3b\u8def\u5f84</p>\n</blockquote>\n<pre><code>mkdir /home/mypipe\nmkdir /home/mypipe/pipe_config\nmkdir /home/mypipe/plugin\n</code></pre>\n<blockquote>\n<p>\u521b\u5efa\u6846\u67b6\u914d\u7f6e\u6587\u4ef6</p>\n</blockquote>\n<pre><code>touch /etc/zpipe/config.json\n# win\u7cfb\u7edf: \"c:/zpipe/config.json\"\n# \u5176\u4ed6\u7cfb\u7edf: \"/etc/zpipe/config.json\"\n# \u53ef\u4ee5\u4f7f\u7528\u73af\u5883\u53d8\u91cf ZPIPE_CONFIG \u6307\u5b9a\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u8def\u5f84, \u4f18\u5148\u7ea7\u6700\u9ad8\n</code></pre>\n<blockquote>\n<p>\u4fee\u6539\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u4e3a\u4f60\u7684\u8bbe\u7f6e</p>\n</blockquote>\n<pre><span class=\"p\">{</span>\n  <span class=\"nt\">\"pipe_config_path\"</span><span class=\"p\">:</span> <span class=\"s2\">\"/home/mypipe/pipe_config\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"plugin_path\"</span><span class=\"p\">:</span> <span class=\"s2\">\"/home/mypipe/plugin\"</span>\n<span class=\"p\">}</span>\n</pre>\n<ul>\n<li>pipe_config_path \u8868\u793a\u7ba1\u9053\u914d\u7f6e\u6587\u4ef6\u8def\u5f84, \u53ef\u4ee5\u662f\u6587\u4ef6\u6216\u6587\u4ef6\u5939, \u6bcf\u4e2a\u914d\u7f6e\u6587\u4ef6\u662f\u4e00\u4e2ajson\u6587\u4ef6, \u6700\u540e\u6846\u67b6\u4f1a\u5c06\u6240\u6709json\u5408\u5e76\u4e3a\u4e00\u4e2a\u66f4\u5927\u7684json</li>\n<li>plugin_path \u8868\u793a\u63d2\u4ef6\u8def\u5f84, \u53ea\u80fd\u662f\u6587\u4ef6\u5939</li>\n<li>\u8def\u5f84\u53ef\u4ee5\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84(\u76f8\u5bf9\u4e8e\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84), \u591a\u8def\u5f84\u7528\u5206\u53f7 [;] \u9694\u5f00</li>\n</ul>\n<h1>\u5927\u529f\u544a\u6210, \u7ec8\u4e8e\u53ef\u4ee5\u5f00\u59cb\u5236\u4f5c\u7ba1\u9053\u4e86</h1>\n<h3>\u4e00\u4e2a\u7b80\u5355\u7684\u7ba1\u9053</h3>\n<ul>\n<li>\u5728\u7ba1\u9053\u914d\u7f6e\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6 my_pipe.py, \u5199\u5165\u5982\u4e0b\u5185\u5bb9</li>\n</ul>\n<pre><span class=\"p\">{</span>\n  <span class=\"nt\">\"test\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"output\"</span><span class=\"p\">:</span> <span class=\"s2\">\"log\"</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre>\n<ul>\n<li>\u65b0\u5efa\u4e00\u4e2apy\u6587\u4ef6, \u5199\u5165\u5982\u4e0b\u5185\u5bb9</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">zpipe</span> <span class=\"kn\">import</span> <span class=\"n\">pipe_server</span>\n\n<span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"n\">pipe_server</span><span class=\"p\">()</span>\n<span class=\"n\">pipe</span> <span class=\"o\">=</span> <span class=\"n\">a</span><span class=\"o\">.</span><span class=\"n\">get_pipe</span><span class=\"p\">(</span><span class=\"s1\">'test'</span><span class=\"p\">)</span>\n<span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">pipe</span><span class=\"o\">.</span><span class=\"n\">process</span><span class=\"p\">(</span><span class=\"s2\">\"\u6d4b\u8bd5\u6d88\u606f\"</span><span class=\"p\">)</span>\n</pre>\n<blockquote>\n<p>\u8fd0\u884c\u5b83, \u968f\u540e\u4f60\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u770b\u5230\u6253\u5370\u51fa\u6765\u7684\u6d88\u606f</p>\n</blockquote>\n<h3>\u8fd9\u4e2a\u7ba1\u9053\u505a\u4e86\u4ec0\u4e48</h3>\n<pre><code>{\n  \"test\": {           #\u5b9a\u4e49\u7ba1\u9053\u540d\n    \"output\": \"log\"   #\u5b9a\u4e49\u8f93\u51fa\u63d2\u4ef6\n  }\n}\n</code></pre>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">zpipe</span> <span class=\"kn\">import</span> <span class=\"n\">pipe_server</span>      <span class=\"c1\">#\u5bfc\u5165\u6846\u67b6\u670d\u52a1</span>\n\n<span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"n\">pipe_server</span><span class=\"p\">()</span>                  <span class=\"c1\">#\u521b\u5efa\u6846\u67b6\u670d\u52a1\u7684\u5b9e\u4f8b</span>\n<span class=\"n\">pipe</span> <span class=\"o\">=</span> <span class=\"n\">a</span><span class=\"o\">.</span><span class=\"n\">get_pipe</span><span class=\"p\">(</span><span class=\"s1\">'test'</span><span class=\"p\">)</span>          <span class=\"c1\">#\u83b7\u53d6\u7ba1\u9053\u5b9e\u4f8b</span>\n<span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">pipe</span><span class=\"o\">.</span><span class=\"n\">process</span><span class=\"p\">(</span><span class=\"s2\">\"\u6d4b\u8bd5\u6d88\u606f\"</span><span class=\"p\">)</span>   <span class=\"c1\">#\u5411\u7ba1\u9053\u53d1\u9001\u6570\u636e\u5e76\u83b7\u53d6\u7ba1\u9053\u7ed3\u679c</span>\n</pre>\n<h3>\u7ba1\u9053\u914d\u7f6e\u8be6\u89e3</h3>\n<blockquote>\n<p>\u5bf9\u63d2\u4ef6\u8bbe\u7f6e\u53c2\u6570, \u6267\u884c\u987a\u5e8f\u4e3a pipe &gt; codec &gt; filter.codec &gt; filter &gt; output.codec &gt; output</p>\n</blockquote>\n<pre><span class=\"p\">{</span>\n  <span class=\"nt\">\"\u7ba1\u90531\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"codec\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u89e3\u7801\u5668\u540d\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"\u53c2\u6570\u540d\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u53c2\u6570\u503c\"</span>\n    <span class=\"p\">},</span>\n    <span class=\"nt\">\"filter\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u8fc7\u6ee4\u5668\u540d\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"\u53c2\u6570\u540d\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u53c2\u6570\u503c\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"codec\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u89e3\u7801\u5668\u540d\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"\u53c2\u6570\u540d\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u53c2\u6570\u503c\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n    <span class=\"nt\">\"output\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u8f93\u51fa\u63d2\u4ef6\u540d\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"\u53c2\u6570\u540d\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u53c2\u6570\u503c\"</span><span class=\"p\">,</span>\n      <span class=\"nt\">\"codec\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u89e3\u7801\u5668\u540d\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"\u53c2\u6570\u540d\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u53c2\u6570\u503c\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n    <span class=\"nt\">\"\u53c2\u6570\u540d\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u53c2\u6570\u503c\"</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">\"\u7ba1\u90532\"</span><span class=\"p\">:{</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre>\n<blockquote>\n<p>\u5982\u679c\u4e0d\u8bbe\u7f6e\u53c2\u6570\u53ef\u4ee5\u7b80\u5316\u914d\u7f6e</p>\n</blockquote>\n<pre><span class=\"p\">{</span>\n  <span class=\"nt\">\"\u7ba1\u9053\u540d\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"codec\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u89e3\u7801\u5668\u540d\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"filter\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u8fc7\u6ee4\u5668\u540d\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"output\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u8f93\u51fa\u63d2\u4ef6\u540d\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"\u53c2\u6570\u540d\"</span><span class=\"p\">:</span> <span class=\"s2\">\"\u53c2\u6570\u503c\"</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre>\n<h3>\u81ea\u5236\u63d2\u4ef6, \u7b80\u5355\u63d2\u4ef6\u5b9e\u4f8b</h3>\n<pre><span class=\"c1\"># \u81ea\u5236\u63d2\u4ef6\u5fc5\u987b\u9075\u5faa\u4ee5\u4e0b\u89c4\u5219</span>\n<span class=\"c1\"># \u63d2\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u5fc5\u987b\u6dfb\u52a0\u5230\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u7684plugin_path\u91cc</span>\n<span class=\"c1\"># \u63d2\u4ef6\u7c7b\u578b\u76ee\u524d\u53ea\u6709\u4e09\u79cd['codec', 'filter', 'output']</span>\n<span class=\"c1\"># \u63d2\u4ef6\u6587\u4ef6\u540d\u5fc5\u987b\u4e3a\u89c4\u5219:[zpipe_\u63d2\u4ef6\u7c7b\u578b_\u63d2\u4ef6\u540d.py]</span>\n<span class=\"c1\"># \u63d2\u4ef6\u7c7b\u540d\u5fc5\u987b\u548c\u63d2\u4ef6\u6587\u4ef6\u540d\u76f8\u540c\u5e76\u4e14\u7ee7\u627f\u4e8e[zpipe.plugin_base]</span>\n\n<span class=\"c1\"># zpipe_output_test.py</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">zpipe</span> <span class=\"kn\">import</span> <span class=\"n\">plugin_base</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">zpipe_output_test</span><span class=\"p\">(</span><span class=\"n\">plugin_base</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">plugin_init</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">):</span>\n        <span class=\"sd\">'''</span>\n<span class=\"sd\">        \u63d2\u4ef6\u521d\u59cb\u5316</span>\n<span class=\"sd\">        :param kw: \u8fd9\u91cc\u63a5\u6536\u7ba1\u9053\u5b9a\u4e49\u7684\u63d2\u4ef6\u53c2\u6570</span>\n<span class=\"sd\">        '''</span>\n        <span class=\"k\">pass</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">plugin_distroy</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">'''</span>\n<span class=\"sd\">        \u63d2\u4ef6\u9500\u6bc1\u65f6</span>\n<span class=\"sd\">        '''</span>\n        <span class=\"k\">pass</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">process</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">):</span>\n        <span class=\"sd\">'''</span>\n<span class=\"sd\">        \u63d2\u4ef6\u8fc7\u7a0b</span>\n<span class=\"sd\">        :param data: \u6536\u5230\u7684\u6570\u636e</span>\n<span class=\"sd\">        :return: \u7ed3\u679c\u4f1a\u987a\u5e8f\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u63d2\u4ef6, \u5982\u679c\u662f\u6700\u540e\u4e00\u4e2a\u63d2\u4ef6\u5219\u4f1a\u8fd4\u56de\u7ed9\u7ba1\u9053\u7684\u8c03\u7528\u8005</span>\n<span class=\"sd\">        '''</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'\u6536\u5230\u6570\u636e'</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">data</span>\n</pre>\n<h3>\u5185\u7f6ecodec\u63d2\u4ef6</h3>\n<ul>\n<li>raw</li>\n</ul>\n<blockquote>\n<p>\u53ea\u9700\u8981\u8c03\u7528\u8005\u53d1\u9001\u7684\u6570\u636e, \u5ffd\u7565\u7ba1\u9053\u63a5\u6536\u6570\u636e\u65f6\u5bf9\u6570\u636e\u7684\u6253\u5305, \u6ca1\u6709\u4efb\u4f55\u53c2\u6570</p>\n</blockquote>\n<ul>\n<li>dict</li>\n</ul>\n<blockquote>\n<p>\u5c06\u8c03\u7528\u8005\u53d1\u9001\u7684\u6570\u636e\u8ba4\u4e3a\u662f\u4e00\u4e2adict, \u5e76\u5c06\u5b83\u66f4\u65b0\u5230\u6570\u636e\u7684\u9876\u5c42</p>\n</blockquote>\n<ul>\n<li>json</li>\n</ul>\n<blockquote>\n<p>\u5c06\u8c03\u7528\u8005\u53d1\u9001\u7684\u6570\u636e\u8ba4\u4e3a\u53ef\u4ee5\u88abjson.loads\u51fd\u6570\u52a0\u8f7d, \u7ed3\u679c\u4e3adict, \u5e76\u5c06\u5b83\u66f4\u65b0\u5230\u6570\u636e\u7684\u9876\u5c42, \u53c2\u6570\u914d\u7f6e\u53c2\u8003json.loads</p>\n</blockquote>\n<ul>\n<li>msgpack</li>\n</ul>\n<blockquote>\n<p>\u5c06\u8c03\u7528\u8005\u53d1\u9001\u7684\u6570\u636e\u8ba4\u4e3a\u53ef\u4ee5\u88abmsgpack.loads\u51fd\u6570\u52a0\u8f7d, \u7ed3\u679c\u5982\u679c\u4e3adict, \u4f1a\u5c06\u5b83\u66f4\u65b0\u5230\u6570\u636e\u7684\u9876\u5c42, \u53c2\u6570\u914d\u7f6e\u53c2\u8003msgpack.loads</p>\n</blockquote>\n<h3>\u5185\u7f6efilter\u63d2\u4ef6</h3>\n<ul>\n<li>default</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>\u53c2\u6570\u540d</th>\n<th align=\"center\">\u53c2\u6570\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n<th>\u8bf4\u660e</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>remove</td>\n<td align=\"center\">str or list</td>\n<td></td>\n<td>\u79fb\u9664\u6307\u5b9a\u7684\u6570\u636e, \u5141\u8bb8\u94fe\u5f0f\u8868\u8fbe\u6570\u636e\u4f4d\u7f6e,\u5982 \"a.b.c\" \u8868\u793a del data[a][b][c]</td>\n</tr></tbody></table>\n<h3>\u5185\u7f6eoutput\u63d2\u4ef6</h3>\n<ul>\n<li>log</li>\n</ul>\n<blockquote>\n<p>\u65e5\u5fd7\u8f93\u51fa\u63d2\u4ef6</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>\u53c2\u6570\u540d</th>\n<th align=\"center\">\u53c2\u6570\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n<th>\u8bf4\u660e</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>log_name</td>\n<td align=\"center\">str</td>\n<td>zpipe_output_log</td>\n<td>\u65e5\u5fd7\u540d</td>\n</tr>\n<tr>\n<td>write_stream</td>\n<td align=\"center\">bool</td>\n<td>True</td>\n<td>\u662f\u5426\u8f93\u51fa\u5230\u6d41(\u63a7\u5236\u53f0)</td>\n</tr>\n<tr>\n<td>write_file</td>\n<td align=\"center\">bool</td>\n<td>False</td>\n<td>\u662f\u5426\u8f93\u51fa\u5230\u6587\u4ef6</td>\n</tr>\n<tr>\n<td>file_dir</td>\n<td align=\"center\">str</td>\n<td>.</td>\n<td>\u8f93\u51fa\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84, \u5141\u8bb8\u76f8\u5bf9\u8def\u5f84(\u76f8\u5bf9\u4e8e\u6846\u67b6\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84)</td>\n</tr>\n<tr>\n<td>level</td>\n<td align=\"center\">str</td>\n<td>debug</td>\n<td>\u65e5\u5fd7\u53ef\u89c1\u7b49\u7ea7(debug,info,warn,error,fatal)</td>\n</tr>\n<tr>\n<td>interval</td>\n<td align=\"center\">int</td>\n<td>1</td>\n<td>\u95f4\u9694\u591a\u5c11\u5929\u65b0\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6</td>\n</tr>\n<tr>\n<td>backupCount</td>\n<td align=\"center\">int</td>\n<td>2</td>\n<td>\u4fdd\u7559\u591a\u5c11\u4e2a\u5386\u53f2\u65e5\u5fd7\u6587\u4ef6</td>\n</tr>\n<tr>\n<td>info_level</td>\n<td align=\"center\">str</td>\n<td>\u65e5\u5fd7\u6d88\u606f\u7b49\u7ea7(debug,info,warn,error,fatal), \u5141\u8bb8\u4ece\u6d88\u606f\u5185\u63d0\u53d6, \u5982 \"raw.__level__\"</td>\n<td></td>\n</tr></tbody></table>\n<h3>\u66f4\u65b0\u65e5\u5fd7</h3>\n<table>\n<thead>\n<tr>\n<th>\u53d1\u5e03\u65f6\u95f4</th>\n<th align=\"center\">\u7248\u672c</th>\n<th>\u53d1\u5e03\u8bf4\u660e</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>19-04-12</td>\n<td align=\"center\">0.0.1</td>\n<td>\u53d1\u5e03\u7b2c\u4e00\u7248, \u6240\u6709\u529f\u80fd\u5747\u5df2\u5b9e\u73b0, \u4f46\u662f\u63d2\u4ef6\u5f88\u5c11, \u5141\u8bb8\u7528\u6237\u81ea\u5b9a\u4e49\u63d2\u4ef6, \u63d2\u4ef6\u5f00\u53d1\u7b80\u5355</td>\n</tr></tbody></table>\n<hr>\n<p>\u672c\u9879\u76ee\u4ec5\u4f9b\u6240\u6709\u4eba\u5b66\u4e60\u4ea4\u6d41\u4f7f\u7528, \u7981\u6b62\u7528\u4e8e\u5546\u4e1a\u7528\u9014</p>\n\n          </div>"}, "last_serial": 5133277, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "bfe0b10aac12e38525d556ecc90c6dc3", "sha256": "744615b58efa73175cb8ea9f2285df0ec7bab903438593517fad2df2974817f7"}, "downloads": -1, "filename": "zpipe-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "bfe0b10aac12e38525d556ecc90c6dc3", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 24851, "upload_time": "2019-04-12T10:05:14", "upload_time_iso_8601": "2019-04-12T10:05:14.448770Z", "url": "https://files.pythonhosted.org/packages/3d/e0/b975179b0ee02be79fa58e1e59ccf9c07fd8e6b9150d4e008b95b045e57f/zpipe-0.0.1-py3-none-any.whl", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "bfe0b10aac12e38525d556ecc90c6dc3", "sha256": "744615b58efa73175cb8ea9f2285df0ec7bab903438593517fad2df2974817f7"}, "downloads": -1, "filename": "zpipe-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "bfe0b10aac12e38525d556ecc90c6dc3", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 24851, "upload_time": "2019-04-12T10:05:14", "upload_time_iso_8601": "2019-04-12T10:05:14.448770Z", "url": "https://files.pythonhosted.org/packages/3d/e0/b975179b0ee02be79fa58e1e59ccf9c07fd8e6b9150d4e008b95b045e57f/zpipe-0.0.1-py3-none-any.whl", "yanked": false}], "timestamp": "Fri May  8 03:11:25 2020"}