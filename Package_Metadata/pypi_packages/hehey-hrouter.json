{"info": {"author": "13564768842", "author_email": "chinabluexfw@163.com", "bugtrack_url": null, "classifiers": [], "description": "# hehey-hrouter\n\n#### \u4ecb\u7ecd\nhehey-hrouter \u662f\u4e00\u4e2apython \u8def\u7531\u5de5\u5177\u7ec4\u4ef6,\u4effYii2 \u8def\u7531\u89c4\u5219\n\n#### \u4f9d\u8d56\u4ee5\u53ca\u7248\u672c\u8981\u6c42\n- python >= 3.5\n\n#### \u5b89\u88c5\n- \u76f4\u63a5\u4e0b\u8f7d:\n```\n\n```\n- \u547d\u4ee4\u5b89\u88c5\uff1a\n```\npip install hehey-hrouter\n```\n#### \u57fa\u7840\u6587\u4ef6\u4ee5\u76ee\u5f55\n\n\n#### \u53c2\u6570\u914d\u7f6e\n```python\nconf = {\n    # \u8def\u7531\u89c4\u5219\u914d\u7f6e\n    'customRouter':{\n        'clazz': 'easy',\n        'rules':[\n            #{'uri':'index/user','action':'index/getindexAction'},\n            {'uri': '<controller:\\w+>/<action:\\w+>', 'action': '<controller>/<action>'},\n            # {'uri': '<controller:\\w+>/<action:\\w+>', 'action': '<controller>/<action>'}\n        ],\n        'actionRule':{\n            'filter': ['site', 'controllers', 'modules'],\n            'suffix': ['Action', 'Controller'],\n            'func':''#action \u5730\u5740\u5904\u7406\u65b9\u6cd5\n        }\n    },\n    # \u89e3\u6790\u8bf7\u6c42\u7684\u7c7b\u8bbe\u7f6e,\u63d0\u4f9bweb(WebRouterRequest),\u547d\u4ee4\u884c\u89e3\u6790(ConsoleRouterRequest)\n    'routerRequest':\"WebRouterRequest\",# \u9ed8\u8ba4\u4e3aweb \u8bf7\u6c42\n}\n```\n- customRouter:\u8def\u7531\u89c4\u5219\u914d\u7f6e\n    - rules:\u8def\u7531\u89c4\u5219\n    - actionRule: action \u5730\u5740\u89c4\u5219,\u63d0\u4f9b\u81ea\u52a8\u8fc7\u6ee4\u540e\u7f00,\u4ee5\u53ca\u8fc7\u6ee4\u7c7b\u8def\u5f84\u7b49\u64cd\u4f5c\n- routerRequest:\u89e3\u6790\u8bf7\u6c42\u7684\u7c7b\u8bbe\u7f6e,\u63d0\u4f9bweb(WebRouterRequest),\u547d\u4ee4\u884c\u89e3\u6790(ConsoleRouterRequest)\n\n\n\n#### \u57fa\u672c\u793a\u4f8b\n- \u5feb\u901f\u4f7f\u7528\n```python\nfrom hrouter.route import RouterManager\nconf =  {\n    'customRouter':{\n        'clazz': 'easy',\n        'rules':[],\n        'actionRule':{\n            'filter': ['site', 'controllers', 'modules'],\n            'suffix': ['Action', 'Controller'],\n            'func':''#action \u5730\u5740\u5904\u7406\u65b9\u6cd5\n        }\n    }\n}\n\nrouterManager = RouterManager(**conf);\n# \u89e3\u6790\u8bf7\u6c42\nrouterRequest = routerManager.runRoute({'PATH_INFO':\"news/list\"});\nrouteUrl = routerRequest.getRouteUrl() # \u83b7\u53d6\u8def\u7531\u89e3\u6790\u540eurl\u5730\u5740,\u6bd4\u5982news/index\nrouteParams = routerRequest.getRouteParams();# \u83b7\u53d6\u8def\u7531\u7684\u89e3\u6790\u540e\u53c2\u6570{\"id\":1}\n# \u751f\u6210url \u5730\u5740\nurl = routerManager.buildUrl('news/detail',{\"id\":\"10\"})  \n# url: news/detail?id=10\n\n```\n\n- \u89e3\u6790web\u8bf7\u6c42\u5730\u5740\n```python\n# \u6d4f\u89c8\u5668\u8f93\u5165:http://xxx.cn/news/index?id=1\n\nfrom hrouter.route import RouterManager\nconf =  {\n    'customRouter':{\n        'clazz': 'easy',\n        'rules':[],\n        'actionRule':{\n            'filter': ['site', 'controllers', 'modules'],\n            'suffix': ['Action', 'Controller'],\n            'func':''#action \u5730\u5740\u5904\u7406\u65b9\u6cd5\n        }\n    },\n    'routerRequest':\"WebRouterRequest\",# \u9ed8\u8ba4\u4e3aweb \u8bf7\u6c42\n}\n\nrouterManager = RouterManager(**conf);\n# \u89e3\u6790\u8bf7\u6c42\nenviron = {};# uwsgi environ \u4e0a\u4e0b\u6587\nrouterRequest = routerManager.runRoute(environ);\nrouteUrl = routerRequest.getRouteUrl() # \u83b7\u53d6\u8def\u7531\u89e3\u6790\u540eurl\u5730\u5740,\u6bd4\u5982news/index\nrouteParams = routerRequest.getRouteParams();# \u83b7\u53d6\u8def\u7531\u7684\u89e3\u6790\u540e\u53c2\u6570{\"id\":1}\n\n```\n\n- \u89e3\u6790\u547d\u4ee4\u884c\u8bf7\u6c42\u5730\u5740\n```python\n\n# \u63a7\u5236\u53f0\u8f93\u5165: python3 main.py news/detail?id=2\n\nfrom hrouter.route import RouterManager\nconf =  {\n    'customRouter':{\n        'clazz': 'easy',\n        'rules':[],\n        'actionRule':{\n            'filter': ['site', 'controllers', 'modules'],\n            'suffix': ['Action', 'Controller'],\n            'func':''#action \u5730\u5740\u5904\u7406\u65b9\u6cd5\n        }\n    },\n    'routerRequest':\"ConsoleRouterRequest\",\n}\n\nrouterManager = RouterManager(**conf);\n# \u89e3\u6790\u8bf7\u6c42\nenviron = {};# uwsgi environ \u4e0a\u4e0b\u6587\nrouterRequest = routerManager.runRoute(environ);\nrouteUrl = routerRequest.getRouteUrl() # \u83b7\u53d6\u8def\u7531\u89e3\u6790\u540eurl\u5730\u5740,\u6bd4\u5982news/detail\nrouteParams = routerRequest.getRouteParams();# \u83b7\u53d6\u8def\u7531\u7684\u89e3\u6790\u540e\u53c2\u6570{\"id\":2}\n\n```\n\n\n- \u89c4\u5219\u8def\u7531\n```python\nfrom hrouter.route import RouterManager\nconf =  {\n    'customRouter':{\n        'clazz': 'easy',\n        'rules':[\n            # uri \u8bf7\u6c42\u5730\u5740\u89c4\u5219,action \u64cd\u4f5c\u5730\u5740\u89c4\u5219,method \u8bf7\u6c42\u65b9\u6cd5,clazz \u89c4\u5219\u7c7b,\u7528\u4e8e\u6269\u5c55\n            #{'uri':'<news:\\w+>/<id:\\d+>','action':'<news>/index','method'='get','clazz'=>''},\n            #{'uri':'<controller:\\w+>/<action:\\w+>','action':'<controller>/<action>'},\n\n            {'uri':'<news:\\w+>/<id:\\d+>.html','action':'<news>/detail'}\n        \n        ],\n        'actionRule':{\n            'filter': ['site', 'controllers', 'modules'],\n            'suffix': ['Action', 'Controller'],\n            'func':''#action \u5730\u5740\u5904\u7406\u65b9\u6cd5\n        }\n    }\n}\n\nrouterManager = RouterManager(**conf);\nurl = routerManager.buildUrl('news/detail',{\"id\":\"10\"})  \n# url:news/detail?id=10\n\n```\n\n\n- \u751f\u6210\u5730\u5740\n```python\nfrom hrouter.route import RouterManager\nconf =  {\n    'customRouter':{\n        'clazz': 'easy',\n        'rules':[\n            # uri \u8bf7\u6c42\u5730\u5740\u89c4\u5219,action \u64cd\u4f5c\u5730\u5740\u89c4\u5219,method \u8bf7\u6c42\u65b9\u6cd5,clazz \u89c4\u5219\u7c7b,\u7528\u4e8e\u6269\u5c55\n            #{'uri':'<news:\\w+>/<id:\\d+>','action':'<news>/index','method'='get','clazz'=>''},\n            #{'uri':'<controller:\\w+>/<action:\\w+>','action':'<controller>/<action>'},\n\n            {'uri':'<news:\\w+>/<id:\\d+>.html','action':'<news>/detail'}\n        \n        ],\n        'actionRule':{\n            'filter': ['site', 'controllers', 'modules'],\n            'suffix': ['Action', 'Controller'],\n            'func':''#action \u5730\u5740\u5904\u7406\u65b9\u6cd5\n        }\n    }\n}\n\nrouterManager = RouterManager(**conf);\nurl = routerManager.buildUrl('news/detail',{\"id\":\"10\"})  \n# url:news/detail?id=10\n\n```\n\n- \u88c5\u9970\u5668\u6ce8\u518c\u8def\u7531\u89c4\u5219\n```python\nfrom hrouter.route import RouterManager,reg_route_rule\nconf =  {\n    'customRouter':{\n        'clazz': 'easy',\n        'rules':[\n            # uri \u8bf7\u6c42\u5730\u5740\u89c4\u5219,action \u64cd\u4f5c\u5730\u5740\u89c4\u5219,method \u8bf7\u6c42\u65b9\u6cd5,clazz \u89c4\u5219\u7c7b,\u7528\u4e8e\u6269\u5c55\n            #{'uri':'<news:\\w+>/<id:\\d+>','action':'<news>/index','method'='get','clazz'=>''},\n            #{'uri':'<controller:\\w+>/<action:\\w+>','action':'<controller>/<action>'},\n\n            {'uri':'<news:\\w+>/<id:\\d+>.html','action':'<news>/detail'}\n        \n        ],\n        'actionRule':{\n            'filter': ['site', 'controllers', 'modules'],\n            'suffix': ['Action', 'Controller'],\n            'func':''#action \u5730\u5740\u5904\u7406\u65b9\u6cd5\n        }\n    }\n}\n\nrouterManager = RouterManager(**conf);\n\n# \u6ce8\u518c\u8def\u7531\u89c4\u5219-\u51fd\u6570\n@reg_route_rule('getuser')\ndef getuser(self):\n\n    return \"<h1>\u60a8\u597d</h1>\"\n\n# \u6ce8\u518c\u8def\u7531\u89c4\u5219-\u7c7b\u65b9\u6cd5\nclass NewsController:\n\n    @reg_route_rule('news/list',method = 'post')\n    def index(self):\n\n        return \"<h1>\u60a8\u597d</h1>\"\n\n    # \u8d44\u8baf\u8be6\u60c5\n    def detail(self):\n\n        return \"<h1>\u60a8\u597d</h1>\"\n\n# \u521b\u5efa\u8def\u7531request \u5bf9\u8c61\nrouterRequest = routerManager.runRoute({'PATH_INFO':\"news/list\"});\n# \u83b7\u53d6\u89e3\u6790\u540e\u7684\u8def\u7531\u5730\u5740\nrouteUrl = routerRequest.getRouteUrl() # \u83b7\u53d6\u8def\u7531\u89e3\u6790\u540eurl\u5730\u5740,\u6bd4\u5982news/index\nrouteParams = routerRequest.getRouteParams();# \u83b7\u53d6\u8def\u7531\u7684\u89e3\u6790\u540e\u53c2\u6570{\"id\":1}\n# route = news/getindex\n\n# \u751f\u6210\u5730\u5740\nurl = routerManager.buildUrl('news/getuser',{\"id\":\"10\"})\n# url: news/getuser?id=10\nurl = routerManager.buildUrl('getuser',{\"id\":\"10\"})\n# url: getuser?id=10\nurl = routerManager.buildUrl('news/detail',{\"id\":\"10\"})\n# url: news/10.html\n\nurl = routerManager.buildUrl('account/user/add',{\"id\":\"10\"})\n# url: account/user/add?id=10\n\n\n\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://gitee.com/chinahehe/hehey-hrouter", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "hehey-hrouter", "package_url": "https://pypi.org/project/hehey-hrouter/", "platform": "", "project_url": "https://pypi.org/project/hehey-hrouter/", "project_urls": {"Homepage": "https://gitee.com/chinahehe/hehey-hrouter"}, "release_url": "https://pypi.org/project/hehey-hrouter/1.0.2/", "requires_dist": null, "requires_python": "", "summary": "hehey-hrouter \u662f\u4e00\u4e2apython \u8def\u7531\u5de5\u5177\u7ec4\u4ef6,\u4effYii2 \u8def\u7531\u89c4\u5219", "version": "1.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>hehey-hrouter</h1>\n<h4>\u4ecb\u7ecd</h4>\n<p>hehey-hrouter \u662f\u4e00\u4e2apython \u8def\u7531\u5de5\u5177\u7ec4\u4ef6,\u4effYii2 \u8def\u7531\u89c4\u5219</p>\n<h4>\u4f9d\u8d56\u4ee5\u53ca\u7248\u672c\u8981\u6c42</h4>\n<ul>\n<li>python &gt;= 3.5</li>\n</ul>\n<h4>\u5b89\u88c5</h4>\n<ul>\n<li>\u76f4\u63a5\u4e0b\u8f7d:</li>\n</ul>\n<pre><code>\n</code></pre>\n<ul>\n<li>\u547d\u4ee4\u5b89\u88c5\uff1a</li>\n</ul>\n<pre><code>pip install hehey-hrouter\n</code></pre>\n<h4>\u57fa\u7840\u6587\u4ef6\u4ee5\u76ee\u5f55</h4>\n<h4>\u53c2\u6570\u914d\u7f6e</h4>\n<pre><span class=\"n\">conf</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"c1\"># \u8def\u7531\u89c4\u5219\u914d\u7f6e</span>\n    <span class=\"s1\">'customRouter'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'easy'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'rules'</span><span class=\"p\">:[</span>\n            <span class=\"c1\">#{'uri':'index/user','action':'index/getindexAction'},</span>\n            <span class=\"p\">{</span><span class=\"s1\">'uri'</span><span class=\"p\">:</span> <span class=\"s1\">'&lt;controller:\\w+&gt;/&lt;action:\\w+&gt;'</span><span class=\"p\">,</span> <span class=\"s1\">'action'</span><span class=\"p\">:</span> <span class=\"s1\">'&lt;controller&gt;/&lt;action&gt;'</span><span class=\"p\">},</span>\n            <span class=\"c1\"># {'uri': '&lt;controller:\\w+&gt;/&lt;action:\\w+&gt;', 'action': '&lt;controller&gt;/&lt;action&gt;'}</span>\n        <span class=\"p\">],</span>\n        <span class=\"s1\">'actionRule'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'filter'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'site'</span><span class=\"p\">,</span> <span class=\"s1\">'controllers'</span><span class=\"p\">,</span> <span class=\"s1\">'modules'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'suffix'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'Action'</span><span class=\"p\">,</span> <span class=\"s1\">'Controller'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'func'</span><span class=\"p\">:</span><span class=\"s1\">''</span><span class=\"c1\">#action \u5730\u5740\u5904\u7406\u65b9\u6cd5</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n    <span class=\"c1\"># \u89e3\u6790\u8bf7\u6c42\u7684\u7c7b\u8bbe\u7f6e,\u63d0\u4f9bweb(WebRouterRequest),\u547d\u4ee4\u884c\u89e3\u6790(ConsoleRouterRequest)</span>\n    <span class=\"s1\">'routerRequest'</span><span class=\"p\">:</span><span class=\"s2\">\"WebRouterRequest\"</span><span class=\"p\">,</span><span class=\"c1\"># \u9ed8\u8ba4\u4e3aweb \u8bf7\u6c42</span>\n<span class=\"p\">}</span>\n</pre>\n<ul>\n<li>customRouter:\u8def\u7531\u89c4\u5219\u914d\u7f6e\n<ul>\n<li>rules:\u8def\u7531\u89c4\u5219</li>\n<li>actionRule: action \u5730\u5740\u89c4\u5219,\u63d0\u4f9b\u81ea\u52a8\u8fc7\u6ee4\u540e\u7f00,\u4ee5\u53ca\u8fc7\u6ee4\u7c7b\u8def\u5f84\u7b49\u64cd\u4f5c</li>\n</ul>\n</li>\n<li>routerRequest:\u89e3\u6790\u8bf7\u6c42\u7684\u7c7b\u8bbe\u7f6e,\u63d0\u4f9bweb(WebRouterRequest),\u547d\u4ee4\u884c\u89e3\u6790(ConsoleRouterRequest)</li>\n</ul>\n<h4>\u57fa\u672c\u793a\u4f8b</h4>\n<ul>\n<li>\u5feb\u901f\u4f7f\u7528</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hrouter.route</span> <span class=\"kn\">import</span> <span class=\"n\">RouterManager</span>\n<span class=\"n\">conf</span> <span class=\"o\">=</span>  <span class=\"p\">{</span>\n    <span class=\"s1\">'customRouter'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'easy'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'rules'</span><span class=\"p\">:[],</span>\n        <span class=\"s1\">'actionRule'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'filter'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'site'</span><span class=\"p\">,</span> <span class=\"s1\">'controllers'</span><span class=\"p\">,</span> <span class=\"s1\">'modules'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'suffix'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'Action'</span><span class=\"p\">,</span> <span class=\"s1\">'Controller'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'func'</span><span class=\"p\">:</span><span class=\"s1\">''</span><span class=\"c1\">#action \u5730\u5740\u5904\u7406\u65b9\u6cd5</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">routerManager</span> <span class=\"o\">=</span> <span class=\"n\">RouterManager</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">conf</span><span class=\"p\">);</span>\n<span class=\"c1\"># \u89e3\u6790\u8bf7\u6c42</span>\n<span class=\"n\">routerRequest</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">runRoute</span><span class=\"p\">({</span><span class=\"s1\">'PATH_INFO'</span><span class=\"p\">:</span><span class=\"s2\">\"news/list\"</span><span class=\"p\">});</span>\n<span class=\"n\">routeUrl</span> <span class=\"o\">=</span> <span class=\"n\">routerRequest</span><span class=\"o\">.</span><span class=\"n\">getRouteUrl</span><span class=\"p\">()</span> <span class=\"c1\"># \u83b7\u53d6\u8def\u7531\u89e3\u6790\u540eurl\u5730\u5740,\u6bd4\u5982news/index</span>\n<span class=\"n\">routeParams</span> <span class=\"o\">=</span> <span class=\"n\">routerRequest</span><span class=\"o\">.</span><span class=\"n\">getRouteParams</span><span class=\"p\">();</span><span class=\"c1\"># \u83b7\u53d6\u8def\u7531\u7684\u89e3\u6790\u540e\u53c2\u6570{\"id\":1}</span>\n<span class=\"c1\"># \u751f\u6210url \u5730\u5740</span>\n<span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">buildUrl</span><span class=\"p\">(</span><span class=\"s1\">'news/detail'</span><span class=\"p\">,{</span><span class=\"s2\">\"id\"</span><span class=\"p\">:</span><span class=\"s2\">\"10\"</span><span class=\"p\">})</span>  \n<span class=\"c1\"># url: news/detail?id=10</span>\n</pre>\n<ul>\n<li>\u89e3\u6790web\u8bf7\u6c42\u5730\u5740</li>\n</ul>\n<pre><span class=\"c1\"># \u6d4f\u89c8\u5668\u8f93\u5165:http://xxx.cn/news/index?id=1</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">hrouter.route</span> <span class=\"kn\">import</span> <span class=\"n\">RouterManager</span>\n<span class=\"n\">conf</span> <span class=\"o\">=</span>  <span class=\"p\">{</span>\n    <span class=\"s1\">'customRouter'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'easy'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'rules'</span><span class=\"p\">:[],</span>\n        <span class=\"s1\">'actionRule'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'filter'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'site'</span><span class=\"p\">,</span> <span class=\"s1\">'controllers'</span><span class=\"p\">,</span> <span class=\"s1\">'modules'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'suffix'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'Action'</span><span class=\"p\">,</span> <span class=\"s1\">'Controller'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'func'</span><span class=\"p\">:</span><span class=\"s1\">''</span><span class=\"c1\">#action \u5730\u5740\u5904\u7406\u65b9\u6cd5</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n    <span class=\"s1\">'routerRequest'</span><span class=\"p\">:</span><span class=\"s2\">\"WebRouterRequest\"</span><span class=\"p\">,</span><span class=\"c1\"># \u9ed8\u8ba4\u4e3aweb \u8bf7\u6c42</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">routerManager</span> <span class=\"o\">=</span> <span class=\"n\">RouterManager</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">conf</span><span class=\"p\">);</span>\n<span class=\"c1\"># \u89e3\u6790\u8bf7\u6c42</span>\n<span class=\"n\">environ</span> <span class=\"o\">=</span> <span class=\"p\">{};</span><span class=\"c1\"># uwsgi environ \u4e0a\u4e0b\u6587</span>\n<span class=\"n\">routerRequest</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">runRoute</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">);</span>\n<span class=\"n\">routeUrl</span> <span class=\"o\">=</span> <span class=\"n\">routerRequest</span><span class=\"o\">.</span><span class=\"n\">getRouteUrl</span><span class=\"p\">()</span> <span class=\"c1\"># \u83b7\u53d6\u8def\u7531\u89e3\u6790\u540eurl\u5730\u5740,\u6bd4\u5982news/index</span>\n<span class=\"n\">routeParams</span> <span class=\"o\">=</span> <span class=\"n\">routerRequest</span><span class=\"o\">.</span><span class=\"n\">getRouteParams</span><span class=\"p\">();</span><span class=\"c1\"># \u83b7\u53d6\u8def\u7531\u7684\u89e3\u6790\u540e\u53c2\u6570{\"id\":1}</span>\n</pre>\n<ul>\n<li>\u89e3\u6790\u547d\u4ee4\u884c\u8bf7\u6c42\u5730\u5740</li>\n</ul>\n<pre><span class=\"c1\"># \u63a7\u5236\u53f0\u8f93\u5165: python3 main.py news/detail?id=2</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">hrouter.route</span> <span class=\"kn\">import</span> <span class=\"n\">RouterManager</span>\n<span class=\"n\">conf</span> <span class=\"o\">=</span>  <span class=\"p\">{</span>\n    <span class=\"s1\">'customRouter'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'easy'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'rules'</span><span class=\"p\">:[],</span>\n        <span class=\"s1\">'actionRule'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'filter'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'site'</span><span class=\"p\">,</span> <span class=\"s1\">'controllers'</span><span class=\"p\">,</span> <span class=\"s1\">'modules'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'suffix'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'Action'</span><span class=\"p\">,</span> <span class=\"s1\">'Controller'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'func'</span><span class=\"p\">:</span><span class=\"s1\">''</span><span class=\"c1\">#action \u5730\u5740\u5904\u7406\u65b9\u6cd5</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n    <span class=\"s1\">'routerRequest'</span><span class=\"p\">:</span><span class=\"s2\">\"ConsoleRouterRequest\"</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">routerManager</span> <span class=\"o\">=</span> <span class=\"n\">RouterManager</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">conf</span><span class=\"p\">);</span>\n<span class=\"c1\"># \u89e3\u6790\u8bf7\u6c42</span>\n<span class=\"n\">environ</span> <span class=\"o\">=</span> <span class=\"p\">{};</span><span class=\"c1\"># uwsgi environ \u4e0a\u4e0b\u6587</span>\n<span class=\"n\">routerRequest</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">runRoute</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">);</span>\n<span class=\"n\">routeUrl</span> <span class=\"o\">=</span> <span class=\"n\">routerRequest</span><span class=\"o\">.</span><span class=\"n\">getRouteUrl</span><span class=\"p\">()</span> <span class=\"c1\"># \u83b7\u53d6\u8def\u7531\u89e3\u6790\u540eurl\u5730\u5740,\u6bd4\u5982news/detail</span>\n<span class=\"n\">routeParams</span> <span class=\"o\">=</span> <span class=\"n\">routerRequest</span><span class=\"o\">.</span><span class=\"n\">getRouteParams</span><span class=\"p\">();</span><span class=\"c1\"># \u83b7\u53d6\u8def\u7531\u7684\u89e3\u6790\u540e\u53c2\u6570{\"id\":2}</span>\n</pre>\n<ul>\n<li>\u89c4\u5219\u8def\u7531</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hrouter.route</span> <span class=\"kn\">import</span> <span class=\"n\">RouterManager</span>\n<span class=\"n\">conf</span> <span class=\"o\">=</span>  <span class=\"p\">{</span>\n    <span class=\"s1\">'customRouter'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'easy'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'rules'</span><span class=\"p\">:[</span>\n            <span class=\"c1\"># uri \u8bf7\u6c42\u5730\u5740\u89c4\u5219,action \u64cd\u4f5c\u5730\u5740\u89c4\u5219,method \u8bf7\u6c42\u65b9\u6cd5,clazz \u89c4\u5219\u7c7b,\u7528\u4e8e\u6269\u5c55</span>\n            <span class=\"c1\">#{'uri':'&lt;news:\\w+&gt;/&lt;id:\\d+&gt;','action':'&lt;news&gt;/index','method'='get','clazz'=&gt;''},</span>\n            <span class=\"c1\">#{'uri':'&lt;controller:\\w+&gt;/&lt;action:\\w+&gt;','action':'&lt;controller&gt;/&lt;action&gt;'},</span>\n\n            <span class=\"p\">{</span><span class=\"s1\">'uri'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;news:\\w+&gt;/&lt;id:\\d+&gt;.html'</span><span class=\"p\">,</span><span class=\"s1\">'action'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;news&gt;/detail'</span><span class=\"p\">}</span>\n        \n        <span class=\"p\">],</span>\n        <span class=\"s1\">'actionRule'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'filter'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'site'</span><span class=\"p\">,</span> <span class=\"s1\">'controllers'</span><span class=\"p\">,</span> <span class=\"s1\">'modules'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'suffix'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'Action'</span><span class=\"p\">,</span> <span class=\"s1\">'Controller'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'func'</span><span class=\"p\">:</span><span class=\"s1\">''</span><span class=\"c1\">#action \u5730\u5740\u5904\u7406\u65b9\u6cd5</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">routerManager</span> <span class=\"o\">=</span> <span class=\"n\">RouterManager</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">conf</span><span class=\"p\">);</span>\n<span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">buildUrl</span><span class=\"p\">(</span><span class=\"s1\">'news/detail'</span><span class=\"p\">,{</span><span class=\"s2\">\"id\"</span><span class=\"p\">:</span><span class=\"s2\">\"10\"</span><span class=\"p\">})</span>  \n<span class=\"c1\"># url:news/detail?id=10</span>\n</pre>\n<ul>\n<li>\u751f\u6210\u5730\u5740</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hrouter.route</span> <span class=\"kn\">import</span> <span class=\"n\">RouterManager</span>\n<span class=\"n\">conf</span> <span class=\"o\">=</span>  <span class=\"p\">{</span>\n    <span class=\"s1\">'customRouter'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'easy'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'rules'</span><span class=\"p\">:[</span>\n            <span class=\"c1\"># uri \u8bf7\u6c42\u5730\u5740\u89c4\u5219,action \u64cd\u4f5c\u5730\u5740\u89c4\u5219,method \u8bf7\u6c42\u65b9\u6cd5,clazz \u89c4\u5219\u7c7b,\u7528\u4e8e\u6269\u5c55</span>\n            <span class=\"c1\">#{'uri':'&lt;news:\\w+&gt;/&lt;id:\\d+&gt;','action':'&lt;news&gt;/index','method'='get','clazz'=&gt;''},</span>\n            <span class=\"c1\">#{'uri':'&lt;controller:\\w+&gt;/&lt;action:\\w+&gt;','action':'&lt;controller&gt;/&lt;action&gt;'},</span>\n\n            <span class=\"p\">{</span><span class=\"s1\">'uri'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;news:\\w+&gt;/&lt;id:\\d+&gt;.html'</span><span class=\"p\">,</span><span class=\"s1\">'action'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;news&gt;/detail'</span><span class=\"p\">}</span>\n        \n        <span class=\"p\">],</span>\n        <span class=\"s1\">'actionRule'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'filter'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'site'</span><span class=\"p\">,</span> <span class=\"s1\">'controllers'</span><span class=\"p\">,</span> <span class=\"s1\">'modules'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'suffix'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'Action'</span><span class=\"p\">,</span> <span class=\"s1\">'Controller'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'func'</span><span class=\"p\">:</span><span class=\"s1\">''</span><span class=\"c1\">#action \u5730\u5740\u5904\u7406\u65b9\u6cd5</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">routerManager</span> <span class=\"o\">=</span> <span class=\"n\">RouterManager</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">conf</span><span class=\"p\">);</span>\n<span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">buildUrl</span><span class=\"p\">(</span><span class=\"s1\">'news/detail'</span><span class=\"p\">,{</span><span class=\"s2\">\"id\"</span><span class=\"p\">:</span><span class=\"s2\">\"10\"</span><span class=\"p\">})</span>  \n<span class=\"c1\"># url:news/detail?id=10</span>\n</pre>\n<ul>\n<li>\u88c5\u9970\u5668\u6ce8\u518c\u8def\u7531\u89c4\u5219</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hrouter.route</span> <span class=\"kn\">import</span> <span class=\"n\">RouterManager</span><span class=\"p\">,</span><span class=\"n\">reg_route_rule</span>\n<span class=\"n\">conf</span> <span class=\"o\">=</span>  <span class=\"p\">{</span>\n    <span class=\"s1\">'customRouter'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'easy'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'rules'</span><span class=\"p\">:[</span>\n            <span class=\"c1\"># uri \u8bf7\u6c42\u5730\u5740\u89c4\u5219,action \u64cd\u4f5c\u5730\u5740\u89c4\u5219,method \u8bf7\u6c42\u65b9\u6cd5,clazz \u89c4\u5219\u7c7b,\u7528\u4e8e\u6269\u5c55</span>\n            <span class=\"c1\">#{'uri':'&lt;news:\\w+&gt;/&lt;id:\\d+&gt;','action':'&lt;news&gt;/index','method'='get','clazz'=&gt;''},</span>\n            <span class=\"c1\">#{'uri':'&lt;controller:\\w+&gt;/&lt;action:\\w+&gt;','action':'&lt;controller&gt;/&lt;action&gt;'},</span>\n\n            <span class=\"p\">{</span><span class=\"s1\">'uri'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;news:\\w+&gt;/&lt;id:\\d+&gt;.html'</span><span class=\"p\">,</span><span class=\"s1\">'action'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;news&gt;/detail'</span><span class=\"p\">}</span>\n        \n        <span class=\"p\">],</span>\n        <span class=\"s1\">'actionRule'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'filter'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'site'</span><span class=\"p\">,</span> <span class=\"s1\">'controllers'</span><span class=\"p\">,</span> <span class=\"s1\">'modules'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'suffix'</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'Action'</span><span class=\"p\">,</span> <span class=\"s1\">'Controller'</span><span class=\"p\">],</span>\n            <span class=\"s1\">'func'</span><span class=\"p\">:</span><span class=\"s1\">''</span><span class=\"c1\">#action \u5730\u5740\u5904\u7406\u65b9\u6cd5</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">routerManager</span> <span class=\"o\">=</span> <span class=\"n\">RouterManager</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">conf</span><span class=\"p\">);</span>\n\n<span class=\"c1\"># \u6ce8\u518c\u8def\u7531\u89c4\u5219-\u51fd\u6570</span>\n<span class=\"nd\">@reg_route_rule</span><span class=\"p\">(</span><span class=\"s1\">'getuser'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">getuser</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n\n    <span class=\"k\">return</span> <span class=\"s2\">\"&lt;h1&gt;\u60a8\u597d&lt;/h1&gt;\"</span>\n\n<span class=\"c1\"># \u6ce8\u518c\u8def\u7531\u89c4\u5219-\u7c7b\u65b9\u6cd5</span>\n<span class=\"k\">class</span> <span class=\"nc\">NewsController</span><span class=\"p\">:</span>\n\n    <span class=\"nd\">@reg_route_rule</span><span class=\"p\">(</span><span class=\"s1\">'news/list'</span><span class=\"p\">,</span><span class=\"n\">method</span> <span class=\"o\">=</span> <span class=\"s1\">'post'</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n\n        <span class=\"k\">return</span> <span class=\"s2\">\"&lt;h1&gt;\u60a8\u597d&lt;/h1&gt;\"</span>\n\n    <span class=\"c1\"># \u8d44\u8baf\u8be6\u60c5</span>\n    <span class=\"k\">def</span> <span class=\"nf\">detail</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n\n        <span class=\"k\">return</span> <span class=\"s2\">\"&lt;h1&gt;\u60a8\u597d&lt;/h1&gt;\"</span>\n\n<span class=\"c1\"># \u521b\u5efa\u8def\u7531request \u5bf9\u8c61</span>\n<span class=\"n\">routerRequest</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">runRoute</span><span class=\"p\">({</span><span class=\"s1\">'PATH_INFO'</span><span class=\"p\">:</span><span class=\"s2\">\"news/list\"</span><span class=\"p\">});</span>\n<span class=\"c1\"># \u83b7\u53d6\u89e3\u6790\u540e\u7684\u8def\u7531\u5730\u5740</span>\n<span class=\"n\">routeUrl</span> <span class=\"o\">=</span> <span class=\"n\">routerRequest</span><span class=\"o\">.</span><span class=\"n\">getRouteUrl</span><span class=\"p\">()</span> <span class=\"c1\"># \u83b7\u53d6\u8def\u7531\u89e3\u6790\u540eurl\u5730\u5740,\u6bd4\u5982news/index</span>\n<span class=\"n\">routeParams</span> <span class=\"o\">=</span> <span class=\"n\">routerRequest</span><span class=\"o\">.</span><span class=\"n\">getRouteParams</span><span class=\"p\">();</span><span class=\"c1\"># \u83b7\u53d6\u8def\u7531\u7684\u89e3\u6790\u540e\u53c2\u6570{\"id\":1}</span>\n<span class=\"c1\"># route = news/getindex</span>\n\n<span class=\"c1\"># \u751f\u6210\u5730\u5740</span>\n<span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">buildUrl</span><span class=\"p\">(</span><span class=\"s1\">'news/getuser'</span><span class=\"p\">,{</span><span class=\"s2\">\"id\"</span><span class=\"p\">:</span><span class=\"s2\">\"10\"</span><span class=\"p\">})</span>\n<span class=\"c1\"># url: news/getuser?id=10</span>\n<span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">buildUrl</span><span class=\"p\">(</span><span class=\"s1\">'getuser'</span><span class=\"p\">,{</span><span class=\"s2\">\"id\"</span><span class=\"p\">:</span><span class=\"s2\">\"10\"</span><span class=\"p\">})</span>\n<span class=\"c1\"># url: getuser?id=10</span>\n<span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">buildUrl</span><span class=\"p\">(</span><span class=\"s1\">'news/detail'</span><span class=\"p\">,{</span><span class=\"s2\">\"id\"</span><span class=\"p\">:</span><span class=\"s2\">\"10\"</span><span class=\"p\">})</span>\n<span class=\"c1\"># url: news/10.html</span>\n\n<span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">routerManager</span><span class=\"o\">.</span><span class=\"n\">buildUrl</span><span class=\"p\">(</span><span class=\"s1\">'account/user/add'</span><span class=\"p\">,{</span><span class=\"s2\">\"id\"</span><span class=\"p\">:</span><span class=\"s2\">\"10\"</span><span class=\"p\">})</span>\n<span class=\"c1\"># url: account/user/add?id=10</span>\n</pre>\n\n          </div>"}, "last_serial": 6211757, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "472ad4da72100569a1c8c613f55de559", "sha256": "c2430b4011cf038c8b3834c77d8fcc32010c965d77ace163447e4bd69a21fe9a"}, "downloads": -1, "filename": "hehey-hrouter-1.0.0.tar.gz", "has_sig": false, "md5_digest": "472ad4da72100569a1c8c613f55de559", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8007, "upload_time": "2019-11-27T08:27:21", "upload_time_iso_8601": "2019-11-27T08:27:21.238556Z", "url": "https://files.pythonhosted.org/packages/5f/9a/ef70bce1ad4e0420394cfaae140c1c2c3289c0b86b31f8f43db45c4084e7/hehey-hrouter-1.0.0.tar.gz", "yanked": false}], "1.0.1": [{"comment_text": "", "digests": {"md5": "3e7db0e55d5ffb090e6836ad7dc5d2dd", "sha256": "9fa27e921b214442278d65e84b1ffdc779e007044d8fbab10036d0fadb58387f"}, "downloads": -1, "filename": "hehey-hrouter-1.0.1.tar.gz", "has_sig": false, "md5_digest": "3e7db0e55d5ffb090e6836ad7dc5d2dd", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9374, "upload_time": "2019-11-28T01:45:19", "upload_time_iso_8601": "2019-11-28T01:45:19.995640Z", "url": "https://files.pythonhosted.org/packages/b5/6d/29308f7e0b85ff95f48bd46c83823a6c14f5eb947da1d956d00828055c69/hehey-hrouter-1.0.1.tar.gz", "yanked": false}], "1.0.2": [{"comment_text": "", "digests": {"md5": "99640c986fe00ff3d2fd9360cb115017", "sha256": "dbc54ba3a7d0136e8b0526637e41348c89876d95cb4299058880fc44097eb5c6"}, "downloads": -1, "filename": "hehey-hrouter-1.0.2.tar.gz", "has_sig": false, "md5_digest": "99640c986fe00ff3d2fd9360cb115017", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9843, "upload_time": "2019-11-28T01:54:49", "upload_time_iso_8601": "2019-11-28T01:54:49.382342Z", "url": "https://files.pythonhosted.org/packages/1e/84/fffc983ffe693c173e9153b428d3d860aeee88371929a3add29004d4a621/hehey-hrouter-1.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "99640c986fe00ff3d2fd9360cb115017", "sha256": "dbc54ba3a7d0136e8b0526637e41348c89876d95cb4299058880fc44097eb5c6"}, "downloads": -1, "filename": "hehey-hrouter-1.0.2.tar.gz", "has_sig": false, "md5_digest": "99640c986fe00ff3d2fd9360cb115017", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9843, "upload_time": "2019-11-28T01:54:49", "upload_time_iso_8601": "2019-11-28T01:54:49.382342Z", "url": "https://files.pythonhosted.org/packages/1e/84/fffc983ffe693c173e9153b428d3d860aeee88371929a3add29004d4a621/hehey-hrouter-1.0.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:51:50 2020"}