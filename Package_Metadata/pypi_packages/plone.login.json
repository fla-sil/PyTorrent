{"info": {"author": "The Plone Foundation", "author_email": "plone@plone.org", "bugtrack_url": null, "classifiers": ["Environment :: Web Environment", "Framework :: Plone", "Framework :: Plone :: 5.0", "Framework :: Plone :: 5.1", "Framework :: Zope2", "License :: OSI Approved :: GNU General Public License v2 (GPLv2)", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2.7", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "Build Status\n------------\n\n.. image:: https://travis-ci.org/plone/plone.login.svg?branch=master\n    :target: https://travis-ci.org/plone/plone.login\n\n.. image:: https://coveralls.io/repos/github/plone/plone.login/badge.svg?branch=master\n    :target: https://coveralls.io/github/plone/plone.login?branch=master\n\n\nplone.login\n===========\n\nA modernized drop-in replacement for the portal_skins-based login.\n\n\nInstallation\n------------\n\nInstall ploneconf.site by adding it to your buildout::\n\n    [buildout]\n\n    ...\n\n    eggs =\n        plone.login\n\nand then running ``bin/buildout``. Install it as usual in /prefs_install_products_form\n\n\nCompatibility\n-------------\n\n``plone.login`` is tested to work with Plone 5.1.\nIt should work with Plone 5.0 as well but is not yet tested.\n\n\nCustomizing templates\n---------------------\n\nThe templates for any ``plone.login`` can be customized because they're simple browser-views.\nUse `z3c.jbot <https://pypi.org/project/z3c.jbot/>`_ to apply your own overides.\n\nCustomize where to redirect after login\n---------------------------------------\n\nYou can customize the location the user will be redirected to after successfuly logging in to the site.\n\nJust write an adapter as follows\n\n..  code-block:: python\n\n    from plone.login.interfaces import IRedirectAfterLogin\n    from plone.login.interfaces import IInitialLogin\n    from Products.CMFPlone.utils import safe_unicode\n    from zope.interface import implementer\n    from plone import api\n\n\n    @implementer(IRedirectAfterLogin)\n    class RedirectAfterLoginAdapter(object):\n\n        def __init__(self, context, request):\n            self.context = context\n            self.request = request\n\n        def __call__(self, came_from=None, is_initial_login=False):\n            if 'Reviewer' in api.user.get_roles():\n                api.portal.show_message(\n                    u'Get to work!', self.request)\n                came_from = self.context.portal_url() + '/@@full_review_list'\n            else:\n                user = api.user.get_current()\n                fullname = safe_unicode(user.getProperty('fullname'))\n                api.portal.show_message(\n                    u'Nice to see you again, {0}!'.format(fullname), self.request)\n            if not came_from:\n                came_from = self.context.portal_url()\n            return came_from\n\nThen register the adapter through ZCML::\n\n    <adapter\n        factory=\"your.addon.adapters.RedirectAfterLoginAdapter\"\n        for=\"OFS.interfaces.ITraversable\n             zope.publisher.interfaces.IRequest\"\n        />\n\nAs you can see, this adapter adapts context and request, so modify these according to your needs.\n\nThe Plone Foundation, Author\n\nChangelog\n=========\n\n1.0rc1 (2018-06-18)\n-------------------\n\n- Package created using templer\n  [The Plone Foundation]", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/plone/plone.login", "keywords": "cms plone login security", "license": "gpl", "maintainer": "", "maintainer_email": "", "name": "plone.login", "package_url": "https://pypi.org/project/plone.login/", "platform": "", "project_url": "https://pypi.org/project/plone.login/", "project_urls": {"Homepage": "https://github.com/plone/plone.login"}, "release_url": "https://pypi.org/project/plone.login/1.0rc1/", "requires_dist": null, "requires_python": "", "summary": "Plone Login System", "version": "1.0rc1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"build-status\">\n<h2>Build Status</h2>\n<a href=\"https://travis-ci.org/plone/plone.login\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/plone/plone.login.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d89789fba1c7312a96a3d0f97ae991c83c6d09af/68747470733a2f2f7472617669732d63692e6f72672f706c6f6e652f706c6f6e652e6c6f67696e2e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://coveralls.io/github/plone/plone.login?branch=master\" rel=\"nofollow\"><img alt=\"https://coveralls.io/repos/github/plone/plone.login/badge.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6850283cb200cca01a8ca373157ea8acfb5a4038/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f706c6f6e652f706c6f6e652e6c6f67696e2f62616467652e7376673f6272616e63683d6d6173746572\"></a>\n<div id=\"plone-login\">\n<h3>plone.login</h3>\n<p>A modernized drop-in replacement for the portal_skins-based login.</p>\n</div>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p>Install ploneconf.site by adding it to your buildout:</p>\n<pre>[buildout]\n\n...\n\neggs =\n    plone.login\n</pre>\n<p>and then running <tt>bin/buildout</tt>. Install it as usual in /prefs_install_products_form</p>\n</div>\n<div id=\"compatibility\">\n<h2>Compatibility</h2>\n<p><tt>plone.login</tt> is tested to work with Plone 5.1.\nIt should work with Plone 5.0 as well but is not yet tested.</p>\n</div>\n<div id=\"customizing-templates\">\n<h2>Customizing templates</h2>\n<p>The templates for any <tt>plone.login</tt> can be customized because they\u2019re simple browser-views.\nUse <a href=\"https://pypi.org/project/z3c.jbot/\" rel=\"nofollow\">z3c.jbot</a> to apply your own overides.</p>\n</div>\n<div id=\"customize-where-to-redirect-after-login\">\n<h2>Customize where to redirect after login</h2>\n<p>You can customize the location the user will be redirected to after successfuly logging in to the site.</p>\n<p>Just write an adapter as follows</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">plone.login.interfaces</span> <span class=\"kn\">import</span> <span class=\"n\">IRedirectAfterLogin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">plone.login.interfaces</span> <span class=\"kn\">import</span> <span class=\"n\">IInitialLogin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">Products.CMFPlone.utils</span> <span class=\"kn\">import</span> <span class=\"n\">safe_unicode</span>\n<span class=\"kn\">from</span> <span class=\"nn\">zope.interface</span> <span class=\"kn\">import</span> <span class=\"n\">implementer</span>\n<span class=\"kn\">from</span> <span class=\"nn\">plone</span> <span class=\"kn\">import</span> <span class=\"n\">api</span>\n\n\n<span class=\"nd\">@implementer</span><span class=\"p\">(</span><span class=\"n\">IRedirectAfterLogin</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">RedirectAfterLoginAdapter</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">context</span> <span class=\"o\">=</span> <span class=\"n\">context</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span> <span class=\"o\">=</span> <span class=\"n\">request</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">came_from</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">is_initial_login</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"s1\">'Reviewer'</span> <span class=\"ow\">in</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">get_roles</span><span class=\"p\">():</span>\n            <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">portal</span><span class=\"o\">.</span><span class=\"n\">show_message</span><span class=\"p\">(</span>\n                <span class=\"sa\">u</span><span class=\"s1\">'Get to work!'</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"p\">)</span>\n            <span class=\"n\">came_from</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">portal_url</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"s1\">'/@@full_review_list'</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">get_current</span><span class=\"p\">()</span>\n            <span class=\"n\">fullname</span> <span class=\"o\">=</span> <span class=\"n\">safe_unicode</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">getProperty</span><span class=\"p\">(</span><span class=\"s1\">'fullname'</span><span class=\"p\">))</span>\n            <span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">portal</span><span class=\"o\">.</span><span class=\"n\">show_message</span><span class=\"p\">(</span>\n                <span class=\"sa\">u</span><span class=\"s1\">'Nice to see you again, </span><span class=\"si\">{0}</span><span class=\"s1\">!'</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">fullname</span><span class=\"p\">),</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">came_from</span><span class=\"p\">:</span>\n            <span class=\"n\">came_from</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">portal_url</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"n\">came_from</span>\n</pre>\n<p>Then register the adapter through ZCML:</p>\n<pre>&lt;adapter\n    factory=\"your.addon.adapters.RedirectAfterLoginAdapter\"\n    for=\"OFS.interfaces.ITraversable\n         zope.publisher.interfaces.IRequest\"\n    /&gt;\n</pre>\n<p>As you can see, this adapter adapts context and request, so modify these according to your needs.</p>\n<p>The Plone Foundation, Author</p>\n<div id=\"changelog\">\n<h3>Changelog</h3>\n</div>\n</div>\n<div id=\"rc1-2018-06-18\">\n<h2>1.0rc1 (2018-06-18)</h2>\n<ul>\n<li>Package created using templer\n[The Plone Foundation]</li>\n</ul>\n</div>\n\n          </div>"}, "last_serial": 3973242, "releases": {"1.0rc1": [{"comment_text": "", "digests": {"md5": "2a98e27666e3fef494afc8b6ce3d5a6c", "sha256": "16128d57ed435dfad74a75a95219c09684a7267414eaac45bb6688c6594f851d"}, "downloads": -1, "filename": "plone.login-1.0rc1.tar.gz", "has_sig": false, "md5_digest": "2a98e27666e3fef494afc8b6ce3d5a6c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 929597, "upload_time": "2018-06-18T11:56:26", "upload_time_iso_8601": "2018-06-18T11:56:26.611356Z", "url": "https://files.pythonhosted.org/packages/0b/03/e63482f9fb08dbecac2fb438fd0449a177f0ccfdb17f865a18d2d86e26ef/plone.login-1.0rc1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "2a98e27666e3fef494afc8b6ce3d5a6c", "sha256": "16128d57ed435dfad74a75a95219c09684a7267414eaac45bb6688c6594f851d"}, "downloads": -1, "filename": "plone.login-1.0rc1.tar.gz", "has_sig": false, "md5_digest": "2a98e27666e3fef494afc8b6ce3d5a6c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 929597, "upload_time": "2018-06-18T11:56:26", "upload_time_iso_8601": "2018-06-18T11:56:26.611356Z", "url": "https://files.pythonhosted.org/packages/0b/03/e63482f9fb08dbecac2fb438fd0449a177f0ccfdb17f865a18d2d86e26ef/plone.login-1.0rc1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:52:56 2020"}