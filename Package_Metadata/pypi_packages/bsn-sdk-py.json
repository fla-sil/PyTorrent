{"info": {"author": "helailiang", "author_email": "helailiang@reddatetech.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# SDK\u8c03\u7528\u53c2\u8003\n\n\n## python\u8bed\u8a00SDK\n\n### 1. \u8c03\u7528\u524d\u51c6\u5907\n\n#### \u5e94\u7528\u53c2\u6570\n> \u5e94\u7528\u53c2\u6570\u662f\u7528\u6237\u5728\u53c2\u4e0e\u5e94\u7528\u6210\u529f\u4e4b\u540e\u5728\u5e94\u7528\u8be6\u60c5\u9875\u9762\u83b7\u53d6\uff0c\u6216\u8005\u7531\u672c\u5730\u8bbe\u7f6e\u7684\u4e00\u4e9b\u53c2\u6570\uff0c\u5177\u4f53\u5305\u542b\u4ee5\u4e0b\u53c2\u6570\n * __\u8282\u70b9\u7f51\u5173\u63a5\u53e3\u5730\u5740\uff1a__ \u53c2\u4e0e\u7684\u57ce\u5e02\u8282\u70b9\u7684\u8282\u70b9\u7f51\u5173\u7684\u8c03\u7528\u5730\u5740\n * __\u7528\u6237\u7f16\u53f7\uff1a__ \u7528\u6237\u7684\u7f16\u53f7\n * __\u5e94\u7528\u7f16\u53f7\uff1a__ \u53c2\u4e0e\u7684\u5e94\u7528\u7684\u7f16\u53f7\n * __\u5e94\u7528\u516c\u94a5\uff1a__ \u7528\u6237\u53c2\u4e0e\u6210\u529f\u4e4b\u540e\u4e0b\u8f7d\u7684\u8282\u70b9\u7f51\u5173\u7684\u5e94\u7528\u516c\u94a5\n * __\u5e94\u7528\u79c1\u94a5\uff1a__ \u6258\u7ba1\u7c7b\u578b\u5e94\u7528\u518d\u53c2\u4e0e\u6210\u529f\u4e4b\u540e\u7531BSN\u751f\u6210\u7684\u5e94\u7528\u516c\u94a5\uff0c\u975e\u6258\u7ba1\u5e94\u7528\u4e3a\u5728\u53c2\u4e0e\u5e94\u7528\u65f6\u4e0a\u4f20\u7684\u516c\u94a5\u6240\u5bf9\u5e94\u7684\u79c1\u94a5\n * __Https\u8bc1\u4e66\uff1a__ \u8c03\u7528https\u7f51\u5173\u63a5\u53e3\u65f6\u4f7f\u7528\u7684https\u8bc1\u4e66\n\n #### \u672c\u5730\u53c2\u6570\n * __\u8bc1\u4e66\u5b58\u50a8\u76ee\u5f55\uff1a__ \u7528\u6765\u5b58\u50a8\u975e\u6258\u7ba1\u5e94\u7528\u5728\u8c03\u7528\u7528\u6237\u8bc1\u4e66\u767b\u8bb0\u65f6\u751f\u6210\u7684\u7528\u6237\u79c1\u94a5\u548c\u8bc1\u4e66\u7684\u76ee\u5f55\n\n### 2. \u51c6\u5907\u8c03\u7528\n\n#### \u5bfc\u5165sdk\u5305\n\u9700\u8981\u5f15\u5165\u4e0b\u9762\u7684\u5305\n```\nfrom bsn_sdk_py.client.config import Config\nfrom bsn_sdk_py.client.fabric_client import FabricClient\n```\n#### \u521d\u59cb\u5316config\n\u53ef\u4ee5\u521d\u59cb\u5316\u4e00\u4e2a\u5b58\u50a8\u6240\u6709\u914d\u7f6e\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5177\u4f53\u7684\u914d\u7f6e\u4fe1\u606f\u5e94\u5f53\u7531\u8c03\u7528\u8005\u6839\u636e\u5404\u81ea\u7684\u9879\u76ee\u914d\u7f6e\u6216\u8005\u8bfb\u53d6\u4e4b\u540e\uff0c\u5728\u8c03\u7528\u65f6\u4f20\u5165\uff0c  \n\u5728config\u7684`Init`\u65b9\u6cd5\u4e2d\u5b9e\u73b0\u4e86\u83b7\u53d6\u4e00\u4e2aApp\u57fa\u7840\u4fe1\u606f\u7684\u64cd\u4f5c\uff0c\u8be5\u64cd\u4f5c\u8bf7\u4e0d\u8981\u9891\u7e41\u7684\u8c03\u7528\uff0c\u8be5\u63a5\u53e3\u5c06\u5360\u7528\u60a8\u7684TPS\u548c\u6d41\u91cf\uff0c\u53ef\u4ee5\u5728\u9879\u76ee\u4f7f\u7528\u4e00\u4e2a\u9759\u6001\u5bf9\u8c61\u5b58\u50a8`config`\u5728\u9700\u8981\u65f6\u4f7f\u7528\u3002  \n\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728\u914d\u7f6e\u8bc1\u4e66\u7684\u65f6\u5019\uff0c\u5e94\u7528\u7684\u8bc1\u4e66\uff08\u5373\u7528\u6765\u7b7e\u540d\u548c\u9a8c\u7b7e\u7684\u8bc1\u4e66\uff09\u662f\u76f4\u63a5\u4f20\u8bc1\u4e66\u8def\u5f84\uff0c\u800cHttps\u7684\u8bc1\u4e66\u662f\u8bc1\u4e66\u5bf9\u4e8e\u9879\u76ee\u6839  \n\u76ee\u5f55\u7684\u6587\u4ef6\u8def\u5f84\uff08\u8fd9\u4e0e\u4e4b\u524d\u7684\u793a\u4f8b\u4ee3\u7801\u4e00\u81f4\uff09\u3002\n```\n\tnodeApi = \"\" //\u8282\u70b9\u7f51\u5173\u5730\u5740\n\tuser_code:=\"\" //\u7528\u6237\u7f16\u53f7\n\tapp_code :=\"\" //\u5e94\u7528\u7f16\u53f7\n\tapp_public_cert_path :=\"\" //\u5e94\u7528\u516c\u94a5\u8def\u5f84\n\tuser_private_cert_path :=\"\" //\u5e94\u7528\u79c1\u94a5\u8def\u5f84\n\tmspDir:=\"\" //\u8bc1\u4e66\u5b58\u6570\u76ee\u5f55\n\thttpcert :=\"\" //https\u8bc1\u4e66\n\tc = Config(user_code, app_code, nodeApi, mspDir, httpcert,\n                 app_public_cert_path, user_private_cert_path)\n```\n#### \u521d\u59cb\u5316Client\n\u4f7f\u7528\u5df2\u7ecf\u751f\u6210\u7684\u914d\u7f6e\u5bf9\u8c61\uff0c\u8c03\u7528\u4ee5\u4e0b\u4ee3\u7801\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2aClient\u5bf9\u8c61\uff0c\u7528\u6765\u8c03\u7528\u8282\u70b9\u7f51\u5173\n```\n    client = FabricClient()\n    client.set_config(c)\n```\n\n####   \u8c03\u7528\u63a5\u53e3\n\u6bcf\u4e00\u4e2a\u7f51\u5173\u63a5\u53e3\u5df2\u7ecf\u5c01\u88c5\u4e86\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u53c2\u6570\u5bf9\u8c61\uff0c\u53ea\u9700\u8981\u8d4b\u503c\u5c31\u53ef\u76f4\u63a5\u8c03\u7528\uff0c\u65b9\u6cd5\u5185\u5df2\u7ecf\u5b9e\u73b0\u4e86\u7b7e\u540d\u548c\u9a8c\u7b7e\u7684\u64cd\u4f5c\u3002  \n\u4ee5\u4e0b\u4e3a\u6ce8\u518c\u5b50\u7528\u6237\u7684\u8c03\u7528\u64cd\u4f5c\uff0c\u5176\u4ed6\u7c7b\u4f3c\u3002\n```\n    client.register_user('hll4', '123456')\n```\n\n####   \u65e5\u5fd7\n\u82e5\u60f3\u83b7\u53d6\u66f4\u8be6\u7ec6\u7684\u8fd0\u884c\u8fc7\u7a0b\uff0c\u914d\u7f6e\u4e00\u4e2alooger\u5c31\u53ef\u4ee5\u4e86\n```\n        import logging\n        FORMAT = \"%(asctime)s %(thread)d %(message)s\"\n        logging.basicConfig(filename='bsn_test.log', filemode='w',level=logging.INFO, format=FORMAT, datefmt=\"[%Y-%m-%d %H:%M:%S]\")\n\n```\n\n### 3.\u4e00\u4e9b\u5176\u4ed6\u8bf4\u660e\n\n#### \u975e\u6258\u7ba1\u5e94\u7528\u7684\u7528\u6237\u8eab\u4efd\u8bc1\u4e66\u7684\u8bf4\u660e\n\u7531\u4e8e\u975e\u6258\u7ba1\u7684\u5e94\u7528\u5728\u8c03\u7528\u7f51\u5173\u8fdb\u884c\u4ea4\u6613\u7684\u65f6\u5019\u6240\u9700\u8981\u7684\u7528\u6237\u8bc1\u4e66\u9700\u8981\u7528\u6237\u81ea\u5df1\u751f\u6210\uff0c\u5176\u6d41\u7a0b\u662f\uff1a\u6ce8\u518c\u7528\u6237->\u767b\u8bb0\u7528\u6237\u8bc1\u4e66 \u3002\u5728\u767b\u8bb0\u7528\u6237\u8bc1\u4e66\u7684\u64cd\u4f5c\u4e2d\uff0c\u4f1a\u7531\u672c\u5730\u751f\u6210\u4e00\u5bf9\u79d8\u94a5\uff0c\u7136\u540e\u901a\u8fc7\u79d8\u94a5\u5bfc\u51fa\u8bc1\u4e66\u7684CSR\u6587\u4ef6\uff08\u8bc1\u4e66\u7533\u8bf7\u6587\u4ef6\uff09\uff0c\u8c03\u7528\u7528\u6237\u8bc1\u4e66\n\u767b\u8bb0\u63a5\u53e3\u83b7\u53d6\u4e00\u4e2a\u6709\u6548\u7684\u8bc1\u4e66\uff0c\u4f7f\u7528\u8be5\u8bc1\u4e66\u624d\u80fd\u5728\u901a\u8fc7\u6258\u7ba1\u5e94\u7528\u4ea4\u6613\u5904\u7406\u63a5\u53e3\u4e2d\u6b63\u5e38\u7684\u53d1\u8d77\u4ea4\u6613\u3002\n\u9700\u8981\u6ce8\u610f\u7684\u662f\u5728CSR\u6587\u4ef6\u4e2d\u8bbe\u7f6eCN\u65f6\uff0c\u5e76\u4e0d\u76f4\u63a5\u662f\u6ce8\u518c\u7684Name\uff0c\u800c\u662f\u7531Name\u548cAppCode\u62fc\u63a5\u7684\u540d\u79f0\uff0c\u683c\u5f0f\u4e3a`Name@AppCode` \u3002\n\u8be5\u64cd\u4f5c\u662f\u5728 `bsn_sdk_py.client.entity.enroll_user.EnrollUser`\u7684`GetCertificateRequest`\u65b9\u6cd5\u4e2d\u5b9e\u73b0\u7684\u3002\n\n__\u8bc1\u4e66\u7684\u5b58\u50a8__ \u76ee\u524d\u53ea\u5b58\u50a8\u672c\u5730\u6587\u4ef6\u5f62\u5f0f\u7684\u8bc1\u4e66\uff0c\n\n\u547d\u540d\u89c4\u5219\u4e3a: \n\n          __\u8bc1\u4e66\u7684\u5b58\u50a8__+ '\\keystore\\' + Name@AppCode + '_private.pem' \n          __\u8bc1\u4e66\u7684\u5b58\u50a8__+ '\\keystore\\' + Name@AppCode + '_cert.pem'\n\n#### \u5173\u4e8e\u52a0\u5bc6\n\u4e3a\u65b9\u4fbf\u5728\u8fdb\u884c\u6570\u636e\u4ea4\u6613\u7684\u4e0a\u94fe\u64cd\u4f5c\u4e2d\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\u89e3\u5bc6\uff0cSDK\u4e2d\u5b9e\u73b0\u4e86\u4e00\u79cd\u5bf9\u79f0\u52a0\u5bc6`AES`\u548c\u4e00\u79cd\u975e\u5bf9\u79f0\u52a0\u5bc6`SM2`\u7b97\u6cd5  \n\u5176\u4e2d\u5bf9\u79f0\u52a0\u5bc6\u4e3a`AES`\u5177\u4f53\u8c03\u7528\u5982\u4e0b\n```\n\tsecret = '9999999999999999'\n\tt = \"hello world\"\n    bsn = BsnAES(secret)\n    e = bsn.encrypt(t)  # \u52a0\u5bc6\n    d = bsn.decrypt(e)  # \u89e3\u5bc6\n    assert t == d\n```\n\u975e\u5bf9\u79f0\u52a0\u5bc6`SM2`\uff0c\u5177\u4f53\u5982\u4e0b,\u5728\u8be5\u65b9\u6cd5\u4e2d\u540c\u65f6\u5b9e\u73b0\u4e86SM2\u7684\u7b7e\u540d\u548c\u9a8c\u7b7e\n>\u975e\u5bf9\u79f0\u52a0\u5bc6\u4e2d\u7531\u516c\u94a5\u52a0\u5bc6\uff0c\u79c1\u94a5\u8fdb\u884c\u89e3\u5bc6\n```\n    from gmssl import sm2, func\n\tprivate_key = '00B9AB0B828FF68872F21A837FC303668428DEA11DCD1B24429D0C99E24EED83D5'\n    public_key = 'B9C9A6E04E9C91F7BA880429273747D7EF5DDEB0BB2FF6317EB00BEF331A83081A6994B8993F3F5D6EADDDB81872266C87C018FB4162F5AF347B483E24620207'\n    sm2_crypt = sm2.CryptSM2(\n    public_key=public_key, private_key=private_key)\n\n    #\u6570\u636e\u548c\u52a0\u5bc6\u540e\u6570\u636e\u4e3abytes\u7c7b\u578b\n    data = b\"111\"\n    enc_data = sm2_crypt.encrypt(data)\n    dec_data =sm2_crypt.decrypt(enc_data)\n    assert dec_data == data\n```\n\n#### \u5173\u4e8e\u79d8\u94a5\u751f\u6210\n\u5728BSN\u4e2d\uff0c`fabric`\u6846\u67b6\u7684\u5bc6\u94a5\u683c\u5f0f\u4e3a`ECDSA`\u7684`secp256r1`\u66f2\u7ebf\uff0c\u800c`fisco-bcos`\u6846\u67b6\u7684\u5bc6\u94a5\u683c\u5f0f\u4e3a`SM2`\n\u5728\u7528\u6237\u53c2\u4e0e\u975e\u6258\u7ba1\u5e94\u7528\u65f6\u9700\u8981\u751f\u6210\u5bf9\u5e94\u683c\u5f0f\u7684\u5bc6\u94a5\u5e76\u4e0a\u4f20\u3002  \n\u4e0b\u9762\u4ecb\u7ecd\u8fd9\u4e24\u79cd\u5bc6\u94a5\u7684\u751f\u6210\uff0c\u79d8\u94a5\u7684\u751f\u6210\u662f\u4f7f\u7528`openssl`\u751f\u6210\u7684\uff0c\u5176\u4e2d`SM2`\u79d8\u94a5\u7684\u751f\u6210\u9700\u8981`openssl`\u7684`1.1.1`\u53ca\u4ee5\u4e0a\u7248\u672c\n> \u6ce8\uff1a\u4ee5\u4e0b\u547d\u4ee4\u662f\u5728linux\u73af\u5883\u4e0b\u6267\u884c\u7684\n##### 1. ECDSA(secp256r1)\u7684\u5bc6\u94a5\u751f\u6210\n- \u751f\u6210\u79c1\u94a5\n```\nopenssl ecparam -name prime256v1 -genkey -out key.pem\n```\n- \u5bfc\u51fa\u516c\u94a5\n```\nopenssl ec -in key.pem -pubout -out pub.pem\n```\n- \u5bfc\u51fapkcs8\u683c\u5f0f\u79c1\u94a5\n> \u7531\u4e8e\u90e8\u5206\u8bed\u8a00\u4e2d\u4f7f\u7528pkcs8\u683c\u5f0f\u7684\u5bc6\u94a5\u6bd4\u8f83\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u5bfc\u51fapkcs8\u683c\u5f0f\u79c1\u94a5  \n> \u5728\u672csdk\u4e2d\u4f7f\u7528\u7684\u79c1\u94a5\u5373\u4e3apkcs8\u683c\u5f0f\n```\nopenssl pkcs8 -topk8 -inform PEM -in key.pem -outform PEM -nocrypt -out key_pkcs8.pem\n```\n\u901a\u8fc7\u4ee5\u4e0a\u547d\u4ee4\u53ef\u4ee5\u751f\u6210\u4e09\u4e2a\u6587\u4ef6  \n__`key.pem`__ :\u79c1\u94a5  \n__`pub.pem`__ :\u516c\u94a5  \n__`key_pkcs8.pem`__ :pkcs8\u683c\u5f0f\u79c1\u94a5\n\n##### 2.`SM2`\u683c\u5f0f\u79d8\u94a5\u751f\u6210  \n\u9996\u5148\u9700\u8981\u68c0\u67e5`openssl`\u7684\u7248\u672c\u662f\u5426\u652f\u6301`SM2`\u683c\u5f0f\u79d8\u94a5\u751f\u6210\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\n```\nopenssl ecparam -list_curves | grep SM2\n```\n\u5982\u679c\u8f93\u51fa\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5219\u8868\u793a\u652f\u6301\uff0c\n```\nSM2       : SM2 curve over a 256 bit prime field\n```\n\u5426\u5219\u9700\u8981\u53bb\u5b98\u7f51\u4e0b\u8f7d`1.1.1`\u6216\u8005\u4ee5\u4e0a\u7248\u672c\uff0c\n\u8fd9\u662f\u4f7f\u7528\u7684\u4e3a`1.1.1d`\u7248\u672c\uff0c  \n\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff1a[https://www.openssl.org/source/openssl-1.1.1d.tar.gz](https://www.openssl.org/source/openssl-1.1.1d.tar.gz])  \n\n- \u751f\u6210\u79c1\u94a5\n```\nopenssl ecparam -genkey -name SM2 -out sm2PriKey.pem\n```\n- \u5bfc\u51fa\u516c\u94a5\n```\nopenssl ec -in sm2PriKey.pem -pubout -out sm2PubKey.pem\n```\n- \u5bfc\u51fapkcs8\u683c\u5f0f\u79c1\u94a5\n> \u7531\u4e8e\u90e8\u5206\u8bed\u8a00\u4e2d\u4f7f\u7528pkcs8\u683c\u5f0f\u7684\u5bc6\u94a5\u6bd4\u8f83\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u5bfc\u51fapkcs8\u683c\u5f0f\u79c1\u94a5  \n> \u5728\u672csdk\u4e2d\u4f7f\u7528\u7684\u79c1\u94a5\u5373\u4e3apkcs8\u683c\u5f0f\n```\nopenssl pkcs8 -topk8 -inform PEM -in sm2PriKey.pem -outform pem -nocrypt -out sm2PriKeyPkcs8.pem\n```\n\u901a\u8fc7\u4ee5\u4e0a\u547d\u4ee4\u53ef\u4ee5\u751f\u6210\u4e09\u4e2a\u6587\u4ef6  \n__`sm2PriKey.pem`__ :\u79c1\u94a5  \n__`sm2PubKey.pem`__ :\u516c\u94a5  \n__`sm2PriKeyPkcs8.pem`__ :pkcs8\u683c\u5f0f\u79c1\u94a5\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/helailiang/bsn-sdk-py", "keywords": "bsn,\u533a\u5757\u94fe,\u5317\u4eac\u7ea2\u67a3,bsn_sdk_py,bsn_sdk_python", "license": "MIT Licence", "maintainer": "", "maintainer_email": "", "name": "bsn-sdk-py", "package_url": "https://pypi.org/project/bsn-sdk-py/", "platform": "any", "project_url": "https://pypi.org/project/bsn-sdk-py/", "project_urls": {"Homepage": "https://github.com/helailiang/bsn-sdk-py"}, "release_url": "https://pypi.org/project/bsn-sdk-py/1.0.2/", "requires_dist": ["hkdf (==0.0.3)", "cryptography (==2.7)", "fabric-sdk-py (==0.8.1)"], "requires_python": ">=3.6", "summary": "\u8fd9\u662fbsn \u8c03\u7528\u7f51\u5173 sdk", "version": "1.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>SDK\u8c03\u7528\u53c2\u8003</h1>\n<h2>python\u8bed\u8a00SDK</h2>\n<h3>1. \u8c03\u7528\u524d\u51c6\u5907</h3>\n<h4>\u5e94\u7528\u53c2\u6570</h4>\n<blockquote>\n<p>\u5e94\u7528\u53c2\u6570\u662f\u7528\u6237\u5728\u53c2\u4e0e\u5e94\u7528\u6210\u529f\u4e4b\u540e\u5728\u5e94\u7528\u8be6\u60c5\u9875\u9762\u83b7\u53d6\uff0c\u6216\u8005\u7531\u672c\u5730\u8bbe\u7f6e\u7684\u4e00\u4e9b\u53c2\u6570\uff0c\u5177\u4f53\u5305\u542b\u4ee5\u4e0b\u53c2\u6570</p>\n</blockquote>\n<ul>\n<li><strong>\u8282\u70b9\u7f51\u5173\u63a5\u53e3\u5730\u5740\uff1a</strong> \u53c2\u4e0e\u7684\u57ce\u5e02\u8282\u70b9\u7684\u8282\u70b9\u7f51\u5173\u7684\u8c03\u7528\u5730\u5740</li>\n<li><strong>\u7528\u6237\u7f16\u53f7\uff1a</strong> \u7528\u6237\u7684\u7f16\u53f7</li>\n<li><strong>\u5e94\u7528\u7f16\u53f7\uff1a</strong> \u53c2\u4e0e\u7684\u5e94\u7528\u7684\u7f16\u53f7</li>\n<li><strong>\u5e94\u7528\u516c\u94a5\uff1a</strong> \u7528\u6237\u53c2\u4e0e\u6210\u529f\u4e4b\u540e\u4e0b\u8f7d\u7684\u8282\u70b9\u7f51\u5173\u7684\u5e94\u7528\u516c\u94a5</li>\n<li><strong>\u5e94\u7528\u79c1\u94a5\uff1a</strong> \u6258\u7ba1\u7c7b\u578b\u5e94\u7528\u518d\u53c2\u4e0e\u6210\u529f\u4e4b\u540e\u7531BSN\u751f\u6210\u7684\u5e94\u7528\u516c\u94a5\uff0c\u975e\u6258\u7ba1\u5e94\u7528\u4e3a\u5728\u53c2\u4e0e\u5e94\u7528\u65f6\u4e0a\u4f20\u7684\u516c\u94a5\u6240\u5bf9\u5e94\u7684\u79c1\u94a5</li>\n<li><strong>Https\u8bc1\u4e66\uff1a</strong> \u8c03\u7528https\u7f51\u5173\u63a5\u53e3\u65f6\u4f7f\u7528\u7684https\u8bc1\u4e66</li>\n</ul>\n<h4>\u672c\u5730\u53c2\u6570</h4>\n<ul>\n<li><strong>\u8bc1\u4e66\u5b58\u50a8\u76ee\u5f55\uff1a</strong> \u7528\u6765\u5b58\u50a8\u975e\u6258\u7ba1\u5e94\u7528\u5728\u8c03\u7528\u7528\u6237\u8bc1\u4e66\u767b\u8bb0\u65f6\u751f\u6210\u7684\u7528\u6237\u79c1\u94a5\u548c\u8bc1\u4e66\u7684\u76ee\u5f55</li>\n</ul>\n<h3>2. \u51c6\u5907\u8c03\u7528</h3>\n<h4>\u5bfc\u5165sdk\u5305</h4>\n<p>\u9700\u8981\u5f15\u5165\u4e0b\u9762\u7684\u5305</p>\n<pre><code>from bsn_sdk_py.client.config import Config\nfrom bsn_sdk_py.client.fabric_client import FabricClient\n</code></pre>\n<h4>\u521d\u59cb\u5316config</h4>\n<p>\u53ef\u4ee5\u521d\u59cb\u5316\u4e00\u4e2a\u5b58\u50a8\u6240\u6709\u914d\u7f6e\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5177\u4f53\u7684\u914d\u7f6e\u4fe1\u606f\u5e94\u5f53\u7531\u8c03\u7528\u8005\u6839\u636e\u5404\u81ea\u7684\u9879\u76ee\u914d\u7f6e\u6216\u8005\u8bfb\u53d6\u4e4b\u540e\uff0c\u5728\u8c03\u7528\u65f6\u4f20\u5165\uff0c<br>\n\u5728config\u7684<code>Init</code>\u65b9\u6cd5\u4e2d\u5b9e\u73b0\u4e86\u83b7\u53d6\u4e00\u4e2aApp\u57fa\u7840\u4fe1\u606f\u7684\u64cd\u4f5c\uff0c\u8be5\u64cd\u4f5c\u8bf7\u4e0d\u8981\u9891\u7e41\u7684\u8c03\u7528\uff0c\u8be5\u63a5\u53e3\u5c06\u5360\u7528\u60a8\u7684TPS\u548c\u6d41\u91cf\uff0c\u53ef\u4ee5\u5728\u9879\u76ee\u4f7f\u7528\u4e00\u4e2a\u9759\u6001\u5bf9\u8c61\u5b58\u50a8<code>config</code>\u5728\u9700\u8981\u65f6\u4f7f\u7528\u3002<br>\n\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728\u914d\u7f6e\u8bc1\u4e66\u7684\u65f6\u5019\uff0c\u5e94\u7528\u7684\u8bc1\u4e66\uff08\u5373\u7528\u6765\u7b7e\u540d\u548c\u9a8c\u7b7e\u7684\u8bc1\u4e66\uff09\u662f\u76f4\u63a5\u4f20\u8bc1\u4e66\u8def\u5f84\uff0c\u800cHttps\u7684\u8bc1\u4e66\u662f\u8bc1\u4e66\u5bf9\u4e8e\u9879\u76ee\u6839<br>\n\u76ee\u5f55\u7684\u6587\u4ef6\u8def\u5f84\uff08\u8fd9\u4e0e\u4e4b\u524d\u7684\u793a\u4f8b\u4ee3\u7801\u4e00\u81f4\uff09\u3002</p>\n<pre><code>\tnodeApi = \"\" //\u8282\u70b9\u7f51\u5173\u5730\u5740\n\tuser_code:=\"\" //\u7528\u6237\u7f16\u53f7\n\tapp_code :=\"\" //\u5e94\u7528\u7f16\u53f7\n\tapp_public_cert_path :=\"\" //\u5e94\u7528\u516c\u94a5\u8def\u5f84\n\tuser_private_cert_path :=\"\" //\u5e94\u7528\u79c1\u94a5\u8def\u5f84\n\tmspDir:=\"\" //\u8bc1\u4e66\u5b58\u6570\u76ee\u5f55\n\thttpcert :=\"\" //https\u8bc1\u4e66\n\tc = Config(user_code, app_code, nodeApi, mspDir, httpcert,\n                 app_public_cert_path, user_private_cert_path)\n</code></pre>\n<h4>\u521d\u59cb\u5316Client</h4>\n<p>\u4f7f\u7528\u5df2\u7ecf\u751f\u6210\u7684\u914d\u7f6e\u5bf9\u8c61\uff0c\u8c03\u7528\u4ee5\u4e0b\u4ee3\u7801\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2aClient\u5bf9\u8c61\uff0c\u7528\u6765\u8c03\u7528\u8282\u70b9\u7f51\u5173</p>\n<pre><code>    client = FabricClient()\n    client.set_config(c)\n</code></pre>\n<h4>\u8c03\u7528\u63a5\u53e3</h4>\n<p>\u6bcf\u4e00\u4e2a\u7f51\u5173\u63a5\u53e3\u5df2\u7ecf\u5c01\u88c5\u4e86\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u53c2\u6570\u5bf9\u8c61\uff0c\u53ea\u9700\u8981\u8d4b\u503c\u5c31\u53ef\u76f4\u63a5\u8c03\u7528\uff0c\u65b9\u6cd5\u5185\u5df2\u7ecf\u5b9e\u73b0\u4e86\u7b7e\u540d\u548c\u9a8c\u7b7e\u7684\u64cd\u4f5c\u3002<br>\n\u4ee5\u4e0b\u4e3a\u6ce8\u518c\u5b50\u7528\u6237\u7684\u8c03\u7528\u64cd\u4f5c\uff0c\u5176\u4ed6\u7c7b\u4f3c\u3002</p>\n<pre><code>    client.register_user('hll4', '123456')\n</code></pre>\n<h4>\u65e5\u5fd7</h4>\n<p>\u82e5\u60f3\u83b7\u53d6\u66f4\u8be6\u7ec6\u7684\u8fd0\u884c\u8fc7\u7a0b\uff0c\u914d\u7f6e\u4e00\u4e2alooger\u5c31\u53ef\u4ee5\u4e86</p>\n<pre><code>        import logging\n        FORMAT = \"%(asctime)s %(thread)d %(message)s\"\n        logging.basicConfig(filename='bsn_test.log', filemode='w',level=logging.INFO, format=FORMAT, datefmt=\"[%Y-%m-%d %H:%M:%S]\")\n\n</code></pre>\n<h3>3.\u4e00\u4e9b\u5176\u4ed6\u8bf4\u660e</h3>\n<h4>\u975e\u6258\u7ba1\u5e94\u7528\u7684\u7528\u6237\u8eab\u4efd\u8bc1\u4e66\u7684\u8bf4\u660e</h4>\n<p>\u7531\u4e8e\u975e\u6258\u7ba1\u7684\u5e94\u7528\u5728\u8c03\u7528\u7f51\u5173\u8fdb\u884c\u4ea4\u6613\u7684\u65f6\u5019\u6240\u9700\u8981\u7684\u7528\u6237\u8bc1\u4e66\u9700\u8981\u7528\u6237\u81ea\u5df1\u751f\u6210\uff0c\u5176\u6d41\u7a0b\u662f\uff1a\u6ce8\u518c\u7528\u6237-&gt;\u767b\u8bb0\u7528\u6237\u8bc1\u4e66 \u3002\u5728\u767b\u8bb0\u7528\u6237\u8bc1\u4e66\u7684\u64cd\u4f5c\u4e2d\uff0c\u4f1a\u7531\u672c\u5730\u751f\u6210\u4e00\u5bf9\u79d8\u94a5\uff0c\u7136\u540e\u901a\u8fc7\u79d8\u94a5\u5bfc\u51fa\u8bc1\u4e66\u7684CSR\u6587\u4ef6\uff08\u8bc1\u4e66\u7533\u8bf7\u6587\u4ef6\uff09\uff0c\u8c03\u7528\u7528\u6237\u8bc1\u4e66\n\u767b\u8bb0\u63a5\u53e3\u83b7\u53d6\u4e00\u4e2a\u6709\u6548\u7684\u8bc1\u4e66\uff0c\u4f7f\u7528\u8be5\u8bc1\u4e66\u624d\u80fd\u5728\u901a\u8fc7\u6258\u7ba1\u5e94\u7528\u4ea4\u6613\u5904\u7406\u63a5\u53e3\u4e2d\u6b63\u5e38\u7684\u53d1\u8d77\u4ea4\u6613\u3002\n\u9700\u8981\u6ce8\u610f\u7684\u662f\u5728CSR\u6587\u4ef6\u4e2d\u8bbe\u7f6eCN\u65f6\uff0c\u5e76\u4e0d\u76f4\u63a5\u662f\u6ce8\u518c\u7684Name\uff0c\u800c\u662f\u7531Name\u548cAppCode\u62fc\u63a5\u7684\u540d\u79f0\uff0c\u683c\u5f0f\u4e3a<code>Name@AppCode</code> \u3002\n\u8be5\u64cd\u4f5c\u662f\u5728 <code>bsn_sdk_py.client.entity.enroll_user.EnrollUser</code>\u7684<code>GetCertificateRequest</code>\u65b9\u6cd5\u4e2d\u5b9e\u73b0\u7684\u3002</p>\n<p><strong>\u8bc1\u4e66\u7684\u5b58\u50a8</strong> \u76ee\u524d\u53ea\u5b58\u50a8\u672c\u5730\u6587\u4ef6\u5f62\u5f0f\u7684\u8bc1\u4e66\uff0c</p>\n<p>\u547d\u540d\u89c4\u5219\u4e3a:</p>\n<pre><code>      __\u8bc1\u4e66\u7684\u5b58\u50a8__+ '\\keystore\\' + Name@AppCode + '_private.pem' \n      __\u8bc1\u4e66\u7684\u5b58\u50a8__+ '\\keystore\\' + Name@AppCode + '_cert.pem'\n</code></pre>\n<h4>\u5173\u4e8e\u52a0\u5bc6</h4>\n<p>\u4e3a\u65b9\u4fbf\u5728\u8fdb\u884c\u6570\u636e\u4ea4\u6613\u7684\u4e0a\u94fe\u64cd\u4f5c\u4e2d\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\u89e3\u5bc6\uff0cSDK\u4e2d\u5b9e\u73b0\u4e86\u4e00\u79cd\u5bf9\u79f0\u52a0\u5bc6<code>AES</code>\u548c\u4e00\u79cd\u975e\u5bf9\u79f0\u52a0\u5bc6<code>SM2</code>\u7b97\u6cd5<br>\n\u5176\u4e2d\u5bf9\u79f0\u52a0\u5bc6\u4e3a<code>AES</code>\u5177\u4f53\u8c03\u7528\u5982\u4e0b</p>\n<pre><code>\tsecret = '9999999999999999'\n\tt = \"hello world\"\n    bsn = BsnAES(secret)\n    e = bsn.encrypt(t)  # \u52a0\u5bc6\n    d = bsn.decrypt(e)  # \u89e3\u5bc6\n    assert t == d\n</code></pre>\n<p>\u975e\u5bf9\u79f0\u52a0\u5bc6<code>SM2</code>\uff0c\u5177\u4f53\u5982\u4e0b,\u5728\u8be5\u65b9\u6cd5\u4e2d\u540c\u65f6\u5b9e\u73b0\u4e86SM2\u7684\u7b7e\u540d\u548c\u9a8c\u7b7e</p>\n<blockquote>\n<p>\u975e\u5bf9\u79f0\u52a0\u5bc6\u4e2d\u7531\u516c\u94a5\u52a0\u5bc6\uff0c\u79c1\u94a5\u8fdb\u884c\u89e3\u5bc6</p>\n</blockquote>\n<pre><code>    from gmssl import sm2, func\n\tprivate_key = '00B9AB0B828FF68872F21A837FC303668428DEA11DCD1B24429D0C99E24EED83D5'\n    public_key = 'B9C9A6E04E9C91F7BA880429273747D7EF5DDEB0BB2FF6317EB00BEF331A83081A6994B8993F3F5D6EADDDB81872266C87C018FB4162F5AF347B483E24620207'\n    sm2_crypt = sm2.CryptSM2(\n    public_key=public_key, private_key=private_key)\n\n    #\u6570\u636e\u548c\u52a0\u5bc6\u540e\u6570\u636e\u4e3abytes\u7c7b\u578b\n    data = b\"111\"\n    enc_data = sm2_crypt.encrypt(data)\n    dec_data =sm2_crypt.decrypt(enc_data)\n    assert dec_data == data\n</code></pre>\n<h4>\u5173\u4e8e\u79d8\u94a5\u751f\u6210</h4>\n<p>\u5728BSN\u4e2d\uff0c<code>fabric</code>\u6846\u67b6\u7684\u5bc6\u94a5\u683c\u5f0f\u4e3a<code>ECDSA</code>\u7684<code>secp256r1</code>\u66f2\u7ebf\uff0c\u800c<code>fisco-bcos</code>\u6846\u67b6\u7684\u5bc6\u94a5\u683c\u5f0f\u4e3a<code>SM2</code>\n\u5728\u7528\u6237\u53c2\u4e0e\u975e\u6258\u7ba1\u5e94\u7528\u65f6\u9700\u8981\u751f\u6210\u5bf9\u5e94\u683c\u5f0f\u7684\u5bc6\u94a5\u5e76\u4e0a\u4f20\u3002<br>\n\u4e0b\u9762\u4ecb\u7ecd\u8fd9\u4e24\u79cd\u5bc6\u94a5\u7684\u751f\u6210\uff0c\u79d8\u94a5\u7684\u751f\u6210\u662f\u4f7f\u7528<code>openssl</code>\u751f\u6210\u7684\uff0c\u5176\u4e2d<code>SM2</code>\u79d8\u94a5\u7684\u751f\u6210\u9700\u8981<code>openssl</code>\u7684<code>1.1.1</code>\u53ca\u4ee5\u4e0a\u7248\u672c</p>\n<blockquote>\n<p>\u6ce8\uff1a\u4ee5\u4e0b\u547d\u4ee4\u662f\u5728linux\u73af\u5883\u4e0b\u6267\u884c\u7684</p>\n</blockquote>\n<h5>1. ECDSA(secp256r1)\u7684\u5bc6\u94a5\u751f\u6210</h5>\n<ul>\n<li>\u751f\u6210\u79c1\u94a5</li>\n</ul>\n<pre><code>openssl ecparam -name prime256v1 -genkey -out key.pem\n</code></pre>\n<ul>\n<li>\u5bfc\u51fa\u516c\u94a5</li>\n</ul>\n<pre><code>openssl ec -in key.pem -pubout -out pub.pem\n</code></pre>\n<ul>\n<li>\u5bfc\u51fapkcs8\u683c\u5f0f\u79c1\u94a5</li>\n</ul>\n<blockquote>\n<p>\u7531\u4e8e\u90e8\u5206\u8bed\u8a00\u4e2d\u4f7f\u7528pkcs8\u683c\u5f0f\u7684\u5bc6\u94a5\u6bd4\u8f83\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u5bfc\u51fapkcs8\u683c\u5f0f\u79c1\u94a5<br>\n\u5728\u672csdk\u4e2d\u4f7f\u7528\u7684\u79c1\u94a5\u5373\u4e3apkcs8\u683c\u5f0f</p>\n</blockquote>\n<pre><code>openssl pkcs8 -topk8 -inform PEM -in key.pem -outform PEM -nocrypt -out key_pkcs8.pem\n</code></pre>\n<p>\u901a\u8fc7\u4ee5\u4e0a\u547d\u4ee4\u53ef\u4ee5\u751f\u6210\u4e09\u4e2a\u6587\u4ef6<br>\n<strong><code>key.pem</code></strong> :\u79c1\u94a5<br>\n<strong><code>pub.pem</code></strong> :\u516c\u94a5<br>\n<strong><code>key_pkcs8.pem</code></strong> :pkcs8\u683c\u5f0f\u79c1\u94a5</p>\n<h5>2.<code>SM2</code>\u683c\u5f0f\u79d8\u94a5\u751f\u6210</h5>\n<p>\u9996\u5148\u9700\u8981\u68c0\u67e5<code>openssl</code>\u7684\u7248\u672c\u662f\u5426\u652f\u6301<code>SM2</code>\u683c\u5f0f\u79d8\u94a5\u751f\u6210\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4</p>\n<pre><code>openssl ecparam -list_curves | grep SM2\n</code></pre>\n<p>\u5982\u679c\u8f93\u51fa\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5219\u8868\u793a\u652f\u6301\uff0c</p>\n<pre><code>SM2       : SM2 curve over a 256 bit prime field\n</code></pre>\n<p>\u5426\u5219\u9700\u8981\u53bb\u5b98\u7f51\u4e0b\u8f7d<code>1.1.1</code>\u6216\u8005\u4ee5\u4e0a\u7248\u672c\uff0c\n\u8fd9\u662f\u4f7f\u7528\u7684\u4e3a<code>1.1.1d</code>\u7248\u672c\uff0c<br>\n\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff1a<a href=\"https://www.openssl.org/source/openssl-1.1.1d.tar.gz%5D\" rel=\"nofollow\">https://www.openssl.org/source/openssl-1.1.1d.tar.gz</a></p>\n<ul>\n<li>\u751f\u6210\u79c1\u94a5</li>\n</ul>\n<pre><code>openssl ecparam -genkey -name SM2 -out sm2PriKey.pem\n</code></pre>\n<ul>\n<li>\u5bfc\u51fa\u516c\u94a5</li>\n</ul>\n<pre><code>openssl ec -in sm2PriKey.pem -pubout -out sm2PubKey.pem\n</code></pre>\n<ul>\n<li>\u5bfc\u51fapkcs8\u683c\u5f0f\u79c1\u94a5</li>\n</ul>\n<blockquote>\n<p>\u7531\u4e8e\u90e8\u5206\u8bed\u8a00\u4e2d\u4f7f\u7528pkcs8\u683c\u5f0f\u7684\u5bc6\u94a5\u6bd4\u8f83\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u5bfc\u51fapkcs8\u683c\u5f0f\u79c1\u94a5<br>\n\u5728\u672csdk\u4e2d\u4f7f\u7528\u7684\u79c1\u94a5\u5373\u4e3apkcs8\u683c\u5f0f</p>\n</blockquote>\n<pre><code>openssl pkcs8 -topk8 -inform PEM -in sm2PriKey.pem -outform pem -nocrypt -out sm2PriKeyPkcs8.pem\n</code></pre>\n<p>\u901a\u8fc7\u4ee5\u4e0a\u547d\u4ee4\u53ef\u4ee5\u751f\u6210\u4e09\u4e2a\u6587\u4ef6<br>\n<strong><code>sm2PriKey.pem</code></strong> :\u79c1\u94a5<br>\n<strong><code>sm2PubKey.pem</code></strong> :\u516c\u94a5<br>\n<strong><code>sm2PriKeyPkcs8.pem</code></strong> :pkcs8\u683c\u5f0f\u79c1\u94a5</p>\n\n          </div>"}, "last_serial": 7110114, "releases": {"1.0.1": [{"comment_text": "", "digests": {"md5": "880cf458ec828633fcdfe437aa9edb82", "sha256": "910ede20a24a3ca32a0f99ffe921b7b268c7d18316491e927cbf86fea12f9eb0"}, "downloads": -1, "filename": "bsn_sdk_py-1.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "880cf458ec828633fcdfe437aa9edb82", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 31511, "upload_time": "2020-04-27T07:08:09", "upload_time_iso_8601": "2020-04-27T07:08:09.121081Z", "url": "https://files.pythonhosted.org/packages/6b/34/a7f8ecbf550bdc33980371e4fedd2250e23402b12b9a201ee697ccecbb94/bsn_sdk_py-1.0.1-py3-none-any.whl", "yanked": false}], "1.0.2": [{"comment_text": "", "digests": {"md5": "4ccd873605c5544fcd2bc54aea266dfa", "sha256": "30cbd35a178004263b48c70fe4fdeaeb9abb4d657f6d4170fa1252e819a5ad07"}, "downloads": -1, "filename": "bsn_sdk_py-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "4ccd873605c5544fcd2bc54aea266dfa", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 34104, "upload_time": "2020-04-27T09:18:43", "upload_time_iso_8601": "2020-04-27T09:18:43.583951Z", "url": "https://files.pythonhosted.org/packages/46/7d/6977831c70a0090402863a94e3dc99c68c79a2ea25f9cd9babccbfbbf9cf/bsn_sdk_py-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "bff5f65c6d7da010fc81d3b91578e9ee", "sha256": "61a1eaf1320a23304052aebfb173fa45e68bc19fb99fb2f9c87d39b5616d3b0a"}, "downloads": -1, "filename": "bsn_sdk_py-1.0.2.tar.gz", "has_sig": false, "md5_digest": "bff5f65c6d7da010fc81d3b91578e9ee", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 18092, "upload_time": "2020-04-27T09:18:45", "upload_time_iso_8601": "2020-04-27T09:18:45.051644Z", "url": "https://files.pythonhosted.org/packages/e5/e9/4045103a1405302aa738f3e3de14220ad2367b99b167ec957b122d9ec2dc/bsn_sdk_py-1.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4ccd873605c5544fcd2bc54aea266dfa", "sha256": "30cbd35a178004263b48c70fe4fdeaeb9abb4d657f6d4170fa1252e819a5ad07"}, "downloads": -1, "filename": "bsn_sdk_py-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "4ccd873605c5544fcd2bc54aea266dfa", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 34104, "upload_time": "2020-04-27T09:18:43", "upload_time_iso_8601": "2020-04-27T09:18:43.583951Z", "url": "https://files.pythonhosted.org/packages/46/7d/6977831c70a0090402863a94e3dc99c68c79a2ea25f9cd9babccbfbbf9cf/bsn_sdk_py-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "bff5f65c6d7da010fc81d3b91578e9ee", "sha256": "61a1eaf1320a23304052aebfb173fa45e68bc19fb99fb2f9c87d39b5616d3b0a"}, "downloads": -1, "filename": "bsn_sdk_py-1.0.2.tar.gz", "has_sig": false, "md5_digest": "bff5f65c6d7da010fc81d3b91578e9ee", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 18092, "upload_time": "2020-04-27T09:18:45", "upload_time_iso_8601": "2020-04-27T09:18:45.051644Z", "url": "https://files.pythonhosted.org/packages/e5/e9/4045103a1405302aa738f3e3de14220ad2367b99b167ec957b122d9ec2dc/bsn_sdk_py-1.0.2.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:36:11 2020"}