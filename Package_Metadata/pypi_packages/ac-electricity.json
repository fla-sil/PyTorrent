{"info": {"author": "Fabrice Sinc\u00e8re", "author_email": "fabrice.sincere@ac-grenoble.fr", "bugtrack_url": null, "classifiers": ["Intended Audience :: Education", "Intended Audience :: Science/Research", "License :: OSI Approved :: GNU General Public License v3 (GPLv3)", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Topic :: Scientific/Engineering :: Physics"], "description": "## acelectricity module\n\nThe aim of this project is to understand the rudiments of linear AC electrical circuits and their functioning.  \n\n### Basic electrical quantities\n\n- Voltage (volt)\n- Current (ampere)\n- Impedance Z (ohm)\n- Admittance Y (siemens)\n- Active power P (watt)\n- Reactive power Q (var)\n- Apparent power S (VA)\n\n### Electrical laws\n\n- Kirchhoff\u2019s current law\n- Kirchhoff\u2019s voltage law\n- Ohm's law\n- Impedances, admittances in series and parallel\n- Voltage divider and current divider\n- Millman's theorem\n- Joule's first law (S=I\u00b2Z)\n- Power law (S=V.I*)\n\n### Others features\n\n- User-defined transfer function\n- Digital filter frequency response\n\n### AC Circuit diagram \n\nCircuit should only contain : \n   \n- independent sine voltage source  \n- independent sine current source    \n- resistors, inductors, capacitors\n\n### A complete example\n\n```\n                  VL\n           <---------------------\n                          L1\n            +------+    _  _  _\n      --->--| R1   |---/ \\/ \\/ \\-----+-------+\n        IL  +------+                 |       |\n                                     |       |\n    ^                             IR v       v IC\n    |                                |       |      ^\n    |                              +---+     |  C1  |\n    |                              |   |   -----    |\nVin |                              |R2 |   -----    | Vout\n    |                              |   |     |      |\n    |                              +---+     |      |\n    |                                |       | \n                                     |       |\n      -------------------------------+-------+\n\n```\n\nDatas :  \nVin = 5 Vrms  \nInductor : L1 = 100 mH ; R1 = 180 \u03a9  \nR2 = 2.2 k\u03a9 ; C1 = 330 nF     \n\nWhat are the IL, IR, IC currents ?  \nWhat are the VL, Vout voltages ?  \nWhat is the frequency response Vout/Vin ?\n\n\n```python  \n>>> from acelectricity import *\n>>> Vin = Voltage(5)  # Vrms\n>>> Zr1 = Impedance(r=180)\n>>> Zl1 = Impedance(l=0.1)\n>>> Zr2 = Impedance(r=2200)\n>>> Zc1 = Impedance(c=330e-9)\n\n>>> Zeq1 = 1/(1/Zr2 + 1/Zc1)  # impedances in parallel\n>>> # or Zeq1 = Zr2//Zc1\n>>> Zeq1\nComplex impedance (\u03a9) : 100.88-460.173j @ 1.0 kHz\n>>> Zeq = Zr1 + Zl1 + Zeq1  # impedances in series\n>>> Zeq(2000)  # Hz\n(206.11818300356995+1018.3560443060462j)\n>>> IL = Vin/Zeq  # Ohm's law\n>>> IL.properties(2000)\nFrequency (Hz) : 2000\nAngular frequency (rad/s) : 12566.4\n\nComplex current : 0.000954663-0.00471665j\nAmplitude (Arms) : 0.00481229\nAmplitude (A) : 0.00680561\nAmplitude (dBA ref 1 Arms) : -46.3529621108357\nPhase (degrees) : -78.5577\nPhase (radians) : -1.37109\ni(t) = 0.00680561\u00d7sin(12566.4\u00d7t -1.371091)\n\n>>> Vout = IL*Zeq1  # Ohm's law\n>>> VL = Vin-Vout  # Kirchhoff\u2019s voltage law\n>>> IC = Vout/Zc1  # Ohm's law\n>>> IR = IL-IC  # Kirchhoff\u2019s current law\n>>> H = Vout/Vin  # transfer function\n\n>>> H.bode(title='Vout/Vin transfer function')\n>>> IL.bode(magnitude_unit='default', yscale='linear', title='IL current')\n>>> Zeq.bode(yscale='log', title='Zeq frequency response')\n>>> show()\n```\n\n![screenshot1](http://fsincere.free.fr/isn/python/download/dc/image1.png)\n\n![screenshot2](http://fsincere.free.fr/isn/python/download/dc/image2.png)\n\n#### Impedances and admittances\n\n```python\n>>> Yr2 = Admittance(r=2200)  # or Yr2 = 1/Zr2\n>>> Yc1 = Admittance(c=330e-9)\n>>> Yc1\nComplex admittance (S) : 0+0.00207345j @ 1.0 kHz\n>>> 1/Yc1\nComplex impedance (\u03a9) : 0-482.288j @ 1.0 kHz\n>>> 1/(Yr2+Yc1)\nComplex impedance (\u03a9) : 100.88-460.173j @ 1.0 kHz\n>>> Zr2*(Zc1/(Zr2+Zc1))\nComplex impedance (\u03a9) : 100.88-460.173j @ 1.0 kHz\n```\n\n#### Law class\n\n```python\n>>> law = Law()\n>>> # voltage divider\n>>> Vout = law.VoltageDivider(vtotal=Vin, z=Zr2//Zc1, z2=Zr1+Zl1)\n>>> Vout\nComplex voltage (Vrms) : -2.28808-6.8219j @ 1.0 kHz\n>>> Vin*(Zeq1/Zeq)\nComplex voltage (Vrms) : -2.28808-6.8219j @ 1.0 kHz\n>>> # Millman's theorem\n>>> gnd = Voltage(0)\n>>> Vout = law.Millman(v_z=[(Vin, Zr1+Zl1), (gnd, Zr2), (gnd, Zc1)])\n>>> Vout\nComplex voltage (Vrms) : -2.28808-6.8219j @ 1.0 kHz\n>>> (Vin/(Zr1+Zl1))/(1/(Zr1+Zl1) +1/Zr2 +1/Zc1)\nComplex voltage (Vrms) : -2.28808-6.8219j @ 1.0 kHz\n>>> Vout/Vin\nRatio : -0.457615-1.36438j @ 1.0 kHz\n>>> # current divider\n>>> IC = law.CurrentDivider(itotal=IL, z=Zc1, z2=Zr2)\n>>> IC\nComplex current (Arms) : 0.0141449-0.00474421j @ 1.0 kHz\n>>> IL*Zr2/(Zr2 +Zc1)\nComplex current (Arms) : 0.0141449-0.00474421j @ 1.0 kHz\n```\n\n#### Electrical power, Joule's first law\n\n```python\n>>> S = IL*Vin  # source complex power\n>>> S.properties(1000)\nFrequency (Hz) : 1000\nAngular frequency (rad/s) : 6283.19\n\nComplex power : 0.0655242+0.0392254j\n\nActive power P (W) : +0.0655242\nReactive power Q (var) : +0.0392254\nApparent power S (VA) : 0.0763678\n\nPhase (degrees) : +30.9064\nPhase (radians) : +0.539419\nPower factor PF : 0.8580073402000852\n\nActive power (dBW ref 1 W) : -11.835985322667693\n\n>>> Sr1 = law.Joule(z=Zr1, i=IL)\n>>> Sr1\nComplex power (W): 0.0419907+0j @ 1.0 kHz\n>>> Zr1*IL*IL\nComplex power (W): 0.0419907+0j @ 1.0 kHz\n>>> Sr2 = law.Joule(z=Zr2, v=Vout)\n>>> Sr2\nComplex power (W): 0.0235334 @ 1.0 kHz\n>>> Sl1 = Zl1*IL*IL\nComplex power (W): 0+0.146575j @ 1.0 kHz\n>>> Sc1 = Zc1*IC*IC\nComplex power (W): 0-0.10735j @ 1.0 kHz\n>>> Sr1 +Sr2 +Sc1 +Sl1\nComplex power (W): 0.0655242+0.0392254j @ 1.0 kHz\n```\n\n### User-defined transfer function\n\n#### Example 1 : second order band-pass filter\n\n```python\n>>> from acelectricity import *\n>>> # static gain, damping value, normal angular frequency\n>>> a, z, wn = 10, 0.1, 1000*2*math.pi\n>>> H = Ratio(fw=lambda w: a*(2*z*1j*w/wn)/(1+2*z*1j*w/wn-(w/wn)**2))\n>>> # or : H = Ratio.transfer_function(numerator=[0, a*(2*z*1j/wn)],\n    denominator=[1, 2*z*1j/wn, -1/wn**2])\n>>> H.bode()\n>>> show()\n```\n\n#### Example 2 : cascaded series, parallel filters\n\n```python\n>>> from acelectricity import *\n>>> # first order low-pass filter\n>>> wn = 10000\n>>> Hlp = Ratio(fw=lambda w: 1/(1+1j*w/wn))\n>>> # first order high-pass filter\n>>> Hhp = Ratio(fw=lambda w: 1/(1+1j*wn/w))\n>>> Hs = Hlp*Hhp  # cascaded series filters\n>>> Hs.bode()\n>>> Hp = Hlp+Hhp  # parallel filters\n>>> Hp.bode()\n>>> show()\n```\n\n#### Example 3 : linear control system\n\n```\n          +      +------+\n     -->---(X)---| G(w) |----+--->--\n          - |    +------+    |\n            |                |\n            |    +------+    |\n            +----| H(w) |-<--+\n                 +------+\n\n```\n\n```python\n>>> from acelectricity import *\n>>> # feedforward transfer function\n>>> # first order low-pass filter\n>>> wn = 10000\n>>> G = Ratio.transfer_function([1], [1, 1j/wn])\n>>> # feedback transfer function\n>>> H = Ratio.transfer_function([10])  # constant\n>>> # open-loop transfer function\n>>> Hopenloop = G*H\n>>> Hopenloop.bode()\n>>> # closed-loop transfer function\n>>> Hcloseloop = G/(1+Hopenloop)\n>>> Hcloseloop.bode()\n>>> show()\n```\n\n#### Example 4 : digital filter frequency response\n\ny(n) = 0.1x(n) +1.6y(n-1) -0.7y(n-2)  \n\n```python\n>>> from acelectricity import *\n>>> fs = 100000  # sampling rate (Hz)\n>>> H = Ratio.digital_filter(fs=fs, b=[0.1], a=[1, -1.6, 0.7])\n>>> H.bode(xmin=fs*0.001, xmax=fs/2, xscale='linear',\n    title='IIR digital filter')\n>>> show()\n```\n\n![screenshot3](http://fsincere.free.fr/isn/python/download/dc/image3.png)\n\n\n### Custom default frequency\n\n```python\n>>> from acelectricity import *\n>>> Zc = Impedance(c=220e-6)\n>>> Zc\nComplex impedance (\u03a9) : 0-0.723432j @ 1.0 kHz\n>>> ElectricalQuantity.DEFAULT_FREQUENCY = 50\n>>> Zc\nComplex impedance (\u03a9) : 0-14.4686j @ 50 Hz\n>>> 1/Zc\nComplex admittance (S) : -0+0.069115j @ 50 Hz\n```\n\n### Advantages and limitations\n\nThis module manages basic arithmetic operations ```+ - * /``` as well as ```//``` which designates two impedances in parallel.  \n\nThe dimensional homogeneity is checked :  \n\n```python\n>>> V3 = V1 - V2 + I3  # V+A -> Error\nTypeError : Voltage expected\n>>> I1 = Current(2)\n>>> I = I1 + 0.5  # A+number -> Error\nTypeError : Current expected\n>>> I2 = Current(0.5, phase=30)\n>>> I = I1 + I2\n>>> I\nComplex current (Arms) : 2.43301+0.25j @ 1.0 kHz\n>>> I = 5*I2 - V1/Z1 + I3\n```\n\nThe result of any operation must give a quantity whose unit is one of : V, A, \u03a9, S, W (or ratio).  \nOtherwise, you will get an error :   \n\n```python\n>>> Z1/V1  # \u03a9/V -> 1/A -> Error\nTypeError\n>>> U2*(Z3/(Z2+Z3))  # V*(\u03a9/\u03a9) -> V*() -> V\n>>> U2*Z3/(Z2+Z3)  # V*\u03a9 -> Error\nTypeError\n>>> S = V1*(V1/Z1)  # V*(V/\u03a9) -> V*A -> W\n>>> S = V1*V1/Z1    # V*V -> Error\nTypeError\n```\n\n### See also  \n\n[https://pypi.org/project/dc-electricity](https://pypi.org/project/dc-electricity)", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "", "license": "", "maintainer": "Fabrice Sinc\u00e8re", "maintainer_email": "fabrice.sincere@ac-grenoble.fr", "name": "ac-electricity", "package_url": "https://pypi.org/project/ac-electricity/", "platform": "", "project_url": "https://pypi.org/project/ac-electricity/", "project_urls": null, "release_url": "https://pypi.org/project/ac-electricity/0.4.1/", "requires_dist": null, "requires_python": ">=3", "summary": "An educational module about linear AC electrical circuits", "version": "0.4.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h2>acelectricity module</h2>\n<p>The aim of this project is to understand the rudiments of linear AC electrical circuits and their functioning.</p>\n<h3>Basic electrical quantities</h3>\n<ul>\n<li>Voltage (volt)</li>\n<li>Current (ampere)</li>\n<li>Impedance Z (ohm)</li>\n<li>Admittance Y (siemens)</li>\n<li>Active power P (watt)</li>\n<li>Reactive power Q (var)</li>\n<li>Apparent power S (VA)</li>\n</ul>\n<h3>Electrical laws</h3>\n<ul>\n<li>Kirchhoff\u2019s current law</li>\n<li>Kirchhoff\u2019s voltage law</li>\n<li>Ohm's law</li>\n<li>Impedances, admittances in series and parallel</li>\n<li>Voltage divider and current divider</li>\n<li>Millman's theorem</li>\n<li>Joule's first law (S=I\u00b2Z)</li>\n<li>Power law (S=V.I*)</li>\n</ul>\n<h3>Others features</h3>\n<ul>\n<li>User-defined transfer function</li>\n<li>Digital filter frequency response</li>\n</ul>\n<h3>AC Circuit diagram</h3>\n<p>Circuit should only contain :</p>\n<ul>\n<li>independent sine voltage source</li>\n<li>independent sine current source</li>\n<li>resistors, inductors, capacitors</li>\n</ul>\n<h3>A complete example</h3>\n<pre><code>                  VL\n           &lt;---------------------\n                          L1\n            +------+    _  _  _\n      ---&gt;--| R1   |---/ \\/ \\/ \\-----+-------+\n        IL  +------+                 |       |\n                                     |       |\n    ^                             IR v       v IC\n    |                                |       |      ^\n    |                              +---+     |  C1  |\n    |                              |   |   -----    |\nVin |                              |R2 |   -----    | Vout\n    |                              |   |     |      |\n    |                              +---+     |      |\n    |                                |       | \n                                     |       |\n      -------------------------------+-------+\n\n</code></pre>\n<p>Datas :<br>\nVin = 5 Vrms<br>\nInductor : L1 = 100 mH ; R1 = 180 \u03a9<br>\nR2 = 2.2 k\u03a9 ; C1 = 330 nF</p>\n<p>What are the IL, IR, IC currents ?<br>\nWhat are the VL, Vout voltages ?<br>\nWhat is the frequency response Vout/Vin ?</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">acelectricity</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Vin</span> <span class=\"o\">=</span> <span class=\"n\">Voltage</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)</span>  <span class=\"c1\"># Vrms</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zr1</span> <span class=\"o\">=</span> <span class=\"n\">Impedance</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"o\">=</span><span class=\"mi\">180</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zl1</span> <span class=\"o\">=</span> <span class=\"n\">Impedance</span><span class=\"p\">(</span><span class=\"n\">l</span><span class=\"o\">=</span><span class=\"mf\">0.1</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zr2</span> <span class=\"o\">=</span> <span class=\"n\">Impedance</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"o\">=</span><span class=\"mi\">2200</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zc1</span> <span class=\"o\">=</span> <span class=\"n\">Impedance</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"o\">=</span><span class=\"mf\">330e-9</span><span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zeq1</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"n\">Zr2</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"n\">Zc1</span><span class=\"p\">)</span>  <span class=\"c1\"># impedances in parallel</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># or Zeq1 = Zr2//Zc1</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zeq1</span>\n<span class=\"n\">Complex</span> <span class=\"n\">impedance</span> <span class=\"p\">(</span><span class=\"n\">\u03a9</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">100.88</span><span class=\"o\">-</span><span class=\"mf\">460.173</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zeq</span> <span class=\"o\">=</span> <span class=\"n\">Zr1</span> <span class=\"o\">+</span> <span class=\"n\">Zl1</span> <span class=\"o\">+</span> <span class=\"n\">Zeq1</span>  <span class=\"c1\"># impedances in series</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zeq</span><span class=\"p\">(</span><span class=\"mi\">2000</span><span class=\"p\">)</span>  <span class=\"c1\"># Hz</span>\n<span class=\"p\">(</span><span class=\"mf\">206.11818300356995</span><span class=\"o\">+</span><span class=\"mf\">1018.3560443060462</span><span class=\"n\">j</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">IL</span> <span class=\"o\">=</span> <span class=\"n\">Vin</span><span class=\"o\">/</span><span class=\"n\">Zeq</span>  <span class=\"c1\"># Ohm's law</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">IL</span><span class=\"o\">.</span><span class=\"n\">properties</span><span class=\"p\">(</span><span class=\"mi\">2000</span><span class=\"p\">)</span>\n<span class=\"n\">Frequency</span> <span class=\"p\">(</span><span class=\"n\">Hz</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mi\">2000</span>\n<span class=\"n\">Angular</span> <span class=\"n\">frequency</span> <span class=\"p\">(</span><span class=\"n\">rad</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">12566.4</span>\n\n<span class=\"n\">Complex</span> <span class=\"n\">current</span> <span class=\"p\">:</span> <span class=\"mf\">0.000954663</span><span class=\"o\">-</span><span class=\"mf\">0.00471665</span><span class=\"n\">j</span>\n<span class=\"n\">Amplitude</span> <span class=\"p\">(</span><span class=\"n\">Arms</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">0.00481229</span>\n<span class=\"n\">Amplitude</span> <span class=\"p\">(</span><span class=\"n\">A</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">0.00680561</span>\n<span class=\"n\">Amplitude</span> <span class=\"p\">(</span><span class=\"n\">dBA</span> <span class=\"n\">ref</span> <span class=\"mi\">1</span> <span class=\"n\">Arms</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mf\">46.3529621108357</span>\n<span class=\"n\">Phase</span> <span class=\"p\">(</span><span class=\"n\">degrees</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mf\">78.5577</span>\n<span class=\"n\">Phase</span> <span class=\"p\">(</span><span class=\"n\">radians</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mf\">1.37109</span>\n<span class=\"n\">i</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"mf\">0.00680561</span><span class=\"err\">\u00d7</span><span class=\"n\">sin</span><span class=\"p\">(</span><span class=\"mf\">12566.4</span><span class=\"err\">\u00d7</span><span class=\"n\">t</span> <span class=\"o\">-</span><span class=\"mf\">1.371091</span><span class=\"p\">)</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Vout</span> <span class=\"o\">=</span> <span class=\"n\">IL</span><span class=\"o\">*</span><span class=\"n\">Zeq1</span>  <span class=\"c1\"># Ohm's law</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">VL</span> <span class=\"o\">=</span> <span class=\"n\">Vin</span><span class=\"o\">-</span><span class=\"n\">Vout</span>  <span class=\"c1\"># Kirchhoff\u2019s voltage law</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">IC</span> <span class=\"o\">=</span> <span class=\"n\">Vout</span><span class=\"o\">/</span><span class=\"n\">Zc1</span>  <span class=\"c1\"># Ohm's law</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">IR</span> <span class=\"o\">=</span> <span class=\"n\">IL</span><span class=\"o\">-</span><span class=\"n\">IC</span>  <span class=\"c1\"># Kirchhoff\u2019s current law</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">H</span> <span class=\"o\">=</span> <span class=\"n\">Vout</span><span class=\"o\">/</span><span class=\"n\">Vin</span>  <span class=\"c1\"># transfer function</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">H</span><span class=\"o\">.</span><span class=\"n\">bode</span><span class=\"p\">(</span><span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s1\">'Vout/Vin transfer function'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">IL</span><span class=\"o\">.</span><span class=\"n\">bode</span><span class=\"p\">(</span><span class=\"n\">magnitude_unit</span><span class=\"o\">=</span><span class=\"s1\">'default'</span><span class=\"p\">,</span> <span class=\"n\">yscale</span><span class=\"o\">=</span><span class=\"s1\">'linear'</span><span class=\"p\">,</span> <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s1\">'IL current'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zeq</span><span class=\"o\">.</span><span class=\"n\">bode</span><span class=\"p\">(</span><span class=\"n\">yscale</span><span class=\"o\">=</span><span class=\"s1\">'log'</span><span class=\"p\">,</span> <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s1\">'Zeq frequency response'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">show</span><span class=\"p\">()</span>\n</pre>\n<p><img alt=\"screenshot1\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6f2c26215fb4a2a88b787ad6bbd8daccad331d20/687474703a2f2f6673696e636572652e667265652e66722f69736e2f707974686f6e2f646f776e6c6f61642f64632f696d616765312e706e67\"></p>\n<p><img alt=\"screenshot2\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1bcee6e8ffd4698e7c7ff5c825f8b427bf3e86f9/687474703a2f2f6673696e636572652e667265652e66722f69736e2f707974686f6e2f646f776e6c6f61642f64632f696d616765322e706e67\"></p>\n<h4>Impedances and admittances</h4>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Yr2</span> <span class=\"o\">=</span> <span class=\"n\">Admittance</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"o\">=</span><span class=\"mi\">2200</span><span class=\"p\">)</span>  <span class=\"c1\"># or Yr2 = 1/Zr2</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Yc1</span> <span class=\"o\">=</span> <span class=\"n\">Admittance</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"o\">=</span><span class=\"mf\">330e-9</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Yc1</span>\n<span class=\"n\">Complex</span> <span class=\"n\">admittance</span> <span class=\"p\">(</span><span class=\"n\">S</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"o\">+</span><span class=\"mf\">0.00207345</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"n\">Yc1</span>\n<span class=\"n\">Complex</span> <span class=\"n\">impedance</span> <span class=\"p\">(</span><span class=\"n\">\u03a9</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mf\">482.288</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"n\">Yr2</span><span class=\"o\">+</span><span class=\"n\">Yc1</span><span class=\"p\">)</span>\n<span class=\"n\">Complex</span> <span class=\"n\">impedance</span> <span class=\"p\">(</span><span class=\"n\">\u03a9</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">100.88</span><span class=\"o\">-</span><span class=\"mf\">460.173</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zr2</span><span class=\"o\">*</span><span class=\"p\">(</span><span class=\"n\">Zc1</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"n\">Zr2</span><span class=\"o\">+</span><span class=\"n\">Zc1</span><span class=\"p\">))</span>\n<span class=\"n\">Complex</span> <span class=\"n\">impedance</span> <span class=\"p\">(</span><span class=\"n\">\u03a9</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">100.88</span><span class=\"o\">-</span><span class=\"mf\">460.173</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n</pre>\n<h4>Law class</h4>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">law</span> <span class=\"o\">=</span> <span class=\"n\">Law</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># voltage divider</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Vout</span> <span class=\"o\">=</span> <span class=\"n\">law</span><span class=\"o\">.</span><span class=\"n\">VoltageDivider</span><span class=\"p\">(</span><span class=\"n\">vtotal</span><span class=\"o\">=</span><span class=\"n\">Vin</span><span class=\"p\">,</span> <span class=\"n\">z</span><span class=\"o\">=</span><span class=\"n\">Zr2</span><span class=\"o\">//</span><span class=\"n\">Zc1</span><span class=\"p\">,</span> <span class=\"n\">z2</span><span class=\"o\">=</span><span class=\"n\">Zr1</span><span class=\"o\">+</span><span class=\"n\">Zl1</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Vout</span>\n<span class=\"n\">Complex</span> <span class=\"n\">voltage</span> <span class=\"p\">(</span><span class=\"n\">Vrms</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mf\">2.28808</span><span class=\"o\">-</span><span class=\"mf\">6.8219</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Vin</span><span class=\"o\">*</span><span class=\"p\">(</span><span class=\"n\">Zeq1</span><span class=\"o\">/</span><span class=\"n\">Zeq</span><span class=\"p\">)</span>\n<span class=\"n\">Complex</span> <span class=\"n\">voltage</span> <span class=\"p\">(</span><span class=\"n\">Vrms</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mf\">2.28808</span><span class=\"o\">-</span><span class=\"mf\">6.8219</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># Millman's theorem</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">gnd</span> <span class=\"o\">=</span> <span class=\"n\">Voltage</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Vout</span> <span class=\"o\">=</span> <span class=\"n\">law</span><span class=\"o\">.</span><span class=\"n\">Millman</span><span class=\"p\">(</span><span class=\"n\">v_z</span><span class=\"o\">=</span><span class=\"p\">[(</span><span class=\"n\">Vin</span><span class=\"p\">,</span> <span class=\"n\">Zr1</span><span class=\"o\">+</span><span class=\"n\">Zl1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">gnd</span><span class=\"p\">,</span> <span class=\"n\">Zr2</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">gnd</span><span class=\"p\">,</span> <span class=\"n\">Zc1</span><span class=\"p\">)])</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Vout</span>\n<span class=\"n\">Complex</span> <span class=\"n\">voltage</span> <span class=\"p\">(</span><span class=\"n\">Vrms</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mf\">2.28808</span><span class=\"o\">-</span><span class=\"mf\">6.8219</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"p\">(</span><span class=\"n\">Vin</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"n\">Zr1</span><span class=\"o\">+</span><span class=\"n\">Zl1</span><span class=\"p\">))</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"n\">Zr1</span><span class=\"o\">+</span><span class=\"n\">Zl1</span><span class=\"p\">)</span> <span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"n\">Zr2</span> <span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"n\">Zc1</span><span class=\"p\">)</span>\n<span class=\"n\">Complex</span> <span class=\"n\">voltage</span> <span class=\"p\">(</span><span class=\"n\">Vrms</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mf\">2.28808</span><span class=\"o\">-</span><span class=\"mf\">6.8219</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Vout</span><span class=\"o\">/</span><span class=\"n\">Vin</span>\n<span class=\"n\">Ratio</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mf\">0.457615</span><span class=\"o\">-</span><span class=\"mf\">1.36438</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># current divider</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">IC</span> <span class=\"o\">=</span> <span class=\"n\">law</span><span class=\"o\">.</span><span class=\"n\">CurrentDivider</span><span class=\"p\">(</span><span class=\"n\">itotal</span><span class=\"o\">=</span><span class=\"n\">IL</span><span class=\"p\">,</span> <span class=\"n\">z</span><span class=\"o\">=</span><span class=\"n\">Zc1</span><span class=\"p\">,</span> <span class=\"n\">z2</span><span class=\"o\">=</span><span class=\"n\">Zr2</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">IC</span>\n<span class=\"n\">Complex</span> <span class=\"n\">current</span> <span class=\"p\">(</span><span class=\"n\">Arms</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">0.0141449</span><span class=\"o\">-</span><span class=\"mf\">0.00474421</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">IL</span><span class=\"o\">*</span><span class=\"n\">Zr2</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"n\">Zr2</span> <span class=\"o\">+</span><span class=\"n\">Zc1</span><span class=\"p\">)</span>\n<span class=\"n\">Complex</span> <span class=\"n\">current</span> <span class=\"p\">(</span><span class=\"n\">Arms</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">0.0141449</span><span class=\"o\">-</span><span class=\"mf\">0.00474421</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n</pre>\n<h4>Electrical power, Joule's first law</h4>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">S</span> <span class=\"o\">=</span> <span class=\"n\">IL</span><span class=\"o\">*</span><span class=\"n\">Vin</span>  <span class=\"c1\"># source complex power</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">S</span><span class=\"o\">.</span><span class=\"n\">properties</span><span class=\"p\">(</span><span class=\"mi\">1000</span><span class=\"p\">)</span>\n<span class=\"n\">Frequency</span> <span class=\"p\">(</span><span class=\"n\">Hz</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mi\">1000</span>\n<span class=\"n\">Angular</span> <span class=\"n\">frequency</span> <span class=\"p\">(</span><span class=\"n\">rad</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">6283.19</span>\n\n<span class=\"n\">Complex</span> <span class=\"n\">power</span> <span class=\"p\">:</span> <span class=\"mf\">0.0655242</span><span class=\"o\">+</span><span class=\"mf\">0.0392254</span><span class=\"n\">j</span>\n\n<span class=\"n\">Active</span> <span class=\"n\">power</span> <span class=\"n\">P</span> <span class=\"p\">(</span><span class=\"n\">W</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">+</span><span class=\"mf\">0.0655242</span>\n<span class=\"n\">Reactive</span> <span class=\"n\">power</span> <span class=\"n\">Q</span> <span class=\"p\">(</span><span class=\"n\">var</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">+</span><span class=\"mf\">0.0392254</span>\n<span class=\"n\">Apparent</span> <span class=\"n\">power</span> <span class=\"n\">S</span> <span class=\"p\">(</span><span class=\"n\">VA</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">0.0763678</span>\n\n<span class=\"n\">Phase</span> <span class=\"p\">(</span><span class=\"n\">degrees</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">+</span><span class=\"mf\">30.9064</span>\n<span class=\"n\">Phase</span> <span class=\"p\">(</span><span class=\"n\">radians</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">+</span><span class=\"mf\">0.539419</span>\n<span class=\"n\">Power</span> <span class=\"n\">factor</span> <span class=\"n\">PF</span> <span class=\"p\">:</span> <span class=\"mf\">0.8580073402000852</span>\n\n<span class=\"n\">Active</span> <span class=\"n\">power</span> <span class=\"p\">(</span><span class=\"n\">dBW</span> <span class=\"n\">ref</span> <span class=\"mi\">1</span> <span class=\"n\">W</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mf\">11.835985322667693</span>\n\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Sr1</span> <span class=\"o\">=</span> <span class=\"n\">law</span><span class=\"o\">.</span><span class=\"n\">Joule</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"o\">=</span><span class=\"n\">Zr1</span><span class=\"p\">,</span> <span class=\"n\">i</span><span class=\"o\">=</span><span class=\"n\">IL</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Sr1</span>\n<span class=\"n\">Complex</span> <span class=\"n\">power</span> <span class=\"p\">(</span><span class=\"n\">W</span><span class=\"p\">):</span> <span class=\"mf\">0.0419907</span><span class=\"o\">+</span><span class=\"mi\">0</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zr1</span><span class=\"o\">*</span><span class=\"n\">IL</span><span class=\"o\">*</span><span class=\"n\">IL</span>\n<span class=\"n\">Complex</span> <span class=\"n\">power</span> <span class=\"p\">(</span><span class=\"n\">W</span><span class=\"p\">):</span> <span class=\"mf\">0.0419907</span><span class=\"o\">+</span><span class=\"mi\">0</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Sr2</span> <span class=\"o\">=</span> <span class=\"n\">law</span><span class=\"o\">.</span><span class=\"n\">Joule</span><span class=\"p\">(</span><span class=\"n\">z</span><span class=\"o\">=</span><span class=\"n\">Zr2</span><span class=\"p\">,</span> <span class=\"n\">v</span><span class=\"o\">=</span><span class=\"n\">Vout</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Sr2</span>\n<span class=\"n\">Complex</span> <span class=\"n\">power</span> <span class=\"p\">(</span><span class=\"n\">W</span><span class=\"p\">):</span> <span class=\"mf\">0.0235334</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Sl1</span> <span class=\"o\">=</span> <span class=\"n\">Zl1</span><span class=\"o\">*</span><span class=\"n\">IL</span><span class=\"o\">*</span><span class=\"n\">IL</span>\n<span class=\"n\">Complex</span> <span class=\"n\">power</span> <span class=\"p\">(</span><span class=\"n\">W</span><span class=\"p\">):</span> <span class=\"mi\">0</span><span class=\"o\">+</span><span class=\"mf\">0.146575</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Sc1</span> <span class=\"o\">=</span> <span class=\"n\">Zc1</span><span class=\"o\">*</span><span class=\"n\">IC</span><span class=\"o\">*</span><span class=\"n\">IC</span>\n<span class=\"n\">Complex</span> <span class=\"n\">power</span> <span class=\"p\">(</span><span class=\"n\">W</span><span class=\"p\">):</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mf\">0.10735</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Sr1</span> <span class=\"o\">+</span><span class=\"n\">Sr2</span> <span class=\"o\">+</span><span class=\"n\">Sc1</span> <span class=\"o\">+</span><span class=\"n\">Sl1</span>\n<span class=\"n\">Complex</span> <span class=\"n\">power</span> <span class=\"p\">(</span><span class=\"n\">W</span><span class=\"p\">):</span> <span class=\"mf\">0.0655242</span><span class=\"o\">+</span><span class=\"mf\">0.0392254</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n</pre>\n<h3>User-defined transfer function</h3>\n<h4>Example 1 : second order band-pass filter</h4>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">acelectricity</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># static gain, damping value, normal angular frequency</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">z</span><span class=\"p\">,</span> <span class=\"n\">wn</span> <span class=\"o\">=</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mf\">0.1</span><span class=\"p\">,</span> <span class=\"mi\">1000</span><span class=\"o\">*</span><span class=\"mi\">2</span><span class=\"o\">*</span><span class=\"n\">math</span><span class=\"o\">.</span><span class=\"n\">pi</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">H</span> <span class=\"o\">=</span> <span class=\"n\">Ratio</span><span class=\"p\">(</span><span class=\"n\">fw</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">w</span><span class=\"p\">:</span> <span class=\"n\">a</span><span class=\"o\">*</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"o\">*</span><span class=\"n\">z</span><span class=\"o\">*</span><span class=\"mi\">1</span><span class=\"n\">j</span><span class=\"o\">*</span><span class=\"n\">w</span><span class=\"o\">/</span><span class=\"n\">wn</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"o\">+</span><span class=\"mi\">2</span><span class=\"o\">*</span><span class=\"n\">z</span><span class=\"o\">*</span><span class=\"mi\">1</span><span class=\"n\">j</span><span class=\"o\">*</span><span class=\"n\">w</span><span class=\"o\">/</span><span class=\"n\">wn</span><span class=\"o\">-</span><span class=\"p\">(</span><span class=\"n\">w</span><span class=\"o\">/</span><span class=\"n\">wn</span><span class=\"p\">)</span><span class=\"o\">**</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># or : H = Ratio.transfer_function(numerator=[0, a*(2*z*1j/wn)],</span>\n    <span class=\"n\">denominator</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"o\">*</span><span class=\"n\">z</span><span class=\"o\">*</span><span class=\"mi\">1</span><span class=\"n\">j</span><span class=\"o\">/</span><span class=\"n\">wn</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"n\">wn</span><span class=\"o\">**</span><span class=\"mi\">2</span><span class=\"p\">])</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">H</span><span class=\"o\">.</span><span class=\"n\">bode</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">show</span><span class=\"p\">()</span>\n</pre>\n<h4>Example 2 : cascaded series, parallel filters</h4>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">acelectricity</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># first order low-pass filter</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">wn</span> <span class=\"o\">=</span> <span class=\"mi\">10000</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hlp</span> <span class=\"o\">=</span> <span class=\"n\">Ratio</span><span class=\"p\">(</span><span class=\"n\">fw</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">w</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"n\">j</span><span class=\"o\">*</span><span class=\"n\">w</span><span class=\"o\">/</span><span class=\"n\">wn</span><span class=\"p\">))</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># first order high-pass filter</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hhp</span> <span class=\"o\">=</span> <span class=\"n\">Ratio</span><span class=\"p\">(</span><span class=\"n\">fw</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">w</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"n\">j</span><span class=\"o\">*</span><span class=\"n\">wn</span><span class=\"o\">/</span><span class=\"n\">w</span><span class=\"p\">))</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hs</span> <span class=\"o\">=</span> <span class=\"n\">Hlp</span><span class=\"o\">*</span><span class=\"n\">Hhp</span>  <span class=\"c1\"># cascaded series filters</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hs</span><span class=\"o\">.</span><span class=\"n\">bode</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hp</span> <span class=\"o\">=</span> <span class=\"n\">Hlp</span><span class=\"o\">+</span><span class=\"n\">Hhp</span>  <span class=\"c1\"># parallel filters</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hp</span><span class=\"o\">.</span><span class=\"n\">bode</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">show</span><span class=\"p\">()</span>\n</pre>\n<h4>Example 3 : linear control system</h4>\n<pre><code>          +      +------+\n     --&gt;---(X)---| G(w) |----+---&gt;--\n          - |    +------+    |\n            |                |\n            |    +------+    |\n            +----| H(w) |-&lt;--+\n                 +------+\n\n</code></pre>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">acelectricity</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># feedforward transfer function</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># first order low-pass filter</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">wn</span> <span class=\"o\">=</span> <span class=\"mi\">10000</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">G</span> <span class=\"o\">=</span> <span class=\"n\">Ratio</span><span class=\"o\">.</span><span class=\"n\">transfer_function</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"n\">j</span><span class=\"o\">/</span><span class=\"n\">wn</span><span class=\"p\">])</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># feedback transfer function</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">H</span> <span class=\"o\">=</span> <span class=\"n\">Ratio</span><span class=\"o\">.</span><span class=\"n\">transfer_function</span><span class=\"p\">([</span><span class=\"mi\">10</span><span class=\"p\">])</span>  <span class=\"c1\"># constant</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># open-loop transfer function</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hopenloop</span> <span class=\"o\">=</span> <span class=\"n\">G</span><span class=\"o\">*</span><span class=\"n\">H</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hopenloop</span><span class=\"o\">.</span><span class=\"n\">bode</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"c1\"># closed-loop transfer function</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hcloseloop</span> <span class=\"o\">=</span> <span class=\"n\">G</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"o\">+</span><span class=\"n\">Hopenloop</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Hcloseloop</span><span class=\"o\">.</span><span class=\"n\">bode</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">show</span><span class=\"p\">()</span>\n</pre>\n<h4>Example 4 : digital filter frequency response</h4>\n<p>y(n) = 0.1x(n) +1.6y(n-1) -0.7y(n-2)</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">acelectricity</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">fs</span> <span class=\"o\">=</span> <span class=\"mi\">100000</span>  <span class=\"c1\"># sampling rate (Hz)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">H</span> <span class=\"o\">=</span> <span class=\"n\">Ratio</span><span class=\"o\">.</span><span class=\"n\">digital_filter</span><span class=\"p\">(</span><span class=\"n\">fs</span><span class=\"o\">=</span><span class=\"n\">fs</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mf\">0.1</span><span class=\"p\">],</span> <span class=\"n\">a</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">1.6</span><span class=\"p\">,</span> <span class=\"mf\">0.7</span><span class=\"p\">])</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">H</span><span class=\"o\">.</span><span class=\"n\">bode</span><span class=\"p\">(</span><span class=\"n\">xmin</span><span class=\"o\">=</span><span class=\"n\">fs</span><span class=\"o\">*</span><span class=\"mf\">0.001</span><span class=\"p\">,</span> <span class=\"n\">xmax</span><span class=\"o\">=</span><span class=\"n\">fs</span><span class=\"o\">/</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">xscale</span><span class=\"o\">=</span><span class=\"s1\">'linear'</span><span class=\"p\">,</span>\n    <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s1\">'IIR digital filter'</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">show</span><span class=\"p\">()</span>\n</pre>\n<p><img alt=\"screenshot3\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2c3112f78bed8ba22b71cf89df077953ad200614/687474703a2f2f6673696e636572652e667265652e66722f69736e2f707974686f6e2f646f776e6c6f61642f64632f696d616765332e706e67\"></p>\n<h3>Custom default frequency</h3>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">acelectricity</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zc</span> <span class=\"o\">=</span> <span class=\"n\">Impedance</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"o\">=</span><span class=\"mf\">220e-6</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zc</span>\n<span class=\"n\">Complex</span> <span class=\"n\">impedance</span> <span class=\"p\">(</span><span class=\"n\">\u03a9</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mf\">0.723432</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">ElectricalQuantity</span><span class=\"o\">.</span><span class=\"n\">DEFAULT_FREQUENCY</span> <span class=\"o\">=</span> <span class=\"mi\">50</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Zc</span>\n<span class=\"n\">Complex</span> <span class=\"n\">impedance</span> <span class=\"p\">(</span><span class=\"n\">\u03a9</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mf\">14.4686</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mi\">50</span> <span class=\"n\">Hz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"n\">Zc</span>\n<span class=\"n\">Complex</span> <span class=\"n\">admittance</span> <span class=\"p\">(</span><span class=\"n\">S</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"o\">-</span><span class=\"mi\">0</span><span class=\"o\">+</span><span class=\"mf\">0.069115</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mi\">50</span> <span class=\"n\">Hz</span>\n</pre>\n<h3>Advantages and limitations</h3>\n<p>This module manages basic arithmetic operations <code>+ - * /</code> as well as <code>//</code> which designates two impedances in parallel.</p>\n<p>The dimensional homogeneity is checked :</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">V3</span> <span class=\"o\">=</span> <span class=\"n\">V1</span> <span class=\"o\">-</span> <span class=\"n\">V2</span> <span class=\"o\">+</span> <span class=\"n\">I3</span>  <span class=\"c1\"># V+A -&gt; Error</span>\n<span class=\"ne\">TypeError</span> <span class=\"p\">:</span> <span class=\"n\">Voltage</span> <span class=\"n\">expected</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">I1</span> <span class=\"o\">=</span> <span class=\"n\">Current</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">I</span> <span class=\"o\">=</span> <span class=\"n\">I1</span> <span class=\"o\">+</span> <span class=\"mf\">0.5</span>  <span class=\"c1\"># A+number -&gt; Error</span>\n<span class=\"ne\">TypeError</span> <span class=\"p\">:</span> <span class=\"n\">Current</span> <span class=\"n\">expected</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">I2</span> <span class=\"o\">=</span> <span class=\"n\">Current</span><span class=\"p\">(</span><span class=\"mf\">0.5</span><span class=\"p\">,</span> <span class=\"n\">phase</span><span class=\"o\">=</span><span class=\"mi\">30</span><span class=\"p\">)</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">I</span> <span class=\"o\">=</span> <span class=\"n\">I1</span> <span class=\"o\">+</span> <span class=\"n\">I2</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">I</span>\n<span class=\"n\">Complex</span> <span class=\"n\">current</span> <span class=\"p\">(</span><span class=\"n\">Arms</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"mf\">2.43301</span><span class=\"o\">+</span><span class=\"mf\">0.25</span><span class=\"n\">j</span> <span class=\"o\">@</span> <span class=\"mf\">1.0</span> <span class=\"n\">kHz</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">I</span> <span class=\"o\">=</span> <span class=\"mi\">5</span><span class=\"o\">*</span><span class=\"n\">I2</span> <span class=\"o\">-</span> <span class=\"n\">V1</span><span class=\"o\">/</span><span class=\"n\">Z1</span> <span class=\"o\">+</span> <span class=\"n\">I3</span>\n</pre>\n<p>The result of any operation must give a quantity whose unit is one of : V, A, \u03a9, S, W (or ratio).<br>\nOtherwise, you will get an error :</p>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">Z1</span><span class=\"o\">/</span><span class=\"n\">V1</span>  <span class=\"c1\"># \u03a9/V -&gt; 1/A -&gt; Error</span>\n<span class=\"ne\">TypeError</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">U2</span><span class=\"o\">*</span><span class=\"p\">(</span><span class=\"n\">Z3</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"n\">Z2</span><span class=\"o\">+</span><span class=\"n\">Z3</span><span class=\"p\">))</span>  <span class=\"c1\"># V*(\u03a9/\u03a9) -&gt; V*() -&gt; V</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">U2</span><span class=\"o\">*</span><span class=\"n\">Z3</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"n\">Z2</span><span class=\"o\">+</span><span class=\"n\">Z3</span><span class=\"p\">)</span>  <span class=\"c1\"># V*\u03a9 -&gt; Error</span>\n<span class=\"ne\">TypeError</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">S</span> <span class=\"o\">=</span> <span class=\"n\">V1</span><span class=\"o\">*</span><span class=\"p\">(</span><span class=\"n\">V1</span><span class=\"o\">/</span><span class=\"n\">Z1</span><span class=\"p\">)</span>  <span class=\"c1\"># V*(V/\u03a9) -&gt; V*A -&gt; W</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">S</span> <span class=\"o\">=</span> <span class=\"n\">V1</span><span class=\"o\">*</span><span class=\"n\">V1</span><span class=\"o\">/</span><span class=\"n\">Z1</span>    <span class=\"c1\"># V*V -&gt; Error</span>\n<span class=\"ne\">TypeError</span>\n</pre>\n<h3>See also</h3>\n<p><a href=\"https://pypi.org/project/dc-electricity\" rel=\"nofollow\">https://pypi.org/project/dc-electricity</a></p>\n\n          </div>"}, "last_serial": 7182268, "releases": {"0.4.0": [{"comment_text": "", "digests": {"md5": "ccae41b57e385b0ae577e3cf09c796d2", "sha256": "2e4f431bd3c07e04237c6bc8f41f51f741102b069ddfca626ee759a492f507da"}, "downloads": -1, "filename": "ac-electricity-0.4.0.tar.gz", "has_sig": false, "md5_digest": "ccae41b57e385b0ae577e3cf09c796d2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3", "size": 18425, "upload_time": "2020-05-05T21:25:12", "upload_time_iso_8601": "2020-05-05T21:25:12.056187Z", "url": "https://files.pythonhosted.org/packages/5e/08/1778e182c530a25d59333d94f2470faeae9be3c13e28d46bffca7639ac4a/ac-electricity-0.4.0.tar.gz", "yanked": false}], "0.4.1": [{"comment_text": "", "digests": {"md5": "1a119004d92dca3e4594a713bf1bbfd2", "sha256": "38d269c9e287803d1fb46cc9ad326000bdb947e7dbd4d91e9937401214377b7b"}, "downloads": -1, "filename": "ac-electricity-0.4.1.tar.gz", "has_sig": false, "md5_digest": "1a119004d92dca3e4594a713bf1bbfd2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3", "size": 19026, "upload_time": "2020-05-06T18:31:28", "upload_time_iso_8601": "2020-05-06T18:31:28.893840Z", "url": "https://files.pythonhosted.org/packages/4a/40/c6e516937e141164b6f032b35bdf95d5e5ea2c7a79be53f223231113732e/ac-electricity-0.4.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "1a119004d92dca3e4594a713bf1bbfd2", "sha256": "38d269c9e287803d1fb46cc9ad326000bdb947e7dbd4d91e9937401214377b7b"}, "downloads": -1, "filename": "ac-electricity-0.4.1.tar.gz", "has_sig": false, "md5_digest": "1a119004d92dca3e4594a713bf1bbfd2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3", "size": 19026, "upload_time": "2020-05-06T18:31:28", "upload_time_iso_8601": "2020-05-06T18:31:28.893840Z", "url": "https://files.pythonhosted.org/packages/4a/40/c6e516937e141164b6f032b35bdf95d5e5ea2c7a79be53f223231113732e/ac-electricity-0.4.1.tar.gz", "yanked": false}], "timestamp": "Thu May  7 16:24:42 2020"}