{"info": {"author": "St\u00e9phane \"Twidi\" Angel", "author_email": "s.angel@twidi.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "License :: OSI Approved :: MIT License", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3 :: Only"], "description": "####\nMIXT\n####\n\nWrite html components directly in python and you have a beautiful but controversial MIXTure.\n\nYes, **controversial**.\n\n**If you don't like it, ignore it** (but you can use this without the html-in-python part, see below ;))\n\n*Based* on `pyxl <https://github.com/gvanrossum/pyxl3/>`_. Python 3.6+ only, and use typing for data validation.\n\nOnce you have your html, you can do whatever you want with it. Think of it as a replacement for your classic template engine.\n\n**Source code**: `<https://github.com/twidi/mixt/>`_\n\n**Documentation**: `<https://twidi.github.io/mixt/>`_\n\n**PyPI**: `<https://pypi.org/project/mixt/>`_\n\n**CI** (CircleCi): `<https://circleci.com/gh/twidi/workflows/mixt/>`_\n\n***********\nBasic usage\n***********\n\nLet's create a file ``example.py``\n\n.. code-block:: python\n\n   # coding: mixt\n\n   from mixt import html, Element, Required\n\n   class Hello(Element):\n       class PropTypes:\n           name: Required[str]\n\n       def render(self, context):\n           return <div>Hello, {self.name}</div>\n\n   print(<Hello name=\"World\"/>)\n\n\nAnd execute it:\n\n.. code-block:: shell\n\n   $ python example.py\n   <div>Hello, World</div>\n\n\nIf you don't like to write html in python, you can still use it:\n\n.. code-block:: python\n\n   from mixt import html, Element, Required\n\n   class Hello(Element):\n       class PropTypes:\n           name: Required[str]\n\n       def render(self, context):\n           return html.Div()(\"Hello, \", self.name)\n\n   print(Hello(name=\"World\"))\n\n\n********\nFeatures\n********\n\nYes it is inspired by React (in fact, mainly JSX) and we borrow some of the concept:\n\n- props and PropTypes with validation\n- dev-mode to validate props in dev but not in production to speed things up (your tests should have tested that everything is ok)\n- context\n- class components or simple function components\n- high order components\n\nAnd we added:\n\n- css/js collectors\n\n\n************\nInstallation\n************\n\nRun these two commands. The second one will tell python how to understand files with html inside.\n\n.. code-block:: shell\n\n   pip install mixt\n   mixt-post-install\n\nTo check that everything is ready, run:\n\n.. code-block:: shell\n\n   python -m mixt.examples.simple\n\nYou should have this output:\n\n.. code-block:: html\n\n   <div title=\"Greeting\">Hello, World</div>\n\nIf you don't want to use the html-in-python stuff, don't run ``mixt-post-install``. And then test with (to have the same output):\n\n.. code-block:: shell\n\n   python -m mixt.examples.simple_pure_python\n\n**********\nContribute\n**********\n\nClone the git project then:\n\n.. code-block:: shell\n\n   make dev\n\n\nTo check that everything is ready, run:\n\n.. code-block:: shell\n\n   python -m mixt.examples.simple\n\n\nYou should have this output:\n\n.. code-block:: html\n\n   <div title=\"Greeting\">Hello, World</div>\n\n\nAfter having done some code:\n\n.. code-block:: shell\n\n    make tests\n\n\n.. code-block:: shell\n\n    make lint\n\n\nIf you touch things in the ``codec`` directory, you'll have to run ``make dev`` (or at least ``make full-clean``) to purge the ``pyc`` python files.\n\nNote that our CI will check that every commit passes the ``make lint``, ``make tests`` and ``make check-doc``. So don't forget to run these for each commit.\n\nOne way to do it before pushing is:\n\n.. code-block:: shell\n\n    git rebase develop --exec 'git log -n 1; make checks'\n\n\n**********\nUser Guide\n**********\n\nNote: You can find the *final* code of this user guide in ``src/mixt/examples/user_guide`` (you'll find ``mixt.py`` and ``pure_python.py``).\n\nRun it with:\n\n.. code-block:: shell\n\n    python -m mixt.examples.user_guide\n\n\nStart\n=====\n\nLet's create a... todo list, yeah!\n\nBut before, remember. This is not React, it's not on the browser and there is no Javascript involved here. We only talk about rendering some HTML.\n\nBut you can do what you want with it. Add javascript handlers, simple forms...\n\nTalking about forms...\n\nIn a todo list, we want to be able to add a todo. It's a simple text input.\n\nSo let's create our first component, the ``TodoForm``. We want a form with an input text and a button.\n\nA component is a subclass of the ``Element`` class, with a ``render`` method you have to write.\n\n.. code-block:: python\n\n    # coding: mixt\n\n    from mixt import Element, html  # html is mandatory to resolve html tags\n\n    class TodoForm(Element):\n\n        def render(self, context):  # Ignore the ``context`` argument for now.\n            return \\  # The ``\\`` is only for a better indentation below\n                <form method=\"post\" action=\"???\">\n                    <label>New Todo: </label><itext name=\"todo\" />\n                    <button type=\"submit\">Add</button>\n                </form>\n\n\nNote that this could have been written as a simple function:\n\n.. code-block:: python\n\n    # coding: mixt\n\n    from mixt import Element, html\n\n    def TodoForm():\n        return \\\n            <form method=\"post\" action=\"???\">\n                <label>New Todo: </label><itext name=\"todo\" />\n                <button type=\"submit\">Add</button>\n            </form>\n\n\nWhen print the component, these two will give the same result:\n\n.. code-block:: python\n\n    print(<TodoForm />)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"???\"><label>New Todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nSpacing\n=======\n\nNotice how it is formatted: no space between tags. In fact, it's `like in JSX <https://reactjs.org/docs/jsx-in-depth.html#string-literals-1>`_:\n\n    JSX removes whitespace at the beginning and ending of a line. It also removes blank lines. New lines adjacent to tags are removed; new lines that occur in the middle of string literals are condensed into a single space\n\nTo add a space, or a newline, you can pass some python. Let's, as an example, add a newline before the label:\n\n.. code-block:: python\n\n    #...\n                <form method=\"post\" action=\"???\">\n                    {'\\n'}<label>New Todo: </label><itext name=\"todo\" />\n    #...\n\n\nNow we have this output:\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/todo/add\">\n    <label>New Todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nProps\n=====\n\nNow let's go further.\n\nNotice the ``action`` attribute of the form. We need to pass something. But hard-coding it does not sound right. Wwe need to pass it to the component.\n\n``Mixt`` has, like ``React``, the concept of properties, aka \"props\".\n\n\nPropTypes class\n---------------\n\nIn ``Mixt``, we define them with a type, in a class inside our component, named ``PropTypes``:\n\n.. code-block:: python\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: str\n\n        def render(self, context):\n            return \\\n                <form method=\"post\" action={self.add_url}>\n                    <label>New Todo: </label><itext name=\"todo\" />\n                    <button type=\"submit\">Add</button>\n                </form>\n\n\nHere we defined a prop named ``add_url`` which must be a string (``str``). This uses the `python typing syntax <https://docs.python.org/3.6/library/typing.html>`_.\n\nAnd notice how we changed the ``action`` attribute of the ``form`` tag. It's now ``{self.add_url}`` instead of ``\"???\"``.\n\nWhen attributes are passed between curly braces, they are interpreted as pure python at run-time. In fact, as the ``mixt`` parser will convert the whole file to pure python before letting the python interpreter running it, it will stay the same, only the html around will be converted. So there is no penalty to do this.\n\n\nProps and children\n------------------\n\nLook how this would look like if our component was written in pure python:\n\n.. code-block:: python\n\n    from mixt import Element, html\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: str\n\n        def render(self, context):\n            return html.Form(method='post', action=self.add_url )(\n                html.Label()(\n                    html.Raw(\"New Todo: \")\n                ),\n                html.InputText(name='todo'),\n                html.Button(type='submit')(\n                    html.Raw(\"Add\")  # or html.Rawhtml(text=\"Add\")\n                ),\n            )\n\n\nNotice how the props are passed to a component as named arguments and how ``action`` is passed: ``action=self.add_url``.\n\nThis pure-python component also shows you how it works: props are passed as named argument to the component class, then this component is called, passing children components as positional arguments to the call:\n\n.. code-block:: python\n\n    ComponentClass(prop1=\"val1\", prop2=\"val2\")(\n        Children1(),\n        Children2(),\n    )\n\nWhat are children? Children are tags inside other tags.\n\nIn ``<div id=\"divid\"><span /><p>foo</p></div>``, we have:\n\n- a ``html.Div`` component, with a prop ``id`` and two children:\n\n  - a ``html.Span`` component, without children\n  - a ``html.P`` component with one child:\n\n    - a ``html.RawHtml`` component with the text \"foo\"\n\n\nNote that you can play with props and children. First the version in pure-python to show how it works:\n\n.. code-block:: python\n\n    def render(self, context):\n        props = {\"prop1\": \"val1\", \"prop2\": \"val2\"}\n        children = [Children1(), Children2()]\n\n        return ComponentClass(**props)(*children)\n        # You can pass a list of children to to the call, so this would produce the same result:\n        # ComponentClass(**props)(children)\n\n\nThen the ``mixt`` version:\n\n.. code-block:: python\n\n    def render(self, context):\n        props = {\"prop1\": \"val1\", \"prop2\": \"val2\"}\n        children = [<Children1/>, <Children2/>]\n\n        return <ComponentClass {**props}>{*children}</ComponentClass>\n        # or, the same, passing the children as a list:\n        # return <ComponentClass {**props}>{children}</ComponentClass>\n\n\nPassing props\n-------------\n\nNow let's go back to our props ``add_url``.\n\nHow to pass it to the component?\n\nThe exact same way we passed attributes to HTML tags: they are in fact props defined in the HTML compoments (defined in ``mixt.html``). We support every HTML tags that, at the time of the writing, are valid (not deprecated) in HTML5, with their attributes (excluding the deprecated ones).\n\nSo let's do this:\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"/todo/add\"/>)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/todo/add\"><label>New Todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\nOK, we have our prop present in the rendered HTML.\n\nValidation\n----------\n\nWhat if we don't pass a string? We said in ``PropTypes`` that we wanted a string...\n\nNumbers\n^^^^^^^\n\nLet's try it:\n\n.. code-block:: python\n\n    print(<TodoForm add_url=1/>)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"1\"><label>New Todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nIt works! But... it's not a string!! In fact, there is a special case for numbers, you can pass them as numbers instead of strings and they are converted if needed...\n\n\nBooleans and other special cases\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nSo let's try something else.\n\n.. code-block:: python\n\n    print(<TodoForm add_url=True/>)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropValueError:\n    <TodoForm>.add_url: `True` is not a valid value for this prop (type: <class 'bool'>, expected: <class 'str'>)\n\n\nAnd it's the same if we pass ``True`` in python\n\n.. code-block:: python\n\n    print(<TodoForm add_url={True}/>)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropValueError:\n    <TodoForm>.add_url: `True` is not a valid value for this prop (type: <class 'bool'>, expected: <class 'str'>)\n\n\nOk, let's trick the system and pass ``\"True\"``, as a string.\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"True\"/>)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropValueError:\n    <TodoForm>.add_url: `True` is not a valid value for this prop (type: <class 'bool'>, expected: <class 'str'>)\n\n\nStill the same, but here we passed a string! Yes but there are 4 values that are always evaluated to what they seems to be:\n\n- True\n- False\n- None\n- NotProvided (a special value meaning \"not set\" which is different that ``None``)\n\nThe only way to pass one of these values as a string, is to pass them via python, as a string:\n\n.. code-block:: python\n\n    print(<TodoForm add_url={\"True\"}/>)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"True\"><label>New Todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nExcept these 4 values, and numbers, every value that is passed to an attribute is considered a string. Even if there is no quotes, like in html in HTML5, where quotes are not mandatory for strings without some characters (no spaces, no ``/``...).\n\nTo pass something else, you must surround the value in curly braces (and in this cases there is no need for quotes around the curly braces.\n\n\nOk, now we are sure that we only accept string.... but what if I pass nothing? And... what is \"nothing\"?\n\nLet's start with an empty string in python:\n\n.. code-block:: python\n\n    print(<TodoForm add_url={\"\"}/>)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"\"><label>New Todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nOk it works, we wanted a string, we have a string.\n\nNow let's pass this empty string directly:\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"\"/>)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"\"><label>New Todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nIt still works, because it's still a string. Let's remove the quotes, to see.\n\n.. code-block:: python\n\n    print(<TodoForm add_url=/>)\n\n.. code-block:: python\n\n    mixt.exceptions.GeneralParserError: <mixt parser> Unclosed Tags: <TodoForm>\n\n\nHum yeah, this is not valid HTML. So let's remove the ``=``:\n\n.. code-block:: python\n\n    print(<TodoForm add_url/>)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropValueError:\n    <TodoForm>.add_url: `True` is not a valid value for this prop (type: <class 'bool'>, expected: <class 'str'>)\n\n\nWHAT? Yes, think about HTML5 attributes like ``required``, ``checked``... They only need to be present as an attribute, without value, to be considered ``True``. So when an attribute doesn't have any value, it's a boolean, and it's ``True``.\n\nIn addition to not pass a value, those two other ways are valid in HTML5 for a boolean to by ``True``:\n\n- pass an empty string: ``required=\"\"``\n- pass the name of the attribute: ``required=\"required\"``\n\nFor your convenience, we added another way:\n\n- pass ``True`` (case does not matter), as python or as a string: ``required=True``, ``required={True}``, ``required=\"true\"``\n\nAnd its counterpart, to pass ``False``:\n\n- pass ``False`` (case does not matter), as python or as a string: ``required=False``, ``required={False}``, ``required=\"false\"``\n\n\nRequired props\n--------------\n\nOk for the boolean attributes. It's not our case. The last thing we can do is to not set the attribute at all:\n\n.. code-block:: python\n\n    print(<TodoForm/>)\n    # this is the same: ``print(<TodoForm add_url=NotProvided />)```\n    # (``NotProvided`` must be imported from ``mixt``)\n\n.. code-block:: python\n\n    mixt.exceptions.UnsetPropError: <TodoForm>.add_url: prop is not set\n\n\nIt's understandable: we try to access a prop that is not set, of course we cannot use it.\n\n\nBut what if we don't access it? If we don't print the component, it won't be rendered:\n\n.. code-block:: python\n\n    <TodoForm/>\n\n.. code-block:: python\n\n    <TodoForm at 0x7fbd18ea5630>\n\n\nSo we can create an instance but it will fail at render time. But there is a way to prevent that.\n\nBy default, all properties are optional. And you don't have to use the ``Optional`` type from the python ``typing`` module for that, it would be cumbersome to do it for each prop.\n\nInstead, ``mixt`` provides a type named ``Required`` that you use the same way than ``Optionnal``.\n\n.. code-block:: python\n\n    from mixt import Element, Required, html\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: Required[str]\n\n        def render(self, context):\n            # ...\n\n\nSo we just said we wanted a string, and that it is required.\n\nLet's try again to create it without the prop:\n\n.. code-block:: python\n\n    <TodoForm/>\n\n.. code-block:: python\n\n    mixt.exceptions.RequiredPropError: <TodoForm>.add_url: is a required prop but is not set\n\n\nNow we have the exception raised earlier in our program.\n\n\nDefault props\n-------------\n\nTo see other possibilities in props, let's add a new one to change the text label. But we don't want to make it required, and instead have a default value.\n\nFor this, it's as easy as adding a value to the prop in the ``PropTypes`` class:\n\n.. code-block:: python\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: Required[str]\n            label: str = 'New Todo'\n\n        def render(self, context):\n            return \\\n                <form method=\"post\" action={self.add_url}>\n                    <label>{self.label}: </label><itext name=\"todo\" />\n                    <button type=\"submit\">Add</button>\n                </form>\n\n\nNow let's try it without passing the prop:\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"/todo/add\"/>)\n\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"\"><label>New Todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nAnd if we pass one:\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"/todo/add\" label=\"Thing to do\" />)\n\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/todo/add\"><label>Thing to do: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nIt works as expected.\n\nNote that you cannot give a default value while having the prop ``Required``. It makes no sense, so it's checked as soon as possible, while the ``class`` is constructed:\n\n.. code-block:: python\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: Required[str]\n            label: Required[str] = 'New Todo'\n\n.. code-block:: python\n\n    mixt.exceptions.PropTypeRequiredError: <TodoForm>.label: a prop with a default value cannot be required\n\n\nAnd of course the default value must match the type!\n\n.. code-block:: python\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: Required[str]\n            label: str = {'label': 'foo'}\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropValueError:\n    <TodoForm>.label: `{'label': 'foo'}` is not a valid value for this prop (type: <class 'dict'>, expected: <class 'str'>)\n\n\nChoices\n-------\n\nAnother thing we want to do in our component is to let it construct the label, passing it a \"type\" of todo, but limiting the choices. For this we can use the ``Choices`` type:\n\n.. code-block:: python\n\n    from mixt import Choices, Element, Required, html\n\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: Required[str]\n            type: Choices = ['todo', 'thing']\n\n        def render(self, context):\n\n            return \\\n                <form method=\"post\" action={self.add_url}>\n                    <label>New {self.type}: </label><itext name=\"todo\" />\n                    <button type=\"submit\">Add</button>\n                </form>\n\n\nLet's try it:\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"/todo/add\" type=\"todo\" />)\n    print(<TodoForm add_url=\"/todo/add\" type=\"thing\" />)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/todo/add\"><label>New todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n    <form method=\"post\" action=\"/todo/add\"><label>New thing: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nAnd what if we try to pass something else than the available choices? It fails, as expected:\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"/todo/add\" type=\"stuff\" />)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropChoiceError: <TodoForm>.type: `stuff` is not a valid choice for this prop (must be in ['todo', 'thing'])\n\n\nDefault choices\n---------------\n\nBut maybe we don't want to pass it and use a default value. What would the result be?\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"/todo/add\" />)\n\n.. code-block:: python\n\n    mixt.exceptions.UnsetPropError: <TodoForm>.type: prop is not set\n\n\nSo we have to mark the ``type`` prop as required:\n\n.. code-block:: python\n\n    class PropTypes:\n        add_url: Required[str]\n        type: Required[Choices] = ['todo', 'thing']\n\n\nSo if we don't pass it, it fails earlier:\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"/todo/add\" />)\n\n.. code-block:: python\n\n    mixt.exceptions.RequiredPropError: <TodoForm>.type: is a required prop but is not set\n\n\nBut it's not what we want, we want a default value.\n\nIn fact, you noticed that for types other than ``Choices``, setting a value in ``PropTypes`` gives us a default value. But for ``Choices`` it's different, as the value is the list of choices.\n\nFor this, we have ``DefaultChoices``: it work the same as ``Choices``, but use the first entry in the list as the default value. And of course, as with other types having default, it cannot be ``Required``.\n\nLet's try it:\n\n.. code-block:: python\n\n    from mixt import DefaultChoices, Element, Required, html\n\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: Required[str]\n            type: DefaultChoices = ['todo', 'thing']\n\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"/todo/add\" />)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/todo/add\"><label>New todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\nIt works as expected.\n\n\nAdvanced types\n--------------\n\nUntil then, we used simple types, but you can use more complicated ones.\n\nSo for example, we'll make the ``add_url`` prop to accept a function that will compute the url for us based on the ``type`` prop. But we also want to allow strings, and with a default value.\n\nWe can do that, with typing. Our function will take a string, the ``type`` and will return a string, the url.\n\nSo the `syntax <https://docs.python.org/3.6/library/typing.html#typing.Callable>`_ is ``Callable[[str], str]`` for the callable, and we use ``Union`` to accept things of type ``Callable`` or ``str``:\n\n.. code-block:: python\n\n    from typing import Union, Callable\n    from mixt import DefaultChoices, Element, Required, html\n\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: Union[Callable[[str], str], str] = \"/todo/add\"\n            type: DefaultChoices = ['todo', 'thing']\n\n        def render(self, context):\n\n            if callable(self.add_url):\n                add_url = self.add_url(self.type)\n            else:\n                add_url = self.add_url\n\n            return \\\n                <form method=\"post\" action={add_url}>\n                    <label>New {self.type}: </label><itext name=\"todo\" />\n                    <button type=\"submit\">Add</button>\n                </form>\n\nFirst, let's try it without the ``add_url`` prop, as we have a default:\n\n.. code-block:: python\n\n    print(<TodoForm  />)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/todo/add\"><label>New todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nIt should work too if we pass a string:\n\n.. code-block:: python\n\n    print(<TodoForm add_url=\"/todolist/add\" />)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/todolist/add\"><label>New todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nAnd now we can pass a function:\n\n.. code-block:: python\n\n    def make_url(type):\n        return f\"/{type}/add\"\n\n    print(<TodoForm add_url={make_url} />)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropValueError: <TodoForm>.add_url:\n    `<function make_url at 0x7fe2ae87be18>` is not a valid value for this prop (type: <class 'function'>, expected: Union[Callable[[str], str], str])\n\n\nOh? Why? I passed a function accepting a string as argument and returning a string. Yes, but don't forget that types are checked! So we must add types to our function:\n\n.. code-block:: python\n\n    def make_url(type: str) -> str:\n        return f\"/{type}/add\"\n\n    print(<TodoForm add_url={make_url} />)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/todo/add\"><label>New todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nAnd if we pass another type, the url should change accordingly:\n\n.. code-block:: python\n\n    print(<TodoForm add_url={make_url} type=\"thing\" />)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/thing/add\"><label>New todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\nWe can even make this function the default value for our prop:\n\n.. code-block:: python\n\n    from typing import Union, Callable\n    from mixt import DefaultChoices, Element, Required, html\n\n\n    def make_url(type: str) -> str:\n        return f\"/{type}/add\"\n\n\n    class TodoForm(Element):\n\n        class PropTypes:\n            add_url: Union[Callable[[str], str], str] = make_url\n            type: DefaultChoices = ['todo', 'thing']\n\n        def render(self, context):\n\n            if callable(self.add_url):\n                add_url = self.add_url(self.type)\n            else:\n                add_url = self.add_url\n\n            return \\\n                <form method=\"post\" action={add_url}>\n                    <label>New {self.type}: </label><itext name=\"todo\" />\n                    <button type=\"submit\">Add</button>\n                </form>\n\n.. code-block:: python\n\n    print(<TodoForm />)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/todo/add\"><label>New todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\n\ndev-mode\n========\n\nNow you may start wondering... python typing is cumbersome and validating may take away some of our precious time.\n\nLet's me answer that:\n\n1. No, typing is not cumbersome. It's really useful to spot bugs and add some self-documentation.\n2. Yes, it takes away some of our precious time. But we got you covered.\n\nBy default, ``mixt`` run in \"dev-mode\". And in dev-mode, props are validated when passed to a component. When you are NOT in \"dev-mode\", the validation is skipped. So in production, you can deactivate the dev-mode (we'll see how in a minute) and pass props very fast:\n\n- we don't check required props (but that would fail if you try to use it in your compoment)\n- we don't check if a ``Choices`` prop is, indeed, in the list of choices\n- we don't check the type at all, so for example if you want to pass a list for a string, it will work but with understandable strange things happening in your ``render`` method.\n\nBut you may say that it's in production that validation is important. Indeed. But of course your code is fully covered by tests, that you run in dev-mode, and so in production, you don't need this validation! And note that it's how React works, by the way, with ``NODE_ENV=production``.\n\nHow to change dev-mode? We don't enforce any environment variable but we propose some functions. It's up to you to call them:\n\n.. code-block:: python\n\n    from mixt import set_dev_mode, unset_dev_mode, override_dev_mode, in_dev_mode\n\n    # by default, dev-mode is active\n    assert in_dev_mode()\n\n    # you can unset the dev-mode\n    unset_dev_mode()\n    assert not in_dev_mode()\n\n    # and set it back\n    set_dev_mode()\n    assert in_dev_mode()\n\n    # set_dev_mode can take a boolean\n    set_dev_mode(False)\n    assert not in_dev_mode()\n\n    set_dev_mode(True)\n    assert in_dev_mode()\n\n    # and we have a context manager to override for a block\n    with override_dev_mode(False):\n        assert not in_dev_mode()\n        with override_dev_mode(True):\n            assert in_dev_mode()\n        assert not in_dev_mode()\n    assert in_dev_mode()\n\n\nSo let's try this with the ``type`` prop. Remember, it looks like:\n\n.. code-block:: python\n\n    type: DefaultChoices = ['todo', 'thing']\n\nWe try to pass another choice, first in dev-mode:\n\n.. code-block:: python\n\n    with override_dev_mode(True):\n        print(<TodoForm type=\"stuff\" />)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropChoiceError: <TodoForm>.type: `stuff` is not a valid choice for this prop (must be in ['todo', 'thing'])\n\nIt fails as expected.\n\nAnd now by deactivating dev-mode:\n\n.. code-block:: python\n\n    with override_dev_mode(False):\n        print(<TodoForm type=\"stuff\" />)\n\n.. code-block:: html\n\n    <form method=\"post\" action=\"/stuff/add\"><label>New stuff: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form>\n\nIt works, we have a todo type that was not in our choices that is used, and is in the ``action`` too. It's the work of your tests to ensure that you never pass invalid props, so you can be confident in production and deactivate dev-mode.\n\n\nComponents cascade\n==================\n\nNow we have our form. What other components do we need for our todo list app?\n\nOf course, we need a way to display a todo entry.\n\nBut what is a todo entry? Let's create a basic ``TodoObject``:\n\n.. code-block:: python\n\n    class TodoObject:\n        def __init__(self, text):\n            self.text = text\n\n\nIt's a very simple class, but you can use what you want, of course. It could be Django models, etc...\n\nSo we can create our ``Todo`` component, making it accept a required ``TodoObject`` as prop:\n\n.. code-block:: python\n\n    class Todo(Element):\n        class PropTypes:\n            todo: Required[TodoObject]\n\n        def render(self, context):\n            return <li>{self.todo.text}</li>\n\nAnd we can use it:\n\n.. code-block:: python\n\n    todo = TodoObject(\"foo\")\n    print(<Todo todo={todo} />)\n\n.. code-block:: html\n\n    <li>foo</li>\n\n\nNow we want to have a list of todos. Let's create a ``TodoList`` component that will accept as props a list of ``TodoObject``.\n\nBut what is different than our two other components, that only use html tags in their ``render`` method, it's that now we will encapsulate a component into another. Let's see how.\n\n.. code-block:: python\n\n    class TodoList(Element):\n\n        class PropTypes:\n            todos: Required[List[TodoObject]]\n\n        def render(self, context):\n            return <ul>{[<Todo todo={todo} /> for todo in self.todos]}</ul>\n\n\nYes, it's as simple as that: you use ``<Todo...>`` for the ``Todo`` component as you would use an HTML tag. The only difference is that for html tags, you don't need to import them directly (simple import ``html`` from ``mixt``), and by convention we write them in lower-case. For normal components, you have to import them (you can still do ``from mylib import components`` and ``<components.MyComponent ...>``) and use the exact case.\n\nNotice how we required a list, and passed it into the ``<ul>`` via a list-comprehension in curly-braces.\n\nYou can do things differently if you want.\n\nLike separating the list comprehension from the html:\n\n.. code-block:: python\n\n    def render(self, context):\n        todos = [\n            <Todo todo={todo} />\n            for todo\n            in self.todos\n        ]\n        return <ul>{todos}</ul>\n\nOr in a dedicated method (that would be useful for testing):\n\n.. code-block:: python\n\n    def render_todos(self, todos):\n        return [\n            <Todo todo={todo} />\n            for todo\n            in todos\n        ]\n\n    def render(self, context):\n        return <ul>{self.render_todos(self.todos)}</ul>\n\n\nIt's up to you: at the end it's just python.\n\nLet's see what is rendered by this component:\n\n.. code-block:: python\n\n    todos = [TodoObject(\"foo\"), TodoObject(\"bar\"), TodoObject(\"baz\")]\n    print(<TodoList todos={todos} />)\n\n.. code-block:: html\n\n    <ul><li>foo</li><li>bar</li><li>baz</li></ul>\n\n\nAnd finally we have our ``TodoApp`` component that encapsulate the form and the list:\n\n.. code-block:: python\n\n    class TodoApp(Element):\n\n        class PropTypes:\n            todos: Required[List[TodoObject]]\n            type: DefaultChoices = ['todo', 'thing']\n\n        def render(self, context):\n            return \\\n                <div>\n                    <h1>The \"{self.type}\" list</h1>\n                    <TodoForm type={self.type} />\n                    <TodoList todos={self.todos} />\n                </div>\n\n.. code-block:: python\n\n    todos = [TodoObject(\"foo\"), TodoObject(\"bar\"), TodoObject(\"baz\")]\n    print(<TodoList todos={todos} type=\"thing\" />)\n\n.. code-block:: html\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul><li>foo</li><li>bar</li><li>baz</li></ul></div>\n\n\nLet's pass this HTML to an HTML beautifier:\n\n.. code-block:: html\n\n    <div>\n        <h1>The \"thing\" list</h1>\n        <form method=\"post\" action=\"/thing/add\">\n            <label>New thing: </label>\n            <input type=\"text\" name=\"todo\" />\n            <button type=\"submit\">Add</button>\n        </form>\n        <ul>\n            <li>foo</li>\n            <li>bar</li>\n            <li>baz</li>\n        </ul>\n    </div>\n\nAnd that's it, we have our todo-list app! To use it in a page, just create a component that will render the html base markup and integrate the ``TodoApp`` component in it. You don't even need a component:\n\n.. code-block:: python\n\n    todos = [TodoObject(\"foo\"), TodoObject(\"bar\"), TodoObject(\"baz\")]\n\n    print(\n        <html>\n            <body>\n                <TodoApp todos={todos} type=\"thing\" />\n            </body>\n        </html>\n    )\n\nThe beautified output would be:\n\n.. code-block:: html\n\n    <html>\n\n    <body>\n        <div>\n            <h1>The \"thing\" list</h1>\n            <form method=\"post\" action=\"/thing/add\">\n                <label>New thing: </label>\n                <input type=\"text\" name=\"todo\" />\n                <button type=\"submit\">Add</button>\n            </form>\n            <ul>\n                <li>foo</li>\n                <li>bar</li>\n                <li>baz</li>\n            </ul>\n        </div>\n    </body>\n\n    </html>\n\n\nOverriding a component\n======================\n\nWe have a generic todo-list, but following the available types of todo, we may want to have a \"todo-list\" and a \"thing-list\".\n\nWe already have the todo list because our ``TodoApp`` has a type of ``todo`` by default.\n\nSo let's create a ``ThingApp``.\n\n\nInheritance\n-----------\n\nThe first way of doing this is to inherit from our ``TodoApp``. But by inheriting we cannot remove props from the parent (it's not really true, we'll see this later), so we still have the ``type`` prop by default. But we don't want to accept anything else than \"thing\". So we can redefine the ``type`` prop like this:\n\n.. code-block:: python\n\n    class ThingApp(TodoApp):\n        class PropTypes:\n            type: DefaultChoices = ['thing']\n\nLet's use this component:\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} />)\n\n.. code-block:: html\n\n    <div><h1>The \"thing\" list</h1><form method=\"post\" action=\"/thing/add\"><label>New todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form><ul><li>foo</li></ul></div>\n\nIf we try to pass \"todo\" for the ``type`` props, it won't work:\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} type=\"todo\" />)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropChoiceError:\n    <ThingApp>.type: `todo` is not a valid choice for this prop (must be in ['thing'])\n\nBut still, it's strange to be able to pass a type.\n\n\nParent components\n-----------------\n\nLet's try another way: A parent component. A component that does nothing else that doing things with its children and returning it. What we want here, is a component that will return a ``TodoApp`` with the ``type`` prop forced to \"thing\".\n\nLet's do this\n\n.. code-block:: python\n\n    class ThingApp(Element):\n        class PropTypes:\n            todos: Required[List[TodoObject]]\n\n        def render(self, context):\n            return <TodoApp todos={self.todos} type=\"thing\" />\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} />)\n\n.. code-block:: html\n\n    <div><h1>The \"thing\" list</h1><form method=\"post\" action=\"/thing/add\"><label>New todo: </label><input type=\"text\" name=\"todo\" /><button type=\"submit\">Add</button></form><ul><li>foo</li></ul></div>\n\n\nIt works, and this time, we cannot pass the ``type`` prop:\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} />)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropNameError: <ThingApp>.type: is not an allowed prop\n\n\nPropTypes DRYness\n-----------------\n\nNotice how we had to define the type for the ``todos`` props. Both in ``TodoApp`` and ``TodoThing``.\n\nThere are many ways to handle that.\n\nThe first one would be to ignore the type in ``ThingApp`` because it will be checked in ``TodoApp``. So we'll use the type ``Any``:\n\n\n.. code-block:: python\n\n    from typing import Any\n\n    #...\n\n    class ThingApp(Element):\n        class PropTypes:\n            todos: Any\n\n     #...\n\n\nLet's try with a valid list of todos:\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} />)\n\n.. code-block:: html\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul><li>foo</li></ul></div>\n\n\nBut what if we pass something else?\n\n.. code-block:: python\n\n    print(<ThingApp todos=\"foo, bar\" />)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropValueError:\n    <TodoApp>.todos: `foo, bar` is not a valid value for this prop (type: <class 'str'>, expected: List[TodoObject])\n\nIt works as expected but the error is reported at the ``TodoApp`` level, which is perfectly normal.\n\nAnother way would be to defined the type at a higher level:\n\n.. code-block:: python\n\n    TodoObjects = Required[List[TodoObject]]\n\n    class TodoApp(Element):\n        class PropTypes:\n            todos: TodoObjects\n     # ...\n\n    class ThingApp(Element):\n        class PropTypes:\n            todos: TodoObjects\n     # ...\n\nNow if we pass something else, we have the error reported at the correct level:\n\n.. code-block:: python\n\n    print(<ThingApp todos=\"foo, bar\" />)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropValueError:\n    <TodoThing>.todos: `foo, bar` is not a valid value for this prop (type: <class 'str'>, expected: List[TodoObject])\n\n\nBut if you can't or don't want to do that, you can keep the type defined in ``TodoApp`` et use the ``prop_type`` class method of a component to get the type of a prop:\n\n.. code-block:: python\n\n    class ThingApp(Element):\n        class PropTypes:\n            todos: TodoApp.prop_type(\"todos\")\n     # ...\n\nBut does it really matter to have the error raised for ``ThingApp`` or ``TodoApp``? Because at the end, it's really ``TodoApp`` that have to do the check.\n\nSo this should be a way to do this in a more generic way..\n\n\nFunction\n--------\n\nWe saw earlier that a component can be a single function to render a component. It just have to return a component, an html tag. One difference with class components is that there is not ``PropTypes`` so no validation. But... it's exactly what we need.\n\nWe want our ``ThingApp`` to accept some props (the ``todos`` prop), and return a ``TodoApp`` with a specific ``type`` prop.\n\nSo we could do:\n\n.. code-block:: python\n\n    def ThingApp(todos):\n        return <TodoApp type=\"thing\" todos={todos} />\n\nHere we can see that we cannot pass ``type`` to ``ThingsApp``, it is not a valid argument.\n\nLet's try it:\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} />)\n\n.. code-block:: html\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul><li>foo</li></ul></div>\n\n\nHere we have only one prop to pass so it's easy. But imagine if we have many ones. We can use the ``{**props}`` syntax:\n\n.. code-block:: python\n\n    def ThingApp(**props):\n        return <TodoApp type=\"thing\" {**props} />\n\n\nAnd you can do with even fewer characters (if it counts):\n\n.. code-block:: python\n\n    ThingApp = lambda **props: <TodoApp type=\"thing\" {**props} />\n\n\nThese two fonctions behave exactly the same.\n\nAnd you cannot pass a ``type`` prop because it would be a python error, as it would be passed twice to ``TodoApp``:\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} type=\"thing\" />)\n\n.. code-block:: python\n\n    TypeError: BaseMetaclass object got multiple values for keyword argument 'type'\n\n\n(yes it talks about ``BaseMetaclass`` which is the metaclass that creates our components classes)\n\nAnd any other wrong props would be validated by ``TodoApp``:\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} foo=\"bar\" />)\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropNameError: <TodoApp>.foo: is not an allowed prop\n\nWith this in mind, we could have created a generic fonction that force the type of any component accepting a ``type`` prop:\n\n.. code-block:: python\n\n    Thingify = lambda component, **props: <component type=\"thing\" {**props} />\n\n.. code-block:: python\n\n    print(<Thingify component={TodoApp} todos={[TodoObject(\"foo\")]} />)\n\n.. code-block:: html\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul><li>foo</li></ul></div>\n\n\nThe rendered component is ``TodoApp``, the ``type`` prop is \"thing\" and the other props (here only ``todos``) are correctly passed.\n\n\nHigher-order components\n-----------------------\n\nNow extend this concept to a more generic case: \"higher-order components\". In `React a \"high order component\" <https://reactjs.org/docs/higher-order-components.html>`_, is \"a function that takes a component and returns a new component.\"\n\n\nThe idea is:\n\n.. code-block:: python\n\n    EnhancedComponent = higherOrderComponent(WrappedComponent)\n\nA classic way of doing it is to return a new component class:\n\n.. code-block:: python\n\n    def higherOrderComponent(WrappedComponent):\n\n        class HOC(Element):\n            __display_name__ = f\"higherOrderComponent({WrappedComponent.__display_name__})\"\n\n            class PropTypes(WrappedComponent.PropTypes):\n                pass\n\n            def render(self, context):\n                return <WrappedComponent {**self.props}>{self.childre()}</WrappedComponent>\n\n        return HOC\n\nNotice how we set the ``PropTypes`` class to inherit from the one of the wrapped component, and how we pass all the props to the wrapped component, along with the children. With the returned component will accept the same props, with the same types, as the wrapped one.\n\nAnd also notice the ``__display_name__``. It will be used in exceptions to let you now the component that raised it. Here, without forcing it, it would have been set to ``HOC``, which is not helpful. Instead, we indicate that it is a transformed version of the passed component.\n\nHere it is a function that does nothing useful.\n\nIn our example we could have done this:\n\n.. code-block:: python\n\n    def thingify(WrappedComponent):\n\n        class HOC(Element):\n            __display_name__ = f\"thingify({WrappedComponent.__display_name__})\"\n\n            class PropTypes(WrappedComponent.PropTypes):\n                __exclude__ = {'type'}\n\n            def render(self, context):\n                return <WrappedComponent type=\"thing\" {**self.props}>{self.children()}</WrappedComponent>\n\n        return HOC\n\n\nTwo important things here:\n\n- notice how we use ``__exclude__ = {'type'}`` to remove the ``type`` prop from the ones we inherit from ``WrappedComponent.PropTypes``. So the returned component will expect the exact same props as the wrapped one, except for ``type``.\n- we added ``{self.children()}`` in the rendered wrapped component, because even if we actually know that the component we'll wrap, ``TodoApp``, doesn't take children (it could but it does nothing with them), we cannot say in advance that it will always be the case, and also that this higher-order component won't be used to wrap another component than ``TodoApp``. So it's better to always do this.\n\nAnd now we can create our ``ThingApp``:\n\n.. code-block:: python\n\n    ThingApp = thingify(TodoApp)\n\n\nAnd use it:\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} />)\n\n.. code-block:: html\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul><li>foo</li></ul></div>\n\n\nIf we try to pass the type:\n\n.. code-block:: python\n\n    print(<ThingApp todos={[TodoObject(\"foo\")]} type=\"thing\" />)\n\n\n.. code-block:: python\n\n    mixt.exceptions.InvalidPropNameError: <thingify(TodoApp)>.type: is not an allowed prop\n\n\nSo as planned, we cannot pass the type. And notice how the ``__display_name__`` is used.\n\n\nLet's think about how powerful this is.\n\nLet say we want to keep our ``TodoApp`` take a list of ``TodoObject``. But we want to get them from a \"source\".\n\nWe can even directly write it this new higher-order-component in a generic way:\n\n.. code-block:: python\n\n    def from_data_source(WrappedComponent, prop_name, get_source):\n\n        class HOC(Element):\n            __display_name__ = f\"from_data_source({WrappedComponent.__display_name__})\"\n\n            class PropTypes(WrappedComponent.PropTypes):\n                __exclude__ = {prop_name}\n\n            def render(self, context):\n                props = self.props.copy()\n                props[prop_name] = get_source(props, context)\n                return <WrappedComponent {**props}>{self.children()}</WrappedComponent>\n\n        return HOC\n\n\nThis time, the function ``from_data_source`` takes two arguments in addition to the ``WrappedComponent``:\n\n- ``prop_name``: it's the name of the prop of the wrapped component to fill with some data\n- ``get_source``: it's a function that will be called to get the data\n\nLook how we inherited the ``PropTypes`` from the wrapped component and how we excluded ``prop_name``. So we don't have (and can't) pass the data to our new component.\n\nAnd then in ``render``, we set a prop to pass to ``WrappedComponent`` with the result of a call to ``get_source``.\n\nSo let's write a very simple function (this could be a complicated one with caching, filtering...) that take the props and the context, and returns some data:\n\n.. code-block:: python\n\n    def get_todos(props, context):\n        # here it could be a call to a database\n        return [\n            TodoObject(\"fooooo\"),\n            TodoObject(\"baaaar\"),\n        ]\n\n\nAnd we can compose our component:\n\n.. code-block:: python\n\n    SourcedTodoApp = from_data_source(TodoApp, 'todos', get_todos)\n    ThingApp = thingify(SourcedTodoApp)\n\n\nAnd run it:\n\n.. code-block:: python\n\n    print(<ThingApp />)\n\n.. code-block:: html\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul><li>fooooo</li><li>baaaar</li></ul></div>\n\n\nIt works as expected, and the data is fetched only when the component needs to be rendered.\n\n\nContext\n=======\n\nSo, we have a todo list, that can fetch data from an external source. But we may want the data to be different depending on the user.\n\nWhat we can do, it's at the main level, get our user and passing it on every component to be sure that each component is able to get the current logged in user.\n\nWouldn't it be cumbersome?\n\nSolving this use case is the exact purpose of the ``Context`` concept provided by ``mixt``. It is, of course, `inspired by the concept of context in React <https://reactjs.org/docs/context.html>`_.\n\nAnd as they said:\n\n    Context is designed to share data that can be considered \u201cglobal\u201d for a tree of React components, such as the current authenticated user, theme, or preferred language.\n\nCreating a context is as simple as creating a component, except that it will inherits from ``BaseContext`` and doesn't need a ``render`` method (it will render its children).\n\nAnd it takes a ``PropTypes`` class, that define the types of data the context will accept and pass down the tree.\n\nSo let's create our context that will hold the id of the authenticated user.\n\n.. code-block:: python\n\n    from mixt import BaseContext\n\n    class UserContext(BaseContext):\n        class PropTypes:\n            authenticated_user_id: Required[int]\n\n\nNow, we want to update our ``get_todos`` method to take the ``authenticated_user_id`` into account.\n\nRemember, we passed it the props and the context. The context will be useful here:\n\n.. code-block:: python\n\n    def get_todos(props, context):\n        return {\n            1:[\n                TodoObject(\"1-1\"),\n                TodoObject(\"1-2\"),\n            ],\n            2: [\n                TodoObject(\"2-1\"),\n                TodoObject(\"2-2\"),\n            ]\n        }[context.authenticated_user_id]\n\n\nAnd now we can render our app with the context:\n\n.. code-block:: python\n\n    print(\n        <UserContext authenticated_user_id=1>\n            <ThingApp />\n        </UserContext>\n    )\n\n.. code-block:: python\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul><li>1-1</li><li>1-2</li></ul></div>\n\n\nWe can see the todo entries for the user 1.\n\nLet's try with the user 2:\n\n.. code-block:: python\n\n    print(\n        <UserContext authenticated_user_id=2>\n            <ThingApp />\n        </UserContext>\n    )\n\n.. code-block:: python\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul><li>2-1</li><li>2-2</li></ul></div>\n\nWe can see the todo entries for the user 2.\n\nIn this case of course we could have passed the user id as a prop. But imagine the todo app being deep in the components tree, it's a lot easier to pass it this way.\n\nBut as said in the React documentation:\n\n    Don\u2019t use context just to avoid passing props a few levels down. Stick to cases where the same data needs to be accessed in many components at multiple levels.\n\nWhen there is no context, the ``context`` argument of the ``render`` method is set to ``EmptyContext`` and not to ``None``. So you can directly use the ``has_prop`` method to check if a prop is available via the context.\n\nLet's update the ``get_todos`` functions to return an empty list of todo objects if there is not authenticated user.\n\n.. code-block:: python\n\n    def get_todos(props, context):\n        if not context.has_prop('authenticated_user_id') or not context.authenticated_user_id:\n            return []\n        return {\n            1:[\n                TodoObject(\"1-1\"),\n                TodoObject(\"1-2\"),\n            ],\n            2: [\n                TodoObject(\"2-1\"),\n                TodoObject(\"2-2\"),\n            ]\n        }[context.authenticated_user_id]\n\nLet's try this:\n\n.. code-block:: python\n\n    print(<ThingApp />)\n\n.. code-block:: python\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul></ul></div>\n\n\nAnd it still works with a user in the context:\n\n.. code-block:: python\n\n    print(\n        <UserContext authenticated_user_id=1>\n            <ThingApp />\n        </UserContext>\n    )\n\n.. code-block:: python\n\n    <div><h1>The \"thing\" list</h1><form>...</form><ul><li>1-1</li><li>1-2</li></ul></div>\n\n\n**Important note about contexts**: you can have many contexts! But defining the same prop in many contexts may lead to undefined behaviour.\n\n\nStyle and Javascript\n====================\n\nEverybody loves a beautiful design, and maybe some interaction.\n\nIt is easily doable: we generate HTML and HTML can contains some CSS and JS.\n\nLet's add some interaction first: when adding an item in the ``TodoForm``, let's add it to the list.\n\nFirst we add in our ``TodoForm`` component a ``render_javascript`` method that will host our (bad, we could do better but it's not the point) javascript:\n\n.. code-block:: python\n\n    class TodoForm(Element):\n        # ...\n\n        def render_javascript(self, context):\n            return html.Raw(\"\"\"\n    function on_todo_add_submit(form) {\n        var text = form.todo.value;\n        alert(text);\n    }\n            \"\"\")\n\nTo start we only display the new todo text.\n\nNow update our ``render`` method to return this javascript (note that the use of a ``render_javascript`` method is only to separate concerns, it could have been in the ``render`` method directly.\n\n.. code-block:: python\n\n    class TodoForm(Element):\n        # ...\n\n        def render(self, context):\n            # ...\n\n            return \\\n                <Fragment>\n                    <script>{self.render_javascript(context)}</script>\n                    <form method=\"post\" action={add_url} onsubmit=\"return on_todo_add_submit(this);\">\n                        <label>New {self.type}: </label><itext name=\"todo\" />\n                        <button type=\"submit\">Add</button>\n                    </form>\n                </Fragment>\n\nNotice the ``Fragment`` tag. It's a way to encapsulate many elements to be returned, like in React. It could have been a simple list but with comas at the end:\n\n.. code-block:: python\n\n    return [\n        <script>...</script>,\n        <form>\n            ...\n        </form>\n    ]\n\nNow we want to add an item to the list. It's not the role of the ``TodoForm`` to do this, but to the list. So we'll add some JS in the ``TodoList`` component: a function that take some text and create a new entry.\n\nAs for ``TodoForm``, we add a ``render_javascript`` method with (still bad) javascript:\n\n.. code-block:: python\n\n    class TodoList(Element):\n        # ...\n\n        def render_javascript(self, context):\n\n            todo_placeholder = <Todo todo={TodoObject(text='placeholder')} />\n\n            return html.Raw(\"\"\"\n    TODO_TEMPLATE = \"%s\";\n    function add_todo(text) {\n        var html = TODO_TEMPLATE.replace(\"placeholder\", text);\n        var ul = document.querySelector('#todo-items');\n        ul.innerHTML = html + ul.innerHTML;\n    }\n            \"\"\" % (todo_placeholder))\n\nAnd we update our ``render`` method to add the ``<script>`` tag and an ``id`` to the ``ul`` tag, used in the javascript:\n\n.. code-block:: python\n\n    class TodoList(Element):\n        # ...\n\n        def render(self, context):\n            return \\\n                <Fragment>\n                    <script>{self.render_javascript(context)}</script>\n                    <ul id=\"todo-items\">{[<Todo todo={todo} /> for todo in self.todos]}</ul>\n                </Fragment>\n\nAnd now we can update the ``render_javascript`` method of the ``TodoForm`` component to use our new ``add_toto`` javascript function:\n\n\n.. code-block:: python\n\n    class TodoForm(Element):\n        # ...\n\n        def render_javascript(self, context):\n            return html.Raw(\"\"\"\n    function on_todo_add_submit(form) {\n        var text = form.todo.value;\n        add_todo(text);\n    }\n            \"\"\")\n\nAnd that's all. Nothing special, in fact.\n\nBut let's take a look at the output of ou ``TodoApp``:\n\n.. code-block:: python\n\n    print(\n        <UserContext authenticated_user_id=1>\n            <ThingApp />\n        </User>\n    )\n\nThe beautified output is:\n\n.. code-block:: html\n\n    <div>\n        <h1>The \"thing\" list</h1>\n        <script>\n            function on_todo_add_submit(form) {\n                var text = form.todo.value;\n                add_todo(text);\n            }\n        </script>\n        <form method=\"post\" action=\"/thing/add\" onsubmit=\"return on_todo_add_submit(this);\">\n            <label>New thing: </label>\n            <input type=\"text\" name=\"todo\" />\n            <button type=\"submit\">Add</button>\n        </form>\n        <script>\n            TODO_TEMPLATE = \"<li>placeholder</li>\";\n\n            function add_todo(text) {\n                var html = TODO_TEMPLATE.replace(\"placeholder\", text);\n                var ul = document.querySelector('#todo-items');\n                ul.innerHTML = html + ul.innerHTML;\n            }\n        </script>\n        <ul id=\"todo-items\">\n            <li>1-1</li>\n            <li>1-2</li>\n        </ul>\n    </div>\n\nSo we have many ``script`` tag. It could be great to have only one.\n\nCollectors\n----------\n\n``mixt`` comes with a way to \"collect\" parts of what is rendered to put them somewhere else. We have at our disposal two simple collectors, to be used as components: ``JSCollector`` and ``CSSCollector``.\n\nThese components collect parts of their children tree.\n\nCollector.Collect\n^^^^^^^^^^^^^^^^^\n\nThe first way is by using the collector ``Collect`` tag.\n\nFirst let's change our main call:\n\n.. code-block:: python\n\n    from mixt import JSCollector\n\n    print(\n        <JSCollector render_position=\"after\">\n            <UserContext authenticated_user_id=1>\n                <ThingApp />\n            </User>\n        </JSCollector>\n    )\n\nThis will collect the content of all the ``JSCollector.Collect`` tag.\n\nLet's update our ``TodoForm`` and replace our ``script`` tag by a ``JSCollector.Collect`` tag:\n\n.. code-block:: python\n\n    class TodoForm(Element):\n        # ...\n\n        def render(self, context):\n\n            if callable(self.add_url):\n                add_url = self.add_url(self.type)\n            else:\n                add_url = self.add_url\n\n            return \\\n                    <JSCollector.Collect>{self.render_javascript(context)}</JSCollector.Collect>\n                    <form method=\"post\" action={add_url} onsubmit=\"return on_todo_add_submit(this);\">\n                        <label>New {self.type}: </label><itext name=\"todo\" />\n                        <button type=\"submit\">Add</button>\n                    </form>\n                </Fragment>\n\n\nWe can do the same with the ``TodoList``:\n\n.. code-block:: python\n\n    class TodoList(Element):\n        # ...\n\n        def render(self, context):\n            return \\\n                <Fragment>\n                    <JSCollector.Collect>{self.render_javascript(context)}</JSCollector.Collect>\n                    <ul id=\"todo-items\">{[<Todo todo={todo} /> for todo in self.todos]}</ul>\n                </Fragment>\n\n\nNow let's run our updated code:\n\n.. code-block:: python\n\n    print(\n        <JSCollector render_position=\"after\">\n            <UserContext authenticated_user_id=1>\n                <ThingApp />\n            </User>\n        </JSCollector>\n    )\n\nThe beautified output is:\n\n.. code-block:: html\n\n    <div>\n        <h1>The \"thing\" list</h1>\n        <form method=\"post\" action=\"/thing/add\" onsubmit=\"return on_todo_add_submit(this);\">\n            <label>New thing: </label>\n            <input type=\"text\" name=\"todo\" />\n            <button type=\"submit\">Add</button>\n        </form>\n        <ul id=\"todo-items\">\n            <li>1-1</li>\n            <li>1-2</li>\n        </ul>\n    </div>\n    <script type=\"text/javascript\">\n        function on_todo_add_submit(form) {\n            var text = form.todo.value;\n            add_todo(text);\n        }\n\n        TODO_TEMPLATE = \"<li>placeholder</li>\";\n\n        function add_todo(text) {\n            var html = TODO_TEMPLATE.replace(\"placeholder\", text);\n            var ul = document.querySelector('#todo-items');\n            ul.innerHTML = html + ul.innerHTML;\n        }\n    </script>\n\nAs you can see, all the scripts are in a single ``script`` tag, at the end. More precisely, at the end of where the ``JSCollector`` tag was, because we used ``render_position=\"after\"``. Another possibility is ``render_position=\"before\"`` to put this where the ``JSCollector`` tag started.\n\nAll of this work exactly the same way for the ``CSSCollector`` tag, where content is put in a ``<style type=\"text/css>`` tag.\n\nrender_[js|css] methods\n^^^^^^^^^^^^^^^^^^^^^^^\n\nAs using JS/CSS is quite common in the HTML world, we added some sugar to make all of this even easier to do.\n\nIf you have a ``render_js`` method, the ``JSCollector`` will automatically collect the result of this method. Same for ``CSSSelector`` and the ``render_css`` method.\n\nWith this, no need for a ``JSCollector.Collect`` tag.\n\nTo make this work in our example, in ``TodoForm`` and ``TodoList``:\n\n- remove the ``JSCollector.Collect`` tags\n- remove the now unneeded ``Fragment`` tags\n- rename the ``render_javascript`` methods to ``render_js``.\n- remove the call to ``html.Raw`` in ``render_js`` as it's not needed when the collector calls ``render_js`` itself: if the output is a string, it is considered a \"raw\" one\n\nThis way we have exactly the same result.\n\nrender_[js|css]_global methods\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nIt works now because we only have one instance of a child with a ``render_js`` method.\n\nBut if we have many children, this method will be called for each child. If fact, it should only contains code that is very specific to this instance.\n\nTo serve js/css only once for a Component class, we have to use ``render_js_global`` or ``render_css_global`` (expected to be ``classmethod``)\n\nIt will be collected the first time, and only the first time, an instance is found, before collecting the ``render_js`` method.\n\nSo here, we can change our ``render_js`` to ``render_js_global``, decorate them with ``@classmethod`` and it will still work the same.\n\nreferences\n^^^^^^^^^^\n\nWe now are able to regroup javascript or style. But what if we want to put it elsewhere, like in the ``head`` tag or at the end of the ``body`` tag?\n\nIt's possible with references, aka \"refs\". It's the same context as in React, without the DOM part of course.\n\nYou create a ref, pass it to a component, and you can use it anywhere.\n\nLet's update our main code to do this.\n\nFirst we create a ref.\n\n.. code-block:: python\n\n    from mixt import Ref\n\n    js_ref = Ref()\n\n\nThis will create a new object that will hold a reference to a component. In a component, you don't need to import ``Ref`` and can use ``js_ref = self.add_ref()``, but we are not in a component here.\n\n\nTo save a ref, we simply pass it to the ``ref`` prop:\n\n.. code-block:: python\n\n    <JSCollector ref={js_ref} >...</JSCollector>\n\n\nNotice that we removed the ``render_position`` prop, because now we don't want the JS to be put before or after the tag, but elsewhere.\n\nTo access the component referenced by a ref, use the ``current`` attribute:\n\n.. code-block:: python\n\n    js_collector = js_ref.current\n\nOf course this can be done only AFTER the rendering.\n\nHow can we use this to add a ``script`` tag in our ``head``.\n\nFirst update our html to include the classic ``html``, ``head`` and ``body`` tags:\n\n.. code-block:: python\n\n    return str(\n        <html>\n            <head>\n            </head>\n            <body>\n                <JSCollector ref={js_ref} >\n                    <UserContext authenticated_user_id=1>\n                        <ThingApp />\n                    </UserContext>\n                </JSCollector>\n            </body>\n        </html>\n    )\n\nAt this point we don't have any ``script`` tag in the output:\n\n.. code-block:: html\n\n    <html>\n\n    <head></head>\n\n    <body>\n        <div>\n            <h1>The \"thing\" list</h1>\n            <form method=\"post\" action=\"/thing/add\" onsubmit=\"return on_todo_add_submit(this);\">\n                <label>New thing: </label>\n                <input type=\"text\" name=\"todo\" />\n                <button type=\"submit\">Add</button>\n            </form>\n            <ul id=\"todo-items\">\n                <li>1-1</li>\n                <li>1-2</li>\n            </ul>\n        </div>\n    </body>\n\n    </html>\n\n\nFirst thing to know: a collector is able to render all the things it collected by calliing its ``render_collected`` method.\n\nAnd remembering that it already includes the ``script`` tag, we may want to do this:\n\n.. code-block:: python\n\n    # ...\n    <head>\n        {js_ref.current.render_collected()}\n    </head>\n    # ...\n\nbut this doesn't work:\n\n.. code-block:: python\n\n    AttributeError: 'NoneType' object has no attribute 'render_collected'\n\n\nIt's because we try to access the current value at render time. It must be done after.\n\nFor this, we can use a feature of ``mixt``: if something added to the tree is a callable, it will be called after the rendering, when converting to string.\n\nSo we can use for example a lambda:\n\n.. code-block:: python\n\n    # ...\n    <head>\n        {lambda: js_ref.current.render_collected()}\n    </head>\n    # ...\n\nAnd now it works:\n\n.. code-block:: html\n\n    <html>\n\n    <head>\n        <script type=\"text/javascript\">\n            function on_todo_add_submit(form) {\n                var text = form.todo.value;\n                add_todo(text);\n            }\n\n            TODO_TEMPLATE = \"<li>placeholder</li>\";\n\n            function add_todo(text) {\n                var html = TODO_TEMPLATE.replace(\"placeholder\", text);\n                var ul = document.querySelector('#todo-items');\n                ul.innerHTML = html + ul.innerHTML;\n            }\n        </script>\n    </head>\n\n    <body>\n        <div>\n            <h1>The \"thing\" list</h1>\n            <form method=\"post\" action=\"/thing/add\" onsubmit=\"return on_todo_add_submit(this);\">\n                <label>New thing: </label>\n                <input type=\"text\" name=\"todo\" />\n                <button type=\"submit\">Add</button>\n            </form>\n            <ul id=\"todo-items\">\n                <li>1-1</li>\n                <li>1-2</li>\n            </ul>\n        </div>\n    </body>\n\n    </html>\n\n\nUser guide conclusion\n=====================\n\nHurray we made it! All the main features of ``mixt`` explained. You can now use ``mixt`` in your ovn projects.\n\n***\nAPI\n***\n\nAs a next step, you may want to read `the API documentation <https://twidi.github.io/mixt/api.html>`_.\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/twidi/mixt", "keywords": "python,html,components,templating,web-components,react-style", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "mixt", "package_url": "https://pypi.org/project/mixt/", "platform": "", "project_url": "https://pypi.org/project/mixt/", "project_urls": {"Homepage": "https://github.com/twidi/mixt"}, "release_url": "https://pypi.org/project/mixt/1.1.3/", "requires_dist": ["enforce", "wrapt", "black; extra == 'dev'", "factory-boy; extra == 'dev'", "flake8 (==3.5); extra == 'dev'", "flake8-bugbear; extra == 'dev'", "flake8-comprehensions; extra == 'dev'", "flake8-formatter-abspath; extra == 'dev'", "flake8-imports; extra == 'dev'", "flake8-docstrings; extra == 'dev'", "flake8-pep3101; extra == 'dev'", "flake8-per-file-ignores; extra == 'dev'", "ipython; extra == 'dev'", "isort; extra == 'dev'", "mypy; extra == 'dev'", "patchy; extra == 'dev'", "pycodestyle (<2.4); extra == 'dev'", "pydocstyle; extra == 'dev'", "pylint (<2); extra == 'dev'", "pytest; extra == 'dev'", "twine; extra == 'dev'", "wheel; extra == 'dev'", "bottle; extra == 'doc'", "numpydoc; extra == 'doc'", "pygments; extra == 'doc'", "python-slugify; extra == 'doc'", "factory-boy; extra == 'test'", "pytest; extra == 'test'"], "requires_python": "", "summary": "Write html components directly in python and you have a beautiful but controversial MIXTure", "version": "1.1.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>Write html components directly in python and you have a beautiful but controversial MIXTure.</p>\n<p>Yes, <strong>controversial</strong>.</p>\n<p><strong>If you don\u2019t like it, ignore it</strong> (but you can use this without the html-in-python part, see below ;))</p>\n<p><em>Based</em> on <a href=\"https://github.com/gvanrossum/pyxl3/\" rel=\"nofollow\">pyxl</a>. Python 3.6+ only, and use typing for data validation.</p>\n<p>Once you have your html, you can do whatever you want with it. Think of it as a replacement for your classic template engine.</p>\n<p><strong>Source code</strong>: <a href=\"https://github.com/twidi/mixt/\" rel=\"nofollow\">https://github.com/twidi/mixt/</a></p>\n<p><strong>Documentation</strong>: <a href=\"https://twidi.github.io/mixt/\" rel=\"nofollow\">https://twidi.github.io/mixt/</a></p>\n<p><strong>PyPI</strong>: <a href=\"https://pypi.org/project/mixt/\" rel=\"nofollow\">https://pypi.org/project/mixt/</a></p>\n<p><strong>CI</strong> (CircleCi): <a href=\"https://circleci.com/gh/twidi/workflows/mixt/\" rel=\"nofollow\">https://circleci.com/gh/twidi/workflows/mixt/</a></p>\n<div id=\"basic-usage\">\n<h2>Basic usage</h2>\n<p>Let\u2019s create a file <tt>example.py</tt></p>\n<pre><span class=\"c1\"># coding: mixt</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">html</span><span class=\"p\">,</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">Required</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Hello</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">name</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">div</span><span class=\"o\">&gt;</span><span class=\"n\">Hello</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">}</span><span class=\"o\">&lt;/</span><span class=\"n\">div</span><span class=\"o\">&gt;</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">Hello</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"World\"</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<p>And execute it:</p>\n<pre>$ python example.py\n&lt;div&gt;Hello, World&lt;/div&gt;\n</pre>\n<p>If you don\u2019t like to write html in python, you can still use it:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">html</span><span class=\"p\">,</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">Required</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Hello</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">name</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Div</span><span class=\"p\">()(</span><span class=\"s2\">\"Hello, \"</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">)</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">Hello</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"World\"</span><span class=\"p\">))</span>\n</pre>\n</div>\n<div id=\"features\">\n<h2>Features</h2>\n<p>Yes it is inspired by React (in fact, mainly JSX) and we borrow some of the concept:</p>\n<ul>\n<li>props and PropTypes with validation</li>\n<li>dev-mode to validate props in dev but not in production to speed things up (your tests should have tested that everything is ok)</li>\n<li>context</li>\n<li>class components or simple function components</li>\n<li>high order components</li>\n</ul>\n<p>And we added:</p>\n<ul>\n<li>css/js collectors</li>\n</ul>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p>Run these two commands. The second one will tell python how to understand files with html inside.</p>\n<pre>pip install mixt\nmixt-post-install\n</pre>\n<p>To check that everything is ready, run:</p>\n<pre>python -m mixt.examples.simple\n</pre>\n<p>You should have this output:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span> <span class=\"na\">title</span><span class=\"o\">=</span><span class=\"s\">\"Greeting\"</span><span class=\"p\">&gt;</span>Hello, World<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>If you don\u2019t want to use the html-in-python stuff, don\u2019t run <tt><span class=\"pre\">mixt-post-install</span></tt>. And then test with (to have the same output):</p>\n<pre>python -m mixt.examples.simple_pure_python\n</pre>\n</div>\n<div id=\"contribute\">\n<h2>Contribute</h2>\n<p>Clone the git project then:</p>\n<pre>make dev\n</pre>\n<p>To check that everything is ready, run:</p>\n<pre>python -m mixt.examples.simple\n</pre>\n<p>You should have this output:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span> <span class=\"na\">title</span><span class=\"o\">=</span><span class=\"s\">\"Greeting\"</span><span class=\"p\">&gt;</span>Hello, World<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>After having done some code:</p>\n<pre>make tests\n</pre>\n<pre>make lint\n</pre>\n<p>If you touch things in the <tt>codec</tt> directory, you\u2019ll have to run <tt>make dev</tt> (or at least <tt>make <span class=\"pre\">full-clean</span></tt>) to purge the <tt>pyc</tt> python files.</p>\n<p>Note that our CI will check that every commit passes the <tt>make lint</tt>, <tt>make tests</tt> and <tt>make <span class=\"pre\">check-doc</span></tt>. So don\u2019t forget to run these for each commit.</p>\n<p>One way to do it before pushing is:</p>\n<pre>git rebase develop --exec <span class=\"s1\">'git log -n 1; make checks'</span>\n</pre>\n</div>\n<div id=\"user-guide\">\n<h2>User Guide</h2>\n<p>Note: You can find the <em>final</em> code of this user guide in <tt>src/mixt/examples/user_guide</tt> (you\u2019ll find <tt>mixt.py</tt> and <tt>pure_python.py</tt>).</p>\n<p>Run it with:</p>\n<pre>python -m mixt.examples.user_guide\n</pre>\n<div id=\"start\">\n<h3>Start</h3>\n<p>Let\u2019s create a\u2026 todo list, yeah!</p>\n<p>But before, remember. This is not React, it\u2019s not on the browser and there is no Javascript involved here. We only talk about rendering some HTML.</p>\n<p>But you can do what you want with it. Add javascript handlers, simple forms\u2026</p>\n<p>Talking about forms\u2026</p>\n<p>In a todo list, we want to be able to add a todo. It\u2019s a simple text input.</p>\n<p>So let\u2019s create our first component, the <tt>TodoForm</tt>. We want a form with an input text and a button.</p>\n<p>A component is a subclass of the <tt>Element</tt> class, with a <tt>render</tt> method you have to write.</p>\n<pre><span class=\"c1\"># coding: mixt</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">html</span>  <span class=\"c1\"># html is mandatory to resolve html tags</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>  <span class=\"c1\"># Ignore the ``context`` argument for now.</span>\n        <span class=\"k\">return</span> \\  <span class=\"c1\"># The ``\\`` is only for a better indentation below</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">\"???\"</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"n\">New</span> <span class=\"n\">Todo</span><span class=\"p\">:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">button</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"submit\"</span><span class=\"o\">&gt;</span><span class=\"n\">Add</span><span class=\"o\">&lt;/</span><span class=\"n\">button</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Note that this could have been written as a simple function:</p>\n<pre><span class=\"c1\"># coding: mixt</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">html</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">TodoForm</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> \\\n        <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">\"???\"</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"n\">New</span> <span class=\"n\">Todo</span><span class=\"p\">:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">button</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"submit\"</span><span class=\"o\">&gt;</span><span class=\"n\">Add</span><span class=\"o\">&lt;/</span><span class=\"n\">button</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n</pre>\n<p>When print the component, these two will give the same result:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"???\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New Todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n</div>\n<div id=\"spacing\">\n<h3>Spacing</h3>\n<p>Notice how it is formatted: no space between tags. In fact, it\u2019s <a href=\"https://reactjs.org/docs/jsx-in-depth.html#string-literals-1\" rel=\"nofollow\">like in JSX</a>:</p>\n<blockquote>\nJSX removes whitespace at the beginning and ending of a line. It also removes blank lines. New lines adjacent to tags are removed; new lines that occur in the middle of string literals are condensed into a single space</blockquote>\n<p>To add a space, or a newline, you can pass some python. Let\u2019s, as an example, add a newline before the label:</p>\n<pre><span class=\"c1\">#...</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">\"???\"</span><span class=\"o\">&gt;</span>\n                <span class=\"p\">{</span><span class=\"s1\">'</span><span class=\"se\">\\n</span><span class=\"s1\">'</span><span class=\"p\">}</span><span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"n\">New</span> <span class=\"n\">Todo</span><span class=\"p\">:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n<span class=\"c1\">#...</span>\n</pre>\n<p>Now we have this output:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todo/add\"</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New Todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n</div>\n<div id=\"props\">\n<h3>Props</h3>\n<p>Now let\u2019s go further.</p>\n<p>Notice the <tt>action</tt> attribute of the form. We need to pass something. But hard-coding it does not sound right. Wwe need to pass it to the component.</p>\n<p><tt>Mixt</tt> has, like <tt>React</tt>, the concept of properties, aka \u201cprops\u201d.</p>\n<div id=\"proptypes-class\">\n<h4>PropTypes class</h4>\n<p>In <tt>Mixt</tt>, we define them with a type, in a class inside our component, named <tt>PropTypes</tt>:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"nb\">str</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> \\\n            <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span><span class=\"p\">}</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"n\">New</span> <span class=\"n\">Todo</span><span class=\"p\">:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">button</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"submit\"</span><span class=\"o\">&gt;</span><span class=\"n\">Add</span><span class=\"o\">&lt;/</span><span class=\"n\">button</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Here we defined a prop named <tt>add_url</tt> which must be a string (<tt>str</tt>). This uses the <a href=\"https://docs.python.org/3.6/library/typing.html\" rel=\"nofollow\">python typing syntax</a>.</p>\n<p>And notice how we changed the <tt>action</tt> attribute of the <tt>form</tt> tag. It\u2019s now <tt>{self.add_url}</tt> instead of <tt><span class=\"pre\">\"???\"</span></tt>.</p>\n<p>When attributes are passed between curly braces, they are interpreted as pure python at run-time. In fact, as the <tt>mixt</tt> parser will convert the whole file to pure python before letting the python interpreter running it, it will stay the same, only the html around will be converted. So there is no penalty to do this.</p>\n</div>\n<div id=\"props-and-children\">\n<h4>Props and children</h4>\n<p>Look how this would look like if our component was written in pure python:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">html</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"nb\">str</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Form</span><span class=\"p\">(</span><span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s1\">'post'</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span> <span class=\"p\">)(</span>\n            <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Label</span><span class=\"p\">()(</span>\n                <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Raw</span><span class=\"p\">(</span><span class=\"s2\">\"New Todo: \"</span><span class=\"p\">)</span>\n            <span class=\"p\">),</span>\n            <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">InputText</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'todo'</span><span class=\"p\">),</span>\n            <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Button</span><span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s1\">'submit'</span><span class=\"p\">)(</span>\n                <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Raw</span><span class=\"p\">(</span><span class=\"s2\">\"Add\"</span><span class=\"p\">)</span>  <span class=\"c1\"># or html.Rawhtml(text=\"Add\")</span>\n            <span class=\"p\">),</span>\n        <span class=\"p\">)</span>\n</pre>\n<p>Notice how the props are passed to a component as named arguments and how <tt>action</tt> is passed: <tt>action=self.add_url</tt>.</p>\n<p>This pure-python component also shows you how it works: props are passed as named argument to the component class, then this component is called, passing children components as positional arguments to the call:</p>\n<pre><span class=\"n\">ComponentClass</span><span class=\"p\">(</span><span class=\"n\">prop1</span><span class=\"o\">=</span><span class=\"s2\">\"val1\"</span><span class=\"p\">,</span> <span class=\"n\">prop2</span><span class=\"o\">=</span><span class=\"s2\">\"val2\"</span><span class=\"p\">)(</span>\n    <span class=\"n\">Children1</span><span class=\"p\">(),</span>\n    <span class=\"n\">Children2</span><span class=\"p\">(),</span>\n<span class=\"p\">)</span>\n</pre>\n<p>What are children? Children are tags inside other tags.</p>\n<p>In <tt>&lt;div <span class=\"pre\">id=\"divid\"&gt;&lt;span</span> <span class=\"pre\">/&gt;&lt;p&gt;foo&lt;/p&gt;&lt;/div&gt;</span></tt>, we have:</p>\n<ul>\n<li>a <tt>html.Div</tt> component, with a prop <tt>id</tt> and two children:<ul>\n<li>a <tt>html.Span</tt> component, without children</li>\n<li>a <tt>html.P</tt> component with one child:<ul>\n<li>a <tt>html.RawHtml</tt> component with the text \u201cfoo\u201d</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Note that you can play with props and children. First the version in pure-python to show how it works:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"n\">props</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"prop1\"</span><span class=\"p\">:</span> <span class=\"s2\">\"val1\"</span><span class=\"p\">,</span> <span class=\"s2\">\"prop2\"</span><span class=\"p\">:</span> <span class=\"s2\">\"val2\"</span><span class=\"p\">}</span>\n    <span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">Children1</span><span class=\"p\">(),</span> <span class=\"n\">Children2</span><span class=\"p\">()]</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">ComponentClass</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">props</span><span class=\"p\">)(</span><span class=\"o\">*</span><span class=\"n\">children</span><span class=\"p\">)</span>\n    <span class=\"c1\"># You can pass a list of children to to the call, so this would produce the same result:</span>\n    <span class=\"c1\"># ComponentClass(**props)(children)</span>\n</pre>\n<p>Then the <tt>mixt</tt> version:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"n\">props</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"prop1\"</span><span class=\"p\">:</span> <span class=\"s2\">\"val1\"</span><span class=\"p\">,</span> <span class=\"s2\">\"prop2\"</span><span class=\"p\">:</span> <span class=\"s2\">\"val2\"</span><span class=\"p\">}</span>\n    <span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"o\">&lt;</span><span class=\"n\">Children1</span><span class=\"o\">/&gt;</span><span class=\"p\">,</span> <span class=\"o\">&lt;</span><span class=\"n\">Children2</span><span class=\"o\">/&gt;</span><span class=\"p\">]</span>\n\n    <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">ComponentClass</span> <span class=\"p\">{</span><span class=\"o\">**</span><span class=\"n\">props</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"o\">*</span><span class=\"n\">children</span><span class=\"p\">}</span><span class=\"o\">&lt;/</span><span class=\"n\">ComponentClass</span><span class=\"o\">&gt;</span>\n    <span class=\"c1\"># or, the same, passing the children as a list:</span>\n    <span class=\"c1\"># return &lt;ComponentClass {**props}&gt;{children}&lt;/ComponentClass&gt;</span>\n</pre>\n</div>\n<div id=\"passing-props\">\n<h4>Passing props</h4>\n<p>Now let\u2019s go back to our props <tt>add_url</tt>.</p>\n<p>How to pass it to the component?</p>\n<p>The exact same way we passed attributes to HTML tags: they are in fact props defined in the HTML compoments (defined in <tt>mixt.html</tt>). We support every HTML tags that, at the time of the writing, are valid (not deprecated) in HTML5, with their attributes (excluding the deprecated ones).</p>\n<p>So let\u2019s do this:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todo/add\"</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todo/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New Todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>OK, we have our prop present in the rendered HTML.</p>\n</div>\n<div id=\"validation\">\n<h4>Validation</h4>\n<p>What if we don\u2019t pass a string? We said in <tt>PropTypes</tt> that we wanted a string\u2026</p>\n<div id=\"numbers\">\n<h5>Numbers</h5>\n<p>Let\u2019s try it:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"1\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New Todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>It works! But\u2026 it\u2019s not a string!! In fact, there is a special case for numbers, you can pass them as numbers instead of strings and they are converted if needed\u2026</p>\n</div>\n<div id=\"booleans-and-other-special-cases\">\n<h5>Booleans and other special cases</h5>\n<p>So let\u2019s try something else.</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropValueError</span><span class=\"p\">:</span>\n<span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"kc\">True</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">value</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"k\">class</span> <span class=\"err\">'</span><span class=\"nc\">bool</span><span class=\"s1\">'&gt;, expected: &lt;class '</span><span class=\"nb\">str</span><span class=\"s1\">'&gt;)</span>\n</pre>\n<p>And it\u2019s the same if we pass <tt>True</tt> in python</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"kc\">True</span><span class=\"p\">}</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropValueError</span><span class=\"p\">:</span>\n<span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"kc\">True</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">value</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"k\">class</span> <span class=\"err\">'</span><span class=\"nc\">bool</span><span class=\"s1\">'&gt;, expected: &lt;class '</span><span class=\"nb\">str</span><span class=\"s1\">'&gt;)</span>\n</pre>\n<p>Ok, let\u2019s trick the system and pass <tt>\"True\"</tt>, as a string.</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"True\"</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropValueError</span><span class=\"p\">:</span>\n<span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"kc\">True</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">value</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"k\">class</span> <span class=\"err\">'</span><span class=\"nc\">bool</span><span class=\"s1\">'&gt;, expected: &lt;class '</span><span class=\"nb\">str</span><span class=\"s1\">'&gt;)</span>\n</pre>\n<p>Still the same, but here we passed a string! Yes but there are 4 values that are always evaluated to what they seems to be:</p>\n<ul>\n<li>True</li>\n<li>False</li>\n<li>None</li>\n<li>NotProvided (a special value meaning \u201cnot set\u201d which is different that <tt>None</tt>)</li>\n</ul>\n<p>The only way to pass one of these values as a string, is to pass them via python, as a string:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"True\"</span><span class=\"p\">}</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"True\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New Todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>Except these 4 values, and numbers, every value that is passed to an attribute is considered a string. Even if there is no quotes, like in html in HTML5, where quotes are not mandatory for strings without some characters (no spaces, no <tt>/</tt>\u2026).</p>\n<p>To pass something else, you must surround the value in curly braces (and in this cases there is no need for quotes around the curly braces.</p>\n<p>Ok, now we are sure that we only accept string\u2026. but what if I pass nothing? And\u2026 what is \u201cnothing\u201d?</p>\n<p>Let\u2019s start with an empty string in python:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">\"\"</span><span class=\"p\">}</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New Todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>Ok it works, we wanted a string, we have a string.</p>\n<p>Now let\u2019s pass this empty string directly:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"\"</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New Todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>It still works, because it\u2019s still a string. Let\u2019s remove the quotes, to see.</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">GeneralParserError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">mixt</span> <span class=\"n\">parser</span><span class=\"o\">&gt;</span> <span class=\"n\">Unclosed</span> <span class=\"n\">Tags</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Hum yeah, this is not valid HTML. So let\u2019s remove the <tt>=</tt>:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropValueError</span><span class=\"p\">:</span>\n<span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"kc\">True</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">value</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"k\">class</span> <span class=\"err\">'</span><span class=\"nc\">bool</span><span class=\"s1\">'&gt;, expected: &lt;class '</span><span class=\"nb\">str</span><span class=\"s1\">'&gt;)</span>\n</pre>\n<p>WHAT? Yes, think about HTML5 attributes like <tt>required</tt>, <tt>checked</tt>\u2026 They only need to be present as an attribute, without value, to be considered <tt>True</tt>. So when an attribute doesn\u2019t have any value, it\u2019s a boolean, and it\u2019s <tt>True</tt>.</p>\n<p>In addition to not pass a value, those two other ways are valid in HTML5 for a boolean to by <tt>True</tt>:</p>\n<ul>\n<li>pass an empty string: <tt><span class=\"pre\">required=\"\"</span></tt></li>\n<li>pass the name of the attribute: <tt><span class=\"pre\">required=\"required\"</span></tt></li>\n</ul>\n<p>For your convenience, we added another way:</p>\n<ul>\n<li>pass <tt>True</tt> (case does not matter), as python or as a string: <tt>required=True</tt>, <tt><span class=\"pre\">required={True}</span></tt>, <tt><span class=\"pre\">required=\"true\"</span></tt></li>\n</ul>\n<p>And its counterpart, to pass <tt>False</tt>:</p>\n<ul>\n<li>pass <tt>False</tt> (case does not matter), as python or as a string: <tt>required=False</tt>, <tt><span class=\"pre\">required={False}</span></tt>, <tt><span class=\"pre\">required=\"false\"</span></tt></li>\n</ul>\n</div>\n</div>\n<div id=\"required-props\">\n<h4>Required props</h4>\n<p>Ok for the boolean attributes. It\u2019s not our case. The last thing we can do is to not set the attribute at all:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n<span class=\"c1\"># this is the same: ``print(&lt;TodoForm add_url=NotProvided /&gt;)```</span>\n<span class=\"c1\"># (``NotProvided`` must be imported from ``mixt``)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">UnsetPropError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">prop</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"nb\">set</span>\n</pre>\n<p>It\u2019s understandable: we try to access a prop that is not set, of course we cannot use it.</p>\n<p>But what if we don\u2019t access it? If we don\u2019t print the component, it won\u2019t be rendered:</p>\n<pre><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">/&gt;</span>\n</pre>\n<pre><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">at</span> <span class=\"mh\">0x7fbd18ea5630</span><span class=\"o\">&gt;</span>\n</pre>\n<p>So we can create an instance but it will fail at render time. But there is a way to prevent that.</p>\n<p>By default, all properties are optional. And you don\u2019t have to use the <tt>Optional</tt> type from the python <tt>typing</tt> module for that, it would be cumbersome to do it for each prop.</p>\n<p>Instead, <tt>mixt</tt> provides a type named <tt>Required</tt> that you use the same way than <tt>Optionnal</tt>.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">Required</span><span class=\"p\">,</span> <span class=\"n\">html</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"c1\"># ...</span>\n</pre>\n<p>So we just said we wanted a string, and that it is required.</p>\n<p>Let\u2019s try again to create it without the prop:</p>\n<pre><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">/&gt;</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">RequiredPropError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"ow\">is</span> <span class=\"n\">a</span> <span class=\"n\">required</span> <span class=\"n\">prop</span> <span class=\"n\">but</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"nb\">set</span>\n</pre>\n<p>Now we have the exception raised earlier in our program.</p>\n</div>\n<div id=\"default-props\">\n<h4>Default props</h4>\n<p>To see other possibilities in props, let\u2019s add a new one to change the text label. But we don\u2019t want to make it required, and instead have a default value.</p>\n<p>For this, it\u2019s as easy as adding a value to the prop in the <tt>PropTypes</tt> class:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span>\n        <span class=\"n\">label</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s1\">'New Todo'</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> \\\n            <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span><span class=\"p\">}</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">label</span><span class=\"p\">}:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">button</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"submit\"</span><span class=\"o\">&gt;</span><span class=\"n\">Add</span><span class=\"o\">&lt;/</span><span class=\"n\">button</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Now let\u2019s try it without passing the prop:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todo/add\"</span><span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New Todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>And if we pass one:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todo/add\"</span> <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"s2\">\"Thing to do\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todo/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>Thing to do: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>It works as expected.</p>\n<p>Note that you cannot give a default value while having the prop <tt>Required</tt>. It makes no sense, so it\u2019s checked as soon as possible, while the <tt>class</tt> is constructed:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span>\n        <span class=\"n\">label</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">'New Todo'</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">PropTypeRequiredError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">label</span><span class=\"p\">:</span> <span class=\"n\">a</span> <span class=\"n\">prop</span> <span class=\"k\">with</span> <span class=\"n\">a</span> <span class=\"n\">default</span> <span class=\"n\">value</span> <span class=\"n\">cannot</span> <span class=\"n\">be</span> <span class=\"n\">required</span>\n</pre>\n<p>And of course the default value must match the type!</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span>\n        <span class=\"n\">label</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">'label'</span><span class=\"p\">:</span> <span class=\"s1\">'foo'</span><span class=\"p\">}</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropValueError</span><span class=\"p\">:</span>\n<span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">label</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"p\">{</span><span class=\"s1\">'label'</span><span class=\"p\">:</span> <span class=\"s1\">'foo'</span><span class=\"p\">}</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">value</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"k\">class</span> <span class=\"err\">'</span><span class=\"nc\">dict</span><span class=\"s1\">'&gt;, expected: &lt;class '</span><span class=\"nb\">str</span><span class=\"s1\">'&gt;)</span>\n</pre>\n</div>\n<div id=\"choices\">\n<h4>Choices</h4>\n<p>Another thing we want to do in our component is to let it construct the label, passing it a \u201ctype\u201d of todo, but limiting the choices. For this we can use the <tt>Choices</tt> type:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">Choices</span><span class=\"p\">,</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">Required</span><span class=\"p\">,</span> <span class=\"n\">html</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span>\n        <span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"n\">Choices</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'todo'</span><span class=\"p\">,</span> <span class=\"s1\">'thing'</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n\n        <span class=\"k\">return</span> \\\n            <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span><span class=\"p\">}</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"n\">New</span> <span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">}:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">button</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"submit\"</span><span class=\"o\">&gt;</span><span class=\"n\">Add</span><span class=\"o\">&lt;/</span><span class=\"n\">button</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Let\u2019s try it:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todo/add\"</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todo/add\"</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todo/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todo/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New thing: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>And what if we try to pass something else than the available choices? It fails, as expected:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todo/add\"</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"stuff\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropChoiceError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">type</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"n\">stuff</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">choice</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"n\">must</span> <span class=\"n\">be</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"s1\">'todo'</span><span class=\"p\">,</span> <span class=\"s1\">'thing'</span><span class=\"p\">])</span>\n</pre>\n</div>\n<div id=\"default-choices\">\n<h4>Default choices</h4>\n<p>But maybe we don\u2019t want to pass it and use a default value. What would the result be?</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todo/add\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">UnsetPropError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">type</span><span class=\"p\">:</span> <span class=\"n\">prop</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"nb\">set</span>\n</pre>\n<p>So we have to mark the <tt>type</tt> prop as required:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n    <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span>\n    <span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"n\">Choices</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'todo'</span><span class=\"p\">,</span> <span class=\"s1\">'thing'</span><span class=\"p\">]</span>\n</pre>\n<p>So if we don\u2019t pass it, it fails earlier:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todo/add\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">RequiredPropError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">type</span><span class=\"p\">:</span> <span class=\"ow\">is</span> <span class=\"n\">a</span> <span class=\"n\">required</span> <span class=\"n\">prop</span> <span class=\"n\">but</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"nb\">set</span>\n</pre>\n<p>But it\u2019s not what we want, we want a default value.</p>\n<p>In fact, you noticed that for types other than <tt>Choices</tt>, setting a value in <tt>PropTypes</tt> gives us a default value. But for <tt>Choices</tt> it\u2019s different, as the value is the list of choices.</p>\n<p>For this, we have <tt>DefaultChoices</tt>: it work the same as <tt>Choices</tt>, but use the first entry in the list as the default value. And of course, as with other types having default, it cannot be <tt>Required</tt>.</p>\n<p>Let\u2019s try it:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">DefaultChoices</span><span class=\"p\">,</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">Required</span><span class=\"p\">,</span> <span class=\"n\">html</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">]</span>\n        <span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"n\">DefaultChoices</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'todo'</span><span class=\"p\">,</span> <span class=\"s1\">'thing'</span><span class=\"p\">]</span>\n</pre>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todo/add\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todo/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>It works as expected.</p>\n</div>\n<div id=\"advanced-types\">\n<h4>Advanced types</h4>\n<p>Until then, we used simple types, but you can use more complicated ones.</p>\n<p>So for example, we\u2019ll make the <tt>add_url</tt> prop to accept a function that will compute the url for us based on the <tt>type</tt> prop. But we also want to allow strings, and with a default value.</p>\n<p>We can do that, with typing. Our function will take a string, the <tt>type</tt> and will return a string, the url.</p>\n<p>So the <a href=\"https://docs.python.org/3.6/library/typing.html#typing.Callable\" rel=\"nofollow\">syntax</a> is <tt><span class=\"pre\">Callable[[str],</span> str]</tt> for the callable, and we use <tt>Union</tt> to accept things of type <tt>Callable</tt> or <tt>str</tt>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">Union</span><span class=\"p\">,</span> <span class=\"n\">Callable</span>\n<span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">DefaultChoices</span><span class=\"p\">,</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">Required</span><span class=\"p\">,</span> <span class=\"n\">html</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"n\">Callable</span><span class=\"p\">[[</span><span class=\"nb\">str</span><span class=\"p\">],</span> <span class=\"nb\">str</span><span class=\"p\">],</span> <span class=\"nb\">str</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s2\">\"/todo/add\"</span>\n        <span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"n\">DefaultChoices</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'todo'</span><span class=\"p\">,</span> <span class=\"s1\">'thing'</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">callable</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span><span class=\"p\">):</span>\n            <span class=\"n\">add_url</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">add_url</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span>\n\n        <span class=\"k\">return</span> \\\n            <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">add_url</span><span class=\"p\">}</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"n\">New</span> <span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">}:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">button</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"submit\"</span><span class=\"o\">&gt;</span><span class=\"n\">Add</span><span class=\"o\">&lt;/</span><span class=\"n\">button</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n</pre>\n<p>First, let\u2019s try it without the <tt>add_url</tt> prop, as we have a default:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span>  <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todo/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>It should work too if we pass a string:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"s2\">\"/todolist/add\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todolist/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>And now we can pass a function:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">make_url</span><span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"sa\">f</span><span class=\"s2\">\"/</span><span class=\"si\">{</span><span class=\"nb\">type</span><span class=\"si\">}</span><span class=\"s2\">/add\"</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">make_url</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropValueError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">add_url</span><span class=\"p\">:</span>\n<span class=\"err\">`</span><span class=\"o\">&lt;</span><span class=\"n\">function</span> <span class=\"n\">make_url</span> <span class=\"n\">at</span> <span class=\"mh\">0x7fe2ae87be18</span><span class=\"o\">&gt;</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">value</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"k\">class</span> <span class=\"err\">'</span><span class=\"nc\">function</span><span class=\"s1\">'&gt;, expected: Union[Callable[[str], str], str])</span>\n</pre>\n<p>Oh? Why? I passed a function accepting a string as argument and returning a string. Yes, but don\u2019t forget that types are checked! So we must add types to our function:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">make_url</span><span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">str</span><span class=\"p\">:</span>\n    <span class=\"k\">return</span> <span class=\"sa\">f</span><span class=\"s2\">\"/</span><span class=\"si\">{</span><span class=\"nb\">type</span><span class=\"si\">}</span><span class=\"s2\">/add\"</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">make_url</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todo/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>And if we pass another type, the url should change accordingly:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"n\">add_url</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">make_url</span><span class=\"p\">}</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/thing/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>We can even make this function the default value for our prop:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">Union</span><span class=\"p\">,</span> <span class=\"n\">Callable</span>\n<span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">DefaultChoices</span><span class=\"p\">,</span> <span class=\"n\">Element</span><span class=\"p\">,</span> <span class=\"n\">Required</span><span class=\"p\">,</span> <span class=\"n\">html</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">make_url</span><span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">str</span><span class=\"p\">:</span>\n    <span class=\"k\">return</span> <span class=\"sa\">f</span><span class=\"s2\">\"/</span><span class=\"si\">{</span><span class=\"nb\">type</span><span class=\"si\">}</span><span class=\"s2\">/add\"</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">add_url</span><span class=\"p\">:</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"n\">Callable</span><span class=\"p\">[[</span><span class=\"nb\">str</span><span class=\"p\">],</span> <span class=\"nb\">str</span><span class=\"p\">],</span> <span class=\"nb\">str</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">make_url</span>\n        <span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"n\">DefaultChoices</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'todo'</span><span class=\"p\">,</span> <span class=\"s1\">'thing'</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">callable</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span><span class=\"p\">):</span>\n            <span class=\"n\">add_url</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">add_url</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span>\n\n        <span class=\"k\">return</span> \\\n            <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">add_url</span><span class=\"p\">}</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"n\">New</span> <span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">}:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">button</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"submit\"</span><span class=\"o\">&gt;</span><span class=\"n\">Add</span><span class=\"o\">&lt;/</span><span class=\"n\">button</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n</pre>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/todo/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n</div>\n</div>\n<div id=\"dev-mode\">\n<h3>dev-mode</h3>\n<p>Now you may start wondering\u2026 python typing is cumbersome and validating may take away some of our precious time.</p>\n<p>Let\u2019s me answer that:</p>\n<ol>\n<li>No, typing is not cumbersome. It\u2019s really useful to spot bugs and add some self-documentation.</li>\n<li>Yes, it takes away some of our precious time. But we got you covered.</li>\n</ol>\n<p>By default, <tt>mixt</tt> run in \u201cdev-mode\u201d. And in dev-mode, props are validated when passed to a component. When you are NOT in \u201cdev-mode\u201d, the validation is skipped. So in production, you can deactivate the dev-mode (we\u2019ll see how in a minute) and pass props very fast:</p>\n<ul>\n<li>we don\u2019t check required props (but that would fail if you try to use it in your compoment)</li>\n<li>we don\u2019t check if a <tt>Choices</tt> prop is, indeed, in the list of choices</li>\n<li>we don\u2019t check the type at all, so for example if you want to pass a list for a string, it will work but with understandable strange things happening in your <tt>render</tt> method.</li>\n</ul>\n<p>But you may say that it\u2019s in production that validation is important. Indeed. But of course your code is fully covered by tests, that you run in dev-mode, and so in production, you don\u2019t need this validation! And note that it\u2019s how React works, by the way, with <tt>NODE_ENV=production</tt>.</p>\n<p>How to change dev-mode? We don\u2019t enforce any environment variable but we propose some functions. It\u2019s up to you to call them:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">set_dev_mode</span><span class=\"p\">,</span> <span class=\"n\">unset_dev_mode</span><span class=\"p\">,</span> <span class=\"n\">override_dev_mode</span><span class=\"p\">,</span> <span class=\"n\">in_dev_mode</span>\n\n<span class=\"c1\"># by default, dev-mode is active</span>\n<span class=\"k\">assert</span> <span class=\"n\">in_dev_mode</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># you can unset the dev-mode</span>\n<span class=\"n\">unset_dev_mode</span><span class=\"p\">()</span>\n<span class=\"k\">assert</span> <span class=\"ow\">not</span> <span class=\"n\">in_dev_mode</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># and set it back</span>\n<span class=\"n\">set_dev_mode</span><span class=\"p\">()</span>\n<span class=\"k\">assert</span> <span class=\"n\">in_dev_mode</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># set_dev_mode can take a boolean</span>\n<span class=\"n\">set_dev_mode</span><span class=\"p\">(</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"ow\">not</span> <span class=\"n\">in_dev_mode</span><span class=\"p\">()</span>\n\n<span class=\"n\">set_dev_mode</span><span class=\"p\">(</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"k\">assert</span> <span class=\"n\">in_dev_mode</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># and we have a context manager to override for a block</span>\n<span class=\"k\">with</span> <span class=\"n\">override_dev_mode</span><span class=\"p\">(</span><span class=\"kc\">False</span><span class=\"p\">):</span>\n    <span class=\"k\">assert</span> <span class=\"ow\">not</span> <span class=\"n\">in_dev_mode</span><span class=\"p\">()</span>\n    <span class=\"k\">with</span> <span class=\"n\">override_dev_mode</span><span class=\"p\">(</span><span class=\"kc\">True</span><span class=\"p\">):</span>\n        <span class=\"k\">assert</span> <span class=\"n\">in_dev_mode</span><span class=\"p\">()</span>\n    <span class=\"k\">assert</span> <span class=\"ow\">not</span> <span class=\"n\">in_dev_mode</span><span class=\"p\">()</span>\n<span class=\"k\">assert</span> <span class=\"n\">in_dev_mode</span><span class=\"p\">()</span>\n</pre>\n<p>So let\u2019s try this with the <tt>type</tt> prop. Remember, it looks like:</p>\n<pre><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"n\">DefaultChoices</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'todo'</span><span class=\"p\">,</span> <span class=\"s1\">'thing'</span><span class=\"p\">]</span>\n</pre>\n<p>We try to pass another choice, first in dev-mode:</p>\n<pre><span class=\"k\">with</span> <span class=\"n\">override_dev_mode</span><span class=\"p\">(</span><span class=\"kc\">True</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"stuff\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropChoiceError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span><span class=\"o\">&gt;.</span><span class=\"n\">type</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"n\">stuff</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">choice</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"n\">must</span> <span class=\"n\">be</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"s1\">'todo'</span><span class=\"p\">,</span> <span class=\"s1\">'thing'</span><span class=\"p\">])</span>\n</pre>\n<p>It fails as expected.</p>\n<p>And now by deactivating dev-mode:</p>\n<pre><span class=\"k\">with</span> <span class=\"n\">override_dev_mode</span><span class=\"p\">(</span><span class=\"kc\">False</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"stuff\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/stuff/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New stuff: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n</pre>\n<p>It works, we have a todo type that was not in our choices that is used, and is in the <tt>action</tt> too. It\u2019s the work of your tests to ensure that you never pass invalid props, so you can be confident in production and deactivate dev-mode.</p>\n</div>\n<div id=\"components-cascade\">\n<h3>Components cascade</h3>\n<p>Now we have our form. What other components do we need for our todo list app?</p>\n<p>Of course, we need a way to display a todo entry.</p>\n<p>But what is a todo entry? Let\u2019s create a basic <tt>TodoObject</tt>:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoObject</span><span class=\"p\">:</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">text</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"n\">text</span>\n</pre>\n<p>It\u2019s a very simple class, but you can use what you want, of course. It could be Django models, etc\u2026</p>\n<p>So we can create our <tt>Todo</tt> component, making it accept a required <tt>TodoObject</tt> as prop:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Todo</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">todo</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"n\">TodoObject</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">li</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">todo</span><span class=\"o\">.</span><span class=\"n\">text</span><span class=\"p\">}</span><span class=\"o\">&lt;/</span><span class=\"n\">li</span><span class=\"o\">&gt;</span>\n</pre>\n<p>And we can use it:</p>\n<pre><span class=\"n\">todo</span> <span class=\"o\">=</span> <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">Todo</span> <span class=\"n\">todo</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todo</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n</pre>\n<p>Now we want to have a list of todos. Let\u2019s create a <tt>TodoList</tt> component that will accept as props a list of <tt>TodoObject</tt>.</p>\n<p>But what is different than our two other components, that only use html tags in their <tt>render</tt> method, it\u2019s that now we will encapsulate a component into another. Let\u2019s see how.</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoList</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">todos</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">TodoObject</span><span class=\"p\">]]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">ul</span><span class=\"o\">&gt;</span><span class=\"p\">{[</span><span class=\"o\">&lt;</span><span class=\"n\">Todo</span> <span class=\"n\">todo</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todo</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span> <span class=\"k\">for</span> <span class=\"n\">todo</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">todos</span><span class=\"p\">]}</span><span class=\"o\">&lt;/</span><span class=\"n\">ul</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Yes, it\u2019s as simple as that: you use <tt><span class=\"pre\">&lt;Todo...&gt;</span></tt> for the <tt>Todo</tt> component as you would use an HTML tag. The only difference is that for html tags, you don\u2019t need to import them directly (simple import <tt>html</tt> from <tt>mixt</tt>), and by convention we write them in lower-case. For normal components, you have to import them (you can still do <tt>from mylib import components</tt> and <tt>&lt;components.MyComponent <span class=\"pre\">...&gt;</span></tt>) and use the exact case.</p>\n<p>Notice how we required a list, and passed it into the <tt>&lt;ul&gt;</tt> via a list-comprehension in curly-braces.</p>\n<p>You can do things differently if you want.</p>\n<p>Like separating the list comprehension from the html:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"n\">todos</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">Todo</span> <span class=\"n\">todo</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todo</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span>\n        <span class=\"k\">for</span> <span class=\"n\">todo</span>\n        <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">todos</span>\n    <span class=\"p\">]</span>\n    <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">ul</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"n\">todos</span><span class=\"p\">}</span><span class=\"o\">&lt;/</span><span class=\"n\">ul</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Or in a dedicated method (that would be useful for testing):</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">render_todos</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">todos</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"p\">[</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">Todo</span> <span class=\"n\">todo</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todo</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span>\n        <span class=\"k\">for</span> <span class=\"n\">todo</span>\n        <span class=\"ow\">in</span> <span class=\"n\">todos</span>\n    <span class=\"p\">]</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">ul</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">render_todos</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">todos</span><span class=\"p\">)}</span><span class=\"o\">&lt;/</span><span class=\"n\">ul</span><span class=\"o\">&gt;</span>\n</pre>\n<p>It\u2019s up to you: at the end it\u2019s just python.</p>\n<p>Let\u2019s see what is rendered by this component:</p>\n<pre><span class=\"n\">todos</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">),</span> <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"bar\"</span><span class=\"p\">),</span> <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"baz\"</span><span class=\"p\">)]</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoList</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todos</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>bar<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>baz<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n</pre>\n<p>And finally we have our <tt>TodoApp</tt> component that encapsulate the form and the list:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoApp</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">todos</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">TodoObject</span><span class=\"p\">]]</span>\n        <span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"n\">DefaultChoices</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'todo'</span><span class=\"p\">,</span> <span class=\"s1\">'thing'</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> \\\n            <span class=\"o\">&lt;</span><span class=\"n\">div</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">h1</span><span class=\"o\">&gt;</span><span class=\"n\">The</span> <span class=\"s2\">\"</span><span class=\"si\">{self.type}</span><span class=\"s2\">\"</span> <span class=\"nb\">list</span><span class=\"o\">&lt;/</span><span class=\"n\">h1</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">TodoForm</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">TodoList</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">todos</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">div</span><span class=\"o\">&gt;</span>\n</pre>\n<pre><span class=\"n\">todos</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">),</span> <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"bar\"</span><span class=\"p\">),</span> <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"baz\"</span><span class=\"p\">)]</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">TodoList</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todos</span><span class=\"p\">}</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>...<span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>bar<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>baz<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>Let\u2019s pass this HTML to an HTML beautifier:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/thing/add\"</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New thing: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>bar<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>baz<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>And that\u2019s it, we have our todo-list app! To use it in a page, just create a component that will render the html base markup and integrate the <tt>TodoApp</tt> component in it. You don\u2019t even need a component:</p>\n<pre><span class=\"n\">todos</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">),</span> <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"bar\"</span><span class=\"p\">),</span> <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"baz\"</span><span class=\"p\">)]</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">html</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">body</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">TodoApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todos</span><span class=\"p\">}</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"o\">/&gt;</span>\n        <span class=\"o\">&lt;/</span><span class=\"n\">body</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">html</span><span class=\"o\">&gt;</span>\n<span class=\"p\">)</span>\n</pre>\n<p>The beautified output would be:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/thing/add\"</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New thing: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>bar<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>baz<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</pre>\n</div>\n<div id=\"overriding-a-component\">\n<h3>Overriding a component</h3>\n<p>We have a generic todo-list, but following the available types of todo, we may want to have a \u201ctodo-list\u201d and a \u201cthing-list\u201d.</p>\n<p>We already have the todo list because our <tt>TodoApp</tt> has a type of <tt>todo</tt> by default.</p>\n<p>So let\u2019s create a <tt>ThingApp</tt>.</p>\n<div id=\"inheritance\">\n<h4>Inheritance</h4>\n<p>The first way of doing this is to inherit from our <tt>TodoApp</tt>. But by inheriting we cannot remove props from the parent (it\u2019s not really true, we\u2019ll see this later), so we still have the <tt>type</tt> prop by default. But we don\u2019t want to accept anything else than \u201cthing\u201d. So we can redefine the <tt>type</tt> prop like this:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">ThingApp</span><span class=\"p\">(</span><span class=\"n\">TodoApp</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"n\">DefaultChoices</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'thing'</span><span class=\"p\">]</span>\n</pre>\n<p>Let\u2019s use this component:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/thing/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>If we try to pass \u201ctodo\u201d for the <tt>type</tt> props, it won\u2019t work:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropChoiceError</span><span class=\"p\">:</span>\n<span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span><span class=\"o\">&gt;.</span><span class=\"n\">type</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"n\">todo</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">choice</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"n\">must</span> <span class=\"n\">be</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"s1\">'thing'</span><span class=\"p\">])</span>\n</pre>\n<p>But still, it\u2019s strange to be able to pass a type.</p>\n</div>\n<div id=\"parent-components\">\n<h4>Parent components</h4>\n<p>Let\u2019s try another way: A parent component. A component that does nothing else that doing things with its children and returning it. What we want here, is a component that will return a <tt>TodoApp</tt> with the <tt>type</tt> prop forced to \u201cthing\u201d.</p>\n<p>Let\u2019s do this</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">ThingApp</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">todos</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">TodoObject</span><span class=\"p\">]]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">todos</span><span class=\"p\">}</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"o\">/&gt;</span>\n</pre>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/thing/add\"</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New todo: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>It works, and this time, we cannot pass the <tt>type</tt> prop:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropNameError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span><span class=\"o\">&gt;.</span><span class=\"n\">type</span><span class=\"p\">:</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">an</span> <span class=\"n\">allowed</span> <span class=\"n\">prop</span>\n</pre>\n</div>\n<div id=\"proptypes-dryness\">\n<h4>PropTypes DRYness</h4>\n<p>Notice how we had to define the type for the <tt>todos</tt> props. Both in <tt>TodoApp</tt> and <tt>TodoThing</tt>.</p>\n<p>There are many ways to handle that.</p>\n<p>The first one would be to ignore the type in <tt>ThingApp</tt> because it will be checked in <tt>TodoApp</tt>. So we\u2019ll use the type <tt>Any</tt>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typing</span> <span class=\"kn\">import</span> <span class=\"n\">Any</span>\n\n<span class=\"c1\">#...</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">ThingApp</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">todos</span><span class=\"p\">:</span> <span class=\"n\">Any</span>\n\n <span class=\"c1\">#...</span>\n</pre>\n<p>Let\u2019s try with a valid list of todos:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>...<span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>But what if we pass something else?</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"s2\">\"foo, bar\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropValueError</span><span class=\"p\">:</span>\n<span class=\"o\">&lt;</span><span class=\"n\">TodoApp</span><span class=\"o\">&gt;.</span><span class=\"n\">todos</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"n\">foo</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">value</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"k\">class</span> <span class=\"err\">'</span><span class=\"nc\">str</span><span class=\"s1\">'&gt;, expected: List[TodoObject])</span>\n</pre>\n<p>It works as expected but the error is reported at the <tt>TodoApp</tt> level, which is perfectly normal.</p>\n<p>Another way would be to defined the type at a higher level:</p>\n<pre><span class=\"n\">TodoObjects</span> <span class=\"o\">=</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">TodoObject</span><span class=\"p\">]]</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">TodoApp</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">todos</span><span class=\"p\">:</span> <span class=\"n\">TodoObjects</span>\n <span class=\"c1\"># ...</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">ThingApp</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">todos</span><span class=\"p\">:</span> <span class=\"n\">TodoObjects</span>\n <span class=\"c1\"># ...</span>\n</pre>\n<p>Now if we pass something else, we have the error reported at the correct level:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"s2\">\"foo, bar\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropValueError</span><span class=\"p\">:</span>\n<span class=\"o\">&lt;</span><span class=\"n\">TodoThing</span><span class=\"o\">&gt;.</span><span class=\"n\">todos</span><span class=\"p\">:</span> <span class=\"err\">`</span><span class=\"n\">foo</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"err\">`</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">a</span> <span class=\"n\">valid</span> <span class=\"n\">value</span> <span class=\"k\">for</span> <span class=\"n\">this</span> <span class=\"n\">prop</span> <span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"k\">class</span> <span class=\"err\">'</span><span class=\"nc\">str</span><span class=\"s1\">'&gt;, expected: List[TodoObject])</span>\n</pre>\n<p>But if you can\u2019t or don\u2019t want to do that, you can keep the type defined in <tt>TodoApp</tt> et use the <tt>prop_type</tt> class method of a component to get the type of a prop:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">ThingApp</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">todos</span><span class=\"p\">:</span> <span class=\"n\">TodoApp</span><span class=\"o\">.</span><span class=\"n\">prop_type</span><span class=\"p\">(</span><span class=\"s2\">\"todos\"</span><span class=\"p\">)</span>\n <span class=\"c1\"># ...</span>\n</pre>\n<p>But does it really matter to have the error raised for <tt>ThingApp</tt> or <tt>TodoApp</tt>? Because at the end, it\u2019s really <tt>TodoApp</tt> that have to do the check.</p>\n<p>So this should be a way to do this in a more generic way..</p>\n</div>\n<div id=\"function\">\n<h4>Function</h4>\n<p>We saw earlier that a component can be a single function to render a component. It just have to return a component, an html tag. One difference with class components is that there is not <tt>PropTypes</tt> so no validation. But\u2026 it\u2019s exactly what we need.</p>\n<p>We want our <tt>ThingApp</tt> to accept some props (the <tt>todos</tt> prop), and return a <tt>TodoApp</tt> with a specific <tt>type</tt> prop.</p>\n<p>So we could do:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">ThingApp</span><span class=\"p\">(</span><span class=\"n\">todos</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoApp</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todos</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span>\n</pre>\n<p>Here we can see that we cannot pass <tt>type</tt> to <tt>ThingsApp</tt>, it is not a valid argument.</p>\n<p>Let\u2019s try it:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>...<span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>Here we have only one prop to pass so it\u2019s easy. But imagine if we have many ones. We can use the <tt><span class=\"pre\">{**props}</span></tt> syntax:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">ThingApp</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">props</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoApp</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"p\">{</span><span class=\"o\">**</span><span class=\"n\">props</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span>\n</pre>\n<p>And you can do with even fewer characters (if it counts):</p>\n<pre><span class=\"n\">ThingApp</span> <span class=\"o\">=</span> <span class=\"k\">lambda</span> <span class=\"o\">**</span><span class=\"n\">props</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoApp</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"p\">{</span><span class=\"o\">**</span><span class=\"n\">props</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span>\n</pre>\n<p>These two fonctions behave exactly the same.</p>\n<p>And you cannot pass a <tt>type</tt> prop because it would be a python error, as it would be passed twice to <tt>TodoApp</tt>:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"ne\">TypeError</span><span class=\"p\">:</span> <span class=\"n\">BaseMetaclass</span> <span class=\"nb\">object</span> <span class=\"n\">got</span> <span class=\"n\">multiple</span> <span class=\"n\">values</span> <span class=\"k\">for</span> <span class=\"n\">keyword</span> <span class=\"n\">argument</span> <span class=\"s1\">'type'</span>\n</pre>\n<p>(yes it talks about <tt>BaseMetaclass</tt> which is the metaclass that creates our components classes)</p>\n<p>And any other wrong props would be validated by <tt>TodoApp</tt>:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"n\">foo</span><span class=\"o\">=</span><span class=\"s2\">\"bar\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropNameError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">TodoApp</span><span class=\"o\">&gt;.</span><span class=\"n\">foo</span><span class=\"p\">:</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">an</span> <span class=\"n\">allowed</span> <span class=\"n\">prop</span>\n</pre>\n<p>With this in mind, we could have created a generic fonction that force the type of any component accepting a <tt>type</tt> prop:</p>\n<pre><span class=\"n\">Thingify</span> <span class=\"o\">=</span> <span class=\"k\">lambda</span> <span class=\"n\">component</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">props</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">component</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"p\">{</span><span class=\"o\">**</span><span class=\"n\">props</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span>\n</pre>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">Thingify</span> <span class=\"n\">component</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">TodoApp</span><span class=\"p\">}</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>...<span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>The rendered component is <tt>TodoApp</tt>, the <tt>type</tt> prop is \u201cthing\u201d and the other props (here only <tt>todos</tt>) are correctly passed.</p>\n</div>\n<div id=\"higher-order-components\">\n<h4>Higher-order components</h4>\n<p>Now extend this concept to a more generic case: \u201chigher-order components\u201d. In <a href=\"https://reactjs.org/docs/higher-order-components.html\" rel=\"nofollow\">React a \u201chigh order component\u201d</a>, is \u201ca function that takes a component and returns a new component.\u201d</p>\n<p>The idea is:</p>\n<pre><span class=\"n\">EnhancedComponent</span> <span class=\"o\">=</span> <span class=\"n\">higherOrderComponent</span><span class=\"p\">(</span><span class=\"n\">WrappedComponent</span><span class=\"p\">)</span>\n</pre>\n<p>A classic way of doing it is to return a new component class:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">higherOrderComponent</span><span class=\"p\">(</span><span class=\"n\">WrappedComponent</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">HOC</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n        <span class=\"n\">__display_name__</span> <span class=\"o\">=</span> <span class=\"sa\">f</span><span class=\"s2\">\"higherOrderComponent(</span><span class=\"si\">{</span><span class=\"n\">WrappedComponent</span><span class=\"o\">.</span><span class=\"n\">__display_name__</span><span class=\"si\">}</span><span class=\"s2\">)\"</span>\n\n        <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">(</span><span class=\"n\">WrappedComponent</span><span class=\"o\">.</span><span class=\"n\">PropTypes</span><span class=\"p\">):</span>\n            <span class=\"k\">pass</span>\n\n        <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">WrappedComponent</span> <span class=\"p\">{</span><span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">props</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">childre</span><span class=\"p\">()}</span><span class=\"o\">&lt;/</span><span class=\"n\">WrappedComponent</span><span class=\"o\">&gt;</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">HOC</span>\n</pre>\n<p>Notice how we set the <tt>PropTypes</tt> class to inherit from the one of the wrapped component, and how we pass all the props to the wrapped component, along with the children. With the returned component will accept the same props, with the same types, as the wrapped one.</p>\n<p>And also notice the <tt>__display_name__</tt>. It will be used in exceptions to let you now the component that raised it. Here, without forcing it, it would have been set to <tt>HOC</tt>, which is not helpful. Instead, we indicate that it is a transformed version of the passed component.</p>\n<p>Here it is a function that does nothing useful.</p>\n<p>In our example we could have done this:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">thingify</span><span class=\"p\">(</span><span class=\"n\">WrappedComponent</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">HOC</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n        <span class=\"n\">__display_name__</span> <span class=\"o\">=</span> <span class=\"sa\">f</span><span class=\"s2\">\"thingify(</span><span class=\"si\">{</span><span class=\"n\">WrappedComponent</span><span class=\"o\">.</span><span class=\"n\">__display_name__</span><span class=\"si\">}</span><span class=\"s2\">)\"</span>\n\n        <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">(</span><span class=\"n\">WrappedComponent</span><span class=\"o\">.</span><span class=\"n\">PropTypes</span><span class=\"p\">):</span>\n            <span class=\"n\">__exclude__</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">'type'</span><span class=\"p\">}</span>\n\n        <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">WrappedComponent</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"p\">{</span><span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">props</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">()}</span><span class=\"o\">&lt;/</span><span class=\"n\">WrappedComponent</span><span class=\"o\">&gt;</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">HOC</span>\n</pre>\n<p>Two important things here:</p>\n<ul>\n<li>notice how we use <tt>__exclude__ = {'type'}</tt> to remove the <tt>type</tt> prop from the ones we inherit from <tt>WrappedComponent.PropTypes</tt>. So the returned component will expect the exact same props as the wrapped one, except for <tt>type</tt>.</li>\n<li>we added <tt><span class=\"pre\">{self.children()}</span></tt> in the rendered wrapped component, because even if we actually know that the component we\u2019ll wrap, <tt>TodoApp</tt>, doesn\u2019t take children (it could but it does nothing with them), we cannot say in advance that it will always be the case, and also that this higher-order component won\u2019t be used to wrap another component than <tt>TodoApp</tt>. So it\u2019s better to always do this.</li>\n</ul>\n<p>And now we can create our <tt>ThingApp</tt>:</p>\n<pre><span class=\"n\">ThingApp</span> <span class=\"o\">=</span> <span class=\"n\">thingify</span><span class=\"p\">(</span><span class=\"n\">TodoApp</span><span class=\"p\">)</span>\n</pre>\n<p>And use it:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>...<span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>foo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>If we try to pass the type:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"n\">todos</span><span class=\"o\">=</span><span class=\"p\">{[</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"foo\"</span><span class=\"p\">)]}</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"thing\"</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"n\">mixt</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">InvalidPropNameError</span><span class=\"p\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">thingify</span><span class=\"p\">(</span><span class=\"n\">TodoApp</span><span class=\"p\">)</span><span class=\"o\">&gt;.</span><span class=\"n\">type</span><span class=\"p\">:</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">an</span> <span class=\"n\">allowed</span> <span class=\"n\">prop</span>\n</pre>\n<p>So as planned, we cannot pass the type. And notice how the <tt>__display_name__</tt> is used.</p>\n<p>Let\u2019s think about how powerful this is.</p>\n<p>Let say we want to keep our <tt>TodoApp</tt> take a list of <tt>TodoObject</tt>. But we want to get them from a \u201csource\u201d.</p>\n<p>We can even directly write it this new higher-order-component in a generic way:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">from_data_source</span><span class=\"p\">(</span><span class=\"n\">WrappedComponent</span><span class=\"p\">,</span> <span class=\"n\">prop_name</span><span class=\"p\">,</span> <span class=\"n\">get_source</span><span class=\"p\">):</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">HOC</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n        <span class=\"n\">__display_name__</span> <span class=\"o\">=</span> <span class=\"sa\">f</span><span class=\"s2\">\"from_data_source(</span><span class=\"si\">{</span><span class=\"n\">WrappedComponent</span><span class=\"o\">.</span><span class=\"n\">__display_name__</span><span class=\"si\">}</span><span class=\"s2\">)\"</span>\n\n        <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">(</span><span class=\"n\">WrappedComponent</span><span class=\"o\">.</span><span class=\"n\">PropTypes</span><span class=\"p\">):</span>\n            <span class=\"n\">__exclude__</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"n\">prop_name</span><span class=\"p\">}</span>\n\n        <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n            <span class=\"n\">props</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">props</span><span class=\"o\">.</span><span class=\"n\">copy</span><span class=\"p\">()</span>\n            <span class=\"n\">props</span><span class=\"p\">[</span><span class=\"n\">prop_name</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">get_source</span><span class=\"p\">(</span><span class=\"n\">props</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"n\">WrappedComponent</span> <span class=\"p\">{</span><span class=\"o\">**</span><span class=\"n\">props</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">()}</span><span class=\"o\">&lt;/</span><span class=\"n\">WrappedComponent</span><span class=\"o\">&gt;</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">HOC</span>\n</pre>\n<p>This time, the function <tt>from_data_source</tt> takes two arguments in addition to the <tt>WrappedComponent</tt>:</p>\n<ul>\n<li><tt>prop_name</tt>: it\u2019s the name of the prop of the wrapped component to fill with some data</li>\n<li><tt>get_source</tt>: it\u2019s a function that will be called to get the data</li>\n</ul>\n<p>Look how we inherited the <tt>PropTypes</tt> from the wrapped component and how we excluded <tt>prop_name</tt>. So we don\u2019t have (and can\u2019t) pass the data to our new component.</p>\n<p>And then in <tt>render</tt>, we set a prop to pass to <tt>WrappedComponent</tt> with the result of a call to <tt>get_source</tt>.</p>\n<p>So let\u2019s write a very simple function (this could be a complicated one with caching, filtering\u2026) that take the props and the context, and returns some data:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">get_todos</span><span class=\"p\">(</span><span class=\"n\">props</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"c1\"># here it could be a call to a database</span>\n    <span class=\"k\">return</span> <span class=\"p\">[</span>\n        <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"fooooo\"</span><span class=\"p\">),</span>\n        <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"baaaar\"</span><span class=\"p\">),</span>\n    <span class=\"p\">]</span>\n</pre>\n<p>And we can compose our component:</p>\n<pre><span class=\"n\">SourcedTodoApp</span> <span class=\"o\">=</span> <span class=\"n\">from_data_source</span><span class=\"p\">(</span><span class=\"n\">TodoApp</span><span class=\"p\">,</span> <span class=\"s1\">'todos'</span><span class=\"p\">,</span> <span class=\"n\">get_todos</span><span class=\"p\">)</span>\n<span class=\"n\">ThingApp</span> <span class=\"o\">=</span> <span class=\"n\">thingify</span><span class=\"p\">(</span><span class=\"n\">SourcedTodoApp</span><span class=\"p\">)</span>\n</pre>\n<p>And run it:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>...<span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>fooooo<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>baaaar<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>It works as expected, and the data is fetched only when the component needs to be rendered.</p>\n</div>\n</div>\n<div id=\"context\">\n<h3>Context</h3>\n<p>So, we have a todo list, that can fetch data from an external source. But we may want the data to be different depending on the user.</p>\n<p>What we can do, it\u2019s at the main level, get our user and passing it on every component to be sure that each component is able to get the current logged in user.</p>\n<p>Wouldn\u2019t it be cumbersome?</p>\n<p>Solving this use case is the exact purpose of the <tt>Context</tt> concept provided by <tt>mixt</tt>. It is, of course, <a href=\"https://reactjs.org/docs/context.html\" rel=\"nofollow\">inspired by the concept of context in React</a>.</p>\n<p>And as they said:</p>\n<blockquote>\nContext is designed to share data that can be considered \u201cglobal\u201d for a tree of React components, such as the current authenticated user, theme, or preferred language.</blockquote>\n<p>Creating a context is as simple as creating a component, except that it will inherits from <tt>BaseContext</tt> and doesn\u2019t need a <tt>render</tt> method (it will render its children).</p>\n<p>And it takes a <tt>PropTypes</tt> class, that define the types of data the context will accept and pass down the tree.</p>\n<p>So let\u2019s create our context that will hold the id of the authenticated user.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">BaseContext</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">UserContext</span><span class=\"p\">(</span><span class=\"n\">BaseContext</span><span class=\"p\">):</span>\n    <span class=\"k\">class</span> <span class=\"nc\">PropTypes</span><span class=\"p\">:</span>\n        <span class=\"n\">authenticated_user_id</span><span class=\"p\">:</span> <span class=\"n\">Required</span><span class=\"p\">[</span><span class=\"nb\">int</span><span class=\"p\">]</span>\n</pre>\n<p>Now, we want to update our <tt>get_todos</tt> method to take the <tt>authenticated_user_id</tt> into account.</p>\n<p>Remember, we passed it the props and the context. The context will be useful here:</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">get_todos</span><span class=\"p\">(</span><span class=\"n\">props</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span>\n        <span class=\"mi\">1</span><span class=\"p\">:[</span>\n            <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"1-1\"</span><span class=\"p\">),</span>\n            <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"1-2\"</span><span class=\"p\">),</span>\n        <span class=\"p\">],</span>\n        <span class=\"mi\">2</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"2-1\"</span><span class=\"p\">),</span>\n            <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"2-2\"</span><span class=\"p\">),</span>\n        <span class=\"p\">]</span>\n    <span class=\"p\">}[</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">authenticated_user_id</span><span class=\"p\">]</span>\n</pre>\n<p>And now we can render our app with the context:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">UserContext</span> <span class=\"n\">authenticated_user_id</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">UserContext</span><span class=\"o\">&gt;</span>\n<span class=\"p\">)</span>\n</pre>\n<pre><span class=\"o\">&lt;</span><span class=\"n\">div</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">h1</span><span class=\"o\">&gt;</span><span class=\"n\">The</span> <span class=\"s2\">\"thing\"</span> <span class=\"nb\">list</span><span class=\"o\">&lt;/</span><span class=\"n\">h1</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">form</span><span class=\"o\">&gt;...&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">ul</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">li</span><span class=\"o\">&gt;</span><span class=\"mi\">1</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"o\">&lt;/</span><span class=\"n\">li</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">li</span><span class=\"o\">&gt;</span><span class=\"mi\">1</span><span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"o\">&lt;/</span><span class=\"n\">li</span><span class=\"o\">&gt;&lt;/</span><span class=\"n\">ul</span><span class=\"o\">&gt;&lt;/</span><span class=\"n\">div</span><span class=\"o\">&gt;</span>\n</pre>\n<p>We can see the todo entries for the user 1.</p>\n<p>Let\u2019s try with the user 2:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">UserContext</span> <span class=\"n\">authenticated_user_id</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">UserContext</span><span class=\"o\">&gt;</span>\n<span class=\"p\">)</span>\n</pre>\n<pre><span class=\"o\">&lt;</span><span class=\"n\">div</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">h1</span><span class=\"o\">&gt;</span><span class=\"n\">The</span> <span class=\"s2\">\"thing\"</span> <span class=\"nb\">list</span><span class=\"o\">&lt;/</span><span class=\"n\">h1</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">form</span><span class=\"o\">&gt;...&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">ul</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">li</span><span class=\"o\">&gt;</span><span class=\"mi\">2</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"o\">&lt;/</span><span class=\"n\">li</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">li</span><span class=\"o\">&gt;</span><span class=\"mi\">2</span><span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"o\">&lt;/</span><span class=\"n\">li</span><span class=\"o\">&gt;&lt;/</span><span class=\"n\">ul</span><span class=\"o\">&gt;&lt;/</span><span class=\"n\">div</span><span class=\"o\">&gt;</span>\n</pre>\n<p>We can see the todo entries for the user 2.</p>\n<p>In this case of course we could have passed the user id as a prop. But imagine the todo app being deep in the components tree, it\u2019s a lot easier to pass it this way.</p>\n<p>But as said in the React documentation:</p>\n<blockquote>\nDon\u2019t use context just to avoid passing props a few levels down. Stick to cases where the same data needs to be accessed in many components at multiple levels.</blockquote>\n<p>When there is no context, the <tt>context</tt> argument of the <tt>render</tt> method is set to <tt>EmptyContext</tt> and not to <tt>None</tt>. So you can directly use the <tt>has_prop</tt> method to check if a prop is available via the context.</p>\n<p>Let\u2019s update the <tt>get_todos</tt> functions to return an empty list of todo objects if there is not authenticated user.</p>\n<pre><span class=\"k\">def</span> <span class=\"nf\">get_todos</span><span class=\"p\">(</span><span class=\"n\">props</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">has_prop</span><span class=\"p\">(</span><span class=\"s1\">'authenticated_user_id'</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"ow\">not</span> <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">authenticated_user_id</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"p\">[]</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span>\n        <span class=\"mi\">1</span><span class=\"p\">:[</span>\n            <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"1-1\"</span><span class=\"p\">),</span>\n            <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"1-2\"</span><span class=\"p\">),</span>\n        <span class=\"p\">],</span>\n        <span class=\"mi\">2</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"2-1\"</span><span class=\"p\">),</span>\n            <span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"s2\">\"2-2\"</span><span class=\"p\">),</span>\n        <span class=\"p\">]</span>\n    <span class=\"p\">}[</span><span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">authenticated_user_id</span><span class=\"p\">]</span>\n</pre>\n<p>Let\u2019s try this:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"o\">/&gt;</span><span class=\"p\">)</span>\n</pre>\n<pre><span class=\"o\">&lt;</span><span class=\"n\">div</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">h1</span><span class=\"o\">&gt;</span><span class=\"n\">The</span> <span class=\"s2\">\"thing\"</span> <span class=\"nb\">list</span><span class=\"o\">&lt;/</span><span class=\"n\">h1</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">form</span><span class=\"o\">&gt;...&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">ul</span><span class=\"o\">&gt;&lt;/</span><span class=\"n\">ul</span><span class=\"o\">&gt;&lt;/</span><span class=\"n\">div</span><span class=\"o\">&gt;</span>\n</pre>\n<p>And it still works with a user in the context:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">UserContext</span> <span class=\"n\">authenticated_user_id</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">UserContext</span><span class=\"o\">&gt;</span>\n<span class=\"p\">)</span>\n</pre>\n<pre><span class=\"o\">&lt;</span><span class=\"n\">div</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">h1</span><span class=\"o\">&gt;</span><span class=\"n\">The</span> <span class=\"s2\">\"thing\"</span> <span class=\"nb\">list</span><span class=\"o\">&lt;/</span><span class=\"n\">h1</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">form</span><span class=\"o\">&gt;...&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">ul</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">li</span><span class=\"o\">&gt;</span><span class=\"mi\">1</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"o\">&lt;/</span><span class=\"n\">li</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">li</span><span class=\"o\">&gt;</span><span class=\"mi\">1</span><span class=\"o\">-</span><span class=\"mi\">2</span><span class=\"o\">&lt;/</span><span class=\"n\">li</span><span class=\"o\">&gt;&lt;/</span><span class=\"n\">ul</span><span class=\"o\">&gt;&lt;/</span><span class=\"n\">div</span><span class=\"o\">&gt;</span>\n</pre>\n<p><strong>Important note about contexts</strong>: you can have many contexts! But defining the same prop in many contexts may lead to undefined behaviour.</p>\n</div>\n<div id=\"style-and-javascript\">\n<h3>Style and Javascript</h3>\n<p>Everybody loves a beautiful design, and maybe some interaction.</p>\n<p>It is easily doable: we generate HTML and HTML can contains some CSS and JS.</p>\n<p>Let\u2019s add some interaction first: when adding an item in the <tt>TodoForm</tt>, let\u2019s add it to the list.</p>\n<p>First we add in our <tt>TodoForm</tt> component a <tt>render_javascript</tt> method that will host our (bad, we could do better but it\u2019s not the point) javascript:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render_javascript</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Raw</span><span class=\"p\">(</span><span class=\"s2\">\"\"\"\nfunction on_todo_add_submit(form) {\n    var text = form.todo.value;\n    alert(text);\n}\n        \"\"\"</span><span class=\"p\">)</span>\n</pre>\n<p>To start we only display the new todo text.</p>\n<p>Now update our <tt>render</tt> method to return this javascript (note that the use of a <tt>render_javascript</tt> method is only to separate concerns, it could have been in the <tt>render</tt> method directly.</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"c1\"># ...</span>\n\n        <span class=\"k\">return</span> \\\n            <span class=\"o\">&lt;</span><span class=\"n\">Fragment</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">script</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">render_javascript</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">)}</span><span class=\"o\">&lt;/</span><span class=\"n\">script</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">add_url</span><span class=\"p\">}</span> <span class=\"n\">onsubmit</span><span class=\"o\">=</span><span class=\"s2\">\"return on_todo_add_submit(this);\"</span><span class=\"o\">&gt;</span>\n                    <span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"n\">New</span> <span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">}:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n                    <span class=\"o\">&lt;</span><span class=\"n\">button</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"submit\"</span><span class=\"o\">&gt;</span><span class=\"n\">Add</span><span class=\"o\">&lt;/</span><span class=\"n\">button</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">Fragment</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Notice the <tt>Fragment</tt> tag. It\u2019s a way to encapsulate many elements to be returned, like in React. It could have been a simple list but with comas at the end:</p>\n<pre><span class=\"k\">return</span> <span class=\"p\">[</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">script</span><span class=\"o\">&gt;...&lt;/</span><span class=\"n\">script</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">...</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n<span class=\"p\">]</span>\n</pre>\n<p>Now we want to add an item to the list. It\u2019s not the role of the <tt>TodoForm</tt> to do this, but to the list. So we\u2019ll add some JS in the <tt>TodoList</tt> component: a function that take some text and create a new entry.</p>\n<p>As for <tt>TodoForm</tt>, we add a <tt>render_javascript</tt> method with (still bad) javascript:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoList</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render_javascript</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n\n        <span class=\"n\">todo_placeholder</span> <span class=\"o\">=</span> <span class=\"o\">&lt;</span><span class=\"n\">Todo</span> <span class=\"n\">todo</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">TodoObject</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"o\">=</span><span class=\"s1\">'placeholder'</span><span class=\"p\">)}</span> <span class=\"o\">/&gt;</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Raw</span><span class=\"p\">(</span><span class=\"s2\">\"\"\"\nTODO_TEMPLATE = \"</span><span class=\"si\">%s</span><span class=\"s2\">\";\nfunction add_todo(text) {\n    var html = TODO_TEMPLATE.replace(\"placeholder\", text);\n    var ul = document.querySelector('#todo-items');\n    ul.innerHTML = html + ul.innerHTML;\n}\n        \"\"\"</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">todo_placeholder</span><span class=\"p\">))</span>\n</pre>\n<p>And we update our <tt>render</tt> method to add the <tt>&lt;script&gt;</tt> tag and an <tt>id</tt> to the <tt>ul</tt> tag, used in the javascript:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoList</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> \\\n            <span class=\"o\">&lt;</span><span class=\"n\">Fragment</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">script</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">render_javascript</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">)}</span><span class=\"o\">&lt;/</span><span class=\"n\">script</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">ul</span> <span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"s2\">\"todo-items\"</span><span class=\"o\">&gt;</span><span class=\"p\">{[</span><span class=\"o\">&lt;</span><span class=\"n\">Todo</span> <span class=\"n\">todo</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todo</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span> <span class=\"k\">for</span> <span class=\"n\">todo</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">todos</span><span class=\"p\">]}</span><span class=\"o\">&lt;/</span><span class=\"n\">ul</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">Fragment</span><span class=\"o\">&gt;</span>\n</pre>\n<p>And now we can update the <tt>render_javascript</tt> method of the <tt>TodoForm</tt> component to use our new <tt>add_toto</tt> javascript function:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render_javascript</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">Raw</span><span class=\"p\">(</span><span class=\"s2\">\"\"\"\nfunction on_todo_add_submit(form) {\n    var text = form.todo.value;\n    add_todo(text);\n}\n        \"\"\"</span><span class=\"p\">)</span>\n</pre>\n<p>And that\u2019s all. Nothing special, in fact.</p>\n<p>But let\u2019s take a look at the output of ou <tt>TodoApp</tt>:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">UserContext</span> <span class=\"n\">authenticated_user_id</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">User</span><span class=\"o\">&gt;</span>\n<span class=\"p\">)</span>\n</pre>\n<p>The beautified output is:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n        <span class=\"kd\">function</span> <span class=\"nx\">on_todo_add_submit</span><span class=\"p\">(</span><span class=\"nx\">form</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n            <span class=\"kd\">var</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"nx\">form</span><span class=\"p\">.</span><span class=\"nx\">todo</span><span class=\"p\">.</span><span class=\"nx\">value</span><span class=\"p\">;</span>\n            <span class=\"nx\">add_todo</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">);</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/thing/add\"</span> <span class=\"na\">onsubmit</span><span class=\"o\">=</span><span class=\"s\">\"return on_todo_add_submit(this);\"</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New thing: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n        <span class=\"nx\">TODO_TEMPLATE</span> <span class=\"o\">=</span> <span class=\"s2\">\"&lt;li&gt;placeholder&lt;/li&gt;\"</span><span class=\"p\">;</span>\n\n        <span class=\"kd\">function</span> <span class=\"nx\">add_todo</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n            <span class=\"kd\">var</span> <span class=\"nx\">html</span> <span class=\"o\">=</span> <span class=\"nx\">TODO_TEMPLATE</span><span class=\"p\">.</span><span class=\"nx\">replace</span><span class=\"p\">(</span><span class=\"s2\">\"placeholder\"</span><span class=\"p\">,</span> <span class=\"nx\">text</span><span class=\"p\">);</span>\n            <span class=\"kd\">var</span> <span class=\"nx\">ul</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">querySelector</span><span class=\"p\">(</span><span class=\"s1\">'#todo-items'</span><span class=\"p\">);</span>\n            <span class=\"nx\">ul</span><span class=\"p\">.</span><span class=\"nx\">innerHTML</span> <span class=\"o\">=</span> <span class=\"nx\">html</span> <span class=\"o\">+</span> <span class=\"nx\">ul</span><span class=\"p\">.</span><span class=\"nx\">innerHTML</span><span class=\"p\">;</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">ul</span> <span class=\"na\">id</span><span class=\"o\">=</span><span class=\"s\">\"todo-items\"</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>1-1<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>1-2<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre>\n<p>So we have many <tt>script</tt> tag. It could be great to have only one.</p>\n<div id=\"collectors\">\n<h4>Collectors</h4>\n<p><tt>mixt</tt> comes with a way to \u201ccollect\u201d parts of what is rendered to put them somewhere else. We have at our disposal two simple collectors, to be used as components: <tt>JSCollector</tt> and <tt>CSSCollector</tt>.</p>\n<p>These components collect parts of their children tree.</p>\n<div id=\"collector-collect\">\n<h5>Collector.Collect</h5>\n<p>The first way is by using the collector <tt>Collect</tt> tag.</p>\n<p>First let\u2019s change our main call:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">JSCollector</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">JSCollector</span> <span class=\"n\">render_position</span><span class=\"o\">=</span><span class=\"s2\">\"after\"</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">UserContext</span> <span class=\"n\">authenticated_user_id</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"o\">/&gt;</span>\n        <span class=\"o\">&lt;/</span><span class=\"n\">User</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">JSCollector</span><span class=\"o\">&gt;</span>\n<span class=\"p\">)</span>\n</pre>\n<p>This will collect the content of all the <tt>JSCollector.Collect</tt> tag.</p>\n<p>Let\u2019s update our <tt>TodoForm</tt> and replace our <tt>script</tt> tag by a <tt>JSCollector.Collect</tt> tag:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoForm</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">callable</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span><span class=\"p\">):</span>\n            <span class=\"n\">add_url</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">add_url</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_url</span>\n\n        <span class=\"k\">return</span> \\\n                <span class=\"o\">&lt;</span><span class=\"n\">JSCollector</span><span class=\"o\">.</span><span class=\"n\">Collect</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">render_javascript</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">)}</span><span class=\"o\">&lt;/</span><span class=\"n\">JSCollector</span><span class=\"o\">.</span><span class=\"n\">Collect</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">form</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">\"post\"</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">add_url</span><span class=\"p\">}</span> <span class=\"n\">onsubmit</span><span class=\"o\">=</span><span class=\"s2\">\"return on_todo_add_submit(this);\"</span><span class=\"o\">&gt;</span>\n                    <span class=\"o\">&lt;</span><span class=\"n\">label</span><span class=\"o\">&gt;</span><span class=\"n\">New</span> <span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">type</span><span class=\"p\">}:</span> <span class=\"o\">&lt;/</span><span class=\"n\">label</span><span class=\"o\">&gt;&lt;</span><span class=\"n\">itext</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">\"todo\"</span> <span class=\"o\">/&gt;</span>\n                    <span class=\"o\">&lt;</span><span class=\"n\">button</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">\"submit\"</span><span class=\"o\">&gt;</span><span class=\"n\">Add</span><span class=\"o\">&lt;/</span><span class=\"n\">button</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;/</span><span class=\"n\">form</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">Fragment</span><span class=\"o\">&gt;</span>\n</pre>\n<p>We can do the same with the <tt>TodoList</tt>:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">TodoList</span><span class=\"p\">(</span><span class=\"n\">Element</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> \\\n            <span class=\"o\">&lt;</span><span class=\"n\">Fragment</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">JSCollector</span><span class=\"o\">.</span><span class=\"n\">Collect</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">render_javascript</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">)}</span><span class=\"o\">&lt;/</span><span class=\"n\">JSCollector</span><span class=\"o\">.</span><span class=\"n\">Collect</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">ul</span> <span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"s2\">\"todo-items\"</span><span class=\"o\">&gt;</span><span class=\"p\">{[</span><span class=\"o\">&lt;</span><span class=\"n\">Todo</span> <span class=\"n\">todo</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">todo</span><span class=\"p\">}</span> <span class=\"o\">/&gt;</span> <span class=\"k\">for</span> <span class=\"n\">todo</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">todos</span><span class=\"p\">]}</span><span class=\"o\">&lt;/</span><span class=\"n\">ul</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">Fragment</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Now let\u2019s run our updated code:</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">JSCollector</span> <span class=\"n\">render_position</span><span class=\"o\">=</span><span class=\"s2\">\"after\"</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">UserContext</span> <span class=\"n\">authenticated_user_id</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"o\">/&gt;</span>\n        <span class=\"o\">&lt;/</span><span class=\"n\">User</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">JSCollector</span><span class=\"o\">&gt;</span>\n<span class=\"p\">)</span>\n</pre>\n<p>The beautified output is:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/thing/add\"</span> <span class=\"na\">onsubmit</span><span class=\"o\">=</span><span class=\"s\">\"return on_todo_add_submit(this);\"</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New thing: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">ul</span> <span class=\"na\">id</span><span class=\"o\">=</span><span class=\"s\">\"todo-items\"</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>1-1<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>1-2<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text/javascript\"</span><span class=\"p\">&gt;</span>\n    <span class=\"kd\">function</span> <span class=\"nx\">on_todo_add_submit</span><span class=\"p\">(</span><span class=\"nx\">form</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"kd\">var</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"nx\">form</span><span class=\"p\">.</span><span class=\"nx\">todo</span><span class=\"p\">.</span><span class=\"nx\">value</span><span class=\"p\">;</span>\n        <span class=\"nx\">add_todo</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">);</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"nx\">TODO_TEMPLATE</span> <span class=\"o\">=</span> <span class=\"s2\">\"&lt;li&gt;placeholder&lt;/li&gt;\"</span><span class=\"p\">;</span>\n\n    <span class=\"kd\">function</span> <span class=\"nx\">add_todo</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"kd\">var</span> <span class=\"nx\">html</span> <span class=\"o\">=</span> <span class=\"nx\">TODO_TEMPLATE</span><span class=\"p\">.</span><span class=\"nx\">replace</span><span class=\"p\">(</span><span class=\"s2\">\"placeholder\"</span><span class=\"p\">,</span> <span class=\"nx\">text</span><span class=\"p\">);</span>\n        <span class=\"kd\">var</span> <span class=\"nx\">ul</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">querySelector</span><span class=\"p\">(</span><span class=\"s1\">'#todo-items'</span><span class=\"p\">);</span>\n        <span class=\"nx\">ul</span><span class=\"p\">.</span><span class=\"nx\">innerHTML</span> <span class=\"o\">=</span> <span class=\"nx\">html</span> <span class=\"o\">+</span> <span class=\"nx\">ul</span><span class=\"p\">.</span><span class=\"nx\">innerHTML</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n</pre>\n<p>As you can see, all the scripts are in a single <tt>script</tt> tag, at the end. More precisely, at the end of where the <tt>JSCollector</tt> tag was, because we used <tt><span class=\"pre\">render_position=\"after\"</span></tt>. Another possibility is <tt><span class=\"pre\">render_position=\"before\"</span></tt> to put this where the <tt>JSCollector</tt> tag started.</p>\n<p>All of this work exactly the same way for the <tt>CSSCollector</tt> tag, where content is put in a <tt>&lt;style <span class=\"pre\">type=\"text/css&gt;</span></tt> tag.</p>\n</div>\n<div id=\"render-js-css-methods\">\n<h5>render_[js|css] methods</h5>\n<p>As using JS/CSS is quite common in the HTML world, we added some sugar to make all of this even easier to do.</p>\n<p>If you have a <tt>render_js</tt> method, the <tt>JSCollector</tt> will automatically collect the result of this method. Same for <tt>CSSSelector</tt> and the <tt>render_css</tt> method.</p>\n<p>With this, no need for a <tt>JSCollector.Collect</tt> tag.</p>\n<p>To make this work in our example, in <tt>TodoForm</tt> and <tt>TodoList</tt>:</p>\n<ul>\n<li>remove the <tt>JSCollector.Collect</tt> tags</li>\n<li>remove the now unneeded <tt>Fragment</tt> tags</li>\n<li>rename the <tt>render_javascript</tt> methods to <tt>render_js</tt>.</li>\n<li>remove the call to <tt>html.Raw</tt> in <tt>render_js</tt> as it\u2019s not needed when the collector calls <tt>render_js</tt> itself: if the output is a string, it is considered a \u201craw\u201d one</li>\n</ul>\n<p>This way we have exactly the same result.</p>\n</div>\n<div id=\"render-js-css-global-methods\">\n<h5>render_[js|css]_global methods</h5>\n<p>It works now because we only have one instance of a child with a <tt>render_js</tt> method.</p>\n<p>But if we have many children, this method will be called for each child. If fact, it should only contains code that is very specific to this instance.</p>\n<p>To serve js/css only once for a Component class, we have to use <tt>render_js_global</tt> or <tt>render_css_global</tt> (expected to be <tt>classmethod</tt>)</p>\n<p>It will be collected the first time, and only the first time, an instance is found, before collecting the <tt>render_js</tt> method.</p>\n<p>So here, we can change our <tt>render_js</tt> to <tt>render_js_global</tt>, decorate them with <tt>@classmethod</tt> and it will still work the same.</p>\n</div>\n<div id=\"references\">\n<h5>references</h5>\n<p>We now are able to regroup javascript or style. But what if we want to put it elsewhere, like in the <tt>head</tt> tag or at the end of the <tt>body</tt> tag?</p>\n<p>It\u2019s possible with references, aka \u201crefs\u201d. It\u2019s the same context as in React, without the DOM part of course.</p>\n<p>You create a ref, pass it to a component, and you can use it anywhere.</p>\n<p>Let\u2019s update our main code to do this.</p>\n<p>First we create a ref.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">mixt</span> <span class=\"kn\">import</span> <span class=\"n\">Ref</span>\n\n<span class=\"n\">js_ref</span> <span class=\"o\">=</span> <span class=\"n\">Ref</span><span class=\"p\">()</span>\n</pre>\n<p>This will create a new object that will hold a reference to a component. In a component, you don\u2019t need to import <tt>Ref</tt> and can use <tt>js_ref = self.add_ref()</tt>, but we are not in a component here.</p>\n<p>To save a ref, we simply pass it to the <tt>ref</tt> prop:</p>\n<pre><span class=\"o\">&lt;</span><span class=\"n\">JSCollector</span> <span class=\"n\">ref</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">js_ref</span><span class=\"p\">}</span> <span class=\"o\">&gt;...&lt;/</span><span class=\"n\">JSCollector</span><span class=\"o\">&gt;</span>\n</pre>\n<p>Notice that we removed the <tt>render_position</tt> prop, because now we don\u2019t want the JS to be put before or after the tag, but elsewhere.</p>\n<p>To access the component referenced by a ref, use the <tt>current</tt> attribute:</p>\n<pre><span class=\"n\">js_collector</span> <span class=\"o\">=</span> <span class=\"n\">js_ref</span><span class=\"o\">.</span><span class=\"n\">current</span>\n</pre>\n<p>Of course this can be done only AFTER the rendering.</p>\n<p>How can we use this to add a <tt>script</tt> tag in our <tt>head</tt>.</p>\n<p>First update our html to include the classic <tt>html</tt>, <tt>head</tt> and <tt>body</tt> tags:</p>\n<pre><span class=\"k\">return</span> <span class=\"nb\">str</span><span class=\"p\">(</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">html</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">head</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;/</span><span class=\"n\">head</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">body</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">JSCollector</span> <span class=\"n\">ref</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"n\">js_ref</span><span class=\"p\">}</span> <span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">UserContext</span> <span class=\"n\">authenticated_user_id</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"o\">&gt;</span>\n                    <span class=\"o\">&lt;</span><span class=\"n\">ThingApp</span> <span class=\"o\">/&gt;</span>\n                <span class=\"o\">&lt;/</span><span class=\"n\">UserContext</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">JSCollector</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;/</span><span class=\"n\">body</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">html</span><span class=\"o\">&gt;</span>\n<span class=\"p\">)</span>\n</pre>\n<p>At this point we don\u2019t have any <tt>script</tt> tag in the output:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/thing/add\"</span> <span class=\"na\">onsubmit</span><span class=\"o\">=</span><span class=\"s\">\"return on_todo_add_submit(this);\"</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New thing: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">ul</span> <span class=\"na\">id</span><span class=\"o\">=</span><span class=\"s\">\"todo-items\"</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>1-1<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>1-2<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</pre>\n<p>First thing to know: a collector is able to render all the things it collected by calliing its <tt>render_collected</tt> method.</p>\n<p>And remembering that it already includes the <tt>script</tt> tag, we may want to do this:</p>\n<pre><span class=\"c1\"># ...</span>\n<span class=\"o\">&lt;</span><span class=\"n\">head</span><span class=\"o\">&gt;</span>\n    <span class=\"p\">{</span><span class=\"n\">js_ref</span><span class=\"o\">.</span><span class=\"n\">current</span><span class=\"o\">.</span><span class=\"n\">render_collected</span><span class=\"p\">()}</span>\n<span class=\"o\">&lt;/</span><span class=\"n\">head</span><span class=\"o\">&gt;</span>\n<span class=\"c1\"># ...</span>\n</pre>\n<p>but this doesn\u2019t work:</p>\n<pre><span class=\"ne\">AttributeError</span><span class=\"p\">:</span> <span class=\"s1\">'NoneType'</span> <span class=\"nb\">object</span> <span class=\"n\">has</span> <span class=\"n\">no</span> <span class=\"n\">attribute</span> <span class=\"s1\">'render_collected'</span>\n</pre>\n<p>It\u2019s because we try to access the current value at render time. It must be done after.</p>\n<p>For this, we can use a feature of <tt>mixt</tt>: if something added to the tree is a callable, it will be called after the rendering, when converting to string.</p>\n<p>So we can use for example a lambda:</p>\n<pre><span class=\"c1\"># ...</span>\n<span class=\"o\">&lt;</span><span class=\"n\">head</span><span class=\"o\">&gt;</span>\n    <span class=\"p\">{</span><span class=\"k\">lambda</span><span class=\"p\">:</span> <span class=\"n\">js_ref</span><span class=\"o\">.</span><span class=\"n\">current</span><span class=\"o\">.</span><span class=\"n\">render_collected</span><span class=\"p\">()}</span>\n<span class=\"o\">&lt;/</span><span class=\"n\">head</span><span class=\"o\">&gt;</span>\n<span class=\"c1\"># ...</span>\n</pre>\n<p>And now it works:</p>\n<pre><span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text/javascript\"</span><span class=\"p\">&gt;</span>\n        <span class=\"kd\">function</span> <span class=\"nx\">on_todo_add_submit</span><span class=\"p\">(</span><span class=\"nx\">form</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n            <span class=\"kd\">var</span> <span class=\"nx\">text</span> <span class=\"o\">=</span> <span class=\"nx\">form</span><span class=\"p\">.</span><span class=\"nx\">todo</span><span class=\"p\">.</span><span class=\"nx\">value</span><span class=\"p\">;</span>\n            <span class=\"nx\">add_todo</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">);</span>\n        <span class=\"p\">}</span>\n\n        <span class=\"nx\">TODO_TEMPLATE</span> <span class=\"o\">=</span> <span class=\"s2\">\"&lt;li&gt;placeholder&lt;/li&gt;\"</span><span class=\"p\">;</span>\n\n        <span class=\"kd\">function</span> <span class=\"nx\">add_todo</span><span class=\"p\">(</span><span class=\"nx\">text</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n            <span class=\"kd\">var</span> <span class=\"nx\">html</span> <span class=\"o\">=</span> <span class=\"nx\">TODO_TEMPLATE</span><span class=\"p\">.</span><span class=\"nx\">replace</span><span class=\"p\">(</span><span class=\"s2\">\"placeholder\"</span><span class=\"p\">,</span> <span class=\"nx\">text</span><span class=\"p\">);</span>\n            <span class=\"kd\">var</span> <span class=\"nx\">ul</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">querySelector</span><span class=\"p\">(</span><span class=\"s1\">'#todo-items'</span><span class=\"p\">);</span>\n            <span class=\"nx\">ul</span><span class=\"p\">.</span><span class=\"nx\">innerHTML</span> <span class=\"o\">=</span> <span class=\"nx\">html</span> <span class=\"o\">+</span> <span class=\"nx\">ul</span><span class=\"p\">.</span><span class=\"nx\">innerHTML</span><span class=\"p\">;</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>The \"thing\" list<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">form</span> <span class=\"na\">method</span><span class=\"o\">=</span><span class=\"s\">\"post\"</span> <span class=\"na\">action</span><span class=\"o\">=</span><span class=\"s\">\"/thing/add\"</span> <span class=\"na\">onsubmit</span><span class=\"o\">=</span><span class=\"s\">\"return on_todo_add_submit(this);\"</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>New thing: <span class=\"p\">&lt;/</span><span class=\"nt\">label</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text\"</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">\"todo\"</span> <span class=\"p\">/&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">button</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"submit\"</span><span class=\"p\">&gt;</span>Add<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;/</span><span class=\"nt\">form</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">ul</span> <span class=\"na\">id</span><span class=\"o\">=</span><span class=\"s\">\"todo-items\"</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>1-1<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>1-2<span class=\"p\">&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</pre>\n</div>\n</div>\n</div>\n<div id=\"user-guide-conclusion\">\n<h3>User guide conclusion</h3>\n<p>Hurray we made it! All the main features of <tt>mixt</tt> explained. You can now use <tt>mixt</tt> in your ovn projects.</p>\n</div>\n</div>\n<div id=\"api\">\n<h2>API</h2>\n<p>As a next step, you may want to read <a href=\"https://twidi.github.io/mixt/api.html\" rel=\"nofollow\">the API documentation</a>.</p>\n</div>\n\n          </div>"}, "last_serial": 4097465, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "1b92fac53cbef8aa687a120cf6174a95", "sha256": "73367cf4f3ebb9cc97707327da49612bfdfac4e9c485e78ad8135994587c7ff8"}, "downloads": -1, "filename": "mixt-0.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "1b92fac53cbef8aa687a120cf6174a95", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 28684, "upload_time": "2018-06-03T21:10:31", "upload_time_iso_8601": "2018-06-03T21:10:31.069685Z", "url": "https://files.pythonhosted.org/packages/bf/0c/a3bbff3e90c4174d518f3b1d193ab5f47f6157b8b9856a9efd69aff645ef/mixt-0.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d27b064332437ff99bfd3fb23f7f8fb2", "sha256": "c6aa3188ad4ed8b97c1af0e5857aedcfcdee767b33ed82b12448b9d7e896b4cb"}, "downloads": -1, "filename": "mixt-0.1.tar.gz", "has_sig": false, "md5_digest": "d27b064332437ff99bfd3fb23f7f8fb2", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 25345, "upload_time": "2018-06-03T21:10:32", "upload_time_iso_8601": "2018-06-03T21:10:32.156494Z", "url": "https://files.pythonhosted.org/packages/d6/33/1540fa8a50b9a69a89ad6e5ebf567644237bb59e71581ac1f16dba8a1a27/mixt-0.1.tar.gz", "yanked": false}], "0.2": [{"comment_text": "", "digests": {"md5": "270f660878c7400afecaed6cfeeba6f7", "sha256": "48c45ad344d2bc2a8fd792c0fbae47d51eed0cacc88b594907c7cfb3ac2c7240"}, "downloads": -1, "filename": "mixt-0.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "270f660878c7400afecaed6cfeeba6f7", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 61379, "upload_time": "2018-06-09T06:56:21", "upload_time_iso_8601": "2018-06-09T06:56:21.749064Z", "url": "https://files.pythonhosted.org/packages/22/40/dfa10fe449a2826090bab7e507d6319997eb4c3d9adaa6a06189b6512b68/mixt-0.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "52009445d8d95039bf98785081238cb4", "sha256": "a756d1166dd0ccfd78a20eeccffc4bb589ca18af22ab81e01b09d38a8d58f6c3"}, "downloads": -1, "filename": "mixt-0.2.tar.gz", "has_sig": false, "md5_digest": "52009445d8d95039bf98785081238cb4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 74968, "upload_time": "2018-06-09T06:56:26", "upload_time_iso_8601": "2018-06-09T06:56:26.428773Z", "url": "https://files.pythonhosted.org/packages/d6/cf/c5d6dd5a7cba661ebcf7346847f06d5a8eb0e2ad7d9a1a7e3a0c48d4f1ec/mixt-0.2.tar.gz", "yanked": false}], "0.3": [{"comment_text": "", "digests": {"md5": "2e2a5d40c1fa7b5a1625258ed8bbfa28", "sha256": "a625efd12932f80c19815290e532eef8215b699d3d84cdb95139a2e8694bcdd2"}, "downloads": -1, "filename": "mixt-0.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "2e2a5d40c1fa7b5a1625258ed8bbfa28", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 67919, "upload_time": "2018-06-13T16:43:02", "upload_time_iso_8601": "2018-06-13T16:43:02.220240Z", "url": "https://files.pythonhosted.org/packages/fd/da/dde04e0c9de11f32c3359d0ff52f7a777ed1fd8264ec16c1985a326b7d6d/mixt-0.3-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "2e44eb2d941134f71426fc97eae2cc28", "sha256": "c1c187e4cfd9240d0a60f762b2075205a3edd42e1e291f0380f61555d7602973"}, "downloads": -1, "filename": "mixt-0.3.tar.gz", "has_sig": false, "md5_digest": "2e44eb2d941134f71426fc97eae2cc28", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 86755, "upload_time": "2018-06-13T16:43:04", "upload_time_iso_8601": "2018-06-13T16:43:04.081836Z", "url": "https://files.pythonhosted.org/packages/ec/54/c5e51736c5613f702c48865605b873bee0d40ffeb6579b59edec0fc45abc/mixt-0.3.tar.gz", "yanked": false}], "0.4": [{"comment_text": "", "digests": {"md5": "a1deb734a300d09cbee978ed373e3522", "sha256": "b9a2e3c8d7665752090a2550df0ea7911fc2bbda125ff3bd9a3d10bee31326aa"}, "downloads": -1, "filename": "mixt-0.4-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "a1deb734a300d09cbee978ed373e3522", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 78471, "upload_time": "2018-06-26T20:09:47", "upload_time_iso_8601": "2018-06-26T20:09:47.162126Z", "url": "https://files.pythonhosted.org/packages/0e/cb/052c94261655d3bbd8d136fc4776a991fa7d1c244f951806ef37f99c16af/mixt-0.4-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "02352411c306dbeaad4ab1086692fd1a", "sha256": "dfab335980bd17a477e353e668a18e6b8cf59e546e90a9175d7237076547b87f"}, "downloads": -1, "filename": "mixt-0.4.tar.gz", "has_sig": false, "md5_digest": "02352411c306dbeaad4ab1086692fd1a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 96900, "upload_time": "2018-06-26T20:09:49", "upload_time_iso_8601": "2018-06-26T20:09:49.020621Z", "url": "https://files.pythonhosted.org/packages/2c/60/b0a1b9fc02cc138b73c4fe60d599d54f901c4fe2358aae3c4dfc99e31c89/mixt-0.4.tar.gz", "yanked": false}], "1.0": [{"comment_text": "", "digests": {"md5": "9b101fdf13e14d2012615700d1a45895", "sha256": "0443291cad883e4466b7c91673893ac690fc501969a4908380f58904b4c67c6d"}, "downloads": -1, "filename": "mixt-1.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "9b101fdf13e14d2012615700d1a45895", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 78488, "upload_time": "2018-06-26T20:10:20", "upload_time_iso_8601": "2018-06-26T20:10:20.807708Z", "url": "https://files.pythonhosted.org/packages/e5/fe/b6809ef82a9c4a564b366a24c935c7bb3cae2d242767eb2feddd4b800db4/mixt-1.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "9a47cf3ad71dd347850c39d53326ed3a", "sha256": "3414761ee6521b575313dcfb613447f24752db20eefa0274785f3b3bc68c39a2"}, "downloads": -1, "filename": "mixt-1.0.tar.gz", "has_sig": false, "md5_digest": "9a47cf3ad71dd347850c39d53326ed3a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 96939, "upload_time": "2018-06-26T20:10:22", "upload_time_iso_8601": "2018-06-26T20:10:22.598083Z", "url": "https://files.pythonhosted.org/packages/6d/80/5e6003ff4c5c6a6cb8ebdcaf8b40cbe7590c9cdc75069469f86b663e54eb/mixt-1.0.tar.gz", "yanked": false}], "1.1": [{"comment_text": "", "digests": {"md5": "f5b66e90285b35846b2f2ce66f9538e5", "sha256": "76c7dcf0fcd6d95686e448d5961bb2a14d144438314534bdcb99ab55080d7117"}, "downloads": -1, "filename": "mixt-1.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "f5b66e90285b35846b2f2ce66f9538e5", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 114618, "upload_time": "2018-07-20T19:24:11", "upload_time_iso_8601": "2018-07-20T19:24:11.595911Z", "url": "https://files.pythonhosted.org/packages/57/ce/d9cd9ce1fecf7b1f1ddb2c0cd65720369d2575fccaec2b0e08b6a71af9cc/mixt-1.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "ce1315850c9d1176c0bf6351d4e6b558", "sha256": "8e28ac97eb75237bda08d3a758b02d8f7109821aad69f68ea15298891448e766"}, "downloads": -1, "filename": "mixt-1.1.tar.gz", "has_sig": false, "md5_digest": "ce1315850c9d1176c0bf6351d4e6b558", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 129994, "upload_time": "2018-07-20T19:24:13", "upload_time_iso_8601": "2018-07-20T19:24:13.493292Z", "url": "https://files.pythonhosted.org/packages/16/aa/ad5a484b9d16028dca0082d0bce375584579f50f593931c5e621791cfe28/mixt-1.1.tar.gz", "yanked": false}], "1.1.1": [{"comment_text": "", "digests": {"md5": "c5ea76da3f2159292b90b66c7181d7f3", "sha256": "d444b630ff52fcae1c1628e60561fc30903b97dba12f5b9bb0f4715f31722423"}, "downloads": -1, "filename": "mixt-1.1.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "c5ea76da3f2159292b90b66c7181d7f3", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 114702, "upload_time": "2018-07-20T19:56:37", "upload_time_iso_8601": "2018-07-20T19:56:37.293514Z", "url": "https://files.pythonhosted.org/packages/6c/ad/3258399c9d754f3e1ce22db442b0618ea499b6bd89afa82150fe9519193c/mixt-1.1.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "83ea25fe6a3810856a9c448cd8215ea8", "sha256": "d5fce55c79f69851cbf2c41a257235ad433f98463d85dd170b2f6d9b2aa995ba"}, "downloads": -1, "filename": "mixt-1.1.1.tar.gz", "has_sig": false, "md5_digest": "83ea25fe6a3810856a9c448cd8215ea8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 130173, "upload_time": "2018-07-20T19:56:39", "upload_time_iso_8601": "2018-07-20T19:56:39.043515Z", "url": "https://files.pythonhosted.org/packages/6e/c3/2b42842dace0da40a1fe00f0a6d03e0f79c6bb3f7371bdb642450d4699fe/mixt-1.1.1.tar.gz", "yanked": false}], "1.1.2": [{"comment_text": "", "digests": {"md5": "489dc2b7260b959316ef4de9805a46d6", "sha256": "c818135693c364c6bb83cda19b15e1c10367b13444f42861a8566f21e1834162"}, "downloads": -1, "filename": "mixt-1.1.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "489dc2b7260b959316ef4de9805a46d6", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 114737, "upload_time": "2018-07-20T20:05:54", "upload_time_iso_8601": "2018-07-20T20:05:54.075522Z", "url": "https://files.pythonhosted.org/packages/5c/d1/7d4b9e4bf0ef2b3226ee7792110f30d6fa67b38f919532275d2a7694306a/mixt-1.1.2-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1302f151cc7fbb9735e099af4315fef6", "sha256": "f90103ee9be96039c862683cd6ad3d97bf4f971cc240b871ae4fd92edcf252f4"}, "downloads": -1, "filename": "mixt-1.1.2.tar.gz", "has_sig": false, "md5_digest": "1302f151cc7fbb9735e099af4315fef6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 130284, "upload_time": "2018-07-20T20:05:55", "upload_time_iso_8601": "2018-07-20T20:05:55.796939Z", "url": "https://files.pythonhosted.org/packages/f0/2b/c366e14a870f25f097bcadd03c93ca9127f8572bd8dcc8b6080a65b4c085/mixt-1.1.2.tar.gz", "yanked": false}], "1.1.3": [{"comment_text": "", "digests": {"md5": "c9b2d9d171d39bceffd854de74c0bded", "sha256": "626be906d6c503b4db419ca96b6580f229e308ca3eece381405bd4b039f3ecb5"}, "downloads": -1, "filename": "mixt-1.1.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "c9b2d9d171d39bceffd854de74c0bded", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 118232, "upload_time": "2018-07-24T15:36:08", "upload_time_iso_8601": "2018-07-24T15:36:08.996818Z", "url": "https://files.pythonhosted.org/packages/21/cb/a816a4e3e0e2e88a5681790f2919c93d80d231c4ac7fe95b4b1f01f26aeb/mixt-1.1.3-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f0246351de384376b593a7eabe1eda34", "sha256": "57cf0b386a2e82c47b8cb8a3aa5f2b04af753c4ecf0e6d2611e07e64fda745e5"}, "downloads": -1, "filename": "mixt-1.1.3.tar.gz", "has_sig": false, "md5_digest": "f0246351de384376b593a7eabe1eda34", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 133669, "upload_time": "2018-07-24T15:36:10", "upload_time_iso_8601": "2018-07-24T15:36:10.905920Z", "url": "https://files.pythonhosted.org/packages/73/0e/7e43dea8301717f8d38411bfac7745da13484304250dee26b7390c3754c5/mixt-1.1.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "c9b2d9d171d39bceffd854de74c0bded", "sha256": "626be906d6c503b4db419ca96b6580f229e308ca3eece381405bd4b039f3ecb5"}, "downloads": -1, "filename": "mixt-1.1.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "c9b2d9d171d39bceffd854de74c0bded", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 118232, "upload_time": "2018-07-24T15:36:08", "upload_time_iso_8601": "2018-07-24T15:36:08.996818Z", "url": "https://files.pythonhosted.org/packages/21/cb/a816a4e3e0e2e88a5681790f2919c93d80d231c4ac7fe95b4b1f01f26aeb/mixt-1.1.3-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f0246351de384376b593a7eabe1eda34", "sha256": "57cf0b386a2e82c47b8cb8a3aa5f2b04af753c4ecf0e6d2611e07e64fda745e5"}, "downloads": -1, "filename": "mixt-1.1.3.tar.gz", "has_sig": false, "md5_digest": "f0246351de384376b593a7eabe1eda34", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 133669, "upload_time": "2018-07-24T15:36:10", "upload_time_iso_8601": "2018-07-24T15:36:10.905920Z", "url": "https://files.pythonhosted.org/packages/73/0e/7e43dea8301717f8d38411bfac7745da13484304250dee26b7390c3754c5/mixt-1.1.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:53:53 2020"}