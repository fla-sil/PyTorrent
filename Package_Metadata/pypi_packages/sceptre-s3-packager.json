{"info": {"author": "Henrik Steen", "author_email": "", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3"], "description": "# sceptre-s3-packager\n\n[![CircleCI](https://circleci.com/gh/henrist/sceptre-s3-packager.svg?style=svg)](https://circleci.com/gh/henrist/sceptre-s3-packager)\n[![PyPI version](https://badge.fury.io/py/sceptre-s3-packager.svg)](https://badge.fury.io/py/sceptre-s3-packager)\n![PyPI - Downloads](https://img.shields.io/pypi/dm/sceptre-s3-packager)\n\nHook and resolver for [Sceptre](https://sceptre.cloudreach.com/latest/) `v2` to\npackage code dependencies and uploading it to an S3 bucket for usage in a\ntemplate.\n\nInspired by https://github.com/cloudreach/sceptre-zip-code-s3\n\n## Getting started\n\nOnly Python 3 is actively being supported.\n\nInstall using pip:\n\n```bash\npip install sceptre-s3-packager\n```\n\nUse the hook and resolver in your template config:\n\n```yaml\ntemplate_path: ...\nhooks:\n  before_create:\n    - !sceptre_s3_upload ./directory-to-zip-to-s3\n  before_update:\n    - !sceptre_s3_upload ./directory-to-zip-to-s3\nsceptre_user_data:\n  Code:\n    S3Bucket: my-s3-bucket\n    S3Key: !sceptre_s3_key ./directory-to-zip-to-s3\n```\n\nUse the data in the template, e.g. by using Jinja2 template with something\nlike:\n\n```yaml\n  MyLambda:\n    Type: AWS::Lambda::Function\n    Properties:\n      Code:\n        S3Bucket: {{ sceptre_user_data.Code.S3Bucket }}\n        S3Key: {{ sceptre_user_data.Code.S3Key }}\n```\n\n## Usage\n\nHook:\n\n- `!sceptre_s3_upload <directory>` (reads `S3Bucket` from\n  `sceptre_user_data.Code.S3Bucket`)\n- `!sceptre_s3_upload <directory>^^<s3-bucket>`\n\nResolver:\n\n- `!sceptre_s3_key <directory>` (returns a path where the packaged\n  directory is uploaded, e.g. `sceptre/68063a99bb6d95401d688d28f19ee412`)\n\n## Details\n\nThe hook will zip the contents of the directory and upload it as\n`sceptre/MD5HASH` to the S3-bucket, with `MD5HASH` being md5 hash of the zip\nfile content.\n\nWhen zipping all files will be given a fixed modification time, so that only\nthe contents of the files are used to determine the upload file and cause\ninvalidation on changes.\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/henrist/sceptre-s3-packager", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "sceptre-s3-packager", "package_url": "https://pypi.org/project/sceptre-s3-packager/", "platform": "", "project_url": "https://pypi.org/project/sceptre-s3-packager/", "project_urls": {"Homepage": "https://github.com/henrist/sceptre-s3-packager"}, "release_url": "https://pypi.org/project/sceptre-s3-packager/0.3.0/", "requires_dist": ["sceptre (>=2)"], "requires_python": "", "summary": "S3 packager for Sceptre 2", "version": "0.3.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>sceptre-s3-packager</h1>\n<p><a href=\"https://circleci.com/gh/henrist/sceptre-s3-packager\" rel=\"nofollow\"><img alt=\"CircleCI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/124df7977349c25fc95acb5a388613316e608c66/68747470733a2f2f636972636c6563692e636f6d2f67682f68656e726973742f736365707472652d73332d7061636b616765722e7376673f7374796c653d737667\"></a>\n<a href=\"https://badge.fury.io/py/sceptre-s3-packager\" rel=\"nofollow\"><img alt=\"PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ed4c476d7718c87b91549154c8aa6e37db85c5ba/68747470733a2f2f62616467652e667572792e696f2f70792f736365707472652d73332d7061636b616765722e737667\"></a>\n<img alt=\"PyPI - Downloads\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/df48b863519abdd3fdcbaabf080e82ab7458795e/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f736365707472652d73332d7061636b61676572\"></p>\n<p>Hook and resolver for <a href=\"https://sceptre.cloudreach.com/latest/\" rel=\"nofollow\">Sceptre</a> <code>v2</code> to\npackage code dependencies and uploading it to an S3 bucket for usage in a\ntemplate.</p>\n<p>Inspired by <a href=\"https://github.com/cloudreach/sceptre-zip-code-s3\" rel=\"nofollow\">https://github.com/cloudreach/sceptre-zip-code-s3</a></p>\n<h2>Getting started</h2>\n<p>Only Python 3 is actively being supported.</p>\n<p>Install using pip:</p>\n<pre>pip install sceptre-s3-packager\n</pre>\n<p>Use the hook and resolver in your template config:</p>\n<pre><span class=\"nt\">template_path</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">...</span>\n<span class=\"nt\">hooks</span><span class=\"p\">:</span>\n  <span class=\"nt\">before_create</span><span class=\"p\">:</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"kt\">!sceptre_s3_upload</span> <span class=\"l l-Scalar l-Scalar-Plain\">./directory-to-zip-to-s3</span>\n  <span class=\"nt\">before_update</span><span class=\"p\">:</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"kt\">!sceptre_s3_upload</span> <span class=\"l l-Scalar l-Scalar-Plain\">./directory-to-zip-to-s3</span>\n<span class=\"nt\">sceptre_user_data</span><span class=\"p\">:</span>\n  <span class=\"nt\">Code</span><span class=\"p\">:</span>\n    <span class=\"nt\">S3Bucket</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">my-s3-bucket</span>\n    <span class=\"nt\">S3Key</span><span class=\"p\">:</span> <span class=\"kt\">!sceptre_s3_key</span> <span class=\"l l-Scalar l-Scalar-Plain\">./directory-to-zip-to-s3</span>\n</pre>\n<p>Use the data in the template, e.g. by using Jinja2 template with something\nlike:</p>\n<pre>  <span class=\"nt\">MyLambda</span><span class=\"p\">:</span>\n    <span class=\"nt\">Type</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">AWS::Lambda::Function</span>\n    <span class=\"nt\">Properties</span><span class=\"p\">:</span>\n      <span class=\"nt\">Code</span><span class=\"p\">:</span>\n        <span class=\"nt\">S3Bucket</span><span class=\"p\">:</span> <span class=\"p p-Indicator\">{{</span> <span class=\"nv\">sceptre_user_data.Code.S3Bucket</span> <span class=\"p p-Indicator\">}}</span>\n        <span class=\"nt\">S3Key</span><span class=\"p\">:</span> <span class=\"p p-Indicator\">{{</span> <span class=\"nv\">sceptre_user_data.Code.S3Key</span> <span class=\"p p-Indicator\">}}</span>\n</pre>\n<h2>Usage</h2>\n<p>Hook:</p>\n<ul>\n<li><code>!sceptre_s3_upload &lt;directory&gt;</code> (reads <code>S3Bucket</code> from\n<code>sceptre_user_data.Code.S3Bucket</code>)</li>\n<li><code>!sceptre_s3_upload &lt;directory&gt;^^&lt;s3-bucket&gt;</code></li>\n</ul>\n<p>Resolver:</p>\n<ul>\n<li><code>!sceptre_s3_key &lt;directory&gt;</code> (returns a path where the packaged\ndirectory is uploaded, e.g. <code>sceptre/68063a99bb6d95401d688d28f19ee412</code>)</li>\n</ul>\n<h2>Details</h2>\n<p>The hook will zip the contents of the directory and upload it as\n<code>sceptre/MD5HASH</code> to the S3-bucket, with <code>MD5HASH</code> being md5 hash of the zip\nfile content.</p>\n<p>When zipping all files will be given a fixed modification time, so that only\nthe contents of the files are used to determine the upload file and cause\ninvalidation on changes.</p>\n\n          </div>"}, "last_serial": 5866307, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "35b6e4d8e3f4cf2c4b665aa0dcbd7dcc", "sha256": "b99b6732d20ea91c7bdbe5c7294eac5bf9c9ba037b15d594081d1471c9177b62"}, "downloads": -1, "filename": "sceptre_s3_packager-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "35b6e4d8e3f4cf2c4b665aa0dcbd7dcc", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5153, "upload_time": "2019-01-02T03:57:12", "upload_time_iso_8601": "2019-01-02T03:57:12.072041Z", "url": "https://files.pythonhosted.org/packages/66/ed/56bd87cfb3126bb3e17825f5363222d81aa87b557280ce7bc084ff4bd709/sceptre_s3_packager-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "98fa94262f8d72bb3a650b2d5736cd1e", "sha256": "0994206f2afe629c0a5294572530c3c29bb413ed21f82f1f8e1b0dc6ce88506b"}, "downloads": -1, "filename": "sceptre_s3_packager-0.1.0.tar.gz", "has_sig": false, "md5_digest": "98fa94262f8d72bb3a650b2d5736cd1e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3628, "upload_time": "2019-01-02T03:57:14", "upload_time_iso_8601": "2019-01-02T03:57:14.028188Z", "url": "https://files.pythonhosted.org/packages/d0/be/e1b6f2ea48d079e2b33f42d2f5b31c3bee03662658022b20731d6ad9a608/sceptre_s3_packager-0.1.0.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "83b1c80df5cceb21d30748bc81ecd11d", "sha256": "e590e7e5ea6cbc1c4a661c52620ba004cfb88f8e3c5ff18375c3ac0b89f2fd58"}, "downloads": -1, "filename": "sceptre_s3_packager-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "83b1c80df5cceb21d30748bc81ecd11d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5168, "upload_time": "2019-01-02T04:37:20", "upload_time_iso_8601": "2019-01-02T04:37:20.189874Z", "url": "https://files.pythonhosted.org/packages/a1/50/c9880180daf301c20c47f7368224f51fedaa794fcf1ce7ff136f1d5f3a3d/sceptre_s3_packager-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "1e6bbdda736851dd19ac02aa4a5aabdb", "sha256": "eab1ac641af3566978138926eabf05a98152dfa7083a439354400e4cb25779a1"}, "downloads": -1, "filename": "sceptre_s3_packager-0.2.0.tar.gz", "has_sig": false, "md5_digest": "1e6bbdda736851dd19ac02aa4a5aabdb", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3639, "upload_time": "2019-01-02T04:37:21", "upload_time_iso_8601": "2019-01-02T04:37:21.413059Z", "url": "https://files.pythonhosted.org/packages/56/67/13c5bee6f1e456bba467a8d0b31d0b2560dfa953fc5982d0b6504c5dc0ba/sceptre_s3_packager-0.2.0.tar.gz", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "24d5e3efdefefd5499bd8fc521d34753", "sha256": "1524a88850867859db2a6e97c9954bffc1ef459690f1f5b9d9f8359bc713d440"}, "downloads": -1, "filename": "sceptre_s3_packager-0.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "24d5e3efdefefd5499bd8fc521d34753", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5121, "upload_time": "2019-09-21T13:49:05", "upload_time_iso_8601": "2019-09-21T13:49:05.420580Z", "url": "https://files.pythonhosted.org/packages/be/e6/2e1249272183e752f7f9d63d14c5a0078c3b91f2142279d741538c457091/sceptre_s3_packager-0.2.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "878e2947d0e82b469eecc2e7c6da4367", "sha256": "b83653d0d55553995f6151a2662644dc32e8706ef7d85b27025218df42a49959"}, "downloads": -1, "filename": "sceptre_s3_packager-0.2.1.tar.gz", "has_sig": false, "md5_digest": "878e2947d0e82b469eecc2e7c6da4367", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3592, "upload_time": "2019-09-21T13:49:07", "upload_time_iso_8601": "2019-09-21T13:49:07.110175Z", "url": "https://files.pythonhosted.org/packages/24/f2/1042ef599d6e52d58dfe46888612a035b10821f57315303b915f22369bb4/sceptre_s3_packager-0.2.1.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "8b8fd7a71c7792b2be450a25ed237ed1", "sha256": "d8bffa5ffdd5c2f9cd36ee92632929b2677a4a80b41b52ced615b88272ff6a12"}, "downloads": -1, "filename": "sceptre_s3_packager-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8b8fd7a71c7792b2be450a25ed237ed1", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5236, "upload_time": "2019-09-21T15:15:04", "upload_time_iso_8601": "2019-09-21T15:15:04.328980Z", "url": "https://files.pythonhosted.org/packages/5f/7a/03ad70d53d36e9cf5e059ea6caad5ab7e00981ba106498f1a462f18a3f9e/sceptre_s3_packager-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "020ca2ccdbba7e7318e8ffcd3bda43c8", "sha256": "d5347d4978690034c9c8e2e764ff634fb5c5209cce59531118435370b2e2e1c5"}, "downloads": -1, "filename": "sceptre_s3_packager-0.3.0.tar.gz", "has_sig": false, "md5_digest": "020ca2ccdbba7e7318e8ffcd3bda43c8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3727, "upload_time": "2019-09-21T15:15:05", "upload_time_iso_8601": "2019-09-21T15:15:05.865029Z", "url": "https://files.pythonhosted.org/packages/3c/34/8792e29a643624b25cd9d754805580b14c58a954bd5d6137f5ed15c7603c/sceptre_s3_packager-0.3.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "8b8fd7a71c7792b2be450a25ed237ed1", "sha256": "d8bffa5ffdd5c2f9cd36ee92632929b2677a4a80b41b52ced615b88272ff6a12"}, "downloads": -1, "filename": "sceptre_s3_packager-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "8b8fd7a71c7792b2be450a25ed237ed1", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5236, "upload_time": "2019-09-21T15:15:04", "upload_time_iso_8601": "2019-09-21T15:15:04.328980Z", "url": "https://files.pythonhosted.org/packages/5f/7a/03ad70d53d36e9cf5e059ea6caad5ab7e00981ba106498f1a462f18a3f9e/sceptre_s3_packager-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "020ca2ccdbba7e7318e8ffcd3bda43c8", "sha256": "d5347d4978690034c9c8e2e764ff634fb5c5209cce59531118435370b2e2e1c5"}, "downloads": -1, "filename": "sceptre_s3_packager-0.3.0.tar.gz", "has_sig": false, "md5_digest": "020ca2ccdbba7e7318e8ffcd3bda43c8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3727, "upload_time": "2019-09-21T15:15:05", "upload_time_iso_8601": "2019-09-21T15:15:05.865029Z", "url": "https://files.pythonhosted.org/packages/3c/34/8792e29a643624b25cd9d754805580b14c58a954bd5d6137f5ed15c7603c/sceptre_s3_packager-0.3.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:57:55 2020"}