{"info": {"author": "Pavel Savchenko", "author_email": "pavel@modlinltd.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Environment :: Web Environment", "Framework :: Django", "Framework :: Django :: 1.4", "Framework :: Django :: 1.5", "Framework :: Django :: 1.6", "Framework :: Django :: 1.7", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python", "Programming Language :: Python :: 2.7"], "description": "ModelAdmin-Utils\r\n================\r\n\r\nA collection of useful Django ``admin.ModelAdmin`` mixins and template\r\ntags\r\n\r\nInstallation\r\n============\r\n\r\n::\r\n\r\n    pip install Django-modeladmin-utils\r\n\r\nLimitInlinesAdminMixin\r\n======================\r\n\r\nIntro\r\n-----\r\n\r\nOccasionally, a relation to a specified object may include quite a few\r\nobject. In this case, a large list of inlines will be rendered, which\r\nmay not be desired.\r\n\r\nUsage\r\n~~~~~\r\n\r\nSimply add LimitInlinesAdminMixin to the parent ModelAdmin, and specify\r\nthe inlines to be limited in the attribute ``limit_inlines``. The number\r\nof entries shown is determined by ``settings.INLINES_MAX_LIMIT``\r\n(defaults to 15).\r\n\r\n::\r\n\r\n    from modeladmin_utils.mixins import LimitInlinesAdminMixin\r\n\r\n    # ...\r\n\r\n    class SomeParentModelAdmin(LimitInlinesAdminMixin, admin.ModelAdmin):\r\n        inlines = (MyRelationInline, AnotherRelativeInline)\r\n        limit_inlines = (MyRelationInline, )\r\n\r\nTemplate: Link to \"show all\" entries\r\n------------------------------------\r\n\r\nAdditionally to limiting, you may also display in the header of the\r\ninline container a link to related object changelist, filtered by\r\nrelated entries only. This is achievable by the use of a ``templatetag``\r\nprovided in this package. Overriding the admin templates for the\r\nrelevant inline/s is easy:\r\n\r\n::\r\n\r\n    {% link_to_changelist inline_admin_formset original as changelist_url %}\r\n    {% if changelist_url %}\r\n        &nbsp;({{inline_admin_formset.formset.limited_count}} / {{inline_admin_formset.formset.total_count}} displayed - <a href=\"{{ changelist_url }}\">{% trans \"Detailed View\" %}</a>)\r\n    {% endif %}\r\n\r\nNotes\r\n-----\r\n\r\n1. To use the ``templatetag``, the app must be added to the\r\n   ``settings.INSTALLED_APPS``:\r\n\r\n   ::\r\n\r\n       INSTALLED_APPS += (\r\n           'modeladmin_utils',\r\n       )\r\n\r\n2. Examples of modified templates of both stacked and tabular inlines,\r\n   based on Django 1.4 templates, are provided in this package (in\r\n   ``templates/admin/edit_inlines``). However, these are not used by\r\n   default to avoid confusion, to use them simply copy the template\r\n   over, modify (see below in specific instructions) and set inline\r\n   ``template`` attribute, e.g:\r\n\r\n   ::\r\n\r\n       class MyRelationInline(admin.TabularInline):\r\n           template = 'path_to_your/templates/admin/edit_inlines/tabular.html'\r\n\r\n3. While the related model for the changelist is automatically\r\n   determined, you may also specify an alternative model by specifying\r\n   the ``unlimited_changelist_model`` attribute on the inline. This is\r\n   useful if the inline is for a \"through model\" but the link should lead to\r\n   the target model.\r\n\r\n   ::\r\n\r\n       class MyRelationInline(admin.TabularInline):\r\n           unlimited_changelist_model = 'myapp.MyTargetModel'\r\n\r\nCustomizing template example\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n\r\nto add the link to a stacked template, copy over your original\r\ntemplates/admin/edit\\_inline/stacked.py, and place the code above in the\r\ndiv.tabular-header like so (note that I'm using a\r\n`django-grappelli <sehmaschine/django-grappelli>`__ template here):\r\n\r\n::\r\n\r\n    {% load modeladmin_links %}\r\n\r\n    {# ... #}\r\n    {% link_to_changelist inline_admin_formset original as changelist_url %}\r\n    <div class=\"tabular-header\">\r\n    <h2 class=\"grp-collapse-handler\">\r\n        {% if inline_admin_formset.opts.title %}{{ inline_admin_formset.opts.title }}{% else %}{{ inline_admin_formset.opts.verbose_name_plural|capfirst }}{% endif %}\r\n        {% if changelist_url %}\r\n            &nbsp;({{inline_admin_formset.formset.limited_count}} / {{inline_admin_formset.formset.total_count}} displayed - <a href=\"{{ changelist_url }}\">{% trans \"Detailed View\" %}</a>)\r\n        {% endif %}\r\n    </h2>\r\n    {# ... #}\r\n\r\nAnd for stacked, use template templates/admin/edit\\_inline/stacked.py:\r\n\r\n::\r\n\r\n    {% load modeladmin_links %}\r\n\r\n    {# ... #}\r\n    <h2 class=\"grp-collapse-handler\">\r\n        {% if inline_admin_formset.opts.title %}\r\n            {{ inline_admin_formset.opts.title }}\r\n        {% else %}\r\n            {{ inline_admin_formset.opts.verbose_name_plural|capfirst }}\r\n        {% endif %}\r\n        {% if changelist_url %}\r\n            &nbsp;({{inline_admin_formset.formset.limited_count}} / {{inline_admin_formset.formset.total_count}} displayed - <a href=\"{{ changelist_url }}\">{% trans \"Detailed View\" %}</a>)\r\n        {% endif %}\r\n    </h2>\r\n    {# ... #}\r\n\r\nGenericSearchMixin\r\n==================\r\n\r\nIntro\r\n-----\r\n\r\nDjango allows the definition of GenericForeignKey but does not allow to\r\neasily query through them (joins). Hence, doing something like search\r\n\"through\" a Generic FK is anything but straightforward.\r\n\r\nEnter GenericSearchMixin!\r\n\r\nThis mixin overrides the ModelAdmin.get\\_search\\_results method to\r\nallow searching through a generic relation fields.\r\n\r\nFor quick set up, simply use a GenericForeignKey field name as the\r\nprefix in 'search\\_fields'.\r\n\r\nE.g: for a field named 'related\\_to' you can use the following:\r\nsearch\\_fields = ('related\\_to\\_\\_fname', 'related\\_to\\_\\_email', ...)\r\n\r\nOptionally, you may define 'related\\_search\\_mapping' in the ModelAdmin\r\nto explicitly define a generic field's object id and allowed content\r\ntypes (useful to limit the content types - faster query).\r\n\r\nExamples (see more in admin.py)\r\n-------------------------------\r\n\r\n::\r\n\r\n    # find out pk and ctype fields using the virtual field\r\n    related_search_mapping = {\r\n        'my_generic_fkey': {} \r\n    }\r\n\r\n    # the manual, \"define everything\" way\r\n    related_search_mapping = {\r\n        'my_generic_fkey': {\r\n            'object_id': 'related_pk_field',\r\n            'ctypes': 'content_type_field'\r\n        } \r\n    }\r\n\r\nNotes\r\n-----\r\n\r\n-  Required Django > 1.6\r\n-  Currently, assumes id of related objects is unique across all models\r\n\r\nLocationMixin\r\n=============\r\n\r\n**Note:** Obsolete with newer Django versions\r\n\r\nIntro\r\n-----\r\n\r\nBefore Django 1.6 introduced\r\n`ModelAdmin.preserve\\_filters <https://docs.djangoproject.com/en/1.6/ref/contrib/admin/#django.contrib.admin.ModelAdmin.preserve_filters>`__\r\nthe behavior of Django admin was as follows:\r\n\r\n1. filter a changelist by using search/filters\r\n2. click one of the result entries\r\n3. edit the result and save it\r\n4. Django redirects you to the changelist without storing your filters\r\n\r\nThis mixin introduces the ability to redirect the client back to the\r\nchangelist with the filters restored, after saving the change form.\r\n\r\nUsage\r\n-----\r\n\r\nSimply import LocationMixin and place it as a parent class on any\r\nModelAdmin sub-class, see TestLocationAdmin in admin.py for an example.", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/modlinltd/ModelAdmin-Utils", "keywords": "django,mixin,modeladmin", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "django-modeladmin-utils", "package_url": "https://pypi.org/project/django-modeladmin-utils/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/django-modeladmin-utils/", "project_urls": {"Download": "UNKNOWN", "Homepage": "https://github.com/modlinltd/ModelAdmin-Utils"}, "release_url": "https://pypi.org/project/django-modeladmin-utils/1.0.0/", "requires_dist": null, "requires_python": null, "summary": "ModelAdmin utils", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"modeladmin-utils\">\n<h2>ModelAdmin-Utils</h2>\n<p>A collection of useful Django <tt>admin.ModelAdmin</tt> mixins and template\ntags</p>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<pre>pip install Django-modeladmin-utils\n</pre>\n</div>\n<div id=\"limitinlinesadminmixin\">\n<h2>LimitInlinesAdminMixin</h2>\n<div id=\"intro\">\n<h3>Intro</h3>\n<p>Occasionally, a relation to a specified object may include quite a few\nobject. In this case, a large list of inlines will be rendered, which\nmay not be desired.</p>\n<div id=\"usage\">\n<h4>Usage</h4>\n<p>Simply add LimitInlinesAdminMixin to the parent ModelAdmin, and specify\nthe inlines to be limited in the attribute <tt>limit_inlines</tt>. The number\nof entries shown is determined by <tt>settings.INLINES_MAX_LIMIT</tt>\n(defaults to 15).</p>\n<pre>from modeladmin_utils.mixins import LimitInlinesAdminMixin\n\n# ...\n\nclass SomeParentModelAdmin(LimitInlinesAdminMixin, admin.ModelAdmin):\n    inlines = (MyRelationInline, AnotherRelativeInline)\n    limit_inlines = (MyRelationInline, )\n</pre>\n</div>\n</div>\n<div id=\"template-link-to-show-all-entries\">\n<h3>Template: Link to \u201cshow all\u201d entries</h3>\n<p>Additionally to limiting, you may also display in the header of the\ninline container a link to related object changelist, filtered by\nrelated entries only. This is achievable by the use of a <tt>templatetag</tt>\nprovided in this package. Overriding the admin templates for the\nrelevant inline/s is easy:</p>\n<pre>{% link_to_changelist inline_admin_formset original as changelist_url %}\n{% if changelist_url %}\n    &amp;nbsp;({{inline_admin_formset.formset.limited_count}} / {{inline_admin_formset.formset.total_count}} displayed - &lt;a href=\"{{ changelist_url }}\"&gt;{% trans \"Detailed View\" %}&lt;/a&gt;)\n{% endif %}\n</pre>\n</div>\n<div id=\"notes\">\n<h3>Notes</h3>\n<ol>\n<li><p>To use the <tt>templatetag</tt>, the app must be added to the\n<tt>settings.INSTALLED_APPS</tt>:</p>\n<pre>INSTALLED_APPS += (\n    'modeladmin_utils',\n)\n</pre>\n</li>\n<li><p>Examples of modified templates of both stacked and tabular inlines,\nbased on Django 1.4 templates, are provided in this package (in\n<tt>templates/admin/edit_inlines</tt>). However, these are not used by\ndefault to avoid confusion, to use them simply copy the template\nover, modify (see below in specific instructions) and set inline\n<tt>template</tt> attribute, e.g:</p>\n<pre>class MyRelationInline(admin.TabularInline):\n    template = 'path_to_your/templates/admin/edit_inlines/tabular.html'\n</pre>\n</li>\n<li><p>While the related model for the changelist is automatically\ndetermined, you may also specify an alternative model by specifying\nthe <tt>unlimited_changelist_model</tt> attribute on the inline. This is\nuseful if the inline is for a \u201cthrough model\u201d but the link should lead to\nthe target model.</p>\n<pre>class MyRelationInline(admin.TabularInline):\n    unlimited_changelist_model = 'myapp.MyTargetModel'\n</pre>\n</li>\n</ol>\n<div id=\"customizing-template-example\">\n<h4>Customizing template example</h4>\n<p>to add the link to a stacked template, copy over your original\ntemplates/admin/edit_inline/stacked.py, and place the code above in the\ndiv.tabular-header like so (note that I\u2019m using a\n<a href=\"sehmaschine/django-grappelli\" rel=\"nofollow\">django-grappelli</a> template here):</p>\n<pre>{% load modeladmin_links %}\n\n{# ... #}\n{% link_to_changelist inline_admin_formset original as changelist_url %}\n&lt;div class=\"tabular-header\"&gt;\n&lt;h2 class=\"grp-collapse-handler\"&gt;\n    {% if inline_admin_formset.opts.title %}{{ inline_admin_formset.opts.title }}{% else %}{{ inline_admin_formset.opts.verbose_name_plural|capfirst }}{% endif %}\n    {% if changelist_url %}\n        &amp;nbsp;({{inline_admin_formset.formset.limited_count}} / {{inline_admin_formset.formset.total_count}} displayed - &lt;a href=\"{{ changelist_url }}\"&gt;{% trans \"Detailed View\" %}&lt;/a&gt;)\n    {% endif %}\n&lt;/h2&gt;\n{# ... #}\n</pre>\n<p>And for stacked, use template templates/admin/edit_inline/stacked.py:</p>\n<pre>{% load modeladmin_links %}\n\n{# ... #}\n&lt;h2 class=\"grp-collapse-handler\"&gt;\n    {% if inline_admin_formset.opts.title %}\n        {{ inline_admin_formset.opts.title }}\n    {% else %}\n        {{ inline_admin_formset.opts.verbose_name_plural|capfirst }}\n    {% endif %}\n    {% if changelist_url %}\n        &amp;nbsp;({{inline_admin_formset.formset.limited_count}} / {{inline_admin_formset.formset.total_count}} displayed - &lt;a href=\"{{ changelist_url }}\"&gt;{% trans \"Detailed View\" %}&lt;/a&gt;)\n    {% endif %}\n&lt;/h2&gt;\n{# ... #}\n</pre>\n</div>\n</div>\n</div>\n<div id=\"genericsearchmixin\">\n<h2>GenericSearchMixin</h2>\n<div id=\"id1\">\n<h3>Intro</h3>\n<p>Django allows the definition of GenericForeignKey but does not allow to\neasily query through them (joins). Hence, doing something like search\n\u201cthrough\u201d a Generic FK is anything but straightforward.</p>\n<p>Enter GenericSearchMixin!</p>\n<p>This mixin overrides the ModelAdmin.get_search_results method to\nallow searching through a generic relation fields.</p>\n<p>For quick set up, simply use a GenericForeignKey field name as the\nprefix in \u2018search_fields\u2019.</p>\n<p>E.g: for a field named \u2018related_to\u2019 you can use the following:\nsearch_fields = (\u2018related_to__fname\u2019, \u2018related_to__email\u2019, \u2026)</p>\n<p>Optionally, you may define \u2018related_search_mapping\u2019 in the ModelAdmin\nto explicitly define a generic field\u2019s object id and allowed content\ntypes (useful to limit the content types - faster query).</p>\n</div>\n<div id=\"examples-see-more-in-admin-py\">\n<h3>Examples (see more in admin.py)</h3>\n<pre># find out pk and ctype fields using the virtual field\nrelated_search_mapping = {\n    'my_generic_fkey': {}\n}\n\n# the manual, \"define everything\" way\nrelated_search_mapping = {\n    'my_generic_fkey': {\n        'object_id': 'related_pk_field',\n        'ctypes': 'content_type_field'\n    }\n}\n</pre>\n</div>\n<div id=\"id2\">\n<h3>Notes</h3>\n<ul>\n<li>Required Django &gt; 1.6</li>\n<li>Currently, assumes id of related objects is unique across all models</li>\n</ul>\n</div>\n</div>\n<div id=\"locationmixin\">\n<h2>LocationMixin</h2>\n<p><strong>Note:</strong> Obsolete with newer Django versions</p>\n<div id=\"id3\">\n<h3>Intro</h3>\n<p>Before Django 1.6 introduced\n<a href=\"https://docs.djangoproject.com/en/1.6/ref/contrib/admin/#django.contrib.admin.ModelAdmin.preserve_filters\" rel=\"nofollow\">ModelAdmin.preserve_filters</a>\nthe behavior of Django admin was as follows:</p>\n<ol>\n<li>filter a changelist by using search/filters</li>\n<li>click one of the result entries</li>\n<li>edit the result and save it</li>\n<li>Django redirects you to the changelist without storing your filters</li>\n</ol>\n<p>This mixin introduces the ability to redirect the client back to the\nchangelist with the filters restored, after saving the change form.</p>\n</div>\n<div id=\"id4\">\n<h3>Usage</h3>\n<p>Simply import LocationMixin and place it as a parent class on any\nModelAdmin sub-class, see TestLocationAdmin in admin.py for an example.</p>\n</div>\n</div>\n\n          </div>"}, "last_serial": 1801422, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "ae8be1024eb9aef776fef04d5676cc51", "sha256": "3eb4a3aeec87b26aea3534b6472ab0299f611fd565ad93d66af4aeb454fb099e"}, "downloads": -1, "filename": "django-modeladmin-utils-1.0.0.tar.gz", "has_sig": false, "md5_digest": "ae8be1024eb9aef776fef04d5676cc51", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5234, "upload_time": "2015-11-04T20:22:44", "upload_time_iso_8601": "2015-11-04T20:22:44.088005Z", "url": "https://files.pythonhosted.org/packages/8a/e0/6bc5fff5880e032e73bfec461c7d4f680c908ed5cd860ae28ee773eda422/django-modeladmin-utils-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "ae8be1024eb9aef776fef04d5676cc51", "sha256": "3eb4a3aeec87b26aea3534b6472ab0299f611fd565ad93d66af4aeb454fb099e"}, "downloads": -1, "filename": "django-modeladmin-utils-1.0.0.tar.gz", "has_sig": false, "md5_digest": "ae8be1024eb9aef776fef04d5676cc51", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5234, "upload_time": "2015-11-04T20:22:44", "upload_time_iso_8601": "2015-11-04T20:22:44.088005Z", "url": "https://files.pythonhosted.org/packages/8a/e0/6bc5fff5880e032e73bfec461c7d4f680c908ed5cd860ae28ee773eda422/django-modeladmin-utils-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:35:02 2020"}