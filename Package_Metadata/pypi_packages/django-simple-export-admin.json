{"info": {"author": "zencore", "author_email": "dobetter@zencore.cn", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3 :: Only", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "# django-simple-export-admin\n\nA simple django admin allow your export queryset to xlsx file.\n\n\n## Install\n\n```shell\npip install django-simple-export-admin\n```\n\n## Usage\n\n\n**pro/settings.py**\n\n```python\nINSTALLED_APPS = [\n    ...\n    'django_static_fontawesome',\n    'django_changelist_toolbar_admin',\n    'django_simple_export_admin',\n    ...\n]\n```\n\n- django_static_fontawesome, django_changelist_toolbar_admin and django_simple_export_admin are required.\n\n**app/models.py**\n\n```python\nfrom django.db import models\n\nclass Category(models.Model):\n    name = models.CharField(max_length=32)\n\nclass Book(models.Model):\n    name = models.CharField(max_length=32)\n    author = models.CharField(max_length=32)\n    category = models.ForeignKey(Category, on_delete=models.SET_NULL, null=True, blank=True)\n    is_published = models.NullBooleanField()\n    published_date = models.DateField(null=True)\n    count = models.IntegerField(default=0)\n\n    def preview(self):\n        return \"/preview/{0}.png\".format(self.pk)\n    preview.short_description = \"Preview Image Path\"\n\n    class Meta:\n        permissions = [\n            (\"export_filtered_books\", \"Export all filtered books\"),\n        ]\n```\n\n\n**app/admin.py**\n\n\n```python\nfrom django.contrib import admin\nfrom django_simple_export_admin.admin import DjangoSimpleExportAdmin\nfrom django_simple_export_admin.admin import NullBooleanRender\nfrom django_simple_export_admin.admin import DateRender\nfrom django_simple_export_admin.admin import Sum\nfrom .models import Book\n\nclass BookAdmin(DjangoSimpleExportAdmin, admin.ModelAdmin):\n    list_display = [\"name\", \"author\"]\n    list_filter = [\"is_published\", \"published_date\", \"author\"]\n\n    django_simple_export_admin_exports = {\n        \"filtered-books\": {\n            \"label\": \"Export All Filtered Books\",\n            \"icon\": \"fas fa-book\",\n            \"filename\": \"Book\",\n            \"fields\": [\n                {\"field\": \"forloop.counter1\", \"label\": \"Index\"},\n                {\"field\": \"name\", \"label\": \"Book Name\", \"footer-value\": \"Sum:\"},\n                {\"field\": \"count\", \"label\": \"Stock\", \"footer-value\": lambda: Sum()},\n                {\"field\": \"category__name\"},\n                {\"field\": \"author\", \"label\": \"Author\", \"empty_value\": \"-\"},\n                {\"field\": \"is_published\", \"label\": \"Is Published\", \"render\": NullBooleanRender(\"UNKNOWN\", \"YES\", \"NO\")},\n                {\"field\": \"published_date\", \"label\": \"Published Date\", \"render\": DateRender()},\n            ],\n            \"export-filtered\": True,\n            \"permissions\": [\"django_simple_export_admin_example.export_filtered_books\"],\n        }\n    }\n\n```\n\n- `label` default to _(\"Export\").\n- `icon` default to None means no icon.\n- `filename` default to model_name.\n- `export-filtered` default to False, means always export all queryset without filtering.\n- `permissions` default to None, means only super admin have permission to do exporting.\n- `fields`\n    - `field` can be field of the model instance, callable function of the model instance, callable function of the admin which takes model instance parameter. Similar with field name in `list_display`. `field == forloop.counter1` will always display row index, e.g. 1,2,3...\n    - `label` is the header of the column. If missing label, field.verbose_name or function.short_description will be used firstly. If still null, use the field name.\n    - `render` is a callable object that transform the original value to display value.\n    - `empty_value` only works when `render` is not provided, it is the display value for orignal None value.\n    - `footer-value` is the value display at the bottom row. It can be an instance of Aggregate that accept every item value of this field and calc the final value at last. It can be a staic value.\n    - `start-row-index` is row index where begin to write data. starts from 1.\n    - `xlsx-template` template xlsx file path.\n    - `show-header` True or False means show header or not.\n\n## Shipped Renders\n\n- django_simple_export_admin.admin.ForceStringRender\n- django_simple_export_admin.admin.DateRender\n- django_simple_export_admin.admin.BooleanRender\n- django_simple_export_admin.admin.NullBooleanRender\n\n## Shipped Aggregates\n\n- django_simple_export_admin.admin.Sum\n- django_simple_export_admin.admin.Average\n- django_simple_export_admin.admin.Count\n\n## Releases\n\n### v0.1.3 2020/04/04\n\n- Fix queryset limited by list_per_page problem, reset it to MAX_ROWS=999999.\n- Fix related field problem.\n- Change __row_index to forloop.counter1, because __ used for related object property.\n- If field label setting missing, found it's field-verbose-name or function-short-description first. \n- Use get_xxx_display() for choice field.\n- Add xlsx-template support.\n- Add start-row-index support.\n- Add show-header support.\n\n### v0.1.2 2020/04/02\n\n- Fix document.\n\n### v0.1.1 2020/04/02\n\n- Fix footer-value problem. If use an instance of Aggregate in settings, the instance is used globally, so that the final value if not correct. So you must add lambda to dynamically to create a new instance very time.\n\n### v0.1.0 2020/04/02\n\n- First release.", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "django admin extentions,django simple export admin", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "django-simple-export-admin", "package_url": "https://pypi.org/project/django-simple-export-admin/", "platform": "", "project_url": "https://pypi.org/project/django-simple-export-admin/", "project_urls": null, "release_url": "https://pypi.org/project/django-simple-export-admin/0.1.3/", "requires_dist": null, "requires_python": "", "summary": "A simple django admin allow your export queryset to xlsx file.", "version": "0.1.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>django-simple-export-admin</h1>\n<p>A simple django admin allow your export queryset to xlsx file.</p>\n<h2>Install</h2>\n<pre>pip install django-simple-export-admin\n</pre>\n<h2>Usage</h2>\n<p><strong>pro/settings.py</strong></p>\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"o\">...</span>\n    <span class=\"s1\">'django_static_fontawesome'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'django_changelist_toolbar_admin'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'django_simple_export_admin'</span><span class=\"p\">,</span>\n    <span class=\"o\">...</span>\n<span class=\"p\">]</span>\n</pre>\n<ul>\n<li>django_static_fontawesome, django_changelist_toolbar_admin and django_simple_export_admin are required.</li>\n</ul>\n<p><strong>app/models.py</strong></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Category</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">32</span><span class=\"p\">)</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Book</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">32</span><span class=\"p\">)</span>\n    <span class=\"n\">author</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">32</span><span class=\"p\">)</span>\n    <span class=\"n\">category</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"n\">Category</span><span class=\"p\">,</span> <span class=\"n\">on_delete</span><span class=\"o\">=</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">SET_NULL</span><span class=\"p\">,</span> <span class=\"n\">null</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">is_published</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">NullBooleanField</span><span class=\"p\">()</span>\n    <span class=\"n\">published_date</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">DateField</span><span class=\"p\">(</span><span class=\"n\">null</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">count</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">IntegerField</span><span class=\"p\">(</span><span class=\"n\">default</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">preview</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"s2\">\"/preview/</span><span class=\"si\">{0}</span><span class=\"s2\">.png\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">pk</span><span class=\"p\">)</span>\n    <span class=\"n\">preview</span><span class=\"o\">.</span><span class=\"n\">short_description</span> <span class=\"o\">=</span> <span class=\"s2\">\"Preview Image Path\"</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">permissions</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n            <span class=\"p\">(</span><span class=\"s2\">\"export_filtered_books\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Export all filtered books\"</span><span class=\"p\">),</span>\n        <span class=\"p\">]</span>\n</pre>\n<p><strong>app/admin.py</strong></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.contrib</span> <span class=\"kn\">import</span> <span class=\"n\">admin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django_simple_export_admin.admin</span> <span class=\"kn\">import</span> <span class=\"n\">DjangoSimpleExportAdmin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django_simple_export_admin.admin</span> <span class=\"kn\">import</span> <span class=\"n\">NullBooleanRender</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django_simple_export_admin.admin</span> <span class=\"kn\">import</span> <span class=\"n\">DateRender</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django_simple_export_admin.admin</span> <span class=\"kn\">import</span> <span class=\"n\">Sum</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.models</span> <span class=\"kn\">import</span> <span class=\"n\">Book</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">BookAdmin</span><span class=\"p\">(</span><span class=\"n\">DjangoSimpleExportAdmin</span><span class=\"p\">,</span> <span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">ModelAdmin</span><span class=\"p\">):</span>\n    <span class=\"n\">list_display</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">,</span> <span class=\"s2\">\"author\"</span><span class=\"p\">]</span>\n    <span class=\"n\">list_filter</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">\"is_published\"</span><span class=\"p\">,</span> <span class=\"s2\">\"published_date\"</span><span class=\"p\">,</span> <span class=\"s2\">\"author\"</span><span class=\"p\">]</span>\n\n    <span class=\"n\">django_simple_export_admin_exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"filtered-books\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s2\">\"label\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Export All Filtered Books\"</span><span class=\"p\">,</span>\n            <span class=\"s2\">\"icon\"</span><span class=\"p\">:</span> <span class=\"s2\">\"fas fa-book\"</span><span class=\"p\">,</span>\n            <span class=\"s2\">\"filename\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Book\"</span><span class=\"p\">,</span>\n            <span class=\"s2\">\"fields\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                <span class=\"p\">{</span><span class=\"s2\">\"field\"</span><span class=\"p\">:</span> <span class=\"s2\">\"forloop.counter1\"</span><span class=\"p\">,</span> <span class=\"s2\">\"label\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Index\"</span><span class=\"p\">},</span>\n                <span class=\"p\">{</span><span class=\"s2\">\"field\"</span><span class=\"p\">:</span> <span class=\"s2\">\"name\"</span><span class=\"p\">,</span> <span class=\"s2\">\"label\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Book Name\"</span><span class=\"p\">,</span> <span class=\"s2\">\"footer-value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Sum:\"</span><span class=\"p\">},</span>\n                <span class=\"p\">{</span><span class=\"s2\">\"field\"</span><span class=\"p\">:</span> <span class=\"s2\">\"count\"</span><span class=\"p\">,</span> <span class=\"s2\">\"label\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Stock\"</span><span class=\"p\">,</span> <span class=\"s2\">\"footer-value\"</span><span class=\"p\">:</span> <span class=\"k\">lambda</span><span class=\"p\">:</span> <span class=\"n\">Sum</span><span class=\"p\">()},</span>\n                <span class=\"p\">{</span><span class=\"s2\">\"field\"</span><span class=\"p\">:</span> <span class=\"s2\">\"category__name\"</span><span class=\"p\">},</span>\n                <span class=\"p\">{</span><span class=\"s2\">\"field\"</span><span class=\"p\">:</span> <span class=\"s2\">\"author\"</span><span class=\"p\">,</span> <span class=\"s2\">\"label\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Author\"</span><span class=\"p\">,</span> <span class=\"s2\">\"empty_value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"-\"</span><span class=\"p\">},</span>\n                <span class=\"p\">{</span><span class=\"s2\">\"field\"</span><span class=\"p\">:</span> <span class=\"s2\">\"is_published\"</span><span class=\"p\">,</span> <span class=\"s2\">\"label\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Is Published\"</span><span class=\"p\">,</span> <span class=\"s2\">\"render\"</span><span class=\"p\">:</span> <span class=\"n\">NullBooleanRender</span><span class=\"p\">(</span><span class=\"s2\">\"UNKNOWN\"</span><span class=\"p\">,</span> <span class=\"s2\">\"YES\"</span><span class=\"p\">,</span> <span class=\"s2\">\"NO\"</span><span class=\"p\">)},</span>\n                <span class=\"p\">{</span><span class=\"s2\">\"field\"</span><span class=\"p\">:</span> <span class=\"s2\">\"published_date\"</span><span class=\"p\">,</span> <span class=\"s2\">\"label\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Published Date\"</span><span class=\"p\">,</span> <span class=\"s2\">\"render\"</span><span class=\"p\">:</span> <span class=\"n\">DateRender</span><span class=\"p\">()},</span>\n            <span class=\"p\">],</span>\n            <span class=\"s2\">\"export-filtered\"</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">,</span>\n            <span class=\"s2\">\"permissions\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"django_simple_export_admin_example.export_filtered_books\"</span><span class=\"p\">],</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n</pre>\n<ul>\n<li><code>label</code> default to _(\"Export\").</li>\n<li><code>icon</code> default to None means no icon.</li>\n<li><code>filename</code> default to model_name.</li>\n<li><code>export-filtered</code> default to False, means always export all queryset without filtering.</li>\n<li><code>permissions</code> default to None, means only super admin have permission to do exporting.</li>\n<li><code>fields</code>\n<ul>\n<li><code>field</code> can be field of the model instance, callable function of the model instance, callable function of the admin which takes model instance parameter. Similar with field name in <code>list_display</code>. <code>field == forloop.counter1</code> will always display row index, e.g. 1,2,3...</li>\n<li><code>label</code> is the header of the column. If missing label, field.verbose_name or function.short_description will be used firstly. If still null, use the field name.</li>\n<li><code>render</code> is a callable object that transform the original value to display value.</li>\n<li><code>empty_value</code> only works when <code>render</code> is not provided, it is the display value for orignal None value.</li>\n<li><code>footer-value</code> is the value display at the bottom row. It can be an instance of Aggregate that accept every item value of this field and calc the final value at last. It can be a staic value.</li>\n<li><code>start-row-index</code> is row index where begin to write data. starts from 1.</li>\n<li><code>xlsx-template</code> template xlsx file path.</li>\n<li><code>show-header</code> True or False means show header or not.</li>\n</ul>\n</li>\n</ul>\n<h2>Shipped Renders</h2>\n<ul>\n<li>django_simple_export_admin.admin.ForceStringRender</li>\n<li>django_simple_export_admin.admin.DateRender</li>\n<li>django_simple_export_admin.admin.BooleanRender</li>\n<li>django_simple_export_admin.admin.NullBooleanRender</li>\n</ul>\n<h2>Shipped Aggregates</h2>\n<ul>\n<li>django_simple_export_admin.admin.Sum</li>\n<li>django_simple_export_admin.admin.Average</li>\n<li>django_simple_export_admin.admin.Count</li>\n</ul>\n<h2>Releases</h2>\n<h3>v0.1.3 2020/04/04</h3>\n<ul>\n<li>Fix queryset limited by list_per_page problem, reset it to MAX_ROWS=999999.</li>\n<li>Fix related field problem.</li>\n<li>Change __row_index to forloop.counter1, because __ used for related object property.</li>\n<li>If field label setting missing, found it's field-verbose-name or function-short-description first.</li>\n<li>Use get_xxx_display() for choice field.</li>\n<li>Add xlsx-template support.</li>\n<li>Add start-row-index support.</li>\n<li>Add show-header support.</li>\n</ul>\n<h3>v0.1.2 2020/04/02</h3>\n<ul>\n<li>Fix document.</li>\n</ul>\n<h3>v0.1.1 2020/04/02</h3>\n<ul>\n<li>Fix footer-value problem. If use an instance of Aggregate in settings, the instance is used globally, so that the final value if not correct. So you must add lambda to dynamically to create a new instance very time.</li>\n</ul>\n<h3>v0.1.0 2020/04/02</h3>\n<ul>\n<li>First release.</li>\n</ul>\n\n          </div>"}, "last_serial": 6944562, "releases": {"0.1.2": [{"comment_text": "", "digests": {"md5": "3e21eb677b30d95cd36215774ae1ce2c", "sha256": "ab32cbd050a342b656433e6dd7635428e321276d2eb46b2398fbdae318a15910"}, "downloads": -1, "filename": "django-simple-export-admin-0.1.2.tar.gz", "has_sig": false, "md5_digest": "3e21eb677b30d95cd36215774ae1ce2c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8546, "upload_time": "2020-04-02T15:58:56", "upload_time_iso_8601": "2020-04-02T15:58:56.916619Z", "url": "https://files.pythonhosted.org/packages/1f/c6/4f0f644e65aaa7e2c8493c8772a20f0b4ffef74399d25099f99263317286/django-simple-export-admin-0.1.2.tar.gz", "yanked": false}], "0.1.3": [{"comment_text": "", "digests": {"md5": "3b7d6166725d12c093b31593609533d1", "sha256": "99b5ffdc0348d23a5037779f0c40e66ca96de359b4d5aa35c86b34570db5ecc8"}, "downloads": -1, "filename": "django-simple-export-admin-0.1.3.tar.gz", "has_sig": false, "md5_digest": "3b7d6166725d12c093b31593609533d1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10198, "upload_time": "2020-04-03T16:31:00", "upload_time_iso_8601": "2020-04-03T16:31:00.820334Z", "url": "https://files.pythonhosted.org/packages/86/18/f0178a315e6948a3d0088b601d8812752426ce50b85814a21da38c605965/django-simple-export-admin-0.1.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "3b7d6166725d12c093b31593609533d1", "sha256": "99b5ffdc0348d23a5037779f0c40e66ca96de359b4d5aa35c86b34570db5ecc8"}, "downloads": -1, "filename": "django-simple-export-admin-0.1.3.tar.gz", "has_sig": false, "md5_digest": "3b7d6166725d12c093b31593609533d1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10198, "upload_time": "2020-04-03T16:31:00", "upload_time_iso_8601": "2020-04-03T16:31:00.820334Z", "url": "https://files.pythonhosted.org/packages/86/18/f0178a315e6948a3d0088b601d8812752426ce50b85814a21da38c605965/django-simple-export-admin-0.1.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:53:24 2020"}