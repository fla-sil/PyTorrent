{"info": {"author": "Felix Fennell", "author_email": "felnne@bas.ac.uk", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Framework :: Flask", "Intended Audience :: Developers", "License :: Other/Proprietary License", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.8"], "description": "# Flask Azure AD OAuth Provider\n\nPython Flask extension for securing apps with Azure Active Directory OAuth\n\n## Purpose\n\nThis provider defines an [AuthLib](https://authlib.org) \n[Resource Protector](https://docs.authlib.org/en/latest/flask/2/resource-server.html) to authenticate and authorise \nusers and other applications to access features or resources within a Flask application using the OAuth functionality\noffered by [Azure Active Directory](https://azure.microsoft.com/en-us/services/active-directory/), as part of the\n[Microsoft identity platform](https://docs.microsoft.com/en-us/azure/active-directory/develop/about-microsoft-identity-platform).\n\nThis provider depends on Azure Active Directory, which acts as a identity provider, to issue \n[OAuth access tokens](https://docs.microsoft.com/en-us/azure/active-directory/develop/access-tokens). These contain \nvarious claims including the identity of the user and client application (used for authentication) and any permissions \nassigned or delegated to the user or application (used for authorisation).\n\nThis provider will validate and interpret information in these tokens to restrict access to parts of a Flask app.\n\nSpecifically this provider supports these scenarios:\n\n1. *application to application* \n   * supports authentication and authorisation\n   * used to allow a client application access to some functionality or resources provided by another application\n   * can be used for non-interactive, machine-to-machine, processes (using the OAuth Client Credentials Grant)\n   * uses the identity of the client application for authentication\n   * optionally, uses permissions assigned directly to the client application for authorisation\n2. *user to application*\n    * supports authentication and authorisation\n    * used to allow users access to some functionality or resources provided by another application\n    * can be used for interactive console (using the Device Authorization Grant) or web application (using the OAuth \n      Authorization Code Grant) processes\n    * uses the identity of the user, and optionally, the client application they are using, for authentication\n    * optionally, uses permissions assigned to the user, permissions delegated by the user to the client application, \n      and/or permissions assigned directly to the client application for authorisation\n\nOther scenarios may be added in future versions of this provider.\n\n**Note:** This provider does not support client applications requesting tokens from Azure. See the \n[Microsoft Authentication Library (MSAL) for Python](https://github.com/AzureAD/microsoft-authentication-library-for-python)\nif you need to do this.\n\n## Installation\n\nThis package can be installed using Pip from [PyPi](https://pypi.org/project/flask-azure-oauth):\n\n```\n$ pip install flask-azure-oauth\n```\n\n## Usage\n\nThis provider provides an [AuthLib](https://authlib.org) \n[Resource Protector](https://docs.authlib.org/en/latest/flask/2/resource-server.html) which can be used as a decorator\non Flask routes.\n\nA minimal application would look like this:\n\n```python\nfrom flask import Flask\n\nfrom flask_azure_oauth import FlaskAzureOauth\n\napp = Flask(__name__)\n\napp.config['AZURE_OAUTH_TENANCY'] = 'xxx'\napp.config['AZURE_OAUTH_APPLICATION_ID'] = 'xxx'\n\nauth = FlaskAzureOauth()\nauth.init_app(app)\n\n@app.route('/unprotected')\ndef unprotected():\n    return 'hello world'\n\n@app.route('/protected')\n@auth()\ndef protected():\n    return 'hello authenticated entity'\n\n@app.route('/protected-with-single-scope')\n@auth('required-scope')\ndef protected_with_scope():\n    return 'hello authenticated and authorised entity'\n\n@app.route('/protected-with-multiple-scopes')\n@auth('required-scope1 required-scope2')\ndef protected_with_multiple_scopes():\n    return 'hello authenticated and authorised entity'\n```\n\nTo restrict a route to any valid user or client application (authentication):\n\n* add the resource protector as a decorator (`auth` in this example) - for example the `/protected` route\n\nTo restrict a route to specific users (authorisation):\n\n* add any required [Scopes](#permissions-roles-and-scopes) to the decorator - for example the `/projected-with-*` routes\n\nIndependently of these options, it's possibly to whitelist specific, allowed, client applications, regardless of the \nuser using them. This is useful in circumstances where a user may be authorised but the client can't be trusted.:\n\n* set the `AZURE_OAUTH_CLIENT_APPLICATION_IDS` config option to a list of Azure application identifiers\n\nFor example:\n\n```\napp.config['AZURE_OAUTH_CLIENT_APPLICATION_IDS'] = ['xxx']`\n```\n\n### Configuration options\n\nThe resource protector requires two configuration options to validate tokens correctly. These are read from the Flask\n[config object](http://flask.pocoo.org/docs/1.0/config/) through the `init_app()` method.\n\n| Configuration Option                 | Data Type | Required | Description                                                                                                                |\n| ------------------------------------ | --------- | -------- | -------------------------------------------------------------------------------------------------------------------------- |\n| `AZURE_OAUTH_TENANCY`                | Str       | Yes      | ID of the Azure AD tenancy all applications and users are registered within                                                |\n| `AZURE_OAUTH_APPLICATION_ID`         | Str       | Yes      | ID of the Azure AD application registration for the application being protected                                            |\n| `AZURE_OAUTH_CLIENT_APPLICATION_IDS` | List[Str] | Yes      | ID(s) of the Azure AD application registration(s) for the application(s) granted access to the application being protected |  \n\nBefore these options can be set you will need to:\n\n1. [register the application to be protected](#registering-an-application-in-azure)\n2. [define the permissions and roles this application supports](#defining-permissions-and-roles-within-an-application)\n3. [register the application(s) that will use the protected application](#registering-an-application-in-azure)\n4. [assign permissions to users and/or client application(s)](#assigning-permissions-and-roles-to-users-and-applications)\n\n### Applications, users, groups and tenancies\n\nAzure Active Directory has a number of different concepts for agents that represent things being protected and things\nthat want to interact with protected things:\n\n* [applications](https://docs.microsoft.com/en-us/azure/active-directory/develop/authentication-scenarios#application-model) - \n  represent services that offer, or wish to use, functionality that should be restricted:\n    * services offering functionality are *protected applications*, e.g. an API\n    * services wishing to use functionality interactively or non-interactively, are *client applications*:\n        * interactive client applications include self-service portals for example\n         * non-interactive client applications include nightly synchronisation tasks for example\n* [users](https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/directory-overview-user-model) - \n  represent individuals that wish to use functionality offered by protected applications, through one or more\n  client applications (e.g. a user may use a self-service portal to access information)\n* [groups](https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/directory-overview-user-model) - \n  represent multiple users, for ease of managing permissions to similar users (e.g. administrative users)\n\nFor management purposes, all agents are scoped to an Azure tenancy (with the exception of users that can be used across\ntenancies).\n\nIn the Azure management portal:\n\n* applications are represented by [Application registrations]()\n* users are represented by [users]()\n\n### Permissions, roles and scopes\n\nAzure Active Directory has a number of mechanisms for controlling how agents can interact with each other:\n\n* [roles](https://docs.microsoft.com/en-us/azure/architecture/multitenant-identity/app-roles) - functions, designations \n  or labels conferred on users and/or groups (e.g. `admins`, `staff`)\n* [direct permissions](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent) - \n  capabilities of a protected application client applications can use themselves or without the consent of the current \n  user (e.g. machine-to-machine access to, or modification of, data from all users) \n* [delegated permissions](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent) - \n  capabilities of a protected application the current user allows a client application to use (e.g. interactive access \n  to, or modification of, their data)\n\nGenerally, and in terms of the OAuth ecosystem, all of these can be considered as \n[scopes](https://tools.ietf.org/html/rfc6749#section-3.3). As discussed in the [Usage](#usage) section, scopes can be \nused to control who and/or what can use features within protected applications.\n\nScopes are included the access token generated by a client application (possibly interactively by a user) and presented\nto the projected application as a bearer token. Azure encodes different mechanisms in different claims:\n\n* `roles` - for roles assigned to users and permissions directly assigned to client applications\n* `scp` - for permissions delegated by the user to a client application\n\nFor ease of use, this extension abstracts these two claims into a single set of `scopes` that can be required for a \ngiven route. Multiple scopes can be required (as a logical AND) to allow scopes to be used more flexibly.\n\n#### Defining permissions and roles within an application\n\nPermissions and roles are defined in the \n[application manifest](https://docs.microsoft.com/en-us/azure/active-directory/develop/reference-app-manifest) of each\napplication being protected. They can then be [assigned](#assigning-permissions-and-roles-to-users-and-applications) to \nusers, groups and client applications.\n\n1. [register](#registering-an-application-in-azure) the application to be protected\n2. [add permissions to application manifest](https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps)\n\nFor example:\n\n```json\n\"appRoles\": [\n  {\n    \"allowedMemberTypes\": [\n      \"Application\"\n    ],\n    \"displayName\": \"List all Foo resources\",\n    \"id\": \"112b3a76-2dd0-4d09-9976-9f94b2ed965d\",\n    \"isEnabled\": true,\n    \"description\": \"Allows access to basic information for all Foo resources\",\n    \"value\": \"Foo.List.All\"\n  }\n],\n```\n\n#### Assigning permissions and roles to users and applications\n\nPermissions and roles (collectively, application roles) are assigned through the Azure portal:\n\n1. [define roles and permissions in the protected application](#defining-permissions-and-roles-within-an-application)\n2. [register](#registering-an-application-in-azure) the client application(s)\n3. assign:\n    * [roles to users/groups](https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps)\n    * [permissions to client applications](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow#request-the-permissions-in-the-app-registration-portal)\n\nFor assigning permissions permissions:\n\n* permissions can be delegated to client applications, with the agreement of the current user\n* permissions can be directly assigned to client applications, with the agreement of a tenancy administrator\n\n**Note:** Direct assignment is needed for non-interactive applications, such as daemons.\n\n#### Registering an application in Azure\n\n[Follow these instructions](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app).\n\n**Note:** These instructions apply both to applications that protected by this provider (protected applications), and \nthose that will be granted access to use such applications, possibly by a user (client applications).\n\n### Testing support\n\nWhen a Flask application is in testing mode (i.e. `app.config['TESTING']=True`), this provider will generate a local \nJSON Web Key Set, containing a single key, which can be used to sign tokens with arbitrary scopes.\n\nThis can be used to test routes that require a scope or scopes, by allowing tokens to be generated with or without \nrequired scopes to test both authorised and unauthorised responses.\n\nTypically the instance of this provider will be defined outside of an application, and therefore persist between \napplication instances and tests.\n\nFor example:\n\n```python\nimport unittest\n\nfrom http import HTTPStatus\nfrom flask_azure_oauth.tokens import TestJwt\n\n\nclass AppTestCase(unittest.TestCase):\n    def setUp(self):\n        # 'create_app()' should return a Flask application where `app.config['TESTING'] = True` has been set\n        self.app = create_app('testing')\n        self.app_context = self.app.app_context()\n        self.app_context.push()\n        self.client = self.app.test_client()\n\n    def test_protected_route_with_multiple_scopes_authorised(self):\n        # Generate token with required roles\n        token = TestJwt(app=self.app, roles=['required-scope1', 'required-scope2'])\n        \n        # Make request to protected route with token\n        response = self.client.get(\n            '/protected-with-multiple-scopes',\n            headers={'authorization': f\"bearer { token }\"}\n        )\n        self.assertEqual(HTTPStatus.OK, response.status_code)\n        self.app_context.pop()\n    \n    def test_protected_route_with_multiple_scopes_unauthorised(self):\n        # Generate token with no scopes\n        token = TestJwt(app=self.app)\n        \n        # Make request to protected route with token\n        response = self.client.get(\n            '/protected-with-multiple-scopes',\n            headers={'authorization': f\"bearer { token }\"}\n        )\n        self.assertEqual(HTTPStatus.FORBIDDEN, response.status_code)\n        self.app_context.pop()\n```\n\n## Developing\n\nThis project is developed as a Python library. A bundled Flask application is used to simulate its usage and to act as\nframework for running tests etc.\n\n```shell\n$ git clone https://gitlab.data.bas.ac.uk/web-apps/flask-extensions/flask-azure-oauth.git\n$ cd flask-azure-oauth\n```\n\n### Development environment\n\nDocker and Docker Compose are required to setup a local development environment of this application.\n\nIf you have access to the [BAS GitLab instance](https://gitlab.data.bas.ac.uk), you can pull the application Docker\nimage from the BAS Docker Registry. Otherwise you will need to build the Docker image locally.\n\n```shell\n# If you have access to gitlab.data.bas.ac.uk:\n$ docker login docker-registry.data.bas.ac.uk\n$ docker-compose pull\n# If you don't have access:\n$ docker-compose build\n```\n\n### Code Style\n\nPEP-8 style and formatting guidelines must be used for this project, with the exception of the 80 character line limit.\n\n[Black](https://github.com/psf/black) is used to ensure compliance, configured in `pyproject.toml`.\n\nBlack can be [integrated](https://black.readthedocs.io/en/stable/editor_integration.html#pycharm-intellij-idea) with a\nrange of editors, such as PyCharm, to perform formatting automatically.\n\nTo apply formatting manually:\n\n```shell\n$ docker-compose run app black flask_azure_oauth/\n```\n\nTo check compliance manually:\n\n```shell\n$ docker-compose run app black --check flask_azure_oauth/\n```\n\nChecks are ran automatically in [Continuous Integration](#continuous-integration).\n\n### Dependencies\n\nPython dependencies for this project are managed with [Poetry](https://python-poetry.org) in `pyproject.toml`.\n\nNon-code files, such as static files, can also be included in the [Python package](#python-package) using the\n`include` key in `pyproject.toml`.\n\nTo add a new (development) dependency:\n\n```shell\n$ docker-compose run app ash\n$ poetry add [dependency] (--dev)\n```\n\nThen rebuild the development container, and if you can, push to GitLab:\n\n```shell\n$ docker-compose build app\n$ docker-compose push app\n```\n\n### Static security scanning\n\nTo ensure the security of this API, source code is checked against [Bandit](https://github.com/PyCQA/bandit) for issues \nsuch as not sanitising user inputs or using weak cryptography. \n\n**Warning:** Bandit is a static analysis tool and can't check for issues that are only be detectable when running the \napplication. As with all security tools, Bandit is an aid for spotting common mistakes, not a guarantee of secure code.\n\nTo check manually from the command line:\n\n```shell\n$ docker-compose run app bandit -r .\n```\n\nChecks are ran automatically in [Continuous Integration](#continuous-integration).\n\n## Testing\n\n### Integration tests\n\nThis project uses integration tests to ensure features work as expected and to guard against regressions and \nvulnerabilities.\n\nThe Python [UnitTest](https://docs.python.org/3/library/unittest.html) library is used for running tests using Flask's \ntest framework. Test cases are defined in files within `tests/` and are automatically loaded when using the `test` \nFlask CLI command included in the local Flask application in the development environment.\n\nTo run tests manually:\n\n```shell\n$ docker-compose run -e FLASK_ENV=testing app flask test\n```\n\nTo run tests manually using PyCharm, use the included *App (Tests)* run/debug configuration.\n\nTests are ran automatically in [Continuous Integration](#continuous-integration).\n\n### Continuous Integration\n\nAll commits will trigger a Continuous Integration process using GitLab's CI/CD platform, configured in `.gitlab-ci.yml`.\n\n## Deployment\n\n### Python package\n\nThis project is distributed as a Python package, hosted in [PyPi](https://pypi.org/project/flask-azure-oauth).\n\nSource and binary packages are built and published automatically using\n[Poetry](https://python-poetry.org/docs/cli/#publish) in [Continuous Delivery](#continuous-deployment).\n\nPackage versions are determined automatically using the `support/python-packaging/parse_version.py` script.\n\n### Continuous Deployment\n\nA Continuous Deployment process using GitLab's CI/CD platform is configured in `.gitlab-ci.yml`.\n\n## Release procedure\n\nFor all releases:\n\n1. create a `release` branch\n2. close release in `CHANGELOG.md`\n3. push changes, merge the `release` branch into `master` and tag with version\n\nThe project will be built and published to PyPi automatically through [Continuous Deployment](#continuous-deployment).\n\n## Feedback\n\nThe maintainer of this project is the BAS Web & Applications Team, they can be contacted at: \n[servicedesk@bas.ac.uk](mailto:servicedesk@bas.ac.uk).\n\n## Issue tracking\n\nThis project uses issue tracking, see the \n[Issue tracker](https://gitlab.data.bas.ac.uk/web-apps/flask-extensions/flask-azure-oauth/issues) for more information.\n\n**Note:** Read & write access to this issue tracker is restricted. Contact the project maintainer to request access.\n\n## License\n\n\u00a9 UK Research and Innovation (UKRI), 2019 - 2020, British Antarctic Survey.\n\nYou may use and re-use this software and associated documentation files free of charge in any format or medium, under \nthe terms of the Open Government Licence v3.0.\n\nYou may obtain a copy of the Open Government Licence at http://www.nationalarchives.gov.uk/doc/open-government-licence/\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/antarctica/flask-azure-oauth", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "flask-azure-oauth", "package_url": "https://pypi.org/project/flask-azure-oauth/", "platform": "", "project_url": "https://pypi.org/project/flask-azure-oauth/", "project_urls": {"Homepage": "https://github.com/antarctica/flask-azure-oauth", "Repository": "https://github.com/antarctica/flask-azure-oauth"}, "release_url": "https://pypi.org/project/flask-azure-oauth/0.4.0/", "requires_dist": ["authlib (>=0.14.1,<0.15.0)", "Flask (>=1.1.2,<2.0.0)", "requests (>=2.23.0,<3.0.0)"], "requires_python": ">=3.8,<4.0", "summary": "Python Flask extension for using Azure Active Directory with OAuth to protect applications", "version": "0.4.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Flask Azure AD OAuth Provider</h1>\n<p>Python Flask extension for securing apps with Azure Active Directory OAuth</p>\n<h2>Purpose</h2>\n<p>This provider defines an <a href=\"https://authlib.org\" rel=\"nofollow\">AuthLib</a>\n<a href=\"https://docs.authlib.org/en/latest/flask/2/resource-server.html\" rel=\"nofollow\">Resource Protector</a> to authenticate and authorise\nusers and other applications to access features or resources within a Flask application using the OAuth functionality\noffered by <a href=\"https://azure.microsoft.com/en-us/services/active-directory/\" rel=\"nofollow\">Azure Active Directory</a>, as part of the\n<a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/about-microsoft-identity-platform\" rel=\"nofollow\">Microsoft identity platform</a>.</p>\n<p>This provider depends on Azure Active Directory, which acts as a identity provider, to issue\n<a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/access-tokens\" rel=\"nofollow\">OAuth access tokens</a>. These contain\nvarious claims including the identity of the user and client application (used for authentication) and any permissions\nassigned or delegated to the user or application (used for authorisation).</p>\n<p>This provider will validate and interpret information in these tokens to restrict access to parts of a Flask app.</p>\n<p>Specifically this provider supports these scenarios:</p>\n<ol>\n<li><em>application to application</em>\n<ul>\n<li>supports authentication and authorisation</li>\n<li>used to allow a client application access to some functionality or resources provided by another application</li>\n<li>can be used for non-interactive, machine-to-machine, processes (using the OAuth Client Credentials Grant)</li>\n<li>uses the identity of the client application for authentication</li>\n<li>optionally, uses permissions assigned directly to the client application for authorisation</li>\n</ul>\n</li>\n<li><em>user to application</em>\n<ul>\n<li>supports authentication and authorisation</li>\n<li>used to allow users access to some functionality or resources provided by another application</li>\n<li>can be used for interactive console (using the Device Authorization Grant) or web application (using the OAuth\nAuthorization Code Grant) processes</li>\n<li>uses the identity of the user, and optionally, the client application they are using, for authentication</li>\n<li>optionally, uses permissions assigned to the user, permissions delegated by the user to the client application,\nand/or permissions assigned directly to the client application for authorisation</li>\n</ul>\n</li>\n</ol>\n<p>Other scenarios may be added in future versions of this provider.</p>\n<p><strong>Note:</strong> This provider does not support client applications requesting tokens from Azure. See the\n<a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-python\" rel=\"nofollow\">Microsoft Authentication Library (MSAL) for Python</a>\nif you need to do this.</p>\n<h2>Installation</h2>\n<p>This package can be installed using Pip from <a href=\"https://pypi.org/project/flask-azure-oauth\" rel=\"nofollow\">PyPi</a>:</p>\n<pre><code>$ pip install flask-azure-oauth\n</code></pre>\n<h2>Usage</h2>\n<p>This provider provides an <a href=\"https://authlib.org\" rel=\"nofollow\">AuthLib</a>\n<a href=\"https://docs.authlib.org/en/latest/flask/2/resource-server.html\" rel=\"nofollow\">Resource Protector</a> which can be used as a decorator\non Flask routes.</p>\n<p>A minimal application would look like this:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">Flask</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">flask_azure_oauth</span> <span class=\"kn\">import</span> <span class=\"n\">FlaskAzureOauth</span>\n\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"p\">[</span><span class=\"s1\">'AZURE_OAUTH_TENANCY'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">'xxx'</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"p\">[</span><span class=\"s1\">'AZURE_OAUTH_APPLICATION_ID'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">'xxx'</span>\n\n<span class=\"n\">auth</span> <span class=\"o\">=</span> <span class=\"n\">FlaskAzureOauth</span><span class=\"p\">()</span>\n<span class=\"n\">auth</span><span class=\"o\">.</span><span class=\"n\">init_app</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/unprotected'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">unprotected</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'hello world'</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/protected'</span><span class=\"p\">)</span>\n<span class=\"nd\">@auth</span><span class=\"p\">()</span>\n<span class=\"k\">def</span> <span class=\"nf\">protected</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'hello authenticated entity'</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/protected-with-single-scope'</span><span class=\"p\">)</span>\n<span class=\"nd\">@auth</span><span class=\"p\">(</span><span class=\"s1\">'required-scope'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">protected_with_scope</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'hello authenticated and authorised entity'</span>\n\n<span class=\"nd\">@app</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s1\">'/protected-with-multiple-scopes'</span><span class=\"p\">)</span>\n<span class=\"nd\">@auth</span><span class=\"p\">(</span><span class=\"s1\">'required-scope1 required-scope2'</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">protected_with_multiple_scopes</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"s1\">'hello authenticated and authorised entity'</span>\n</pre>\n<p>To restrict a route to any valid user or client application (authentication):</p>\n<ul>\n<li>add the resource protector as a decorator (<code>auth</code> in this example) - for example the <code>/protected</code> route</li>\n</ul>\n<p>To restrict a route to specific users (authorisation):</p>\n<ul>\n<li>add any required <a href=\"#permissions-roles-and-scopes\" rel=\"nofollow\">Scopes</a> to the decorator - for example the <code>/projected-with-*</code> routes</li>\n</ul>\n<p>Independently of these options, it's possibly to whitelist specific, allowed, client applications, regardless of the\nuser using them. This is useful in circumstances where a user may be authorised but the client can't be trusted.:</p>\n<ul>\n<li>set the <code>AZURE_OAUTH_CLIENT_APPLICATION_IDS</code> config option to a list of Azure application identifiers</li>\n</ul>\n<p>For example:</p>\n<pre><code>app.config['AZURE_OAUTH_CLIENT_APPLICATION_IDS'] = ['xxx']`\n</code></pre>\n<h3>Configuration options</h3>\n<p>The resource protector requires two configuration options to validate tokens correctly. These are read from the Flask\n<a href=\"http://flask.pocoo.org/docs/1.0/config/\" rel=\"nofollow\">config object</a> through the <code>init_app()</code> method.</p>\n<table>\n<thead>\n<tr>\n<th>Configuration Option</th>\n<th>Data Type</th>\n<th>Required</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>AZURE_OAUTH_TENANCY</code></td>\n<td>Str</td>\n<td>Yes</td>\n<td>ID of the Azure AD tenancy all applications and users are registered within</td>\n</tr>\n<tr>\n<td><code>AZURE_OAUTH_APPLICATION_ID</code></td>\n<td>Str</td>\n<td>Yes</td>\n<td>ID of the Azure AD application registration for the application being protected</td>\n</tr>\n<tr>\n<td><code>AZURE_OAUTH_CLIENT_APPLICATION_IDS</code></td>\n<td>List[Str]</td>\n<td>Yes</td>\n<td>ID(s) of the Azure AD application registration(s) for the application(s) granted access to the application being protected</td>\n</tr></tbody></table>\n<p>Before these options can be set you will need to:</p>\n<ol>\n<li><a href=\"#registering-an-application-in-azure\" rel=\"nofollow\">register the application to be protected</a></li>\n<li><a href=\"#defining-permissions-and-roles-within-an-application\" rel=\"nofollow\">define the permissions and roles this application supports</a></li>\n<li><a href=\"#registering-an-application-in-azure\" rel=\"nofollow\">register the application(s) that will use the protected application</a></li>\n<li><a href=\"#assigning-permissions-and-roles-to-users-and-applications\" rel=\"nofollow\">assign permissions to users and/or client application(s)</a></li>\n</ol>\n<h3>Applications, users, groups and tenancies</h3>\n<p>Azure Active Directory has a number of different concepts for agents that represent things being protected and things\nthat want to interact with protected things:</p>\n<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/authentication-scenarios#application-model\" rel=\"nofollow\">applications</a> -\nrepresent services that offer, or wish to use, functionality that should be restricted:\n<ul>\n<li>services offering functionality are <em>protected applications</em>, e.g. an API</li>\n<li>services wishing to use functionality interactively or non-interactively, are <em>client applications</em>:\n<ul>\n<li>interactive client applications include self-service portals for example</li>\n<li>non-interactive client applications include nightly synchronisation tasks for example</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/directory-overview-user-model\" rel=\"nofollow\">users</a> -\nrepresent individuals that wish to use functionality offered by protected applications, through one or more\nclient applications (e.g. a user may use a self-service portal to access information)</li>\n<li><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/directory-overview-user-model\" rel=\"nofollow\">groups</a> -\nrepresent multiple users, for ease of managing permissions to similar users (e.g. administrative users)</li>\n</ul>\n<p>For management purposes, all agents are scoped to an Azure tenancy (with the exception of users that can be used across\ntenancies).</p>\n<p>In the Azure management portal:</p>\n<ul>\n<li>applications are represented by <a href=\"\" rel=\"nofollow\">Application registrations</a></li>\n<li>users are represented by <a href=\"\" rel=\"nofollow\">users</a></li>\n</ul>\n<h3>Permissions, roles and scopes</h3>\n<p>Azure Active Directory has a number of mechanisms for controlling how agents can interact with each other:</p>\n<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/azure/architecture/multitenant-identity/app-roles\" rel=\"nofollow\">roles</a> - functions, designations\nor labels conferred on users and/or groups (e.g. <code>admins</code>, <code>staff</code>)</li>\n<li><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent\" rel=\"nofollow\">direct permissions</a> -\ncapabilities of a protected application client applications can use themselves or without the consent of the current\nuser (e.g. machine-to-machine access to, or modification of, data from all users)</li>\n<li><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent\" rel=\"nofollow\">delegated permissions</a> -\ncapabilities of a protected application the current user allows a client application to use (e.g. interactive access\nto, or modification of, their data)</li>\n</ul>\n<p>Generally, and in terms of the OAuth ecosystem, all of these can be considered as\n<a href=\"https://tools.ietf.org/html/rfc6749#section-3.3\" rel=\"nofollow\">scopes</a>. As discussed in the <a href=\"#usage\" rel=\"nofollow\">Usage</a> section, scopes can be\nused to control who and/or what can use features within protected applications.</p>\n<p>Scopes are included the access token generated by a client application (possibly interactively by a user) and presented\nto the projected application as a bearer token. Azure encodes different mechanisms in different claims:</p>\n<ul>\n<li><code>roles</code> - for roles assigned to users and permissions directly assigned to client applications</li>\n<li><code>scp</code> - for permissions delegated by the user to a client application</li>\n</ul>\n<p>For ease of use, this extension abstracts these two claims into a single set of <code>scopes</code> that can be required for a\ngiven route. Multiple scopes can be required (as a logical AND) to allow scopes to be used more flexibly.</p>\n<h4>Defining permissions and roles within an application</h4>\n<p>Permissions and roles are defined in the\n<a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/reference-app-manifest\" rel=\"nofollow\">application manifest</a> of each\napplication being protected. They can then be <a href=\"#assigning-permissions-and-roles-to-users-and-applications\" rel=\"nofollow\">assigned</a> to\nusers, groups and client applications.</p>\n<ol>\n<li><a href=\"#registering-an-application-in-azure\" rel=\"nofollow\">register</a> the application to be protected</li>\n<li><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps\" rel=\"nofollow\">add permissions to application manifest</a></li>\n</ol>\n<p>For example:</p>\n<pre><span class=\"s2\">\"appRoles\"</span><span class=\"err\">:</span> <span class=\"p\">[</span>\n  <span class=\"p\">{</span>\n    <span class=\"nt\">\"allowedMemberTypes\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n      <span class=\"s2\">\"Application\"</span>\n    <span class=\"p\">],</span>\n    <span class=\"nt\">\"displayName\"</span><span class=\"p\">:</span> <span class=\"s2\">\"List all Foo resources\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"id\"</span><span class=\"p\">:</span> <span class=\"s2\">\"112b3a76-2dd0-4d09-9976-9f94b2ed965d\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"isEnabled\"</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"description\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Allows access to basic information for all Foo resources\"</span><span class=\"p\">,</span>\n    <span class=\"nt\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Foo.List.All\"</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">]</span><span class=\"err\">,</span>\n</pre>\n<h4>Assigning permissions and roles to users and applications</h4>\n<p>Permissions and roles (collectively, application roles) are assigned through the Azure portal:</p>\n<ol>\n<li><a href=\"#defining-permissions-and-roles-within-an-application\" rel=\"nofollow\">define roles and permissions in the protected application</a></li>\n<li><a href=\"#registering-an-application-in-azure\" rel=\"nofollow\">register</a> the client application(s)</li>\n<li>assign:\n<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps\" rel=\"nofollow\">roles to users/groups</a></li>\n<li><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow#request-the-permissions-in-the-app-registration-portal\" rel=\"nofollow\">permissions to client applications</a></li>\n</ul>\n</li>\n</ol>\n<p>For assigning permissions permissions:</p>\n<ul>\n<li>permissions can be delegated to client applications, with the agreement of the current user</li>\n<li>permissions can be directly assigned to client applications, with the agreement of a tenancy administrator</li>\n</ul>\n<p><strong>Note:</strong> Direct assignment is needed for non-interactive applications, such as daemons.</p>\n<h4>Registering an application in Azure</h4>\n<p><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app\" rel=\"nofollow\">Follow these instructions</a>.</p>\n<p><strong>Note:</strong> These instructions apply both to applications that protected by this provider (protected applications), and\nthose that will be granted access to use such applications, possibly by a user (client applications).</p>\n<h3>Testing support</h3>\n<p>When a Flask application is in testing mode (i.e. <code>app.config['TESTING']=True</code>), this provider will generate a local\nJSON Web Key Set, containing a single key, which can be used to sign tokens with arbitrary scopes.</p>\n<p>This can be used to test routes that require a scope or scopes, by allowing tokens to be generated with or without\nrequired scopes to test both authorised and unauthorised responses.</p>\n<p>Typically the instance of this provider will be defined outside of an application, and therefore persist between\napplication instances and tests.</p>\n<p>For example:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">unittest</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">http</span> <span class=\"kn\">import</span> <span class=\"n\">HTTPStatus</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask_azure_oauth.tokens</span> <span class=\"kn\">import</span> <span class=\"n\">TestJwt</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">AppTestCase</span><span class=\"p\">(</span><span class=\"n\">unittest</span><span class=\"o\">.</span><span class=\"n\">TestCase</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">setUp</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"c1\"># 'create_app()' should return a Flask application where `app.config['TESTING'] = True` has been set</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">create_app</span><span class=\"p\">(</span><span class=\"s1\">'testing'</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app_context</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">app_context</span><span class=\"p\">()</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app_context</span><span class=\"o\">.</span><span class=\"n\">push</span><span class=\"p\">()</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">test_client</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">test_protected_route_with_multiple_scopes_authorised</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"c1\"># Generate token with required roles</span>\n        <span class=\"n\">token</span> <span class=\"o\">=</span> <span class=\"n\">TestJwt</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">roles</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'required-scope1'</span><span class=\"p\">,</span> <span class=\"s1\">'required-scope2'</span><span class=\"p\">])</span>\n        \n        <span class=\"c1\"># Make request to protected route with token</span>\n        <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span>\n            <span class=\"s1\">'/protected-with-multiple-scopes'</span><span class=\"p\">,</span>\n            <span class=\"n\">headers</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'authorization'</span><span class=\"p\">:</span> <span class=\"sa\">f</span><span class=\"s2\">\"bearer </span><span class=\"si\">{</span> <span class=\"n\">token</span> <span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">}</span>\n        <span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">HTTPStatus</span><span class=\"o\">.</span><span class=\"n\">OK</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">status_code</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app_context</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">()</span>\n    \n    <span class=\"k\">def</span> <span class=\"nf\">test_protected_route_with_multiple_scopes_unauthorised</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"c1\"># Generate token with no scopes</span>\n        <span class=\"n\">token</span> <span class=\"o\">=</span> <span class=\"n\">TestJwt</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">)</span>\n        \n        <span class=\"c1\"># Make request to protected route with token</span>\n        <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span>\n            <span class=\"s1\">'/protected-with-multiple-scopes'</span><span class=\"p\">,</span>\n            <span class=\"n\">headers</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'authorization'</span><span class=\"p\">:</span> <span class=\"sa\">f</span><span class=\"s2\">\"bearer </span><span class=\"si\">{</span> <span class=\"n\">token</span> <span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">}</span>\n        <span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">HTTPStatus</span><span class=\"o\">.</span><span class=\"n\">FORBIDDEN</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">status_code</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app_context</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">()</span>\n</pre>\n<h2>Developing</h2>\n<p>This project is developed as a Python library. A bundled Flask application is used to simulate its usage and to act as\nframework for running tests etc.</p>\n<pre>$ git clone https://gitlab.data.bas.ac.uk/web-apps/flask-extensions/flask-azure-oauth.git\n$ <span class=\"nb\">cd</span> flask-azure-oauth\n</pre>\n<h3>Development environment</h3>\n<p>Docker and Docker Compose are required to setup a local development environment of this application.</p>\n<p>If you have access to the <a href=\"https://gitlab.data.bas.ac.uk\" rel=\"nofollow\">BAS GitLab instance</a>, you can pull the application Docker\nimage from the BAS Docker Registry. Otherwise you will need to build the Docker image locally.</p>\n<pre><span class=\"c1\"># If you have access to gitlab.data.bas.ac.uk:</span>\n$ docker login docker-registry.data.bas.ac.uk\n$ docker-compose pull\n<span class=\"c1\"># If you don't have access:</span>\n$ docker-compose build\n</pre>\n<h3>Code Style</h3>\n<p>PEP-8 style and formatting guidelines must be used for this project, with the exception of the 80 character line limit.</p>\n<p><a href=\"https://github.com/psf/black\" rel=\"nofollow\">Black</a> is used to ensure compliance, configured in <code>pyproject.toml</code>.</p>\n<p>Black can be <a href=\"https://black.readthedocs.io/en/stable/editor_integration.html#pycharm-intellij-idea\" rel=\"nofollow\">integrated</a> with a\nrange of editors, such as PyCharm, to perform formatting automatically.</p>\n<p>To apply formatting manually:</p>\n<pre>$ docker-compose run app black flask_azure_oauth/\n</pre>\n<p>To check compliance manually:</p>\n<pre>$ docker-compose run app black --check flask_azure_oauth/\n</pre>\n<p>Checks are ran automatically in <a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>.</p>\n<h3>Dependencies</h3>\n<p>Python dependencies for this project are managed with <a href=\"https://python-poetry.org\" rel=\"nofollow\">Poetry</a> in <code>pyproject.toml</code>.</p>\n<p>Non-code files, such as static files, can also be included in the <a href=\"#python-package\" rel=\"nofollow\">Python package</a> using the\n<code>include</code> key in <code>pyproject.toml</code>.</p>\n<p>To add a new (development) dependency:</p>\n<pre>$ docker-compose run app ash\n$ poetry add <span class=\"o\">[</span>dependency<span class=\"o\">]</span> <span class=\"o\">(</span>--dev<span class=\"o\">)</span>\n</pre>\n<p>Then rebuild the development container, and if you can, push to GitLab:</p>\n<pre>$ docker-compose build app\n$ docker-compose push app\n</pre>\n<h3>Static security scanning</h3>\n<p>To ensure the security of this API, source code is checked against <a href=\"https://github.com/PyCQA/bandit\" rel=\"nofollow\">Bandit</a> for issues\nsuch as not sanitising user inputs or using weak cryptography.</p>\n<p><strong>Warning:</strong> Bandit is a static analysis tool and can't check for issues that are only be detectable when running the\napplication. As with all security tools, Bandit is an aid for spotting common mistakes, not a guarantee of secure code.</p>\n<p>To check manually from the command line:</p>\n<pre>$ docker-compose run app bandit -r .\n</pre>\n<p>Checks are ran automatically in <a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>.</p>\n<h2>Testing</h2>\n<h3>Integration tests</h3>\n<p>This project uses integration tests to ensure features work as expected and to guard against regressions and\nvulnerabilities.</p>\n<p>The Python <a href=\"https://docs.python.org/3/library/unittest.html\" rel=\"nofollow\">UnitTest</a> library is used for running tests using Flask's\ntest framework. Test cases are defined in files within <code>tests/</code> and are automatically loaded when using the <code>test</code>\nFlask CLI command included in the local Flask application in the development environment.</p>\n<p>To run tests manually:</p>\n<pre>$ docker-compose run -e <span class=\"nv\">FLASK_ENV</span><span class=\"o\">=</span>testing app flask <span class=\"nb\">test</span>\n</pre>\n<p>To run tests manually using PyCharm, use the included <em>App (Tests)</em> run/debug configuration.</p>\n<p>Tests are ran automatically in <a href=\"#continuous-integration\" rel=\"nofollow\">Continuous Integration</a>.</p>\n<h3>Continuous Integration</h3>\n<p>All commits will trigger a Continuous Integration process using GitLab's CI/CD platform, configured in <code>.gitlab-ci.yml</code>.</p>\n<h2>Deployment</h2>\n<h3>Python package</h3>\n<p>This project is distributed as a Python package, hosted in <a href=\"https://pypi.org/project/flask-azure-oauth\" rel=\"nofollow\">PyPi</a>.</p>\n<p>Source and binary packages are built and published automatically using\n<a href=\"https://python-poetry.org/docs/cli/#publish\" rel=\"nofollow\">Poetry</a> in <a href=\"#continuous-deployment\" rel=\"nofollow\">Continuous Delivery</a>.</p>\n<p>Package versions are determined automatically using the <code>support/python-packaging/parse_version.py</code> script.</p>\n<h3>Continuous Deployment</h3>\n<p>A Continuous Deployment process using GitLab's CI/CD platform is configured in <code>.gitlab-ci.yml</code>.</p>\n<h2>Release procedure</h2>\n<p>For all releases:</p>\n<ol>\n<li>create a <code>release</code> branch</li>\n<li>close release in <code>CHANGELOG.md</code></li>\n<li>push changes, merge the <code>release</code> branch into <code>master</code> and tag with version</li>\n</ol>\n<p>The project will be built and published to PyPi automatically through <a href=\"#continuous-deployment\" rel=\"nofollow\">Continuous Deployment</a>.</p>\n<h2>Feedback</h2>\n<p>The maintainer of this project is the BAS Web &amp; Applications Team, they can be contacted at:\n<a href=\"mailto:servicedesk@bas.ac.uk\">servicedesk@bas.ac.uk</a>.</p>\n<h2>Issue tracking</h2>\n<p>This project uses issue tracking, see the\n<a href=\"https://gitlab.data.bas.ac.uk/web-apps/flask-extensions/flask-azure-oauth/issues\" rel=\"nofollow\">Issue tracker</a> for more information.</p>\n<p><strong>Note:</strong> Read &amp; write access to this issue tracker is restricted. Contact the project maintainer to request access.</p>\n<h2>License</h2>\n<p>\u00a9 UK Research and Innovation (UKRI), 2019 - 2020, British Antarctic Survey.</p>\n<p>You may use and re-use this software and associated documentation files free of charge in any format or medium, under\nthe terms of the Open Government Licence v3.0.</p>\n<p>You may obtain a copy of the Open Government Licence at <a href=\"http://www.nationalarchives.gov.uk/doc/open-government-licence/\" rel=\"nofollow\">http://www.nationalarchives.gov.uk/doc/open-government-licence/</a></p>\n\n          </div>"}, "last_serial": 7059742, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "62def3274483c0d0eee8ad07a9af2ec2", "sha256": "35bf67b111b0fa4f20ceeee7547d1dd2f2f3540d7bbd66cb2c8625d939f6ea01"}, "downloads": -1, "filename": "flask_azure_oauth-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "62def3274483c0d0eee8ad07a9af2ec2", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 18795, "upload_time": "2019-03-06T08:09:52", "upload_time_iso_8601": "2019-03-06T08:09:52.904618Z", "url": "https://files.pythonhosted.org/packages/3e/ca/e7be1d94929274583558e678d79840cf258de4f2edb4f7a611412d77d590/flask_azure_oauth-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d581254e6d95fd507d5a2c604995ec58", "sha256": "ce8a44fe00fccc419f6e7106cf474f0551862db862a09c97b1a73859c6e0f64f"}, "downloads": -1, "filename": "flask-azure-oauth-0.1.0.tar.gz", "has_sig": false, "md5_digest": "d581254e6d95fd507d5a2c604995ec58", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 18843, "upload_time": "2019-03-06T08:09:55", "upload_time_iso_8601": "2019-03-06T08:09:55.294097Z", "url": "https://files.pythonhosted.org/packages/8b/58/73100c48de5e1877f36b4850e35a66a8cff93928552bf963127d6daa4753/flask-azure-oauth-0.1.0.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "72f221211a0055d3dc634202f0fa4c69", "sha256": "4264725fd9f71671694f52c59ed31e93297534d0775182ea3909e6843b8781be"}, "downloads": -1, "filename": "flask_azure_oauth-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "72f221211a0055d3dc634202f0fa4c69", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 21609, "upload_time": "2019-03-07T18:33:12", "upload_time_iso_8601": "2019-03-07T18:33:12.173311Z", "url": "https://files.pythonhosted.org/packages/5b/42/91d59cb216028229bc7ddbd7d82d5dae754085ef9ac2bea8c8eaf05f74b5/flask_azure_oauth-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "cab6283fb87269a3bbbc7db6a496b313", "sha256": "65bed8cda19904db39e716d07cc10eeb37da082cf698f424f876ac9478406400"}, "downloads": -1, "filename": "flask-azure-oauth-0.2.0.tar.gz", "has_sig": false, "md5_digest": "cab6283fb87269a3bbbc7db6a496b313", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 21423, "upload_time": "2019-03-07T18:33:14", "upload_time_iso_8601": "2019-03-07T18:33:14.957341Z", "url": "https://files.pythonhosted.org/packages/f2/7f/713f852f302f04036d0054e91c12e0973705496c76e6795b8400257c6de5/flask-azure-oauth-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "e6cdf467182c5cdde04ef362ddd86478", "sha256": "8fb5edd1e75fde6ae34ebad2a16cc7551b74891eb00567a9a1fca2085887d6de"}, "downloads": -1, "filename": "flask_azure_oauth-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "e6cdf467182c5cdde04ef362ddd86478", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 21494, "upload_time": "2019-04-25T07:38:31", "upload_time_iso_8601": "2019-04-25T07:38:31.748262Z", "url": "https://files.pythonhosted.org/packages/34/52/4d98c3c33179a9796317c2f3bdcba1340b5467863f9ffa09f5a6640864b8/flask_azure_oauth-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "371a62368f12292694b69290073da88e", "sha256": "18bfd9900fa3803eeb28c9fd5d1379e26c1045a2140a311cd807c16a8e24eb5f"}, "downloads": -1, "filename": "flask-azure-oauth-0.3.0.tar.gz", "has_sig": false, "md5_digest": "371a62368f12292694b69290073da88e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 21298, "upload_time": "2019-04-25T07:38:33", "upload_time_iso_8601": "2019-04-25T07:38:33.151832Z", "url": "https://files.pythonhosted.org/packages/3f/a5/52951d130e28872a1679828bbe12620f0daafd0ba28ba69b9dc35a79be10/flask-azure-oauth-0.3.0.tar.gz", "yanked": false}], "0.4.0": [{"comment_text": "", "digests": {"md5": "7e7827e024c06cc5f6b536176ac2fcdc", "sha256": "d9da098bc07d5876c71315315e98bb1092f94609bbc29f624d745b7009c5ff2a"}, "downloads": -1, "filename": "flask_azure_oauth-0.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "7e7827e024c06cc5f6b536176ac2fcdc", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.8,<4.0", "size": 21364, "upload_time": "2020-04-20T12:33:02", "upload_time_iso_8601": "2020-04-20T12:33:02.981122Z", "url": "https://files.pythonhosted.org/packages/53/03/86db3dafc0bf06fc779fc883f49ea93083164c20efc83e48a914463400fe/flask_azure_oauth-0.4.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "e403128b89da406a313d7b9abf9446be", "sha256": "82c7a4cb4ad553eb383876f678054cbc71f3d72214430b66757cc82787b39a06"}, "downloads": -1, "filename": "flask-azure-oauth-0.4.0.tar.gz", "has_sig": false, "md5_digest": "e403128b89da406a313d7b9abf9446be", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.8,<4.0", "size": 25757, "upload_time": "2020-04-20T12:33:01", "upload_time_iso_8601": "2020-04-20T12:33:01.377634Z", "url": "https://files.pythonhosted.org/packages/88/3f/852c7a5ac897db2212b91bce6cfb699161e6418f299b3b408b25ea8a1f72/flask-azure-oauth-0.4.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "7e7827e024c06cc5f6b536176ac2fcdc", "sha256": "d9da098bc07d5876c71315315e98bb1092f94609bbc29f624d745b7009c5ff2a"}, "downloads": -1, "filename": "flask_azure_oauth-0.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "7e7827e024c06cc5f6b536176ac2fcdc", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.8,<4.0", "size": 21364, "upload_time": "2020-04-20T12:33:02", "upload_time_iso_8601": "2020-04-20T12:33:02.981122Z", "url": "https://files.pythonhosted.org/packages/53/03/86db3dafc0bf06fc779fc883f49ea93083164c20efc83e48a914463400fe/flask_azure_oauth-0.4.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "e403128b89da406a313d7b9abf9446be", "sha256": "82c7a4cb4ad553eb383876f678054cbc71f3d72214430b66757cc82787b39a06"}, "downloads": -1, "filename": "flask-azure-oauth-0.4.0.tar.gz", "has_sig": false, "md5_digest": "e403128b89da406a313d7b9abf9446be", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.8,<4.0", "size": 25757, "upload_time": "2020-04-20T12:33:01", "upload_time_iso_8601": "2020-04-20T12:33:01.377634Z", "url": "https://files.pythonhosted.org/packages/88/3f/852c7a5ac897db2212b91bce6cfb699161e6418f299b3b408b25ea8a1f72/flask-azure-oauth-0.4.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 01:03:06 2020"}