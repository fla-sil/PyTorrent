{"info": {"author": "Christian Schweigel", "author_email": "", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "License :: OSI Approved :: GNU Lesser General Public License v3 (LGPLv3)", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3 :: Only", "Topic :: Database"], "description": "[![License: LGPL v3](https://img.shields.io/badge/License-LGPL%20v3-blue.svg)](https://www.gnu.org/licenses/lgpl-3.0)\n[![Generic badge](https://img.shields.io/badge/Python%20Version-3.x-green.svg)]()\n# LunaDB\nLunaDB is a document oriented file based database written in Python. It's designed on similar scenarios as [TinyDB](https://github.com/msiemens/tinydb), but with a better scaling with more documents and (hopefully) less memory usage. \n## Introduction\nLunaDB reads only one document at a time and doesn't save the whole database in one giant JSON. Instead it saves every document as an own JSON and seperates them by line breaks.  \nMain features from LunaDB:\n* Document based: Like TinyDB, you can store documents as `dict`\n* Written in pure Python: LunaDB doesn't require any other dependency\n* Even more tiny: LunaDB has less than 500 lines of code, without unittests  \nImportant: LunaDB stores the data in multiple files located in one folder!\n## Supported Python Versions\nLunaDB supports only Python 3, there is no Python 2 support and there won't be any. As it is using `os.replace()` it needs at least Python 3.3 to run. Newer versions should be no problem. I use this module on Windows 10 and Debian Strech, it should run on any OS, if not feel free to open an issue.\n\n## Example Usage\n```python\nfrom LunaDB import LunaDB\ndb = LunaDB(\"relative/path/to/database\")\n\n# If you are not giving an specific field, which will be unique, an automatic id_field will be used\ncharacter = db.table(\"character\")\ncity = db.table(\"city\", id_field=\"name\")\n\n# If strict is True it will throw an error if there is duplicated entry. Otherwise it will just skip the entry.\ncharacter.insert({\"name\": \"Tristan\", \"age\": 21}, strict = True)\ncharacter.insert({\"name\": \"Isolt\", \"age\": 19}, strict = False)\n\n# To insert multiple entries at once, use insert_multiple\ncity.insert_multiple([{\"name\":\"London\"}, {\"name\": \"Manchester\"}])\n```\n### Searching for entries\nSearching works with filter functions. The search method takes a function which returns `True` when the entry should be in the response. This filter function can be defined seperatly or with the lambda statement.\n```python\nres = character.search(lambda entry: entry[\"age\"] == 21)\n# res = [{\"name\":\"Tristan\", \"age\": 21, \"_id\": 0}]\nres = character.search(lambda entry: entry[\"age\"] < 22)\n# res = [{\"name\": \"Tristan\", \"age\": 21, \"_id\": 0}, {\"Isolt\", \"age\":19, \"_id\":1}]\n# The \"_id\" field is the auto_increment identifier\nres = city.search(lambda entry: entry[\"name\"] == \"London\")\n# res = [{\"name\": \"London\"}]\n```\n### Update\nThe update uses the id field to identify the document and will replace it.\n```python\nres = character.search(lambda entry: entry[\"name\"] == \"Tristan\")\n# res = [{\"name\":\"Tristan\", \"age\": 21, \"_id\": 0}]\nres[\"age\"] = 22\ncharacter.update(res, auto_clean = True)\nres = character.search(lambda entry: entry[\"name\"] == \"Tristan\")\n# res = [{\"name\":\"Tristan\", \"age\": 22, \"_id\": 0}]\n```\nThe `auto_clean` parameter is present in every method that modifies or deletes existing data. Without auto_clean LunaDB does not delete the data from the database, in fact it is just disabling them. Only if the database is cleaned afterwards, the disabled entries will get deleted. If `auto_clean` is `False` you need to clean the table with the `table.clean()` method manually if you want to save space. If `auto_clean` is `True`, the table will automatically cleared when the disabled lines exceed the `auto_clean_buffer`, which is per default 5MB per table. `auto_clean_buffer` can be set with the creation of the database object. Per default `auto_clean` is `True`. \n### Delete\nThe delete works the same way as search, every row which returns at the filter function `True` will be deleted. The `auto_clean` is the same as with update.\n```python\nres = character.search(lambda entry: entry[\"name\"] == \"Tristan\")\n# res = [{\"name\":\"Tristan\", \"age\": 21, \"_id\": 0}]\ncharacter.delete(lambda entry: entry[\"name\"] == \"Tristan\", auto_clean = True)\nres = character.search(lambda entry: entry[\"name\"] == \"Tristan\")\n# res = []\n```\n### Additional concepts\n#### Insert or update\n```python\nrow = {\"name\":\"Tristan\", \"age\": 17}\ncharacter.upsert(row)\n```\n#### Insert or skip\n```python\nrow = {\"name\":\"Tristan\", \"age\": 17}\n# With strict = False, duplicated entries won't throw an exception\ncharacter.insert(row, strict = False)\n```\n\n## Additional documentation\nLook at the [module reference](https://github.com/swip3798/LunaDB/blob/Add-documentation/docs/REFERENCE.md).\n\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/swip3798/LunaDB", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "LunaDB", "package_url": "https://pypi.org/project/LunaDB/", "platform": "", "project_url": "https://pypi.org/project/LunaDB/", "project_urls": {"Homepage": "https://github.com/swip3798/LunaDB"}, "release_url": "https://pypi.org/project/LunaDB/0.5.2/", "requires_dist": null, "requires_python": "", "summary": "Lightweight file based NoSQL DB", "version": "0.5.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://www.gnu.org/licenses/lgpl-3.0\" rel=\"nofollow\"><img alt=\"License: LGPL v3\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/77342686f9f0a3212f9c057c2a584cc63c77fe0e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4c47504c25323076332d626c75652e737667\"></a>\n<a href=\"\" rel=\"nofollow\"><img alt=\"Generic badge\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/008b5a899b2fbfb6637561d10d8ad5ac3b68ea29/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f507974686f6e25323056657273696f6e2d332e782d677265656e2e737667\"></a></p>\n<h1>LunaDB</h1>\n<p>LunaDB is a document oriented file based database written in Python. It's designed on similar scenarios as <a href=\"https://github.com/msiemens/tinydb\" rel=\"nofollow\">TinyDB</a>, but with a better scaling with more documents and (hopefully) less memory usage.</p>\n<h2>Introduction</h2>\n<p>LunaDB reads only one document at a time and doesn't save the whole database in one giant JSON. Instead it saves every document as an own JSON and seperates them by line breaks.<br>\nMain features from LunaDB:</p>\n<ul>\n<li>Document based: Like TinyDB, you can store documents as <code>dict</code></li>\n<li>Written in pure Python: LunaDB doesn't require any other dependency</li>\n<li>Even more tiny: LunaDB has less than 500 lines of code, without unittests<br>\nImportant: LunaDB stores the data in multiple files located in one folder!</li>\n</ul>\n<h2>Supported Python Versions</h2>\n<p>LunaDB supports only Python 3, there is no Python 2 support and there won't be any. As it is using <code>os.replace()</code> it needs at least Python 3.3 to run. Newer versions should be no problem. I use this module on Windows 10 and Debian Strech, it should run on any OS, if not feel free to open an issue.</p>\n<h2>Example Usage</h2>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">LunaDB</span> <span class=\"kn\">import</span> <span class=\"n\">LunaDB</span>\n<span class=\"n\">db</span> <span class=\"o\">=</span> <span class=\"n\">LunaDB</span><span class=\"p\">(</span><span class=\"s2\">\"relative/path/to/database\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># If you are not giving an specific field, which will be unique, an automatic id_field will be used</span>\n<span class=\"n\">character</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">table</span><span class=\"p\">(</span><span class=\"s2\">\"character\"</span><span class=\"p\">)</span>\n<span class=\"n\">city</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">table</span><span class=\"p\">(</span><span class=\"s2\">\"city\"</span><span class=\"p\">,</span> <span class=\"n\">id_field</span><span class=\"o\">=</span><span class=\"s2\">\"name\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># If strict is True it will throw an error if there is duplicated entry. Otherwise it will just skip the entry.</span>\n<span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">insert</span><span class=\"p\">({</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Tristan\"</span><span class=\"p\">,</span> <span class=\"s2\">\"age\"</span><span class=\"p\">:</span> <span class=\"mi\">21</span><span class=\"p\">},</span> <span class=\"n\">strict</span> <span class=\"o\">=</span> <span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">insert</span><span class=\"p\">({</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Isolt\"</span><span class=\"p\">,</span> <span class=\"s2\">\"age\"</span><span class=\"p\">:</span> <span class=\"mi\">19</span><span class=\"p\">},</span> <span class=\"n\">strict</span> <span class=\"o\">=</span> <span class=\"kc\">False</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># To insert multiple entries at once, use insert_multiple</span>\n<span class=\"n\">city</span><span class=\"o\">.</span><span class=\"n\">insert_multiple</span><span class=\"p\">([{</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span><span class=\"s2\">\"London\"</span><span class=\"p\">},</span> <span class=\"p\">{</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Manchester\"</span><span class=\"p\">}])</span>\n</pre>\n<h3>Searching for entries</h3>\n<p>Searching works with filter functions. The search method takes a function which returns <code>True</code> when the entry should be in the response. This filter function can be defined seperatly or with the lambda statement.</p>\n<pre><span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">entry</span><span class=\"p\">:</span> <span class=\"n\">entry</span><span class=\"p\">[</span><span class=\"s2\">\"age\"</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"mi\">21</span><span class=\"p\">)</span>\n<span class=\"c1\"># res = [{\"name\":\"Tristan\", \"age\": 21, \"_id\": 0}]</span>\n<span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">entry</span><span class=\"p\">:</span> <span class=\"n\">entry</span><span class=\"p\">[</span><span class=\"s2\">\"age\"</span><span class=\"p\">]</span> <span class=\"o\">&lt;</span> <span class=\"mi\">22</span><span class=\"p\">)</span>\n<span class=\"c1\"># res = [{\"name\": \"Tristan\", \"age\": 21, \"_id\": 0}, {\"Isolt\", \"age\":19, \"_id\":1}]</span>\n<span class=\"c1\"># The \"_id\" field is the auto_increment identifier</span>\n<span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">city</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">entry</span><span class=\"p\">:</span> <span class=\"n\">entry</span><span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">\"London\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># res = [{\"name\": \"London\"}]</span>\n</pre>\n<h3>Update</h3>\n<p>The update uses the id field to identify the document and will replace it.</p>\n<pre><span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">entry</span><span class=\"p\">:</span> <span class=\"n\">entry</span><span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">\"Tristan\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># res = [{\"name\":\"Tristan\", \"age\": 21, \"_id\": 0}]</span>\n<span class=\"n\">res</span><span class=\"p\">[</span><span class=\"s2\">\"age\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"mi\">22</span>\n<span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">,</span> <span class=\"n\">auto_clean</span> <span class=\"o\">=</span> <span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">entry</span><span class=\"p\">:</span> <span class=\"n\">entry</span><span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">\"Tristan\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># res = [{\"name\":\"Tristan\", \"age\": 22, \"_id\": 0}]</span>\n</pre>\n<p>The <code>auto_clean</code> parameter is present in every method that modifies or deletes existing data. Without auto_clean LunaDB does not delete the data from the database, in fact it is just disabling them. Only if the database is cleaned afterwards, the disabled entries will get deleted. If <code>auto_clean</code> is <code>False</code> you need to clean the table with the <code>table.clean()</code> method manually if you want to save space. If <code>auto_clean</code> is <code>True</code>, the table will automatically cleared when the disabled lines exceed the <code>auto_clean_buffer</code>, which is per default 5MB per table. <code>auto_clean_buffer</code> can be set with the creation of the database object. Per default <code>auto_clean</code> is <code>True</code>.</p>\n<h3>Delete</h3>\n<p>The delete works the same way as search, every row which returns at the filter function <code>True</code> will be deleted. The <code>auto_clean</code> is the same as with update.</p>\n<pre><span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">entry</span><span class=\"p\">:</span> <span class=\"n\">entry</span><span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">\"Tristan\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># res = [{\"name\":\"Tristan\", \"age\": 21, \"_id\": 0}]</span>\n<span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">entry</span><span class=\"p\">:</span> <span class=\"n\">entry</span><span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">\"Tristan\"</span><span class=\"p\">,</span> <span class=\"n\">auto_clean</span> <span class=\"o\">=</span> <span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">entry</span><span class=\"p\">:</span> <span class=\"n\">entry</span><span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">\"Tristan\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># res = []</span>\n</pre>\n<h3>Additional concepts</h3>\n<h4>Insert or update</h4>\n<pre><span class=\"n\">row</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span><span class=\"s2\">\"Tristan\"</span><span class=\"p\">,</span> <span class=\"s2\">\"age\"</span><span class=\"p\">:</span> <span class=\"mi\">17</span><span class=\"p\">}</span>\n<span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">)</span>\n</pre>\n<h4>Insert or skip</h4>\n<pre><span class=\"n\">row</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span><span class=\"s2\">\"Tristan\"</span><span class=\"p\">,</span> <span class=\"s2\">\"age\"</span><span class=\"p\">:</span> <span class=\"mi\">17</span><span class=\"p\">}</span>\n<span class=\"c1\"># With strict = False, duplicated entries won't throw an exception</span>\n<span class=\"n\">character</span><span class=\"o\">.</span><span class=\"n\">insert</span><span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">,</span> <span class=\"n\">strict</span> <span class=\"o\">=</span> <span class=\"kc\">False</span><span class=\"p\">)</span>\n</pre>\n<h2>Additional documentation</h2>\n<p>Look at the <a href=\"https://github.com/swip3798/LunaDB/blob/Add-documentation/docs/REFERENCE.md\" rel=\"nofollow\">module reference</a>.</p>\n\n          </div>"}, "last_serial": 6443471, "releases": {"0.4.1": [{"comment_text": "", "digests": {"md5": "5b3b86a5b9f63bea1ce2651f43ecec0d", "sha256": "9c2db499c189d9aefc39f55ffb57b5ea3646c8feedbcbfbb42f4420cf643c52f"}, "downloads": -1, "filename": "LunaDB-0.4.1-py3-none-any.whl", "has_sig": false, "md5_digest": "5b3b86a5b9f63bea1ce2651f43ecec0d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 3378, "upload_time": "2020-01-13T09:32:39", "upload_time_iso_8601": "2020-01-13T09:32:39.916764Z", "url": "https://files.pythonhosted.org/packages/1c/f1/299507e242461690649a8ab382be8499c8cc1a4653ee52b691d63425567a/LunaDB-0.4.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "3d9f9f4d2c86d61332d6f6aa76b38eac", "sha256": "e19f87278815c182460ce33084db8eb1d8f32ee712e8a484a47854a33926483b"}, "downloads": -1, "filename": "LunaDB-0.4.1.tar.gz", "has_sig": false, "md5_digest": "3d9f9f4d2c86d61332d6f6aa76b38eac", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2218, "upload_time": "2020-01-13T09:32:43", "upload_time_iso_8601": "2020-01-13T09:32:43.206783Z", "url": "https://files.pythonhosted.org/packages/27/a6/965fe5d1a5470d0b110c20f6c33d0cac0f9faf51889922a8ff12a7d71cdc/LunaDB-0.4.1.tar.gz", "yanked": false}], "0.5.2": [{"comment_text": "", "digests": {"md5": "cc062439a6ed114f7b6ca593e7c60a81", "sha256": "c54d188e14211b6639ff463bc2545025d09f2f17a8783bf85fdc428c266f8a62"}, "downloads": -1, "filename": "LunaDB-0.5.2-py3-none-any.whl", "has_sig": false, "md5_digest": "cc062439a6ed114f7b6ca593e7c60a81", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8782, "upload_time": "2020-01-13T09:32:41", "upload_time_iso_8601": "2020-01-13T09:32:41.806691Z", "url": "https://files.pythonhosted.org/packages/03/90/b4d24784b77951338394a85ad336cf2f6c94185b6a066f3cdbefc76a54ad/LunaDB-0.5.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "e6bcb6911ae59c0cb97ca4e526b25cbe", "sha256": "8b80ebddd6cf0c5d546545ba6d7fe8ba07918d926ffb16b34cab10d30a85a3c5"}, "downloads": -1, "filename": "LunaDB-0.5.2.tar.gz", "has_sig": false, "md5_digest": "e6bcb6911ae59c0cb97ca4e526b25cbe", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5048, "upload_time": "2020-01-13T09:32:44", "upload_time_iso_8601": "2020-01-13T09:32:44.319171Z", "url": "https://files.pythonhosted.org/packages/e0/f8/e8e1096e5add662a7ce4914957bdfe31b8de7894f5fe897f78f63ca2a757/LunaDB-0.5.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "cc062439a6ed114f7b6ca593e7c60a81", "sha256": "c54d188e14211b6639ff463bc2545025d09f2f17a8783bf85fdc428c266f8a62"}, "downloads": -1, "filename": "LunaDB-0.5.2-py3-none-any.whl", "has_sig": false, "md5_digest": "cc062439a6ed114f7b6ca593e7c60a81", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 8782, "upload_time": "2020-01-13T09:32:41", "upload_time_iso_8601": "2020-01-13T09:32:41.806691Z", "url": "https://files.pythonhosted.org/packages/03/90/b4d24784b77951338394a85ad336cf2f6c94185b6a066f3cdbefc76a54ad/LunaDB-0.5.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "e6bcb6911ae59c0cb97ca4e526b25cbe", "sha256": "8b80ebddd6cf0c5d546545ba6d7fe8ba07918d926ffb16b34cab10d30a85a3c5"}, "downloads": -1, "filename": "LunaDB-0.5.2.tar.gz", "has_sig": false, "md5_digest": "e6bcb6911ae59c0cb97ca4e526b25cbe", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5048, "upload_time": "2020-01-13T09:32:44", "upload_time_iso_8601": "2020-01-13T09:32:44.319171Z", "url": "https://files.pythonhosted.org/packages/e0/f8/e8e1096e5add662a7ce4914957bdfe31b8de7894f5fe897f78f63ca2a757/LunaDB-0.5.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:43:04 2020"}