{"info": {"author": "Oleksii Petrenko", "author_email": "oleksiiypetrenko@gmail.com", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: 3 :: Only"], "description": "json_modify\n-----------\n.. image:: https://img.shields.io/pypi/v/json_modify\n   :target: https://pypi.python.org/pypi/json_modify\n.. image:: https://img.shields.io/pypi/pyversions/json_modify.svg\n   :target: https://pypi.org/project/json_modify/\n.. image:: https://img.shields.io/github/license/Enacero/json_modify\n   :target: https://github.com/Enacero/json_modify/blob/master/LICENSE\n.. image:: https://img.shields.io/badge/code%20style-black-000000.svg\n   :target: https://github.com/psf/black\n.. image:: https://travis-ci.org/Enacero/json_modify.svg?branch=master\n   :target: https://travis-ci.org/Enacero/json_modify\n.. image:: https://codecov.io/gh/Enacero/json_modify/branch/master/graph/badge.svg\n   :target: https://codecov.io/gh/Enacero/json_modify\n\n``json_modify`` is simple library that helps apply modifications\nto json/yaml files and python representations of json.\n\nInstallation\n------------\n\n.. code-block::\n\n    pip install json_modify\n\nExample\n-------\n\n.. code-block:: python\n\n    from json_modify import apply_actions\n\n    source = {\n        \"spec\": {\n            \"name\": \"test\",\n            \"metadata\": [\n                {\"name\": \"test1\", \"value\": \"test1\"},\n                {\"name\": \"test2\", \"value\": \"test2\"}\n            ],\n            \"values\": {\"value1\": 10, \"value2\": 20}\n        }\n    }\n\n    actions = [\n        {\"action\": \"add\",\n         \"path\": \"spec/values\",\n         \"value\": {\"value3\": 30, \"value4\": 40}}\n    ]\n\n    result = apply_actions(source, actions)\n\n    print(result)\n\n    {\"spec\": {\n        \"name\": \"test\",\n        \"metadata\": [\n            {\"name\": \"test1\", \"value\": \"test1\"},\n            {\"name\": \"test2\", \"value\": \"test2\"}\n        ],\n        \"values\": {\n            \"value1\": 10, \"value2\": 20,\n            \"value3\": 30, \"value4\": 40}\n        }\n    }\n\nMarkers\n-------\n``json_modify`` uses markers to traverse lists. Markers should be used in ``path``\nfor example:\n\n.. code-block:: python\n\n    \"path\": \"metadata/$project_name/name\"\n\nThere are two types of markers:\n\n* Filter marker (``$<marker_name>``) - the kind of marker, that is used to select\n  dictionary in list by list of ``section[key] == value``. Filter marker should be\n  described in action where it's used. For example:\n\n.. code-block:: python\n\n    {\n        \"action\": \"delete\",\n        \"path\": \"metadata/$project_name/name\",\n        \"project_name\": [{\"key\": \"name\", \"value\": \"nginx\"}]\n    }\n\n* Index marker (``$<index>``) - the kind of marker, that is used to select specific\n  element in list, by it's index. For example:\n\n.. code-block:: python\n\n    {\n        \"action\": \"replace\",\n        \"path\": [\"users\", \"$0\"],\n        \"value\": { \"name\": \"test_user\", \"id\": 0}\n    }\n\nIt's allowed to use any quantity of markers and mix both types of markers in single path.\n\nAction schema\n-------------\n* ``action`` (Required): Type of action, possible values are: add, replace, delete,\n  rename(only for dictionaries).\n* ``path`` (Required): Path to the field that we want to change.\n  ``path`` can be string, separated by delimiter (default is ``\\``) or list of strings.\n* ``value`` (Optional for delete, Required for other): Value that should be applied\n  to specified path. The type of value is described for each action separately.\n* ``marker`` (Required for each non index marker in path): List of dictionaries,\n  that should be applied to find value in list. Each dictionary consist of:\n\n  * ``key`` (Required): Name of the key that should be used for search.\n  * ``value`` (Required): Value that is used to find concrete dictionary in\n    list of dictionaries.\n\nSupported actions\n-----------------\n#. ``add``: Insert values into section, specified by last key of ``path``.\n   The last key in section should lead to list or dict section.\n\n   * For add action on list ``value`` should be of type list, so that it'll be possible\n     to extend current list.\n\n   * For add action on dict ``value`` should be of type dict, so that we can update\n     current dict.\n\n#. ``replace``: Replace section, specified by last key of ``path`` with ``value``.\n\n#. ``delete``: Delete section, specified by last key of ``path``.\n\n#. ``rename``: Move content of section, specified by last key of ``path`` to section\n   with name specified in ``value``.\n\n\nTODO\n----\n\n 1. Add documentation to ReadTheDocs\n 2. Add creation of action's by diff.\n\nLicense\n-------\n\nCopyright Oleksii Petrenko, 2020.\n\nDistributed under the terms of the `MIT`_ license,\njson_modify is free and open source software.\n\n.. _`MIT`: https://github.com/Enacero/json_modify/blob/master/LICENSE\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "", "keywords": "json yaml", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "json-modify", "package_url": "https://pypi.org/project/json-modify/", "platform": "", "project_url": "https://pypi.org/project/json-modify/", "project_urls": {"PyPi": "https://pypi.python.org/pypi/json_modify", "Website": "https://github.com/Enacero/json_modify"}, "release_url": "https://pypi.org/project/json-modify/1.0.1/", "requires_dist": ["PyYAML (>=5.3.1)"], "requires_python": ">3.5", "summary": "Simple to use json/yaml modifier", "version": "1.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"json-modify\">\n<h2>json_modify</h2>\n<a href=\"https://pypi.python.org/pypi/json_modify\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/v/json_modify\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ea82b268cc6fd598ea77b4b8a78237fe5b20cded/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6a736f6e5f6d6f64696679\"></a>\n<a href=\"https://pypi.org/project/json_modify/\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/pyversions/json_modify.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c5d1c42dac4e3bb05ba9e1e862d06e5c60adcb0d/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f6a736f6e5f6d6f646966792e737667\"></a>\n<a href=\"https://github.com/Enacero/json_modify/blob/master/LICENSE\" rel=\"nofollow\"><img alt=\"https://img.shields.io/github/license/Enacero/json_modify\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/93ad5c68b59d77b9515fb174de89783ab0ffb065/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f456e616365726f2f6a736f6e5f6d6f64696679\"></a>\n<a href=\"https://github.com/psf/black\" rel=\"nofollow\"><img alt=\"https://img.shields.io/badge/code%20style-black-000000.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fbfdc7754183ecf079bc71ddeabaf88f6cbc5c00/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667\"></a>\n<a href=\"https://travis-ci.org/Enacero/json_modify\" rel=\"nofollow\"><img alt=\"https://travis-ci.org/Enacero/json_modify.svg?branch=master\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/9c2b29946ccceede22fd701672c8b86c3302bb10/68747470733a2f2f7472617669732d63692e6f72672f456e616365726f2f6a736f6e5f6d6f646966792e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/gh/Enacero/json_modify\" rel=\"nofollow\"><img alt=\"https://codecov.io/gh/Enacero/json_modify/branch/master/graph/badge.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/87dc1c98a9ff3d5a27e9d680c04a637e9c30ae5e/68747470733a2f2f636f6465636f762e696f2f67682f456e616365726f2f6a736f6e5f6d6f646966792f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a>\n<p><tt>json_modify</tt> is simple library that helps apply modifications\nto json/yaml files and python representations of json.</p>\n</div>\n<div id=\"installation\">\n<h2>Installation</h2>\n<pre>pip install json_modify\n</pre>\n</div>\n<div id=\"example\">\n<h2>Example</h2>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">json_modify</span> <span class=\"kn\">import</span> <span class=\"n\">apply_actions</span>\n\n<span class=\"n\">source</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s2\">\"spec\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"metadata\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"p\">{</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test1\"</span><span class=\"p\">,</span> <span class=\"s2\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test1\"</span><span class=\"p\">},</span>\n            <span class=\"p\">{</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test2\"</span><span class=\"p\">,</span> <span class=\"s2\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test2\"</span><span class=\"p\">}</span>\n        <span class=\"p\">],</span>\n        <span class=\"s2\">\"values\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"value1\"</span><span class=\"p\">:</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"s2\">\"value2\"</span><span class=\"p\">:</span> <span class=\"mi\">20</span><span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">actions</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span><span class=\"s2\">\"action\"</span><span class=\"p\">:</span> <span class=\"s2\">\"add\"</span><span class=\"p\">,</span>\n     <span class=\"s2\">\"path\"</span><span class=\"p\">:</span> <span class=\"s2\">\"spec/values\"</span><span class=\"p\">,</span>\n     <span class=\"s2\">\"value\"</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">\"value3\"</span><span class=\"p\">:</span> <span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"s2\">\"value4\"</span><span class=\"p\">:</span> <span class=\"mi\">40</span><span class=\"p\">}}</span>\n<span class=\"p\">]</span>\n\n<span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">apply_actions</span><span class=\"p\">(</span><span class=\"n\">source</span><span class=\"p\">,</span> <span class=\"n\">actions</span><span class=\"p\">)</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n\n<span class=\"p\">{</span><span class=\"s2\">\"spec\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"metadata\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test1\"</span><span class=\"p\">,</span> <span class=\"s2\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test1\"</span><span class=\"p\">},</span>\n        <span class=\"p\">{</span><span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test2\"</span><span class=\"p\">,</span> <span class=\"s2\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test2\"</span><span class=\"p\">}</span>\n    <span class=\"p\">],</span>\n    <span class=\"s2\">\"values\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"value1\"</span><span class=\"p\">:</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"s2\">\"value2\"</span><span class=\"p\">:</span> <span class=\"mi\">20</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"value3\"</span><span class=\"p\">:</span> <span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"s2\">\"value4\"</span><span class=\"p\">:</span> <span class=\"mi\">40</span><span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre>\n</div>\n<div id=\"markers\">\n<h2>Markers</h2>\n<p><tt>json_modify</tt> uses markers to traverse lists. Markers should be used in <tt>path</tt>\nfor example:</p>\n<pre><span class=\"s2\">\"path\"</span><span class=\"p\">:</span> <span class=\"s2\">\"metadata/$project_name/name\"</span>\n</pre>\n<p>There are two types of markers:</p>\n<ul>\n<li>Filter marker (<tt>$&lt;marker_name&gt;</tt>) - the kind of marker, that is used to select\ndictionary in list by list of <tt>section[key] == value</tt>. Filter marker should be\ndescribed in action where it\u2019s used. For example:</li>\n</ul>\n<pre><span class=\"p\">{</span>\n    <span class=\"s2\">\"action\"</span><span class=\"p\">:</span> <span class=\"s2\">\"delete\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"path\"</span><span class=\"p\">:</span> <span class=\"s2\">\"metadata/$project_name/name\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"project_name\"</span><span class=\"p\">:</span> <span class=\"p\">[{</span><span class=\"s2\">\"key\"</span><span class=\"p\">:</span> <span class=\"s2\">\"name\"</span><span class=\"p\">,</span> <span class=\"s2\">\"value\"</span><span class=\"p\">:</span> <span class=\"s2\">\"nginx\"</span><span class=\"p\">}]</span>\n<span class=\"p\">}</span>\n</pre>\n<ul>\n<li>Index marker (<tt>$&lt;index&gt;</tt>) - the kind of marker, that is used to select specific\nelement in list, by it\u2019s index. For example:</li>\n</ul>\n<pre><span class=\"p\">{</span>\n    <span class=\"s2\">\"action\"</span><span class=\"p\">:</span> <span class=\"s2\">\"replace\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"path\"</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"users\"</span><span class=\"p\">,</span> <span class=\"s2\">\"$0\"</span><span class=\"p\">],</span>\n    <span class=\"s2\">\"value\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"s2\">\"name\"</span><span class=\"p\">:</span> <span class=\"s2\">\"test_user\"</span><span class=\"p\">,</span> <span class=\"s2\">\"id\"</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre>\n<p>It\u2019s allowed to use any quantity of markers and mix both types of markers in single path.</p>\n</div>\n<div id=\"action-schema\">\n<h2>Action schema</h2>\n<ul>\n<li><tt>action</tt> (Required): Type of action, possible values are: add, replace, delete,\nrename(only for dictionaries).</li>\n<li><tt>path</tt> (Required): Path to the field that we want to change.\n<tt>path</tt> can be string, separated by delimiter (default is <tt>\\</tt>) or list of strings.</li>\n<li><tt>value</tt> (Optional for delete, Required for other): Value that should be applied\nto specified path. The type of value is described for each action separately.</li>\n<li><tt>marker</tt> (Required for each non index marker in path): List of dictionaries,\nthat should be applied to find value in list. Each dictionary consist of:<ul>\n<li><tt>key</tt> (Required): Name of the key that should be used for search.</li>\n<li><tt>value</tt> (Required): Value that is used to find concrete dictionary in\nlist of dictionaries.</li>\n</ul>\n</li>\n</ul>\n</div>\n<div id=\"supported-actions\">\n<h2>Supported actions</h2>\n<ol>\n<li><tt>add</tt>: Insert values into section, specified by last key of <tt>path</tt>.\nThe last key in section should lead to list or dict section.<ul>\n<li>For add action on list <tt>value</tt> should be of type list, so that it\u2019ll be possible\nto extend current list.</li>\n<li>For add action on dict <tt>value</tt> should be of type dict, so that we can update\ncurrent dict.</li>\n</ul>\n</li>\n<li><tt>replace</tt>: Replace section, specified by last key of <tt>path</tt> with <tt>value</tt>.</li>\n<li><tt>delete</tt>: Delete section, specified by last key of <tt>path</tt>.</li>\n<li><tt>rename</tt>: Move content of section, specified by last key of <tt>path</tt> to section\nwith name specified in <tt>value</tt>.</li>\n</ol>\n</div>\n<div id=\"todo\">\n<h2>TODO</h2>\n<blockquote>\n<ol>\n<li>Add documentation to ReadTheDocs</li>\n<li>Add creation of action\u2019s by diff.</li>\n</ol>\n</blockquote>\n</div>\n<div id=\"license\">\n<h2>License</h2>\n<p>Copyright Oleksii Petrenko, 2020.</p>\n<p>Distributed under the terms of the <a href=\"https://github.com/Enacero/json_modify/blob/master/LICENSE\" rel=\"nofollow\">MIT</a> license,\njson_modify is free and open source software.</p>\n</div>\n\n          </div>"}, "last_serial": 7062012, "releases": {"1.0.1": [{"comment_text": "", "digests": {"md5": "543ebec54a717a857dc3b2c3cdfc086a", "sha256": "f92996adfd256e19b399fb4f63fbe5af0270553dc944936286147b007822d323"}, "downloads": -1, "filename": "json_modify-1.0.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "543ebec54a717a857dc3b2c3cdfc086a", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": ">3.5", "size": 6752, "upload_time": "2020-04-20T18:40:56", "upload_time_iso_8601": "2020-04-20T18:40:56.014494Z", "url": "https://files.pythonhosted.org/packages/91/81/6b274c8d120c67e9264efcad3b1d406ebe69973380bd7aab098dfe4bffb2/json_modify-1.0.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "abf91c9ccbdc32a18358a0aabaef26a0", "sha256": "484506cc0ac72d8eb472b5d2454495794cd6c0fed435b4df96a6995cbb5869e0"}, "downloads": -1, "filename": "json_modify-1.0.1.tar.gz", "has_sig": false, "md5_digest": "abf91c9ccbdc32a18358a0aabaef26a0", "packagetype": "sdist", "python_version": "source", "requires_python": ">3.5", "size": 6086, "upload_time": "2020-04-20T18:40:58", "upload_time_iso_8601": "2020-04-20T18:40:58.120551Z", "url": "https://files.pythonhosted.org/packages/29/ae/42564b430931886e47fb82dddc0370c77335ddd909df150a22acd7852bff/json_modify-1.0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "543ebec54a717a857dc3b2c3cdfc086a", "sha256": "f92996adfd256e19b399fb4f63fbe5af0270553dc944936286147b007822d323"}, "downloads": -1, "filename": "json_modify-1.0.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "543ebec54a717a857dc3b2c3cdfc086a", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": ">3.5", "size": 6752, "upload_time": "2020-04-20T18:40:56", "upload_time_iso_8601": "2020-04-20T18:40:56.014494Z", "url": "https://files.pythonhosted.org/packages/91/81/6b274c8d120c67e9264efcad3b1d406ebe69973380bd7aab098dfe4bffb2/json_modify-1.0.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "abf91c9ccbdc32a18358a0aabaef26a0", "sha256": "484506cc0ac72d8eb472b5d2454495794cd6c0fed435b4df96a6995cbb5869e0"}, "downloads": -1, "filename": "json_modify-1.0.1.tar.gz", "has_sig": false, "md5_digest": "abf91c9ccbdc32a18358a0aabaef26a0", "packagetype": "sdist", "python_version": "source", "requires_python": ">3.5", "size": 6086, "upload_time": "2020-04-20T18:40:58", "upload_time_iso_8601": "2020-04-20T18:40:58.120551Z", "url": "https://files.pythonhosted.org/packages/29/ae/42564b430931886e47fb82dddc0370c77335ddd909df150a22acd7852bff/json_modify-1.0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:51:44 2020"}