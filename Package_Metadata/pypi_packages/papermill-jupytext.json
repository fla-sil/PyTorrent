{"info": {"author": "Marc Wouts", "author_email": "marc.wouts@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Environment :: Console", "Framework :: Jupyter", "Intended Audience :: Developers", "Intended Audience :: Science/Research", "License :: OSI Approved :: MIT License", "Programming Language :: Python", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Text Processing :: Markup"], "description": "# Parametrize and run scripts as notebooks with jupytext and papermill\n\n[![Build Status](https://travis-ci.com/mwouts/papermill_jupytext.svg?branch=master)](https://travis-ci.com/mwouts/papermill_jupytext)\n[![codecov.io](https://codecov.io/github/mwouts/papermill_jupytext/coverage.svg?branch=master)](https://codecov.io/github/mwouts/papermill_jupytext?branch=master)\n[![Language grade: Python](https://img.shields.io/badge/lgtm-A+-brightgreen.svg)](https://lgtm.com/projects/g/mwouts/papermill_jupytext/context:python)\n[![Pypi](https://img.shields.io/pypi/v/papermill_jupytext.svg)](https://pypi.python.org/pypi/papermill_jupytext)\n[![pyversions](https://img.shields.io/pypi/pyversions/papermill_jupytext.svg)](https://pypi.python.org/pypi/papermill_jupytext)\n[![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/mwouts/papermill_jupytext/master?filepath=README.md)\n\nThis is on-going research on how to run scripts as notebooks using Jupytext and Papermill. \n\nThe corresponding GitHub issues are [Jupytext #231](https://github.com/mwouts/jupytext/issues/231) and [Papermill #365](https://github.com/nteract/papermill/issues/365).\n\nNote that the below is a Bash Jupyter notebook that is [tested on our CI](https://github.com/mwouts/papermill_jupytext/blob/10dd863304614dd0c6328c859a077b52ba3c9822/.travis.yml#L29). If you wish, you can also open and run it interactively on [Binder](https://mybinder.org/v2/gh/mwouts/papermill_jupytext/master?filepath=README.md).\n\n```bash\ncd demo\n```\n\n## Jupytext and Papermill\n\nIt is possible to convert a script to a notebook using Jupytext, and then to run it using Papermill. Here we use `--set-kernel -` to use the kernel that matches the current Python environment.\n\n```bash\njupytext script.py -o notebook.ipynb --set-kernel -\n```\n\n```bash\npapermill notebook.ipynb executed_notebook.ipynb -p integer 2 -p text 'updated text'\n```\n\n```bash\npython -c \"import nbformat\nwith open('executed_notebook.ipynb') as fp:\n    nb = nbformat.read(fp, as_version=4)\nprint(nb.cells[-1]['outputs'][0]['text'])\"\n```\n\n## Inject parameters in a script using Papermill\n\nPapermill needs the language information in the kernel to inject the parameters in the notebooks, so in this case we also need to set a kernel for the notebook.\n\n```bash\njupytext script.py -o notebook.ipynb --set-kernel -\n```\n\n```bash\npapermill notebook.ipynb notebook_with_parameters.ipynb --prepare-only -p integer 3 -p text 'updated text, v3'\n```\n\nOnce the parameters have been injected, we can convert back the notebook to a script, and drop the kernel information:\n\n```bash\njupytext notebook_with_parameters.ipynb -o script_with_parameters.py --update-metadata '{\"kernelspec\":null, \"jupytext\":null}'\n```\n\n```bash\ncat script_with_parameters.py\n```\n\nAnd finally, we run the script using the Python interpreter:\n\n```bash\npython script_with_parameters.py\n```\n\n## Towards Papermill + Jupytext?\n\nWith the `papermill_jupytext` package, we can open Jupytext scripts with the `txt://` address. A kernel pointing to the current Python environment is injected in the documents that have no kernel.\n\n```bash\npapermill txt://script.py executed_notebook.ipynb  -p integer 4 -p text 'updated text, v4'\n```\n\n```bash\npython -c \"import nbformat\nwith open('executed_notebook.ipynb') as fp:\n    nb = nbformat.read(fp, as_version=4)\nprint(nb.cells[-1]['outputs'][0]['text'])\"\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/mwouts/papermill_jupytext", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "papermill-jupytext", "package_url": "https://pypi.org/project/papermill-jupytext/", "platform": "", "project_url": "https://pypi.org/project/papermill-jupytext/", "project_urls": {"Homepage": "https://github.com/mwouts/papermill_jupytext"}, "release_url": "https://pypi.org/project/papermill-jupytext/0.0.1/", "requires_dist": null, "requires_python": "", "summary": "Parametrize and run scripts as notebooks with jupytext and papermill", "version": "0.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Parametrize and run scripts as notebooks with jupytext and papermill</h1>\n<p><a href=\"https://travis-ci.com/mwouts/papermill_jupytext\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/cab9a64f4c39355888130fc4324893a415ee4c63/68747470733a2f2f7472617669732d63692e636f6d2f6d776f7574732f70617065726d696c6c5f6a757079746578742e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/github/mwouts/papermill_jupytext?branch=master\" rel=\"nofollow\"><img alt=\"codecov.io\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/fb5657eab56db83bb0e75bfe9fad3d0df02d361d/68747470733a2f2f636f6465636f762e696f2f6769746875622f6d776f7574732f70617065726d696c6c5f6a757079746578742f636f7665726167652e7376673f6272616e63683d6d6173746572\"></a>\n<a href=\"https://lgtm.com/projects/g/mwouts/papermill_jupytext/context:python\" rel=\"nofollow\"><img alt=\"Language grade: Python\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/121af4fcc1a3a71cea41cfccd7ebae768f688316/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c67746d2d412b2d627269676874677265656e2e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/papermill_jupytext\" rel=\"nofollow\"><img alt=\"Pypi\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b0a5d8cc8cb1ffcb23efba0d004b124ef3675208/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f70617065726d696c6c5f6a757079746578742e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/papermill_jupytext\" rel=\"nofollow\"><img alt=\"pyversions\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1730e6aa9562864c007c4bae032e27874e747652/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f70617065726d696c6c5f6a757079746578742e737667\"></a>\n<a href=\"https://mybinder.org/v2/gh/mwouts/papermill_jupytext/master?filepath=README.md\" rel=\"nofollow\"><img alt=\"Binder\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/85e91bbb928104e4ce317951541520c6b9c170e1/68747470733a2f2f6d7962696e6465722e6f72672f62616467655f6c6f676f2e737667\"></a></p>\n<p>This is on-going research on how to run scripts as notebooks using Jupytext and Papermill.</p>\n<p>The corresponding GitHub issues are <a href=\"https://github.com/mwouts/jupytext/issues/231\" rel=\"nofollow\">Jupytext #231</a> and <a href=\"https://github.com/nteract/papermill/issues/365\" rel=\"nofollow\">Papermill #365</a>.</p>\n<p>Note that the below is a Bash Jupyter notebook that is <a href=\"https://github.com/mwouts/papermill_jupytext/blob/10dd863304614dd0c6328c859a077b52ba3c9822/.travis.yml#L29\" rel=\"nofollow\">tested on our CI</a>. If you wish, you can also open and run it interactively on <a href=\"https://mybinder.org/v2/gh/mwouts/papermill_jupytext/master?filepath=README.md\" rel=\"nofollow\">Binder</a>.</p>\n<pre><span class=\"nb\">cd</span> demo\n</pre>\n<h2>Jupytext and Papermill</h2>\n<p>It is possible to convert a script to a notebook using Jupytext, and then to run it using Papermill. Here we use <code>--set-kernel -</code> to use the kernel that matches the current Python environment.</p>\n<pre>jupytext script.py -o notebook.ipynb --set-kernel -\n</pre>\n<pre>papermill notebook.ipynb executed_notebook.ipynb -p integer <span class=\"m\">2</span> -p text <span class=\"s1\">'updated text'</span>\n</pre>\n<pre>python -c <span class=\"s2\">\"import nbformat</span>\n<span class=\"s2\">with open('executed_notebook.ipynb') as fp:</span>\n<span class=\"s2\">    nb = nbformat.read(fp, as_version=4)</span>\n<span class=\"s2\">print(nb.cells[-1]['outputs'][0]['text'])\"</span>\n</pre>\n<h2>Inject parameters in a script using Papermill</h2>\n<p>Papermill needs the language information in the kernel to inject the parameters in the notebooks, so in this case we also need to set a kernel for the notebook.</p>\n<pre>jupytext script.py -o notebook.ipynb --set-kernel -\n</pre>\n<pre>papermill notebook.ipynb notebook_with_parameters.ipynb --prepare-only -p integer <span class=\"m\">3</span> -p text <span class=\"s1\">'updated text, v3'</span>\n</pre>\n<p>Once the parameters have been injected, we can convert back the notebook to a script, and drop the kernel information:</p>\n<pre>jupytext notebook_with_parameters.ipynb -o script_with_parameters.py --update-metadata <span class=\"s1\">'{\"kernelspec\":null, \"jupytext\":null}'</span>\n</pre>\n<pre>cat script_with_parameters.py\n</pre>\n<p>And finally, we run the script using the Python interpreter:</p>\n<pre>python script_with_parameters.py\n</pre>\n<h2>Towards Papermill + Jupytext?</h2>\n<p>With the <code>papermill_jupytext</code> package, we can open Jupytext scripts with the <code>txt://</code> address. A kernel pointing to the current Python environment is injected in the documents that have no kernel.</p>\n<pre>papermill txt://script.py executed_notebook.ipynb  -p integer <span class=\"m\">4</span> -p text <span class=\"s1\">'updated text, v4'</span>\n</pre>\n<pre>python -c <span class=\"s2\">\"import nbformat</span>\n<span class=\"s2\">with open('executed_notebook.ipynb') as fp:</span>\n<span class=\"s2\">    nb = nbformat.read(fp, as_version=4)</span>\n<span class=\"s2\">print(nb.cells[-1]['outputs'][0]['text'])\"</span>\n</pre>\n\n          </div>"}, "last_serial": 5564934, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "641dc12bc73808207a2186be38ecf721", "sha256": "e959c868498debd557316fd265483d104708255fd7d6c19708821b1e86b502bf"}, "downloads": -1, "filename": "papermill_jupytext-0.0.1.tar.gz", "has_sig": false, "md5_digest": "641dc12bc73808207a2186be38ecf721", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3653, "upload_time": "2019-07-21T22:37:52", "upload_time_iso_8601": "2019-07-21T22:37:52.052905Z", "url": "https://files.pythonhosted.org/packages/e0/a6/11a5c9193f66644724b8ad22f40230d2fff5097dc5bdf98516fd122a1ac0/papermill_jupytext-0.0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "641dc12bc73808207a2186be38ecf721", "sha256": "e959c868498debd557316fd265483d104708255fd7d6c19708821b1e86b502bf"}, "downloads": -1, "filename": "papermill_jupytext-0.0.1.tar.gz", "has_sig": false, "md5_digest": "641dc12bc73808207a2186be38ecf721", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3653, "upload_time": "2019-07-21T22:37:52", "upload_time_iso_8601": "2019-07-21T22:37:52.052905Z", "url": "https://files.pythonhosted.org/packages/e0/a6/11a5c9193f66644724b8ad22f40230d2fff5097dc5bdf98516fd122a1ac0/papermill_jupytext-0.0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:58:47 2020"}