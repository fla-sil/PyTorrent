{"info": {"author": "Michael Nazario", "author_email": "mnazario@palantir.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: Apache Software License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.4", "Topic :: Internet :: WWW/HTTP :: WSGI :: Application"], "description": "..\n    Copyright 2015 Palantir Technologies, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n============\ntypedjsonrpc\n============\n.. image:: https://img.shields.io/pypi/status/typedjsonrpc.svg\n     :target: https://img.shields.io/pypi/status/typedjsonrpc\n\n.. image:: https://img.shields.io/pypi/l/typedjsonrpc.svg\n     :target: https://img.shields.io/pypi/l/typedjsonrpc\n\n.. image:: https://img.shields.io/pypi/pyversions/typedjsonrpc.svg\n     :target: https://img.shields.io/pypi/pyversions/typedjsonrpc\n\n.. image:: https://img.shields.io/pypi/wheel/typedjsonrpc.svg\n     :target: https://img.shields.io/pypi/wheel/typedjsonrpc\n\n.. image:: https://badge.fury.io/py/typedjsonrpc.svg\n     :target: http://badge.fury.io/py/typedjsonrpc\n\n.. image:: https://circleci.com/gh/palantir/typedjsonrpc.svg?style=shield\n     :target: https://circleci.com/gh/palantir/typedjsonrpc\n\ntypedjsonrpc is a decorator-based `JSON-RPC <http://www.jsonrpc.org/specification>`_ library for\nPython that exposes parameter and return types. It is influenced by\n`Flask JSON-RPC <https://github.com/cenobites/flask-jsonrpc>`_ but has some key differences:\n\ntypedjsonrpc...\n\n* allows return type checking\n* focuses on easy debugging\n\nThese docs are also available on `Read the Docs <http://typedjsonrpc.readthedocs.org>`_.\n\nUsing typedjsonrpc\n==================\nInstallation\n------------\nUse pip to install typedjsonrpc:\n\n.. code-block:: bash\n\n    $ pip install typedjsonrpc\n\nProject setup\n-------------\nTo include typedjsonrpc in your project, use:\n\n.. code-block:: python\n\n    from typedjsonrpc.registry import Registry\n    from typedjsonrpc.server import Server\n\n    registry = Registry()\n    server = Server(registry)\n\nThe registry will keep track of methods that are available for JSON-RPC. Whenever you annotate\na method, it will be added to the registry. You can always use the method ``rpc.describe()`` to get\na description of all available methods. ``Server`` is a\n`WSGI <http://wsgi.readthedocs.org/en/latest/>`_ compatible app that handles requests. ``Server``\nalso has a development mode that can be run using ``server.run(host, port)``.\n\nExample usage\n-------------\nAnnotate your methods to make them accessible and provide type information:\n\n.. code-block:: python\n\n    @registry.method(returns=int, a=int, b=int)\n    def add(a, b):\n        return a + b\n\n    @registry.method(returns=str, a=str, b=str)\n    def concat(a, b):\n        return a + b\n\nThe return type *has* to be declared using the ``returns`` keyword. For methods that don't return\nanything, you can use either ``type(None)`` or just ``None``:\n\n.. code-block:: python\n\n    @registry.method(returns=type(None), a=str)\n    def foo(a):\n        print(a)\n\n    @registry.method(returns=None, a=int)\n    def bar(a):\n        print(5 * a)\n\nYou can use any of the basic JSON types:\n\n==========  =====================================\nJSON type   Python type\n==========  =====================================\nstring      basestring (Python 2), str (Python 3)\nnumber      int, float\nnull        None\nboolean     bool\narray       list\nobject      dict\n==========  =====================================\n\nYour functions may also accept ``*args`` and ``**kwargs``, but you cannot declare their types. So\nthe correct way to use these would be:\n\n.. code-block:: python\n\n    @registry.method(a=str)\n    def foo(a, *args, **kwargs):\n        return a + str(args) + str(kwargs)\n\nTo check that everything is running properly, try (assuming ``add`` is declared in your main\nmodule):\n\n.. code-block:: bash\n\n    $ curl -XPOST http://<host>:<port>/api -d @- <<EOF\n    {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"__main__.add\",\n        \"params\": {\n            \"a\": 5,\n            \"b\": 7\n        },\n        \"id\": \"foo\"\n    }\n    EOF\n\n    {\n        \"jsonrpc\": \"2.0\",\n        \"id\": \"foo\",\n        \"result\": 12\n    }\n\nPassing any non-integer arguments into ``add`` will raise a ``InvalidParamsError``.\n\nBatching\n--------\nYou can send a list of JSON-RPC request objects as one request and will receive a list of JSON-RPC\nresponse objects in return. These response objects can be mapped back to the request objects using\nthe ``id``. Here's an example of calling the ``add`` method with two sets of parameters:\n\n.. code-block:: bash\n\n    $ curl -XPOST http://<host>:<port>/api -d @- <<EOF\n    [\n        {\n            \"jsonrpc\": \"2.0\",\n            \"method\": \"__main__.add\",\n            \"params\": {\n                \"a\": 5,\n                \"b\": 7\n            },\n            \"id\": \"foo\"\n        }, {\n            \"jsonrpc\": \"2.0\",\n            \"method\": \"__main__.add\",\n            \"params\": {\n                \"a\": 42,\n                \"b\": 1337\n            },\n            \"id\": \"bar\"\n        }\n    ]\n    EOF\n\n    [\n        {\n            \"jsonrpc\": \"2.0\",\n            \"id\": \"foo\",\n            \"result\": 12\n        }, {\n            \"jsonrpc\": \"2.0\",\n            \"id\": \"bar\",\n            \"result\": 1379\n        }\n    ]\n\nDebugging\n---------\nIf you create the registry with the parameter ``debug=True``, you'll be able to use\n`werkzeug's debugger <http://werkzeug.pocoo.org/docs/0.10/debug/>`_. In that case, if there is an\nerror during execution - e.g. you tried to use a string as one of the parameters for ``add`` - the\nresponse will contain an error object with a ``debug_url``:\n\n.. code-block:: bash\n\n    $ curl -XPOST http://<host>:<port>/api -d @- <<EOF\n    {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"__main__.add\",\n        \"params\": {\n            \"a\": 42,\n            \"b\": \"hello\"\n        },\n        \"id\": \"bar\"\n    }\n    EOF\n\n    {\n        \"jsonrpc\": \"2.0\",\n        \"id\": \"bar\",\n        \"error\": {\n            \"message\": \"Invalid params\",\n            \"code\": -32602,\n            \"data\": {\n                \"message\": \"Value 'hello' for parameter 'b' is not of expected type <type 'int'>.\",\n                \"debug_url\": \"/debug/1234567890\"\n            }\n        }\n    }\n\nThis tells you to find the traceback interpreter at ``<host>:<port>/debug/1234567890``.\n\nLogging\n-------\n\nThe registry has a default logger in the module ``typedjsonrpc.registry`` and it logs all errors\nthat are not defined by ``typedjsonrpc``. You can configure the logger as follows:\n\n.. code-block:: python\n\n    import logging\n    logger = logging.getLogger(\"typedjsonrpc.registry\")\n    # Do configuration to this logger\n\nHTTP status codes\n-----------------\nSince typedjsonrpc 0.4.0, HTTP status codes were added to the responses from the\n``typedjsonrpc.server.Server`` class. This is to improve the usage of typedjsonrpc over HTTP. The\nfollowing chart are the satus codes which are returned:\n\n+-----------------------------------+---------+-------------+\n|Condition                          | Batched | Status code |\n+===================================+=========+=============+\n| Success                           | Y       | 200         |\n+                                   +---------+-------------+\n|                                   | N       | 200         |\n+-----------------------------------+---------+-------------+\n| All notifications                 | Y       | 204         |\n+                                   +---------+-------------+\n|                                   | N       | 204         |\n+-----------------------------------+---------+-------------+\n| ParseError or InvalidRequestError | Y       | 200         |\n+                                   +---------+-------------+\n|                                   | N       | 400         |\n+-----------------------------------+---------+-------------+\n| MethodNotFoundError               | Y       | 200         |\n+                                   +---------+-------------+\n|                                   | N       | 404         |\n+-----------------------------------+---------+-------------+\n| All other errors                  | Y       | 200         |\n+                                   +---------+-------------+\n|                                   | N       | 500         |\n+-----------------------------------+---------+-------------+\n\nAdditional features\n===================\n\nCustomizing type serialization\n------------------------------\nIf you would like to serialize custom types, you can set the ``json_encoder`` and ``json_decoder``\nattributes on ``Server`` to your own custom ``json.JSONEncoder`` and ``json.JSONDecoder``\ninstance. By default, we use the default encoder and decoder.\n\nAdding hooks before the first request\n-------------------------------------\nYou can add functions to run before the first request is called. This can be useful for some\nspecial setup you need for your WSGI app. For example, you can register a function to print\ndebugging information before your first request:\n\n.. code-block:: python\n\n    import datetime\n\n    from typedjsonrpc.registry import Registry\n    from typedjsonrpc.server import Server\n\n    registry = Registry()\n    server = Server(registry)\n\n    def print_time():\n        now = datetime.datetime.now()\n        print(\"Handling first request at: {}\".format(now))\n\n    server.register_before_first_request(print_time)\n\nAccessing the HTTP request from JSON-RPC methods\n------------------------------------------------\nIn some situations, you may want to access the HTTP request from your JSON-RPC method. For example,\nyou could need to perform logic based on headers in the request. In the `typedjsonrpc.server`\nmodule, there is a special `typedjsonrpc.server.current_request` attribute which allows you to\naccess the HTTP request which was used to call the current method.\n\n.. warning::\n\n    ``current_request`` is implemented as a thread-local. If you attempt to call\n    ``Server.wsgi_app`` from ``Registry.method``, then ``current_request`` *will be overriden in*\n    *that thread*.\n\nExample:\n\n.. code-block:: python\n\n    from typedjsonrpc.server import current_request\n\n    @registry.method(returns=list)\n    def get_headers():\n        return list(current_request.headers)\n\nDisabling strictness of floats\n------------------------------\n``typedjsonrpc`` by default will only accept floats into a `float` typed parameter. For example, if\nyour function were this:\n\n.. code-block:: python\n\n    import math\n\n    @registry.method(returns=int, x=float)\n    def floor(x):\n        return int(math.floor(x))\n\nand your input were this::\n\n    {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"floor\",\n        \"params\": {\n            \"x\": 1\n        },\n        \"id\": \"foo\"\n    }\n\nYou would get an invalid param error like this::\n\n    {\n        \"error\": {\n            \"code\": -32602,\n            \"data\": {\n                \"debug_url\": \"/debug/4456954960\",\n                \"message\": \"Value '1' for parameter 'x' is not of expected type <type 'float'>.\"\n            },\n            \"message\": \"Invalid params\"\n        },\n        \"id\": \"foo\",\n        \"jsonrpc\": \"2.0\"\n    }\n\nThis can actually frequently come up when you use a JSON encoder. A JSON encoder may choose to write\nthe float ``1.0`` as an integer ``1``. In order to get around this, you can manually edit the JSON\nor set ``strict_floats`` to ``False`` in your `typedjsonrpc.registry.Registry`.", "description_content_type": null, "docs_url": null, "download_url": null, "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/palantir/typedjsonrpc", "keywords": "jsonrpc json-rpc rpc", "license": "Apache License 2.0", "maintainer": null, "maintainer_email": null, "name": "typedjsonrpc", "package_url": "https://pypi.org/project/typedjsonrpc/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/typedjsonrpc/", "project_urls": {"Homepage": "https://github.com/palantir/typedjsonrpc"}, "release_url": "https://pypi.org/project/typedjsonrpc/0.4.0/", "requires_dist": null, "requires_python": null, "summary": "A typed decorator-based JSON-RPC library for Python", "version": "0.4.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"https://img.shields.io/pypi/status/typedjsonrpc\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/status/typedjsonrpc.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ff35296ff49e0ce0c3dcf8359d3a9e27a58256be/68747470733a2f2f696d672e736869656c64732e696f2f707970692f7374617475732f74797065646a736f6e7270632e737667\"></a>\n<a href=\"https://img.shields.io/pypi/l/typedjsonrpc\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/l/typedjsonrpc.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8bf1a788035316321ea12dc78b492ee8df64406a/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f74797065646a736f6e7270632e737667\"></a>\n<a href=\"https://img.shields.io/pypi/pyversions/typedjsonrpc\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/pyversions/typedjsonrpc.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/230305f747aa229eec43be9d4849413b81d0628b/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f74797065646a736f6e7270632e737667\"></a>\n<a href=\"https://img.shields.io/pypi/wheel/typedjsonrpc\" rel=\"nofollow\"><img alt=\"https://img.shields.io/pypi/wheel/typedjsonrpc.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ace76da28250c5f7390edfd2845393a2711650ac/68747470733a2f2f696d672e736869656c64732e696f2f707970692f776865656c2f74797065646a736f6e7270632e737667\"></a>\n<a href=\"http://badge.fury.io/py/typedjsonrpc\" rel=\"nofollow\"><img alt=\"https://badge.fury.io/py/typedjsonrpc.svg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/eb4d7ce0c0ccbe0d30fcfc2e22620d2f16a6b79e/68747470733a2f2f62616467652e667572792e696f2f70792f74797065646a736f6e7270632e737667\"></a>\n<a href=\"https://circleci.com/gh/palantir/typedjsonrpc\" rel=\"nofollow\"><img alt=\"https://circleci.com/gh/palantir/typedjsonrpc.svg?style=shield\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2b01c27ecbd0d85ce7f4b41ce93fb4ff78475e5b/68747470733a2f2f636972636c6563692e636f6d2f67682f70616c616e7469722f74797065646a736f6e7270632e7376673f7374796c653d736869656c64\"></a>\n<p>typedjsonrpc is a decorator-based <a href=\"http://www.jsonrpc.org/specification\" rel=\"nofollow\">JSON-RPC</a> library for\nPython that exposes parameter and return types. It is influenced by\n<a href=\"https://github.com/cenobites/flask-jsonrpc\" rel=\"nofollow\">Flask JSON-RPC</a> but has some key differences:</p>\n<p>typedjsonrpc\u2026</p>\n<ul>\n<li>allows return type checking</li>\n<li>focuses on easy debugging</li>\n</ul>\n<p>These docs are also available on <a href=\"http://typedjsonrpc.readthedocs.org\" rel=\"nofollow\">Read the Docs</a>.</p>\n<div id=\"using-typedjsonrpc\">\n<h2>Using typedjsonrpc</h2>\n<div id=\"installation\">\n<h3>Installation</h3>\n<p>Use pip to install typedjsonrpc:</p>\n<pre>$ pip install typedjsonrpc\n</pre>\n</div>\n<div id=\"project-setup\">\n<h3>Project setup</h3>\n<p>To include typedjsonrpc in your project, use:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedjsonrpc.registry</span> <span class=\"kn\">import</span> <span class=\"n\">Registry</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typedjsonrpc.server</span> <span class=\"kn\">import</span> <span class=\"n\">Server</span>\n\n<span class=\"n\">registry</span> <span class=\"o\">=</span> <span class=\"n\">Registry</span><span class=\"p\">()</span>\n<span class=\"n\">server</span> <span class=\"o\">=</span> <span class=\"n\">Server</span><span class=\"p\">(</span><span class=\"n\">registry</span><span class=\"p\">)</span>\n</pre>\n<p>The registry will keep track of methods that are available for JSON-RPC. Whenever you annotate\na method, it will be added to the registry. You can always use the method <tt>rpc.describe()</tt> to get\na description of all available methods. <tt>Server</tt> is a\n<a href=\"http://wsgi.readthedocs.org/en/latest/\" rel=\"nofollow\">WSGI</a> compatible app that handles requests. <tt>Server</tt>\nalso has a development mode that can be run using <tt>server.run(host, port)</tt>.</p>\n</div>\n<div id=\"example-usage\">\n<h3>Example usage</h3>\n<p>Annotate your methods to make them accessible and provide type information:</p>\n<pre><span class=\"nd\">@registry</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"n\">returns</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">add</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">a</span> <span class=\"o\">+</span> <span class=\"n\">b</span>\n\n<span class=\"nd\">@registry</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"n\">returns</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">concat</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">a</span> <span class=\"o\">+</span> <span class=\"n\">b</span>\n</pre>\n<p>The return type <em>has</em> to be declared using the <tt>returns</tt> keyword. For methods that don\u2019t return\nanything, you can use either <tt>type(None)</tt> or just <tt>None</tt>:</p>\n<pre><span class=\"nd\">@registry</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"n\">returns</span><span class=\"o\">=</span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">),</span> <span class=\"n\">a</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">foo</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@registry</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"n\">returns</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">bar</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"n\">a</span><span class=\"p\">)</span>\n</pre>\n<p>You can use any of the basic JSON types:</p>\n<table>\n<colgroup>\n<col>\n<col>\n</colgroup>\n<thead>\n<tr><th>JSON type</th>\n<th>Python type</th>\n</tr>\n</thead>\n<tbody>\n<tr><td>string</td>\n<td>basestring (Python 2), str (Python 3)</td>\n</tr>\n<tr><td>number</td>\n<td>int, float</td>\n</tr>\n<tr><td>null</td>\n<td>None</td>\n</tr>\n<tr><td>boolean</td>\n<td>bool</td>\n</tr>\n<tr><td>array</td>\n<td>list</td>\n</tr>\n<tr><td>object</td>\n<td>dict</td>\n</tr>\n</tbody>\n</table>\n<p>Your functions may also accept <tt>*args</tt> and <tt>**kwargs</tt>, but you cannot declare their types. So\nthe correct way to use these would be:</p>\n<pre><span class=\"nd\">@registry</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">foo</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">a</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n</pre>\n<p>To check that everything is running properly, try (assuming <tt>add</tt> is declared in your main\nmodule):</p>\n<pre>$ curl -XPOST http://&lt;host&gt;:&lt;port&gt;/api -d @- <span class=\"s\">&lt;&lt;EOF\n{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"__main__.add\",\n    \"params\": {\n        \"a\": 5,\n        \"b\": 7\n    },\n    \"id\": \"foo\"\n}\nEOF</span>\n\n<span class=\"o\">{</span>\n    <span class=\"s2\">\"jsonrpc\"</span>: <span class=\"s2\">\"2.0\"</span>,\n    <span class=\"s2\">\"id\"</span>: <span class=\"s2\">\"foo\"</span>,\n    <span class=\"s2\">\"result\"</span>: <span class=\"m\">12</span>\n<span class=\"o\">}</span>\n</pre>\n<p>Passing any non-integer arguments into <tt>add</tt> will raise a <tt>InvalidParamsError</tt>.</p>\n</div>\n<div id=\"batching\">\n<h3>Batching</h3>\n<p>You can send a list of JSON-RPC request objects as one request and will receive a list of JSON-RPC\nresponse objects in return. These response objects can be mapped back to the request objects using\nthe <tt>id</tt>. Here\u2019s an example of calling the <tt>add</tt> method with two sets of parameters:</p>\n<pre>$ curl -XPOST http://&lt;host&gt;:&lt;port&gt;/api -d @- <span class=\"s\">&lt;&lt;EOF\n[\n    {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"__main__.add\",\n        \"params\": {\n            \"a\": 5,\n            \"b\": 7\n        },\n        \"id\": \"foo\"\n    }, {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"__main__.add\",\n        \"params\": {\n            \"a\": 42,\n            \"b\": 1337\n        },\n        \"id\": \"bar\"\n    }\n]\nEOF</span>\n\n<span class=\"o\">[</span>\n    <span class=\"o\">{</span>\n        <span class=\"s2\">\"jsonrpc\"</span>: <span class=\"s2\">\"2.0\"</span>,\n        <span class=\"s2\">\"id\"</span>: <span class=\"s2\">\"foo\"</span>,\n        <span class=\"s2\">\"result\"</span>: <span class=\"m\">12</span>\n    <span class=\"o\">}</span>, <span class=\"o\">{</span>\n        <span class=\"s2\">\"jsonrpc\"</span>: <span class=\"s2\">\"2.0\"</span>,\n        <span class=\"s2\">\"id\"</span>: <span class=\"s2\">\"bar\"</span>,\n        <span class=\"s2\">\"result\"</span>: <span class=\"m\">1379</span>\n    <span class=\"o\">}</span>\n<span class=\"o\">]</span>\n</pre>\n</div>\n<div id=\"debugging\">\n<h3>Debugging</h3>\n<p>If you create the registry with the parameter <tt>debug=True</tt>, you\u2019ll be able to use\n<a href=\"http://werkzeug.pocoo.org/docs/0.10/debug/\" rel=\"nofollow\">werkzeug\u2019s debugger</a>. In that case, if there is an\nerror during execution - e.g. you tried to use a string as one of the parameters for <tt>add</tt> - the\nresponse will contain an error object with a <tt>debug_url</tt>:</p>\n<pre>$ curl -XPOST http://&lt;host&gt;:&lt;port&gt;/api -d @- <span class=\"s\">&lt;&lt;EOF\n{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"__main__.add\",\n    \"params\": {\n        \"a\": 42,\n        \"b\": \"hello\"\n    },\n    \"id\": \"bar\"\n}\nEOF</span>\n\n<span class=\"o\">{</span>\n    <span class=\"s2\">\"jsonrpc\"</span>: <span class=\"s2\">\"2.0\"</span>,\n    <span class=\"s2\">\"id\"</span>: <span class=\"s2\">\"bar\"</span>,\n    <span class=\"s2\">\"error\"</span>: <span class=\"o\">{</span>\n        <span class=\"s2\">\"message\"</span>: <span class=\"s2\">\"Invalid params\"</span>,\n        <span class=\"s2\">\"code\"</span>: -32602,\n        <span class=\"s2\">\"data\"</span>: <span class=\"o\">{</span>\n            <span class=\"s2\">\"message\"</span>: <span class=\"s2\">\"Value 'hello' for parameter 'b' is not of expected type &lt;type 'int'&gt;.\"</span>,\n            <span class=\"s2\">\"debug_url\"</span>: <span class=\"s2\">\"/debug/1234567890\"</span>\n        <span class=\"o\">}</span>\n    <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</pre>\n<p>This tells you to find the traceback interpreter at <tt><span class=\"pre\">&lt;host&gt;:&lt;port&gt;/debug/1234567890</span></tt>.</p>\n</div>\n<div id=\"logging\">\n<h3>Logging</h3>\n<p>The registry has a default logger in the module <tt>typedjsonrpc.registry</tt> and it logs all errors\nthat are not defined by <tt>typedjsonrpc</tt>. You can configure the logger as follows:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"n\">logger</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"s2\">\"typedjsonrpc.registry\"</span><span class=\"p\">)</span>\n<span class=\"c1\"># Do configuration to this logger</span>\n</pre>\n</div>\n<div id=\"http-status-codes\">\n<h3>HTTP status codes</h3>\n<p>Since typedjsonrpc 0.4.0, HTTP status codes were added to the responses from the\n<tt>typedjsonrpc.server.Server</tt> class. This is to improve the usage of typedjsonrpc over HTTP. The\nfollowing chart are the satus codes which are returned:</p>\n<table>\n<colgroup>\n<col>\n<col>\n<col>\n</colgroup>\n<thead>\n<tr><th>Condition</th>\n<th>Batched</th>\n<th>Status code</th>\n</tr>\n</thead>\n<tbody>\n<tr><td>Success</td>\n<td>Y</td>\n<td>200</td>\n</tr>\n<tr><td>N</td>\n<td>200</td>\n</tr>\n<tr><td>All notifications</td>\n<td>Y</td>\n<td>204</td>\n</tr>\n<tr><td>N</td>\n<td>204</td>\n</tr>\n<tr><td>ParseError or InvalidRequestError</td>\n<td>Y</td>\n<td>200</td>\n</tr>\n<tr><td>N</td>\n<td>400</td>\n</tr>\n<tr><td>MethodNotFoundError</td>\n<td>Y</td>\n<td>200</td>\n</tr>\n<tr><td>N</td>\n<td>404</td>\n</tr>\n<tr><td>All other errors</td>\n<td>Y</td>\n<td>200</td>\n</tr>\n<tr><td>N</td>\n<td>500</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<div id=\"additional-features\">\n<h2>Additional features</h2>\n<div id=\"customizing-type-serialization\">\n<h3>Customizing type serialization</h3>\n<p>If you would like to serialize custom types, you can set the <tt>json_encoder</tt> and <tt>json_decoder</tt>\nattributes on <tt>Server</tt> to your own custom <tt>json.JSONEncoder</tt> and <tt>json.JSONDecoder</tt>\ninstance. By default, we use the default encoder and decoder.</p>\n</div>\n<div id=\"adding-hooks-before-the-first-request\">\n<h3>Adding hooks before the first request</h3>\n<p>You can add functions to run before the first request is called. This can be useful for some\nspecial setup you need for your WSGI app. For example, you can register a function to print\ndebugging information before your first request:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">datetime</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">typedjsonrpc.registry</span> <span class=\"kn\">import</span> <span class=\"n\">Registry</span>\n<span class=\"kn\">from</span> <span class=\"nn\">typedjsonrpc.server</span> <span class=\"kn\">import</span> <span class=\"n\">Server</span>\n\n<span class=\"n\">registry</span> <span class=\"o\">=</span> <span class=\"n\">Registry</span><span class=\"p\">()</span>\n<span class=\"n\">server</span> <span class=\"o\">=</span> <span class=\"n\">Server</span><span class=\"p\">(</span><span class=\"n\">registry</span><span class=\"p\">)</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">print_time</span><span class=\"p\">():</span>\n    <span class=\"n\">now</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"Handling first request at: </span><span class=\"si\">{}</span><span class=\"s2\">\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">now</span><span class=\"p\">))</span>\n\n<span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">register_before_first_request</span><span class=\"p\">(</span><span class=\"n\">print_time</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"accessing-the-http-request-from-json-rpc-methods\">\n<h3>Accessing the HTTP request from JSON-RPC methods</h3>\n<p>In some situations, you may want to access the HTTP request from your JSON-RPC method. For example,\nyou could need to perform logic based on headers in the request. In the <cite>typedjsonrpc.server</cite>\nmodule, there is a special <cite>typedjsonrpc.server.current_request</cite> attribute which allows you to\naccess the HTTP request which was used to call the current method.</p>\n<div>\n<p>Warning</p>\n<p><tt>current_request</tt> is implemented as a thread-local. If you attempt to call\n<tt>Server.wsgi_app</tt> from <tt>Registry.method</tt>, then <tt>current_request</tt> <em>will be overriden in</em>\n<em>that thread</em>.</p>\n</div>\n<p>Example:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">typedjsonrpc.server</span> <span class=\"kn\">import</span> <span class=\"n\">current_request</span>\n\n<span class=\"nd\">@registry</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"n\">returns</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">get_headers</span><span class=\"p\">():</span>\n    <span class=\"k\">return</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">current_request</span><span class=\"o\">.</span><span class=\"n\">headers</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"disabling-strictness-of-floats\">\n<h3>Disabling strictness of floats</h3>\n<p><tt>typedjsonrpc</tt> by default will only accept floats into a <cite>float</cite> typed parameter. For example, if\nyour function were this:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">math</span>\n\n<span class=\"nd\">@registry</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"n\">returns</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"o\">=</span><span class=\"nb\">float</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">floor</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">math</span><span class=\"o\">.</span><span class=\"n\">floor</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">))</span>\n</pre>\n<p>and your input were this:</p>\n<pre>{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"floor\",\n    \"params\": {\n        \"x\": 1\n    },\n    \"id\": \"foo\"\n}\n</pre>\n<p>You would get an invalid param error like this:</p>\n<pre>{\n    \"error\": {\n        \"code\": -32602,\n        \"data\": {\n            \"debug_url\": \"/debug/4456954960\",\n            \"message\": \"Value '1' for parameter 'x' is not of expected type &lt;type 'float'&gt;.\"\n        },\n        \"message\": \"Invalid params\"\n    },\n    \"id\": \"foo\",\n    \"jsonrpc\": \"2.0\"\n}\n</pre>\n<p>This can actually frequently come up when you use a JSON encoder. A JSON encoder may choose to write\nthe float <tt>1.0</tt> as an integer <tt>1</tt>. In order to get around this, you can manually edit the JSON\nor set <tt>strict_floats</tt> to <tt>False</tt> in your <cite>typedjsonrpc.registry.Registry</cite>.</p>\n</div>\n</div>\n\n          </div>"}, "last_serial": 1904615, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "5dfbfea01363986f99126ab897c7d55a", "sha256": "fdb2daffdc9c495aa7eef9e9e2113fb43d490b84d57493eee76e5791ce3d441d"}, "downloads": -1, "filename": "typedjsonrpc-0.1.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "5dfbfea01363986f99126ab897c7d55a", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 18663, "upload_time": "2015-08-14T02:43:29", "upload_time_iso_8601": "2015-08-14T02:43:29.319061Z", "url": "https://files.pythonhosted.org/packages/68/af/c69831185fcdd2aa3c4a167bc3530614f864a59a304c178344c316b6219e/typedjsonrpc-0.1.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "83edc12aea44bdd4209dd147ec8fb9cc", "sha256": "c1311adca27c91a2b3355e6e186f14a8b1f2c002df0050cac475a6c2dd17a128"}, "downloads": -1, "filename": "typedjsonrpc-0.1.0.tar.gz", "has_sig": false, "md5_digest": "83edc12aea44bdd4209dd147ec8fb9cc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 28384, "upload_time": "2015-08-14T02:43:32", "upload_time_iso_8601": "2015-08-14T02:43:32.782433Z", "url": "https://files.pythonhosted.org/packages/e7/b7/96313adb72127ce8fa78cc2065d9f3b09bd79ffbaa8ff5046620d49342dd/typedjsonrpc-0.1.0.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "dd2f84ef2fd295824e75ca0ec107a0a9", "sha256": "75a714182b7b14b54cba63a6c5e5abfb9c7c15d3428304b160b1b85f20d658c8"}, "downloads": -1, "filename": "typedjsonrpc-0.2.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "dd2f84ef2fd295824e75ca0ec107a0a9", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 20122, "upload_time": "2015-08-21T04:08:15", "upload_time_iso_8601": "2015-08-21T04:08:15.384848Z", "url": "https://files.pythonhosted.org/packages/8a/45/e0e73be99ecfdab5626606ce3e68e1220deef29c5187db880162738e0980/typedjsonrpc-0.2.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "4779962b406ab70b89b13b36d57ecb69", "sha256": "418e9d6fd93cb6feef41da7e1e2a06ee458f690e9d3554e36adf31fbf7e53fd4"}, "downloads": -1, "filename": "typedjsonrpc-0.2.0.tar.gz", "has_sig": false, "md5_digest": "4779962b406ab70b89b13b36d57ecb69", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 29934, "upload_time": "2015-08-21T04:08:19", "upload_time_iso_8601": "2015-08-21T04:08:19.261127Z", "url": "https://files.pythonhosted.org/packages/89/a7/fd8da06f0687f7c8b216c9d82f38ccb7a8017843126da1e4286c4e172b05/typedjsonrpc-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "713624df662219062b87d7c8a6ee5c7d", "sha256": "3d9c274d4145ee4fea7c268a18a876967d77e9477917c4d0ff3e39fcb557bb99"}, "downloads": -1, "filename": "typedjsonrpc-0.3.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "713624df662219062b87d7c8a6ee5c7d", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 20314, "upload_time": "2015-09-09T02:33:00", "upload_time_iso_8601": "2015-09-09T02:33:00.970965Z", "url": "https://files.pythonhosted.org/packages/bf/c4/858a7ebfdb5b2c21b41e32a318dfd742aa1490b1eaa0ededc40a2624b645/typedjsonrpc-0.3.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "af04e02b4d749ffc9b9999ea3d3979bf", "sha256": "66f5aba53a6f90348d4ed6b516bea1746b148845c4d031c8b5daabfb4f2811a6"}, "downloads": -1, "filename": "typedjsonrpc-0.3.0.tar.gz", "has_sig": false, "md5_digest": "af04e02b4d749ffc9b9999ea3d3979bf", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 51765, "upload_time": "2015-09-09T02:33:09", "upload_time_iso_8601": "2015-09-09T02:33:09.770010Z", "url": "https://files.pythonhosted.org/packages/9c/48/358e9bddff7e953e91e5cc0037b93b33dc877a1b747b11fc88ebf71c9e26/typedjsonrpc-0.3.0.tar.gz", "yanked": false}], "0.4.0": [{"comment_text": "", "digests": {"md5": "445723366dfe0f11d7a4112698f418ff", "sha256": "0bccb01c1f2d90c19caceebe5cc45e0d31d5ff1eeb308c03d5fa77ddf0765df3"}, "downloads": -1, "filename": "typedjsonrpc-0.4.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "445723366dfe0f11d7a4112698f418ff", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 22478, "upload_time": "2016-01-14T16:59:15", "upload_time_iso_8601": "2016-01-14T16:59:15.833627Z", "url": "https://files.pythonhosted.org/packages/fe/52/1f32bf002e570261e83064605428cd2e67ec6e046f6f5b49a8dbfb0779e6/typedjsonrpc-0.4.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f7cee5b1c583b52175a8a0a48ac8d3e4", "sha256": "e2bc43e25bc6935681668f89f0223ab0f254a6dc4c532dd73ec9fce49dda85bf"}, "downloads": -1, "filename": "typedjsonrpc-0.4.0.tar.gz", "has_sig": false, "md5_digest": "f7cee5b1c583b52175a8a0a48ac8d3e4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 32162, "upload_time": "2016-01-14T16:59:20", "upload_time_iso_8601": "2016-01-14T16:59:20.568312Z", "url": "https://files.pythonhosted.org/packages/54/d6/c027e0326bd0728c9667940e8ce17b35c03cb0e27d1234e906e4ba45195c/typedjsonrpc-0.4.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "445723366dfe0f11d7a4112698f418ff", "sha256": "0bccb01c1f2d90c19caceebe5cc45e0d31d5ff1eeb308c03d5fa77ddf0765df3"}, "downloads": -1, "filename": "typedjsonrpc-0.4.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "445723366dfe0f11d7a4112698f418ff", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 22478, "upload_time": "2016-01-14T16:59:15", "upload_time_iso_8601": "2016-01-14T16:59:15.833627Z", "url": "https://files.pythonhosted.org/packages/fe/52/1f32bf002e570261e83064605428cd2e67ec6e046f6f5b49a8dbfb0779e6/typedjsonrpc-0.4.0-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "f7cee5b1c583b52175a8a0a48ac8d3e4", "sha256": "e2bc43e25bc6935681668f89f0223ab0f254a6dc4c532dd73ec9fce49dda85bf"}, "downloads": -1, "filename": "typedjsonrpc-0.4.0.tar.gz", "has_sig": false, "md5_digest": "f7cee5b1c583b52175a8a0a48ac8d3e4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 32162, "upload_time": "2016-01-14T16:59:20", "upload_time_iso_8601": "2016-01-14T16:59:20.568312Z", "url": "https://files.pythonhosted.org/packages/54/d6/c027e0326bd0728c9667940e8ce17b35c03cb0e27d1234e906e4ba45195c/typedjsonrpc-0.4.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:42:52 2020"}