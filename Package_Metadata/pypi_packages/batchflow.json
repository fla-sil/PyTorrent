{"info": {"author": "Roman Kh at al", "author_email": "rhudor@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "Intended Audience :: Science/Research", "License :: OSI Approved :: Apache Software License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Scientific/Engineering"], "description": "[![License](https://img.shields.io/github/license/analysiscenter/batchflow.svg)](https://www.apache.org/licenses/LICENSE-2.0)\n[![Python](https://img.shields.io/badge/python-3.5-blue.svg)](https://python.org)\n[![TensorFlow](https://img.shields.io/badge/TensorFlow-1.12-orange.svg)](https://tensorflow.org)\n[![PyTorch](https://img.shields.io/badge/PyTorch-0.4-orange.svg)](https://pytorch.org)\n[![Run Status](https://api.shippable.com/projects/58c6ada92e042a0600297f61/badge?branch=master)](https://app.shippable.com/github/analysiscenter/batchflow)\n[![codecov](https://codecov.io/gh/analysiscenter/batchflow/branch/master/graph/badge.svg)](https://codecov.io/gh/analysiscenter/batchflow)\n\n# BatchFlow\n\n`BatchFlow` helps you conveniently work with random or sequential batches of your data\nand define data processing and machine learning workflows even for datasets that do not fit into memory.\n\nFor more details see [the documentation and tutorials](https://analysiscenter.github.io/batchflow/).\n\nMain features:\n- flexible batch generaton\n- deterministic and stochastic pipelines\n- datasets and pipelines joins and merges\n- data processing actions\n- flexible model configuration\n- within batch parallelism\n- batch prefetching\n- ready to use ML models and proven NN architectures\n- convenient layers and helper functions to build custom models\n- a powerful research engine with parallel model training and extended experiment logging.\n\n## Basic usage\n\n```python\nmy_workflow = my_dataset.pipeline()\n              .load('/some/path')\n              .do_something()\n              .do_something_else()\n              .some_additional_action()\n              .save('/to/other/path')\n```\nThe trick here is that all the processing actions are lazy. They are not executed until their results are needed, e.g. when you request a preprocessed batch:\n```python\nmy_workflow.run(BATCH_SIZE, shuffle=True, n_epochs=5)\n```\nor\n```python\nfor batch in my_workflow.gen_batch(BATCH_SIZE, shuffle=True, n_epochs=5):\n    # only now the actions are fired and data is being changed with the workflow defined earlier\n    # actions are executed one by one and here you get a fully processed batch\n```\nor\n```python\nNUM_ITERS = 1000\nfor i in range(NUM_ITERS):\n    processed_batch = my_workflow.next_batch(BATCH_SIZE, shuffle=True, n_epochs=None)\n    # only now the actions are fired and data is changed with the workflow defined earlier\n    # actions are executed one by one and here you get a fully processed batch\n```\n\n\n## Train a neural network\n`BatchFlow` includes ready-to-use proven architectures like VGG, Inception, ResNet and many others.\nTo apply them to your data just choose a model, specify the inputs (like the number of classes or images shape)\nand call `train_model`. Of course, you can also choose a loss function, an optimizer and many other parameters, if you want.\n```python\nfrom batchflow.models.tf import ResNet34\n\nmy_workflow = my_dataset.pipeline()\n              .init_model('dynamic', ResNet34, config={\n                          'inputs/images/shape': B('image_shape'),\n                          'labels/classes': 10,\n                          'initial_block/inputs': 'images'})\n              .load('/some/path')\n              .some_transform()\n              .another_transform()\n              .train_model('ResNet34', images=B('images'), labels=B('labels'))\n              .run(BATCH_SIZE, shuffle=True)\n```\n\nFor more advanced cases and detailed API see [the documentation](https://analysiscenter.github.io/batchflow/).\n\n\n## Installation\n\n> `BatchFlow` module is in the beta stage. Your suggestions and improvements are very welcome.\n\n> `BatchFlow` supports python 3.5 or higher.\n\n### Stable python package\n\nWith modern [pipenv](https://docs.pipenv.org/)\n```\npipenv install batchflow\n```\n\nWith old-fashioned [pip](https://pip.pypa.io/en/stable/)\n```\npip3 install batchflow\n```\n\n### Development vesrion\n\nWith modern [pipenv](https://docs.pipenv.org/)\n```\npipenv install git+https://github.com/analysiscenter/batchflow.git#egg=batchflow\n```\n\nWith old-fashioned [pip](https://pip.pypa.io/en/stable/)\n```\npip3 install git+https://github.com/analysiscenter/batchflow.git\n```\n\nAfter that just import `batchflow`:\n```python\nimport batchflow as bf\n```\n\n### Git submodule\nIn many cases it might be more convenient to install `batchflow` as a submodule in your project repository than as a python package.\n```\ngit submodule add https://github.com/analysiscenter/batchflow.git\ngit submodule init\ngit submodule update\n```\n\nIf your python file is located in another directory, you might need to add a path to `batchflow`:\n```python\nimport sys\nsys.path.insert(0, \"/path/to/batchflow\")\nimport batchflow as bf\n```\n\nWhat is great about using a submodule that every commit in your project can be linked to its own commit of a submodule.\nThis is extremely convenient in a fast paced research environment.\n\nRelative import is also possible:\n```python\nfrom .batchflow import Dataset\n```\n\n\n## Citing BatchFlow\nPlease cite BatchFlow in your publications if it helps your research.\n\n[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.1041203.svg)](https://doi.org/10.5281/zenodo.1041203)\n\n```\nRoman Khudorozhkov et al. BatchFlow library for fast ML workflows. 2017. doi:10.5281/zenodo.1041203\n```\n\n```\n@misc{roman_kh_2017_1041203,\n  author       = {Khudorozhkov, Roman and others},\n  title        = {BatchFlow library for fast ML workflows},\n  year         = 2017,\n  doi          = {10.5281/zenodo.1041203},\n  url          = {https://doi.org/10.5281/zenodo.1041203}\n}\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/analysiscenter/batchflow", "keywords": "", "license": "Apache License 2.0", "maintainer": "", "maintainer_email": "", "name": "batchflow", "package_url": "https://pypi.org/project/batchflow/", "platform": "any", "project_url": "https://pypi.org/project/batchflow/", "project_urls": {"Homepage": "https://github.com/analysiscenter/batchflow"}, "release_url": "https://pypi.org/project/batchflow/0.3.0/", "requires_dist": ["numpy (>=1.10)", "dill (>=0.2.7)", "tqdm (>=4.19.7)", "scipy (>=0.19.1)", "scikit-image (>=0.13.1)"], "requires_python": "", "summary": "A framework for fast data processing and ML models training", "version": "0.3.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://www.apache.org/licenses/LICENSE-2.0\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6d2289292ef1f748296dadd9c89e4021f430aad3/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f616e616c7973697363656e7465722f6261746368666c6f772e737667\"></a>\n<a href=\"https://python.org\" rel=\"nofollow\"><img alt=\"Python\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8963091336cb0312d5fefe404229cb9ec0fb8b25/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d332e352d626c75652e737667\"></a>\n<a href=\"https://tensorflow.org\" rel=\"nofollow\"><img alt=\"TensorFlow\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/3215f975e02cd7284328bc72eea87a25d8848775/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f54656e736f72466c6f772d312e31322d6f72616e67652e737667\"></a>\n<a href=\"https://pytorch.org\" rel=\"nofollow\"><img alt=\"PyTorch\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2ee23c577a1573fc6cb303675454358344312d8d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5079546f7263682d302e342d6f72616e67652e737667\"></a>\n<a href=\"https://app.shippable.com/github/analysiscenter/batchflow\" rel=\"nofollow\"><img alt=\"Run Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/eddcb86ddc37298efa3c9696ef1daf022cf28d00/68747470733a2f2f6170692e736869707061626c652e636f6d2f70726f6a656374732f3538633661646139326530343261303630303239376636312f62616467653f6272616e63683d6d6173746572\"></a>\n<a href=\"https://codecov.io/gh/analysiscenter/batchflow\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/0d15bb22f0e0325d5630a2d7fdf2de0697baea6c/68747470733a2f2f636f6465636f762e696f2f67682f616e616c7973697363656e7465722f6261746368666c6f772f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a></p>\n<h1>BatchFlow</h1>\n<p><code>BatchFlow</code> helps you conveniently work with random or sequential batches of your data\nand define data processing and machine learning workflows even for datasets that do not fit into memory.</p>\n<p>For more details see <a href=\"https://analysiscenter.github.io/batchflow/\" rel=\"nofollow\">the documentation and tutorials</a>.</p>\n<p>Main features:</p>\n<ul>\n<li>flexible batch generaton</li>\n<li>deterministic and stochastic pipelines</li>\n<li>datasets and pipelines joins and merges</li>\n<li>data processing actions</li>\n<li>flexible model configuration</li>\n<li>within batch parallelism</li>\n<li>batch prefetching</li>\n<li>ready to use ML models and proven NN architectures</li>\n<li>convenient layers and helper functions to build custom models</li>\n<li>a powerful research engine with parallel model training and extended experiment logging.</li>\n</ul>\n<h2>Basic usage</h2>\n<pre><span class=\"n\">my_workflow</span> <span class=\"o\">=</span> <span class=\"n\">my_dataset</span><span class=\"o\">.</span><span class=\"n\">pipeline</span><span class=\"p\">()</span>\n              <span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"s1\">'/some/path'</span><span class=\"p\">)</span>\n              <span class=\"o\">.</span><span class=\"n\">do_something</span><span class=\"p\">()</span>\n              <span class=\"o\">.</span><span class=\"n\">do_something_else</span><span class=\"p\">()</span>\n              <span class=\"o\">.</span><span class=\"n\">some_additional_action</span><span class=\"p\">()</span>\n              <span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"s1\">'/to/other/path'</span><span class=\"p\">)</span>\n</pre>\n<p>The trick here is that all the processing actions are lazy. They are not executed until their results are needed, e.g. when you request a preprocessed batch:</p>\n<pre><span class=\"n\">my_workflow</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">BATCH_SIZE</span><span class=\"p\">,</span> <span class=\"n\">shuffle</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">n_epochs</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n</pre>\n<p>or</p>\n<pre><span class=\"k\">for</span> <span class=\"n\">batch</span> <span class=\"ow\">in</span> <span class=\"n\">my_workflow</span><span class=\"o\">.</span><span class=\"n\">gen_batch</span><span class=\"p\">(</span><span class=\"n\">BATCH_SIZE</span><span class=\"p\">,</span> <span class=\"n\">shuffle</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">n_epochs</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">):</span>\n    <span class=\"c1\"># only now the actions are fired and data is being changed with the workflow defined earlier</span>\n    <span class=\"c1\"># actions are executed one by one and here you get a fully processed batch</span>\n</pre>\n<p>or</p>\n<pre><span class=\"n\">NUM_ITERS</span> <span class=\"o\">=</span> <span class=\"mi\">1000</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"n\">NUM_ITERS</span><span class=\"p\">):</span>\n    <span class=\"n\">processed_batch</span> <span class=\"o\">=</span> <span class=\"n\">my_workflow</span><span class=\"o\">.</span><span class=\"n\">next_batch</span><span class=\"p\">(</span><span class=\"n\">BATCH_SIZE</span><span class=\"p\">,</span> <span class=\"n\">shuffle</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">n_epochs</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n    <span class=\"c1\"># only now the actions are fired and data is changed with the workflow defined earlier</span>\n    <span class=\"c1\"># actions are executed one by one and here you get a fully processed batch</span>\n</pre>\n<h2>Train a neural network</h2>\n<p><code>BatchFlow</code> includes ready-to-use proven architectures like VGG, Inception, ResNet and many others.\nTo apply them to your data just choose a model, specify the inputs (like the number of classes or images shape)\nand call <code>train_model</code>. Of course, you can also choose a loss function, an optimizer and many other parameters, if you want.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">batchflow.models.tf</span> <span class=\"kn\">import</span> <span class=\"n\">ResNet34</span>\n\n<span class=\"n\">my_workflow</span> <span class=\"o\">=</span> <span class=\"n\">my_dataset</span><span class=\"o\">.</span><span class=\"n\">pipeline</span><span class=\"p\">()</span>\n              <span class=\"o\">.</span><span class=\"n\">init_model</span><span class=\"p\">(</span><span class=\"s1\">'dynamic'</span><span class=\"p\">,</span> <span class=\"n\">ResNet34</span><span class=\"p\">,</span> <span class=\"n\">config</span><span class=\"o\">=</span><span class=\"p\">{</span>\n                          <span class=\"s1\">'inputs/images/shape'</span><span class=\"p\">:</span> <span class=\"n\">B</span><span class=\"p\">(</span><span class=\"s1\">'image_shape'</span><span class=\"p\">),</span>\n                          <span class=\"s1\">'labels/classes'</span><span class=\"p\">:</span> <span class=\"mi\">10</span><span class=\"p\">,</span>\n                          <span class=\"s1\">'initial_block/inputs'</span><span class=\"p\">:</span> <span class=\"s1\">'images'</span><span class=\"p\">})</span>\n              <span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"s1\">'/some/path'</span><span class=\"p\">)</span>\n              <span class=\"o\">.</span><span class=\"n\">some_transform</span><span class=\"p\">()</span>\n              <span class=\"o\">.</span><span class=\"n\">another_transform</span><span class=\"p\">()</span>\n              <span class=\"o\">.</span><span class=\"n\">train_model</span><span class=\"p\">(</span><span class=\"s1\">'ResNet34'</span><span class=\"p\">,</span> <span class=\"n\">images</span><span class=\"o\">=</span><span class=\"n\">B</span><span class=\"p\">(</span><span class=\"s1\">'images'</span><span class=\"p\">),</span> <span class=\"n\">labels</span><span class=\"o\">=</span><span class=\"n\">B</span><span class=\"p\">(</span><span class=\"s1\">'labels'</span><span class=\"p\">))</span>\n              <span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">BATCH_SIZE</span><span class=\"p\">,</span> <span class=\"n\">shuffle</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>For more advanced cases and detailed API see <a href=\"https://analysiscenter.github.io/batchflow/\" rel=\"nofollow\">the documentation</a>.</p>\n<h2>Installation</h2>\n<blockquote>\n<p><code>BatchFlow</code> module is in the beta stage. Your suggestions and improvements are very welcome.</p>\n</blockquote>\n<blockquote>\n<p><code>BatchFlow</code> supports python 3.5 or higher.</p>\n</blockquote>\n<h3>Stable python package</h3>\n<p>With modern <a href=\"https://docs.pipenv.org/\" rel=\"nofollow\">pipenv</a></p>\n<pre><code>pipenv install batchflow\n</code></pre>\n<p>With old-fashioned <a href=\"https://pip.pypa.io/en/stable/\" rel=\"nofollow\">pip</a></p>\n<pre><code>pip3 install batchflow\n</code></pre>\n<h3>Development vesrion</h3>\n<p>With modern <a href=\"https://docs.pipenv.org/\" rel=\"nofollow\">pipenv</a></p>\n<pre><code>pipenv install git+https://github.com/analysiscenter/batchflow.git#egg=batchflow\n</code></pre>\n<p>With old-fashioned <a href=\"https://pip.pypa.io/en/stable/\" rel=\"nofollow\">pip</a></p>\n<pre><code>pip3 install git+https://github.com/analysiscenter/batchflow.git\n</code></pre>\n<p>After that just import <code>batchflow</code>:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">batchflow</span> <span class=\"k\">as</span> <span class=\"nn\">bf</span>\n</pre>\n<h3>Git submodule</h3>\n<p>In many cases it might be more convenient to install <code>batchflow</code> as a submodule in your project repository than as a python package.</p>\n<pre><code>git submodule add https://github.com/analysiscenter/batchflow.git\ngit submodule init\ngit submodule update\n</code></pre>\n<p>If your python file is located in another directory, you might need to add a path to <code>batchflow</code>:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n<span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">insert</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s2\">\"/path/to/batchflow\"</span><span class=\"p\">)</span>\n<span class=\"kn\">import</span> <span class=\"nn\">batchflow</span> <span class=\"k\">as</span> <span class=\"nn\">bf</span>\n</pre>\n<p>What is great about using a submodule that every commit in your project can be linked to its own commit of a submodule.\nThis is extremely convenient in a fast paced research environment.</p>\n<p>Relative import is also possible:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">.batchflow</span> <span class=\"kn\">import</span> <span class=\"n\">Dataset</span>\n</pre>\n<h2>Citing BatchFlow</h2>\n<p>Please cite BatchFlow in your publications if it helps your research.</p>\n<p><a href=\"https://doi.org/10.5281/zenodo.1041203\" rel=\"nofollow\"><img alt=\"DOI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/04437e96b5234a44823c9afbf453fee9df507ead/68747470733a2f2f7a656e6f646f2e6f72672f62616467652f444f492f31302e353238312f7a656e6f646f2e313034313230332e737667\"></a></p>\n<pre><code>Roman Khudorozhkov et al. BatchFlow library for fast ML workflows. 2017. doi:10.5281/zenodo.1041203\n</code></pre>\n<pre><code>@misc{roman_kh_2017_1041203,\n  author       = {Khudorozhkov, Roman and others},\n  title        = {BatchFlow library for fast ML workflows},\n  year         = 2017,\n  doi          = {10.5281/zenodo.1041203},\n  url          = {https://doi.org/10.5281/zenodo.1041203}\n}\n</code></pre>\n\n          </div>"}, "last_serial": 5720510, "releases": {"0.3.0": [{"comment_text": "", "digests": {"md5": "947021f6b4244b12050240707323b106", "sha256": "2aa19b45e1274667268fe3db81377430789696379f25da1ba72696092bb908c3"}, "downloads": -1, "filename": "batchflow-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "947021f6b4244b12050240707323b106", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 257469, "upload_time": "2019-08-23T12:21:50", "upload_time_iso_8601": "2019-08-23T12:21:50.490635Z", "url": "https://files.pythonhosted.org/packages/2f/57/f58c35525ad303dc793aad1adca5f98086530ebcbbcc9dcc96285a9209dc/batchflow-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "0e9588c48ddc9e27121b5d714dfd9d74", "sha256": "e21aa210ed0d7b59fde3ae6799a3057bfb3d74e50c78710b22bca44d58774454"}, "downloads": -1, "filename": "batchflow-0.3.0.tar.gz", "has_sig": false, "md5_digest": "0e9588c48ddc9e27121b5d714dfd9d74", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 1429825, "upload_time": "2019-08-23T12:21:55", "upload_time_iso_8601": "2019-08-23T12:21:55.637733Z", "url": "https://files.pythonhosted.org/packages/02/73/ae65a4b952f84195043ab481ae589149382ff93f89c26da1572b1dac1933/batchflow-0.3.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "947021f6b4244b12050240707323b106", "sha256": "2aa19b45e1274667268fe3db81377430789696379f25da1ba72696092bb908c3"}, "downloads": -1, "filename": "batchflow-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "947021f6b4244b12050240707323b106", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 257469, "upload_time": "2019-08-23T12:21:50", "upload_time_iso_8601": "2019-08-23T12:21:50.490635Z", "url": "https://files.pythonhosted.org/packages/2f/57/f58c35525ad303dc793aad1adca5f98086530ebcbbcc9dcc96285a9209dc/batchflow-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "0e9588c48ddc9e27121b5d714dfd9d74", "sha256": "e21aa210ed0d7b59fde3ae6799a3057bfb3d74e50c78710b22bca44d58774454"}, "downloads": -1, "filename": "batchflow-0.3.0.tar.gz", "has_sig": false, "md5_digest": "0e9588c48ddc9e27121b5d714dfd9d74", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 1429825, "upload_time": "2019-08-23T12:21:55", "upload_time_iso_8601": "2019-08-23T12:21:55.637733Z", "url": "https://files.pythonhosted.org/packages/02/73/ae65a4b952f84195043ab481ae589149382ff93f89c26da1572b1dac1933/batchflow-0.3.0.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:14:44 2020"}