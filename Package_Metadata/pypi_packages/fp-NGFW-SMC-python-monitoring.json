{"info": {"author": "Forcepoint", "author_email": "PSIRT@forcepoint.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "License :: OSI Approved :: Apache Software License", "Programming Language :: Python", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6"], "description": "Monitoring API for Forcepoint NGFW Security Management Center\n=============================================================\n\nsmc-python-monitoring is made of up two core capabilities:\n\n- Monitor, Query or view live events from the SMC\n- Pub/Sub (Subscribe) to SMC element events by supported API type\n\nThe smc-python-monitoring API makes it possible to obtain real time monitoring information from the SMC with respects to:\n\n* Logs\n* Connections\n* Blacklist\n* Routing\n* Users\n* SSL VPN Users\n* VPNs\n* Alerts\n\nThis correlates to the area of the SMC under \"Monitoring\".\n\nEvery query can be refined by using filters that allow a variety of boolean operations to control the results.\n\nThe smc-python-monitoring API also provides the ability to subscribe to element event changes in the SMC.\nAny element type that is exposed as an SMC API `entry point` can be used as a subscriber target. Event type\nexamples that would fire events would be created, updated, or deleted (for example - although not an exhaustive\nlist). \n\nCompatibility\n=============\n\nRequires Security Management Center version 6.2 or newer.\n\nThis package has been tested with Python 2.7, 3.5 and 3.6.\n\nRequirements\n============\n\nsmc-python >= v0.6.1\n\nwebsocket-client\n\nInstall\n=======\n\n``pip install smc-python-monitoring``\n\nUsage\n=====\n\nIn order to leverage monitoring or subscriber features, you must first obtain a valid smc session as \nnormal:\n\n.. code:: python\n\n\tfrom smc import session\n\tsession.login()\n\t...\n\nOnce a valid session is obtained, the session information is re-used for the web socket connection,\nincluding SSL related data such as validating SSL through the client side SSL certificate before\nestablishing the connection.\n\nMonitoring and Queries\n++++++++++++++++++++++\n\nMaking queries is uniform across all query types.\nThere are small exceptions to this rule with respects to LogQuery which provides more options on how to control\nthe batched query size, custom time ranges for the query, etc. See documentation on LogQuery for more details.\n\nA return data format for queries can be configured when calling fetch on the query. Results can be obtained\nin a variety of formatted outputs such as CSV, Table format or as a raw dict. You can also provide your own\nformatter to the query. See ``smc_monitoring.models.formatter`` for more info.\n\nBy default each query type has a pre-defined set of ``field_ids`` that define a basic set of fields for\nthe query type. This specifies which fields are returned in the query. You can customize these fields on the\nquery by using the ``query.format.field_names`` or ``query.format.field_ids`` methods. See the documentation for\nmore info.\n\nAll queries can be made as each 'batch' queries or 'live' style queries. The type used depends on the method\ncalled on the query instance. All queries done via smc-python-monitoring follow the same rules as implemented in\nthe SMC UI. \n\nFor example, 'Monitoring' queries (i.e. Connections, Blacklist, Users, etc) do not allow time/date\nranges on the query, however filtering by fields work. The same field filtering works in the same way with Log\nstyle queries.\n\nExample of making a basic log query in real time. Note the default return format is Table for a cleaner output,\nassuming this is being run from a command window:\n\n.. code:: python\n\n\tquery = LogQuery()\n\tfor log in query.fetch_live():\n\t    print(log)\n\nMaking a simple LogQuery with a fetch size of 50 and returning in a raw dict format:\n\n.. code:: python\n\n\tquery = LogQuery(fetch_size=50)\n\tfor log in query.fetch_raw():\n    \t    print(log)\n\nMaking a more sophisticated query that uses a timezone, then adds an \"AND\" filter that\nwill match if the entry has an alert severity of \"HIGH\" and only if the ACTION and APPLICATION\nfields have values:\n\n.. code:: python\n\n\tquery = LogQuery(fetch_size=50)\n\tquery.format.timezone('CST')\n\n\tquery.add_and_filter(\n            [InFilter(FieldValue(LogField.ALERTSEVERITY), [ConstantValue(Alerts.HIGH)]),\n             DefinedFilter(FieldValue(LogField.ACTION)),\n\t     DefinedFilter(FieldValue(LogField.IPSAPPID))])\n\n\tfor log in query.fetch_batch(TableFormat):\n\t    print(log)\n\n\nQuery for the last 10 records if the source IP is 192.168.4.84 and return only fields\ntimestamp, source, destination and service:\n\n.. code:: python\n\n\tquery = LogQuery(fetch_size=10)\n\tquery.format.timezone('CST')\n\n\tquery.format.field_ids([LogField.TIMESTAMP, LogField.SRC, LogField.DST, LogField.IPSAPPID])\n\n\tquery.add_and_filter(\n\t    [InFilter(FieldValue(LogField.SRC), [IPValue('192.168.4.84')]),\n\t     DefinedFilter(FieldValue(LogField.IPSAPPID))])\n\n\tfor log in query.fetch_batch(TableFormat):\n\t    ...\n\n\nExamples of other monitoring type queries:\n\nObtain all current connections on a given engine. Output in CSV:\n\n.. code:: python\n\n\tquery = ConnectionQuery('sg_vm')\n\tfor record in query.fetch_batch(CSVFormat):\n\t    print(record)\n\nObtain all authenticated users on a given engine, output as 'User' object instances:\n\n.. code:: python\n\n\tquery = UserQuery('sg_vm')\n\tfor record in query.fetch_as_element():\n\t    print(record)\n\nObtain all VPN SA's on given engine, output at 'VPNSecurityAssoc' object instances:\n\n.. code:: python\n\n\tquery = VPNSAQuery('sg_vm')\n\tfor record in query.fetch_as_element():\n\t    print(record)\n\nObtain all current routes for a given engine, output as a list of raw dict items:\n\n.. code:: python\n\n\tquery = RoutingQuery('sg_vm')\n\tfor record in query.fetch_batch(RawDictFormat):\n\t    print(record)\n\nObtain all SSL VPN connections for a given engine, output in table format:\n\n.. code:: python\n\n\tquery = SSLVPNQuery('sg_vm')\n\tfor record in query.fetch_batch(TableFormat):\n\t    print(record)\n\nObtain all active alerts from the Shared Domain:\n\n.. code:: python\n\n\tquery = ActiveAlertQuery('Shared Domain', timezone='America/Chicago')\n\tfor record in query.fetch_batch():\n        print(record)\n\n\nSubscribing to Events\n+++++++++++++++++++++\n\nUsing smc-python-monitoring you can also subscribe to events published by the SMC API\nwhen changes are made. As long as the entry point exists for the element type, you can\nset up a \"channel\" to receive real-time updates when the element type is modified.\n\nTo listen for events you must first obtain an SMC session as usual.\n\nThen obtain an instance of `Notification`, specifying the events of interest.\n\nSubscribe to a single element event (SMC api entry point):\n\n.. code:: python\n\n\tnotification = Notification('network')\n\nSubscribe to multiple element events on a single channel (subscription_id):\n\n.. code:: python\n\n\tnotification = Notification('network,host,iprange')\n\nSubscribe to multiple element events, each with it\u2019s own channel (subscription_id):\n\n.. code:: python\n\n\tnotification = Notification('network')\n\tnotification.subscribe('host')\n\tnotification.subscribe('layer2_policy')\n\nReturn the events as instance of \u201cEvent\u201d (optional). Otherwise raw json returned.\n\n.. code:: python\n\n\tfor event in notification.notify(as_type=Event):\n   \t\tprint(event)\n\n\tEvent(subscription_id=151,action=delete,element=https://xxxx/elements/host/1087)\n\tEvent(subscription_id=152,action=delete,element=https://xxxx/elements/layer2_policy/27)\n\n\n.. :changelog:\n\nRelease History\n===============\n\n1.0.0 (2017-09-03)\n++++++++++++++++++\n\n- Initial release of SMC Monitoring package\n- Requires SMC 6.3.0, 6.3.1\n\n1.1.0 (2018-02-02)\n++++++++++++++++++\n\n- Requires SMC >= 6.3.2\n- ActiveAlertQuery implemented for interfacing with Alerts (requires SMC >= 6.3.3). Currently read-only\n- BlacklistQuery modified to use generic log fields for all queries except fetch_as_element\n\n1.2\n+++\n\n- VPN SA's can be deleted (requires SMC >= 6.4.2)\n- Updated requirement to websocket-client 0.48.0. Fixes issue with IndexError when Tomcat 8 does not include\n  the Status-Message in the initial handshake: https://github.com/websocket-client/websocket-client/issues/406\n\n1.3.0\n+++++\n\n- Set max_recv on queries to terminate the websocket after a specified number of receives\n\n1.3.1\n+++++\n\n- Remove kwargs from websocket call to super to support older versions of websocket-client\n- Fixed fetch_batch to only return a single payload, previous versions were unlimited\n\n\n\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/Forcepoint/fp-NGFW-SMC-python", "keywords": "", "license": "Apache License", "maintainer": "", "maintainer_email": "", "name": "fp-NGFW-SMC-python-monitoring", "package_url": "https://pypi.org/project/fp-NGFW-SMC-python-monitoring/", "platform": "", "project_url": "https://pypi.org/project/fp-NGFW-SMC-python-monitoring/", "project_urls": {"Homepage": "https://github.com/Forcepoint/fp-NGFW-SMC-python"}, "release_url": "https://pypi.org/project/fp-NGFW-SMC-python-monitoring/1.3.1/", "requires_dist": ["smc-python (>=0.6.0)", "websocket-client (>=0.48.0)"], "requires_python": "", "summary": "Forcepoint NGFW Management Center Monitoring", "version": "1.3.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"monitoring-api-for-forcepoint-ngfw-security-management-center\">\n<h2>Monitoring API for Forcepoint NGFW Security Management Center</h2>\n<p>smc-python-monitoring is made of up two core capabilities:</p>\n<ul>\n<li>Monitor, Query or view live events from the SMC</li>\n<li>Pub/Sub (Subscribe) to SMC element events by supported API type</li>\n</ul>\n<p>The smc-python-monitoring API makes it possible to obtain real time monitoring information from the SMC with respects to:</p>\n<ul>\n<li>Logs</li>\n<li>Connections</li>\n<li>Blacklist</li>\n<li>Routing</li>\n<li>Users</li>\n<li>SSL VPN Users</li>\n<li>VPNs</li>\n<li>Alerts</li>\n</ul>\n<p>This correlates to the area of the SMC under \u201cMonitoring\u201d.</p>\n<p>Every query can be refined by using filters that allow a variety of boolean operations to control the results.</p>\n<p>The smc-python-monitoring API also provides the ability to subscribe to element event changes in the SMC.\nAny element type that is exposed as an SMC API <cite>entry point</cite> can be used as a subscriber target. Event type\nexamples that would fire events would be created, updated, or deleted (for example - although not an exhaustive\nlist).</p>\n</div>\n<div id=\"compatibility\">\n<h2>Compatibility</h2>\n<p>Requires Security Management Center version 6.2 or newer.</p>\n<p>This package has been tested with Python 2.7, 3.5 and 3.6.</p>\n</div>\n<div id=\"requirements\">\n<h2>Requirements</h2>\n<p>smc-python &gt;= v0.6.1</p>\n<p>websocket-client</p>\n</div>\n<div id=\"install\">\n<h2>Install</h2>\n<p><tt>pip install <span class=\"pre\">smc-python-monitoring</span></tt></p>\n</div>\n<div id=\"usage\">\n<h2>Usage</h2>\n<p>In order to leverage monitoring or subscriber features, you must first obtain a valid smc session as\nnormal:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">smc</span> <span class=\"kn\">import</span> <span class=\"n\">session</span>\n<span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">login</span><span class=\"p\">()</span>\n<span class=\"o\">...</span>\n</pre>\n<p>Once a valid session is obtained, the session information is re-used for the web socket connection,\nincluding SSL related data such as validating SSL through the client side SSL certificate before\nestablishing the connection.</p>\n<div id=\"monitoring-and-queries\">\n<h3>Monitoring and Queries</h3>\n<p>Making queries is uniform across all query types.\nThere are small exceptions to this rule with respects to LogQuery which provides more options on how to control\nthe batched query size, custom time ranges for the query, etc. See documentation on LogQuery for more details.</p>\n<p>A return data format for queries can be configured when calling fetch on the query. Results can be obtained\nin a variety of formatted outputs such as CSV, Table format or as a raw dict. You can also provide your own\nformatter to the query. See <tt>smc_monitoring.models.formatter</tt> for more info.</p>\n<p>By default each query type has a pre-defined set of <tt>field_ids</tt> that define a basic set of fields for\nthe query type. This specifies which fields are returned in the query. You can customize these fields on the\nquery by using the <tt>query.format.field_names</tt> or <tt>query.format.field_ids</tt> methods. See the documentation for\nmore info.</p>\n<p>All queries can be made as each \u2018batch\u2019 queries or \u2018live\u2019 style queries. The type used depends on the method\ncalled on the query instance. All queries done via smc-python-monitoring follow the same rules as implemented in\nthe SMC UI.</p>\n<p>For example, \u2018Monitoring\u2019 queries (i.e. Connections, Blacklist, Users, etc) do not allow time/date\nranges on the query, however filtering by fields work. The same field filtering works in the same way with Log\nstyle queries.</p>\n<p>Example of making a basic log query in real time. Note the default return format is Table for a cleaner output,\nassuming this is being run from a command window:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">LogQuery</span><span class=\"p\">()</span>\n<span class=\"k\">for</span> <span class=\"n\">log</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_live</span><span class=\"p\">():</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">log</span><span class=\"p\">)</span>\n</pre>\n<p>Making a simple LogQuery with a fetch size of 50 and returning in a raw dict format:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">LogQuery</span><span class=\"p\">(</span><span class=\"n\">fetch_size</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">log</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_raw</span><span class=\"p\">():</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">log</span><span class=\"p\">)</span>\n</pre>\n<p>Making a more sophisticated query that uses a timezone, then adds an \u201cAND\u201d filter that\nwill match if the entry has an alert severity of \u201cHIGH\u201d and only if the ACTION and APPLICATION\nfields have values:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">LogQuery</span><span class=\"p\">(</span><span class=\"n\">fetch_size</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n<span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"o\">.</span><span class=\"n\">timezone</span><span class=\"p\">(</span><span class=\"s1\">'CST'</span><span class=\"p\">)</span>\n\n<span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">add_and_filter</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"n\">InFilter</span><span class=\"p\">(</span><span class=\"n\">FieldValue</span><span class=\"p\">(</span><span class=\"n\">LogField</span><span class=\"o\">.</span><span class=\"n\">ALERTSEVERITY</span><span class=\"p\">),</span> <span class=\"p\">[</span><span class=\"n\">ConstantValue</span><span class=\"p\">(</span><span class=\"n\">Alerts</span><span class=\"o\">.</span><span class=\"n\">HIGH</span><span class=\"p\">)]),</span>\n     <span class=\"n\">DefinedFilter</span><span class=\"p\">(</span><span class=\"n\">FieldValue</span><span class=\"p\">(</span><span class=\"n\">LogField</span><span class=\"o\">.</span><span class=\"n\">ACTION</span><span class=\"p\">)),</span>\n     <span class=\"n\">DefinedFilter</span><span class=\"p\">(</span><span class=\"n\">FieldValue</span><span class=\"p\">(</span><span class=\"n\">LogField</span><span class=\"o\">.</span><span class=\"n\">IPSAPPID</span><span class=\"p\">))])</span>\n\n<span class=\"k\">for</span> <span class=\"n\">log</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_batch</span><span class=\"p\">(</span><span class=\"n\">TableFormat</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">log</span><span class=\"p\">)</span>\n</pre>\n<p>Query for the last 10 records if the source IP is 192.168.4.84 and return only fields\ntimestamp, source, destination and service:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">LogQuery</span><span class=\"p\">(</span><span class=\"n\">fetch_size</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n<span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"o\">.</span><span class=\"n\">timezone</span><span class=\"p\">(</span><span class=\"s1\">'CST'</span><span class=\"p\">)</span>\n\n<span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"o\">.</span><span class=\"n\">field_ids</span><span class=\"p\">([</span><span class=\"n\">LogField</span><span class=\"o\">.</span><span class=\"n\">TIMESTAMP</span><span class=\"p\">,</span> <span class=\"n\">LogField</span><span class=\"o\">.</span><span class=\"n\">SRC</span><span class=\"p\">,</span> <span class=\"n\">LogField</span><span class=\"o\">.</span><span class=\"n\">DST</span><span class=\"p\">,</span> <span class=\"n\">LogField</span><span class=\"o\">.</span><span class=\"n\">IPSAPPID</span><span class=\"p\">])</span>\n\n<span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">add_and_filter</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"n\">InFilter</span><span class=\"p\">(</span><span class=\"n\">FieldValue</span><span class=\"p\">(</span><span class=\"n\">LogField</span><span class=\"o\">.</span><span class=\"n\">SRC</span><span class=\"p\">),</span> <span class=\"p\">[</span><span class=\"n\">IPValue</span><span class=\"p\">(</span><span class=\"s1\">'192.168.4.84'</span><span class=\"p\">)]),</span>\n     <span class=\"n\">DefinedFilter</span><span class=\"p\">(</span><span class=\"n\">FieldValue</span><span class=\"p\">(</span><span class=\"n\">LogField</span><span class=\"o\">.</span><span class=\"n\">IPSAPPID</span><span class=\"p\">))])</span>\n\n<span class=\"k\">for</span> <span class=\"n\">log</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_batch</span><span class=\"p\">(</span><span class=\"n\">TableFormat</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span>\n</pre>\n<p>Examples of other monitoring type queries:</p>\n<p>Obtain all current connections on a given engine. Output in CSV:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">ConnectionQuery</span><span class=\"p\">(</span><span class=\"s1\">'sg_vm'</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">record</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_batch</span><span class=\"p\">(</span><span class=\"n\">CSVFormat</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">record</span><span class=\"p\">)</span>\n</pre>\n<p>Obtain all authenticated users on a given engine, output as \u2018User\u2019 object instances:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">UserQuery</span><span class=\"p\">(</span><span class=\"s1\">'sg_vm'</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">record</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_as_element</span><span class=\"p\">():</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">record</span><span class=\"p\">)</span>\n</pre>\n<p>Obtain all VPN SA\u2019s on given engine, output at \u2018VPNSecurityAssoc\u2019 object instances:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">VPNSAQuery</span><span class=\"p\">(</span><span class=\"s1\">'sg_vm'</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">record</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_as_element</span><span class=\"p\">():</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">record</span><span class=\"p\">)</span>\n</pre>\n<p>Obtain all current routes for a given engine, output as a list of raw dict items:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">RoutingQuery</span><span class=\"p\">(</span><span class=\"s1\">'sg_vm'</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">record</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_batch</span><span class=\"p\">(</span><span class=\"n\">RawDictFormat</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">record</span><span class=\"p\">)</span>\n</pre>\n<p>Obtain all SSL VPN connections for a given engine, output in table format:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">SSLVPNQuery</span><span class=\"p\">(</span><span class=\"s1\">'sg_vm'</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">record</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_batch</span><span class=\"p\">(</span><span class=\"n\">TableFormat</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">record</span><span class=\"p\">)</span>\n</pre>\n<p>Obtain all active alerts from the Shared Domain:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">ActiveAlertQuery</span><span class=\"p\">(</span><span class=\"s1\">'Shared Domain'</span><span class=\"p\">,</span> <span class=\"n\">timezone</span><span class=\"o\">=</span><span class=\"s1\">'America/Chicago'</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">record</span> <span class=\"ow\">in</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"n\">fetch_batch</span><span class=\"p\">():</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">record</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"subscribing-to-events\">\n<h3>Subscribing to Events</h3>\n<p>Using smc-python-monitoring you can also subscribe to events published by the SMC API\nwhen changes are made. As long as the entry point exists for the element type, you can\nset up a \u201cchannel\u201d to receive real-time updates when the element type is modified.</p>\n<p>To listen for events you must first obtain an SMC session as usual.</p>\n<p>Then obtain an instance of <cite>Notification</cite>, specifying the events of interest.</p>\n<p>Subscribe to a single element event (SMC api entry point):</p>\n<pre><span class=\"n\">notification</span> <span class=\"o\">=</span> <span class=\"n\">Notification</span><span class=\"p\">(</span><span class=\"s1\">'network'</span><span class=\"p\">)</span>\n</pre>\n<p>Subscribe to multiple element events on a single channel (subscription_id):</p>\n<pre><span class=\"n\">notification</span> <span class=\"o\">=</span> <span class=\"n\">Notification</span><span class=\"p\">(</span><span class=\"s1\">'network,host,iprange'</span><span class=\"p\">)</span>\n</pre>\n<p>Subscribe to multiple element events, each with it\u2019s own channel (subscription_id):</p>\n<pre><span class=\"n\">notification</span> <span class=\"o\">=</span> <span class=\"n\">Notification</span><span class=\"p\">(</span><span class=\"s1\">'network'</span><span class=\"p\">)</span>\n<span class=\"n\">notification</span><span class=\"o\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s1\">'host'</span><span class=\"p\">)</span>\n<span class=\"n\">notification</span><span class=\"o\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s1\">'layer2_policy'</span><span class=\"p\">)</span>\n</pre>\n<p>Return the events as instance of \u201cEvent\u201d (optional). Otherwise raw json returned.</p>\n<pre><span class=\"k\">for</span> <span class=\"n\">event</span> <span class=\"ow\">in</span> <span class=\"n\">notification</span><span class=\"o\">.</span><span class=\"n\">notify</span><span class=\"p\">(</span><span class=\"n\">as_type</span><span class=\"o\">=</span><span class=\"n\">Event</span><span class=\"p\">):</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">)</span>\n\n<span class=\"n\">Event</span><span class=\"p\">(</span><span class=\"n\">subscription_id</span><span class=\"o\">=</span><span class=\"mi\">151</span><span class=\"p\">,</span><span class=\"n\">action</span><span class=\"o\">=</span><span class=\"n\">delete</span><span class=\"p\">,</span><span class=\"n\">element</span><span class=\"o\">=</span><span class=\"n\">https</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">xxxx</span><span class=\"o\">/</span><span class=\"n\">elements</span><span class=\"o\">/</span><span class=\"n\">host</span><span class=\"o\">/</span><span class=\"mi\">1087</span><span class=\"p\">)</span>\n<span class=\"n\">Event</span><span class=\"p\">(</span><span class=\"n\">subscription_id</span><span class=\"o\">=</span><span class=\"mi\">152</span><span class=\"p\">,</span><span class=\"n\">action</span><span class=\"o\">=</span><span class=\"n\">delete</span><span class=\"p\">,</span><span class=\"n\">element</span><span class=\"o\">=</span><span class=\"n\">https</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">xxxx</span><span class=\"o\">/</span><span class=\"n\">elements</span><span class=\"o\">/</span><span class=\"n\">layer2_policy</span><span class=\"o\">/</span><span class=\"mi\">27</span><span class=\"p\">)</span>\n</pre>\n</div>\n</div>\n<div id=\"release-history\">\n<h2>Release History</h2>\n<div id=\"id1\">\n<h3>1.0.0 (2017-09-03)</h3>\n<ul>\n<li>Initial release of SMC Monitoring package</li>\n<li>Requires SMC 6.3.0, 6.3.1</li>\n</ul>\n</div>\n<div id=\"id2\">\n<h3>1.1.0 (2018-02-02)</h3>\n<ul>\n<li>Requires SMC &gt;= 6.3.2</li>\n<li>ActiveAlertQuery implemented for interfacing with Alerts (requires SMC &gt;= 6.3.3). Currently read-only</li>\n<li>BlacklistQuery modified to use generic log fields for all queries except fetch_as_element</li>\n</ul>\n</div>\n<div id=\"id3\">\n<h3>1.2</h3>\n<ul>\n<li>VPN SA\u2019s can be deleted (requires SMC &gt;= 6.4.2)</li>\n<li>Updated requirement to websocket-client 0.48.0. Fixes issue with IndexError when Tomcat 8 does not include\nthe Status-Message in the initial handshake: <a href=\"https://github.com/websocket-client/websocket-client/issues/406\" rel=\"nofollow\">https://github.com/websocket-client/websocket-client/issues/406</a></li>\n</ul>\n</div>\n<div id=\"id4\">\n<h3>1.3.0</h3>\n<ul>\n<li>Set max_recv on queries to terminate the websocket after a specified number of receives</li>\n</ul>\n</div>\n<div id=\"id5\">\n<h3>1.3.1</h3>\n<ul>\n<li>Remove kwargs from websocket call to super to support older versions of websocket-client</li>\n<li>Fixed fetch_batch to only return a single payload, previous versions were unlimited</li>\n</ul>\n</div>\n</div>\n\n          </div>"}, "last_serial": 6117714, "releases": {"1.3.1": [{"comment_text": "", "digests": {"md5": "381490ad157442a26b5b4f697b143edd", "sha256": "59e707142125c012c8baf3942a2e700e5cb159d23475b4cc874f25516029c2e0"}, "downloads": -1, "filename": "fp_NGFW_SMC_python_monitoring-1.3.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "381490ad157442a26b5b4f697b143edd", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 56935, "upload_time": "2019-11-11T16:01:02", "upload_time_iso_8601": "2019-11-11T16:01:02.769556Z", "url": "https://files.pythonhosted.org/packages/af/17/43880767b5c0d4f997ca2aef00e9c7e89fbe8080fbae83bad0faafc46317/fp_NGFW_SMC_python_monitoring-1.3.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d9c067aac3aabbf384a4d9574b6c2d5f", "sha256": "a2fe0ffcfc4d6b867a59161c857d15901354656072177ff6a9e9e19e6fa45637"}, "downloads": -1, "filename": "fp-NGFW-SMC-python-monitoring-1.3.1.tar.gz", "has_sig": false, "md5_digest": "d9c067aac3aabbf384a4d9574b6c2d5f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 46914, "upload_time": "2019-11-11T16:01:05", "upload_time_iso_8601": "2019-11-11T16:01:05.384487Z", "url": "https://files.pythonhosted.org/packages/4f/a2/c82ad1189850917a9cf6ab25e47ff204916bdea361c1ad412972fc801cfd/fp-NGFW-SMC-python-monitoring-1.3.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "381490ad157442a26b5b4f697b143edd", "sha256": "59e707142125c012c8baf3942a2e700e5cb159d23475b4cc874f25516029c2e0"}, "downloads": -1, "filename": "fp_NGFW_SMC_python_monitoring-1.3.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "381490ad157442a26b5b4f697b143edd", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": null, "size": 56935, "upload_time": "2019-11-11T16:01:02", "upload_time_iso_8601": "2019-11-11T16:01:02.769556Z", "url": "https://files.pythonhosted.org/packages/af/17/43880767b5c0d4f997ca2aef00e9c7e89fbe8080fbae83bad0faafc46317/fp_NGFW_SMC_python_monitoring-1.3.1-py2.py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d9c067aac3aabbf384a4d9574b6c2d5f", "sha256": "a2fe0ffcfc4d6b867a59161c857d15901354656072177ff6a9e9e19e6fa45637"}, "downloads": -1, "filename": "fp-NGFW-SMC-python-monitoring-1.3.1.tar.gz", "has_sig": false, "md5_digest": "d9c067aac3aabbf384a4d9574b6c2d5f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 46914, "upload_time": "2019-11-11T16:01:05", "upload_time_iso_8601": "2019-11-11T16:01:05.384487Z", "url": "https://files.pythonhosted.org/packages/4f/a2/c82ad1189850917a9cf6ab25e47ff204916bdea361c1ad412972fc801cfd/fp-NGFW-SMC-python-monitoring-1.3.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 01:00:37 2020"}