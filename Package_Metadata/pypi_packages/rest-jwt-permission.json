{"info": {"author": "Christian Hess", "author_email": "christianhess.rlz@gmail.com", "bugtrack_url": null, "classifiers": ["Environment :: Web Environment", "Intended Audience :: Developers", "Programming Language :: Python", "Programming Language :: Python :: 3.5", "Topic :: Internet :: WWW/HTTP"], "description": "[![Build Status](https://travis-ci.org/chessbr/rest-jwt-permission.svg?branch=master)](https://travis-ci.org/chessbr/rest-jwt-permission)\n[![Coverage Status](https://coveralls.io/repos/github/chessbr/rest-jwt-permission/badge.svg?branch=master)](https://coveralls.io/github/chessbr/rest-jwt-permission?branch=master)\n[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)\n\n\n# Django Rest Framework JWT permissions\n\nModule that check API View permissions from JWT payloads.\n\n## Installation\n\n```\npip install rest_jwt_permission\n```\n\n## Using\n\nAdd `rest_jwt_permission` in your `INSTALLED_APPS` and configure the `settings` as you wish. Here is an example:\n\n```python\nREST_JWT_PERMISSION = {\n    \"SCOPE_PROVIDERS\": [\n        \"rest_jwt_permission.providers.APIEndpointScopeProvider\",\n        \"rest_jwt_permission.providers.AdminScopeProvider\"\n    ],\n    \"GET_PAYLOAD_FROM_SCOPES_HANDLER\": (\n        \"rest_jwt_permission.handlers.get_payload_from_scopes\"\n    ),\n    \"GET_SCOPES_FROM_PAYLOAD_HANDLER\": (\n        \"rest_jwt_permission.handlers.get_scopes_from_payload\"\n    ),\n    \"GET_PAYLOAD_FROM_REQUEST_HANDLER\": (\n        \"rest_jwt_permission.handlers.get_jwt_payload_from_request\"\n    )\n}\n```\n\nNow you can use `JWTAPIPermission` class in your API Views through `permission_classes` property or even setting it as the default permission class in your [settings](http://www.django-rest-framework.org/api-guide/permissions/#setting-the-permission-policy)\n\n### Example\n\nFor a more pratical example, check **[rest-jwt-permission-example](https://github.com/chessbr/rest-jwt-permission-example)**.\n\n## Motivation\n\nInspired by GitHub [Personal access token](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/) and by [Auth0 API Keys blog post](https://auth0.com/blog/using-json-web-tokens-as-api-keys/), this package provides a Django Rest Framework Permission object to check permissions from JWT payloads.\n\nThis enables your API to check permissions avoiding an extra database hit.\n\n## How it works\n\nBasically, it extracts a list of all Rest API Views and generate an unique ID for each endpoint + action. Then, after authenticaton, your API should inject which permission identifiers the user has access. The JWT payload should look like the following:\n\n```json\n{\n  \"scopes\": [\n    \"myviewset:get\"\n    \"function_endpoint:get\",\n    \"basicview:get\",\n    \"simpleviewsetpermission:custom_action:put\",\n    \"modelviewsetpermission:retrieve:get\",\n    \"modelviewsetpermission:destroy:delete\",\n    \"modelviewsetpermission:some_detail_metod:patch\",\n  ]\n}\n```\n\nOn each authenticated request, the `JWTAPIPermission` permission class will generate the unique ID for the requested view and will check whether the JWT payloads contains the ID. If so, the user has access.\n\n:warning: This package does not automatically injects the scopes payload into the JWT, although we have helpers (`rest_jwt_permission.handlers.get_payload_from_scopes`) you can use to do that. We strongly recommend you to use [REST framework JWT Auth](https://github.com/GetBlimp/django-rest-framework-jwt) package as it provides all you need to make this eaiser. You can change the payload handler though it's `JWT_PAYLOAD_HANDLER` setting.\n\n\nYou can also create some sort of admin page to select the permissions for user and/or groups like GitHub token scopes, and use that to inject the token into the JWT:\n\n![GitHub Token Page](https://help.github.com/assets/images/help/settings/token_scopes.gif)\n\n\n#### Scopes\n\nScopes are basically what users can access (has permission to do). Each scope should has an unique identifier (see [`Scope`](rest_jwt_permission/scopes/base.py) base class). You can extend the base `Scope` class and add extra properties and methods.\n\n\n#### Providers\n\n`Providers` are objects that returns a list of existing scopes. We currently have 2 built-in providers:\n\n* `APIEndpointScopeProvider`: returns all scopes for Django REST Framework registered views.\n* `AdminScopeProvider`: returns admin related scopes. Currently, only returns `superuser` scope.\n\nYou can develop new providers to your project as you need or even extend the built-ins.\n\n\n### Settings\n\nThis project was build with extension in mind, so it is easy to extend, add or remove features.\n\nSee the list of settings you can customize, all of them are inside the `REST_JWT_PERMISSION` setting key:\n\n\n**`SCOPE_PROVIDERS`**: List of providers used to extract the existing scopes.\nDefaults to:\n```\n\"SCOPE_PROVIDERS\": [\n    \"rest_jwt_permission.providers.APIEndpointScopeProvider\",\n    \"rest_jwt_permission.providers.AdminScopeProvider\"\n]\n```\n\n**`GET_PAYLOAD_FROM_SCOPES_HANDLER`**: Handler function to get the payload with scopes to be injected into JWT. Defaults to:\n```\n\"GET_PAYLOAD_FROM_SCOPES_HANDLER\": \"rest_jwt_permission.handlers.get_payload_from_scopes\"\n```\n\n**`GET_SCOPES_FROM_PAYLOAD_HANDLER`**: Handler function to get the scopes from a JWT payload. Defaults to:\n```\n\"GET_SCOPES_FROM_PAYLOAD_HANDLER\": \"rest_jwt_permission.handlers.get_scopes_from_payload\"\n```\n\n**`GET_PAYLOAD_FROM_REQUEST_HANDLER`**: Handler function to get JWT payload from Request. Defaults to:\n```\n\"GET_PAYLOAD_FROM_REQUEST_HANDLER\": \"rest_jwt_permission.handlers.get_jwt_payload_from_request\"\n```\n\n**`JWT_PAYLOAD_SCOPES_KEY`**: Payload key that will contain the scopes. Defaults to:\n```\n\"JWT_PAYLOAD_SCOPES_KEY\": \"scopes\"\n```\n\n\n### Showing all available roles\n\nYou can use the `show_roles` management command to print all available roles according to your providers.\n\n```\npython manage.py show_roles\n```\n\n## Running tests\n\nInstall dependencies from `dev-requirements.txt` and run `py.tets --cov`:\n\n```\npip install dev-requirements.txt && py.tets --cov\n```\n\n# Compatibility\n\n* Django >= 2.0\n* Django Rest Framework >= 3.7\n\n# License\n\nMIT\n", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/chessbr/rest-jwt-permission", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "rest-jwt-permission", "package_url": "https://pypi.org/project/rest-jwt-permission/", "platform": "", "project_url": "https://pypi.org/project/rest-jwt-permission/", "project_urls": {"Homepage": "https://github.com/chessbr/rest-jwt-permission"}, "release_url": "https://pypi.org/project/rest-jwt-permission/1.0.0/", "requires_dist": null, "requires_python": "", "summary": "Django Rest Framework JWT Permissions", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            [![Build Status](https://travis-ci.org/chessbr/rest-jwt-permission.svg?branch=master)](https://travis-ci.org/chessbr/rest-jwt-permission)<br>[![Coverage Status](https://coveralls.io/repos/github/chessbr/rest-jwt-permission/badge.svg?branch=master)](https://coveralls.io/github/chessbr/rest-jwt-permission?branch=master)<br>[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)<br><br><br># Django Rest Framework JWT permissions<br><br>Module that check API View permissions from JWT payloads.<br><br>## Installation<br><br>```<br>pip install rest_jwt_permission<br>```<br><br>## Using<br><br>Add `rest_jwt_permission` in your `INSTALLED_APPS` and configure the `settings` as you wish. Here is an example:<br><br>```python<br>REST_JWT_PERMISSION = {<br>    \"SCOPE_PROVIDERS\": [<br>        \"rest_jwt_permission.providers.APIEndpointScopeProvider\",<br>        \"rest_jwt_permission.providers.AdminScopeProvider\"<br>    ],<br>    \"GET_PAYLOAD_FROM_SCOPES_HANDLER\": (<br>        \"rest_jwt_permission.handlers.get_payload_from_scopes\"<br>    ),<br>    \"GET_SCOPES_FROM_PAYLOAD_HANDLER\": (<br>        \"rest_jwt_permission.handlers.get_scopes_from_payload\"<br>    ),<br>    \"GET_PAYLOAD_FROM_REQUEST_HANDLER\": (<br>        \"rest_jwt_permission.handlers.get_jwt_payload_from_request\"<br>    )<br>}<br>```<br><br>Now you can use `JWTAPIPermission` class in your API Views through `permission_classes` property or even setting it as the default permission class in your [settings](http://www.django-rest-framework.org/api-guide/permissions/#setting-the-permission-policy)<br><br>### Example<br><br>For a more pratical example, check **[rest-jwt-permission-example](https://github.com/chessbr/rest-jwt-permission-example)**.<br><br>## Motivation<br><br>Inspired by GitHub [Personal access token](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/) and by [Auth0 API Keys blog post](https://auth0.com/blog/using-json-web-tokens-as-api-keys/), this package provides a Django Rest Framework Permission object to check permissions from JWT payloads.<br><br>This enables your API to check permissions avoiding an extra database hit.<br><br>## How it works<br><br>Basically, it extracts a list of all Rest API Views and generate an unique ID for each endpoint + action. Then, after authenticaton, your API should inject which permission identifiers the user has access. The JWT payload should look like the following:<br><br>```json<br>{<br>  \"scopes\": [<br>    \"myviewset:get\"<br>    \"function_endpoint:get\",<br>    \"basicview:get\",<br>    \"simpleviewsetpermission:custom_action:put\",<br>    \"modelviewsetpermission:retrieve:get\",<br>    \"modelviewsetpermission:destroy:delete\",<br>    \"modelviewsetpermission:some_detail_metod:patch\",<br>  ]<br>}<br>```<br><br>On each authenticated request, the `JWTAPIPermission` permission class will generate the unique ID for the requested view and will check whether the JWT payloads contains the ID. If so, the user has access.<br><br>:warning: This package does not automatically injects the scopes payload into the JWT, although we have helpers (`rest_jwt_permission.handlers.get_payload_from_scopes`) you can use to do that. We strongly recommend you to use [REST framework JWT Auth](https://github.com/GetBlimp/django-rest-framework-jwt) package as it provides all you need to make this eaiser. You can change the payload handler though it's `JWT_PAYLOAD_HANDLER` setting.<br><br><br>You can also create some sort of admin page to select the permissions for user and/or groups like GitHub token scopes, and use that to inject the token into the JWT:<br><br>![GitHub Token Page](https://help.github.com/assets/images/help/settings/token_scopes.gif)<br><br><br>#### Scopes<br><br>Scopes are basically what users can access (has permission to do). Each scope should has an unique identifier (see [`Scope`](rest_jwt_permission/scopes/base.py) base class). You can extend the base `Scope` class and add extra properties and methods.<br><br><br>#### Providers<br><br>`Providers` are objects that returns a list of existing scopes. We currently have 2 built-in providers:<br><br>* `APIEndpointScopeProvider`: returns all scopes for Django REST Framework registered views.<br>* `AdminScopeProvider`: returns admin related scopes. Currently, only returns `superuser` scope.<br><br>You can develop new providers to your project as you need or even extend the built-ins.<br><br><br>### Settings<br><br>This project was build with extension in mind, so it is easy to extend, add or remove features.<br><br>See the list of settings you can customize, all of them are inside the `REST_JWT_PERMISSION` setting key:<br><br><br>**`SCOPE_PROVIDERS`**: List of providers used to extract the existing scopes.<br>Defaults to:<br>```<br>\"SCOPE_PROVIDERS\": [<br>    \"rest_jwt_permission.providers.APIEndpointScopeProvider\",<br>    \"rest_jwt_permission.providers.AdminScopeProvider\"<br>]<br>```<br><br>**`GET_PAYLOAD_FROM_SCOPES_HANDLER`**: Handler function to get the payload with scopes to be injected into JWT. Defaults to:<br>```<br>\"GET_PAYLOAD_FROM_SCOPES_HANDLER\": \"rest_jwt_permission.handlers.get_payload_from_scopes\"<br>```<br><br>**`GET_SCOPES_FROM_PAYLOAD_HANDLER`**: Handler function to get the scopes from a JWT payload. Defaults to:<br>```<br>\"GET_SCOPES_FROM_PAYLOAD_HANDLER\": \"rest_jwt_permission.handlers.get_scopes_from_payload\"<br>```<br><br>**`GET_PAYLOAD_FROM_REQUEST_HANDLER`**: Handler function to get JWT payload from Request. Defaults to:<br>```<br>\"GET_PAYLOAD_FROM_REQUEST_HANDLER\": \"rest_jwt_permission.handlers.get_jwt_payload_from_request\"<br>```<br><br>**`JWT_PAYLOAD_SCOPES_KEY`**: Payload key that will contain the scopes. Defaults to:<br>```<br>\"JWT_PAYLOAD_SCOPES_KEY\": \"scopes\"<br>```<br><br><br>### Showing all available roles<br><br>You can use the `show_roles` management command to print all available roles according to your providers.<br><br>```<br>python manage.py show_roles<br>```<br><br>## Running tests<br><br>Install dependencies from `dev-requirements.txt` and run `py.tets --cov`:<br><br>```<br>pip install dev-requirements.txt &amp;&amp; py.tets --cov<br>```<br><br># Compatibility<br><br>* Django &gt;= 2.0<br>* Django Rest Framework &gt;= 3.7<br><br># License<br><br>MIT<br>\n          </div>"}, "last_serial": 3651663, "releases": {"0.1.1": [{"comment_text": "", "digests": {"md5": "05c419ef9207c3888e5d0cb33c5be7a7", "sha256": "3e64e6fcc1db44aa3a39e1fb42a1fc475021d56b064a66ee076092894dc6c163"}, "downloads": -1, "filename": "rest-jwt-permission-0.1.1.tar.gz", "has_sig": false, "md5_digest": "05c419ef9207c3888e5d0cb33c5be7a7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10512, "upload_time": "2017-10-29T18:50:32", "upload_time_iso_8601": "2017-10-29T18:50:32.827118Z", "url": "https://files.pythonhosted.org/packages/a1/46/b7174b008b12138114ec1400806e2efe7a7e7cb5e8b4556ac397aaca9b09/rest-jwt-permission-0.1.1.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "89846a74c19ee44456e30a0573d6f357", "sha256": "d7fbacbabf03a2beffb5eac393c6ea46a6b677b796c7acf9939105656e3af72d"}, "downloads": -1, "filename": "rest-jwt-permission-0.2.0.tar.gz", "has_sig": false, "md5_digest": "89846a74c19ee44456e30a0573d6f357", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12644, "upload_time": "2018-01-13T17:24:44", "upload_time_iso_8601": "2018-01-13T17:24:44.241993Z", "url": "https://files.pythonhosted.org/packages/7a/d8/52b9721500b414947c06c56e8dd0c4c3a0be6f70fdbfd142a316b4a4fec1/rest-jwt-permission-0.2.0.tar.gz", "yanked": false}], "1.0.0": [{"comment_text": "", "digests": {"md5": "3442e230545b7dd29039f9a0c1307efd", "sha256": "217184c5fb95447fb2a73d7f7eb969d7a626432b4a4effc19a55949a5ef0e83b"}, "downloads": -1, "filename": "rest-jwt-permission-1.0.0.tar.gz", "has_sig": false, "md5_digest": "3442e230545b7dd29039f9a0c1307efd", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12631, "upload_time": "2018-03-08T16:07:40", "upload_time_iso_8601": "2018-03-08T16:07:40.390190Z", "url": "https://files.pythonhosted.org/packages/4b/07/df29f3bdcdccfbb91f97f6e8fb453a080414863d91457025ba70dde45308/rest-jwt-permission-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "3442e230545b7dd29039f9a0c1307efd", "sha256": "217184c5fb95447fb2a73d7f7eb969d7a626432b4a4effc19a55949a5ef0e83b"}, "downloads": -1, "filename": "rest-jwt-permission-1.0.0.tar.gz", "has_sig": false, "md5_digest": "3442e230545b7dd29039f9a0c1307efd", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12631, "upload_time": "2018-03-08T16:07:40", "upload_time_iso_8601": "2018-03-08T16:07:40.390190Z", "url": "https://files.pythonhosted.org/packages/4b/07/df29f3bdcdccfbb91f97f6e8fb453a080414863d91457025ba70dde45308/rest-jwt-permission-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:03:36 2020"}