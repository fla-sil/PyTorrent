{"info": {"author": "rohitghatol", "author_email": "", "bugtrack_url": null, "classifiers": [], "description": "# GraphQL Client for Locust\n\nLocust is a python performance test library. Locust supports http client out of the box.\nThis library provides the GraphQL Client for Locust.\n\nThis GraphQL Client is based on Prisma's Simple GraphQL Client for Python (https://github.com/prisma/python-graphql-client)\n\n# API\n\n```python\nclass GraphQLClient:\n def execute(self, label, query, variables=None, type ='graphql'):\n```\n\n####Arguments\n* type = Locust Request Type. Default value is 'graphql'\n* label = Locust Name\n* query = GraphQL Query\n* variables = GraphQL Variables. Default value is None\n\n\n# Usage\n\n```python\nfrom locust import HttpLocust, TaskSet, task\nfrom locustgraphqlclient import GraphQLLocust\n\n\nclass UserBehavior(TaskSet):\n    def on_start(self):\n        \"\"\" on_start is called when a Locust start before any task is scheduled \"\"\"\n        self.login()\n\n    def on_stop(self):\n        \"\"\" on_stop is called when the TaskSet is stopping \"\"\"\n        self.logout()\n\n    def login(self):\n        query = '''\n        mutation login($username: String!, $password: String!) {\n          login(username: $username, password: $password) {\n            access_token\n          }\n        }'''\n        variables = {\n            'username': 'gm',\n            'password': 'centric8'\n        }\n        result = self.client.execute(\"login\", query, variables)\n\n        # Inject the Access Token in the Client, so subsequent requests can be made\n        self.client.inject_token(result['data']['login']['access_token'])\n\n    def logout(self):\n        # Reset the Access Token in the Client, so no subsequent requests can be made\n        self.client.inject_token('')\n\n    @task(2)\n    def index(self):\n        query = '''\n                    query products {\n                      products {\n                        id\n                        name\n                        image\n                      }\n                    }'''\n        result = self.client.execute(\"products\", query)\n\n    @task(1)\n    def profile(self):\n        query = '''\n                    query me {\n                      me {\n                        id\n                        username\n                        firstName\n                        lastName                    \n                      }\n                    }'''\n        result = self.client.execute(\"me\", query)\n\n\nclass WebsiteUser(GraphQLLocust):\n    task_set = UserBehavior\n    min_wait = 5000\n    max_wait = 9000\n\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/rohitghatol/locust-graphql-client", "keywords": "", "license": "Apache License 2.0", "maintainer": "", "maintainer_email": "", "name": "locust-graphql-client", "package_url": "https://pypi.org/project/locust-graphql-client/", "platform": "", "project_url": "https://pypi.org/project/locust-graphql-client/", "project_urls": {"Homepage": "https://github.com/rohitghatol/locust-graphql-client"}, "release_url": "https://pypi.org/project/locust-graphql-client/0.3.4/", "requires_dist": null, "requires_python": "", "summary": "Locust GraphQL client GraphQL. This is a GraphQLLocust equivalent of HttpLocust", "version": "0.3.4", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>GraphQL Client for Locust</h1>\n<p>Locust is a python performance test library. Locust supports http client out of the box.\nThis library provides the GraphQL Client for Locust.</p>\n<p>This GraphQL Client is based on Prisma's Simple GraphQL Client for Python (<a href=\"https://github.com/prisma/python-graphql-client\" rel=\"nofollow\">https://github.com/prisma/python-graphql-client</a>)</p>\n<h1>API</h1>\n<pre><span class=\"k\">class</span> <span class=\"nc\">GraphQLClient</span><span class=\"p\">:</span>\n <span class=\"k\">def</span> <span class=\"nf\">execute</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"p\">,</span> <span class=\"n\">query</span><span class=\"p\">,</span> <span class=\"n\">variables</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"nb\">type</span> <span class=\"o\">=</span><span class=\"s1\">'graphql'</span><span class=\"p\">):</span>\n</pre>\n<p>####Arguments</p>\n<ul>\n<li>type = Locust Request Type. Default value is 'graphql'</li>\n<li>label = Locust Name</li>\n<li>query = GraphQL Query</li>\n<li>variables = GraphQL Variables. Default value is None</li>\n</ul>\n<h1>Usage</h1>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">locust</span> <span class=\"kn\">import</span> <span class=\"n\">HttpLocust</span><span class=\"p\">,</span> <span class=\"n\">TaskSet</span><span class=\"p\">,</span> <span class=\"n\">task</span>\n<span class=\"kn\">from</span> <span class=\"nn\">locustgraphqlclient</span> <span class=\"kn\">import</span> <span class=\"n\">GraphQLLocust</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">UserBehavior</span><span class=\"p\">(</span><span class=\"n\">TaskSet</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">on_start</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">\"\"\" on_start is called when a Locust start before any task is scheduled \"\"\"</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">login</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">on_stop</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">\"\"\" on_stop is called when the TaskSet is stopping \"\"\"</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">logout</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">login</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"s1\">'''</span>\n<span class=\"s1\">        mutation login($username: String!, $password: String!) {</span>\n<span class=\"s1\">          login(username: $username, password: $password) {</span>\n<span class=\"s1\">            access_token</span>\n<span class=\"s1\">          }</span>\n<span class=\"s1\">        }'''</span>\n        <span class=\"n\">variables</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'username'</span><span class=\"p\">:</span> <span class=\"s1\">'gm'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'password'</span><span class=\"p\">:</span> <span class=\"s1\">'centric8'</span>\n        <span class=\"p\">}</span>\n        <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"s2\">\"login\"</span><span class=\"p\">,</span> <span class=\"n\">query</span><span class=\"p\">,</span> <span class=\"n\">variables</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># Inject the Access Token in the Client, so subsequent requests can be made</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">inject_token</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">[</span><span class=\"s1\">'data'</span><span class=\"p\">][</span><span class=\"s1\">'login'</span><span class=\"p\">][</span><span class=\"s1\">'access_token'</span><span class=\"p\">])</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">logout</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"c1\"># Reset the Access Token in the Client, so no subsequent requests can be made</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">inject_token</span><span class=\"p\">(</span><span class=\"s1\">''</span><span class=\"p\">)</span>\n\n    <span class=\"nd\">@task</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">index</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"s1\">'''</span>\n<span class=\"s1\">                    query products {</span>\n<span class=\"s1\">                      products {</span>\n<span class=\"s1\">                        id</span>\n<span class=\"s1\">                        name</span>\n<span class=\"s1\">                        image</span>\n<span class=\"s1\">                      }</span>\n<span class=\"s1\">                    }'''</span>\n        <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"s2\">\"products\"</span><span class=\"p\">,</span> <span class=\"n\">query</span><span class=\"p\">)</span>\n\n    <span class=\"nd\">@task</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">profile</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"s1\">'''</span>\n<span class=\"s1\">                    query me {</span>\n<span class=\"s1\">                      me {</span>\n<span class=\"s1\">                        id</span>\n<span class=\"s1\">                        username</span>\n<span class=\"s1\">                        firstName</span>\n<span class=\"s1\">                        lastName                    </span>\n<span class=\"s1\">                      }</span>\n<span class=\"s1\">                    }'''</span>\n        <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><span class=\"s2\">\"me\"</span><span class=\"p\">,</span> <span class=\"n\">query</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">WebsiteUser</span><span class=\"p\">(</span><span class=\"n\">GraphQLLocust</span><span class=\"p\">):</span>\n    <span class=\"n\">task_set</span> <span class=\"o\">=</span> <span class=\"n\">UserBehavior</span>\n    <span class=\"n\">min_wait</span> <span class=\"o\">=</span> <span class=\"mi\">5000</span>\n    <span class=\"n\">max_wait</span> <span class=\"o\">=</span> <span class=\"mi\">9000</span>\n</pre>\n\n          </div>"}, "last_serial": 5856482, "releases": {"0.1.1": [{"comment_text": "", "digests": {"md5": "102f83005694a3148b55a6df4fafa06c", "sha256": "d9fa1887e7471604ca70989cd87c5916d9bf626190d41ef44fd16f773af635eb"}, "downloads": -1, "filename": "locust-graphql-client-0.1.1.tar.gz", "has_sig": false, "md5_digest": "102f83005694a3148b55a6df4fafa06c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2319, "upload_time": "2019-08-26T03:21:46", "upload_time_iso_8601": "2019-08-26T03:21:46.928487Z", "url": "https://files.pythonhosted.org/packages/a2/ac/cfd33428541d469384e215f25088f43aca9583fdec3ddb1e6951c1193533/locust-graphql-client-0.1.1.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "e6f7064f3e681d2391a9afe4451d3f47", "sha256": "086ee37f6e34b1fd80fc8fc7c45422e639bf154a287c16bc4732bc3e64388c0c"}, "downloads": -1, "filename": "locust-graphql-client-0.2.0.tar.gz", "has_sig": false, "md5_digest": "e6f7064f3e681d2391a9afe4451d3f47", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2338, "upload_time": "2019-08-26T04:12:41", "upload_time_iso_8601": "2019-08-26T04:12:41.172125Z", "url": "https://files.pythonhosted.org/packages/c4/57/33969b9942feb7352c2306fa0057eb7781bbd326247b50a0f0e3cc90efb9/locust-graphql-client-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "da3eda7cfd1b7816b416a74290e483e7", "sha256": "d8b658bb74c81cab1152ba1fa2a11ec453ffc349a40bad9504acf9113bae4cec"}, "downloads": -1, "filename": "locust-graphql-client-0.3.0.tar.gz", "has_sig": false, "md5_digest": "da3eda7cfd1b7816b416a74290e483e7", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2447, "upload_time": "2019-08-26T05:33:58", "upload_time_iso_8601": "2019-08-26T05:33:58.294513Z", "url": "https://files.pythonhosted.org/packages/be/ac/3cebff45ef46d970e64d7efd70a097bcd111371809434aa13e4d54712ea1/locust-graphql-client-0.3.0.tar.gz", "yanked": false}], "0.3.1": [{"comment_text": "", "digests": {"md5": "4e4026b7a89a293fc00e88a8a4d45f0e", "sha256": "1f07995c9b9b8745ef1807608229b133279cc7875085e61ee88890e0b31c5eb1"}, "downloads": -1, "filename": "locust-graphql-client-0.3.1.tar.gz", "has_sig": false, "md5_digest": "4e4026b7a89a293fc00e88a8a4d45f0e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2441, "upload_time": "2019-09-18T19:23:51", "upload_time_iso_8601": "2019-09-18T19:23:51.982782Z", "url": "https://files.pythonhosted.org/packages/1e/6d/dffa1c78b93b1fe2b8e1c45dd73a86b268dee5a925df9e3a9ea38ba9556e/locust-graphql-client-0.3.1.tar.gz", "yanked": false}], "0.3.4": [{"comment_text": "", "digests": {"md5": "e6fc68a03b7ec355fe5b70fd2d3517ed", "sha256": "b351c3e456b3739e442a34480df98b2de5838682486da4af59c021d1c62fc566"}, "downloads": -1, "filename": "locust-graphql-client-0.3.4.tar.gz", "has_sig": false, "md5_digest": "e6fc68a03b7ec355fe5b70fd2d3517ed", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2486, "upload_time": "2019-09-19T13:42:13", "upload_time_iso_8601": "2019-09-19T13:42:13.089646Z", "url": "https://files.pythonhosted.org/packages/fd/f6/1c86dc0729e95106624b80cf6b2edb354261e3261386e4d61f6058731470/locust-graphql-client-0.3.4.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "e6fc68a03b7ec355fe5b70fd2d3517ed", "sha256": "b351c3e456b3739e442a34480df98b2de5838682486da4af59c021d1c62fc566"}, "downloads": -1, "filename": "locust-graphql-client-0.3.4.tar.gz", "has_sig": false, "md5_digest": "e6fc68a03b7ec355fe5b70fd2d3517ed", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2486, "upload_time": "2019-09-19T13:42:13", "upload_time_iso_8601": "2019-09-19T13:42:13.089646Z", "url": "https://files.pythonhosted.org/packages/fd/f6/1c86dc0729e95106624b80cf6b2edb354261e3261386e4d61f6058731470/locust-graphql-client-0.3.4.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:44:31 2020"}