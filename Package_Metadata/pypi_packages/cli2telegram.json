{"info": {"author": "Markus Ressel", "author_email": "mail@markusressel.de", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: 3 :: Only"], "description": "# cli2telegram\nSmall utility to send Telegram messages from the CLI.\n\nThis can be used to\n* use Telegram as a notification backend for the ZFS Event Daemon (zed)\n\n## Features\n* [x] Read messages from argument or STDIN\n* [x] (Optional) Configuration file\n* [x] Retry sending messages for a specified amount of time\n\n## Examples\n\n```shell\n# From arguments\ncli2telegram \"This is a message\"\n\ncli2telegram \"Header\" \"This is a multiline message.\"\n\n# From STDIN\necho My Message | cli2telegram\n\nprintf \"Header\\nThis is a multiline message.\" | cli2telegram\n\n# Config via parameters\nprintf \"Message\" | cli2telegram -b \"123456789:ABCDEFG\" -c \"123456789\"\n``` \n\n# Install\n\nTo use this utility install it either using:\n```\npip install cli2telegram\n```\n\nor - if you don't want to install it globally - using [venv-install](https://github.com/markusressel/venv-install):\n```\nvenv-install cli2telegram cli2telegram\n```\n\nor your custom venv manager of choice.\n\n# Configuration\n\n## File\nTo be able to send you messages you have to provide a **bot token** and a **chat id**.\ncli2telegram uses [container-app-conf](https://github.com/markusressel/container-app-conf) so you can use YAML, TOML, or ENV to set those. Since `zed` will run your scripts as root, if you want to use a config file you have to put it in f.ex. `/root/.config/zed2telegram.toml`:\n\n```toml\n[cli2telegram.telegram]\nchat_id=\"12345678\"\nbot_token=\"123456789:ABCDEFGH1234567890AB-1234567890ABC\"\n\n[cli2telegram.retry]\nenabled=\"True\"\ntimeout=\"10s\"\ngive_up_after=\"4h\"\n```\n\n## Parameters\nIf you do not want to create a configuration file you can pass them using parameters:\n\n* `-b` - Telegram Bot Token\n* `-c` - Telegram Chat ID\n\n## ZFS Event Daemon (ZED)\nTo make `zed` call cli2telegram we will trick it and make it use cli2telegram as an E-Mail client.\n\nEdit `/etc/zfs/zed.d/zed.rc` as root:\n```bash\nsudo nano -w /etc/zfs/zed.d/zed.rc\n```\n\nand\n* uncomment `ZED_EMAIL_ADDR`, the value does not matter since we use our own email script, but **it is necessary to set a value to make ZED send 'emails'**\n* set `ZED_EMAIL_PROG` to the path of the script, f.ex. `/usr/bin/cli2telegram`\n  * it is important to note that zed does not seem to work if your command needs arguments to run\n```\n\nZED_EMAIL_ADDR=\"root\"\n\n[...]\n\nZED_EMAIL_PROG=\"/usr/bin/cli2telegram\"\n\n[...]\n\n# If you want to receive email no matter the state of your pool, you\u2019ll want to set:\nZED_NOTIFY_VERBOSE=1\n\n[...]\n```\n\n# Contributing\n\nGitHub is for social coding: if you want to write code, I encourage contributions through pull requests from forks\nof this repository. Create GitHub tickets for bugs and new features and comment on the ones that you are interested in.\n\n# License\n\n```text\ncli2telegram by Markus Ressel\nCopyright (C) 2018  Markus Ressel\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as\npublished by the Free Software Foundation, either version 3 of the\nLicense, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/markusressel/cli2telegram", "keywords": "", "license": "AGPLv3+", "maintainer": "", "maintainer_email": "", "name": "cli2telegram", "package_url": "https://pypi.org/project/cli2telegram/", "platform": "", "project_url": "https://pypi.org/project/cli2telegram/", "project_urls": {"Homepage": "https://github.com/markusressel/cli2telegram"}, "release_url": "https://pypi.org/project/cli2telegram/1.0.0/", "requires_dist": ["container-app-conf (==5.0.0)", "click", "emoji", "python-telegram-bot (>=12.2.0)"], "requires_python": "", "summary": "Small utility to send Telegram messages from the CLI.", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>cli2telegram</h1>\n<p>Small utility to send Telegram messages from the CLI.</p>\n<p>This can be used to</p>\n<ul>\n<li>use Telegram as a notification backend for the ZFS Event Daemon (zed)</li>\n</ul>\n<h2>Features</h2>\n<ul>\n<li>[x] Read messages from argument or STDIN</li>\n<li>[x] (Optional) Configuration file</li>\n<li>[x] Retry sending messages for a specified amount of time</li>\n</ul>\n<h2>Examples</h2>\n<pre><span class=\"c1\"># From arguments</span>\ncli2telegram <span class=\"s2\">\"This is a message\"</span>\n\ncli2telegram <span class=\"s2\">\"Header\"</span> <span class=\"s2\">\"This is a multiline message.\"</span>\n\n<span class=\"c1\"># From STDIN</span>\n<span class=\"nb\">echo</span> My Message <span class=\"p\">|</span> cli2telegram\n\n<span class=\"nb\">printf</span> <span class=\"s2\">\"Header\\nThis is a multiline message.\"</span> <span class=\"p\">|</span> cli2telegram\n\n<span class=\"c1\"># Config via parameters</span>\n<span class=\"nb\">printf</span> <span class=\"s2\">\"Message\"</span> <span class=\"p\">|</span> cli2telegram -b <span class=\"s2\">\"123456789:ABCDEFG\"</span> -c <span class=\"s2\">\"123456789\"</span>\n</pre>\n<h1>Install</h1>\n<p>To use this utility install it either using:</p>\n<pre><code>pip install cli2telegram\n</code></pre>\n<p>or - if you don't want to install it globally - using <a href=\"https://github.com/markusressel/venv-install\" rel=\"nofollow\">venv-install</a>:</p>\n<pre><code>venv-install cli2telegram cli2telegram\n</code></pre>\n<p>or your custom venv manager of choice.</p>\n<h1>Configuration</h1>\n<h2>File</h2>\n<p>To be able to send you messages you have to provide a <strong>bot token</strong> and a <strong>chat id</strong>.\ncli2telegram uses <a href=\"https://github.com/markusressel/container-app-conf\" rel=\"nofollow\">container-app-conf</a> so you can use YAML, TOML, or ENV to set those. Since <code>zed</code> will run your scripts as root, if you want to use a config file you have to put it in f.ex. <code>/root/.config/zed2telegram.toml</code>:</p>\n<pre><span class=\"k\">[cli2telegram.telegram]</span>\n<span class=\"n\">chat_id</span><span class=\"o\">=</span><span class=\"s\">\"12345678\"</span>\n<span class=\"n\">bot_token</span><span class=\"o\">=</span><span class=\"s\">\"123456789:ABCDEFGH1234567890AB-1234567890ABC\"</span>\n\n<span class=\"k\">[cli2telegram.retry]</span>\n<span class=\"n\">enabled</span><span class=\"o\">=</span><span class=\"s\">\"True\"</span>\n<span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"s\">\"10s\"</span>\n<span class=\"n\">give_up_after</span><span class=\"o\">=</span><span class=\"s\">\"4h\"</span>\n</pre>\n<h2>Parameters</h2>\n<p>If you do not want to create a configuration file you can pass them using parameters:</p>\n<ul>\n<li><code>-b</code> - Telegram Bot Token</li>\n<li><code>-c</code> - Telegram Chat ID</li>\n</ul>\n<h2>ZFS Event Daemon (ZED)</h2>\n<p>To make <code>zed</code> call cli2telegram we will trick it and make it use cli2telegram as an E-Mail client.</p>\n<p>Edit <code>/etc/zfs/zed.d/zed.rc</code> as root:</p>\n<pre>sudo nano -w /etc/zfs/zed.d/zed.rc\n</pre>\n<p>and</p>\n<ul>\n<li>uncomment <code>ZED_EMAIL_ADDR</code>, the value does not matter since we use our own email script, but <strong>it is necessary to set a value to make ZED send 'emails'</strong></li>\n<li>set <code>ZED_EMAIL_PROG</code> to the path of the script, f.ex. <code>/usr/bin/cli2telegram</code>\n<ul>\n<li>it is important to note that zed does not seem to work if your command needs arguments to run</li>\n</ul>\n</li>\n</ul>\n<pre><code>\nZED_EMAIL_ADDR=\"root\"\n\n[...]\n\nZED_EMAIL_PROG=\"/usr/bin/cli2telegram\"\n\n[...]\n\n# If you want to receive email no matter the state of your pool, you\u2019ll want to set:\nZED_NOTIFY_VERBOSE=1\n\n[...]\n</code></pre>\n<h1>Contributing</h1>\n<p>GitHub is for social coding: if you want to write code, I encourage contributions through pull requests from forks\nof this repository. Create GitHub tickets for bugs and new features and comment on the ones that you are interested in.</p>\n<h1>License</h1>\n<pre>cli2telegram by Markus Ressel\nCopyright (C) 2018  Markus Ressel\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as\npublished by the Free Software Foundation, either version 3 of the\nLicense, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License\nalong with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.\n</pre>\n\n          </div>"}, "last_serial": 6334321, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "e465e35630f84e051052b10d1f7d5167", "sha256": "9ae5e8faac7ca594e158f6cb4aa4847861a1016760f54f5725a77b2a913ca0a1"}, "downloads": -1, "filename": "cli2telegram-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "e465e35630f84e051052b10d1f7d5167", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 21248, "upload_time": "2019-12-19T17:45:45", "upload_time_iso_8601": "2019-12-19T17:45:45.659339Z", "url": "https://files.pythonhosted.org/packages/48/91/f373d7f3fdcdeaded6ec7afc33ffd1496f9da28bfa929b8dae3397fc437e/cli2telegram-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "59ad2023c8d7d6839a5fe69e8a1f78ac", "sha256": "5c8f6eda908f6b0979b11163e2ee7338cc072556005570b71e02c35a81574d12"}, "downloads": -1, "filename": "cli2telegram-1.0.0.tar.gz", "has_sig": false, "md5_digest": "59ad2023c8d7d6839a5fe69e8a1f78ac", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7270, "upload_time": "2019-12-19T17:45:47", "upload_time_iso_8601": "2019-12-19T17:45:47.648593Z", "url": "https://files.pythonhosted.org/packages/93/dd/b2e5d0041b2e7318365b74ee7b4eb0c7ff1ab420e02902748e71010f6cea/cli2telegram-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "e465e35630f84e051052b10d1f7d5167", "sha256": "9ae5e8faac7ca594e158f6cb4aa4847861a1016760f54f5725a77b2a913ca0a1"}, "downloads": -1, "filename": "cli2telegram-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "e465e35630f84e051052b10d1f7d5167", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 21248, "upload_time": "2019-12-19T17:45:45", "upload_time_iso_8601": "2019-12-19T17:45:45.659339Z", "url": "https://files.pythonhosted.org/packages/48/91/f373d7f3fdcdeaded6ec7afc33ffd1496f9da28bfa929b8dae3397fc437e/cli2telegram-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "59ad2023c8d7d6839a5fe69e8a1f78ac", "sha256": "5c8f6eda908f6b0979b11163e2ee7338cc072556005570b71e02c35a81574d12"}, "downloads": -1, "filename": "cli2telegram-1.0.0.tar.gz", "has_sig": false, "md5_digest": "59ad2023c8d7d6839a5fe69e8a1f78ac", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7270, "upload_time": "2019-12-19T17:45:47", "upload_time_iso_8601": "2019-12-19T17:45:47.648593Z", "url": "https://files.pythonhosted.org/packages/93/dd/b2e5d0041b2e7318365b74ee7b4eb0c7ff1ab420e02902748e71010f6cea/cli2telegram-1.0.0.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:19:03 2020"}