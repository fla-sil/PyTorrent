{"info": {"author": "Praekelt Foundation", "author_email": "dev@praekelt.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Framework :: Django", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Operating System :: OS Independent", "Programming Language :: Python", "Topic :: Internet :: WWW/HTTP :: Dynamic Content"], "description": "django-analytics\n================\n\nA basic Django app facilitating tracking of certain elementary metrics and statistics -\ngenerally just metrics which can be measured in terms of counts and cumulative counts.\n\nThis app could be useful for keeping track of registrations, page impressions, sessions,\nand so on. By default, it allows for tracking of registrations. Adding more metrics\nis a relatively straightforward task, as explained further on.\n\n.. contents::\n    :depth: 5    \n\nQuick Installation\n------------------\n1. Save a copy of the ``django-analytics`` app in your Python path.\n2. Add it to your ``INSTALLED_APPS`` list in your Django project settings.\n3. Create a ``mod_analytics.py`` file for each of your apps that require some sort\n   of tracking. See the `Creating a mod_analytics Script`_ section below.\n4. Run the following from the command line in order to install the various metrics\n   and automatically make them active:\n\n::\n\n    > python manage.py metrics --install\n\n5. Run the following from the command line to update the daily, weekly and monthly\n   statistics for each of the active metrics:\n\n::\n\n    > python manage.py metrics --calculate=ALL\n\nBy default, ``django-analytics`` comes with a ``registrations`` metric which counts\nthe number of users in the system based on their ``date_joined`` timestamp.\n\nCreating a mod_analytics Script\n-------------------------------\nIf, for example, you have an app called ``comments`` with the following ``models.py`` file:\n\n::\n\n    from django.db import models\n    from django.contrib.auth.models import User\n\n    class Comment(models.Model):\n        user = models.ForeignKey(User, related_name='comments')\n        timestamp = models.DateTimeField(auto_now_add=True)\n        comment = models.CharField(max_length=300)\n\nand you would like to track the total number of comments, you could\ncreate a ``mod_analytics.py`` script (in the same directory as your app's models)\nlooking like the following:\n\n::\n\n    from analytics.basemetric import BaseMetric\n    from models import Comment\n\n    class TotalComments(BaseMetric):\n        uid   = \"totalcomments\"\n        title = \"Total comments\"\n\n        def calculate(self, start_datetime, end_datetime):\n            return Comment.objects.filter(timestamp__gte=start_datetime,\n                timestamp__lt=end_datetime).count()\n\n        def get_earliest_timestamp(self):\n            try:\n                return Comment.objects.all().order_by('timestamp')[0].timestamp\n            except IndexError:\n                return None\n\n\nGeckoboard Integration and CSV Dumps\n------------------------------------\nIn order to allow for `Geckoboard <http://geckoboard.com>`_ integration to allow for\nvisualisation of your statistics, as well as simple CSV dumping of statistics,\nin your project's ``urls.py``, add the following line:\n\n::\n\n    urlpatterns = patterns('',\n        # ...\n\n        (r'^analytics/', include('analytics.urls')),\n\n        # ...\n    )\n\nNote that this project makes use of ``django-geckoboard`` (http://pypi.python.org/pypi/django-geckoboard),\nso all of the default ``django-geckoboard`` settings apply.\n\n**Geckboard Charts**\n\nThis will automatically add the following Geckoboard-related URLs to your project:\n\n``analytics/geckoboard/numbers``\n    A `numbers widget <http://support.geckoboard.com/entries/231507-custom-widget-type-definitions>`_.\n    Supported GET variable parameters: ``uid``, ``daysback``, ``cumulative``, ``frequency``.\n    ``daysback`` default: 7.\n``analytics/geckoboard/rag``\n    A `RAG widget <http://support.geckoboard.com/entries/231507-custom-widget-type-definitions>`_.\n    Supported GET variable parameters: ``uids``, ``daysback``, ``cumulative``, ``frequency``.\n``analytics/geckoboard/pie``\n    A `pie chart widget <http://support.geckoboard.com/entries/274940-custom-chart-widget-type-definitions>`_.\n    Supported GET variable parameters: ``uids``, ``daysback``, ``cumulative``, ``frequency``.\n``analytics/geckoboard/line``\n    A `line chart widget <http://support.geckoboard.com/entries/274940-custom-chart-widget-type-definitions>`_.\n    Note that this can only plot a single metric per chart.\n    Supported GET variable parameters: ``uid``, ``daysback``, ``cumulative``, ``frequency``.\n    ``daysback`` default: 7.\n``analytics/geckoboard/geckometer``\n    A `geck-o-meter widget <http://support.geckoboard.com/entries/274940-custom-chart-widget-type-definitions>`_.\n    Supported GET variable parameters: ``uid``, ``frequency``, ``cumulative``, ``min``, ``max``.\n``analytics/geckoboard/funnel``\n    A `funnel chart widget <http://support.geckoboard.com/entries/274940-custom-chart-widget-type-definitions>`_.\n    Supported GET variable parameters: ``uids``, ``frequency``, ``cumulative``, ``type``,\n    ``percentage``, ``sort``.\n\n**Geckoboard GET Variable Parameters**\n\n+----------------+--------------------------------------------------------------------------+\n| ``uid``        | The UID of the metric to display, if a single metric is to be displayed. |\n+----------------+--------------------------------------------------------------------------+\n| ``uids``       | The UIDs of the metrics to display, if multiple metrics are to be        |\n|                | displayed.                                                               |\n+----------------+--------------------------------------------------------------------------+\n| ``daysback``   | The numbers Geckoboard widget shows a single count, and the percentage   |\n|                | change from a previous count. This view returns the most recent count    |\n|                | or cumulative count, as well as the count or cumulative count from       |\n|                | ``days_back`` days ago.                                                  |\n+----------------+--------------------------------------------------------------------------+\n| ``cumulative`` | A boolean value (either ``t`` or ``f``) indicating whether the period    |\n|                | count is to be returned, or the cumulative count. Default: ``t``.        |\n+----------------+--------------------------------------------------------------------------+\n| ``frequency``  | The frequency of the statistics to be returned. Can be ``d``, ``w`` or   |\n|                | ``m`` for daily, weekly or monthly, respectively. Default: ``d``.        |\n+----------------+--------------------------------------------------------------------------+\n| ``min``        | The minimum value of a particular metric - usually for pie charts.       |\n|                | Default: 0.                                                              |\n+----------------+--------------------------------------------------------------------------+\n| ``max``        | The maximum value of a particular metric - usually for pie charts.       |\n|                | Default: 100.                                                            |\n+----------------+--------------------------------------------------------------------------+\n| ``type``       | Chart type - only applicable to the funnel chart. See the Geckoboard     |\n|                | API for more details. Default: ``standard``.                             |\n+----------------+--------------------------------------------------------------------------+\n| ``percentage`` | Whether or not to show a percentage - only applicable to the funnel      |\n|                | chart. See the Geckoboard API for more details. Default: ``show``.       |\n+----------------+--------------------------------------------------------------------------+\n| ``sort``       | A boolean value (either ``t`` or ``f``) indicating whether or not to     |\n|                | sort the statistics - only applicable to the funnel chart. See the       |\n|                | Geckoboard API for more details. Default: ``f``.                         |\n+----------------+--------------------------------------------------------------------------+\n\n**CSV Dump**\n\nIt will also add the following CSV-related URLs to your project:\n\n``analytics/csv/<uid>``\n    A simple view requiring the UID of the metric as its parameter, returning\n    a CSV dump of all of the statistics for the given metric. By default, this returns\n    the **daily** statistics for the metric.\n\n**CSV Dump GET Variable Parameters**\n\n+----------------+--------------------------------------------------------------------------+\n| ``frequency``  | The frequency of the statistics to be returned. Can be ``d``, ``w`` or   |\n|                | ``m`` for daily, weekly or monthly, respectively. Default: ``d``.        |\n|                | For example, ``analytics/csv/registrations?frequency=w`` will return all |\n|                | of the weekly registrations over all time as a CSV dump.                 |\n+----------------+--------------------------------------------------------------------------+\n\n\nMetrics Explained\n-----------------\nThe ``django-analytics`` module creates ``Metric`` objects for each type of metric that\nneeds to be tracked, such as registrations, page impressions, etc. Each metric needs to\nhave a globally unique identifier (**UID**) so that it can be referenced from the command line\nby name, and a title to provide a little more of a description of what that metric\nis.\n\nEach metric has a number of ``Statistic`` objects associated with it, each ``Statistic``\nonly being a simple combination of date/time, a count for that date/time, a cumulative\ncount, and frequency.\n\nThe frequency can currently only be **daily**, **weekly** or\n**monthly**, and by default, each metric's statistics are calculated for all of those\nfrequencies (so a single metric can have multiple frequencies' statistics).\n\nIn general, the cumulative count is automatically calculated for you, and is simply the\nprevious day's/week's/month's cumulative count, added to the current day's/week's/month's\ncount.\n\nCommand Line Reference\n----------------------\nThe following options are available from the command line for the ``metrics`` management\ncommand:\n\n-l, --list         Lists all of the available metrics, along with some basic information about each.\n-i, --install      Scans the project for available metrics and creates or updates them where necessary.\n-a, --activate     Activates the metric with the specified UID, e.g. ``--activate=registrations``.\n                   If you want to activate all metrics,\n                   simply specify ``--activate=ALL`` on the command line. Only active metrics will\n                   be included in a ``--calculate=ALL`` execution.\n-d, --deactivate   Deactivates the metric with the specified UID. Again, you can specify\n                   ``--deactivate=ALL`` to deactivate all metrics.\n-c, --calculate    Calculates the specified metric, e.g. ``--calculate=registrations``. Can\n                   specify ``--calculate=ALL`` to calculate all active metrics.\n-f, --frequency    If the ``--calculate`` command is specified, this will allow one to force a particular\n                   frequency's statistics to be calculated. Possible values are: ``d`` (daily), ``w`` (weekly),\n                   ``m`` (monthly) and ``a`` (all). Default is *all*.\n--reset            Deletes all of the ``Statistic`` objects associated with the specified metric.\n                   Can specify ``--reset=ALL`` to delete all statistics for all metrics, regardless\n                   of whether they are active or not.\n--drop-metric      Deletes the actual ``Metric`` with the specified UID. Use ``--drop-metric=ALL``\n                   to drop all metrics (and their statistics) from the database.\n\nInner Workings\n--------------\nWhen running the ``manage.py metrics --install`` command, the following happens:\n\n1. The script searches through all the installed apps for your project and\n   attempts to first find a ``mod_analytics`` module which it can import.\n2. It then searches through all of the classes in each ``mod_analytics`` module\n   it encounters, and then attempts to find classes derived from the\n   ``analytics.basemetric.BaseMetric`` class (an abstract class).\n3. For each valid class found which derives from the ``BaseMetric`` class, the script\n   makes sure it has two functions: ``calculate``, and ``get_earliest_timestamp``.\n   It also makes sure the class has two properties: ``uid`` and ``title``.\n4. If the class has these two functions, the script creates a ``Metric`` instance\n   whose unique identifier and title are set to the ``uid`` and ``title`` values\n   of the discovered class.\n\nThe ``calculate`` function takes two parameters: ``start_datetime`` and ``end_datetime``,\nand must simply return a count of the relevant metric between those two given dates. You can\nperform any calculations you need in this function to get to this final count value.\n\nTo understand the reasoning here, the ``analytics`` app has three broad calculation time periods\nwhich it attempts to calculate: **daily**, **weekly** and **monthly**. For a daily calculation,\nfor example, the ``start_datetime`` parameter supplied will resemble something like\n``datetime(2011, 5, 1)`` and the ``end_datetime`` parameter will resemble something like\n``datetime(2011, 5, 2)``. The ``calculate`` function must then return a count of the relevant\nmetric for the time period starting at 2011/05/01 00:00 and ending at 2011/05/02 00:00.\n**NOTE**: You should always return counts starting at exactly the given ``start_datetime``\nvalue (i.e. greater-than-equal-to), but *just before* the ``end_datetime`` value (i.e.\nless-than).\n\nThe ``get_earliest_timestamp`` function must simply return a ``datetime.datetime`` object\nindicating the earliest data's associated date/time, so that the analytics calculation routine\nknows the date at which to start calculating. If there are no entries yet, this function must\nreturn ``None``.\n\nAbstract Metrics\n----------------\n\nIf you want to create abstract metrics, simply create a separate Python file somewhere\nwhich will contain your \"abstract\" metrics. For example, create an ``abstract_metrics.py``\nfile which looks as follows:\n\n::\n\n    from analytics import BaseMetric\n    from django.contrib.auth.models import User\n\n    class UserBaseMetric(BaseMetric):\n        def calculate(self, start_datetime, end_datetime):\n            return User.objects.filter(date_joined__gte=start_datetime,\n                date_joined__lt=end_datetime).count()\n\n        def get_earliest_timestamp(self):\n            try:\n                return User.objects.all().order_by('date_joined')[0].date_joined\n            except IndexError:\n                return None\n            \nThen, in your ``mod_analytics.py`` file, just import your ``abstract_metrics`` module.\n**Note**: Do not import the ``UserBaseMetric``, just import the ``abstract_metrics`` module,\nas follows:\n\n::\n\n    from analytics import BaseMetric\n    import myapp.abstract_metrics\n\n    class UserMetric(abstract_metrics.UserBaseMetric):\n        uid   = \"users\"\n        title = \"Users\"\n\n\nTodo\n----\nThe following features are planned for future versions of ``django-analytics``:\n\n1. Custom visualisation integrated into Django admin back-end.\n2. Hourly statistics.\n3. More complex statistics, such as frequency plots/histograms.\n\nVersion History\n---------------\n\n+---------+------------------------------------------+\n| Version | Description                              |\n+=========+==========================================+\n| 0.0.1   | First version                            |\n+---------+------------------------------------------+", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/praekelt/django-analytics", "keywords": null, "license": "BSD", "maintainer": null, "maintainer_email": null, "name": "django-analytics", "package_url": "https://pypi.org/project/django-analytics/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/django-analytics/", "project_urls": {"Download": "UNKNOWN", "Homepage": "https://github.com/praekelt/django-analytics"}, "release_url": "https://pypi.org/project/django-analytics/0.0.1/", "requires_dist": null, "requires_python": null, "summary": "Django app facilitating tracking of arbitrary simple metrics.", "version": "0.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>A basic Django app facilitating tracking of certain elementary metrics and statistics -\ngenerally just metrics which can be measured in terms of counts and cumulative counts.</p>\n<p>This app could be useful for keeping track of registrations, page impressions, sessions,\nand so on. By default, it allows for tracking of registrations. Adding more metrics\nis a relatively straightforward task, as explained further on.</p>\n<div id=\"contents\">\n<p>Contents</p>\n<ul>\n<li><a href=\"#quick-installation\" id=\"id1\" rel=\"nofollow\">Quick Installation</a></li>\n<li><a href=\"#creating-a-mod-analytics-script\" id=\"id2\" rel=\"nofollow\">Creating a mod_analytics Script</a></li>\n<li><a href=\"#geckoboard-integration-and-csv-dumps\" id=\"id3\" rel=\"nofollow\">Geckoboard Integration and CSV Dumps</a></li>\n<li><a href=\"#metrics-explained\" id=\"id4\" rel=\"nofollow\">Metrics Explained</a></li>\n<li><a href=\"#command-line-reference\" id=\"id5\" rel=\"nofollow\">Command Line Reference</a></li>\n<li><a href=\"#inner-workings\" id=\"id6\" rel=\"nofollow\">Inner Workings</a></li>\n<li><a href=\"#abstract-metrics\" id=\"id7\" rel=\"nofollow\">Abstract Metrics</a></li>\n<li><a href=\"#todo\" id=\"id8\" rel=\"nofollow\">Todo</a></li>\n<li><a href=\"#version-history\" id=\"id9\" rel=\"nofollow\">Version History</a></li>\n</ul>\n</div>\n<div id=\"quick-installation\">\n<h2><a href=\"#id1\" rel=\"nofollow\">Quick Installation</a></h2>\n<ol>\n<li>Save a copy of the <tt><span class=\"pre\">django-analytics</span></tt> app in your Python path.</li>\n<li>Add it to your <tt>INSTALLED_APPS</tt> list in your Django project settings.</li>\n<li>Create a <tt>mod_analytics.py</tt> file for each of your apps that require some sort\nof tracking. See the <a href=\"#creating-a-mod-analytics-script\" rel=\"nofollow\">Creating a mod_analytics Script</a> section below.</li>\n<li>Run the following from the command line in order to install the various metrics\nand automatically make them active:</li>\n</ol>\n<pre>&gt; python manage.py metrics --install\n</pre>\n<ol>\n<li>Run the following from the command line to update the daily, weekly and monthly\nstatistics for each of the active metrics:</li>\n</ol>\n<pre>&gt; python manage.py metrics --calculate=ALL\n</pre>\n<p>By default, <tt><span class=\"pre\">django-analytics</span></tt> comes with a <tt>registrations</tt> metric which counts\nthe number of users in the system based on their <tt>date_joined</tt> timestamp.</p>\n</div>\n<div id=\"creating-a-mod-analytics-script\">\n<h2><a href=\"#id2\" rel=\"nofollow\">Creating a mod_analytics Script</a></h2>\n<p>If, for example, you have an app called <tt>comments</tt> with the following <tt>models.py</tt> file:</p>\n<pre>from django.db import models\nfrom django.contrib.auth.models import User\n\nclass Comment(models.Model):\n    user = models.ForeignKey(User, related_name='comments')\n    timestamp = models.DateTimeField(auto_now_add=True)\n    comment = models.CharField(max_length=300)\n</pre>\n<p>and you would like to track the total number of comments, you could\ncreate a <tt>mod_analytics.py</tt> script (in the same directory as your app\u2019s models)\nlooking like the following:</p>\n<pre>from analytics.basemetric import BaseMetric\nfrom models import Comment\n\nclass TotalComments(BaseMetric):\n    uid   = \"totalcomments\"\n    title = \"Total comments\"\n\n    def calculate(self, start_datetime, end_datetime):\n        return Comment.objects.filter(timestamp__gte=start_datetime,\n            timestamp__lt=end_datetime).count()\n\n    def get_earliest_timestamp(self):\n        try:\n            return Comment.objects.all().order_by('timestamp')[0].timestamp\n        except IndexError:\n            return None\n</pre>\n</div>\n<div id=\"geckoboard-integration-and-csv-dumps\">\n<h2><a href=\"#id3\" rel=\"nofollow\">Geckoboard Integration and CSV Dumps</a></h2>\n<p>In order to allow for <a href=\"http://geckoboard.com\" rel=\"nofollow\">Geckoboard</a> integration to allow for\nvisualisation of your statistics, as well as simple CSV dumping of statistics,\nin your project\u2019s <tt>urls.py</tt>, add the following line:</p>\n<pre>urlpatterns = patterns('',\n    # ...\n\n    (r'^analytics/', include('analytics.urls')),\n\n    # ...\n)\n</pre>\n<p>Note that this project makes use of <tt><span class=\"pre\">django-geckoboard</span></tt> (<a href=\"http://pypi.python.org/pypi/django-geckoboard\" rel=\"nofollow\">http://pypi.python.org/pypi/django-geckoboard</a>),\nso all of the default <tt><span class=\"pre\">django-geckoboard</span></tt> settings apply.</p>\n<p><strong>Geckboard Charts</strong></p>\n<p>This will automatically add the following Geckoboard-related URLs to your project:</p>\n<dl>\n<dt><tt>analytics/geckoboard/numbers</tt></dt>\n<dd>A <a href=\"http://support.geckoboard.com/entries/231507-custom-widget-type-definitions\" rel=\"nofollow\">numbers widget</a>.\nSupported GET variable parameters: <tt>uid</tt>, <tt>daysback</tt>, <tt>cumulative</tt>, <tt>frequency</tt>.\n<tt>daysback</tt> default: 7.</dd>\n<dt><tt>analytics/geckoboard/rag</tt></dt>\n<dd>A <a href=\"http://support.geckoboard.com/entries/231507-custom-widget-type-definitions\" rel=\"nofollow\">RAG widget</a>.\nSupported GET variable parameters: <tt>uids</tt>, <tt>daysback</tt>, <tt>cumulative</tt>, <tt>frequency</tt>.</dd>\n<dt><tt>analytics/geckoboard/pie</tt></dt>\n<dd>A <a href=\"http://support.geckoboard.com/entries/274940-custom-chart-widget-type-definitions\" rel=\"nofollow\">pie chart widget</a>.\nSupported GET variable parameters: <tt>uids</tt>, <tt>daysback</tt>, <tt>cumulative</tt>, <tt>frequency</tt>.</dd>\n<dt><tt>analytics/geckoboard/line</tt></dt>\n<dd>A <a href=\"http://support.geckoboard.com/entries/274940-custom-chart-widget-type-definitions\" rel=\"nofollow\">line chart widget</a>.\nNote that this can only plot a single metric per chart.\nSupported GET variable parameters: <tt>uid</tt>, <tt>daysback</tt>, <tt>cumulative</tt>, <tt>frequency</tt>.\n<tt>daysback</tt> default: 7.</dd>\n<dt><tt>analytics/geckoboard/geckometer</tt></dt>\n<dd>A <a href=\"http://support.geckoboard.com/entries/274940-custom-chart-widget-type-definitions\" rel=\"nofollow\">geck-o-meter widget</a>.\nSupported GET variable parameters: <tt>uid</tt>, <tt>frequency</tt>, <tt>cumulative</tt>, <tt>min</tt>, <tt>max</tt>.</dd>\n<dt><tt>analytics/geckoboard/funnel</tt></dt>\n<dd>A <a href=\"http://support.geckoboard.com/entries/274940-custom-chart-widget-type-definitions\" rel=\"nofollow\">funnel chart widget</a>.\nSupported GET variable parameters: <tt>uids</tt>, <tt>frequency</tt>, <tt>cumulative</tt>, <tt>type</tt>,\n<tt>percentage</tt>, <tt>sort</tt>.</dd>\n</dl>\n<p><strong>Geckoboard GET Variable Parameters</strong></p>\n<table>\n<colgroup>\n<col>\n<col>\n</colgroup>\n<tbody>\n<tr><td><tt>uid</tt></td>\n<td>The UID of the metric to display, if a single metric is to be displayed.</td>\n</tr>\n<tr><td><tt>uids</tt></td>\n<td>The UIDs of the metrics to display, if multiple metrics are to be\ndisplayed.</td>\n</tr>\n<tr><td><tt>daysback</tt></td>\n<td>The numbers Geckoboard widget shows a single count, and the percentage\nchange from a previous count. This view returns the most recent count\nor cumulative count, as well as the count or cumulative count from\n<tt>days_back</tt> days ago.</td>\n</tr>\n<tr><td><tt>cumulative</tt></td>\n<td>A boolean value (either <tt>t</tt> or <tt>f</tt>) indicating whether the period\ncount is to be returned, or the cumulative count. Default: <tt>t</tt>.</td>\n</tr>\n<tr><td><tt>frequency</tt></td>\n<td>The frequency of the statistics to be returned. Can be <tt>d</tt>, <tt>w</tt> or\n<tt>m</tt> for daily, weekly or monthly, respectively. Default: <tt>d</tt>.</td>\n</tr>\n<tr><td><tt>min</tt></td>\n<td>The minimum value of a particular metric - usually for pie charts.\nDefault: 0.</td>\n</tr>\n<tr><td><tt>max</tt></td>\n<td>The maximum value of a particular metric - usually for pie charts.\nDefault: 100.</td>\n</tr>\n<tr><td><tt>type</tt></td>\n<td>Chart type - only applicable to the funnel chart. See the Geckoboard\nAPI for more details. Default: <tt>standard</tt>.</td>\n</tr>\n<tr><td><tt>percentage</tt></td>\n<td>Whether or not to show a percentage - only applicable to the funnel\nchart. See the Geckoboard API for more details. Default: <tt>show</tt>.</td>\n</tr>\n<tr><td><tt>sort</tt></td>\n<td>A boolean value (either <tt>t</tt> or <tt>f</tt>) indicating whether or not to\nsort the statistics - only applicable to the funnel chart. See the\nGeckoboard API for more details. Default: <tt>f</tt>.</td>\n</tr>\n</tbody>\n</table>\n<p><strong>CSV Dump</strong></p>\n<p>It will also add the following CSV-related URLs to your project:</p>\n<dl>\n<dt><tt><span class=\"pre\">analytics/csv/&lt;uid&gt;</span></tt></dt>\n<dd>A simple view requiring the UID of the metric as its parameter, returning\na CSV dump of all of the statistics for the given metric. By default, this returns\nthe <strong>daily</strong> statistics for the metric.</dd>\n</dl>\n<p><strong>CSV Dump GET Variable Parameters</strong></p>\n<table>\n<colgroup>\n<col>\n<col>\n</colgroup>\n<tbody>\n<tr><td><tt>frequency</tt></td>\n<td>The frequency of the statistics to be returned. Can be <tt>d</tt>, <tt>w</tt> or\n<tt>m</tt> for daily, weekly or monthly, respectively. Default: <tt>d</tt>.\nFor example, <tt><span class=\"pre\">analytics/csv/registrations?frequency=w</span></tt> will return all\nof the weekly registrations over all time as a CSV dump.</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div id=\"metrics-explained\">\n<h2><a href=\"#id4\" rel=\"nofollow\">Metrics Explained</a></h2>\n<p>The <tt><span class=\"pre\">django-analytics</span></tt> module creates <tt>Metric</tt> objects for each type of metric that\nneeds to be tracked, such as registrations, page impressions, etc. Each metric needs to\nhave a globally unique identifier (<strong>UID</strong>) so that it can be referenced from the command line\nby name, and a title to provide a little more of a description of what that metric\nis.</p>\n<p>Each metric has a number of <tt>Statistic</tt> objects associated with it, each <tt>Statistic</tt>\nonly being a simple combination of date/time, a count for that date/time, a cumulative\ncount, and frequency.</p>\n<p>The frequency can currently only be <strong>daily</strong>, <strong>weekly</strong> or\n<strong>monthly</strong>, and by default, each metric\u2019s statistics are calculated for all of those\nfrequencies (so a single metric can have multiple frequencies\u2019 statistics).</p>\n<p>In general, the cumulative count is automatically calculated for you, and is simply the\nprevious day\u2019s/week\u2019s/month\u2019s cumulative count, added to the current day\u2019s/week\u2019s/month\u2019s\ncount.</p>\n</div>\n<div id=\"command-line-reference\">\n<h2><a href=\"#id5\" rel=\"nofollow\">Command Line Reference</a></h2>\n<p>The following options are available from the command line for the <tt>metrics</tt> management\ncommand:</p>\n<table>\n<col>\n<col>\n<tbody>\n<tr><td>\n<kbd><span class=\"option\">-l</span>, <span class=\"option\">--list</span></kbd></td>\n<td>Lists all of the available metrics, along with some basic information about each.</td></tr>\n<tr><td>\n<kbd><span class=\"option\">-i</span>, <span class=\"option\">--install</span></kbd></td>\n<td>Scans the project for available metrics and creates or updates them where necessary.</td></tr>\n<tr><td>\n<kbd><span class=\"option\">-a</span>, <span class=\"option\">--activate</span></kbd></td>\n<td>Activates the metric with the specified UID, e.g. <tt><span class=\"pre\">--activate=registrations</span></tt>.\nIf you want to activate all metrics,\nsimply specify <tt><span class=\"pre\">--activate=ALL</span></tt> on the command line. Only active metrics will\nbe included in a <tt><span class=\"pre\">--calculate=ALL</span></tt> execution.</td></tr>\n<tr><td>\n<kbd><span class=\"option\">-d</span>, <span class=\"option\">--deactivate</span></kbd></td>\n</tr>\n<tr><td>\u00a0</td><td>Deactivates the metric with the specified UID. Again, you can specify\n<tt><span class=\"pre\">--deactivate=ALL</span></tt> to deactivate all metrics.</td></tr>\n<tr><td>\n<kbd><span class=\"option\">-c</span>, <span class=\"option\">--calculate</span></kbd></td>\n</tr>\n<tr><td>\u00a0</td><td>Calculates the specified metric, e.g. <tt><span class=\"pre\">--calculate=registrations</span></tt>. Can\nspecify <tt><span class=\"pre\">--calculate=ALL</span></tt> to calculate all active metrics.</td></tr>\n<tr><td>\n<kbd><span class=\"option\">-f</span>, <span class=\"option\">--frequency</span></kbd></td>\n</tr>\n<tr><td>\u00a0</td><td>If the <tt><span class=\"pre\">--calculate</span></tt> command is specified, this will allow one to force a particular\nfrequency\u2019s statistics to be calculated. Possible values are: <tt>d</tt> (daily), <tt>w</tt> (weekly),\n<tt>m</tt> (monthly) and <tt>a</tt> (all). Default is <em>all</em>.</td></tr>\n<tr><td>\n<kbd><span class=\"option\">--reset</span></kbd></td>\n<td>Deletes all of the <tt>Statistic</tt> objects associated with the specified metric.\nCan specify <tt><span class=\"pre\">--reset=ALL</span></tt> to delete all statistics for all metrics, regardless\nof whether they are active or not.</td></tr>\n<tr><td>\n<kbd><span class=\"option\">--drop-metric</span></kbd></td>\n<td>Deletes the actual <tt>Metric</tt> with the specified UID. Use <tt><span class=\"pre\">--drop-metric=ALL</span></tt>\nto drop all metrics (and their statistics) from the database.</td></tr>\n</tbody>\n</table>\n</div>\n<div id=\"inner-workings\">\n<h2><a href=\"#id6\" rel=\"nofollow\">Inner Workings</a></h2>\n<p>When running the <tt>manage.py metrics <span class=\"pre\">--install</span></tt> command, the following happens:</p>\n<ol>\n<li>The script searches through all the installed apps for your project and\nattempts to first find a <tt>mod_analytics</tt> module which it can import.</li>\n<li>It then searches through all of the classes in each <tt>mod_analytics</tt> module\nit encounters, and then attempts to find classes derived from the\n<tt>analytics.basemetric.BaseMetric</tt> class (an abstract class).</li>\n<li>For each valid class found which derives from the <tt>BaseMetric</tt> class, the script\nmakes sure it has two functions: <tt>calculate</tt>, and <tt>get_earliest_timestamp</tt>.\nIt also makes sure the class has two properties: <tt>uid</tt> and <tt>title</tt>.</li>\n<li>If the class has these two functions, the script creates a <tt>Metric</tt> instance\nwhose unique identifier and title are set to the <tt>uid</tt> and <tt>title</tt> values\nof the discovered class.</li>\n</ol>\n<p>The <tt>calculate</tt> function takes two parameters: <tt>start_datetime</tt> and <tt>end_datetime</tt>,\nand must simply return a count of the relevant metric between those two given dates. You can\nperform any calculations you need in this function to get to this final count value.</p>\n<p>To understand the reasoning here, the <tt>analytics</tt> app has three broad calculation time periods\nwhich it attempts to calculate: <strong>daily</strong>, <strong>weekly</strong> and <strong>monthly</strong>. For a daily calculation,\nfor example, the <tt>start_datetime</tt> parameter supplied will resemble something like\n<tt>datetime(2011, 5, 1)</tt> and the <tt>end_datetime</tt> parameter will resemble something like\n<tt>datetime(2011, 5, 2)</tt>. The <tt>calculate</tt> function must then return a count of the relevant\nmetric for the time period starting at 2011/05/01 00:00 and ending at 2011/05/02 00:00.\n<strong>NOTE</strong>: You should always return counts starting at exactly the given <tt>start_datetime</tt>\nvalue (i.e. greater-than-equal-to), but <em>just before</em> the <tt>end_datetime</tt> value (i.e.\nless-than).</p>\n<p>The <tt>get_earliest_timestamp</tt> function must simply return a <tt>datetime.datetime</tt> object\nindicating the earliest data\u2019s associated date/time, so that the analytics calculation routine\nknows the date at which to start calculating. If there are no entries yet, this function must\nreturn <tt>None</tt>.</p>\n</div>\n<div id=\"abstract-metrics\">\n<h2><a href=\"#id7\" rel=\"nofollow\">Abstract Metrics</a></h2>\n<p>If you want to create abstract metrics, simply create a separate Python file somewhere\nwhich will contain your \u201cabstract\u201d metrics. For example, create an <tt>abstract_metrics.py</tt>\nfile which looks as follows:</p>\n<pre>from analytics import BaseMetric\nfrom django.contrib.auth.models import User\n\nclass UserBaseMetric(BaseMetric):\n    def calculate(self, start_datetime, end_datetime):\n        return User.objects.filter(date_joined__gte=start_datetime,\n            date_joined__lt=end_datetime).count()\n\n    def get_earliest_timestamp(self):\n        try:\n            return User.objects.all().order_by('date_joined')[0].date_joined\n        except IndexError:\n            return None\n</pre>\n<p>Then, in your <tt>mod_analytics.py</tt> file, just import your <tt>abstract_metrics</tt> module.\n<strong>Note</strong>: Do not import the <tt>UserBaseMetric</tt>, just import the <tt>abstract_metrics</tt> module,\nas follows:</p>\n<pre>from analytics import BaseMetric\nimport myapp.abstract_metrics\n\nclass UserMetric(abstract_metrics.UserBaseMetric):\n    uid   = \"users\"\n    title = \"Users\"\n</pre>\n</div>\n<div id=\"todo\">\n<h2><a href=\"#id8\" rel=\"nofollow\">Todo</a></h2>\n<p>The following features are planned for future versions of <tt><span class=\"pre\">django-analytics</span></tt>:</p>\n<ol>\n<li>Custom visualisation integrated into Django admin back-end.</li>\n<li>Hourly statistics.</li>\n<li>More complex statistics, such as frequency plots/histograms.</li>\n</ol>\n</div>\n<div id=\"version-history\">\n<h2><a href=\"#id9\" rel=\"nofollow\">Version History</a></h2>\n<table>\n<colgroup>\n<col>\n<col>\n</colgroup>\n<thead>\n<tr><th>Version</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr><td>0.0.1</td>\n<td>First version</td>\n</tr>\n</tbody>\n</table>\n</div>\n\n          </div>"}, "last_serial": 789087, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "8c750edb86b0a7bf5d87cf1ebd3bf91d", "sha256": "62e08ecab07d33c4fbc15d69a588f7d525dfce743283b1e61ddf8b514842f6af"}, "downloads": -1, "filename": "django_analytics-0.0.1-py2.7.egg", "has_sig": false, "md5_digest": "8c750edb86b0a7bf5d87cf1ebd3bf91d", "packagetype": "bdist_egg", "python_version": "2.7", "requires_python": null, "size": 34622, "upload_time": "2011-07-25T14:26:22", "upload_time_iso_8601": "2011-07-25T14:26:22.208479Z", "url": "https://files.pythonhosted.org/packages/4b/40/a2d745752639d140c04a9526526ca5f63e062be9690f0c310c94d992a456/django_analytics-0.0.1-py2.7.egg", "yanked": false}, {"comment_text": "", "digests": {"md5": "8f4654b7add1f480e34b164ac15afa25", "sha256": "e2aa62c0a8671dc8559d11d56cd526f97b5566fbe41b4f1327adae947d8412e6"}, "downloads": -1, "filename": "django-analytics-0.0.1.tar.gz", "has_sig": false, "md5_digest": "8f4654b7add1f480e34b164ac15afa25", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 15475, "upload_time": "2011-07-25T14:26:17", "upload_time_iso_8601": "2011-07-25T14:26:17.740384Z", "url": "https://files.pythonhosted.org/packages/13/20/5514586a8dbecc3eeb08b99132c293fabb034a954c3048817befe7adc753/django-analytics-0.0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "8c750edb86b0a7bf5d87cf1ebd3bf91d", "sha256": "62e08ecab07d33c4fbc15d69a588f7d525dfce743283b1e61ddf8b514842f6af"}, "downloads": -1, "filename": "django_analytics-0.0.1-py2.7.egg", "has_sig": false, "md5_digest": "8c750edb86b0a7bf5d87cf1ebd3bf91d", "packagetype": "bdist_egg", "python_version": "2.7", "requires_python": null, "size": 34622, "upload_time": "2011-07-25T14:26:22", "upload_time_iso_8601": "2011-07-25T14:26:22.208479Z", "url": "https://files.pythonhosted.org/packages/4b/40/a2d745752639d140c04a9526526ca5f63e062be9690f0c310c94d992a456/django_analytics-0.0.1-py2.7.egg", "yanked": false}, {"comment_text": "", "digests": {"md5": "8f4654b7add1f480e34b164ac15afa25", "sha256": "e2aa62c0a8671dc8559d11d56cd526f97b5566fbe41b4f1327adae947d8412e6"}, "downloads": -1, "filename": "django-analytics-0.0.1.tar.gz", "has_sig": false, "md5_digest": "8f4654b7add1f480e34b164ac15afa25", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 15475, "upload_time": "2011-07-25T14:26:17", "upload_time_iso_8601": "2011-07-25T14:26:17.740384Z", "url": "https://files.pythonhosted.org/packages/13/20/5514586a8dbecc3eeb08b99132c293fabb034a954c3048817befe7adc753/django-analytics-0.0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:37:41 2020"}