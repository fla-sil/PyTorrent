{"info": {"author": "4teamwork AG", "author_email": "mailto:info@4teamwork.ch", "bugtrack_url": null, "classifiers": ["Environment :: Web Environment", "Framework :: Plone", "Framework :: Plone :: 4.3", "Intended Audience :: Developers", "License :: OSI Approved :: GNU General Public License (GPL)", "Programming Language :: Python", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "ftw.structlog\n=============\n\nThis package implements **structured request logging in Plone**.\n\nIt does so by writing logfiles (one per instance) that contain one JSON entry\nper line for every request. That JSON entry contains all the information the\nZ2 log provides, and more, in structured key/value pairs.\n\n\nInstallation\n------------\n\n- Install ``ftw.structlog`` by adding it to the list of eggs in your buildout.\n  Then run buildout and restart your instance:\n\n.. code:: ini\n\n    [instance]\n    eggs +=\n        ftw.structlog\n\n- Alternatively, add it as a dependency to your package's ``setup.py``.\n\n\nLogged Information\n------------------\n\nExample entry:\n\n.. code:: json\n\n    {\n      \"bytes\": 6875,\n      \"cient_ip\": \"127.0.0.1\",\n      \"duration\": 0.30268411636353,\n      \"host\": \"127.0.0.1\",\n      \"method\": \"GET\",\n      \"referer\": \"http:\\/\\/localhost:8080\\/plone\",\n      \"site\": \"plone\",\n      \"status\": 200,\n      \"timestamp\": \"2017-07-29T12:30:58.000750+02:00\",\n      \"url\": \"http:\\/\\/localhost:8080\\/plone\\/my-page\",\n      \"user\": \"john.doe\",\n      \"user_agent\": \"Mozilla\\/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit\\/537.36 (KHTML, like Gecko) Chrome\\/60.0.3112.113 Safari\\/537.36\"\n    }\n\n\nThe logged JSON entry contains the following data:\n\n+------------+---------------------------------------------------------------+\n| key        | value                                                         |\n+============+===============================================================+\n| bytes      | Size of response body in bytes (``Content-Length``)           |\n+------------+---------------------------------------------------------------+\n| client_ip  | Host where the request originated from (respecting            |\n|            | X-Forwarded-For)                                              |\n+------------+---------------------------------------------------------------+\n| duration   | Time spent in ZPublisher to handle request (time between      |\n|            | ``IPubStart`` and ``IPubSuccess`` / ``IPubFailure`` )         |\n+------------+---------------------------------------------------------------+\n| host       | Deprecated. You should use ``client_ip`` instead.             |\n+------------+---------------------------------------------------------------+\n| method     | HTTP request method                                           |\n+------------+---------------------------------------------------------------+\n| referer    | Referer                                                       |\n+------------+---------------------------------------------------------------+\n| site       | Plone site ID                                                 |\n+------------+---------------------------------------------------------------+\n| status     | HTTP response status                                          |\n+------------+---------------------------------------------------------------+\n| timestamp  | Time when request was received (non-naive local time in ISO   |\n|            | 8601, in the server's local timezone as determined by         |\n|            | ``tzlocal``)                                                  |\n+------------+---------------------------------------------------------------+\n| url        | URL of the request (including query string if present)        |\n+------------+---------------------------------------------------------------+\n| user       | Username of the authenticated user, ``\"Anonymous\"`` otherwise |\n+------------+---------------------------------------------------------------+\n| user_agent | User-Agent                                                    |\n+------------+---------------------------------------------------------------+\n\n\nLogfile Location\n----------------\n\nOne logfile per Zope2 instance will be created, and its location and name\nwill be derived from the instance's eventlog path. If the instance's eventlog\npath is ``var/log/instance2.log``, the JSON logfile's path will be\n``var/log/instance2-json.log``.\n\n**Note**: Because ``ftw.structlog`` derives its logfile name from the\neventlog path, an eventlog *must* be configured in ``zope.conf``, otherwise\n``ftw.structlog`` will not log any requests and complain noisily through\nthe root logger.\n\nWhen running tests in other projects, these errors can be muted by setting the\nenvironment variable ``FTW_STRUCTLOG_MUTE_SETUP_ERRORS=true``.\n\nLinks\n-----\n\n- Github: https://github.com/4teamwork/ftw.structlog\n- Issues: https://github.com/4teamwork/ftw.structlog/issues\n- Pypi: http://pypi.python.org/pypi/ftw.structlog\n- Continuous integration: https://jenkins.4teamwork.ch/search?q=ftw.structlog\n\n\nCopyright\n---------\n\nThis package is copyright by `4teamwork <http://www.4teamwork.ch/>`_.\n\n``ftw.structlog`` is licensed under GNU General Public License, version 2.\n\nChangelog\n=========\n\n\n1.1.0 (2019-01-11)\n------------------\n\n- DEPRECATED: The ``host`` field is deprecated. Instead, the newly introduced\n  ``client_ip`` field should be used to get the client's IP address.\n  [lgraf]\n\n- Always log missing referer as empty string instead of ``null``.\n  [lgraf]\n\n\n1.0.1 (2017-09-03)\n------------------\n\n- Fail gracefully if eventlog config can't be found in order to derive\n  log location from it. Instead of preventing instance startup, log a\n  noticeable error message using the root logger.\n  [lgraf]\n\n\n1.0.0 (2017-09-03)\n------------------\n\n- Initial implementation\n  [lgraf]", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/4teamwork/ftw.structlog", "keywords": "structured logging plone", "license": "GPL2", "maintainer": "", "maintainer_email": "", "name": "ftw.structlog", "package_url": "https://pypi.org/project/ftw.structlog/", "platform": "", "project_url": "https://pypi.org/project/ftw.structlog/", "project_urls": {"Homepage": "https://github.com/4teamwork/ftw.structlog"}, "release_url": "https://pypi.org/project/ftw.structlog/1.1.0/", "requires_dist": null, "requires_python": "", "summary": "Structured logging for Plone", "version": "1.1.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"ftw-structlog\">\n<h2>ftw.structlog</h2>\n<p>This package implements <strong>structured request logging in Plone</strong>.</p>\n<p>It does so by writing logfiles (one per instance) that contain one JSON entry\nper line for every request. That JSON entry contains all the information the\nZ2 log provides, and more, in structured key/value pairs.</p>\n<div id=\"installation\">\n<h3>Installation</h3>\n<ul>\n<li>Install <tt>ftw.structlog</tt> by adding it to the list of eggs in your buildout.\nThen run buildout and restart your instance:</li>\n</ul>\n<pre><span class=\"k\">[instance]</span>\n<span class=\"na\">eggs +</span><span class=\"o\">=</span><span class=\"s\">\n    ftw.structlog</span>\n</pre>\n<ul>\n<li>Alternatively, add it as a dependency to your package\u2019s <tt>setup.py</tt>.</li>\n</ul>\n</div>\n<div id=\"logged-information\">\n<h3>Logged Information</h3>\n<p>Example entry:</p>\n<pre><span class=\"p\">{</span>\n  <span class=\"nt\">\"bytes\"</span><span class=\"p\">:</span> <span class=\"mi\">6875</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"cient_ip\"</span><span class=\"p\">:</span> <span class=\"s2\">\"127.0.0.1\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"duration\"</span><span class=\"p\">:</span> <span class=\"mf\">0.30268411636353</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"host\"</span><span class=\"p\">:</span> <span class=\"s2\">\"127.0.0.1\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"method\"</span><span class=\"p\">:</span> <span class=\"s2\">\"GET\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"referer\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http:\\/\\/localhost:8080\\/plone\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"site\"</span><span class=\"p\">:</span> <span class=\"s2\">\"plone\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"status\"</span><span class=\"p\">:</span> <span class=\"mi\">200</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"timestamp\"</span><span class=\"p\">:</span> <span class=\"s2\">\"2017-07-29T12:30:58.000750+02:00\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"url\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http:\\/\\/localhost:8080\\/plone\\/my-page\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"user\"</span><span class=\"p\">:</span> <span class=\"s2\">\"john.doe\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"user_agent\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Mozilla\\/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit\\/537.36 (KHTML, like Gecko) Chrome\\/60.0.3112.113 Safari\\/537.36\"</span>\n<span class=\"p\">}</span>\n</pre>\n<p>The logged JSON entry contains the following data:</p>\n<table>\n<colgroup>\n<col>\n<col>\n</colgroup>\n<thead>\n<tr><th>key</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr><td>bytes</td>\n<td>Size of response body in bytes (<tt><span class=\"pre\">Content-Length</span></tt>)</td>\n</tr>\n<tr><td>client_ip</td>\n<td>Host where the request originated from (respecting\nX-Forwarded-For)</td>\n</tr>\n<tr><td>duration</td>\n<td>Time spent in ZPublisher to handle request (time between\n<tt>IPubStart</tt> and <tt>IPubSuccess</tt> / <tt>IPubFailure</tt> )</td>\n</tr>\n<tr><td>host</td>\n<td>Deprecated. You should use <tt>client_ip</tt> instead.</td>\n</tr>\n<tr><td>method</td>\n<td>HTTP request method</td>\n</tr>\n<tr><td>referer</td>\n<td>Referer</td>\n</tr>\n<tr><td>site</td>\n<td>Plone site ID</td>\n</tr>\n<tr><td>status</td>\n<td>HTTP response status</td>\n</tr>\n<tr><td>timestamp</td>\n<td>Time when request was received (non-naive local time in ISO\n8601, in the server\u2019s local timezone as determined by\n<tt>tzlocal</tt>)</td>\n</tr>\n<tr><td>url</td>\n<td>URL of the request (including query string if present)</td>\n</tr>\n<tr><td>user</td>\n<td>Username of the authenticated user, <tt>\"Anonymous\"</tt> otherwise</td>\n</tr>\n<tr><td>user_agent</td>\n<td>User-Agent</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div id=\"logfile-location\">\n<h3>Logfile Location</h3>\n<p>One logfile per Zope2 instance will be created, and its location and name\nwill be derived from the instance\u2019s eventlog path. If the instance\u2019s eventlog\npath is <tt>var/log/instance2.log</tt>, the JSON logfile\u2019s path will be\n<tt><span class=\"pre\">var/log/instance2-json.log</span></tt>.</p>\n<p><strong>Note</strong>: Because <tt>ftw.structlog</tt> derives its logfile name from the\neventlog path, an eventlog <em>must</em> be configured in <tt>zope.conf</tt>, otherwise\n<tt>ftw.structlog</tt> will not log any requests and complain noisily through\nthe root logger.</p>\n<p>When running tests in other projects, these errors can be muted by setting the\nenvironment variable <tt>FTW_STRUCTLOG_MUTE_SETUP_ERRORS=true</tt>.</p>\n</div>\n<div id=\"links\">\n<h3>Links</h3>\n<ul>\n<li>Github: <a href=\"https://github.com/4teamwork/ftw.structlog\" rel=\"nofollow\">https://github.com/4teamwork/ftw.structlog</a></li>\n<li>Issues: <a href=\"https://github.com/4teamwork/ftw.structlog/issues\" rel=\"nofollow\">https://github.com/4teamwork/ftw.structlog/issues</a></li>\n<li>Pypi: <a href=\"http://pypi.python.org/pypi/ftw.structlog\" rel=\"nofollow\">http://pypi.python.org/pypi/ftw.structlog</a></li>\n<li>Continuous integration: <a href=\"https://jenkins.4teamwork.ch/search?q=ftw.structlog\" rel=\"nofollow\">https://jenkins.4teamwork.ch/search?q=ftw.structlog</a></li>\n</ul>\n</div>\n<div id=\"copyright\">\n<h3>Copyright</h3>\n<p>This package is copyright by <a href=\"http://www.4teamwork.ch/\" rel=\"nofollow\">4teamwork</a>.</p>\n<p><tt>ftw.structlog</tt> is licensed under GNU General Public License, version 2.</p>\n</div>\n</div>\n<div id=\"changelog\">\n<h2>Changelog</h2>\n<div id=\"id1\">\n<h3>1.1.0 (2019-01-11)</h3>\n<ul>\n<li>DEPRECATED: The <tt>host</tt> field is deprecated. Instead, the newly introduced\n<tt>client_ip</tt> field should be used to get the client\u2019s IP address.\n[lgraf]</li>\n<li>Always log missing referer as empty string instead of <tt>null</tt>.\n[lgraf]</li>\n</ul>\n</div>\n<div id=\"id2\">\n<h3>1.0.1 (2017-09-03)</h3>\n<ul>\n<li>Fail gracefully if eventlog config can\u2019t be found in order to derive\nlog location from it. Instead of preventing instance startup, log a\nnoticeable error message using the root logger.\n[lgraf]</li>\n</ul>\n</div>\n<div id=\"id3\">\n<h3>1.0.0 (2017-09-03)</h3>\n<ul>\n<li>Initial implementation\n[lgraf]</li>\n</ul>\n</div>\n</div>\n\n          </div>"}, "last_serial": 6569422, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "714e2dedb1e7a9c9919f00ee06168c54", "sha256": "3501ed4cd18881cf76b449996a3b4be69a2ff8c958a0628befe19b88612565b4"}, "downloads": -1, "filename": "ftw.structlog-1.0.0.tar.gz", "has_sig": false, "md5_digest": "714e2dedb1e7a9c9919f00ee06168c54", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16639, "upload_time": "2017-09-03T20:15:22", "upload_time_iso_8601": "2017-09-03T20:15:22.914722Z", "url": "https://files.pythonhosted.org/packages/b4/e8/a9e1e643452dc323946deff42d919f87ff4cf38762387032c8c10e5d1a93/ftw.structlog-1.0.0.tar.gz", "yanked": false}], "1.0.1": [{"comment_text": "", "digests": {"md5": "f7ffd6a4034fbd57830b1d505871faac", "sha256": "09806e3b08e428ce27d92d36d25ea50b37e92e684a6c2e0fa51b5f4f7c5ce330"}, "downloads": -1, "filename": "ftw.structlog-1.0.1.tar.gz", "has_sig": false, "md5_digest": "f7ffd6a4034fbd57830b1d505871faac", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 16978, "upload_time": "2017-09-03T21:17:57", "upload_time_iso_8601": "2017-09-03T21:17:57.818694Z", "url": "https://files.pythonhosted.org/packages/6c/85/e628a7326cad820291a236ec7e8a42dd0a917db5c2aefe1c74f56b0439ec/ftw.structlog-1.0.1.tar.gz", "yanked": false}], "1.1.0": [{"comment_text": "", "digests": {"md5": "f5d5e0a44674d04ef5106fcb039de0aa", "sha256": "48a83fd30179599ab10bfbd46854a8018c9404cf3a1601399e2270a1b214f16b"}, "downloads": -1, "filename": "ftw.structlog-1.1.0.tar.gz", "has_sig": false, "md5_digest": "f5d5e0a44674d04ef5106fcb039de0aa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 19822, "upload_time": "2019-01-11T10:03:08", "upload_time_iso_8601": "2019-01-11T10:03:08.117398Z", "url": "https://files.pythonhosted.org/packages/78/13/cc4c2e0e30287dfd43ccd97a8bd1e5a9ad093c7af89a2d7bfab67dd28ec1/ftw.structlog-1.1.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "f5d5e0a44674d04ef5106fcb039de0aa", "sha256": "48a83fd30179599ab10bfbd46854a8018c9404cf3a1601399e2270a1b214f16b"}, "downloads": -1, "filename": "ftw.structlog-1.1.0.tar.gz", "has_sig": false, "md5_digest": "f5d5e0a44674d04ef5106fcb039de0aa", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 19822, "upload_time": "2019-01-11T10:03:08", "upload_time_iso_8601": "2019-01-11T10:03:08.117398Z", "url": "https://files.pythonhosted.org/packages/78/13/cc4c2e0e30287dfd43ccd97a8bd1e5a9ad093c7af89a2d7bfab67dd28ec1/ftw.structlog-1.1.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:59:51 2020"}