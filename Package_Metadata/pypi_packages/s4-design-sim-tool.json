{"info": {"author": "Andrea Zonca", "author_email": "code@andreazonca.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: Apache Software License", "Natural Language :: English", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# CMB-S4 design simulation tool\n> Generate CMB-S4 simulated maps of foregrounds/atmosphere and noise based on the configuration of the experiment\n\n\n[![PyPI badge](https://img.shields.io/pypi/v/s4_design_sim_tool)](https://pypi.org/project/s4-design-sim-tool)\n\n`s4_design_sim_tool` is a library, a command-line tool and a web interface to properly combine and weight pre-executed maps from time-domain and map-domain simulation based on input parameters and the instrument configuration (e.g. location of telescopes, distribution in frequency of the tubes).\n\nThe software is available in the [CMB-S4/s4_design_sim_tool](https://github.com/CMB-S4/s4_design_sim_tool) repository on Github, and can be installed locally with PyPI, it currently needs to run at NERSC to access the input maps:\n\n    pip install s4_design_sim_tool\n\nthe web interface is temporarily available at: \n\n* <http://132-249-238-90.compute.cloud.sdsc.edu/>\n\n## Configuration options\n\nThe simulation configuration is defined by a TOML text file,\nsee for example the TOML configuration for the CMB-S4 reference design: [s4_reference_design.toml](https://github.com/CMB-S4/s4_design_sim_tool/blob/master/s4_reference_design.toml)\n\n### Sky emission\n\nThe first section of the configuration files defines which input components should be considered,\nit is possible to choose a weight between 0 and 1 for all components, for example we can simulate residual foregrounds after cleaning or partial de-lensing, and we can choose the tensor-to-scalar ratio `r`.\n\nInput maps are already top-hat bandpass integrated, beam-smoothed, and ran through a filter-and-bin mapmaking algorithm in time-domain, they are combined based on the configuration file and are not influenced by the experiment configuration.\nFor more details, see the [input maps section below](#Input-maps) and the [Jupyter notebook with the implementation](/s4_design_sim_tool/foregrounds).\n\n### Experiment\n\nThe second section defines the design of the instrument, it is possible to customize the number and location of SAT and LAT telescope and for each of them modify what tube are mounting, keeping the constraint of 3 tubes for SAT and 19 for LAT.\n\nScaling of atmospheric and instrument noise is performed with these assumption:\n\n* scale the 10-day simulations to 1 year considering the observing efficiency\n* for Pole also consider the additional efficiency factor\n* scale by the detector-years for noise and telescope-years for atmosphere\n\nTherefore 2 tubes on the same telescope have the same atmospheric noise of 1 tube, to reduce noise from the atmosphere we need to distribute tubes across multiple telescopes.\nFor instrument noise instead, it doesn't matter their distribution across telescopes, just their number.\n\nFor more details, see the [input maps section below](#Noise-maps) and the Jupyter notebooks with the implementation for the [atmosphere](/s4_design_sim_tool/atmosphere) and [noise](/s4_design_sim_tool/noise).\n\n#### Splits\n\nThe tool supports loading up to 8 splits, which are suitable to simulate 1 full mission map and 7 yearly maps (or 7 interleaved splits).\nIn this case, the tool will generate first a full mission map and then the number of splits requested, loading different realizations of atmosphere and noise and weighting them properly.\n\n## Input maps\n\n### Sky signal\n\n* Full-sky Nside 4096 (LAT) and Nside 512 (SAT)\n* Galactic, extragalactic and CMB\n* Bandpass integrated with tophat bandpasses from `s4sim`\n* Smoothed with gaussian beams\n\nSee the [202002_foregrounds_extragalactic_cmb_tophat](https://github.com/CMB-S4/s4mapbasedsims/tree/master/202002_foregrounds_extragalactic_cmb_tophat) map based simulations.\n\nThen the maps were used as inputs for a time-domain simulation with TOAST to simulate the effect\nof a filter-and-bin mapmaking with the CMB-S4 scanning strategy both for Pole and Chile.\n\n### Noise maps\n\nNoise was simulated for one tube in each telescope.  We observed according to a 10-day schedule without Sun or Moon avoidance. For Chile, the schedules already emulate the maximum observing efficiency.  For simplicity, the Pole schedules only    include one full scan of the respective patch per day.  As a result, the Pole observing efficiencies are 46.29% (SAT) and 37.23% (LAT). These efficiencies must be accounted for by downweighting the Pole noise and atmospheric maps with their      scheduled efficiences.\n\nThese factors should be corrected for the *noise and atmosphere* maps: `map_out = map_in * sqrt(efficiency)`.\n\nAlso for expedience, we downsampled the densest focal planes to reduce the overall detector counts:\n```\ntelescope  band   thinfp\nLAT        HFL      8\nLAT        MFL      8\nLAT        LFL      1\nLAT        ULFL     1\nSAT        HFS      8\nSAT        MFHS     4\nSAT        MFLS     4\nSAT        LFS      1\n```\nThese factors should be corrected for in the *noise* maps but not in the atmospheric maps: `map_out = map_in / sqrt(thinfp)`. \n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/cmb-s4/s4_design_sim_tool", "keywords": "cosmology", "license": "Apache Software License 2.0", "maintainer": "", "maintainer_email": "", "name": "s4-design-sim-tool", "package_url": "https://pypi.org/project/s4-design-sim-tool/", "platform": "", "project_url": "https://pypi.org/project/s4-design-sim-tool/", "project_urls": {"Homepage": "https://github.com/cmb-s4/s4_design_sim_tool"}, "release_url": "https://pypi.org/project/s4-design-sim-tool/1.0.2/", "requires_dist": ["healpy", "numpy", "toml"], "requires_python": ">=3.6", "summary": "CMB-S4 Design Simulation Tool", "version": "1.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>CMB-S4 design simulation tool</h1>\n<blockquote>\n<p>Generate CMB-S4 simulated maps of foregrounds/atmosphere and noise based on the configuration of the experiment</p>\n</blockquote>\n<p><a href=\"https://pypi.org/project/s4-design-sim-tool\" rel=\"nofollow\"><img alt=\"PyPI badge\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/8909a289ff373d5b8f0231390a27dcc39a422ef1/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f73345f64657369676e5f73696d5f746f6f6c\"></a></p>\n<p><code>s4_design_sim_tool</code> is a library, a command-line tool and a web interface to properly combine and weight pre-executed maps from time-domain and map-domain simulation based on input parameters and the instrument configuration (e.g. location of telescopes, distribution in frequency of the tubes).</p>\n<p>The software is available in the <a href=\"https://github.com/CMB-S4/s4_design_sim_tool\" rel=\"nofollow\">CMB-S4/s4_design_sim_tool</a> repository on Github, and can be installed locally with PyPI, it currently needs to run at NERSC to access the input maps:</p>\n<pre><code>pip install s4_design_sim_tool\n</code></pre>\n<p>the web interface is temporarily available at:</p>\n<ul>\n<li><a href=\"http://132-249-238-90.compute.cloud.sdsc.edu/\" rel=\"nofollow\">http://132-249-238-90.compute.cloud.sdsc.edu/</a></li>\n</ul>\n<h2>Configuration options</h2>\n<p>The simulation configuration is defined by a TOML text file,\nsee for example the TOML configuration for the CMB-S4 reference design: <a href=\"https://github.com/CMB-S4/s4_design_sim_tool/blob/master/s4_reference_design.toml\" rel=\"nofollow\">s4_reference_design.toml</a></p>\n<h3>Sky emission</h3>\n<p>The first section of the configuration files defines which input components should be considered,\nit is possible to choose a weight between 0 and 1 for all components, for example we can simulate residual foregrounds after cleaning or partial de-lensing, and we can choose the tensor-to-scalar ratio <code>r</code>.</p>\n<p>Input maps are already top-hat bandpass integrated, beam-smoothed, and ran through a filter-and-bin mapmaking algorithm in time-domain, they are combined based on the configuration file and are not influenced by the experiment configuration.\nFor more details, see the <a href=\"#Input-maps\" rel=\"nofollow\">input maps section below</a> and the <a href=\"/s4_design_sim_tool/foregrounds\" rel=\"nofollow\">Jupyter notebook with the implementation</a>.</p>\n<h3>Experiment</h3>\n<p>The second section defines the design of the instrument, it is possible to customize the number and location of SAT and LAT telescope and for each of them modify what tube are mounting, keeping the constraint of 3 tubes for SAT and 19 for LAT.</p>\n<p>Scaling of atmospheric and instrument noise is performed with these assumption:</p>\n<ul>\n<li>scale the 10-day simulations to 1 year considering the observing efficiency</li>\n<li>for Pole also consider the additional efficiency factor</li>\n<li>scale by the detector-years for noise and telescope-years for atmosphere</li>\n</ul>\n<p>Therefore 2 tubes on the same telescope have the same atmospheric noise of 1 tube, to reduce noise from the atmosphere we need to distribute tubes across multiple telescopes.\nFor instrument noise instead, it doesn't matter their distribution across telescopes, just their number.</p>\n<p>For more details, see the <a href=\"#Noise-maps\" rel=\"nofollow\">input maps section below</a> and the Jupyter notebooks with the implementation for the <a href=\"/s4_design_sim_tool/atmosphere\" rel=\"nofollow\">atmosphere</a> and <a href=\"/s4_design_sim_tool/noise\" rel=\"nofollow\">noise</a>.</p>\n<h4>Splits</h4>\n<p>The tool supports loading up to 8 splits, which are suitable to simulate 1 full mission map and 7 yearly maps (or 7 interleaved splits).\nIn this case, the tool will generate first a full mission map and then the number of splits requested, loading different realizations of atmosphere and noise and weighting them properly.</p>\n<h2>Input maps</h2>\n<h3>Sky signal</h3>\n<ul>\n<li>Full-sky Nside 4096 (LAT) and Nside 512 (SAT)</li>\n<li>Galactic, extragalactic and CMB</li>\n<li>Bandpass integrated with tophat bandpasses from <code>s4sim</code></li>\n<li>Smoothed with gaussian beams</li>\n</ul>\n<p>See the <a href=\"https://github.com/CMB-S4/s4mapbasedsims/tree/master/202002_foregrounds_extragalactic_cmb_tophat\" rel=\"nofollow\">202002_foregrounds_extragalactic_cmb_tophat</a> map based simulations.</p>\n<p>Then the maps were used as inputs for a time-domain simulation with TOAST to simulate the effect\nof a filter-and-bin mapmaking with the CMB-S4 scanning strategy both for Pole and Chile.</p>\n<h3>Noise maps</h3>\n<p>Noise was simulated for one tube in each telescope.  We observed according to a 10-day schedule without Sun or Moon avoidance. For Chile, the schedules already emulate the maximum observing efficiency.  For simplicity, the Pole schedules only    include one full scan of the respective patch per day.  As a result, the Pole observing efficiencies are 46.29% (SAT) and 37.23% (LAT). These efficiencies must be accounted for by downweighting the Pole noise and atmospheric maps with their      scheduled efficiences.</p>\n<p>These factors should be corrected for the <em>noise and atmosphere</em> maps: <code>map_out = map_in * sqrt(efficiency)</code>.</p>\n<p>Also for expedience, we downsampled the densest focal planes to reduce the overall detector counts:</p>\n<pre><code>telescope  band   thinfp\nLAT        HFL      8\nLAT        MFL      8\nLAT        LFL      1\nLAT        ULFL     1\nSAT        HFS      8\nSAT        MFHS     4\nSAT        MFLS     4\nSAT        LFS      1\n</code></pre>\n<p>These factors should be corrected for in the <em>noise</em> maps but not in the atmospheric maps: <code>map_out = map_in / sqrt(thinfp)</code>.</p>\n\n          </div>"}, "last_serial": 7121992, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "e16c490ef7a725e7a754588f50d962a4", "sha256": "5d865844d3a802cf0a436569b282969d5165efa2711e16870f10a84fb13e4987"}, "downloads": -1, "filename": "s4_design_sim_tool-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "e16c490ef7a725e7a754588f50d962a4", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 15003, "upload_time": "2020-03-29T23:41:10", "upload_time_iso_8601": "2020-03-29T23:41:10.134433Z", "url": "https://files.pythonhosted.org/packages/ed/5f/be07abfab6436db4680864eeb689b9801d76df5326fb04d4ce32baabf16e/s4_design_sim_tool-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "13e8fbdad24785d92dc4b27966fde3a7", "sha256": "fceb7a87fcf650d24b54d9b0c7f303efa2620eb400273509fd010149d3760d02"}, "downloads": -1, "filename": "s4_design_sim_tool-1.0.0.tar.gz", "has_sig": false, "md5_digest": "13e8fbdad24785d92dc4b27966fde3a7", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 15312, "upload_time": "2020-03-29T23:41:12", "upload_time_iso_8601": "2020-03-29T23:41:12.156569Z", "url": "https://files.pythonhosted.org/packages/22/8f/6df545de5851f9189a2130b0c70c0713d428700d6c5dad9e791f1c720ead/s4_design_sim_tool-1.0.0.tar.gz", "yanked": false}], "1.0.2": [{"comment_text": "", "digests": {"md5": "411c4a25a8f42536f24d1706758744bf", "sha256": "b3591cbd7a1af3f83cc9e922661548cb25e54e0fe94ace5b1947b7d90c0f59be"}, "downloads": -1, "filename": "s4_design_sim_tool-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "411c4a25a8f42536f24d1706758744bf", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 15335, "upload_time": "2020-04-28T17:56:10", "upload_time_iso_8601": "2020-04-28T17:56:10.825838Z", "url": "https://files.pythonhosted.org/packages/5f/97/99d7c6b4ea680692cdefad7c6d4f48923844fcfedc647d07e973ae608ab8/s4_design_sim_tool-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "aa011dead9d8b774031367608985f20e", "sha256": "e72ce63f061250e688c3f276d4c6b1777584364b6f8236781714e3ab828a648a"}, "downloads": -1, "filename": "s4_design_sim_tool-1.0.2.tar.gz", "has_sig": false, "md5_digest": "aa011dead9d8b774031367608985f20e", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 15712, "upload_time": "2020-04-28T17:56:12", "upload_time_iso_8601": "2020-04-28T17:56:12.392275Z", "url": "https://files.pythonhosted.org/packages/67/12/ea117fe8858fc465df8963c1152a6bf1a2c79dd11f767a674113b9c1d9e1/s4_design_sim_tool-1.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "411c4a25a8f42536f24d1706758744bf", "sha256": "b3591cbd7a1af3f83cc9e922661548cb25e54e0fe94ace5b1947b7d90c0f59be"}, "downloads": -1, "filename": "s4_design_sim_tool-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "411c4a25a8f42536f24d1706758744bf", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 15335, "upload_time": "2020-04-28T17:56:10", "upload_time_iso_8601": "2020-04-28T17:56:10.825838Z", "url": "https://files.pythonhosted.org/packages/5f/97/99d7c6b4ea680692cdefad7c6d4f48923844fcfedc647d07e973ae608ab8/s4_design_sim_tool-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "aa011dead9d8b774031367608985f20e", "sha256": "e72ce63f061250e688c3f276d4c6b1777584364b6f8236781714e3ab828a648a"}, "downloads": -1, "filename": "s4_design_sim_tool-1.0.2.tar.gz", "has_sig": false, "md5_digest": "aa011dead9d8b774031367608985f20e", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 15712, "upload_time": "2020-04-28T17:56:12", "upload_time_iso_8601": "2020-04-28T17:56:12.392275Z", "url": "https://files.pythonhosted.org/packages/67/12/ea117fe8858fc465df8963c1152a6bf1a2c79dd11f767a674113b9c1d9e1/s4_design_sim_tool-1.0.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:59:31 2020"}