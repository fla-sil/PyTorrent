{"info": {"author": "Andr\u00e9s", "author_email": "andres+cvs@camilion.eu", "bugtrack_url": null, "classifiers": ["Environment :: Plugins", "Environment :: Web Environment", "Framework :: Lektor", "License :: OSI Approved :: MIT License"], "description": "# `lektor-git-src-publisher`\n\n[Lektor][lektor]'s wonderful interface enables non-technical users to modify\nthe source of a Lektor-based site and publish the resulting website.\n\nHowever, if such source code is managed with git, the user will still have to\nfiddle around with git clients or interfaces in order collaborate with others.\n\nThis simple plugin enables two publish targets, one to update the page's\nsource code from a remote, and one to update the remote with the local\nchanges.\n\n\n## Using this\n\n\n### Steps\n\n0. Setup the `REMOTE` and its authentication (out of scope for this plugin)\n1. Install `lektor-git-src-publisher`\n2. Add the publishers to the project\n3. `lektor serve` and profit!\n\n\n### Details\n\nIn order to install the plugin you can add following to your `.lektorproject`\nfile:\n\n    [packages]\n    lektor-git-src-publisher = 0.1\n\nOr follow the [official plugin instructions][lektorplugins].\n\nIn order to enable the publishers, you also modify your `.lektorproject` file:\n\n    [servers.update]\n    name = Update from Remote\n    enabled = yes\n    target = gitsrc-forcepull://master\n\n    [servers.push]\n    name = Push to Remote\n    enabled = yes\n    target = gitsrc-push://master\n\nNotice that this plugin registers the `gitsrc-forcepull://BRANCH` and\n`gitsrc-push://BRANCH` schemas.\n\nIt is conceivable to have multiple publishers, e.g. one for a `staging` and\none for a `master` branch. See the [limitations](#limitations).\n\n\n\n## Getting in touch / collaborating\n\nIf you just want to say hi/thanks or ask something, we are on [Matrix][matrix]!\nGet in touch with us at [#oss:camilion.eu][matrixosscml] or through\nour website: [https://camilion.eu][camilion].\n\nIf you have an issue with this plugin [open an Issue][gspissues].\n\nIf you have an improvement you'd like to have shipped with this plugin,\neither get in touch with us, or open an Issue or a Pull Request.\n\nWe mirror the code to GitHub from our infra, so PRs from any other code\nhosting platforms are very welcome as well.\n\nA special mention goes to our friends at [ungleich][ungleich], who\nalso needed this and provided the feedback and motivation needed to push\nthis forward.\n\n\n## Limitations\n\nDue to the way this is done, the Lektor server can be confused if you change\nthe `.lektorproject` too much under its feet, simple things should be alright\nand, when in doubt, restart the Lektor server after making big changes.\n\n\n## Gory details\n\nThis plugin uses Lektor's [publisher API][lektorpublisher] in a\nnon-traditional fashion, instead of publishing the resulting artifacts:\n- `gitsrc-forcepull`: updates the source working directory to pull remote\n  changes.\n- `gitsrc-push`: auto-commits and pushes to the configured remote.\n\nThe [source code][gspcode] is quite straight forward, when in doubt do read it!\n\n### `gitsrc-forcepull`\n\nThis is roughly equivalent to following pseudo-code:\n\n    # Save local changes\n    git stash\n    # Update remotes\n    git fetch --progress\n    if (BRANCH != CURRENT_BRANCH) {\n        # Ensure we are working on the specified branch\n        git checkout -b BRANCH -t REMOTE/BRANCH\n    }\n    # Merge changes as necessary\n    git merge --strategy=recursive --strategy-option=theirs\n    # Restore local changes\n    git stash pop\n\nThis needs more testing, but appears to be robust enough for simple use-cases\nand should certainly be enough if the user updates before making changes.\n\n\n### `gitsrc-push`\n\nThis is roughly equivalent to following pseudo-code:\n\n    # Stage local changes\n    git add .\n    # Commit staged changes\n    git commit -m \"Updated from Lektor\"\n    # Push\n    git push REMOTE BRANCH\n\nYou may want to setup the `GIT_COMMITTER_NAME` and `GIT_COMMITTER_EMAIL`\nenvironment variables before running Lektor.\n\n\n[lektor]: https://www.getlektor.com\n[lektorplugins]: https://www.getlektor.com/docs/plugins/\n[lektorpublisher]: https://www.getlektor.com/docs/api/publisher/\n[gspcode]: https://github.com/camilioneu/lektor-git-src-publisher\n[gspissues]: https://github.com/camilioneu/lektor-git-src-publisher/issues\n[matrix]: https://matrix.org\n[matrixosscml]: https://matrix.to/#/#oss:camilion.eu\n[camilion]: https://camilion.eu\n[ungleich]: https://ungleich.ch\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/CamilionEU/lektor-git-src-publisher", "keywords": "Lektor plugin", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "lektor-git-src-publisher", "package_url": "https://pypi.org/project/lektor-git-src-publisher/", "platform": "", "project_url": "https://pypi.org/project/lektor-git-src-publisher/", "project_urls": {"Homepage": "https://github.com/CamilionEU/lektor-git-src-publisher"}, "release_url": "https://pypi.org/project/lektor-git-src-publisher/0.1/", "requires_dist": null, "requires_python": "", "summary": "Simple plugin to use Lektor to abstract away git usage.", "version": "0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1><code>lektor-git-src-publisher</code></h1>\n<p><a href=\"https://www.getlektor.com\" rel=\"nofollow\">Lektor</a>'s wonderful interface enables non-technical users to modify\nthe source of a Lektor-based site and publish the resulting website.</p>\n<p>However, if such source code is managed with git, the user will still have to\nfiddle around with git clients or interfaces in order collaborate with others.</p>\n<p>This simple plugin enables two publish targets, one to update the page's\nsource code from a remote, and one to update the remote with the local\nchanges.</p>\n<h2>Using this</h2>\n<h3>Steps</h3>\n<ol>\n<li>Setup the <code>REMOTE</code> and its authentication (out of scope for this plugin)</li>\n<li>Install <code>lektor-git-src-publisher</code></li>\n<li>Add the publishers to the project</li>\n<li><code>lektor serve</code> and profit!</li>\n</ol>\n<h3>Details</h3>\n<p>In order to install the plugin you can add following to your <code>.lektorproject</code>\nfile:</p>\n<pre><code>[packages]\nlektor-git-src-publisher = 0.1\n</code></pre>\n<p>Or follow the <a href=\"https://www.getlektor.com/docs/plugins/\" rel=\"nofollow\">official plugin instructions</a>.</p>\n<p>In order to enable the publishers, you also modify your <code>.lektorproject</code> file:</p>\n<pre><code>[servers.update]\nname = Update from Remote\nenabled = yes\ntarget = gitsrc-forcepull://master\n\n[servers.push]\nname = Push to Remote\nenabled = yes\ntarget = gitsrc-push://master\n</code></pre>\n<p>Notice that this plugin registers the <code>gitsrc-forcepull://BRANCH</code> and\n<code>gitsrc-push://BRANCH</code> schemas.</p>\n<p>It is conceivable to have multiple publishers, e.g. one for a <code>staging</code> and\none for a <code>master</code> branch. See the <a href=\"#limitations\" rel=\"nofollow\">limitations</a>.</p>\n<h2>Getting in touch / collaborating</h2>\n<p>If you just want to say hi/thanks or ask something, we are on <a href=\"https://matrix.org\" rel=\"nofollow\">Matrix</a>!\nGet in touch with us at <a href=\"https://matrix.to/#/#oss:camilion.eu\" rel=\"nofollow\">#oss:camilion.eu</a> or through\nour website: <a href=\"https://camilion.eu\" rel=\"nofollow\">https://camilion.eu</a>.</p>\n<p>If you have an issue with this plugin <a href=\"https://github.com/camilioneu/lektor-git-src-publisher/issues\" rel=\"nofollow\">open an Issue</a>.</p>\n<p>If you have an improvement you'd like to have shipped with this plugin,\neither get in touch with us, or open an Issue or a Pull Request.</p>\n<p>We mirror the code to GitHub from our infra, so PRs from any other code\nhosting platforms are very welcome as well.</p>\n<p>A special mention goes to our friends at <a href=\"https://ungleich.ch\" rel=\"nofollow\">ungleich</a>, who\nalso needed this and provided the feedback and motivation needed to push\nthis forward.</p>\n<h2>Limitations</h2>\n<p>Due to the way this is done, the Lektor server can be confused if you change\nthe <code>.lektorproject</code> too much under its feet, simple things should be alright\nand, when in doubt, restart the Lektor server after making big changes.</p>\n<h2>Gory details</h2>\n<p>This plugin uses Lektor's <a href=\"https://www.getlektor.com/docs/api/publisher/\" rel=\"nofollow\">publisher API</a> in a\nnon-traditional fashion, instead of publishing the resulting artifacts:</p>\n<ul>\n<li><code>gitsrc-forcepull</code>: updates the source working directory to pull remote\nchanges.</li>\n<li><code>gitsrc-push</code>: auto-commits and pushes to the configured remote.</li>\n</ul>\n<p>The <a href=\"https://github.com/camilioneu/lektor-git-src-publisher\" rel=\"nofollow\">source code</a> is quite straight forward, when in doubt do read it!</p>\n<h3><code>gitsrc-forcepull</code></h3>\n<p>This is roughly equivalent to following pseudo-code:</p>\n<pre><code># Save local changes\ngit stash\n# Update remotes\ngit fetch --progress\nif (BRANCH != CURRENT_BRANCH) {\n    # Ensure we are working on the specified branch\n    git checkout -b BRANCH -t REMOTE/BRANCH\n}\n# Merge changes as necessary\ngit merge --strategy=recursive --strategy-option=theirs\n# Restore local changes\ngit stash pop\n</code></pre>\n<p>This needs more testing, but appears to be robust enough for simple use-cases\nand should certainly be enough if the user updates before making changes.</p>\n<h3><code>gitsrc-push</code></h3>\n<p>This is roughly equivalent to following pseudo-code:</p>\n<pre><code># Stage local changes\ngit add .\n# Commit staged changes\ngit commit -m \"Updated from Lektor\"\n# Push\ngit push REMOTE BRANCH\n</code></pre>\n<p>You may want to setup the <code>GIT_COMMITTER_NAME</code> and <code>GIT_COMMITTER_EMAIL</code>\nenvironment variables before running Lektor.</p>\n\n          </div>"}, "last_serial": 5955178, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "254c992aa17d611cc07e8be0b461d1c5", "sha256": "84606f6474782e9b1df49da99b912e76acda6863c975bc10a93623be69b950eb"}, "downloads": -1, "filename": "lektor_git_src_publisher-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "254c992aa17d611cc07e8be0b461d1c5", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5738, "upload_time": "2019-10-10T14:34:48", "upload_time_iso_8601": "2019-10-10T14:34:48.076305Z", "url": "https://files.pythonhosted.org/packages/a5/87/b7ac0bfe34bac1853bd44edd06a6e8e461958356881e239f32a145b3cd70/lektor_git_src_publisher-0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5dbc7c7c60e6c37d4249db98dd12c896", "sha256": "2d989894bc4fcac217413c6ee4acffc6150911877514bd1526fed72ef688952f"}, "downloads": -1, "filename": "lektor-git-src-publisher-0.1.tar.gz", "has_sig": false, "md5_digest": "5dbc7c7c60e6c37d4249db98dd12c896", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4683, "upload_time": "2019-10-10T14:34:54", "upload_time_iso_8601": "2019-10-10T14:34:54.990669Z", "url": "https://files.pythonhosted.org/packages/1a/d9/731ba3301e5b0ae5ad39968c029bcaa368815eef81464938dd38520a7c8a/lektor-git-src-publisher-0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "254c992aa17d611cc07e8be0b461d1c5", "sha256": "84606f6474782e9b1df49da99b912e76acda6863c975bc10a93623be69b950eb"}, "downloads": -1, "filename": "lektor_git_src_publisher-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "254c992aa17d611cc07e8be0b461d1c5", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5738, "upload_time": "2019-10-10T14:34:48", "upload_time_iso_8601": "2019-10-10T14:34:48.076305Z", "url": "https://files.pythonhosted.org/packages/a5/87/b7ac0bfe34bac1853bd44edd06a6e8e461958356881e239f32a145b3cd70/lektor_git_src_publisher-0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5dbc7c7c60e6c37d4249db98dd12c896", "sha256": "2d989894bc4fcac217413c6ee4acffc6150911877514bd1526fed72ef688952f"}, "downloads": -1, "filename": "lektor-git-src-publisher-0.1.tar.gz", "has_sig": false, "md5_digest": "5dbc7c7c60e6c37d4249db98dd12c896", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4683, "upload_time": "2019-10-10T14:34:54", "upload_time_iso_8601": "2019-10-10T14:34:54.990669Z", "url": "https://files.pythonhosted.org/packages/1a/d9/731ba3301e5b0ae5ad39968c029bcaa368815eef81464938dd38520a7c8a/lektor-git-src-publisher-0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:47:08 2020"}