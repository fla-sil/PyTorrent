{"info": {"author": "Leone Bacciu", "author_email": "leonebacciu@gmail.com", "bugtrack_url": null, "classifiers": ["Environment :: Web Environment", "Framework :: Django", "Framework :: Django :: 2.2", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# Readme in progress\n\n# Requirements\n+ Python >= 3.6\n+ Django 2.2\n\n## General concept\n![alt text](emailFlow.png?raw=True \"Flow\")\n\n## Installation\n\nYou can install by:\n\n```commandline\npip3 install django-email-verification\n```\n\nand import by:\n\n```python\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    ...\n    'django_email_verification', # you have to add this\n]\n```\n\n## Settings parameters\nYou have to add these parameters to the settings, you have to include all of them except the last one:\n```python\nEMAIL_SERVER = 'smtp.gmail.com'\nEMAIL_PORT = 587\nEMAIL_ADDRESS = 'mymail@gmail.com'\nEMAIL_PASSWORD = 'mYC00lP4ssw0rd'\nEMAIL_MAIL_SUBJECT = 'Confirm your email'\nEMAIL_MAIL_HTML = 'mail_body.html'\nEMAIL_MAIL_PLAIN = 'mail_body.txt'\nEMAIL_PAGE_TEMPLATE = 'confirm_template.html'\nEMAIL_PAGE_DOMAIN = 'http://mysite.com/'\nEMAIL_MODEL_ADMIN = False # the default value is False\n```\nIn detail:\n+ `EMAIL_SERVER`: your mail provider's server (e.g. `'smtp.gmail.com'` for gmail)\n+ `EMAIL_PORT`: your mail provider's server port (e.g. `587` for gmail)\n+ `EMAIL_ADDRESS`: your email address\n+ `EMAIL_PASSWORD`: your email address' password\n+ `EMAIL_MAIL_`:\n    * `SUBJECT`: the mail default subject (needed)\n    * `HTML`: the mail body in form of html (not needed)\n    * `PLAIN`: the mail body in form of .txt file (needed if `HTML` is not defined)\n+ `EMAIL_PAGE_TEMPLATE`: the template of the success/error view\n+ `EMAIL_PAGE_DOMAIN`: the domain of the confirmation link (usually your site's domain)\n+ `EMAIL_MODEL_ADMIN`: True if you want to see the model in the admin panel (only for debugging purposes)\n\n## Templates examples\nThe `EMAIL_MAIL_HTML` should look like this (`{{ link }}` is passed during the rendering):\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <style>\n        h1{ color: blue; }\n    </style>\n</head>\n    <body>\n        <h1>You are almost there!</h1><br>\n        <h2>Please click <a href=\"{{ link }}\">here</a> to confirm your account</h2>\n    </body>\n</html>\n```\n\nThe `EMAIL_MAIL_PLAIN` should look like this (`{{ link }}` is passed during the rendering):\n```text\nYou are almost there!\nPlease click the following link to confirm your account\n{{ link }}\n```\n\nThe `EMAIL_PAGE_TEMPLATE` should look like this (`{{ success }}` is boolean and passed during the rendering):\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Confirmation</title>\n    <style>\n        body{ color: blue; }\n    </style>\n</head>\n<body>\n    {% if success %}\n        You have confirmed your account!\n    {% else %}\n        Errore, invalid token!\n    {% endif %}\n</body>\n</html>\n```\n\n## Email sending\nAfter you have created the user you can send the confirm email\n```python\nfrom django.shortcuts import render\nfrom django.contrib.auth import get_user_model\nfrom django_email_verification import sendConfirm\n\ndef myCreateView(request):\n    ...\n    user = get_user_model().objects.create(username=username, password=password, email=email)\n    sendConfirm(user)\n    return render(...)\n```\n`sendConfirm(user)` sets user's `is_active` to `False` and sends an email with the defined template (and the pseudo-random generated token) to the user.\n\n## Token verification\nYou have to include the urls in `urls.py`\n```python\nfrom django.contrib import admin\nfrom django.urls import path, include\nfrom django_email_verification import urls as mail_urls\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    ...\n    path('email/', include(mail_urls)),\n]\n```\nWhen a request arrives to `https.//mydomain.com/email/<token>` the package verifies the token and:\n+ if it corresponds to a pending token it renders the `EMAIL_PAGE_TEMPLATE` passing `success=True` and deletes the token\n+ if it doesn't correspond it renders the `EMAIL_PAGE_TEMPLATE` passing `success=False`\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/LeoneBacciu/django-email-verification", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "django-email-verification", "package_url": "https://pypi.org/project/django-email-verification/", "platform": "", "project_url": "https://pypi.org/project/django-email-verification/", "project_urls": {"Homepage": "https://github.com/LeoneBacciu/django-email-verification"}, "release_url": "https://pypi.org/project/django-email-verification/0.0.2/", "requires_dist": null, "requires_python": ">=3.6", "summary": "Email verificator app for django", "version": "0.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Readme in progress</h1>\n<h1>Requirements</h1>\n<ul>\n<li>Python &gt;= 3.6</li>\n<li>Django 2.2</li>\n</ul>\n<h2>General concept</h2>\n<p><img alt=\"alt text\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/d94540af30a5dd8e624566b7969ff0253a15e620/656d61696c466c6f772e706e673f7261773d54727565\"></p>\n<h2>Installation</h2>\n<p>You can install by:</p>\n<pre>pip3 install django-email-verification\n</pre>\n<p>and import by:</p>\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"s1\">'django.contrib.admin'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'django.contrib.auth'</span><span class=\"p\">,</span>\n    <span class=\"o\">...</span>\n    <span class=\"s1\">'django_email_verification'</span><span class=\"p\">,</span> <span class=\"c1\"># you have to add this</span>\n<span class=\"p\">]</span>\n</pre>\n<h2>Settings parameters</h2>\n<p>You have to add these parameters to the settings, you have to include all of them except the last one:</p>\n<pre><span class=\"n\">EMAIL_SERVER</span> <span class=\"o\">=</span> <span class=\"s1\">'smtp.gmail.com'</span>\n<span class=\"n\">EMAIL_PORT</span> <span class=\"o\">=</span> <span class=\"mi\">587</span>\n<span class=\"n\">EMAIL_ADDRESS</span> <span class=\"o\">=</span> <span class=\"s1\">'mymail@gmail.com'</span>\n<span class=\"n\">EMAIL_PASSWORD</span> <span class=\"o\">=</span> <span class=\"s1\">'mYC00lP4ssw0rd'</span>\n<span class=\"n\">EMAIL_MAIL_SUBJECT</span> <span class=\"o\">=</span> <span class=\"s1\">'Confirm your email'</span>\n<span class=\"n\">EMAIL_MAIL_HTML</span> <span class=\"o\">=</span> <span class=\"s1\">'mail_body.html'</span>\n<span class=\"n\">EMAIL_MAIL_PLAIN</span> <span class=\"o\">=</span> <span class=\"s1\">'mail_body.txt'</span>\n<span class=\"n\">EMAIL_PAGE_TEMPLATE</span> <span class=\"o\">=</span> <span class=\"s1\">'confirm_template.html'</span>\n<span class=\"n\">EMAIL_PAGE_DOMAIN</span> <span class=\"o\">=</span> <span class=\"s1\">'http://mysite.com/'</span>\n<span class=\"n\">EMAIL_MODEL_ADMIN</span> <span class=\"o\">=</span> <span class=\"kc\">False</span> <span class=\"c1\"># the default value is False</span>\n</pre>\n<p>In detail:</p>\n<ul>\n<li><code>EMAIL_SERVER</code>: your mail provider's server (e.g. <code>'smtp.gmail.com'</code> for gmail)</li>\n<li><code>EMAIL_PORT</code>: your mail provider's server port (e.g. <code>587</code> for gmail)</li>\n<li><code>EMAIL_ADDRESS</code>: your email address</li>\n<li><code>EMAIL_PASSWORD</code>: your email address' password</li>\n<li><code>EMAIL_MAIL_</code>:\n<ul>\n<li><code>SUBJECT</code>: the mail default subject (needed)</li>\n<li><code>HTML</code>: the mail body in form of html (not needed)</li>\n<li><code>PLAIN</code>: the mail body in form of .txt file (needed if <code>HTML</code> is not defined)</li>\n</ul>\n</li>\n<li><code>EMAIL_PAGE_TEMPLATE</code>: the template of the success/error view</li>\n<li><code>EMAIL_PAGE_DOMAIN</code>: the domain of the confirmation link (usually your site's domain)</li>\n<li><code>EMAIL_MODEL_ADMIN</code>: True if you want to see the model in the admin panel (only for debugging purposes)</li>\n</ul>\n<h2>Templates examples</h2>\n<p>The <code>EMAIL_MAIL_HTML</code> should look like this (<code>{{ link }}</code> is passed during the rendering):</p>\n<pre><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span> <span class=\"na\">lang</span><span class=\"o\">=</span><span class=\"s\">\"en\"</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">meta</span> <span class=\"na\">charset</span><span class=\"o\">=</span><span class=\"s\">\"UTF-8\"</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">style</span><span class=\"p\">&gt;</span>\n        <span class=\"nt\">h1</span><span class=\"p\">{</span> <span class=\"k\">color</span><span class=\"p\">:</span> <span class=\"kc\">blue</span><span class=\"p\">;</span> <span class=\"p\">}</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">style</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">h1</span><span class=\"p\">&gt;</span>You are almost there!<span class=\"p\">&lt;/</span><span class=\"nt\">h1</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">br</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">h2</span><span class=\"p\">&gt;</span>Please click <span class=\"p\">&lt;</span><span class=\"nt\">a</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"{{ link }}\"</span><span class=\"p\">&gt;</span>here<span class=\"p\">&lt;/</span><span class=\"nt\">a</span><span class=\"p\">&gt;</span> to confirm your account<span class=\"p\">&lt;/</span><span class=\"nt\">h2</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</pre>\n<p>The <code>EMAIL_MAIL_PLAIN</code> should look like this (<code>{{ link }}</code> is passed during the rendering):</p>\n<pre>You are almost there!\nPlease click the following link to confirm your account\n{{ link }}\n</pre>\n<p>The <code>EMAIL_PAGE_TEMPLATE</code> should look like this (<code>{{ success }}</code> is boolean and passed during the rendering):</p>\n<pre><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span> <span class=\"na\">lang</span><span class=\"o\">=</span><span class=\"s\">\"en\"</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">meta</span> <span class=\"na\">charset</span><span class=\"o\">=</span><span class=\"s\">\"UTF-8\"</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>Confirmation<span class=\"p\">&lt;/</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">style</span><span class=\"p\">&gt;</span>\n        <span class=\"nt\">body</span><span class=\"p\">{</span> <span class=\"k\">color</span><span class=\"p\">:</span> <span class=\"kc\">blue</span><span class=\"p\">;</span> <span class=\"p\">}</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">style</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n    {% if success %}\n        You have confirmed your account!\n    {% else %}\n        Errore, invalid token!\n    {% endif %}\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</pre>\n<h2>Email sending</h2>\n<p>After you have created the user you can send the confirm email</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.shortcuts</span> <span class=\"kn\">import</span> <span class=\"n\">render</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib.auth</span> <span class=\"kn\">import</span> <span class=\"n\">get_user_model</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django_email_verification</span> <span class=\"kn\">import</span> <span class=\"n\">sendConfirm</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">myCreateView</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span>\n    <span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">get_user_model</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span><span class=\"n\">username</span><span class=\"o\">=</span><span class=\"n\">username</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"o\">=</span><span class=\"n\">password</span><span class=\"p\">,</span> <span class=\"n\">email</span><span class=\"o\">=</span><span class=\"n\">email</span><span class=\"p\">)</span>\n    <span class=\"n\">sendConfirm</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">render</span><span class=\"p\">(</span><span class=\"o\">...</span><span class=\"p\">)</span>\n</pre>\n<p><code>sendConfirm(user)</code> sets user's <code>is_active</code> to <code>False</code> and sends an email with the defined template (and the pseudo-random generated token) to the user.</p>\n<h2>Token verification</h2>\n<p>You have to include the urls in <code>urls.py</code></p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.contrib</span> <span class=\"kn\">import</span> <span class=\"n\">admin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">include</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django_email_verification</span> <span class=\"kn\">import</span> <span class=\"n\">urls</span> <span class=\"k\">as</span> <span class=\"n\">mail_urls</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s1\">'admin/'</span><span class=\"p\">,</span> <span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">urls</span><span class=\"p\">),</span>\n    <span class=\"o\">...</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s1\">'email/'</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"n\">mail_urls</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n</pre>\n<p>When a request arrives to <code>https.//mydomain.com/email/&lt;token&gt;</code> the package verifies the token and:</p>\n<ul>\n<li>if it corresponds to a pending token it renders the <code>EMAIL_PAGE_TEMPLATE</code> passing <code>success=True</code> and deletes the token</li>\n<li>if it doesn't correspond it renders the <code>EMAIL_PAGE_TEMPLATE</code> passing <code>success=False</code></li>\n</ul>\n\n          </div>"}, "last_serial": 5903037, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "203bfe2f03b4984fd28dcfead8d6c2b5", "sha256": "4fd0edc0f4d3867fbe541c7451618c5e716ceb74699c22e8dee67fef70fd45b9"}, "downloads": -1, "filename": "django_email_verification-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "203bfe2f03b4984fd28dcfead8d6c2b5", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 6442, "upload_time": "2019-09-29T10:07:55", "upload_time_iso_8601": "2019-09-29T10:07:55.727883Z", "url": "https://files.pythonhosted.org/packages/1b/80/8c22a00434f010a04922cc27ec418e833a21eda24cd3a4316d87acddec9a/django_email_verification-0.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "02cc79209f2f6280028ac3c0eeeb585d", "sha256": "3ee34c26e37ccac6b20f5d53a3c30627c4ebc22306e5e09cfbb00f023478eebb"}, "downloads": -1, "filename": "django-email-verification-0.0.1.tar.gz", "has_sig": false, "md5_digest": "02cc79209f2f6280028ac3c0eeeb585d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 4005, "upload_time": "2019-09-29T10:07:58", "upload_time_iso_8601": "2019-09-29T10:07:58.133843Z", "url": "https://files.pythonhosted.org/packages/20/aa/d28520c7bcd6f8bfff17df6ba12eb2c792906a58bb1776843981af50f146/django-email-verification-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "4c0dd412ae6490cc1568009d8d6738ff", "sha256": "789b6fe97f54278693ee02fcffdefdc56a263d0b48434984db683a282f44ed26"}, "downloads": -1, "filename": "django_email_verification-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "4c0dd412ae6490cc1568009d8d6738ff", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 7942, "upload_time": "2019-09-29T16:42:25", "upload_time_iso_8601": "2019-09-29T16:42:25.184368Z", "url": "https://files.pythonhosted.org/packages/1f/64/8d4ced3f6676ba856d6fba7f7b4778353a0095a4f72e639399a66fe4e369/django_email_verification-0.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "ed23bea5cc23d6527a9303fcd7b60f86", "sha256": "a8cf903102f870c9a14d1a9de563866ac0fdf71b3349bbc8acab817e9f54d60b"}, "downloads": -1, "filename": "django-email-verification-0.0.2.tar.gz", "has_sig": false, "md5_digest": "ed23bea5cc23d6527a9303fcd7b60f86", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5798, "upload_time": "2019-09-29T16:42:26", "upload_time_iso_8601": "2019-09-29T16:42:26.982282Z", "url": "https://files.pythonhosted.org/packages/86/97/53296d4ee01125782f3236ad3f3636ad7f1c3558f9fe72e3bc708154516b/django-email-verification-0.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4c0dd412ae6490cc1568009d8d6738ff", "sha256": "789b6fe97f54278693ee02fcffdefdc56a263d0b48434984db683a282f44ed26"}, "downloads": -1, "filename": "django_email_verification-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "4c0dd412ae6490cc1568009d8d6738ff", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 7942, "upload_time": "2019-09-29T16:42:25", "upload_time_iso_8601": "2019-09-29T16:42:25.184368Z", "url": "https://files.pythonhosted.org/packages/1f/64/8d4ced3f6676ba856d6fba7f7b4778353a0095a4f72e639399a66fe4e369/django_email_verification-0.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "ed23bea5cc23d6527a9303fcd7b60f86", "sha256": "a8cf903102f870c9a14d1a9de563866ac0fdf71b3349bbc8acab817e9f54d60b"}, "downloads": -1, "filename": "django-email-verification-0.0.2.tar.gz", "has_sig": false, "md5_digest": "ed23bea5cc23d6527a9303fcd7b60f86", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5798, "upload_time": "2019-09-29T16:42:26", "upload_time_iso_8601": "2019-09-29T16:42:26.982282Z", "url": "https://files.pythonhosted.org/packages/86/97/53296d4ee01125782f3236ad3f3636ad7f1c3558f9fe72e3bc708154516b/django-email-verification-0.0.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:36:22 2020"}