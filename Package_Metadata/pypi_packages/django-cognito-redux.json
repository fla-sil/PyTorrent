{"info": {"author": "Alex Plant", "author_email": "alex.c.plant@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Framework :: Django", "Framework :: Django :: 3.0", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# Django Cognito Authentication\nThe intent of this library is to provide a package that supports Django and allows an easy implementation for replacing the default Django authentication with an AWS Cognito based authentication.\n\nThis is a fork of [Alex Plant](https://github.com/Olorin92)'s great work with the original [django-cognito](https://github.com/Olorin92/django_cognito).\n\n## Install\n\nWhile this may still work on Django 2.x the focus is going to have it be working on Django 3.x. PRs are welcome as needed for keeping 2.x working.\n\n```\npip install django-cognito-redux\n```\n\n## Usage\n\nNeed to fill this out more...\n\nPass in the Access Token and ID Token using headers `ACCESSTOKEN` and `IDTOKEN` respectively. Also pass in the refresh token using using `REFRESHTOKEN`.\n\n## AWS Credentials\n\nThis library uses boto3 which follows a specific path for determining what credentials to use. Definitely recommend reading their [Configuring Credentials](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html) section.\n\n    The mechanism in which boto3 looks for credentials is to search through a list of possible locations and stop as soon as it finds credentials. The order in which Boto3 searches for credentials is:\n\n    1. Passing credentials as parameters in the boto.client() method\n    2. Passing credentials as parameters when creating a Session object\n    3. Environment variables (`AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, `AWS_DEFAULT_REGION`, `AWS_PROFILE`)\n    4. Shared credential file (~/.aws/credentials)\n    5. AWS config file (~/.aws/config)\n    6. Assume Role provider\n    7. Boto2 config file (/etc/boto.cfg and ~/.boto)\n    8. Instance metadata service on an Amazon EC2 instance that has an IAM role configured.\n\nIt is recommended to not pass in arguments with you instantiate a new session or client. Instead use IAM roles for production, and local configuration files locally.\n\nAs an example I generally have a profile setup in my `~/.aws/credentials`, and a default region set for that profile in `~/.aws/config`.\nFrom there I set `AWS_PROFILE=profilename` as an environment variable so my app knows what to use. This allows for easy local development as well as\nbeing able to use IAM roles in production, and not having to set a lot of environment variables.\n\n## Recommendations\n\nIt is recommended to use a custom user model to set what you need on the model instead of retrofitting existin user model if possible.\n\n## Settings\n\n### COGNITO_USER_MODEL_FIELD_REF_FIELD\n\nField on your user model you want to use to reference for lookups.\n\n```\nCOGNITO_USER_MODEL_FIELD_REF_FIELD = 'sub'\n```\n\n### COGNITO_TOKEN_REF_FIELD\n\nField on from the cognito user you want to save as reference to your model\n\n```\nCOGNITO_TOKEN_REF_FIELD = 'sub'\n```\n\nMore Examples\n\n```\nCOGNITO_TOKEN_REF_FIELD = 'sub'\nCOGNITO_USER_MODEL_FIELD_REF_FIELD = 'sub'\n\n# Is equivilent to \n\nUser.objects.get(sub='sub')\n```\n\n```\nCOGNITO_TOKEN_REF_FIELD = 'username'\nCOGNITO_USER_MODEL_FIELD_REF_FIELD = 'email'\n\n# Is equivilent to \n\nUser.objects.get(username='email')\n```\n\n### COGNITO_USER_FIELD_MAPPING\n\nThe keys of the dictionary map to user fields, and values map to data pulled from the id token. This is used to save data to your user model on create.\n\n```\nCOGNITO_USER_FIELD_MAPPING = {\n    \"email\": \"email\",\n    \"first_name\": \"custom:first_name\",\n    \"last_name\": \"custom:last_name\",\n    \"sub\": \"sub\"\n}\n```\n\n### APP_CLIENT_ID =\n\nThe client id of your app client for the user pool\n\n```\nAPP_CLIENT_ID = 'xxxxxxxxxxxxxxxxxxxxxxxxxx'\n```\n\n### APP_SECRET_KEY\n\nThe secret key for your user pool client\n\n### COGNITO_POOL_ID\n\nThe userpool id\n\n```\nCOGNITO_POOL_ID = 'us-east-1_xxxxxxxxx'\n```\n\n### USE_CSRF\n\n```\nUSE_CSRF = False\n```\n\n### HTTP_ONLY_COOKIE\n\n```\nHTTP_ONLY_COOKIE = False\n```\n\n### SECURE_COOKIE\n\n```\nSECURE_COOKIE = False\n```\n\n### AUTO_CREATE_USER\n\nCreate a user if tokens validate if the user doesn't exist.\n\n```\nAUTO_CREATE_USER = True\n```\n\n## Changelog\n\n### 1.4.1\n\n* Upgrade depdencies to be in sync for Django 3.0\n\n### 1.4.0\n\n* Change token validation to validate ID Tokens and Access Tokens\n* Add settings for mapping attributes from the ID Token to the user model\n* Change token use to be an ID Token instead of Access Token\n* Added more Docs\n* Cover race condition where someone might call backend more than once before user is created\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/patriotresearch/django-cognito-redux/", "keywords": "", "license": "", "maintainer": "Buddy Lindsey", "maintainer_email": "", "name": "django-cognito-redux", "package_url": "https://pypi.org/project/django-cognito-redux/", "platform": "", "project_url": "https://pypi.org/project/django-cognito-redux/", "project_urls": {"Documentation": "https://github.com/patriotresearch/django-cognito-redux/", "Homepage": "https://github.com/patriotresearch/django-cognito-redux/", "Source": "https://github.com/patriotresearch/django-cognito-redux/"}, "release_url": "https://pypi.org/project/django-cognito-redux/1.4.1/", "requires_dist": ["Django (>=3.0.0)", "asn1crypto (==1.2.0)", "boto3 (==1.10.29)", "cffi (==1.13.2)", "cryptography (>=2.8)", "djangorestframework (==3.10.3)", "idna (==2.8)", "PyJWT (==1.7.1)", "python-dateutil (==2.8.1)", "urllib3 (==1.25.7)"], "requires_python": ">=3.7", "summary": "Library for allowing the use of AWS Cognito security in Django projects", "version": "1.4.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Django Cognito Authentication</h1>\n<p>The intent of this library is to provide a package that supports Django and allows an easy implementation for replacing the default Django authentication with an AWS Cognito based authentication.</p>\n<p>This is a fork of <a href=\"https://github.com/Olorin92\" rel=\"nofollow\">Alex Plant</a>'s great work with the original <a href=\"https://github.com/Olorin92/django_cognito\" rel=\"nofollow\">django-cognito</a>.</p>\n<h2>Install</h2>\n<p>While this may still work on Django 2.x the focus is going to have it be working on Django 3.x. PRs are welcome as needed for keeping 2.x working.</p>\n<pre><code>pip install django-cognito-redux\n</code></pre>\n<h2>Usage</h2>\n<p>Need to fill this out more...</p>\n<p>Pass in the Access Token and ID Token using headers <code>ACCESSTOKEN</code> and <code>IDTOKEN</code> respectively. Also pass in the refresh token using using <code>REFRESHTOKEN</code>.</p>\n<h2>AWS Credentials</h2>\n<p>This library uses boto3 which follows a specific path for determining what credentials to use. Definitely recommend reading their <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html\" rel=\"nofollow\">Configuring Credentials</a> section.</p>\n<pre><code>The mechanism in which boto3 looks for credentials is to search through a list of possible locations and stop as soon as it finds credentials. The order in which Boto3 searches for credentials is:\n\n1. Passing credentials as parameters in the boto.client() method\n2. Passing credentials as parameters when creating a Session object\n3. Environment variables (`AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, `AWS_DEFAULT_REGION`, `AWS_PROFILE`)\n4. Shared credential file (~/.aws/credentials)\n5. AWS config file (~/.aws/config)\n6. Assume Role provider\n7. Boto2 config file (/etc/boto.cfg and ~/.boto)\n8. Instance metadata service on an Amazon EC2 instance that has an IAM role configured.\n</code></pre>\n<p>It is recommended to not pass in arguments with you instantiate a new session or client. Instead use IAM roles for production, and local configuration files locally.</p>\n<p>As an example I generally have a profile setup in my <code>~/.aws/credentials</code>, and a default region set for that profile in <code>~/.aws/config</code>.\nFrom there I set <code>AWS_PROFILE=profilename</code> as an environment variable so my app knows what to use. This allows for easy local development as well as\nbeing able to use IAM roles in production, and not having to set a lot of environment variables.</p>\n<h2>Recommendations</h2>\n<p>It is recommended to use a custom user model to set what you need on the model instead of retrofitting existin user model if possible.</p>\n<h2>Settings</h2>\n<h3>COGNITO_USER_MODEL_FIELD_REF_FIELD</h3>\n<p>Field on your user model you want to use to reference for lookups.</p>\n<pre><code>COGNITO_USER_MODEL_FIELD_REF_FIELD = 'sub'\n</code></pre>\n<h3>COGNITO_TOKEN_REF_FIELD</h3>\n<p>Field on from the cognito user you want to save as reference to your model</p>\n<pre><code>COGNITO_TOKEN_REF_FIELD = 'sub'\n</code></pre>\n<p>More Examples</p>\n<pre><code>COGNITO_TOKEN_REF_FIELD = 'sub'\nCOGNITO_USER_MODEL_FIELD_REF_FIELD = 'sub'\n\n# Is equivilent to \n\nUser.objects.get(sub='sub')\n</code></pre>\n<pre><code>COGNITO_TOKEN_REF_FIELD = 'username'\nCOGNITO_USER_MODEL_FIELD_REF_FIELD = 'email'\n\n# Is equivilent to \n\nUser.objects.get(username='email')\n</code></pre>\n<h3>COGNITO_USER_FIELD_MAPPING</h3>\n<p>The keys of the dictionary map to user fields, and values map to data pulled from the id token. This is used to save data to your user model on create.</p>\n<pre><code>COGNITO_USER_FIELD_MAPPING = {\n    \"email\": \"email\",\n    \"first_name\": \"custom:first_name\",\n    \"last_name\": \"custom:last_name\",\n    \"sub\": \"sub\"\n}\n</code></pre>\n<h3>APP_CLIENT_ID =</h3>\n<p>The client id of your app client for the user pool</p>\n<pre><code>APP_CLIENT_ID = 'xxxxxxxxxxxxxxxxxxxxxxxxxx'\n</code></pre>\n<h3>APP_SECRET_KEY</h3>\n<p>The secret key for your user pool client</p>\n<h3>COGNITO_POOL_ID</h3>\n<p>The userpool id</p>\n<pre><code>COGNITO_POOL_ID = 'us-east-1_xxxxxxxxx'\n</code></pre>\n<h3>USE_CSRF</h3>\n<pre><code>USE_CSRF = False\n</code></pre>\n<h3>HTTP_ONLY_COOKIE</h3>\n<pre><code>HTTP_ONLY_COOKIE = False\n</code></pre>\n<h3>SECURE_COOKIE</h3>\n<pre><code>SECURE_COOKIE = False\n</code></pre>\n<h3>AUTO_CREATE_USER</h3>\n<p>Create a user if tokens validate if the user doesn't exist.</p>\n<pre><code>AUTO_CREATE_USER = True\n</code></pre>\n<h2>Changelog</h2>\n<h3>1.4.1</h3>\n<ul>\n<li>Upgrade depdencies to be in sync for Django 3.0</li>\n</ul>\n<h3>1.4.0</h3>\n<ul>\n<li>Change token validation to validate ID Tokens and Access Tokens</li>\n<li>Add settings for mapping attributes from the ID Token to the user model</li>\n<li>Change token use to be an ID Token instead of Access Token</li>\n<li>Added more Docs</li>\n<li>Cover race condition where someone might call backend more than once before user is created</li>\n</ul>\n\n          </div>"}, "last_serial": 6229931, "releases": {"1.3.0": [{"comment_text": "", "digests": {"md5": "c5d39461d9be1e6643bd4c462f1a002f", "sha256": "661cb5302d16a2d6dc0a4632825384da07a6a72cb27af1e189339ab5bb376822"}, "downloads": -1, "filename": "django_cognito_redux-1.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "c5d39461d9be1e6643bd4c462f1a002f", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7", "size": 16887, "upload_time": "2019-11-01T21:37:05", "upload_time_iso_8601": "2019-11-01T21:37:05.336727Z", "url": "https://files.pythonhosted.org/packages/c0/99/5894dbcac76d2a0a6b41707e2f01775733735f3ad752b7d5daf9aede3b36/django_cognito_redux-1.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "c65c454d98a3c48834aa811ecee2f5f3", "sha256": "11bdb50a911cba194b14eb0b2821addf49d2451a870dde70628c2b5c527256cb"}, "downloads": -1, "filename": "django-cognito-redux-1.3.0.tar.gz", "has_sig": false, "md5_digest": "c65c454d98a3c48834aa811ecee2f5f3", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 11422, "upload_time": "2019-11-01T21:37:08", "upload_time_iso_8601": "2019-11-01T21:37:08.361340Z", "url": "https://files.pythonhosted.org/packages/c8/4b/64384a9f91a47528b7a9e8307c3dc7c92193d43e18b294bd89415bf0b5d0/django-cognito-redux-1.3.0.tar.gz", "yanked": false}], "1.4.0": [{"comment_text": "", "digests": {"md5": "ebb3ec12b06ff75153dda233efbbea5c", "sha256": "43fd71c3140596a5ee2154f498abbca2c812ced7015ae1b8c66b21af525e2741"}, "downloads": -1, "filename": "django_cognito_redux-1.4.0-py3-none-any.whl", "has_sig": false, "md5_digest": "ebb3ec12b06ff75153dda233efbbea5c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7", "size": 17820, "upload_time": "2019-11-14T15:52:20", "upload_time_iso_8601": "2019-11-14T15:52:20.666907Z", "url": "https://files.pythonhosted.org/packages/65/c3/046d0775c829236f12c64c96b348deeb597b263901d465b6c271296e6edf/django_cognito_redux-1.4.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "3f78a50dffd4ebc31c8e0bd1cabd0109", "sha256": "c86b3cc5e84433462a2ae58b7d524c5c7870019aebb2b0f83609da1493d66071"}, "downloads": -1, "filename": "django-cognito-redux-1.4.0.tar.gz", "has_sig": false, "md5_digest": "3f78a50dffd4ebc31c8e0bd1cabd0109", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 13311, "upload_time": "2019-11-14T15:52:24", "upload_time_iso_8601": "2019-11-14T15:52:24.069869Z", "url": "https://files.pythonhosted.org/packages/b3/fe/f487a3bac4dd108be625e1da4137f9296fd3b2a37b09a4b4a7055746f35b/django-cognito-redux-1.4.0.tar.gz", "yanked": false}], "1.4.1": [{"comment_text": "", "digests": {"md5": "3f12ba67208dfcb4335e1f003ac956ce", "sha256": "9da182430639c18fdb1147fdc688ed8f4957a61609a251ffb25baec4d46c3bd2"}, "downloads": -1, "filename": "django_cognito_redux-1.4.1-py3-none-any.whl", "has_sig": false, "md5_digest": "3f12ba67208dfcb4335e1f003ac956ce", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7", "size": 17914, "upload_time": "2019-12-02T17:32:13", "upload_time_iso_8601": "2019-12-02T17:32:13.978243Z", "url": "https://files.pythonhosted.org/packages/49/91/b4db7e1de4e9fee42a357256a28d632c41076d2e77d626adb74390fa1214/django_cognito_redux-1.4.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "e4e24682c1f3fd12083f5214472e619d", "sha256": "4825c7745ffeaf2015fe7d08b7e5b30f64622234b4706665d213540287243778"}, "downloads": -1, "filename": "django-cognito-redux-1.4.1.tar.gz", "has_sig": false, "md5_digest": "e4e24682c1f3fd12083f5214472e619d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 13499, "upload_time": "2019-12-02T17:32:17", "upload_time_iso_8601": "2019-12-02T17:32:17.605301Z", "url": "https://files.pythonhosted.org/packages/06/2e/8e64e5395c5ea5dd57dc9fdaa8355fa77f641f79fb0568d94d4e1028f20d/django-cognito-redux-1.4.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "3f12ba67208dfcb4335e1f003ac956ce", "sha256": "9da182430639c18fdb1147fdc688ed8f4957a61609a251ffb25baec4d46c3bd2"}, "downloads": -1, "filename": "django_cognito_redux-1.4.1-py3-none-any.whl", "has_sig": false, "md5_digest": "3f12ba67208dfcb4335e1f003ac956ce", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.7", "size": 17914, "upload_time": "2019-12-02T17:32:13", "upload_time_iso_8601": "2019-12-02T17:32:13.978243Z", "url": "https://files.pythonhosted.org/packages/49/91/b4db7e1de4e9fee42a357256a28d632c41076d2e77d626adb74390fa1214/django_cognito_redux-1.4.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "e4e24682c1f3fd12083f5214472e619d", "sha256": "4825c7745ffeaf2015fe7d08b7e5b30f64622234b4706665d213540287243778"}, "downloads": -1, "filename": "django-cognito-redux-1.4.1.tar.gz", "has_sig": false, "md5_digest": "e4e24682c1f3fd12083f5214472e619d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.7", "size": 13499, "upload_time": "2019-12-02T17:32:17", "upload_time_iso_8601": "2019-12-02T17:32:17.605301Z", "url": "https://files.pythonhosted.org/packages/06/2e/8e64e5395c5ea5dd57dc9fdaa8355fa77f641f79fb0568d94d4e1028f20d/django-cognito-redux-1.4.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:36:57 2020"}