{"info": {"author": "Greenhouse AI team", "author_email": "ai@greenhousegroup.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "Description\n============\n\nIntroduction\n------------\n\nApian is an opinionated library for setting up a Python-based service with a\nminimum of boilerplate. It is a thin wrapper around `flask-restplus\n<https://pypi.org/project/flask-restplus/>`_ and provides:\n\n* Documentation using OpenAPI.\n* Info and health resources.\n* JWT-based authentication.\n* Configuration injection using `miniscule\n  <https://pypi.org/project/miniscule/>`_.\n\nExample\n-------\n\nAdd a configuration file :code:`config.yaml` in the root of the project, with the\nfollowing contents:\n\n.. code-block:: yaml\n\n  environment: production\n  debug: False\n  authentication:\n    enabled: True\n    secret: secret\n\nTo create a Flask application and run it on :code:`localhost:5000`:\n\n.. code-block:: python\n\n  from apian import read_config, create_api, create_app, authenticated\n  from flask_restplus import Namespace, Resource\n\n  ns = Namespace(\"user\")\n\n  @ns.route(\"\")\n  class UserItem(Resource):\n\n      @authenticated\n      def get(self, user_id):\n          return user_id\n\n  config = read_config()\n  api = create_app(\"my-app\", config)\n  api.add_namespace(ns)\n  app = create_app(api, config)\n  app.run()\n\nThe application has endpoints at the paths:\n\n* :code:`GET /my-app/api/info` - Return information about the service.\n* :code:`GET /my-app/api/health` - Return the health status of the service.\n* :code:`GET /my-app/api/user` - Return the user ID set in the Bearer token.\n\nTo access the user resource, ensure that the `requests\n<https://pypi.org/project/requests/>`_ package is installed and execute the\nfollowing snippet:\n\n.. code-block:: python\n\n  import jwt\n  import requests\n\n  def auth_token():\n    user_id = 10\n    claims = {\"iat\": dt.datetime.utcnow(), \"sub\": user_id}\n    key = \"secret\"\n    return jwt.encode(claims, key, \"HS256\")\n\n  headers = {\"Authorization\": \"Bearer {}\".format(\n  requests.get(\"http://localhost:5000/my-app/api/user\", headers=headers)", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://gitlab.com/greenhousegroup/ai/libraries/apish/", "keywords": "rest http web", "license": "", "maintainer": "", "maintainer_email": "", "name": "apish", "package_url": "https://pypi.org/project/apish/", "platform": "", "project_url": "https://pypi.org/project/apish/", "project_urls": {"Homepage": "https://gitlab.com/greenhousegroup/ai/libraries/apish/"}, "release_url": "https://pypi.org/project/apish/0.0.3/", "requires_dist": null, "requires_python": "", "summary": " Small, opinionated library for building async REST APIs.", "version": "0.0.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"introduction\">\n<h2>Introduction</h2>\n<p>Apian is an opinionated library for setting up a Python-based service with a\nminimum of boilerplate. It is a thin wrapper around <a href=\"https://pypi.org/project/flask-restplus/\" rel=\"nofollow\">flask-restplus</a> and provides:</p>\n<ul>\n<li>Documentation using OpenAPI.</li>\n<li>Info and health resources.</li>\n<li>JWT-based authentication.</li>\n<li>Configuration injection using <a href=\"https://pypi.org/project/miniscule/\" rel=\"nofollow\">miniscule</a>.</li>\n</ul>\n</div>\n<div id=\"example\">\n<h2>Example</h2>\n<p>Add a configuration file <code>config.yaml</code> in the root of the project, with the\nfollowing contents:</p>\n<pre><span class=\"nt\">environment</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">production</span>\n<span class=\"nt\">debug</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">False</span>\n<span class=\"nt\">authentication</span><span class=\"p\">:</span>\n  <span class=\"nt\">enabled</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">True</span>\n  <span class=\"nt\">secret</span><span class=\"p\">:</span> <span class=\"l-Scalar-Plain\">secret</span>\n</pre>\n<p>To create a Flask application and run it on <code>localhost:5000</code>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">apian</span> <span class=\"kn\">import</span> <span class=\"n\">read_config</span><span class=\"p\">,</span> <span class=\"n\">create_api</span><span class=\"p\">,</span> <span class=\"n\">create_app</span><span class=\"p\">,</span> <span class=\"n\">authenticated</span>\n<span class=\"kn\">from</span> <span class=\"nn\">flask_restplus</span> <span class=\"kn\">import</span> <span class=\"n\">Namespace</span><span class=\"p\">,</span> <span class=\"n\">Resource</span>\n\n<span class=\"n\">ns</span> <span class=\"o\">=</span> <span class=\"n\">Namespace</span><span class=\"p\">(</span><span class=\"s2\">\"user\"</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@ns</span><span class=\"o\">.</span><span class=\"n\">route</span><span class=\"p\">(</span><span class=\"s2\">\"\"</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">UserItem</span><span class=\"p\">(</span><span class=\"n\">Resource</span><span class=\"p\">):</span>\n\n    <span class=\"nd\">@authenticated</span>\n    <span class=\"k\">def</span> <span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">user_id</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">user_id</span>\n\n<span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">read_config</span><span class=\"p\">()</span>\n<span class=\"n\">api</span> <span class=\"o\">=</span> <span class=\"n\">create_app</span><span class=\"p\">(</span><span class=\"s2\">\"my-app\"</span><span class=\"p\">,</span> <span class=\"n\">config</span><span class=\"p\">)</span>\n<span class=\"n\">api</span><span class=\"o\">.</span><span class=\"n\">add_namespace</span><span class=\"p\">(</span><span class=\"n\">ns</span><span class=\"p\">)</span>\n<span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">create_app</span><span class=\"p\">(</span><span class=\"n\">api</span><span class=\"p\">,</span> <span class=\"n\">config</span><span class=\"p\">)</span>\n<span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">()</span>\n</pre>\n<p>The application has endpoints at the paths:</p>\n<ul>\n<li><code>GET /my-app/api/info</code> - Return information about the service.</li>\n<li><code>GET /my-app/api/health</code> - Return the health status of the service.</li>\n<li><code>GET /my-app/api/user</code> - Return the user ID set in the Bearer token.</li>\n</ul>\n<p>To access the user resource, ensure that the <a href=\"https://pypi.org/project/requests/\" rel=\"nofollow\">requests</a> package is installed and execute the\nfollowing snippet:</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">jwt</span>\n<span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">auth_token</span><span class=\"p\">():</span>\n  <span class=\"n\">user_id</span> <span class=\"o\">=</span> <span class=\"mi\">10</span>\n  <span class=\"n\">claims</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"iat\"</span><span class=\"p\">:</span> <span class=\"n\">dt</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">utcnow</span><span class=\"p\">(),</span> <span class=\"s2\">\"sub\"</span><span class=\"p\">:</span> <span class=\"n\">user_id</span><span class=\"p\">}</span>\n  <span class=\"n\">key</span> <span class=\"o\">=</span> <span class=\"s2\">\"secret\"</span>\n  <span class=\"k\">return</span> <span class=\"n\">jwt</span><span class=\"o\">.</span><span class=\"n\">encode</span><span class=\"p\">(</span><span class=\"n\">claims</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"s2\">\"HS256\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">headers</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">\"Authorization\"</span><span class=\"p\">:</span> <span class=\"s2\">\"Bearer </span><span class=\"si\">{}</span><span class=\"s2\">\"</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span>\n<span class=\"n\">requests</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">\"http://localhost:5000/my-app/api/user\"</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"o\">=</span><span class=\"n\">headers</span><span class=\"p\">)</span>\n</pre>\n</div>\n\n          </div>"}, "last_serial": 6957351, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "e0a232ed7b1244102534ec66c0ba96f4", "sha256": "604402727bbe145dd4e7e0409cc31becaa74ba7d26d7507c381cde8cdf8440d2"}, "downloads": -1, "filename": "apish-0.0.1.tar.gz", "has_sig": false, "md5_digest": "e0a232ed7b1244102534ec66c0ba96f4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5817, "upload_time": "2020-04-03T14:53:44", "upload_time_iso_8601": "2020-04-03T14:53:44.458941Z", "url": "https://files.pythonhosted.org/packages/24/5e/b44ea8f48ebd09cf356dbb99c7f198ffb43014620be0b3e435bbc247d963/apish-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "284c05192395696cc1cb136a1aff7f99", "sha256": "28cedfd4113624d9290115824296f0964ffcbc14b7bccf9a867887acebd396b8"}, "downloads": -1, "filename": "apish-0.0.2.tar.gz", "has_sig": false, "md5_digest": "284c05192395696cc1cb136a1aff7f99", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4894, "upload_time": "2020-04-04T09:49:19", "upload_time_iso_8601": "2020-04-04T09:49:19.985709Z", "url": "https://files.pythonhosted.org/packages/bf/db/b606886e7a1f8854c47f2fa1e0e89b99da2f800b03ccc42fa09919dea311/apish-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "19dea4a90f23a2c6e86af16ffaccb80b", "sha256": "78ec3f2dc177c7cd9336616489e945c34a1a1b1e940db2ec8ad9d23863336c87"}, "downloads": -1, "filename": "apish-0.0.3.tar.gz", "has_sig": false, "md5_digest": "19dea4a90f23a2c6e86af16ffaccb80b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2451755, "upload_time": "2020-04-05T19:25:51", "upload_time_iso_8601": "2020-04-05T19:25:51.542309Z", "url": "https://files.pythonhosted.org/packages/6d/bd/5597e8ef6514caa505cb20526e22971f46703686a45e5542213660411cf4/apish-0.0.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "19dea4a90f23a2c6e86af16ffaccb80b", "sha256": "78ec3f2dc177c7cd9336616489e945c34a1a1b1e940db2ec8ad9d23863336c87"}, "downloads": -1, "filename": "apish-0.0.3.tar.gz", "has_sig": false, "md5_digest": "19dea4a90f23a2c6e86af16ffaccb80b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2451755, "upload_time": "2020-04-05T19:25:51", "upload_time_iso_8601": "2020-04-05T19:25:51.542309Z", "url": "https://files.pythonhosted.org/packages/6d/bd/5597e8ef6514caa505cb20526e22971f46703686a45e5542213660411cf4/apish-0.0.3.tar.gz", "yanked": false}], "timestamp": "Thu May  7 18:17:46 2020"}