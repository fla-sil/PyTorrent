{"info": {"author": "lin-zone", "author_email": "z_one10@163.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7"], "description": "# IP \u4ee3\u7406\u6c60\n\n## \u5b89\u88c5\n\n```sh\npip install stand\n```\n\n## \u542f\u52a8\n\n```sh\nstand\n```\n\n## \u4f7f\u7528\n\n```python\n>>> from stand import get_proxy\n>>> proxy = get_proxy()\n>>> print(proxy)\n'103.133.222.151:8080'\n```\n\n\u5728 Scrapy \u4e2d\u4f7f\u7528 stand \u4f5c\u4e3a\u4ee3\u7406\n\n```python\nimport scrapy\nfrom scrapy.crawler import CrawlerProcess\n\n\nclass TestSpider(scrapy.Spider):\n    name = 'test'\n    start_urls = ['https://api.ip.sb/ip']\n\n    def parse(self, response):\n        print(response.meta['proxy'])\n        print(response.text)\n\n\nDOWNLOADER_MIDDLEWARES = {\n    'stand.UserAgentMiddleware': 543,\n    'stand.ProxyMiddleware': 600,\n}\nsettings = dict(\n    LOG_ENABLED=False,\n    DOWNLOAD_TIMEOUT=30,\n    DOWNLOADER_MIDDLEWARES=DOWNLOADER_MIDDLEWARES,\n)\n\n\ndef run():\n    process = CrawlerProcess(settings)\n    process.crawl(TestSpider)\n    process.start()\n\n\nif __name__ == \"__main__\":\n    run()\n```\n\n## \u9879\u76ee\u8bf4\u660e\n\n1. \u5f53\u542f\u52a8 `stand` \u65f6, \u9996\u5148\u4f1a\u8fd0\u884c `crawl` \u51fd\u6570\u4ece\u4ee3\u7406\u7f51\u7ad9\u722c\u53d6\u4ee3\u7406 IP, \u5e76\u5c06\u722c\u53d6\u5230\u7684\u7ed3\u679c\u5b58\u50a8\u5728\u540d\u4e3a stand.db (\u53ef\u901a\u8fc7 `STAND_DIR` \u73af\u5883\u53d8\u91cf\u8bbe\u7f6e\u4fdd\u5b58\u76ee\u5f55) \u7684 SQLite \u6570\u636e\u5e93\u4e2d, \u6bcf\u4e2a IP \u6709\u4e00\u4e2a\u521d\u59cb\u5206\u6570 2\n2. \u7136\u540e\u4f1a\u8fd0\u884c `validate` \u51fd\u6570\u9a8c\u8bc1\u4ee3\u7406 IP \u7684\u6709\u6548\u6027, \u9a8c\u8bc1\u901a\u8fc7\u5206\u6570\u8bbe\u7f6e\u4e3a\u6700\u9ad8\u503c 3, \u9a8c\u8bc1\u5931\u8d25\u5206\u6570\u51cf 1, \u5f53\u5206\u6570\u4e3a 0 \u65f6\u5220\u9664\u8be5 IP\n3. \u4e4b\u540e\u4f1a\u5b9a\u65f6\u8fd0\u884c `crawl` \u548c `validate` \u51fd\u6570\u5206\u522b\u722c\u53d6\u548c\u9a8c\u8bc1 IP, \u6bcf20\u5206\u949f\u722c\u53d6\u4e00\u6b21 IP, \u6bcf60\u5206\u949f\u9a8c\u8bc1\u4e00\u6b21 IP\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/lin-zone/stand", "keywords": "", "license": "MIT", "maintainer": "lin-zone", "maintainer_email": "z_one10@163.com", "name": "stand", "package_url": "https://pypi.org/project/stand/", "platform": "", "project_url": "https://pypi.org/project/stand/", "project_urls": {"Homepage": "https://github.com/lin-zone/stand"}, "release_url": "https://pypi.org/project/stand/0.1.11/", "requires_dist": ["Scrapy (==1.8.0)", "fake-useragent (==0.1.11)", "peewee (==3.12.0)", "schedule (==0.6.0)"], "requires_python": ">=3.6,<4.0", "summary": "IP\u4ee3\u7406\u6c60", "version": "0.1.11", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>IP \u4ee3\u7406\u6c60</h1>\n<h2>\u5b89\u88c5</h2>\n<pre>pip install stand\n</pre>\n<h2>\u542f\u52a8</h2>\n<pre>stand\n</pre>\n<h2>\u4f7f\u7528</h2>\n<pre><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">stand</span> <span class=\"kn\">import</span> <span class=\"n\">get_proxy</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">proxy</span> <span class=\"o\">=</span> <span class=\"n\">get_proxy</span><span class=\"p\">()</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">proxy</span><span class=\"p\">)</span>\n<span class=\"s1\">'103.133.222.151:8080'</span>\n</pre>\n<p>\u5728 Scrapy \u4e2d\u4f7f\u7528 stand \u4f5c\u4e3a\u4ee3\u7406</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">scrapy</span>\n<span class=\"kn\">from</span> <span class=\"nn\">scrapy.crawler</span> <span class=\"kn\">import</span> <span class=\"n\">CrawlerProcess</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">TestSpider</span><span class=\"p\">(</span><span class=\"n\">scrapy</span><span class=\"o\">.</span><span class=\"n\">Spider</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s1\">'test'</span>\n    <span class=\"n\">start_urls</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'https://api.ip.sb/ip'</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"p\">):</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">meta</span><span class=\"p\">[</span><span class=\"s1\">'proxy'</span><span class=\"p\">])</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">text</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">DOWNLOADER_MIDDLEWARES</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s1\">'stand.UserAgentMiddleware'</span><span class=\"p\">:</span> <span class=\"mi\">543</span><span class=\"p\">,</span>\n    <span class=\"s1\">'stand.ProxyMiddleware'</span><span class=\"p\">:</span> <span class=\"mi\">600</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n<span class=\"n\">settings</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">(</span>\n    <span class=\"n\">LOG_ENABLED</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span>\n    <span class=\"n\">DOWNLOAD_TIMEOUT</span><span class=\"o\">=</span><span class=\"mi\">30</span><span class=\"p\">,</span>\n    <span class=\"n\">DOWNLOADER_MIDDLEWARES</span><span class=\"o\">=</span><span class=\"n\">DOWNLOADER_MIDDLEWARES</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">run</span><span class=\"p\">():</span>\n    <span class=\"n\">process</span> <span class=\"o\">=</span> <span class=\"n\">CrawlerProcess</span><span class=\"p\">(</span><span class=\"n\">settings</span><span class=\"p\">)</span>\n    <span class=\"n\">process</span><span class=\"o\">.</span><span class=\"n\">crawl</span><span class=\"p\">(</span><span class=\"n\">TestSpider</span><span class=\"p\">)</span>\n    <span class=\"n\">process</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">run</span><span class=\"p\">()</span>\n</pre>\n<h2>\u9879\u76ee\u8bf4\u660e</h2>\n<ol>\n<li>\u5f53\u542f\u52a8 <code>stand</code> \u65f6, \u9996\u5148\u4f1a\u8fd0\u884c <code>crawl</code> \u51fd\u6570\u4ece\u4ee3\u7406\u7f51\u7ad9\u722c\u53d6\u4ee3\u7406 IP, \u5e76\u5c06\u722c\u53d6\u5230\u7684\u7ed3\u679c\u5b58\u50a8\u5728\u540d\u4e3a stand.db (\u53ef\u901a\u8fc7 <code>STAND_DIR</code> \u73af\u5883\u53d8\u91cf\u8bbe\u7f6e\u4fdd\u5b58\u76ee\u5f55) \u7684 SQLite \u6570\u636e\u5e93\u4e2d, \u6bcf\u4e2a IP \u6709\u4e00\u4e2a\u521d\u59cb\u5206\u6570 2</li>\n<li>\u7136\u540e\u4f1a\u8fd0\u884c <code>validate</code> \u51fd\u6570\u9a8c\u8bc1\u4ee3\u7406 IP \u7684\u6709\u6548\u6027, \u9a8c\u8bc1\u901a\u8fc7\u5206\u6570\u8bbe\u7f6e\u4e3a\u6700\u9ad8\u503c 3, \u9a8c\u8bc1\u5931\u8d25\u5206\u6570\u51cf 1, \u5f53\u5206\u6570\u4e3a 0 \u65f6\u5220\u9664\u8be5 IP</li>\n<li>\u4e4b\u540e\u4f1a\u5b9a\u65f6\u8fd0\u884c <code>crawl</code> \u548c <code>validate</code> \u51fd\u6570\u5206\u522b\u722c\u53d6\u548c\u9a8c\u8bc1 IP, \u6bcf20\u5206\u949f\u722c\u53d6\u4e00\u6b21 IP, \u6bcf60\u5206\u949f\u9a8c\u8bc1\u4e00\u6b21 IP</li>\n</ol>\n\n          </div>"}, "last_serial": 6313489, "releases": {"0.1.11": [{"comment_text": "", "digests": {"md5": "c430c3f4460bec0903b61a98dcdac94a", "sha256": "f56d5c9ed595e973a5b5d47fb68906daaa1a7da660b28394a6797fa7ef13f7d3"}, "downloads": -1, "filename": "stand-0.1.11-py3-none-any.whl", "has_sig": false, "md5_digest": "c430c3f4460bec0903b61a98dcdac94a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 9994, "upload_time": "2019-12-16T21:19:50", "upload_time_iso_8601": "2019-12-16T21:19:50.798459Z", "url": "https://files.pythonhosted.org/packages/55/17/0519dc222005c75f214cadcad912c5bac82e5a61705b0b151d7c70d80fa9/stand-0.1.11-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "dcfd9d77c455ce1b41d31fa554271659", "sha256": "12e0ccd425e89ded5ead191c970af9720a11f41d551766cd6c2f3f1e3e1629b2"}, "downloads": -1, "filename": "stand-0.1.11.tar.gz", "has_sig": false, "md5_digest": "dcfd9d77c455ce1b41d31fa554271659", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 7925, "upload_time": "2019-12-16T21:19:52", "upload_time_iso_8601": "2019-12-16T21:19:52.453677Z", "url": "https://files.pythonhosted.org/packages/1c/5d/d7ab516c55f4fc03e33c661221736ab9aafada5d513f958a92cf899d76b1/stand-0.1.11.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "c430c3f4460bec0903b61a98dcdac94a", "sha256": "f56d5c9ed595e973a5b5d47fb68906daaa1a7da660b28394a6797fa7ef13f7d3"}, "downloads": -1, "filename": "stand-0.1.11-py3-none-any.whl", "has_sig": false, "md5_digest": "c430c3f4460bec0903b61a98dcdac94a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 9994, "upload_time": "2019-12-16T21:19:50", "upload_time_iso_8601": "2019-12-16T21:19:50.798459Z", "url": "https://files.pythonhosted.org/packages/55/17/0519dc222005c75f214cadcad912c5bac82e5a61705b0b151d7c70d80fa9/stand-0.1.11-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "dcfd9d77c455ce1b41d31fa554271659", "sha256": "12e0ccd425e89ded5ead191c970af9720a11f41d551766cd6c2f3f1e3e1629b2"}, "downloads": -1, "filename": "stand-0.1.11.tar.gz", "has_sig": false, "md5_digest": "dcfd9d77c455ce1b41d31fa554271659", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 7925, "upload_time": "2019-12-16T21:19:52", "upload_time_iso_8601": "2019-12-16T21:19:52.453677Z", "url": "https://files.pythonhosted.org/packages/1c/5d/d7ab516c55f4fc03e33c661221736ab9aafada5d513f958a92cf899d76b1/stand-0.1.11.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:02:44 2020"}