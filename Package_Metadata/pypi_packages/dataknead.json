{"info": {"author": "Hay Kranen", "author_email": "huskyr@gmail.com", "bugtrack_url": null, "classifiers": ["License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "# dataknead\n\nA fluid Python library and command line utility for processing and converting between common data formats like JSON and CSV.\n\nHave you ever sighed when writing code like this?\n\n```python\nimport csv\nimport json\n\nwith open(\"names.json\") as f:\n    data = json.loads(f.read())\n\ndata = [row[\"name\"] for row in data if \"John\" in row[\"name\"]]\n\nwith open(\"names.csv\", \"w\") as f:\n    writer = csv.writer(f)\n    writer.writerow([\"name\"])\n    [writer.writerow([row]) for row in data]\n```\n\nNow you can write it like this:\n\n```python\nfrom dataknead import Knead\nKnead(\"names.json\").filter(lambda r:\"John\" in r[\"name\"]).write(\"names.csv\")\n```\n\nOr what about simply converting `json` to `csv`? With `dataknead` you get the `knead` command line utility which makes things easy:\n\n```bash\nknead names.json names.csv\n```\n\n`dataknead` has inbuilt loaders for CSV, Excel, JSON and XML and you can easily write your own.\n\n## Installation\nInstall `dataknead` from [PyPi](https://pypi.python.org/pypi/dataknead)\n\n```shell\npip install dataknead\n```\n\nThen import\n\n```python\nfrom dataknead import Knead\n```\n\n## Basic example and tutorial\n\nLet's say you have a small CSV file with cities and their population called `cities.csv`.\n\n```csv\ncity,country,population\nAmsterdam,nl,850000\nRotterdam,nl,635000\nVenice,it,265000\n```\n\nAnd you want to load this csv file and transform it to a json file.\n\n```python\nfrom dataknead import Knead\n\nKnead(\"cities.csv\").write(\"cities.json\")\n```\n\nYou'll now have a json file called `cities.json` that looks like this:\n\n```json\n[\n    {\n        \"city\" : \"Amsterdam\",\n        \"country\" : \"nl\",\n        \"population\" : 850000\n    },\n    ...\n]\n```\n\nMaybe you just want the city names and write them to a CSV filed called `city-names.csv`.\n\n```python\nfrom dataknead import Knead\n\nKnead(\"cities.csv\").map(\"city\").write(\"city-names.csv\")\n```\n\nThat will give you this list\n```csv\nAmsterdam\nRotterdam\nVenice\n```\n\nNow you want to extract only the cities that are located in Italy, and write that back to a new csv file called `cities-italy.csv`:\n\n```python\nfrom dataknead import Knead\n\nKnead(\"cities.csv\").filter(lambda r:r[\"country\"] == \"it\").write(\"cities-italy.csv\")\n````\n\nThis gives you this:\n\n```csv\ncity,country,population\nVenice,it,265000\n```\n\nNice huh?\n\n## Advanced example\nCheck out [the advanced example](https://github.com/hay/dataknead/blob/master/tests/advanced_example.py). This also shows you how to do more complex data manipulation using external libraries like [jq](https://stedolan.github.io/jq/).\n\n## Philosophy\n`dataknead` is intended for easy conversion between common data formats and basic manipulation. It's not a replacement for more complex libraries like `pandas` or `numpy`, but instead can be a useful addition to those libraries.\n\nThe API is as minimal as possible and [fluent](https://en.wikipedia.org/wiki/Fluent_interface).\n\nI try to use as many existing and well-tested libraries as possible. For example, the XML loader uses the excellent [`xmltodict`](https://github.com/martinblech/xmltodict) module.\n\n## Command line utility (`knead`)\n\n`dataknead` includes the `knead` command line utility you can use for simple conversion of data formats.\n\n    knead cities.csv cities.json\n\nWill transform a filed called `cities.csv` to a file called `cities.json` and is equivalent to this piece of Python code\n\n    Knead(\"cities.csv\").write(\"cities.json\")\n\n`knead` can also be used as a quick way of viewing the contents of a file, just give it an input file\n\n    knead cities.csv\n\nThis is equivalant to\n\n    print(Knead(\"cities.csv\").data())\n\nYou can also specify the input and output formats, when those are not available in the file extension, or if you want to overwrite them. This is useful in combination with the `--stdin` option, which allows you to take data from stdin and directly transform output from a HTTP API to something else.\n\nFor example, this API request gives you back a JSON summary of the article for Amsterdam on the English Wikipedia.\n\n    curl https://en.wikipedia.org/api/rest_v1/page/summary/Amsterdam\n\nPiping that into dataknead using --stdin and -if json gives you a nicely formatted file\n\n    curl https://en.wikipedia.org/api/rest_v1/page/summary/Amsterdam | knead --stdin -if json\n\n## API\n\n### *class* `dataknead.Knead(`*inp, parse_as = None, read_as = None, is_data = False*`)`\nIf `inp` is a string, a filepath is implied and the extension is used to get the correct loader.\n```python\nKnead(\"cities.csv\")\n```\n\nTo overwrite this behaviour (for a file that doesn't have the correct extension), use the `read_as` argument.\n```python\nKnead(\"cities\", read_as=\"csv\")\n```\n\nIf `inp` is not a string, data is implied.\n```python\nKnead([1,2,3])\n```\n\nTo force a string to be used as data instead of a file path, set `is_data` to `True`.\n```python\nKnead(\"http://www.github.com\", is_data = True)\n```\n\nTo force parsing of a string to data (e.g., from a JSON HTTP request), set `parse_as` to the correct format.\n```python\nKnead('{\"error\" : 404}', parse_as=\"json\")\n```\n\nSome loaders might come with extra arguments. E.g. the `csv` loader has an option to force using a header, if it isn't detected automatically\n\n```python\nKnead(\"cities.csv\", has_header = True)\n```\n\n### `add_loader(*loader*)`\nAdd a new loader to the `Knead` instance. Read the section on [extending dataknead](#extending-dataknead) on how to write your own loader.\n\n```python\nKnead.add_loader(YamlLoader)\n```\n\n### `apply(`*fn*`)`\nRuns all data through a function.\n```python\nprint(Knead([\"a\", \"b\", \"c\"]).apply(lambda x:\"\".join(x))) # 'abc'\n```\n\n### `data(`*check_instance = None*`)`\nReturns the parsed data.\n```python\ndata = Knead(\"cities.csv\").data()\n```\n\nTo raise an exception for an invalid instance, pass that to `check_instance`.\n```python\ndata = Knead(\"cities.csv\").data(check_instance = dict)\n```\n\n### `filter(`*fn*`)`\nRun a function over the data and only keep the elements that return `True` in that functon.\n```python\nKnead(\"cities.csv\").filter(lambda city:city[\"country\"] == \"it\").write(\"cities-italy.csv\")\n\n# Or do this\ndef is_italian(city):\n    return city[\"country\"]  == \"it\"\n\nKnead(\"cities.csv\").filter(is_italian).write(\"cities-italy.csv\")\n```\n\n### `keys()`\nReturns the keys of the data.\n\n### `map(`*fn* | *str* | *tuple*`)`\nRun a function over all elements in the data.\n```python\nKnead(\"cities.csv\").map(lambda city:city[\"city\"].upper()).write(\"cities-uppercased.json\")\n```\n\nTo return one key in every item, you can pass a string as a shortcut:\n```python\nKnead(\"cities.csv\").map(\"city\").write(\"city-names.csv\")\n\n# Is the same as\n\nKnead(\"cities.csv\").map(lambda c:c[\"city\"]).write(\"city-names.csv\")\n```\n\nTo return multiple keys with values, you can use a tuple:\n```python\nKnead(\"cities.csv\").map((\"city\", \"country\")).write(\"city-country-names.csv\")\n\n# Is the same as\n\nKnead(\"cities.csv\").map(lambda c:{ \"city\" : c[\"city\"], \"country\" : c[\"country\"] }).write(\"city-country-names.csv\")\n\n# Or\n\ndef mapcity(city):\n    return {\n        \"city\" : city[\"city\"],\n        \"country\" : city[\"country\"]\n    }\n\nKnead(\"cities.csv\").map(mapcity).write(\"city-country-names.csv\")\n\n```\n\n### `values()`\nReturns values of the data.\n\n### `write(`*path, write_as = None*`)`\nWrites the data to a file. Type is implied by file extension.\n```python\nKnead(\"cities.csv\").write(\"cities.json\")\n```\n\nTo force the type to something else, pass the format to `write_as`.\n```python\nKnead(\"cities.csv\").map(\"city\").write(\"cities.txt\", write_as=\"csv\")\n```\n\nSome of the loaders have extra options you can pass to `write`:\n```Python\nKnead(\"cities.csv\").write(\"cities.json\", indent = 4)\nKnead(\"cities.csv\").map(\"city\").write(\"ciites.csv\", fieldnames=[\"city\"])\n```\n\n## Extending dataknead\nYou can write your own loaders to read and write other formats than the default ones. For an example take a look at the [YAML example](https://github.com/hay/dataknead/blob/master/tests/yaml_example.py).\n\n## Remarks\n* Note that `dataknead` is Python 3-only.\n\n## Credits\nWritten by [Hay Kranen](https://www.haykranen.nl).\n\n## License\nLicensed under the [MIT license](https://opensource.org/licenses/MIT).\n\n## Development information\nIf you want to work on `dataknead` follow these steps\n\nClone the repo\n\n    git clone https://github.com/hay/dataknead\n\nAnd use [Poetry](https://python-poetry.org/) to install dependencies\n\n    poetry install\n\nOr alternatively\n\n    pip install pandas pyyaml xlrd xlwt xmltodict\n\nYou might need to install a couple of dependencies beforehand\n\n    pip install wheel\n\nAnd (depending on your OS) some other deps too. For Debian / Ubuntu try\n\n    apt install build-essential autoconf libtool automake\n\n## Release history\n\n### 0.3\n* Breaking change: removed the `query` method: the focus of `dataknead` is on conversion. Using `apply` you can easily use a tool like `jq` to query.\n\n### 0.2\n* Adding tuple shortcut to `map` (#2)\n* Adding support for `txt` files ((#4)\n* Adding support for loader constructor argument passing, and adding a `has_header` option to `CsvLoader` (#5)\n\n### 0.1\nInitial release", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/hay/dataknead", "keywords": "data,json,csv,datascience,conversion", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "dataknead", "package_url": "https://pypi.org/project/dataknead/", "platform": "", "project_url": "https://pypi.org/project/dataknead/", "project_urls": {"Homepage": "https://github.com/hay/dataknead", "Repository": "https://github.com/hay/dataknead"}, "release_url": "https://pypi.org/project/dataknead/0.3.1/", "requires_dist": ["xlwt (>=1.3,<2.0)", "pyyaml (>=5.1,<6.0)", "openpyxl (>=3.0.3,<4.0.0)", "xmltodict (>=0.12.0,<0.13.0)", "xlrd (>=1.2,<2.0)", "pandas (>=0.24.2,<0.25.0)"], "requires_python": ">=3.6,<4.0", "summary": "A fluid Python library and command line utility for processing and converting between data formats like JSON and CSV.", "version": "0.3.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>dataknead</h1>\n<p>A fluid Python library and command line utility for processing and converting between common data formats like JSON and CSV.</p>\n<p>Have you ever sighed when writing code like this?</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">csv</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">\"names.json\"</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">())</span>\n\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">row</span><span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">]</span> <span class=\"k\">for</span> <span class=\"n\">row</span> <span class=\"ow\">in</span> <span class=\"n\">data</span> <span class=\"k\">if</span> <span class=\"s2\">\"John\"</span> <span class=\"ow\">in</span> <span class=\"n\">row</span><span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">]]</span>\n\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">\"names.csv\"</span><span class=\"p\">,</span> <span class=\"s2\">\"w\"</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n    <span class=\"n\">writer</span> <span class=\"o\">=</span> <span class=\"n\">csv</span><span class=\"o\">.</span><span class=\"n\">writer</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">)</span>\n    <span class=\"n\">writer</span><span class=\"o\">.</span><span class=\"n\">writerow</span><span class=\"p\">([</span><span class=\"s2\">\"name\"</span><span class=\"p\">])</span>\n    <span class=\"p\">[</span><span class=\"n\">writer</span><span class=\"o\">.</span><span class=\"n\">writerow</span><span class=\"p\">([</span><span class=\"n\">row</span><span class=\"p\">])</span> <span class=\"k\">for</span> <span class=\"n\">row</span> <span class=\"ow\">in</span> <span class=\"n\">data</span><span class=\"p\">]</span>\n</pre>\n<p>Now you can write it like this:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">dataknead</span> <span class=\"kn\">import</span> <span class=\"n\">Knead</span>\n<span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"names.json\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">r</span><span class=\"p\">:</span><span class=\"s2\">\"John\"</span> <span class=\"ow\">in</span> <span class=\"n\">r</span><span class=\"p\">[</span><span class=\"s2\">\"name\"</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"names.csv\"</span><span class=\"p\">)</span>\n</pre>\n<p>Or what about simply converting <code>json</code> to <code>csv</code>? With <code>dataknead</code> you get the <code>knead</code> command line utility which makes things easy:</p>\n<pre>knead names.json names.csv\n</pre>\n<p><code>dataknead</code> has inbuilt loaders for CSV, Excel, JSON and XML and you can easily write your own.</p>\n<h2>Installation</h2>\n<p>Install <code>dataknead</code> from <a href=\"https://pypi.python.org/pypi/dataknead\" rel=\"nofollow\">PyPi</a></p>\n<pre>pip install dataknead\n</pre>\n<p>Then import</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">dataknead</span> <span class=\"kn\">import</span> <span class=\"n\">Knead</span>\n</pre>\n<h2>Basic example and tutorial</h2>\n<p>Let's say you have a small CSV file with cities and their population called <code>cities.csv</code>.</p>\n<pre>city,country,population\nAmsterdam,nl,850000\nRotterdam,nl,635000\nVenice,it,265000\n</pre>\n<p>And you want to load this csv file and transform it to a json file.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">dataknead</span> <span class=\"kn\">import</span> <span class=\"n\">Knead</span>\n\n<span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"cities.json\"</span><span class=\"p\">)</span>\n</pre>\n<p>You'll now have a json file called <code>cities.json</code> that looks like this:</p>\n<pre><span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n        <span class=\"nt\">\"city\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"Amsterdam\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"country\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"nl\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"population\"</span> <span class=\"p\">:</span> <span class=\"mi\">850000</span>\n    <span class=\"p\">},</span>\n    <span class=\"err\">...</span>\n<span class=\"p\">]</span>\n</pre>\n<p>Maybe you just want the city names and write them to a CSV filed called <code>city-names.csv</code>.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">dataknead</span> <span class=\"kn\">import</span> <span class=\"n\">Knead</span>\n\n<span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"s2\">\"city\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"city-names.csv\"</span><span class=\"p\">)</span>\n</pre>\n<p>That will give you this list</p>\n<pre>Amsterdam\nRotterdam\nVenice\n</pre>\n<p>Now you want to extract only the cities that are located in Italy, and write that back to a new csv file called <code>cities-italy.csv</code>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">dataknead</span> <span class=\"kn\">import</span> <span class=\"n\">Knead</span>\n\n<span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">r</span><span class=\"p\">:</span><span class=\"n\">r</span><span class=\"p\">[</span><span class=\"s2\">\"country\"</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">\"it\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"cities-italy.csv\"</span><span class=\"p\">)</span>\n</pre>\n<p>This gives you this:</p>\n<pre>city,country,population\nVenice,it,265000\n</pre>\n<p>Nice huh?</p>\n<h2>Advanced example</h2>\n<p>Check out <a href=\"https://github.com/hay/dataknead/blob/master/tests/advanced_example.py\" rel=\"nofollow\">the advanced example</a>. This also shows you how to do more complex data manipulation using external libraries like <a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow\">jq</a>.</p>\n<h2>Philosophy</h2>\n<p><code>dataknead</code> is intended for easy conversion between common data formats and basic manipulation. It's not a replacement for more complex libraries like <code>pandas</code> or <code>numpy</code>, but instead can be a useful addition to those libraries.</p>\n<p>The API is as minimal as possible and <a href=\"https://en.wikipedia.org/wiki/Fluent_interface\" rel=\"nofollow\">fluent</a>.</p>\n<p>I try to use as many existing and well-tested libraries as possible. For example, the XML loader uses the excellent <a href=\"https://github.com/martinblech/xmltodict\" rel=\"nofollow\"><code>xmltodict</code></a> module.</p>\n<h2>Command line utility (<code>knead</code>)</h2>\n<p><code>dataknead</code> includes the <code>knead</code> command line utility you can use for simple conversion of data formats.</p>\n<pre><code>knead cities.csv cities.json\n</code></pre>\n<p>Will transform a filed called <code>cities.csv</code> to a file called <code>cities.json</code> and is equivalent to this piece of Python code</p>\n<pre><code>Knead(\"cities.csv\").write(\"cities.json\")\n</code></pre>\n<p><code>knead</code> can also be used as a quick way of viewing the contents of a file, just give it an input file</p>\n<pre><code>knead cities.csv\n</code></pre>\n<p>This is equivalant to</p>\n<pre><code>print(Knead(\"cities.csv\").data())\n</code></pre>\n<p>You can also specify the input and output formats, when those are not available in the file extension, or if you want to overwrite them. This is useful in combination with the <code>--stdin</code> option, which allows you to take data from stdin and directly transform output from a HTTP API to something else.</p>\n<p>For example, this API request gives you back a JSON summary of the article for Amsterdam on the English Wikipedia.</p>\n<pre><code>curl https://en.wikipedia.org/api/rest_v1/page/summary/Amsterdam\n</code></pre>\n<p>Piping that into dataknead using --stdin and -if json gives you a nicely formatted file</p>\n<pre><code>curl https://en.wikipedia.org/api/rest_v1/page/summary/Amsterdam | knead --stdin -if json\n</code></pre>\n<h2>API</h2>\n<h3><em>class</em> <code>dataknead.Knead(</code><em>inp, parse_as = None, read_as = None, is_data = False</em><code>)</code></h3>\n<p>If <code>inp</code> is a string, a filepath is implied and the extension is used to get the correct loader.</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span>\n</pre>\n<p>To overwrite this behaviour (for a file that doesn't have the correct extension), use the <code>read_as</code> argument.</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities\"</span><span class=\"p\">,</span> <span class=\"n\">read_as</span><span class=\"o\">=</span><span class=\"s2\">\"csv\"</span><span class=\"p\">)</span>\n</pre>\n<p>If <code>inp</code> is not a string, data is implied.</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">])</span>\n</pre>\n<p>To force a string to be used as data instead of a file path, set <code>is_data</code> to <code>True</code>.</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"http://www.github.com\"</span><span class=\"p\">,</span> <span class=\"n\">is_data</span> <span class=\"o\">=</span> <span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>To force parsing of a string to data (e.g., from a JSON HTTP request), set <code>parse_as</code> to the correct format.</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s1\">'{\"error\" : 404}'</span><span class=\"p\">,</span> <span class=\"n\">parse_as</span><span class=\"o\">=</span><span class=\"s2\">\"json\"</span><span class=\"p\">)</span>\n</pre>\n<p>Some loaders might come with extra arguments. E.g. the <code>csv</code> loader has an option to force using a header, if it isn't detected automatically</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">,</span> <span class=\"n\">has_header</span> <span class=\"o\">=</span> <span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<h3><code>add_loader(*loader*)</code></h3>\n<p>Add a new loader to the <code>Knead</code> instance. Read the section on <a href=\"#extending-dataknead\" rel=\"nofollow\">extending dataknead</a> on how to write your own loader.</p>\n<pre><span class=\"n\">Knead</span><span class=\"o\">.</span><span class=\"n\">add_loader</span><span class=\"p\">(</span><span class=\"n\">YamlLoader</span><span class=\"p\">)</span>\n</pre>\n<h3><code>apply(</code><em>fn</em><code>)</code></h3>\n<p>Runs all data through a function.</p>\n<pre><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">Knead</span><span class=\"p\">([</span><span class=\"s2\">\"a\"</span><span class=\"p\">,</span> <span class=\"s2\">\"b\"</span><span class=\"p\">,</span> <span class=\"s2\">\"c\"</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">apply</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">x</span><span class=\"p\">:</span><span class=\"s2\">\"\"</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)))</span> <span class=\"c1\"># 'abc'</span>\n</pre>\n<h3><code>data(</code><em>check_instance = None</em><code>)</code></h3>\n<p>Returns the parsed data.</p>\n<pre><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">()</span>\n</pre>\n<p>To raise an exception for an invalid instance, pass that to <code>check_instance</code>.</p>\n<pre><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">(</span><span class=\"n\">check_instance</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">)</span>\n</pre>\n<h3><code>filter(</code><em>fn</em><code>)</code></h3>\n<p>Run a function over the data and only keep the elements that return <code>True</code> in that functon.</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">city</span><span class=\"p\">:</span><span class=\"n\">city</span><span class=\"p\">[</span><span class=\"s2\">\"country\"</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">\"it\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"cities-italy.csv\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Or do this</span>\n<span class=\"k\">def</span> <span class=\"nf\">is_italian</span><span class=\"p\">(</span><span class=\"n\">city</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">city</span><span class=\"p\">[</span><span class=\"s2\">\"country\"</span><span class=\"p\">]</span>  <span class=\"o\">==</span> <span class=\"s2\">\"it\"</span>\n\n<span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">is_italian</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"cities-italy.csv\"</span><span class=\"p\">)</span>\n</pre>\n<h3><code>keys()</code></h3>\n<p>Returns the keys of the data.</p>\n<h3><code>map(</code><em>fn</em> | <em>str</em> | <em>tuple</em><code>)</code></h3>\n<p>Run a function over all elements in the data.</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">city</span><span class=\"p\">:</span><span class=\"n\">city</span><span class=\"p\">[</span><span class=\"s2\">\"city\"</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">upper</span><span class=\"p\">())</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"cities-uppercased.json\"</span><span class=\"p\">)</span>\n</pre>\n<p>To return one key in every item, you can pass a string as a shortcut:</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"s2\">\"city\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"city-names.csv\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Is the same as</span>\n\n<span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">c</span><span class=\"p\">:</span><span class=\"n\">c</span><span class=\"p\">[</span><span class=\"s2\">\"city\"</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"city-names.csv\"</span><span class=\"p\">)</span>\n</pre>\n<p>To return multiple keys with values, you can use a tuple:</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">((</span><span class=\"s2\">\"city\"</span><span class=\"p\">,</span> <span class=\"s2\">\"country\"</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"city-country-names.csv\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Is the same as</span>\n\n<span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">c</span><span class=\"p\">:{</span> <span class=\"s2\">\"city\"</span> <span class=\"p\">:</span> <span class=\"n\">c</span><span class=\"p\">[</span><span class=\"s2\">\"city\"</span><span class=\"p\">],</span> <span class=\"s2\">\"country\"</span> <span class=\"p\">:</span> <span class=\"n\">c</span><span class=\"p\">[</span><span class=\"s2\">\"country\"</span><span class=\"p\">]</span> <span class=\"p\">})</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"city-country-names.csv\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Or</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">mapcity</span><span class=\"p\">(</span><span class=\"n\">city</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"city\"</span> <span class=\"p\">:</span> <span class=\"n\">city</span><span class=\"p\">[</span><span class=\"s2\">\"city\"</span><span class=\"p\">],</span>\n        <span class=\"s2\">\"country\"</span> <span class=\"p\">:</span> <span class=\"n\">city</span><span class=\"p\">[</span><span class=\"s2\">\"country\"</span><span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n\n<span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"n\">mapcity</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"city-country-names.csv\"</span><span class=\"p\">)</span>\n</pre>\n<h3><code>values()</code></h3>\n<p>Returns values of the data.</p>\n<h3><code>write(</code><em>path, write_as = None</em><code>)</code></h3>\n<p>Writes the data to a file. Type is implied by file extension.</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"cities.json\"</span><span class=\"p\">)</span>\n</pre>\n<p>To force the type to something else, pass the format to <code>write_as</code>.</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"s2\">\"city\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"cities.txt\"</span><span class=\"p\">,</span> <span class=\"n\">write_as</span><span class=\"o\">=</span><span class=\"s2\">\"csv\"</span><span class=\"p\">)</span>\n</pre>\n<p>Some of the loaders have extra options you can pass to <code>write</code>:</p>\n<pre><span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"cities.json\"</span><span class=\"p\">,</span> <span class=\"n\">indent</span> <span class=\"o\">=</span> <span class=\"mi\">4</span><span class=\"p\">)</span>\n<span class=\"n\">Knead</span><span class=\"p\">(</span><span class=\"s2\">\"cities.csv\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"s2\">\"city\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"ciites.csv\"</span><span class=\"p\">,</span> <span class=\"n\">fieldnames</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">\"city\"</span><span class=\"p\">])</span>\n</pre>\n<h2>Extending dataknead</h2>\n<p>You can write your own loaders to read and write other formats than the default ones. For an example take a look at the <a href=\"https://github.com/hay/dataknead/blob/master/tests/yaml_example.py\" rel=\"nofollow\">YAML example</a>.</p>\n<h2>Remarks</h2>\n<ul>\n<li>Note that <code>dataknead</code> is Python 3-only.</li>\n</ul>\n<h2>Credits</h2>\n<p>Written by <a href=\"https://www.haykranen.nl\" rel=\"nofollow\">Hay Kranen</a>.</p>\n<h2>License</h2>\n<p>Licensed under the <a href=\"https://opensource.org/licenses/MIT\" rel=\"nofollow\">MIT license</a>.</p>\n<h2>Development information</h2>\n<p>If you want to work on <code>dataknead</code> follow these steps</p>\n<p>Clone the repo</p>\n<pre><code>git clone https://github.com/hay/dataknead\n</code></pre>\n<p>And use <a href=\"https://python-poetry.org/\" rel=\"nofollow\">Poetry</a> to install dependencies</p>\n<pre><code>poetry install\n</code></pre>\n<p>Or alternatively</p>\n<pre><code>pip install pandas pyyaml xlrd xlwt xmltodict\n</code></pre>\n<p>You might need to install a couple of dependencies beforehand</p>\n<pre><code>pip install wheel\n</code></pre>\n<p>And (depending on your OS) some other deps too. For Debian / Ubuntu try</p>\n<pre><code>apt install build-essential autoconf libtool automake\n</code></pre>\n<h2>Release history</h2>\n<h3>0.3</h3>\n<ul>\n<li>Breaking change: removed the <code>query</code> method: the focus of <code>dataknead</code> is on conversion. Using <code>apply</code> you can easily use a tool like <code>jq</code> to query.</li>\n</ul>\n<h3>0.2</h3>\n<ul>\n<li>Adding tuple shortcut to <code>map</code> (#2)</li>\n<li>Adding support for <code>txt</code> files ((#4)</li>\n<li>Adding support for loader constructor argument passing, and adding a <code>has_header</code> option to <code>CsvLoader</code> (#5)</li>\n</ul>\n<h3>0.1</h3>\n<p>Initial release</p>\n\n          </div>"}, "last_serial": 6869204, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "1c64246630faf1c500d3d09434766e28", "sha256": "83c548601a19859c4e90060c8dd1a1e32dc4f70e9065898cad05b907f1ecd1ef"}, "downloads": -1, "filename": "dataknead-0.1.0.tar.gz", "has_sig": false, "md5_digest": "1c64246630faf1c500d3d09434766e28", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2788, "upload_time": "2018-02-21T22:58:34", "upload_time_iso_8601": "2018-02-21T22:58:34.352631Z", "url": "https://files.pythonhosted.org/packages/bb/f9/f63ad4688aec1f8829738f2b12ef206fa234dacc516eb867ad72fd5b5344/dataknead-0.1.0.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "bee138c231e2eea96bc202a6684191fc", "sha256": "4c8358267efd37a09cecfca7de3ba042fac4a8db8067a10edb5d2a4a98a9f179"}, "downloads": -1, "filename": "dataknead-0.2.0.tar.gz", "has_sig": false, "md5_digest": "bee138c231e2eea96bc202a6684191fc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 2979, "upload_time": "2018-05-07T22:26:13", "upload_time_iso_8601": "2018-05-07T22:26:13.643299Z", "url": "https://files.pythonhosted.org/packages/b7/d6/1958ecb13487fcf55be1e590a5e152afb31e8db7c881e662219639769484/dataknead-0.2.0.tar.gz", "yanked": false}], "0.3.0": [{"comment_text": "", "digests": {"md5": "6d7d5848593448338c65e62f10e00544", "sha256": "26390ef2c6c05b39e65e5c8da28035029d4c3916b41c2c2e675c9fcaa27bf3c0"}, "downloads": -1, "filename": "dataknead-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "6d7d5848593448338c65e62f10e00544", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 8012, "upload_time": "2020-03-22T21:45:40", "upload_time_iso_8601": "2020-03-22T21:45:40.864849Z", "url": "https://files.pythonhosted.org/packages/a2/40/85d77fc18d0058abb552e20d411631b5cd154d201821222148bd473d751f/dataknead-0.3.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "084abcdafffe76c7981895df8ebafd8d", "sha256": "e8d4be543410418e5f544dbafd0fd1af9b837e5239b3d03aeec6ce2b5f2ba60c"}, "downloads": -1, "filename": "dataknead-0.3.0.tar.gz", "has_sig": false, "md5_digest": "084abcdafffe76c7981895df8ebafd8d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 5628, "upload_time": "2020-03-22T21:45:42", "upload_time_iso_8601": "2020-03-22T21:45:42.181656Z", "url": "https://files.pythonhosted.org/packages/f6/ad/4bc1be3d317fcb2cd6a3ef82e101a89e49e8ad06363fd0cd8636fdf639f4/dataknead-0.3.0.tar.gz", "yanked": false}], "0.3.1": [{"comment_text": "", "digests": {"md5": "d347e74cf3e8300e7bfa1ddb8df57ff6", "sha256": "5931e99d74964b4a8e669fcf4e679eba07b20a45bf7b6d7fc5687dd4071d9ab5"}, "downloads": -1, "filename": "dataknead-0.3.1-py3-none-any.whl", "has_sig": false, "md5_digest": "d347e74cf3e8300e7bfa1ddb8df57ff6", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 11366, "upload_time": "2020-03-23T22:33:31", "upload_time_iso_8601": "2020-03-23T22:33:31.277396Z", "url": "https://files.pythonhosted.org/packages/b5/5f/8c55ec18ffcc9aab37a55f9e1f92e4a5454d5cbb863388c81d122cb0cedc/dataknead-0.3.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "242b43240a9cc4c6efe7b2bce7ad0f03", "sha256": "a27b1efa6a58cf3ab905e6da73bf50654185cb1b3bb0993b1d1222367195d720"}, "downloads": -1, "filename": "dataknead-0.3.1.tar.gz", "has_sig": false, "md5_digest": "242b43240a9cc4c6efe7b2bce7ad0f03", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 12823, "upload_time": "2020-03-23T22:33:32", "upload_time_iso_8601": "2020-03-23T22:33:32.849818Z", "url": "https://files.pythonhosted.org/packages/74/6b/0e5914706e0e078e7c85b1c8963f65bbb38947b6f8660636921f273c42d9/dataknead-0.3.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d347e74cf3e8300e7bfa1ddb8df57ff6", "sha256": "5931e99d74964b4a8e669fcf4e679eba07b20a45bf7b6d7fc5687dd4071d9ab5"}, "downloads": -1, "filename": "dataknead-0.3.1-py3-none-any.whl", "has_sig": false, "md5_digest": "d347e74cf3e8300e7bfa1ddb8df57ff6", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 11366, "upload_time": "2020-03-23T22:33:31", "upload_time_iso_8601": "2020-03-23T22:33:31.277396Z", "url": "https://files.pythonhosted.org/packages/b5/5f/8c55ec18ffcc9aab37a55f9e1f92e4a5454d5cbb863388c81d122cb0cedc/dataknead-0.3.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "242b43240a9cc4c6efe7b2bce7ad0f03", "sha256": "a27b1efa6a58cf3ab905e6da73bf50654185cb1b3bb0993b1d1222367195d720"}, "downloads": -1, "filename": "dataknead-0.3.1.tar.gz", "has_sig": false, "md5_digest": "242b43240a9cc4c6efe7b2bce7ad0f03", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 12823, "upload_time": "2020-03-23T22:33:32", "upload_time_iso_8601": "2020-03-23T22:33:32.849818Z", "url": "https://files.pythonhosted.org/packages/74/6b/0e5914706e0e078e7c85b1c8963f65bbb38947b6f8660636921f273c42d9/dataknead-0.3.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:40:21 2020"}