{"info": {"author": "German Gomez-Herrero, FindHotel BV", "author_email": "german@findhotel.net", "bugtrack_url": null, "classifiers": ["Programming Language :: Python :: 3"], "description": "Custom CF resource to decrypt secrets in CF templates\n=====================================================\n\n|PyPI|\n\nA `humilis <https://github.com/humilis/blob/master/README.md>`__ plug-in\nlayer that deploys a custom Cloudformation (CF) resource that can be\nused to decrypt secrets that are embedded in CF templates.\n\n**CREDIT:** All credit goes to `Casecommons\nlambda-cfn-kms <https://github.com/Casecommons/lambda-cfn-kms>`__. This\nrepo is just the result of bundling the ``lambda-cfn-kms`` repository as\na humilis plugin.\n\nInstallation\n------------\n\n::\n\n    pip install humilis-decrypt\n\nTo install the development version:\n\n::\n\n    pip install git+https://github.com/humilis/humilis-decrypt\n\nDevelopment\n-----------\n\nAssuming you have\n`virtualenv <https://virtualenv.readthedocs.org/en/latest/>`__\ninstalled:\n\n::\n\n    make develop\n\nConfigure humilis:\n\n::\n\n    make configure\n\nHow does it work?\n-----------------\n\nFirst create the Lambda function that backs the custom resource:\n\n::\n\n    make create\n\nThe deployment will produce two artifacts:\n\n-  The ID of the KMS key associated with the custom resource.\n-  The ARN of the deployed Lambda function.\n\nYou can use the KMS key ID to encrypt your secrets locally, e.g.\nassuming you want to encrypt the dummy DB password ``dummy`` with key\n``3ea941bf-ee54-4941-8f77-f1dd417667cd``:\n\n::\n\n    aws kms encrypt --key-id 3ea941bf-ee54-4941-8f77-f1dd417667cd --plaintext 'dummy'\n\nThe output will be something like this:\n\n::\n\n    {\n        \"CiphertextBlob\": \"AQICAHi2zdvZYfUQOQV8yX/HLdcIMqHHkubAYAei2Qo498KheQFDELPYHds8169cc9EqggEuAAAAZjBkBgkqhkiG9w0BBwagVzBVAgEAMFAGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQM+gDfP3DDVgbFYNidAgEQgCMrz1beR+s0XqWTVIuCbJ+E/cC7sqUzmPEB0weOhQ3GOE65rg==\",\n        \"KeyId\": \"arn:aws:kms:eu-west-1:XXXXX:key/a86x4dd8-6b8e-41ce-aa65-4aa370d9ccbf\"\n    }\n\nWhenever you want to use your secret in a CF template you would do\nsomething like this:\n\n::\n\n    ---\n    resources:\n      DbPasswordDecrypt:\n        Type: \"Custom::KMSDecrypt\"\n        Properties:\n          ServiceToken: <lambda_function_arn>\n          Ciphertext: \"AQICAHi2zdvZYfUQOQV8yX/HLdcIMqHHkubAYAei2Qo498KheQFDELPYHds8169cc9EqggEuAAAAZjBkBgkqhkiG9w0BBwagVzBVAgEAMFAGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQM+gDfP3DDVgbFYNidAgEQgCMrz1beR+s0XqWTVIuCbJ+E/cC7sqUzmPEB0weOhQ3GOE65rg==\"\n      DbInstance:\n        Type: \"AWS::RDS::DBInstance\"\n        Properties:\n          AllocatedStorage: \"20\"\n          DBInstanceClass: \"db.m1.small\"\n          Engine: \"MySQL\"\n          EngineVersion: \"5.5\"\n          MasterUsername: \"admin\"\n          MasterUserPassword:\n            Fn::Sub: ${DbPasswordDecrypt.Plaintext}\n\nwhere you will need to replace ``<lambda_function_arn>`` with the ARN of\nthe Lambda function that backs the custom CF resource that implements\nthe decryption logic.\n\nMore information\n----------------\n\nSee `humilis <https://github.com/humilis/blob/master/README.md>`__\ndocumentation.\n\nContact\n-------\n\nIf you have questions, bug reports, suggestions, etc. please create an\nissue on the `GitHub project\npage <http://github.com/humilis/humilis-decrypt>`__.\n\nLicense\n-------\n\nSee the original license in the\n`lambda-cfn-kms <https://github.com/Casecommons/lambda-cfn-kms#license>`__\nrepository.\n\n.. |PyPI| image:: https://img.shields.io/pypi/v/humilis-decrypt.svg?style=flat\n   :target: https://pypi.python.org/pypi/humilis-decrypt\n", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/humilis/humilis-decrypt", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "humilis-decrypt", "package_url": "https://pypi.org/project/humilis-decrypt/", "platform": "", "project_url": "https://pypi.org/project/humilis-decrypt/", "project_urls": {"Homepage": "https://github.com/humilis/humilis-decrypt"}, "release_url": "https://pypi.org/project/humilis-decrypt/0.0.2/", "requires_dist": null, "requires_python": "", "summary": "Humilis plug-in to deploy a Lambda humilis_decrypt", "version": "0.0.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p><a href=\"https://pypi.python.org/pypi/humilis-decrypt\" rel=\"nofollow\"><img alt=\"PyPI\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/88f897783e1d0e4125bb27578f3f2c6cc290d4c7/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f68756d696c69732d646563727970742e7376673f7374796c653d666c6174\"></a></p>\n<p>A <a href=\"https://github.com/humilis/blob/master/README.md\" rel=\"nofollow\">humilis</a> plug-in\nlayer that deploys a custom Cloudformation (CF) resource that can be\nused to decrypt secrets that are embedded in CF templates.</p>\n<p><strong>CREDIT:</strong> All credit goes to <a href=\"https://github.com/Casecommons/lambda-cfn-kms\" rel=\"nofollow\">Casecommons\nlambda-cfn-kms</a>. This\nrepo is just the result of bundling the <tt><span class=\"pre\">lambda-cfn-kms</span></tt> repository as\na humilis plugin.</p>\n<div id=\"installation\">\n<h2>Installation</h2>\n<pre>pip install humilis-decrypt\n</pre>\n<p>To install the development version:</p>\n<pre>pip install git+https://github.com/humilis/humilis-decrypt\n</pre>\n</div>\n<div id=\"development\">\n<h2>Development</h2>\n<p>Assuming you have\n<a href=\"https://virtualenv.readthedocs.org/en/latest/\" rel=\"nofollow\">virtualenv</a>\ninstalled:</p>\n<pre>make develop\n</pre>\n<p>Configure humilis:</p>\n<pre>make configure\n</pre>\n</div>\n<div id=\"how-does-it-work\">\n<h2>How does it work?</h2>\n<p>First create the Lambda function that backs the custom resource:</p>\n<pre>make create\n</pre>\n<p>The deployment will produce two artifacts:</p>\n<ul>\n<li>The ID of the KMS key associated with the custom resource.</li>\n<li>The ARN of the deployed Lambda function.</li>\n</ul>\n<p>You can use the KMS key ID to encrypt your secrets locally, e.g.\nassuming you want to encrypt the dummy DB password <tt>dummy</tt> with key\n<tt><span class=\"pre\">3ea941bf-ee54-4941-8f77-f1dd417667cd</span></tt>:</p>\n<pre>aws kms encrypt --key-id 3ea941bf-ee54-4941-8f77-f1dd417667cd --plaintext 'dummy'\n</pre>\n<p>The output will be something like this:</p>\n<pre>{\n    \"CiphertextBlob\": \"AQICAHi2zdvZYfUQOQV8yX/HLdcIMqHHkubAYAei2Qo498KheQFDELPYHds8169cc9EqggEuAAAAZjBkBgkqhkiG9w0BBwagVzBVAgEAMFAGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQM+gDfP3DDVgbFYNidAgEQgCMrz1beR+s0XqWTVIuCbJ+E/cC7sqUzmPEB0weOhQ3GOE65rg==\",\n    \"KeyId\": \"arn:aws:kms:eu-west-1:XXXXX:key/a86x4dd8-6b8e-41ce-aa65-4aa370d9ccbf\"\n}\n</pre>\n<p>Whenever you want to use your secret in a CF template you would do\nsomething like this:</p>\n<pre>---\nresources:\n  DbPasswordDecrypt:\n    Type: \"Custom::KMSDecrypt\"\n    Properties:\n      ServiceToken: &lt;lambda_function_arn&gt;\n      Ciphertext: \"AQICAHi2zdvZYfUQOQV8yX/HLdcIMqHHkubAYAei2Qo498KheQFDELPYHds8169cc9EqggEuAAAAZjBkBgkqhkiG9w0BBwagVzBVAgEAMFAGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQM+gDfP3DDVgbFYNidAgEQgCMrz1beR+s0XqWTVIuCbJ+E/cC7sqUzmPEB0weOhQ3GOE65rg==\"\n  DbInstance:\n    Type: \"AWS::RDS::DBInstance\"\n    Properties:\n      AllocatedStorage: \"20\"\n      DBInstanceClass: \"db.m1.small\"\n      Engine: \"MySQL\"\n      EngineVersion: \"5.5\"\n      MasterUsername: \"admin\"\n      MasterUserPassword:\n        Fn::Sub: ${DbPasswordDecrypt.Plaintext}\n</pre>\n<p>where you will need to replace <tt>&lt;lambda_function_arn&gt;</tt> with the ARN of\nthe Lambda function that backs the custom CF resource that implements\nthe decryption logic.</p>\n</div>\n<div id=\"more-information\">\n<h2>More information</h2>\n<p>See <a href=\"https://github.com/humilis/blob/master/README.md\" rel=\"nofollow\">humilis</a>\ndocumentation.</p>\n</div>\n<div id=\"contact\">\n<h2>Contact</h2>\n<p>If you have questions, bug reports, suggestions, etc. please create an\nissue on the <a href=\"http://github.com/humilis/humilis-decrypt\" rel=\"nofollow\">GitHub project\npage</a>.</p>\n</div>\n<div id=\"license\">\n<h2>License</h2>\n<p>See the original license in the\n<a href=\"https://github.com/Casecommons/lambda-cfn-kms#license\" rel=\"nofollow\">lambda-cfn-kms</a>\nrepository.</p>\n</div>\n\n          </div>"}, "last_serial": 3445046, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "6593c25783b69535d46c1e71b72f166f", "sha256": "473dfd02d84721ac83cf93e4d6b7f72f39939bba6f549f109028f1769a700f51"}, "downloads": -1, "filename": "humilis-decrypt-0.0.1.tar.gz", "has_sig": false, "md5_digest": "6593c25783b69535d46c1e71b72f166f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3754, "upload_time": "2017-05-23T19:55:14", "upload_time_iso_8601": "2017-05-23T19:55:14.822753Z", "url": "https://files.pythonhosted.org/packages/8e/e8/536ec814ce9203ef442a990a47fabb6034a8d6017f1b793986e88e6b9646/humilis-decrypt-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "0d47b570125327976e4897683cedece0", "sha256": "9a1f5bfe5072e156484b52faf9336f26be1985a940248918868980c356d5e94e"}, "downloads": -1, "filename": "humilis-decrypt-0.0.2.tar.gz", "has_sig": false, "md5_digest": "0d47b570125327976e4897683cedece0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5430, "upload_time": "2017-12-27T11:33:14", "upload_time_iso_8601": "2017-12-27T11:33:14.856690Z", "url": "https://files.pythonhosted.org/packages/fc/7e/473794a8f4bc3e7e3102e8f96b11befd249b03abb8b2b3765716e0684457/humilis-decrypt-0.0.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "0d47b570125327976e4897683cedece0", "sha256": "9a1f5bfe5072e156484b52faf9336f26be1985a940248918868980c356d5e94e"}, "downloads": -1, "filename": "humilis-decrypt-0.0.2.tar.gz", "has_sig": false, "md5_digest": "0d47b570125327976e4897683cedece0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 5430, "upload_time": "2017-12-27T11:33:14", "upload_time_iso_8601": "2017-12-27T11:33:14.856690Z", "url": "https://files.pythonhosted.org/packages/fc/7e/473794a8f4bc3e7e3102e8f96b11befd249b03abb8b2b3765716e0684457/humilis-decrypt-0.0.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:49:50 2020"}