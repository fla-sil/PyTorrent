{"info": {"author": "Florian Schulze", "author_email": "florian.schulze@gmx.net", "bugtrack_url": null, "classifiers": ["Environment :: Web Environment", "Intended Audience :: Developers", "Intended Audience :: System Administrators", "License :: OSI Approved :: MIT License", "Programming Language :: Python", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.4"], "description": "devpi-jenkins: Jenkins build trigger for devpi-server\n=====================================================\n\nFor use with devpi-server >= 2.2.0.\n\nInstallation\n------------\n\n``devpi-jenkins`` needs to be installed alongside ``devpi-server``.\n\nYou can install it with::\n\n    pip install devpi-jenkins\n\nFor ``devpi-server`` there is no configuration needed, as it will automatically discover the plugin through calling hooks using the setuptools entry points mechanism.\n\nDetails about configuration below.\n\nConfiguration\n-------------\n\ndevpi-jenkins can trigger Jenkins to test uploaded packages using tox_.\nThis needs configuration on two sides:\n\n- devpi: configuring an index to send POST requests to Jenkins upon upload\n\n- Jenkins: adding one or more jobs which can get triggered by devpi-jenkins.\n\nConfiguring a devpi index to trigger Jenkins\n++++++++++++++++++++++++++++++++++++++++++++\n\nHere is a example command, using a ``/testuser/dev`` index\nand a Jenkins server at http://localhost:8080::\n\n    # needs one Jenkins job for each name of uploaded packages\n    devpi index /testuser/dev uploadtrigger_jenkins=http://localhost:8080/job/{pkgname}/build\n\nAny package which gets uploaded to ``/testuser/dev`` will now trigger\na POST request to the specified url.  The ``{pkgname}`` and\n``{pkgversion}`` strings will be substituted with the name of the\nuploaded package.  You don't need to specify such substitutions,\nhowever, if you rather want to have one generic Jenkins job which\nexecutes all tests for all your uploads::\n\n    # one generic job for all uploaded packages\n    devpi index /testuser/dev uploadtrigger_jenkins=http://localhost:8080/job/multijob/build\n\nThis requires a single ``multijob`` on the Jenkins side whereas the prior\nconfiguration would require a job for each package name that you possibly\nupload.\n\nNote that uploading a package will succeed independently if a build job could\nbe submitted successfully to Jenkins.\n\nConfiguring Jenkins job(s)\n++++++++++++++++++++++++++\n\nOn the Jenkins side, you need to configure one or more jobs which can\nbe triggered by devpi-jenkins.  Each job is configured in the same way:\n\n- go to main Jenkins screen\n\n- hit \"New Job\" and enter a name (\"multijob\" if you want to configure\n  a generic job), then select \"freey style software project\", hit OK.\n\n.. image:: jenkins1.png\n   :align: center\n\n- enable \"This build is parametrized\" and add a \"File Parameter\",\n  setting the file location to ``jobscript.py``.\n\n.. image:: jenkins2.png\n   :align: center\n\n- add a buildstep \"Execute Python script\" (you need to have the Python\n  plugin installed and enabled in Jenkins) and enter\n  ``execfile(\"jobscript.py\")``.\n\n.. image:: jenkins3.png\n   :align: center\n\n- hit \"Save\" for the new build job.\n\nYou can now ``devpi upload`` a package to an index and see Jenkins starting\nafter the upload successfully returns.\n\nBehind the scenes\n+++++++++++++++++\n\nOnce you triggered a job from devpi, you can checkout the ``jobscript.py``\nin the Jenkins workspace to see what was injected.  The injected\nscript roughly follows these steps:\n\n- retrieves a stable virtualenv release through the devpi root/pypi\n  index (i.e. use its caching ability)\n\n- unpack the virtualenv tar ball and run the contained \"virtualenv.py\"\n  script to create a ``_devpi`` environment\n\n- install/upgrade ``devpi-client`` into that environment\n\n- ``devpi use`` the index which we were triggered from\n\n- ``devpi test PKG`` where PKG is the package name that we uploaded.\n\nUploading Sphinx docs\n---------------------\n\nIf you have `Sphinx-based documentation <http://sphinx-doc.org/>`_ you can\nupload the rendered HTML documentation to your devpi server with the following\ncommand::\n\n    devpi upload --with-docs\n\nThis will build and upload Sphinx documentation by configuring and running\nthis command::\n\n    setup.py build_sphinx -E --build-dir $BUILD_DIR \\\n             upload_docs --upload-dir $BUILD_DIR/html\n\nIf you have distutils configured to use a devpi index you can upload\ndocumentation to that index simply by executing::\n\n    python setup.py upload_docs\n\nOnce uploaded the documentation will be linked to from the index overview page.\nDocumentation URLs have the following form::\n\n    http://$DEVPI_URL/$USER/$INDEX/$PACKAGE/$VERSION/+doc/index.html\n\nThe ``devpi upload --with-docs`` command may fail with the following error::\n\n    error: invalid command 'build_sphinx'\n\nThis probably means you're using an old version of setuptools that doesn't\nsupport the `build_sphinx` command used by devpi, so you need to update\nsetuptools::\n\n    pip install -U setuptools\n\nIf the ``devpi upload --with-docs`` command still fails with the same error\nmessage, maybe you forgot to install Sphinx? In that case::\n\n    pip install sphinx\n\nBulk uploading release files\n----------------------------\n\nIf you have a directory with existing package files::\n\n    devpi upload --from-dir PATH/TO/DIR\n\nwill recursively collect all archives files, register\nand upload them to our local ``testuser/dev`` pypi index.\n\n.. _`configure pypirc`:\n\nUsing plain ``setup.py`` for uploading\n--------------------------------------\n\nIn order for ``setup.py`` to register releases and upload\nrelease files we need to configure our index server in\nthe ``$HOME/.pypirc`` file::\n\n    # content of $HOME/.pypirc\n    [distutils]\n    index-servers = ...  # any other index servers you have\n        dev\n\n    [dev]\n    repository: http://localhost:3141/testuser/dev/\n    username: testuser\n    password: <YOURPASSWORD>\n\nNow let's go to one of your ``setup.py`` based projects and issue::\n\n    python setup.py sdist upload -r dev\n\nThis will upload your ``sdist`` package to the ``testuser/dev`` index,\nconfigured in the ``.pypirc`` file.\n\nIf you now use ``testuser/dev`` for installation like this::\n\n    pip install -i http://localhost:3141/testuser/dev/+simple/ PKGNAME\n\nYou will install your package including any pypi-dependencies\nit might need, because the ``testuser/dev`` index inherits all\npackages from the pypi-mirroring ``root/pypi`` index.\n\n.. note::\n\n    If working with multiple indices, it is usually more\n    convenient to use `devpi upload`_.\n\n.. _tox: http://tox.testrun.org\n.. _`devpi upload`: http://doc.devpi.net/latest/quickstart-releaseprocess.html#devpi-upload-uploading-one-or-more-packages\n\n\nChangelog\n=========\n\n2.0.0 - 2016-04-25\n------------------\n\n- Drop support for Python 2.6\n  [fschulze]\n\n- fixes for devpi-server 3.0.0, older versions aren't supported anymore\n  [fschulze]\n\n\n1.0.0 - 2015-05-13\n------------------\n\n- include version in testspec for ``devpi test`` command\n  [fschulze]\n\n- separated into plugin from devpi-server\n  [fschulze (Florian Schulze)]", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/devpi/devpi-jenkins", "keywords": "", "license": "MIT", "maintainer": null, "maintainer_email": null, "name": "devpi-jenkins", "package_url": "https://pypi.org/project/devpi-jenkins/", "platform": null, "project_url": "https://pypi.org/project/devpi-jenkins/", "project_urls": {"Homepage": "https://github.com/devpi/devpi-jenkins"}, "release_url": "https://pypi.org/project/devpi-jenkins/2.0.0/", "requires_dist": null, "requires_python": null, "summary": "devpi-jenkins: Jenkins build trigger for devpi-server", "version": "2.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <div id=\"devpi-jenkins-jenkins-build-trigger-for-devpi-server\">\n<h2>devpi-jenkins: Jenkins build trigger for devpi-server</h2>\n<p>For use with devpi-server &gt;= 2.2.0.</p>\n<div id=\"installation\">\n<h3>Installation</h3>\n<p><tt><span class=\"pre\">devpi-jenkins</span></tt> needs to be installed alongside <tt><span class=\"pre\">devpi-server</span></tt>.</p>\n<p>You can install it with:</p>\n<pre>pip install devpi-jenkins\n</pre>\n<p>For <tt><span class=\"pre\">devpi-server</span></tt> there is no configuration needed, as it will automatically discover the plugin through calling hooks using the setuptools entry points mechanism.</p>\n<p>Details about configuration below.</p>\n</div>\n<div id=\"configuration\">\n<h3>Configuration</h3>\n<p>devpi-jenkins can trigger Jenkins to test uploaded packages using <a href=\"http://tox.testrun.org\" rel=\"nofollow\">tox</a>.\nThis needs configuration on two sides:</p>\n<ul>\n<li>devpi: configuring an index to send POST requests to Jenkins upon upload</li>\n<li>Jenkins: adding one or more jobs which can get triggered by devpi-jenkins.</li>\n</ul>\n<div id=\"configuring-a-devpi-index-to-trigger-jenkins\">\n<h4>Configuring a devpi index to trigger Jenkins</h4>\n<p>Here is a example command, using a <tt>/testuser/dev</tt> index\nand a Jenkins server at <a href=\"http://localhost:8080\" rel=\"nofollow\">http://localhost:8080</a>:</p>\n<pre># needs one Jenkins job for each name of uploaded packages\ndevpi index /testuser/dev uploadtrigger_jenkins=http://localhost:8080/job/{pkgname}/build\n</pre>\n<p>Any package which gets uploaded to <tt>/testuser/dev</tt> will now trigger\na POST request to the specified url.  The <tt>{pkgname}</tt> and\n<tt>{pkgversion}</tt> strings will be substituted with the name of the\nuploaded package.  You don\u2019t need to specify such substitutions,\nhowever, if you rather want to have one generic Jenkins job which\nexecutes all tests for all your uploads:</p>\n<pre># one generic job for all uploaded packages\ndevpi index /testuser/dev uploadtrigger_jenkins=http://localhost:8080/job/multijob/build\n</pre>\n<p>This requires a single <tt>multijob</tt> on the Jenkins side whereas the prior\nconfiguration would require a job for each package name that you possibly\nupload.</p>\n<p>Note that uploading a package will succeed independently if a build job could\nbe submitted successfully to Jenkins.</p>\n</div>\n<div id=\"configuring-jenkins-job-s\">\n<h4>Configuring Jenkins job(s)</h4>\n<p>On the Jenkins side, you need to configure one or more jobs which can\nbe triggered by devpi-jenkins.  Each job is configured in the same way:</p>\n<ul>\n<li>go to main Jenkins screen</li>\n<li>hit \u201cNew Job\u201d and enter a name (\u201cmultijob\u201d if you want to configure\na generic job), then select \u201cfreey style software project\u201d, hit OK.</li>\n</ul>\n<img alt=\"jenkins1.png\" class=\"align-center\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/94c10d8b27dec12c44d6ccb9db699c05669600b4/6a656e6b696e73312e706e67\">\n<ul>\n<li>enable \u201cThis build is parametrized\u201d and add a \u201cFile Parameter\u201d,\nsetting the file location to <tt>jobscript.py</tt>.</li>\n</ul>\n<img alt=\"jenkins2.png\" class=\"align-center\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7b9057a51c969c13799b6e04dc0f2f3cbe94a5db/6a656e6b696e73322e706e67\">\n<ul>\n<li>add a buildstep \u201cExecute Python script\u201d (you need to have the Python\nplugin installed and enabled in Jenkins) and enter\n<tt><span class=\"pre\">execfile(\"jobscript.py\")</span></tt>.</li>\n</ul>\n<img alt=\"jenkins3.png\" class=\"align-center\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/6a883e0ec5f2cb09d57fbddec20ad6187318c9b2/6a656e6b696e73332e706e67\">\n<ul>\n<li>hit \u201cSave\u201d for the new build job.</li>\n</ul>\n<p>You can now <tt>devpi upload</tt> a package to an index and see Jenkins starting\nafter the upload successfully returns.</p>\n</div>\n<div id=\"behind-the-scenes\">\n<h4>Behind the scenes</h4>\n<p>Once you triggered a job from devpi, you can checkout the <tt>jobscript.py</tt>\nin the Jenkins workspace to see what was injected.  The injected\nscript roughly follows these steps:</p>\n<ul>\n<li>retrieves a stable virtualenv release through the devpi root/pypi\nindex (i.e. use its caching ability)</li>\n<li>unpack the virtualenv tar ball and run the contained \u201cvirtualenv.py\u201d\nscript to create a <tt>_devpi</tt> environment</li>\n<li>install/upgrade <tt><span class=\"pre\">devpi-client</span></tt> into that environment</li>\n<li><tt>devpi use</tt> the index which we were triggered from</li>\n<li><tt>devpi test PKG</tt> where PKG is the package name that we uploaded.</li>\n</ul>\n</div>\n</div>\n<div id=\"uploading-sphinx-docs\">\n<h3>Uploading Sphinx docs</h3>\n<p>If you have <a href=\"http://sphinx-doc.org/\" rel=\"nofollow\">Sphinx-based documentation</a> you can\nupload the rendered HTML documentation to your devpi server with the following\ncommand:</p>\n<pre>devpi upload --with-docs\n</pre>\n<p>This will build and upload Sphinx documentation by configuring and running\nthis command:</p>\n<pre>setup.py build_sphinx -E --build-dir $BUILD_DIR \\\n         upload_docs --upload-dir $BUILD_DIR/html\n</pre>\n<p>If you have distutils configured to use a devpi index you can upload\ndocumentation to that index simply by executing:</p>\n<pre>python setup.py upload_docs\n</pre>\n<p>Once uploaded the documentation will be linked to from the index overview page.\nDocumentation URLs have the following form:</p>\n<pre>http://$DEVPI_URL/$USER/$INDEX/$PACKAGE/$VERSION/+doc/index.html\n</pre>\n<p>The <tt>devpi upload <span class=\"pre\">--with-docs</span></tt> command may fail with the following error:</p>\n<pre>error: invalid command 'build_sphinx'\n</pre>\n<p>This probably means you\u2019re using an old version of setuptools that doesn\u2019t\nsupport the <cite>build_sphinx</cite> command used by devpi, so you need to update\nsetuptools:</p>\n<pre>pip install -U setuptools\n</pre>\n<p>If the <tt>devpi upload <span class=\"pre\">--with-docs</span></tt> command still fails with the same error\nmessage, maybe you forgot to install Sphinx? In that case:</p>\n<pre>pip install sphinx\n</pre>\n</div>\n<div id=\"bulk-uploading-release-files\">\n<h3>Bulk uploading release files</h3>\n<p>If you have a directory with existing package files:</p>\n<pre>devpi upload --from-dir PATH/TO/DIR\n</pre>\n<p>will recursively collect all archives files, register\nand upload them to our local <tt>testuser/dev</tt> pypi index.</p>\n</div>\n<div id=\"using-plain-setup-py-for-uploading\">\n<span id=\"configure-pypirc\"></span><h3>Using plain <tt>setup.py</tt> for uploading</h3>\n<p>In order for <tt>setup.py</tt> to register releases and upload\nrelease files we need to configure our index server in\nthe <tt><span class=\"pre\">$HOME/.pypirc</span></tt> file:</p>\n<pre># content of $HOME/.pypirc\n[distutils]\nindex-servers = ...  # any other index servers you have\n    dev\n\n[dev]\nrepository: http://localhost:3141/testuser/dev/\nusername: testuser\npassword: &lt;YOURPASSWORD&gt;\n</pre>\n<p>Now let\u2019s go to one of your <tt>setup.py</tt> based projects and issue:</p>\n<pre>python setup.py sdist upload -r dev\n</pre>\n<p>This will upload your <tt>sdist</tt> package to the <tt>testuser/dev</tt> index,\nconfigured in the <tt>.pypirc</tt> file.</p>\n<p>If you now use <tt>testuser/dev</tt> for installation like this:</p>\n<pre>pip install -i http://localhost:3141/testuser/dev/+simple/ PKGNAME\n</pre>\n<p>You will install your package including any pypi-dependencies\nit might need, because the <tt>testuser/dev</tt> index inherits all\npackages from the pypi-mirroring <tt>root/pypi</tt> index.</p>\n<div>\n<p>Note</p>\n<p>If working with multiple indices, it is usually more\nconvenient to use <a href=\"http://doc.devpi.net/latest/quickstart-releaseprocess.html#devpi-upload-uploading-one-or-more-packages\" rel=\"nofollow\">devpi upload</a>.</p>\n</div>\n</div>\n</div>\n<div id=\"changelog\">\n<h2>Changelog</h2>\n<div id=\"id1\">\n<h3>2.0.0 - 2016-04-25</h3>\n<ul>\n<li>Drop support for Python 2.6\n[fschulze]</li>\n<li>fixes for devpi-server 3.0.0, older versions aren\u2019t supported anymore\n[fschulze]</li>\n</ul>\n</div>\n<div id=\"id2\">\n<h3>1.0.0 - 2015-05-13</h3>\n<ul>\n<li>include version in testspec for <tt>devpi test</tt> command\n[fschulze]</li>\n<li>separated into plugin from devpi-server\n[fschulze (Florian Schulze)]</li>\n</ul>\n</div>\n</div>\n\n          </div>"}, "last_serial": 2082530, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "0dacb763784cad238cfccf3d0c6743dc", "sha256": "3c362444fb875f252e6c38ecb27a492bdfb03bfb322153170c9401b2439132cf"}, "downloads": -1, "filename": "devpi-jenkins-1.0.0.tar.gz", "has_sig": false, "md5_digest": "0dacb763784cad238cfccf3d0c6743dc", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 111564, "upload_time": "2015-05-13T14:14:37", "upload_time_iso_8601": "2015-05-13T14:14:37.828372Z", "url": "https://files.pythonhosted.org/packages/44/f5/5ef4ee2b2696d098b9d8fe798eeaa8e39490543c43494967d7bb9f7ceefa/devpi-jenkins-1.0.0.tar.gz", "yanked": false}, {"comment_text": "", "digests": {"md5": "b571dbda40e01dcd8a8e89d42f6facf6", "sha256": "d8d84aef86be04851252cc171a81a128d470d898a23c81561e2e010f48d06eeb"}, "downloads": -1, "filename": "devpi-jenkins-1.0.0.zip", "has_sig": false, "md5_digest": "b571dbda40e01dcd8a8e89d42f6facf6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 116040, "upload_time": "2015-05-13T14:14:35", "upload_time_iso_8601": "2015-05-13T14:14:35.390480Z", "url": "https://files.pythonhosted.org/packages/ed/57/58f21877fb384132a8a6818476ba93095995167fc3f7111a84da901f4696/devpi-jenkins-1.0.0.zip", "yanked": false}], "1.0.1.dev.0": [], "2.0.0": [{"comment_text": "", "digests": {"md5": "6a30df31c25bd8c37cdd025edf49229f", "sha256": "8a7e43fe828c98723243767c5edf23ff63d73626dff505764401fb67e90a0c3a"}, "downloads": -1, "filename": "devpi-jenkins-2.0.0.tar.gz", "has_sig": false, "md5_digest": "6a30df31c25bd8c37cdd025edf49229f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9774, "upload_time": "2016-04-25T10:43:41", "upload_time_iso_8601": "2016-04-25T10:43:41.797906Z", "url": "https://files.pythonhosted.org/packages/8a/8f/2d8ea35c5e86668bacd131201ec0667cca5df11793e84db3475323dabe77/devpi-jenkins-2.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "6a30df31c25bd8c37cdd025edf49229f", "sha256": "8a7e43fe828c98723243767c5edf23ff63d73626dff505764401fb67e90a0c3a"}, "downloads": -1, "filename": "devpi-jenkins-2.0.0.tar.gz", "has_sig": false, "md5_digest": "6a30df31c25bd8c37cdd025edf49229f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9774, "upload_time": "2016-04-25T10:43:41", "upload_time_iso_8601": "2016-04-25T10:43:41.797906Z", "url": "https://files.pythonhosted.org/packages/8a/8f/2d8ea35c5e86668bacd131201ec0667cca5df11793e84db3475323dabe77/devpi-jenkins-2.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:38:51 2020"}