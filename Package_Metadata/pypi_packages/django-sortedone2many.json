{"info": {"author": "Shenggao Zhu", "author_email": "zshgao@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Environment :: Web Environment", "Framework :: Django", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 2", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: 3.5", "Topic :: Internet :: WWW/HTTP", "Topic :: Internet :: WWW/HTTP :: Dynamic Content"], "description": "=====================\ndjango-sortedone2many\n=====================\n\n.. image:: https://img.shields.io/pypi/l/django-sortedone2many.svg\n    :target: ./LICENSE\n    :alt: License\n\n.. image:: https://img.shields.io/pypi/v/django-sortedone2many.svg\n    :target: https://pypi.python.org/pypi/django-sortedone2many\n    :alt: PyPI Release\n\n.. image:: https://img.shields.io/pypi/pyversions/django-sortedone2many.svg\n    :target: https://pypi.python.org/pypi/django-sortedone2many\n    :alt: Supported Python versions\n\n.. .. image:: https://img.shields.io/pypi/dm/django-sortedone2many.svg\n    :alt: PyPI Downloads\n    :target: https://pypi.python.org/pypi/django-sortedone2many\n\n.. image:: https://travis-ci.org/ShenggaoZhu/django-sortedone2many.svg?branch=master\n    :target: https://travis-ci.org/ShenggaoZhu/django-sortedone2many\n    :alt: Travis Build Status\n\n\n``sortedone2many`` provides a ``SortedOneToManyField`` for django Model that establishes a\none-to-many relationship (which can also remember the order of related objects).\n\nDepends on ``SortedManyToManyField`` from the great library django-sortedm2m_ (check it out!).\n\n.. _django-sortedm2m: https://github.com/gregmuellegger/django-sortedm2m\n\n\nInstallation\n============\n\n``pip install django-sortedone2many``\n\nPyPI repository: https://pypi.python.org/pypi/django-sortedone2many\n\n\nUsecases\n========\n\nSorted ``OneToMany`` relationship\n---------------------------------\n\nThe ``OneToMany`` relationship has been long missing from django ORM.\nA similar relationship, ``ManyToOne``, is provided via a ``ForeignKey``,\nwhich is always declared on the \"many\" side of the relationship.\nIn the following example (using ``related_name`` on a ``ForeignKey``):\n\n.. code-block:: python\n\n    class Category(models.Model):\n        name = models.CharField(max_length=50)\n\n    class Item(models.Model):\n        category = ForeignKey(Category, related_name=\"items\")\n\n``item.category`` is a ``ManyToOne`` relationship, while\n``category.items`` is a ``OneToMany`` relationship.\nHowever, it is not easy to\nmanage the order of the list of ``items`` in a ``category``.\n\nTo address this need, simply add a ``SortedOneToManyField`` (from this package) to\nthe model on the \"one\" side of the relationship:\n\n.. code-block:: python\n\n    class Category(models.Model):\n        name = models.CharField(max_length=50)\n        items = SortedOneToManyField(Item, sorted=True, blank=True)\n\n``SortedOneToManyField`` uses an intermediary model with an extra\n``sort_value`` field to manage the orders of the related objects.\nIt is very useful to represent **an ordered list of items**\n(according to their added order or user-specified order).\n\nAlso, ``OneToMany`` relationship offers better **semantics** and **readability** than ``ForeignKey``,\nespecially for scenarios like ``master-detail`` or ``category-item``\n(where each item only belongs to one category).\n`This blog explains it nicely <http://blog.amir.rachum.com/blog/2013/06/15/a-case-for-a-onetomany-relationship-in-django/>`_.\n\nAdding ``OneToMany`` to existing models\n---------------------------------------\n\nSince ``OneToMany`` relationship uses an intermediary model,\nit can work without altering already-existing models/tables,\nthus providing better **extensibility** than ``ForeignKey``\n(which requires adding a ``ForeignKey`` field to the model/table).\nThis is a big advantage when the existing models can't be changed\n(e.g., models in a third-party library, or shared among several applications).\n\nThis package provides a shortcut function ``add_sorted_one2many_relation``\nto inject ``OneToMany`` relationship to existing models without editing the\nmodel source code or subclassing the models.\n\n\nUsage\n=====\n\nAdd the ``SortedOneToManyField`` to the model on the \"one\" side of the\nrelationship (as opposed to ``ForeignKey`` on the \"many\" side):\n\n.. code-block:: python\n\n    from django.db import models\n    from sortedone2many.fields import SortedOneToManyField\n\n    class Item(models.Model):\n        name = models.CharField(max_length=50)\n\n    class Category(models.Model):\n        name = models.CharField(max_length=50)\n        items = SortedOneToManyField(Item, sorted=True, blank=True)\n\nHere, ``category.items`` is the manager for related ``Item`` objects (the same as\nthe normal ``ManyToManyField``); use it like ``category.items.add(new_item)``,\n``category.items.all()``. By default, the list of ``items`` (e.g., ``category.items.all()``)\nis sorted according to the order that each ``item`` is added.\n\nOn the other side, ``item.category`` is an *instance* (not manager) of ``Category`` (similar\nto a ``OneToOneField``); use it like ``item.category.pk``, ``item.category = new_category``.\n\nStrictly speaking, ``item.category`` is an instance of\n``sortedone2many.fields.OneToManyRelatedObjectDescriptor``\n(a type of `python descriptor <https://docs.python.org/3.4/howto/descriptor.html>`_),\nwhich directly exposes the *single* related object (i.e., the ``category`` instance).\nThis is different from the ``ManyRelatedObjectsDescriptor`` (as in the normal ``ManyToManyField``)\nwhich exposes the ``manager`` of the *potentially multiple* related objects\n(which is not as convenient to use in the ``OneToMany`` relationship).\n\n``SortedOneToManyField``\n------------------------\nSimilar to ``SortedManyToManyField``,\nit uses an intermediary model that holds a ForeignKey field pointed at\nthe model on the \"one\" side of the relationship, a OneToOneField field\npointed at the model on the \"many\" side (to ensure the unique relationship\nto the \"one\" side), and another field storing the\nsort value (to remember to orders of the objects on the \"many\" side).\n\n``SortedOneToManyField`` accepts a boolean ``sorted`` attribute which specifies if relationship is\nordered or not. Default is set to ``True``.\n\nRefer to django-sortedm2m_ for more details.\n\nAdmin\n_____\n\nFirst, add ``\"sortedm2m\"`` to your ``INSTALLED_APPS`` settings,\nwhich provides the static ``js`` and ``css`` files to render\nthe related objects in a ``SortedOneToManyField`` as a list of\ncheckboxes that can be sorted by drag'n'drop.\n(That is similar to the behavior of a ``SortedManyToManyField``).\n\nBy default, a ``SortedOneToManyField`` is translated into a form field\n``sortedone2many.forms.SortedMultipleChoiceWithDisabledField`` for rendering.\nThis form field also adds a special function to the widget:\ndisables those checkboxes that should not be directly selected\nin the current admin view (to ensure the unique ``OneToMany`` relationship).\n\nE.g., in the image below, in the admin view for ``category 1``,\n``item1.category`` is ``category 2``, so the checkbox for ``item1`` is disabled\nbecause ``category 2`` has to remove ``item1`` from its ``items`` list before\n``category 1`` can select ``item1`` in the admin view.\n\n.. image:: https://raw.githubusercontent.com/ShenggaoZhu/django-sortedone2many/master/docs/category.jpg\n\nIn the admin site, to display a related object on the reverse side of\na ``SortedOneToManyField`` (e.g., to display ``item1.category`` in the\nadmin view of ``item1``), simply use ``sortedone2many.admin.One2ManyModelAdmin``\nas the ``admin class`` to register your model:\n\n.. code-block:: python\n\n    from django.contrib import admin\n    from sortedone2many.admin import One2ManyModelAdmin\n    admin.site.register(MyItemModel, One2ManyModelAdmin)\n\nOr, use the shortcut function ``sortedone2many.admin.register``:\n\n.. code-block:: python\n\n    from sortedone2many.admin import register\n    register(MyItemModel)\n\nThe related object will be rendered as a dropdown <select> list,\nthrough which you can assign it a different value.\nTwo additional \"change\" and \"add\" buttons are also listed after the dropdown list\nas the shortcuts to edit the ``category``\n(similar to the appearance of a ``ForeignKey``), as shown below:\n\n.. image:: https://raw.githubusercontent.com/ShenggaoZhu/django-sortedone2many/master/docs/item.jpg\n\nInternally, ``One2ManyModelAdmin`` uses ``One2ManyModelForm`` for rendering,\nwhich automatically finds related ``SortedOneToManyField`` from the model defined in the\nform's Meta class, and add these fields to the form.\nYour can subclass ``One2ManyModelForm`` to customize it for your own model.\n\nUtility functions\n-----------------\nUse the following helper functions in ``sortedone2many.utils``\nto inject extra fields to existing models:\n\n.. code-block:: python\n\n   inject_extra_field_to_model(from_model, field_name, field)\n\n   add_sorted_one2many_relation(model_one, model_many, field_name_on_model_one=None,\n                                related_name_on_model_many=None)\n\nWorking with existing models\n----------------------------\n``SortedOneToManyField`` (or generally, any extra model field) can be added to an existing model\nthat can't be edited directly (e.g., in another library/app). For example, add the field to\nthe ``User`` model in ``django.contrib.auth.models``.\n\nIt is recommended to use `django migrations`_ to do this.\n\n.. _`django migrations`: https://docs.djangoproject.com/en/1.8/topics/migrations/\n\n1. First, add the existing model (``User``) into django ``migrations`` using a migrations folder\n   **outside the original library/app** (e.g., in your own app).\n   This can be achieved by configuring the ``MIGRATION_MODULES`` dictionary in your django ``settings``:\n\n   .. code-block:: python\n\n    MIGRATION_MODULES = {\n        \"auth\": \"my_app.migrations_auth\",\n    }\n\n   The key (``\"auth\"``) of ``MIGRATION_MODULES`` is the name (``app_label``) of the library/app,\n   and the value is package/folder to store the migration files for this library/app.\n\n   **Note**: this value will supercede/shield the original migrations folder in the library/app\n   (if it already uses django migrations), i.e., ``django.contrib.auth.migrations``.\n\n2. Next, run ``manage.py makemigrations auth`` and ``manage.py migrate auth``\n   to migrate the existing model as if for the first time (no matter whether the model used migrations before).\n   A new migration file ``0001_initial.py`` should be generated in the specified folder.\n   If the database table is already created for the model, no actual migrations will be applied.\n\n3. Add a ``SortedOneToManyField`` named ``items`` to the ``User`` model using the helper function:\n\n   .. code-block:: python\n\n    inject_extra_field_to_model(User, 'items', SortedOneToManyField(Item, related_name='owner'))\n\n4. Run ``manage.py makemigrations auth`` and ``manage.py migrate auth`` again to create the\n   intermediary table (``auth_user_items`` by default).\n\nThat's it! Now ``user.items`` and ``item.owner`` are available as if you defined the\n``items`` field in the ``User`` model source code.\n\nTesting\n=======\n1. Setup database::\n\n    python manage.py makemigrations auth tests app2\n    python manage.py migrate\n\n2. Run tests::\n\n    python manage.py test tests\n\n+ ``test_project`` contains the django project ``settings.py``\n+ ``tests`` folder contains all the testcases\n+ Tested with django 1.8, 1.9 and Python 2.7, 3.3, 3.4, 3.5", "description_content_type": null, "docs_url": null, "download_url": "UNKNOWN", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/ShenggaoZhu/django-sortedone2many", "keywords": "django,model,field,one-to-many,SortedOneToManyField", "license": "MIT", "maintainer": null, "maintainer_email": null, "name": "django-sortedone2many", "package_url": "https://pypi.org/project/django-sortedone2many/", "platform": "UNKNOWN", "project_url": "https://pypi.org/project/django-sortedone2many/", "project_urls": {"Download": "UNKNOWN", "Homepage": "https://github.com/ShenggaoZhu/django-sortedone2many"}, "release_url": "https://pypi.org/project/django-sortedone2many/0.2.2/", "requires_dist": null, "requires_python": null, "summary": "Provide a one-to-many relationship that also remembers the order of related objects.", "version": "0.2.2", "yanked": false, "html_description": "<div class=\"project-description\">\n            <a href=\"./LICENSE\" rel=\"nofollow\"><img alt=\"License\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c246237151c1ca09ba665a835dbf51fc83c6a9ed/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f646a616e676f2d736f727465646f6e65326d616e792e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/django-sortedone2many\" rel=\"nofollow\"><img alt=\"PyPI Release\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/529445f256d1390a8740cf50187fdc28cb9beec6/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f646a616e676f2d736f727465646f6e65326d616e792e737667\"></a>\n<a href=\"https://pypi.python.org/pypi/django-sortedone2many\" rel=\"nofollow\"><img alt=\"Supported Python versions\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7cc3d064e5f45447203ab814cb27d6e53dc3dbc2/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f646a616e676f2d736f727465646f6e65326d616e792e737667\"></a>\n<a href=\"https://travis-ci.org/ShenggaoZhu/django-sortedone2many\" rel=\"nofollow\"><img alt=\"Travis Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/9e93947a773f7d3d6bb5202a88cb25b428a401b8/68747470733a2f2f7472617669732d63692e6f72672f5368656e6767616f5a68752f646a616e676f2d736f727465646f6e65326d616e792e7376673f6272616e63683d6d6173746572\"></a>\n<p><tt>sortedone2many</tt> provides a <tt>SortedOneToManyField</tt> for django Model that establishes a\none-to-many relationship (which can also remember the order of related objects).</p>\n<p>Depends on <tt>SortedManyToManyField</tt> from the great library <a href=\"https://github.com/gregmuellegger/django-sortedm2m\" rel=\"nofollow\">django-sortedm2m</a> (check it out!).</p>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p><tt>pip install <span class=\"pre\">django-sortedone2many</span></tt></p>\n<p>PyPI repository: <a href=\"https://pypi.python.org/pypi/django-sortedone2many\" rel=\"nofollow\">https://pypi.python.org/pypi/django-sortedone2many</a></p>\n</div>\n<div id=\"usecases\">\n<h2>Usecases</h2>\n<div id=\"sorted-onetomany-relationship\">\n<h3>Sorted <tt>OneToMany</tt> relationship</h3>\n<p>The <tt>OneToMany</tt> relationship has been long missing from django ORM.\nA similar relationship, <tt>ManyToOne</tt>, is provided via a <tt>ForeignKey</tt>,\nwhich is always declared on the \u201cmany\u201d side of the relationship.\nIn the following example (using <tt>related_name</tt> on a <tt>ForeignKey</tt>):</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Category</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Item</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">category</span> <span class=\"o\">=</span> <span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"n\">Category</span><span class=\"p\">,</span> <span class=\"n\">related_name</span><span class=\"o\">=</span><span class=\"s2\">\"items\"</span><span class=\"p\">)</span>\n</pre>\n<p><tt>item.category</tt> is a <tt>ManyToOne</tt> relationship, while\n<tt>category.items</tt> is a <tt>OneToMany</tt> relationship.\nHowever, it is not easy to\nmanage the order of the list of <tt>items</tt> in a <tt>category</tt>.</p>\n<p>To address this need, simply add a <tt>SortedOneToManyField</tt> (from this package) to\nthe model on the \u201cone\u201d side of the relationship:</p>\n<pre><span class=\"k\">class</span> <span class=\"nc\">Category</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n    <span class=\"n\">items</span> <span class=\"o\">=</span> <span class=\"n\">SortedOneToManyField</span><span class=\"p\">(</span><span class=\"n\">Item</span><span class=\"p\">,</span> <span class=\"nb\">sorted</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p><tt>SortedOneToManyField</tt> uses an intermediary model with an extra\n<tt>sort_value</tt> field to manage the orders of the related objects.\nIt is very useful to represent <strong>an ordered list of items</strong>\n(according to their added order or user-specified order).</p>\n<p>Also, <tt>OneToMany</tt> relationship offers better <strong>semantics</strong> and <strong>readability</strong> than <tt>ForeignKey</tt>,\nespecially for scenarios like <tt><span class=\"pre\">master-detail</span></tt> or <tt><span class=\"pre\">category-item</span></tt>\n(where each item only belongs to one category).\n<a href=\"http://blog.amir.rachum.com/blog/2013/06/15/a-case-for-a-onetomany-relationship-in-django/\" rel=\"nofollow\">This blog explains it nicely</a>.</p>\n</div>\n<div id=\"adding-onetomany-to-existing-models\">\n<h3>Adding <tt>OneToMany</tt> to existing models</h3>\n<p>Since <tt>OneToMany</tt> relationship uses an intermediary model,\nit can work without altering already-existing models/tables,\nthus providing better <strong>extensibility</strong> than <tt>ForeignKey</tt>\n(which requires adding a <tt>ForeignKey</tt> field to the model/table).\nThis is a big advantage when the existing models can\u2019t be changed\n(e.g., models in a third-party library, or shared among several applications).</p>\n<p>This package provides a shortcut function <tt>add_sorted_one2many_relation</tt>\nto inject <tt>OneToMany</tt> relationship to existing models without editing the\nmodel source code or subclassing the models.</p>\n</div>\n</div>\n<div id=\"usage\">\n<h2>Usage</h2>\n<p>Add the <tt>SortedOneToManyField</tt> to the model on the \u201cone\u201d side of the\nrelationship (as opposed to <tt>ForeignKey</tt> on the \u201cmany\u201d side):</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n<span class=\"kn\">from</span> <span class=\"nn\">sortedone2many.fields</span> <span class=\"kn\">import</span> <span class=\"n\">SortedOneToManyField</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Item</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Category</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n    <span class=\"n\">items</span> <span class=\"o\">=</span> <span class=\"n\">SortedOneToManyField</span><span class=\"p\">(</span><span class=\"n\">Item</span><span class=\"p\">,</span> <span class=\"nb\">sorted</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">blank</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>Here, <tt>category.items</tt> is the manager for related <tt>Item</tt> objects (the same as\nthe normal <tt>ManyToManyField</tt>); use it like <tt>category.items.add(new_item)</tt>,\n<tt>category.items.all()</tt>. By default, the list of <tt>items</tt> (e.g., <tt>category.items.all()</tt>)\nis sorted according to the order that each <tt>item</tt> is added.</p>\n<p>On the other side, <tt>item.category</tt> is an <em>instance</em> (not manager) of <tt>Category</tt> (similar\nto a <tt>OneToOneField</tt>); use it like <tt>item.category.pk</tt>, <tt>item.category = new_category</tt>.</p>\n<p>Strictly speaking, <tt>item.category</tt> is an instance of\n<tt>sortedone2many.fields.OneToManyRelatedObjectDescriptor</tt>\n(a type of <a href=\"https://docs.python.org/3.4/howto/descriptor.html\" rel=\"nofollow\">python descriptor</a>),\nwhich directly exposes the <em>single</em> related object (i.e., the <tt>category</tt> instance).\nThis is different from the <tt>ManyRelatedObjectsDescriptor</tt> (as in the normal <tt>ManyToManyField</tt>)\nwhich exposes the <tt>manager</tt> of the <em>potentially multiple</em> related objects\n(which is not as convenient to use in the <tt>OneToMany</tt> relationship).</p>\n<div id=\"sortedonetomanyfield\">\n<h3><tt>SortedOneToManyField</tt></h3>\n<p>Similar to <tt>SortedManyToManyField</tt>,\nit uses an intermediary model that holds a ForeignKey field pointed at\nthe model on the \u201cone\u201d side of the relationship, a OneToOneField field\npointed at the model on the \u201cmany\u201d side (to ensure the unique relationship\nto the \u201cone\u201d side), and another field storing the\nsort value (to remember to orders of the objects on the \u201cmany\u201d side).</p>\n<p><tt>SortedOneToManyField</tt> accepts a boolean <tt>sorted</tt> attribute which specifies if relationship is\nordered or not. Default is set to <tt>True</tt>.</p>\n<p>Refer to <a href=\"https://github.com/gregmuellegger/django-sortedm2m\" rel=\"nofollow\">django-sortedm2m</a> for more details.</p>\n<div id=\"admin\">\n<h4>Admin</h4>\n<p>First, add <tt>\"sortedm2m\"</tt> to your <tt>INSTALLED_APPS</tt> settings,\nwhich provides the static <tt>js</tt> and <tt>css</tt> files to render\nthe related objects in a <tt>SortedOneToManyField</tt> as a list of\ncheckboxes that can be sorted by drag\u2019n\u2019drop.\n(That is similar to the behavior of a <tt>SortedManyToManyField</tt>).</p>\n<p>By default, a <tt>SortedOneToManyField</tt> is translated into a form field\n<tt>sortedone2many.forms.SortedMultipleChoiceWithDisabledField</tt> for rendering.\nThis form field also adds a special function to the widget:\ndisables those checkboxes that should not be directly selected\nin the current admin view (to ensure the unique <tt>OneToMany</tt> relationship).</p>\n<p>E.g., in the image below, in the admin view for <tt>category 1</tt>,\n<tt>item1.category</tt> is <tt>category 2</tt>, so the checkbox for <tt>item1</tt> is disabled\nbecause <tt>category 2</tt> has to remove <tt>item1</tt> from its <tt>items</tt> list before\n<tt>category 1</tt> can select <tt>item1</tt> in the admin view.</p>\n<img alt=\"https://raw.githubusercontent.com/ShenggaoZhu/django-sortedone2many/master/docs/category.jpg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/7b06048142f83b3e1a0c03a766cb9b24bb49be67/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f5368656e6767616f5a68752f646a616e676f2d736f727465646f6e65326d616e792f6d61737465722f646f63732f63617465676f72792e6a7067\">\n<p>In the admin site, to display a related object on the reverse side of\na <tt>SortedOneToManyField</tt> (e.g., to display <tt>item1.category</tt> in the\nadmin view of <tt>item1</tt>), simply use <tt>sortedone2many.admin.One2ManyModelAdmin</tt>\nas the <tt>admin class</tt> to register your model:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">django.contrib</span> <span class=\"kn\">import</span> <span class=\"n\">admin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">sortedone2many.admin</span> <span class=\"kn\">import</span> <span class=\"n\">One2ManyModelAdmin</span>\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">MyItemModel</span><span class=\"p\">,</span> <span class=\"n\">One2ManyModelAdmin</span><span class=\"p\">)</span>\n</pre>\n<p>Or, use the shortcut function <tt>sortedone2many.admin.register</tt>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">sortedone2many.admin</span> <span class=\"kn\">import</span> <span class=\"n\">register</span>\n<span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">MyItemModel</span><span class=\"p\">)</span>\n</pre>\n<p>The related object will be rendered as a dropdown &lt;select&gt; list,\nthrough which you can assign it a different value.\nTwo additional \u201cchange\u201d and \u201cadd\u201d buttons are also listed after the dropdown list\nas the shortcuts to edit the <tt>category</tt>\n(similar to the appearance of a <tt>ForeignKey</tt>), as shown below:</p>\n<img alt=\"https://raw.githubusercontent.com/ShenggaoZhu/django-sortedone2many/master/docs/item.jpg\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ce810df9f654068b86c1fadb3788a043f4d6008c/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f5368656e6767616f5a68752f646a616e676f2d736f727465646f6e65326d616e792f6d61737465722f646f63732f6974656d2e6a7067\">\n<p>Internally, <tt>One2ManyModelAdmin</tt> uses <tt>One2ManyModelForm</tt> for rendering,\nwhich automatically finds related <tt>SortedOneToManyField</tt> from the model defined in the\nform\u2019s Meta class, and add these fields to the form.\nYour can subclass <tt>One2ManyModelForm</tt> to customize it for your own model.</p>\n</div>\n</div>\n<div id=\"utility-functions\">\n<h3>Utility functions</h3>\n<p>Use the following helper functions in <tt>sortedone2many.utils</tt>\nto inject extra fields to existing models:</p>\n<pre><span class=\"n\">inject_extra_field_to_model</span><span class=\"p\">(</span><span class=\"n\">from_model</span><span class=\"p\">,</span> <span class=\"n\">field_name</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"p\">)</span>\n\n<span class=\"n\">add_sorted_one2many_relation</span><span class=\"p\">(</span><span class=\"n\">model_one</span><span class=\"p\">,</span> <span class=\"n\">model_many</span><span class=\"p\">,</span> <span class=\"n\">field_name_on_model_one</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n                             <span class=\"n\">related_name_on_model_many</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"working-with-existing-models\">\n<h3>Working with existing models</h3>\n<p><tt>SortedOneToManyField</tt> (or generally, any extra model field) can be added to an existing model\nthat can\u2019t be edited directly (e.g., in another library/app). For example, add the field to\nthe <tt>User</tt> model in <tt>django.contrib.auth.models</tt>.</p>\n<p>It is recommended to use <a href=\"https://docs.djangoproject.com/en/1.8/topics/migrations/\" rel=\"nofollow\">django migrations</a> to do this.</p>\n<ol>\n<li><p>First, add the existing model (<tt>User</tt>) into django <tt>migrations</tt> using a migrations folder\n<strong>outside the original library/app</strong> (e.g., in your own app).\nThis can be achieved by configuring the <tt>MIGRATION_MODULES</tt> dictionary in your django <tt>settings</tt>:</p>\n<pre><span class=\"n\">MIGRATION_MODULES</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s2\">\"auth\"</span><span class=\"p\">:</span> <span class=\"s2\">\"my_app.migrations_auth\"</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n</pre>\n<p>The key (<tt>\"auth\"</tt>) of <tt>MIGRATION_MODULES</tt> is the name (<tt>app_label</tt>) of the library/app,\nand the value is package/folder to store the migration files for this library/app.</p>\n<p><strong>Note</strong>: this value will supercede/shield the original migrations folder in the library/app\n(if it already uses django migrations), i.e., <tt>django.contrib.auth.migrations</tt>.</p>\n</li>\n<li><p>Next, run <tt>manage.py makemigrations auth</tt> and <tt>manage.py migrate auth</tt>\nto migrate the existing model as if for the first time (no matter whether the model used migrations before).\nA new migration file <tt>0001_initial.py</tt> should be generated in the specified folder.\nIf the database table is already created for the model, no actual migrations will be applied.</p>\n</li>\n<li><p>Add a <tt>SortedOneToManyField</tt> named <tt>items</tt> to the <tt>User</tt> model using the helper function:</p>\n<pre><span class=\"n\">inject_extra_field_to_model</span><span class=\"p\">(</span><span class=\"n\">User</span><span class=\"p\">,</span> <span class=\"s1\">'items'</span><span class=\"p\">,</span> <span class=\"n\">SortedOneToManyField</span><span class=\"p\">(</span><span class=\"n\">Item</span><span class=\"p\">,</span> <span class=\"n\">related_name</span><span class=\"o\">=</span><span class=\"s1\">'owner'</span><span class=\"p\">))</span>\n</pre>\n</li>\n<li><p>Run <tt>manage.py makemigrations auth</tt> and <tt>manage.py migrate auth</tt> again to create the\nintermediary table (<tt>auth_user_items</tt> by default).</p>\n</li>\n</ol>\n<p>That\u2019s it! Now <tt>user.items</tt> and <tt>item.owner</tt> are available as if you defined the\n<tt>items</tt> field in the <tt>User</tt> model source code.</p>\n</div>\n</div>\n<div id=\"testing\">\n<h2>Testing</h2>\n<ol>\n<li><p>Setup database:</p>\n<pre>python manage.py makemigrations auth tests app2\npython manage.py migrate\n</pre>\n</li>\n<li><p>Run tests:</p>\n<pre>python manage.py test tests\n</pre>\n</li>\n</ol>\n<ul>\n<li><tt>test_project</tt> contains the django project <tt>settings.py</tt></li>\n<li><tt>tests</tt> folder contains all the testcases</li>\n<li>Tested with django 1.8, 1.9 and Python 2.7, 3.3, 3.4, 3.5</li>\n</ul>\n</div>\n\n          </div>"}, "last_serial": 2121875, "releases": {"0.1.4": [{"comment_text": "", "digests": {"md5": "8e718ca8b1bb2e8235f2f9f69552a8d1", "sha256": "5f5de72a86c09779ef4580202df2e005e99be6244b52b21738e431c527e955fc"}, "downloads": -1, "filename": "django-sortedone2many-0.1.4.tar.gz", "has_sig": false, "md5_digest": "8e718ca8b1bb2e8235f2f9f69552a8d1", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11675, "upload_time": "2015-08-02T14:14:14", "upload_time_iso_8601": "2015-08-02T14:14:14.856159Z", "url": "https://files.pythonhosted.org/packages/c6/49/2ab658d1bf47fbf397eb9056f42c18f8f592fed5f46e827e28334fbf88bb/django-sortedone2many-0.1.4.tar.gz", "yanked": false}], "0.1.5": [{"comment_text": "", "digests": {"md5": "82877f1dd02e56ea7bd09e56a444f684", "sha256": "50289d4defe4c48b276ce6ca4167558d7a89290e6460ce757143f0a522dcb198"}, "downloads": -1, "filename": "django-sortedone2many-0.1.5.tar.gz", "has_sig": false, "md5_digest": "82877f1dd02e56ea7bd09e56a444f684", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11892, "upload_time": "2015-09-04T07:56:57", "upload_time_iso_8601": "2015-09-04T07:56:57.104176Z", "url": "https://files.pythonhosted.org/packages/2b/30/e68f8a044a75ff923698945230ab75f2fd082e741b3a1f7ed81056f4b05b/django-sortedone2many-0.1.5.tar.gz", "yanked": false}], "0.1.6": [{"comment_text": "", "digests": {"md5": "da49dbbaeaa3ca0e2516dd73a9996c3e", "sha256": "7f4c2a19000370a7ea475faad456ed818991569cb35ec26040a47cb7a2d7c745"}, "downloads": -1, "filename": "django-sortedone2many-0.1.6.tar.gz", "has_sig": false, "md5_digest": "da49dbbaeaa3ca0e2516dd73a9996c3e", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11922, "upload_time": "2016-01-08T12:37:44", "upload_time_iso_8601": "2016-01-08T12:37:44.851488Z", "url": "https://files.pythonhosted.org/packages/d4/2d/c1a1f1dfd0b1567bcfd40d3361abb9420f203fc2e6628a18ae6379e95e18/django-sortedone2many-0.1.6.tar.gz", "yanked": false}], "0.1.7": [{"comment_text": "", "digests": {"md5": "231183dbb9ca395eeb0fb3e83ce2e332", "sha256": "6e0753bc126da47381bcc93b3d41f34141125fcf93e2c1507c019b1bc5179e5d"}, "downloads": -1, "filename": "django-sortedone2many-0.1.7.tar.gz", "has_sig": false, "md5_digest": "231183dbb9ca395eeb0fb3e83ce2e332", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12176, "upload_time": "2016-01-08T12:42:24", "upload_time_iso_8601": "2016-01-08T12:42:24.484678Z", "url": "https://files.pythonhosted.org/packages/0c/dd/e69a8ff9f62bb938e08337113d2e20a2d29fac91ebbb986778345865c404/django-sortedone2many-0.1.7.tar.gz", "yanked": false}], "0.1.8": [{"comment_text": "", "digests": {"md5": "68aaf8c4d21904e067bc65e0e19ac612", "sha256": "0ae69a2a55fac78fb59c799701ac06314759b4952a259f030221233edcf9190a"}, "downloads": -1, "filename": "django-sortedone2many-0.1.8.tar.gz", "has_sig": false, "md5_digest": "68aaf8c4d21904e067bc65e0e19ac612", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12186, "upload_time": "2016-01-08T12:52:12", "upload_time_iso_8601": "2016-01-08T12:52:12.301353Z", "url": "https://files.pythonhosted.org/packages/5b/3b/86034697a5fd70e36ce2d37beacc31739b665be97a032a24f8bc09d1b851/django-sortedone2many-0.1.8.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "800b2281c609c28a3bcf16db62cadb1c", "sha256": "03aa9913eeacadd6cf38b567551a531c76011cf6c6931ac1d9777474a2a936bb"}, "downloads": -1, "filename": "django-sortedone2many-0.2.0.tar.gz", "has_sig": false, "md5_digest": "800b2281c609c28a3bcf16db62cadb1c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12306, "upload_time": "2016-05-17T11:56:41", "upload_time_iso_8601": "2016-05-17T11:56:41.784931Z", "url": "https://files.pythonhosted.org/packages/e4/a1/d325e7c10b3e0a4344d66844b0bda8645b9c225a84602ba8af725ed4ef1a/django-sortedone2many-0.2.0.tar.gz", "yanked": false}], "0.2.1": [{"comment_text": "", "digests": {"md5": "24cab1f7a02c6e5c648e55504c294786", "sha256": "1048af873d49ddbfed1e895d7661b61204322c1fcd57d4180a49779c111471ce"}, "downloads": -1, "filename": "django-sortedone2many-0.2.1.tar.gz", "has_sig": false, "md5_digest": "24cab1f7a02c6e5c648e55504c294786", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12332, "upload_time": "2016-05-18T04:15:09", "upload_time_iso_8601": "2016-05-18T04:15:09.559716Z", "url": "https://files.pythonhosted.org/packages/f2/81/1662f3d78940ed0e324520f69a1eafd8d1a3783f433bded19aee4e1798eb/django-sortedone2many-0.2.1.tar.gz", "yanked": false}], "0.2.2": [{"comment_text": "", "digests": {"md5": "f7be10e91b7cbbbf1471ba95d2411b1c", "sha256": "7b83a6a15afc8b2af9bc67fba641a1b05cac3956962694690015071a3c77c12a"}, "downloads": -1, "filename": "django-sortedone2many-0.2.2.tar.gz", "has_sig": false, "md5_digest": "f7be10e91b7cbbbf1471ba95d2411b1c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12380, "upload_time": "2016-05-18T14:29:00", "upload_time_iso_8601": "2016-05-18T14:29:00.332473Z", "url": "https://files.pythonhosted.org/packages/c1/55/05c49f109ec637bf509f5ee7c32d6971dbec368c13246e78f315374c7d24/django-sortedone2many-0.2.2.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "f7be10e91b7cbbbf1471ba95d2411b1c", "sha256": "7b83a6a15afc8b2af9bc67fba641a1b05cac3956962694690015071a3c77c12a"}, "downloads": -1, "filename": "django-sortedone2many-0.2.2.tar.gz", "has_sig": false, "md5_digest": "f7be10e91b7cbbbf1471ba95d2411b1c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12380, "upload_time": "2016-05-18T14:29:00", "upload_time_iso_8601": "2016-05-18T14:29:00.332473Z", "url": "https://files.pythonhosted.org/packages/c1/55/05c49f109ec637bf509f5ee7c32d6971dbec368c13246e78f315374c7d24/django-sortedone2many-0.2.2.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:53:04 2020"}