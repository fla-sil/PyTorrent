{"info": {"author": "Markus Ressel", "author_email": "mail@markusressel.de", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7"], "description": "# py-image-dedup [![Build Status](https://travis-ci.org/markusressel/py-image-dedup.svg?branch=master)](https://travis-ci.org/markusressel/gopass-chrome-importer) [![PyPI version](https://badge.fury.io/py/py-image-dedup.svg)](https://badge.fury.io/py/py-image-dedup)\n\n**py-image-dedup** is a tool to scan through a library of photos, find duplicates and remove them\nin a prioritized way.\n\nIt is build upon [Image-Match](https://github.com/ascribe/image-match) a very popular library to compute\na pHash for an image and store the result in an ElasticSearch backend for very high scalability.\n\n[![asciicast](https://asciinema.org/a/3WbBxMXnZyT1QnuTP9fm37wkS.svg)](https://asciinema.org/a/3WbBxMXnZyT1QnuTP9fm37wkS)\n\n# How to use\n\n## Setup elasticsearch backend\n\n### Elasticsearch version\n\nThis library requires elasticsearch version 5 or later. Sadly the\n[Image-Match](https://github.com/ascribe/image-match) library \nspecifies version 2 for no apparent reason, so you have to remove this\nrequirement from it's requirements.\n\nBecause of this **py-image-dedup** will exit with an **error on first install**.\n\nTo fix this find the installed files of the image-match library, f.ex.\n\n```\n../venv/lib/python3.6/site-packages/image_match-1.1.2-py3.6.egg-info/requires.txt    \n```\n\nand remove the second line\n```\nelasticsearch<2.4,>=2.3\n```\n\nfrom the file.  \nAfter that **py-image-dedup** should install and run as expected.\n\n### Set up the index\n\nSince this library is based on [Image-Match](https://github.com/ascribe/image-match) \nyou need a running elasticsearch instance for efficient storing and \nquerying of image signatures.\n\n**py-image-dedup** uses a single index called `images` that you can create using the following command:\n\n```shell\ncurl -X PUT \"192.168.2.24:9200/images?pretty\" -H \"Content-Type: application/json\" -d \"\n{\n  \\\"mappings\\\": {\n    \\\"image\\\": {\n      \\\"properties\\\": {\n        \\\"path\\\": {\n          \\\"type\\\": \\\"keyword\\\",\n          \\\"ignore_above\\\": 256\n        }\n      }\n    }\n  }\n}\n```\n\n## Configuration\n\n**py-image-dedup** offers customization options to make sure it can \ndetect the best image with the highest probability possible.\n\n| Name | Description | Default |\n|------|-------------|---------|\n| threads | Number of threads to use for image analysis | `2` |\n| recursive | Toggle to analyse given directories recursively | `False` |\n| search_across_dirs | Toggle to allow duplicate results across given directories | `False` |\n| file_extensions | Comma separated list of file extensions to analyse | `\"png,jpg,jpeg\"` |\n| max_dist | Maximum distance of image signatures to consider. This is a value in the range [0..1] | `0.1` |\n\n## Command line usage\n\n**py-image-dedup** can be used from the command line like this:\n\n```shell\npy-image-dedup deduplicate --help\n```\n\nHave a look at the help output to see how you can customize it.\n\n## Dry run\n\nTo analyze images and get an overview of what images would be deleted \nbe sure to make a dry run first.\n\n```shell\npy-image-dedup -d \"/home/mydir\" --dry-run\n```\n\n# Contributing\n\nGitHub is for social coding: if you want to write code, I encourage contributions through pull requests from forks\nof this repository. Create GitHub tickets for bugs and new features and comment on the ones that you are interested in.\n\n# License\n\n```\npy-image-dedup by Markus Ressel\nCopyright (C) 2018  Markus Ressel\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n```\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/markusressel/py-image-dedup", "keywords": "", "license": "GPLv3+", "maintainer": "", "maintainer_email": "", "name": "py-image-dedup", "package_url": "https://pypi.org/project/py-image-dedup/", "platform": "", "project_url": "https://pypi.org/project/py-image-dedup/", "project_urls": {"Homepage": "https://github.com/markusressel/py-image-dedup"}, "release_url": "https://pypi.org/project/py-image-dedup/1.0.0/", "requires_dist": ["setuptools", "scipy", "numpy", "image-match", "elasticsearch (==6.3.1)", "tabulate", "tqdm", "click", "Pillow"], "requires_python": "", "summary": "A library to find duplicate images and delete unwanted ones", "version": "1.0.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>py-image-dedup <a href=\"https://travis-ci.org/markusressel/gopass-chrome-importer\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c97e0c44cf4520bb5744001949a74415d299ed30/68747470733a2f2f7472617669732d63692e6f72672f6d61726b757372657373656c2f70792d696d6167652d64656475702e7376673f6272616e63683d6d6173746572\"></a> <a href=\"https://badge.fury.io/py/py-image-dedup\" rel=\"nofollow\"><img alt=\"PyPI version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/1c6197ea57aeca6e42b95c88b05f6d2990eab381/68747470733a2f2f62616467652e667572792e696f2f70792f70792d696d6167652d64656475702e737667\"></a></h1>\n<p><strong>py-image-dedup</strong> is a tool to scan through a library of photos, find duplicates and remove them\nin a prioritized way.</p>\n<p>It is build upon <a href=\"https://github.com/ascribe/image-match\" rel=\"nofollow\">Image-Match</a> a very popular library to compute\na pHash for an image and store the result in an ElasticSearch backend for very high scalability.</p>\n<p><a href=\"https://asciinema.org/a/3WbBxMXnZyT1QnuTP9fm37wkS\" rel=\"nofollow\"><img alt=\"asciicast\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/621711b0fd4844fddc1f2e93576ae59cb2891af3/68747470733a2f2f61736369696e656d612e6f72672f612f33576242784d586e5a795431516e75545039666d3337776b532e737667\"></a></p>\n<h1>How to use</h1>\n<h2>Setup elasticsearch backend</h2>\n<h3>Elasticsearch version</h3>\n<p>This library requires elasticsearch version 5 or later. Sadly the\n<a href=\"https://github.com/ascribe/image-match\" rel=\"nofollow\">Image-Match</a> library\nspecifies version 2 for no apparent reason, so you have to remove this\nrequirement from it's requirements.</p>\n<p>Because of this <strong>py-image-dedup</strong> will exit with an <strong>error on first install</strong>.</p>\n<p>To fix this find the installed files of the image-match library, f.ex.</p>\n<pre><code>../venv/lib/python3.6/site-packages/image_match-1.1.2-py3.6.egg-info/requires.txt    \n</code></pre>\n<p>and remove the second line</p>\n<pre><code>elasticsearch&lt;2.4,&gt;=2.3\n</code></pre>\n<p>from the file.<br>\nAfter that <strong>py-image-dedup</strong> should install and run as expected.</p>\n<h3>Set up the index</h3>\n<p>Since this library is based on <a href=\"https://github.com/ascribe/image-match\" rel=\"nofollow\">Image-Match</a>\nyou need a running elasticsearch instance for efficient storing and\nquerying of image signatures.</p>\n<p><strong>py-image-dedup</strong> uses a single index called <code>images</code> that you can create using the following command:</p>\n<pre>curl -X PUT <span class=\"s2\">\"192.168.2.24:9200/images?pretty\"</span> -H <span class=\"s2\">\"Content-Type: application/json\"</span> -d <span class=\"s2\">\"</span>\n<span class=\"s2\">{</span>\n<span class=\"s2\">  \\\"mappings\\\": {</span>\n<span class=\"s2\">    \\\"image\\\": {</span>\n<span class=\"s2\">      \\\"properties\\\": {</span>\n<span class=\"s2\">        \\\"path\\\": {</span>\n<span class=\"s2\">          \\\"type\\\": \\\"keyword\\\",</span>\n<span class=\"s2\">          \\\"ignore_above\\\": 256</span>\n<span class=\"s2\">        }</span>\n<span class=\"s2\">      }</span>\n<span class=\"s2\">    }</span>\n<span class=\"s2\">  }</span>\n<span class=\"s2\">}</span>\n</pre>\n<h2>Configuration</h2>\n<p><strong>py-image-dedup</strong> offers customization options to make sure it can\ndetect the best image with the highest probability possible.</p>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Description</th>\n<th>Default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>threads</td>\n<td>Number of threads to use for image analysis</td>\n<td><code>2</code></td>\n</tr>\n<tr>\n<td>recursive</td>\n<td>Toggle to analyse given directories recursively</td>\n<td><code>False</code></td>\n</tr>\n<tr>\n<td>search_across_dirs</td>\n<td>Toggle to allow duplicate results across given directories</td>\n<td><code>False</code></td>\n</tr>\n<tr>\n<td>file_extensions</td>\n<td>Comma separated list of file extensions to analyse</td>\n<td><code>\"png,jpg,jpeg\"</code></td>\n</tr>\n<tr>\n<td>max_dist</td>\n<td>Maximum distance of image signatures to consider. This is a value in the range [0..1]</td>\n<td><code>0.1</code></td>\n</tr></tbody></table>\n<h2>Command line usage</h2>\n<p><strong>py-image-dedup</strong> can be used from the command line like this:</p>\n<pre>py-image-dedup deduplicate --help\n</pre>\n<p>Have a look at the help output to see how you can customize it.</p>\n<h2>Dry run</h2>\n<p>To analyze images and get an overview of what images would be deleted\nbe sure to make a dry run first.</p>\n<pre>py-image-dedup -d <span class=\"s2\">\"/home/mydir\"</span> --dry-run\n</pre>\n<h1>Contributing</h1>\n<p>GitHub is for social coding: if you want to write code, I encourage contributions through pull requests from forks\nof this repository. Create GitHub tickets for bugs and new features and comment on the ones that you are interested in.</p>\n<h1>License</h1>\n<pre><code>py-image-dedup by Markus Ressel\nCopyright (C) 2018  Markus Ressel\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.\n</code></pre>\n\n          </div>"}, "last_serial": 4913971, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "b2bb4d0a4d14495b2f29b1a6c100306a", "sha256": "ce42bb325763f86e888e1357f4abc27f613b0289d39c6d215f1ce7c7bbf8eb51"}, "downloads": -1, "filename": "py_image_dedup-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "b2bb4d0a4d14495b2f29b1a6c100306a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 20718, "upload_time": "2019-03-08T05:43:54", "upload_time_iso_8601": "2019-03-08T05:43:54.940142Z", "url": "https://files.pythonhosted.org/packages/59/30/fe496043acca2fc0a88317cab359aba23e3af8ed946a240cd03324fe6c07/py_image_dedup-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "45ad918f682cc9f8b0d88a0d89e24ba4", "sha256": "31043395e5ed9bb035fffbb666f027502e356801ccde48861d020e345d69cf2c"}, "downloads": -1, "filename": "py-image-dedup-1.0.0.tar.gz", "has_sig": false, "md5_digest": "45ad918f682cc9f8b0d88a0d89e24ba4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 18012, "upload_time": "2019-03-08T05:43:57", "upload_time_iso_8601": "2019-03-08T05:43:57.104650Z", "url": "https://files.pythonhosted.org/packages/35/c0/8e9362cd9e77ac98b94fdc748da0c4e89a12b0aa9a9fc9c7de3cba342f58/py-image-dedup-1.0.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "b2bb4d0a4d14495b2f29b1a6c100306a", "sha256": "ce42bb325763f86e888e1357f4abc27f613b0289d39c6d215f1ce7c7bbf8eb51"}, "downloads": -1, "filename": "py_image_dedup-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "b2bb4d0a4d14495b2f29b1a6c100306a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 20718, "upload_time": "2019-03-08T05:43:54", "upload_time_iso_8601": "2019-03-08T05:43:54.940142Z", "url": "https://files.pythonhosted.org/packages/59/30/fe496043acca2fc0a88317cab359aba23e3af8ed946a240cd03324fe6c07/py_image_dedup-1.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "45ad918f682cc9f8b0d88a0d89e24ba4", "sha256": "31043395e5ed9bb035fffbb666f027502e356801ccde48861d020e345d69cf2c"}, "downloads": -1, "filename": "py-image-dedup-1.0.0.tar.gz", "has_sig": false, "md5_digest": "45ad918f682cc9f8b0d88a0d89e24ba4", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 18012, "upload_time": "2019-03-08T05:43:57", "upload_time_iso_8601": "2019-03-08T05:43:57.104650Z", "url": "https://files.pythonhosted.org/packages/35/c0/8e9362cd9e77ac98b94fdc748da0c4e89a12b0aa9a9fc9c7de3cba342f58/py-image-dedup-1.0.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:04:06 2020"}