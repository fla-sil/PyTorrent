{"info": {"author": "13564768842", "author_email": "chinabluexfw@163.com", "bugtrack_url": null, "classifiers": [], "description": "# hehey-hcontainer\n\n#### \u4ecb\u7ecd\nhehey-hcontainer \u662f\u4e00\u4e2apython di \u5bb9\u5668,\u63d0\u4f9b\u4f9d\u8d56\u6ce8\u5165\u7b49\u7b49\u529f\u80fd\n\n#### \u4f9d\u8d56\u4ee5\u53ca\u7248\u672c\u8981\u6c42\n- python >= 3.5\n\n#### \u5b89\u88c5\n- \u76f4\u63a5\u4e0b\u8f7d:\n```\n\n```\n- \u547d\u4ee4\u5b89\u88c5\uff1a\n```\npip install hehey-hcontainer\n```\n#### \u57fa\u7840\u6587\u4ef6\u4ee5\u76ee\u5f55\n\n\n#### \u53c2\u6570\u914d\u7f6e\n```python\nfrom hcontainer.base.Definition import Definition\nbeanConf = {\n    'class':'site.service.User.User', # \u7c7b\u8def\u5f84\n    '_single': True, # \u662f\u5426\u5355\u4f8b,\u9ed8\u8ba4\u662f\u5355\u4f8b,\n    '_scope': 'app', # \u5bf9\u8c61\u4f5c\u7528\u57df, app\u5e94\u7528\u4f5c\u7528\u57df\uff0crequest \u8bf7\u6c42\u4f5c\u7528\u57df\n    '_init': 'init', # \u521d\u59cb\u5316\u65b9\u6cd5, \u5bf9\u8c61\u521b\u5efa\u540e\u8c03\u7528\u8bbe\u7f6e\u7684\u65b9\u6cd5(\u8bbe\u7f6e\u5c5e\u6027\u5b8c\u6210\u540e\u8c03\u7528)\n    '_args': [], # or True \u6784\u9020\u65b9\u6cd5\u53c2\u6570\uff0c\u652f\u6301\u7d22\u5f15\uff0c\u5173\u8054\u6570\u7ec4\n    '_attr': [], # \u7c7b\u5176\u4ed6\u5c5e\u6027\uff0c\u76f4\u63a5\u6ce8\u5165\n    'attr1':'\u5c5e\u60271',\n    'attr2':'\u5c5e\u60272',\n    'attrBean':'<func::bean>',# \u5c5e\u6027\u8c03\u7528\u51fd\u6570, \u81ea\u52a8\u8c03\u7528func\u51fd\u6570(bean) \u83b7\u53d6\u5c5e\u6027\u503c,\n    'addresstBean':'<ref::address|\u5929\u6536\u4f60>',# \u5c5e\u6027\u5bf9\u5e94\u53e6\u4e00\u4e2abean(user),| \u4e4b\u540e\u4e3abean \u7684\u53c2\u6570\n    'attr3':Definition({\n        '_ref':'user' # attr3 \u4e3a\u53e6\u4e00\u4e2abean\u4e3auser\u7684\u5bf9\u8c61\n    })\n}\n\n\n```\n#### \u57fa\u672c\u793a\u4f8b\n- \u5feb\u901f\u4f7f\u7528\n```python\nfrom hcontainer.bean import BeanManager\ncomponents = {\n        # \u6784\u9020\u5668\u6ce8\u5165\n        'user':{\n            'clazz': 'site.service.User.User',\n            '_args':[\n                'hehe \u5c0f\u914c\u4e00\u676f'\n            ],\n        },\n\n        # \u5c5e\u6027\u6ce8\u5165\n        'address':{\n            'clazz':'site.service.Address.Address',\n            'realName':'hehe',\n            'user':'<ref::user>'\n        },\n\n}\n\nbeanManager = BeanManager.make(components);\n\n# \u83b7\u53d6bean \u5b9e\u4f8b\nuser = beanManager.getBean('user')\naddress = beanManager.getBean('address')\n\n```\n\n- \u5c5e\u6027\u6ce8\u5165\n```python\nfrom hcontainer.bean import BeanManager\nclass User:\n\n    def __init__(self,**attrs):\n    \n        self.username = ''\n        \n        if attrs:\n            #\u8bbe\u7f6e\u5c5e\u6027\n            pass\n            \n        return ;\n\n    def getUsername(self):\n\n        return self.username\n        \ncomponents = {\n    # \u6784\u9020\u5668\u6ce8\u5165\n    'user':{\n        'clazz': 'site.service.User.User',\n        'username':'hehe',\n    },\n}\n\n\n\nbeanManager = BeanManager.make(components);\nuser = beanManager.getBean('user')\n\n\n```\n\n- \u6784\u9020\u53c2\u6570\u6ce8\u5165\n```python\n\n# \u793a\u4f8b1\nclass User:\n\n    def __init__(self,**attrs):\n    \n        self.username = ''\n        \n        if attrs:\n            #\u8bbe\u7f6e\u5c5e\u6027\n            pass\n        \n        self._init();\n        return ;\n    \n    def _init(self):\n        # \u521d\u59cb\u5316\u64cd\u4f5c\n        return;\n\n    def getUsername(self):\n\n        return self.username\n\n# \u6b64\u914d\u7f6e\u9488\u5bf9\u6784\u9020\u53c2\u6570\u53ea\u6709**attrs \ncomponents = {\n    # \u6784\u9020\u5668\u6ce8\u5165\n    'user':{\n        'clazz': 'site.service.User.User',\n         '_args':True,\n        'username':'hehe',\n    },\n}\n\n# \u793a\u4f8b2\nclass Address:\n\n    def __init__(self,address='',city = ''):\n        self.addr = address\n        self.city = city\n        self._user = None;\n\n    @property\n    def user(self):\n        return self._user\n\ncomponents = {\n    # \u6784\u9020\u5668\u6ce8\u5165\n    'user':{\n        'clazz': 'site.service.User.User',\n        '_args':[\n            '\u6211\u7684\u6536\u8d27\u8be6\u7ec6\u5730\u5740',\n            '\u4e0a\u6d77'\n        ],\n    },\n}\n\n```\n\n- bean \u5c5e\u6027\u503c\u4e3a\u53e6\u4e00bean \n```python\n\nfrom hcontainer.bean import BeanManager\n\nclass User:\n    \n    def __init__(self):\n    \n        self.username = ''\n        self.address = None;\n        return ;\n    \n    def getAddress(self):\n\n        return self.address\n\nclass Address:\n    def __init__(self,address='',city = ''):\n        self.addr = address\n        self.city = city\n\n    def getAddr(self):\n        return self.addr\n\ncomponents = {\n        'user':{\n            'clazz': 'site.service.User.User',\n            'username':\"hehe \u5c0f\u914c\u4e00\u676f\",\n            'address':'<ref::address>'\n        },\n\n        # \u5c5e\u6027\u6ce8\u5165\n        'address':{\n            'clazz':'site.service.Address.Address',\n            'address':'\u6df1\u5733',\n            'city':'\u4e0a\u6d77',\n        }\n}\n\nbeanManager = BeanManager.make(components);\nuser = beanManager.getBean('user')\naddress = user.getAddress()\naddress.getAddr()\n\n\n```\n\n- \u521d\u59cb\u5316\u65b9\u6cd5(\u5bf9\u8c61\u521b\u5efa\u540e,\u81ea\u52a8\u8c03\u7528\u6307\u5b9a\u7684\u65b9\u6cd5)\n```python\nclass User:\n\n    def __init__(self,**attrs):\n    \n        self.username = ''\n        \n        if attrs:\n            #\u8bbe\u7f6e\u5c5e\u6027\n            pass\n        \n        self._init();\n        return ;\n    \n    def _init(self):\n        # \u521d\u59cb\u5316\u64cd\u4f5c\n        print(\"\u521d\u59cb\u5316\u5bf9\u8c61\u81ea\u52a8\u8c03\u7528\u6b64\u65b9\u6cd5!\")\n        return;\n\n    def getUsername(self):\n\n        return self.username\n\ncomponents = {\n    # \u6784\u9020\u5668\u6ce8\u5165\n    'user':{\n        'clazz': 'site.service.User.User',\n        '_init':\"_init\",\n        'username':'hehe',\n    },\n}\n\n\n```\n\n- \u88c5\u9970\u5668\u6ce8\u89e3(id,ref)\u7c7b\u4e3abean \u5bf9\u8c61\n```python\nfrom hcontainer.bean import BeanManager\nfrom hcontainer import bean\n\n@bean.id(\"addrbean\")\nclass Address:\n\n    def __init__(self,address=''):\n        self.addr = address\n\n    def getAddr(self):\n        return self.addr\n\n@bean.id(\"userbean\")\nclass User:\n\n    def __init__(self,username = 'nnnn'):\n        self.username = username\n        self.__address = None;\n    \n    @property\n    @bean.ref('addrbean',name='__address')\n    def address(self):\n        return self.__address    \n\n    def getName(self):\n\n        return self.username\n\nbeanManager = BeanManager.make();\nuser = beanManager.getBean('user')\n\n```\n\n- \u521b\u5efa\u65b0\u7684bean \u5b9e\u4f8b\n```python\nfrom hcontainer.bean import BeanManager\ncomponents = {\n    # \u6784\u9020\u5668\u6ce8\u5165\n    'user':{\n        'clazz': 'site.service.User.User',\n        '_init':\"_init\",\n        'username':'hehe',\n    },\n}\n\nbeanManager = BeanManager.make(components);\n# \u65b0\u5bf9\u8c61,\u975e\u5355\u4f8b\nuser = beanManager.makeBean('user')\n\n```\n- \u6839\u636e\u7c7b\u8def\u5f84\u521b\u5efabean \u5bf9\u8c61\n```python\nfrom hcontainer.bean import BeanManager\nbeanManager = BeanManager.make();\nuser = beanManager.getBean('site.service.User.User')\n\n```\n\n- bean \u4f5c\u7528\u57df\n```python\n\n\n```\n\n- \u521b\u5efabean\u5bb9\u5668\n```python\nfrom hcontainer.bean import BeanManager\nbeanManager = BeanManager.make();\nrequestContainer = beanManager.makeContainer('request')\nsessionContainer = beanManager.makeContainer('session')\n\n```", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://gitee.com/chinahehe/hehey-hcontainer", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "hehey-hcontainer", "package_url": "https://pypi.org/project/hehey-hcontainer/", "platform": "", "project_url": "https://pypi.org/project/hehey-hcontainer/", "project_urls": {"Homepage": "https://gitee.com/chinahehe/hehey-hcontainer"}, "release_url": "https://pypi.org/project/hehey-hcontainer/1.0.1/", "requires_dist": null, "requires_python": "", "summary": "hehey-hcontainer \u662f\u4e00\u4e2apython di \u5bb9\u5668,\u63d0\u4f9b\u4f9d\u8d56\u6ce8\u5165\u7b49\u7b49\u529f\u80fd", "version": "1.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>hehey-hcontainer</h1>\n<h4>\u4ecb\u7ecd</h4>\n<p>hehey-hcontainer \u662f\u4e00\u4e2apython di \u5bb9\u5668,\u63d0\u4f9b\u4f9d\u8d56\u6ce8\u5165\u7b49\u7b49\u529f\u80fd</p>\n<h4>\u4f9d\u8d56\u4ee5\u53ca\u7248\u672c\u8981\u6c42</h4>\n<ul>\n<li>python &gt;= 3.5</li>\n</ul>\n<h4>\u5b89\u88c5</h4>\n<ul>\n<li>\u76f4\u63a5\u4e0b\u8f7d:</li>\n</ul>\n<pre><code>\n</code></pre>\n<ul>\n<li>\u547d\u4ee4\u5b89\u88c5\uff1a</li>\n</ul>\n<pre><code>pip install hehey-hcontainer\n</code></pre>\n<h4>\u57fa\u7840\u6587\u4ef6\u4ee5\u76ee\u5f55</h4>\n<h4>\u53c2\u6570\u914d\u7f6e</h4>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hcontainer.base.Definition</span> <span class=\"kn\">import</span> <span class=\"n\">Definition</span>\n<span class=\"n\">beanConf</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s1\">'class'</span><span class=\"p\">:</span><span class=\"s1\">'site.service.User.User'</span><span class=\"p\">,</span> <span class=\"c1\"># \u7c7b\u8def\u5f84</span>\n    <span class=\"s1\">'_single'</span><span class=\"p\">:</span> <span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"c1\"># \u662f\u5426\u5355\u4f8b,\u9ed8\u8ba4\u662f\u5355\u4f8b,</span>\n    <span class=\"s1\">'_scope'</span><span class=\"p\">:</span> <span class=\"s1\">'app'</span><span class=\"p\">,</span> <span class=\"c1\"># \u5bf9\u8c61\u4f5c\u7528\u57df, app\u5e94\u7528\u4f5c\u7528\u57df\uff0crequest \u8bf7\u6c42\u4f5c\u7528\u57df</span>\n    <span class=\"s1\">'_init'</span><span class=\"p\">:</span> <span class=\"s1\">'init'</span><span class=\"p\">,</span> <span class=\"c1\"># \u521d\u59cb\u5316\u65b9\u6cd5, \u5bf9\u8c61\u521b\u5efa\u540e\u8c03\u7528\u8bbe\u7f6e\u7684\u65b9\u6cd5(\u8bbe\u7f6e\u5c5e\u6027\u5b8c\u6210\u540e\u8c03\u7528)</span>\n    <span class=\"s1\">'_args'</span><span class=\"p\">:</span> <span class=\"p\">[],</span> <span class=\"c1\"># or True \u6784\u9020\u65b9\u6cd5\u53c2\u6570\uff0c\u652f\u6301\u7d22\u5f15\uff0c\u5173\u8054\u6570\u7ec4</span>\n    <span class=\"s1\">'_attr'</span><span class=\"p\">:</span> <span class=\"p\">[],</span> <span class=\"c1\"># \u7c7b\u5176\u4ed6\u5c5e\u6027\uff0c\u76f4\u63a5\u6ce8\u5165</span>\n    <span class=\"s1\">'attr1'</span><span class=\"p\">:</span><span class=\"s1\">'\u5c5e\u60271'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'attr2'</span><span class=\"p\">:</span><span class=\"s1\">'\u5c5e\u60272'</span><span class=\"p\">,</span>\n    <span class=\"s1\">'attrBean'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;func::bean&gt;'</span><span class=\"p\">,</span><span class=\"c1\"># \u5c5e\u6027\u8c03\u7528\u51fd\u6570, \u81ea\u52a8\u8c03\u7528func\u51fd\u6570(bean) \u83b7\u53d6\u5c5e\u6027\u503c,</span>\n    <span class=\"s1\">'addresstBean'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;ref::address|\u5929\u6536\u4f60&gt;'</span><span class=\"p\">,</span><span class=\"c1\"># \u5c5e\u6027\u5bf9\u5e94\u53e6\u4e00\u4e2abean(user),| \u4e4b\u540e\u4e3abean \u7684\u53c2\u6570</span>\n    <span class=\"s1\">'attr3'</span><span class=\"p\">:</span><span class=\"n\">Definition</span><span class=\"p\">({</span>\n        <span class=\"s1\">'_ref'</span><span class=\"p\">:</span><span class=\"s1\">'user'</span> <span class=\"c1\"># attr3 \u4e3a\u53e6\u4e00\u4e2abean\u4e3auser\u7684\u5bf9\u8c61</span>\n    <span class=\"p\">})</span>\n<span class=\"p\">}</span>\n</pre>\n<h4>\u57fa\u672c\u793a\u4f8b</h4>\n<ul>\n<li>\u5feb\u901f\u4f7f\u7528</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hcontainer.bean</span> <span class=\"kn\">import</span> <span class=\"n\">BeanManager</span>\n<span class=\"n\">components</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"c1\"># \u6784\u9020\u5668\u6ce8\u5165</span>\n        <span class=\"s1\">'user'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'site.service.User.User'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'_args'</span><span class=\"p\">:[</span>\n                <span class=\"s1\">'hehe \u5c0f\u914c\u4e00\u676f'</span>\n            <span class=\"p\">],</span>\n        <span class=\"p\">},</span>\n\n        <span class=\"c1\"># \u5c5e\u6027\u6ce8\u5165</span>\n        <span class=\"s1\">'address'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'clazz'</span><span class=\"p\">:</span><span class=\"s1\">'site.service.Address.Address'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'realName'</span><span class=\"p\">:</span><span class=\"s1\">'hehe'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'user'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;ref::user&gt;'</span>\n        <span class=\"p\">},</span>\n\n<span class=\"p\">}</span>\n\n<span class=\"n\">beanManager</span> <span class=\"o\">=</span> <span class=\"n\">BeanManager</span><span class=\"o\">.</span><span class=\"n\">make</span><span class=\"p\">(</span><span class=\"n\">components</span><span class=\"p\">);</span>\n\n<span class=\"c1\"># \u83b7\u53d6bean \u5b9e\u4f8b</span>\n<span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">beanManager</span><span class=\"o\">.</span><span class=\"n\">getBean</span><span class=\"p\">(</span><span class=\"s1\">'user'</span><span class=\"p\">)</span>\n<span class=\"n\">address</span> <span class=\"o\">=</span> <span class=\"n\">beanManager</span><span class=\"o\">.</span><span class=\"n\">getBean</span><span class=\"p\">(</span><span class=\"s1\">'address'</span><span class=\"p\">)</span>\n</pre>\n<ul>\n<li>\u5c5e\u6027\u6ce8\u5165</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hcontainer.bean</span> <span class=\"kn\">import</span> <span class=\"n\">BeanManager</span>\n<span class=\"k\">class</span> <span class=\"nc\">User</span><span class=\"p\">:</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"o\">**</span><span class=\"n\">attrs</span><span class=\"p\">):</span>\n    \n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"s1\">''</span>\n        \n        <span class=\"k\">if</span> <span class=\"n\">attrs</span><span class=\"p\">:</span>\n            <span class=\"c1\">#\u8bbe\u7f6e\u5c5e\u6027</span>\n            <span class=\"k\">pass</span>\n            \n        <span class=\"k\">return</span> <span class=\"p\">;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">getUsername</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span>\n        \n<span class=\"n\">components</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"c1\"># \u6784\u9020\u5668\u6ce8\u5165</span>\n    <span class=\"s1\">'user'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'site.service.User.User'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'username'</span><span class=\"p\">:</span><span class=\"s1\">'hehe'</span><span class=\"p\">,</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">}</span>\n\n\n\n<span class=\"n\">beanManager</span> <span class=\"o\">=</span> <span class=\"n\">BeanManager</span><span class=\"o\">.</span><span class=\"n\">make</span><span class=\"p\">(</span><span class=\"n\">components</span><span class=\"p\">);</span>\n<span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">beanManager</span><span class=\"o\">.</span><span class=\"n\">getBean</span><span class=\"p\">(</span><span class=\"s1\">'user'</span><span class=\"p\">)</span>\n</pre>\n<ul>\n<li>\u6784\u9020\u53c2\u6570\u6ce8\u5165</li>\n</ul>\n<pre><span class=\"c1\"># \u793a\u4f8b1</span>\n<span class=\"k\">class</span> <span class=\"nc\">User</span><span class=\"p\">:</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"o\">**</span><span class=\"n\">attrs</span><span class=\"p\">):</span>\n    \n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"s1\">''</span>\n        \n        <span class=\"k\">if</span> <span class=\"n\">attrs</span><span class=\"p\">:</span>\n            <span class=\"c1\">#\u8bbe\u7f6e\u5c5e\u6027</span>\n            <span class=\"k\">pass</span>\n        \n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_init</span><span class=\"p\">();</span>\n        <span class=\"k\">return</span> <span class=\"p\">;</span>\n    \n    <span class=\"k\">def</span> <span class=\"nf\">_init</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"c1\"># \u521d\u59cb\u5316\u64cd\u4f5c</span>\n        <span class=\"k\">return</span><span class=\"p\">;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">getUsername</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span>\n\n<span class=\"c1\"># \u6b64\u914d\u7f6e\u9488\u5bf9\u6784\u9020\u53c2\u6570\u53ea\u6709**attrs </span>\n<span class=\"n\">components</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"c1\"># \u6784\u9020\u5668\u6ce8\u5165</span>\n    <span class=\"s1\">'user'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'site.service.User.User'</span><span class=\"p\">,</span>\n         <span class=\"s1\">'_args'</span><span class=\"p\">:</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n        <span class=\"s1\">'username'</span><span class=\"p\">:</span><span class=\"s1\">'hehe'</span><span class=\"p\">,</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\"># \u793a\u4f8b2</span>\n<span class=\"k\">class</span> <span class=\"nc\">Address</span><span class=\"p\">:</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"n\">address</span><span class=\"o\">=</span><span class=\"s1\">''</span><span class=\"p\">,</span><span class=\"n\">city</span> <span class=\"o\">=</span> <span class=\"s1\">''</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">addr</span> <span class=\"o\">=</span> <span class=\"n\">address</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">city</span> <span class=\"o\">=</span> <span class=\"n\">city</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_user</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">;</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">user</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_user</span>\n\n<span class=\"n\">components</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"c1\"># \u6784\u9020\u5668\u6ce8\u5165</span>\n    <span class=\"s1\">'user'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'site.service.User.User'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'_args'</span><span class=\"p\">:[</span>\n            <span class=\"s1\">'\u6211\u7684\u6536\u8d27\u8be6\u7ec6\u5730\u5740'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'\u4e0a\u6d77'</span>\n        <span class=\"p\">],</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">}</span>\n</pre>\n<ul>\n<li>bean \u5c5e\u6027\u503c\u4e3a\u53e6\u4e00bean</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hcontainer.bean</span> <span class=\"kn\">import</span> <span class=\"n\">BeanManager</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">User</span><span class=\"p\">:</span>\n    \n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n    \n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"s1\">''</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">address</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">;</span>\n        <span class=\"k\">return</span> <span class=\"p\">;</span>\n    \n    <span class=\"k\">def</span> <span class=\"nf\">getAddress</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">address</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Address</span><span class=\"p\">:</span>\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"n\">address</span><span class=\"o\">=</span><span class=\"s1\">''</span><span class=\"p\">,</span><span class=\"n\">city</span> <span class=\"o\">=</span> <span class=\"s1\">''</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">addr</span> <span class=\"o\">=</span> <span class=\"n\">address</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">city</span> <span class=\"o\">=</span> <span class=\"n\">city</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">getAddr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">addr</span>\n\n<span class=\"n\">components</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s1\">'user'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'site.service.User.User'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'username'</span><span class=\"p\">:</span><span class=\"s2\">\"hehe \u5c0f\u914c\u4e00\u676f\"</span><span class=\"p\">,</span>\n            <span class=\"s1\">'address'</span><span class=\"p\">:</span><span class=\"s1\">'&lt;ref::address&gt;'</span>\n        <span class=\"p\">},</span>\n\n        <span class=\"c1\"># \u5c5e\u6027\u6ce8\u5165</span>\n        <span class=\"s1\">'address'</span><span class=\"p\">:{</span>\n            <span class=\"s1\">'clazz'</span><span class=\"p\">:</span><span class=\"s1\">'site.service.Address.Address'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'address'</span><span class=\"p\">:</span><span class=\"s1\">'\u6df1\u5733'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'city'</span><span class=\"p\">:</span><span class=\"s1\">'\u4e0a\u6d77'</span><span class=\"p\">,</span>\n        <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">beanManager</span> <span class=\"o\">=</span> <span class=\"n\">BeanManager</span><span class=\"o\">.</span><span class=\"n\">make</span><span class=\"p\">(</span><span class=\"n\">components</span><span class=\"p\">);</span>\n<span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">beanManager</span><span class=\"o\">.</span><span class=\"n\">getBean</span><span class=\"p\">(</span><span class=\"s1\">'user'</span><span class=\"p\">)</span>\n<span class=\"n\">address</span> <span class=\"o\">=</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">getAddress</span><span class=\"p\">()</span>\n<span class=\"n\">address</span><span class=\"o\">.</span><span class=\"n\">getAddr</span><span class=\"p\">()</span>\n</pre>\n<ul>\n<li>\u521d\u59cb\u5316\u65b9\u6cd5(\u5bf9\u8c61\u521b\u5efa\u540e,\u81ea\u52a8\u8c03\u7528\u6307\u5b9a\u7684\u65b9\u6cd5)</li>\n</ul>\n<pre><span class=\"k\">class</span> <span class=\"nc\">User</span><span class=\"p\">:</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"o\">**</span><span class=\"n\">attrs</span><span class=\"p\">):</span>\n    \n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"s1\">''</span>\n        \n        <span class=\"k\">if</span> <span class=\"n\">attrs</span><span class=\"p\">:</span>\n            <span class=\"c1\">#\u8bbe\u7f6e\u5c5e\u6027</span>\n            <span class=\"k\">pass</span>\n        \n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_init</span><span class=\"p\">();</span>\n        <span class=\"k\">return</span> <span class=\"p\">;</span>\n    \n    <span class=\"k\">def</span> <span class=\"nf\">_init</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"c1\"># \u521d\u59cb\u5316\u64cd\u4f5c</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"\u521d\u59cb\u5316\u5bf9\u8c61\u81ea\u52a8\u8c03\u7528\u6b64\u65b9\u6cd5!\"</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span><span class=\"p\">;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">getUsername</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span>\n\n<span class=\"n\">components</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"c1\"># \u6784\u9020\u5668\u6ce8\u5165</span>\n    <span class=\"s1\">'user'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'site.service.User.User'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'_init'</span><span class=\"p\">:</span><span class=\"s2\">\"_init\"</span><span class=\"p\">,</span>\n        <span class=\"s1\">'username'</span><span class=\"p\">:</span><span class=\"s1\">'hehe'</span><span class=\"p\">,</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">}</span>\n</pre>\n<ul>\n<li>\u88c5\u9970\u5668\u6ce8\u89e3(id,ref)\u7c7b\u4e3abean \u5bf9\u8c61</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hcontainer.bean</span> <span class=\"kn\">import</span> <span class=\"n\">BeanManager</span>\n<span class=\"kn\">from</span> <span class=\"nn\">hcontainer</span> <span class=\"kn\">import</span> <span class=\"n\">bean</span>\n\n<span class=\"nd\">@bean</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">(</span><span class=\"s2\">\"addrbean\"</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">Address</span><span class=\"p\">:</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"n\">address</span><span class=\"o\">=</span><span class=\"s1\">''</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">addr</span> <span class=\"o\">=</span> <span class=\"n\">address</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">getAddr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">addr</span>\n\n<span class=\"nd\">@bean</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">(</span><span class=\"s2\">\"userbean\"</span><span class=\"p\">)</span>\n<span class=\"k\">class</span> <span class=\"nc\">User</span><span class=\"p\">:</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"s1\">'nnnn'</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span> <span class=\"o\">=</span> <span class=\"n\">username</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__address</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">;</span>\n    \n    <span class=\"nd\">@property</span>\n    <span class=\"nd\">@bean</span><span class=\"o\">.</span><span class=\"n\">ref</span><span class=\"p\">(</span><span class=\"s1\">'addrbean'</span><span class=\"p\">,</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'__address'</span><span class=\"p\">)</span>\n    <span class=\"k\">def</span> <span class=\"nf\">address</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__address</span>    \n\n    <span class=\"k\">def</span> <span class=\"nf\">getName</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">username</span>\n\n<span class=\"n\">beanManager</span> <span class=\"o\">=</span> <span class=\"n\">BeanManager</span><span class=\"o\">.</span><span class=\"n\">make</span><span class=\"p\">();</span>\n<span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">beanManager</span><span class=\"o\">.</span><span class=\"n\">getBean</span><span class=\"p\">(</span><span class=\"s1\">'user'</span><span class=\"p\">)</span>\n</pre>\n<ul>\n<li>\u521b\u5efa\u65b0\u7684bean \u5b9e\u4f8b</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hcontainer.bean</span> <span class=\"kn\">import</span> <span class=\"n\">BeanManager</span>\n<span class=\"n\">components</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"c1\"># \u6784\u9020\u5668\u6ce8\u5165</span>\n    <span class=\"s1\">'user'</span><span class=\"p\">:{</span>\n        <span class=\"s1\">'clazz'</span><span class=\"p\">:</span> <span class=\"s1\">'site.service.User.User'</span><span class=\"p\">,</span>\n        <span class=\"s1\">'_init'</span><span class=\"p\">:</span><span class=\"s2\">\"_init\"</span><span class=\"p\">,</span>\n        <span class=\"s1\">'username'</span><span class=\"p\">:</span><span class=\"s1\">'hehe'</span><span class=\"p\">,</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">beanManager</span> <span class=\"o\">=</span> <span class=\"n\">BeanManager</span><span class=\"o\">.</span><span class=\"n\">make</span><span class=\"p\">(</span><span class=\"n\">components</span><span class=\"p\">);</span>\n<span class=\"c1\"># \u65b0\u5bf9\u8c61,\u975e\u5355\u4f8b</span>\n<span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">beanManager</span><span class=\"o\">.</span><span class=\"n\">makeBean</span><span class=\"p\">(</span><span class=\"s1\">'user'</span><span class=\"p\">)</span>\n</pre>\n<ul>\n<li>\u6839\u636e\u7c7b\u8def\u5f84\u521b\u5efabean \u5bf9\u8c61</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hcontainer.bean</span> <span class=\"kn\">import</span> <span class=\"n\">BeanManager</span>\n<span class=\"n\">beanManager</span> <span class=\"o\">=</span> <span class=\"n\">BeanManager</span><span class=\"o\">.</span><span class=\"n\">make</span><span class=\"p\">();</span>\n<span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">beanManager</span><span class=\"o\">.</span><span class=\"n\">getBean</span><span class=\"p\">(</span><span class=\"s1\">'site.service.User.User'</span><span class=\"p\">)</span>\n</pre>\n<ul>\n<li>bean \u4f5c\u7528\u57df</li>\n</ul>\n<pre></pre>\n<ul>\n<li>\u521b\u5efabean\u5bb9\u5668</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">hcontainer.bean</span> <span class=\"kn\">import</span> <span class=\"n\">BeanManager</span>\n<span class=\"n\">beanManager</span> <span class=\"o\">=</span> <span class=\"n\">BeanManager</span><span class=\"o\">.</span><span class=\"n\">make</span><span class=\"p\">();</span>\n<span class=\"n\">requestContainer</span> <span class=\"o\">=</span> <span class=\"n\">beanManager</span><span class=\"o\">.</span><span class=\"n\">makeContainer</span><span class=\"p\">(</span><span class=\"s1\">'request'</span><span class=\"p\">)</span>\n<span class=\"n\">sessionContainer</span> <span class=\"o\">=</span> <span class=\"n\">beanManager</span><span class=\"o\">.</span><span class=\"n\">makeContainer</span><span class=\"p\">(</span><span class=\"s1\">'session'</span><span class=\"p\">)</span>\n</pre>\n\n          </div>"}, "last_serial": 6201430, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "36939afaf9f8c770abc60ec9b0d55f3c", "sha256": "3962d694e5061ba41d729dd734d2e07a06fac40fd49e330be48607df33832f18"}, "downloads": -1, "filename": "hehey-hcontainer-1.0.0.tar.gz", "has_sig": false, "md5_digest": "36939afaf9f8c770abc60ec9b0d55f3c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 19377, "upload_time": "2019-11-26T08:23:26", "upload_time_iso_8601": "2019-11-26T08:23:26.882430Z", "url": "https://files.pythonhosted.org/packages/3f/ac/7c16c38fd7930846a3c9c065d76cd68c5c6bfadc5b7a33d2ef1c543e5136/hehey-hcontainer-1.0.0.tar.gz", "yanked": false}], "1.0.1": [{"comment_text": "", "digests": {"md5": "d7dfb82704060327371b60052a8bed22", "sha256": "690b4c292f0ea2862c95f81061bc9d8aecda568cadc31bb63d8ba1a7b2a8a043"}, "downloads": -1, "filename": "hehey-hcontainer-1.0.1.tar.gz", "has_sig": false, "md5_digest": "d7dfb82704060327371b60052a8bed22", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14173, "upload_time": "2019-11-26T14:10:21", "upload_time_iso_8601": "2019-11-26T14:10:21.949033Z", "url": "https://files.pythonhosted.org/packages/79/4a/232a6dbfde598c250b2c38fe5675322862a755875290cd5cac17e7028315/hehey-hcontainer-1.0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "d7dfb82704060327371b60052a8bed22", "sha256": "690b4c292f0ea2862c95f81061bc9d8aecda568cadc31bb63d8ba1a7b2a8a043"}, "downloads": -1, "filename": "hehey-hcontainer-1.0.1.tar.gz", "has_sig": false, "md5_digest": "d7dfb82704060327371b60052a8bed22", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 14173, "upload_time": "2019-11-26T14:10:21", "upload_time_iso_8601": "2019-11-26T14:10:21.949033Z", "url": "https://files.pythonhosted.org/packages/79/4a/232a6dbfde598c250b2c38fe5675322862a755875290cd5cac17e7028315/hehey-hcontainer-1.0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:51:52 2020"}