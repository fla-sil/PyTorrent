{"info": {"author": "Tom Ritchford", "author_email": "tom@swirly.com", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3.5", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Software Development :: Libraries", "Topic :: Utilities"], "description": "##################################################\n\u26cf\ufe0fsproc: subprocesseses for subhumanses  \u26cf\n##################################################\n\nRun a command in a subprocess and yield lines of text from stdout and stderr\n\n*********\nEXAMPLES\n*********\n\n.. code-block:: python\n\n    import sproc\n\n    CMD = 'my-unix-command \"My Cool File.txt\" No-file.txt'\n\n    for ok, line in sproc.Sub(CMD) as sp:\n        if ok:\n             print(' ', line)\n        else:\n             print('!', line)\n\n    if sp.returncode:\n        print('Error code', sp.returncode)\n\n    # Return two lists of text lines and a returncode\n    out_lines, err_lines, returncode = sproc.run(CMD)\n\n    # Call callback functions with lines of text read from stdout and stderr\n    returncode = sproc.call(CMD, save_results, print_errors)\n\n    # Log stdout and stderr, with prefixes\n    returncode = sproc.log(CMD)\n\n***\nAPI\n***\n\nMethods on ``class sproc.Sub:``\n===============================\n\n``Sub.__init__(self, cmd, **kwds)``\n-----------------------------------\n\n    Iterate over lines of text from a subprocess.\n\n    If ``kwargs['shell']`` is true, ``Popen`` expects a string,\n    and so if ``cmd`` is not a string, it is joined using ``shlex``.\n\n    If ``kwargs['shell']`` is false, ``Popen`` expects a list of strings,\n    and so if ``cmd`` is a string, it is split using ``shlex``.\n\n    ARGUMENTS\n      cmd:\n        The command to run in a subprocess: a string or a list or tuple of strings\n\n      kwargs:\n        Keyword arguments passed to subprocess.Popen()\n\n``Sub.__iter__(self)``\n----------------------\n\n            Yields a sequence of ``ok, line`` pairs from ``stdout`` and ``stderr`` of\n            a subprocess, where ``ok`` is ``True`` if ``line`` came from ``stdout``\n            and ``False`` if it came from ``stderr``.\n\n            After iteration is done, the ``.returncode`` property contains\n            the error code from the subprocess, an integer where 0 means no error.\n\n\n``Sub.call(self, out=None, err=None)``\n--------------------------------------\n\n    Run the subprocess and call function ``out`` with lines from\n    ``stdout`` and function ``err`` with lines from ``stderr``.\n\n    Blocks until the subprocess is complete: the callbacks are on\n    the current thread.\n\n    ARGUMENTS\n      out:\n        if not None, ``out`` is called for each line from the subprocess's stdout\n\n      err:\n        if not None, ``err`` is called for each line from the subprocess's stderr,\n\n``Sub.run(self)``\n-----------------\n\n    Reads lines from ``stdout`` and ``stderr`` into two lists ``out`` and ``err``,\n    then returns a tuple ``(out, err, returncode)``\n\n``Sub.log(self, out='  ', err='! ', print=<built-in function print>)``\n----------------------------------------------------------------------\n\n    Read lines from ``stdin`` and ``stderr`` and prints them with prefixes\n\n    Returns the shell integer error code from the subprocess, where 0 means\n    no error.\n\n    ARGUMENTS\n      out:\n        Prefix for printing lines from stdout\n\n      err:\n        Prefix for printing lines from stderr\n\n\nFunctions\n=========\n\n``sproc.call(cmd, out=None, err=None, **kwds)``\n-----------------------------------------------\n\n    Run the subprocess and call function ``out`` with lines from\n    ``stdout`` and function ``err`` with lines from ``stderr``.\n\n    Blocks until the subprocess is complete: the callbacks are on\n    the current thread.\n\n    ARGUMENTS\n      cmd:\n        The command to run in a subprocess: a string or a list or tuple of strings\n\n      out:\n        if not None, ``out`` is called for each line from the subprocess's stdout\n\n      err:\n        if not None, ``err`` is called for each line from the subprocess's stderr,\n\n      kwargs:\n        Keyword arguments passed to subprocess.Popen()\n\n\n``sproc.run(cmd, **kwds)``\n--------------------------\n\n    Reads lines from ``stdout`` and ``stderr`` into two lists ``out`` and ``err``,\n    then returns a tuple ``(out, err, returncode)``\n\n    ARGUMENTS\n      cmd:\n        The command to run in a subprocess: a string or a list or tuple of strings\n\n      kwargs:\n        Keyword arguments passed to subprocess.Popen()\n\n\n``sproc.log(cmd, out='  ', err='! ', print=<built-in function print>, **kwds)``\n-------------------------------------------------------------------------------\n\n    Read lines from ``stdin`` and ``stderr`` and prints them with prefixes\n\n    Returns the shell integer error code from the subprocess, where 0 means\n    no error.\n\n    ARGUMENTS\n      cmd:\n        The command to run in a subprocess: a string or a list or tuple of strings\n\n      out:\n        Prefix for printing lines from stdout\n\n      err:\n        Prefix for printing lines from stderr\n\n      kwargs:\n        Keyword arguments passed to subprocess.Popen()\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/rec/sproc", "keywords": "backups", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "sproc", "package_url": "https://pypi.org/project/sproc/", "platform": "", "project_url": "https://pypi.org/project/sproc/", "project_urls": {"Homepage": "https://github.com/rec/sproc"}, "release_url": "https://pypi.org/project/sproc/2.0.1/", "requires_dist": null, "requires_python": "", "summary": "Run a subprocess with callbacks", "version": "2.0.1", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>Run a command in a subprocess and yield lines of text from stdout and stderr</p>\n<div id=\"examples\">\n<h2>EXAMPLES</h2>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">sproc</span>\n\n<span class=\"n\">CMD</span> <span class=\"o\">=</span> <span class=\"s1\">'my-unix-command \"My Cool File.txt\" No-file.txt'</span>\n\n<span class=\"k\">for</span> <span class=\"n\">ok</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"ow\">in</span> <span class=\"n\">sproc</span><span class=\"o\">.</span><span class=\"n\">Sub</span><span class=\"p\">(</span><span class=\"n\">CMD</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">sp</span><span class=\"p\">:</span>\n    <span class=\"k\">if</span> <span class=\"n\">ok</span><span class=\"p\">:</span>\n         <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">' '</span><span class=\"p\">,</span> <span class=\"n\">line</span><span class=\"p\">)</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n         <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'!'</span><span class=\"p\">,</span> <span class=\"n\">line</span><span class=\"p\">)</span>\n\n<span class=\"k\">if</span> <span class=\"n\">sp</span><span class=\"o\">.</span><span class=\"n\">returncode</span><span class=\"p\">:</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Error code'</span><span class=\"p\">,</span> <span class=\"n\">sp</span><span class=\"o\">.</span><span class=\"n\">returncode</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Return two lists of text lines and a returncode</span>\n<span class=\"n\">out_lines</span><span class=\"p\">,</span> <span class=\"n\">err_lines</span><span class=\"p\">,</span> <span class=\"n\">returncode</span> <span class=\"o\">=</span> <span class=\"n\">sproc</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">CMD</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Call callback functions with lines of text read from stdout and stderr</span>\n<span class=\"n\">returncode</span> <span class=\"o\">=</span> <span class=\"n\">sproc</span><span class=\"o\">.</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"n\">CMD</span><span class=\"p\">,</span> <span class=\"n\">save_results</span><span class=\"p\">,</span> <span class=\"n\">print_errors</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Log stdout and stderr, with prefixes</span>\n<span class=\"n\">returncode</span> <span class=\"o\">=</span> <span class=\"n\">sproc</span><span class=\"o\">.</span><span class=\"n\">log</span><span class=\"p\">(</span><span class=\"n\">CMD</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"api\">\n<h2>API</h2>\n<div id=\"methods-on-class-sproc-sub\">\n<h3>Methods on <tt>class sproc.Sub:</tt></h3>\n<div id=\"sub-init-self-cmd-kwds\">\n<h4><tt>Sub.__init__(self, cmd, **kwds)</tt></h4>\n<blockquote>\n<p>Iterate over lines of text from a subprocess.</p>\n<p>If <tt><span class=\"pre\">kwargs['shell']</span></tt> is true, <tt>Popen</tt> expects a string,\nand so if <tt>cmd</tt> is not a string, it is joined using <tt>shlex</tt>.</p>\n<p>If <tt><span class=\"pre\">kwargs['shell']</span></tt> is false, <tt>Popen</tt> expects a list of strings,\nand so if <tt>cmd</tt> is a string, it is split using <tt>shlex</tt>.</p>\n<dl>\n<dt>ARGUMENTS</dt>\n<dd><dl>\n<dt>cmd:</dt>\n<dd>The command to run in a subprocess: a string or a list or tuple of strings</dd>\n<dt>kwargs:</dt>\n<dd>Keyword arguments passed to subprocess.Popen()</dd>\n</dl>\n</dd>\n</dl>\n</blockquote>\n</div>\n<div id=\"sub-iter-self\">\n<h4><tt>Sub.__iter__(self)</tt></h4>\n<blockquote>\n<p>Yields a sequence of <tt>ok, line</tt> pairs from <tt>stdout</tt> and <tt>stderr</tt> of\na subprocess, where <tt>ok</tt> is <tt>True</tt> if <tt>line</tt> came from <tt>stdout</tt>\nand <tt>False</tt> if it came from <tt>stderr</tt>.</p>\n<p>After iteration is done, the <tt>.returncode</tt> property contains\nthe error code from the subprocess, an integer where 0 means no error.</p>\n</blockquote>\n</div>\n<div id=\"sub-call-self-out-none-err-none\">\n<h4><tt>Sub.call(self, out=None, err=None)</tt></h4>\n<blockquote>\n<p>Run the subprocess and call function <tt>out</tt> with lines from\n<tt>stdout</tt> and function <tt>err</tt> with lines from <tt>stderr</tt>.</p>\n<p>Blocks until the subprocess is complete: the callbacks are on\nthe current thread.</p>\n<dl>\n<dt>ARGUMENTS</dt>\n<dd><dl>\n<dt>out:</dt>\n<dd>if not None, <tt>out</tt> is called for each line from the subprocess\u2019s stdout</dd>\n<dt>err:</dt>\n<dd>if not None, <tt>err</tt> is called for each line from the subprocess\u2019s stderr,</dd>\n</dl>\n</dd>\n</dl>\n</blockquote>\n</div>\n<div id=\"sub-run-self\">\n<h4><tt>Sub.run(self)</tt></h4>\n<blockquote>\nReads lines from <tt>stdout</tt> and <tt>stderr</tt> into two lists <tt>out</tt> and <tt>err</tt>,\nthen returns a tuple <tt>(out, err, returncode)</tt></blockquote>\n</div>\n<div id=\"sub-log-self-out-err-print-built-in-function-print\">\n<h4><tt>Sub.log(self, out='\u00a0 ', <span class=\"pre\">err='!</span> ', <span class=\"pre\">print=&lt;built-in</span> function print&gt;)</tt></h4>\n<blockquote>\n<p>Read lines from <tt>stdin</tt> and <tt>stderr</tt> and prints them with prefixes</p>\n<p>Returns the shell integer error code from the subprocess, where 0 means\nno error.</p>\n<dl>\n<dt>ARGUMENTS</dt>\n<dd><dl>\n<dt>out:</dt>\n<dd>Prefix for printing lines from stdout</dd>\n<dt>err:</dt>\n<dd>Prefix for printing lines from stderr</dd>\n</dl>\n</dd>\n</dl>\n</blockquote>\n</div>\n</div>\n<div id=\"functions\">\n<h3>Functions</h3>\n<div id=\"sproc-call-cmd-out-none-err-none-kwds\">\n<h4><tt>sproc.call(cmd, out=None, err=None, **kwds)</tt></h4>\n<blockquote>\n<p>Run the subprocess and call function <tt>out</tt> with lines from\n<tt>stdout</tt> and function <tt>err</tt> with lines from <tt>stderr</tt>.</p>\n<p>Blocks until the subprocess is complete: the callbacks are on\nthe current thread.</p>\n<dl>\n<dt>ARGUMENTS</dt>\n<dd><dl>\n<dt>cmd:</dt>\n<dd>The command to run in a subprocess: a string or a list or tuple of strings</dd>\n<dt>out:</dt>\n<dd>if not None, <tt>out</tt> is called for each line from the subprocess\u2019s stdout</dd>\n<dt>err:</dt>\n<dd>if not None, <tt>err</tt> is called for each line from the subprocess\u2019s stderr,</dd>\n<dt>kwargs:</dt>\n<dd>Keyword arguments passed to subprocess.Popen()</dd>\n</dl>\n</dd>\n</dl>\n</blockquote>\n</div>\n<div id=\"sproc-run-cmd-kwds\">\n<h4><tt>sproc.run(cmd, **kwds)</tt></h4>\n<blockquote>\n<p>Reads lines from <tt>stdout</tt> and <tt>stderr</tt> into two lists <tt>out</tt> and <tt>err</tt>,\nthen returns a tuple <tt>(out, err, returncode)</tt></p>\n<dl>\n<dt>ARGUMENTS</dt>\n<dd><dl>\n<dt>cmd:</dt>\n<dd>The command to run in a subprocess: a string or a list or tuple of strings</dd>\n<dt>kwargs:</dt>\n<dd>Keyword arguments passed to subprocess.Popen()</dd>\n</dl>\n</dd>\n</dl>\n</blockquote>\n</div>\n<div id=\"sproc-log-cmd-out-err-print-built-in-function-print-kwds\">\n<h4><tt>sproc.log(cmd, out='\u00a0 ', <span class=\"pre\">err='!</span> ', <span class=\"pre\">print=&lt;built-in</span> function print&gt;, **kwds)</tt></h4>\n<blockquote>\n<p>Read lines from <tt>stdin</tt> and <tt>stderr</tt> and prints them with prefixes</p>\n<p>Returns the shell integer error code from the subprocess, where 0 means\nno error.</p>\n<dl>\n<dt>ARGUMENTS</dt>\n<dd><dl>\n<dt>cmd:</dt>\n<dd>The command to run in a subprocess: a string or a list or tuple of strings</dd>\n<dt>out:</dt>\n<dd>Prefix for printing lines from stdout</dd>\n<dt>err:</dt>\n<dd>Prefix for printing lines from stderr</dd>\n<dt>kwargs:</dt>\n<dd>Keyword arguments passed to subprocess.Popen()</dd>\n</dl>\n</dd>\n</dl>\n</blockquote>\n</div>\n</div>\n</div>\n\n          </div>"}, "last_serial": 7107290, "releases": {"2.0.0": [{"comment_text": "", "digests": {"md5": "f98cd6a957521bb579d2b7f8ba955700", "sha256": "32ece175f2765a41a90e3f05d461d496fb8136d85d3a127a67e3f8d92689fd69"}, "downloads": -1, "filename": "sproc-2.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "f98cd6a957521bb579d2b7f8ba955700", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5151, "upload_time": "2020-04-26T19:45:04", "upload_time_iso_8601": "2020-04-26T19:45:04.674037Z", "url": "https://files.pythonhosted.org/packages/99/f5/cf436a30ddb6b4b177044b87df9d1ee87578ffe32bb1b91bb3adae35ffa5/sproc-2.0.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "65de7ec907f6fc5ad6ec7b86af538430", "sha256": "c3c1522892f772f7dc252d58b0e9eff3c6ce07193aadd138b5137a6a5e231ea6"}, "downloads": -1, "filename": "sproc-2.0.0.tar.gz", "has_sig": false, "md5_digest": "65de7ec907f6fc5ad6ec7b86af538430", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3968, "upload_time": "2020-04-26T19:45:07", "upload_time_iso_8601": "2020-04-26T19:45:07.363430Z", "url": "https://files.pythonhosted.org/packages/f9/38/c932803b9a7821b660ac3623c3ba670b18395cc03113aa6797761e88db7b/sproc-2.0.0.tar.gz", "yanked": false}], "2.0.1": [{"comment_text": "", "digests": {"md5": "5647023510bd317367bac9b1948b420e", "sha256": "e12430162f86f2f12c27ab4dd487a46a3b0dc3eaa6ca871df813ba0da5523fb1"}, "downloads": -1, "filename": "sproc-2.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "5647023510bd317367bac9b1948b420e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5156, "upload_time": "2020-04-26T22:12:58", "upload_time_iso_8601": "2020-04-26T22:12:58.894874Z", "url": "https://files.pythonhosted.org/packages/e3/64/a2b0cc4ba8c49d7539a4ef0b00bb9401acf125abe1f9587174b658fc88a0/sproc-2.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "760cb3f2d97665c3336f34aa3bfbba67", "sha256": "10005e46a10c57269020c193cf7620f215629a578a2f1b4d0f0e54623dad0e9d"}, "downloads": -1, "filename": "sproc-2.0.1.tar.gz", "has_sig": false, "md5_digest": "760cb3f2d97665c3336f34aa3bfbba67", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3966, "upload_time": "2020-04-26T22:13:00", "upload_time_iso_8601": "2020-04-26T22:13:00.664358Z", "url": "https://files.pythonhosted.org/packages/98/1b/af8d2f2921ab19dd8dc041846acc5ee32424f6d8b20b1ab3df830ed797ee/sproc-2.0.1.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "5647023510bd317367bac9b1948b420e", "sha256": "e12430162f86f2f12c27ab4dd487a46a3b0dc3eaa6ca871df813ba0da5523fb1"}, "downloads": -1, "filename": "sproc-2.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "5647023510bd317367bac9b1948b420e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 5156, "upload_time": "2020-04-26T22:12:58", "upload_time_iso_8601": "2020-04-26T22:12:58.894874Z", "url": "https://files.pythonhosted.org/packages/e3/64/a2b0cc4ba8c49d7539a4ef0b00bb9401acf125abe1f9587174b658fc88a0/sproc-2.0.1-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "760cb3f2d97665c3336f34aa3bfbba67", "sha256": "10005e46a10c57269020c193cf7620f215629a578a2f1b4d0f0e54623dad0e9d"}, "downloads": -1, "filename": "sproc-2.0.1.tar.gz", "has_sig": false, "md5_digest": "760cb3f2d97665c3336f34aa3bfbba67", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3966, "upload_time": "2020-04-26T22:13:00", "upload_time_iso_8601": "2020-04-26T22:13:00.664358Z", "url": "https://files.pythonhosted.org/packages/98/1b/af8d2f2921ab19dd8dc041846acc5ee32424f6d8b20b1ab3df830ed797ee/sproc-2.0.1.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:04:19 2020"}