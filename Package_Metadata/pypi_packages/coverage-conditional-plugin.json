{"info": {"author": "", "author_email": "", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "# coverage-conditional-plugin\n\n[![wemake.services](https://img.shields.io/badge/%20-wemake.services-green.svg?label=%20&logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC%2FxhBQAAAAFzUkdCAK7OHOkAAAAbUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP%2F%2F%2F5TvxDIAAAAIdFJOUwAjRA8xXANAL%2Bv0SAAAADNJREFUGNNjYCAIOJjRBdBFWMkVQeGzcHAwksJnAPPZGOGAASzPzAEHEGVsLExQwE7YswCb7AFZSF3bbAAAAABJRU5ErkJggg%3D%3D)](https://wemake.services)\n[![Build Status](https://github.com/wemake-services/coverage-conditional-plugin/workflows/test/badge.svg?branch=master&event=push)](https://github.com/wemake-services/coverage-conditional-plugin/actions?query=workflow%3Atest)\n[![codecov](https://codecov.io/gh/wemake-services/coverage-conditional-plugin/branch/master/graph/badge.svg)](https://codecov.io/gh/wemake-services/coverage-conditional-plugin)\n[![Python Version](https://img.shields.io/pypi/pyversions/coverage-conditional-plugin.svg)](https://pypi.org/project/coverage-conditional-plugin/)\n[![wemake-python-styleguide](https://img.shields.io/badge/style-wemake-000000.svg)](https://github.com/wemake-services/wemake-python-styleguide)\n\nConditional coverage based on any rules you define!\n\nSome projects have different parts that relies on different environments:\n\n- Python version, some code is only executed on specific versions and ignored on others\n- OS version, some code might be Windows, Mac, or Linux only\n- External packages, some code is only executed when some 3rd party package is installed\n\nCurrent best practice is to use `# pragma: no cover` for this places in our project.\nThis project allows to use configurable pragmas\nthat include code to the coverage if some condition evaluates to true,\nand fallback to ignoring this code when condition is false.\n\nRead [the announcing post](https://sobolevn.me/2020/02/conditional-coverage).\n\n\n## Installation\n\n```bash\npip install coverage-conditional-plugin\n```\n\nThen you will need to add to your `setup.cfg` or `.coveragerc` file\nsome extra configuration:\n\n```ini\n[coverage:run]\n# Here we specify plugins for coverage to be used:\nplugins =\n  coverage_conditional_plugin\n\n[coverage:coverage_conditional_plugin]\n# Here we specify our pragma rules:\nrules =\n  \"sys_version_info >= (3, 8)\": py-gte-38\n  \"is_installed('mypy')\": has-mypy\n\n```\n\nAdapt rules to suit your needs!\n\n\n## Example\n\nImagine that we have this code:\n\n```python\ntry:  # pragma: has-django\n    import django\nexcept ImportError:  # pragma: has-no-django\n    django = None\n\ndef run_if_django_is_installed():\n    if django is not None:  # pragma: has-django\n        ...\n```\n\nAnd here's the configuration you might use:\n\n```ini\n[coverage:coverage_conditional_plugin]\nrules =\n  \"is_installed('django')\": has-django\n  \"not is_installed('django')\": has-no-django\n\n```\n\nWhen running tests with and without `django` installed\nyou will have `100%` coverage in both cases.\n\nBut, different lines will be included.\nWith `django` installed it will include\nboth `try:` and `if django is not None:` conditions.\n\nWhen running without `django` installed,\nit will include `except ImportError:` line.\n\n\n## Writing pragma rules\n\nFormat for pragma rules is:\n\n```\n\"pragma-condition\": pragma-name\n```\n\nCode inside `\"pragma-condition\"` is evaluted with `eval`.\nMake sure that the input you pass there is trusted!\n`\"pragma-condition\"` must return `bool` value after evaluation.\n\nWe support all environment markers specified in [PEP-496](https://www.python.org/dev/peps/pep-0496/).\nSee [Strings](https://www.python.org/dev/peps/pep-0496/#strings)\nand [Version Numbers](https://www.python.org/dev/peps/pep-0496/#version-numbers)\nsections for available values. Also, we provide a bunch of additional markers:\n\n- `sys_version_info` is the same as [`sys.version_info`](https://docs.python.org/3/library/sys.html#sys.version_info)\n- `os_environ` is the same as [`os.environ`](https://docs.python.org/3/library/os.html#os.environ)\n- `is_installed` is our custom function that tries to import the passed string, returns `bool` value\n- `package_version` is our custom function that tries to get package version from `pkg_resources` and returns its [parsed version](https://packaging.pypa.io/en/latest/version/#packaging.version.parse)\n\nUse `get_env_info` to get values for the current environment:\n\n```python\nfrom coverage_conditional_plugin import get_env_info\n\nget_env_info()\n```\n\n\n## License\n\n[MIT](https://github.com/wemake.services/coverage-conditional-plugin/blob/master/LICENSE)\n\n\n## Credits\n\nThis project was generated with [`wemake-python-package`](https://github.com/wemake-services/wemake-python-package). Current template version is: [a61725009d8399ae77376b5ad9de354214bc1159](https://github.com/wemake-services/wemake-python-package/tree/a61725009d8399ae77376b5ad9de354214bc1159). See what is [updated](https://github.com/wemake-services/wemake-python-package/compare/a61725009d8399ae77376b5ad9de354214bc1159...master) since then.\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/wemake-services/coverage-conditional-plugin", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "coverage-conditional-plugin", "package_url": "https://pypi.org/project/coverage-conditional-plugin/", "platform": "", "project_url": "https://pypi.org/project/coverage-conditional-plugin/", "project_urls": {"Homepage": "https://github.com/wemake-services/coverage-conditional-plugin", "Repository": "https://github.com/wemake-services/coverage-conditional-plugin"}, "release_url": "https://pypi.org/project/coverage-conditional-plugin/0.2.0/", "requires_dist": ["coverage (>=5.0,<6.0)"], "requires_python": ">=3.6,<4.0", "summary": "Conditional coverage based on any rules you define!", "version": "0.2.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>coverage-conditional-plugin</h1>\n<p><a href=\"https://wemake.services\" rel=\"nofollow\"><img alt=\"wemake.services\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ade5058c018453d62341c910fb13a3046b58d6c0/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2532302d77656d616b652e73657276696365732d677265656e2e7376673f6c6162656c3d253230266c6f676f3d64617461253341696d616765253246706e672533426261736536342532436956424f5277304b47676f414141414e5355684555674141414241414141415143414d414141416f4c513954414141414247644254554541414c4750432532467868425141414141467a556b6443414b374f484f6b41414141625545785552514141414141414141414141414141414141414141414141414141414141414150253246253246253246355476784449414141414964464a4f5577416a5241387858414e414c25324276305341414141444e4a52454655474e4e6a594341494f4a6a5242644246574d6b565165477a634841776b734a6e4150505a474f474141537a507a414548454756734c45785177453759737743623741465a53463362624141414141424a52553545726b4a676767253344253344\"></a>\n<a href=\"https://github.com/wemake-services/coverage-conditional-plugin/actions?query=workflow%3Atest\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/2c3d5f534ffc6a36f371c52f782b1a7e2f9c786a/68747470733a2f2f6769746875622e636f6d2f77656d616b652d73657276696365732f636f7665726167652d636f6e646974696f6e616c2d706c7567696e2f776f726b666c6f77732f746573742f62616467652e7376673f6272616e63683d6d6173746572266576656e743d70757368\"></a>\n<a href=\"https://codecov.io/gh/wemake-services/coverage-conditional-plugin\" rel=\"nofollow\"><img alt=\"codecov\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/ebf0c56938bd8388e2936edc99147129f3af5eb7/68747470733a2f2f636f6465636f762e696f2f67682f77656d616b652d73657276696365732f636f7665726167652d636f6e646974696f6e616c2d706c7567696e2f6272616e63682f6d61737465722f67726170682f62616467652e737667\"></a>\n<a href=\"https://pypi.org/project/coverage-conditional-plugin/\" rel=\"nofollow\"><img alt=\"Python Version\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/a9454e90874e2cb19fe7986ec8a340dae9111d9f/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f636f7665726167652d636f6e646974696f6e616c2d706c7567696e2e737667\"></a>\n<a href=\"https://github.com/wemake-services/wemake-python-styleguide\" rel=\"nofollow\"><img alt=\"wemake-python-styleguide\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/c8b7ab66b651e55b1e788d412c25d402dfc132f7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f7374796c652d77656d616b652d3030303030302e737667\"></a></p>\n<p>Conditional coverage based on any rules you define!</p>\n<p>Some projects have different parts that relies on different environments:</p>\n<ul>\n<li>Python version, some code is only executed on specific versions and ignored on others</li>\n<li>OS version, some code might be Windows, Mac, or Linux only</li>\n<li>External packages, some code is only executed when some 3rd party package is installed</li>\n</ul>\n<p>Current best practice is to use <code># pragma: no cover</code> for this places in our project.\nThis project allows to use configurable pragmas\nthat include code to the coverage if some condition evaluates to true,\nand fallback to ignoring this code when condition is false.</p>\n<p>Read <a href=\"https://sobolevn.me/2020/02/conditional-coverage\" rel=\"nofollow\">the announcing post</a>.</p>\n<h2>Installation</h2>\n<pre>pip install coverage-conditional-plugin\n</pre>\n<p>Then you will need to add to your <code>setup.cfg</code> or <code>.coveragerc</code> file\nsome extra configuration:</p>\n<pre><span class=\"k\">[coverage:run]</span>\n<span class=\"c1\"># Here we specify plugins for coverage to be used:</span>\n<span class=\"na\">plugins</span> <span class=\"o\">=</span><span class=\"s\"></span>\n<span class=\"s\">  coverage_conditional_plugin</span>\n\n<span class=\"k\">[coverage:coverage_conditional_plugin]</span>\n<span class=\"c1\"># Here we specify our pragma rules:</span>\n<span class=\"na\">rules</span> <span class=\"o\">=</span><span class=\"s\"></span>\n<span class=\"s\">  \"sys_version_info &gt;= (3, 8)\": py-gte-38</span>\n<span class=\"s\">  \"is_installed('mypy')\": has-mypy</span>\n</pre>\n<p>Adapt rules to suit your needs!</p>\n<h2>Example</h2>\n<p>Imagine that we have this code:</p>\n<pre><span class=\"k\">try</span><span class=\"p\">:</span>  <span class=\"c1\"># pragma: has-django</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">django</span>\n<span class=\"k\">except</span> <span class=\"ne\">ImportError</span><span class=\"p\">:</span>  <span class=\"c1\"># pragma: has-no-django</span>\n    <span class=\"n\">django</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">run_if_django_is_installed</span><span class=\"p\">():</span>\n    <span class=\"k\">if</span> <span class=\"n\">django</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>  <span class=\"c1\"># pragma: has-django</span>\n        <span class=\"o\">...</span>\n</pre>\n<p>And here's the configuration you might use:</p>\n<pre><span class=\"k\">[coverage:coverage_conditional_plugin]</span>\n<span class=\"na\">rules</span> <span class=\"o\">=</span><span class=\"s\"></span>\n<span class=\"s\">  \"is_installed('django')\": has-django</span>\n<span class=\"s\">  \"not is_installed('django')\": has-no-django</span>\n</pre>\n<p>When running tests with and without <code>django</code> installed\nyou will have <code>100%</code> coverage in both cases.</p>\n<p>But, different lines will be included.\nWith <code>django</code> installed it will include\nboth <code>try:</code> and <code>if django is not None:</code> conditions.</p>\n<p>When running without <code>django</code> installed,\nit will include <code>except ImportError:</code> line.</p>\n<h2>Writing pragma rules</h2>\n<p>Format for pragma rules is:</p>\n<pre><code>\"pragma-condition\": pragma-name\n</code></pre>\n<p>Code inside <code>\"pragma-condition\"</code> is evaluted with <code>eval</code>.\nMake sure that the input you pass there is trusted!\n<code>\"pragma-condition\"</code> must return <code>bool</code> value after evaluation.</p>\n<p>We support all environment markers specified in <a href=\"https://www.python.org/dev/peps/pep-0496/\" rel=\"nofollow\">PEP-496</a>.\nSee <a href=\"https://www.python.org/dev/peps/pep-0496/#strings\" rel=\"nofollow\">Strings</a>\nand <a href=\"https://www.python.org/dev/peps/pep-0496/#version-numbers\" rel=\"nofollow\">Version Numbers</a>\nsections for available values. Also, we provide a bunch of additional markers:</p>\n<ul>\n<li><code>sys_version_info</code> is the same as <a href=\"https://docs.python.org/3/library/sys.html#sys.version_info\" rel=\"nofollow\"><code>sys.version_info</code></a></li>\n<li><code>os_environ</code> is the same as <a href=\"https://docs.python.org/3/library/os.html#os.environ\" rel=\"nofollow\"><code>os.environ</code></a></li>\n<li><code>is_installed</code> is our custom function that tries to import the passed string, returns <code>bool</code> value</li>\n<li><code>package_version</code> is our custom function that tries to get package version from <code>pkg_resources</code> and returns its <a href=\"https://packaging.pypa.io/en/latest/version/#packaging.version.parse\" rel=\"nofollow\">parsed version</a></li>\n</ul>\n<p>Use <code>get_env_info</code> to get values for the current environment:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">coverage_conditional_plugin</span> <span class=\"kn\">import</span> <span class=\"n\">get_env_info</span>\n\n<span class=\"n\">get_env_info</span><span class=\"p\">()</span>\n</pre>\n<h2>License</h2>\n<p><a href=\"https://github.com/wemake.services/coverage-conditional-plugin/blob/master/LICENSE\" rel=\"nofollow\">MIT</a></p>\n<h2>Credits</h2>\n<p>This project was generated with <a href=\"https://github.com/wemake-services/wemake-python-package\" rel=\"nofollow\"><code>wemake-python-package</code></a>. Current template version is: <a href=\"https://github.com/wemake-services/wemake-python-package/tree/a61725009d8399ae77376b5ad9de354214bc1159\" rel=\"nofollow\">a61725009d8399ae77376b5ad9de354214bc1159</a>. See what is <a href=\"https://github.com/wemake-services/wemake-python-package/compare/a61725009d8399ae77376b5ad9de354214bc1159...master\" rel=\"nofollow\">updated</a> since then.</p>\n\n          </div>"}, "last_serial": 7193328, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "4204258ca39a10cb07b2cabaf74d3542", "sha256": "7e8f0ce79aeb06ca611244f3f379afcb52d972f6bb8911029475477db8cc95c6"}, "downloads": -1, "filename": "coverage_conditional_plugin-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "4204258ca39a10cb07b2cabaf74d3542", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 5731, "upload_time": "2020-02-05T18:17:59", "upload_time_iso_8601": "2020-02-05T18:17:59.166598Z", "url": "https://files.pythonhosted.org/packages/10/e9/f0aed456f3c12d396fb3645c9411e0de8cbb461e21e93c65a57954a335c5/coverage_conditional_plugin-0.1.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "3bb62b42105388870c246f918f103527", "sha256": "9941bf2005e745190d24a6213ad681cb8884451192c668b4841b00cdc76c5f6e"}, "downloads": -1, "filename": "coverage-conditional-plugin-0.1.0.tar.gz", "has_sig": false, "md5_digest": "3bb62b42105388870c246f918f103527", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 5615, "upload_time": "2020-02-05T18:17:56", "upload_time_iso_8601": "2020-02-05T18:17:56.558001Z", "url": "https://files.pythonhosted.org/packages/a3/8b/981ad2050348a6a31cb90595a671e009c9575221ec6e8a7dedcccef3f92e/coverage-conditional-plugin-0.1.0.tar.gz", "yanked": false}], "0.2.0": [{"comment_text": "", "digests": {"md5": "40bd1758a5b59d84bb09f86802c2d728", "sha256": "beddd4364bdfc18cb0ab15c217566f7d19942e7f1c81b385adc21e9fa31fd395"}, "downloads": -1, "filename": "coverage_conditional_plugin-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "40bd1758a5b59d84bb09f86802c2d728", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 5939, "upload_time": "2020-05-08T00:45:31", "upload_time_iso_8601": "2020-05-08T00:45:31.010939Z", "url": "https://files.pythonhosted.org/packages/bf/c1/bd7e9f3081cd9bbfc9826db12ff1b012004860e5e59e3a1a7c77f0b6b8a4/coverage_conditional_plugin-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8be4099fdf5fe30821762d0c5adca6a0", "sha256": "17f24134b1f7d03f4b3b1b8a0a56c2ff575a98066677150a9f7216f3c1ce7bb8"}, "downloads": -1, "filename": "coverage-conditional-plugin-0.2.0.tar.gz", "has_sig": false, "md5_digest": "8be4099fdf5fe30821762d0c5adca6a0", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 5890, "upload_time": "2020-05-08T00:45:29", "upload_time_iso_8601": "2020-05-08T00:45:29.594857Z", "url": "https://files.pythonhosted.org/packages/84/f4/a929ba38ca14d834646f67891927f1a2d80d3e692545d26b747c50529783/coverage-conditional-plugin-0.2.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "40bd1758a5b59d84bb09f86802c2d728", "sha256": "beddd4364bdfc18cb0ab15c217566f7d19942e7f1c81b385adc21e9fa31fd395"}, "downloads": -1, "filename": "coverage_conditional_plugin-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "40bd1758a5b59d84bb09f86802c2d728", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6,<4.0", "size": 5939, "upload_time": "2020-05-08T00:45:31", "upload_time_iso_8601": "2020-05-08T00:45:31.010939Z", "url": "https://files.pythonhosted.org/packages/bf/c1/bd7e9f3081cd9bbfc9826db12ff1b012004860e5e59e3a1a7c77f0b6b8a4/coverage_conditional_plugin-0.2.0-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "8be4099fdf5fe30821762d0c5adca6a0", "sha256": "17f24134b1f7d03f4b3b1b8a0a56c2ff575a98066677150a9f7216f3c1ce7bb8"}, "downloads": -1, "filename": "coverage-conditional-plugin-0.2.0.tar.gz", "has_sig": false, "md5_digest": "8be4099fdf5fe30821762d0c5adca6a0", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6,<4.0", "size": 5890, "upload_time": "2020-05-08T00:45:29", "upload_time_iso_8601": "2020-05-08T00:45:29.594857Z", "url": "https://files.pythonhosted.org/packages/84/f4/a929ba38ca14d834646f67891927f1a2d80d3e692545d26b747c50529783/coverage-conditional-plugin-0.2.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 00:42:47 2020"}