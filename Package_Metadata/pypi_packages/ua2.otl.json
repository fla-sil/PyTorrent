{"info": {"author": "Vic Bukhantsov", "author_email": "vic@sdh.com.ua", "bugtrack_url": null, "classifiers": [], "description": "Django tool for create ont time links\n\n\nInstallation\n============\n\nFor integrate with Django need to add *ua2.otl* to the list of installed app:\n\n\n.. code-block:: python\n\n\n\tINSTALLED_APPS += (\n\t\t'ua2.otl')\n\n\nand put into a root urls.py next line:\n\n.. code-block:: python\n\n    url(r'^l/', include('ua2.otl.urls'))\n\n\nBe warning: include urls.py only compatibil with Django >= 1.8.\nFor django before 1.8 need use following solution:\n\n\n.. code-block:: python\n\n\tfrom ua2.otl.views import otl_view\n\n\turlpatterns = urlpatterns(\n\t\t.....\n\t    url(r'^l/(?P<otp_key>\\w+)/$', otl_view, name='one-time-link'),\n\t)\n\n\nUsing\n============\n\n\nYou can use *OneTimeLink* with several scenario:\n\n* redirect to view with django backresolve (with support callback)\n* redirect to direct URL (with support callback)\n* using view to redner response\n\n\nRedirects\n---------\n\nThere are two way to pass resulted link to OneTimeLink object:\n\n* pass url resolve point with kwargs\n* pass rendered link\n\n\n.. code-block:: python\n\n\tfrom ua2.otl import OneTimeLink\n\n\tlink = OneTimeLink.create(resolve_name='django-url-name', resolve_kwargs={'value': 1})\n\tlink.save(expire=3600)\n\n\nExample with callback and authorization:\n\n.. code-block:: python\n\n\tfrom ua2.otl import OntTimeLink\n\n\tdef auth_callback(request, user_email):\n\t    user = get_object_or_404(User,\n                                 email=user_email)\n\t    login(request, user)\n\n    @login_required\n\tdef password_restore(request):\n\t\t....\n\n\tdef send_restore_passwortd(request):\n\t\tlink = OneTimeLink.create(resolve_name='url-password-reset')\n\t\tlink['user_email'] = request.POST.get('user_email')\n\n\t\tlink.save(callback=auth_callback,\n\t\t\t\t  expire=3600,\n\t\t\t\t  count=1)\n\n\t\treturn HttpResponse(\"http://127.0.0.1:8000%s\" % link.url)", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://bitbucket.org/ua2crm/ua2.otl", "keywords": "", "license": "BSD License", "maintainer": "", "maintainer_email": "", "name": "ua2.otl", "package_url": "https://pypi.org/project/ua2.otl/", "platform": "", "project_url": "https://pypi.org/project/ua2.otl/", "project_urls": {"Homepage": "https://bitbucket.org/ua2crm/ua2.otl"}, "release_url": "https://pypi.org/project/ua2.otl/0.0.5/", "requires_dist": null, "requires_python": "", "summary": "Django one time link generator and processor", "version": "0.0.5", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>Django tool for create ont time links</p>\n<div id=\"installation\">\n<h2>Installation</h2>\n<p>For integrate with Django need to add <em>ua2.otl</em> to the list of installed app:</p>\n<pre><span class=\"n\">INSTALLED_APPS</span> <span class=\"o\">+=</span> <span class=\"p\">(</span>\n        <span class=\"s1\">'ua2.otl'</span><span class=\"p\">)</span>\n</pre>\n<p>and put into a root urls.py next line:</p>\n<pre><span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'^l/'</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s1\">'ua2.otl.urls'</span><span class=\"p\">))</span>\n</pre>\n<p>Be warning: include urls.py only compatibil with Django &gt;= 1.8.\nFor django before 1.8 need use following solution:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">ua2.otl.views</span> <span class=\"kn\">import</span> <span class=\"n\">otl_view</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"n\">urlpatterns</span><span class=\"p\">(</span>\n        <span class=\"o\">.....</span>\n    <span class=\"n\">url</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s1\">'^l/(?P&lt;otp_key&gt;\\w+)/$'</span><span class=\"p\">,</span> <span class=\"n\">otl_view</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">'one-time-link'</span><span class=\"p\">),</span>\n<span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"using\">\n<h2>Using</h2>\n<p>You can use <em>OneTimeLink</em> with several scenario:</p>\n<ul>\n<li>redirect to view with django backresolve (with support callback)</li>\n<li>redirect to direct URL (with support callback)</li>\n<li>using view to redner response</li>\n</ul>\n<div id=\"redirects\">\n<h3>Redirects</h3>\n<p>There are two way to pass resulted link to OneTimeLink object:</p>\n<ul>\n<li>pass url resolve point with kwargs</li>\n<li>pass rendered link</li>\n</ul>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">ua2.otl</span> <span class=\"kn\">import</span> <span class=\"n\">OneTimeLink</span>\n\n<span class=\"n\">link</span> <span class=\"o\">=</span> <span class=\"n\">OneTimeLink</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span><span class=\"n\">resolve_name</span><span class=\"o\">=</span><span class=\"s1\">'django-url-name'</span><span class=\"p\">,</span> <span class=\"n\">resolve_kwargs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s1\">'value'</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">})</span>\n<span class=\"n\">link</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"n\">expire</span><span class=\"o\">=</span><span class=\"mi\">3600</span><span class=\"p\">)</span>\n</pre>\n<p>Example with callback and authorization:</p>\n<pre>    <span class=\"kn\">from</span> <span class=\"nn\">ua2.otl</span> <span class=\"kn\">import</span> <span class=\"n\">OntTimeLink</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">auth_callback</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user_email</span><span class=\"p\">):</span>\n        <span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">get_object_or_404</span><span class=\"p\">(</span><span class=\"n\">User</span><span class=\"p\">,</span>\n                             <span class=\"n\">email</span><span class=\"o\">=</span><span class=\"n\">user_email</span><span class=\"p\">)</span>\n        <span class=\"n\">login</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">)</span>\n\n<span class=\"nd\">@login_required</span>\n    <span class=\"k\">def</span> <span class=\"nf\">password_restore</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n            <span class=\"o\">....</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">send_restore_passwortd</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n            <span class=\"n\">link</span> <span class=\"o\">=</span> <span class=\"n\">OneTimeLink</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">(</span><span class=\"n\">resolve_name</span><span class=\"o\">=</span><span class=\"s1\">'url-password-reset'</span><span class=\"p\">)</span>\n            <span class=\"n\">link</span><span class=\"p\">[</span><span class=\"s1\">'user_email'</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">POST</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'user_email'</span><span class=\"p\">)</span>\n\n            <span class=\"n\">link</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">auth_callback</span><span class=\"p\">,</span>\n                              <span class=\"n\">expire</span><span class=\"o\">=</span><span class=\"mi\">3600</span><span class=\"p\">,</span>\n                              <span class=\"n\">count</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n            <span class=\"k\">return</span> <span class=\"n\">HttpResponse</span><span class=\"p\">(</span><span class=\"s2\">\"http://127.0.0.1:8000</span><span class=\"si\">%s</span><span class=\"s2\">\"</span> <span class=\"o\">%</span> <span class=\"n\">link</span><span class=\"o\">.</span><span class=\"n\">url</span><span class=\"p\">)</span>\n</pre>\n</div>\n</div>\n\n          </div>"}, "last_serial": 6872827, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "dedb7a83654006ccfbd460c2a2747449", "sha256": "4163cc73d1ab3af7ba2b9a40ca7d0cdab4cc836cead16901facd917a7fa81de4"}, "downloads": -1, "filename": "ua2.otl-0.0.1.tar.gz", "has_sig": false, "md5_digest": "dedb7a83654006ccfbd460c2a2747449", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4494, "upload_time": "2015-08-28T10:52:58", "upload_time_iso_8601": "2015-08-28T10:52:58.330189Z", "url": "https://files.pythonhosted.org/packages/fe/f7/a4b8c63547770cbea7687ea50bed83d500c5a2a58e91c1cb54029e52385f/ua2.otl-0.0.1.tar.gz", "yanked": false}], "0.0.2": [{"comment_text": "", "digests": {"md5": "4097c5e1b5bdd8498b47dc5fdf9b1e3f", "sha256": "fe06adf7611bf3dc4190756b5521cc90d022be7a83aa1649f97425290d4feaae"}, "downloads": -1, "filename": "ua2.otl-0.0.2.tar.gz", "has_sig": false, "md5_digest": "4097c5e1b5bdd8498b47dc5fdf9b1e3f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4500, "upload_time": "2015-08-28T10:54:38", "upload_time_iso_8601": "2015-08-28T10:54:38.081160Z", "url": "https://files.pythonhosted.org/packages/4c/00/dfb827e15fb31869c01e2268a8b1af5703a282fd2d38711b9f3e9b05aab4/ua2.otl-0.0.2.tar.gz", "yanked": false}], "0.0.3": [{"comment_text": "", "digests": {"md5": "6846f39fd78ad9f6fb30141287711ec9", "sha256": "bfdb74b50ca0c68b4664ba381aad2222b87fc73a7b09190457008f67cce4cbc0"}, "downloads": -1, "filename": "ua2.otl-0.0.3.tar.gz", "has_sig": false, "md5_digest": "6846f39fd78ad9f6fb30141287711ec9", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4524, "upload_time": "2015-10-30T16:56:27", "upload_time_iso_8601": "2015-10-30T16:56:27.194165Z", "url": "https://files.pythonhosted.org/packages/ef/74/48cf94217e490324f079b587c91eda8e0ffbf8d0da1de816307acb545e2f/ua2.otl-0.0.3.tar.gz", "yanked": false}], "0.0.4": [{"comment_text": "", "digests": {"md5": "ad4e44b79231d07ddfb85be18abff97f", "sha256": "25db10b179e2010ee913f9f5165a892ae6db3cbab38a96852887a93dc0f0f7ac"}, "downloads": -1, "filename": "ua2.otl-0.0.4.tar.gz", "has_sig": false, "md5_digest": "ad4e44b79231d07ddfb85be18abff97f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4544, "upload_time": "2017-04-01T21:55:23", "upload_time_iso_8601": "2017-04-01T21:55:23.903585Z", "url": "https://files.pythonhosted.org/packages/c6/47/02b2188d0e5f94aef4715d4e67111e7d2f32fdee501bf9b96c7ad0730e3c/ua2.otl-0.0.4.tar.gz", "yanked": false}], "0.0.5": [{"comment_text": "", "digests": {"md5": "37e3fac07c4b0ec8d1aeaeb85681be3a", "sha256": "353559d604b509a2709f03b347cde018e8ab7d80be334260748734e0960e0d90"}, "downloads": -1, "filename": "ua2.otl-0.0.5.tar.gz", "has_sig": false, "md5_digest": "37e3fac07c4b0ec8d1aeaeb85681be3a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4535, "upload_time": "2020-03-24T12:53:35", "upload_time_iso_8601": "2020-03-24T12:53:35.540336Z", "url": "https://files.pythonhosted.org/packages/52/de/bf869a932269f228ff35a7a8958e05c1a53f8c77bedfefb464210949a0be/ua2.otl-0.0.5.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "37e3fac07c4b0ec8d1aeaeb85681be3a", "sha256": "353559d604b509a2709f03b347cde018e8ab7d80be334260748734e0960e0d90"}, "downloads": -1, "filename": "ua2.otl-0.0.5.tar.gz", "has_sig": false, "md5_digest": "37e3fac07c4b0ec8d1aeaeb85681be3a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 4535, "upload_time": "2020-03-24T12:53:35", "upload_time_iso_8601": "2020-03-24T12:53:35.540336Z", "url": "https://files.pythonhosted.org/packages/52/de/bf869a932269f228ff35a7a8958e05c1a53f8c77bedfefb464210949a0be/ua2.otl-0.0.5.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:42:31 2020"}