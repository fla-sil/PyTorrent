{"info": {"author": "Elad Ben-Israel<elad.benisrael@gmail.com>", "author_email": "", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "License :: OSI Approved", "Operating System :: OS Independent", "Programming Language :: JavaScript", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: 3 :: Only", "Typing :: Typed"], "description": "# Tweet Queue for AWS CDK\n\nThis is an [AWS CDK](https://github.com/awslabs/aws-cdk) construct library which\nallows you to get a feed of Twitter search results into an SQS queue. It works\nby periodically polling the freely available [Twitter Standard Search\nAPI](https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets.html) and\nsending all new tweets to an SQS queue.\n\nInspired by\n[@jlhood](https://github.com/awslabs/aws-serverless-twitter-event-source/commits?author=jlhood)'s\n[aws-serverless-twitter-event-source](https://github.com/awslabs/aws-serverless-twitter-event-source)\n\n## Architecture\n\n![](https://github.com/eladb/cdk-tweet-queue/raw/master/images/architecture.png)\n\n1. A CloudWatch Event Rule triggers the poller AWS Lambda function periodically\n2. The poller reads the last checkpoint from a DynamoDB table (if exists)\n3. The poller issues a Twitter search query for all new tweets\n4. The poller enqueues all tweets to an SQS queue\n5. The poller stores the ID of the last tweet into the DynamoDB checkpoint table.\n6. Rinse & repeat.\n\n## Twitter API Keys\n\nTo issue a Twitter search request, you will need to\n[apply](https://developer.twitter.com/en/apply-for-access.html) for a Twitter\ndeveloper account, and obtain API keys through by defining a [new\napplication](http://twitter.com/oauth_clients/new).\n\nThe Twitter API keys are read by the poller from an [AWS Secrets\nManager](https://aws.amazon.com/secrets-manager/) entry. The entry must contain\nthe following attributes: `consumer_key`, `consumer_secret`, `access_token_key`\nand `access_token_secret` (exact names).\n\n1. Create a new AWS Secrets Manager entry for your API keys\n2. Fill in the key values as shown below:\n   ![](https://github.com/eladb/cdk-tweet-queue/raw/master/images/secretsmanager.png)\n3. Store the key\n4. Obtain the ARN of the secret (you will need it soon).\n\n## Usage\n\nUse `npm` to install the module in your CDK project. This will also add it to\nyour `package.json` file.\n\n```console\n$ npm install cdk-tweet-queue\n```\n\nAdd a `TweetQueue` to your CDK stack:\n\n```python\n# Example automatically generated without compilation. See https://github.com/aws/jsii/issues/826\nfrom cdk_tweet_queue import TweetQueue\n\nqueue = TweetQueue(self, \"TweetStream\",\n    # this is the ARN of the secret you stored\n    secret_arn=\"arn:aws:secretsmanager:us-east-1:1234567891234:secret:xxxxxxxxx\",\n\n    # twitter search query\n    # see https://developer.twitter.com/en/docs/tweets/search/guides/standard-operators\n    query=\"#awscdk\",\n\n    # optional properties\n    interval_min=60, # optional: polling interval in minutes\n    retention_period_sec=60, # optional: queue retention period\n    visibility_timeout_sec=60\n)\n```\n\nNow, `queue` is an `sqs.Queue` object and can be used anywhere a queue is\naccepted. For example, you could process the queue messages using an AWS Lambda\nfunction by setting up an SQS event source mapping.\n\n## Development\n\nThis is a mono-repo which uses [lerna](https://github.com/lerna/lerna). Here are\nsome useful commands:\n\n* `lerna run build` - builds all code\n* `lerna run watch --stream` -- runs `tsc -w` in all modules (in parallel)\n* `lerna run test` - tests all code\n\nThere is also an integration test that can be executed from the cdk-tweet-queue\npackage by running the following commands. You will need to set the\n`TWEET_QUEUE_SECRET_ARN` environment variable in order for the test to be able\nto use your Twitter API keys.\n\n```console\n$ npm run integ deploy\n...\n```\n\nDon't forget to destroy:\n\n```console\n$ npm run integ destroy\n...\n```\n\n## License\n\nApache-2.0\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/eladb/cdk-tweet-queue.git", "keywords": "", "license": "Apache-2.0", "maintainer": "", "maintainer_email": "", "name": "cdk-tweet-queue", "package_url": "https://pypi.org/project/cdk-tweet-queue/", "platform": "", "project_url": "https://pypi.org/project/cdk-tweet-queue/", "project_urls": {"Homepage": "https://github.com/eladb/cdk-tweet-queue.git", "Source": "https://github.com/eladb/cdk-tweet-queue.git"}, "release_url": "https://pypi.org/project/cdk-tweet-queue/1.0.3/", "requires_dist": ["jsii (~=0.22.0)", "publication (>=0.0.3)", "aws-cdk.aws-dynamodb (<2.0.0,>=1.24.0)", "aws-cdk.aws-events (<2.0.0,>=1.24.0)", "aws-cdk.aws-events-targets (<2.0.0,>=1.24.0)", "aws-cdk.aws-iam (<2.0.0,>=1.24.0)", "aws-cdk.aws-lambda (<2.0.0,>=1.24.0)", "aws-cdk.aws-sqs (<2.0.0,>=1.24.0)", "aws-cdk.core (<2.0.0,>=1.24.0)"], "requires_python": ">=3.6", "summary": "Defines an SQS queue with tweet stream from a search", "version": "1.0.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>Tweet Queue for AWS CDK</h1>\n<p>This is an <a href=\"https://github.com/awslabs/aws-cdk\" rel=\"nofollow\">AWS CDK</a> construct library which\nallows you to get a feed of Twitter search results into an SQS queue. It works\nby periodically polling the freely available <a href=\"https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets.html\" rel=\"nofollow\">Twitter Standard Search\nAPI</a> and\nsending all new tweets to an SQS queue.</p>\n<p>Inspired by\n<a href=\"https://github.com/awslabs/aws-serverless-twitter-event-source/commits?author=jlhood\" rel=\"nofollow\">@jlhood</a>'s\n<a href=\"https://github.com/awslabs/aws-serverless-twitter-event-source\" rel=\"nofollow\">aws-serverless-twitter-event-source</a></p>\n<h2>Architecture</h2>\n<p><img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/25d3e21cc7ba9115e2bd3ac144aae3ef6f138ef4/68747470733a2f2f6769746875622e636f6d2f656c6164622f63646b2d74776565742d71756575652f7261772f6d61737465722f696d616765732f6172636869746563747572652e706e67\"></p>\n<ol>\n<li>A CloudWatch Event Rule triggers the poller AWS Lambda function periodically</li>\n<li>The poller reads the last checkpoint from a DynamoDB table (if exists)</li>\n<li>The poller issues a Twitter search query for all new tweets</li>\n<li>The poller enqueues all tweets to an SQS queue</li>\n<li>The poller stores the ID of the last tweet into the DynamoDB checkpoint table.</li>\n<li>Rinse &amp; repeat.</li>\n</ol>\n<h2>Twitter API Keys</h2>\n<p>To issue a Twitter search request, you will need to\n<a href=\"https://developer.twitter.com/en/apply-for-access.html\" rel=\"nofollow\">apply</a> for a Twitter\ndeveloper account, and obtain API keys through by defining a <a href=\"http://twitter.com/oauth_clients/new\" rel=\"nofollow\">new\napplication</a>.</p>\n<p>The Twitter API keys are read by the poller from an <a href=\"https://aws.amazon.com/secrets-manager/\" rel=\"nofollow\">AWS Secrets\nManager</a> entry. The entry must contain\nthe following attributes: <code>consumer_key</code>, <code>consumer_secret</code>, <code>access_token_key</code>\nand <code>access_token_secret</code> (exact names).</p>\n<ol>\n<li>Create a new AWS Secrets Manager entry for your API keys</li>\n<li>Fill in the key values as shown below:\n<img alt=\"\" src=\"https://warehouse-camo.ingress.cmh1.psfhosted.org/b8d41f57fcc8bc111a7e2ca296eb9b4f7193ff66/68747470733a2f2f6769746875622e636f6d2f656c6164622f63646b2d74776565742d71756575652f7261772f6d61737465722f696d616765732f736563726574736d616e616765722e706e67\"></li>\n<li>Store the key</li>\n<li>Obtain the ARN of the secret (you will need it soon).</li>\n</ol>\n<h2>Usage</h2>\n<p>Use <code>npm</code> to install the module in your CDK project. This will also add it to\nyour <code>package.json</code> file.</p>\n<pre><span class=\"gp\">$</span> npm install cdk-tweet-queue\n</pre>\n<p>Add a <code>TweetQueue</code> to your CDK stack:</p>\n<pre><span class=\"c1\"># Example automatically generated without compilation. See https://github.com/aws/jsii/issues/826</span>\n<span class=\"kn\">from</span> <span class=\"nn\">cdk_tweet_queue</span> <span class=\"kn\">import</span> <span class=\"n\">TweetQueue</span>\n\n<span class=\"n\">queue</span> <span class=\"o\">=</span> <span class=\"n\">TweetQueue</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"s2\">\"TweetStream\"</span><span class=\"p\">,</span>\n    <span class=\"c1\"># this is the ARN of the secret you stored</span>\n    <span class=\"n\">secret_arn</span><span class=\"o\">=</span><span class=\"s2\">\"arn:aws:secretsmanager:us-east-1:1234567891234:secret:xxxxxxxxx\"</span><span class=\"p\">,</span>\n\n    <span class=\"c1\"># twitter search query</span>\n    <span class=\"c1\"># see https://developer.twitter.com/en/docs/tweets/search/guides/standard-operators</span>\n    <span class=\"n\">query</span><span class=\"o\">=</span><span class=\"s2\">\"#awscdk\"</span><span class=\"p\">,</span>\n\n    <span class=\"c1\"># optional properties</span>\n    <span class=\"n\">interval_min</span><span class=\"o\">=</span><span class=\"mi\">60</span><span class=\"p\">,</span> <span class=\"c1\"># optional: polling interval in minutes</span>\n    <span class=\"n\">retention_period_sec</span><span class=\"o\">=</span><span class=\"mi\">60</span><span class=\"p\">,</span> <span class=\"c1\"># optional: queue retention period</span>\n    <span class=\"n\">visibility_timeout_sec</span><span class=\"o\">=</span><span class=\"mi\">60</span>\n<span class=\"p\">)</span>\n</pre>\n<p>Now, <code>queue</code> is an <code>sqs.Queue</code> object and can be used anywhere a queue is\naccepted. For example, you could process the queue messages using an AWS Lambda\nfunction by setting up an SQS event source mapping.</p>\n<h2>Development</h2>\n<p>This is a mono-repo which uses <a href=\"https://github.com/lerna/lerna\" rel=\"nofollow\">lerna</a>. Here are\nsome useful commands:</p>\n<ul>\n<li><code>lerna run build</code> - builds all code</li>\n<li><code>lerna run watch --stream</code> -- runs <code>tsc -w</code> in all modules (in parallel)</li>\n<li><code>lerna run test</code> - tests all code</li>\n</ul>\n<p>There is also an integration test that can be executed from the cdk-tweet-queue\npackage by running the following commands. You will need to set the\n<code>TWEET_QUEUE_SECRET_ARN</code> environment variable in order for the test to be able\nto use your Twitter API keys.</p>\n<pre><span class=\"gp\">$</span> npm run integ deploy\n<span class=\"go\">...</span>\n</pre>\n<p>Don't forget to destroy:</p>\n<pre><span class=\"gp\">$</span> npm run integ destroy\n<span class=\"go\">...</span>\n</pre>\n<h2>License</h2>\n<p>Apache-2.0</p>\n\n          </div>"}, "last_serial": 6644306, "releases": {"1.0.1": [{"comment_text": "", "digests": {"md5": "9578efdcd6801fed40ad2dbeffbfc6e5", "sha256": "64b5736e8e68f8a54aa14b8630080faa0e94ba4ec4757b5a6a34a4835e41de42"}, "downloads": -1, "filename": "cdk_tweet_queue-1.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "9578efdcd6801fed40ad2dbeffbfc6e5", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 1115427, "upload_time": "2020-02-16T09:57:02", "upload_time_iso_8601": "2020-02-16T09:57:02.743019Z", "url": "https://files.pythonhosted.org/packages/21/29/40d6ad6a62449e2e614cceea8cb70940796975fdfdc911180b67cb703267/cdk_tweet_queue-1.0.1-py3-none-any.whl", "yanked": false}], "1.0.2": [{"comment_text": "", "digests": {"md5": "8cf1cd555a83f74cd3721cdfb11c4efb", "sha256": "76f27156151de58cde9f76fd0db65749cc1b718ad8671030b4d2384ce4f4e27f"}, "downloads": -1, "filename": "cdk_tweet_queue-1.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "8cf1cd555a83f74cd3721cdfb11c4efb", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 1115471, "upload_time": "2020-02-16T13:28:04", "upload_time_iso_8601": "2020-02-16T13:28:04.251619Z", "url": "https://files.pythonhosted.org/packages/41/26/d61392c2c7e3e6182a1f907ba97183d3ba50081a68a521e5f9c7fccb2e95/cdk_tweet_queue-1.0.2-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "5a4c540834b2fa69c4a1fa3f26455f6e", "sha256": "926e30a3f033a56ff5ec47c99d4052b8723f908c0e537bf89d210e155101cb18"}, "downloads": -1, "filename": "cdk-tweet-queue-1.0.2.tar.gz", "has_sig": false, "md5_digest": "5a4c540834b2fa69c4a1fa3f26455f6e", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 1117096, "upload_time": "2020-02-16T13:28:05", "upload_time_iso_8601": "2020-02-16T13:28:05.852366Z", "url": "https://files.pythonhosted.org/packages/b9/b2/a8b59a1d872f82cdc2cabb97d5da9c09e064a0743342e47919dda503e0b6/cdk-tweet-queue-1.0.2.tar.gz", "yanked": false}], "1.0.3": [{"comment_text": "", "digests": {"md5": "aeb358cb72057fa413fe4eb443141c51", "sha256": "f6ae38eed42ad2dc629e010bce164ce8417e46dcc00cf82a54b5fb0bb5f40643"}, "downloads": -1, "filename": "cdk_tweet_queue-1.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "aeb358cb72057fa413fe4eb443141c51", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 1115476, "upload_time": "2020-02-17T06:34:32", "upload_time_iso_8601": "2020-02-17T06:34:32.971580Z", "url": "https://files.pythonhosted.org/packages/24/b1/07ef6c1565720e965be89bf7373c5239c63b1d23527aadebce65c4e94d39/cdk_tweet_queue-1.0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d6a43d3abc1ede30d29df6f5ce78ab5f", "sha256": "b3b644578491d9fc4a94856e86313d3f0afcfa33d22fa59d56e0a2cdb25e5d64"}, "downloads": -1, "filename": "cdk-tweet-queue-1.0.3.tar.gz", "has_sig": false, "md5_digest": "d6a43d3abc1ede30d29df6f5ce78ab5f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 1117080, "upload_time": "2020-02-17T06:34:34", "upload_time_iso_8601": "2020-02-17T06:34:34.849084Z", "url": "https://files.pythonhosted.org/packages/c4/d6/ddec2cb0e013ec0e41973e4f281f1f6a7d05c9d4f6bfd793cdb95b551e5a/cdk-tweet-queue-1.0.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "aeb358cb72057fa413fe4eb443141c51", "sha256": "f6ae38eed42ad2dc629e010bce164ce8417e46dcc00cf82a54b5fb0bb5f40643"}, "downloads": -1, "filename": "cdk_tweet_queue-1.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "aeb358cb72057fa413fe4eb443141c51", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 1115476, "upload_time": "2020-02-17T06:34:32", "upload_time_iso_8601": "2020-02-17T06:34:32.971580Z", "url": "https://files.pythonhosted.org/packages/24/b1/07ef6c1565720e965be89bf7373c5239c63b1d23527aadebce65c4e94d39/cdk_tweet_queue-1.0.3-py3-none-any.whl", "yanked": false}, {"comment_text": "", "digests": {"md5": "d6a43d3abc1ede30d29df6f5ce78ab5f", "sha256": "b3b644578491d9fc4a94856e86313d3f0afcfa33d22fa59d56e0a2cdb25e5d64"}, "downloads": -1, "filename": "cdk-tweet-queue-1.0.3.tar.gz", "has_sig": false, "md5_digest": "d6a43d3abc1ede30d29df6f5ce78ab5f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 1117080, "upload_time": "2020-02-17T06:34:34", "upload_time_iso_8601": "2020-02-17T06:34:34.849084Z", "url": "https://files.pythonhosted.org/packages/c4/d6/ddec2cb0e013ec0e41973e4f281f1f6a7d05c9d4f6bfd793cdb95b551e5a/cdk-tweet-queue-1.0.3.tar.gz", "yanked": false}], "timestamp": "Thu May  7 22:34:56 2020"}