{"info": {"author": "Freedom of the Press Foundation", "author_email": "securedrop@freedom.press", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)", "Operating System :: POSIX :: Linux", "Programming Language :: Python :: 3", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "# securedrop-log\n\nThis is a Python module and qrexec service for logging in Qubes for [SecureDrop](https://securedrop.org).\n\n## How to use/try this?\n\nIn our example, we will use a vm named *logging* for storing logs, and we will use \n*workvm* to send in logs to the *logging* vm.\n\n### In dom0\n\n- Create a file `/etc/qubes-rpc/policy/securedrop.Log` in `dom0` with the following content.\n\n```\nworkvm logging allow\n@anyvm @anyvm deny\n```\n\n### In logging vm\n\nAdd the following content to `/etc/qubes-rpc/securedrop.Log`\n\n```\n/usr/sbin/securedrop-log\n```\n\nand then place `securedrop-log` script to `/usr/sbin/` directory and make sure that\nit is executable.\n\n### To use from any Python code in workvm\n\nHere is an example code using Python logging\n\n```Python\nimport logging\nfrom securedrop_log import SecureDropLog\n\ndef main():\n    handler = SecureDropLog(\"workvm\", \"proxy-debian\")\n    logging.basicConfig(level=logging.DEBUG, handlers=[handler])\n    logger = logging.getLogger(\"example\")\n\n    logger.info(\"kushal says it works\")\n\n\nif __name__ == \"__main__\":\n    main()\n\n```\n\n## The journalctl example\n\nYou will need `python3-systemd` package for the same.\n\nThe code is in `journal-example.py` file.", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/freedomofpress/securedrop-log", "keywords": "", "license": "GPLv3+", "maintainer": "", "maintainer_email": "", "name": "securedrop-log", "package_url": "https://pypi.org/project/securedrop-log/", "platform": "", "project_url": "https://pypi.org/project/securedrop-log/", "project_urls": {"Homepage": "https://github.com/freedomofpress/securedrop-log"}, "release_url": "https://pypi.org/project/securedrop-log/0.0.3/", "requires_dist": null, "requires_python": ">=3.5", "summary": "SecureDrop Qubes logging scripts", "version": "0.0.3", "yanked": false, "html_description": "<div class=\"project-description\">\n            <h1>securedrop-log</h1>\n<p>This is a Python module and qrexec service for logging in Qubes for <a href=\"https://securedrop.org\" rel=\"nofollow\">SecureDrop</a>.</p>\n<h2>How to use/try this?</h2>\n<p>In our example, we will use a vm named <em>logging</em> for storing logs, and we will use\n<em>workvm</em> to send in logs to the <em>logging</em> vm.</p>\n<h3>In dom0</h3>\n<ul>\n<li>Create a file <code>/etc/qubes-rpc/policy/securedrop.Log</code> in <code>dom0</code> with the following content.</li>\n</ul>\n<pre><code>workvm logging allow\n@anyvm @anyvm deny\n</code></pre>\n<h3>In logging vm</h3>\n<p>Add the following content to <code>/etc/qubes-rpc/securedrop.Log</code></p>\n<pre><code>/usr/sbin/securedrop-log\n</code></pre>\n<p>and then place <code>securedrop-log</code> script to <code>/usr/sbin/</code> directory and make sure that\nit is executable.</p>\n<h3>To use from any Python code in workvm</h3>\n<p>Here is an example code using Python logging</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">logging</span>\n<span class=\"kn\">from</span> <span class=\"nn\">securedrop_log</span> <span class=\"kn\">import</span> <span class=\"n\">SecureDropLog</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"n\">handler</span> <span class=\"o\">=</span> <span class=\"n\">SecureDropLog</span><span class=\"p\">(</span><span class=\"s2\">\"workvm\"</span><span class=\"p\">,</span> <span class=\"s2\">\"proxy-debian\"</span><span class=\"p\">)</span>\n    <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">basicConfig</span><span class=\"p\">(</span><span class=\"n\">level</span><span class=\"o\">=</span><span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">DEBUG</span><span class=\"p\">,</span> <span class=\"n\">handlers</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">handler</span><span class=\"p\">])</span>\n    <span class=\"n\">logger</span> <span class=\"o\">=</span> <span class=\"n\">logging</span><span class=\"o\">.</span><span class=\"n\">getLogger</span><span class=\"p\">(</span><span class=\"s2\">\"example\"</span><span class=\"p\">)</span>\n\n    <span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"s2\">\"kushal says it works\"</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">\"__main__\"</span><span class=\"p\">:</span>\n    <span class=\"n\">main</span><span class=\"p\">()</span>\n</pre>\n<h2>The journalctl example</h2>\n<p>You will need <code>python3-systemd</code> package for the same.</p>\n<p>The code is in <code>journal-example.py</code> file.</p>\n\n          </div>"}, "last_serial": 6294052, "releases": {"0.0.3": [{"comment_text": "", "digests": {"md5": "38c81c9a4c20f296bf5db6d3f34cf69b", "sha256": "57e27148bd315db8357238874ecb792dffa0c397fed80bc4d314017a4b3341a7"}, "downloads": -1, "filename": "securedrop-log-0.0.3.tar.gz", "has_sig": false, "md5_digest": "38c81c9a4c20f296bf5db6d3f34cf69b", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 15854, "upload_time": "2019-12-13T16:25:48", "upload_time_iso_8601": "2019-12-13T16:25:48.265256Z", "url": "https://files.pythonhosted.org/packages/30/68/5d9f3ae0630256b24184791f6e72125d0570000be5551de451726b208dcd/securedrop-log-0.0.3.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "38c81c9a4c20f296bf5db6d3f34cf69b", "sha256": "57e27148bd315db8357238874ecb792dffa0c397fed80bc4d314017a4b3341a7"}, "downloads": -1, "filename": "securedrop-log-0.0.3.tar.gz", "has_sig": false, "md5_digest": "38c81c9a4c20f296bf5db6d3f34cf69b", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.5", "size": 15854, "upload_time": "2019-12-13T16:25:48", "upload_time_iso_8601": "2019-12-13T16:25:48.265256Z", "url": "https://files.pythonhosted.org/packages/30/68/5d9f3ae0630256b24184791f6e72125d0570000be5551de451726b208dcd/securedrop-log-0.0.3.tar.gz", "yanked": false}], "timestamp": "Fri May  8 02:55:55 2020"}