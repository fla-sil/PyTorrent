{"info": {"author": "Iqbal Talaat", "author_email": "iqbaltalaat@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "Intended Audience :: System Administrators", "License :: OSI Approved :: Apache Software License", "Operating System :: OS Independent", "Programming Language :: Python :: 2.6", "Programming Language :: Python :: 2.7", "Programming Language :: Python :: 3.3", "Programming Language :: Python :: 3.4", "Programming Language :: Python :: Implementation :: PyPy", "Topic :: Internet :: WWW/HTTP"], "description": "*************************\nSimple Salesforce Wrapper\n*************************\n\nSimple Salesforce is a basic Salesforce.com REST API client built for Python 2.6, 2.7, 3.3 and 3.4. The goal is to provide a very low-level interface to the REST Resource and APEX API, returning a dictionary of the API JSON response.\n\nSimple Salesforce wrapper is a small wrapper, that does not do much except adds reconnection upon session expiry and handles the SOAP call for converting a Lead to a Contact\n\nYou can find out more regarding the format of the results in the `Official Salesforce.com REST API Documentation`_\n\n.. _Official Salesforce.com REST API Documentation: http://www.salesforce.com/us/developer/docs/api_rest/index.htm\n\n99% of the Documentation is plagiarized from simple-salesforce. This module does not do much, it just serves me well.\nSimple Salesforce is available here: https://github.com/simple-salesforce/simple-salesforce\n\nInstallation\n------------\n\n.. code-block:: bash\n\n    pip3 install simple_salesforce_wrapper\n\nExample\n-------\nThere are two ways to gain access to Salesforce\n\nThe first is to simply pass the domain of your Salesforce instance and an access token straight to ``Salesforce()``\n\nFor example:\n\n.. code-block:: python\n\n    from simple_salesforce_wrapper import Salesforce\n    sf = Salesforce(instance='na1.salesforce.com', session_id='')\n\nIf you have the full URL of your instance (perhaps including the schema, as is included in the OAuth2 request process), you can pass that in instead using ``instance_url``:\n\n.. code-block:: python\n\n    from simple_salesforce_wrapper import Salesforce\n    sf = Salesforce(instance_url='https://na1.salesforce.com', session_id='')\n\nThere are also two means of authentication, one that uses username, password and security token and the other that uses IP filtering, username, password  and organizationId\n\nTo login using the security token method, simply include the Salesforce method and pass in your Salesforce username, password and token (this is usually provided when you change your password):\n\n.. code-block:: python\n\n    from simple_salesforce_wrapper import Salesforce\n    sf = Salesforce(username='myemail@example.com', password='password', security_token='token')\n\nTo login using IP-whitelist Organization ID method, simply use your Salesforce username, password and organizationId:\n\n.. code-block:: python\n\n    from simple_salesforce_wrapper import Salesforce\n    sf = Salesforce(password='password', username='myemail@example.com', organizationId='OrgId')\n\nIf you'd like to enter a sandbox, simply add ``sandbox=True`` to your ``Salesforce()`` call.\n\nFor example:\n\n.. code-block:: python\n\n    from simple_salesforce_wrapper import Salesforce\n    sf = Salesforce(username='myemail@example.com.sandbox', password='password', security_token='token', sandbox=True)\n\nNote that specifying if you want to use a sandbox is only necessary if you are using the built-in username/password/security token authentication and is used exclusively during the authentication step.\n\nIf you'd like to keep track where your API calls are coming from, simply add ``client_id='My App'`` to your ``Salesforce()`` call.\n\n.. code-block:: python\n\n    from simple_salesforce_wrapper import Salesforce\n    sf = Salesforce(username='myemail@example.com.sandbox', password='password', security_token='token', sandbox=True, client_id='My App')\n\nIf you view the API calls in your Salesforce instance by Client Id it will be prefixed with ``RestForce/``, for example ``RestForce/My App``.\n\nWhen instantiating a `Salesforce` object, it's also possible to include an\ninstance of `requests.Session`. This is to allow for specialized\nsession handling not otherwise exposed by simple_salesforce_wrapper.\n\nFor example:\n\n.. code-block:: python\n\n   from simple_salesforce_wrapper import Salesforce\n   import requests\n\n   session = requests.Session()\n   # manipulate the session instance (optional)\n   sf = Salesforce(\n      username='user@example.com', password='password', organizationId='OrgId',\n      session=session)\n\nRecord Management\n-----------------\n\nTo create a new 'Contact' in Salesforce:\n\n.. code-block:: python\n\n    sf.Contact.create({'LastName':'Smith','Email':'example@example.com'})\n\nThis will return a dictionary such as ``{u'errors': [], u'id': u'003e0000003GuNXAA0', u'success': True}``\n\nTo get a dictionary with all the information regarding that record, use:\n\n.. code-block:: python\n\n    contact = sf.Contact.get('003e0000003GuNXAA0')\n\nTo get a dictionary with all the information regarding that record, using a **custom** field that was defined as External ID:\n\n.. code-block:: python\n\n    contact = sf.Contact.get_by_custom_id('My_Custom_ID__c', '22')\n\nTo change that contact's last name from 'Smith' to 'Jones' and add a first name of 'John' use:\n\n.. code-block:: python\n\n    sf.Contact.update('003e0000003GuNXAA0',{'LastName': 'Jones', 'FirstName': 'John'})\n\nTo delete the contact:\n\n.. code-block:: python\n\n    sf.Contact.delete('003e0000003GuNXAA0')\n\nTo retrieve a list of deleted records between ``2013-10-20`` to ``2013-10-29`` (datetimes are required to be in UTC):\n\n.. code-block:: python\n\n    import pytz\n    import datetime\n    end = datetime.datetime.now(pytz.UTC)  # we need to use UTC as salesforce API requires this!\n    sf.Contact.deleted(end - datetime.timedelta(days=10), end)\n\nTo retrieve a list of updated records between ``2014-03-20`` to ``2014-03-22`` (datetimes are required to be in UTC):\n\n.. code-block:: python\n\n    import pytz\n    import datetime\n    end = datetime.datetime.now(pytz.UTC) # we need to use UTC as salesforce API requires this\n    sf.Contact.updated(end - datetime.timedelta(days=10), end)\n\nNote that Update, Delete and Upsert actions return the associated `Salesforce HTTP Status Code`_\n\n.. _Salesforce HTTP Status Code: http://www.salesforce.com/us/developer/docs/api_rest/Content/errorcodes.htm\n\nUse the same format to create any record, including 'Account', 'Opportunity', and 'Lead'.\nMake sure to have all the required fields for any entry. The `Salesforce API`_ has all objects found under 'Reference -> Standard Objects' and the required fields can be found there.\n\n.. _Salesforce HTTP Status Code: http://www.salesforce.com/us/developer/docs/api_rest/Content/errorcodes.htm\n.. _Salesforce API: https://www.salesforce.com/developer/docs/api/\n\nQueries\n-------\n\nIt's also possible to write select queries in Salesforce Object Query Language (SOQL) and search queries in Salesforce Object Search Language (SOSL).\n\nSOQL queries are done via:\n\n.. code-block:: python\n\n    sf.query(\"SELECT Id, Email FROM Contact WHERE LastName = 'Jones'\")\n\nIf, due to an especially large result, Salesforce adds a ``nextRecordsUrl`` to your query result, such as ``\"nextRecordsUrl\" : \"/services/data/v26.0/query/01gD0000002HU6KIAW-2000\"``, you can pull the additional results with either the ID or the full URL (if using the full URL, you must pass 'True' as your second argument)\n\n.. code-block:: python\n\n    sf.query_more(\"01gD0000002HU6KIAW-2000\")\n    sf.query_more(\"/services/data/v26.0/query/01gD0000002HU6KIAW-2000\", True)\n\nAs a convenience, to retrieve all of the results in a single local method call use\n\n.. code-block:: python\n\n    sf.query_all(\"SELECT Id, Email FROM Contact WHERE LastName = 'Jones'\")\n\nSOSL queries are done via:\n\n.. code-block:: python\n\n    sf.search(\"FIND {Jones}\")\n\nThere is also 'Quick Search', which inserts your query inside the {} in the SOSL syntax. Be careful, there is no escaping!\n\n.. code-block:: python\n\n    sf.quick_search(\"Jones\")\n\nSearch and Quick Search return ``None`` if there are no records, otherwise they return a dictionary of search results.\n\nMore details about syntax is available on the `Salesforce Query Language Documentation Developer Website`_\n\n.. _Salesforce Query Language Documentation Developer Website: http://www.salesforce.com/us/developer/docs/soql_sosl/index.htm\n\nLead Conversion\n---------------\n\n.. code-block:: python\n\n    (convert_success, convert_response) = sf.convert_lead(lead_id=lead_sfid, account_id=account_sfid)\n\nConvert Lead returns a tuple containing a boolean status and a convert_response.\nIf convert_success is True then so is convert_response is the contact ID\nIf convert_success is False then so is convert_response is the error code e.g. CANNOT_UPDATE_CONVERTED_LEAD\n\nOther Options\n-------------\n\nTo insert or update (upsert) a record using an external ID, use:\n\n.. code-block:: python\n\n    sf.Contact.upsert('customExtIdField__c/11999',{'LastName': 'Smith','Email': 'smith@example.com'})\n\nTo retrieve basic metadata use:\n\n.. code-block:: python\n\n    sf.Contact.metadata()\n\nTo retrieve a description of the object, use:\n\n.. code-block:: python\n\n    sf.Contact.describe()\n\nTo retrieve a description of the record layout of an object by its record layout unique id, use:\n\n.. code-block:: python\n\n    sf.Contact.describe_layout('39wmxcw9r23r492')\n\nTo retrieve a list of top level description of instance metadata, user:\n\n.. code-block:: python\n\n    sf.describe()\n\n    for x in sf.describe()[\"sobjects\"]:\n      print x[\"label\"]\n\n\nUsing Bulk\n----------\n\nYou can use this library to access Bulk API functions.\n\nCreate new records:\n\n.. code-block:: python\n\n    data = [{'LastName':'Smith','Email':'example@example.com'}, {'LastName':'Jones','Email':'test@test.com'}]\n\n    sf.bulk.Contact.insert(data)\n\nUpdate existing records:\n\n.. code-block:: python\n\n    data = [{'Id': '0000000000AAAAA', 'Email': 'examplenew@example.com'}, {'Id': '0000000000BBBBB', 'Email': 'testnew@test.com'}]\n\n    sf.bulk.Contact.update(data)\n\nUpsert records:\n\n.. code-block:: python\n\n    data = [{'Id': '0000000000AAAAA', 'Email': 'examplenew2@example.com'}, {'Id': '', 'Email': 'foo@foo.com'}]\n\n    sf.bulk.Contact.upsert(data, 'Id')\n\nQuery records:\n\n.. code-block:: python\n\n    query = 'SELECT Id, Name FROM Account LIMIT 10'\n\n    sf.bulk.Account.query(query)\n\nDelete records (soft deletion):\n\n.. code-block:: python\n\n    data = [{'Id': '0000000000AAAAA'}]\n\n    sf.bulk.Contact.delete(data)\n\nHard deletion:\n\n.. code-block:: python\n\n    data = [{'Id': '0000000000BBBBB'}]\n\n    sf.bulk.Contact.hard_delete(data)\n\n\nUsing Apex\n----------\n\nYou can also use this library to call custom Apex methods:\n\n.. code-block:: python\n\n    payload = {\n      \"activity\": [\n        {\"user\": \"12345\", \"action\": \"update page\", \"time\": \"2014-04-21T13:00:15Z\"}\n      ]\n    }\n    result = sf.apexecute('User/Activity', method='POST', data=payload)\n\nThis would call the endpoint ``https://<instance>.salesforce.com/services/apexrest/User/Activity`` with ``data=`` as\nthe body content encoded with ``json.dumps``\n\nYou can read more about Apex on the `Force.com Apex Code Developer's Guide`_\n\n.. _Force.com Apex Code Developer's Guide: http://www.salesforce.com/us/developer/docs/apexcode\n\nAdditional Features\n-------------------\n\nThere are a few helper classes that are used internally and available to you.\n\nIncluded in them are ``SalesforceLogin``, which takes in a username, password, security token, optional boolean sandbox indicator and optional version and returns a tuple of ``(session_id, sf_instance)`` where `session_id` is the session ID to use for authentication to Salesforce and ``sf_instance`` is the domain of the instance of Salesforce to use for the session.\n\nFor example, to use SalesforceLogin for a sandbox account you'd use:\n\n.. code-block:: python\n\n    from simple_salesforce_wrapp import SalesforceLogin\n    session_id, instance = SalesforceLogin(\n        username='myemail@example.com.sandbox',\n        password='password',\n        security_token='token',\n        sandbox=True)\n\nSimply leave off the final ``True`` if you do not wish to use a sandbox.\n\nAlso exposed is the ``SFType`` class, which is used internally by the ``__getattr__()`` method in the ``Salesforce()`` class and represents a specific SObject type. ``SFType`` requires ``object_name`` (i.e. ``Contact``), ``session_id`` (an authentication ID), ``sf_instance`` (hostname of your Salesforce instance), and an optional ``sf_version``\n\nTo add a Contact using the default version of the API you'd use:\n\n.. code-block:: python\n\n    from simple_salesforce_wrapper import SFType\n    contact = SFType('Contact','sesssionid','na1.salesforce.com')\n    contact.create({'LastName':'Smith','Email':'example@example.com'})\n\nTo use a proxy server between your client and the SalesForce endpoint, use the proxies argument when creating SalesForce object.\nThe proxy argument is the same as what requests uses, a map of scheme to proxy URL:\n\n.. code-block:: python\n\n    proxies = {\n      \"http\": \"http://10.10.1.10:3128\",\n      \"https\": \"http://10.10.1.10:1080\",\n    }\n    SalesForce(instance='na1.salesforce.com', session_id='', proxies=proxies)\n\nAll results are returned as JSON converted OrderedDict to preserve order of keys from REST responses.\n", "description_content_type": null, "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/afrobeard/simple-salesforce-wrapper", "keywords": "python salesforce salesforce.com", "license": "Apache 2.0", "maintainer": "", "maintainer_email": "", "name": "simple-salesforce-wrapper", "package_url": "https://pypi.org/project/simple-salesforce-wrapper/", "platform": "", "project_url": "https://pypi.org/project/simple-salesforce-wrapper/", "project_urls": {"Homepage": "https://github.com/afrobeard/simple-salesforce-wrapper"}, "release_url": "https://pypi.org/project/simple-salesforce-wrapper/0.2.0/", "requires_dist": null, "requires_python": "", "summary": "Simple Salesforce is a basic Salesforce.com REST API client. The goal is to provide a very low-level interface to the API, returning an ordered dictionary of the API JSON response.", "version": "0.2.0", "yanked": false, "html_description": "<div class=\"project-description\">\n            <p>Simple Salesforce is a basic Salesforce.com REST API client built for Python 2.6, 2.7, 3.3 and 3.4. The goal is to provide a very low-level interface to the REST Resource and APEX API, returning a dictionary of the API JSON response.</p>\n<p>Simple Salesforce wrapper is a small wrapper, that does not do much except adds reconnection upon session expiry and handles the SOAP call for converting a Lead to a Contact</p>\n<p>You can find out more regarding the format of the results in the <a href=\"http://www.salesforce.com/us/developer/docs/api_rest/index.htm\" rel=\"nofollow\">Official Salesforce.com REST API Documentation</a></p>\n<p>99% of the Documentation is plagiarized from simple-salesforce. This module does not do much, it just serves me well.\nSimple Salesforce is available here: <a href=\"https://github.com/simple-salesforce/simple-salesforce\" rel=\"nofollow\">https://github.com/simple-salesforce/simple-salesforce</a></p>\n<div id=\"installation\">\n<h2>Installation</h2>\n<pre>pip3 install simple_salesforce_wrapper\n</pre>\n</div>\n<div id=\"example\">\n<h2>Example</h2>\n<p>There are two ways to gain access to Salesforce</p>\n<p>The first is to simply pass the domain of your Salesforce instance and an access token straight to <tt>Salesforce()</tt></p>\n<p>For example:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">simple_salesforce_wrapper</span> <span class=\"kn\">import</span> <span class=\"n\">Salesforce</span>\n<span class=\"n\">sf</span> <span class=\"o\">=</span> <span class=\"n\">Salesforce</span><span class=\"p\">(</span><span class=\"n\">instance</span><span class=\"o\">=</span><span class=\"s1\">'na1.salesforce.com'</span><span class=\"p\">,</span> <span class=\"n\">session_id</span><span class=\"o\">=</span><span class=\"s1\">''</span><span class=\"p\">)</span>\n</pre>\n<p>If you have the full URL of your instance (perhaps including the schema, as is included in the OAuth2 request process), you can pass that in instead using <tt>instance_url</tt>:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">simple_salesforce_wrapper</span> <span class=\"kn\">import</span> <span class=\"n\">Salesforce</span>\n<span class=\"n\">sf</span> <span class=\"o\">=</span> <span class=\"n\">Salesforce</span><span class=\"p\">(</span><span class=\"n\">instance_url</span><span class=\"o\">=</span><span class=\"s1\">'https://na1.salesforce.com'</span><span class=\"p\">,</span> <span class=\"n\">session_id</span><span class=\"o\">=</span><span class=\"s1\">''</span><span class=\"p\">)</span>\n</pre>\n<p>There are also two means of authentication, one that uses username, password and security token and the other that uses IP filtering, username, password  and organizationId</p>\n<p>To login using the security token method, simply include the Salesforce method and pass in your Salesforce username, password and token (this is usually provided when you change your password):</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">simple_salesforce_wrapper</span> <span class=\"kn\">import</span> <span class=\"n\">Salesforce</span>\n<span class=\"n\">sf</span> <span class=\"o\">=</span> <span class=\"n\">Salesforce</span><span class=\"p\">(</span><span class=\"n\">username</span><span class=\"o\">=</span><span class=\"s1\">'myemail@example.com'</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"o\">=</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"n\">security_token</span><span class=\"o\">=</span><span class=\"s1\">'token'</span><span class=\"p\">)</span>\n</pre>\n<p>To login using IP-whitelist Organization ID method, simply use your Salesforce username, password and organizationId:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">simple_salesforce_wrapper</span> <span class=\"kn\">import</span> <span class=\"n\">Salesforce</span>\n<span class=\"n\">sf</span> <span class=\"o\">=</span> <span class=\"n\">Salesforce</span><span class=\"p\">(</span><span class=\"n\">password</span><span class=\"o\">=</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"n\">username</span><span class=\"o\">=</span><span class=\"s1\">'myemail@example.com'</span><span class=\"p\">,</span> <span class=\"n\">organizationId</span><span class=\"o\">=</span><span class=\"s1\">'OrgId'</span><span class=\"p\">)</span>\n</pre>\n<p>If you\u2019d like to enter a sandbox, simply add <tt>sandbox=True</tt> to your <tt>Salesforce()</tt> call.</p>\n<p>For example:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">simple_salesforce_wrapper</span> <span class=\"kn\">import</span> <span class=\"n\">Salesforce</span>\n<span class=\"n\">sf</span> <span class=\"o\">=</span> <span class=\"n\">Salesforce</span><span class=\"p\">(</span><span class=\"n\">username</span><span class=\"o\">=</span><span class=\"s1\">'myemail@example.com.sandbox'</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"o\">=</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"n\">security_token</span><span class=\"o\">=</span><span class=\"s1\">'token'</span><span class=\"p\">,</span> <span class=\"n\">sandbox</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>Note that specifying if you want to use a sandbox is only necessary if you are using the built-in username/password/security token authentication and is used exclusively during the authentication step.</p>\n<p>If you\u2019d like to keep track where your API calls are coming from, simply add <tt><span class=\"pre\">client_id='My</span> App'</tt> to your <tt>Salesforce()</tt> call.</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">simple_salesforce_wrapper</span> <span class=\"kn\">import</span> <span class=\"n\">Salesforce</span>\n<span class=\"n\">sf</span> <span class=\"o\">=</span> <span class=\"n\">Salesforce</span><span class=\"p\">(</span><span class=\"n\">username</span><span class=\"o\">=</span><span class=\"s1\">'myemail@example.com.sandbox'</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"o\">=</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"n\">security_token</span><span class=\"o\">=</span><span class=\"s1\">'token'</span><span class=\"p\">,</span> <span class=\"n\">sandbox</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">client_id</span><span class=\"o\">=</span><span class=\"s1\">'My App'</span><span class=\"p\">)</span>\n</pre>\n<p>If you view the API calls in your Salesforce instance by Client Id it will be prefixed with <tt>RestForce/</tt>, for example <tt>RestForce/My App</tt>.</p>\n<p>When instantiating a <cite>Salesforce</cite> object, it\u2019s also possible to include an\ninstance of <cite>requests.Session</cite>. This is to allow for specialized\nsession handling not otherwise exposed by simple_salesforce_wrapper.</p>\n<p>For example:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">simple_salesforce_wrapper</span> <span class=\"kn\">import</span> <span class=\"n\">Salesforce</span>\n<span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n\n<span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"n\">requests</span><span class=\"o\">.</span><span class=\"n\">Session</span><span class=\"p\">()</span>\n<span class=\"c1\"># manipulate the session instance (optional)</span>\n<span class=\"n\">sf</span> <span class=\"o\">=</span> <span class=\"n\">Salesforce</span><span class=\"p\">(</span>\n   <span class=\"n\">username</span><span class=\"o\">=</span><span class=\"s1\">'user@example.com'</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"o\">=</span><span class=\"s1\">'password'</span><span class=\"p\">,</span> <span class=\"n\">organizationId</span><span class=\"o\">=</span><span class=\"s1\">'OrgId'</span><span class=\"p\">,</span>\n   <span class=\"n\">session</span><span class=\"o\">=</span><span class=\"n\">session</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"record-management\">\n<h2>Record Management</h2>\n<p>To create a new \u2018Contact\u2019 in Salesforce:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">({</span><span class=\"s1\">'LastName'</span><span class=\"p\">:</span><span class=\"s1\">'Smith'</span><span class=\"p\">,</span><span class=\"s1\">'Email'</span><span class=\"p\">:</span><span class=\"s1\">'example@example.com'</span><span class=\"p\">})</span>\n</pre>\n<p>This will return a dictionary such as <tt>{u'errors': [], u'id': u'003e0000003GuNXAA0', u'success': True}</tt></p>\n<p>To get a dictionary with all the information regarding that record, use:</p>\n<pre><span class=\"n\">contact</span> <span class=\"o\">=</span> <span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'003e0000003GuNXAA0'</span><span class=\"p\">)</span>\n</pre>\n<p>To get a dictionary with all the information regarding that record, using a <strong>custom</strong> field that was defined as External ID:</p>\n<pre><span class=\"n\">contact</span> <span class=\"o\">=</span> <span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">get_by_custom_id</span><span class=\"p\">(</span><span class=\"s1\">'My_Custom_ID__c'</span><span class=\"p\">,</span> <span class=\"s1\">'22'</span><span class=\"p\">)</span>\n</pre>\n<p>To change that contact\u2019s last name from \u2018Smith\u2019 to \u2018Jones\u2019 and add a first name of \u2018John\u2019 use:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"s1\">'003e0000003GuNXAA0'</span><span class=\"p\">,{</span><span class=\"s1\">'LastName'</span><span class=\"p\">:</span> <span class=\"s1\">'Jones'</span><span class=\"p\">,</span> <span class=\"s1\">'FirstName'</span><span class=\"p\">:</span> <span class=\"s1\">'John'</span><span class=\"p\">})</span>\n</pre>\n<p>To delete the contact:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"s1\">'003e0000003GuNXAA0'</span><span class=\"p\">)</span>\n</pre>\n<p>To retrieve a list of deleted records between <tt><span class=\"pre\">2013-10-20</span></tt> to <tt><span class=\"pre\">2013-10-29</span></tt> (datetimes are required to be in UTC):</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">pytz</span>\n<span class=\"kn\">import</span> <span class=\"nn\">datetime</span>\n<span class=\"n\">end</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">(</span><span class=\"n\">pytz</span><span class=\"o\">.</span><span class=\"n\">UTC</span><span class=\"p\">)</span>  <span class=\"c1\"># we need to use UTC as salesforce API requires this!</span>\n<span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">deleted</span><span class=\"p\">(</span><span class=\"n\">end</span> <span class=\"o\">-</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">),</span> <span class=\"n\">end</span><span class=\"p\">)</span>\n</pre>\n<p>To retrieve a list of updated records between <tt><span class=\"pre\">2014-03-20</span></tt> to <tt><span class=\"pre\">2014-03-22</span></tt> (datetimes are required to be in UTC):</p>\n<pre><span class=\"kn\">import</span> <span class=\"nn\">pytz</span>\n<span class=\"kn\">import</span> <span class=\"nn\">datetime</span>\n<span class=\"n\">end</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">(</span><span class=\"n\">pytz</span><span class=\"o\">.</span><span class=\"n\">UTC</span><span class=\"p\">)</span> <span class=\"c1\"># we need to use UTC as salesforce API requires this</span>\n<span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">updated</span><span class=\"p\">(</span><span class=\"n\">end</span> <span class=\"o\">-</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">),</span> <span class=\"n\">end</span><span class=\"p\">)</span>\n</pre>\n<p>Note that Update, Delete and Upsert actions return the associated <a href=\"http://www.salesforce.com/us/developer/docs/api_rest/Content/errorcodes.htm\" rel=\"nofollow\">Salesforce HTTP Status Code</a></p>\n<p>Use the same format to create any record, including \u2018Account\u2019, \u2018Opportunity\u2019, and \u2018Lead\u2019.\nMake sure to have all the required fields for any entry. The <a href=\"https://www.salesforce.com/developer/docs/api/\" rel=\"nofollow\">Salesforce API</a> has all objects found under \u2018Reference -&gt; Standard Objects\u2019 and the required fields can be found there.</p>\n</div>\n<div id=\"queries\">\n<h2>Queries</h2>\n<p>It\u2019s also possible to write select queries in Salesforce Object Query Language (SOQL) and search queries in Salesforce Object Search Language (SOSL).</p>\n<p>SOQL queries are done via:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"s2\">\"SELECT Id, Email FROM Contact WHERE LastName = 'Jones'\"</span><span class=\"p\">)</span>\n</pre>\n<p>If, due to an especially large result, Salesforce adds a <tt>nextRecordsUrl</tt> to your query result, such as <tt>\"nextRecordsUrl\" : <span class=\"pre\">\"/services/data/v26.0/query/01gD0000002HU6KIAW-2000\"</span></tt>, you can pull the additional results with either the ID or the full URL (if using the full URL, you must pass \u2018True\u2019 as your second argument)</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">query_more</span><span class=\"p\">(</span><span class=\"s2\">\"01gD0000002HU6KIAW-2000\"</span><span class=\"p\">)</span>\n<span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">query_more</span><span class=\"p\">(</span><span class=\"s2\">\"/services/data/v26.0/query/01gD0000002HU6KIAW-2000\"</span><span class=\"p\">,</span> <span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>As a convenience, to retrieve all of the results in a single local method call use</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">query_all</span><span class=\"p\">(</span><span class=\"s2\">\"SELECT Id, Email FROM Contact WHERE LastName = 'Jones'\"</span><span class=\"p\">)</span>\n</pre>\n<p>SOSL queries are done via:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"s2\">\"FIND </span><span class=\"si\">{Jones}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n</pre>\n<p>There is also \u2018Quick Search\u2019, which inserts your query inside the {} in the SOSL syntax. Be careful, there is no escaping!</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">quick_search</span><span class=\"p\">(</span><span class=\"s2\">\"Jones\"</span><span class=\"p\">)</span>\n</pre>\n<p>Search and Quick Search return <tt>None</tt> if there are no records, otherwise they return a dictionary of search results.</p>\n<p>More details about syntax is available on the <a href=\"http://www.salesforce.com/us/developer/docs/soql_sosl/index.htm\" rel=\"nofollow\">Salesforce Query Language Documentation Developer Website</a></p>\n</div>\n<div id=\"lead-conversion\">\n<h2>Lead Conversion</h2>\n<pre><span class=\"p\">(</span><span class=\"n\">convert_success</span><span class=\"p\">,</span> <span class=\"n\">convert_response</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">convert_lead</span><span class=\"p\">(</span><span class=\"n\">lead_id</span><span class=\"o\">=</span><span class=\"n\">lead_sfid</span><span class=\"p\">,</span> <span class=\"n\">account_id</span><span class=\"o\">=</span><span class=\"n\">account_sfid</span><span class=\"p\">)</span>\n</pre>\n<p>Convert Lead returns a tuple containing a boolean status and a convert_response.\nIf convert_success is True then so is convert_response is the contact ID\nIf convert_success is False then so is convert_response is the error code e.g. CANNOT_UPDATE_CONVERTED_LEAD</p>\n</div>\n<div id=\"other-options\">\n<h2>Other Options</h2>\n<p>To insert or update (upsert) a record using an external ID, use:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"s1\">'customExtIdField__c/11999'</span><span class=\"p\">,{</span><span class=\"s1\">'LastName'</span><span class=\"p\">:</span> <span class=\"s1\">'Smith'</span><span class=\"p\">,</span><span class=\"s1\">'Email'</span><span class=\"p\">:</span> <span class=\"s1\">'smith@example.com'</span><span class=\"p\">})</span>\n</pre>\n<p>To retrieve basic metadata use:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">metadata</span><span class=\"p\">()</span>\n</pre>\n<p>To retrieve a description of the object, use:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">describe</span><span class=\"p\">()</span>\n</pre>\n<p>To retrieve a description of the record layout of an object by its record layout unique id, use:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">describe_layout</span><span class=\"p\">(</span><span class=\"s1\">'39wmxcw9r23r492'</span><span class=\"p\">)</span>\n</pre>\n<p>To retrieve a list of top level description of instance metadata, user:</p>\n<pre><span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">describe</span><span class=\"p\">()</span>\n\n<span class=\"k\">for</span> <span class=\"n\">x</span> <span class=\"ow\">in</span> <span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">describe</span><span class=\"p\">()[</span><span class=\"s2\">\"sobjects\"</span><span class=\"p\">]:</span>\n  <span class=\"nb\">print</span> <span class=\"n\">x</span><span class=\"p\">[</span><span class=\"s2\">\"label\"</span><span class=\"p\">]</span>\n</pre>\n</div>\n<div id=\"using-bulk\">\n<h2>Using Bulk</h2>\n<p>You can use this library to access Bulk API functions.</p>\n<p>Create new records:</p>\n<pre><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">[{</span><span class=\"s1\">'LastName'</span><span class=\"p\">:</span><span class=\"s1\">'Smith'</span><span class=\"p\">,</span><span class=\"s1\">'Email'</span><span class=\"p\">:</span><span class=\"s1\">'example@example.com'</span><span class=\"p\">},</span> <span class=\"p\">{</span><span class=\"s1\">'LastName'</span><span class=\"p\">:</span><span class=\"s1\">'Jones'</span><span class=\"p\">,</span><span class=\"s1\">'Email'</span><span class=\"p\">:</span><span class=\"s1\">'test@test.com'</span><span class=\"p\">}]</span>\n\n<span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">bulk</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">insert</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span>\n</pre>\n<p>Update existing records:</p>\n<pre><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">[{</span><span class=\"s1\">'Id'</span><span class=\"p\">:</span> <span class=\"s1\">'0000000000AAAAA'</span><span class=\"p\">,</span> <span class=\"s1\">'Email'</span><span class=\"p\">:</span> <span class=\"s1\">'examplenew@example.com'</span><span class=\"p\">},</span> <span class=\"p\">{</span><span class=\"s1\">'Id'</span><span class=\"p\">:</span> <span class=\"s1\">'0000000000BBBBB'</span><span class=\"p\">,</span> <span class=\"s1\">'Email'</span><span class=\"p\">:</span> <span class=\"s1\">'testnew@test.com'</span><span class=\"p\">}]</span>\n\n<span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">bulk</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">update</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span>\n</pre>\n<p>Upsert records:</p>\n<pre><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">[{</span><span class=\"s1\">'Id'</span><span class=\"p\">:</span> <span class=\"s1\">'0000000000AAAAA'</span><span class=\"p\">,</span> <span class=\"s1\">'Email'</span><span class=\"p\">:</span> <span class=\"s1\">'examplenew2@example.com'</span><span class=\"p\">},</span> <span class=\"p\">{</span><span class=\"s1\">'Id'</span><span class=\"p\">:</span> <span class=\"s1\">''</span><span class=\"p\">,</span> <span class=\"s1\">'Email'</span><span class=\"p\">:</span> <span class=\"s1\">'foo@foo.com'</span><span class=\"p\">}]</span>\n\n<span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">bulk</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"s1\">'Id'</span><span class=\"p\">)</span>\n</pre>\n<p>Query records:</p>\n<pre><span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"s1\">'SELECT Id, Name FROM Account LIMIT 10'</span>\n\n<span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">bulk</span><span class=\"o\">.</span><span class=\"n\">Account</span><span class=\"o\">.</span><span class=\"n\">query</span><span class=\"p\">(</span><span class=\"n\">query</span><span class=\"p\">)</span>\n</pre>\n<p>Delete records (soft deletion):</p>\n<pre><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">[{</span><span class=\"s1\">'Id'</span><span class=\"p\">:</span> <span class=\"s1\">'0000000000AAAAA'</span><span class=\"p\">}]</span>\n\n<span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">bulk</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span>\n</pre>\n<p>Hard deletion:</p>\n<pre><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">[{</span><span class=\"s1\">'Id'</span><span class=\"p\">:</span> <span class=\"s1\">'0000000000BBBBB'</span><span class=\"p\">}]</span>\n\n<span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">bulk</span><span class=\"o\">.</span><span class=\"n\">Contact</span><span class=\"o\">.</span><span class=\"n\">hard_delete</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span>\n</pre>\n</div>\n<div id=\"using-apex\">\n<h2>Using Apex</h2>\n<p>You can also use this library to call custom Apex methods:</p>\n<pre><span class=\"n\">payload</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"s2\">\"activity\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span><span class=\"s2\">\"user\"</span><span class=\"p\">:</span> <span class=\"s2\">\"12345\"</span><span class=\"p\">,</span> <span class=\"s2\">\"action\"</span><span class=\"p\">:</span> <span class=\"s2\">\"update page\"</span><span class=\"p\">,</span> <span class=\"s2\">\"time\"</span><span class=\"p\">:</span> <span class=\"s2\">\"2014-04-21T13:00:15Z\"</span><span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n<span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">sf</span><span class=\"o\">.</span><span class=\"n\">apexecute</span><span class=\"p\">(</span><span class=\"s1\">'User/Activity'</span><span class=\"p\">,</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s1\">'POST'</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">payload</span><span class=\"p\">)</span>\n</pre>\n<p>This would call the endpoint <tt><span class=\"pre\">https://&lt;instance&gt;.salesforce.com/services/apexrest/User/Activity</span></tt> with <tt>data=</tt> as\nthe body content encoded with <tt>json.dumps</tt></p>\n<p>You can read more about Apex on the <a href=\"http://www.salesforce.com/us/developer/docs/apexcode\" rel=\"nofollow\">Force.com Apex Code Developer\u2019s Guide</a></p>\n</div>\n<div id=\"additional-features\">\n<h2>Additional Features</h2>\n<p>There are a few helper classes that are used internally and available to you.</p>\n<p>Included in them are <tt>SalesforceLogin</tt>, which takes in a username, password, security token, optional boolean sandbox indicator and optional version and returns a tuple of <tt>(session_id, sf_instance)</tt> where <cite>session_id</cite> is the session ID to use for authentication to Salesforce and <tt>sf_instance</tt> is the domain of the instance of Salesforce to use for the session.</p>\n<p>For example, to use SalesforceLogin for a sandbox account you\u2019d use:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">simple_salesforce_wrapp</span> <span class=\"kn\">import</span> <span class=\"n\">SalesforceLogin</span>\n<span class=\"n\">session_id</span><span class=\"p\">,</span> <span class=\"n\">instance</span> <span class=\"o\">=</span> <span class=\"n\">SalesforceLogin</span><span class=\"p\">(</span>\n    <span class=\"n\">username</span><span class=\"o\">=</span><span class=\"s1\">'myemail@example.com.sandbox'</span><span class=\"p\">,</span>\n    <span class=\"n\">password</span><span class=\"o\">=</span><span class=\"s1\">'password'</span><span class=\"p\">,</span>\n    <span class=\"n\">security_token</span><span class=\"o\">=</span><span class=\"s1\">'token'</span><span class=\"p\">,</span>\n    <span class=\"n\">sandbox</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre>\n<p>Simply leave off the final <tt>True</tt> if you do not wish to use a sandbox.</p>\n<p>Also exposed is the <tt>SFType</tt> class, which is used internally by the <tt>__getattr__()</tt> method in the <tt>Salesforce()</tt> class and represents a specific SObject type. <tt>SFType</tt> requires <tt>object_name</tt> (i.e. <tt>Contact</tt>), <tt>session_id</tt> (an authentication ID), <tt>sf_instance</tt> (hostname of your Salesforce instance), and an optional <tt>sf_version</tt></p>\n<p>To add a Contact using the default version of the API you\u2019d use:</p>\n<pre><span class=\"kn\">from</span> <span class=\"nn\">simple_salesforce_wrapper</span> <span class=\"kn\">import</span> <span class=\"n\">SFType</span>\n<span class=\"n\">contact</span> <span class=\"o\">=</span> <span class=\"n\">SFType</span><span class=\"p\">(</span><span class=\"s1\">'Contact'</span><span class=\"p\">,</span><span class=\"s1\">'sesssionid'</span><span class=\"p\">,</span><span class=\"s1\">'na1.salesforce.com'</span><span class=\"p\">)</span>\n<span class=\"n\">contact</span><span class=\"o\">.</span><span class=\"n\">create</span><span class=\"p\">({</span><span class=\"s1\">'LastName'</span><span class=\"p\">:</span><span class=\"s1\">'Smith'</span><span class=\"p\">,</span><span class=\"s1\">'Email'</span><span class=\"p\">:</span><span class=\"s1\">'example@example.com'</span><span class=\"p\">})</span>\n</pre>\n<p>To use a proxy server between your client and the SalesForce endpoint, use the proxies argument when creating SalesForce object.\nThe proxy argument is the same as what requests uses, a map of scheme to proxy URL:</p>\n<pre><span class=\"n\">proxies</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"s2\">\"http\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://10.10.1.10:3128\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"https\"</span><span class=\"p\">:</span> <span class=\"s2\">\"http://10.10.1.10:1080\"</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n<span class=\"n\">SalesForce</span><span class=\"p\">(</span><span class=\"n\">instance</span><span class=\"o\">=</span><span class=\"s1\">'na1.salesforce.com'</span><span class=\"p\">,</span> <span class=\"n\">session_id</span><span class=\"o\">=</span><span class=\"s1\">''</span><span class=\"p\">,</span> <span class=\"n\">proxies</span><span class=\"o\">=</span><span class=\"n\">proxies</span><span class=\"p\">)</span>\n</pre>\n<p>All results are returned as JSON converted OrderedDict to preserve order of keys from REST responses.</p>\n</div>\n\n          </div>"}, "last_serial": 3105346, "releases": {"0.2.0": [{"comment_text": "", "digests": {"md5": "4c90fbd3b94b089b48aaa52e22bd9b0f", "sha256": "428abad44d115e489bdc254592e6506886feae2972f61a5a75cf905980177adf"}, "downloads": -1, "filename": "simple-salesforce-wrapper-0.2.0.tar.gz", "has_sig": false, "md5_digest": "4c90fbd3b94b089b48aaa52e22bd9b0f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10087, "upload_time": "2017-08-18T04:44:10", "upload_time_iso_8601": "2017-08-18T04:44:10.361887Z", "url": "https://files.pythonhosted.org/packages/64/26/072e55431118f9b5ef24347c9fc0a1bf515989eee9d4e646a12ee0335fc1/simple-salesforce-wrapper-0.2.0.tar.gz", "yanked": false}]}, "urls": [{"comment_text": "", "digests": {"md5": "4c90fbd3b94b089b48aaa52e22bd9b0f", "sha256": "428abad44d115e489bdc254592e6506886feae2972f61a5a75cf905980177adf"}, "downloads": -1, "filename": "simple-salesforce-wrapper-0.2.0.tar.gz", "has_sig": false, "md5_digest": "4c90fbd3b94b089b48aaa52e22bd9b0f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10087, "upload_time": "2017-08-18T04:44:10", "upload_time_iso_8601": "2017-08-18T04:44:10.361887Z", "url": "https://files.pythonhosted.org/packages/64/26/072e55431118f9b5ef24347c9fc0a1bf515989eee9d4e646a12ee0335fc1/simple-salesforce-wrapper-0.2.0.tar.gz", "yanked": false}], "timestamp": "Fri May  8 03:10:11 2020"}